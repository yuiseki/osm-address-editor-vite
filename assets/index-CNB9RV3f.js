function YF(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const f=Object.getOwnPropertyDescriptor(a,l);f&&Object.defineProperty(e,l,f.get?f:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(l){if(l.ep)return;l.ep=!0;const f=i(l);fetch(l.href,f)}})();var za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var l=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,l.get?l:{enumerable:!0,get:function(){return e[a]}})}),i}var TI={exports:{}},g0={},PI={exports:{}},Br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=Symbol.for("react.element"),JF=Symbol.for("react.portal"),QF=Symbol.for("react.fragment"),eR=Symbol.for("react.strict_mode"),tR=Symbol.for("react.profiler"),rR=Symbol.for("react.provider"),nR=Symbol.for("react.context"),iR=Symbol.for("react.forward_ref"),oR=Symbol.for("react.suspense"),aR=Symbol.for("react.memo"),sR=Symbol.for("react.lazy"),sE=Symbol.iterator;function lR(e){return e===null||typeof e!="object"?null:(e=sE&&e[sE]||e["@@iterator"],typeof e=="function"?e:null)}var AI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},II=Object.assign,CI={};function bf(e,t,i){this.props=e,this.context=t,this.refs=CI,this.updater=i||AI}bf.prototype.isReactComponent={};bf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function MI(){}MI.prototype=bf.prototype;function _w(e,t,i){this.props=e,this.context=t,this.refs=CI,this.updater=i||AI}var xw=_w.prototype=new MI;xw.constructor=_w;II(xw,bf.prototype);xw.isPureReactComponent=!0;var lE=Array.isArray,kI=Object.prototype.hasOwnProperty,ww={current:null},OI={key:!0,ref:!0,__self:!0,__source:!0};function FI(e,t,i){var a,l={},f=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(f=""+t.key),t)kI.call(t,a)&&!OI.hasOwnProperty(a)&&(l[a]=t[a]);var u=arguments.length-2;if(u===1)l.children=i;else if(1<u){for(var w=Array(u),E=0;E<u;E++)w[E]=arguments[E+2];l.children=w}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)l[a]===void 0&&(l[a]=u[a]);return{$$typeof:Dp,type:e,key:f,ref:d,props:l,_owner:ww.current}}function uR(e,t){return{$$typeof:Dp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dp}function cR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var uE=/\/+/g;function Vv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cR(""+e.key):t.toString(36)}function Tg(e,t,i,a,l){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(f){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Dp:case JF:d=!0}}if(d)return d=e,l=l(d),e=a===""?"."+Vv(d,0):a,lE(l)?(i="",e!=null&&(i=e.replace(uE,"$&/")+"/"),Tg(l,t,i,"",function(E){return E})):l!=null&&(bw(l)&&(l=uR(l,i+(!l.key||d&&d.key===l.key?"":(""+l.key).replace(uE,"$&/")+"/")+e)),t.push(l)),1;if(d=0,a=a===""?".":a+":",lE(e))for(var u=0;u<e.length;u++){f=e[u];var w=a+Vv(f,u);d+=Tg(f,t,i,w,l)}else if(w=lR(e),typeof w=="function")for(e=w.call(e),u=0;!(f=e.next()).done;)f=f.value,w=a+Vv(f,u++),d+=Tg(f,t,i,w,l);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Dm(e,t,i){if(e==null)return e;var a=[],l=0;return Tg(e,a,"","",function(f){return t.call(i,f,l++)}),a}function hR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fo={current:null},Pg={transition:null},fR={ReactCurrentDispatcher:fo,ReactCurrentBatchConfig:Pg,ReactCurrentOwner:ww};Br.Children={map:Dm,forEach:function(e,t,i){Dm(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Dm(e,function(){t++}),t},toArray:function(e){return Dm(e,function(t){return t})||[]},only:function(e){if(!bw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Br.Component=bf;Br.Fragment=QF;Br.Profiler=tR;Br.PureComponent=_w;Br.StrictMode=eR;Br.Suspense=oR;Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fR;Br.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=II({},e.props),l=e.key,f=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,d=ww.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(w in t)kI.call(t,w)&&!OI.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&u!==void 0?u[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=i;else if(1<w){u=Array(w);for(var E=0;E<w;E++)u[E]=arguments[E+2];a.children=u}return{$$typeof:Dp,type:e.type,key:l,ref:f,props:a,_owner:d}};Br.createContext=function(e){return e={$$typeof:nR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rR,_context:e},e.Consumer=e};Br.createElement=FI;Br.createFactory=function(e){var t=FI.bind(null,e);return t.type=e,t};Br.createRef=function(){return{current:null}};Br.forwardRef=function(e){return{$$typeof:iR,render:e}};Br.isValidElement=bw;Br.lazy=function(e){return{$$typeof:sR,_payload:{_status:-1,_result:e},_init:hR}};Br.memo=function(e,t){return{$$typeof:aR,type:e,compare:t===void 0?null:t}};Br.startTransition=function(e){var t=Pg.transition;Pg.transition={};try{e()}finally{Pg.transition=t}};Br.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Br.useCallback=function(e,t){return fo.current.useCallback(e,t)};Br.useContext=function(e){return fo.current.useContext(e)};Br.useDebugValue=function(){};Br.useDeferredValue=function(e){return fo.current.useDeferredValue(e)};Br.useEffect=function(e,t){return fo.current.useEffect(e,t)};Br.useId=function(){return fo.current.useId()};Br.useImperativeHandle=function(e,t,i){return fo.current.useImperativeHandle(e,t,i)};Br.useInsertionEffect=function(e,t){return fo.current.useInsertionEffect(e,t)};Br.useLayoutEffect=function(e,t){return fo.current.useLayoutEffect(e,t)};Br.useMemo=function(e,t){return fo.current.useMemo(e,t)};Br.useReducer=function(e,t,i){return fo.current.useReducer(e,t,i)};Br.useRef=function(e){return fo.current.useRef(e)};Br.useState=function(e){return fo.current.useState(e)};Br.useSyncExternalStore=function(e,t,i){return fo.current.useSyncExternalStore(e,t,i)};Br.useTransition=function(){return fo.current.useTransition()};Br.version="18.2.0";PI.exports=Br;var vt=PI.exports;const Sw=wf(vt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR=vt,pR=Symbol.for("react.element"),mR=Symbol.for("react.fragment"),gR=Object.prototype.hasOwnProperty,yR=dR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vR={key:!0,ref:!0,__self:!0,__source:!0};function RI(e,t,i){var a,l={},f=null,d=null;i!==void 0&&(f=""+i),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)gR.call(t,a)&&!vR.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)l[a]===void 0&&(l[a]=t[a]);return{$$typeof:pR,type:e,key:f,ref:d,props:l,_owner:yR.current}}g0.Fragment=mR;g0.jsx=RI;g0.jsxs=RI;TI.exports=g0;var yt=TI.exports,jI={exports:{}},Ko={},zI={exports:{}},LI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,de){var we=re.length;re.push(de);e:for(;0<we;){var Pe=we-1>>>1,Ne=re[Pe];if(0<l(Ne,de))re[Pe]=de,re[we]=Ne,we=Pe;else break e}}function i(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var de=re[0],we=re.pop();if(we!==de){re[0]=we;e:for(var Pe=0,Ne=re.length,Ie=Ne>>>1;Pe<Ie;){var Oe=2*(Pe+1)-1,Ze=re[Oe],He=Oe+1,ot=re[He];if(0>l(Ze,we))He<Ne&&0>l(ot,Ze)?(re[Pe]=ot,re[He]=we,Pe=He):(re[Pe]=Ze,re[Oe]=we,Pe=Oe);else if(He<Ne&&0>l(ot,we))re[Pe]=ot,re[He]=we,Pe=He;else break e}}return de}function l(re,de){var we=re.sortIndex-de.sortIndex;return we!==0?we:re.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var w=[],E=[],I=1,b=null,T=3,R=!1,L=!1,j=!1,se=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(re){for(var de=i(E);de!==null;){if(de.callback===null)a(E);else if(de.startTime<=re)a(E),de.sortIndex=de.expirationTime,t(w,de);else break;de=i(E)}}function ae(re){if(j=!1,G(re),!L)if(i(w)!==null)L=!0,he(X);else{var de=i(E);de!==null&&J(ae,de.startTime-re)}}function X(re,de){L=!1,j&&(j=!1,K(z),z=-1),R=!0;var we=T;try{for(G(de),b=i(w);b!==null&&(!(b.expirationTime>de)||re&&!q());){var Pe=b.callback;if(typeof Pe=="function"){b.callback=null,T=b.priorityLevel;var Ne=Pe(b.expirationTime<=de);de=e.unstable_now(),typeof Ne=="function"?b.callback=Ne:b===i(w)&&a(w),G(de)}else a(w);b=i(w)}if(b!==null)var Ie=!0;else{var Oe=i(E);Oe!==null&&J(ae,Oe.startTime-de),Ie=!1}return Ie}finally{b=null,T=we,R=!1}}var U=!1,P=null,z=-1,B=5,Q=-1;function q(){return!(e.unstable_now()-Q<B)}function ve(){if(P!==null){var re=e.unstable_now();Q=re;var de=!0;try{de=P(!0,re)}finally{de?ye():(U=!1,P=null)}}else U=!1}var ye;if(typeof Z=="function")ye=function(){Z(ve)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,oe=fe.port2;fe.port1.onmessage=ve,ye=function(){oe.postMessage(null)}}else ye=function(){se(ve,0)};function he(re){P=re,U||(U=!0,ye())}function J(re,de){z=se(function(){re(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){L||R||(L=!0,he(X))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return i(w)},e.unstable_next=function(re){switch(T){case 1:case 2:case 3:var de=3;break;default:de=T}var we=T;T=de;try{return re()}finally{T=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,de){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var we=T;T=re;try{return de()}finally{T=we}},e.unstable_scheduleCallback=function(re,de,we){var Pe=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Pe+we:Pe):we=Pe,re){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=we+Ne,re={id:I++,callback:de,priorityLevel:re,startTime:we,expirationTime:Ne,sortIndex:-1},we>Pe?(re.sortIndex=we,t(E,re),i(w)===null&&re===i(E)&&(j?(K(z),z=-1):j=!0,J(ae,we-Pe))):(re.sortIndex=Ne,t(w,re),L||R||(L=!0,he(X))),re},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(re){var de=T;return function(){var we=T;T=de;try{return re.apply(this,arguments)}finally{T=we}}}})(LI);zI.exports=LI;var _R=zI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI=vt,Xo=_R;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DI=new Set,hp={};function Sc(e,t){nf(e,t),nf(e+"Capture",t)}function nf(e,t){for(hp[e]=t,e=0;e<t.length;e++)DI.add(t[e])}var ul=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p1=Object.prototype.hasOwnProperty,xR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cE={},hE={};function wR(e){return p1.call(hE,e)?!0:p1.call(cE,e)?!1:xR.test(e)?hE[e]=!0:(cE[e]=!0,!1)}function bR(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SR(e,t,i,a){if(t===null||typeof t>"u"||bR(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function po(e,t,i,a,l,f,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=d}var Ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ri[e]=new po(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ri[t]=new po(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ri[e]=new po(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ri[e]=new po(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ri[e]=new po(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ri[e]=new po(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ri[e]=new po(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ri[e]=new po(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ri[e]=new po(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ew=/[\-:]([a-z])/g;function Tw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ew,Tw);Ri[t]=new po(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ew,Tw);Ri[t]=new po(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ew,Tw);Ri[t]=new po(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ri[e]=new po(e,1,!1,e.toLowerCase(),null,!1,!1)});Ri.xlinkHref=new po("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ri[e]=new po(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pw(e,t,i,a){var l=Ri.hasOwnProperty(t)?Ri[t]:null;(l!==null?l.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SR(t,i,l,a)&&(i=null),a||l===null?wR(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):l.mustUseProperty?e[l.propertyName]=i===null?l.type===3?!1:"":i:(t=l.attributeName,a=l.attributeNamespace,i===null?e.removeAttribute(t):(l=l.type,i=l===3||l===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var yl=BI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nm=Symbol.for("react.element"),Ch=Symbol.for("react.portal"),Mh=Symbol.for("react.fragment"),Aw=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),NI=Symbol.for("react.provider"),$I=Symbol.for("react.context"),Iw=Symbol.for("react.forward_ref"),g1=Symbol.for("react.suspense"),y1=Symbol.for("react.suspense_list"),Cw=Symbol.for("react.memo"),eu=Symbol.for("react.lazy"),UI=Symbol.for("react.offscreen"),fE=Symbol.iterator;function wd(e){return e===null||typeof e!="object"?null:(e=fE&&e[fE]||e["@@iterator"],typeof e=="function"?e:null)}var Rn=Object.assign,Gv;function Fd(e){if(Gv===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Gv=t&&t[1]||""}return`
`+Gv+e}var Wv=!1;function Hv(e,t){if(!e||Wv)return"";Wv=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var a=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){a=E}e.call(t.prototype)}else{try{throw Error()}catch(E){a=E}e()}}catch(E){if(E&&a&&typeof E.stack=="string"){for(var l=E.stack.split(`
`),f=a.stack.split(`
`),d=l.length-1,u=f.length-1;1<=d&&0<=u&&l[d]!==f[u];)u--;for(;1<=d&&0<=u;d--,u--)if(l[d]!==f[u]){if(d!==1||u!==1)do if(d--,u--,0>u||l[d]!==f[u]){var w=`
`+l[d].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=d&&0<=u);break}}}finally{Wv=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Fd(e):""}function ER(e){switch(e.tag){case 5:return Fd(e.type);case 16:return Fd("Lazy");case 13:return Fd("Suspense");case 19:return Fd("SuspenseList");case 0:case 2:case 15:return e=Hv(e.type,!1),e;case 11:return e=Hv(e.type.render,!1),e;case 1:return e=Hv(e.type,!0),e;default:return""}}function v1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mh:return"Fragment";case Ch:return"Portal";case m1:return"Profiler";case Aw:return"StrictMode";case g1:return"Suspense";case y1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $I:return(e.displayName||"Context")+".Consumer";case NI:return(e._context.displayName||"Context")+".Provider";case Iw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cw:return t=e.displayName||null,t!==null?t:v1(e.type)||"Memo";case eu:t=e._payload,e=e._init;try{return v1(e(t))}catch{}}return null}function TR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v1(t);case 8:return t===Aw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function VI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PR(e){var t=VI(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var l=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(d){a=""+d,f.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $m(e){e._valueTracker||(e._valueTracker=PR(e))}function GI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=VI(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function ty(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _1(e,t){var i=t.checked;return Rn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function dE(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=vu(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WI(e,t){t=t.checked,t!=null&&Pw(e,"checked",t,!1)}function x1(e,t){WI(e,t);var i=vu(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?w1(e,t.type,i):t.hasOwnProperty("defaultValue")&&w1(e,t.type,vu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pE(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function w1(e,t,i){(t!=="number"||ty(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Rd=Array.isArray;function Zh(e,t,i,a){if(e=e.options,t){t={};for(var l=0;l<i.length;l++)t["$"+i[l]]=!0;for(i=0;i<e.length;i++)l=t.hasOwnProperty("$"+e[i].value),e[i].selected!==l&&(e[i].selected=l),l&&a&&(e[i].defaultSelected=!0)}else{for(i=""+vu(i),t=null,l=0;l<e.length;l++){if(e[l].value===i){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function b1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Rn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mE(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(Rd(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:vu(i)}}function HI(e,t){var i=vu(t.value),a=vu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function gE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ZI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ZI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Um,qI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,l){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Um=Um||document.createElement("div"),Um.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Um.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fp(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Hd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AR=["Webkit","ms","Moz","O"];Object.keys(Hd).forEach(function(e){AR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hd[t]=Hd[e]})});function XI(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Hd.hasOwnProperty(e)&&Hd[e]?(""+t).trim():t+"px"}function KI(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,l=XI(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,l):e[i]=l}}var IR=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E1(e,t){if(t){if(IR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function T1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P1=null;function Mw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var A1=null,qh=null,Xh=null;function yE(e){if(e=Up(e)){if(typeof A1!="function")throw Error(At(280));var t=e.stateNode;t&&(t=w0(t),A1(e.stateNode,e.type,t))}}function YI(e){qh?Xh?Xh.push(e):Xh=[e]:qh=e}function JI(){if(qh){var e=qh,t=Xh;if(Xh=qh=null,yE(e),t)for(e=0;e<t.length;e++)yE(t[e])}}function QI(e,t){return e(t)}function eC(){}var Zv=!1;function tC(e,t,i){if(Zv)return e(t,i);Zv=!0;try{return QI(e,t,i)}finally{Zv=!1,(qh!==null||Xh!==null)&&(eC(),JI())}}function dp(e,t){var i=e.stateNode;if(i===null)return null;var a=w0(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var I1=!1;if(ul)try{var bd={};Object.defineProperty(bd,"passive",{get:function(){I1=!0}}),window.addEventListener("test",bd,bd),window.removeEventListener("test",bd,bd)}catch{I1=!1}function CR(e,t,i,a,l,f,d,u,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(i,E)}catch(I){this.onError(I)}}var Zd=!1,ry=null,ny=!1,C1=null,MR={onError:function(e){Zd=!0,ry=e}};function kR(e,t,i,a,l,f,d,u,w){Zd=!1,ry=null,CR.apply(MR,arguments)}function OR(e,t,i,a,l,f,d,u,w){if(kR.apply(this,arguments),Zd){if(Zd){var E=ry;Zd=!1,ry=null}else throw Error(At(198));ny||(ny=!0,C1=E)}}function Ec(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function rC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vE(e){if(Ec(e)!==e)throw Error(At(188))}function FR(e){var t=e.alternate;if(!t){if(t=Ec(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var l=i.return;if(l===null)break;var f=l.alternate;if(f===null){if(a=l.return,a!==null){i=a;continue}break}if(l.child===f.child){for(f=l.child;f;){if(f===i)return vE(l),e;if(f===a)return vE(l),t;f=f.sibling}throw Error(At(188))}if(i.return!==a.return)i=l,a=f;else{for(var d=!1,u=l.child;u;){if(u===i){d=!0,i=l,a=f;break}if(u===a){d=!0,a=l,i=f;break}u=u.sibling}if(!d){for(u=f.child;u;){if(u===i){d=!0,i=f,a=l;break}if(u===a){d=!0,a=f,i=l;break}u=u.sibling}if(!d)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function nC(e){return e=FR(e),e!==null?iC(e):null}function iC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iC(e);if(t!==null)return t;e=e.sibling}return null}var oC=Xo.unstable_scheduleCallback,_E=Xo.unstable_cancelCallback,RR=Xo.unstable_shouldYield,jR=Xo.unstable_requestPaint,Hn=Xo.unstable_now,zR=Xo.unstable_getCurrentPriorityLevel,kw=Xo.unstable_ImmediatePriority,aC=Xo.unstable_UserBlockingPriority,iy=Xo.unstable_NormalPriority,LR=Xo.unstable_LowPriority,sC=Xo.unstable_IdlePriority,y0=null,Ps=null;function BR(e){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(y0,e,void 0,(e.current.flags&128)===128)}catch{}}var $a=Math.clz32?Math.clz32:$R,DR=Math.log,NR=Math.LN2;function $R(e){return e>>>=0,e===0?32:31-(DR(e)/NR|0)|0}var Vm=64,Gm=4194304;function jd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oy(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,l=e.suspendedLanes,f=e.pingedLanes,d=i&268435455;if(d!==0){var u=d&~l;u!==0?a=jd(u):(f&=d,f!==0&&(a=jd(f)))}else d=i&~l,d!==0?a=jd(d):f!==0&&(a=jd(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&l)&&(l=a&-a,f=t&-t,l>=f||l===16&&(f&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-$a(t),l=1<<i,a|=e[i],t&=~l;return a}function UR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VR(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,f=e.pendingLanes;0<f;){var d=31-$a(f),u=1<<d,w=l[d];w===-1?(!(u&i)||u&a)&&(l[d]=UR(u,t)):w<=t&&(e.expiredLanes|=u),f&=~u}}function M1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lC(){var e=Vm;return Vm<<=1,!(Vm&4194240)&&(Vm=64),e}function qv(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Np(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$a(t),e[t]=i}function GR(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var l=31-$a(i),f=1<<l;t[l]=0,a[l]=-1,e[l]=-1,i&=~f}}function Ow(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-$a(i),l=1<<a;l&t|e[a]&t&&(e[a]|=t),i&=~l}}var Jr=0;function uC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cC,Fw,hC,fC,dC,k1=!1,Wm=[],uu=null,cu=null,hu=null,pp=new Map,mp=new Map,iu=[],WR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xE(e,t){switch(e){case"focusin":case"focusout":uu=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":hu=null;break;case"pointerover":case"pointerout":pp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mp.delete(t.pointerId)}}function Sd(e,t,i,a,l,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:f,targetContainers:[l]},t!==null&&(t=Up(t),t!==null&&Fw(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function HR(e,t,i,a,l){switch(t){case"focusin":return uu=Sd(uu,e,t,i,a,l),!0;case"dragenter":return cu=Sd(cu,e,t,i,a,l),!0;case"mouseover":return hu=Sd(hu,e,t,i,a,l),!0;case"pointerover":var f=l.pointerId;return pp.set(f,Sd(pp.get(f)||null,e,t,i,a,l)),!0;case"gotpointercapture":return f=l.pointerId,mp.set(f,Sd(mp.get(f)||null,e,t,i,a,l)),!0}return!1}function pC(e){var t=oc(e.target);if(t!==null){var i=Ec(t);if(i!==null){if(t=i.tag,t===13){if(t=rC(i),t!==null){e.blockedOn=t,dC(e.priority,function(){hC(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ag(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=O1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);P1=a,i.target.dispatchEvent(a),P1=null}else return t=Up(i),t!==null&&Fw(t),e.blockedOn=i,!1;t.shift()}return!0}function wE(e,t,i){Ag(e)&&i.delete(t)}function ZR(){k1=!1,uu!==null&&Ag(uu)&&(uu=null),cu!==null&&Ag(cu)&&(cu=null),hu!==null&&Ag(hu)&&(hu=null),pp.forEach(wE),mp.forEach(wE)}function Ed(e,t){e.blockedOn===t&&(e.blockedOn=null,k1||(k1=!0,Xo.unstable_scheduleCallback(Xo.unstable_NormalPriority,ZR)))}function gp(e){function t(l){return Ed(l,e)}if(0<Wm.length){Ed(Wm[0],e);for(var i=1;i<Wm.length;i++){var a=Wm[i];a.blockedOn===e&&(a.blockedOn=null)}}for(uu!==null&&Ed(uu,e),cu!==null&&Ed(cu,e),hu!==null&&Ed(hu,e),pp.forEach(t),mp.forEach(t),i=0;i<iu.length;i++)a=iu[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<iu.length&&(i=iu[0],i.blockedOn===null);)pC(i),i.blockedOn===null&&iu.shift()}var Kh=yl.ReactCurrentBatchConfig,ay=!0;function qR(e,t,i,a){var l=Jr,f=Kh.transition;Kh.transition=null;try{Jr=1,Rw(e,t,i,a)}finally{Jr=l,Kh.transition=f}}function XR(e,t,i,a){var l=Jr,f=Kh.transition;Kh.transition=null;try{Jr=4,Rw(e,t,i,a)}finally{Jr=l,Kh.transition=f}}function Rw(e,t,i,a){if(ay){var l=O1(e,t,i,a);if(l===null)i_(e,t,a,sy,i),xE(e,a);else if(HR(l,e,t,i,a))a.stopPropagation();else if(xE(e,a),t&4&&-1<WR.indexOf(e)){for(;l!==null;){var f=Up(l);if(f!==null&&cC(f),f=O1(e,t,i,a),f===null&&i_(e,t,a,sy,i),f===l)break;l=f}l!==null&&a.stopPropagation()}else i_(e,t,a,null,i)}}var sy=null;function O1(e,t,i,a){if(sy=null,e=Mw(a),e=oc(e),e!==null)if(t=Ec(e),t===null)e=null;else if(i=t.tag,i===13){if(e=rC(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sy=e,null}function mC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zR()){case kw:return 1;case aC:return 4;case iy:case LR:return 16;case sC:return 536870912;default:return 16}default:return 16}}var au=null,jw=null,Ig=null;function gC(){if(Ig)return Ig;var e,t=jw,i=t.length,a,l="value"in au?au.value:au.textContent,f=l.length;for(e=0;e<i&&t[e]===l[e];e++);var d=i-e;for(a=1;a<=d&&t[i-a]===l[f-a];a++);return Ig=l.slice(e,1<a?1-a:void 0)}function Cg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hm(){return!0}function bE(){return!1}function Yo(e){function t(i,a,l,f,d){this._reactName=i,this._targetInst=l,this.type=a,this.nativeEvent=f,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(f):f[u]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Hm:bE,this.isPropagationStopped=bE,this}return Rn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Hm)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Hm)},persist:function(){},isPersistent:Hm}),t}var Sf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zw=Yo(Sf),$p=Rn({},Sf,{view:0,detail:0}),KR=Yo($p),Xv,Kv,Td,v0=Rn({},$p,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Td&&(Td&&e.type==="mousemove"?(Xv=e.screenX-Td.screenX,Kv=e.screenY-Td.screenY):Kv=Xv=0,Td=e),Xv)},movementY:function(e){return"movementY"in e?e.movementY:Kv}}),SE=Yo(v0),YR=Rn({},v0,{dataTransfer:0}),JR=Yo(YR),QR=Rn({},$p,{relatedTarget:0}),Yv=Yo(QR),ej=Rn({},Sf,{animationName:0,elapsedTime:0,pseudoElement:0}),tj=Yo(ej),rj=Rn({},Sf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nj=Yo(rj),ij=Rn({},Sf,{data:0}),EE=Yo(ij),oj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sj[e])?!!t[e]:!1}function Lw(){return lj}var uj=Rn({},$p,{key:function(e){if(e.key){var t=oj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lw,charCode:function(e){return e.type==="keypress"?Cg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cj=Yo(uj),hj=Rn({},v0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TE=Yo(hj),fj=Rn({},$p,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lw}),dj=Yo(fj),pj=Rn({},Sf,{propertyName:0,elapsedTime:0,pseudoElement:0}),mj=Yo(pj),gj=Rn({},v0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yj=Yo(gj),vj=[9,13,27,32],Bw=ul&&"CompositionEvent"in window,qd=null;ul&&"documentMode"in document&&(qd=document.documentMode);var _j=ul&&"TextEvent"in window&&!qd,yC=ul&&(!Bw||qd&&8<qd&&11>=qd),PE=" ",AE=!1;function vC(e,t){switch(e){case"keyup":return vj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _C(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kh=!1;function xj(e,t){switch(e){case"compositionend":return _C(t);case"keypress":return t.which!==32?null:(AE=!0,PE);case"textInput":return e=t.data,e===PE&&AE?null:e;default:return null}}function wj(e,t){if(kh)return e==="compositionend"||!Bw&&vC(e,t)?(e=gC(),Ig=jw=au=null,kh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yC&&t.locale!=="ko"?null:t.data;default:return null}}var bj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bj[e.type]:t==="textarea"}function xC(e,t,i,a){YI(a),t=ly(t,"onChange"),0<t.length&&(i=new zw("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Xd=null,yp=null;function Sj(e){kC(e,0)}function _0(e){var t=Rh(e);if(GI(t))return e}function Ej(e,t){if(e==="change")return t}var wC=!1;if(ul){var Jv;if(ul){var Qv="oninput"in document;if(!Qv){var CE=document.createElement("div");CE.setAttribute("oninput","return;"),Qv=typeof CE.oninput=="function"}Jv=Qv}else Jv=!1;wC=Jv&&(!document.documentMode||9<document.documentMode)}function ME(){Xd&&(Xd.detachEvent("onpropertychange",bC),yp=Xd=null)}function bC(e){if(e.propertyName==="value"&&_0(yp)){var t=[];xC(t,yp,e,Mw(e)),tC(Sj,t)}}function Tj(e,t,i){e==="focusin"?(ME(),Xd=t,yp=i,Xd.attachEvent("onpropertychange",bC)):e==="focusout"&&ME()}function Pj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _0(yp)}function Aj(e,t){if(e==="click")return _0(t)}function Ij(e,t){if(e==="input"||e==="change")return _0(t)}function Cj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ga=typeof Object.is=="function"?Object.is:Cj;function vp(e,t){if(Ga(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var l=i[a];if(!p1.call(t,l)||!Ga(e[l],t[l]))return!1}return!0}function kE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function OE(e,t){var i=kE(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=kE(i)}}function SC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function EC(){for(var e=window,t=ty();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ty(e.document)}return t}function Dw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Mj(e){var t=EC(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&SC(i.ownerDocument.documentElement,i)){if(a!==null&&Dw(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=i.textContent.length,f=Math.min(a.start,l);a=a.end===void 0?f:Math.min(a.end,l),!e.extend&&f>a&&(l=a,a=f,f=l),l=OE(i,f);var d=OE(i,a);l&&d&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kj=ul&&"documentMode"in document&&11>=document.documentMode,Oh=null,F1=null,Kd=null,R1=!1;function FE(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;R1||Oh==null||Oh!==ty(a)||(a=Oh,"selectionStart"in a&&Dw(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Kd&&vp(Kd,a)||(Kd=a,a=ly(F1,"onSelect"),0<a.length&&(t=new zw("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Oh)))}function Zm(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Fh={animationend:Zm("Animation","AnimationEnd"),animationiteration:Zm("Animation","AnimationIteration"),animationstart:Zm("Animation","AnimationStart"),transitionend:Zm("Transition","TransitionEnd")},e_={},TC={};ul&&(TC=document.createElement("div").style,"AnimationEvent"in window||(delete Fh.animationend.animation,delete Fh.animationiteration.animation,delete Fh.animationstart.animation),"TransitionEvent"in window||delete Fh.transitionend.transition);function x0(e){if(e_[e])return e_[e];if(!Fh[e])return e;var t=Fh[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in TC)return e_[e]=t[i];return e}var PC=x0("animationend"),AC=x0("animationiteration"),IC=x0("animationstart"),CC=x0("transitionend"),MC=new Map,RE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eu(e,t){MC.set(e,t),Sc(t,[e])}for(var t_=0;t_<RE.length;t_++){var r_=RE[t_],Oj=r_.toLowerCase(),Fj=r_[0].toUpperCase()+r_.slice(1);Eu(Oj,"on"+Fj)}Eu(PC,"onAnimationEnd");Eu(AC,"onAnimationIteration");Eu(IC,"onAnimationStart");Eu("dblclick","onDoubleClick");Eu("focusin","onFocus");Eu("focusout","onBlur");Eu(CC,"onTransitionEnd");nf("onMouseEnter",["mouseout","mouseover"]);nf("onMouseLeave",["mouseout","mouseover"]);nf("onPointerEnter",["pointerout","pointerover"]);nf("onPointerLeave",["pointerout","pointerover"]);Sc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rj=new Set("cancel close invalid load scroll toggle".split(" ").concat(zd));function jE(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,OR(a,t,void 0,e),e.currentTarget=null}function kC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],l=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var d=a.length-1;0<=d;d--){var u=a[d],w=u.instance,E=u.currentTarget;if(u=u.listener,w!==f&&l.isPropagationStopped())break e;jE(l,u,E),f=w}else for(d=0;d<a.length;d++){if(u=a[d],w=u.instance,E=u.currentTarget,u=u.listener,w!==f&&l.isPropagationStopped())break e;jE(l,u,E),f=w}}}if(ny)throw e=C1,ny=!1,C1=null,e}function gn(e,t){var i=t[D1];i===void 0&&(i=t[D1]=new Set);var a=e+"__bubble";i.has(a)||(OC(t,e,2,!1),i.add(a))}function n_(e,t,i){var a=0;t&&(a|=4),OC(i,e,a,t)}var qm="_reactListening"+Math.random().toString(36).slice(2);function _p(e){if(!e[qm]){e[qm]=!0,DI.forEach(function(i){i!=="selectionchange"&&(Rj.has(i)||n_(i,!1,e),n_(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qm]||(t[qm]=!0,n_("selectionchange",!1,t))}}function OC(e,t,i,a){switch(mC(t)){case 1:var l=qR;break;case 4:l=XR;break;default:l=Rw}i=l.bind(null,t,i,e),l=void 0,!I1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(t,i,{capture:!0,passive:l}):e.addEventListener(t,i,!0):l!==void 0?e.addEventListener(t,i,{passive:l}):e.addEventListener(t,i,!1)}function i_(e,t,i,a,l){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var u=a.stateNode.containerInfo;if(u===l||u.nodeType===8&&u.parentNode===l)break;if(d===4)for(d=a.return;d!==null;){var w=d.tag;if((w===3||w===4)&&(w=d.stateNode.containerInfo,w===l||w.nodeType===8&&w.parentNode===l))return;d=d.return}for(;u!==null;){if(d=oc(u),d===null)return;if(w=d.tag,w===5||w===6){a=f=d;continue e}u=u.parentNode}}a=a.return}tC(function(){var E=f,I=Mw(i),b=[];e:{var T=MC.get(e);if(T!==void 0){var R=zw,L=e;switch(e){case"keypress":if(Cg(i)===0)break e;case"keydown":case"keyup":R=cj;break;case"focusin":L="focus",R=Yv;break;case"focusout":L="blur",R=Yv;break;case"beforeblur":case"afterblur":R=Yv;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=SE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=JR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=dj;break;case PC:case AC:case IC:R=tj;break;case CC:R=mj;break;case"scroll":R=KR;break;case"wheel":R=yj;break;case"copy":case"cut":case"paste":R=nj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=TE}var j=(t&4)!==0,se=!j&&e==="scroll",K=j?T!==null?T+"Capture":null:T;j=[];for(var Z=E,G;Z!==null;){G=Z;var ae=G.stateNode;if(G.tag===5&&ae!==null&&(G=ae,K!==null&&(ae=dp(Z,K),ae!=null&&j.push(xp(Z,ae,G)))),se)break;Z=Z.return}0<j.length&&(T=new R(T,L,null,i,I),b.push({event:T,listeners:j}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",T&&i!==P1&&(L=i.relatedTarget||i.fromElement)&&(oc(L)||L[cl]))break e;if((R||T)&&(T=I.window===I?I:(T=I.ownerDocument)?T.defaultView||T.parentWindow:window,R?(L=i.relatedTarget||i.toElement,R=E,L=L?oc(L):null,L!==null&&(se=Ec(L),L!==se||L.tag!==5&&L.tag!==6)&&(L=null)):(R=null,L=E),R!==L)){if(j=SE,ae="onMouseLeave",K="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(j=TE,ae="onPointerLeave",K="onPointerEnter",Z="pointer"),se=R==null?T:Rh(R),G=L==null?T:Rh(L),T=new j(ae,Z+"leave",R,i,I),T.target=se,T.relatedTarget=G,ae=null,oc(I)===E&&(j=new j(K,Z+"enter",L,i,I),j.target=G,j.relatedTarget=se,ae=j),se=ae,R&&L)t:{for(j=R,K=L,Z=0,G=j;G;G=vh(G))Z++;for(G=0,ae=K;ae;ae=vh(ae))G++;for(;0<Z-G;)j=vh(j),Z--;for(;0<G-Z;)K=vh(K),G--;for(;Z--;){if(j===K||K!==null&&j===K.alternate)break t;j=vh(j),K=vh(K)}j=null}else j=null;R!==null&&zE(b,T,R,j,!1),L!==null&&se!==null&&zE(b,se,L,j,!0)}}e:{if(T=E?Rh(E):window,R=T.nodeName&&T.nodeName.toLowerCase(),R==="select"||R==="input"&&T.type==="file")var X=Ej;else if(IE(T))if(wC)X=Ij;else{X=Pj;var U=Tj}else(R=T.nodeName)&&R.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=Aj);if(X&&(X=X(e,E))){xC(b,X,i,I);break e}U&&U(e,T,E),e==="focusout"&&(U=T._wrapperState)&&U.controlled&&T.type==="number"&&w1(T,"number",T.value)}switch(U=E?Rh(E):window,e){case"focusin":(IE(U)||U.contentEditable==="true")&&(Oh=U,F1=E,Kd=null);break;case"focusout":Kd=F1=Oh=null;break;case"mousedown":R1=!0;break;case"contextmenu":case"mouseup":case"dragend":R1=!1,FE(b,i,I);break;case"selectionchange":if(kj)break;case"keydown":case"keyup":FE(b,i,I)}var P;if(Bw)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else kh?vC(e,i)&&(z="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(z="onCompositionStart");z&&(yC&&i.locale!=="ko"&&(kh||z!=="onCompositionStart"?z==="onCompositionEnd"&&kh&&(P=gC()):(au=I,jw="value"in au?au.value:au.textContent,kh=!0)),U=ly(E,z),0<U.length&&(z=new EE(z,e,null,i,I),b.push({event:z,listeners:U}),P?z.data=P:(P=_C(i),P!==null&&(z.data=P)))),(P=_j?xj(e,i):wj(e,i))&&(E=ly(E,"onBeforeInput"),0<E.length&&(I=new EE("onBeforeInput","beforeinput",null,i,I),b.push({event:I,listeners:E}),I.data=P))}kC(b,t)})}function xp(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ly(e,t){for(var i=t+"Capture",a=[];e!==null;){var l=e,f=l.stateNode;l.tag===5&&f!==null&&(l=f,f=dp(e,i),f!=null&&a.unshift(xp(e,f,l)),f=dp(e,t),f!=null&&a.push(xp(e,f,l))),e=e.return}return a}function vh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zE(e,t,i,a,l){for(var f=t._reactName,d=[];i!==null&&i!==a;){var u=i,w=u.alternate,E=u.stateNode;if(w!==null&&w===a)break;u.tag===5&&E!==null&&(u=E,l?(w=dp(i,f),w!=null&&d.unshift(xp(i,w,u))):l||(w=dp(i,f),w!=null&&d.push(xp(i,w,u)))),i=i.return}d.length!==0&&e.push({event:t,listeners:d})}var jj=/\r\n?/g,zj=/\u0000|\uFFFD/g;function LE(e){return(typeof e=="string"?e:""+e).replace(jj,`
`).replace(zj,"")}function Xm(e,t,i){if(t=LE(t),LE(e)!==t&&i)throw Error(At(425))}function uy(){}var j1=null,z1=null;function L1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var B1=typeof setTimeout=="function"?setTimeout:void 0,Lj=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,Bj=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(e){return BE.resolve(null).then(e).catch(Dj)}:B1;function Dj(e){setTimeout(function(){throw e})}function o_(e,t){var i=t,a=0;do{var l=i.nextSibling;if(e.removeChild(i),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(a===0){e.removeChild(l),gp(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=l}while(i);gp(t)}function fu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Ef=Math.random().toString(36).slice(2),ws="__reactFiber$"+Ef,wp="__reactProps$"+Ef,cl="__reactContainer$"+Ef,D1="__reactEvents$"+Ef,Nj="__reactListeners$"+Ef,$j="__reactHandles$"+Ef;function oc(e){var t=e[ws];if(t)return t;for(var i=e.parentNode;i;){if(t=i[cl]||i[ws]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=DE(e);e!==null;){if(i=e[ws])return i;e=DE(e)}return t}e=i,i=e.parentNode}return null}function Up(e){return e=e[ws]||e[cl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function w0(e){return e[wp]||null}var N1=[],jh=-1;function Tu(e){return{current:e}}function vn(e){0>jh||(e.current=N1[jh],N1[jh]=null,jh--)}function dn(e,t){jh++,N1[jh]=e.current,e.current=t}var _u={},Ki=Tu(_u),Po=Tu(!1),pc=_u;function of(e,t){var i=e.type.contextTypes;if(!i)return _u;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var l={},f;for(f in i)l[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Ao(e){return e=e.childContextTypes,e!=null}function cy(){vn(Po),vn(Ki)}function NE(e,t,i){if(Ki.current!==_u)throw Error(At(168));dn(Ki,t),dn(Po,i)}function FC(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var l in a)if(!(l in t))throw Error(At(108,TR(e)||"Unknown",l));return Rn({},i,a)}function hy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_u,pc=Ki.current,dn(Ki,e),dn(Po,Po.current),!0}function $E(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=FC(e,t,pc),a.__reactInternalMemoizedMergedChildContext=e,vn(Po),vn(Ki),dn(Ki,e)):vn(Po),dn(Po,i)}var rl=null,b0=!1,a_=!1;function RC(e){rl===null?rl=[e]:rl.push(e)}function Uj(e){b0=!0,RC(e)}function Pu(){if(!a_&&rl!==null){a_=!0;var e=0,t=Jr;try{var i=rl;for(Jr=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}rl=null,b0=!1}catch(l){throw rl!==null&&(rl=rl.slice(e+1)),oC(kw,Pu),l}finally{Jr=t,a_=!1}}return null}var zh=[],Lh=0,fy=null,dy=0,la=[],ua=0,mc=null,ol=1,al="";function rc(e,t){zh[Lh++]=dy,zh[Lh++]=fy,fy=e,dy=t}function jC(e,t,i){la[ua++]=ol,la[ua++]=al,la[ua++]=mc,mc=e;var a=ol;e=al;var l=32-$a(a)-1;a&=~(1<<l),i+=1;var f=32-$a(t)+l;if(30<f){var d=l-l%5;f=(a&(1<<d)-1).toString(32),a>>=d,l-=d,ol=1<<32-$a(t)+l|i<<l|a,al=f+e}else ol=1<<f|i<<l|a,al=e}function Nw(e){e.return!==null&&(rc(e,1),jC(e,1,0))}function $w(e){for(;e===fy;)fy=zh[--Lh],zh[Lh]=null,dy=zh[--Lh],zh[Lh]=null;for(;e===mc;)mc=la[--ua],la[ua]=null,al=la[--ua],la[ua]=null,ol=la[--ua],la[ua]=null}var qo=null,Zo=null,Sn=!1,ja=null;function zC(e,t){var i=ha(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function UE(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qo=e,Zo=fu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qo=e,Zo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=mc!==null?{id:ol,overflow:al}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ha(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,qo=e,Zo=null,!0):!1;default:return!1}}function $1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function U1(e){if(Sn){var t=Zo;if(t){var i=t;if(!UE(e,t)){if($1(e))throw Error(At(418));t=fu(i.nextSibling);var a=qo;t&&UE(e,t)?zC(a,i):(e.flags=e.flags&-4097|2,Sn=!1,qo=e)}}else{if($1(e))throw Error(At(418));e.flags=e.flags&-4097|2,Sn=!1,qo=e}}}function VE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qo=e}function Km(e){if(e!==qo)return!1;if(!Sn)return VE(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!L1(e.type,e.memoizedProps)),t&&(t=Zo)){if($1(e))throw LC(),Error(At(418));for(;t;)zC(e,t),t=fu(t.nextSibling)}if(VE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Zo=fu(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Zo=null}}else Zo=qo?fu(e.stateNode.nextSibling):null;return!0}function LC(){for(var e=Zo;e;)e=fu(e.nextSibling)}function af(){Zo=qo=null,Sn=!1}function Uw(e){ja===null?ja=[e]:ja.push(e)}var Vj=yl.ReactCurrentBatchConfig;function Fa(e,t){if(e&&e.defaultProps){t=Rn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var py=Tu(null),my=null,Bh=null,Vw=null;function Gw(){Vw=Bh=my=null}function Ww(e){var t=py.current;vn(py),e._currentValue=t}function V1(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function Yh(e,t){my=e,Vw=Bh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(To=!0),e.firstContext=null)}function pa(e){var t=e._currentValue;if(Vw!==e)if(e={context:e,memoizedValue:t,next:null},Bh===null){if(my===null)throw Error(At(308));Bh=e,my.dependencies={lanes:0,firstContext:e}}else Bh=Bh.next=e;return t}var ac=null;function Hw(e){ac===null?ac=[e]:ac.push(e)}function BC(e,t,i,a){var l=t.interleaved;return l===null?(i.next=i,Hw(t)):(i.next=l.next,l.next=i),t.interleaved=i,hl(e,a)}function hl(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var tu=!1;function Zw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ll(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function du(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Ur&2){var l=a.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),a.pending=t,hl(e,i)}return l=a.interleaved,l===null?(t.next=t,Hw(a)):(t.next=l.next,l.next=t),a.interleaved=t,hl(e,i)}function Mg(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,Ow(e,i)}}function GE(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var l=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?l=f=d:f=f.next=d,i=i.next}while(i!==null);f===null?l=f=t:f=f.next=t}else l=f=t;i={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function gy(e,t,i,a){var l=e.updateQueue;tu=!1;var f=l.firstBaseUpdate,d=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var w=u,E=w.next;w.next=null,d===null?f=E:d.next=E,d=w;var I=e.alternate;I!==null&&(I=I.updateQueue,u=I.lastBaseUpdate,u!==d&&(u===null?I.firstBaseUpdate=E:u.next=E,I.lastBaseUpdate=w))}if(f!==null){var b=l.baseState;d=0,I=E=w=null,u=f;do{var T=u.lane,R=u.eventTime;if((a&T)===T){I!==null&&(I=I.next={eventTime:R,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var L=e,j=u;switch(T=t,R=i,j.tag){case 1:if(L=j.payload,typeof L=="function"){b=L.call(R,b,T);break e}b=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=j.payload,T=typeof L=="function"?L.call(R,b,T):L,T==null)break e;b=Rn({},b,T);break e;case 2:tu=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,T=l.effects,T===null?l.effects=[u]:T.push(u))}else R={eventTime:R,lane:T,tag:u.tag,payload:u.payload,callback:u.callback,next:null},I===null?(E=I=R,w=b):I=I.next=R,d|=T;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;T=u,u=T.next,T.next=null,l.lastBaseUpdate=T,l.shared.pending=null}}while(!0);if(I===null&&(w=b),l.baseState=w,l.firstBaseUpdate=E,l.lastBaseUpdate=I,t=l.shared.interleaved,t!==null){l=t;do d|=l.lane,l=l.next;while(l!==t)}else f===null&&(l.shared.lanes=0);yc|=d,e.lanes=d,e.memoizedState=b}}function WE(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],l=a.callback;if(l!==null){if(a.callback=null,a=i,typeof l!="function")throw Error(At(191,l));l.call(a)}}}var NC=new BI.Component().refs;function G1(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Rn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var S0={isMounted:function(e){return(e=e._reactInternals)?Ec(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=lo(),l=mu(e),f=ll(a,l);f.payload=t,i!=null&&(f.callback=i),t=du(e,f,l),t!==null&&(Ua(t,e,l,a),Mg(t,e,l))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=lo(),l=mu(e),f=ll(a,l);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=du(e,f,l),t!==null&&(Ua(t,e,l,a),Mg(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=lo(),a=mu(e),l=ll(i,a);l.tag=2,t!=null&&(l.callback=t),t=du(e,l,a),t!==null&&(Ua(t,e,a,i),Mg(t,e,a))}};function HE(e,t,i,a,l,f,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,d):t.prototype&&t.prototype.isPureReactComponent?!vp(i,a)||!vp(l,f):!0}function $C(e,t,i){var a=!1,l=_u,f=t.contextType;return typeof f=="object"&&f!==null?f=pa(f):(l=Ao(t)?pc:Ki.current,a=t.contextTypes,f=(a=a!=null)?of(e,l):_u),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=S0,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=f),t}function ZE(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&S0.enqueueReplaceState(t,t.state,null)}function W1(e,t,i,a){var l=e.stateNode;l.props=i,l.state=e.memoizedState,l.refs=NC,Zw(e);var f=t.contextType;typeof f=="object"&&f!==null?l.context=pa(f):(f=Ao(t)?pc:Ki.current,l.context=of(e,f)),l.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(G1(e,t,f,i),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&S0.enqueueReplaceState(l,l.state,null),gy(e,i,l,a),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Pd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var l=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(d){var u=l.refs;u===NC&&(u=l.refs={}),d===null?delete u[f]:u[f]=d},t._stringRef=f,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function Ym(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qE(e){var t=e._init;return t(e._payload)}function UC(e){function t(K,Z){if(e){var G=K.deletions;G===null?(K.deletions=[Z],K.flags|=16):G.push(Z)}}function i(K,Z){if(!e)return null;for(;Z!==null;)t(K,Z),Z=Z.sibling;return null}function a(K,Z){for(K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function l(K,Z){return K=gu(K,Z),K.index=0,K.sibling=null,K}function f(K,Z,G){return K.index=G,e?(G=K.alternate,G!==null?(G=G.index,G<Z?(K.flags|=2,Z):G):(K.flags|=2,Z)):(K.flags|=1048576,Z)}function d(K){return e&&K.alternate===null&&(K.flags|=2),K}function u(K,Z,G,ae){return Z===null||Z.tag!==6?(Z=d_(G,K.mode,ae),Z.return=K,Z):(Z=l(Z,G),Z.return=K,Z)}function w(K,Z,G,ae){var X=G.type;return X===Mh?I(K,Z,G.props.children,ae,G.key):Z!==null&&(Z.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===eu&&qE(X)===Z.type)?(ae=l(Z,G.props),ae.ref=Pd(K,Z,G),ae.return=K,ae):(ae=zg(G.type,G.key,G.props,null,K.mode,ae),ae.ref=Pd(K,Z,G),ae.return=K,ae)}function E(K,Z,G,ae){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==G.containerInfo||Z.stateNode.implementation!==G.implementation?(Z=p_(G,K.mode,ae),Z.return=K,Z):(Z=l(Z,G.children||[]),Z.return=K,Z)}function I(K,Z,G,ae,X){return Z===null||Z.tag!==7?(Z=hc(G,K.mode,ae,X),Z.return=K,Z):(Z=l(Z,G),Z.return=K,Z)}function b(K,Z,G){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=d_(""+Z,K.mode,G),Z.return=K,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Nm:return G=zg(Z.type,Z.key,Z.props,null,K.mode,G),G.ref=Pd(K,null,Z),G.return=K,G;case Ch:return Z=p_(Z,K.mode,G),Z.return=K,Z;case eu:var ae=Z._init;return b(K,ae(Z._payload),G)}if(Rd(Z)||wd(Z))return Z=hc(Z,K.mode,G,null),Z.return=K,Z;Ym(K,Z)}return null}function T(K,Z,G,ae){var X=Z!==null?Z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return X!==null?null:u(K,Z,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Nm:return G.key===X?w(K,Z,G,ae):null;case Ch:return G.key===X?E(K,Z,G,ae):null;case eu:return X=G._init,T(K,Z,X(G._payload),ae)}if(Rd(G)||wd(G))return X!==null?null:I(K,Z,G,ae,null);Ym(K,G)}return null}function R(K,Z,G,ae,X){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return K=K.get(G)||null,u(Z,K,""+ae,X);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Nm:return K=K.get(ae.key===null?G:ae.key)||null,w(Z,K,ae,X);case Ch:return K=K.get(ae.key===null?G:ae.key)||null,E(Z,K,ae,X);case eu:var U=ae._init;return R(K,Z,G,U(ae._payload),X)}if(Rd(ae)||wd(ae))return K=K.get(G)||null,I(Z,K,ae,X,null);Ym(Z,ae)}return null}function L(K,Z,G,ae){for(var X=null,U=null,P=Z,z=Z=0,B=null;P!==null&&z<G.length;z++){P.index>z?(B=P,P=null):B=P.sibling;var Q=T(K,P,G[z],ae);if(Q===null){P===null&&(P=B);break}e&&P&&Q.alternate===null&&t(K,P),Z=f(Q,Z,z),U===null?X=Q:U.sibling=Q,U=Q,P=B}if(z===G.length)return i(K,P),Sn&&rc(K,z),X;if(P===null){for(;z<G.length;z++)P=b(K,G[z],ae),P!==null&&(Z=f(P,Z,z),U===null?X=P:U.sibling=P,U=P);return Sn&&rc(K,z),X}for(P=a(K,P);z<G.length;z++)B=R(P,K,z,G[z],ae),B!==null&&(e&&B.alternate!==null&&P.delete(B.key===null?z:B.key),Z=f(B,Z,z),U===null?X=B:U.sibling=B,U=B);return e&&P.forEach(function(q){return t(K,q)}),Sn&&rc(K,z),X}function j(K,Z,G,ae){var X=wd(G);if(typeof X!="function")throw Error(At(150));if(G=X.call(G),G==null)throw Error(At(151));for(var U=X=null,P=Z,z=Z=0,B=null,Q=G.next();P!==null&&!Q.done;z++,Q=G.next()){P.index>z?(B=P,P=null):B=P.sibling;var q=T(K,P,Q.value,ae);if(q===null){P===null&&(P=B);break}e&&P&&q.alternate===null&&t(K,P),Z=f(q,Z,z),U===null?X=q:U.sibling=q,U=q,P=B}if(Q.done)return i(K,P),Sn&&rc(K,z),X;if(P===null){for(;!Q.done;z++,Q=G.next())Q=b(K,Q.value,ae),Q!==null&&(Z=f(Q,Z,z),U===null?X=Q:U.sibling=Q,U=Q);return Sn&&rc(K,z),X}for(P=a(K,P);!Q.done;z++,Q=G.next())Q=R(P,K,z,Q.value,ae),Q!==null&&(e&&Q.alternate!==null&&P.delete(Q.key===null?z:Q.key),Z=f(Q,Z,z),U===null?X=Q:U.sibling=Q,U=Q);return e&&P.forEach(function(ve){return t(K,ve)}),Sn&&rc(K,z),X}function se(K,Z,G,ae){if(typeof G=="object"&&G!==null&&G.type===Mh&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Nm:e:{for(var X=G.key,U=Z;U!==null;){if(U.key===X){if(X=G.type,X===Mh){if(U.tag===7){i(K,U.sibling),Z=l(U,G.props.children),Z.return=K,K=Z;break e}}else if(U.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===eu&&qE(X)===U.type){i(K,U.sibling),Z=l(U,G.props),Z.ref=Pd(K,U,G),Z.return=K,K=Z;break e}i(K,U);break}else t(K,U);U=U.sibling}G.type===Mh?(Z=hc(G.props.children,K.mode,ae,G.key),Z.return=K,K=Z):(ae=zg(G.type,G.key,G.props,null,K.mode,ae),ae.ref=Pd(K,Z,G),ae.return=K,K=ae)}return d(K);case Ch:e:{for(U=G.key;Z!==null;){if(Z.key===U)if(Z.tag===4&&Z.stateNode.containerInfo===G.containerInfo&&Z.stateNode.implementation===G.implementation){i(K,Z.sibling),Z=l(Z,G.children||[]),Z.return=K,K=Z;break e}else{i(K,Z);break}else t(K,Z);Z=Z.sibling}Z=p_(G,K.mode,ae),Z.return=K,K=Z}return d(K);case eu:return U=G._init,se(K,Z,U(G._payload),ae)}if(Rd(G))return L(K,Z,G,ae);if(wd(G))return j(K,Z,G,ae);Ym(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,Z!==null&&Z.tag===6?(i(K,Z.sibling),Z=l(Z,G),Z.return=K,K=Z):(i(K,Z),Z=d_(G,K.mode,ae),Z.return=K,K=Z),d(K)):i(K,Z)}return se}var sf=UC(!0),VC=UC(!1),Vp={},As=Tu(Vp),bp=Tu(Vp),Sp=Tu(Vp);function sc(e){if(e===Vp)throw Error(At(174));return e}function qw(e,t){switch(dn(Sp,t),dn(bp,e),dn(As,Vp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:S1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=S1(t,e)}vn(As),dn(As,t)}function lf(){vn(As),vn(bp),vn(Sp)}function GC(e){sc(Sp.current);var t=sc(As.current),i=S1(t,e.type);t!==i&&(dn(bp,e),dn(As,i))}function Xw(e){bp.current===e&&(vn(As),vn(bp))}var kn=Tu(0);function yy(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var s_=[];function Kw(){for(var e=0;e<s_.length;e++)s_[e]._workInProgressVersionPrimary=null;s_.length=0}var kg=yl.ReactCurrentDispatcher,l_=yl.ReactCurrentBatchConfig,gc=0,Fn=null,ei=null,_i=null,vy=!1,Yd=!1,Ep=0,Gj=0;function Wi(){throw Error(At(321))}function Yw(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ga(e[i],t[i]))return!1;return!0}function Jw(e,t,i,a,l,f){if(gc=f,Fn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kg.current=e===null||e.memoizedState===null?qj:Xj,e=i(a,l),Yd){f=0;do{if(Yd=!1,Ep=0,25<=f)throw Error(At(301));f+=1,_i=ei=null,t.updateQueue=null,kg.current=Kj,e=i(a,l)}while(Yd)}if(kg.current=_y,t=ei!==null&&ei.next!==null,gc=0,_i=ei=Fn=null,vy=!1,t)throw Error(At(300));return e}function Qw(){var e=Ep!==0;return Ep=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _i===null?Fn.memoizedState=_i=e:_i=_i.next=e,_i}function ma(){if(ei===null){var e=Fn.alternate;e=e!==null?e.memoizedState:null}else e=ei.next;var t=_i===null?Fn.memoizedState:_i.next;if(t!==null)_i=t,ei=e;else{if(e===null)throw Error(At(310));ei=e,e={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},_i===null?Fn.memoizedState=_i=e:_i=_i.next=e}return _i}function Tp(e,t){return typeof t=="function"?t(e):t}function u_(e){var t=ma(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ei,l=a.baseQueue,f=i.pending;if(f!==null){if(l!==null){var d=l.next;l.next=f.next,f.next=d}a.baseQueue=l=f,i.pending=null}if(l!==null){f=l.next,a=a.baseState;var u=d=null,w=null,E=f;do{var I=E.lane;if((gc&I)===I)w!==null&&(w=w.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),a=E.hasEagerState?E.eagerState:e(a,E.action);else{var b={lane:I,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};w===null?(u=w=b,d=a):w=w.next=b,Fn.lanes|=I,yc|=I}E=E.next}while(E!==null&&E!==f);w===null?d=a:w.next=u,Ga(a,t.memoizedState)||(To=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=w,i.lastRenderedState=a}if(e=i.interleaved,e!==null){l=e;do f=l.lane,Fn.lanes|=f,yc|=f,l=l.next;while(l!==e)}else l===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function c_(e){var t=ma(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,l=i.pending,f=t.memoizedState;if(l!==null){i.pending=null;var d=l=l.next;do f=e(f,d.action),d=d.next;while(d!==l);Ga(f,t.memoizedState)||(To=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,a]}function WC(){}function HC(e,t){var i=Fn,a=ma(),l=t(),f=!Ga(a.memoizedState,l);if(f&&(a.memoizedState=l,To=!0),a=a.queue,eb(XC.bind(null,i,a,e),[e]),a.getSnapshot!==t||f||_i!==null&&_i.memoizedState.tag&1){if(i.flags|=2048,Pp(9,qC.bind(null,i,a,l,t),void 0,null),xi===null)throw Error(At(349));gc&30||ZC(i,t,l)}return l}function ZC(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Fn.updateQueue,t===null?(t={lastEffect:null,stores:null},Fn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function qC(e,t,i,a){t.value=i,t.getSnapshot=a,KC(t)&&YC(e)}function XC(e,t,i){return i(function(){KC(t)&&YC(e)})}function KC(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ga(e,i)}catch{return!0}}function YC(e){var t=hl(e,1);t!==null&&Ua(t,e,1,-1)}function XE(e){var t=ys();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:e},t.queue=e,e=e.dispatch=Zj.bind(null,Fn,e),[t.memoizedState,e]}function Pp(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Fn.updateQueue,t===null?(t={lastEffect:null,stores:null},Fn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function JC(){return ma().memoizedState}function Og(e,t,i,a){var l=ys();Fn.flags|=e,l.memoizedState=Pp(1|t,i,void 0,a===void 0?null:a)}function E0(e,t,i,a){var l=ma();a=a===void 0?null:a;var f=void 0;if(ei!==null){var d=ei.memoizedState;if(f=d.destroy,a!==null&&Yw(a,d.deps)){l.memoizedState=Pp(t,i,f,a);return}}Fn.flags|=e,l.memoizedState=Pp(1|t,i,f,a)}function KE(e,t){return Og(8390656,8,e,t)}function eb(e,t){return E0(2048,8,e,t)}function QC(e,t){return E0(4,2,e,t)}function eM(e,t){return E0(4,4,e,t)}function tM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rM(e,t,i){return i=i!=null?i.concat([e]):null,E0(4,4,tM.bind(null,t,e),i)}function tb(){}function nM(e,t){var i=ma();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&Yw(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function iM(e,t){var i=ma();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&Yw(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function oM(e,t,i){return gc&21?(Ga(i,t)||(i=lC(),Fn.lanes|=i,yc|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,To=!0),e.memoizedState=i)}function Wj(e,t){var i=Jr;Jr=i!==0&&4>i?i:4,e(!0);var a=l_.transition;l_.transition={};try{e(!1),t()}finally{Jr=i,l_.transition=a}}function aM(){return ma().memoizedState}function Hj(e,t,i){var a=mu(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},sM(e))lM(t,i);else if(i=BC(e,t,i,a),i!==null){var l=lo();Ua(i,e,a,l),uM(i,t,a)}}function Zj(e,t,i){var a=mu(e),l={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(sM(e))lM(t,l);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var d=t.lastRenderedState,u=f(d,i);if(l.hasEagerState=!0,l.eagerState=u,Ga(u,d)){var w=t.interleaved;w===null?(l.next=l,Hw(t)):(l.next=w.next,w.next=l),t.interleaved=l;return}}catch{}finally{}i=BC(e,t,l,a),i!==null&&(l=lo(),Ua(i,e,a,l),uM(i,t,a))}}function sM(e){var t=e.alternate;return e===Fn||t!==null&&t===Fn}function lM(e,t){Yd=vy=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function uM(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,Ow(e,i)}}var _y={readContext:pa,useCallback:Wi,useContext:Wi,useEffect:Wi,useImperativeHandle:Wi,useInsertionEffect:Wi,useLayoutEffect:Wi,useMemo:Wi,useReducer:Wi,useRef:Wi,useState:Wi,useDebugValue:Wi,useDeferredValue:Wi,useTransition:Wi,useMutableSource:Wi,useSyncExternalStore:Wi,useId:Wi,unstable_isNewReconciler:!1},qj={readContext:pa,useCallback:function(e,t){return ys().memoizedState=[e,t===void 0?null:t],e},useContext:pa,useEffect:KE,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Og(4194308,4,tM.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Og(4194308,4,e,t)},useInsertionEffect:function(e,t){return Og(4,2,e,t)},useMemo:function(e,t){var i=ys();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=ys();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Hj.bind(null,Fn,e),[a.memoizedState,e]},useRef:function(e){var t=ys();return e={current:e},t.memoizedState=e},useState:XE,useDebugValue:tb,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=XE(!1),t=e[0];return e=Wj.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Fn,l=ys();if(Sn){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),xi===null)throw Error(At(349));gc&30||ZC(a,t,i)}l.memoizedState=i;var f={value:i,getSnapshot:t};return l.queue=f,KE(XC.bind(null,a,f,e),[e]),a.flags|=2048,Pp(9,qC.bind(null,a,f,i,t),void 0,null),i},useId:function(){var e=ys(),t=xi.identifierPrefix;if(Sn){var i=al,a=ol;i=(a&~(1<<32-$a(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Ep++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Gj++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xj={readContext:pa,useCallback:nM,useContext:pa,useEffect:eb,useImperativeHandle:rM,useInsertionEffect:QC,useLayoutEffect:eM,useMemo:iM,useReducer:u_,useRef:JC,useState:function(){return u_(Tp)},useDebugValue:tb,useDeferredValue:function(e){var t=ma();return oM(t,ei.memoizedState,e)},useTransition:function(){var e=u_(Tp)[0],t=ma().memoizedState;return[e,t]},useMutableSource:WC,useSyncExternalStore:HC,useId:aM,unstable_isNewReconciler:!1},Kj={readContext:pa,useCallback:nM,useContext:pa,useEffect:eb,useImperativeHandle:rM,useInsertionEffect:QC,useLayoutEffect:eM,useMemo:iM,useReducer:c_,useRef:JC,useState:function(){return c_(Tp)},useDebugValue:tb,useDeferredValue:function(e){var t=ma();return ei===null?t.memoizedState=e:oM(t,ei.memoizedState,e)},useTransition:function(){var e=c_(Tp)[0],t=ma().memoizedState;return[e,t]},useMutableSource:WC,useSyncExternalStore:HC,useId:aM,unstable_isNewReconciler:!1};function uf(e,t){try{var i="",a=t;do i+=ER(a),a=a.return;while(a);var l=i}catch(f){l=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:l,digest:null}}function h_(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function H1(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Yj=typeof WeakMap=="function"?WeakMap:Map;function cM(e,t,i){i=ll(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){wy||(wy=!0,rx=a),H1(e,t)},i}function hM(e,t,i){i=ll(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var l=t.value;i.payload=function(){return a(l)},i.callback=function(){H1(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){H1(e,t),typeof a!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),i}function YE(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Yj;var l=new Set;a.set(t,l)}else l=a.get(t),l===void 0&&(l=new Set,a.set(t,l));l.has(i)||(l.add(i),e=hz.bind(null,e,t,i),t.then(e,e))}function JE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function QE(e,t,i,a,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ll(-1,1),t.tag=2,du(i,t,1))),i.lanes|=1),e)}var Jj=yl.ReactCurrentOwner,To=!1;function io(e,t,i,a){t.child=e===null?VC(t,null,i,a):sf(t,e.child,i,a)}function eT(e,t,i,a,l){i=i.render;var f=t.ref;return Yh(t,l),a=Jw(e,t,i,a,f,l),i=Qw(),e!==null&&!To?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,fl(e,t,l)):(Sn&&i&&Nw(t),t.flags|=1,io(e,t,a,l),t.child)}function tT(e,t,i,a,l){if(e===null){var f=i.type;return typeof f=="function"&&!ub(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,fM(e,t,f,a,l)):(e=zg(i.type,null,a,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&l)){var d=f.memoizedProps;if(i=i.compare,i=i!==null?i:vp,i(d,a)&&e.ref===t.ref)return fl(e,t,l)}return t.flags|=1,e=gu(f,a),e.ref=t.ref,e.return=t,t.child=e}function fM(e,t,i,a,l){if(e!==null){var f=e.memoizedProps;if(vp(f,a)&&e.ref===t.ref)if(To=!1,t.pendingProps=a=f,(e.lanes&l)!==0)e.flags&131072&&(To=!0);else return t.lanes=e.lanes,fl(e,t,l)}return Z1(e,t,i,a,l)}function dM(e,t,i){var a=t.pendingProps,l=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(Nh,Vo),Vo|=i;else{if(!(i&1073741824))return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dn(Nh,Vo),Vo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:i,dn(Nh,Vo),Vo|=a}else f!==null?(a=f.baseLanes|i,t.memoizedState=null):a=i,dn(Nh,Vo),Vo|=a;return io(e,t,l,i),t.child}function pM(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Z1(e,t,i,a,l){var f=Ao(i)?pc:Ki.current;return f=of(t,f),Yh(t,l),i=Jw(e,t,i,a,f,l),a=Qw(),e!==null&&!To?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,fl(e,t,l)):(Sn&&a&&Nw(t),t.flags|=1,io(e,t,i,l),t.child)}function rT(e,t,i,a,l){if(Ao(i)){var f=!0;hy(t)}else f=!1;if(Yh(t,l),t.stateNode===null)Fg(e,t),$C(t,i,a),W1(t,i,a,l),a=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var w=d.context,E=i.contextType;typeof E=="object"&&E!==null?E=pa(E):(E=Ao(i)?pc:Ki.current,E=of(t,E));var I=i.getDerivedStateFromProps,b=typeof I=="function"||typeof d.getSnapshotBeforeUpdate=="function";b||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==a||w!==E)&&ZE(t,d,a,E),tu=!1;var T=t.memoizedState;d.state=T,gy(t,a,d,l),w=t.memoizedState,u!==a||T!==w||Po.current||tu?(typeof I=="function"&&(G1(t,i,I,a),w=t.memoizedState),(u=tu||HE(t,i,u,a,T,w,E))?(b||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),d.props=a,d.state=w,d.context=E,a=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,DC(e,t),u=t.memoizedProps,E=t.type===t.elementType?u:Fa(t.type,u),d.props=E,b=t.pendingProps,T=d.context,w=i.contextType,typeof w=="object"&&w!==null?w=pa(w):(w=Ao(i)?pc:Ki.current,w=of(t,w));var R=i.getDerivedStateFromProps;(I=typeof R=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==b||T!==w)&&ZE(t,d,a,w),tu=!1,T=t.memoizedState,d.state=T,gy(t,a,d,l);var L=t.memoizedState;u!==b||T!==L||Po.current||tu?(typeof R=="function"&&(G1(t,i,R,a),L=t.memoizedState),(E=tu||HE(t,i,E,a,T,L,w)||!1)?(I||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,L,w),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,L,w)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=L),d.props=a,d.state=L,d.context=w,a=E):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return q1(e,t,i,a,f,l)}function q1(e,t,i,a,l,f){pM(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return l&&$E(t,i,!1),fl(e,t,f);a=t.stateNode,Jj.current=t;var u=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=sf(t,e.child,null,f),t.child=sf(t,null,u,f)):io(e,t,u,f),t.memoizedState=a.state,l&&$E(t,i,!0),t.child}function mM(e){var t=e.stateNode;t.pendingContext?NE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&NE(e,t.context,!1),qw(e,t.containerInfo)}function nT(e,t,i,a,l){return af(),Uw(l),t.flags|=256,io(e,t,i,a),t.child}var X1={dehydrated:null,treeContext:null,retryLane:0};function K1(e){return{baseLanes:e,cachePool:null,transitions:null}}function gM(e,t,i){var a=t.pendingProps,l=kn.current,f=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(l&2)!==0),u?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),dn(kn,l&1),e===null)return U1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,f?(a=t.mode,f=t.child,d={mode:"hidden",children:d},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=d):f=A0(d,a,0,null),e=hc(e,a,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=K1(i),t.memoizedState=X1,e):rb(t,d));if(l=e.memoizedState,l!==null&&(u=l.dehydrated,u!==null))return Qj(e,t,d,a,u,l,i);if(f){f=a.fallback,d=t.mode,l=e.child,u=l.sibling;var w={mode:"hidden",children:a.children};return!(d&1)&&t.child!==l?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=gu(l,w),a.subtreeFlags=l.subtreeFlags&14680064),u!==null?f=gu(u,f):(f=hc(f,d,i,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,d=e.child.memoizedState,d=d===null?K1(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},f.memoizedState=d,f.childLanes=e.childLanes&~i,t.memoizedState=X1,a}return f=e.child,e=f.sibling,a=gu(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function rb(e,t){return t=A0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jm(e,t,i,a){return a!==null&&Uw(a),sf(t,e.child,null,i),e=rb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qj(e,t,i,a,l,f,d){if(i)return t.flags&256?(t.flags&=-257,a=h_(Error(At(422))),Jm(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,l=t.mode,a=A0({mode:"visible",children:a.children},l,0,null),f=hc(f,l,d,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&sf(t,e.child,null,d),t.child.memoizedState=K1(d),t.memoizedState=X1,f);if(!(t.mode&1))return Jm(e,t,d,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var u=a.dgst;return a=u,f=Error(At(419)),a=h_(f,a,void 0),Jm(e,t,d,a)}if(u=(d&e.childLanes)!==0,To||u){if(a=xi,a!==null){switch(d&-d){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(a.suspendedLanes|d)?0:l,l!==0&&l!==f.retryLane&&(f.retryLane=l,hl(e,l),Ua(a,e,l,-1))}return lb(),a=h_(Error(At(421))),Jm(e,t,d,a)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=fz.bind(null,e),l._reactRetry=t,null):(e=f.treeContext,Zo=fu(l.nextSibling),qo=t,Sn=!0,ja=null,e!==null&&(la[ua++]=ol,la[ua++]=al,la[ua++]=mc,ol=e.id,al=e.overflow,mc=t),t=rb(t,a.children),t.flags|=4096,t)}function iT(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),V1(e.return,t,i)}function f_(e,t,i,a,l){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:l}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=i,f.tailMode=l)}function yM(e,t,i){var a=t.pendingProps,l=a.revealOrder,f=a.tail;if(io(e,t,a.children,i),a=kn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iT(e,i,t);else if(e.tag===19)iT(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(dn(kn,a),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(i=t.child,l=null;i!==null;)e=i.alternate,e!==null&&yy(e)===null&&(l=i),i=i.sibling;i=l,i===null?(l=t.child,t.child=null):(l=i.sibling,i.sibling=null),f_(t,!1,l,i,f);break;case"backwards":for(i=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&yy(e)===null){t.child=l;break}e=l.sibling,l.sibling=i,i=l,l=e}f_(t,!0,i,null,f);break;case"together":f_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fl(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),yc|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=gu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=gu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function ez(e,t,i){switch(t.tag){case 3:mM(t),af();break;case 5:GC(t);break;case 1:Ao(t.type)&&hy(t);break;case 4:qw(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,l=t.memoizedProps.value;dn(py,a._currentValue),a._currentValue=l;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(dn(kn,kn.current&1),t.flags|=128,null):i&t.child.childLanes?gM(e,t,i):(dn(kn,kn.current&1),e=fl(e,t,i),e!==null?e.sibling:null);dn(kn,kn.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return yM(e,t,i);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),dn(kn,kn.current),a)break;return null;case 22:case 23:return t.lanes=0,dM(e,t,i)}return fl(e,t,i)}var vM,Y1,_M,xM;vM=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Y1=function(){};_M=function(e,t,i,a){var l=e.memoizedProps;if(l!==a){e=t.stateNode,sc(As.current);var f=null;switch(i){case"input":l=_1(e,l),a=_1(e,a),f=[];break;case"select":l=Rn({},l,{value:void 0}),a=Rn({},a,{value:void 0}),f=[];break;case"textarea":l=b1(e,l),a=b1(e,a),f=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=uy)}E1(i,a);var d;i=null;for(E in l)if(!a.hasOwnProperty(E)&&l.hasOwnProperty(E)&&l[E]!=null)if(E==="style"){var u=l[E];for(d in u)u.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(hp.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in a){var w=a[E];if(u=l!=null?l[E]:void 0,a.hasOwnProperty(E)&&w!==u&&(w!=null||u!=null))if(E==="style")if(u){for(d in u)!u.hasOwnProperty(d)||w&&w.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in w)w.hasOwnProperty(d)&&u[d]!==w[d]&&(i||(i={}),i[d]=w[d])}else i||(f||(f=[]),f.push(E,i)),i=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,u=u?u.__html:void 0,w!=null&&u!==w&&(f=f||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(hp.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&gn("scroll",e),f||u===w||(f=[])):(f=f||[]).push(E,w))}i&&(f=f||[]).push("style",i);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};xM=function(e,t,i,a){i!==a&&(t.flags|=4)};function Ad(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Hi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var l=e.child;l!==null;)i|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)i|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function tz(e,t,i){var a=t.pendingProps;switch($w(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hi(t),null;case 1:return Ao(t.type)&&cy(),Hi(t),null;case 3:return a=t.stateNode,lf(),vn(Po),vn(Ki),Kw(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Km(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ja!==null&&(ox(ja),ja=null))),Y1(e,t),Hi(t),null;case 5:Xw(t);var l=sc(Sp.current);if(i=t.type,e!==null&&t.stateNode!=null)_M(e,t,i,a,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Hi(t),null}if(e=sc(As.current),Km(t)){a=t.stateNode,i=t.type;var f=t.memoizedProps;switch(a[ws]=t,a[wp]=f,e=(t.mode&1)!==0,i){case"dialog":gn("cancel",a),gn("close",a);break;case"iframe":case"object":case"embed":gn("load",a);break;case"video":case"audio":for(l=0;l<zd.length;l++)gn(zd[l],a);break;case"source":gn("error",a);break;case"img":case"image":case"link":gn("error",a),gn("load",a);break;case"details":gn("toggle",a);break;case"input":dE(a,f),gn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},gn("invalid",a);break;case"textarea":mE(a,f),gn("invalid",a)}E1(i,f),l=null;for(var d in f)if(f.hasOwnProperty(d)){var u=f[d];d==="children"?typeof u=="string"?a.textContent!==u&&(f.suppressHydrationWarning!==!0&&Xm(a.textContent,u,e),l=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(f.suppressHydrationWarning!==!0&&Xm(a.textContent,u,e),l=["children",""+u]):hp.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&gn("scroll",a)}switch(i){case"input":$m(a),pE(a,f,!0);break;case"textarea":$m(a),gE(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=uy)}a=l,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ZI(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(i,{is:a.is}):(e=d.createElement(i),i==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,i),e[ws]=t,e[wp]=a,vM(e,t,!1,!1),t.stateNode=e;e:{switch(d=T1(i,a),i){case"dialog":gn("cancel",e),gn("close",e),l=a;break;case"iframe":case"object":case"embed":gn("load",e),l=a;break;case"video":case"audio":for(l=0;l<zd.length;l++)gn(zd[l],e);l=a;break;case"source":gn("error",e),l=a;break;case"img":case"image":case"link":gn("error",e),gn("load",e),l=a;break;case"details":gn("toggle",e),l=a;break;case"input":dE(e,a),l=_1(e,a),gn("invalid",e);break;case"option":l=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},l=Rn({},a,{value:void 0}),gn("invalid",e);break;case"textarea":mE(e,a),l=b1(e,a),gn("invalid",e);break;default:l=a}E1(i,l),u=l;for(f in u)if(u.hasOwnProperty(f)){var w=u[f];f==="style"?KI(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&qI(e,w)):f==="children"?typeof w=="string"?(i!=="textarea"||w!=="")&&fp(e,w):typeof w=="number"&&fp(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(hp.hasOwnProperty(f)?w!=null&&f==="onScroll"&&gn("scroll",e):w!=null&&Pw(e,f,w,d))}switch(i){case"input":$m(e),pE(e,a,!1);break;case"textarea":$m(e),gE(e);break;case"option":a.value!=null&&e.setAttribute("value",""+vu(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Zh(e,!!a.multiple,f,!1):a.defaultValue!=null&&Zh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=uy)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hi(t),null;case 6:if(e&&t.stateNode!=null)xM(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=sc(Sp.current),sc(As.current),Km(t)){if(a=t.stateNode,i=t.memoizedProps,a[ws]=t,(f=a.nodeValue!==i)&&(e=qo,e!==null))switch(e.tag){case 3:Xm(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xm(a.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[ws]=t,t.stateNode=a}return Hi(t),null;case 13:if(vn(kn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&Zo!==null&&t.mode&1&&!(t.flags&128))LC(),af(),t.flags|=98560,f=!1;else if(f=Km(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(At(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(At(317));f[ws]=t}else af(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hi(t),f=!1}else ja!==null&&(ox(ja),ja=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||kn.current&1?ti===0&&(ti=3):lb())),t.updateQueue!==null&&(t.flags|=4),Hi(t),null);case 4:return lf(),Y1(e,t),e===null&&_p(t.stateNode.containerInfo),Hi(t),null;case 10:return Ww(t.type._context),Hi(t),null;case 17:return Ao(t.type)&&cy(),Hi(t),null;case 19:if(vn(kn),f=t.memoizedState,f===null)return Hi(t),null;if(a=(t.flags&128)!==0,d=f.rendering,d===null)if(a)Ad(f,!1);else{if(ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=yy(e),d!==null){for(t.flags|=128,Ad(f,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)f=i,e=a,f.flags&=14680066,d=f.alternate,d===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=d.childLanes,f.lanes=d.lanes,f.child=d.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=d.memoizedProps,f.memoizedState=d.memoizedState,f.updateQueue=d.updateQueue,f.type=d.type,e=d.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return dn(kn,kn.current&1|2),t.child}e=e.sibling}f.tail!==null&&Hn()>cf&&(t.flags|=128,a=!0,Ad(f,!1),t.lanes=4194304)}else{if(!a)if(e=yy(d),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Ad(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!Sn)return Hi(t),null}else 2*Hn()-f.renderingStartTime>cf&&i!==1073741824&&(t.flags|=128,a=!0,Ad(f,!1),t.lanes=4194304);f.isBackwards?(d.sibling=t.child,t.child=d):(i=f.last,i!==null?i.sibling=d:t.child=d,f.last=d)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Hn(),t.sibling=null,i=kn.current,dn(kn,a?i&1|2:i&1),t):(Hi(t),null);case 22:case 23:return sb(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Vo&1073741824&&(Hi(t),t.subtreeFlags&6&&(t.flags|=8192)):Hi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function rz(e,t){switch($w(t),t.tag){case 1:return Ao(t.type)&&cy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lf(),vn(Po),vn(Ki),Kw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xw(t),null;case 13:if(vn(kn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));af()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vn(kn),null;case 4:return lf(),null;case 10:return Ww(t.type._context),null;case 22:case 23:return sb(),null;case 24:return null;default:return null}}var Qm=!1,qi=!1,nz=typeof WeakSet=="function"?WeakSet:Set,nr=null;function Dh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Bn(e,t,a)}else i.current=null}function J1(e,t,i){try{i()}catch(a){Bn(e,t,a)}}var oT=!1;function iz(e,t){if(j1=ay,e=EC(),Dw(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var l=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var d=0,u=-1,w=-1,E=0,I=0,b=e,T=null;t:for(;;){for(var R;b!==i||l!==0&&b.nodeType!==3||(u=d+l),b!==f||a!==0&&b.nodeType!==3||(w=d+a),b.nodeType===3&&(d+=b.nodeValue.length),(R=b.firstChild)!==null;)T=b,b=R;for(;;){if(b===e)break t;if(T===i&&++E===l&&(u=d),T===f&&++I===a&&(w=d),(R=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=R}i=u===-1||w===-1?null:{start:u,end:w}}else i=null}i=i||{start:0,end:0}}else i=null;for(z1={focusedElem:e,selectionRange:i},ay=!1,nr=t;nr!==null;)if(t=nr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nr=e;else for(;nr!==null;){t=nr;try{var L=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var j=L.memoizedProps,se=L.memoizedState,K=t.stateNode,Z=K.getSnapshotBeforeUpdate(t.elementType===t.type?j:Fa(t.type,j),se);K.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(ae){Bn(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,nr=e;break}nr=t.return}return L=oT,oT=!1,L}function Jd(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&e)===e){var f=l.destroy;l.destroy=void 0,f!==void 0&&J1(t,i,f)}l=l.next}while(l!==a)}}function T0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Q1(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function wM(e){var t=e.alternate;t!==null&&(e.alternate=null,wM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ws],delete t[wp],delete t[D1],delete t[Nj],delete t[$j])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bM(e){return e.tag===5||e.tag===3||e.tag===4}function aT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ex(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=uy));else if(a!==4&&(e=e.child,e!==null))for(ex(e,t,i),e=e.sibling;e!==null;)ex(e,t,i),e=e.sibling}function tx(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(tx(e,t,i),e=e.sibling;e!==null;)tx(e,t,i),e=e.sibling}var ki=null,Ra=!1;function Jl(e,t,i){for(i=i.child;i!==null;)SM(e,t,i),i=i.sibling}function SM(e,t,i){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(y0,i)}catch{}switch(i.tag){case 5:qi||Dh(i,t);case 6:var a=ki,l=Ra;ki=null,Jl(e,t,i),ki=a,Ra=l,ki!==null&&(Ra?(e=ki,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):ki.removeChild(i.stateNode));break;case 18:ki!==null&&(Ra?(e=ki,i=i.stateNode,e.nodeType===8?o_(e.parentNode,i):e.nodeType===1&&o_(e,i),gp(e)):o_(ki,i.stateNode));break;case 4:a=ki,l=Ra,ki=i.stateNode.containerInfo,Ra=!0,Jl(e,t,i),ki=a,Ra=l;break;case 0:case 11:case 14:case 15:if(!qi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var f=l,d=f.destroy;f=f.tag,d!==void 0&&(f&2||f&4)&&J1(i,t,d),l=l.next}while(l!==a)}Jl(e,t,i);break;case 1:if(!qi&&(Dh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Bn(i,t,u)}Jl(e,t,i);break;case 21:Jl(e,t,i);break;case 22:i.mode&1?(qi=(a=qi)||i.memoizedState!==null,Jl(e,t,i),qi=a):Jl(e,t,i);break;default:Jl(e,t,i)}}function sT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new nz),t.forEach(function(a){var l=dz.bind(null,e,a);i.has(a)||(i.add(a),a.then(l,l))})}}function ka(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];try{var f=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:ki=u.stateNode,Ra=!1;break e;case 3:ki=u.stateNode.containerInfo,Ra=!0;break e;case 4:ki=u.stateNode.containerInfo,Ra=!0;break e}u=u.return}if(ki===null)throw Error(At(160));SM(f,d,l),ki=null,Ra=!1;var w=l.alternate;w!==null&&(w.return=null),l.return=null}catch(E){Bn(l,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)EM(t,e),t=t.sibling}function EM(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ka(t,e),gs(e),a&4){try{Jd(3,e,e.return),T0(3,e)}catch(j){Bn(e,e.return,j)}try{Jd(5,e,e.return)}catch(j){Bn(e,e.return,j)}}break;case 1:ka(t,e),gs(e),a&512&&i!==null&&Dh(i,i.return);break;case 5:if(ka(t,e),gs(e),a&512&&i!==null&&Dh(i,i.return),e.flags&32){var l=e.stateNode;try{fp(l,"")}catch(j){Bn(e,e.return,j)}}if(a&4&&(l=e.stateNode,l!=null)){var f=e.memoizedProps,d=i!==null?i.memoizedProps:f,u=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{u==="input"&&f.type==="radio"&&f.name!=null&&WI(l,f),T1(u,d);var E=T1(u,f);for(d=0;d<w.length;d+=2){var I=w[d],b=w[d+1];I==="style"?KI(l,b):I==="dangerouslySetInnerHTML"?qI(l,b):I==="children"?fp(l,b):Pw(l,I,b,E)}switch(u){case"input":x1(l,f);break;case"textarea":HI(l,f);break;case"select":var T=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!f.multiple;var R=f.value;R!=null?Zh(l,!!f.multiple,R,!1):T!==!!f.multiple&&(f.defaultValue!=null?Zh(l,!!f.multiple,f.defaultValue,!0):Zh(l,!!f.multiple,f.multiple?[]:"",!1))}l[wp]=f}catch(j){Bn(e,e.return,j)}}break;case 6:if(ka(t,e),gs(e),a&4){if(e.stateNode===null)throw Error(At(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(j){Bn(e,e.return,j)}}break;case 3:if(ka(t,e),gs(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{gp(t.containerInfo)}catch(j){Bn(e,e.return,j)}break;case 4:ka(t,e),gs(e);break;case 13:ka(t,e),gs(e),l=e.child,l.flags&8192&&(f=l.memoizedState!==null,l.stateNode.isHidden=f,!f||l.alternate!==null&&l.alternate.memoizedState!==null||(ob=Hn())),a&4&&sT(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(qi=(E=qi)||I,ka(t,e),qi=E):ka(t,e),gs(e),a&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!I&&e.mode&1)for(nr=e,I=e.child;I!==null;){for(b=nr=I;nr!==null;){switch(T=nr,R=T.child,T.tag){case 0:case 11:case 14:case 15:Jd(4,T,T.return);break;case 1:Dh(T,T.return);var L=T.stateNode;if(typeof L.componentWillUnmount=="function"){a=T,i=T.return;try{t=a,L.props=t.memoizedProps,L.state=t.memoizedState,L.componentWillUnmount()}catch(j){Bn(a,i,j)}}break;case 5:Dh(T,T.return);break;case 22:if(T.memoizedState!==null){uT(b);continue}}R!==null?(R.return=T,nr=R):uT(b)}I=I.sibling}e:for(I=null,b=e;;){if(b.tag===5){if(I===null){I=b;try{l=b.stateNode,E?(f=l.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(u=b.stateNode,w=b.memoizedProps.style,d=w!=null&&w.hasOwnProperty("display")?w.display:null,u.style.display=XI("display",d))}catch(j){Bn(e,e.return,j)}}}else if(b.tag===6){if(I===null)try{b.stateNode.nodeValue=E?"":b.memoizedProps}catch(j){Bn(e,e.return,j)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;I===b&&(I=null),b=b.return}I===b&&(I=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:ka(t,e),gs(e),a&4&&sT(e);break;case 21:break;default:ka(t,e),gs(e)}}function gs(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(bM(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(fp(l,""),a.flags&=-33);var f=aT(e);tx(e,f,l);break;case 3:case 4:var d=a.stateNode.containerInfo,u=aT(e);ex(e,u,d);break;default:throw Error(At(161))}}catch(w){Bn(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oz(e,t,i){nr=e,TM(e)}function TM(e,t,i){for(var a=(e.mode&1)!==0;nr!==null;){var l=nr,f=l.child;if(l.tag===22&&a){var d=l.memoizedState!==null||Qm;if(!d){var u=l.alternate,w=u!==null&&u.memoizedState!==null||qi;u=Qm;var E=qi;if(Qm=d,(qi=w)&&!E)for(nr=l;nr!==null;)d=nr,w=d.child,d.tag===22&&d.memoizedState!==null?cT(l):w!==null?(w.return=d,nr=w):cT(l);for(;f!==null;)nr=f,TM(f),f=f.sibling;nr=l,Qm=u,qi=E}lT(e)}else l.subtreeFlags&8772&&f!==null?(f.return=l,nr=f):lT(e)}}function lT(e){for(;nr!==null;){var t=nr;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qi||T0(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!qi)if(i===null)a.componentDidMount();else{var l=t.elementType===t.type?i.memoizedProps:Fa(t.type,i.memoizedProps);a.componentDidUpdate(l,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&WE(t,f,a);break;case 3:var d=t.updateQueue;if(d!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}WE(t,d,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&i.focus();break;case"img":w.src&&(i.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var I=E.memoizedState;if(I!==null){var b=I.dehydrated;b!==null&&gp(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}qi||t.flags&512&&Q1(t)}catch(T){Bn(t,t.return,T)}}if(t===e){nr=null;break}if(i=t.sibling,i!==null){i.return=t.return,nr=i;break}nr=t.return}}function uT(e){for(;nr!==null;){var t=nr;if(t===e){nr=null;break}var i=t.sibling;if(i!==null){i.return=t.return,nr=i;break}nr=t.return}}function cT(e){for(;nr!==null;){var t=nr;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{T0(4,t)}catch(w){Bn(t,i,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var l=t.return;try{a.componentDidMount()}catch(w){Bn(t,l,w)}}var f=t.return;try{Q1(t)}catch(w){Bn(t,f,w)}break;case 5:var d=t.return;try{Q1(t)}catch(w){Bn(t,d,w)}}}catch(w){Bn(t,t.return,w)}if(t===e){nr=null;break}var u=t.sibling;if(u!==null){u.return=t.return,nr=u;break}nr=t.return}}var az=Math.ceil,xy=yl.ReactCurrentDispatcher,nb=yl.ReactCurrentOwner,da=yl.ReactCurrentBatchConfig,Ur=0,xi=null,Kn=null,Fi=0,Vo=0,Nh=Tu(0),ti=0,Ap=null,yc=0,P0=0,ib=0,Qd=null,So=null,ob=0,cf=1/0,tl=null,wy=!1,rx=null,pu=null,eg=!1,su=null,by=0,ep=0,nx=null,Rg=-1,jg=0;function lo(){return Ur&6?Hn():Rg!==-1?Rg:Rg=Hn()}function mu(e){return e.mode&1?Ur&2&&Fi!==0?Fi&-Fi:Vj.transition!==null?(jg===0&&(jg=lC()),jg):(e=Jr,e!==0||(e=window.event,e=e===void 0?16:mC(e.type)),e):1}function Ua(e,t,i,a){if(50<ep)throw ep=0,nx=null,Error(At(185));Np(e,i,a),(!(Ur&2)||e!==xi)&&(e===xi&&(!(Ur&2)&&(P0|=i),ti===4&&ou(e,Fi)),Io(e,a),i===1&&Ur===0&&!(t.mode&1)&&(cf=Hn()+500,b0&&Pu()))}function Io(e,t){var i=e.callbackNode;VR(e,t);var a=oy(e,e===xi?Fi:0);if(a===0)i!==null&&_E(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&_E(i),t===1)e.tag===0?Uj(hT.bind(null,e)):RC(hT.bind(null,e)),Bj(function(){!(Ur&6)&&Pu()}),i=null;else{switch(uC(a)){case 1:i=kw;break;case 4:i=aC;break;case 16:i=iy;break;case 536870912:i=sC;break;default:i=iy}i=FM(i,PM.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function PM(e,t){if(Rg=-1,jg=0,Ur&6)throw Error(At(327));var i=e.callbackNode;if(Jh()&&e.callbackNode!==i)return null;var a=oy(e,e===xi?Fi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Sy(e,a);else{t=a;var l=Ur;Ur|=2;var f=IM();(xi!==e||Fi!==t)&&(tl=null,cf=Hn()+500,cc(e,t));do try{uz();break}catch(u){AM(e,u)}while(!0);Gw(),xy.current=f,Ur=l,Kn!==null?t=0:(xi=null,Fi=0,t=ti)}if(t!==0){if(t===2&&(l=M1(e),l!==0&&(a=l,t=ix(e,l))),t===1)throw i=Ap,cc(e,0),ou(e,a),Io(e,Hn()),i;if(t===6)ou(e,a);else{if(l=e.current.alternate,!(a&30)&&!sz(l)&&(t=Sy(e,a),t===2&&(f=M1(e),f!==0&&(a=f,t=ix(e,f))),t===1))throw i=Ap,cc(e,0),ou(e,a),Io(e,Hn()),i;switch(e.finishedWork=l,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:nc(e,So,tl);break;case 3:if(ou(e,a),(a&130023424)===a&&(t=ob+500-Hn(),10<t)){if(oy(e,0)!==0)break;if(l=e.suspendedLanes,(l&a)!==a){lo(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=B1(nc.bind(null,e,So,tl),t);break}nc(e,So,tl);break;case 4:if(ou(e,a),(a&4194240)===a)break;for(t=e.eventTimes,l=-1;0<a;){var d=31-$a(a);f=1<<d,d=t[d],d>l&&(l=d),a&=~f}if(a=l,a=Hn()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*az(a/1960))-a,10<a){e.timeoutHandle=B1(nc.bind(null,e,So,tl),a);break}nc(e,So,tl);break;case 5:nc(e,So,tl);break;default:throw Error(At(329))}}}return Io(e,Hn()),e.callbackNode===i?PM.bind(null,e):null}function ix(e,t){var i=Qd;return e.current.memoizedState.isDehydrated&&(cc(e,t).flags|=256),e=Sy(e,t),e!==2&&(t=So,So=i,t!==null&&ox(t)),e}function ox(e){So===null?So=e:So.push.apply(So,e)}function sz(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var l=i[a],f=l.getSnapshot;l=l.value;try{if(!Ga(f(),l))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ou(e,t){for(t&=~ib,t&=~P0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-$a(t),a=1<<i;e[i]=-1,t&=~a}}function hT(e){if(Ur&6)throw Error(At(327));Jh();var t=oy(e,0);if(!(t&1))return Io(e,Hn()),null;var i=Sy(e,t);if(e.tag!==0&&i===2){var a=M1(e);a!==0&&(t=a,i=ix(e,a))}if(i===1)throw i=Ap,cc(e,0),ou(e,t),Io(e,Hn()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nc(e,So,tl),Io(e,Hn()),null}function ab(e,t){var i=Ur;Ur|=1;try{return e(t)}finally{Ur=i,Ur===0&&(cf=Hn()+500,b0&&Pu())}}function vc(e){su!==null&&su.tag===0&&!(Ur&6)&&Jh();var t=Ur;Ur|=1;var i=da.transition,a=Jr;try{if(da.transition=null,Jr=1,e)return e()}finally{Jr=a,da.transition=i,Ur=t,!(Ur&6)&&Pu()}}function sb(){Vo=Nh.current,vn(Nh)}function cc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Lj(i)),Kn!==null)for(i=Kn.return;i!==null;){var a=i;switch($w(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&cy();break;case 3:lf(),vn(Po),vn(Ki),Kw();break;case 5:Xw(a);break;case 4:lf();break;case 13:vn(kn);break;case 19:vn(kn);break;case 10:Ww(a.type._context);break;case 22:case 23:sb()}i=i.return}if(xi=e,Kn=e=gu(e.current,null),Fi=Vo=t,ti=0,Ap=null,ib=P0=yc=0,So=Qd=null,ac!==null){for(t=0;t<ac.length;t++)if(i=ac[t],a=i.interleaved,a!==null){i.interleaved=null;var l=a.next,f=i.pending;if(f!==null){var d=f.next;f.next=l,a.next=d}i.pending=a}ac=null}return e}function AM(e,t){do{var i=Kn;try{if(Gw(),kg.current=_y,vy){for(var a=Fn.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}vy=!1}if(gc=0,_i=ei=Fn=null,Yd=!1,Ep=0,nb.current=null,i===null||i.return===null){ti=1,Ap=t,Kn=null;break}e:{var f=e,d=i.return,u=i,w=t;if(t=Fi,u.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w,I=u,b=I.tag;if(!(I.mode&1)&&(b===0||b===11||b===15)){var T=I.alternate;T?(I.updateQueue=T.updateQueue,I.memoizedState=T.memoizedState,I.lanes=T.lanes):(I.updateQueue=null,I.memoizedState=null)}var R=JE(d);if(R!==null){R.flags&=-257,QE(R,d,u,f,t),R.mode&1&&YE(f,E,t),t=R,w=E;var L=t.updateQueue;if(L===null){var j=new Set;j.add(w),t.updateQueue=j}else L.add(w);break e}else{if(!(t&1)){YE(f,E,t),lb();break e}w=Error(At(426))}}else if(Sn&&u.mode&1){var se=JE(d);if(se!==null){!(se.flags&65536)&&(se.flags|=256),QE(se,d,u,f,t),Uw(uf(w,u));break e}}f=w=uf(w,u),ti!==4&&(ti=2),Qd===null?Qd=[f]:Qd.push(f),f=d;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var K=cM(f,w,t);GE(f,K);break e;case 1:u=w;var Z=f.type,G=f.stateNode;if(!(f.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(pu===null||!pu.has(G)))){f.flags|=65536,t&=-t,f.lanes|=t;var ae=hM(f,u,t);GE(f,ae);break e}}f=f.return}while(f!==null)}MM(i)}catch(X){t=X,Kn===i&&i!==null&&(Kn=i=i.return);continue}break}while(!0)}function IM(){var e=xy.current;return xy.current=_y,e===null?_y:e}function lb(){(ti===0||ti===3||ti===2)&&(ti=4),xi===null||!(yc&268435455)&&!(P0&268435455)||ou(xi,Fi)}function Sy(e,t){var i=Ur;Ur|=2;var a=IM();(xi!==e||Fi!==t)&&(tl=null,cc(e,t));do try{lz();break}catch(l){AM(e,l)}while(!0);if(Gw(),Ur=i,xy.current=a,Kn!==null)throw Error(At(261));return xi=null,Fi=0,ti}function lz(){for(;Kn!==null;)CM(Kn)}function uz(){for(;Kn!==null&&!RR();)CM(Kn)}function CM(e){var t=OM(e.alternate,e,Vo);e.memoizedProps=e.pendingProps,t===null?MM(e):Kn=t,nb.current=null}function MM(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=rz(i,t),i!==null){i.flags&=32767,Kn=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ti=6,Kn=null;return}}else if(i=tz(i,t,Vo),i!==null){Kn=i;return}if(t=t.sibling,t!==null){Kn=t;return}Kn=t=e}while(t!==null);ti===0&&(ti=5)}function nc(e,t,i){var a=Jr,l=da.transition;try{da.transition=null,Jr=1,cz(e,t,i,a)}finally{da.transition=l,Jr=a}return null}function cz(e,t,i,a){do Jh();while(su!==null);if(Ur&6)throw Error(At(327));i=e.finishedWork;var l=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(GR(e,f),e===xi&&(Kn=xi=null,Fi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||eg||(eg=!0,FM(iy,function(){return Jh(),null})),f=(i.flags&15990)!==0,i.subtreeFlags&15990||f){f=da.transition,da.transition=null;var d=Jr;Jr=1;var u=Ur;Ur|=4,nb.current=null,iz(e,i),EM(i,e),Mj(z1),ay=!!j1,z1=j1=null,e.current=i,oz(i),jR(),Ur=u,Jr=d,da.transition=f}else e.current=i;if(eg&&(eg=!1,su=e,by=l),f=e.pendingLanes,f===0&&(pu=null),BR(i.stateNode),Io(e,Hn()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)l=t[i],a(l.value,{componentStack:l.stack,digest:l.digest});if(wy)throw wy=!1,e=rx,rx=null,e;return by&1&&e.tag!==0&&Jh(),f=e.pendingLanes,f&1?e===nx?ep++:(ep=0,nx=e):ep=0,Pu(),null}function Jh(){if(su!==null){var e=uC(by),t=da.transition,i=Jr;try{if(da.transition=null,Jr=16>e?16:e,su===null)var a=!1;else{if(e=su,su=null,by=0,Ur&6)throw Error(At(331));var l=Ur;for(Ur|=4,nr=e.current;nr!==null;){var f=nr,d=f.child;if(nr.flags&16){var u=f.deletions;if(u!==null){for(var w=0;w<u.length;w++){var E=u[w];for(nr=E;nr!==null;){var I=nr;switch(I.tag){case 0:case 11:case 15:Jd(8,I,f)}var b=I.child;if(b!==null)b.return=I,nr=b;else for(;nr!==null;){I=nr;var T=I.sibling,R=I.return;if(wM(I),I===E){nr=null;break}if(T!==null){T.return=R,nr=T;break}nr=R}}}var L=f.alternate;if(L!==null){var j=L.child;if(j!==null){L.child=null;do{var se=j.sibling;j.sibling=null,j=se}while(j!==null)}}nr=f}}if(f.subtreeFlags&2064&&d!==null)d.return=f,nr=d;else e:for(;nr!==null;){if(f=nr,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Jd(9,f,f.return)}var K=f.sibling;if(K!==null){K.return=f.return,nr=K;break e}nr=f.return}}var Z=e.current;for(nr=Z;nr!==null;){d=nr;var G=d.child;if(d.subtreeFlags&2064&&G!==null)G.return=d,nr=G;else e:for(d=Z;nr!==null;){if(u=nr,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:T0(9,u)}}catch(X){Bn(u,u.return,X)}if(u===d){nr=null;break e}var ae=u.sibling;if(ae!==null){ae.return=u.return,nr=ae;break e}nr=u.return}}if(Ur=l,Pu(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(y0,e)}catch{}a=!0}return a}finally{Jr=i,da.transition=t}}return!1}function fT(e,t,i){t=uf(i,t),t=cM(e,t,1),e=du(e,t,1),t=lo(),e!==null&&(Np(e,1,t),Io(e,t))}function Bn(e,t,i){if(e.tag===3)fT(e,e,i);else for(;t!==null;){if(t.tag===3){fT(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(pu===null||!pu.has(a))){e=uf(i,e),e=hM(t,e,1),t=du(t,e,1),e=lo(),t!==null&&(Np(t,1,e),Io(t,e));break}}t=t.return}}function hz(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=lo(),e.pingedLanes|=e.suspendedLanes&i,xi===e&&(Fi&i)===i&&(ti===4||ti===3&&(Fi&130023424)===Fi&&500>Hn()-ob?cc(e,0):ib|=i),Io(e,t)}function kM(e,t){t===0&&(e.mode&1?(t=Gm,Gm<<=1,!(Gm&130023424)&&(Gm=4194304)):t=1);var i=lo();e=hl(e,t),e!==null&&(Np(e,t,i),Io(e,i))}function fz(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),kM(e,i)}function dz(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(i=l.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),kM(e,i)}var OM;OM=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Po.current)To=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return To=!1,ez(e,t,i);To=!!(e.flags&131072)}else To=!1,Sn&&t.flags&1048576&&jC(t,dy,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Fg(e,t),e=t.pendingProps;var l=of(t,Ki.current);Yh(t,i),l=Jw(null,t,a,e,l,i);var f=Qw();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ao(a)?(f=!0,hy(t)):f=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Zw(t),l.updater=S0,t.stateNode=l,l._reactInternals=t,W1(t,a,e,i),t=q1(null,t,a,!0,f,i)):(t.tag=0,Sn&&f&&Nw(t),io(null,t,l,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Fg(e,t),e=t.pendingProps,l=a._init,a=l(a._payload),t.type=a,l=t.tag=mz(a),e=Fa(a,e),l){case 0:t=Z1(null,t,a,e,i);break e;case 1:t=rT(null,t,a,e,i);break e;case 11:t=eT(null,t,a,e,i);break e;case 14:t=tT(null,t,a,Fa(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Fa(a,l),Z1(e,t,a,l,i);case 1:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Fa(a,l),rT(e,t,a,l,i);case 3:e:{if(mM(t),e===null)throw Error(At(387));a=t.pendingProps,f=t.memoizedState,l=f.element,DC(e,t),gy(t,a,null,i);var d=t.memoizedState;if(a=d.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){l=uf(Error(At(423)),t),t=nT(e,t,a,i,l);break e}else if(a!==l){l=uf(Error(At(424)),t),t=nT(e,t,a,i,l);break e}else for(Zo=fu(t.stateNode.containerInfo.firstChild),qo=t,Sn=!0,ja=null,i=VC(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(af(),a===l){t=fl(e,t,i);break e}io(e,t,a,i)}t=t.child}return t;case 5:return GC(t),e===null&&U1(t),a=t.type,l=t.pendingProps,f=e!==null?e.memoizedProps:null,d=l.children,L1(a,l)?d=null:f!==null&&L1(a,f)&&(t.flags|=32),pM(e,t),io(e,t,d,i),t.child;case 6:return e===null&&U1(t),null;case 13:return gM(e,t,i);case 4:return qw(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=sf(t,null,a,i):io(e,t,a,i),t.child;case 11:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Fa(a,l),eT(e,t,a,l,i);case 7:return io(e,t,t.pendingProps,i),t.child;case 8:return io(e,t,t.pendingProps.children,i),t.child;case 12:return io(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,l=t.pendingProps,f=t.memoizedProps,d=l.value,dn(py,a._currentValue),a._currentValue=d,f!==null)if(Ga(f.value,d)){if(f.children===l.children&&!Po.current){t=fl(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var u=f.dependencies;if(u!==null){d=f.child;for(var w=u.firstContext;w!==null;){if(w.context===a){if(f.tag===1){w=ll(-1,i&-i),w.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var I=E.pending;I===null?w.next=w:(w.next=I.next,I.next=w),E.pending=w}}f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),V1(f.return,i,t),u.lanes|=i;break}w=w.next}}else if(f.tag===10)d=f.type===t.type?null:f.child;else if(f.tag===18){if(d=f.return,d===null)throw Error(At(341));d.lanes|=i,u=d.alternate,u!==null&&(u.lanes|=i),V1(d,i,t),d=f.sibling}else d=f.child;if(d!==null)d.return=f;else for(d=f;d!==null;){if(d===t){d=null;break}if(f=d.sibling,f!==null){f.return=d.return,d=f;break}d=d.return}f=d}io(e,t,l.children,i),t=t.child}return t;case 9:return l=t.type,a=t.pendingProps.children,Yh(t,i),l=pa(l),a=a(l),t.flags|=1,io(e,t,a,i),t.child;case 14:return a=t.type,l=Fa(a,t.pendingProps),l=Fa(a.type,l),tT(e,t,a,l,i);case 15:return fM(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Fa(a,l),Fg(e,t),t.tag=1,Ao(a)?(e=!0,hy(t)):e=!1,Yh(t,i),$C(t,a,l),W1(t,a,l,i),q1(null,t,a,!0,e,i);case 19:return yM(e,t,i);case 22:return dM(e,t,i)}throw Error(At(156,t.tag))};function FM(e,t){return oC(e,t)}function pz(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(e,t,i,a){return new pz(e,t,i,a)}function ub(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mz(e){if(typeof e=="function")return ub(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Iw)return 11;if(e===Cw)return 14}return 2}function gu(e,t){var i=e.alternate;return i===null?(i=ha(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function zg(e,t,i,a,l,f){var d=2;if(a=e,typeof e=="function")ub(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Mh:return hc(i.children,l,f,t);case Aw:d=8,l|=8;break;case m1:return e=ha(12,i,t,l|2),e.elementType=m1,e.lanes=f,e;case g1:return e=ha(13,i,t,l),e.elementType=g1,e.lanes=f,e;case y1:return e=ha(19,i,t,l),e.elementType=y1,e.lanes=f,e;case UI:return A0(i,l,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case NI:d=10;break e;case $I:d=9;break e;case Iw:d=11;break e;case Cw:d=14;break e;case eu:d=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=ha(d,i,t,l),t.elementType=e,t.type=a,t.lanes=f,t}function hc(e,t,i,a){return e=ha(7,e,a,t),e.lanes=i,e}function A0(e,t,i,a){return e=ha(22,e,a,t),e.elementType=UI,e.lanes=i,e.stateNode={isHidden:!1},e}function d_(e,t,i){return e=ha(6,e,null,t),e.lanes=i,e}function p_(e,t,i){return t=ha(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gz(e,t,i,a,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qv(0),this.expirationTimes=qv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qv(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function cb(e,t,i,a,l,f,d,u,w){return e=new gz(e,t,i,u,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=ha(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zw(f),e}function yz(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ch,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function RM(e){if(!e)return _u;e=e._reactInternals;e:{if(Ec(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ao(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(Ao(i))return FC(e,i,t)}return t}function jM(e,t,i,a,l,f,d,u,w){return e=cb(i,a,!0,e,l,f,d,u,w),e.context=RM(null),i=e.current,a=lo(),l=mu(i),f=ll(a,l),f.callback=t??null,du(i,f,l),e.current.lanes=l,Np(e,l,a),Io(e,a),e}function I0(e,t,i,a){var l=t.current,f=lo(),d=mu(l);return i=RM(i),t.context===null?t.context=i:t.pendingContext=i,t=ll(f,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=du(l,t,d),e!==null&&(Ua(e,l,d,f),Mg(e,l,d)),d}function Ey(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function hb(e,t){dT(e,t),(e=e.alternate)&&dT(e,t)}function vz(){return null}var zM=typeof reportError=="function"?reportError:function(e){console.error(e)};function fb(e){this._internalRoot=e}C0.prototype.render=fb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));I0(e,t,null,null)};C0.prototype.unmount=fb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vc(function(){I0(null,e,null,null)}),t[cl]=null}};function C0(e){this._internalRoot=e}C0.prototype.unstable_scheduleHydration=function(e){if(e){var t=fC();e={blockedOn:null,target:e,priority:t};for(var i=0;i<iu.length&&t!==0&&t<iu[i].priority;i++);iu.splice(i,0,e),i===0&&pC(e)}};function db(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function M0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pT(){}function _z(e,t,i,a,l){if(l){if(typeof a=="function"){var f=a;a=function(){var E=Ey(d);f.call(E)}}var d=jM(t,a,e,0,null,!1,!1,"",pT);return e._reactRootContainer=d,e[cl]=d.current,_p(e.nodeType===8?e.parentNode:e),vc(),d}for(;l=e.lastChild;)e.removeChild(l);if(typeof a=="function"){var u=a;a=function(){var E=Ey(w);u.call(E)}}var w=cb(e,0,!1,null,null,!1,!1,"",pT);return e._reactRootContainer=w,e[cl]=w.current,_p(e.nodeType===8?e.parentNode:e),vc(function(){I0(t,w,i,a)}),w}function k0(e,t,i,a,l){var f=i._reactRootContainer;if(f){var d=f;if(typeof l=="function"){var u=l;l=function(){var w=Ey(d);u.call(w)}}I0(t,d,e,l)}else d=_z(i,t,e,l,a);return Ey(d)}cC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=jd(t.pendingLanes);i!==0&&(Ow(t,i|1),Io(t,Hn()),!(Ur&6)&&(cf=Hn()+500,Pu()))}break;case 13:vc(function(){var a=hl(e,1);if(a!==null){var l=lo();Ua(a,e,1,l)}}),hb(e,1)}};Fw=function(e){if(e.tag===13){var t=hl(e,134217728);if(t!==null){var i=lo();Ua(t,e,134217728,i)}hb(e,134217728)}};hC=function(e){if(e.tag===13){var t=mu(e),i=hl(e,t);if(i!==null){var a=lo();Ua(i,e,t,a)}hb(e,t)}};fC=function(){return Jr};dC=function(e,t){var i=Jr;try{return Jr=e,t()}finally{Jr=i}};A1=function(e,t,i){switch(t){case"input":if(x1(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var l=w0(a);if(!l)throw Error(At(90));GI(a),x1(a,l)}}}break;case"textarea":HI(e,i);break;case"select":t=i.value,t!=null&&Zh(e,!!i.multiple,t,!1)}};QI=ab;eC=vc;var xz={usingClientEntryPoint:!1,Events:[Up,Rh,w0,YI,JI,ab]},Id={findFiberByHostInstance:oc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},wz={bundleType:Id.bundleType,version:Id.version,rendererPackageName:Id.rendererPackageName,rendererConfig:Id.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nC(e),e===null?null:e.stateNode},findFiberByHostInstance:Id.findFiberByHostInstance||vz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tg.isDisabled&&tg.supportsFiber)try{y0=tg.inject(wz),Ps=tg}catch{}}Ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xz;Ko.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!db(t))throw Error(At(200));return yz(e,t,null,i)};Ko.createRoot=function(e,t){if(!db(e))throw Error(At(299));var i=!1,a="",l=zM;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=cb(e,1,!1,null,null,i,!1,a,l),e[cl]=t.current,_p(e.nodeType===8?e.parentNode:e),new fb(t)};Ko.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=nC(t),e=e===null?null:e.stateNode,e};Ko.flushSync=function(e){return vc(e)};Ko.hydrate=function(e,t,i){if(!M0(t))throw Error(At(200));return k0(null,e,t,!0,i)};Ko.hydrateRoot=function(e,t,i){if(!db(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,l=!1,f="",d=zM;if(i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),t=jM(t,null,e,1,i??null,l,!1,f,d),e[cl]=t.current,_p(e),a)for(e=0;e<a.length;e++)i=a[e],l=i._getVersion,l=l(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,l]:t.mutableSourceEagerHydrationData.push(i,l);return new C0(t)};Ko.render=function(e,t,i){if(!M0(t))throw Error(At(200));return k0(null,e,t,!1,i)};Ko.unmountComponentAtNode=function(e){if(!M0(e))throw Error(At(40));return e._reactRootContainer?(vc(function(){k0(null,null,e,!1,function(){e._reactRootContainer=null,e[cl]=null})}),!0):!1};Ko.unstable_batchedUpdates=ab;Ko.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!M0(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return k0(e,t,i,!1,a)};Ko.version="18.2.0-next-9e3b772b8-20220608";function LM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LM)}catch(e){console.error(e)}}LM(),jI.exports=Ko;var pb=jI.exports;const bz=wf(pb);var BM={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.4.1/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})(za,function(){var i={},a={};function l(d,u,w){if(a[d]=w,d==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}l("shared",["exports"],function(d){function u(o,r,s,h){return new(s||(s=Promise))(function(m,y){function x(F){try{C(h.next(F))}catch(V){y(V)}}function S(F){try{C(h.throw(F))}catch(V){y(V)}}function C(F){var V;F.done?m(F.value):(V=F.value,V instanceof s?V:new s(function(Y){Y(V)})).then(x,S)}C((h=h.apply(o,r||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var E=I;function I(o,r){this.x=o,this.y=r}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,s=o.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),s=Math.sin(o),h=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,r){var s=Math.cos(o),h=Math.sin(o),m=r.y+h*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-h*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(o){return o instanceof I?o:Array.isArray(o)?new I(o[0],o[1]):o};var b=w(E),T=R;function R(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}R.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=m/y}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var L=w(T);let j,se;function K(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function Z(){if(se==null&&(se=!1,K())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const m=4*h;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const s=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){se=!0;break}}}return se||!1}function G(o,r,s,h){const m=new L(o,r,s,h);return y=>m.solve(y)}const ae=G(.25,.1,.25,1);function X(o,r,s){return Math.min(s,Math.max(r,o))}function U(o,r,s){const h=s-r,m=((o-r)%h+h)%h+r;return m===r?s:m}function P(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}let z=1;function B(o,r,s){const h={};for(const m in o)h[m]=r.call(this,o[m],m,o);return h}function Q(o,r,s){const h={};for(const m in o)r.call(this,o[m],m,o)&&(h[m]=o[m]);return h}function q(o){return Array.isArray(o)?o.map(q):typeof o=="object"&&o?B(o,q):o}const ve={};function ye(o){ve[o]||(typeof console<"u"&&console.warn(o),ve[o]=!0)}function fe(o,r,s){return(s.y-o.y)*(r.x-o.x)>(r.y-o.y)*(s.x-o.x)}function oe(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let he=null;function J(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function de(o,r,s,h,m){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(o,{timestamp:0});try{const x=y==null?void 0:y.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),C=new Uint8ClampedArray(h*m*4);if(yield y.copyTo(C,function(F,V,Y,ne,ue){const ge=4*Math.max(-V,0),Ee=(Math.max(0,Y)-Y)*ne*4+ge,ke=4*ne,De=Math.max(0,V),et=Math.max(0,Y);return{rect:{x:De,y:et,width:Math.min(F.width,V+ne)-De,height:Math.min(F.height,Y+ue)-et},layout:[{offset:Ee,stride:ke}]}}(o,r,s,h,m)),S)for(let F=0;F<C.length;F+=4){const V=C[F];C[F]=C[F+2],C[F+2]=V}return C}finally{y.close()}})}let we,Pe;const Ne="AbortError";function Ie(){return new Error(Ne)}const Oe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ze(o){return Oe.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const He="global-dispatcher";class ot extends Error{constructor(r,s,h,m){super(`AJAXError: ${s} (${r}): ${h}`),this.status=r,this.statusText=s,this.url=h,this.body=m}}const ft=()=>oe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,_t=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=Ze(o.url);if(h)return h(o,r);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:He},r)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ft())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return u(this,void 0,void 0,function*(){const y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ft(),signal:m.signal});h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");const x=yield fetch(y);if(!x.ok){const F=yield x.blob();throw new ot(x.status,x.statusText,h.url,F)}let S;S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const C=yield S;if(m.signal.aborted)throw Ie();return{data:C,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,r);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:He},r)}var s;return function(h,m){return new Promise((y,x)=>{var S;const C=new XMLHttpRequest;C.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(C.responseType="arraybuffer");for(const F in h.headers)C.setRequestHeader(F,h.headers[F]);h.type==="json"&&(C.responseType="text",!((S=h.headers)===null||S===void 0)&&S.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=h.credentials==="include",C.onerror=()=>{x(new Error(C.statusText))},C.onload=()=>{if(!m.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let F=C.response;if(h.type==="json")try{F=JSON.parse(C.response)}catch(V){return void x(V)}y({data:F,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const F=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});x(new ot(C.status,C.statusText,h.url,F))}},m.signal.addEventListener("abort",()=>{C.abort(),x(Ie())}),C.send(h.body)})}(o,r)};function Mt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function mt(o,r,s){s[o]&&s[o].indexOf(r)!==-1||(s[o]=s[o]||[],s[o].push(r))}function wt(o,r,s){if(s&&s[o]){const h=s[o].indexOf(r);h!==-1&&s[o].splice(h,1)}}class Wt{constructor(r,s={}){P(this,s),this.type=r}}class Lt extends Wt{constructor(r,s={}){super("error",P({error:r},s))}}class ur{on(r,s){return this._listeners=this._listeners||{},mt(r,s,this._listeners),this}off(r,s){return wt(r,s,this._listeners),wt(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},mt(r,s,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,s){typeof r=="string"&&(r=new Wt(r,s||{}));const h=r.type;if(this.listens(h)){r.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,r);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of y)wt(h,S,this._oneTimeListeners),S.call(this,r);const x=this._eventedParent;x&&(P(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof Lt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var it={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const wr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function cr(o,r){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return wr.forEach(h=>{h in r&&(s[h]=r[h])}),s}function Ht(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let s=0;s<o.length;s++)if(!Ht(o[s],r[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const s in o)if(!Ht(o[s],r[s]))return!1;return!0}return o===r}function Se(o,r){o.push(r)}function N(o,r,s){Se(s,{command:"addSource",args:[o,r[o]]})}function D(o,r,s){Se(r,{command:"removeSource",args:[o]}),s[o]=!0}function xe(o,r,s,h){D(o,s,h),N(o,r,s)}function Xe(o,r,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Ht(o[s][h],r[s][h]))return!1;for(h in r[s])if(Object.prototype.hasOwnProperty.call(r[s],h)&&h!=="data"&&!Ht(o[s][h],r[s][h]))return!1;return!0}function tt(o,r,s,h,m,y){o=o||{},r=r||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(Ht(o[x],r[x])||s.push({command:y,args:[h,x,r[x],m]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Ht(o[x],r[x])||s.push({command:y,args:[h,x,r[x],m]}))}function ht(o){return o.id}function le(o,r){return o[r.id]=r,o}class k{constructor(r,s,h,m){this.message=(r?`${r}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function $(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}class Te extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class We{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(r){return new We(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const nt={kind:"null"},Ve={kind:"number"},Et={kind:"string"},Ft={kind:"boolean"},pr={kind:"color"},br={kind:"object"},Rt={kind:"value"},$n={kind:"collator"},ni={kind:"formatted"},ln={kind:"padding"},Me={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function ce(o,r){return{kind:"array",itemType:o,N:r}}function pe(o){if(o.kind==="array"){const r=pe(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const Fe=[nt,Ve,Et,Ft,pr,ni,br,ce(Rt),ln,Me,ie];function Be(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Be(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const s of Fe)if(!Be(s,r))return null}}return`Expected ${pe(o)} but found ${pe(r)} instead.`}function je(o,r){return r.some(s=>s.kind===o.kind)}function Ue(o,r){return r.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function ze(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Qe=.96422,dt=.82521,ut=4/29,ct=6/29,rr=3*ct*ct,Kt=ct*ct*ct,Er=Math.PI/180,lr=180/Math.PI;function Tr(o){return(o%=360)<0&&(o+=360),o}function Dr([o,r,s,h]){let m,y;const x=un((.2225045*(o=Vr(o))+.7168786*(r=Vr(r))+.0606169*(s=Vr(s)))/1);o===r&&r===s?m=y=x:(m=un((.4360747*o+.3850649*r+.1430804*s)/Qe),y=un((.0139322*o+.0971045*r+.7141733*s)/dt));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-y),h]}function Vr(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function un(o){return o>Kt?Math.pow(o,1/3):o/rr+ut}function mr([o,r,s,h]){let m=(o+16)/116,y=isNaN(r)?m:m+r/500,x=isNaN(s)?m:m-s/200;return m=1*En(m),y=Qe*En(y),x=dt*En(x),[en(3.1338561*y-1.6168667*m-.4906146*x),en(-.9787684*y+1.9161415*m+.033454*x),en(.0719453*y-.2289914*m+1.4052427*x),h]}function en(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function En(o){return o>ct?o*o*o:rr*(o-ut)}function ii(o){return parseInt(o.padEnd(2,o),16)/255}function bi(o,r){return Tn(r?o/100:o,0,1)}function Tn(o,r,s){return Math.min(Math.max(r,o),s)}function Ha(o){return!o.some(Number.isNaN)}const _l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Mr{constructor(r,s,h,m=1,y=!0){this.r=r,this.g=s,this.b=h,this.a=m,y||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,s,h,m]))}static parse(r){if(r instanceof Mr)return r;if(typeof r!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=_l[h];if(m){const[x,S,C]=m;return[x/255,S/255,C/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[ii(h.slice(S,S+=x)),ii(h.slice(S,S+=x)),ii(h.slice(S,S+=x)),ii(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,C,F,V,Y,ne,ue,ge,Ee,ke,De,et]=x,qe=[V||" ",ue||" ",ke].join("");if(qe==="  "||qe==="  /"||qe===",,"||qe===",,,"){const Je=[F,ne,Ee].join(""),st=Je==="%%%"?100:Je===""?255:0;if(st){const xt=[Tn(+C/st,0,1),Tn(+Y/st,0,1),Tn(+ge/st,0,1),De?bi(+De,et):1];if(Ha(xt))return xt}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,S,C,F,V,Y,ne,ue,ge]=y,Ee=[C||" ",V||" ",ne].join("");if(Ee==="  "||Ee==="  /"||Ee===",,"||Ee===",,,"){const ke=[+S,Tn(+F,0,100),Tn(+Y,0,100),ue?bi(+ue,ge):1];if(Ha(ke))return function([De,et,qe,Je]){function st(xt){const Ot=(xt+De/30)%12,ir=et*Math.min(qe,1-qe);return qe-ir*Math.max(-1,Math.min(Ot-3,9-Ot,1))}return De=Tr(De),et/=100,qe/=100,[st(0),st(8),st(4),Je]}(ke)}}}(r);return s?new Mr(...s,!1):void 0}get rgb(){const{r,g:s,b:h,a:m}=this,y=m||1/0;return this.overwriteGetter("rgb",[r/y,s/y,h/y,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,h,m,y]=Dr(r),x=Math.sqrt(h*h+m*m);return[Math.round(1e4*x)?Tr(Math.atan2(m,h)*lr):NaN,x,s,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Dr(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,h,m]=this.rgb;return`rgba(${[r,s,h].map(y=>Math.round(255*y)).join(",")},${m})`}}Mr.black=new Mr(0,0,0,1),Mr.white=new Mr(1,1,1,1),Mr.transparent=new Mr(0,0,0,0),Mr.red=new Mr(1,0,0,1);class xl{constructor(r,s,h){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pr{constructor(r,s,h,m,y){this.text=r,this.image=s,this.scale=h,this.fontStack=m,this.textColor=y}}class Pn{constructor(r){this.sections=r}static fromString(r){return new Pn([new Pr(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Pn?r:Pn.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class oi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof oi)return r;if(typeof r=="number")return new oi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new oi(r)}}toString(){return JSON.stringify(this.values)}}const Fs=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ai{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ai)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let s=0;s<r.length;s+=2){const h=r[s],m=r[s+1];if(typeof h!="string"||!Fs.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new ai(r)}}toString(){return JSON.stringify(this.values)}}class zi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new zi({name:r,available:!1}):null}}function Mc(o,r,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,s,h]:[o,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Un(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Mr||o instanceof xl||o instanceof Pn||o instanceof oi||o instanceof ai||o instanceof zi)return!0;if(Array.isArray(o)){for(const r of o)if(!Un(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!Un(o[r]))return!1;return!0}return!1}function xn(o){if(o===null)return nt;if(typeof o=="string")return Et;if(typeof o=="boolean")return Ft;if(typeof o=="number")return Ve;if(o instanceof Mr)return pr;if(o instanceof xl)return $n;if(o instanceof Pn)return ni;if(o instanceof oi)return ln;if(o instanceof ai)return ie;if(o instanceof zi)return Me;if(Array.isArray(o)){const r=o.length;let s;for(const h of o){const m=xn(h);if(s){if(s===m)continue;s=Rt;break}s=m}return ce(s||Rt,r)}return br}function Rs(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof Mr||o instanceof Pn||o instanceof oi||o instanceof ai||o instanceof zi?o.toString():JSON.stringify(o)}class ya{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Un(r[1]))return s.error("invalid value");const h=r[1];let m=xn(h);const y=s.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new ya(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class cn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const va={string:Et,number:Ve,boolean:Ft,object:br};class An{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let h,m=1;const y=r[0];if(y==="array"){let S,C;if(r.length>2){const F=r[1];if(typeof F!="string"||!(F in va)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=va[F],m++}else S=Rt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);C=r[2],m++}h=ce(S,C)}else{if(!va[y])throw new Error(`Types doesn't contain name = ${y}`);h=va[y]}const x=[];for(;m<r.length;m++){const S=s.parse(r[m],m,Rt);if(!S)return null;x.push(S)}return new An(h,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(r);if(!Be(this.type,xn(h)))return h;if(s===this.args.length-1)throw new cn(`Expected value to be of type ${pe(this.type)}, but found ${pe(xn(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const wl={"to-boolean":Ft,"to-color":pr,"to-number":Ve,"to-string":Et};class mo{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[0];if(!wl[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return s.error("Expected one argument.");const m=wl[h],y=[];for(let x=1;x<r.length;x++){const S=s.parse(r[x],x,Rt);if(!S)return null;y.push(S)}return new mo(m,y)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let s,h;for(const m of this.args){if(s=m.evaluate(r),h=null,s instanceof Mr)return s;if(typeof s=="string"){const y=r.parseColor(s);if(y)return y}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Mc(s[0],s[1],s[2],s[3]),!h))return new Mr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new cn(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(r);const m=oi.parse(s);if(m)return m}throw new cn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(r);const m=ai.parse(s);if(m)return m}throw new cn(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(r),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new cn(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Pn.fromString(Rs(this.args[0].evaluate(r)));case"resolvedImage":return zi.fromString(Rs(this.args[0].evaluate(r)));default:return Rs(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Mu=["Unknown","Point","LineString","Polygon"];class Za{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Mu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=Mr.parse(r)),s}}class Rr{constructor(r,s,h=[],m,y=new We,x=[]){this.registry=r,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=y,this.errors=x,this.expectedType=m,this._isConstant=s}parse(r,s,h,m,y={}){return s?this.concat(s,h,m)._parse(r,y):this._parse(r,y)}_parse(r,s){function h(m,y,x){return x==="assert"?new An(y,[m]):x==="coerce"?new mo(y,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let x=y.parse(r,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,C=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||C.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(S.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(S,C))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof ya)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Za;try{x=new ya(x.type,x.evaluate(S))}catch(C){return this.error(C.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,h){const m=typeof r=="number"?this.path.concat(r):this.path,y=h?this.scope.concat(h):this.scope;return new Rr(this.registry,this._isConstant,m,s||null,y,this.errors)}error(r,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Te(h,r))}checkSubtype(r,s){const h=Be(r,s);return h&&this.error(h),h}}class _a{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let y=1;y<r.length-1;y+=2){const x=r[y];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",y);const S=s.parse(r[y+1],y+1);if(!S)return null;h.push([x,S])}const m=s.parse(r[r.length-1],r.length-1,s.expectedType,h);return m?new _a(h,m):null}outputDefined(){return this.result.outputDefined()}}class qa{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=r[1];return s.scope.has(h)?new qa(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class ku{constructor(r,s,h){this.type=r,this.index=s,this.input=h}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ve),m=s.parse(r[2],2,ce(s.expectedType||Rt));return h&&m?new ku(m.type.itemType,h,m):null}evaluate(r){const s=this.index.evaluate(r),h=this.input.evaluate(r);if(s<0)throw new cn(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new cn(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new cn(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class si{constructor(r,s){this.type=Ft,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Rt);return h&&m?je(h.type,[Ft,Et,Ve,nt,Rt])?new si(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(h.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!Ue(s,["boolean","string","number","null"]))throw new cn(`Expected first argument to be of type boolean, string, number or null, but found ${pe(xn(s))} instead.`);if(!Ue(h,["string","array"]))throw new cn(`Expected second argument to be of type array or string, but found ${pe(xn(h))} instead.`);return h.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class js{constructor(r,s,h){this.type=Ve,this.needle=r,this.haystack=s,this.fromIndex=h}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Rt);if(!h||!m)return null;if(!je(h.type,[Ft,Et,Ve,nt,Rt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(h.type)} instead`);if(r.length===4){const y=s.parse(r[3],3,Ve);return y?new js(h,m,y):null}return new js(h,m)}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!Ue(s,["boolean","string","number","null"]))throw new cn(`Expected first argument to be of type boolean, string, number or null, but found ${pe(xn(s))} instead.`);if(!Ue(h,["string","array"]))throw new cn(`Expected second argument to be of type array or string, but found ${pe(xn(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return h.indexOf(s,m)}return h.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Ou{constructor(r,s,h,m,y,x){this.inputType=r,this.type=s,this.input=h,this.cases=m,this.outputs=y,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const y={},x=[];for(let F=2;F<r.length-1;F+=2){let V=r[F];const Y=r[F+1];Array.isArray(V)||(V=[V]);const ne=s.concat(F);if(V.length===0)return ne.error("Expected at least one branch label.");for(const ge of V){if(typeof ge!="number"&&typeof ge!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return ne.error("Numeric branch labels must be integer values.");if(h){if(ne.checkSubtype(h,xn(ge)))return null}else h=xn(ge);if(y[String(ge)]!==void 0)return ne.error("Branch labels must be unique.");y[String(ge)]=x.length}const ue=s.parse(Y,F,m);if(!ue)return null;m=m||ue.type,x.push(ue)}const S=s.parse(r[1],1,Rt);if(!S)return null;const C=s.parse(r[r.length-1],r.length-1,m);return C?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new Ou(h,m,S,y,x,C):null}evaluate(r){const s=this.input.evaluate(r);return(xn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class bl{constructor(r,s,h){this.type=r,this.branches=s,this.otherwise=h}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let x=1;x<r.length-1;x+=2){const S=s.parse(r[x],x,Ft);if(!S)return null;const C=s.parse(r[x+1],x+1,h);if(!C)return null;m.push([S,C]),h=h||C.type}const y=s.parse(r[r.length-1],r.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new bl(h,m,y)}evaluate(r){for(const[s,h]of this.branches)if(s.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,h]of this.branches)r(s),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class zs{constructor(r,s,h,m){this.type=r,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Ve);if(!h||!m)return null;if(!je(h.type,[ce(Rt),Et,Rt]))return s.error(`Expected first argument to be of type array or string, but found ${pe(h.type)} instead`);if(r.length===4){const y=s.parse(r[3],3,Ve);return y?new zs(h.type,h,m,y):null}return new zs(h.type,h,m)}evaluate(r){const s=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!Ue(s,["string","array"]))throw new cn(`Expected first argument to be of type array or string, but found ${pe(xn(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return s.slice(h,m)}return s.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Sl(o,r){const s=o.length-1;let h,m,y=0,x=s,S=0;for(;y<=x;)if(S=Math.floor((y+x)/2),h=o[S],m=o[S+1],h<=r){if(S===s||r<m)return S;y=S+1}else{if(!(h>r))throw new cn("Input is not a number.");x=S-1}return 0}class Xa{constructor(r,s,h){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[m,y]of h)this.labels.push(m),this.outputs.push(y)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(r[1],1,Ve);if(!h)return null;const m=[];let y=null;s.expectedType&&s.expectedType.kind!=="value"&&(y=s.expectedType);for(let x=1;x<r.length;x+=2){const S=x===1?-1/0:r[x],C=r[x+1],F=x,V=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(m.length&&m[m.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const Y=s.parse(C,V,y);if(!Y)return null;y=y||Y.type,m.push([S,Y])}return new Xa(y,h,m)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const y=s.length;return m>=s[y-1]?h[y-1].evaluate(r):h[Sl(s,m)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Fu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var kc=Ka;function Ka(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}Ka.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=m/y}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Oc=Fu(kc);function Li(o,r,s){return o+s*(r-o)}function El(o,r,s){return o.map((h,m)=>Li(h,r[m],s))}const Yn={number:Li,color:function(o,r,s,h="rgb"){switch(h){case"rgb":{const[m,y,x,S]=El(o.rgb,r.rgb,s);return new Mr(m,y,x,S,!1)}case"hcl":{const[m,y,x,S]=o.hcl,[C,F,V,Y]=r.hcl;let ne,ue;if(isNaN(m)||isNaN(C))isNaN(m)?isNaN(C)?ne=NaN:(ne=C,x!==1&&x!==0||(ue=F)):(ne=m,V!==1&&V!==0||(ue=y));else{let et=C-m;C>m&&et>180?et-=360:C<m&&m-C>180&&(et+=360),ne=m+s*et}const[ge,Ee,ke,De]=function([et,qe,Je,st]){return et=isNaN(et)?0:et*Er,mr([Je,Math.cos(et)*qe,Math.sin(et)*qe,st])}([ne,ue??Li(y,F,s),Li(x,V,s),Li(S,Y,s)]);return new Mr(ge,Ee,ke,De,!1)}case"lab":{const[m,y,x,S]=mr(El(o.lab,r.lab,s));return new Mr(m,y,x,S,!1)}}},array:El,padding:function(o,r,s){return new oi(El(o.values,r.values,s))},variableAnchorOffsetCollection:function(o,r,s){const h=o.values,m=r.values;if(h.length!==m.length)throw new cn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const y=[];for(let x=0;x<h.length;x+=2){if(h[x]!==m[x])throw new cn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${m[x]}`);y.push(h[x]);const[S,C]=h[x+1],[F,V]=m[x+1];y.push([Li(S,F,s),Li(C,V,s)])}return new ai(y)}};class Si{constructor(r,s,h,m,y){this.type=r,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of y)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(r,s,h,m){let y=0;if(r.name==="exponential")y=Ru(s,r.base,h,m);else if(r.name==="linear")y=Ru(s,1,h,m);else if(r.name==="cubic-bezier"){const x=r.controlPoints;y=new Oc(x[0],x[1],x[2],x[3]).solve(Ru(s,1,h,m))}return y}static parse(r,s){let[h,m,y,...x]=r;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const F=m[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:F}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const F=m.slice(1);if(F.length!==4||F.some(V=>typeof V!="number"||V<0||V>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:F}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(y=s.parse(y,2,Ve),!y)return null;const S=[];let C=null;h==="interpolate-hcl"||h==="interpolate-lab"?C=pr:s.expectedType&&s.expectedType.kind!=="value"&&(C=s.expectedType);for(let F=0;F<x.length;F+=2){const V=x[F],Y=x[F+1],ne=F+3,ue=F+4;if(typeof V!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(S.length&&S[S.length-1][0]>=V)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const ge=s.parse(Y,ue,C);if(!ge)return null;C=C||ge.type,S.push([V,ge])}return ze(C,Ve)||ze(C,pr)||ze(C,ln)||ze(C,ie)||ze(C,ce(Ve))?new Si(C,h,m,y,S):s.error(`Type ${pe(C)} is not interpolatable.`)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const y=s.length;if(m>=s[y-1])return h[y-1].evaluate(r);const x=Sl(s,m),S=Si.interpolationFactor(this.interpolation,m,s[x],s[x+1]),C=h[x].evaluate(r),F=h[x+1].evaluate(r);switch(this.operator){case"interpolate":return Yn[this.type.kind](C,F,S);case"interpolate-hcl":return Yn.color(C,F,S,"hcl");case"interpolate-lab":return Yn.color(C,F,S,"lab")}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ru(o,r,s,h){const m=h-s,y=o-s;return m===0?0:r===1?y/m:(Math.pow(r,y)-1)/(Math.pow(r,m)-1)}class Ls{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const y=[];for(const S of r.slice(1)){const C=s.parse(S,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!C)return null;h=h||C.type,y.push(C)}if(!h)throw new Error("No output type");const x=m&&y.some(S=>Be(m,S.type));return new Ls(x?Rt:h,y)}evaluate(r){let s,h=null,m=0;for(const y of this.args)if(m++,h=y.evaluate(r),h&&h instanceof zi&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function ju(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function zu(o,r,s,h){return h.compare(r,s)===0}function Ya(o,r,s){const h=o!=="=="&&o!=="!=";return class DM{constructor(y,x,S){this.type=Ft,this.lhs=y,this.rhs=x,this.collator=S,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const S=y[0];let C=x.parse(y[1],1,Rt);if(!C)return null;if(!ju(S,C.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${pe(C.type)}'.`);let F=x.parse(y[2],2,Rt);if(!F)return null;if(!ju(S,F.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${pe(F.type)}'.`);if(C.type.kind!==F.type.kind&&C.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${pe(C.type)}' and '${pe(F.type)}'.`);h&&(C.type.kind==="value"&&F.type.kind!=="value"?C=new An(F.type,[C]):C.type.kind!=="value"&&F.type.kind==="value"&&(F=new An(C.type,[F])));let V=null;if(y.length===4){if(C.type.kind!=="string"&&F.type.kind!=="string"&&C.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(V=x.parse(y[3],3,$n),!V)return null}return new DM(C,F,V)}evaluate(y){const x=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const C=xn(x),F=xn(S);if(C.kind!==F.kind||C.kind!=="string"&&C.kind!=="number")throw new cn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${C.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const C=xn(x),F=xn(S);if(C.kind!=="string"||F.kind!=="string")return r(y,x,S)}return this.collator?s(y,x,S,this.collator.evaluate(y)):r(y,x,S)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const Lu=Ya("==",function(o,r,s){return r===s},zu),Fc=Ya("!=",function(o,r,s){return r!==s},function(o,r,s,h){return!zu(0,r,s,h)}),Rc=Ya("<",function(o,r,s){return r<s},function(o,r,s,h){return h.compare(r,s)<0}),kf=Ya(">",function(o,r,s){return r>s},function(o,r,s,h){return h.compare(r,s)>0}),Of=Ya("<=",function(o,r,s){return r<=s},function(o,r,s,h){return h.compare(r,s)<=0}),jc=Ya(">=",function(o,r,s){return r>=s},function(o,r,s,h){return h.compare(r,s)>=0});class Tl{constructor(r,s,h){this.type=$n,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ft);if(!m)return null;const y=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ft);if(!y)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Et),!x)?null:new Tl(m,y,x)}evaluate(r){return new xl(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Pl{constructor(r,s,h,m,y){this.type=Et,this.number=r,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Ve);if(!h)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=s.parse(m.locale,1,Et),!y))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,Et),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=s.parse(m["min-fraction-digits"],1,Ve),!S))return null;let C=null;return m["max-fraction-digits"]&&(C=s.parse(m["max-fraction-digits"],1,Ve),!C)?null:new Pl(h,y,x,S,C)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Al{constructor(r){this.type=ni,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let y=!1;for(let x=1;x<=r.length-1;++x){const S=r[x];if(y&&typeof S=="object"&&!Array.isArray(S)){y=!1;let C=null;if(S["font-scale"]&&(C=s.parse(S["font-scale"],1,Ve),!C))return null;let F=null;if(S["text-font"]&&(F=s.parse(S["text-font"],1,ce(Et)),!F))return null;let V=null;if(S["text-color"]&&(V=s.parse(S["text-color"],1,pr),!V))return null;const Y=m[m.length-1];Y.scale=C,Y.font=F,Y.textColor=V}else{const C=s.parse(r[x],1,Rt);if(!C)return null;const F=C.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:C,scale:null,font:null,textColor:null})}}return new Al(m)}evaluate(r){return new Pn(this.sections.map(s=>{const h=s.content.evaluate(r);return xn(h)===Me?new Pr("",h,null,null,null):new Pr(Rs(h),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}}class Bu{constructor(r){this.type=Me,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Et);return h?new Bu(h):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),h=zi.fromString(s);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(s)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class Ja{constructor(r){this.type=Ve,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=s.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${pe(h.type)} instead.`):new Ja(h):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new cn(`Expected value to be of type string or array, but found ${pe(xn(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Ei=8192;function jr(o,r){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(s*m*Ei),Math.round(h*m*Ei)]}function Du(o,r){const s=Math.pow(2,r.z);return[(m=(o[0]/Ei+r.x)/s,360*m-180),(h=(o[1]/Ei+r.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,m}function Bs(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Qa(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Ff(o,r,s){const h=o[0]-r[0],m=o[1]-r[1],y=o[0]-s[0],x=o[1]-s[1];return h*x-y*m==0&&h*y<=0&&m*x<=0}function es(o,r,s,h){return(m=[h[0]-s[0],h[1]-s[1]])[0]*(y=[r[0]-o[0],r[1]-o[1]])[1]-m[1]*y[0]!=0&&!(!Lc(o,r,s,h)||!Lc(s,h,o,r));var m,y}function Rf(o,r,s){for(const h of s)for(let m=0;m<h.length-1;++m)if(es(o,r,h[m],h[m+1]))return!0;return!1}function ts(o,r,s=!1){let h=!1;for(const S of r)for(let C=0;C<S.length-1;C++){if(Ff(o,S[C],S[C+1]))return s;(y=S[C])[1]>(m=o)[1]!=(x=S[C+1])[1]>m[1]&&m[0]<(x[0]-y[0])*(m[1]-y[1])/(x[1]-y[1])+y[0]&&(h=!h)}var m,y,x;return h}function jf(o,r){for(const s of r)if(ts(o,s))return!0;return!1}function zc(o,r){for(const s of o)if(!ts(s,r))return!1;for(let s=0;s<o.length-1;++s)if(Rf(o[s],o[s+1],r))return!1;return!0}function zf(o,r){for(const s of r)if(zc(o,s))return!0;return!1}function Lc(o,r,s,h){const m=h[0]-s[0],y=h[1]-s[1],x=(o[0]-s[0])*y-m*(o[1]-s[1]),S=(r[0]-s[0])*y-m*(r[1]-s[1]);return x>0&&S<0||x<0&&S>0}function Il(o,r,s){const h=[];for(let m=0;m<o.length;m++){const y=[];for(let x=0;x<o[m].length;x++){const S=jr(o[m][x],s);Bs(r,S),y.push(S)}h.push(y)}return h}function Cl(o,r,s){const h=[];for(let m=0;m<o.length;m++){const y=Il(o[m],r,s);h.push(y)}return h}function Bc(o,r,s,h){if(o[0]<s[0]||o[0]>s[2]){const m=.5*h;let y=o[0]-s[0]>m?-h:s[0]-o[0]>m?h:0;y===0&&(y=o[0]-s[2]>m?-h:s[2]-o[0]>m?h:0),o[0]+=y}Bs(r,o)}function Dc(o,r,s,h){const m=Math.pow(2,h.z)*Ei,y=[h.x*Ei,h.y*Ei],x=[];for(const S of o)for(const C of S){const F=[C.x+y[0],C.y+y[1]];Bc(F,r,s,m),x.push(F)}return x}function Nc(o,r,s,h){const m=Math.pow(2,h.z)*Ei,y=[h.x*Ei,h.y*Ei],x=[];for(const C of o){const F=[];for(const V of C){const Y=[V.x+y[0],V.y+y[1]];Bs(r,Y),F.push(Y)}x.push(F)}if(r[2]-r[0]<=m/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const C of x)for(const F of C)Bc(F,r,s,m)}var S;return x}class xa{constructor(r,s){this.type=Ft,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Un(r[1])){const h=r[1];if(h.type==="FeatureCollection"){const m=[];for(const y of h.features){const{type:x,coordinates:S}=y.geometry;x==="Polygon"&&m.push(S),x==="MultiPolygon"&&m.push(...S)}if(m.length)return new xa(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new xa(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new xa(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Il(h.coordinates,y,x),C=Dc(s.geometry(),m,y,x);if(!Qa(m,y))return!1;for(const F of C)if(!ts(F,S))return!1}if(h.type==="MultiPolygon"){const S=Cl(h.coordinates,y,x),C=Dc(s.geometry(),m,y,x);if(!Qa(m,y))return!1;for(const F of C)if(!jf(F,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Il(h.coordinates,y,x),C=Nc(s.geometry(),m,y,x);if(!Qa(m,y))return!1;for(const F of C)if(!zc(F,S))return!1}if(h.type==="MultiPolygon"){const S=Cl(h.coordinates,y,x),C=Nc(s.geometry(),m,y,x);if(!Qa(m,y))return!1;for(const F of C)if(!zf(F,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Nu=class{constructor(o=[],r=Lf){if(this.data=o,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:r,compare:s}=this,h=r[o];for(;o>0;){const m=o-1>>1,y=r[m];if(s(h,y)>=0)break;r[o]=y,o=m}r[o]=h}_down(o){const{data:r,compare:s}=this,h=this.length>>1,m=r[o];for(;o<h;){let y=1+(o<<1),x=r[y];const S=y+1;if(S<this.length&&s(r[S],x)<0&&(y=S,x=r[S]),s(x,m)>=0)break;r[o]=x,o=y}r[o]=m}};function Lf(o,r){return o<r?-1:o>r?1:0}function Bf(o,r,s,h,m){$c(o,r,s,h||o.length-1,m||Ml)}function $c(o,r,s,h,m){for(;h>s;){if(h-s>600){var y=h-s+1,x=r-s+1,S=Math.log(y),C=.5*Math.exp(2*S/3),F=.5*Math.sqrt(S*C*(y-C)/y)*(x-y/2<0?-1:1);$c(o,r,Math.max(s,Math.floor(r-x*C/y+F)),Math.min(h,Math.floor(r+(y-x)*C/y+F)),m)}var V=o[r],Y=s,ne=h;for(Ds(o,s,r),m(o[h],V)>0&&Ds(o,s,h);Y<ne;){for(Ds(o,Y,ne),Y++,ne--;m(o[Y],V)<0;)Y++;for(;m(o[ne],V)>0;)ne--}m(o[s],V)===0?Ds(o,s,ne):Ds(o,++ne,h),ne<=r&&(s=ne+1),r<=ne&&(h=ne-1)}}function Ds(o,r,s){var h=o[r];o[r]=o[s],o[s]=h}function Ml(o,r){return o<r?-1:o>r?1:0}function kl(o,r){if(o.length<=1)return[o];const s=[];let h,m;for(const y of o){const x=Uc(y);x!==0&&(y.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(h&&s.push(h),h=[y]):h.push(y))}if(h&&s.push(h),r>1)for(let y=0;y<s.length;y++)s[y].length<=r||(Bf(s[y],r,1,s[y].length-1,rs),s[y]=s[y].slice(0,r));return s}function rs(o,r){return r.area-o.area}function Uc(o){let r=0;for(let s,h,m=0,y=o.length,x=y-1;m<y;x=m++)s=o[m],h=o[x],r+=(h.x-s.x)*(s.y+h.y);return r}const Ji=1/298.257223563,Vc=Ji*(2-Ji),Gc=Math.PI/180;class $u{constructor(r){const s=6378.137*Gc*1e3,h=Math.cos(r*Gc),m=1/(1-Vc*(1-h*h)),y=Math.sqrt(m);this.kx=s*y*h,this.ky=s*y*m*(1-Vc)}distance(r,s){const h=this.wrap(r[0]-s[0])*this.kx,m=(r[1]-s[1])*this.ky;return Math.sqrt(h*h+m*m)}pointOnLine(r,s){let h,m,y,x,S=1/0;for(let C=0;C<r.length-1;C++){let F=r[C][0],V=r[C][1],Y=this.wrap(r[C+1][0]-F)*this.kx,ne=(r[C+1][1]-V)*this.ky,ue=0;Y===0&&ne===0||(ue=(this.wrap(s[0]-F)*this.kx*Y+(s[1]-V)*this.ky*ne)/(Y*Y+ne*ne),ue>1?(F=r[C+1][0],V=r[C+1][1]):ue>0&&(F+=Y/this.kx*ue,V+=ne/this.ky*ue)),Y=this.wrap(s[0]-F)*this.kx,ne=(s[1]-V)*this.ky;const ge=Y*Y+ne*ne;ge<S&&(S=ge,h=F,m=V,y=C,x=ue)}return{point:[h,m],index:y,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Wc(o,r){return r[0]-o[0]}function ea(o){return o[1]-o[0]+1}function Co(o,r){return o[1]>=o[0]&&o[1]<r}function ns(o,r){if(o[0]>o[1])return[null,null];const s=ea(o);if(r){if(s===2)return[o,null];const m=Math.floor(s/2);return[[o[0],o[0]+m],[o[0]+m,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function Uu(o,r){if(!Co(r,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=r[0];h<=r[1];++h)Bs(s,o[h]);return s}function Vu(o){const r=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)Bs(r,h);return r}function Xr(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Ol(o,r,s){if(!Xr(o)||!Xr(r))return NaN;let h=0,m=0;return o[2]<r[0]&&(h=r[0]-o[2]),o[0]>r[2]&&(h=o[0]-r[2]),o[1]>r[3]&&(m=o[1]-r[3]),o[3]<r[1]&&(m=r[1]-o[3]),s.distance([0,0],[h,m])}function xr(o,r,s){const h=s.pointOnLine(r,o);return s.distance(o,h.point)}function Ns(o,r,s,h,m){const y=Math.min(xr(o,[s,h],m),xr(r,[s,h],m)),x=Math.min(xr(s,[o,r],m),xr(h,[o,r],m));return Math.min(y,x)}function tn(o,r,s,h,m){if(!Co(r,o.length)||!Co(h,s.length))return 1/0;let y=1/0;for(let x=r[0];x<r[1];++x){const S=o[x],C=o[x+1];for(let F=h[0];F<h[1];++F){const V=s[F],Y=s[F+1];if(es(S,C,V,Y))return 0;y=Math.min(y,Ns(S,C,V,Y,m))}}return y}function Gr(o,r,s,h,m){if(!Co(r,o.length)||!Co(h,s.length))return NaN;let y=1/0;for(let x=r[0];x<=r[1];++x)for(let S=h[0];S<=h[1];++S)if(y=Math.min(y,m.distance(o[x],s[S])),y===0)return y;return y}function go(o,r,s){if(ts(o,r,!0))return 0;let h=1/0;for(const m of r){const y=m[0],x=m[m.length-1];if(y!==x&&(h=Math.min(h,xr(o,[x,y],s)),h===0))return h;const S=s.pointOnLine(m,o);if(h=Math.min(h,s.distance(o,S.point)),h===0)return h}return h}function Hc(o,r,s,h){if(!Co(r,o.length))return NaN;for(let y=r[0];y<=r[1];++y)if(ts(o[y],s,!0))return 0;let m=1/0;for(let y=r[0];y<r[1];++y){const x=o[y],S=o[y+1];for(const C of s)for(let F=0,V=C.length,Y=V-1;F<V;Y=F++){const ne=C[Y],ue=C[F];if(es(x,S,ne,ue))return 0;m=Math.min(m,Ns(x,S,ne,ue,h))}}return m}function Fl(o,r){for(const s of o)for(const h of s)if(ts(h,r,!0))return!0;return!1}function Rl(o,r,s,h=1/0){const m=Vu(o),y=Vu(r);if(h!==1/0&&Ol(m,y,s)>=h)return h;if(Qa(m,y)){if(Fl(o,r))return 0}else if(Fl(r,o))return 0;let x=1/0;for(const S of o)for(let C=0,F=S.length,V=F-1;C<F;V=C++){const Y=S[V],ne=S[C];for(const ue of r)for(let ge=0,Ee=ue.length,ke=Ee-1;ge<Ee;ke=ge++){const De=ue[ke],et=ue[ge];if(es(Y,ne,De,et))return 0;x=Math.min(x,Ns(Y,ne,De,et,s))}}return x}function Zc(o,r,s,h,m,y){if(!y)return;const x=Ol(Uu(h,y),m,s);x<r&&o.push([x,y,[0,0]])}function Mo(o,r,s,h,m,y,x){if(!y||!x)return;const S=Ol(Uu(h,y),Uu(m,x),s);S<r&&o.push([S,y,x])}function ko(o,r,s,h,m=1/0){let y=Math.min(h.distance(o[0],s[0][0]),m);if(y===0)return y;const x=new Nu([[0,[0,o.length-1],[0,0]]],Wc),S=Vu(s);for(;x.length>0;){const C=x.pop();if(C[0]>=y)continue;const F=C[1],V=r?50:100;if(ea(F)<=V){if(!Co(F,o.length))return NaN;if(r){const Y=Hc(o,F,s,h);if(isNaN(Y)||Y===0)return Y;y=Math.min(y,Y)}else for(let Y=F[0];Y<=F[1];++Y){const ne=go(o[Y],s,h);if(y=Math.min(y,ne),y===0)return 0}}else{const Y=ns(F,r);Zc(x,y,h,o,S,Y[0]),Zc(x,y,h,o,S,Y[1])}}return y}function In(o,r,s,h,m,y=1/0){let x=Math.min(y,m.distance(o[0],s[0]));if(x===0)return x;const S=new Nu([[0,[0,o.length-1],[0,s.length-1]]],Wc);for(;S.length>0;){const C=S.pop();if(C[0]>=x)continue;const F=C[1],V=C[2],Y=r?50:100,ne=h?50:100;if(ea(F)<=Y&&ea(V)<=ne){if(!Co(F,o.length)&&Co(V,s.length))return NaN;let ue;if(r&&h)ue=tn(o,F,s,V,m),x=Math.min(x,ue);else if(r&&!h){const ge=o.slice(F[0],F[1]+1);for(let Ee=V[0];Ee<=V[1];++Ee)if(ue=xr(s[Ee],ge,m),x=Math.min(x,ue),x===0)return x}else if(!r&&h){const ge=s.slice(V[0],V[1]+1);for(let Ee=F[0];Ee<=F[1];++Ee)if(ue=xr(o[Ee],ge,m),x=Math.min(x,ue),x===0)return x}else ue=Gr(o,F,s,V,m),x=Math.min(x,ue)}else{const ue=ns(F,r),ge=ns(V,h);Mo(S,x,m,o,s,ue[0],ge[0]),Mo(S,x,m,o,s,ue[0],ge[1]),Mo(S,x,m,o,s,ue[1],ge[0]),Mo(S,x,m,o,s,ue[1],ge[1])}}return x}function yo(o){return o.type==="MultiPolygon"?o.coordinates.map(r=>({type:"Polygon",coordinates:r})):o.type==="MultiLineString"?o.coordinates.map(r=>({type:"LineString",coordinates:r})):o.type==="MultiPoint"?o.coordinates.map(r=>({type:"Point",coordinates:r})):[o]}class vo{constructor(r,s){this.type=Ve,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Un(r[1])){const h=r[1];if(h.type==="FeatureCollection")return new vo(h,h.features.map(m=>yo(m.geometry)).flat());if(h.type==="Feature")return new vo(h,yo(h.geometry));if("type"in h&&"coordinates"in h)return new vo(h,yo(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=s.geometry(),y=m.flat().map(C=>Du([C.x,C.y],s.canonical));if(m.length===0)return NaN;const x=new $u(y[0][1]);let S=1/0;for(const C of h){switch(C.type){case"Point":S=Math.min(S,In(y,!1,[C.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,In(y,!1,C.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,ko(y,!1,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=s.geometry(),y=m.flat().map(C=>Du([C.x,C.y],s.canonical));if(m.length===0)return NaN;const x=new $u(y[0][1]);let S=1/0;for(const C of h){switch(C.type){case"Point":S=Math.min(S,In(y,!0,[C.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,In(y,!0,C.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,ko(y,!0,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="Polygon")return function(s,h){const m=s.geometry();if(m.length===0||m[0].length===0)return NaN;const y=kl(m,0).map(C=>C.map(F=>F.map(V=>Du([V.x,V.y],s.canonical)))),x=new $u(y[0][0][0][1]);let S=1/0;for(const C of h)for(const F of y){switch(C.type){case"Point":S=Math.min(S,ko([C.coordinates],!1,F,x,S));break;case"LineString":S=Math.min(S,ko(C.coordinates,!0,F,x,S));break;case"Polygon":S=Math.min(S,Rl(F,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Oo={"==":Lu,"!=":Fc,">":kf,"<":Rc,">=":jc,"<=":Of,array:An,at:ku,boolean:An,case:bl,coalesce:Ls,collator:Tl,format:Al,image:Bu,in:si,"index-of":js,interpolate:Si,"interpolate-hcl":Si,"interpolate-lab":Si,length:Ja,let:_a,literal:ya,match:Ou,number:An,"number-format":Pl,object:An,slice:zs,step:Xa,string:An,"to-boolean":mo,"to-color":mo,"to-number":mo,"to-string":mo,var:qa,within:xa,distance:vo};class li{constructor(r,s,h,m){this.name=r,this.type=s,this._evaluate=h,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const h=r[0],m=li.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([F])=>!Array.isArray(F)||F.length===r.length-1);let C=null;for(const[F,V]of S){C=new Rr(s.registry,Vs,s.path,null,s.scope);const Y=[];let ne=!1;for(let ue=1;ue<r.length;ue++){const ge=r[ue],Ee=Array.isArray(F)?F[ue-1]:F.type,ke=C.parse(ge,1+Y.length,Ee);if(!ke){ne=!0;break}Y.push(ke)}if(!ne)if(Array.isArray(F)&&F.length!==Y.length)C.error(`Expected ${F.length} arguments, but found ${Y.length} instead.`);else{for(let ue=0;ue<Y.length;ue++){const ge=Array.isArray(F)?F[ue]:F.type,Ee=Y[ue];C.concat(ue+1).checkSubtype(ge,Ee.type)}if(C.errors.length===0)return new li(h,y,V,Y)}}if(S.length===1)s.errors.push(...C.errors);else{const F=(S.length?S:x).map(([Y])=>{return ne=Y,Array.isArray(ne)?`(${ne.map(pe).join(", ")})`:`(${pe(ne.type)}...)`;var ne}).join(" | "),V=[];for(let Y=1;Y<r.length;Y++){const ne=s.parse(r[Y],1+V.length);if(!ne)return null;V.push(pe(ne.type))}s.error(`Expected arguments of type ${F}, but found (${V.join(", ")}) instead.`)}return null}static register(r,s){li.definitions=s;for(const h in s)r[h]=li}}function $s(o,[r,s,h,m]){r=r.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const y=m?m.evaluate(o):1,x=Mc(r,s,h,y);if(x)throw new cn(x);return new Mr(r/255,s/255,h/255,y,!1)}function Us(o,r){return o in r}function Ti(o,r){const s=r[o];return s===void 0?null:s}function Bi(o){return{type:o}}function Vs(o){if(o instanceof qa)return Vs(o.boundExpression);if(o instanceof li&&o.name==="error"||o instanceof Tl||o instanceof xa||o instanceof vo)return!1;const r=o instanceof mo||o instanceof An;let s=!0;return o.eachChild(h=>{s=r?s&&Vs(h):s&&h instanceof ya}),!!s&&wa(o)&&Gs(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function wa(o){if(o instanceof li&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof xa||o instanceof vo)return!1;let r=!0;return o.eachChild(s=>{r&&!wa(s)&&(r=!1)}),r}function ta(o){if(o instanceof li&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(s=>{r&&!ta(s)&&(r=!1)}),r}function Gs(o,r){if(o instanceof li&&r.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!Gs(h,r)&&(s=!1)}),s}function jl(o){return{result:"success",value:o}}function ra(o){return{result:"error",value:o}}function _o(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Fo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ws(o){return!!o.expression&&o.expression.interpolated}function kr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function ba(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function is(o){return o}function os(o,r){const s=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),y=o.type||(Ws(r)?"exponential":"interval");if(s||r.type==="padding"){const V=s?Mr.parse:oi.parse;(o=$({},o)).stops&&(o.stops=o.stops.map(Y=>[Y[0],V(Y[1])])),o.default=V(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,C,F;if(y==="exponential")S=_e;else if(y==="interval")S=H;else if(y==="categorical"){S=zl,C=Object.create(null);for(const V of o.stops)C[V[0]]=V[1];F=typeof o.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);S=$e}if(h){const V={},Y=[];for(let ge=0;ge<o.stops.length;ge++){const Ee=o.stops[ge],ke=Ee[0].zoom;V[ke]===void 0&&(V[ke]={zoom:ke,type:o.type,property:o.property,default:o.default,stops:[]},Y.push(ke)),V[ke].stops.push([Ee[0].value,Ee[1]])}const ne=[];for(const ge of Y)ne.push([V[ge].zoom,os(V[ge],r)]);const ue={name:"linear"};return{kind:"composite",interpolationType:ue,interpolationFactor:Si.interpolationFactor.bind(void 0,ue),zoomStops:ne.map(ge=>ge[0]),evaluate:({zoom:ge},Ee)=>_e({stops:ne,base:o.base},r,ge).evaluate(ge,Ee)}}if(m){const V=y==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:Si.interpolationFactor.bind(void 0,V),zoomStops:o.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>S(o,r,Y,C,F)}}return{kind:"source",evaluate(V,Y){const ne=Y&&Y.properties?Y.properties[o.property]:void 0;return ne===void 0?Sa(o.default,r.default):S(o,r,ne,C,F)}}}function Sa(o,r,s){return o!==void 0?o:r!==void 0?r:s!==void 0?s:void 0}function zl(o,r,s,h,m){return Sa(typeof s===m?h[s]:void 0,o.default,r.default)}function H(o,r,s){if(kr(s)!=="number")return Sa(o.default,r.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const m=Sl(o.stops.map(y=>y[0]),s);return o.stops[m][1]}function _e(o,r,s){const h=o.base!==void 0?o.base:1;if(kr(s)!=="number")return Sa(o.default,r.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const y=Sl(o.stops.map(V=>V[0]),s),x=function(V,Y,ne,ue){const ge=ue-ne,Ee=V-ne;return ge===0?0:Y===1?Ee/ge:(Math.pow(Y,Ee)-1)/(Math.pow(Y,ge)-1)}(s,h,o.stops[y][0],o.stops[y+1][0]),S=o.stops[y][1],C=o.stops[y+1][1],F=Yn[r.type]||is;return typeof S.evaluate=="function"?{evaluate(...V){const Y=S.evaluate.apply(void 0,V),ne=C.evaluate.apply(void 0,V);if(Y!==void 0&&ne!==void 0)return F(Y,ne,x,o.colorSpace)}}:F(S,C,x,o.colorSpace)}function $e(o,r,s){switch(r.type){case"color":s=Mr.parse(s);break;case"formatted":s=Pn.fromString(s.toString());break;case"resolvedImage":s=zi.fromString(s.toString());break;case"padding":s=oi.parse(s);break;default:kr(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return Sa(s,o.default,r.default)}li.register(Oo,{error:[{kind:"error"},[Et],(o,[r])=>{throw new cn(r.evaluate(o))}],typeof:[Et,[Rt],(o,[r])=>pe(xn(r.evaluate(o)))],"to-rgba":[ce(Ve,4),[pr],(o,[r])=>{const[s,h,m,y]=r.evaluate(o).rgb;return[255*s,255*h,255*m,y]}],rgb:[pr,[Ve,Ve,Ve],$s],rgba:[pr,[Ve,Ve,Ve,Ve],$s],has:{type:Ft,overloads:[[[Et],(o,[r])=>Us(r.evaluate(o),o.properties())],[[Et,br],(o,[r,s])=>Us(r.evaluate(o),s.evaluate(o))]]},get:{type:Rt,overloads:[[[Et],(o,[r])=>Ti(r.evaluate(o),o.properties())],[[Et,br],(o,[r,s])=>Ti(r.evaluate(o),s.evaluate(o))]]},"feature-state":[Rt,[Et],(o,[r])=>Ti(r.evaluate(o),o.featureState||{})],properties:[br,[],o=>o.properties()],"geometry-type":[Et,[],o=>o.geometryType()],id:[Rt,[],o=>o.id()],zoom:[Ve,[],o=>o.globals.zoom],"heatmap-density":[Ve,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ve,[],o=>o.globals.lineProgress||0],accumulated:[Rt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ve,Bi(Ve),(o,r)=>{let s=0;for(const h of r)s+=h.evaluate(o);return s}],"*":[Ve,Bi(Ve),(o,r)=>{let s=1;for(const h of r)s*=h.evaluate(o);return s}],"-":{type:Ve,overloads:[[[Ve,Ve],(o,[r,s])=>r.evaluate(o)-s.evaluate(o)],[[Ve],(o,[r])=>-r.evaluate(o)]]},"/":[Ve,[Ve,Ve],(o,[r,s])=>r.evaluate(o)/s.evaluate(o)],"%":[Ve,[Ve,Ve],(o,[r,s])=>r.evaluate(o)%s.evaluate(o)],ln2:[Ve,[],()=>Math.LN2],pi:[Ve,[],()=>Math.PI],e:[Ve,[],()=>Math.E],"^":[Ve,[Ve,Ve],(o,[r,s])=>Math.pow(r.evaluate(o),s.evaluate(o))],sqrt:[Ve,[Ve],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ve,[Ve],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ve,[Ve],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ve,[Ve],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ve,[Ve],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ve,[Ve],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ve,[Ve],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ve,[Ve],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ve,[Ve],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ve,[Ve],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ve,Bi(Ve),(o,r)=>Math.min(...r.map(s=>s.evaluate(o)))],max:[Ve,Bi(Ve),(o,r)=>Math.max(...r.map(s=>s.evaluate(o)))],abs:[Ve,[Ve],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ve,[Ve],(o,[r])=>{const s=r.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ve,[Ve],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ve,[Ve],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Ft,[Et,Rt],(o,[r,s])=>o.properties()[r.value]===s.value],"filter-id-==":[Ft,[Rt],(o,[r])=>o.id()===r.value],"filter-type-==":[Ft,[Et],(o,[r])=>o.geometryType()===r.value],"filter-<":[Ft,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Ft,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<h}],"filter->":[Ft,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[Ft,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>h}],"filter-<=":[Ft,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Ft,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<=h}],"filter->=":[Ft,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Ft,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>=h}],"filter-has":[Ft,[Rt],(o,[r])=>r.value in o.properties()],"filter-has-id":[Ft,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Ft,[ce(Et)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Ft,[ce(Rt)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Ft,[Et,ce(Rt)],(o,[r,s])=>s.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Ft,[Et,ce(Rt)],(o,[r,s])=>function(h,m,y,x){for(;y<=x;){const S=y+x>>1;if(m[S]===h)return!0;m[S]>h?x=S-1:y=S+1}return!1}(o.properties()[r.value],s.value,0,s.value.length-1)],all:{type:Ft,overloads:[[[Ft,Ft],(o,[r,s])=>r.evaluate(o)&&s.evaluate(o)],[Bi(Ft),(o,r)=>{for(const s of r)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],(o,[r,s])=>r.evaluate(o)||s.evaluate(o)],[Bi(Ft),(o,r)=>{for(const s of r)if(s.evaluate(o))return!0;return!1}]]},"!":[Ft,[Ft],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Ft,[Et],(o,[r])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(r.evaluate(o))}],upcase:[Et,[Et],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Et,[Et],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Et,Bi(Rt),(o,r)=>r.map(s=>Rs(s.evaluate(o))).join("")],"resolved-locale":[Et,[$n],(o,[r])=>r.evaluate(o).resolvedLocale()]});class lt{constructor(r,s){var h;this.expression=r,this._warningHistory={},this._evaluator=new Za,this._defaultValue=s?(h=s).type==="color"&&ba(h.default)?new Mr(0,0,0,0):h.type==="color"?Mr.parse(h.default)||null:h.type==="padding"?oi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?ai.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,s,h,m,y,x){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new cn(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function kt(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Oo}function Tt(o,r){const s=new Rr(Oo,Vs,[],r?function(m){const y={color:pr,string:Et,number:Ve,enum:Et,boolean:Ft,formatted:ni,padding:ln,resolvedImage:Me,variableAnchorOffsetCollection:ie};return m.type==="array"?ce(y[m.value]||Rt,m.length):y[m.type]}(r):void 0),h=s.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?jl(new lt(h,r)):ra(s.errors)}class Zt{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!ta(s.expression)}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,y,x)}evaluate(r,s,h,m,y,x){return this._styleExpression.evaluate(r,s,h,m,y,x)}}class Yt{constructor(r,s,h,m){this.kind=r,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!ta(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,y,x)}evaluate(r,s,h,m,y,x){return this._styleExpression.evaluate(r,s,h,m,y,x)}interpolationFactor(r,s,h){return this.interpolationType?Si.interpolationFactor(this.interpolationType,r,s,h):0}}function vr(o,r){const s=Tt(o,r);if(s.result==="error")return s;const h=s.value.expression,m=wa(h);if(!m&&!_o(r))return ra([new Te("","data expressions not supported")]);const y=Gs(h,["zoom"]);if(!y&&!Fo(r))return ra([new Te("","zoom expressions not supported")]);const x=_r(h);return x||y?x instanceof Te?ra([x]):x instanceof Si&&!Ws(r)?ra([new Te("",'"interpolate" expressions cannot be used with this property')]):jl(x?new Yt(m?"camera":"composite",s.value,x.labels,x instanceof Si?x.interpolation:void 0):new Zt(m?"constant":"source",s.value)):ra([new Te("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Or{constructor(r,s){this._parameters=r,this._specification=s,$(this,os(this._parameters,this._specification))}static deserialize(r){return new Or(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function _r(o){let r=null;if(o instanceof _a)r=_r(o.result);else if(o instanceof Ls){for(const s of o.args)if(r=_r(s),r)break}else(o instanceof Xa||o instanceof Si)&&o.input instanceof li&&o.input.name==="zoom"&&(r=o);return r instanceof Te||o.eachChild(s=>{const h=_r(s);h instanceof Te?r=h:!r&&h?r=new Te("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Te("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function $r(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!$r(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const hn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function jn(o){if(o==null)return{filter:()=>!0,needGeometry:!1};$r(o)||(o=Ai(o));const r=Tt(o,hn);if(r.result==="error")throw new Error(r.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>r.value.evaluate(s,h,{},m),needGeometry:Pi(o)}}function Vn(o,r){return o<r?-1:o>r?1:0}function Pi(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let r=1;r<o.length;r++)if(Pi(o[r]))return!0;return!1}function Ai(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Qi(o[1],o[2],"=="):r==="!="?Ta(Qi(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Qi(o[1],o[2],r):r==="any"?(s=o.slice(1),["any"].concat(s.map(Ai))):r==="all"?["all"].concat(o.slice(1).map(Ai)):r==="none"?["all"].concat(o.slice(1).map(Ai).map(Ta)):r==="in"?Gu(o[1],o.slice(2)):r==="!in"?Ta(Gu(o[1],o.slice(2))):r==="has"?Ea(o[1]):r!=="!has"||Ta(Ea(o[1]));var s}function Qi(o,r,s){switch(o){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,o,r]}}function Gu(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Vn)]]:["filter-in-small",o,["literal",r]]}}function Ea(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Ta(o){return["!",o]}function Hs(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const y of o)m+=`${Hs(y)},`;return`${m}]`}const s=Object.keys(o).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${Hs(o[s[m]])},`;return`${h}}`}function K0(o){let r="";for(const s of wr)r+=`/${Hs(o[s])}`;return r}function qc(o){const r=o.value;return r?[new k(o.key,r,"constants have been deprecated as of v8")]:[]}function pn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Pa(o){if(Array.isArray(o))return o.map(Pa);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const s in o)r[s]=Pa(o[s]);return r}return pn(o)}function eo(o){const r=o.key,s=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},y=o.style,x=o.styleSpec,S=o.validateSpec;let C=[];const F=kr(s);if(F!=="object")return[new k(r,s,`object expected, ${F} found`)];for(const V in s){const Y=V.split(".")[0],ne=h[Y]||h["*"];let ue;if(m[Y])ue=m[Y];else if(h[Y])ue=S;else if(m["*"])ue=m["*"];else{if(!h["*"]){C.push(new k(r,s[V],`unknown property "${V}"`));continue}ue=S}C=C.concat(ue({key:(r&&`${r}.`)+V,value:s[V],valueSpec:ne,style:y,styleSpec:x,object:s,objectKey:V,validateSpec:S},s))}for(const V in h)m[V]||h[V].required&&h[V].default===void 0&&s[V]===void 0&&C.push(new k(r,s,`missing required property "${V}"`));return C}function Xc(o){const r=o.value,s=o.valueSpec,h=o.style,m=o.styleSpec,y=o.key,x=o.arrayElementValidator||o.validateSpec;if(kr(r)!=="array")return[new k(y,r,`array expected, ${kr(r)} found`)];if(s.length&&r.length!==s.length)return[new k(y,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new k(y,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),kr(s.value)==="object"&&(S=s.value);let C=[];for(let F=0;F<r.length;F++)C=C.concat(x({array:r,arrayIndex:F,value:r[F],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${y}[${F}]`}));return C}function Df(o){const r=o.key,s=o.value,h=o.valueSpec;let m=kr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new k(r,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new k(r,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new k(r,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Kc(o){const r=o.valueSpec,s=pn(o.value.type);let h,m,y,x={};const S=s!=="categorical"&&o.value.property===void 0,C=!S,F=kr(o.value.stops)==="array"&&kr(o.value.stops[0])==="array"&&kr(o.value.stops[0][0])==="object",V=eo({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ue){if(s==="identity")return[new k(ue.key,ue.value,'identity function may not have a "stops" property')];let ge=[];const Ee=ue.value;return ge=ge.concat(Xc({key:ue.key,value:Ee,valueSpec:ue.valueSpec,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,arrayElementValidator:Y})),kr(Ee)==="array"&&Ee.length===0&&ge.push(new k(ue.key,Ee,"array must have at least one stop")),ge},default:function(ue){return ue.validateSpec({key:ue.key,value:ue.value,valueSpec:r,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec})}}});return s==="identity"&&S&&V.push(new k(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||V.push(new k(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Ws(o.valueSpec)&&V.push(new k(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(C&&!_o(o.valueSpec)?V.push(new k(o.key,o.value,"property functions not supported")):S&&!Fo(o.valueSpec)&&V.push(new k(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||V.push(new k(o.key,o.value,'"property" property is required')),V;function Y(ue){let ge=[];const Ee=ue.value,ke=ue.key;if(kr(Ee)!=="array")return[new k(ke,Ee,`array expected, ${kr(Ee)} found`)];if(Ee.length!==2)return[new k(ke,Ee,`array length 2 expected, length ${Ee.length} found`)];if(F){if(kr(Ee[0])!=="object")return[new k(ke,Ee,`object expected, ${kr(Ee[0])} found`)];if(Ee[0].zoom===void 0)return[new k(ke,Ee,"object stop key must have zoom")];if(Ee[0].value===void 0)return[new k(ke,Ee,"object stop key must have value")];if(y&&y>pn(Ee[0].zoom))return[new k(ke,Ee[0].zoom,"stop zoom values must appear in ascending order")];pn(Ee[0].zoom)!==y&&(y=pn(Ee[0].zoom),m=void 0,x={}),ge=ge.concat(eo({key:`${ke}[0]`,value:Ee[0],valueSpec:{zoom:{}},validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{zoom:Df,value:ne}}))}else ge=ge.concat(ne({key:`${ke}[0]`,value:Ee[0],valueSpec:{},validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec},Ee));return kt(Pa(Ee[1]))?ge.concat([new k(`${ke}[1]`,Ee[1],"expressions are not allowed in function stops.")]):ge.concat(ue.validateSpec({key:`${ke}[1]`,value:Ee[1],valueSpec:r,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec}))}function ne(ue,ge){const Ee=kr(ue.value),ke=pn(ue.value),De=ue.value!==null?ue.value:ge;if(h){if(Ee!==h)return[new k(ue.key,De,`${Ee} stop domain type must match previous stop domain type ${h}`)]}else h=Ee;if(Ee!=="number"&&Ee!=="string"&&Ee!=="boolean")return[new k(ue.key,De,"stop domain value must be a number, string, or boolean")];if(Ee!=="number"&&s!=="categorical"){let et=`number expected, ${Ee} found`;return _o(r)&&s===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new k(ue.key,De,et)]}return s!=="categorical"||Ee!=="number"||isFinite(ke)&&Math.floor(ke)===ke?s!=="categorical"&&Ee==="number"&&m!==void 0&&ke<m?[new k(ue.key,De,"stop domain values must appear in ascending order")]:(m=ke,s==="categorical"&&ke in x?[new k(ue.key,De,"stop domain values must be unique")]:(x[ke]=!0,[])):[new k(ue.key,De,`integer expected, found ${ke}`)]}}function Aa(o){const r=(o.expressionContext==="property"?vr:Tt)(Pa(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new k(`${o.key}${h.key}`,o.value,h.message));const s=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new k(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ta(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ta(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Gs(s,["zoom","feature-state"]))return[new k(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!wa(s))return[new k(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ll(o){const r=o.key,s=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(pn(s))===-1&&m.push(new k(r,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(pn(s))===-1&&m.push(new k(r,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function Yc(o){return $r(Pa(o.value))?Aa($({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Nf(o)}function Nf(o){const r=o.value,s=o.key;if(kr(r)!=="array")return[new k(s,r,`array expected, ${kr(r)} found`)];const h=o.styleSpec;let m,y=[];if(r.length<1)return[new k(s,r,"filter array must have at least 1 element")];switch(y=y.concat(Ll({key:`${s}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),pn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&pn(r[1])==="$type"&&y.push(new k(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&y.push(new k(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=kr(r[1]),m!=="string"&&y.push(new k(`${s}[1]`,r[1],`string expected, ${m} found`)));for(let x=2;x<r.length;x++)m=kr(r[x]),pn(r[1])==="$type"?y=y.concat(Ll({key:`${s}[${x}]`,value:r[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new k(`${s}[${x}]`,r[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)y=y.concat(Nf({key:`${s}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=kr(r[1]),r.length!==2?y.push(new k(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new k(`${s}[1]`,r[1],`string expected, ${m} found`))}return y}function $f(o,r){const s=o.key,h=o.validateSpec,m=o.style,y=o.styleSpec,x=o.value,S=o.objectKey,C=y[`${r}_${o.layerType}`];if(!C)return[];const F=S.match(/^(.*)-transition$/);if(r==="paint"&&F&&C[F[1]]&&C[F[1]].transition)return h({key:s,value:x,valueSpec:y.transition,style:m,styleSpec:y});const V=o.valueSpec||C[S];if(!V)return[new k(s,x,`unknown property "${S}"`)];let Y;if(kr(x)==="string"&&_o(V)&&!V.tokens&&(Y=/^{([^}]+)}$/.exec(x)))return[new k(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Y[1])} }\`.`)];const ne=[];return o.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&ne.push(new k(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&ba(Pa(x))&&pn(x.type)==="identity"&&ne.push(new k(s,x,'"text-font" does not support identity functions'))),ne.concat(h({key:o.key,value:x,valueSpec:V,style:m,styleSpec:y,expressionContext:"property",propertyType:r,propertyKey:S}))}function Jc(o){return $f(o,"paint")}function Uf(o){return $f(o,"layout")}function tm(o){let r=[];const s=o.value,h=o.key,m=o.style,y=o.styleSpec;s.type||s.ref||r.push(new k(h,s,'either "type" or "ref" is required'));let x=pn(s.type);const S=pn(s.ref);if(s.id){const C=pn(s.id);for(let F=0;F<o.arrayIndex;F++){const V=m.layers[F];pn(V.id)===C&&r.push(new k(h,s.id,`duplicate layer id "${s.id}", previously used at line ${V.id.__line__}`))}}if("ref"in s){let C;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&r.push(new k(h,s[F],`"${F}" is prohibited for ref layers`))}),m.layers.forEach(F=>{pn(F.id)===S&&(C=F)}),C?C.ref?r.push(new k(h,s.ref,"ref cannot reference another ref layer")):x=pn(C.type):r.push(new k(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const C=m.sources&&m.sources[s.source],F=C&&pn(C.type);C?F==="vector"&&x==="raster"?r.push(new k(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?r.push(new k(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?r.push(new k(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?r.push(new k(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&C.lineMetrics||r.push(new k(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new k(h,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new k(h,s.source,`source "${s.source}" not found`))}else r.push(new k(h,s,'missing required property "source"'));return r=r.concat(eo({key:h,value:s,valueSpec:y.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:y.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Yc,layout:C=>eo({layer:s,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":F=>Uf($({layerType:x},F))}}),paint:C=>eo({layer:s,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":F=>Jc($({layerType:x},F))}})}})),r}function as(o){const r=o.value,s=o.key,h=kr(r);return h!=="string"?[new k(s,r,`string expected, ${h} found`)]:[]}const rm={promoteId:function({key:o,value:r}){if(kr(r)==="string")return as({key:o,value:r});{const s=[];for(const h in r)s.push(...as({key:`${o}.${h}`,value:r[h]}));return s}}};function Vf(o){const r=o.value,s=o.key,h=o.styleSpec,m=o.style,y=o.validateSpec;if(!r.type)return[new k(s,r,'"type" is required')];const x=pn(r.type);let S;switch(x){case"vector":case"raster":return S=eo({key:s,value:r,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:rm,validateSpec:y}),S;case"raster-dem":return S=function(C){var F;const V=(F=C.sourceName)!==null&&F!==void 0?F:"",Y=C.value,ne=C.styleSpec,ue=ne.source_raster_dem,ge=C.style;let Ee=[];const ke=kr(Y);if(Y===void 0)return Ee;if(ke!=="object")return Ee.push(new k("source_raster_dem",Y,`object expected, ${ke} found`)),Ee;const De=pn(Y.encoding)==="custom",et=["redFactor","greenFactor","blueFactor","baseShift"],qe=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const Je in Y)!De&&et.includes(Je)?Ee.push(new k(Je,Y[Je],`In "${V}": "${Je}" is only valid when "encoding" is set to "custom". ${qe} encoding found`)):ue[Je]?Ee=Ee.concat(C.validateSpec({key:Je,value:Y[Je],valueSpec:ue[Je],validateSpec:C.validateSpec,style:ge,styleSpec:ne})):Ee.push(new k(Je,Y[Je],`unknown property "${Je}"`));return Ee}({sourceName:s,value:r,style:o.style,styleSpec:h,validateSpec:y}),S;case"geojson":if(S=eo({key:s,value:r,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:y,objectElementValidators:rm}),r.cluster)for(const C in r.clusterProperties){const[F,V]=r.clusterProperties[C],Y=typeof F=="string"?[F,["accumulated"],["get",C]]:F;S.push(...Aa({key:`${s}.${C}.map`,value:V,validateSpec:y,expressionContext:"cluster-map"})),S.push(...Aa({key:`${s}.${C}.reduce`,value:Y,validateSpec:y,expressionContext:"cluster-reduce"}))}return S;case"video":return eo({key:s,value:r,valueSpec:h.source_video,style:m,validateSpec:y,styleSpec:h});case"image":return eo({key:s,value:r,valueSpec:h.source_image,style:m,validateSpec:y,styleSpec:h});case"canvas":return[new k(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ll({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:y,styleSpec:h})}}function Gf(o){const r=o.value,s=o.styleSpec,h=s.light,m=o.style;let y=[];const x=kr(r);if(r===void 0)return y;if(x!=="object")return y=y.concat([new k("light",r,`object expected, ${x} found`)]),y;for(const S in r){const C=S.match(/^(.*)-transition$/);y=y.concat(C&&h[C[1]]&&h[C[1]].transition?o.validateSpec({key:S,value:r[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)])}return y}function Wf(o){const r=o.value,s=o.styleSpec,h=s.sky,m=o.style,y=kr(r);if(r===void 0)return[];if(y!=="object")return[new k("sky",r,`object expected, ${y} found`)];let x=[];for(const S in r)x=x.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)]);return x}function nm(o){const r=o.value,s=o.styleSpec,h=s.terrain,m=o.style;let y=[];const x=kr(r);if(r===void 0)return y;if(x!=="object")return y=y.concat([new k("terrain",r,`object expected, ${x} found`)]),y;for(const S in r)y=y.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)]);return y}function im(o){let r=[];const s=o.value,h=o.key;if(Array.isArray(s)){const m=[],y=[];for(const x in s)s[x].id&&m.includes(s[x].id)&&r.push(new k(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),m.push(s[x].id),s[x].url&&y.includes(s[x].url)&&r.push(new k(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),y.push(s[x].url),r=r.concat(eo({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return as({key:h,value:s})}const Hf={"*":()=>[],array:Xc,boolean:function(o){const r=o.value,s=o.key,h=kr(r);return h!=="boolean"?[new k(s,r,`boolean expected, ${h} found`)]:[]},number:Df,color:function(o){const r=o.key,s=o.value,h=kr(s);return h!=="string"?[new k(r,s,`color expected, ${h} found`)]:Mr.parse(String(s))?[]:[new k(r,s,`color expected, "${s}" found`)]},constants:qc,enum:Ll,filter:Yc,function:Kc,layer:tm,object:eo,source:Vf,light:Gf,sky:Wf,terrain:nm,projection:function(o){const r=o.value,s=o.styleSpec,h=s.projection,m=o.style,y=kr(r);if(r===void 0)return[];if(y!=="object")return[new k("projection",r,`object expected, ${y} found`)];let x=[];for(const S in r)x=x.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)]);return x},string:as,formatted:function(o){return as(o).length===0?[]:Aa(o)},resolvedImage:function(o){return as(o).length===0?[]:Aa(o)},padding:function(o){const r=o.key,s=o.value;if(kr(s)==="array"){if(s.length<1||s.length>4)return[new k(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let y=0;y<s.length;y++)m=m.concat(o.validateSpec({key:`${r}[${y}]`,value:s[y],validateSpec:o.validateSpec,valueSpec:h}));return m}return Df({key:r,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,s=o.value,h=kr(s),m=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new k(r,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let x=0;x<s.length;x+=2)y=y.concat(Ll({key:`${r}[${x}]`,value:s[x],valueSpec:m.layout_symbol["text-anchor"]})),y=y.concat(Xc({key:`${r}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return y},sprite:im};function Bl(o){const r=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Bl,s.expression&&ba(pn(r))?Kc(o):s.expression&&kt(Pa(r))?Aa(o):s.type&&Hf[s.type]?Hf[s.type](o):eo($({},o,{valueSpec:s.type?h[s.type]:s}))}function Zf(o){const r=o.value,s=o.key,h=as(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new k(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new k(s,r,'"glyphs" url must include a "{range}" token'))),h}function xo(o,r=it){let s=[];return s=s.concat(Bl({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:Bl,objectElementValidators:{glyphs:Zf,"*":()=>[]}})),o.constants&&(s=s.concat(qc({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:Bl}))),om(s)}function to(o){return function(r){return o({...r,validateSpec:Bl})}}function om(o){return[].concat(o).sort((r,s)=>r.line-s.line)}function wo(o){return function(...r){return om(o.apply(this,r))}}xo.source=wo(to(Vf)),xo.sprite=wo(to(im)),xo.glyphs=wo(to(Zf)),xo.light=wo(to(Gf)),xo.sky=wo(to(Wf)),xo.terrain=wo(to(nm)),xo.layer=wo(to(tm)),xo.filter=wo(to(Yc)),xo.paintProperty=wo(to(Jc)),xo.layoutProperty=wo(to(Uf));const Wu=xo,Y0=Wu.light,am=Wu.paintProperty,sm=Wu.layoutProperty;function qf(o,r){let s=!1;if(r&&r.length)for(const h of r)o.fire(new Lt(new Error(h.message))),s=!0;return s}class Hu{constructor(r,s,h){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let C=0;C<this.d*this.d;C++){const F=x[3+C],V=x[3+C+1];m.push(F===V?null:x.subarray(F,V))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=h,this.scale=s/r,this.uid=0;const y=h/s*r;this.min=-y,this.max=r+y}insert(r,s,h,m,y){this._forEachCell(s,h,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,h,m,y,x){this.cells[y].push(x)}query(r,s,h,m,y){const x=this.min,S=this.max;if(r<=x&&s<=x&&S<=h&&S<=m&&!y)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(r,s,h,m,this._queryCell,C,{},y),C}}_queryCell(r,s,h,m,y,x,S,C){const F=this.cells[y];if(F!==null){const V=this.keys,Y=this.bboxes;for(let ne=0;ne<F.length;ne++){const ue=F[ne];if(S[ue]===void 0){const ge=4*ue;(C?C(Y[ge+0],Y[ge+1],Y[ge+2],Y[ge+3]):r<=Y[ge+2]&&s<=Y[ge+3]&&h>=Y[ge+0]&&m>=Y[ge+1])?(S[ue]=!0,x.push(V[ue])):S[ue]=!1}}}}_forEachCell(r,s,h,m,y,x,S,C){const F=this._convertToCellCoord(r),V=this._convertToCellCoord(s),Y=this._convertToCellCoord(h),ne=this._convertToCellCoord(m);for(let ue=F;ue<=Y;ue++)for(let ge=V;ge<=ne;ge++){const Ee=this.d*ge+ue;if((!C||C(this._convertFromCellCoord(ue),this._convertFromCellCoord(ge),this._convertFromCellCoord(ue+1),this._convertFromCellCoord(ge+1)))&&y.call(this,r,s,h,m,Ee,x,S,C))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=s;for(let x=0;x<r.length;x++){const S=r[x];m[3+x]=y,m.set(S,y),y+=S.length}return m[3+r.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+r.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(r,s){const h=r.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(r){return new Hu(r.buffer)}}const ss={};function Ut(o,r,s={}){if(ss[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),ss[o]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}Ut("Object",Object),Ut("TransferableGridIndex",Hu),Ut("Color",Mr),Ut("Error",Error),Ut("AJAXError",ot),Ut("ResolvedImage",zi),Ut("StylePropertyFunction",Or),Ut("StyleExpression",lt,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",Yt),Ut("ZoomConstantExpression",Zt),Ut("CompoundExpression",li,{omit:["_evaluate"]});for(const o in Oo)Oo[o]._classRegistryKey||Ut(`Expression_${o}`,Oo[o]);function lm(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Zu(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(lm(o)||J(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return r&&r.push(s.buffer),s}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Zu(h,r));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!ss[h])throw new Error(`${h} is not registered.`);const m=s.serialize?s.serialize(o,r):{};if(s.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in o){if(!o.hasOwnProperty(y)||ss[h].omit.indexOf(y)>=0)continue;const x=o[y];m[y]=ss[h].shallow.indexOf(y)>=0?x:Zu(x,r)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof o)}function na(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||lm(o)||J(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(na);if(typeof o=="object"){const r=o.$name||"Object";if(!ss[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=ss[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const y=o[m];h[m]=ss[r].shallow.indexOf(m)>=0?y:na(y)}return h}throw new Error("can't deserialize object of type "+typeof o)}class um{constructor(){this.first=!0}update(r,s){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Bt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Xf(o){for(const r of o)if(Kf(r.charCodeAt(0)))return!0;return!1}function J0(o){for(const r of o)if(!cm(r.charCodeAt(0)))return!1;return!0}function cm(o){return!(Bt.Arabic(o)||Bt["Arabic Supplement"](o)||Bt["Arabic Extended-A"](o)||Bt["Arabic Presentation Forms-A"](o)||Bt["Arabic Presentation Forms-B"](o))}function Kf(o){return!(o!==746&&o!==747&&(o<4352||!(Bt["Bopomofo Extended"](o)||Bt.Bopomofo(o)||Bt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Bt["CJK Compatibility Ideographs"](o)||Bt["CJK Compatibility"](o)||Bt["CJK Radicals Supplement"](o)||Bt["CJK Strokes"](o)||!(!Bt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Bt["CJK Unified Ideographs Extension A"](o)||Bt["CJK Unified Ideographs"](o)||Bt["Enclosed CJK Letters and Months"](o)||Bt["Hangul Compatibility Jamo"](o)||Bt["Hangul Jamo Extended-A"](o)||Bt["Hangul Jamo Extended-B"](o)||Bt["Hangul Jamo"](o)||Bt["Hangul Syllables"](o)||Bt.Hiragana(o)||Bt["Ideographic Description Characters"](o)||Bt.Kanbun(o)||Bt["Kangxi Radicals"](o)||Bt["Katakana Phonetic Extensions"](o)||Bt.Katakana(o)&&o!==12540||!(!Bt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Bt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Bt["Unified Canadian Aboriginal Syllabics"](o)||Bt["Unified Canadian Aboriginal Syllabics Extended"](o)||Bt["Vertical Forms"](o)||Bt["Yijing Hexagram Symbols"](o)||Bt["Yi Syllables"](o)||Bt["Yi Radicals"](o))))}function hm(o){return!(Kf(o)||function(r){return!!(Bt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Bt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Bt["Letterlike Symbols"](r)||Bt["Number Forms"](r)||Bt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Bt["Control Pictures"](r)&&r!==9251||Bt["Optical Character Recognition"](r)||Bt["Enclosed Alphanumerics"](r)||Bt["Geometric Shapes"](r)||Bt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Bt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Bt["CJK Symbols and Punctuation"](r)||Bt.Katakana(r)||Bt["Private Use Area"](r)||Bt["CJK Compatibility Forms"](r)||Bt["Small Form Variants"](r)||Bt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function ls(o){return o>=1424&&o<=2303||Bt["Arabic Presentation Forms-A"](o)||Bt["Arabic Presentation Forms-B"](o)}function fm(o,r){return!(!r&&ls(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Bt.Khmer(o))}function Yf(o){for(const r of o)if(ls(r.charCodeAt(0)))return!0;return!1}const us=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Kr{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new um,this.transition={})}isSupportedScript(r){return function(s,h){for(const m of s)if(!fm(m.charCodeAt(0),h))return!1;return!0}(r,us.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Qc{constructor(r,s){this.property=r,this.value=s,this.expression=function(h,m){if(ba(h))return new Or(h,m);if(kt(h)){const y=vr(h,m);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=h;return m.type==="color"&&typeof h=="string"?y=Mr.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(y=ai.parse(h)):y=oi.parse(h),{kind:"constant",evaluate:()=>y}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,h){return this.property.possiblyEvaluate(this,r,s,h)}}class Dl{constructor(r){this.property=r,this.value=new Qc(r,void 0)}transitioned(r,s){return new dm(this.property,this.value,s,P({},r.transition,this.transition),r.now)}untransitioned(){return new dm(this.property,this.value,null,{},0)}}class Nl{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return q(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dl(this._values[r].property)),this._values[r].value=new Qc(this._values[r].property,s===null?void 0:q(s))}getTransition(r){return q(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dl(this._values[r].property)),this._values[r].transition=q(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h);const m=this.getTransition(s);m!==void 0&&(r[`${s}-transition`]=m)}return r}transitioned(r,s){const h=new Jf(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(r,s._values[m]);return h}untransitioned(){const r=new Jf(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class dm{constructor(r,s,h,m,y){this.property=r,this.value=s,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(r,s,h){const m=r.now||0,y=this.value.possiblyEvaluate(r,s,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return x.possiblyEvaluate(r,s,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,h),y,function(C){if(C<=0)return 0;if(C>=1)return 1;const F=C*C,V=F*C;return 4*(C<.5?V:3*(C-F)+V-.75)}(S))}}return y}}class Jf{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,h){const m=new eh(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,s,h);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class qu{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return q(this._values[r].value)}setValue(r,s){this._values[r]=new Qc(this._values[r].property,s===null?void 0:q(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h)}return r}possiblyEvaluate(r,s,h){const m=new eh(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,s,h);return m}}class ia{constructor(r,s,h){this.property=r,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,h,m){return this.property.evaluate(this.value,this.parameters,r,s,h,m)}}class eh{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Jt{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,h){const m=Yn[this.specification.type];return m?m(r,s,h):r}}class sr{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,h,m){return new ia(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},h,m)}:r.expression,s)}interpolate(r,s,h){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new ia(this,{kind:"constant",value:void 0},r.parameters);const m=Yn[this.specification.type];if(m){const y=m(r.value.value,s.value.value,h);return new ia(this,{kind:"constant",value:y},r.parameters)}return r}evaluate(r,s,h,m,y,x){return r.kind==="constant"?r.value:r.evaluate(s,h,m,y,x)}}class v extends sr{possiblyEvaluate(r,s,h,m){if(r.value===void 0)return new ia(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const y=r.expression.evaluate(s,null,{},h,m),x=r.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,S=this._calculate(x,x,x,s);return new ia(this,{kind:"constant",value:S},s)}if(r.expression.kind==="camera"){const y=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new ia(this,{kind:"constant",value:y},s)}return new ia(this,r.expression,s)}evaluate(r,s,h,m,y,x){if(r.kind==="source"){const S=r.evaluate(s,h,m,y,x);return this._calculate(S,S,S,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},h,m),r.evaluate({zoom:Math.floor(s.zoom)},h,m),r.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):r.value}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class n{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const y=r.expression.evaluate(s,null,{},h,m);return this._calculate(y,y,y,s)}return this._calculate(r.expression.evaluate(new Kr(Math.floor(s.zoom-1),s)),r.expression.evaluate(new Kr(Math.floor(s.zoom),s)),r.expression.evaluate(new Kr(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class c{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){return!!r.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class p{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const h=r[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new Qc(h,void 0),y=this.defaultTransitionablePropertyValues[s]=new Dl(h);this.defaultTransitioningPropertyValues[s]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}Ut("DataDrivenProperty",sr),Ut("DataConstantProperty",Jt),Ut("CrossFadedDataDrivenProperty",v),Ut("CrossFadedProperty",n),Ut("ColorRampProperty",c);const g="-transition";class _ extends ur{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new qu(s.layout)),s.paint)){this._transitionablePaint=new Nl(s.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eh(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,h={}){s!=null&&this._validate(sm,`layers.${this.id}.layout.${r}`,r,s,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return r.endsWith(g)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,h={}){if(s!=null&&this._validate(am,`layers.${this.id}.paint.${r}`,r,s,h))return!1;if(r.endsWith(g))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[r],y=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const C=this._transitionablePaint._values[r].value;return C.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(r,S,C)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Q(r,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(r,s,h,m,y={}){return(!y||y.validate!==!1)&&qf(this,r.call(Wu,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:it,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof ia&&_o(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const A={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class M{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class O{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function W(o,r=1){let s=0,h=0;return{members:o.map(m=>{const y=A[m.type].BYTES_PER_ELEMENT,x=s=te(s,Math.max(r,y)),S=m.components||1;return h=Math.max(h,y),s+=y*S,{name:m.name,type:m.type,components:S,offset:x}}),size:te(s,Math.max(h,r)),alignment:r}}function te(o,r){return Math.ceil(o/r)*r}class ee extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.int16[m+0]=s,this.int16[m+1]=h,r}}ee.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",ee);class me extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.int16[y+0]=s,this.int16[y+1]=h,this.int16[y+2]=m,r}}me.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",me);class be extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,h,m)}emplace(r,s,h,m,y){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=y,r}}be.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",be);class Ae extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const C=6*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.int16[C+2]=m,this.int16[C+3]=y,this.int16[C+4]=x,this.int16[C+5]=S,r}}Ae.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",Ae);class Le extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const C=4*r,F=8*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.uint8[F+4]=m,this.uint8[F+5]=y,this.uint8[F+6]=x,this.uint8[F+7]=S,r}}Le.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",Le);class Ce extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.float32[m+0]=s,this.float32[m+1]=h,r}}Ce.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",Ce);class Ge extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F,V){const Y=this.length;return this.resize(Y+1),this.emplace(Y,r,s,h,m,y,x,S,C,F,V)}emplace(r,s,h,m,y,x,S,C,F,V,Y){const ne=10*r;return this.uint16[ne+0]=s,this.uint16[ne+1]=h,this.uint16[ne+2]=m,this.uint16[ne+3]=y,this.uint16[ne+4]=x,this.uint16[ne+5]=S,this.uint16[ne+6]=C,this.uint16[ne+7]=F,this.uint16[ne+8]=V,this.uint16[ne+9]=Y,r}}Ge.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",Ge);class Ke extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F,V,Y,ne){const ue=this.length;return this.resize(ue+1),this.emplace(ue,r,s,h,m,y,x,S,C,F,V,Y,ne)}emplace(r,s,h,m,y,x,S,C,F,V,Y,ne,ue){const ge=12*r;return this.int16[ge+0]=s,this.int16[ge+1]=h,this.int16[ge+2]=m,this.int16[ge+3]=y,this.uint16[ge+4]=x,this.uint16[ge+5]=S,this.uint16[ge+6]=C,this.uint16[ge+7]=F,this.int16[ge+8]=V,this.int16[ge+9]=Y,this.int16[ge+10]=ne,this.int16[ge+11]=ue,r}}Ke.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",Ke);class Re extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.float32[y+0]=s,this.float32[y+1]=h,this.float32[y+2]=m,r}}Re.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",Re);class Ye extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}Ye.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",Ye);class rt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F){const V=this.length;return this.resize(V+1),this.emplace(V,r,s,h,m,y,x,S,C,F)}emplace(r,s,h,m,y,x,S,C,F,V){const Y=10*r,ne=5*r;return this.int16[Y+0]=s,this.int16[Y+1]=h,this.int16[Y+2]=m,this.int16[Y+3]=y,this.int16[Y+4]=x,this.int16[Y+5]=S,this.uint32[ne+3]=C,this.uint16[Y+8]=F,this.uint16[Y+9]=V,r}}rt.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",rt);class at extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const C=6*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.int16[C+2]=m,this.int16[C+3]=y,this.int16[C+4]=x,this.int16[C+5]=S,r}}at.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",at);class gt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,h,m,y)}emplace(r,s,h,m,y,x){const S=4*r,C=8*r;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[C+6]=y,this.int16[C+7]=x,r}}gt.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",gt);class bt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const C=16*r,F=4*r,V=8*r;return this.uint8[C+0]=s,this.uint8[C+1]=h,this.float32[F+1]=m,this.float32[F+2]=y,this.int16[V+6]=x,this.int16[V+7]=S,r}}bt.prototype.bytesPerElement=16,Ut("StructArrayLayout2ub2f2i16",bt);class Dt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.uint16[y+0]=s,this.uint16[y+1]=h,this.uint16[y+2]=m,r}}Dt.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",Dt);class Nt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F,V,Y,ne,ue,ge,Ee,ke,De){const et=this.length;return this.resize(et+1),this.emplace(et,r,s,h,m,y,x,S,C,F,V,Y,ne,ue,ge,Ee,ke,De)}emplace(r,s,h,m,y,x,S,C,F,V,Y,ne,ue,ge,Ee,ke,De,et){const qe=24*r,Je=12*r,st=48*r;return this.int16[qe+0]=s,this.int16[qe+1]=h,this.uint16[qe+2]=m,this.uint16[qe+3]=y,this.uint32[Je+2]=x,this.uint32[Je+3]=S,this.uint32[Je+4]=C,this.uint16[qe+10]=F,this.uint16[qe+11]=V,this.uint16[qe+12]=Y,this.float32[Je+7]=ne,this.float32[Je+8]=ue,this.uint8[st+36]=ge,this.uint8[st+37]=Ee,this.uint8[st+38]=ke,this.uint32[Je+10]=De,this.int16[qe+22]=et,r}}Nt.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Nt);class St extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F,V,Y,ne,ue,ge,Ee,ke,De,et,qe,Je,st,xt,Ot,ir,zt,Ct,Xt,Vt){const $t=this.length;return this.resize($t+1),this.emplace($t,r,s,h,m,y,x,S,C,F,V,Y,ne,ue,ge,Ee,ke,De,et,qe,Je,st,xt,Ot,ir,zt,Ct,Xt,Vt)}emplace(r,s,h,m,y,x,S,C,F,V,Y,ne,ue,ge,Ee,ke,De,et,qe,Je,st,xt,Ot,ir,zt,Ct,Xt,Vt,$t){const pt=32*r,Qt=16*r;return this.int16[pt+0]=s,this.int16[pt+1]=h,this.int16[pt+2]=m,this.int16[pt+3]=y,this.int16[pt+4]=x,this.int16[pt+5]=S,this.int16[pt+6]=C,this.int16[pt+7]=F,this.uint16[pt+8]=V,this.uint16[pt+9]=Y,this.uint16[pt+10]=ne,this.uint16[pt+11]=ue,this.uint16[pt+12]=ge,this.uint16[pt+13]=Ee,this.uint16[pt+14]=ke,this.uint16[pt+15]=De,this.uint16[pt+16]=et,this.uint16[pt+17]=qe,this.uint16[pt+18]=Je,this.uint16[pt+19]=st,this.uint16[pt+20]=xt,this.uint16[pt+21]=Ot,this.uint16[pt+22]=ir,this.uint32[Qt+12]=zt,this.float32[Qt+13]=Ct,this.float32[Qt+14]=Xt,this.uint16[pt+30]=Vt,this.uint16[pt+31]=$t,r}}St.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",St);class Pt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}Pt.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",Pt);class Gt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.uint16[6*r+0]=s,this.float32[y+1]=h,this.float32[y+2]=m,r}}Gt.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",Gt);class gr extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=4*r;return this.uint32[2*r+0]=s,this.uint16[y+2]=h,this.uint16[y+3]=m,r}}gr.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",gr);class It extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.uint16[m+0]=s,this.uint16[m+1]=h,r}}It.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",It);class jt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}jt.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",jt);class hr extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,h,m)}emplace(r,s,h,m,y){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=y,r}}hr.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",hr);class rn extends M{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}rn.prototype.size=20;class Sr extends rt{get(r){return new rn(this,r)}}Ut("CollisionBoxArray",Sr);class Ar extends M{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ar.prototype.size=48;class nn extends Nt{get(r){return new Ar(this,r)}}Ut("PlacedSymbolArray",nn);class ui extends M{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ui.prototype.size=64;class Ro extends St{get(r){return new ui(this,r)}}Ut("SymbolInstanceArray",Ro);class on extends Pt{getoffsetX(r){return this.float32[1*r+0]}}Ut("GlyphOffsetArray",on);class Di extends me{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Ut("SymbolLineVertexArray",Di);class Ii extends M{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ii.prototype.size=12;class ci extends Gt{get(r){return new Ii(this,r)}}Ut("TextAnchorOffsetArray",ci);class hi extends M{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}hi.prototype.size=8;class jo extends gr{get(r){return new hi(this,r)}}Ut("FeatureIndexArray",jo);class Zs extends ee{}class th extends ee{}class $l extends ee{}class qs extends Ae{}class rh extends Le{}class Qf extends Ce{}class Jn extends Ge{}class zo extends Ke{}class cs extends Re{}class Ul extends Ye{}class fi extends at{}class di extends bt{}class Zn extends Dt{}class fn extends It{}const Vl=W([{name:"a_pos",components:2,type:"Int16"}],4),{members:ed}=Vl;class Gn{constructor(r=[]){this.segments=r}prepareSegment(r,s,h,m){let y=this.segments[this.segments.length-1];return r>Gn.MAX_VERTEX_ARRAY_LENGTH&&ye(`Max vertices per segment is ${Gn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!y||y.vertexLength+r>Gn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,h,m){return new Gn([{vertexOffset:r,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function pm(o,r){return 256*(o=X(Math.floor(o),0,255))+X(Math.floor(r),0,255)}Gn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",Gn);const nh=W([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ih={exports:{}},hs={exports:{}};hs.exports=function(o,r){var s,h,m,y,x,S,C,F;for(h=o.length-(s=3&o.length),m=r,x=3432918353,S=461845907,F=0;F<h;)C=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,m=27492+(65535&(y=5*(65535&(m=(m^=C=(65535&(C=(C=(65535&C)*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(C=0,s){case 3:C^=(255&o.charCodeAt(F+2))<<16;case 2:C^=(255&o.charCodeAt(F+1))<<8;case 1:m^=C=(65535&(C=(C=(65535&(C^=255&o.charCodeAt(F)))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var mm=hs.exports,td={exports:{}};td.exports=function(o,r){for(var s,h=o.length,m=r^h,y=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(y)|(255&o.charCodeAt(++y))<<8|(255&o.charCodeAt(++y))<<16|(255&o.charCodeAt(++y))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:m^=(255&o.charCodeAt(y+2))<<16;case 2:m^=(255&o.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var rd=mm,nd=td.exports;ih.exports=rd,ih.exports.murmur3=rd,ih.exports.murmur2=nd;var oh=w(ih.exports);class Gl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,h,m){this.ids.push(S2(r)),this.positions.push(s,h,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=S2(r);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=s?m=x:h=x+1}const y=[];for(;this.ids[h]===s;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(r,s){const h=new Float64Array(r.ids),m=new Uint32Array(r.positions);return Q0(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(r){const s=new Gl;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function S2(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:oh(String(o))}function Q0(o,r,s,h){for(;s<h;){const m=o[s+h>>1];let y=s-1,x=h+1;for(;;){do y++;while(o[y]<m);do x--;while(o[x]>m);if(y>=x)break;gm(o,y,x),gm(r,3*y,3*x),gm(r,3*y+1,3*x+1),gm(r,3*y+2,3*x+2)}x-s<h-x?(Q0(o,r,s,x),s=x+1):(Q0(o,r,x+1,h),h=x)}}function gm(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}Ut("FeaturePositionMap",Gl);class Xu{constructor(r,s){this.gl=r.gl,this.location=s}}class ym extends Xu{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class E2 extends Xu{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class T2 extends Xu{constructor(r,s){super(r,s),this.current=Mr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const i4=new Float32Array(16);function ev(o){return[pm(255*o.r,255*o.g),pm(255*o.b,255*o.a)]}class id{constructor(r,s,h){this.value=r,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(r,s,h){r.set(h.constantOr(this.value))}getBinding(r,s,h){return this.type==="color"?new T2(r,s):new ym(r,s)}}class ah{constructor(r,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setUniform(r,s,h,m){const y=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&r.set(y)}getBinding(r,s,h){return h.substr(0,9)==="u_pattern"?new E2(r,s):new ym(r,s)}}class Xs{constructor(r,s,h,m){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,s,h,m,y){const x=this.paintVertexArray.length,S=this.expression.evaluate(new Kr(0),s,{},m,[],y);this.paintVertexArray.resize(r),this._setPaintValue(x,r,S)}updatePaintArray(r,s,h,m){const y=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(r,s,y)}_setPaintValue(r,s,h){if(this.type==="color"){const m=ev(h);for(let y=r;y<s;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=r;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ia{constructor(r,s,h,m,y,x){this.expression=r,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,h,m,y){const x=this.expression.evaluate(new Kr(this.zoom),s,{},m,[],y),S=this.expression.evaluate(new Kr(this.zoom+1),s,{},m,[],y),C=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(C,r,x,S)}updatePaintArray(r,s,h,m){const y=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(r,s,y,x)}_setPaintValue(r,s,h,m){if(this.type==="color"){const y=ev(h),x=ev(m);for(let S=r;S<s;S++)this.paintVertexArray.emplace(S,y[0],y[1],x[0],x[1])}else{for(let y=r;y<s;y++)this.paintVertexArray.emplace(y,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=X(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,s,h){return new ym(r,s)}}class Wl{constructor(r,s,h,m,y,x){this.expression=r,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(r,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(r,s,h,m,y){this._setPaintValues(r,s,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(r,s,h,m){if(!m||!h)return;const{min:y,mid:x,max:S}=h,C=m[y],F=m[x],V=m[S];if(C&&F&&V)for(let Y=r;Y<s;Y++)this.zoomInPaintVertexArray.emplace(Y,F.tl[0],F.tl[1],F.br[0],F.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],F.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(Y,F.tl[0],F.tl[1],F.br[0],F.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],F.pixelRatio,V.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,nh.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,nh.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class P2{constructor(r,s,h){this.binders={},this._buffers=[];const m=[];for(const y in r.paint._values){if(!h(y))continue;const x=r.paint.get(y);if(!(x instanceof ia&&_o(x.property.specification)))continue;const S=o4(y,r.type),C=x.value,F=x.property.specification.type,V=x.property.useIntegerZoom,Y=x.property.specification["property-type"],ne=Y==="cross-faded"||Y==="cross-faded-data-driven";if(C.kind==="constant")this.binders[y]=ne?new ah(C.value,S):new id(C.value,S,F),m.push(`/u_${y}`);else if(C.kind==="source"||ne){const ue=A2(y,F,"source");this.binders[y]=ne?new Wl(C,F,V,s,ue,r.id):new Xs(C,S,F,ue),m.push(`/a_${y}`)}else{const ue=A2(y,F,"composite");this.binders[y]=new Ia(C,S,F,V,s,ue),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Xs||s instanceof Ia?s.maxValue:0}populatePaintArrays(r,s,h,m,y){for(const x in this.binders){const S=this.binders[x];(S instanceof Xs||S instanceof Ia||S instanceof Wl)&&S.populatePaintArray(r,s,h,m,y)}}setConstantPatternPositions(r,s){for(const h in this.binders){const m=this.binders[h];m instanceof ah&&m.setConstantPatternPositions(r,s)}}updatePaintArrays(r,s,h,m,y){let x=!1;for(const S in r){const C=s.getPositions(S);for(const F of C){const V=h.feature(F.index);for(const Y in this.binders){const ne=this.binders[Y];if((ne instanceof Xs||ne instanceof Ia||ne instanceof Wl)&&ne.expression.isStateDependent===!0){const ue=m.paint.get(Y);ne.expression=ue.value,ne.updatePaintArray(F.start,F.end,V,r[S],y),x=!0}}}}return x}defines(){const r=[];for(const s in this.binders){const h=this.binders[s];(h instanceof id||h instanceof ah)&&r.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Xs||h instanceof Ia)for(let m=0;m<h.paintVertexAttributes.length;m++)r.push(h.paintVertexAttributes[m].name);else if(h instanceof Wl)for(let m=0;m<nh.members.length;m++)r.push(nh.members[m].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof id||h instanceof ah||h instanceof Ia)for(const m of h.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const h=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof id||y instanceof ah||y instanceof Ia){for(const x of y.uniformNames)if(s[x]){const S=y.getBinding(r,s[x],x);h.push({name:x,property:m,binding:S})}}}return h}setUniforms(r,s,h,m){for(const{name:y,property:x,binding:S}of s)this.binders[x].setUniform(S,m,h.get(x),y)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(r&&h instanceof Wl){const m=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Xs||h instanceof Ia)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const s in this.binders){const h=this.binders[s];(h instanceof Xs||h instanceof Ia||h instanceof Wl)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Xs||s instanceof Ia||s instanceof Wl)&&s.destroy()}}}class Ku{constructor(r,s,h=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new P2(m,s,h);this.needsUpload=!1,this._featureMap=new Gl,this._bufferOffset=0}populatePaintArrays(r,s,h,m,y,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,s,m,y,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,h,m){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(r,this._featureMap,s,y,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function o4(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function A2(o,r,s){const h={color:{source:Ce,composite:hr},number:{source:Pt,composite:Ce}},m=function(y){return{"line-pattern":{source:Jn,composite:Jn},"fill-pattern":{source:Jn,composite:Jn},"fill-extrusion-pattern":{source:Jn,composite:Jn}}[y]}(o);return m&&m[s]||h[r][s]}Ut("ConstantBinder",id),Ut("CrossFadedConstantBinder",ah),Ut("SourceExpressionBinder",Xs),Ut("CrossFadedCompositeBinder",Wl),Ut("CompositeExpressionBinder",Ia),Ut("ProgramConfiguration",P2,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",Ku);const zn=8192,tv=Math.pow(2,14)-1,I2=-tv-1;function Yu(o){const r=zn/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let y=0;y<m.length;y++){const x=m[y],S=Math.round(x.x*r),C=Math.round(x.y*r);x.x=X(S,I2,tv),x.y=X(C,I2,tv),(S<x.x||S>x.x+1||C<x.y||C>x.y+1)&&ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ju(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Yu(o):[]}}function vm(o,r,s,h,m){o.emplaceBack(2*r+(h+1)/2,2*s+(m+1)/2)}class rv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new th,this.indexArray=new Zn,this.segments=new Gn,this.programConfigurations=new Ku(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){const m=this.layers[0],y=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:C,id:F,index:V,sourceLayerIndex:Y}of r){const ne=this.layers[0]._featureFilter.needGeometry,ue=Ju(C,ne);if(!this.layers[0]._featureFilter.filter(new Kr(this.zoom),ue,h))continue;const ge=S?x.evaluate(ue,{},h):void 0,Ee={id:F,properties:C.properties,type:C.type,sourceLayerIndex:Y,index:V,geometry:ne?ue.geometry:Yu(C),patterns:{},sortKey:ge};y.push(Ee)}S&&y.sort((C,F)=>C.sortKey-F.sortKey);for(const C of y){const{geometry:F,index:V,sourceLayerIndex:Y}=C,ne=r[V].feature;this.addFeature(C,F,V,h),s.featureIndex.insert(ne,F,V,Y,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ed),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,h,m){for(const y of s)for(const x of y){const S=x.x,C=x.y;if(S<0||S>=zn||C<0||C>=zn)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),V=F.vertexLength;vm(this.layoutVertexArray,S,C,-1,-1),vm(this.layoutVertexArray,S,C,1,-1),vm(this.layoutVertexArray,S,C,1,1),vm(this.layoutVertexArray,S,C,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},m)}}function C2(o,r){for(let s=0;s<o.length;s++)if(sh(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(sh(o,r[s]))return!0;return!!nv(o,r)}function a4(o,r,s){return!!sh(o,r)||!!iv(r,o,s)}function M2(o,r){if(o.length===1)return O2(r,o[0]);for(let s=0;s<r.length;s++){const h=r[s];for(let m=0;m<h.length;m++)if(sh(o,h[m]))return!0}for(let s=0;s<o.length;s++)if(O2(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(nv(o,r[s]))return!0;return!1}function s4(o,r,s){if(o.length>1){if(nv(o,r))return!0;for(let h=0;h<r.length;h++)if(iv(r[h],o,s))return!0}for(let h=0;h<o.length;h++)if(iv(o[h],r,s))return!0;return!1}function nv(o,r){if(o.length===0||r.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],m=o[s+1];for(let y=0;y<r.length-1;y++)if(l4(h,m,r[y],r[y+1]))return!0}return!1}function l4(o,r,s,h){return fe(o,s,h)!==fe(r,s,h)&&fe(o,r,s)!==fe(o,r,h)}function iv(o,r,s){const h=s*s;if(r.length===1)return o.distSqr(r[0])<h;for(let m=1;m<r.length;m++)if(k2(o,r[m-1],r[m])<h)return!0;return!1}function k2(o,r,s){const h=r.distSqr(s);if(h===0)return o.distSqr(r);const m=((o.x-r.x)*(s.x-r.x)+(o.y-r.y)*(s.y-r.y))/h;return o.distSqr(m<0?r:m>1?s:s.sub(r)._mult(m)._add(r))}function O2(o,r){let s,h,m,y=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,C=s.length-1;S<s.length;C=S++)h=s[S],m=s[C],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(y=!y)}return y}function sh(o,r){let s=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const y=o[h],x=o[m];y.y>r.y!=x.y>r.y&&r.x<(x.x-y.x)*(r.y-y.y)/(x.y-y.y)+y.x&&(s=!s)}return s}function u4(o,r,s){const h=s[0],m=s[2];if(o.x<h.x&&r.x<h.x||o.x>m.x&&r.x>m.x||o.y<h.y&&r.y<h.y||o.y>m.y&&r.y>m.y)return!1;const y=fe(o,r,s[0]);return y!==fe(o,r,s[1])||y!==fe(o,r,s[2])||y!==fe(o,r,s[3])}function od(o,r,s){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(r.id).getMaxValue(o)}function _m(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function xm(o,r,s,h,m){if(!r[0]&&!r[1])return o;const y=b.convert(r)._mult(m);s==="viewport"&&y._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(y));return x}let F2,R2;Ut("CircleBucket",rv,{omit:["layers"]});var c4={get paint(){return R2=R2||new p({"circle-radius":new sr(it.paint_circle["circle-radius"]),"circle-color":new sr(it.paint_circle["circle-color"]),"circle-blur":new sr(it.paint_circle["circle-blur"]),"circle-opacity":new sr(it.paint_circle["circle-opacity"]),"circle-translate":new Jt(it.paint_circle["circle-translate"]),"circle-translate-anchor":new Jt(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Jt(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Jt(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sr(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sr(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sr(it.paint_circle["circle-stroke-opacity"])})},get layout(){return F2=F2||new p({"circle-sort-key":new sr(it.layout_circle["circle-sort-key"])})}},Ni=1e-6,lh=typeof Float32Array<"u"?Float32Array:Array;function ov(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function j2(o,r,s){var h=r[0],m=r[1],y=r[2],x=r[3],S=r[4],C=r[5],F=r[6],V=r[7],Y=r[8],ne=r[9],ue=r[10],ge=r[11],Ee=r[12],ke=r[13],De=r[14],et=r[15],qe=s[0],Je=s[1],st=s[2],xt=s[3];return o[0]=qe*h+Je*S+st*Y+xt*Ee,o[1]=qe*m+Je*C+st*ne+xt*ke,o[2]=qe*y+Je*F+st*ue+xt*De,o[3]=qe*x+Je*V+st*ge+xt*et,o[4]=(qe=s[4])*h+(Je=s[5])*S+(st=s[6])*Y+(xt=s[7])*Ee,o[5]=qe*m+Je*C+st*ne+xt*ke,o[6]=qe*y+Je*F+st*ue+xt*De,o[7]=qe*x+Je*V+st*ge+xt*et,o[8]=(qe=s[8])*h+(Je=s[9])*S+(st=s[10])*Y+(xt=s[11])*Ee,o[9]=qe*m+Je*C+st*ne+xt*ke,o[10]=qe*y+Je*F+st*ue+xt*De,o[11]=qe*x+Je*V+st*ge+xt*et,o[12]=(qe=s[12])*h+(Je=s[13])*S+(st=s[14])*Y+(xt=s[15])*Ee,o[13]=qe*m+Je*C+st*ne+xt*ke,o[14]=qe*y+Je*F+st*ue+xt*De,o[15]=qe*x+Je*V+st*ge+xt*et,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var ad,h4=j2;function wm(o,r,s){var h=r[0],m=r[1],y=r[2],x=r[3];return o[0]=s[0]*h+s[4]*m+s[8]*y+s[12]*x,o[1]=s[1]*h+s[5]*m+s[9]*y+s[13]*x,o[2]=s[2]*h+s[6]*m+s[10]*y+s[14]*x,o[3]=s[3]*h+s[7]*m+s[11]*y+s[15]*x,o}ad=new lh(4),lh!=Float32Array&&(ad[0]=0,ad[1]=0,ad[2]=0,ad[3]=0);class f4 extends _{constructor(r){super(r,c4)}createBucket(r){return new rv(r)}queryRadius(r){const s=r;return od("circle-radius",this,s)+od("circle-stroke-width",this,s)+_m(this.paint.get("circle-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S,C){const F=xm(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),V=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),Y=this.paint.get("circle-pitch-alignment")==="map",ne=Y?F:function(ge,Ee){return ge.map(ke=>z2(ke,Ee))}(F,C),ue=Y?V*S:V;for(const ge of m)for(const Ee of ge){const ke=Y?Ee:z2(Ee,C);let De=ue;const et=wm([],[Ee.x,Ee.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?De*=et[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(De*=x.cameraToCenterDistance/et[3]),a4(ne,ke,De))return!0}return!1}}function z2(o,r){const s=wm([],[o.x,o.y,0,1],r);return new b(s[0]/s[3],s[1]/s[3])}class L2 extends rv{}let B2;Ut("HeatmapBucket",L2,{omit:["layers"]});var d4={get paint(){return B2=B2||new p({"heatmap-radius":new sr(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sr(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Jt(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new c(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Jt(it.paint_heatmap["heatmap-opacity"])})}};function av(o,{width:r,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*s*h}`)}else m=new Uint8Array(r*s*h);return o.width=r,o.height=s,o.data=m,o}function D2(o,{width:r,height:s},h){if(r===o.width&&s===o.height)return;const m=av({},{width:r,height:s},h);sv(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,s)},h),o.width=r,o.height=s,o.data=m.data}function sv(o,r,s,h,m,y){if(m.width===0||m.height===0)return r;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||h.x>r.width-m.width||h.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=r.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<m.height;C++){const F=((s.y+C)*o.width+s.x)*y,V=((h.y+C)*r.width+h.x)*y;for(let Y=0;Y<m.width*y;Y++)S[V+Y]=x[F+Y]}return r}class sd{constructor(r,s){av(this,r,1,s)}resize(r){D2(this,r,1)}clone(){return new sd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,y){sv(r,s,h,m,y,1)}}class Lo{constructor(r,s){av(this,r,4,s)}resize(r){D2(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,y){sv(r,s,h,m,y,4)}}function N2(o){const r={},s=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new Lo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const y=(x,S,C)=>{r[o.evaluationKey]=C;const F=o.expression.evaluate(r);m.data[x+S+0]=Math.floor(255*F.r/F.a),m.data[x+S+1]=Math.floor(255*F.g/F.a),m.data[x+S+2]=Math.floor(255*F.b/F.a),m.data[x+S+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let C=0,F=0;C<s;C++,F+=4){const V=C/(s-1),{start:Y,end:ne}=o.clips[x];y(S,F,Y*(1-V)+ne*V)}else for(let x=0,S=0;x<s;x++,S+=4)y(0,S,x/(s-1));return m}Ut("AlphaImage",sd),Ut("RGBAImage",Lo);class p4 extends _{createBucket(r){return new L2(r)}constructor(r){super(r,d4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=N2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let $2;var m4={get paint(){return $2=$2||new p({"hillshade-illumination-direction":new Jt(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Jt(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Jt(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Jt(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Jt(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Jt(it.paint_hillshade["hillshade-accent-color"])})}};class g4 extends _{constructor(r){super(r,m4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const y4=W([{name:"a_pos",components:2,type:"Int16"}],4),{members:v4}=y4;var lv={exports:{}};function bm(o,r,s){s=s||2;var h,m,y,x,S,C,F,V=r&&r.length,Y=V?r[0]*s:o.length,ne=U2(o,0,Y,s,!0),ue=[];if(!ne||ne.next===ne.prev)return ue;if(V&&(ne=function(Ee,ke,De,et){var qe,Je,st,xt=[];for(qe=0,Je=ke.length;qe<Je;qe++)(st=U2(Ee,ke[qe]*et,qe<Je-1?ke[qe+1]*et:Ee.length,et,!1))===st.next&&(st.steiner=!0),xt.push(P4(st));for(xt.sort(S4),qe=0;qe<xt.length;qe++)De=E4(xt[qe],De);return De}(o,r,ne,s)),o.length>80*s){h=y=o[0],m=x=o[1];for(var ge=s;ge<Y;ge+=s)(S=o[ge])<h&&(h=S),(C=o[ge+1])<m&&(m=C),S>y&&(y=S),C>x&&(x=C);F=(F=Math.max(y-h,x-m))!==0?32767/F:0}return ld(ne,ue,s,h,m,F,0),ue}function U2(o,r,s,h,m){var y,x;if(m===hv(o,r,s,h)>0)for(y=r;y<s;y+=h)x=W2(y,o[y],o[y+1],x);else for(y=s-h;y>=r;y-=h)x=W2(y,o[y],o[y+1],x);return x&&Sm(x,x.next)&&(cd(x),x=x.next),x}function Qu(o,r){if(!o)return o;r||(r=o);var s,h=o;do if(s=!1,h.steiner||!Sm(h,h.next)&&Cn(h.prev,h,h.next)!==0)h=h.next;else{if(cd(h),(h=r=h.prev)===h.next)break;s=!0}while(s||h!==r);return r}function ld(o,r,s,h,m,y,x){if(o){!x&&y&&function(V,Y,ne,ue){var ge=V;do ge.z===0&&(ge.z=uv(ge.x,ge.y,Y,ne,ue)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==V);ge.prevZ.nextZ=null,ge.prevZ=null,function(Ee){var ke,De,et,qe,Je,st,xt,Ot,ir=1;do{for(De=Ee,Ee=null,Je=null,st=0;De;){for(st++,et=De,xt=0,ke=0;ke<ir&&(xt++,et=et.nextZ);ke++);for(Ot=ir;xt>0||Ot>0&&et;)xt!==0&&(Ot===0||!et||De.z<=et.z)?(qe=De,De=De.nextZ,xt--):(qe=et,et=et.nextZ,Ot--),Je?Je.nextZ=qe:Ee=qe,qe.prevZ=Je,Je=qe;De=et}Je.nextZ=null,ir*=2}while(st>1)}(ge)}(o,h,m,y);for(var S,C,F=o;o.prev!==o.next;)if(S=o.prev,C=o.next,y?x4(o,h,m,y):_4(o))r.push(S.i/s|0),r.push(o.i/s|0),r.push(C.i/s|0),cd(o),o=C.next,F=C.next;else if((o=C)===F){x?x===1?ld(o=w4(Qu(o),r,s),r,s,h,m,y,2):x===2&&b4(o,r,s,h,m,y):ld(Qu(o),r,s,h,m,y,1);break}}}function _4(o){var r=o.prev,s=o,h=o.next;if(Cn(r,s,h)>=0)return!1;for(var m=r.x,y=s.x,x=h.x,S=r.y,C=s.y,F=h.y,V=m<y?m<x?m:x:y<x?y:x,Y=S<C?S<F?S:F:C<F?C:F,ne=m>y?m>x?m:x:y>x?y:x,ue=S>C?S>F?S:F:C>F?C:F,ge=h.next;ge!==r;){if(ge.x>=V&&ge.x<=ne&&ge.y>=Y&&ge.y<=ue&&uh(m,S,y,C,x,F,ge.x,ge.y)&&Cn(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function x4(o,r,s,h){var m=o.prev,y=o,x=o.next;if(Cn(m,y,x)>=0)return!1;for(var S=m.x,C=y.x,F=x.x,V=m.y,Y=y.y,ne=x.y,ue=S<C?S<F?S:F:C<F?C:F,ge=V<Y?V<ne?V:ne:Y<ne?Y:ne,Ee=S>C?S>F?S:F:C>F?C:F,ke=V>Y?V>ne?V:ne:Y>ne?Y:ne,De=uv(ue,ge,r,s,h),et=uv(Ee,ke,r,s,h),qe=o.prevZ,Je=o.nextZ;qe&&qe.z>=De&&Je&&Je.z<=et;){if(qe.x>=ue&&qe.x<=Ee&&qe.y>=ge&&qe.y<=ke&&qe!==m&&qe!==x&&uh(S,V,C,Y,F,ne,qe.x,qe.y)&&Cn(qe.prev,qe,qe.next)>=0||(qe=qe.prevZ,Je.x>=ue&&Je.x<=Ee&&Je.y>=ge&&Je.y<=ke&&Je!==m&&Je!==x&&uh(S,V,C,Y,F,ne,Je.x,Je.y)&&Cn(Je.prev,Je,Je.next)>=0))return!1;Je=Je.nextZ}for(;qe&&qe.z>=De;){if(qe.x>=ue&&qe.x<=Ee&&qe.y>=ge&&qe.y<=ke&&qe!==m&&qe!==x&&uh(S,V,C,Y,F,ne,qe.x,qe.y)&&Cn(qe.prev,qe,qe.next)>=0)return!1;qe=qe.prevZ}for(;Je&&Je.z<=et;){if(Je.x>=ue&&Je.x<=Ee&&Je.y>=ge&&Je.y<=ke&&Je!==m&&Je!==x&&uh(S,V,C,Y,F,ne,Je.x,Je.y)&&Cn(Je.prev,Je,Je.next)>=0)return!1;Je=Je.nextZ}return!0}function w4(o,r,s){var h=o;do{var m=h.prev,y=h.next.next;!Sm(m,y)&&V2(m,h,h.next,y)&&ud(m,y)&&ud(y,m)&&(r.push(m.i/s|0),r.push(h.i/s|0),r.push(y.i/s|0),cd(h),cd(h.next),h=o=y),h=h.next}while(h!==o);return Qu(h)}function b4(o,r,s,h,m,y){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&A4(x,S)){var C=G2(x,S);return x=Qu(x,x.next),C=Qu(C,C.next),ld(x,r,s,h,m,y,0),void ld(C,r,s,h,m,y,0)}S=S.next}x=x.next}while(x!==o)}function S4(o,r){return o.x-r.x}function E4(o,r){var s=function(m,y){var x,S=y,C=m.x,F=m.y,V=-1/0;do{if(F<=S.y&&F>=S.next.y&&S.next.y!==S.y){var Y=S.x+(F-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(Y<=C&&Y>V&&(V=Y,x=S.x<S.next.x?S:S.next,Y===C))return x}S=S.next}while(S!==y);if(!x)return null;var ne,ue=x,ge=x.x,Ee=x.y,ke=1/0;S=x;do C>=S.x&&S.x>=ge&&C!==S.x&&uh(F<Ee?C:V,F,ge,Ee,F<Ee?V:C,F,S.x,S.y)&&(ne=Math.abs(F-S.y)/(C-S.x),ud(S,m)&&(ne<ke||ne===ke&&(S.x>x.x||S.x===x.x&&T4(x,S)))&&(x=S,ke=ne)),S=S.next;while(S!==ue);return x}(o,r);if(!s)return r;var h=G2(s,o);return Qu(h,h.next),Qu(s,s.next)}function T4(o,r){return Cn(o.prev,o,r.prev)<0&&Cn(r.next,o,o.next)<0}function uv(o,r,s,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function P4(o){var r=o,s=o;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==o);return s}function uh(o,r,s,h,m,y,x,S){return(m-x)*(r-S)>=(o-x)*(y-S)&&(o-x)*(h-S)>=(s-x)*(r-S)&&(s-x)*(y-S)>=(m-x)*(h-S)}function A4(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&V2(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(o,r)&&(ud(o,r)&&ud(r,o)&&function(s,h){var m=s,y=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(o,r)&&(Cn(o.prev,o,r.prev)||Cn(o,r.prev,r))||Sm(o,r)&&Cn(o.prev,o,o.next)>0&&Cn(r.prev,r,r.next)>0)}function Cn(o,r,s){return(r.y-o.y)*(s.x-r.x)-(r.x-o.x)*(s.y-r.y)}function Sm(o,r){return o.x===r.x&&o.y===r.y}function V2(o,r,s,h){var m=Tm(Cn(o,r,s)),y=Tm(Cn(o,r,h)),x=Tm(Cn(s,h,o)),S=Tm(Cn(s,h,r));return m!==y&&x!==S||!(m!==0||!Em(o,s,r))||!(y!==0||!Em(o,h,r))||!(x!==0||!Em(s,o,h))||!(S!==0||!Em(s,r,h))}function Em(o,r,s){return r.x<=Math.max(o.x,s.x)&&r.x>=Math.min(o.x,s.x)&&r.y<=Math.max(o.y,s.y)&&r.y>=Math.min(o.y,s.y)}function Tm(o){return o>0?1:o<0?-1:0}function ud(o,r){return Cn(o.prev,o,o.next)<0?Cn(o,r,o.next)>=0&&Cn(o,o.prev,r)>=0:Cn(o,r,o.prev)<0||Cn(o,o.next,r)<0}function G2(o,r){var s=new cv(o.i,o.x,o.y),h=new cv(r.i,r.x,r.y),m=o.next,y=r.prev;return o.next=r,r.prev=o,s.next=m,m.prev=s,h.next=s,s.prev=h,y.next=h,h.prev=y,h}function W2(o,r,s,h){var m=new cv(o,r,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function cd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function cv(o,r,s){this.i=o,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hv(o,r,s,h){for(var m=0,y=r,x=s-h;y<s;y+=h)m+=(o[x]-o[y])*(o[y+1]+o[x+1]),x=y;return m}lv.exports=bm,lv.exports.default=bm,bm.deviation=function(o,r,s,h){var m=r&&r.length,y=Math.abs(hv(o,0,m?r[0]*s:o.length,s));if(m)for(var x=0,S=r.length;x<S;x++)y-=Math.abs(hv(o,r[x]*s,x<S-1?r[x+1]*s:o.length,s));var C=0;for(x=0;x<h.length;x+=3){var F=h[x]*s,V=h[x+1]*s,Y=h[x+2]*s;C+=Math.abs((o[F]-o[Y])*(o[V+1]-o[F+1])-(o[F]-o[V])*(o[Y+1]-o[F+1]))}return y===0&&C===0?0:Math.abs((C-y)/y)},bm.flatten=function(o){for(var r=o[0][0].length,s={vertices:[],holes:[],dimensions:r},h=0,m=0;m<o.length;m++){for(var y=0;y<o[m].length;y++)for(var x=0;x<r;x++)s.vertices.push(o[m][y][x]);m>0&&s.holes.push(h+=o[m-1].length)}return s};var H2=w(lv.exports);function fv(o,r,s){const h=s.patternDependencies;let m=!1;for(const y of r){const x=y.paint.get(`${o}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function dv(o,r,s,h,m){const y=m.patternDependencies;for(const x of r){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let C=S.evaluate({zoom:h-1},s,{},m.availableImages),F=S.evaluate({zoom:h},s,{},m.availableImages),V=S.evaluate({zoom:h+1},s,{},m.availableImages);C=C&&C.name?C.name:C,F=F&&F.name?F.name:F,V=V&&V.name?V.name:V,y[C]=!0,y[F]=!0,y[V]=!0,s.patterns[x.id]={min:C,mid:F,max:V}}}return s}class pv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $l,this.indexArray=new Zn,this.indexArray2=new fn,this.programConfigurations=new Ku(r.layers,r.zoom),this.segments=new Gn,this.segments2=new Gn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=fv("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),x=[];for(const{feature:S,id:C,index:F,sourceLayerIndex:V}of r){const Y=this.layers[0]._featureFilter.needGeometry,ne=Ju(S,Y);if(!this.layers[0]._featureFilter.filter(new Kr(this.zoom),ne,h))continue;const ue=y?m.evaluate(ne,{},h,s.availableImages):void 0,ge={id:C,properties:S.properties,type:S.type,sourceLayerIndex:V,index:F,geometry:Y?ne.geometry:Yu(S),patterns:{},sortKey:ue};x.push(ge)}y&&x.sort((S,C)=>S.sortKey-C.sortKey);for(const S of x){const{geometry:C,index:F,sourceLayerIndex:V}=S;if(this.hasPattern){const Y=dv("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,C,F,h,{});s.featureIndex.insert(r[F].feature,C,F,V,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,v4),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,h,m,y){for(const x of kl(s,500)){let S=0;for(const ue of x)S+=ue.length;const C=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),F=C.vertexLength,V=[],Y=[];for(const ue of x){if(ue.length===0)continue;ue!==x[0]&&Y.push(V.length/2);const ge=this.segments2.prepareSegment(ue.length,this.layoutVertexArray,this.indexArray2),Ee=ge.vertexLength;this.layoutVertexArray.emplaceBack(ue[0].x,ue[0].y),this.indexArray2.emplaceBack(Ee+ue.length-1,Ee),V.push(ue[0].x),V.push(ue[0].y);for(let ke=1;ke<ue.length;ke++)this.layoutVertexArray.emplaceBack(ue[ke].x,ue[ke].y),this.indexArray2.emplaceBack(Ee+ke-1,Ee+ke),V.push(ue[ke].x),V.push(ue[ke].y);ge.vertexLength+=ue.length,ge.primitiveLength+=ue.length}const ne=H2(V,Y);for(let ue=0;ue<ne.length;ue+=3)this.indexArray.emplaceBack(F+ne[ue],F+ne[ue+1],F+ne[ue+2]);C.vertexLength+=S,C.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}let Z2,q2;Ut("FillBucket",pv,{omit:["layers","patternFeatures"]});var I4={get paint(){return q2=q2||new p({"fill-antialias":new Jt(it.paint_fill["fill-antialias"]),"fill-opacity":new sr(it.paint_fill["fill-opacity"]),"fill-color":new sr(it.paint_fill["fill-color"]),"fill-outline-color":new sr(it.paint_fill["fill-outline-color"]),"fill-translate":new Jt(it.paint_fill["fill-translate"]),"fill-translate-anchor":new Jt(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new v(it.paint_fill["fill-pattern"])})},get layout(){return Z2=Z2||new p({"fill-sort-key":new sr(it.layout_fill["fill-sort-key"])})}};class C4 extends _{constructor(r){super(r,I4)}recalculate(r,s){super.recalculate(r,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new pv(r)}queryRadius(){return _m(this.paint.get("fill-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S){return M2(xm(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const M4=W([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),k4=W([{name:"a_centroid",components:2,type:"Int16"}],4),{members:O4}=M4;var Hl={},F4=E,X2=ch;function ch(o,r,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(R4,this,r)}function R4(o,r,s){o==1?r.id=s.readVarint():o==2?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var x=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[x]=S}}(s,r):o==3?r.type=s.readVarint():o==4&&(r._geometry=s.pos)}function j4(o){for(var r,s,h=0,m=0,y=o.length,x=y-1;m<y;x=m++)h+=((s=o[x]).x-(r=o[m]).x)*(r.y+s.y);return h}ch.types=["Unknown","Point","LineString","Polygon"],ch.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,s=o.readVarint()+o.pos,h=1,m=0,y=0,x=0,S=[];o.pos<s;){if(m<=0){var C=o.readVarint();h=7&C,m=C>>3}if(m--,h===1||h===2)y+=o.readSVarint(),x+=o.readSVarint(),h===1&&(r&&S.push(r),r=[]),r.push(new F4(y,x));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&S.push(r),S},ch.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,s=1,h=0,m=0,y=0,x=1/0,S=-1/0,C=1/0,F=-1/0;o.pos<r;){if(h<=0){var V=o.readVarint();s=7&V,h=V>>3}if(h--,s===1||s===2)(m+=o.readSVarint())<x&&(x=m),m>S&&(S=m),(y+=o.readSVarint())<C&&(C=y),y>F&&(F=y);else if(s!==7)throw new Error("unknown command "+s)}return[x,C,S,F]},ch.prototype.toGeoJSON=function(o,r,s){var h,m,y=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*r,C=this.loadGeometry(),F=ch.types[this.type];function V(ue){for(var ge=0;ge<ue.length;ge++){var Ee=ue[ge];ue[ge]=[360*(Ee.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ee.y+S)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(h=0;h<C.length;h++)Y[h]=C[h][0];V(C=Y);break;case 2:for(h=0;h<C.length;h++)V(C[h]);break;case 3:for(C=function(ue){var ge=ue.length;if(ge<=1)return[ue];for(var Ee,ke,De=[],et=0;et<ge;et++){var qe=j4(ue[et]);qe!==0&&(ke===void 0&&(ke=qe<0),ke===qe<0?(Ee&&De.push(Ee),Ee=[ue[et]]):Ee.push(ue[et]))}return Ee&&De.push(Ee),De}(C),h=0;h<C.length;h++)for(m=0;m<C[h].length;m++)V(C[h][m])}C.length===1?C=C[0]:F="Multi"+F;var ne={type:"Feature",geometry:{type:F,coordinates:C},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var z4=X2,K2=Y2;function Y2(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(L4,this,r),this.length=this._features.length}function L4(o,r,s){o===15?r.version=s.readVarint():o===1?r.name=s.readString():o===5?r.extent=s.readVarint():o===2?r._features.push(s.pos):o===3?r._keys.push(s.readString()):o===4&&r._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(s))}Y2.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new z4(this._pbf,r,this.extent,this._keys,this._values)};var B4=K2;function D4(o,r,s){if(o===3){var h=new B4(s,s.readVarint()+s.pos);h.length&&(r[h.name]=h)}}Hl.VectorTile=function(o,r){this.layers=o.readFields(D4,{},r)},Hl.VectorTileFeature=X2,Hl.VectorTileLayer=K2;const N4=Hl.VectorTileFeature.types,mv=Math.pow(2,13);function hd(o,r,s,h,m,y,x,S){o.emplaceBack(r,s,2*Math.floor(h*mv)+x,m*mv*2,y*mv*2,Math.round(S))}class gv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new qs,this.centroidVertexArray=new Zs,this.indexArray=new Zn,this.programConfigurations=new Ku(r.layers,r.zoom),this.segments=new Gn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.features=[],this.hasPattern=fv("fill-extrusion",this.layers,s);for(const{feature:m,id:y,index:x,sourceLayerIndex:S}of r){const C=this.layers[0]._featureFilter.needGeometry,F=Ju(m,C);if(!this.layers[0]._featureFilter.filter(new Kr(this.zoom),F,h))continue;const V={id:y,sourceLayerIndex:S,index:x,geometry:C?F.geometry:Yu(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(dv("fill-extrusion",this.layers,V,this.zoom,s)):this.addFeature(V,V.geometry,x,h,{}),s.featureIndex.insert(m,V.geometry,x,S,this.index,!0)}}addFeatures(r,s,h){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,s,h)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,O4),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,k4.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,h,m,y){for(const x of kl(s,500)){const S={x:0,y:0,vertexCount:0};let C=0;for(const ge of x)C+=ge.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of x){if(ge.length===0||U4(ge))continue;let Ee=0;for(let ke=0;ke<ge.length;ke++){const De=ge[ke];if(ke>=1){const et=ge[ke-1];if(!$4(De,et)){F.vertexLength+4>Gn.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const qe=De.sub(et)._perp()._unit(),Je=et.dist(De);Ee+Je>32768&&(Ee=0),hd(this.layoutVertexArray,De.x,De.y,qe.x,qe.y,0,0,Ee),hd(this.layoutVertexArray,De.x,De.y,qe.x,qe.y,0,1,Ee),S.x+=2*De.x,S.y+=2*De.y,S.vertexCount+=2,Ee+=Je,hd(this.layoutVertexArray,et.x,et.y,qe.x,qe.y,0,0,Ee),hd(this.layoutVertexArray,et.x,et.y,qe.x,qe.y,0,1,Ee),S.x+=2*et.x,S.y+=2*et.y,S.vertexCount+=2;const st=F.vertexLength;this.indexArray.emplaceBack(st,st+2,st+1),this.indexArray.emplaceBack(st+1,st+2,st+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+C>Gn.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),N4[r.type]!=="Polygon")continue;const V=[],Y=[],ne=F.vertexLength;for(const ge of x)if(ge.length!==0){ge!==x[0]&&Y.push(V.length/2);for(let Ee=0;Ee<ge.length;Ee++){const ke=ge[Ee];hd(this.layoutVertexArray,ke.x,ke.y,0,0,1,1,0),S.x+=ke.x,S.y+=ke.y,S.vertexCount+=1,V.push(ke.x),V.push(ke.y)}}const ue=H2(V,Y);for(let ge=0;ge<ue.length;ge+=3)this.indexArray.emplaceBack(ne+ue[ge],ne+ue[ge+2],ne+ue[ge+1]);F.primitiveLength+=ue.length/3,F.vertexLength+=C;for(let ge=0;ge<S.vertexCount;ge++){const Ee=Math.floor(S.x/S.vertexCount),ke=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(Ee,ke)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}function $4(o,r){return o.x===r.x&&(o.x<0||o.x>zn)||o.y===r.y&&(o.y<0||o.y>zn)}function U4(o){return o.every(r=>r.x<0)||o.every(r=>r.x>zn)||o.every(r=>r.y<0)||o.every(r=>r.y>zn)}let J2;Ut("FillExtrusionBucket",gv,{omit:["layers","features"]});var V4={get paint(){return J2=J2||new p({"fill-extrusion-opacity":new Jt(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sr(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Jt(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Jt(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new v(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sr(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sr(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Jt(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class G4 extends _{constructor(r){super(r,V4)}createBucket(r){return new gv(r)}queryRadius(){return _m(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,s,h,m,y,x,S,C){const F=xm(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),V=this.paint.get("fill-extrusion-height").evaluate(s,h),Y=this.paint.get("fill-extrusion-base").evaluate(s,h),ne=function(ge,Ee,ke,De){const et=[];for(const qe of ge){const Je=[qe.x,qe.y,0,1];wm(Je,Je,Ee),et.push(new b(Je[0]/Je[3],Je[1]/Je[3]))}return et}(F,C),ue=function(ge,Ee,ke,De){const et=[],qe=[],Je=De[8]*Ee,st=De[9]*Ee,xt=De[10]*Ee,Ot=De[11]*Ee,ir=De[8]*ke,zt=De[9]*ke,Ct=De[10]*ke,Xt=De[11]*ke;for(const Vt of ge){const $t=[],pt=[];for(const Qt of Vt){const qt=Qt.x,fr=Qt.y,qr=De[0]*qt+De[4]*fr+De[12],Hr=De[1]*qt+De[5]*fr+De[13],qn=De[2]*qt+De[6]*fr+De[14],oa=De[3]*qt+De[7]*fr+De[15],mi=qn+xt,wn=oa+Ot,$i=qr+ir,Ui=Hr+zt,Vi=qn+Ct,bn=oa+Xt,Xn=new b((qr+Je)/wn,(Hr+st)/wn);Xn.z=mi/wn,$t.push(Xn);const Ci=new b($i/bn,Ui/bn);Ci.z=Vi/bn,pt.push(Ci)}et.push($t),qe.push(pt)}return[et,qe]}(m,Y,V,C);return function(ge,Ee,ke){let De=1/0;M2(ke,Ee)&&(De=Q2(ke,Ee[0]));for(let et=0;et<Ee.length;et++){const qe=Ee[et],Je=ge[et];for(let st=0;st<qe.length-1;st++){const xt=qe[st],Ot=[xt,qe[st+1],Je[st+1],Je[st],xt];C2(ke,Ot)&&(De=Math.min(De,Q2(ke,Ot)))}}return De!==1/0&&De}(ue[0],ue[1],ne)}}function fd(o,r){return o.x*r.x+o.y*r.y}function Q2(o,r){if(o.length===1){let s=0;const h=r[s++];let m;for(;!m||h.equals(m);)if(m=r[s++],!m)return 1/0;for(;s<r.length;s++){const y=r[s],x=o[0],S=m.sub(h),C=y.sub(h),F=x.sub(h),V=fd(S,S),Y=fd(S,C),ne=fd(C,C),ue=fd(F,S),ge=fd(F,C),Ee=V*ne-Y*Y,ke=(ne*ue-Y*ge)/Ee,De=(V*ge-Y*ue)/Ee,et=h.z*(1-ke-De)+m.z*ke+y.z*De;if(isFinite(et))return et}return 1/0}{let s=1/0;for(const h of r)s=Math.min(s,h.z);return s}}const W4=W([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:H4}=W4,Z4=W([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:q4}=Z4,X4=Hl.VectorTileFeature.types,K4=Math.cos(Math.PI/180*37.5),eS=Math.pow(2,14)/.5;class yv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new rh,this.layoutVertexArray2=new Qf,this.indexArray=new Zn,this.programConfigurations=new Ku(r.layers,r.zoom),this.segments=new Gn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=fv("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),x=[];for(const{feature:S,id:C,index:F,sourceLayerIndex:V}of r){const Y=this.layers[0]._featureFilter.needGeometry,ne=Ju(S,Y);if(!this.layers[0]._featureFilter.filter(new Kr(this.zoom),ne,h))continue;const ue=y?m.evaluate(ne,{},h):void 0,ge={id:C,properties:S.properties,type:S.type,sourceLayerIndex:V,index:F,geometry:Y?ne.geometry:Yu(S),patterns:{},sortKey:ue};x.push(ge)}y&&x.sort((S,C)=>S.sortKey-C.sortKey);for(const S of x){const{geometry:C,index:F,sourceLayerIndex:V}=S;if(this.hasPattern){const Y=dv("line",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,C,F,h,{});s.featureIndex.insert(r[F].feature,C,F,V,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,q4)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,H4),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,h,m,y){const x=this.layers[0].layout,S=x.get("line-join").evaluate(r,{}),C=x.get("line-cap"),F=x.get("line-miter-limit"),V=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const Y of s)this.addLine(Y,r,S,C,F,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}addLine(r,s,h,m,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let De=0;De<r.length-1;De++)this.totalDistance+=r[De].dist(r[De+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=X4[s.type]==="Polygon";let C=r.length;for(;C>=2&&r[C-1].equals(r[C-2]);)C--;let F=0;for(;F<C-1&&r[F].equals(r[F+1]);)F++;if(C<(S?3:2))return;h==="bevel"&&(y=1.05);const V=this.overscaling<=16?15*zn/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let ne,ue,ge,Ee,ke;this.e1=this.e2=-1,S&&(ne=r[C-2],ke=r[F].sub(ne)._unit()._perp());for(let De=F;De<C;De++){if(ge=De===C-1?S?r[F+1]:void 0:r[De+1],ge&&r[De].equals(ge))continue;ke&&(Ee=ke),ne&&(ue=ne),ne=r[De],ke=ge?ge.sub(ne)._unit()._perp():Ee,Ee=Ee||ke;let et=Ee.add(ke);et.x===0&&et.y===0||et._unit();const qe=Ee.x*ke.x+Ee.y*ke.y,Je=et.x*ke.x+et.y*ke.y,st=Je!==0?1/Je:1/0,xt=2*Math.sqrt(2-2*Je),Ot=Je<K4&&ue&&ge,ir=Ee.x*ke.y-Ee.y*ke.x>0;if(Ot&&De>F){const Xt=ne.dist(ue);if(Xt>2*V){const Vt=ne.sub(ne.sub(ue)._mult(V/Xt)._round());this.updateDistance(ue,Vt),this.addCurrentVertex(Vt,Ee,0,0,Y),ue=Vt}}const zt=ue&&ge;let Ct=zt?h:S?"butt":m;if(zt&&Ct==="round"&&(st<x?Ct="miter":st<=2&&(Ct="fakeround")),Ct==="miter"&&st>y&&(Ct="bevel"),Ct==="bevel"&&(st>2&&(Ct="flipbevel"),st<y&&(Ct="miter")),ue&&this.updateDistance(ue,ne),Ct==="miter")et._mult(st),this.addCurrentVertex(ne,et,0,0,Y);else if(Ct==="flipbevel"){if(st>100)et=ke.mult(-1);else{const Xt=st*Ee.add(ke).mag()/Ee.sub(ke).mag();et._perp()._mult(Xt*(ir?-1:1))}this.addCurrentVertex(ne,et,0,0,Y),this.addCurrentVertex(ne,et.mult(-1),0,0,Y)}else if(Ct==="bevel"||Ct==="fakeround"){const Xt=-Math.sqrt(st*st-1),Vt=ir?Xt:0,$t=ir?0:Xt;if(ue&&this.addCurrentVertex(ne,Ee,Vt,$t,Y),Ct==="fakeround"){const pt=Math.round(180*xt/Math.PI/20);for(let Qt=1;Qt<pt;Qt++){let qt=Qt/pt;if(qt!==.5){const qr=qt-.5;qt+=qt*qr*(qt-1)*((1.0904+qe*(qe*(3.55645-1.43519*qe)-3.2452))*qr*qr+(.848013+qe*(.215638*qe-1.06021)))}const fr=ke.sub(Ee)._mult(qt)._add(Ee)._unit()._mult(ir?-1:1);this.addHalfVertex(ne,fr.x,fr.y,!1,ir,0,Y)}}ge&&this.addCurrentVertex(ne,ke,-Vt,-$t,Y)}else if(Ct==="butt")this.addCurrentVertex(ne,et,0,0,Y);else if(Ct==="square"){const Xt=ue?1:-1;this.addCurrentVertex(ne,et,Xt,Xt,Y)}else Ct==="round"&&(ue&&(this.addCurrentVertex(ne,Ee,0,0,Y),this.addCurrentVertex(ne,Ee,1,1,Y,!0)),ge&&(this.addCurrentVertex(ne,ke,-1,-1,Y,!0),this.addCurrentVertex(ne,ke,0,0,Y)));if(Ot&&De<C-1){const Xt=ne.dist(ge);if(Xt>2*V){const Vt=ne.add(ge.sub(ne)._mult(V/Xt)._round());this.updateDistance(ne,Vt),this.addCurrentVertex(Vt,ke,0,0,Y),ne=Vt}}}}addCurrentVertex(r,s,h,m,y,x=!1){const S=s.y*m-s.x,C=-s.y-s.x*m;this.addHalfVertex(r,s.x+s.y*h,s.y-s.x*h,x,!1,h,y),this.addHalfVertex(r,S,C,x,!0,-m,y),this.distance>eS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,h,m,y,x))}addHalfVertex({x:r,y:s},h,m,y,x,S,C){const F=.5*(this.lineClips?this.scaledDistance*(eS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(y?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),C.primitiveLength++),x?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}let tS,rS;Ut("LineBucket",yv,{omit:["layers","patternFeatures"]});var nS={get paint(){return rS=rS||new p({"line-opacity":new sr(it.paint_line["line-opacity"]),"line-color":new sr(it.paint_line["line-color"]),"line-translate":new Jt(it.paint_line["line-translate"]),"line-translate-anchor":new Jt(it.paint_line["line-translate-anchor"]),"line-width":new sr(it.paint_line["line-width"]),"line-gap-width":new sr(it.paint_line["line-gap-width"]),"line-offset":new sr(it.paint_line["line-offset"]),"line-blur":new sr(it.paint_line["line-blur"]),"line-dasharray":new n(it.paint_line["line-dasharray"]),"line-pattern":new v(it.paint_line["line-pattern"]),"line-gradient":new c(it.paint_line["line-gradient"])})},get layout(){return tS=tS||new p({"line-cap":new Jt(it.layout_line["line-cap"]),"line-join":new sr(it.layout_line["line-join"]),"line-miter-limit":new Jt(it.layout_line["line-miter-limit"]),"line-round-limit":new Jt(it.layout_line["line-round-limit"]),"line-sort-key":new sr(it.layout_line["line-sort-key"])})}};class Y4 extends sr{possiblyEvaluate(r,s){return s=new Kr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,h,m){return s=P({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,h,m)}}let Pm;class J4 extends _{constructor(r){super(r,nS),this.gradientVersion=0,Pm||(Pm=new Y4(nS.paint.properties["line-width"].specification),Pm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Xa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,s){super.recalculate(r,s),this.paint._values["line-floorwidth"]=Pm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new yv(r)}queryRadius(r){const s=r,h=iS(od("line-width",this,s),od("line-gap-width",this,s)),m=od("line-offset",this,s);return h/2+Math.abs(m)+_m(this.paint.get("line-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S){const C=xm(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),F=S/2*iS(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),V=this.paint.get("line-offset").evaluate(s,h);return V&&(m=function(Y,ne){const ue=[];for(let ge=0;ge<Y.length;ge++){const Ee=Y[ge],ke=[];for(let De=0;De<Ee.length;De++){const et=Ee[De-1],qe=Ee[De],Je=Ee[De+1],st=De===0?new b(0,0):qe.sub(et)._unit()._perp(),xt=De===Ee.length-1?new b(0,0):Je.sub(qe)._unit()._perp(),Ot=st._add(xt)._unit(),ir=Ot.x*xt.x+Ot.y*xt.y;ir!==0&&Ot._mult(1/ir),ke.push(Ot._mult(ne)._add(qe))}ue.push(ke)}return ue}(m,V*S)),function(Y,ne,ue){for(let ge=0;ge<ne.length;ge++){const Ee=ne[ge];if(Y.length>=3){for(let ke=0;ke<Ee.length;ke++)if(sh(Y,Ee[ke]))return!0}if(s4(Y,Ee,ue))return!0}return!1}(C,m,F)}isTileClipped(){return!0}}function iS(o,r){return r>0?r+2*o:o}const Q4=W([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),eF=W([{name:"a_projected_pos",components:3,type:"Float32"}],4);W([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tF=W([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);W([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const oS=W([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rF=W([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function nF(o,r,s){return o.sections.forEach(h=>{h.text=function(m,y,x){const S=y.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),us.applyArabicShaping&&(m=us.applyArabicShaping(m)),m}(h.text,r,s)}),o}W([{name:"triangle",components:3,type:"Uint16"}]),W([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),W([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),W([{type:"Float32",name:"offsetX"}]),W([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),W([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const dd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Wn=24,aS=Wr,sS=function(o,r,s,h,m){var y,x,S=8*m-h-1,C=(1<<S)-1,F=C>>1,V=-7,Y=s?m-1:0,ne=s?-1:1,ue=o[r+Y];for(Y+=ne,y=ue&(1<<-V)-1,ue>>=-V,V+=S;V>0;y=256*y+o[r+Y],Y+=ne,V-=8);for(x=y&(1<<-V)-1,y>>=-V,V+=h;V>0;x=256*x+o[r+Y],Y+=ne,V-=8);if(y===0)y=1-F;else{if(y===C)return x?NaN:1/0*(ue?-1:1);x+=Math.pow(2,h),y-=F}return(ue?-1:1)*x*Math.pow(2,y-h)},lS=function(o,r,s,h,m,y){var x,S,C,F=8*y-m-1,V=(1<<F)-1,Y=V>>1,ne=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=h?0:y-1,ge=h?1:-1,Ee=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,x=V):(x=Math.floor(Math.log(r)/Math.LN2),r*(C=Math.pow(2,-x))<1&&(x--,C*=2),(r+=x+Y>=1?ne/C:ne*Math.pow(2,1-Y))*C>=2&&(x++,C/=2),x+Y>=V?(S=0,x=V):x+Y>=1?(S=(r*C-1)*Math.pow(2,m),x+=Y):(S=r*Math.pow(2,Y-1)*Math.pow(2,m),x=0));m>=8;o[s+ue]=255&S,ue+=ge,S/=256,m-=8);for(x=x<<m|S,F+=m;F>0;o[s+ue]=255&x,ue+=ge,x/=256,F-=8);o[s+ue-ge]|=128*Ee};function Wr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Wr.Varint=0,Wr.Fixed64=1,Wr.Bytes=2,Wr.Fixed32=5;var vv=4294967296,uS=1/vv,cS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ks(o){return o.type===Wr.Bytes?o.readVarint()+o.pos:o.pos+1}function hh(o,r,s){return s?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function hS(o,r,s){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=o;m--)s.buf[m+h]=s.buf[m]}function iF(o,r){for(var s=0;s<o.length;s++)r.writeVarint(o[s])}function oF(o,r){for(var s=0;s<o.length;s++)r.writeSVarint(o[s])}function aF(o,r){for(var s=0;s<o.length;s++)r.writeFloat(o[s])}function sF(o,r){for(var s=0;s<o.length;s++)r.writeDouble(o[s])}function lF(o,r){for(var s=0;s<o.length;s++)r.writeBoolean(o[s])}function uF(o,r){for(var s=0;s<o.length;s++)r.writeFixed32(o[s])}function cF(o,r){for(var s=0;s<o.length;s++)r.writeSFixed32(o[s])}function hF(o,r){for(var s=0;s<o.length;s++)r.writeFixed64(o[s])}function fF(o,r){for(var s=0;s<o.length;s++)r.writeSFixed64(o[s])}function Am(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function fh(o,r,s){o[s]=r,o[s+1]=r>>>8,o[s+2]=r>>>16,o[s+3]=r>>>24}function fS(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}Wr.prototype={destroy:function(){this.buf=null},readFields:function(o,r,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,o(m,r,this),this.pos===y&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=Am(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=fS(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Am(this.buf,this.pos)+Am(this.buf,this.pos+4)*vv;return this.pos+=8,o},readSFixed64:function(){var o=Am(this.buf,this.pos)+fS(this.buf,this.pos+4)*vv;return this.pos+=8,o},readFloat:function(){var o=sS(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=sS(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,s,h=this.buf;return r=127&(s=h[this.pos++]),s<128?r:(r|=(127&(s=h[this.pos++]))<<7,s<128?r:(r|=(127&(s=h[this.pos++]))<<14,s<128?r:(r|=(127&(s=h[this.pos++]))<<21,s<128?r:function(m,y,x){var S,C,F=x.buf;if(S=(112&(C=F[x.pos++]))>>4,C<128||(S|=(127&(C=F[x.pos++]))<<3,C<128)||(S|=(127&(C=F[x.pos++]))<<10,C<128)||(S|=(127&(C=F[x.pos++]))<<17,C<128)||(S|=(127&(C=F[x.pos++]))<<24,C<128)||(S|=(1&(C=F[x.pos++]))<<31,C<128))return hh(m,S,y);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&cS?function(s,h,m){return cS.decode(s.subarray(h,m))}(this.buf,r,o):function(s,h,m){for(var y="",x=h;x<m;){var S,C,F,V=s[x],Y=null,ne=V>239?4:V>223?3:V>191?2:1;if(x+ne>m)break;ne===1?V<128&&(Y=V):ne===2?(192&(S=s[x+1]))==128&&(Y=(31&V)<<6|63&S)<=127&&(Y=null):ne===3?(C=s[x+2],(192&(S=s[x+1]))==128&&(192&C)==128&&((Y=(15&V)<<12|(63&S)<<6|63&C)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):ne===4&&(C=s[x+2],F=s[x+3],(192&(S=s[x+1]))==128&&(192&C)==128&&(192&F)==128&&((Y=(15&V)<<18|(63&S)<<12|(63&C)<<6|63&F)<=65535||Y>=1114112)&&(Y=null)),Y===null?(Y=65533,ne=1):Y>65535&&(Y-=65536,y+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),y+=String.fromCharCode(Y),x+=ne}return y}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==Wr.Bytes)return o.push(this.readVarint(r));var s=Ks(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==Wr.Bytes)return o.push(this.readSVarint());var r=Ks(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Wr.Bytes)return o.push(this.readBoolean());var r=Ks(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Wr.Bytes)return o.push(this.readFloat());var r=Ks(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Wr.Bytes)return o.push(this.readDouble());var r=Ks(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Wr.Bytes)return o.push(this.readFixed32());var r=Ks(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Wr.Bytes)return o.push(this.readSFixed32());var r=Ks(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Wr.Bytes)return o.push(this.readFixed64());var r=Ks(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Wr.Bytes)return o.push(this.readSFixed64());var r=Ks(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===Wr.Varint)for(;this.buf[this.pos++]>127;);else if(r===Wr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Wr.Fixed32)this.pos+=4;else{if(r!==Wr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),fh(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),fh(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),fh(this.buf,-1&o,this.pos),fh(this.buf,Math.floor(o*uS),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),fh(this.buf,-1&o,this.pos),fh(this.buf,Math.floor(o*uS),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,s){var h,m;if(r>=0?(h=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,x,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)}(h,0,s),function(y,x){var S=(7&y)<<4;x.buf[x.pos++]|=S|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,m,y){for(var x,S,C=0;C<m.length;C++){if((x=m.charCodeAt(C))>55295&&x<57344){if(!S){x>56319||C+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y}(this.buf,o,this.pos);var s=this.pos-r;s>=128&&hS(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),lS(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),lS(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,r){this.pos++;var s=this.pos;o(r,this);var h=this.pos-s;h>=128&&hS(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,s){this.writeTag(o,Wr.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,iF,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,oF,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,lF,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,aF,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,sF,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,uF,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,cF,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,hF,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,fF,r)},writeBytesField:function(o,r){this.writeTag(o,Wr.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,Wr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,Wr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,Wr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,Wr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,Wr.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,Wr.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,Wr.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,Wr.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,Wr.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var _v=w(aS);const xv=3;function dF(o,r,s){o===1&&s.readMessage(pF,r)}function pF(o,r,s){if(o===3){const{id:h,bitmap:m,width:y,height:x,left:S,top:C,advance:F}=s.readMessage(mF,{});r.push({id:h,bitmap:new sd({width:y+2*xv,height:x+2*xv},m),metrics:{width:y,height:x,left:S,top:C,advance:F}})}}function mF(o,r,s){o===1?r.id=s.readVarint():o===2?r.bitmap=s.readBytes():o===3?r.width=s.readVarint():o===4?r.height=s.readVarint():o===5?r.left=s.readSVarint():o===6?r.top=s.readSVarint():o===7&&(r.advance=s.readVarint())}const dS=xv;function pS(o){let r=0,s=0;for(const x of o)r+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let m=0,y=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const C=h[S];if(!(x.w>C.w||x.h>C.h)){if(x.x=C.x,x.y=C.y,y=Math.max(y,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===C.w&&x.h===C.h){const F=h.pop();S<h.length&&(h[S]=F)}else x.h===C.h?(C.x+=x.w,C.w-=x.w):x.w===C.w?(C.y+=x.h,C.h-=x.h):(h.push({x:C.x+x.w,y:C.y,w:C.w-x.w,h:x.h}),C.y+=x.h,C.h-=x.h);break}}return{w:m,h:y,fill:r/(m*y)||0}}const ro=1;class wv{constructor(r,{pixelRatio:s,version:h,stretchX:m,stretchY:y,content:x,textFitWidth:S,textFitHeight:C}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=x,this.version=h,this.textFitWidth=S,this.textFitHeight=C}get tl(){return[this.paddedRect.x+ro,this.paddedRect.y+ro]}get br(){return[this.paddedRect.x+this.paddedRect.w-ro,this.paddedRect.y+this.paddedRect.h-ro]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ro)/this.pixelRatio,(this.paddedRect.h-2*ro)/this.pixelRatio]}}class mS{constructor(r,s){const h={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(r,h,y),this.addImages(s,m,y);const{w:x,h:S}=pS(y),C=new Lo({width:x||1,height:S||1});for(const F in r){const V=r[F],Y=h[F].paddedRect;Lo.copy(V.data,C,{x:0,y:0},{x:Y.x+ro,y:Y.y+ro},V.data)}for(const F in s){const V=s[F],Y=m[F].paddedRect,ne=Y.x+ro,ue=Y.y+ro,ge=V.data.width,Ee=V.data.height;Lo.copy(V.data,C,{x:0,y:0},{x:ne,y:ue},V.data),Lo.copy(V.data,C,{x:0,y:Ee-1},{x:ne,y:ue-1},{width:ge,height:1}),Lo.copy(V.data,C,{x:0,y:0},{x:ne,y:ue+Ee},{width:ge,height:1}),Lo.copy(V.data,C,{x:ge-1,y:0},{x:ne-1,y:ue},{width:1,height:Ee}),Lo.copy(V.data,C,{x:0,y:0},{x:ne+ge,y:ue},{width:1,height:Ee})}this.image=C,this.iconPositions=h,this.patternPositions=m}addImages(r,s,h){for(const m in r){const y=r[m],x={x:0,y:0,w:y.data.width+2*ro,h:y.data.height+2*ro};h.push(x),s[m]=new wv(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),s)}patchUpdatedImage(r,s,h){if(!r||!s||r.version===s.version)return;r.version=s.version;const[m,y]=r.tl;h.update(s.data,void 0,{x:m,y})}}var Zl;Ut("ImagePosition",wv),Ut("ImageAtlas",mS),d.ah=void 0,(Zl=d.ah||(d.ah={}))[Zl.none=0]="none",Zl[Zl.horizontal=1]="horizontal",Zl[Zl.vertical=2]="vertical",Zl[Zl.horizontalOnly=3]="horizontalOnly";const pd=-17;class md{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const h=new md;return h.scale=r||1,h.fontStack=s,h}static forImage(r){const s=new md;return s.imageName=r,s}}class dh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const h=new dh;for(let m=0;m<r.sections.length;m++){const y=r.sections[m];y.image?h.addImageSection(y):h.addTextSection(y,s)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let s="";for(let h=0;h<r.length;h++){const m=r.charCodeAt(h+1)||null,y=r.charCodeAt(h-1)||null;s+=m&&hm(m)&&!dd[r[h+1]]||y&&hm(y)&&!dd[r[h-1]]||!dd[r[h]]?r[h]:dd[r[h]]}return s}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&Cm[this.text.charCodeAt(h)];h++)r++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&Cm[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const h=new dh;return h.text=this.text.substring(r,s),h.sectionIndex=this.sectionIndex.slice(r,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(md.forText(r.scale,r.fontStack||s));const h=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(h)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void ye("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(md.forImage(s)),this.sectionIndex.push(this.sections.length-1)):ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Im(o,r,s,h,m,y,x,S,C,F,V,Y,ne,ue,ge){const Ee=dh.fromFeature(o,m);let ke;Y===d.ah.vertical&&Ee.verticalizePunctuation();const{processBidirectionalText:De,processStyledBidirectionalText:et}=us;if(De&&Ee.sections.length===1){ke=[];const st=De(Ee.toString(),bv(Ee,F,y,r,h,ue));for(const xt of st){const Ot=new dh;Ot.text=xt,Ot.sections=Ee.sections;for(let ir=0;ir<xt.length;ir++)Ot.sectionIndex.push(0);ke.push(Ot)}}else if(et){ke=[];const st=et(Ee.text,Ee.sectionIndex,bv(Ee,F,y,r,h,ue));for(const xt of st){const Ot=new dh;Ot.text=xt[0],Ot.sectionIndex=xt[1],Ot.sections=Ee.sections,ke.push(Ot)}}else ke=function(st,xt){const Ot=[],ir=st.text;let zt=0;for(const Ct of xt)Ot.push(st.substring(zt,Ct)),zt=Ct;return zt<ir.length&&Ot.push(st.substring(zt,ir.length)),Ot}(Ee,bv(Ee,F,y,r,h,ue));const qe=[],Je={positionedLines:qe,text:Ee.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return function(st,xt,Ot,ir,zt,Ct,Xt,Vt,$t,pt,Qt,qt){let fr=0,qr=pd,Hr=0,qn=0;const oa=Vt==="right"?1:Vt==="left"?0:.5;let mi=0;for(const bn of zt){bn.trim();const Xn=bn.getMaxScale(),Ci=(Xn-1)*Wn,gi={positionedGlyphs:[],lineOffset:0};st.positionedLines[mi]=gi;const Gi=gi.positionedGlyphs;let yi=0;if(!bn.length()){qr+=Ct,++mi;continue}for(let no=0;no<bn.length();no++){const zr=bn.getSection(no),Yr=bn.getSectionIndex(no),an=bn.getCharCode(no);let bo=0,mn=null,yh=null,ds=null,ps=Wn;const aa=!($t===d.ah.horizontal||!Qt&&!Kf(an)||Qt&&(Cm[an]||(wn=an,Bt.Arabic(wn)||Bt["Arabic Supplement"](wn)||Bt["Arabic Extended-A"](wn)||Bt["Arabic Presentation Forms-A"](wn)||Bt["Arabic Presentation Forms-B"](wn))));if(zr.imageName){const No=ir[zr.imageName];if(!No)continue;ds=zr.imageName,st.iconsInText=st.iconsInText||!0,yh=No.paddedRect;const Qn=No.displaySize;zr.scale=zr.scale*Wn/qt,mn={width:Qn[0],height:Qn[1],left:ro,top:-dS,advance:aa?Qn[1]:Qn[0]},bo=Ci+(Wn-Qn[1]*zr.scale),ps=mn.advance;const Ys=aa?Qn[0]*zr.scale-Wn*Xn:Qn[1]*zr.scale-Wn*Xn;Ys>0&&Ys>yi&&(yi=Ys)}else{const No=Ot[zr.fontStack],Qn=No&&No[an];if(Qn&&Qn.rect)yh=Qn.rect,mn=Qn.metrics;else{const Ys=xt[zr.fontStack],xd=Ys&&Ys[an];if(!xd)continue;mn=xd.metrics}bo=(Xn-zr.scale)*Wn}aa?(st.verticalizable=!0,Gi.push({glyph:an,imageName:ds,x:fr,y:qr+bo,vertical:aa,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:Yr,metrics:mn,rect:yh}),fr+=ps*zr.scale+pt):(Gi.push({glyph:an,imageName:ds,x:fr,y:qr+bo,vertical:aa,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:Yr,metrics:mn,rect:yh}),fr+=mn.advance*zr.scale+pt)}Gi.length!==0&&(Hr=Math.max(fr-pt,Hr),_F(Gi,0,Gi.length-1,oa,yi)),fr=0;const Do=Ct*Xn+yi;gi.lineOffset=Math.max(yi,Ci),qr+=Do,qn=Math.max(Do,qn),++mi}var wn;const $i=qr-pd,{horizontalAlign:Ui,verticalAlign:Vi}=Sv(Xt);(function(bn,Xn,Ci,gi,Gi,yi,Do,no,zr){const Yr=(Xn-Ci)*Gi;let an=0;an=yi!==Do?-no*gi-pd:(-gi*zr+.5)*Do;for(const bo of bn)for(const mn of bo.positionedGlyphs)mn.x+=Yr,mn.y+=an})(st.positionedLines,oa,Ui,Vi,Hr,qn,Ct,$i,zt.length),st.top+=-Vi*$i,st.bottom=st.top+$i,st.left+=-Ui*Hr,st.right=st.left+Hr}(Je,r,s,h,ke,x,S,C,Y,F,ne,ge),!function(st){for(const xt of st)if(xt.positionedGlyphs.length!==0)return!1;return!0}(qe)&&Je}const Cm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gF={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},yF={40:!0};function gS(o,r,s,h,m,y){if(r.imageName){const x=h[r.imageName];return x?x.displaySize[0]*r.scale*Wn/y+m:0}{const x=s[r.fontStack],S=x&&x[o];return S?S.metrics.advance*r.scale+m:0}}function yS(o,r,s,h){const m=Math.pow(o-r,2);return h?o<r?m/2:2*m:m+Math.abs(s)*s}function vF(o,r,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function vS(o,r,s,h,m,y){let x=null,S=yS(r,s,m,y);for(const C of h){const F=yS(r-C.x,s,m,y)+C.badness;F<=S&&(x=C,S=F)}return{index:o,x:r,priorBreak:x,badness:S}}function _S(o){return o?_S(o.priorBreak).concat(o.index):[]}function bv(o,r,s,h,m,y){if(!o)return[];const x=[],S=function(Y,ne,ue,ge,Ee,ke){let De=0;for(let et=0;et<Y.length();et++){const qe=Y.getSection(et);De+=gS(Y.getCharCode(et),qe,ge,Ee,ne,ke)}return De/Math.max(1,Math.ceil(De/ue))}(o,r,s,h,m,y),C=o.text.indexOf("")>=0;let F=0;for(let Y=0;Y<o.length();Y++){const ne=o.getSection(Y),ue=o.getCharCode(Y);if(Cm[ue]||(F+=gS(ue,ne,h,m,r,y)),Y<o.length()-1){const ge=!((V=ue)<11904||!(Bt["Bopomofo Extended"](V)||Bt.Bopomofo(V)||Bt["CJK Compatibility Forms"](V)||Bt["CJK Compatibility Ideographs"](V)||Bt["CJK Compatibility"](V)||Bt["CJK Radicals Supplement"](V)||Bt["CJK Strokes"](V)||Bt["CJK Symbols and Punctuation"](V)||Bt["CJK Unified Ideographs Extension A"](V)||Bt["CJK Unified Ideographs"](V)||Bt["Enclosed CJK Letters and Months"](V)||Bt["Halfwidth and Fullwidth Forms"](V)||Bt.Hiragana(V)||Bt["Ideographic Description Characters"](V)||Bt["Kangxi Radicals"](V)||Bt["Katakana Phonetic Extensions"](V)||Bt.Katakana(V)||Bt["Vertical Forms"](V)||Bt["Yi Radicals"](V)||Bt["Yi Syllables"](V)));(gF[ue]||ge||ne.imageName||Y!==o.length()-2&&yF[o.getCharCode(Y+1)])&&x.push(vS(Y+1,F,S,x,vF(ue,o.getCharCode(Y+1),ge&&C),!1))}}var V;return _S(vS(o.length(),F,S,x,0,!0))}function Sv(o){let r=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function _F(o,r,s,h,m){if(!h&&!m)return;const y=o[s],x=(o[s].x+y.metrics.advance*y.scale)*h;for(let S=r;S<=s;S++)o[S].x-=x,o[S].y+=m}function xF(o,r,s){const{horizontalAlign:h,verticalAlign:m}=Sv(s),y=r[0]-o.displaySize[0]*h,x=r[1]-o.displaySize[1]*m;return{image:o,top:x,bottom:x+o.displaySize[1],left:y,right:y+o.displaySize[0]}}function xS(o){var r,s;let h=o.left,m=o.top,y=o.right-h,x=o.bottom-m;const S=(r=o.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",C=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",F=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(C==="proportional"){if(S==="stretchOnly"&&y/x<F||S==="proportional"){const V=Math.ceil(x*F);h*=V/y,y=V}}else if(S==="proportional"&&C==="stretchOnly"&&F!==0&&y/x>F){const V=Math.ceil(y/F);m*=V/x,x=V}return{x1:h,y1:m,x2:h+y,y2:m+x}}function wS(o,r,s,h,m,y){const x=o.image;let S;if(x.content){const ke=x.content,De=x.pixelRatio||1;S=[ke[0]/De,ke[1]/De,x.displaySize[0]-ke[2]/De,x.displaySize[1]-ke[3]/De]}const C=r.left*y,F=r.right*y;let V,Y,ne,ue;s==="width"||s==="both"?(ue=m[0]+C-h[3],Y=m[0]+F+h[1]):(ue=m[0]+(C+F-x.displaySize[0])/2,Y=ue+x.displaySize[0]);const ge=r.top*y,Ee=r.bottom*y;return s==="height"||s==="both"?(V=m[1]+ge-h[0],ne=m[1]+Ee+h[2]):(V=m[1]+(ge+Ee-x.displaySize[1])/2,ne=V+x.displaySize[1]),{image:x,top:V,right:Y,bottom:ne,left:ue,collisionPadding:S}}const gd=255,fs=128,ql=gd*fs;function bS(o,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Kr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let y=0;for(;y<h.length&&h[y]<=o;)y++;y=Math.max(0,y-1);let x=y;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[y],C=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:C,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:C,minSize:s.evaluate(new Kr(S)),maxSize:s.evaluate(new Kr(C)),interpolationType:m}}}function Ev(o,r,s){let h="never";const m=o.get(r);return m?h=m:o.get(s)&&(h="always"),h}const wF=Hl.VectorTileFeature.types,bF=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mm(o,r,s,h,m,y,x,S,C,F,V,Y,ne){const ue=S?Math.min(ql,Math.round(S[0])):0,ge=S?Math.min(ql,Math.round(S[1])):0;o.emplaceBack(r,s,Math.round(32*h),Math.round(32*m),y,x,(ue<<1)+(C?1:0),ge,16*F,16*V,256*Y,256*ne)}function Tv(o,r,s){o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s)}function SF(o){for(const r of o.sections)if(Yf(r.text))return!0;return!1}class Pv{constructor(r){this.layoutVertexArray=new zo,this.indexArray=new Zn,this.programConfigurations=r,this.segments=new Gn,this.dynamicLayoutVertexArray=new cs,this.opacityVertexArray=new Ul,this.hasVisibleVertices=!1,this.placedSymbolArray=new nn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Q4.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,eF.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,bF,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",Pv);class Av{constructor(r,s,h){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Gn,this.collisionVertexArray=new di}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,tF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",Av);class ph{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ov([]),this.placementViewportMatrix=ov([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bS(this.zoom,s["text-size"]),this.iconSizeData=bS(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=Ev(h,"text-overlap","text-allow-overlap")!=="never"||Ev(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new Pv(new Ku(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Pv(new Ku(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new on,this.lineVertexArray=new Di,this.symbolInstances=new Ro,this.textAnchorOffsets=new ci}calculateGlyphDependencies(r,s,h,m,y){for(let x=0;x<r.length;x++)if(s[r.charCodeAt(x)]=!0,(h||m)&&y){const S=dd[r.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(r,s,h){const m=this.layers[0],y=m.layout,x=y.get("text-font"),S=y.get("text-field"),C=y.get("icon-image"),F=(S.value.kind!=="constant"||S.value.value instanceof Pn&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),V=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,Y=y.get("symbol-sort-key");if(this.features=[],!F&&!V)return;const ne=s.iconDependencies,ue=s.glyphDependencies,ge=s.availableImages,Ee=new Kr(this.zoom);for(const{feature:ke,id:De,index:et,sourceLayerIndex:qe}of r){const Je=m._featureFilter.needGeometry,st=Ju(ke,Je);if(!m._featureFilter.filter(Ee,st,h))continue;let xt,Ot;if(Je||(st.geometry=Yu(ke)),F){const zt=m.getValueAndResolveTokens("text-field",st,h,ge),Ct=Pn.factory(zt),Xt=this.hasRTLText=this.hasRTLText||SF(Ct);(!Xt||us.getRTLTextPluginStatus()==="unavailable"||Xt&&us.isParsed())&&(xt=nF(Ct,m,st))}if(V){const zt=m.getValueAndResolveTokens("icon-image",st,h,ge);Ot=zt instanceof zi?zt:zi.fromString(zt)}if(!xt&&!Ot)continue;const ir=this.sortFeaturesByKey?Y.evaluate(st,{},h):void 0;if(this.features.push({id:De,text:xt,icon:Ot,index:et,sourceLayerIndex:qe,geometry:st.geometry,properties:ke.properties,type:wF[ke.type],sortKey:ir}),Ot&&(ne[Ot.name]=!0),xt){const zt=x.evaluate(st,{},h).join(","),Ct=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const Xt of xt.sections)if(Xt.image)ne[Xt.image.name]=!0;else{const Vt=Xf(xt.toString()),$t=Xt.fontStack||zt,pt=ue[$t]=ue[$t]||{};this.calculateGlyphDependencies(Xt.text,pt,Ct,this.allowVerticalPlacement,Vt)}}}y.get("symbol-placement")==="line"&&(this.features=function(ke){const De={},et={},qe=[];let Je=0;function st(zt){qe.push(ke[zt]),Je++}function xt(zt,Ct,Xt){const Vt=et[zt];return delete et[zt],et[Ct]=Vt,qe[Vt].geometry[0].pop(),qe[Vt].geometry[0]=qe[Vt].geometry[0].concat(Xt[0]),Vt}function Ot(zt,Ct,Xt){const Vt=De[Ct];return delete De[Ct],De[zt]=Vt,qe[Vt].geometry[0].shift(),qe[Vt].geometry[0]=Xt[0].concat(qe[Vt].geometry[0]),Vt}function ir(zt,Ct,Xt){const Vt=Xt?Ct[0][Ct[0].length-1]:Ct[0][0];return`${zt}:${Vt.x}:${Vt.y}`}for(let zt=0;zt<ke.length;zt++){const Ct=ke[zt],Xt=Ct.geometry,Vt=Ct.text?Ct.text.toString():null;if(!Vt){st(zt);continue}const $t=ir(Vt,Xt),pt=ir(Vt,Xt,!0);if($t in et&&pt in De&&et[$t]!==De[pt]){const Qt=Ot($t,pt,Xt),qt=xt($t,pt,qe[Qt].geometry);delete De[$t],delete et[pt],et[ir(Vt,qe[qt].geometry,!0)]=qt,qe[Qt].geometry=null}else $t in et?xt($t,pt,Xt):pt in De?Ot($t,pt,Xt):(st(zt),De[$t]=Je-1,et[pt]=Je-1)}return qe.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ke,De)=>ke.sortKey-De.sortKey)}update(r,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const h=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(s[r.segment+1]),y=r.dist(s[r.segment]);const x={};for(let S=r.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:m},S<s.length-1&&(m+=s[S+1].dist(s[S]));for(let S=r.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:y},S>0&&(y+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const C=x[S];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,s,h,m,y,x,S,C,F,V,Y,ne){const ue=r.indexArray,ge=r.layoutVertexArray,Ee=r.segments.prepareSegment(4*s.length,ge,ue,this.canOverlap?x.sortKey:void 0),ke=this.glyphOffsetArray.length,De=Ee.vertexLength,et=this.allowVerticalPlacement&&S===d.ah.vertical?Math.PI/2:0,qe=x.text&&x.text.sections;for(let Je=0;Je<s.length;Je++){const{tl:st,tr:xt,bl:Ot,br:ir,tex:zt,pixelOffsetTL:Ct,pixelOffsetBR:Xt,minFontScaleX:Vt,minFontScaleY:$t,glyphOffset:pt,isSDF:Qt,sectionIndex:qt}=s[Je],fr=Ee.vertexLength,qr=pt[1];Mm(ge,C.x,C.y,st.x,qr+st.y,zt.x,zt.y,h,Qt,Ct.x,Ct.y,Vt,$t),Mm(ge,C.x,C.y,xt.x,qr+xt.y,zt.x+zt.w,zt.y,h,Qt,Xt.x,Ct.y,Vt,$t),Mm(ge,C.x,C.y,Ot.x,qr+Ot.y,zt.x,zt.y+zt.h,h,Qt,Ct.x,Xt.y,Vt,$t),Mm(ge,C.x,C.y,ir.x,qr+ir.y,zt.x+zt.w,zt.y+zt.h,h,Qt,Xt.x,Xt.y,Vt,$t),Tv(r.dynamicLayoutVertexArray,C,et),ue.emplaceBack(fr,fr+1,fr+2),ue.emplaceBack(fr+1,fr+2,fr+3),Ee.vertexLength+=4,Ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pt[0]),Je!==s.length-1&&qt===s[Je+1].sectionIndex||r.programConfigurations.populatePaintArrays(ge.length,x,x.index,{},ne,qe&&qe[qt])}r.placedSymbolArray.emplaceBack(C.x,C.y,ke,this.glyphOffsetArray.length-ke,De,F,V,C.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,Y)}_addCollisionDebugVertex(r,s,h,m,y,x){return s.emplaceBack(0,0),r.emplaceBack(h.x,h.y,m,y,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,s,h,m,y,x,S){const C=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),F=C.vertexLength,V=y.layoutVertexArray,Y=y.collisionVertexArray,ne=S.anchorX,ue=S.anchorY;this._addCollisionDebugVertex(V,Y,x,ne,ue,new b(r,s)),this._addCollisionDebugVertex(V,Y,x,ne,ue,new b(h,s)),this._addCollisionDebugVertex(V,Y,x,ne,ue,new b(h,m)),this._addCollisionDebugVertex(V,Y,x,ne,ue,new b(r,m)),C.vertexLength+=4;const ge=y.indexArray;ge.emplaceBack(F,F+1),ge.emplaceBack(F+1,F+2),ge.emplaceBack(F+2,F+3),ge.emplaceBack(F+3,F),C.primitiveLength+=4}addDebugCollisionBoxes(r,s,h,m){for(let y=r;y<s;y++){const x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Av(fi,oS.members,fn),this.iconCollisionBox=new Av(fi,oS.members,fn);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,h,m,y,x,S,C,F){const V={};for(let Y=s;Y<h;Y++){const ne=r.get(Y);V.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},V.textFeatureIndex=ne.featureIndex;break}for(let Y=m;Y<y;Y++){const ne=r.get(Y);V.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},V.verticalTextFeatureIndex=ne.featureIndex;break}for(let Y=x;Y<S;Y++){const ne=r.get(Y);V.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},V.iconFeatureIndex=ne.featureIndex;break}for(let Y=C;Y<F;Y++){const ne=r.get(Y);V.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},V.verticalIconFeatureIndex=ne.featureIndex;break}return V}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const h=r.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<m;y+=4)r.indexArray.emplaceBack(y,y+1,y+2),r.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),h=Math.cos(r),m=[],y=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const C=this.symbolInstances.get(S);m.push(0|Math.round(s*C.anchorX+h*C.anchorY)),y.push(C.featureIndex)}return x.sort((S,C)=>m[S]-m[C]||y[C]-y[S]),x}addToSortKeyRanges(r,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,y,x)=>{m>=0&&x.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let SS,ES;Ut("SymbolBucket",ph,{omit:["layers","collisionBoxArray","features","compareText"]}),ph.MAX_GLYPHS=65535,ph.addDynamicAttributes=Tv;var Iv={get paint(){return ES=ES||new p({"icon-opacity":new sr(it.paint_symbol["icon-opacity"]),"icon-color":new sr(it.paint_symbol["icon-color"]),"icon-halo-color":new sr(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new sr(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sr(it.paint_symbol["icon-halo-blur"]),"icon-translate":new Jt(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new Jt(it.paint_symbol["icon-translate-anchor"]),"text-opacity":new sr(it.paint_symbol["text-opacity"]),"text-color":new sr(it.paint_symbol["text-color"],{runtimeType:pr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sr(it.paint_symbol["text-halo-color"]),"text-halo-width":new sr(it.paint_symbol["text-halo-width"]),"text-halo-blur":new sr(it.paint_symbol["text-halo-blur"]),"text-translate":new Jt(it.paint_symbol["text-translate"]),"text-translate-anchor":new Jt(it.paint_symbol["text-translate-anchor"])})},get layout(){return SS=SS||new p({"symbol-placement":new Jt(it.layout_symbol["symbol-placement"]),"symbol-spacing":new Jt(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Jt(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sr(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Jt(it.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Jt(it.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Jt(it.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Jt(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new Jt(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Jt(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new sr(it.layout_symbol["icon-size"]),"icon-text-fit":new Jt(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Jt(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new sr(it.layout_symbol["icon-image"]),"icon-rotate":new sr(it.layout_symbol["icon-rotate"]),"icon-padding":new sr(it.layout_symbol["icon-padding"]),"icon-keep-upright":new Jt(it.layout_symbol["icon-keep-upright"]),"icon-offset":new sr(it.layout_symbol["icon-offset"]),"icon-anchor":new sr(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Jt(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Jt(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Jt(it.layout_symbol["text-rotation-alignment"]),"text-field":new sr(it.layout_symbol["text-field"]),"text-font":new sr(it.layout_symbol["text-font"]),"text-size":new sr(it.layout_symbol["text-size"]),"text-max-width":new sr(it.layout_symbol["text-max-width"]),"text-line-height":new Jt(it.layout_symbol["text-line-height"]),"text-letter-spacing":new sr(it.layout_symbol["text-letter-spacing"]),"text-justify":new sr(it.layout_symbol["text-justify"]),"text-radial-offset":new sr(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Jt(it.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sr(it.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sr(it.layout_symbol["text-anchor"]),"text-max-angle":new Jt(it.layout_symbol["text-max-angle"]),"text-writing-mode":new Jt(it.layout_symbol["text-writing-mode"]),"text-rotate":new sr(it.layout_symbol["text-rotate"]),"text-padding":new Jt(it.layout_symbol["text-padding"]),"text-keep-upright":new Jt(it.layout_symbol["text-keep-upright"]),"text-transform":new sr(it.layout_symbol["text-transform"]),"text-offset":new sr(it.layout_symbol["text-offset"]),"text-allow-overlap":new Jt(it.layout_symbol["text-allow-overlap"]),"text-overlap":new Jt(it.layout_symbol["text-overlap"]),"text-ignore-placement":new Jt(it.layout_symbol["text-ignore-placement"]),"text-optional":new Jt(it.layout_symbol["text-optional"])})}};class TS{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:nt,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",TS,{omit:["defaultValue"]});class km extends _{constructor(r){super(r,Iv)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const y of h)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,h,m){const y=this.layout.get(r).evaluate(s,{},h,m),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||kt(x.value)||!y?y:function(S,C){return C.replace(/{([^{}]+)}/g,(F,V)=>S&&V in S?String(S[V]):"")}(s.properties,y)}createBucket(r){return new ph(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Iv.paint.overridableProperties){if(!km.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),h=new TS(s),m=new lt(h,s.property.specification);let y=null;y=s.value.kind==="constant"||s.value.kind==="source"?new Zt("source",m):new Yt("composite",m,s.value.zoomStops),this.paint._values[r]=new ia(s.property,y,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&km.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const h=r.get("text-field"),m=Iv.paint.properties[s];let y=!1;const x=S=>{for(const C of S)if(m.overrides&&m.overrides.hasOverride(C))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Pn)x(h.value.value.sections);else if(h.value.kind==="source"){const S=F=>{y||(F instanceof ya&&xn(F.value)===ni?x(F.value.sections):F instanceof Al?x(F.sections):F.eachChild(S))},C=h.value;C._styleExpression&&S(C._styleExpression.expression)}return y}}let PS;var EF={get paint(){return PS=PS||new p({"background-color":new Jt(it.paint_background["background-color"]),"background-pattern":new n(it.paint_background["background-pattern"]),"background-opacity":new Jt(it.paint_background["background-opacity"])})}};class TF extends _{constructor(r){super(r,EF)}}let AS;var PF={get paint(){return AS=AS||new p({"raster-opacity":new Jt(it.paint_raster["raster-opacity"]),"raster-hue-rotate":new Jt(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Jt(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Jt(it.paint_raster["raster-brightness-max"]),"raster-saturation":new Jt(it.paint_raster["raster-saturation"]),"raster-contrast":new Jt(it.paint_raster["raster-contrast"]),"raster-resampling":new Jt(it.paint_raster["raster-resampling"]),"raster-fade-duration":new Jt(it.paint_raster["raster-fade-duration"])})}};class AF extends _{constructor(r){super(r,PF)}}class IF extends _{constructor(r){super(r,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class CF{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Cv=63710088e-1;class Xl{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xl(U(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,h=this.lat*s,m=r.lat*s,y=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((r.lng-this.lng)*s);return Cv*Math.acos(Math.min(y,1))}static convert(r){if(r instanceof Xl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Xl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Xl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const IS=2*Math.PI*Cv;function CS(o){return IS*Math.cos(o*Math.PI/180)}function MS(o){return(180+o)/360}function kS(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function OS(o,r){return o/CS(r)}function Mv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Om{constructor(r,s,h=0){this.x=+r,this.y=+s,this.z=+h}static fromLngLat(r,s=0){const h=Xl.convert(r);return new Om(MS(h.lng),kS(h.lat),OS(s,h.lat))}toLngLat(){return new Xl(360*this.x-180,Mv(this.y))}toAltitude(){return this.z*CS(Mv(this.y))}meterInMercatorCoordinateUnits(){return 1/IS*(r=Mv(this.y),1/Math.cos(r*Math.PI/180));var r}}function FS(o,r,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class kv{constructor(r,s,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||s<0||s>=Math.pow(2,r))throw new Error(`x=${s}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=h,this.key=yd(0,r,r,s,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,h){const m=(x=this.y,S=this.z,C=FS(256*(y=this.x),256*(x=Math.pow(2,S)-x-1),S),F=FS(256*(y+1),256*(x+1),S),C[0]+","+C[1]+","+F[0]+","+F[1]);var y,x,S,C,F;const V=function(Y,ne,ue){let ge,Ee="";for(let ke=Y;ke>0;ke--)ge=1<<ke-1,Ee+=(ne&ge?1:0)+(ue&ge?2:0);return Ee}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new b((r.x*s-this.x)*zn,(r.y*s-this.y)*zn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class RS{constructor(r,s){this.wrap=r,this.canonical=s,this.key=yd(r,s.z,s.z,s.x,s.y)}}class Bo{constructor(r,s,h,m,y){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=s,this.canonical=new kv(h,+m,+y),this.key=yd(s,r,h,m,y)}clone(){return new Bo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new Bo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bo(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?yd(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):yd(this.wrap*+s,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new Bo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Bo(s,this.wrap,s,h,m),new Bo(s,this.wrap,s,h+1,m),new Bo(s,this.wrap,s,h,m+1),new Bo(s,this.wrap,s,h+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Bo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Bo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new RS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Om(r.x-this.wrap,r.y))}}function yd(o,r,s,h,m){(o*=2)<0&&(o=-1*o-1);const y=1<<s;return(y*y*o+y*m+h).toString(36)+s.toString(36)+r.toString(36)}Ut("CanonicalTileID",kv),Ut("OverscaledTileID",Bo,{omit:["posMatrix"]});class jS{constructor(r,s,h,m=1,y=1,x=1,S=0){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void ye(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const C=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=y,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<C;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(C,F)]=this.data[this._idx(C-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,C)]=this.data[this._idx(F,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<C;F++)for(let V=0;V<C;V++){const Y=this.get(F,V);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(r,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(r,s);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}unpack(r,s,h){return r*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,y=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:m=y-1;break;case 1:y=m+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const C=-s*this.dim,F=-h*this.dim;for(let V=x;V<S;V++)for(let Y=m;Y<y;Y++)this.data[this._idx(Y,V)]=r.data[this._idx(Y+C,V+F)]}}Ut("DEMData",jS);class zS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const h=r[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class LS{constructor(r,s,h,m,y){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=h,r._y=m,this.properties=r.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r}}class BS{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Hu(zn,16,0),this.grid3D=new Hu(zn,16,0),this.featureIndexArray=new jo,this.promoteId=s}insert(r,s,h,m,y,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,y);const C=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const V=s[F],Y=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<V.length;ne++){const ue=V[ne];Y[0]=Math.min(Y[0],ue.x),Y[1]=Math.min(Y[1],ue.y),Y[2]=Math.max(Y[2],ue.x),Y[3]=Math.max(Y[3],ue.y)}Y[0]<zn&&Y[1]<zn&&Y[2]>=0&&Y[3]>=0&&C.insert(S,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Hl.VectorTile(new _v(this.rawTileData)).layers,this.sourceLayerCoder=new zS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,s,h,m){this.loadVTLayers();const y=r.params||{},x=zn/r.tileSize/r.scale,S=jn(y.filter),C=r.queryGeometry,F=r.queryPadding*x,V=NS(C),Y=this.grid.query(V.minX-F,V.minY-F,V.maxX+F,V.maxY+F),ne=NS(r.cameraQueryGeometry),ue=this.grid3D.query(ne.minX-F,ne.minY-F,ne.maxX+F,ne.maxY+F,(ke,De,et,qe)=>function(Je,st,xt,Ot,ir){for(const Ct of Je)if(st<=Ct.x&&xt<=Ct.y&&Ot>=Ct.x&&ir>=Ct.y)return!0;const zt=[new b(st,xt),new b(st,ir),new b(Ot,ir),new b(Ot,xt)];if(Je.length>2){for(const Ct of zt)if(sh(Je,Ct))return!0}for(let Ct=0;Ct<Je.length-1;Ct++)if(u4(Je[Ct],Je[Ct+1],zt))return!0;return!1}(r.cameraQueryGeometry,ke-F,De-F,et+F,qe+F));for(const ke of ue)Y.push(ke);Y.sort(MF);const ge={};let Ee;for(let ke=0;ke<Y.length;ke++){const De=Y[ke];if(De===Ee)continue;Ee=De;const et=this.featureIndexArray.get(De);let qe=null;this.loadMatchingFeature(ge,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,S,y.layers,y.availableImages,s,h,m,(Je,st,xt)=>(qe||(qe=Yu(Je)),st.queryIntersectsFeature(C,Je,xt,qe,this.z,r.transform,x,r.pixelPosMatrix)))}return ge}loadMatchingFeature(r,s,h,m,y,x,S,C,F,V,Y){const ne=this.bucketLayerIDs[s];if(x&&!function(ke,De){for(let et=0;et<ke.length;et++)if(De.indexOf(ke[et])>=0)return!0;return!1}(x,ne))return;const ue=this.sourceLayerCoder.decode(h),ge=this.vtLayers[ue].feature(m);if(y.needGeometry){const ke=Ju(ge,!0);if(!y.filter(new Kr(this.tileID.overscaledZ),ke,this.tileID.canonical))return}else if(!y.filter(new Kr(this.tileID.overscaledZ),ge))return;const Ee=this.getId(ge,ue);for(let ke=0;ke<ne.length;ke++){const De=ne[ke];if(x&&x.indexOf(De)<0)continue;const et=C[De];if(!et)continue;let qe={};Ee&&V&&(qe=V.getState(et.sourceLayer||"_geojsonTileLayer",Ee));const Je=P({},F[De]);Je.paint=DS(Je.paint,et.paint,ge,qe,S),Je.layout=DS(Je.layout,et.layout,ge,qe,S);const st=!Y||Y(ge,et,qe);if(!st)continue;const xt=new LS(ge,this.z,this.x,this.y,Ee);xt.layer=Je;let Ot=r[De];Ot===void 0&&(Ot=r[De]=[]),Ot.push({featureIndex:m,feature:xt,intersectionZ:st})}}lookupSymbolFeatures(r,s,h,m,y,x,S,C){const F={};this.loadVTLayers();const V=jn(y);for(const Y of r)this.loadMatchingFeature(F,h,m,Y,V,x,S,C,s);return F}hasLayer(r){for(const s of this.bucketLayerIDs)for(const h of s)if(r===h)return!0;return!1}getId(r,s){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function DS(o,r,s,h,m){return B(o,(y,x)=>{const S=r instanceof eh?r.get(x):null;return S&&S.evaluate?S.evaluate(s,h,m):S})}function NS(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const y of o)r=Math.min(r,y.x),s=Math.min(s,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return{minX:r,minY:s,maxX:h,maxY:m}}function MF(o,r){return r-o}function $S(o,r,s,h,m){const y=[];for(let x=0;x<o.length;x++){const S=o[x];let C;for(let F=0;F<S.length-1;F++){let V=S[F],Y=S[F+1];V.x<r&&Y.x<r||(V.x<r?V=new b(r,V.y+(r-V.x)/(Y.x-V.x)*(Y.y-V.y))._round():Y.x<r&&(Y=new b(r,V.y+(r-V.x)/(Y.x-V.x)*(Y.y-V.y))._round()),V.y<s&&Y.y<s||(V.y<s?V=new b(V.x+(s-V.y)/(Y.y-V.y)*(Y.x-V.x),s)._round():Y.y<s&&(Y=new b(V.x+(s-V.y)/(Y.y-V.y)*(Y.x-V.x),s)._round()),V.x>=h&&Y.x>=h||(V.x>=h?V=new b(h,V.y+(h-V.x)/(Y.x-V.x)*(Y.y-V.y))._round():Y.x>=h&&(Y=new b(h,V.y+(h-V.x)/(Y.x-V.x)*(Y.y-V.y))._round()),V.y>=m&&Y.y>=m||(V.y>=m?V=new b(V.x+(m-V.y)/(Y.y-V.y)*(Y.x-V.x),m)._round():Y.y>=m&&(Y=new b(V.x+(m-V.y)/(Y.y-V.y)*(Y.x-V.x),m)._round()),C&&V.equals(C[C.length-1])||(C=[V],y.push(C)),C.push(Y)))))}}return y}Ut("FeatureIndex",BS,{omit:["rawTileData","sourceLayerCoder"]});class Kl extends b{constructor(r,s,h,m){super(r,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new Kl(this.x,this.y,this.angle,this.segment)}}function US(o,r,s,h,m){if(r.segment===void 0||s===0)return!0;let y=r,x=r.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(y),y=o[x]}S+=o[x].dist(o[x+1]),x++;const C=[];let F=0;for(;S<s/2;){const V=o[x],Y=o[x+1];if(!Y)return!1;let ne=o[x-1].angleTo(V)-V.angleTo(Y);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:S,angleDelta:ne}),F+=ne;S-C[0].distance>h;)F-=C.shift().angleDelta;if(F>m)return!1;x++,S+=V.dist(Y)}return!0}function VS(o){let r=0;for(let s=0;s<o.length-1;s++)r+=o[s].dist(o[s+1]);return r}function GS(o,r,s){return o?.6*r*s:0}function WS(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function kF(o,r,s,h,m,y){const x=GS(s,m,y),S=WS(s,h)*y;let C=0;const F=VS(o)/2;for(let V=0;V<o.length-1;V++){const Y=o[V],ne=o[V+1],ue=Y.dist(ne);if(C+ue>F){const ge=(F-C)/ue,Ee=Yn.number(Y.x,ne.x,ge),ke=Yn.number(Y.y,ne.y,ge),De=new Kl(Ee,ke,ne.angleTo(Y),V);return De._round(),!x||US(o,De,S,x,r)?De:void 0}C+=ue}}function OF(o,r,s,h,m,y,x,S,C){const F=GS(h,y,x),V=WS(h,m),Y=V*x,ne=o[0].x===0||o[0].x===C||o[0].y===0||o[0].y===C;return r-Y<r/4&&(r=Y+r/4),HS(o,ne?r/2*S%r:(V/2+2*y)*x*S%r,r,F,s,Y,ne,!1,C)}function HS(o,r,s,h,m,y,x,S,C){const F=y/2,V=VS(o);let Y=0,ne=r-s,ue=[];for(let ge=0;ge<o.length-1;ge++){const Ee=o[ge],ke=o[ge+1],De=Ee.dist(ke),et=ke.angleTo(Ee);for(;ne+s<Y+De;){ne+=s;const qe=(ne-Y)/De,Je=Yn.number(Ee.x,ke.x,qe),st=Yn.number(Ee.y,ke.y,qe);if(Je>=0&&Je<C&&st>=0&&st<C&&ne-F>=0&&ne+F<=V){const xt=new Kl(Je,st,et,ge);xt._round(),h&&!US(o,xt,y,h,m)||ue.push(xt)}}Y+=De}return S||ue.length||x||(ue=HS(o,Y/2,s,h,m,y,x,!0,C)),ue}Ut("Anchor",Kl);const mh=ro;function ZS(o,r,s,h){const m=[],y=o.image,x=y.pixelRatio,S=y.paddedRect.w-2*mh,C=y.paddedRect.h-2*mh;let F={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const V=y.stretchX||[[0,S]],Y=y.stretchY||[[0,C]],ne=(pt,Qt)=>pt+Qt[1]-Qt[0],ue=V.reduce(ne,0),ge=Y.reduce(ne,0),Ee=S-ue,ke=C-ge;let De=0,et=ue,qe=0,Je=ge,st=0,xt=Ee,Ot=0,ir=ke;if(y.content&&h){const pt=y.content,Qt=pt[2]-pt[0],qt=pt[3]-pt[1];(y.textFitWidth||y.textFitHeight)&&(F=xS(o)),De=Fm(V,0,pt[0]),qe=Fm(Y,0,pt[1]),et=Fm(V,pt[0],pt[2]),Je=Fm(Y,pt[1],pt[3]),st=pt[0]-De,Ot=pt[1]-qe,xt=Qt-et,ir=qt-Je}const zt=F.x1,Ct=F.y1,Xt=F.x2-zt,Vt=F.y2-Ct,$t=(pt,Qt,qt,fr)=>{const qr=Rm(pt.stretch-De,et,Xt,zt),Hr=jm(pt.fixed-st,xt,pt.stretch,ue),qn=Rm(Qt.stretch-qe,Je,Vt,Ct),oa=jm(Qt.fixed-Ot,ir,Qt.stretch,ge),mi=Rm(qt.stretch-De,et,Xt,zt),wn=jm(qt.fixed-st,xt,qt.stretch,ue),$i=Rm(fr.stretch-qe,Je,Vt,Ct),Ui=jm(fr.fixed-Ot,ir,fr.stretch,ge),Vi=new b(qr,qn),bn=new b(mi,qn),Xn=new b(mi,$i),Ci=new b(qr,$i),gi=new b(Hr/x,oa/x),Gi=new b(wn/x,Ui/x),yi=r*Math.PI/180;if(yi){const zr=Math.sin(yi),Yr=Math.cos(yi),an=[Yr,-zr,zr,Yr];Vi._matMult(an),bn._matMult(an),Ci._matMult(an),Xn._matMult(an)}const Do=pt.stretch+pt.fixed,no=Qt.stretch+Qt.fixed;return{tl:Vi,tr:bn,bl:Ci,br:Xn,tex:{x:y.paddedRect.x+mh+Do,y:y.paddedRect.y+mh+no,w:qt.stretch+qt.fixed-Do,h:fr.stretch+fr.fixed-no},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gi,pixelOffsetBR:Gi,minFontScaleX:xt/x/Xt,minFontScaleY:ir/x/Vt,isSDF:s}};if(h&&(y.stretchX||y.stretchY)){const pt=qS(V,Ee,ue),Qt=qS(Y,ke,ge);for(let qt=0;qt<pt.length-1;qt++){const fr=pt[qt],qr=pt[qt+1];for(let Hr=0;Hr<Qt.length-1;Hr++)m.push($t(fr,Qt[Hr],qr,Qt[Hr+1]))}}else m.push($t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:C+1}));return m}function Fm(o,r,s){let h=0;for(const m of o)h+=Math.max(r,Math.min(s,m[1]))-Math.max(r,Math.min(s,m[0]));return h}function qS(o,r,s){const h=[{fixed:-mh,stretch:0}];for(const[m,y]of o){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(y-m)})}return h.push({fixed:r+mh,stretch:s}),h}function Rm(o,r,s,h){return o/r*s+h}function jm(o,r,s,h){return o-r*s/h}class zm{constructor(r,s,h,m,y,x,S,C,F,V){var Y;if(this.boxStartIndex=r.length,F){let ne=x.top,ue=x.bottom;const ge=x.collisionPadding;ge&&(ne-=ge[1],ue+=ge[3]);let Ee=ue-ne;Ee>0&&(Ee=Math.max(10,Ee),this.circleDiameter=Ee)}else{const ne=!((Y=x.image)===null||Y===void 0)&&Y.content&&(x.image.textFitWidth||x.image.textFitHeight)?xS(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};ne.y1=ne.y1*S-C[0],ne.y2=ne.y2*S+C[2],ne.x1=ne.x1*S-C[3],ne.x2=ne.x2*S+C[1];const ue=x.collisionPadding;if(ue&&(ne.x1-=ue[0]*S,ne.y1-=ue[1]*S,ne.x2+=ue[2]*S,ne.y2+=ue[3]*S),V){const ge=new b(ne.x1,ne.y1),Ee=new b(ne.x2,ne.y1),ke=new b(ne.x1,ne.y2),De=new b(ne.x2,ne.y2),et=V*Math.PI/180;ge._rotate(et),Ee._rotate(et),ke._rotate(et),De._rotate(et),ne.x1=Math.min(ge.x,Ee.x,ke.x,De.x),ne.x2=Math.max(ge.x,Ee.x,ke.x,De.x),ne.y1=Math.min(ge.y,Ee.y,ke.y,De.y),ne.y2=Math.max(ge.y,Ee.y,ke.y,De.y)}r.emplaceBack(s.x,s.y,ne.x1,ne.y1,ne.x2,ne.y2,h,m,y)}this.boxEndIndex=r.length}}class FF{constructor(r=[],s=RF){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:h}=this,m=s[r];for(;r>0;){const y=r-1>>1,x=s[y];if(h(m,x)>=0)break;s[r]=x,r=y}s[r]=m}_down(r){const{data:s,compare:h}=this,m=this.length>>1,y=s[r];for(;r<m;){let x=1+(r<<1),S=s[x];const C=x+1;if(C<this.length&&h(s[C],S)<0&&(x=C,S=s[C]),h(S,y)>=0)break;s[r]=S,r=x}s[r]=y}}function RF(o,r){return o<r?-1:o>r?1:0}function jF(o,r=1,s=!1){let h=1/0,m=1/0,y=-1/0,x=-1/0;const S=o[0];for(let ue=0;ue<S.length;ue++){const ge=S[ue];(!ue||ge.x<h)&&(h=ge.x),(!ue||ge.y<m)&&(m=ge.y),(!ue||ge.x>y)&&(y=ge.x),(!ue||ge.y>x)&&(x=ge.y)}const C=Math.min(y-h,x-m);let F=C/2;const V=new FF([],zF);if(C===0)return new b(h,m);for(let ue=h;ue<y;ue+=C)for(let ge=m;ge<x;ge+=C)V.push(new gh(ue+F,ge+F,F,o));let Y=function(ue){let ge=0,Ee=0,ke=0;const De=ue[0];for(let et=0,qe=De.length,Je=qe-1;et<qe;Je=et++){const st=De[et],xt=De[Je],Ot=st.x*xt.y-xt.x*st.y;Ee+=(st.x+xt.x)*Ot,ke+=(st.y+xt.y)*Ot,ge+=3*Ot}return new gh(Ee/ge,ke/ge,0,ue)}(o),ne=V.length;for(;V.length;){const ue=V.pop();(ue.d>Y.d||!Y.d)&&(Y=ue,s&&console.log("found best %d after %d probes",Math.round(1e4*ue.d)/1e4,ne)),ue.max-Y.d<=r||(F=ue.h/2,V.push(new gh(ue.p.x-F,ue.p.y-F,F,o)),V.push(new gh(ue.p.x+F,ue.p.y-F,F,o)),V.push(new gh(ue.p.x-F,ue.p.y+F,F,o)),V.push(new gh(ue.p.x+F,ue.p.y+F,F,o)),ne+=4)}return s&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${Y.d}`)),Y.p}function zF(o,r){return r.max-o.max}function gh(o,r,s,h){this.p=new b(o,r),this.h=s,this.d=function(m,y){let x=!1,S=1/0;for(let C=0;C<y.length;C++){const F=y[C];for(let V=0,Y=F.length,ne=Y-1;V<Y;ne=V++){const ue=F[V],ge=F[ne];ue.y>m.y!=ge.y>m.y&&m.x<(ge.x-ue.x)*(m.y-ue.y)/(ge.y-ue.y)+ue.x&&(x=!x),S=Math.min(S,k2(m,ue,ge))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var pi;d.aq=void 0,(pi=d.aq||(d.aq={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";const Yl=7,Ov=Number.POSITIVE_INFINITY;function XS(o,r){return r[1]!==Ov?function(s,h,m){let y=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-Yl;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+Yl}switch(s){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,x]}(o,r[0],r[1]):function(s,h){let m=0,y=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":y=x-Yl;break;case"bottom-right":case"bottom-left":y=-x+Yl;break;case"bottom":y=-h+Yl;break;case"top":y=h-Yl}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(o,r[0])}function KS(o,r,s){var h;const m=o.layout,y=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},s);if(y){const S=y.values,C=[];for(let F=0;F<S.length;F+=2){const V=C[F]=S[F],Y=S[F+1].map(ne=>ne*Wn);V.startsWith("top")?Y[1]-=Yl:V.startsWith("bottom")&&(Y[1]+=Yl),C[F+1]=Y}return new ai(C)}const x=m.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},s)*Wn,Ov]:m.get("text-offset").evaluate(r,{},s).map(F=>F*Wn);const C=[];for(const F of x)C.push(F,XS(F,S));return new ai(C)}return null}function Fv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function LF(o,r,s,h,m,y,x,S,C,F,V){let Y=y.textMaxSize.evaluate(r,{});Y===void 0&&(Y=x);const ne=o.layers[0].layout,ue=ne.get("icon-offset").evaluate(r,{},V),ge=JS(s.horizontal),Ee=x/24,ke=o.tilePixelRatio*Ee,De=o.tilePixelRatio*Y/24,et=o.tilePixelRatio*S,qe=o.tilePixelRatio*ne.get("symbol-spacing"),Je=ne.get("text-padding")*o.tilePixelRatio,st=function(pt,Qt,qt,fr=1){const qr=pt.get("icon-padding").evaluate(Qt,{},qt),Hr=qr&&qr.values;return[Hr[0]*fr,Hr[1]*fr,Hr[2]*fr,Hr[3]*fr]}(ne,r,V,o.tilePixelRatio),xt=ne.get("text-max-angle")/180*Math.PI,Ot=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",ir=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",zt=ne.get("symbol-placement"),Ct=qe/2,Xt=ne.get("icon-text-fit");let Vt;h&&Xt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Vt=wS(h,s.vertical,Xt,ne.get("icon-text-fit-padding"),ue,Ee)),ge&&(h=wS(h,ge,Xt,ne.get("icon-text-fit-padding"),ue,Ee)));const $t=(pt,Qt)=>{Qt.x<0||Qt.x>=zn||Qt.y<0||Qt.y>=zn||function(qt,fr,qr,Hr,qn,oa,mi,wn,$i,Ui,Vi,bn,Xn,Ci,gi,Gi,yi,Do,no,zr,Yr,an,bo,mn,yh){const ds=qt.addToLineVertexArray(fr,qr);let ps,aa,No,Qn,Ys=0,xd=0,rE=0,nE=0,$v=-1,Uv=-1;const Js={};let iE=oh("");if(qt.allowVerticalPlacement&&Hr.vertical){const Mi=wn.layout.get("text-rotate").evaluate(Yr,{},mn)+90;No=new zm($i,fr,Ui,Vi,bn,Hr.vertical,Xn,Ci,gi,Mi),mi&&(Qn=new zm($i,fr,Ui,Vi,bn,mi,yi,Do,gi,Mi))}if(qn){const Mi=wn.layout.get("icon-rotate").evaluate(Yr,{}),$o=wn.layout.get("icon-text-fit")!=="none",ec=ZS(qn,Mi,bo,$o),Ma=mi?ZS(mi,Mi,bo,$o):void 0;aa=new zm($i,fr,Ui,Vi,bn,qn,yi,Do,!1,Mi),Ys=4*ec.length;const tc=qt.iconSizeData;let ms=null;tc.kind==="source"?(ms=[fs*wn.layout.get("icon-size").evaluate(Yr,{})],ms[0]>ql&&ye(`${qt.layerIds[0]}: Value for "icon-size" is >= ${gd}. Reduce your "icon-size".`)):tc.kind==="composite"&&(ms=[fs*an.compositeIconSizes[0].evaluate(Yr,{},mn),fs*an.compositeIconSizes[1].evaluate(Yr,{},mn)],(ms[0]>ql||ms[1]>ql)&&ye(`${qt.layerIds[0]}: Value for "icon-size" is >= ${gd}. Reduce your "icon-size".`)),qt.addSymbols(qt.icon,ec,ms,zr,no,Yr,d.ah.none,fr,ds.lineStartIndex,ds.lineLength,-1,mn),$v=qt.icon.placedSymbolArray.length-1,Ma&&(xd=4*Ma.length,qt.addSymbols(qt.icon,Ma,ms,zr,no,Yr,d.ah.vertical,fr,ds.lineStartIndex,ds.lineLength,-1,mn),Uv=qt.icon.placedSymbolArray.length-1)}const oE=Object.keys(Hr.horizontal);for(const Mi of oE){const $o=Hr.horizontal[Mi];if(!ps){iE=oh($o.text);const Ma=wn.layout.get("text-rotate").evaluate(Yr,{},mn);ps=new zm($i,fr,Ui,Vi,bn,$o,Xn,Ci,gi,Ma)}const ec=$o.positionedLines.length===1;if(rE+=YS(qt,fr,$o,oa,wn,gi,Yr,Gi,ds,Hr.vertical?d.ah.horizontal:d.ah.horizontalOnly,ec?oE:[Mi],Js,$v,an,mn),ec)break}Hr.vertical&&(nE+=YS(qt,fr,Hr.vertical,oa,wn,gi,Yr,Gi,ds,d.ah.vertical,["vertical"],Js,Uv,an,mn));const NF=ps?ps.boxStartIndex:qt.collisionBoxArray.length,$F=ps?ps.boxEndIndex:qt.collisionBoxArray.length,UF=No?No.boxStartIndex:qt.collisionBoxArray.length,VF=No?No.boxEndIndex:qt.collisionBoxArray.length,GF=aa?aa.boxStartIndex:qt.collisionBoxArray.length,WF=aa?aa.boxEndIndex:qt.collisionBoxArray.length,HF=Qn?Qn.boxStartIndex:qt.collisionBoxArray.length,ZF=Qn?Qn.boxEndIndex:qt.collisionBoxArray.length;let Ca=-1;const Bm=(Mi,$o)=>Mi&&Mi.circleDiameter?Math.max(Mi.circleDiameter,$o):$o;Ca=Bm(ps,Ca),Ca=Bm(No,Ca),Ca=Bm(aa,Ca),Ca=Bm(Qn,Ca);const aE=Ca>-1?1:0;aE&&(Ca*=yh/Wn),qt.glyphOffsetArray.length>=ph.MAX_GLYPHS&&ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Yr.sortKey!==void 0&&qt.addToSortKeyRanges(qt.symbolInstances.length,Yr.sortKey);const qF=KS(wn,Yr,mn),[XF,KF]=function(Mi,$o){const ec=Mi.length,Ma=$o==null?void 0:$o.values;if((Ma==null?void 0:Ma.length)>0)for(let tc=0;tc<Ma.length;tc+=2){const ms=Ma[tc+1];Mi.emplaceBack(d.aq[Ma[tc]],ms[0],ms[1])}return[ec,Mi.length]}(qt.textAnchorOffsets,qF);qt.symbolInstances.emplaceBack(fr.x,fr.y,Js.right>=0?Js.right:-1,Js.center>=0?Js.center:-1,Js.left>=0?Js.left:-1,Js.vertical||-1,$v,Uv,iE,NF,$F,UF,VF,GF,WF,HF,ZF,Ui,rE,nE,Ys,xd,aE,0,Xn,Ca,XF,KF)}(o,Qt,pt,s,h,m,Vt,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,ke,[Je,Je,Je,Je],Ot,C,et,st,ir,ue,r,y,F,V,x)};if(zt==="line")for(const pt of $S(r.geometry,0,0,zn,zn)){const Qt=OF(pt,qe,xt,s.vertical||ge,h,24,De,o.overscaling,zn);for(const qt of Qt)ge&&BF(o,ge.text,Ct,qt)||$t(pt,qt)}else if(zt==="line-center"){for(const pt of r.geometry)if(pt.length>1){const Qt=kF(pt,xt,s.vertical||ge,h,24,De);Qt&&$t(pt,Qt)}}else if(r.type==="Polygon")for(const pt of kl(r.geometry,0)){const Qt=jF(pt,16);$t(pt[0],new Kl(Qt.x,Qt.y,0))}else if(r.type==="LineString")for(const pt of r.geometry)$t(pt,new Kl(pt[0].x,pt[0].y,0));else if(r.type==="Point")for(const pt of r.geometry)for(const Qt of pt)$t([Qt],new Kl(Qt.x,Qt.y,0))}function YS(o,r,s,h,m,y,x,S,C,F,V,Y,ne,ue,ge){const Ee=function(et,qe,Je,st,xt,Ot,ir,zt){const Ct=st.layout.get("text-rotate").evaluate(Ot,{})*Math.PI/180,Xt=[];for(const Vt of qe.positionedLines)for(const $t of Vt.positionedGlyphs){if(!$t.rect)continue;const pt=$t.rect||{};let Qt=dS+1,qt=!0,fr=1,qr=0;const Hr=(xt||zt)&&$t.vertical,qn=$t.metrics.advance*$t.scale/2;if(zt&&qe.verticalizable&&(qr=Vt.lineOffset/2-($t.imageName?-(Wn-$t.metrics.width*$t.scale)/2:($t.scale-1)*Wn)),$t.imageName){const zr=ir[$t.imageName];qt=zr.sdf,fr=zr.pixelRatio,Qt=ro/fr}const oa=xt?[$t.x+qn,$t.y]:[0,0];let mi=xt?[0,0]:[$t.x+qn+Je[0],$t.y+Je[1]-qr],wn=[0,0];Hr&&(wn=mi,mi=[0,0]);const $i=$t.metrics.isDoubleResolution?2:1,Ui=($t.metrics.left-Qt)*$t.scale-qn+mi[0],Vi=(-$t.metrics.top-Qt)*$t.scale+mi[1],bn=Ui+pt.w/$i*$t.scale/fr,Xn=Vi+pt.h/$i*$t.scale/fr,Ci=new b(Ui,Vi),gi=new b(bn,Vi),Gi=new b(Ui,Xn),yi=new b(bn,Xn);if(Hr){const zr=new b(-qn,qn-pd),Yr=-Math.PI/2,an=Wn/2-qn,bo=new b(5-pd-an,-($t.imageName?an:0)),mn=new b(...wn);Ci._rotateAround(Yr,zr)._add(bo)._add(mn),gi._rotateAround(Yr,zr)._add(bo)._add(mn),Gi._rotateAround(Yr,zr)._add(bo)._add(mn),yi._rotateAround(Yr,zr)._add(bo)._add(mn)}if(Ct){const zr=Math.sin(Ct),Yr=Math.cos(Ct),an=[Yr,-zr,zr,Yr];Ci._matMult(an),gi._matMult(an),Gi._matMult(an),yi._matMult(an)}const Do=new b(0,0),no=new b(0,0);Xt.push({tl:Ci,tr:gi,bl:Gi,br:yi,tex:pt,writingMode:qe.writingMode,glyphOffset:oa,sectionIndex:$t.sectionIndex,isSDF:qt,pixelOffsetTL:Do,pixelOffsetBR:no,minFontScaleX:0,minFontScaleY:0})}return Xt}(0,s,S,m,y,x,h,o.allowVerticalPlacement),ke=o.textSizeData;let De=null;ke.kind==="source"?(De=[fs*m.layout.get("text-size").evaluate(x,{})],De[0]>ql&&ye(`${o.layerIds[0]}: Value for "text-size" is >= ${gd}. Reduce your "text-size".`)):ke.kind==="composite"&&(De=[fs*ue.compositeTextSizes[0].evaluate(x,{},ge),fs*ue.compositeTextSizes[1].evaluate(x,{},ge)],(De[0]>ql||De[1]>ql)&&ye(`${o.layerIds[0]}: Value for "text-size" is >= ${gd}. Reduce your "text-size".`)),o.addSymbols(o.text,Ee,De,S,y,x,F,r,C.lineStartIndex,C.lineLength,ne,ge);for(const et of V)Y[et]=o.text.placedSymbolArray.length-1;return 4*Ee.length}function JS(o){for(const r in o)return o[r];return null}function BF(o,r,s,h){const m=o.compareText;if(r in m){const y=m[r];for(let x=y.length-1;x>=0;x--)if(h.dist(y[x])<s)return!0}else m[r]=[];return m[r].push(h),!1}const QS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Rv{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const y=QS[15&h];if(!y)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new Rv(S,x,y,r)}constructor(r,s=64,h=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const y=QS.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-S%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+C,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+C),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+C,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=s,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return jv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:S}=this,C=[0,y.length-1,0],F=[];for(;C.length;){const V=C.pop()||0,Y=C.pop()||0,ne=C.pop()||0;if(Y-ne<=S){for(let ke=ne;ke<=Y;ke++){const De=x[2*ke],et=x[2*ke+1];De>=r&&De<=h&&et>=s&&et<=m&&F.push(y[ke])}continue}const ue=ne+Y>>1,ge=x[2*ue],Ee=x[2*ue+1];ge>=r&&ge<=h&&Ee>=s&&Ee<=m&&F.push(y[ue]),(V===0?r<=ge:s<=Ee)&&(C.push(ne),C.push(ue-1),C.push(1-V)),(V===0?h>=ge:m>=Ee)&&(C.push(ue+1),C.push(Y),C.push(1-V))}return F}within(r,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:x}=this,S=[0,m.length-1,0],C=[],F=h*h;for(;S.length;){const V=S.pop()||0,Y=S.pop()||0,ne=S.pop()||0;if(Y-ne<=x){for(let ke=ne;ke<=Y;ke++)tE(y[2*ke],y[2*ke+1],r,s)<=F&&C.push(m[ke]);continue}const ue=ne+Y>>1,ge=y[2*ue],Ee=y[2*ue+1];tE(ge,Ee,r,s)<=F&&C.push(m[ue]),(V===0?r-h<=ge:s-h<=Ee)&&(S.push(ne),S.push(ue-1),S.push(1-V)),(V===0?r+h>=ge:s+h>=Ee)&&(S.push(ue+1),S.push(Y),S.push(1-V))}return C}}function jv(o,r,s,h,m,y){if(m-h<=s)return;const x=h+m>>1;eE(o,r,x,h,m,y),jv(o,r,s,h,x-1,1-y),jv(o,r,s,x+1,m,1-y)}function eE(o,r,s,h,m,y){for(;m>h;){if(m-h>600){const F=m-h+1,V=s-h+1,Y=Math.log(F),ne=.5*Math.exp(2*Y/3),ue=.5*Math.sqrt(Y*ne*(F-ne)/F)*(V-F/2<0?-1:1);eE(o,r,s,Math.max(h,Math.floor(s-V*ne/F+ue)),Math.min(m,Math.floor(s+(F-V)*ne/F+ue)),y)}const x=r[2*s+y];let S=h,C=m;for(vd(o,r,h,s),r[2*m+y]>x&&vd(o,r,h,m);S<C;){for(vd(o,r,S,C),S++,C--;r[2*S+y]<x;)S++;for(;r[2*C+y]>x;)C--}r[2*h+y]===x?vd(o,r,h,C):(C++,vd(o,r,C,m)),C<=s&&(h=C+1),s<=C&&(m=C-1)}}function vd(o,r,s,h){zv(o,s,h),zv(r,2*s,2*h),zv(r,2*s+1,2*h+1)}function zv(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}function tE(o,r,s,h){const m=o-s,y=r-h;return m*m+y*y}var Lv;d.be=void 0,(Lv=d.be||(d.be={})).create="create",Lv.load="load",Lv.fullLoad="fullLoad";let Lm=null,_d=[];const Bv=1e3/60,Dv="loadTime",Nv="fullLoadTime",DF={mark(o){performance.mark(o)},frame(o){const r=o;Lm!=null&&_d.push(r-Lm),Lm=r},clearMetrics(){Lm=null,_d=[],performance.clearMeasures(Dv),performance.clearMeasures(Nv);for(const o in d.be)performance.clearMarks(d.be[o])},getPerformanceMetrics(){performance.measure(Dv,d.be.create,d.be.load),performance.measure(Nv,d.be.create,d.be.fullLoad);const o=performance.getEntriesByName(Dv)[0].duration,r=performance.getEntriesByName(Nv)[0].duration,s=_d.length,h=1/(_d.reduce((y,x)=>y+x,0)/s/1e3),m=_d.filter(y=>y>Bv).reduce((y,x)=>y+(x-Bv)/Bv,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};d.$=Gn,d.A=lh,d.B=function(o){if(he==null){const r=o.navigator?o.navigator.userAgent:null;he=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return he},d.C=class{constructor(o,r){this.target=o,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new CF(()=>this.process()),this.subscription=function(s,h,m,y){return s.addEventListener(h,m,!1),{unsubscribe:()=>{s.removeEventListener(h,m,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=oe(self)?o:window}registerMessageHandler(o,r){this.messageHandlers[o]=r}sendAsync(o,r){return new Promise((s,h)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:s,reject:h},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const S={id:m,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const y=[],x=Object.assign(Object.assign({},o),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Zu(o.data,y)});this.target.postMessage(x,{transfer:y})})}receive(o){const r=o.data,s=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(oe(self)||r.mustQueue)return this.tasks[s]=r,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,r)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){return u(this,void 0,void 0,function*(){if(r.type==="<response>"){const m=this.resolveRejects[o];return delete this.resolveRejects[o],m?void(r.error?m.reject(na(r.error)):m.resolve(na(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=na(r.data),h=new AbortController;this.abortControllers[o]=h;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,s,h);this.completeTask(o,null,m)}catch(m){this.completeTask(o,m)}})}completeTask(o,r,s){const h=[];delete this.abortControllers[o];const m={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Zu(r):null,data:Zu(s,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.D=Jt,d.E=ur,d.F=function(){var o=new lh(16);return lh!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},d.G=He,d.H=function(o,r,s){var h,m,y,x,S,C,F,V,Y,ne,ue,ge,Ee=s[0],ke=s[1],De=s[2];return r===o?(o[12]=r[0]*Ee+r[4]*ke+r[8]*De+r[12],o[13]=r[1]*Ee+r[5]*ke+r[9]*De+r[13],o[14]=r[2]*Ee+r[6]*ke+r[10]*De+r[14],o[15]=r[3]*Ee+r[7]*ke+r[11]*De+r[15]):(m=r[1],y=r[2],x=r[3],S=r[4],C=r[5],F=r[6],V=r[7],Y=r[8],ne=r[9],ue=r[10],ge=r[11],o[0]=h=r[0],o[1]=m,o[2]=y,o[3]=x,o[4]=S,o[5]=C,o[6]=F,o[7]=V,o[8]=Y,o[9]=ne,o[10]=ue,o[11]=ge,o[12]=h*Ee+S*ke+Y*De+r[12],o[13]=m*Ee+C*ke+ne*De+r[13],o[14]=y*Ee+F*ke+ue*De+r[14],o[15]=x*Ee+V*ke+ge*De+r[15]),o},d.I=wv,d.J=function(o,r,s){var h=s[0],m=s[1],y=s[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*m,o[5]=r[5]*m,o[6]=r[6]*m,o[7]=r[7]*m,o[8]=r[8]*y,o[9]=r[9]*y,o[10]=r[10]*y,o[11]=r[11]*y,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},d.K=j2,d.L=function(o,r){const s={};for(let h=0;h<r.length;h++){const m=r[h];m in o&&(s[m]=o[m])}return s},d.M=Xl,d.N=MS,d.O=kS,d.P=b,d.Q=Bo,d.R=Lo,d.S=K,d.T=Nl,d.U=Z,d.V=de,d.W=zn,d.X=W,d.Y=Om,d.Z=class extends be{},d._=u,d.a=Oe,d.a$=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},d.a0=kv,d.a1=k,d.a2=o=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(s=>{r.onloadstart=()=>{s(r)};for(const h of o){const m=window.document.createElement("source");Mt(h)||(r.crossOrigin="Anonymous"),m.src=h,r.appendChild(m)}})},d.a3=function(){return z++},d.a4=Sr,d.a5=ph,d.a6=jn,d.a7=Ju,d.a8=Kr,d.a9=LS,d.aA=function(o){if(o.type==="custom")return new IF(o);switch(o.type){case"background":return new TF(o);case"circle":return new f4(o);case"fill":return new C4(o);case"fill-extrusion":return new G4(o);case"heatmap":return new p4(o);case"hillshade":return new g4(o);case"line":return new J4(o);case"raster":return new AF(o);case"symbol":return new km(o)}},d.aB=q,d.aC=function(o,r){if(!o)return[{command:"setStyle",args:[r]}];let s=[];try{if(!Ht(o.version,r.version))return[{command:"setStyle",args:[r]}];Ht(o.center,r.center)||s.push({command:"setCenter",args:[r.center]}),Ht(o.zoom,r.zoom)||s.push({command:"setZoom",args:[r.zoom]}),Ht(o.bearing,r.bearing)||s.push({command:"setBearing",args:[r.bearing]}),Ht(o.pitch,r.pitch)||s.push({command:"setPitch",args:[r.pitch]}),Ht(o.sprite,r.sprite)||s.push({command:"setSprite",args:[r.sprite]}),Ht(o.glyphs,r.glyphs)||s.push({command:"setGlyphs",args:[r.glyphs]}),Ht(o.transition,r.transition)||s.push({command:"setTransition",args:[r.transition]}),Ht(o.light,r.light)||s.push({command:"setLight",args:[r.light]}),Ht(o.terrain,r.terrain)||s.push({command:"setTerrain",args:[r.terrain]}),Ht(o.sky,r.sky)||s.push({command:"setSky",args:[r.sky]}),Ht(o.projection,r.projection)||s.push({command:"setProjection",args:[r.projection]});const h={},m=[];(function(x,S,C,F){let V;for(V in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,V)&&(Object.prototype.hasOwnProperty.call(S,V)||D(V,C,F));for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&(Object.prototype.hasOwnProperty.call(x,V)?Ht(x[V],S[V])||(x[V].type==="geojson"&&S[V].type==="geojson"&&Xe(x,S,V)?Se(C,{command:"setGeoJSONSourceData",args:[V,S[V].data]}):xe(V,S,C,F)):N(V,S,C))})(o.sources,r.sources,m,h);const y=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):y.push(x)}),s=s.concat(m),function(x,S,C){S=S||[];const F=(x=x||[]).map(ht),V=S.map(ht),Y=x.reduce(le,{}),ne=S.reduce(le,{}),ue=F.slice(),ge=Object.create(null);let Ee,ke,De,et,qe;for(let Je=0,st=0;Je<F.length;Je++)Ee=F[Je],Object.prototype.hasOwnProperty.call(ne,Ee)?st++:(Se(C,{command:"removeLayer",args:[Ee]}),ue.splice(ue.indexOf(Ee,st),1));for(let Je=0,st=0;Je<V.length;Je++)Ee=V[V.length-1-Je],ue[ue.length-1-Je]!==Ee&&(Object.prototype.hasOwnProperty.call(Y,Ee)?(Se(C,{command:"removeLayer",args:[Ee]}),ue.splice(ue.lastIndexOf(Ee,ue.length-st),1)):st++,et=ue[ue.length-Je],Se(C,{command:"addLayer",args:[ne[Ee],et]}),ue.splice(ue.length-Je,0,Ee),ge[Ee]=!0);for(let Je=0;Je<V.length;Je++)if(Ee=V[Je],ke=Y[Ee],De=ne[Ee],!ge[Ee]&&!Ht(ke,De))if(Ht(ke.source,De.source)&&Ht(ke["source-layer"],De["source-layer"])&&Ht(ke.type,De.type)){for(qe in tt(ke.layout,De.layout,C,Ee,null,"setLayoutProperty"),tt(ke.paint,De.paint,C,Ee,null,"setPaintProperty"),Ht(ke.filter,De.filter)||Se(C,{command:"setFilter",args:[Ee,De.filter]}),Ht(ke.minzoom,De.minzoom)&&Ht(ke.maxzoom,De.maxzoom)||Se(C,{command:"setLayerZoomRange",args:[Ee,De.minzoom,De.maxzoom]}),ke)Object.prototype.hasOwnProperty.call(ke,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?tt(ke[qe],De[qe],C,Ee,qe.slice(6),"setPaintProperty"):Ht(ke[qe],De[qe])||Se(C,{command:"setLayerProperty",args:[Ee,qe,De[qe]]}));for(qe in De)Object.prototype.hasOwnProperty.call(De,qe)&&!Object.prototype.hasOwnProperty.call(ke,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?tt(ke[qe],De[qe],C,Ee,qe.slice(6),"setPaintProperty"):Ht(ke[qe],De[qe])||Se(C,{command:"setLayerProperty",args:[Ee,qe,De[qe]]}))}else Se(C,{command:"removeLayer",args:[Ee]}),et=ue[ue.lastIndexOf(Ee)+1],Se(C,{command:"addLayer",args:[De,et]})}(y,r.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[r]}]}return s},d.aD=function(o){const r=[],s=o.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},d.aE=function o(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],s[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const h in r)if(!o(r[h],s[h]))return!1;return!0}return r===s},d.aF=B,d.aG=Q,d.aH=class extends Xu{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},d.aI=ym,d.aJ=class extends Xu{constructor(o,r){super(o,r),this.current=i4}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},d.aK=E2,d.aL=class extends Xu{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},d.aM=class extends Xu{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},d.aN=T2,d.aO=function(o,r,s,h,m,y,x){var S=1/(r-s),C=1/(h-m),F=1/(y-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*C,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(r+s)*S,o[13]=(m+h)*C,o[14]=(x+y)*F,o[15]=1,o},d.aP=Mr,d.aQ=h4,d.aR=class extends gt{},d.aS=rF,d.aT=class extends Dt{},d.aU=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},d.aV=N2,d.aW=Zs,d.aX=class extends jt{},d.aY=Zn,d.aZ=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]&&o[4]===r[4]&&o[5]===r[5]&&o[6]===r[6]&&o[7]===r[7]&&o[8]===r[8]&&o[9]===r[9]&&o[10]===r[10]&&o[11]===r[11]&&o[12]===r[12]&&o[13]===r[13]&&o[14]===r[14]&&o[15]===r[15]},d.a_=function(o,r){var s=o[0],h=o[1],m=o[2],y=o[3],x=o[4],S=o[5],C=o[6],F=o[7],V=o[8],Y=o[9],ne=o[10],ue=o[11],ge=o[12],Ee=o[13],ke=o[14],De=o[15],et=r[0],qe=r[1],Je=r[2],st=r[3],xt=r[4],Ot=r[5],ir=r[6],zt=r[7],Ct=r[8],Xt=r[9],Vt=r[10],$t=r[11],pt=r[12],Qt=r[13],qt=r[14],fr=r[15];return Math.abs(s-et)<=Ni*Math.max(1,Math.abs(s),Math.abs(et))&&Math.abs(h-qe)<=Ni*Math.max(1,Math.abs(h),Math.abs(qe))&&Math.abs(m-Je)<=Ni*Math.max(1,Math.abs(m),Math.abs(Je))&&Math.abs(y-st)<=Ni*Math.max(1,Math.abs(y),Math.abs(st))&&Math.abs(x-xt)<=Ni*Math.max(1,Math.abs(x),Math.abs(xt))&&Math.abs(S-Ot)<=Ni*Math.max(1,Math.abs(S),Math.abs(Ot))&&Math.abs(C-ir)<=Ni*Math.max(1,Math.abs(C),Math.abs(ir))&&Math.abs(F-zt)<=Ni*Math.max(1,Math.abs(F),Math.abs(zt))&&Math.abs(V-Ct)<=Ni*Math.max(1,Math.abs(V),Math.abs(Ct))&&Math.abs(Y-Xt)<=Ni*Math.max(1,Math.abs(Y),Math.abs(Xt))&&Math.abs(ne-Vt)<=Ni*Math.max(1,Math.abs(ne),Math.abs(Vt))&&Math.abs(ue-$t)<=Ni*Math.max(1,Math.abs(ue),Math.abs($t))&&Math.abs(ge-pt)<=Ni*Math.max(1,Math.abs(ge),Math.abs(pt))&&Math.abs(Ee-Qt)<=Ni*Math.max(1,Math.abs(Ee),Math.abs(Qt))&&Math.abs(ke-qt)<=Ni*Math.max(1,Math.abs(ke),Math.abs(qt))&&Math.abs(De-fr)<=Ni*Math.max(1,Math.abs(De),Math.abs(fr))},d.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,y)=>{const x=m||y;return r[h]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},d.ab=function(o,r){const s=[];for(const h in o)h in r||s.push(h);return s},d.ac=X,d.ad=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),y=r[0],x=r[1],S=r[2],C=r[3],F=r[4],V=r[5],Y=r[6],ne=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=y*m+F*h,o[1]=x*m+V*h,o[2]=S*m+Y*h,o[3]=C*m+ne*h,o[4]=F*m-y*h,o[5]=V*m-x*h,o[6]=Y*m-S*h,o[7]=ne*m-C*h,o},d.ae=function(o){var r=new lh(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},d.af=wm,d.ag=function(o,r){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:x}=o,S=m?X(Si.interpolationFactor(m,r,y,x),0,1):0;o.kind==="camera"?h=Yn.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},d.ai=function(o,{uSize:r,uSizeT:s},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/fs:o.kind==="composite"?Yn.number(h/fs,m/fs,s):r},d.aj=Tv,d.ak=function(o,r,s,h){const m=r.y-o.y,y=r.x-o.x,x=h.y-s.y,S=h.x-s.x,C=x*y-S*m;if(C===0)return null;const F=(S*(o.y-s.y)-x*(o.x-s.x))/C;return new b(o.x+F*y,o.y+F*m)},d.al=$S,d.am=C2,d.an=ov,d.ao=function(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const y of o)r=Math.min(r,y.x),s=Math.min(s,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return[r,s,h,m]},d.ap=Wn,d.ar=Ev,d.as=function(o,r){var s=r[0],h=r[1],m=r[2],y=r[3],x=r[4],S=r[5],C=r[6],F=r[7],V=r[8],Y=r[9],ne=r[10],ue=r[11],ge=r[12],Ee=r[13],ke=r[14],De=r[15],et=s*S-h*x,qe=s*C-m*x,Je=s*F-y*x,st=h*C-m*S,xt=h*F-y*S,Ot=m*F-y*C,ir=V*Ee-Y*ge,zt=V*ke-ne*ge,Ct=V*De-ue*ge,Xt=Y*ke-ne*Ee,Vt=Y*De-ue*Ee,$t=ne*De-ue*ke,pt=et*$t-qe*Vt+Je*Xt+st*Ct-xt*zt+Ot*ir;return pt?(o[0]=(S*$t-C*Vt+F*Xt)*(pt=1/pt),o[1]=(m*Vt-h*$t-y*Xt)*pt,o[2]=(Ee*Ot-ke*xt+De*st)*pt,o[3]=(ne*xt-Y*Ot-ue*st)*pt,o[4]=(C*Ct-x*$t-F*zt)*pt,o[5]=(s*$t-m*Ct+y*zt)*pt,o[6]=(ke*Je-ge*Ot-De*qe)*pt,o[7]=(V*Ot-ne*Je+ue*qe)*pt,o[8]=(x*Vt-S*Ct+F*ir)*pt,o[9]=(h*Ct-s*Vt-y*ir)*pt,o[10]=(ge*xt-Ee*Je+De*et)*pt,o[11]=(Y*Je-V*xt-ue*et)*pt,o[12]=(S*zt-x*Xt-C*ir)*pt,o[13]=(s*Xt-h*zt+m*ir)*pt,o[14]=(Ee*qe-ge*st-ke*et)*pt,o[15]=(V*st-Y*qe+ne*et)*pt,o):null},d.at=Fv,d.au=Sv,d.av=Rv,d.aw=function(){const o={},r=it.$version;for(const s in it.$root){const h=it.$root[s];if(h.required){let m=null;m=s==="version"?r:h.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},d.ax=um,d.ay=ft,d.az=function(o){o=o.slice();const r=Object.create(null);for(let s=0;s<o.length;s++)r[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=cr(o[s],r[o[s].ref]));return o},d.b=J,d.b0=function(o,r,s){return o[0]=r[0]*s[0],o[1]=r[1]*s[1],o[2]=r[2]*s[2],o[3]=r[3]*s[3],o},d.b1=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},d.b2=U,d.b3=RS,d.b4=OS,d.b5=function(o,r,s,h,m){var y,x=1/Math.tan(r/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(y=1/(h-m)),o[14]=2*m*h*y):(o[10]=-1,o[14]=-2*h),o},d.b6=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),y=r[4],x=r[5],S=r[6],C=r[7],F=r[8],V=r[9],Y=r[10],ne=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=y*m+F*h,o[5]=x*m+V*h,o[6]=S*m+Y*h,o[7]=C*m+ne*h,o[8]=F*m-y*h,o[9]=V*m-x*h,o[10]=Y*m-S*h,o[11]=ne*m-C*h,o},d.b7=G,d.b8=ae,d.b9=function(o){return o*Math.PI/180},d.bA=Tt,d.bB=us,d.ba=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},d.bb=class extends me{},d.bc=Cv,d.bd=DF,d.bf=ot,d.bg=function(o,r){Oe.REGISTERED_PROTOCOLS[o]=r},d.bh=function(o){delete Oe.REGISTERED_PROTOCOLS[o]},d.bi=function(o,r){const s={};for(let m=0;m<o.length;m++){const y=r&&r[o[m].id]||K0(o[m]);r&&(r[o[m].id]=y);let x=s[y];x||(x=s[y]=[]),x.push(o[m])}const h=[];for(const m in s)h.push(s[m]);return h},d.bj=Ut,d.bk=zS,d.bl=BS,d.bm=mS,d.bn=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=zn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],s=r.layout,h=r._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new Kr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Kr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Kr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:V}=o.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Kr(F),o.canonical),h["text-size"].possiblyEvaluate(new Kr(V),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:V}=o.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Kr(F),o.canonical),h["icon-size"].possiblyEvaluate(new Kr(V),o.canonical)]}const y=s.get("text-line-height")*Wn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),C=s.get("text-size");for(const F of o.bucket.features){const V=s.get("text-font").evaluate(F,{},o.canonical).join(","),Y=C.evaluate(F,{},o.canonical),ne=m.layoutTextSize.evaluate(F,{},o.canonical),ue=m.layoutIconSize.evaluate(F,{},o.canonical),ge={horizontal:{},vertical:void 0},Ee=F.text;let ke,De=[0,0];if(Ee){const Je=Ee.toString(),st=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*Wn,xt=J0(Je)?st:0,Ot=s.get("text-anchor").evaluate(F,{},o.canonical),ir=KS(r,F,o.canonical);if(!ir){const Vt=s.get("text-radial-offset").evaluate(F,{},o.canonical);De=Vt?XS(Ot,[Vt*Wn,Ov]):s.get("text-offset").evaluate(F,{},o.canonical).map($t=>$t*Wn)}let zt=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const Ct=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*Wn:1/0,Xt=()=>{o.bucket.allowVerticalPlacement&&Xf(Je)&&(ge.vertical=Im(Ee,o.glyphMap,o.glyphPositions,o.imagePositions,V,Ct,y,Ot,"left",xt,De,d.ah.vertical,!0,ne,Y))};if(!x&&ir){const Vt=new Set;if(zt==="auto")for(let pt=0;pt<ir.values.length;pt+=2)Vt.add(Fv(ir.values[pt]));else Vt.add(zt);let $t=!1;for(const pt of Vt)if(!ge.horizontal[pt])if($t)ge.horizontal[pt]=ge.horizontal[0];else{const Qt=Im(Ee,o.glyphMap,o.glyphPositions,o.imagePositions,V,Ct,y,"center",pt,xt,De,d.ah.horizontal,!1,ne,Y);Qt&&(ge.horizontal[pt]=Qt,$t=Qt.positionedLines.length===1)}Xt()}else{zt==="auto"&&(zt=Fv(Ot));const Vt=Im(Ee,o.glyphMap,o.glyphPositions,o.imagePositions,V,Ct,y,Ot,zt,xt,De,d.ah.horizontal,!1,ne,Y);Vt&&(ge.horizontal[zt]=Vt),Xt(),Xf(Je)&&x&&S&&(ge.vertical=Im(Ee,o.glyphMap,o.glyphPositions,o.imagePositions,V,Ct,y,Ot,zt,xt,De,d.ah.vertical,!1,ne,Y))}}let et=!1;if(F.icon&&F.icon.name){const Je=o.imageMap[F.icon.name];Je&&(ke=xF(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),et=!!Je.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=et:o.bucket.sdfIcons!==et&&ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Je.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const qe=JS(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!qe&&qe.iconsInText,(qe||ke)&&LF(o.bucket,F,ge,ke,o.imageMap,m,ne,ue,De,et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},d.bo=yv,d.bp=pv,d.bq=gv,d.br=Hl,d.bs=_v,d.bt=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},d.bu=function(o,r,s,h,m){return u(this,void 0,void 0,function*(){if(Z())try{return yield de(o,r,s,h,m)}catch{}return function(y,x,S,C,F){const V=y.width,Y=y.height;we&&Pe||(we=new OffscreenCanvas(V,Y),Pe=we.getContext("2d",{willReadFrequently:!0})),we.width=V,we.height=Y,Pe.drawImage(y,0,0,V,Y);const ne=Pe.getImageData(x,S,C,F);return Pe.clearRect(0,0,V,Y),ne.data}(o,r,s,h,m)})},d.bv=jS,d.bw=w,d.bx=E,d.by=aS,d.bz=function(o){return o.message===Ne},d.c=Ie,d.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(r)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=P,d.f=o=>new Promise((r,s)=>{const h=new Image;h.onload=()=>{r(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=re})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(m):re}),d.g=Ze,d.h=(o,r)=>_t(P(o,{type:"json"}),r),d.i=oe,d.j=Lt,d.k=Wt,d.l=(o,r)=>_t(P(o,{type:"arrayBuffer"}),r),d.m=_t,d.n=function(o){return new _v(o).readFields(dF,[])},d.o=sd,d.p=pS,d.q=p,d.r=Y0,d.s=Mt,d.t=qf,d.u=Bt,d.v=it,d.w=ye,d.x=Wu,d.y=function([o,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(s),y:o*Math.sin(r)*Math.sin(s),z:o*Math.cos(s)}},d.z=Yn}),l("worker",["./shared"],function(d){class u{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,ce){for(const Fe of ie){this._layerConfigs[Fe.id]=Fe;const Be=this._layers[Fe.id]=d.aA(Fe);Be._featureFilter=d.a6(Be.filter),this.keyCache[Fe.id]&&delete this.keyCache[Fe.id]}for(const Fe of ce)delete this.keyCache[Fe],delete this._layerConfigs[Fe],delete this._layers[Fe];this.familiesBySource={};const pe=d.bi(Object.values(this._layerConfigs),this.keyCache);for(const Fe of pe){const Be=Fe.map(ut=>this._layers[ut.id]),je=Be[0];if(je.visibility==="none")continue;const Ue=je.source||"";let ze=this.familiesBySource[Ue];ze||(ze=this.familiesBySource[Ue]={});const Qe=je.sourceLayer||"_geojsonTileLayer";let dt=ze[Qe];dt||(dt=ze[Qe]=[]),dt.push(Be)}}}class w{constructor(ie){const ce={},pe=[];for(const Ue in ie){const ze=ie[Ue],Qe=ce[Ue]={};for(const dt in ze){const ut=ze[+dt];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const ct={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};pe.push(ct),Qe[dt]={rect:ct,metrics:ut.metrics}}}const{w:Fe,h:Be}=d.p(pe),je=new d.o({width:Fe||1,height:Be||1});for(const Ue in ie){const ze=ie[Ue];for(const Qe in ze){const dt=ze[+Qe];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const ut=ce[Ue][Qe].rect;d.o.copy(dt.bitmap,je,{x:0,y:0},{x:ut.x+1,y:ut.y+1},dt.bitmap)}}this.image=je,this.positions=ce}}d.bj("GlyphAtlas",w);class E{constructor(ie){this.tileID=new d.Q(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,ce,pe,Fe){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new d.a4;const Be=new d.bk(Object.keys(ie.layers).sort()),je=new d.bl(this.tileID,this.promoteId);je.bucketLayerIDs=[];const Ue={},ze={featureIndex:je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pe},Qe=ce.familiesBySource[this.source];for(const mr in Qe){const en=ie.layers[mr];if(!en)continue;en.version===1&&d.w(`Vector tile source "${this.source}" layer "${mr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const En=Be.encode(mr),ii=[];for(let bi=0;bi<en.length;bi++){const Tn=en.feature(bi),Ha=je.getId(Tn,mr);ii.push({feature:Tn,id:Ha,index:bi,sourceLayerIndex:En})}for(const bi of Qe[mr]){const Tn=bi[0];Tn.source!==this.source&&d.w(`layer.source = ${Tn.source} does not equal this.source = ${this.source}`),Tn.minzoom&&this.zoom<Math.floor(Tn.minzoom)||Tn.maxzoom&&this.zoom>=Tn.maxzoom||Tn.visibility!=="none"&&(I(bi,this.zoom,pe),(Ue[Tn.id]=Tn.createBucket({index:je.bucketLayerIDs.length,layers:bi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:En,sourceID:this.source})).populate(ii,ze,this.tileID.canonical),je.bucketLayerIDs.push(bi.map(Ha=>Ha.id)))}}const dt=d.aF(ze.glyphDependencies,mr=>Object.keys(mr).map(Number));this.inFlightDependencies.forEach(mr=>mr==null?void 0:mr.abort()),this.inFlightDependencies=[];let ut=Promise.resolve({});if(Object.keys(dt).length){const mr=new AbortController;this.inFlightDependencies.push(mr),ut=Fe.sendAsync({type:"GG",data:{stacks:dt,source:this.source,tileID:this.tileID,type:"glyphs"}},mr)}const ct=Object.keys(ze.iconDependencies);let rr=Promise.resolve({});if(ct.length){const mr=new AbortController;this.inFlightDependencies.push(mr),rr=Fe.sendAsync({type:"GI",data:{icons:ct,source:this.source,tileID:this.tileID,type:"icons"}},mr)}const Kt=Object.keys(ze.patternDependencies);let Er=Promise.resolve({});if(Kt.length){const mr=new AbortController;this.inFlightDependencies.push(mr),Er=Fe.sendAsync({type:"GI",data:{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"}},mr)}const[lr,Tr,Dr]=yield Promise.all([ut,rr,Er]),Vr=new w(lr),un=new d.bm(Tr,Dr);for(const mr in Ue){const en=Ue[mr];en instanceof d.a5?(I(en.layers,this.zoom,pe),d.bn({bucket:en,glyphMap:lr,glyphPositions:Vr.positions,imageMap:Tr,imagePositions:un.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):en.hasPattern&&(en instanceof d.bo||en instanceof d.bp||en instanceof d.bq)&&(I(en.layers,this.zoom,pe),en.addFeatures(ze,this.tileID.canonical,un.patternPositions))}return this.status="done",{buckets:Object.values(Ue).filter(mr=>!mr.isEmpty()),featureIndex:je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vr.image,imageAtlas:un,glyphMap:this.returnDependencies?lr:null,iconMap:this.returnDependencies?Tr:null,glyphPositions:this.returnDependencies?Vr.positions:null}})}}function I(Me,ie,ce){const pe=new d.a8(ie);for(const Fe of Me)Fe.recalculate(pe,ce)}class b{constructor(ie,ce,pe){this.actor=ie,this.layerIndex=ce,this.availableImages=pe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,ce){return d._(this,void 0,void 0,function*(){const pe=yield d.l(ie.request,ce);try{return{vectorTile:new d.br.VectorTile(new d.bs(pe.data)),rawData:pe.data,cacheControl:pe.cacheControl,expires:pe.expires}}catch(Fe){const Be=new Uint8Array(pe.data);let je=`Unable to parse the tile at ${ie.request.url}, `;throw je+=Be[0]===31&&Be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Fe.message}`,new Error(je)}})}loadTile(ie){return d._(this,void 0,void 0,function*(){const ce=ie.uid,pe=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new d.bt(ie.request),Fe=new E(ie);this.loading[ce]=Fe;const Be=new AbortController;Fe.abort=Be;try{const je=yield this.loadVectorTile(ie,Be);if(delete this.loading[ce],!je)return null;const Ue=je.rawData,ze={};je.expires&&(ze.expires=je.expires),je.cacheControl&&(ze.cacheControl=je.cacheControl);const Qe={};if(pe){const ut=pe.finish();ut&&(Qe.resourceTiming=JSON.parse(JSON.stringify(ut)))}Fe.vectorTile=je.vectorTile;const dt=Fe.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ce]=Fe,this.fetching[ce]={rawTileData:Ue,cacheControl:ze,resourceTiming:Qe};try{const ut=yield dt;return d.e({rawTileData:Ue.slice(0)},ut,ze,Qe)}finally{delete this.fetching[ce]}}catch(je){throw delete this.loading[ce],Fe.status="done",this.loaded[ce]=Fe,je}})}reloadTile(ie){return d._(this,void 0,void 0,function*(){const ce=ie.uid;if(!this.loaded||!this.loaded[ce])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const pe=this.loaded[ce];if(pe.showCollisionBoxes=ie.showCollisionBoxes,pe.status==="parsing"){const Fe=yield pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor);let Be;if(this.fetching[ce]){const{rawTileData:je,cacheControl:Ue,resourceTiming:ze}=this.fetching[ce];delete this.fetching[ce],Be=d.e({rawTileData:je.slice(0)},Fe,Ue,ze)}else Be=Fe;return Be}if(pe.status==="done"&&pe.vectorTile)return pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ie){return d._(this,void 0,void 0,function*(){const ce=this.loading,pe=ie.uid;ce&&ce[pe]&&ce[pe].abort&&(ce[pe].abort.abort(),delete ce[pe])})}removeTile(ie){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]})}}class T{constructor(){this.loaded={}}loadTile(ie){return d._(this,void 0,void 0,function*(){const{uid:ce,encoding:pe,rawImageData:Fe,redFactor:Be,greenFactor:je,blueFactor:Ue,baseShift:ze}=ie,Qe=Fe.width+2,dt=Fe.height+2,ut=d.b(Fe)?new d.R({width:Qe,height:dt},yield d.bu(Fe,-1,-1,Qe,dt)):Fe,ct=new d.bv(ce,ut,pe,Be,je,Ue,ze);return this.loaded=this.loaded||{},this.loaded[ce]=ct,ct})}removeTile(ie){const ce=this.loaded,pe=ie.uid;ce&&ce[pe]&&delete ce[pe]}}function R(Me,ie){if(Me.length!==0){L(Me[0],ie);for(var ce=1;ce<Me.length;ce++)L(Me[ce],!ie)}}function L(Me,ie){for(var ce=0,pe=0,Fe=0,Be=Me.length,je=Be-1;Fe<Be;je=Fe++){var Ue=(Me[Fe][0]-Me[je][0])*(Me[je][1]+Me[Fe][1]),ze=ce+Ue;pe+=Math.abs(ce)>=Math.abs(Ue)?ce-ze+Ue:Ue-ze+ce,ce=ze}ce+pe>=0!=!!ie&&Me.reverse()}var j=d.bw(function Me(ie,ce){var pe,Fe=ie&&ie.type;if(Fe==="FeatureCollection")for(pe=0;pe<ie.features.length;pe++)Me(ie.features[pe],ce);else if(Fe==="GeometryCollection")for(pe=0;pe<ie.geometries.length;pe++)Me(ie.geometries[pe],ce);else if(Fe==="Feature")Me(ie.geometry,ce);else if(Fe==="Polygon")R(ie.coordinates,ce);else if(Fe==="MultiPolygon")for(pe=0;pe<ie.coordinates.length;pe++)R(ie.coordinates[pe],ce);return ie});const se=d.br.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},Z=d.bx,G=d.br.VectorTileFeature,ae=X;function X(Me,ie){this.options=ie||{},this.features=Me,this.length=Me.length}function U(Me,ie){this.id=typeof Me.id=="number"?Me.id:void 0,this.type=Me.type,this.rawGeometry=Me.type===1?[Me.geometry]:Me.geometry,this.properties=Me.tags,this.extent=ie||4096}X.prototype.feature=function(Me){return new U(this.features[Me],this.options.extent)},U.prototype.loadGeometry=function(){var Me=this.rawGeometry;this.geometry=[];for(var ie=0;ie<Me.length;ie++){for(var ce=Me[ie],pe=[],Fe=0;Fe<ce.length;Fe++)pe.push(new Z(ce[Fe][0],ce[Fe][1]));this.geometry.push(pe)}return this.geometry},U.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Me=this.geometry,ie=1/0,ce=-1/0,pe=1/0,Fe=-1/0,Be=0;Be<Me.length;Be++)for(var je=Me[Be],Ue=0;Ue<je.length;Ue++){var ze=je[Ue];ie=Math.min(ie,ze.x),ce=Math.max(ce,ze.x),pe=Math.min(pe,ze.y),Fe=Math.max(Fe,ze.y)}return[ie,pe,ce,Fe]},U.prototype.toGeoJSON=G.prototype.toGeoJSON;var P=d.by,z=ae;function B(Me){var ie=new P;return function(ce,pe){for(var Fe in ce.layers)pe.writeMessage(3,Q,ce.layers[Fe])}(Me,ie),ie.finish()}function Q(Me,ie){var ce;ie.writeVarintField(15,Me.version||1),ie.writeStringField(1,Me.name||""),ie.writeVarintField(5,Me.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(ce=0;ce<Me.length;ce++)pe.feature=Me.feature(ce),ie.writeMessage(2,q,pe);var Fe=pe.keys;for(ce=0;ce<Fe.length;ce++)ie.writeStringField(3,Fe[ce]);var Be=pe.values;for(ce=0;ce<Be.length;ce++)ie.writeMessage(4,he,Be[ce])}function q(Me,ie){var ce=Me.feature;ce.id!==void 0&&ie.writeVarintField(1,ce.id),ie.writeMessage(2,ve,Me),ie.writeVarintField(3,ce.type),ie.writeMessage(4,oe,ce)}function ve(Me,ie){var ce=Me.feature,pe=Me.keys,Fe=Me.values,Be=Me.keycache,je=Me.valuecache;for(var Ue in ce.properties){var ze=ce.properties[Ue],Qe=Be[Ue];if(ze!==null){Qe===void 0&&(pe.push(Ue),Be[Ue]=Qe=pe.length-1),ie.writeVarint(Qe);var dt=typeof ze;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(ze=JSON.stringify(ze));var ut=dt+":"+ze,ct=je[ut];ct===void 0&&(Fe.push(ze),je[ut]=ct=Fe.length-1),ie.writeVarint(ct)}}}function ye(Me,ie){return(ie<<3)+(7&Me)}function fe(Me){return Me<<1^Me>>31}function oe(Me,ie){for(var ce=Me.loadGeometry(),pe=Me.type,Fe=0,Be=0,je=ce.length,Ue=0;Ue<je;Ue++){var ze=ce[Ue],Qe=1;pe===1&&(Qe=ze.length),ie.writeVarint(ye(1,Qe));for(var dt=pe===3?ze.length-1:ze.length,ut=0;ut<dt;ut++){ut===1&&pe!==1&&ie.writeVarint(ye(2,dt-1));var ct=ze[ut].x-Fe,rr=ze[ut].y-Be;ie.writeVarint(fe(ct)),ie.writeVarint(fe(rr)),Fe+=ct,Be+=rr}pe===3&&ie.writeVarint(ye(7,1))}}function he(Me,ie){var ce=typeof Me;ce==="string"?ie.writeStringField(1,Me):ce==="boolean"?ie.writeBooleanField(7,Me):ce==="number"&&(Me%1!=0?ie.writeDoubleField(3,Me):Me<0?ie.writeSVarintField(6,Me):ie.writeVarintField(5,Me))}K.exports=B,K.exports.fromVectorTileJs=B,K.exports.fromGeojsonVt=function(Me,ie){ie=ie||{};var ce={};for(var pe in Me)ce[pe]=new z(Me[pe].features,ie),ce[pe].name=pe,ce[pe].version=ie.version,ce[pe].extent=ie.extent;return B({layers:ce})},K.exports.GeoJSONWrapper=z;var J=d.bw(K.exports);const re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Me=>Me},de=Math.fround||(we=new Float32Array(1),Me=>(we[0]=+Me,we[0]));var we;const Pe=3,Ne=5,Ie=6;class Oe{constructor(ie){this.options=Object.assign(Object.create(re),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:ce,minZoom:pe,maxZoom:Fe}=this.options;ce&&console.time("total time");const Be=`prepare ${ie.length} points`;ce&&console.time(Be),this.points=ie;const je=[];for(let ze=0;ze<ie.length;ze++){const Qe=ie[ze];if(!Qe.geometry)continue;const[dt,ut]=Qe.geometry.coordinates,ct=de(ot(dt)),rr=de(ft(ut));je.push(ct,rr,1/0,ze,-1,1),this.options.reduce&&je.push(0)}let Ue=this.trees[Fe+1]=this._createTree(je);ce&&console.timeEnd(Be);for(let ze=Fe;ze>=pe;ze--){const Qe=+Date.now();Ue=this.trees[ze]=this._createTree(this._cluster(Ue,ze)),ce&&console.log("z%d: %d clusters in %dms",ze,Ue.numItems,+Date.now()-Qe)}return ce&&console.timeEnd("total time"),this}getClusters(ie,ce){let pe=((ie[0]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,ie[1]));let Be=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)pe=-180,Be=180;else if(pe>Be){const ut=this.getClusters([pe,Fe,180,je],ce),ct=this.getClusters([-180,Fe,Be,je],ce);return ut.concat(ct)}const Ue=this.trees[this._limitZoom(ce)],ze=Ue.range(ot(pe),ft(je),ot(Be),ft(Fe)),Qe=Ue.data,dt=[];for(const ut of ze){const ct=this.stride*ut;dt.push(Qe[ct+Ne]>1?Ze(Qe,ct,this.clusterProps):this.points[Qe[ct+Pe]])}return dt}getChildren(ie){const ce=this._getOriginId(ie),pe=this._getOriginZoom(ie),Fe="No cluster with the specified id.",Be=this.trees[pe];if(!Be)throw new Error(Fe);const je=Be.data;if(ce*this.stride>=je.length)throw new Error(Fe);const Ue=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),ze=Be.within(je[ce*this.stride],je[ce*this.stride+1],Ue),Qe=[];for(const dt of ze){const ut=dt*this.stride;je[ut+4]===ie&&Qe.push(je[ut+Ne]>1?Ze(je,ut,this.clusterProps):this.points[je[ut+Pe]])}if(Qe.length===0)throw new Error(Fe);return Qe}getLeaves(ie,ce,pe){const Fe=[];return this._appendLeaves(Fe,ie,ce=ce||10,pe=pe||0,0),Fe}getTile(ie,ce,pe){const Fe=this.trees[this._limitZoom(ie)],Be=Math.pow(2,ie),{extent:je,radius:Ue}=this.options,ze=Ue/je,Qe=(pe-ze)/Be,dt=(pe+1+ze)/Be,ut={features:[]};return this._addTileFeatures(Fe.range((ce-ze)/Be,Qe,(ce+1+ze)/Be,dt),Fe.data,ce,pe,Be,ut),ce===0&&this._addTileFeatures(Fe.range(1-ze/Be,Qe,1,dt),Fe.data,Be,pe,Be,ut),ce===Be-1&&this._addTileFeatures(Fe.range(0,Qe,ze/Be,dt),Fe.data,-1,pe,Be,ut),ut.features.length?ut:null}getClusterExpansionZoom(ie){let ce=this._getOriginZoom(ie)-1;for(;ce<=this.options.maxZoom;){const pe=this.getChildren(ie);if(ce++,pe.length!==1)break;ie=pe[0].properties.cluster_id}return ce}_appendLeaves(ie,ce,pe,Fe,Be){const je=this.getChildren(ce);for(const Ue of je){const ze=Ue.properties;if(ze&&ze.cluster?Be+ze.point_count<=Fe?Be+=ze.point_count:Be=this._appendLeaves(ie,ze.cluster_id,pe,Fe,Be):Be<Fe?Be++:ie.push(Ue),ie.length===pe)break}return Be}_createTree(ie){const ce=new d.av(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pe=0;pe<ie.length;pe+=this.stride)ce.add(ie[pe],ie[pe+1]);return ce.finish(),ce.data=ie,ce}_addTileFeatures(ie,ce,pe,Fe,Be,je){for(const Ue of ie){const ze=Ue*this.stride,Qe=ce[ze+Ne]>1;let dt,ut,ct;if(Qe)dt=He(ce,ze,this.clusterProps),ut=ce[ze],ct=ce[ze+1];else{const Er=this.points[ce[ze+Pe]];dt=Er.properties;const[lr,Tr]=Er.geometry.coordinates;ut=ot(lr),ct=ft(Tr)}const rr={type:1,geometry:[[Math.round(this.options.extent*(ut*Be-pe)),Math.round(this.options.extent*(ct*Be-Fe))]],tags:dt};let Kt;Kt=Qe||this.options.generateId?ce[ze+Pe]:this.points[ce[ze+Pe]].id,Kt!==void 0&&(rr.id=Kt),je.features.push(rr)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,ce){const{radius:pe,extent:Fe,reduce:Be,minPoints:je}=this.options,Ue=pe/(Fe*Math.pow(2,ce)),ze=ie.data,Qe=[],dt=this.stride;for(let ut=0;ut<ze.length;ut+=dt){if(ze[ut+2]<=ce)continue;ze[ut+2]=ce;const ct=ze[ut],rr=ze[ut+1],Kt=ie.within(ze[ut],ze[ut+1],Ue),Er=ze[ut+Ne];let lr=Er;for(const Tr of Kt){const Dr=Tr*dt;ze[Dr+2]>ce&&(lr+=ze[Dr+Ne])}if(lr>Er&&lr>=je){let Tr,Dr=ct*Er,Vr=rr*Er,un=-1;const mr=((ut/dt|0)<<5)+(ce+1)+this.points.length;for(const en of Kt){const En=en*dt;if(ze[En+2]<=ce)continue;ze[En+2]=ce;const ii=ze[En+Ne];Dr+=ze[En]*ii,Vr+=ze[En+1]*ii,ze[En+4]=mr,Be&&(Tr||(Tr=this._map(ze,ut,!0),un=this.clusterProps.length,this.clusterProps.push(Tr)),Be(Tr,this._map(ze,En)))}ze[ut+4]=mr,Qe.push(Dr/lr,Vr/lr,1/0,mr,-1,lr),Be&&Qe.push(un)}else{for(let Tr=0;Tr<dt;Tr++)Qe.push(ze[ut+Tr]);if(lr>1)for(const Tr of Kt){const Dr=Tr*dt;if(!(ze[Dr+2]<=ce)){ze[Dr+2]=ce;for(let Vr=0;Vr<dt;Vr++)Qe.push(ze[Dr+Vr])}}}}return Qe}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,ce,pe){if(ie[ce+Ne]>1){const je=this.clusterProps[ie[ce+Ie]];return pe?Object.assign({},je):je}const Fe=this.points[ie[ce+Pe]].properties,Be=this.options.map(Fe);return pe&&Be===Fe?Object.assign({},Be):Be}}function Ze(Me,ie,ce){return{type:"Feature",id:Me[ie+Pe],properties:He(Me,ie,ce),geometry:{type:"Point",coordinates:[(pe=Me[ie],360*(pe-.5)),_t(Me[ie+1])]}};var pe}function He(Me,ie,ce){const pe=Me[ie+Ne],Fe=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe,Be=Me[ie+Ie],je=Be===-1?{}:Object.assign({},ce[Be]);return Object.assign(je,{cluster:!0,cluster_id:Me[ie+Pe],point_count:pe,point_count_abbreviated:Fe})}function ot(Me){return Me/360+.5}function ft(Me){const ie=Math.sin(Me*Math.PI/180),ce=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ce<0?0:ce>1?1:ce}function _t(Me){const ie=(180-360*Me)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function Mt(Me,ie,ce,pe){for(var Fe,Be=pe,je=ce-ie>>1,Ue=ce-ie,ze=Me[ie],Qe=Me[ie+1],dt=Me[ce],ut=Me[ce+1],ct=ie+3;ct<ce;ct+=3){var rr=mt(Me[ct],Me[ct+1],ze,Qe,dt,ut);if(rr>Be)Fe=ct,Be=rr;else if(rr===Be){var Kt=Math.abs(ct-je);Kt<Ue&&(Fe=ct,Ue=Kt)}}Be>pe&&(Fe-ie>3&&Mt(Me,ie,Fe,pe),Me[Fe+2]=Be,ce-Fe>3&&Mt(Me,Fe,ce,pe))}function mt(Me,ie,ce,pe,Fe,Be){var je=Fe-ce,Ue=Be-pe;if(je!==0||Ue!==0){var ze=((Me-ce)*je+(ie-pe)*Ue)/(je*je+Ue*Ue);ze>1?(ce=Fe,pe=Be):ze>0&&(ce+=je*ze,pe+=Ue*ze)}return(je=Me-ce)*je+(Ue=ie-pe)*Ue}function wt(Me,ie,ce,pe){var Fe={id:Me===void 0?null:Me,type:ie,geometry:ce,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Be){var je=Be.geometry,Ue=Be.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")Wt(Be,je);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var ze=0;ze<je.length;ze++)Wt(Be,je[ze]);else if(Ue==="MultiPolygon")for(ze=0;ze<je.length;ze++)for(var Qe=0;Qe<je[ze].length;Qe++)Wt(Be,je[ze][Qe])}(Fe),Fe}function Wt(Me,ie){for(var ce=0;ce<ie.length;ce+=3)Me.minX=Math.min(Me.minX,ie[ce]),Me.minY=Math.min(Me.minY,ie[ce+1]),Me.maxX=Math.max(Me.maxX,ie[ce]),Me.maxY=Math.max(Me.maxY,ie[ce+1])}function Lt(Me,ie,ce,pe){if(ie.geometry){var Fe=ie.geometry.coordinates,Be=ie.geometry.type,je=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2),Ue=[],ze=ie.id;if(ce.promoteId?ze=ie.properties[ce.promoteId]:ce.generateId&&(ze=pe||0),Be==="Point")ur(Fe,Ue);else if(Be==="MultiPoint")for(var Qe=0;Qe<Fe.length;Qe++)ur(Fe[Qe],Ue);else if(Be==="LineString")it(Fe,Ue,je,!1);else if(Be==="MultiLineString"){if(ce.lineMetrics){for(Qe=0;Qe<Fe.length;Qe++)it(Fe[Qe],Ue=[],je,!1),Me.push(wt(ze,"LineString",Ue,ie.properties));return}wr(Fe,Ue,je,!1)}else if(Be==="Polygon")wr(Fe,Ue,je,!0);else{if(Be!=="MultiPolygon"){if(Be==="GeometryCollection"){for(Qe=0;Qe<ie.geometry.geometries.length;Qe++)Lt(Me,{id:ze,geometry:ie.geometry.geometries[Qe],properties:ie.properties},ce,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qe=0;Qe<Fe.length;Qe++){var dt=[];wr(Fe[Qe],dt,je,!0),Ue.push(dt)}}Me.push(wt(ze,Be,Ue,ie.properties))}}function ur(Me,ie){ie.push(cr(Me[0])),ie.push(Ht(Me[1])),ie.push(0)}function it(Me,ie,ce,pe){for(var Fe,Be,je=0,Ue=0;Ue<Me.length;Ue++){var ze=cr(Me[Ue][0]),Qe=Ht(Me[Ue][1]);ie.push(ze),ie.push(Qe),ie.push(0),Ue>0&&(je+=pe?(Fe*Qe-ze*Be)/2:Math.sqrt(Math.pow(ze-Fe,2)+Math.pow(Qe-Be,2))),Fe=ze,Be=Qe}var dt=ie.length-3;ie[2]=1,Mt(ie,0,dt,ce),ie[dt+2]=1,ie.size=Math.abs(je),ie.start=0,ie.end=ie.size}function wr(Me,ie,ce,pe){for(var Fe=0;Fe<Me.length;Fe++){var Be=[];it(Me[Fe],Be,ce,pe),ie.push(Be)}}function cr(Me){return Me/360+.5}function Ht(Me){var ie=Math.sin(Me*Math.PI/180),ce=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ce<0?0:ce>1?1:ce}function Se(Me,ie,ce,pe,Fe,Be,je,Ue){if(pe/=ie,Be>=(ce/=ie)&&je<pe)return Me;if(je<ce||Be>=pe)return null;for(var ze=[],Qe=0;Qe<Me.length;Qe++){var dt=Me[Qe],ut=dt.geometry,ct=dt.type,rr=Fe===0?dt.minX:dt.minY,Kt=Fe===0?dt.maxX:dt.maxY;if(rr>=ce&&Kt<pe)ze.push(dt);else if(!(Kt<ce||rr>=pe)){var Er=[];if(ct==="Point"||ct==="MultiPoint")N(ut,Er,ce,pe,Fe);else if(ct==="LineString")D(ut,Er,ce,pe,Fe,!1,Ue.lineMetrics);else if(ct==="MultiLineString")Xe(ut,Er,ce,pe,Fe,!1);else if(ct==="Polygon")Xe(ut,Er,ce,pe,Fe,!0);else if(ct==="MultiPolygon")for(var lr=0;lr<ut.length;lr++){var Tr=[];Xe(ut[lr],Tr,ce,pe,Fe,!0),Tr.length&&Er.push(Tr)}if(Er.length){if(Ue.lineMetrics&&ct==="LineString"){for(lr=0;lr<Er.length;lr++)ze.push(wt(dt.id,ct,Er[lr],dt.tags));continue}ct!=="LineString"&&ct!=="MultiLineString"||(Er.length===1?(ct="LineString",Er=Er[0]):ct="MultiLineString"),ct!=="Point"&&ct!=="MultiPoint"||(ct=Er.length===3?"Point":"MultiPoint"),ze.push(wt(dt.id,ct,Er,dt.tags))}}}return ze.length?ze:null}function N(Me,ie,ce,pe,Fe){for(var Be=0;Be<Me.length;Be+=3){var je=Me[Be+Fe];je>=ce&&je<=pe&&(ie.push(Me[Be]),ie.push(Me[Be+1]),ie.push(Me[Be+2]))}}function D(Me,ie,ce,pe,Fe,Be,je){for(var Ue,ze,Qe=xe(Me),dt=Fe===0?ht:le,ut=Me.start,ct=0;ct<Me.length-3;ct+=3){var rr=Me[ct],Kt=Me[ct+1],Er=Me[ct+2],lr=Me[ct+3],Tr=Me[ct+4],Dr=Fe===0?rr:Kt,Vr=Fe===0?lr:Tr,un=!1;je&&(Ue=Math.sqrt(Math.pow(rr-lr,2)+Math.pow(Kt-Tr,2))),Dr<ce?Vr>ce&&(ze=dt(Qe,rr,Kt,lr,Tr,ce),je&&(Qe.start=ut+Ue*ze)):Dr>pe?Vr<pe&&(ze=dt(Qe,rr,Kt,lr,Tr,pe),je&&(Qe.start=ut+Ue*ze)):tt(Qe,rr,Kt,Er),Vr<ce&&Dr>=ce&&(ze=dt(Qe,rr,Kt,lr,Tr,ce),un=!0),Vr>pe&&Dr<=pe&&(ze=dt(Qe,rr,Kt,lr,Tr,pe),un=!0),!Be&&un&&(je&&(Qe.end=ut+Ue*ze),ie.push(Qe),Qe=xe(Me)),je&&(ut+=Ue)}var mr=Me.length-3;rr=Me[mr],Kt=Me[mr+1],Er=Me[mr+2],(Dr=Fe===0?rr:Kt)>=ce&&Dr<=pe&&tt(Qe,rr,Kt,Er),mr=Qe.length-3,Be&&mr>=3&&(Qe[mr]!==Qe[0]||Qe[mr+1]!==Qe[1])&&tt(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&ie.push(Qe)}function xe(Me){var ie=[];return ie.size=Me.size,ie.start=Me.start,ie.end=Me.end,ie}function Xe(Me,ie,ce,pe,Fe,Be){for(var je=0;je<Me.length;je++)D(Me[je],ie,ce,pe,Fe,Be,!1)}function tt(Me,ie,ce,pe){Me.push(ie),Me.push(ce),Me.push(pe)}function ht(Me,ie,ce,pe,Fe,Be){var je=(Be-ie)/(pe-ie);return Me.push(Be),Me.push(ce+(Fe-ce)*je),Me.push(1),je}function le(Me,ie,ce,pe,Fe,Be){var je=(Be-ce)/(Fe-ce);return Me.push(ie+(pe-ie)*je),Me.push(Be),Me.push(1),je}function k(Me,ie){for(var ce=[],pe=0;pe<Me.length;pe++){var Fe,Be=Me[pe],je=Be.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")Fe=$(Be.geometry,ie);else if(je==="MultiLineString"||je==="Polygon"){Fe=[];for(var Ue=0;Ue<Be.geometry.length;Ue++)Fe.push($(Be.geometry[Ue],ie))}else if(je==="MultiPolygon")for(Fe=[],Ue=0;Ue<Be.geometry.length;Ue++){for(var ze=[],Qe=0;Qe<Be.geometry[Ue].length;Qe++)ze.push($(Be.geometry[Ue][Qe],ie));Fe.push(ze)}ce.push(wt(Be.id,je,Fe,Be.tags))}return ce}function $(Me,ie){var ce=[];ce.size=Me.size,Me.start!==void 0&&(ce.start=Me.start,ce.end=Me.end);for(var pe=0;pe<Me.length;pe+=3)ce.push(Me[pe]+ie,Me[pe+1],Me[pe+2]);return ce}function Te(Me,ie){if(Me.transformed)return Me;var ce,pe,Fe,Be=1<<Me.z,je=Me.x,Ue=Me.y;for(ce=0;ce<Me.features.length;ce++){var ze=Me.features[ce],Qe=ze.geometry,dt=ze.type;if(ze.geometry=[],dt===1)for(pe=0;pe<Qe.length;pe+=2)ze.geometry.push(We(Qe[pe],Qe[pe+1],ie,Be,je,Ue));else for(pe=0;pe<Qe.length;pe++){var ut=[];for(Fe=0;Fe<Qe[pe].length;Fe+=2)ut.push(We(Qe[pe][Fe],Qe[pe][Fe+1],ie,Be,je,Ue));ze.geometry.push(ut)}}return Me.transformed=!0,Me}function We(Me,ie,ce,pe,Fe,Be){return[Math.round(ce*(Me*pe-Fe)),Math.round(ce*(ie*pe-Be))]}function nt(Me,ie,ce,pe,Fe){for(var Be=ie===Fe.maxZoom?0:Fe.tolerance/((1<<ie)*Fe.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ce,y:pe,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<Me.length;Ue++){je.numFeatures++,Ve(je,Me[Ue],Be,Fe);var ze=Me[Ue].minX,Qe=Me[Ue].minY,dt=Me[Ue].maxX,ut=Me[Ue].maxY;ze<je.minX&&(je.minX=ze),Qe<je.minY&&(je.minY=Qe),dt>je.maxX&&(je.maxX=dt),ut>je.maxY&&(je.maxY=ut)}return je}function Ve(Me,ie,ce,pe){var Fe=ie.geometry,Be=ie.type,je=[];if(Be==="Point"||Be==="MultiPoint")for(var Ue=0;Ue<Fe.length;Ue+=3)je.push(Fe[Ue]),je.push(Fe[Ue+1]),Me.numPoints++,Me.numSimplified++;else if(Be==="LineString")Et(je,Fe,Me,ce,!1,!1);else if(Be==="MultiLineString"||Be==="Polygon")for(Ue=0;Ue<Fe.length;Ue++)Et(je,Fe[Ue],Me,ce,Be==="Polygon",Ue===0);else if(Be==="MultiPolygon")for(var ze=0;ze<Fe.length;ze++){var Qe=Fe[ze];for(Ue=0;Ue<Qe.length;Ue++)Et(je,Qe[Ue],Me,ce,!0,Ue===0)}if(je.length){var dt=ie.tags||null;if(Be==="LineString"&&pe.lineMetrics){for(var ut in dt={},ie.tags)dt[ut]=ie.tags[ut];dt.mapbox_clip_start=Fe.start/Fe.size,dt.mapbox_clip_end=Fe.end/Fe.size}var ct={geometry:je,type:Be==="Polygon"||Be==="MultiPolygon"?3:Be==="LineString"||Be==="MultiLineString"?2:1,tags:dt};ie.id!==null&&(ct.id=ie.id),Me.features.push(ct)}}function Et(Me,ie,ce,pe,Fe,Be){var je=pe*pe;if(pe>0&&ie.size<(Fe?je:pe))ce.numPoints+=ie.length/3;else{for(var Ue=[],ze=0;ze<ie.length;ze+=3)(pe===0||ie[ze+2]>je)&&(ce.numSimplified++,Ue.push(ie[ze]),Ue.push(ie[ze+1])),ce.numPoints++;Fe&&function(Qe,dt){for(var ut=0,ct=0,rr=Qe.length,Kt=rr-2;ct<rr;Kt=ct,ct+=2)ut+=(Qe[ct]-Qe[Kt])*(Qe[ct+1]+Qe[Kt+1]);if(ut>0===dt)for(ct=0,rr=Qe.length;ct<rr/2;ct+=2){var Er=Qe[ct],lr=Qe[ct+1];Qe[ct]=Qe[rr-2-ct],Qe[ct+1]=Qe[rr-1-ct],Qe[rr-2-ct]=Er,Qe[rr-1-ct]=lr}}(Ue,Be),Me.push(Ue)}}function Ft(Me,ie){var ce=(ie=this.options=function(Fe,Be){for(var je in Be)Fe[je]=Be[je];return Fe}(Object.create(this.options),ie)).debug;if(ce&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var pe=function(Fe,Be){var je=[];if(Fe.type==="FeatureCollection")for(var Ue=0;Ue<Fe.features.length;Ue++)Lt(je,Fe.features[Ue],Be,Ue);else Lt(je,Fe.type==="Feature"?Fe:{geometry:Fe},Be);return je}(Me,ie);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Fe,Be){var je=Be.buffer/Be.extent,Ue=Fe,ze=Se(Fe,1,-1-je,je,0,-1,2,Be),Qe=Se(Fe,1,1-je,2+je,0,-1,2,Be);return(ze||Qe)&&(Ue=Se(Fe,1,-je,1+je,0,-1,2,Be)||[],ze&&(Ue=k(ze,1).concat(Ue)),Qe&&(Ue=Ue.concat(k(Qe,-1)))),Ue}(pe,ie),pe.length&&this.splitTile(pe,0,0,0),ce&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pr(Me,ie,ce){return 32*((1<<Me)*ce+ie)+Me}function br(Me,ie){return ie?Me.properties[ie]:Me.id}function Rt(Me,ie){if(Me==null)return!0;if(Me.type==="Feature")return br(Me,ie)!=null;if(Me.type==="FeatureCollection"){const ce=new Set;for(const pe of Me.features){const Fe=br(pe,ie);if(Fe==null||ce.has(Fe))return!1;ce.add(Fe)}return!0}return!1}function $n(Me,ie){const ce=new Map;if(Me!=null)if(Me.type==="Feature")ce.set(br(Me,ie),Me);else for(const pe of Me.features)ce.set(br(pe,ie),pe);return ce}Ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ft.prototype.splitTile=function(Me,ie,ce,pe,Fe,Be,je){for(var Ue=[Me,ie,ce,pe],ze=this.options,Qe=ze.debug;Ue.length;){pe=Ue.pop(),ce=Ue.pop(),ie=Ue.pop(),Me=Ue.pop();var dt=1<<ie,ut=pr(ie,ce,pe),ct=this.tiles[ut];if(!ct&&(Qe>1&&console.time("creation"),ct=this.tiles[ut]=nt(Me,ie,ce,pe,ze),this.tileCoords.push({z:ie,x:ce,y:pe}),Qe)){Qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,ce,pe,ct.numFeatures,ct.numPoints,ct.numSimplified),console.timeEnd("creation"));var rr="z"+ie;this.stats[rr]=(this.stats[rr]||0)+1,this.total++}if(ct.source=Me,Fe){if(ie===ze.maxZoom||ie===Fe)continue;var Kt=1<<Fe-ie;if(ce!==Math.floor(Be/Kt)||pe!==Math.floor(je/Kt))continue}else if(ie===ze.indexMaxZoom||ct.numPoints<=ze.indexMaxPoints)continue;if(ct.source=null,Me.length!==0){Qe>1&&console.time("clipping");var Er,lr,Tr,Dr,Vr,un,mr=.5*ze.buffer/ze.extent,en=.5-mr,En=.5+mr,ii=1+mr;Er=lr=Tr=Dr=null,Vr=Se(Me,dt,ce-mr,ce+En,0,ct.minX,ct.maxX,ze),un=Se(Me,dt,ce+en,ce+ii,0,ct.minX,ct.maxX,ze),Me=null,Vr&&(Er=Se(Vr,dt,pe-mr,pe+En,1,ct.minY,ct.maxY,ze),lr=Se(Vr,dt,pe+en,pe+ii,1,ct.minY,ct.maxY,ze),Vr=null),un&&(Tr=Se(un,dt,pe-mr,pe+En,1,ct.minY,ct.maxY,ze),Dr=Se(un,dt,pe+en,pe+ii,1,ct.minY,ct.maxY,ze),un=null),Qe>1&&console.timeEnd("clipping"),Ue.push(Er||[],ie+1,2*ce,2*pe),Ue.push(lr||[],ie+1,2*ce,2*pe+1),Ue.push(Tr||[],ie+1,2*ce+1,2*pe),Ue.push(Dr||[],ie+1,2*ce+1,2*pe+1)}}},Ft.prototype.getTile=function(Me,ie,ce){var pe=this.options,Fe=pe.extent,Be=pe.debug;if(Me<0||Me>24)return null;var je=1<<Me,Ue=pr(Me,ie=(ie%je+je)%je,ce);if(this.tiles[Ue])return Te(this.tiles[Ue],Fe);Be>1&&console.log("drilling down to z%d-%d-%d",Me,ie,ce);for(var ze,Qe=Me,dt=ie,ut=ce;!ze&&Qe>0;)Qe--,dt=Math.floor(dt/2),ut=Math.floor(ut/2),ze=this.tiles[pr(Qe,dt,ut)];return ze&&ze.source?(Be>1&&console.log("found parent tile z%d-%d-%d",Qe,dt,ut),Be>1&&console.time("drilling down"),this.splitTile(ze.source,Qe,dt,ut,Me,ie,ce),Be>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Te(this.tiles[Ue],Fe):null):null};class ni extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,ce){return d._(this,void 0,void 0,function*(){const pe=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Fe=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);if(!Fe)return null;const Be=new class{constructor(Ue){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.W,this.length=Ue.length,this._features=Ue}feature(Ue){return new class{constructor(ze){this._feature=ze,this.extent=d.W,this.type=ze.type,this.properties=ze.tags,"id"in ze&&!isNaN(ze.id)&&(this.id=parseInt(ze.id,10))}loadGeometry(){if(this._feature.type===1){const ze=[];for(const Qe of this._feature.geometry)ze.push([new d.P(Qe[0],Qe[1])]);return ze}{const ze=[];for(const Qe of this._feature.geometry){const dt=[];for(const ut of Qe)dt.push(new d.P(ut[0],ut[1]));ze.push(dt)}return ze}}toGeoJSON(ze,Qe,dt){return se.call(this,ze,Qe,dt)}}(this._features[Ue])}}(Fe.features);let je=J(Be);return je.byteOffset===0&&je.byteLength===je.buffer.byteLength||(je=new Uint8Array(je)),{vectorTile:Be,rawData:je.buffer}})}loadData(ie){return d._(this,void 0,void 0,function*(){var ce;(ce=this._pendingRequest)===null||ce===void 0||ce.abort();const pe=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new d.bt(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest),this._geoJSONIndex=ie.cluster?new Oe(function({superclusterOptions:Be,clusterProperties:je}){if(!je||!Be)return Be;const Ue={},ze={},Qe={accumulated:null,zoom:0},dt={properties:null},ut=Object.keys(je);for(const ct of ut){const[rr,Kt]=je[ct],Er=d.bA(Kt),lr=d.bA(typeof rr=="string"?[rr,["accumulated"],["get",ct]]:rr);Ue[ct]=Er.value,ze[ct]=lr.value}return Be.map=ct=>{dt.properties=ct;const rr={};for(const Kt of ut)rr[Kt]=Ue[Kt].evaluate(Qe,dt);return rr},Be.reduce=(ct,rr)=>{dt.properties=rr;for(const Kt of ut)Qe.accumulated=ct[Kt],ct[Kt]=ze[Kt].evaluate(Qe,dt)},Be}(ie)).load((yield this._pendingData).features):new Ft(yield this._pendingData,ie.geojsonVtOptions),this.loaded={};const Fe={};if(pe){const Be=pe.finish();Be&&(Fe.resourceTiming={},Fe.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Be)))}return Fe}catch(Fe){if(delete this._pendingRequest,d.bz(Fe))return{abandoned:!0};throw Fe}})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ie){const ce=this.loaded;return ce&&ce[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,ce){return d._(this,void 0,void 0,function*(){let pe=yield this.loadGeoJSON(ie,ce);if(delete this._pendingRequest,typeof pe!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(j(pe,!0),ie.filter){const Fe=d.bA(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(je=>`${je.key}: ${je.message}`).join(", "));pe={type:"FeatureCollection",features:pe.features.filter(je=>Fe.value.evaluate({zoom:0},je))}}return pe})}loadGeoJSON(ie,ce){return d._(this,void 0,void 0,function*(){const{promoteId:pe}=ie;if(ie.request){const Fe=yield d.h(ie.request,ce);return this._dataUpdateable=Rt(Fe.data,pe)?$n(Fe.data,pe):void 0,Fe.data}if(typeof ie.data=="string")try{const Fe=JSON.parse(ie.data);return this._dataUpdateable=Rt(Fe,pe)?$n(Fe,pe):void 0,Fe}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return function(Fe,Be,je){var Ue,ze,Qe,dt;if(Be.removeAll&&Fe.clear(),Be.remove)for(const ut of Be.remove)Fe.delete(ut);if(Be.add)for(const ut of Be.add){const ct=br(ut,je);ct!=null&&Fe.set(ct,ut)}if(Be.update)for(const ut of Be.update){let ct=Fe.get(ut.id);if(ct==null)continue;const rr=!ut.removeAllProperties&&(((Ue=ut.removeProperties)===null||Ue===void 0?void 0:Ue.length)>0||((ze=ut.addOrUpdateProperties)===null||ze===void 0?void 0:ze.length)>0);if((ut.newGeometry||ut.removeAllProperties||rr)&&(ct=Object.assign({},ct),Fe.set(ut.id,ct),rr&&(ct.properties=Object.assign({},ct.properties))),ut.newGeometry&&(ct.geometry=ut.newGeometry),ut.removeAllProperties)ct.properties={};else if(((Qe=ut.removeProperties)===null||Qe===void 0?void 0:Qe.length)>0)for(const Kt of ut.removeProperties)Object.prototype.hasOwnProperty.call(ct.properties,Kt)&&delete ct.properties[Kt];if(((dt=ut.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:Kt,value:Er}of ut.addOrUpdateProperties)ct.properties[Kt]=Er}}(this._dataUpdateable,ie.dataDiff,pe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ie){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class ln{constructor(ie){this.self=ie,this.actor=new d.C(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ce,pe)=>{if(this.externalWorkerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.externalWorkerSourceTypes[ce]=pe},this.self.addProtocol=d.bg,this.self.removeProtocol=d.bh,this.self.registerRTLTextPlugin=ce=>{if(d.bB.isParsed())throw new Error("RTL text plugin already registered.");d.bB.setMethods(ce)},this.actor.registerMessageHandler("LDT",(ce,pe)=>this._getDEMWorkerSource(ce,pe.source).loadTile(pe)),this.actor.registerMessageHandler("RDT",(ce,pe)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ce,pe.source).removeTile(pe)})),this.actor.registerMessageHandler("GCEZ",(ce,pe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,pe.type,pe.source).getClusterExpansionZoom(pe)})),this.actor.registerMessageHandler("GCC",(ce,pe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,pe.type,pe.source).getClusterChildren(pe)})),this.actor.registerMessageHandler("GCL",(ce,pe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,pe.type,pe.source).getClusterLeaves(pe)})),this.actor.registerMessageHandler("LD",(ce,pe)=>this._getWorkerSource(ce,pe.type,pe.source).loadData(pe)),this.actor.registerMessageHandler("GD",(ce,pe)=>this._getWorkerSource(ce,pe.type,pe.source).getData()),this.actor.registerMessageHandler("LT",(ce,pe)=>this._getWorkerSource(ce,pe.type,pe.source).loadTile(pe)),this.actor.registerMessageHandler("RT",(ce,pe)=>this._getWorkerSource(ce,pe.type,pe.source).reloadTile(pe)),this.actor.registerMessageHandler("AT",(ce,pe)=>this._getWorkerSource(ce,pe.type,pe.source).abortTile(pe)),this.actor.registerMessageHandler("RMT",(ce,pe)=>this._getWorkerSource(ce,pe.type,pe.source).removeTile(pe)),this.actor.registerMessageHandler("RS",(ce,pe)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[ce]||!this.workerSources[ce][pe.type]||!this.workerSources[ce][pe.type][pe.source])return;const Fe=this.workerSources[ce][pe.type][pe.source];delete this.workerSources[ce][pe.type][pe.source],Fe.removeSource!==void 0&&Fe.removeSource(pe)})),this.actor.registerMessageHandler("RM",ce=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[ce],delete this.availableImages[ce],delete this.workerSources[ce],delete this.demWorkerSources[ce]})),this.actor.registerMessageHandler("SR",(ce,pe)=>d._(this,void 0,void 0,function*(){this.referrer=pe})),this.actor.registerMessageHandler("SRPS",(ce,pe)=>this._syncRTLPluginState(ce,pe)),this.actor.registerMessageHandler("IS",(ce,pe)=>d._(this,void 0,void 0,function*(){this.self.importScripts(pe)})),this.actor.registerMessageHandler("SI",(ce,pe)=>this._setImages(ce,pe)),this.actor.registerMessageHandler("UL",(ce,pe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ce).update(pe.layers,pe.removedIds)})),this.actor.registerMessageHandler("SL",(ce,pe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ce).replace(pe)}))}_setImages(ie,ce){return d._(this,void 0,void 0,function*(){this.availableImages[ie]=ce;for(const pe in this.workerSources[ie]){const Fe=this.workerSources[ie][pe];for(const Be in Fe)Fe[Be].availableImages=ce}})}_syncRTLPluginState(ie,ce){return d._(this,void 0,void 0,function*(){if(d.bB.isParsed())return d.bB.getState();if(ce.pluginStatus!=="loading")return d.bB.setState(ce),ce;const pe=ce.pluginURL;if(this.self.importScripts(pe),d.bB.isParsed()){const Fe={pluginStatus:"loaded",pluginURL:pe};return d.bB.setState(Fe),Fe}throw d.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${pe}`)})}_getAvailableImages(ie){let ce=this.availableImages[ie];return ce||(ce=[]),ce}_getLayerIndex(ie){let ce=this.layerIndexes[ie];return ce||(ce=this.layerIndexes[ie]=new u),ce}_getWorkerSource(ie,ce,pe){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][ce]||(this.workerSources[ie][ce]={}),!this.workerSources[ie][ce][pe]){const Fe={sendAsync:(Be,je)=>(Be.targetMapId=ie,this.actor.sendAsync(Be,je))};switch(ce){case"vector":this.workerSources[ie][ce][pe]=new b(Fe,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][ce][pe]=new ni(Fe,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][ce][pe]=new this.externalWorkerSourceTypes[ce](Fe,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][ce][pe]}_getDEMWorkerSource(ie,ce){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][ce]||(this.demWorkerSources[ie][ce]=new T),this.demWorkerSources[ie][ce]}}return d.i(self)&&(self.worker=new ln(self)),ln}),l("index",["exports","./shared"],function(d,u){var w="4.4.1";let E,I;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((n,c)=>{const p=requestAnimationFrame(n);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),c(u.c())})}),getImageData(v,n=0){return this.getImageCanvasContext(v).getImageData(-n,-n,v.width+2*n,v.height+2*n)},getImageCanvasContext(v){const n=window.document.createElement("canvas"),c=n.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return n.width=v.width,n.height=v.height,c.drawImage(v,0,0,v.width,v.height),c},resolveURL:v=>(E||(E=document.createElement("a")),E.href=v,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class T{static testProp(n){if(!T.docStyle)return n[0];for(let c=0;c<n.length;c++)if(n[c]in T.docStyle)return n[c];return n[0]}static create(n,c,p){const g=window.document.createElement(n);return c!==void 0&&(g.className=c),p&&p.appendChild(g),g}static createNS(n,c){return window.document.createElementNS(n,c)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(n,c){n.style[T.transformProp]=c}static addEventListener(n,c,p,g={}){n.addEventListener(c,p,"passive"in g?g:g.capture)}static removeEventListener(n,c,p,g={}){n.removeEventListener(c,p,"passive"in g?g:g.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(n){const c=n.getBoundingClientRect();return{x:c.width/n.offsetWidth||1,y:c.height/n.offsetHeight||1,boundingClientRect:c}}static getPoint(n,c,p){const g=c.boundingClientRect;return new u.P((p.clientX-g.left)/c.x-n.clientLeft,(p.clientY-g.top)/c.y-n.clientTop)}static mousePos(n,c){const p=T.getScale(n);return T.getPoint(n,p,c)}static touchPos(n,c){const p=[],g=T.getScale(n);for(let _=0;_<c.length;_++)p.push(T.getPoint(n,g,c[_]));return p}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!se&&j&&(K?Z(v):L=v)}};let L,j,se=!1,K=!1;function Z(v){const n=v.createTexture();v.bindTexture(v.TEXTURE_2D,n);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,j),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(n),se=!0}var G;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{L&&Z(L),L=null,K=!0},j.onerror=()=>{se=!0,L=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let n,c,p,g;v.resetRequestQueue=()=>{n=[],c=0,p=0,g={}},v.addThrottleControl=O=>{const W=p++;return g[W]=O,W},v.removeThrottleControl=O=>{delete g[O],A()},v.getImage=(O,W,te=!0)=>new Promise((ee,me)=>{R.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),u.e(O,{type:"image"}),n.push({abortController:W,requestParameters:O,supportImageRefresh:te,state:"queued",onError:be=>{me(be)},onSuccess:be=>{ee(be)}}),A()});const _=O=>u._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:W,supportImageRefresh:te,onError:ee,onSuccess:me,abortController:be}=O,Ae=te===!1&&!u.i(self)&&!u.g(W.url)&&(!W.headers||Object.keys(W.headers).reduce((Ge,Ke)=>Ge&&Ke==="accept",!0));c++;const Le=Ae?M(W,be):u.m(W,be);try{const Ge=yield Le;delete O.abortController,O.state="completed",Ge.data instanceof HTMLImageElement||u.b(Ge.data)?me(Ge):Ge.data&&me({data:yield(Ce=Ge.data,typeof createImageBitmap=="function"?u.d(Ce):u.f(Ce)),cacheControl:Ge.cacheControl,expires:Ge.expires})}catch(Ge){delete O.abortController,ee(Ge)}finally{c--,A()}var Ce}),A=()=>{const O=(()=>{for(const W of Object.keys(g))if(g[W]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let W=c;W<O&&n.length>0;W++){const te=n.shift();te.abortController.signal.aborted?W--:_(te)}},M=(O,W)=>new Promise((te,ee)=>{const me=new Image,be=O.url,Ae=O.credentials;Ae&&Ae==="include"?me.crossOrigin="use-credentials":(Ae&&Ae==="same-origin"||!u.s(be))&&(me.crossOrigin="anonymous"),W.signal.addEventListener("abort",()=>{me.src="",ee(u.c())}),me.fetchPriority="high",me.onload=()=>{me.onerror=me.onload=null,te({data:me})},me.onerror=()=>{me.onerror=me.onload=null,W.signal.aborted||ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},me.src=be})}(G||(G={})),G.resetRequestQueue();class ae{constructor(n){this._transformRequestFn=n}transformRequest(n,c){return this._transformRequestFn&&this._transformRequestFn(n,c)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function X(v){var n=new u.A(3);return n[0]=v[0],n[1]=v[1],n[2]=v[2],n}var U,P=function(v,n,c){return v[0]=n[0]-c[0],v[1]=n[1]-c[1],v[2]=n[2]-c[2],v};U=new u.A(3),u.A!=Float32Array&&(U[0]=0,U[1]=0,U[2]=0);var z=function(v){var n=v[0],c=v[1];return n*n+c*c};function B(v){const n=[];if(typeof v=="string")n.push({id:"default",url:v});else if(v&&v.length>0){const c=[];for(const{id:p,url:g}of v){const _=`${p}${g}`;c.indexOf(_)===-1&&(c.push(_),n.push({id:p,url:g}))}}return n}function Q(v,n,c){const p=v.split("?");return p[0]+=`${n}${c}`,p.join("?")}(function(){var v=new u.A(2);u.A!=Float32Array&&(v[0]=0,v[1]=0)})();class q{constructor(n,c,p,g){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(c,g)}update(n,c,p){const{width:g,height:_}=n,A=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:M}=this,{gl:O}=M;if(this.useMipmap=!!(c&&c.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!c||c.premultiply!==!1)),A)this.size=[g,_],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.b(n)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,n):O.texImage2D(O.TEXTURE_2D,0,this.format,g,_,0,this.format,O.UNSIGNED_BYTE,n.data);else{const{x:W,y:te}=p||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.b(n)?O.texSubImage2D(O.TEXTURE_2D,0,W,te,O.RGBA,O.UNSIGNED_BYTE,n):O.texSubImage2D(O.TEXTURE_2D,0,W,te,g,_,O.RGBA,O.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(n,c,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),n!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,n),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||n),this.filter=n),c!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,c),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ve(v){const{userImage:n}=v;return!!(n&&n.render&&n.render())&&(v.data.replace(new Uint8Array(n.data.buffer)),!0)}class ye extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(n){const c=this.images[n];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(n,c){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,c)&&(this.images[n]=c)}_validate(n,c){let p=!0;const g=c.data||c.spriteData;return this._validateStretch(c.stretchX,g&&g.width)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,g&&g.height)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "content" value`))),p=!1),p}_validateStretch(n,c){if(!n)return!0;let p=0;for(const g of n){if(g[0]<p||g[1]<g[0]||c<g[1])return!1;p=g[1]}return!0}_validateContent(n,c){if(!n)return!0;if(n.length!==4)return!1;const p=c.spriteData,g=p&&p.width||c.data.width,_=p&&p.height||c.data.height;return!(n[0]<0||g<n[0]||n[1]<0||_<n[1]||n[2]<0||g<n[2]||n[3]<0||_<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,c,p=!0){const g=this.getImage(n);if(p&&(g.data.width!==c.data.width||g.data.height!==c.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=g.version+1,this.images[n]=c,this.updatedImages[n]=!0}removeImage(n){const c=this.images[n];delete this.images[n],delete this.patterns[n],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((c,p)=>{let g=!0;if(!this.isLoaded())for(const _ of n)this.images[_]||(g=!1);this.isLoaded()||g?c(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:c})})}_getImagesForIds(n){const c={};for(const p of n){let g=this.getImage(p);g||(this.fire(new u.k("styleimagemissing",{id:p})),g=this.getImage(p)),g?c[p]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:n,height:c}=this.atlasImage;return{width:n,height:c}}getPattern(n){const c=this.patterns[n],p=this.getImage(n);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new u.I(g,p);this.patterns[n]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const c=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(n,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const _ in this.patterns)n.push(this.patterns[_].bin);const{w:c,h:p}=u.p(n),g=this.atlasImage;g.resize({width:c||1,height:p||1});for(const _ in this.patterns){const{bin:A}=this.patterns[_],M=A.x+1,O=A.y+1,W=this.getImage(_).data,te=W.width,ee=W.height;u.R.copy(W,g,{x:0,y:0},{x:M,y:O},{width:te,height:ee}),u.R.copy(W,g,{x:0,y:ee-1},{x:M,y:O-1},{width:te,height:1}),u.R.copy(W,g,{x:0,y:0},{x:M,y:O+ee},{width:te,height:1}),u.R.copy(W,g,{x:te-1,y:0},{x:M-1,y:O},{width:1,height:ee}),u.R.copy(W,g,{x:0,y:0},{x:M+te,y:O},{width:1,height:ee})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const c of n){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||u.w(`Image with ID: "${c}" was not found`),ve(p)&&this.updateImage(c,p)}}}const fe=1e20;function oe(v,n,c,p,g,_,A,M,O){for(let W=n;W<n+p;W++)he(v,c*_+W,_,g,A,M,O);for(let W=c;W<c+g;W++)he(v,W*_+n,1,p,A,M,O)}function he(v,n,c,p,g,_,A){_[0]=0,A[0]=-fe,A[1]=fe,g[0]=v[n];for(let M=1,O=0,W=0;M<p;M++){g[M]=v[n+M*c];const te=M*M;do{const ee=_[O];W=(g[M]-g[ee]+te-ee*ee)/(M-ee)/2}while(W<=A[O]&&--O>-1);O++,_[O]=M,A[O]=W,A[O+1]=fe}for(let M=0,O=0;M<p;M++){for(;A[O+1]<M;)O++;const W=_[O],te=M-W;v[n+M*c]=g[W]+te*te}}class J{constructor(n,c){this.requestManager=n,this.localIdeographFontFamily=c,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return u._(this,void 0,void 0,function*(){const c=[];for(const _ in n)for(const A of n[_])c.push(this._getAndCacheGlyphsPromise(_,A));const p=yield Promise.all(c),g={};for(const{stack:_,id:A,glyph:M}of p)g[_]||(g[_]={}),g[_][A]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return g})}_getAndCacheGlyphsPromise(n,c){return u._(this,void 0,void 0,function*(){let p=this.entries[n];p||(p=this.entries[n]={glyphs:{},requests:{},ranges:{}});let g=p.glyphs[c];if(g!==void 0)return{stack:n,id:c,glyph:g};if(g=this._tinySDF(p,n,c),g)return p.glyphs[c]=g,{stack:n,id:c,glyph:g};const _=Math.floor(c/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[_])return{stack:n,id:c,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[_]){const M=J.loadGlyphRange(n,_,this.url,this.requestManager);p.requests[_]=M}const A=yield p.requests[_];for(const M in A)this._doesCharSupportLocalGlyph(+M)||(p.glyphs[+M]=A[+M]);return p.ranges[_]=!0,{stack:n,id:c,glyph:A[c]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](n)||u.u["Hangul Syllables"](n)||u.u.Hiragana(n)||u.u.Katakana(n))}_tinySDF(n,c,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=n.tinySDF;if(!_){let M="400";/bold/i.test(c)?M="900":/medium/i.test(c)?M="500":/light/i.test(c)&&(M="200"),_=n.tinySDF=new J.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:M})}const A=_.draw(String.fromCharCode(p));return{id:p,bitmap:new u.o({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}J.loadGlyphRange=function(v,n,c,p){return u._(this,void 0,void 0,function*(){const g=256*n,_=g+255,A=p.transformRequest(c.replace("{fontstack}",v).replace("{range}",`${g}-${_}`),"Glyphs"),M=yield u.l(A,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${n}, ${g}-${_}`);const O={};for(const W of u.n(M.data))O[W.id]=W;return O})},J.TinySDF=class{constructor({fontSize:v=24,buffer:n=3,radius:c=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:A="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=c;const M=this.size=v+4*n,O=this._createCanvas(M),W=this.ctx=O.getContext("2d",{willReadFrequently:!0});W.font=`${A} ${_} ${v}px ${g}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(v){const n=document.createElement("canvas");return n.width=n.height=v,n}draw(v){const{width:n,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(v),A=Math.ceil(c),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),O=Math.min(this.size-this.buffer,A+Math.ceil(p)),W=M+2*this.buffer,te=O+2*this.buffer,ee=Math.max(W*te,0),me=new Uint8ClampedArray(ee),be={data:me,width:W,height:te,glyphWidth:M,glyphHeight:O,glyphTop:A,glyphLeft:0,glyphAdvance:n};if(M===0||O===0)return be;const{ctx:Ae,buffer:Le,gridInner:Ce,gridOuter:Ge}=this;Ae.clearRect(Le,Le,M,O),Ae.fillText(v,Le,Le+A);const Ke=Ae.getImageData(Le,Le,M,O);Ge.fill(fe,0,ee),Ce.fill(0,0,ee);for(let Re=0;Re<O;Re++)for(let Ye=0;Ye<M;Ye++){const rt=Ke.data[4*(Re*M+Ye)+3]/255;if(rt===0)continue;const at=(Re+Le)*W+Ye+Le;if(rt===1)Ge[at]=0,Ce[at]=fe;else{const gt=.5-rt;Ge[at]=gt>0?gt*gt:0,Ce[at]=gt<0?gt*gt:0}}oe(Ge,0,0,W,te,W,this.f,this.v,this.z),oe(Ce,Le,Le,M,O,W,this.f,this.v,this.z);for(let Re=0;Re<ee;Re++){const Ye=Math.sqrt(Ge[Re])-Math.sqrt(Ce[Re]);me[Re]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return be}};class re{constructor(){this.specification=u.v.light.position}possiblyEvaluate(n,c){return u.y(n.expression.evaluate(c))}interpolate(n,c,p){return{x:u.z.number(n.x,c.x,p),y:u.z.number(n.y,c.y,p),z:u.z.number(n.z,c.z,p)}}}let de;class we extends u.E{constructor(n){super(),de=de||new u.q({anchor:new u.D(u.v.light.anchor),position:new re,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(de),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,c={}){if(!this._validate(u.r,n,c))for(const p in n){const g=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,c,p){return(!p||p.validate!==!1)&&u.t(this,n.call(u.x,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Pe{constructor(n,c){this.width=n,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,c){const p=n.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(n,c)),this.dashEntry[p]}getDashRanges(n,c,p){const g=[];let _=n.length%2==1?-n[n.length-1]*p:0,A=n[0]*p,M=!0;g.push({left:_,right:A,isDash:M,zeroLength:n[0]===0});let O=n[0];for(let W=1;W<n.length;W++){M=!M;const te=n[W];_=O*p,O+=te,A=O*p,g.push({left:_,right:A,isDash:M,zeroLength:te===0})}return g}addRoundDash(n,c,p){const g=c/2;for(let _=-p;_<=p;_++){const A=this.width*(this.nextRow+p+_);let M=0,O=n[M];for(let W=0;W<this.width;W++){W/O.right>1&&(O=n[++M]);const te=Math.abs(W-O.left),ee=Math.abs(W-O.right),me=Math.min(te,ee);let be;const Ae=_/p*(g+1);if(O.isDash){const Le=g-Math.abs(Ae);be=Math.sqrt(me*me+Le*Le)}else be=g-Math.sqrt(me*me+Ae*Ae);this.data[A+W]=Math.max(0,Math.min(255,be+128))}}}addRegularDash(n){for(let M=n.length-1;M>=0;--M){const O=n[M],W=n[M+1];O.zeroLength?n.splice(M,1):W&&W.isDash===O.isDash&&(W.left=O.left,n.splice(M,1))}const c=n[0],p=n[n.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const g=this.width*this.nextRow;let _=0,A=n[_];for(let M=0;M<this.width;M++){M/A.right>1&&(A=n[++_]);const O=Math.abs(M-A.left),W=Math.abs(M-A.right),te=Math.min(O,W);this.data[g+M]=Math.max(0,Math.min(255,(A.isDash?te:-te)+128))}}addDash(n,c){const p=c?7:0,g=2*p+1;if(this.nextRow+g>this.height)return u.w("LineAtlas out of space"),null;let _=0;for(let M=0;M<n.length;M++)_+=n[M];if(_!==0){const M=this.width/_,O=this.getDashRanges(n,this.width,M);c?this.addRoundDash(O,M,p):this.addRegularDash(O)}const A={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,A}bind(n){const c=n.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ne="maplibre_preloaded_worker_pool";class Ie{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Ie.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}const Oe=Math.floor(b.hardwareConcurrency/2);let Ze,He;function ot(){return Ze||(Ze=new Ie),Ze}Ie.workerCount=u.B(globalThis)?Math.max(Math.min(Oe,3),1):1;class ft{constructor(n,c){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let g=0;g<p.length;g++){const _=new u.C(p[g],c);_.name=`Worker ${g}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,c){const p=[];for(const g of this.actors)p.push(g.sendAsync({type:n,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,c){for(const p of this.actors)p.registerMessageHandler(n,c)}}function _t(){return He||(He=new ft(ot(),u.G),He.registerMessageHandler("GR",(v,n,c)=>u.m(n,c))),He}function Mt(v,n){const c=u.F();return u.H(c,c,[1,1,0]),u.J(c,c,[.5*v.width,.5*v.height,1]),u.K(c,c,v.calculatePosMatrix(n.toUnwrapped()))}function mt(v,n,c,p,g,_){const A=function(ee,me,be){if(ee)for(const Ae of ee){const Le=me[Ae];if(Le&&Le.source===be&&Le.type==="fill-extrusion")return!0}else for(const Ae in me){const Le=me[Ae];if(Le.source===be&&Le.type==="fill-extrusion")return!0}return!1}(g&&g.layers,n,v.id),M=_.maxPitchScaleFactor(),O=v.tilesIn(p,M,A);O.sort(wt);const W=[];for(const ee of O)W.push({wrappedTileID:ee.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(n,c,v._state,ee.queryGeometry,ee.cameraQueryGeometry,ee.scale,g,_,M,Mt(v.transform,ee.tileID))});const te=function(ee){const me={},be={};for(const Ae of ee){const Le=Ae.queryResults,Ce=Ae.wrappedTileID,Ge=be[Ce]=be[Ce]||{};for(const Ke in Le){const Re=Le[Ke],Ye=Ge[Ke]=Ge[Ke]||{},rt=me[Ke]=me[Ke]||[];for(const at of Re)Ye[at.featureIndex]||(Ye[at.featureIndex]=!0,rt.push(at))}}return me}(W);for(const ee in te)te[ee].forEach(me=>{const be=me.feature,Ae=v.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=Ae});return te}function wt(v,n){const c=v.tileID,p=n.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function Wt(v,n,c){return u._(this,void 0,void 0,function*(){let p=v;if(v.url?p=(yield u.h(n.transformRequest(v.url,"Source"),c)).data:yield b.frameAsync(c),!p)return null;const g=u.L(u.e(p,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(g.vectorLayerIds=p.vector_layers.map(_=>_.id)),g})}class Lt{constructor(n,c){n&&(c?this.setSouthWest(n).setNorthEast(c):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof u.M?new u.M(n.lng,n.lat):u.M.convert(n),this}setSouthWest(n){return this._sw=n instanceof u.M?new u.M(n.lng,n.lat):u.M.convert(n),this}extend(n){const c=this._sw,p=this._ne;let g,_;if(n instanceof u.M)g=n,_=n;else{if(!(n instanceof Lt))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Lt.convert(n)):this.extend(u.M.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(u.M.convert(n)):this;if(g=n._sw,_=n._ne,!g||!_)return this}return c||p?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new u.M(g.lng,g.lat),this._ne=new u.M(_.lng,_.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:c,lat:p}=u.M.convert(n);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(n){return n instanceof Lt?n:n&&new Lt(n)}static fromLngLat(n,c=0){const p=360*c/40075017,g=p/Math.cos(Math.PI/180*n.lat);return new Lt(new u.M(n.lng-g,n.lat-p),new u.M(n.lng+g,n.lat+p))}}class ur{constructor(n,c,p){this.bounds=Lt.convert(this.validateBounds(n)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const c=Math.pow(2,n.z),p=Math.floor(u.N(this.bounds.getWest())*c),g=Math.floor(u.O(this.bounds.getNorth())*c),_=Math.ceil(u.N(this.bounds.getEast())*c),A=Math.ceil(u.O(this.bounds.getSouth())*c);return n.x>=p&&n.x<_&&n.y>=g&&n.y<A}}class it extends u.E{constructor(n,c,p,g){if(super(),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(c,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Wt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(u.e(this,n),n.bounds&&(this.tileBounds=new ur(n.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new u.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(n){return u._(this,void 0,void 0,function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((_,A)=>{n.reloadPromise={resolve:_,reject:A}})}else n.actor=this.dispatcher.getActor(),g="LT";n.abortController=new AbortController;try{const _=yield n.actor.sendAsync({type:g,data:p},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,_)}catch(_){if(delete n.abortController,n.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,c){if(c&&c.resourceTiming&&(n.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&n.setExpiryData(c),n.loadVectorData(c,this.map.painter),n.reloadPromise){const p=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(p.resolve).catch(p.reject)}}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class wr extends u.E{constructor(n,c,p,g){super(),this.id=n,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.L(c,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Wt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(u.e(this,n),n.bounds&&(this.tileBounds=new ur(n.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new u.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return u.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return u._(this,void 0,void 0,function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const p=yield G.getImage(this.map._requestManager.transformRequest(c,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const g=this.map.painter.context,_=g.gl,A=p.data;n.texture=this.map.painter.getTileTexture(A.width),n.texture?n.texture.update(A,{useMipmap:!0}):(n.texture=new q(g,A,_.RGBA,{useMipmap:!0}),n.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),n.state="loaded"}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}})}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class cr extends wr{constructor(n,c,p,g){super(n,c,p,g),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(n){return u._(this,void 0,void 0,function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const g=yield G.getImage(p,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(g&&g.data){const _=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&n.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const A=u.b(_)&&u.S()?_:yield this.readImageNow(_),M={type:this.type,uid:n.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const O=yield n.actor.sendAsync({type:"LDT",data:M});n.dem=O,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(g){if(delete n.abortController,n.aborted)n.state="unloaded";else if(g)throw n.state="errored",g}})}readImageNow(n){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const c=n.width+2,p=n.height+2;try{return new u.R({width:c,height:p},yield u.V(n,-1,-1,c,p))}catch{}}return b.getImageData(n,1)})}_getNeighboringTiles(n){const c=n.canonical,p=Math.pow(2,c.z),g=(c.x-1+p)%p,_=c.x===0?n.wrap-1:n.wrap,A=(c.x+1+p)%p,M=c.x+1===p?n.wrap+1:n.wrap,O={};return O[new u.Q(n.overscaledZ,_,c.z,g,c.y).key]={backfilled:!1},O[new u.Q(n.overscaledZ,M,c.z,A,c.y).key]={backfilled:!1},c.y>0&&(O[new u.Q(n.overscaledZ,_,c.z,g,c.y-1).key]={backfilled:!1},O[new u.Q(n.overscaledZ,n.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},O[new u.Q(n.overscaledZ,M,c.z,A,c.y-1).key]={backfilled:!1}),c.y+1<p&&(O[new u.Q(n.overscaledZ,_,c.z,g,c.y+1).key]={backfilled:!1},O[new u.Q(n.overscaledZ,n.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},O[new u.Q(n.overscaledZ,M,c.z,A,c.y+1).key]={backfilled:!1}),O}unloadTile(n){return u._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class Ht extends u.E{constructor(n,c,p,g){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=c.data,this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const _=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*_,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*_,extent:u.W,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.W,radius:(c.clusterRadius||50)*_,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return u._(this,void 0,void 0,function*(){const n=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:c,offset:p}})}_updateWorkerData(n){return u._(this,void 0,void 0,function*(){const c=u.e({type:this.type},this.workerOptions);n?c.dataDiff=n:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let g=null;p.resourceTiming&&p.resourceTiming[this.id]&&(g=p.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&u.e(_,{resourceTiming:g}),this.fire(new u.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(n){return u._(this,void 0,void 0,function*(){const c=n.actor?"RT":"LT";n.actor=this.actor;const p={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const g=yield this.actor.sendAsync({type:c,data:p},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(g,this.map.painter,c==="RT")})}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Se=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class N extends u.E{constructor(n,c,p,g){super(),this.id=n,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=c}load(n){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,n&&(this.coordinates=n),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new u.j(c))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const c=n.map(u.Y.fromLngLat);this.tileID=function(g){let _=1/0,A=1/0,M=-1/0,O=-1/0;for(const me of g)_=Math.min(_,me.x),A=Math.min(A,me.y),M=Math.max(M,me.x),O=Math.max(O,me.y);const W=Math.max(M-_,O-A),te=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),ee=Math.pow(2,te);return new u.a0(te,Math.floor((_+M)/2*ee),Math.floor((A+O)/2*ee))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,u.W,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,u.W),this._boundsArray.emplaceBack(p[2].x,p[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,c=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(n,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class D extends N{constructor(n,c,p,g){super(n,c,p,g),this.roundZoom=!0,this.type="video",this.options=c}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const c of n.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield u.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new u.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const c=this.video.seekable;n<c.start(0)||n>c.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,c=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new q(n,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xe extends N{constructor(n,c,p,g){super(n,c,p,g),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(A=>typeof A!="number"))||this.fire(new u.j(new u.a1(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${n}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${n}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(c,this.canvas,p.RGBA,{premultiply:!0});let g=!1;for(const _ in this.tiles){const A=this.tiles[_];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,g=!0)}g&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Xe={},tt=v=>{switch(v){case"geojson":return Ht;case"image":return N;case"raster":return wr;case"raster-dem":return cr;case"vector":return it;case"video":return D;case"canvas":return xe}return Xe[v]},ht="RTLPluginLoaded";class le extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=_t()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return u._(this,arguments,void 0,function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(ht))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let k=null;function $(){return k||(k=new le),k}class Te{constructor(n,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=u.a3(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const c=n+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(g,_){const A={};if(!_)return A;for(const M of g){const O=M.layerIds.map(W=>_.getLayer(W)).filter(Boolean);if(O.length!==0){M.layers=O,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(W=>O.filter(te=>te.id===W)[0]));for(const W of O)A[W.id]=M}}return A}(n.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof u.a5){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof u.a5&&_.hasRTLText){this.hasRTLText=!0,$().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(g).queryRadius(_))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(n)}const c=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(n,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(n,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,c,p,g,_,A,M,O,W,te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:A,tileSize:this.tileSize,pixelPosMatrix:te,transform:O,params:M,queryPadding:this.queryPadding*W},n,c,p):{}}querySourceFeatures(n,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=c&&c.sourceLayer?c.sourceLayer:"",A=g._geojsonTileLayer||g[_];if(!A)return;const M=u.a6(c&&c.filter),{z:O,x:W,y:te}=this.tileID.canonical,ee={z:O,x:W,y:te};for(let me=0;me<A.length;me++){const be=A.feature(me);if(M.needGeometry){const Ce=u.a7(be,!0);if(!M.filter(new u.a8(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!M.filter(new u.a8(this.tileID.overscaledZ),be))continue;const Ae=p.getId(be,_),Le=new u.a9(be,O,W,te,Ae);Le.tile=ee,n.push(Le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const c=this.expirationTime;if(n.cacheControl){const p=u.aa(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const _=this.expirationTime-c;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const _=this.buckets[g],A=_.layers[0].sourceLayer||"_geojsonTileLayer",M=p[A],O=n[A];if(!M||!O||Object.keys(O).length===0)continue;_.update(O,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});const W=c&&c.style&&c.style.getLayer(g);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=b.now()+n}setDependencies(n,c){const p={};for(const g of c)p[g]=!0;this.dependencies[n]=p}hasDependency(n,c){for(const p of n){const g=this.dependencies[p];if(g){for(const _ of c)if(g[_])return!0}}return!1}}class We{constructor(n,c){this.max=n,this.onRemove=c,this.reset()}reset(){for(const n in this.data)for(const c of this.data[n])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(n,c,p){const g=n.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:c,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(n,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const c=this.data[n].shift();return c.timeout&&clearTimeout(c.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),c.value}getByKey(n){const c=this.data[n];return c?c[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,c){if(!this.has(n))return this;const p=n.wrapped().key,g=c===void 0?0:this.data[p].indexOf(c),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(n){const c=[];for(const p in this.data)for(const g of this.data[p])n(g.value)||c.push(g);for(const p of c)this.remove(p.value.tileID,p)}}class nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,c,p){const g=String(c);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][g]=this.stateChanges[n][g]||{},u.e(this.stateChanges[n][g],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const _ in this.state[n])_!==g&&(this.deletedStates[n][_]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][g]===null){this.deletedStates[n][g]={};for(const _ in this.state[n][g])p[_]||(this.deletedStates[n][g][_]=null)}else for(const _ in p)this.deletedStates[n]&&this.deletedStates[n][g]&&this.deletedStates[n][g][_]===null&&delete this.deletedStates[n][g][_]}removeFeatureState(n,c,p){if(this.deletedStates[n]===null)return;const g=String(c);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&c!==void 0)this.deletedStates[n][g]!==null&&(this.deletedStates[n][g]=this.deletedStates[n][g]||{},this.deletedStates[n][g][p]=null);else if(c!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][g])for(p in this.deletedStates[n][g]={},this.stateChanges[n][g])this.deletedStates[n][g][p]=null;else this.deletedStates[n][g]=null;else this.deletedStates[n]=null}getState(n,c){const p=String(c),g=u.e({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const _=this.deletedStates[n][c];if(_===null)return{};for(const A in _)delete g[A]}return g}initializeTileState(n,c){n.setFeatureState(this.state,c)}coalesceChanges(n,c){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const A in this.stateChanges[g])this.state[g][A]||(this.state[g][A]={}),u.e(this.state[g][A],this.stateChanges[g][A]),_[A]=this.state[g][A];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const A in this.state[g])_[A]={},this.state[g][A]={};else for(const A in this.deletedStates[g]){if(this.deletedStates[g][A]===null)this.state[g][A]={};else for(const M of Object.keys(this.deletedStates[g][A]))delete this.state[g][A][M];_[A]=this.state[g][A]}p[g]=p[g]||{},u.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in n)n[g].setFeatureState(p,c)}}class Ve extends u.E{constructor(n,c,p){super(),this.id=n,this.dispatcher=p,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,A,M)=>{const O=new(tt(_.type))(g,_,A,M);if(O.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${O.id}`);return O})(n,c,p,this),this._tiles={},this._cache=new We(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new nt,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const c=this._tiles[n];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,c,p){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,c,p)}catch(g){n.state="errored",g.status!==404?this._source.fire(new u.j(g,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new u.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Et).map(n=>n.key)}getRenderableIds(n){const c=[];for(const p in this._tiles)this._isIdRenderable(p,n)&&c.push(this._tiles[p]);return n?c.sort((p,g)=>{const _=p.tileID,A=g.tileID,M=new u.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),O=new u.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-A.overscaledZ||O.y-M.y||O.x-M.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(Et).map(p=>p.key)}hasRenderableParent(n){const c=this.findLoadedParent(n,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(n,c){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(c||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,c){return u._(this,void 0,void 0,function*(){const p=this._tiles[n];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,n,c))})}_tileLoaded(n,c,p){n.timeAdded=b.now(),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(c,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const _=c[g];if(n.neighboringTiles&&n.neighboringTiles[_]){const A=this.getTileByID(_);p(n,A),p(A,n)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let A=_.tileID.canonical.x-g.tileID.canonical.x;const M=_.tileID.canonical.y-g.tileID.canonical.y,O=Math.pow(2,g.tileID.canonical.z),W=_.tileID.key;A===0&&M===0||Math.abs(M)>1||(Math.abs(A)>1&&(Math.abs(A+O)===1?A+=O:Math.abs(A-O)===1&&(A-=O)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,A,M),g.neighboringTiles&&g.neighboringTiles[W]&&(g.neighboringTiles[W].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,c,p,g){for(const _ in this._tiles){let A=this._tiles[_];if(g[_]||!A.hasData()||A.tileID.overscaledZ<=c||A.tileID.overscaledZ>p)continue;let M=A.tileID;for(;A&&A.tileID.overscaledZ>c+1;){const W=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[W.key],A&&A.hasData()&&(M=W)}let O=M;for(;O.overscaledZ>c;)if(O=O.scaledTo(O.overscaledZ-1),n[O.key]){g[M.key]=M;break}}}findLoadedParent(n,c){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=n.overscaledZ-1;p>=c;p--){const g=n.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const c=this._tiles[n.key];return c&&c.hasData()?c:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const c=Math.ceil(n.width/this._source.tileSize)+1,p=Math.ceil(n.height/this._source.tileSize)+1,g=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(n){const c=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,c){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+c),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(n,c,p,g,_,A){const M={},O={},W=Object.keys(n),te=b.now();for(const ee of W){const me=n[ee],be=this._tiles[ee];if(!be||be.fadeEndTime!==0&&be.fadeEndTime<=te)continue;const Ae=this.findLoadedParent(me,c),Le=this.findLoadedSibling(me),Ce=Ae||Le||null;Ce&&(this._addTile(Ce.tileID),M[Ce.tileID.key]=Ce.tileID),O[ee]=me}this._retainLoadedChildren(O,g,p,n);for(const ee in M)n[ee]||(this._coveredTiles[ee]=!0,n[ee]=M[ee]);if(A){const ee={},me={};for(const be of _)this._tiles[be.key].hasData()?ee[be.key]=be:me[be.key]=be;for(const be in me){const Ae=me[be].children(this._source.maxzoom);this._tiles[Ae[0].key]&&this._tiles[Ae[1].key]&&this._tiles[Ae[2].key]&&this._tiles[Ae[3].key]&&(ee[Ae[0].key]=n[Ae[0].key]=Ae[0],ee[Ae[1].key]=n[Ae[1].key]=Ae[1],ee[Ae[2].key]=n[Ae[2].key]=Ae[2],ee[Ae[3].key]=n[Ae[3].key]=Ae[3],delete me[be])}for(const be in me){const Ae=me[be],Le=this.findLoadedParent(Ae,this._source.minzoom),Ce=this.findLoadedSibling(Ae),Ge=Le||Ce||null;if(Ge){ee[Ge.tileID.key]=n[Ge.tileID.key]=Ge.tileID;for(const Ke in ee)ee[Ke].isChildOf(Ge.tileID)&&delete ee[Ke]}}for(const be in this._tiles)ee[be]||(this._coveredTiles[be]=!0)}}update(n,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=n,this.terrain=c,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new u.Q(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y)):(p=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(te=>this._source.hasTile(te)))):p=[];const g=n.coveringZoomLevel(this._source),_=Math.max(g-Ve.maxOverzooming,this._source.minzoom),A=Math.max(g+Ve.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const te={};for(const ee of p)if(ee.canonical.z>this._source.minzoom){const me=ee.scaledTo(ee.canonical.z-1);te[me.key]=me;const be=ee.scaledTo(Math.max(this._source.minzoom,Math.min(ee.canonical.z,5)));te[be.key]=be}p=p.concat(Object.values(te))}const M=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,M&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(p,g);Ft(this._source.type)&&this._updateCoveredAndRetainedTiles(O,_,A,g,p,c);for(const te in O)this._tiles[te].clearFadeHold();const W=u.ab(this._tiles,O);for(const te of W){const ee=this._tiles[te];ee.hasSymbolBuckets&&!ee.holdingForFade()?ee.setHoldDuration(this.map._fadeDuration):ee.hasSymbolBuckets&&!ee.symbolFadeFinished()||this._removeTile(te)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,c){var p;const g={},_={},A=Math.max(c-Ve.maxOverzooming,this._source.minzoom),M=Math.max(c+Ve.maxUnderzooming,this._source.minzoom),O={};for(const W of n){const te=this._addTile(W);g[W.key]=W,te.hasData()||c<this._source.maxzoom&&(O[W.key]=W)}this._retainLoadedChildren(O,c,M,g);for(const W of n){let te=this._tiles[W.key];if(te.hasData())continue;if(c+1>this._source.maxzoom){const me=W.children(this._source.maxzoom)[0],be=this.getTile(me);if(be&&be.hasData()){g[me.key]=me;continue}}else{const me=W.children(this._source.maxzoom);if(g[me[0].key]&&g[me[1].key]&&g[me[2].key]&&g[me[3].key])continue}let ee=te.wasRequested();for(let me=W.overscaledZ-1;me>=A;--me){const be=W.scaledTo(me);if(_[be.key])break;if(_[be.key]=!0,te=this.getTile(be),!te&&ee&&(te=this._addTile(be)),te){const Ae=te.hasData();if((Ae||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||ee)&&(g[be.key]=be),ee=te.wasRequested(),Ae)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const c=[];let p,g=this._tiles[n].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}c.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of c)this._loadedParentTiles[_]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const c=this._tiles[n].tileID,p=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=p}}_addTile(n){let c=this._tiles[n.key];if(c)return c;c=this._cache.getAndRemove(n),c&&(this._setTileReloadTimer(n.key,c),c.tileID=n,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,c)));const p=c;return c||(c=new Te(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(c,n.key,c.state)),c.uses++,this._tiles[n.key]=c,p||this._source.fire(new u.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(n,c){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=c.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}_removeTile(n){const c=this._tiles[n];c&&(c.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(n){const c=n.sourceDataType;n.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,c,p){const g=[],_=this.transform;if(!_)return g;const A=p?_.getCameraQueryGeometry(n):n,M=n.map(Ae=>_.pointCoordinate(Ae,this.terrain)),O=A.map(Ae=>_.pointCoordinate(Ae,this.terrain)),W=this.getIds();let te=1/0,ee=1/0,me=-1/0,be=-1/0;for(const Ae of O)te=Math.min(te,Ae.x),ee=Math.min(ee,Ae.y),me=Math.max(me,Ae.x),be=Math.max(be,Ae.y);for(let Ae=0;Ae<W.length;Ae++){const Le=this._tiles[W[Ae]];if(Le.holdingForFade())continue;const Ce=Le.tileID,Ge=Math.pow(2,_.zoom-Le.tileID.overscaledZ),Ke=c*Le.queryPadding*u.W/Le.tileSize/Ge,Re=[Ce.getTilePoint(new u.Y(te,ee)),Ce.getTilePoint(new u.Y(me,be))];if(Re[0].x-Ke<u.W&&Re[0].y-Ke<u.W&&Re[1].x+Ke>=0&&Re[1].y+Ke>=0){const Ye=M.map(at=>Ce.getTilePoint(at)),rt=O.map(at=>Ce.getTilePoint(at));g.push({tile:Le,tileID:Ce,queryGeometry:Ye,cameraQueryGeometry:rt,scale:Ge})}}return g}getVisibleCoordinates(n){const c=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Ft(this._source.type)){const n=b.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=n)return!0}return!1}setFeatureState(n,c,p){this._state.updateState(n=n||"_geojsonTileLayer",c,p)}removeFeatureState(n,c,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",c,p)}getFeatureState(n,c){return this._state.getState(n=n||"_geojsonTileLayer",c)}setDependencies(n,c,p){const g=this._tiles[n];g&&g.setDependencies(c,p)}reloadTilesForDependencies(n,c){for(const p in this._tiles)this._tiles[p].hasDependency(n,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(n,c))}}function Et(v,n){const c=Math.abs(2*v.wrap)-+(v.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return v.overscaledZ-n.overscaledZ||p-c||n.canonical.y-v.canonical.y||n.canonical.x-v.canonical.x}function Ft(v){return v==="raster"||v==="image"||v==="video"}Ve.maxOverzooming=10,Ve.maxUnderzooming=3;class pr{constructor(n,c){this.reset(n,c)}reset(n,c){this.points=n||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=u.ac(n,0,1);let c=1,p=this._distances[c];const g=n*this.paddedLength+this.padding;for(;p<g&&c<this._distances.length;)p=this._distances[++c];const _=c-1,A=this._distances[_],M=p-A,O=M>0?(g-A)/M:0;return this.points[_].mult(1-O).add(this.points[c].mult(O))}}function br(v,n){let c=!0;return v==="always"||v!=="never"&&n!=="never"||(c=!1),c}class Rt{constructor(n,c,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(n/p),this.yCellCount=Math.ceil(c/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=c,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,c,p,g,_){this._forEachCell(c,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(n,c,p,g){this._forEachCell(c-g,p-g,c+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(c),this.circles.push(p),this.circles.push(g)}_insertBoxCell(n,c,p,g,_,A){this.boxCells[_].push(A)}_insertCircleCell(n,c,p,g,_,A){this.circleCells[_].push(A)}_query(n,c,p,g,_,A,M){if(p<0||n>this.width||g<0||c>this.height)return[];const O=[];if(n<=0&&c<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:n,y1:c,x2:p,y2:g}];for(let W=0;W<this.boxKeys.length;W++)O.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(let W=0;W<this.circleKeys.length;W++){const te=this.circles[3*W],ee=this.circles[3*W+1],me=this.circles[3*W+2];O.push({key:this.circleKeys[W],x1:te-me,y1:ee-me,x2:te+me,y2:ee+me})}}else this._forEachCell(n,c,p,g,this._queryCell,O,{hitTest:_,overlapMode:A,seenUids:{box:{},circle:{}}},M);return O}query(n,c,p,g){return this._query(n,c,p,g,!1,null)}hitTest(n,c,p,g,_,A){return this._query(n,c,p,g,!0,_,A).length>0}hitTestCircle(n,c,p,g,_){const A=n-p,M=n+p,O=c-p,W=c+p;if(M<0||A>this.width||W<0||O>this.height)return!1;const te=[];return this._forEachCell(A,O,M,W,this._queryCellCircle,te,{hitTest:!0,overlapMode:g,circle:{x:n,y:c,radius:p},seenUids:{box:{},circle:{}}},_),te.length>0}_queryCell(n,c,p,g,_,A,M,O){const{seenUids:W,hitTest:te,overlapMode:ee}=M,me=this.boxCells[_];if(me!==null){const Ae=this.bboxes;for(const Le of me)if(!W.box[Le]){W.box[Le]=!0;const Ce=4*Le,Ge=this.boxKeys[Le];if(n<=Ae[Ce+2]&&c<=Ae[Ce+3]&&p>=Ae[Ce+0]&&g>=Ae[Ce+1]&&(!O||O(Ge))&&(!te||!br(ee,Ge.overlapMode))&&(A.push({key:Ge,x1:Ae[Ce],y1:Ae[Ce+1],x2:Ae[Ce+2],y2:Ae[Ce+3]}),te))return!0}}const be=this.circleCells[_];if(be!==null){const Ae=this.circles;for(const Le of be)if(!W.circle[Le]){W.circle[Le]=!0;const Ce=3*Le,Ge=this.circleKeys[Le];if(this._circleAndRectCollide(Ae[Ce],Ae[Ce+1],Ae[Ce+2],n,c,p,g)&&(!O||O(Ge))&&(!te||!br(ee,Ge.overlapMode))){const Ke=Ae[Ce],Re=Ae[Ce+1],Ye=Ae[Ce+2];if(A.push({key:Ge,x1:Ke-Ye,y1:Re-Ye,x2:Ke+Ye,y2:Re+Ye}),te)return!0}}}return!1}_queryCellCircle(n,c,p,g,_,A,M,O){const{circle:W,seenUids:te,overlapMode:ee}=M,me=this.boxCells[_];if(me!==null){const Ae=this.bboxes;for(const Le of me)if(!te.box[Le]){te.box[Le]=!0;const Ce=4*Le,Ge=this.boxKeys[Le];if(this._circleAndRectCollide(W.x,W.y,W.radius,Ae[Ce+0],Ae[Ce+1],Ae[Ce+2],Ae[Ce+3])&&(!O||O(Ge))&&!br(ee,Ge.overlapMode))return A.push(!0),!0}}const be=this.circleCells[_];if(be!==null){const Ae=this.circles;for(const Le of be)if(!te.circle[Le]){te.circle[Le]=!0;const Ce=3*Le,Ge=this.circleKeys[Le];if(this._circlesCollide(Ae[Ce],Ae[Ce+1],Ae[Ce+2],W.x,W.y,W.radius)&&(!O||O(Ge))&&!br(ee,Ge.overlapMode))return A.push(!0),!0}}}_forEachCell(n,c,p,g,_,A,M,O){const W=this._convertToXCellCoord(n),te=this._convertToYCellCoord(c),ee=this._convertToXCellCoord(p),me=this._convertToYCellCoord(g);for(let be=W;be<=ee;be++)for(let Ae=te;Ae<=me;Ae++)if(_.call(this,n,c,p,g,this.xCellCount*Ae+be,A,M,O))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,c,p,g,_,A){const M=g-n,O=_-c,W=p+A;return W*W>M*M+O*O}_circleAndRectCollide(n,c,p,g,_,A,M){const O=(A-g)/2,W=Math.abs(n-(g+O));if(W>O+p)return!1;const te=(M-_)/2,ee=Math.abs(c-(_+te));if(ee>te+p)return!1;if(W<=O||ee<=te)return!0;const me=W-O,be=ee-te;return me*me+be*be<=p*p}}function $n(v,n,c,p,g){const _=u.F();return n?(u.J(_,_,[1/g,1/g,1]),c||u.ad(_,_,p.angle)):u.K(_,p.labelPlaneMatrix,v),_}function ni(v,n,c,p,g){if(n){const _=u.ae(v);return u.J(_,_,[g,g,1]),c||u.ad(_,_,-p.angle),_}return p.glCoordMatrix}function ln(v,n,c){let p;c?(p=[v.x,v.y,c(v.x,v.y),1],u.af(p,p,n)):(p=[v.x,v.y,0,1],function(_,A,M){const O=A[0],W=A[1];_[0]=M[0]*O+M[4]*W+M[12],_[1]=M[1]*O+M[5]*W+M[13],_[3]=M[3]*O+M[7]*W+M[15]}(p,p,n));const g=p[3];return{point:new u.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function Me(v,n){return .5+v/n*.5}function ie(v,n){return v.x>=-n[0]&&v.x<=n[0]&&v.y>=-n[1]&&v.y<=n[1]}function ce(v,n,c,p,g,_,A,M,O,W,te,ee,me,be,Ae){const Le=p?v.textSizeData:v.iconSizeData,Ce=u.ag(Le,c.transform.zoom),Ge=[256/c.width*2+1,256/c.height*2+1],Ke=p?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Ke.clear();const Re=v.lineVertexArray,Ye=p?v.text.placedSymbolArray:v.icon.placedSymbolArray,rt=c.transform.width/c.transform.height;let at=!1;for(let gt=0;gt<Ye.length;gt++){const bt=Ye.get(gt);if(bt.hidden||bt.writingMode===u.ah.vertical&&!at){rr(bt.numGlyphs,Ke);continue}at=!1;const Dt=ln(new u.P(bt.anchorX,bt.anchorY),n,Ae);if(!ie(Dt.point,Ge)){rr(bt.numGlyphs,Ke);continue}const Nt=Me(c.transform.cameraToCenterDistance,Dt.signedDistanceFromCamera),St=u.ai(Le,Ce,bt),Pt=A?St/Nt:St*Nt,Gt={getElevation:Ae,labelPlaneMatrix:g,lineVertexArray:Re,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:W,tileAnchorPoint:new u.P(bt.anchorX,bt.anchorY),unwrappedTileID:te,width:ee,height:me,translation:be},gr=Be(Gt,bt,Pt,!1,M,n,_,v.glyphOffsetArray,Ke,rt,O);at=gr.useVertical,(gr.notEnoughRoom||at||gr.needsFlipping&&Be(Gt,bt,Pt,!0,M,n,_,v.glyphOffsetArray,Ke,rt,O).notEnoughRoom)&&rr(bt.numGlyphs,Ke)}p?v.text.dynamicLayoutVertexBuffer.updateData(Ke):v.icon.dynamicLayoutVertexBuffer.updateData(Ke)}function pe(v,n,c,p,g,_,A,M){const O=_.glyphStartIndex+_.numGlyphs,W=_.lineStartIndex,te=_.lineStartIndex+_.lineLength,ee=n.getoffsetX(_.glyphStartIndex),me=n.getoffsetX(O-1),be=ut(v*ee,c,p,g,_.segment,W,te,M,A);if(!be)return null;const Ae=ut(v*me,c,p,g,_.segment,W,te,M,A);return Ae?M.projectionCache.anyProjectionOccluded?null:{first:be,last:Ae}:null}function Fe(v,n,c,p){return v===u.ah.horizontal&&Math.abs(c.y-n.y)>Math.abs(c.x-n.x)*p?{useVertical:!0}:(v===u.ah.vertical?n.y<c.y:n.x>c.x)?{needsFlipping:!0}:null}function Be(v,n,c,p,g,_,A,M,O,W,te){const ee=c/24,me=n.lineOffsetX*ee,be=n.lineOffsetY*ee;let Ae;if(n.numGlyphs>1){const Le=n.glyphStartIndex+n.numGlyphs,Ce=n.lineStartIndex,Ge=n.lineStartIndex+n.lineLength,Ke=pe(ee,M,me,be,p,n,te,v);if(!Ke)return{notEnoughRoom:!0};const Re=ln(Ke.first.point,A,v.getElevation).point,Ye=ln(Ke.last.point,A,v.getElevation).point;if(g&&!p){const rt=Fe(n.writingMode,Re,Ye,W);if(rt)return rt}Ae=[Ke.first];for(let rt=n.glyphStartIndex+1;rt<Le-1;rt++)Ae.push(ut(ee*M.getoffsetX(rt),me,be,p,n.segment,Ce,Ge,v,te));Ae.push(Ke.last)}else{if(g&&!p){const Ce=ln(v.tileAnchorPoint,_,v.getElevation).point,Ge=n.lineStartIndex+n.segment+1,Ke=new u.P(v.lineVertexArray.getx(Ge),v.lineVertexArray.gety(Ge)),Re=ln(Ke,_,v.getElevation),Ye=Re.signedDistanceFromCamera>0?Re.point:function(at,gt,bt,Dt,Nt,St){return je(at,gt,bt,1,Nt,St)}(v.tileAnchorPoint,Ke,Ce,0,_,v),rt=Fe(n.writingMode,Ce,Ye,W);if(rt)return rt}const Le=ut(ee*M.getoffsetX(n.glyphStartIndex),me,be,p,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,v,te);if(!Le||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ae=[Le]}for(const Le of Ae)u.aj(O,Le.point,Le.angle);return{}}function je(v,n,c,p,g,_){const A=v.add(v.sub(n)._unit()),M=g!==void 0?ln(A,g,_.getElevation).point:ze(A.x,A.y,_).point,O=c.sub(M);return c.add(O._mult(p/O.mag()))}function Ue(v,n,c){const p=n.projectionCache;if(p.projections[v])return p.projections[v];const g=new u.P(n.lineVertexArray.getx(v),n.lineVertexArray.gety(v)),_=ze(g.x,g.y,n);if(_.signedDistanceFromCamera>0)return p.projections[v]=_.point,p.anyProjectionOccluded=p.anyProjectionOccluded||_.isOccluded,_.point;const A=v-c.direction;return function(M,O,W,te,ee){return je(M,O,W,te,void 0,ee)}(c.distanceFromAnchor===0?n.tileAnchorPoint:new u.P(n.lineVertexArray.getx(A),n.lineVertexArray.gety(A)),g,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,n)}function ze(v,n,c){const p=v+c.translation[0],g=n+c.translation[1];let _;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(_=c.projection.projectTileCoordinates(p,g,c.unwrappedTileID,c.getElevation),_.point.x=(.5*_.point.x+.5)*c.width,_.point.y=(.5*-_.point.y+.5)*c.height):(_=ln(new u.P(p,g),c.labelPlaneMatrix,c.getElevation),_.isOccluded=!1),_}function Qe(v,n,c){return v._unit()._perp()._mult(n*c)}function dt(v,n,c,p,g,_,A,M,O){if(M.projectionCache.offsets[v])return M.projectionCache.offsets[v];const W=c.add(n);if(v+O.direction<p||v+O.direction>=g)return M.projectionCache.offsets[v]=W,W;const te=Ue(v+O.direction,M,O),ee=Qe(te.sub(c),A,O.direction),me=c.add(ee),be=te.add(ee);return M.projectionCache.offsets[v]=u.ak(_,W,me,be)||W,M.projectionCache.offsets[v]}function ut(v,n,c,p,g,_,A,M,O){const W=p?v-n:v+n;let te=W>0?1:-1,ee=0;p&&(te*=-1,ee=Math.PI),te<0&&(ee+=Math.PI);let me,be=te>0?_+g:_+g+1;M.projectionCache.cachedAnchorPoint?me=M.projectionCache.cachedAnchorPoint:(me=ze(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=me);let Ae,Le,Ce=me,Ge=me,Ke=0,Re=0;const Ye=Math.abs(W),rt=[];let at;for(;Ke+Re<=Ye;){if(be+=te,be<_||be>=A)return null;Ke+=Re,Ge=Ce,Le=Ae;const Dt={absOffsetX:Ye,direction:te,distanceFromAnchor:Ke,previousVertex:Ge};if(Ce=Ue(be,M,Dt),c===0)rt.push(Ge),at=Ce.sub(Ge);else{let Nt;const St=Ce.sub(Ge);Nt=St.mag()===0?Qe(Ue(be+te,M,Dt).sub(Ce),c,te):Qe(St,c,te),Le||(Le=Ge.add(Nt)),Ae=dt(be,Nt,Ce,_,A,Le,c,M,Dt),rt.push(Le),at=Ae.sub(Le)}Re=at.mag()}const gt=at._mult((Ye-Ke)/Re)._add(Le||Ge),bt=ee+Math.atan2(Ce.y-Ge.y,Ce.x-Ge.x);return rt.push(gt),{point:gt,angle:O?bt:0,path:rt}}const ct=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rr(v,n){for(let c=0;c<v;c++){const p=n.length;n.resize(p+4),n.float32.set(ct,3*p)}}const Kt=100;class Er{constructor(n,c,p=new Rt(n.width+200,n.height+200,25),g=new Rt(n.width+200,n.height+200,25)){this.transform=n,this.mapProjection=c,this.grid=p,this.ignoredGrid=g,this.pitchFactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Kt,this.screenBottomBoundary=n.height+Kt,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,c,p,g,_,A,M,O,W,te,ee){const me=n.anchorPointX+O[0],be=n.anchorPointY+O[1],Ae=this.projectAndGetPerspectiveRatio(g,me,be,_,te),Le=this._projectCollisionBox(n,p,g,_,A,M,O,Ae,te,ee),[Ce,Ge,Ke,Re]=Le.box;return this.mapProjection.useSpecialProjectionForSymbols&&(A?Le.allPointsOccluded:this.mapProjection.isOccluded(me,be,_))||Ae.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Ce,Ge,Ke,Re)||c!=="always"&&this.grid.hitTest(Ce,Ge,Ke,Re,c,W)?{box:[Ce,Ge,Ke,Re],placeable:!1,offscreen:!1}:{box:[Ce,Ge,Ke,Re],placeable:!0,offscreen:this.isOffscreen(Ce,Ge,Ke,Re)}}placeCollisionCircles(n,c,p,g,_,A,M,O,W,te,ee,me,be,Ae,Le,Ce){const Ge=[],Ke=new u.P(c.anchorX,c.anchorY),Re=this.getPerspectiveRatio(A,Ke.x,Ke.y,M,Ce),Ye=(ee?_/Re:_*Re)/u.ap,rt={getElevation:Ce,labelPlaneMatrix:O,lineVertexArray:p,pitchWithMap:ee,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ke,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:Le},at=pe(Ye,g,c.lineOffsetX*Ye,c.lineOffsetY*Ye,!1,c,!1,rt);let gt=!1,bt=!1,Dt=!0;if(at){const Nt=.5*be*Re+Ae,St=new u.P(-100,-100),Pt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Gt=new pr,gr=at.first,It=at.last;let jt=[];for(let Sr=gr.path.length-1;Sr>=1;Sr--)jt.push(gr.path[Sr]);for(let Sr=1;Sr<It.path.length;Sr++)jt.push(It.path[Sr]);const hr=2.5*Nt;if(W){const Sr=this.projectPathToScreenSpace(jt,rt,W);jt=Sr.some(Ar=>Ar.signedDistanceFromCamera<=0)?[]:Sr.map(Ar=>Ar.point)}let rn=[];if(jt.length>0){const Sr=jt[0].clone(),Ar=jt[0].clone();for(let nn=1;nn<jt.length;nn++)Sr.x=Math.min(Sr.x,jt[nn].x),Sr.y=Math.min(Sr.y,jt[nn].y),Ar.x=Math.max(Ar.x,jt[nn].x),Ar.y=Math.max(Ar.y,jt[nn].y);rn=Sr.x>=St.x&&Ar.x<=Pt.x&&Sr.y>=St.y&&Ar.y<=Pt.y?[jt]:Ar.x<St.x||Sr.x>Pt.x||Ar.y<St.y||Sr.y>Pt.y?[]:u.al([jt],St.x,St.y,Pt.x,Pt.y)}for(const Sr of rn){Gt.reset(Sr,.25*Nt);let Ar=0;Ar=Gt.length<=.5*Nt?1:Math.ceil(Gt.paddedLength/hr)+1;for(let nn=0;nn<Ar;nn++){const ui=nn/Math.max(Ar-1,1),Ro=Gt.lerp(ui),on=Ro.x+Kt,Di=Ro.y+Kt;Ge.push(on,Di,Nt,0);const Ii=on-Nt,ci=Di-Nt,hi=on+Nt,jo=Di+Nt;if(Dt=Dt&&this.isOffscreen(Ii,ci,hi,jo),bt=bt||this.isInsideGrid(Ii,ci,hi,jo),n!=="always"&&this.grid.hitTestCircle(on,Di,Nt,n,me)&&(gt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:gt}}}}return{circles:!te&&gt||!bt||Re<this.perspectiveRatioCutoff?[]:Ge,offscreen:Dt,collisionDetected:gt}}projectPathToScreenSpace(n,c,p){return n.map(g=>ln(g,p,c.getElevation))}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,g=1/0,_=-1/0,A=-1/0;for(const te of n){const ee=new u.P(te.x+Kt,te.y+Kt);p=Math.min(p,ee.x),g=Math.min(g,ee.y),_=Math.max(_,ee.x),A=Math.max(A,ee.y),c.push(ee)}const M=this.grid.query(p,g,_,A).concat(this.ignoredGrid.query(p,g,_,A)),O={},W={};for(const te of M){const ee=te.key;if(O[ee.bucketInstanceId]===void 0&&(O[ee.bucketInstanceId]={}),O[ee.bucketInstanceId][ee.featureIndex])continue;const me=[new u.P(te.x1,te.y1),new u.P(te.x2,te.y1),new u.P(te.x2,te.y2),new u.P(te.x1,te.y2)];u.am(c,me)&&(O[ee.bucketInstanceId][ee.featureIndex]=!0,W[ee.bucketInstanceId]===void 0&&(W[ee.bucketInstanceId]=[]),W[ee.bucketInstanceId].push(ee.featureIndex))}return W}insertCollisionBox(n,c,p,g,_,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:c},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,c,p,g,_,A){const M=p?this.ignoredGrid:this.grid,O={bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:c};for(let W=0;W<n.length;W+=4)M.insertCircle(O,n[W],n[W+1],n[W+2])}projectAndGetPerspectiveRatio(n,c,p,g,_){const A=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,g,_):ln(new u.P(c,p),n,_);return{point:new u.P((A.point.x+1)/2*this.transform.width+Kt,(1-A.point.y)/2*this.transform.height+Kt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}getPerspectiveRatio(n,c,p,g,_){const A=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,g,_):ln(new u.P(c,p),n,_);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(n,c,p,g){return p<Kt||n>=this.screenRightBoundary||g<Kt||c>this.screenBottomBoundary}isInsideGrid(n,c,p,g){return p>=0&&n<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const n=u.an([]);return u.H(n,n,[-100,-100,0]),n}_projectCollisionBox(n,c,p,g,_,A,M,O,W,te){const ee=c*O.perspectiveRatio;let me=new u.P(1,0),be=new u.P(0,1);const Ae=new u.P(n.anchorPointX+M[0],n.anchorPointY+M[1]);if(A&&!_){const Nt=this.projectAndGetPerspectiveRatio(p,Ae.x+1,Ae.y,g,W).point.sub(O.point).unit(),St=Math.atan(Nt.y/Nt.x)+(Nt.x<0?Math.PI:0),Pt=Math.sin(St),Gt=Math.cos(St);me=new u.P(Gt,Pt),be=new u.P(-Pt,Gt)}else if(!A&&_){const Nt=-this.transform.angle,St=Math.sin(Nt),Pt=Math.cos(Nt);me=new u.P(Pt,St),be=new u.P(-St,Pt)}let Le=O.point,Ce=ee;if(_){Le=Ae;const Nt=this.transform.zoom-Math.floor(this.transform.zoom);Ce=Math.pow(2,-Nt),Ce*=this.mapProjection.getPitchedTextCorrection(this.transform,Ae,g),te||(Ce*=u.ac(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}te&&(Le=Le.add(me.mult(te.x*Ce)).add(be.mult(te.y*Ce)));const Ge=n.x1*Ce,Ke=n.x2*Ce,Re=(Ge+Ke)/2,Ye=n.y1*Ce,rt=n.y2*Ce,at=(Ye+rt)/2,gt=[{offsetX:Ge,offsetY:Ye},{offsetX:Re,offsetY:Ye},{offsetX:Ke,offsetY:Ye},{offsetX:Ke,offsetY:at},{offsetX:Ke,offsetY:rt},{offsetX:Re,offsetY:rt},{offsetX:Ge,offsetY:rt},{offsetX:Ge,offsetY:at}];let bt=[];for(const{offsetX:Nt,offsetY:St}of gt)bt.push(new u.P(Le.x+me.x*Nt+be.x*St,Le.y+me.y*Nt+be.y*St));let Dt=!1;if(_){const Nt=bt.map(St=>this.projectAndGetPerspectiveRatio(p,St.x,St.y,g,W));Dt=Nt.some(St=>!St.isOccluded),bt=Nt.map(St=>St.point)}else Dt=!0;return{box:u.ao(bt),allPointsOccluded:!Dt}}}function lr(v,n,c){return n*(u.W/(v.tileSize*Math.pow(2,c-v.tileID.overscaledZ)))}class Tr{constructor(n,c,p,g){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?c:-c))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Dr{constructor(n,c,p,g,_){this.text=new Tr(n?n.text:null,c,p,_),this.icon=new Tr(n?n.icon:null,c,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Vr{constructor(n,c,p){this.text=n,this.icon=c,this.skipFade=p}}class un{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class mr{constructor(n,c,p,g,_){this.bucketInstanceId=n,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class en{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const c=++this.maxGroupID;this.collisionGroups[n]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[n]}}function En(v,n,c,p,g){const{horizontalAlign:_,verticalAlign:A}=u.au(v);return new u.P(-(_-.5)*n+p[0]*g,-(A-.5)*c+p[1]*g)}class ii{constructor(n,c,p,g,_,A){this.transform=n.clone(),this.terrain=p,this.collisionIndex=new Er(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new en(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const c=this.terrain;return c?(p,g)=>c.getElevation(n,p,g):null}getBucketParts(n,c,p,g){const _=p.getBucket(c),A=p.latestFeatureIndex;if(!_||!A||c.id!==_.layerIds[0])return;const M=p.collisionBoxArray,O=_.layers[0].layout,W=_.layers[0].paint,te=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),ee=p.tileSize/u.W,me=p.tileID.toUnwrapped(),be=this.transform.calculatePosMatrix(me),Ae=O.get("text-pitch-alignment")==="map",Le=O.get("text-rotation-alignment")==="map",Ce=lr(p,1,this.transform.zoom),Ge=this.collisionIndex.mapProjection.translatePosition(this.transform,p,W.get("text-translate"),W.get("text-translate-anchor")),Ke=this.collisionIndex.mapProjection.translatePosition(this.transform,p,W.get("icon-translate"),W.get("icon-translate-anchor")),Re=$n(be,Ae,Le,this.transform,Ce);let Ye=null;if(Ae){const at=ni(be,Ae,Le,this.transform,Ce);Ye=u.K([],this.transform.labelPlaneMatrix,at)}this.retainedQueryData[_.bucketInstanceId]=new mr(_.bucketInstanceId,A,_.sourceLayerIndex,_.index,p.tileID);const rt={bucket:_,layout:O,translationText:Ge,translationIcon:Ke,posMatrix:be,unwrappedTileID:me,textLabelPlaneMatrix:Re,labelToScreenMatrix:Ye,scale:te,textPixelRatio:ee,holdingForFade:p.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:u.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const at of _.sortKeyRanges){const{sortKey:gt,symbolInstanceStart:bt,symbolInstanceEnd:Dt}=at;n.push({sortKey:gt,symbolInstanceStart:bt,symbolInstanceEnd:Dt,parameters:rt})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(n,c,p,g,_,A,M,O,W,te,ee,me,be,Ae,Le,Ce,Ge,Ke,Re){const Ye=u.aq[n.textAnchor],rt=[n.textOffset0,n.textOffset1],at=En(Ye,p,g,rt,_),gt=this.collisionIndex.placeCollisionBox(c,me,O,W,te,M,A,Ce,ee.predicate,Re,at);if((!Ke||this.collisionIndex.placeCollisionBox(Ke,me,O,W,te,M,A,Ge,ee.predicate,Re,at).placeable)&&gt.placeable){let bt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(bt=this.prevPlacement.variableOffsets[be.crossTileID].anchor),be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[be.crossTileID]={textOffset:rt,width:p,height:g,anchor:Ye,textBoxScale:_,prevAnchor:bt},this.markUsedJustification(Ae,Ye,be,Le),Ae.allowVerticalPlacement&&(this.markUsedOrientation(Ae,Le,be),this.placedOrientations[be.crossTileID]=Le),{shift:at,placedGlyphBoxes:gt}}}placeLayerBucketPart(n,c,p){const{bucket:g,layout:_,translationText:A,translationIcon:M,posMatrix:O,unwrappedTileID:W,textLabelPlaneMatrix:te,labelToScreenMatrix:ee,textPixelRatio:me,holdingForFade:be,collisionBoxArray:Ae,partiallyEvaluatedTextSize:Le,collisionGroup:Ce}=n.parameters,Ge=_.get("text-optional"),Ke=_.get("icon-optional"),Re=u.ar(_,"text-overlap","text-allow-overlap"),Ye=Re==="always",rt=u.ar(_,"icon-overlap","icon-allow-overlap"),at=rt==="always",gt=_.get("text-rotation-alignment")==="map",bt=_.get("text-pitch-alignment")==="map",Dt=_.get("icon-text-fit")!=="none",Nt=_.get("symbol-z-order")==="viewport-y",St=Ye&&(at||!g.hasIconData()||Ke),Pt=at&&(Ye||!g.hasTextData()||Ge);!g.collisionArrays&&Ae&&g.deserializeCollisionBoxes(Ae);const Gt=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),gr=(It,jt,hr)=>{var rn,Sr;if(c[It.crossTileID])return;if(be)return void(this.placements[It.crossTileID]=new Vr(!1,!1,!1));let Ar=!1,nn=!1,ui=!0,Ro=null,on={box:null,placeable:!1,offscreen:null},Di={box:null,placeable:!1,offscreen:null},Ii=null,ci=null,hi=null,jo=0,Zs=0,th=0;jt.textFeatureIndex?jo=jt.textFeatureIndex:It.useRuntimeCollisionCircles&&(jo=It.featureIndex),jt.verticalTextFeatureIndex&&(Zs=jt.verticalTextFeatureIndex);const $l=jt.textBox;if($l){const Jn=fi=>{let di=u.ah.horizontal;if(g.allowVerticalPlacement&&!fi&&this.prevPlacement){const Zn=this.prevPlacement.placedOrientations[It.crossTileID];Zn&&(this.placedOrientations[It.crossTileID]=Zn,di=Zn,this.markUsedOrientation(g,di,It))}return di},zo=(fi,di)=>{if(g.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const Zn of g.writingModes)if(Zn===u.ah.vertical?(on=di(),Di=on):on=fi(),on&&on.placeable)break}else on=fi()},cs=It.textAnchorOffsetStartIndex,Ul=It.textAnchorOffsetEndIndex;if(Ul===cs){const fi=(di,Zn)=>{const fn=this.collisionIndex.placeCollisionBox(di,Re,me,O,W,bt,gt,A,Ce.predicate,Gt);return fn&&fn.placeable&&(this.markUsedOrientation(g,Zn,It),this.placedOrientations[It.crossTileID]=Zn),fn};zo(()=>fi($l,u.ah.horizontal),()=>{const di=jt.verticalTextBox;return g.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&di?fi(di,u.ah.vertical):{box:null,offscreen:null}}),Jn(on&&on.placeable)}else{let fi=u.aq[(Sr=(rn=this.prevPlacement)===null||rn===void 0?void 0:rn.variableOffsets[It.crossTileID])===null||Sr===void 0?void 0:Sr.anchor];const di=(fn,Vl,ed)=>{const Gn=fn.x2-fn.x1,pm=fn.y2-fn.y1,nh=It.textBoxScale,ih=Dt&&rt==="never"?Vl:null;let hs=null,mm=Re==="never"?1:2,td="never";fi&&mm++;for(let rd=0;rd<mm;rd++){for(let nd=cs;nd<Ul;nd++){const oh=g.textAnchorOffsets.get(nd);if(fi&&oh.textAnchor!==fi)continue;const Gl=this.attemptAnchorPlacement(oh,fn,Gn,pm,nh,gt,bt,me,O,W,Ce,td,It,g,ed,A,M,ih,Gt);if(Gl&&(hs=Gl.placedGlyphBoxes,hs&&hs.placeable))return Ar=!0,Ro=Gl.shift,hs}fi?fi=null:td=Re}return p&&!hs&&(hs={box:this.collisionIndex.placeCollisionBox($l,"always",me,O,W,bt,gt,A,Ce.predicate,Gt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),hs};zo(()=>di($l,jt.iconBox,u.ah.horizontal),()=>{const fn=jt.verticalTextBox;return g.allowVerticalPlacement&&(!on||!on.placeable)&&It.numVerticalGlyphVertices>0&&fn?di(fn,jt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),on&&(Ar=on.placeable,ui=on.offscreen);const Zn=Jn(on&&on.placeable);if(!Ar&&this.prevPlacement){const fn=this.prevPlacement.variableOffsets[It.crossTileID];fn&&(this.variableOffsets[It.crossTileID]=fn,this.markUsedJustification(g,fn.anchor,It,Zn))}}}if(Ii=on,Ar=Ii&&Ii.placeable,ui=Ii&&Ii.offscreen,It.useRuntimeCollisionCircles){const Jn=g.text.placedSymbolArray.get(It.centerJustifiedTextSymbolIndex),zo=u.ai(g.textSizeData,Le,Jn),cs=_.get("text-padding");ci=this.collisionIndex.placeCollisionCircles(Re,Jn,g.lineVertexArray,g.glyphOffsetArray,zo,O,W,te,ee,p,bt,Ce.predicate,It.collisionCircleDiameter,cs,A,Gt),ci.circles.length&&ci.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),Ar=Ye||ci.circles.length>0&&!ci.collisionDetected,ui=ui&&ci.offscreen}if(jt.iconFeatureIndex&&(th=jt.iconFeatureIndex),jt.iconBox){const Jn=zo=>this.collisionIndex.placeCollisionBox(zo,rt,me,O,W,bt,gt,M,Ce.predicate,Gt,Dt&&Ro?Ro:void 0);Di&&Di.placeable&&jt.verticalIconBox?(hi=Jn(jt.verticalIconBox),nn=hi.placeable):(hi=Jn(jt.iconBox),nn=hi.placeable),ui=ui&&hi.offscreen}const qs=Ge||It.numHorizontalGlyphVertices===0&&It.numVerticalGlyphVertices===0,rh=Ke||It.numIconVertices===0;qs||rh?rh?qs||(nn=nn&&Ar):Ar=nn&&Ar:nn=Ar=nn&&Ar;const Qf=nn&&hi.placeable;if(Ar&&Ii.placeable&&this.collisionIndex.insertCollisionBox(Ii.box,Re,_.get("text-ignore-placement"),g.bucketInstanceId,Di&&Di.placeable&&Zs?Zs:jo,Ce.ID),Qf&&this.collisionIndex.insertCollisionBox(hi.box,rt,_.get("icon-ignore-placement"),g.bucketInstanceId,th,Ce.ID),ci&&Ar&&this.collisionIndex.insertCollisionCircles(ci.circles,Re,_.get("text-ignore-placement"),g.bucketInstanceId,jo,Ce.ID),p&&this.storeCollisionData(g.bucketInstanceId,hr,jt,Ii,hi,ci),It.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[It.crossTileID]=new Vr(Ar||St,nn||Pt,ui||g.justReloaded),c[It.crossTileID]=!0};if(Nt){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const It=g.getSortedSymbolIndexes(this.transform.angle);for(let jt=It.length-1;jt>=0;--jt){const hr=It[jt];gr(g.symbolInstances.get(hr),g.collisionArrays[hr],hr)}}else for(let It=n.symbolInstanceStart;It<n.symbolInstanceEnd;It++)gr(g.symbolInstances.get(It),g.collisionArrays[It],It);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const It=this.collisionCircleArrays[g.bucketInstanceId];u.as(It.invProjMatrix,O),It.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(n,c,p,g,_,A){if(p.textBox||p.iconBox){let M,O;this.collisionBoxArrays.has(n)?M=this.collisionBoxArrays.get(n):(M=new Map,this.collisionBoxArrays.set(n,M)),M.has(c)?O=M.get(c):(O={text:null,icon:null},M.set(c,O)),p.textBox&&(O.text=g.box),p.iconBox&&(O.icon=_.box)}if(A){let M=this.collisionCircleArrays[n];M===void 0&&(M=this.collisionCircleArrays[n]=new un);for(let O=0;O<A.circles.length;O+=4)M.circles.push(A.circles[O+0]),M.circles.push(A.circles[O+1]),M.circles.push(A.circles[O+2]),M.circles.push(A.collisionDetected?1:0)}}markUsedJustification(n,c,p,g){let _;_=g===u.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.at(c)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const M of A)M>=0&&(n.text.placedSymbolArray.get(M).crossTileID=_>=0&&M!==_?0:p.crossTileID)}markUsedOrientation(n,c,p){const g=c===u.ah.horizontal||c===u.ah.horizontalOnly?c:0,_=c===u.ah.vertical?c:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const M of A)n.text.placedSymbolArray.get(M).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const g=c?c.symbolFadeChange(n):1,_=c?c.opacities:{},A=c?c.variableOffsets:{},M=c?c.placedOrientations:{};for(const O in this.placements){const W=this.placements[O],te=_[O];te?(this.opacities[O]=new Dr(te,g,W.text,W.icon),p=p||W.text!==te.text.placed||W.icon!==te.icon.placed):(this.opacities[O]=new Dr(null,g,W.text,W.icon,W.skipFade),p=p||W.text||W.icon)}for(const O in _){const W=_[O];if(!this.opacities[O]){const te=new Dr(W,g,!1,!1);te.isHidden()||(this.opacities[O]=te,p=p||W.text.placed||W.icon.placed)}}for(const O in A)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=A[O]);for(const O in M)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=M[O]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:n)}updateLayerOpacities(n,c){const p={};for(const g of c){const _=g.getBucket(n);_&&g.latestFeatureIndex&&n.id===_.layerIds[0]&&this.updateBucketOpacities(_,g.tileID,p,g.collisionBoxArray)}}updateBucketOpacities(n,c,p,g){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const _=n.layers[0],A=_.layout,M=new Dr(null,0,!1,!1,!0),O=A.get("text-allow-overlap"),W=A.get("icon-allow-overlap"),te=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ee=A.get("text-rotation-alignment")==="map",me=A.get("text-pitch-alignment")==="map",be=A.get("icon-text-fit")!=="none",Ae=new Dr(null,0,O&&(W||!n.hasIconData()||A.get("icon-optional")),W&&(O||!n.hasTextData()||A.get("text-optional")),!0);!n.collisionArrays&&g&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(g);const Le=(Ge,Ke,Re)=>{for(let Ye=0;Ye<Ke/4;Ye++)Ge.opacityVertexArray.emplaceBack(Re);Ge.hasVisibleVertices=Ge.hasVisibleVertices||Re!==Fs},Ce=this.collisionBoxArrays.get(n.bucketInstanceId);for(let Ge=0;Ge<n.symbolInstances.length;Ge++){const Ke=n.symbolInstances.get(Ge),{numHorizontalGlyphVertices:Re,numVerticalGlyphVertices:Ye,crossTileID:rt}=Ke;let at=this.opacities[rt];p[rt]?at=M:at||(at=Ae,this.opacities[rt]=at),p[rt]=!0;const gt=Ke.numIconVertices>0,bt=this.placedOrientations[Ke.crossTileID],Dt=bt===u.ah.vertical,Nt=bt===u.ah.horizontal||bt===u.ah.horizontalOnly;if(Re>0||Ye>0){const Pt=oi(at.text);Le(n.text,Re,Dt?Fs:Pt),Le(n.text,Ye,Nt?Fs:Pt);const Gt=at.text.isHidden();[Ke.rightJustifiedTextSymbolIndex,Ke.centerJustifiedTextSymbolIndex,Ke.leftJustifiedTextSymbolIndex].forEach(jt=>{jt>=0&&(n.text.placedSymbolArray.get(jt).hidden=Gt||Dt?1:0)}),Ke.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(Ke.verticalPlacedTextSymbolIndex).hidden=Gt||Nt?1:0);const gr=this.variableOffsets[Ke.crossTileID];gr&&this.markUsedJustification(n,gr.anchor,Ke,bt);const It=this.placedOrientations[Ke.crossTileID];It&&(this.markUsedJustification(n,"left",Ke,It),this.markUsedOrientation(n,It,Ke))}if(gt){const Pt=oi(at.icon),Gt=!(be&&Ke.verticalPlacedIconSymbolIndex&&Dt);Ke.placedIconSymbolIndex>=0&&(Le(n.icon,Ke.numIconVertices,Gt?Pt:Fs),n.icon.placedSymbolArray.get(Ke.placedIconSymbolIndex).hidden=at.icon.isHidden()),Ke.verticalPlacedIconSymbolIndex>=0&&(Le(n.icon,Ke.numVerticalIconVertices,Gt?Fs:Pt),n.icon.placedSymbolArray.get(Ke.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const St=Ce&&Ce.has(Ge)?Ce.get(Ge):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Pt=n.collisionArrays[Ge];if(Pt){let Gt=new u.P(0,0);if(Pt.textBox||Pt.verticalTextBox){let gr=!0;if(te){const It=this.variableOffsets[rt];It?(Gt=En(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale),ee&&Gt._rotate(me?this.transform.angle:-this.transform.angle)):gr=!1}if(Pt.textBox||Pt.verticalTextBox){let It;Pt.textBox&&(It=Dt),Pt.verticalTextBox&&(It=Nt),bi(n.textCollisionBox.collisionVertexArray,at.text.placed,!gr||It,St.text,Gt.x,Gt.y)}}if(Pt.iconBox||Pt.verticalIconBox){const gr=!!(!Nt&&Pt.verticalIconBox);let It;Pt.iconBox&&(It=gr),Pt.verticalIconBox&&(It=!gr),bi(n.iconCollisionBox.collisionVertexArray,at.icon.placed,It,St.icon,be?Gt.x:0,be?Gt.y:0)}}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=Ge.invProjMatrix,n.placementViewportMatrix=Ge.viewportMatrix,n.collisionCircleArray=Ge.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>n}setStale(){this.stale=!0}}function bi(v,n,c,p,g,_){p&&p.length!==0||(p=[0,0,0,0]);const A=p[0]-Kt,M=p[1]-Kt,O=p[2]-Kt,W=p[3]-Kt;v.emplaceBack(n?1:0,c?1:0,g||0,_||0,A,M),v.emplaceBack(n?1:0,c?1:0,g||0,_||0,O,M),v.emplaceBack(n?1:0,c?1:0,g||0,_||0,O,W),v.emplaceBack(n?1:0,c?1:0,g||0,_||0,A,W)}const Tn=Math.pow(2,25),Ha=Math.pow(2,24),_l=Math.pow(2,17),Mr=Math.pow(2,16),xl=Math.pow(2,9),Pr=Math.pow(2,8),Pn=Math.pow(2,1);function oi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const n=v.placed?1:0,c=Math.floor(127*v.opacity);return c*Tn+n*Ha+c*_l+n*Mr+c*xl+n*Pr+c*Pn+n}const Fs=0;function ai(){return{isOccluded:(v,n,c)=>!1,getPitchedTextCorrection:(v,n,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,n,c,p){throw new Error("Not implemented.")},translatePosition:(v,n,c,p)=>function(g,_,A,M,O=!1){if(!A[0]&&!A[1])return[0,0];const W=O?M==="map"?g.angle:0:M==="viewport"?-g.angle:0;if(W){const te=Math.sin(W),ee=Math.cos(W);A=[A[0]*ee-A[1]*te,A[0]*te+A[1]*ee]}return[O?A[0]:lr(_,A[0],g.zoom),O?A[1]:lr(_,A[1],g.zoom)]}(v,n,c,p),getCircleRadiusCorrection:v=>1}}class zi{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,c,p,g,_){const A=this._bucketParts;for(;this._currentTileIndex<n.length;)if(c.getBucketParts(A,g,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((M,O)=>M.sortKey-O.sortKey));this._currentPartIndex<A.length;)if(c.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class Mc{constructor(n,c,p,g,_,A,M,O){this.placement=new ii(n,ai(),c,A,M,O),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(n,c,p){const g=b.now(),_=()=>!this._forceFullPlacement&&b.now()-g>2;for(;this._currentPlacementIndex>=0;){const A=c[n[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=M)&&(!A.maxzoom||A.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new zi(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Un=512/u.W/2;class xn{constructor(n,c,p){this.tileID=n,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<c.length;_++){const A=c.get(_),M=A.key,O=g.get(M);O?O.push(A):g.set(M,[A])}for(const[_,A]of g){const M={positions:A.map(O=>({x:Math.floor(O.anchorX*Un),y:Math.floor(O.anchorY*Un)})),crossTileIDs:A.map(O=>O.crossTileID)};if(M.positions.length>128){const O=new u.av(M.positions.length,16,Uint16Array);for(const{x:W,y:te}of M.positions)O.add(W,te);O.finish(),delete M.positions,M.index=O}this._symbolsByKey[_]=M}}getScaledCoordinates(n,c){const{x:p,y:g,z:_}=this.tileID.canonical,{x:A,y:M,z:O}=c.canonical,W=Un/Math.pow(2,O-_),te=(M*u.W+n.anchorY)*W,ee=g*u.W*Un;return{x:Math.floor((A*u.W+n.anchorX)*W-p*u.W*Un),y:Math.floor(te-ee)}}findMatches(n,c,p){const g=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let _=0;_<n.length;_++){const A=n.get(_);if(A.crossTileID)continue;const M=this._symbolsByKey[A.key];if(!M)continue;const O=this.getScaledCoordinates(A,c);if(M.index){const W=M.index.range(O.x-g,O.y-g,O.x+g,O.y+g).sort();for(const te of W){const ee=M.crossTileIDs[te];if(!p[ee]){p[ee]=!0,A.crossTileID=ee;break}}}else if(M.positions)for(let W=0;W<M.positions.length;W++){const te=M.positions[W],ee=M.crossTileIDs[W];if(Math.abs(te.x-O.x)<=g&&Math.abs(te.y-O.y)<=g&&!p[ee]){p[ee]=!0,A.crossTileID=ee;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class Rs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ya{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const c=Math.round((n-this.lng)/360);if(c!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const A in g){const M=g[A];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+c),_[M.tileID.key]=M}this.indexes[p]=_}this.lng=n}addBucket(n,c,p){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let _=0;_<c.symbolInstances.length;_++)c.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const g=this.usedCrossTileIDs[n.overscaledZ];for(const _ in this.indexes){const A=this.indexes[_];if(Number(_)>n.overscaledZ)for(const M in A){const O=A[M];O.tileID.isChildOf(n)&&O.findMatches(c.symbolInstances,n,g)}else{const M=A[n.scaledTo(Number(_)).key];M&&M.findMatches(c.symbolInstances,n,g)}}for(let _=0;_<c.symbolInstances.length;_++){const A=c.symbolInstances.get(_);A.crossTileID||(A.crossTileID=p.generate(),g[A.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new xn(n,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(n,c){for(const p of c.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[n][g]}removeStaleBuckets(n){let c=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)n[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],c=!0)}return c}}class cn{constructor(){this.layerIndexes={},this.crossTileIDs=new Rs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,c,p){let g=this.layerIndexes[n.id];g===void 0&&(g=this.layerIndexes[n.id]=new ya);let _=!1;const A={};g.handleWrapJump(p);for(const M of c){const O=M.getBucket(n);O&&n.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(M.tileID,O,this.crossTileIDs)&&(_=!0),A[O.bucketInstanceId]=!0)}return g.removeStaleBuckets(A)&&(_=!0),_}pruneUnusedLayers(n){const c={};n.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const va=(v,n)=>u.t(v,n&&n.filter(c=>c.identifier!=="source.canvas")),An=u.aw();class wl extends u.E{constructor(n,c={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const g=this.sourceCaches[p].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[p].reload()}},this.map=n,this.dispatcher=new ft(ot(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,g)=>this.getGlyphs(p,g)),this.dispatcher.registerMessageHandler("GI",(p,g)=>this.getImages(p,g)),this.imageManager=new ye,this.imageManager.setEventedParent(this),this.glyphManager=new J(n._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Pe(256,512),this.crossTileSymbolIndex=new cn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),$().on(ht,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const g=this.sourceCaches[p.sourceId];if(!g)return;const _=g.getSource();if(_&&_.vectorLayerIds)for(const A in this._layers){const M=this._layers[A];M.source===_.id&&this._validateLayer(M)}})}loadURL(n,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const g=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController,u.h(g,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,c,p)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new u.j(_))})}loadJSON(n,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(n,c,p)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(An,{validate:!1})}_load(n,c,p){var g;const _=c.transformStyle?c.transformStyle(p,n):n;if(!c.validate||!va(this,u.x(_))){this._loaded=!0,this.stylesheet=_;for(const A in _.sources)this.addSource(A,_.sources[A],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new we(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const n=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of n){const p=u.aA(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(n,c=!1,p=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,A,M,O){return u._(this,void 0,void 0,function*(){const W=B(_),te=M>1?"@2x":"",ee={},me={};for(const{id:be,url:Ae}of W){const Le=A.transformRequest(Q(Ae,te,".json"),"SpriteJSON");ee[be]=u.h(Le,O);const Ce=A.transformRequest(Q(Ae,te,".png"),"SpriteImage");me[be]=G.getImage(Ce,O)}return yield Promise.all([...Object.values(ee),...Object.values(me)]),function(be,Ae){return u._(this,void 0,void 0,function*(){const Le={};for(const Ce in be){Le[Ce]={};const Ge=b.getImageCanvasContext((yield Ae[Ce]).data),Ke=(yield be[Ce]).data;for(const Re in Ke){const{width:Ye,height:rt,x:at,y:gt,sdf:bt,pixelRatio:Dt,stretchX:Nt,stretchY:St,content:Pt,textFitWidth:Gt,textFitHeight:gr}=Ke[Re];Le[Ce][Re]={data:null,pixelRatio:Dt,sdf:bt,stretchX:Nt,stretchY:St,content:Pt,textFitWidth:Gt,textFitHeight:gr,spriteData:{width:Ye,height:rt,x:at,y:gt,context:Ge}}}}return Le})}(ee,me)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const A in _){this._spritesImagesIds[A]=[];const M=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(O=>!(O in _)):[];for(const O of M)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in _[A]){const W=A==="default"?O:`${A}:${O}`;this._spritesImagesIds[A].push(W),W in this.imageManager.images?this.imageManager.updateImage(W,_[A][O],!1):this.imageManager.addImage(W,_[A][O]),c&&(this._changedImages[W]=!0)}}}).catch(_=>{this._spriteRequest=null,g=_,this.fire(new u.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(n){const c=this.sourceCaches[n.source];if(!c)return;const p=n.sourceLayer;if(!p)return;const g=c.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const c=this._serializedAllLayers();if(!n||n.length===0)return Object.values(c);const p=[];for(const g of n)c[g]&&p.push(c[g]);return p}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const g=this._layers[p];g.type!=="custom"&&(n[p]=g.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const c=this._changed;if(c){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const A in this._updatedSources){const M=this._updatedSources[A];if(M==="reload")this._reloadSource(A);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(n,this._availableImages),!_.isHidden(n.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];!!p[g]!=!!_.used&&_.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(n),this.z=n.zoom,c&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,c={}){var p;this._checkLoaded();const g=this.serialize();if(n=c.transformStyle?c.transformStyle(g,n):n,((p=c.validate)===null||p===void 0||p)&&va(this,u.x(n)))return!1;(n=u.aB(n)).layers=u.az(n.layers);const _=u.aC(g,n),A=this._getOperationsToPerform(_);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const M of A.operations)M();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const c=[],p=[];for(const g of n)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":c.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":c.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":c.push(()=>{});break;default:p.push(g.command)}return{operations:c,unimplemented:p}}addImage(n,c){if(this.getImage(n))return this.fire(new u.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,c),this._afterImageUpdated(n)}updateImage(n,c){this.imageManager.updateImage(n,c)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new u.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,c,p={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.x.source,`sources.${n}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const g=this.sourceCaches[n]=new Ve(n,c,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:n})),g.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===n)return this.fire(new u.j(new Error(`Source "${n}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],c.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,c){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const p=this.sourceCaches[n].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,c,p={}){this._checkLoaded();const g=n.id;if(this.getLayer(g))return void this.fire(new u.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(n.type==="custom"){if(va(this,u.aD(n)))return;_=u.aA(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(g,n.source),n=u.aB(n),n=u.e(n,{source:g})),this._validate(u.x.layer,`layers.${g}`,n,{arrayIndex:-1},p))return;_=u.aA(n),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const A=c?this._order.indexOf(c):this._order.length;if(c&&A===-1)this.fire(new u.j(new Error(`Cannot add layer "${g}" before non-existing layer "${c}".`)));else{if(this._order.splice(A,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const M=this._removedLayers[g];delete this._removedLayers[g],M.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(n,c){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new u.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===c)return;const p=this._order.indexOf(n);this._order.splice(p,1);const g=c?this._order.indexOf(c):this._order.length;c&&g===-1?this.fire(new u.j(new Error(`Cannot move layer "${n}" before non-existing layer "${c}".`))):(this._order.splice(g,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const c=this._layers[n];if(!c)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${n}".`)));c.setEventedParent(null);const p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=c,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],c.onRemove&&c.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,c,p){this._checkLoaded();const g=this.getLayer(n);g?g.minzoom===c&&g.maxzoom===p||(c!=null&&(g.minzoom=c),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,c,p={}){this._checkLoaded();const g=this.getLayer(n);if(g){if(!u.aE(g.filter,c))return c==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.x.filter,`layers.${g.id}.filter`,c,null,p)||(g.filter=u.aB(c),this._updateLayer(g)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return u.aB(this.getLayer(n).filter)}setLayoutProperty(n,c,p,g={}){this._checkLoaded();const _=this.getLayer(n);_?u.aE(_.getLayoutProperty(c),p)||(_.setLayoutProperty(c,p,g),this._updateLayer(_)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,c){const p=this.getLayer(n);if(p)return p.getLayoutProperty(c);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,c,p,g={}){this._checkLoaded();const _=this.getLayer(n);_?u.aE(_.getPaintProperty(c),p)||(_.setPaintProperty(c,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,c){return this.getLayer(n).getPaintProperty(c)}setFeatureState(n,c){this._checkLoaded();const p=n.source,g=n.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const A=_.getSource().type;A==="geojson"&&g?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||g?(n.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,n.id,c)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,c){this._checkLoaded();const p=n.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,A=_==="vector"?n.sourceLayer:void 0;_!=="vector"||A?c&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(A,n.id,c):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const c=n.source,p=n.sourceLayer,g=this.sourceCaches[c];if(g!==void 0)return g.getSource().type!=="vector"||p?(n.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,n.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=u.aF(this.sourceCaches,_=>_.serialize()),c=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return u.aG({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:n,layers:c,terrain:p},_=>_!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const c=A=>this._layers[A].type==="fill-extrusion",p={},g=[];for(let A=this._order.length-1;A>=0;A--){const M=this._order[A];if(c(M)){p[M]=A;for(const O of n){const W=O[M];if(W)for(const te of W)g.push(te)}}}g.sort((A,M)=>M.intersectionZ-A.intersectionZ);const _=[];for(let A=this._order.length-1;A>=0;A--){const M=this._order[A];if(c(M))for(let O=g.length-1;O>=0;O--){const W=g[O].feature;if(p[W.layer.id]<A)break;_.push(W),g.pop()}else for(const O of n){const W=O[M];if(W)for(const te of W)_.push(te.feature)}}return _}queryRenderedFeatures(n,c,p){c&&c.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",c.filter,null,c);const g={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const M of c.layers){const O=this._layers[M];if(!O)return this.fire(new u.j(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];g[O.source]=!0}}const _=[];c.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const M in this.sourceCaches)c.layers&&!g[M]||_.push(mt(this.sourceCaches[M],this._layers,A,n,c,p));return this.placement&&_.push(function(M,O,W,te,ee,me,be){const Ae={},Le=me.queryRenderedSymbols(te),Ce=[];for(const Ge of Object.keys(Le).map(Number))Ce.push(be[Ge]);Ce.sort(wt);for(const Ge of Ce){const Ke=Ge.featureIndex.lookupSymbolFeatures(Le[Ge.bucketInstanceId],O,Ge.bucketIndex,Ge.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,M);for(const Re in Ke){const Ye=Ae[Re]=Ae[Re]||[],rt=Ke[Re];rt.sort((at,gt)=>{const bt=Ge.featureSortOrder;if(bt){const Dt=bt.indexOf(at.featureIndex);return bt.indexOf(gt.featureIndex)-Dt}return gt.featureIndex-at.featureIndex});for(const at of rt)Ye.push(at)}}for(const Ge in Ae)Ae[Ge].forEach(Ke=>{const Re=Ke.feature,Ye=W[M[Ge].source].getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=Ye});return Ae}(this._layers,A,this.sourceCaches,n,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(n,c){c&&c.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[n];return p?function(g,_){const A=g.getRenderableIds().map(W=>g.getTileByID(W)),M=[],O={};for(let W=0;W<A.length;W++){const te=A[W],ee=te.tileID.canonical.key;O[ee]||(O[ee]=!0,te.querySourceFeatures(M,_))}return M}(p,c):[]}getLight(){return this.light.getLight()}setLight(n,c={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const A in n)if(!u.aE(n[A],p[A])){g=!0;break}if(!g)return;const _={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,c),this.light.updateTransitions(_)}_validate(n,c,p,g,_={}){return(!_||_.validate!==!1)&&va(this,n.call(u.x,u.e({key:c,style:this.serialize(),value:p,styleSpec:u.v},g)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),$().off(ht,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const c in this.sourceCaches)this.sourceCaches[c].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,c,p,g,_=!1){let A=!1,M=!1;const O={};for(const W of this._order){const te=this._layers[W];if(te.type!=="symbol")continue;if(!O[te.source]){const me=this.sourceCaches[te.source];O[te.source]=me.getRenderableIds(!0).map(be=>me.getTileByID(be)).sort((be,Ae)=>Ae.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Ae.tileID)?-1:1))}const ee=this.crossTileSymbolIndex.addLayer(te,O[te.source],n.center.lng);A=A||ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),n.zoom))&&(this.pauseablePlacement=new Mc(n,this.map.terrain,this._order,_,c,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),M=!0),A&&this.pauseablePlacement.placement.setStale()),M||A)for(const W of this._order){const te=this._layers[W];te.type==="symbol"&&this.placement.updateLayerOpacities(te,O[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,c){return u._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[c.source];return g&&g.setDependencies(c.tileID.key,c.type,c.icons),p})}getGlyphs(n,c){return u._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),g=this.sourceCaches[c.source];return g&&g.setDependencies(c.tileID.key,c.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,c={}){this._checkLoaded(),n&&this._validate(u.x.glyphs,"glyphs",n,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,c,p={},g){this._checkLoaded();const _=[{id:n,url:c}],A=[...B(this.stylesheet.sprite),..._];this._validate(u.x.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(_,!0,g))}removeSprite(n){this._checkLoaded();const c=B(this.stylesheet.sprite);if(c.find(p=>p.id===n)){if(this._spritesImagesIds[n])for(const p of this._spritesImagesIds[n])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===n),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return B(this.stylesheet.sprite)}setSprite(n,c={},p){this._checkLoaded(),n&&this._validate(u.x.sprite,"sprite",n,null,c)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,p):(this._unloadSprite(),p&&p(null)))}}var mo=u.X([{name:"a_pos",type:"Int16",components:2}]),Mu="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Za={prelude:Rr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Rr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Rr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Rr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Rr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Rr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Rr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Rr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Rr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Rr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Rr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Rr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Rr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Rr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Rr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Rr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Rr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Rr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Rr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Rr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Rr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Rr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Rr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Rr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Rr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Rr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Rr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Mu),terrainDepth:Rr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Mu),terrainCoords:Rr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Mu)};function Rr(v,n){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=n.match(/attribute ([\w]+) ([\w]+)/g),g=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=_?_.concat(g):g,M={};return{fragmentSource:v=v.replace(c,(O,W,te,ee,me)=>(M[me]=!0,W==="define"?`
#ifndef HAS_UNIFORM_u_${me}
varying ${te} ${ee} ${me};
#else
uniform ${te} ${ee} u_${me};
#endif
`:`
#ifdef HAS_UNIFORM_u_${me}
    ${te} ${ee} ${me} = u_${me};
#endif
`)),vertexSource:n=n.replace(c,(O,W,te,ee,me)=>{const be=ee==="float"?"vec2":"vec4",Ae=me.match(/color/)?"color":be;return M[me]?W==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
attribute ${te} ${be} a_${me};
varying ${te} ${ee} ${me};
#else
uniform ${te} ${ee} u_${me};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = a_${me};
#else
    ${te} ${ee} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = unpack_mix_${Ae}(a_${me}, u_${me}_t);
#else
    ${te} ${ee} ${me} = u_${me};
#endif
`:W==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
attribute ${te} ${be} a_${me};
#else
uniform ${te} ${ee} u_${me};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${te} ${ee} ${me} = a_${me};
#else
    ${te} ${ee} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${te} ${ee} ${me} = unpack_mix_${Ae}(a_${me}, u_${me}_t);
#else
    ${te} ${ee} ${me} = u_${me};
#endif
`}),staticAttributes:p,staticUniforms:A}}class _a{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,c,p,g,_,A,M,O,W){this.context=n;let te=this.boundPaintVertexBuffers.length!==g.length;for(let ee=0;!te&&ee<g.length;ee++)this.boundPaintVertexBuffers[ee]!==g[ee]&&(te=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||te||this.boundIndexBuffer!==_||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==W?this.freshBind(c,p,g,_,A,M,O,W):(n.bindVertexArray.set(this.vao),M&&M.bind(),_&&_.dynamicDraw&&_.bind(),O&&O.bind(),W&&W.bind())}freshBind(n,c,p,g,_,A,M,O){const W=n.numAttributes,te=this.context,ee=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=O,c.enableAttributes(ee,n);for(const me of p)me.enableAttributes(ee,n);A&&A.enableAttributes(ee,n),M&&M.enableAttributes(ee,n),O&&O.enableAttributes(ee,n),c.bind(),c.setVertexAttribPointers(ee,n,_);for(const me of p)me.bind(),me.setVertexAttribPointers(ee,n,_);A&&(A.bind(),A.setVertexAttribPointers(ee,n,_)),g&&g.bind(),M&&(M.bind(),M.setVertexAttribPointers(ee,n,_)),O&&(O.bind(),O.setVertexAttribPointers(ee,n,_)),te.currentNumAttributes=W}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function qa(v){const n=[];for(let c=0;c<v.length;c++){if(v[c]===null)continue;const p=v[c].split(" ");n.push(p.pop())}return n}class ku{constructor(n,c,p,g,_,A){const M=n.gl;this.program=M.createProgram();const O=qa(c.staticAttributes),W=p?p.getBinderAttributes():[],te=O.concat(W),ee=Za.prelude.staticUniforms?qa(Za.prelude.staticUniforms):[],me=c.staticUniforms?qa(c.staticUniforms):[],be=p?p.getBinderUniforms():[],Ae=ee.concat(me).concat(be),Le=[];for(const at of Ae)Le.indexOf(at)<0&&Le.push(at);const Ce=p?p.defines():[];_&&Ce.push("#define OVERDRAW_INSPECTOR;"),A&&Ce.push("#define TERRAIN3D;");const Ge=Ce.concat(Za.prelude.fragmentSource,c.fragmentSource).join(`
`),Ke=Ce.concat(Za.prelude.vertexSource,c.vertexSource).join(`
`),Re=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Re,Ge),M.compileShader(Re),!M.getShaderParameter(Re,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(Re)}`);M.attachShader(this.program,Re);const Ye=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Ye,Ke),M.compileShader(Ye),!M.getShaderParameter(Ye,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(Ye)}`);M.attachShader(this.program,Ye),this.attributes={};const rt={};this.numAttributes=te.length;for(let at=0;at<this.numAttributes;at++)te[at]&&(M.bindAttribLocation(this.program,at,te[at]),this.attributes[te[at]]=at);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(Ye),M.deleteShader(Re);for(let at=0;at<Le.length;at++){const gt=Le[at];if(gt&&!rt[gt]){const bt=M.getUniformLocation(this.program,gt);bt&&(rt[gt]=bt)}}this.fixedUniforms=g(n,rt),this.terrainUniforms=((at,gt)=>({u_depth:new u.aH(at,gt.u_depth),u_terrain:new u.aH(at,gt.u_terrain),u_terrain_dim:new u.aI(at,gt.u_terrain_dim),u_terrain_matrix:new u.aJ(at,gt.u_terrain_matrix),u_terrain_unpack:new u.aK(at,gt.u_terrain_unpack),u_terrain_exaggeration:new u.aI(at,gt.u_terrain_exaggeration)}))(n,rt),this.binderUniforms=p?p.getUniforms(n,rt):[]}draw(n,c,p,g,_,A,M,O,W,te,ee,me,be,Ae,Le,Ce,Ge,Ke){const Re=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(p),n.setStencilMode(g),n.setColorMode(_),n.setCullFace(A),O){n.activeTexture.set(Re.TEXTURE2),Re.bindTexture(Re.TEXTURE_2D,O.depthTexture),n.activeTexture.set(Re.TEXTURE3),Re.bindTexture(Re.TEXTURE_2D,O.texture);for(const rt in this.terrainUniforms)this.terrainUniforms[rt].set(O[rt])}for(const rt in this.fixedUniforms)this.fixedUniforms[rt].set(M[rt]);Le&&Le.setUniforms(n,this.binderUniforms,be,{zoom:Ae});let Ye=0;switch(c){case Re.LINES:Ye=2;break;case Re.TRIANGLES:Ye=3;break;case Re.LINE_STRIP:Ye=1}for(const rt of me.get()){const at=rt.vaos||(rt.vaos={});(at[W]||(at[W]=new _a)).bind(n,this,te,Le?Le.getPaintVertexBuffers():[],ee,rt.vertexOffset,Ce,Ge,Ke),Re.drawElements(c,rt.primitiveLength*Ye,Re.UNSIGNED_SHORT,rt.primitiveOffset*Ye*2)}}}function si(v,n,c){const p=1/lr(c,1,n.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,n.transform.tileZoom)/g,A=_*(c.tileID.canonical.x+c.tileID.wrap*g),M=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[A>>16,M>>16],u_pixel_coord_lower:[65535&A,65535&M]}}const js=(v,n,c,p)=>{const g=n.style.light,_=g.properties.get("position"),A=[_.x,_.y,_.z],M=function(){var W=new u.A(9);return u.A!=Float32Array&&(W[1]=0,W[2]=0,W[3]=0,W[5]=0,W[6]=0,W[7]=0),W[0]=1,W[4]=1,W[8]=1,W}();g.properties.get("anchor")==="viewport"&&function(W,te){var ee=Math.sin(te),me=Math.cos(te);W[0]=me,W[1]=ee,W[2]=0,W[3]=-ee,W[4]=me,W[5]=0,W[6]=0,W[7]=0,W[8]=1}(M,-n.transform.angle),function(W,te,ee){var me=te[0],be=te[1],Ae=te[2];W[0]=me*ee[0]+be*ee[3]+Ae*ee[6],W[1]=me*ee[1]+be*ee[4]+Ae*ee[7],W[2]=me*ee[2]+be*ee[5]+Ae*ee[8]}(A,A,M);const O=g.properties.get("color");return{u_matrix:v,u_lightpos:A,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+c,u_opacity:p}},Ou=(v,n,c,p,g,_,A)=>u.e(js(v,n,c,p),si(_,n,A),{u_height_factor:-Math.pow(2,g.overscaledZ)/A.tileSize/8}),bl=v=>({u_matrix:v}),zs=(v,n,c,p)=>u.e(bl(v),si(c,n,p)),Sl=(v,n)=>({u_matrix:v,u_world:n}),Xa=(v,n,c,p,g)=>u.e(zs(v,n,c,p),{u_world:g}),Fu=(v,n,c,p)=>{const g=v.transform;let _,A;if(p.paint.get("circle-pitch-alignment")==="map"){const M=lr(c,1,g.zoom);_=!0,A=[M,M]}else _=!1,A=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(n.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:A}},kc=(v,n,c)=>({u_matrix:v,u_inv_matrix:n,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),Ka=(v,n,c=1)=>({u_matrix:v,u_color:n,u_overlay:0,u_overlay_scale:c}),Oc=v=>({u_matrix:v}),Li=(v,n,c,p)=>({u_matrix:v,u_extrude_scale:lr(n,1,c),u_intensity:p});function El(v,n){const c=Math.pow(2,n.canonical.z),p=n.canonical.y;return[new u.Y(0,p/c).toLngLat().lat,new u.Y(0,(p+1)/c).toLngLat().lat]}const Yn=(v,n,c,p)=>{const g=v.transform;return{u_matrix:zu(v,n,c,p),u_ratio:1/lr(n,1,g.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Si=(v,n,c,p,g)=>u.e(Yn(v,n,c,g),{u_image:0,u_image_height:p}),Ru=(v,n,c,p,g)=>{const _=v.transform,A=ju(n,_);return{u_matrix:zu(v,n,c,g),u_texsize:n.imageAtlasTexture.size,u_ratio:1/lr(n,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[A,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Ls=(v,n,c,p,g,_)=>{const A=v.lineAtlas,M=ju(n,v.transform),O=c.layout.get("line-cap")==="round",W=A.getDash(p.from,O),te=A.getDash(p.to,O),ee=W.width*g.fromScale,me=te.width*g.toScale;return u.e(Yn(v,n,c,_),{u_patternscale_a:[M/ee,-W.height/2],u_patternscale_b:[M/me,-te.height/2],u_sdfgamma:A.width/(256*Math.min(ee,me)*v.pixelRatio)/2,u_image:0,u_tex_y_a:W.y,u_tex_y_b:te.y,u_mix:g.t})};function ju(v,n){return 1/lr(v,1,n.tileZoom)}function zu(v,n,c,p){return v.translatePosMatrix(p?p.posMatrix:n.tileID.posMatrix,n,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Ya=(v,n,c,p,g)=>{return{u_matrix:v,u_tl_parent:n,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(A=g.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Lu(g.paint.get("raster-hue-rotate"))};var _,A};function Lu(v){v*=Math.PI/180;const n=Math.sin(v),c=Math.cos(v);return[(2*c+1)/3,(-Math.sqrt(3)*n-c+1)/3,(Math.sqrt(3)*n-c+1)/3]}const Fc=(v,n,c,p,g,_,A,M,O,W,te,ee,me,be)=>{const Ae=A.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_pitch:Ae.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:O,u_coord_matrix:W,u_is_text:+ee,u_pitch_with_map:+p,u_is_along_line:g,u_is_variable_anchor:_,u_texsize:me,u_texture:0,u_translation:te,u_pitched_scale:be}},Rc=(v,n,c,p,g,_,A,M,O,W,te,ee,me,be,Ae)=>{const Le=A.transform;return u.e(Fc(v,n,c,p,g,_,A,M,O,W,te,ee,me,Ae),{u_gamma_scale:p?Math.cos(Le._pitch)*Le.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:+be})},kf=(v,n,c,p,g,_,A,M,O,W,te,ee,me,be)=>u.e(Rc(v,n,c,p,g,_,A,M,O,W,te,!0,ee,!0,be),{u_texsize_icon:me,u_texture_icon:1}),Of=(v,n,c)=>({u_matrix:v,u_opacity:n,u_color:c}),jc=(v,n,c,p,g,_)=>u.e(function(A,M,O,W){const te=O.imageManager.getPattern(A.from.toString()),ee=O.imageManager.getPattern(A.to.toString()),{width:me,height:be}=O.imageManager.getPixelSize(),Ae=Math.pow(2,W.tileID.overscaledZ),Le=W.tileSize*Math.pow(2,O.transform.tileZoom)/Ae,Ce=Le*(W.tileID.canonical.x+W.tileID.wrap*Ae),Ge=Le*W.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[me,be],u_mix:M.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/lr(W,1,O.transform.tileZoom),u_pixel_coord_upper:[Ce>>16,Ge>>16],u_pixel_coord_lower:[65535&Ce,65535&Ge]}}(p,_,c,g),{u_matrix:v,u_opacity:n}),Tl={fillExtrusion:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_lightpos:new u.aL(v,n.u_lightpos),u_lightintensity:new u.aI(v,n.u_lightintensity),u_lightcolor:new u.aL(v,n.u_lightcolor),u_vertical_gradient:new u.aI(v,n.u_vertical_gradient),u_opacity:new u.aI(v,n.u_opacity)}),fillExtrusionPattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_lightpos:new u.aL(v,n.u_lightpos),u_lightintensity:new u.aI(v,n.u_lightintensity),u_lightcolor:new u.aL(v,n.u_lightcolor),u_vertical_gradient:new u.aI(v,n.u_vertical_gradient),u_height_factor:new u.aI(v,n.u_height_factor),u_image:new u.aH(v,n.u_image),u_texsize:new u.aM(v,n.u_texsize),u_pixel_coord_upper:new u.aM(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(v,n.u_pixel_coord_lower),u_scale:new u.aL(v,n.u_scale),u_fade:new u.aI(v,n.u_fade),u_opacity:new u.aI(v,n.u_opacity)}),fill:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix)}),fillPattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_image:new u.aH(v,n.u_image),u_texsize:new u.aM(v,n.u_texsize),u_pixel_coord_upper:new u.aM(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(v,n.u_pixel_coord_lower),u_scale:new u.aL(v,n.u_scale),u_fade:new u.aI(v,n.u_fade)}),fillOutline:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_world:new u.aM(v,n.u_world)}),fillOutlinePattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_world:new u.aM(v,n.u_world),u_image:new u.aH(v,n.u_image),u_texsize:new u.aM(v,n.u_texsize),u_pixel_coord_upper:new u.aM(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(v,n.u_pixel_coord_lower),u_scale:new u.aL(v,n.u_scale),u_fade:new u.aI(v,n.u_fade)}),circle:(v,n)=>({u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_scale_with_map:new u.aH(v,n.u_scale_with_map),u_pitch_with_map:new u.aH(v,n.u_pitch_with_map),u_extrude_scale:new u.aM(v,n.u_extrude_scale),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_matrix:new u.aJ(v,n.u_matrix)}),collisionBox:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_pixel_extrude_scale:new u.aM(v,n.u_pixel_extrude_scale)}),collisionCircle:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_inv_matrix:new u.aJ(v,n.u_inv_matrix),u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_viewport_size:new u.aM(v,n.u_viewport_size)}),debug:(v,n)=>({u_color:new u.aN(v,n.u_color),u_matrix:new u.aJ(v,n.u_matrix),u_overlay:new u.aH(v,n.u_overlay),u_overlay_scale:new u.aI(v,n.u_overlay_scale)}),clippingMask:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix)}),heatmap:(v,n)=>({u_extrude_scale:new u.aI(v,n.u_extrude_scale),u_intensity:new u.aI(v,n.u_intensity),u_matrix:new u.aJ(v,n.u_matrix)}),heatmapTexture:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_world:new u.aM(v,n.u_world),u_image:new u.aH(v,n.u_image),u_color_ramp:new u.aH(v,n.u_color_ramp),u_opacity:new u.aI(v,n.u_opacity)}),hillshade:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_image:new u.aH(v,n.u_image),u_latrange:new u.aM(v,n.u_latrange),u_light:new u.aM(v,n.u_light),u_shadow:new u.aN(v,n.u_shadow),u_highlight:new u.aN(v,n.u_highlight),u_accent:new u.aN(v,n.u_accent)}),hillshadePrepare:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_image:new u.aH(v,n.u_image),u_dimension:new u.aM(v,n.u_dimension),u_zoom:new u.aI(v,n.u_zoom),u_unpack:new u.aK(v,n.u_unpack)}),line:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_ratio:new u.aI(v,n.u_ratio),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_units_to_pixels:new u.aM(v,n.u_units_to_pixels)}),lineGradient:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_ratio:new u.aI(v,n.u_ratio),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_units_to_pixels:new u.aM(v,n.u_units_to_pixels),u_image:new u.aH(v,n.u_image),u_image_height:new u.aI(v,n.u_image_height)}),linePattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_texsize:new u.aM(v,n.u_texsize),u_ratio:new u.aI(v,n.u_ratio),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_image:new u.aH(v,n.u_image),u_units_to_pixels:new u.aM(v,n.u_units_to_pixels),u_scale:new u.aL(v,n.u_scale),u_fade:new u.aI(v,n.u_fade)}),lineSDF:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_ratio:new u.aI(v,n.u_ratio),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_units_to_pixels:new u.aM(v,n.u_units_to_pixels),u_patternscale_a:new u.aM(v,n.u_patternscale_a),u_patternscale_b:new u.aM(v,n.u_patternscale_b),u_sdfgamma:new u.aI(v,n.u_sdfgamma),u_image:new u.aH(v,n.u_image),u_tex_y_a:new u.aI(v,n.u_tex_y_a),u_tex_y_b:new u.aI(v,n.u_tex_y_b),u_mix:new u.aI(v,n.u_mix)}),raster:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_tl_parent:new u.aM(v,n.u_tl_parent),u_scale_parent:new u.aI(v,n.u_scale_parent),u_buffer_scale:new u.aI(v,n.u_buffer_scale),u_fade_t:new u.aI(v,n.u_fade_t),u_opacity:new u.aI(v,n.u_opacity),u_image0:new u.aH(v,n.u_image0),u_image1:new u.aH(v,n.u_image1),u_brightness_low:new u.aI(v,n.u_brightness_low),u_brightness_high:new u.aI(v,n.u_brightness_high),u_saturation_factor:new u.aI(v,n.u_saturation_factor),u_contrast_factor:new u.aI(v,n.u_contrast_factor),u_spin_weights:new u.aL(v,n.u_spin_weights)}),symbolIcon:(v,n)=>({u_is_size_zoom_constant:new u.aH(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,n.u_is_size_feature_constant),u_size_t:new u.aI(v,n.u_size_t),u_size:new u.aI(v,n.u_size),u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_pitch:new u.aI(v,n.u_pitch),u_rotate_symbol:new u.aH(v,n.u_rotate_symbol),u_aspect_ratio:new u.aI(v,n.u_aspect_ratio),u_fade_change:new u.aI(v,n.u_fade_change),u_matrix:new u.aJ(v,n.u_matrix),u_label_plane_matrix:new u.aJ(v,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,n.u_coord_matrix),u_is_text:new u.aH(v,n.u_is_text),u_pitch_with_map:new u.aH(v,n.u_pitch_with_map),u_is_along_line:new u.aH(v,n.u_is_along_line),u_is_variable_anchor:new u.aH(v,n.u_is_variable_anchor),u_texsize:new u.aM(v,n.u_texsize),u_texture:new u.aH(v,n.u_texture),u_translation:new u.aM(v,n.u_translation),u_pitched_scale:new u.aI(v,n.u_pitched_scale)}),symbolSDF:(v,n)=>({u_is_size_zoom_constant:new u.aH(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,n.u_is_size_feature_constant),u_size_t:new u.aI(v,n.u_size_t),u_size:new u.aI(v,n.u_size),u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_pitch:new u.aI(v,n.u_pitch),u_rotate_symbol:new u.aH(v,n.u_rotate_symbol),u_aspect_ratio:new u.aI(v,n.u_aspect_ratio),u_fade_change:new u.aI(v,n.u_fade_change),u_matrix:new u.aJ(v,n.u_matrix),u_label_plane_matrix:new u.aJ(v,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,n.u_coord_matrix),u_is_text:new u.aH(v,n.u_is_text),u_pitch_with_map:new u.aH(v,n.u_pitch_with_map),u_is_along_line:new u.aH(v,n.u_is_along_line),u_is_variable_anchor:new u.aH(v,n.u_is_variable_anchor),u_texsize:new u.aM(v,n.u_texsize),u_texture:new u.aH(v,n.u_texture),u_gamma_scale:new u.aI(v,n.u_gamma_scale),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_is_halo:new u.aH(v,n.u_is_halo),u_translation:new u.aM(v,n.u_translation),u_pitched_scale:new u.aI(v,n.u_pitched_scale)}),symbolTextAndIcon:(v,n)=>({u_is_size_zoom_constant:new u.aH(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,n.u_is_size_feature_constant),u_size_t:new u.aI(v,n.u_size_t),u_size:new u.aI(v,n.u_size),u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_pitch:new u.aI(v,n.u_pitch),u_rotate_symbol:new u.aH(v,n.u_rotate_symbol),u_aspect_ratio:new u.aI(v,n.u_aspect_ratio),u_fade_change:new u.aI(v,n.u_fade_change),u_matrix:new u.aJ(v,n.u_matrix),u_label_plane_matrix:new u.aJ(v,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,n.u_coord_matrix),u_is_text:new u.aH(v,n.u_is_text),u_pitch_with_map:new u.aH(v,n.u_pitch_with_map),u_is_along_line:new u.aH(v,n.u_is_along_line),u_is_variable_anchor:new u.aH(v,n.u_is_variable_anchor),u_texsize:new u.aM(v,n.u_texsize),u_texsize_icon:new u.aM(v,n.u_texsize_icon),u_texture:new u.aH(v,n.u_texture),u_texture_icon:new u.aH(v,n.u_texture_icon),u_gamma_scale:new u.aI(v,n.u_gamma_scale),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_is_halo:new u.aH(v,n.u_is_halo),u_translation:new u.aM(v,n.u_translation),u_pitched_scale:new u.aI(v,n.u_pitched_scale)}),background:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_opacity:new u.aI(v,n.u_opacity),u_color:new u.aN(v,n.u_color)}),backgroundPattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_opacity:new u.aI(v,n.u_opacity),u_image:new u.aH(v,n.u_image),u_pattern_tl_a:new u.aM(v,n.u_pattern_tl_a),u_pattern_br_a:new u.aM(v,n.u_pattern_br_a),u_pattern_tl_b:new u.aM(v,n.u_pattern_tl_b),u_pattern_br_b:new u.aM(v,n.u_pattern_br_b),u_texsize:new u.aM(v,n.u_texsize),u_mix:new u.aI(v,n.u_mix),u_pattern_size_a:new u.aM(v,n.u_pattern_size_a),u_pattern_size_b:new u.aM(v,n.u_pattern_size_b),u_scale_a:new u.aI(v,n.u_scale_a),u_scale_b:new u.aI(v,n.u_scale_b),u_pixel_coord_upper:new u.aM(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(v,n.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(v,n.u_tile_units_to_pixels)}),terrain:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_texture:new u.aH(v,n.u_texture),u_ele_delta:new u.aI(v,n.u_ele_delta)}),terrainDepth:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_ele_delta:new u.aI(v,n.u_ele_delta)}),terrainCoords:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_texture:new u.aH(v,n.u_texture),u_terrain_coords_id:new u.aI(v,n.u_terrain_coords_id),u_ele_delta:new u.aI(v,n.u_ele_delta)})};class Pl{constructor(n,c,p){this.context=n;const g=n.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Al={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Bu{constructor(n,c,p,g){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=g,this.context=n;const _=n.gl;this.buffer=_.createBuffer(),n.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,c){for(let p=0;p<this.attributes.length;p++){const g=c.attributes[this.attributes[p].name];g!==void 0&&n.enableVertexAttribArray(g)}}setVertexAttribPointers(n,c,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],A=c.attributes[_.name];A!==void 0&&n.vertexAttribPointer(A,_.components,n[Al[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ja=new WeakMap;function Ei(v){var n;if(Ja.has(v))return Ja.get(v);{const c=(n=v.getParameter(v.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Ja.set(v,c),c}}class jr{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Du extends jr{getDefault(){return u.aP.transparent}set(n){const c=this.current;(n.r!==c.r||n.g!==c.g||n.b!==c.b||n.a!==c.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Bs extends jr{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Qa extends jr{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Ff extends jr{getDefault(){return[!0,!0,!0,!0]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||n[3]!==c[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class es extends jr{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Rf extends jr{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class ts extends jr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const c=this.current;(n.func!==c.func||n.ref!==c.ref||n.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class jf extends jr{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class zc extends jr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=n,this.dirty=!1}}class zf extends jr{getDefault(){return[0,1]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Lc extends jr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=n,this.dirty=!1}}class Il extends jr{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Cl extends jr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.BLEND):c.disable(c.BLEND),this.current=n,this.dirty=!1}}class Bc extends jr{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Dc extends jr{getDefault(){return u.aP.transparent}set(n){const c=this.current;(n.r!==c.r||n.g!==c.g||n.b!==c.b||n.a!==c.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Nc extends jr{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class xa extends jr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=n,this.dirty=!1}}class Nu extends jr{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Lf extends jr{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Bf extends jr{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class $c extends jr{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Ds extends jr{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||n[3]!==c[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ml extends jr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class kl extends jr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class rs extends jr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Uc extends jr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Ji extends jr{getDefault(){return null}set(n){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Vc extends jr{getDefault(){return null}set(n){var c;if(n===this.current&&!this.dirty)return;const p=this.gl;Ei(p)?p.bindVertexArray(n):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Gc extends jr{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class $u extends jr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Wc extends jr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class ea extends jr{constructor(n,c){super(n),this.context=n,this.parent=c}getDefault(){return null}}class Co extends ea{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class ns extends ea{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Uu extends ea{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Vu{constructor(n,c,p,g,_){this.context=n,this.width=c,this.height=p;const A=n.gl,M=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Co(n,M),g)this.depthAttachment=_?new Uu(n,M):new ns(n,M);else if(_)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,c=this.colorAttachment.get();if(c&&n.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&n.deleteRenderbuffer(p)}n.deleteFramebuffer(this.framebuffer)}}class Xr{constructor(n,c,p){this.blendFunction=n,this.blendColor=c,this.mask=p}}Xr.Replace=[1,0],Xr.disabled=new Xr(Xr.Replace,u.aP.transparent,[!1,!1,!1,!1]),Xr.unblended=new Xr(Xr.Replace,u.aP.transparent,[!0,!0,!0,!0]),Xr.alphaBlended=new Xr([1,771],u.aP.transparent,[!0,!0,!0,!0]);class Ol{constructor(n){var c,p;if(this.gl=n,this.clearColor=new Du(this),this.clearDepth=new Bs(this),this.clearStencil=new Qa(this),this.colorMask=new Ff(this),this.depthMask=new es(this),this.stencilMask=new Rf(this),this.stencilFunc=new ts(this),this.stencilOp=new jf(this),this.stencilTest=new zc(this),this.depthRange=new zf(this),this.depthTest=new Lc(this),this.depthFunc=new Il(this),this.blend=new Cl(this),this.blendFunc=new Bc(this),this.blendColor=new Dc(this),this.blendEquation=new Nc(this),this.cullFace=new xa(this),this.cullFaceSide=new Nu(this),this.frontFace=new Lf(this),this.program=new Bf(this),this.activeTexture=new $c(this),this.viewport=new Ds(this),this.bindFramebuffer=new Ml(this),this.bindRenderbuffer=new kl(this),this.bindTexture=new rs(this),this.bindVertexBuffer=new Uc(this),this.bindElementBuffer=new Ji(this),this.bindVertexArray=new Vc(this),this.pixelStoreUnpack=new Gc(this),this.pixelStoreUnpackPremultiplyAlpha=new $u(this),this.pixelStoreUnpackFlipY=new Wc(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Ei(n)){this.HALF_FLOAT=n.HALF_FLOAT;const g=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=n.RGBA16F)!==null&&c!==void 0?c:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=n.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const g=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,c){return new Pl(this,n,c)}createVertexBuffer(n,c,p){return new Bu(this,n,c,p)}createRenderbuffer(n,c,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,n,c,p),this.bindRenderbuffer.set(null),_}createFramebuffer(n,c,p,g){return new Vu(this,n,c,p,g)}clear({color:n,depth:c,stencil:p}){const g=this.gl;let _=0;n&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){u.aE(n.blendFunction,Xr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Ei(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var c;return Ei(this.gl)?this.gl.deleteVertexArray(n):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class xr{constructor(n,c,p){this.func=n,this.mask=c,this.range=p}}xr.ReadOnly=!1,xr.ReadWrite=!0,xr.disabled=new xr(519,xr.ReadOnly,[0,1]);const Ns=7680;class tn{constructor(n,c,p,g,_,A){this.test=n,this.ref=c,this.mask=p,this.fail=g,this.depthFail=_,this.pass=A}}tn.disabled=new tn({func:519,mask:0},0,0,Ns,Ns,Ns);class Gr{constructor(n,c,p){this.enable=n,this.mode=c,this.frontFace=p}}let go;function Hc(v,n,c,p,g){const _=v.context,A=_.gl,M=v.useProgram("collisionBox"),O=[];let W=0,te=0;for(let Ge=0;Ge<p.length;Ge++){const Ke=p[Ge],Re=n.getTile(Ke).getBucket(c);if(!Re)continue;const Ye=g?Re.textCollisionBox:Re.iconCollisionBox,rt=Re.collisionCircleArray;if(rt.length>0){const at=u.F();u.aQ(at,Re.placementInvProjMatrix,v.transform.glCoordMatrix),u.aQ(at,at,Re.placementViewportMatrix),O.push({circleArray:rt,circleOffset:te,transform:Ke.posMatrix,invTransform:at,coord:Ke}),W+=rt.length/4,te=W}Ye&&M.draw(_,A.LINES,xr.disabled,tn.disabled,v.colorModeForRenderPass(),Gr.disabled,{u_matrix:Ke.posMatrix,u_pixel_extrude_scale:[1/(ee=v.transform).width,1/ee.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ke),c.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,v.transform.zoom,null,null,Ye.collisionVertexBuffer)}var ee;if(!g||!O.length)return;const me=v.useProgram("collisionCircle"),be=new u.aR;be.resize(4*W),be._trim();let Ae=0;for(const Ge of O)for(let Ke=0;Ke<Ge.circleArray.length/4;Ke++){const Re=4*Ke,Ye=Ge.circleArray[Re+0],rt=Ge.circleArray[Re+1],at=Ge.circleArray[Re+2],gt=Ge.circleArray[Re+3];be.emplace(Ae++,Ye,rt,at,gt,0),be.emplace(Ae++,Ye,rt,at,gt,1),be.emplace(Ae++,Ye,rt,at,gt,2),be.emplace(Ae++,Ye,rt,at,gt,3)}(!go||go.length<2*W)&&(go=function(Ge){const Ke=2*Ge,Re=new u.aT;Re.resize(Ke),Re._trim();for(let Ye=0;Ye<Ke;Ye++){const rt=6*Ye;Re.uint16[rt+0]=4*Ye+0,Re.uint16[rt+1]=4*Ye+1,Re.uint16[rt+2]=4*Ye+2,Re.uint16[rt+3]=4*Ye+2,Re.uint16[rt+4]=4*Ye+3,Re.uint16[rt+5]=4*Ye+0}return Re}(W));const Le=_.createIndexBuffer(go,!0),Ce=_.createVertexBuffer(be,u.aS.members,!0);for(const Ge of O){const Ke=kc(Ge.transform,Ge.invTransform,v.transform);me.draw(_,A.TRIANGLES,xr.disabled,tn.disabled,v.colorModeForRenderPass(),Gr.disabled,Ke,v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ge.coord),c.id,Ce,Le,u.$.simpleSegment(0,2*Ge.circleOffset,Ge.circleArray.length,Ge.circleArray.length/2),null,v.transform.zoom,null,null,null)}Ce.destroy(),Le.destroy()}Gr.disabled=new Gr(!1,1029,2305),Gr.backCCW=new Gr(!0,1029,2305);const Fl=u.an(new Float32Array(16));function Rl(v,n,c,p,g,_){const{horizontalAlign:A,verticalAlign:M}=u.au(v);return new u.P((-(A-.5)*n/g+p[0])*_,(-(M-.5)*c/g+p[1])*_)}function Zc(v,n,c,p,g,_){const A=n.tileAnchorPoint.add(new u.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let M=p.mult(_);return c||(M=M.rotate(-g)),ln(A.add(M),n.labelPlaneMatrix,n.getElevation).point}if(c){const M=ze(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(v),O=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return v.add(p.rotate(O))}return v.add(p)}function Mo(v,n,c,p,g,_,A,M,O,W,te,ee,me,be){const Ae=v.text.placedSymbolArray,Le=v.text.dynamicLayoutVertexArray,Ce=v.icon.dynamicLayoutVertexArray,Ge={};Le.clear();for(let Ke=0;Ke<Ae.length;Ke++){const Re=Ae.get(Ke),Ye=Re.hidden||!Re.crossTileID||v.allowVerticalPlacement&&!Re.placedOrientation?null:p[Re.crossTileID];if(Ye){const rt=new u.P(Re.anchorX,Re.anchorY),at={getElevation:be,width:g.width,height:g.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:c,projection:te,projectionCache:null,tileAnchorPoint:rt,translation:ee,unwrappedTileID:me},gt=c?ln(rt,A,be):ze(rt.x,rt.y,at),bt=Me(g.cameraToCenterDistance,gt.signedDistanceFromCamera);let Dt=u.ai(v.textSizeData,O,Re)*bt/u.ap;c&&(Dt*=v.tilePixelRatio/M);const{width:Nt,height:St,anchor:Pt,textOffset:Gt,textBoxScale:gr}=Ye,It=Rl(Pt,Nt,St,Gt,gr,Dt),jt=te.getPitchedTextCorrection(g,rt.add(new u.P(ee[0],ee[1])),me),hr=Zc(gt.point,at,n,It,g.angle,jt),rn=v.allowVerticalPlacement&&Re.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let Sr=0;Sr<Re.numGlyphs;Sr++)u.aj(Le,hr,rn);W&&Re.associatedIconIndex>=0&&(Ge[Re.associatedIconIndex]={shiftedAnchor:hr,angle:rn})}else rr(Re.numGlyphs,Le)}if(W){Ce.clear();const Ke=v.icon.placedSymbolArray;for(let Re=0;Re<Ke.length;Re++){const Ye=Ke.get(Re);if(Ye.hidden)rr(Ye.numGlyphs,Ce);else{const rt=Ge[Re];if(rt)for(let at=0;at<Ye.numGlyphs;at++)u.aj(Ce,rt.shiftedAnchor,rt.angle);else rr(Ye.numGlyphs,Ce)}}v.icon.dynamicLayoutVertexBuffer.updateData(Ce)}v.text.dynamicLayoutVertexBuffer.updateData(Le)}function ko(v,n,c){return c.iconsInText&&n?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function In(v,n,c,p,g,_,A,M,O,W,te,ee){const me=v.context,be=me.gl,Ae=v.transform,Le=ai(),Ce=M==="map",Ge=O==="map",Ke=M!=="viewport"&&c.layout.get("symbol-placement")!=="point",Re=Ce&&!Ge&&!Ke,Ye=!Ge&&Ke,rt=!c.layout.get("symbol-sort-key").isConstant();let at=!1;const gt=v.depthModeForSublayer(0,xr.ReadOnly),bt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Dt=[],Nt=Le.getCircleRadiusCorrection(Ae);for(const St of p){const Pt=n.getTile(St),Gt=Pt.getBucket(c);if(!Gt)continue;const gr=g?Gt.text:Gt.icon;if(!gr||!gr.segments.get().length||!gr.hasVisibleVertices)continue;const It=gr.programConfigurations.get(c.id),jt=g||Gt.sdfIcons,hr=g?Gt.textSizeData:Gt.iconSizeData,rn=Ge||Ae.pitch!==0,Sr=v.useProgram(ko(jt,g,Gt),It),Ar=u.ag(hr,Ae.zoom),nn=v.style.map.terrain&&v.style.map.terrain.getTerrainData(St);let ui,Ro,on,Di,Ii=[0,0],ci=null;if(g)Ro=Pt.glyphAtlasTexture,on=be.LINEAR,ui=Pt.glyphAtlasTexture.size,Gt.iconsInText&&(Ii=Pt.imageAtlasTexture.size,ci=Pt.imageAtlasTexture,Di=rn||v.options.rotating||v.options.zooming||hr.kind==="composite"||hr.kind==="camera"?be.LINEAR:be.NEAREST);else{const fn=c.layout.get("icon-size").constantOr(0)!==1||Gt.iconsNeedLinear;Ro=Pt.imageAtlasTexture,on=jt||v.options.rotating||v.options.zooming||fn||rn?be.LINEAR:be.NEAREST,ui=Pt.imageAtlasTexture.size}const hi=lr(Pt,1,v.transform.zoom),jo=Ye?St.posMatrix:Fl,Zs=$n(jo,Ge,Ce,v.transform,hi),th=ni(jo,Ge,Ce,v.transform,hi),$l=ni(St.posMatrix,Ge,Ce,v.transform,hi),qs=Le.translatePosition(v.transform,Pt,_,A),rh=bt&&Gt.hasTextData(),Qf=c.layout.get("icon-text-fit")!=="none"&&rh&&Gt.hasIconData();if(Ke){const fn=v.style.map.terrain?(ed,Gn)=>v.style.map.terrain.getElevation(St,ed,Gn):null,Vl=c.layout.get("text-rotation-alignment")==="map";ce(Gt,St.posMatrix,v,g,Zs,$l,Ge,W,Vl,Le,St.toUnwrapped(),Ae.width,Ae.height,qs,fn)}const Jn=St.posMatrix,zo=g&&bt||Qf,cs=Ke||zo?Fl:Zs,Ul=th,fi=jt&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let di;di=jt?Gt.iconsInText?kf(hr.kind,Ar,Re,Ge,Ke,zo,v,Jn,cs,Ul,qs,ui,Ii,Nt):Rc(hr.kind,Ar,Re,Ge,Ke,zo,v,Jn,cs,Ul,qs,g,ui,!0,Nt):Fc(hr.kind,Ar,Re,Ge,Ke,zo,v,Jn,cs,Ul,qs,g,ui,Nt);const Zn={program:Sr,buffers:gr,uniformValues:di,atlasTexture:Ro,atlasTextureIcon:ci,atlasInterpolation:on,atlasInterpolationIcon:Di,isSDF:jt,hasHalo:fi};if(rt&&Gt.canOverlap){at=!0;const fn=gr.segments.get();for(const Vl of fn)Dt.push({segments:new u.$([Vl]),sortKey:Vl.sortKey,state:Zn,terrainData:nn})}else Dt.push({segments:gr.segments,sortKey:0,state:Zn,terrainData:nn})}at&&Dt.sort((St,Pt)=>St.sortKey-Pt.sortKey);for(const St of Dt){const Pt=St.state;if(me.activeTexture.set(be.TEXTURE0),Pt.atlasTexture.bind(Pt.atlasInterpolation,be.CLAMP_TO_EDGE),Pt.atlasTextureIcon&&(me.activeTexture.set(be.TEXTURE1),Pt.atlasTextureIcon&&Pt.atlasTextureIcon.bind(Pt.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),Pt.isSDF){const Gt=Pt.uniformValues;Pt.hasHalo&&(Gt.u_is_halo=1,yo(Pt.buffers,St.segments,c,v,Pt.program,gt,te,ee,Gt,St.terrainData)),Gt.u_is_halo=0}yo(Pt.buffers,St.segments,c,v,Pt.program,gt,te,ee,Pt.uniformValues,St.terrainData)}}function yo(v,n,c,p,g,_,A,M,O,W){const te=p.context;g.draw(te,te.gl.TRIANGLES,_,A,M,Gr.disabled,O,W,c.id,v.layoutVertexBuffer,v.indexBuffer,n,c.paint,p.transform.zoom,v.programConfigurations.get(c.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function vo(v,n,c,p,g){if(!c||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let A=_[c.to.toString()],M=_[c.from.toString()];if(!A&&M&&(A=M),!M&&A&&(M=A),!A||!M){const O=g.getPaintProperty(n);A=_[O],M=_[O]}A&&M&&v.setConstantPatternPositions(A,M)}function Oo(v,n,c,p,g,_,A){const M=v.context.gl,O="fill-pattern",W=c.paint.get(O),te=W&&W.constantOr(1),ee=c.getCrossfadeParameters();let me,be,Ae,Le,Ce;A?(be=te&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",me=M.LINES):(be=te?"fillPattern":"fill",me=M.TRIANGLES);const Ge=W.constantOr(null);for(const Ke of p){const Re=n.getTile(Ke);if(te&&!Re.patternsLoaded())continue;const Ye=Re.getBucket(c);if(!Ye)continue;const rt=Ye.programConfigurations.get(c.id),at=v.useProgram(be,rt),gt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ke);te&&(v.context.activeTexture.set(M.TEXTURE0),Re.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),rt.updatePaintBuffers(ee)),vo(rt,O,Ge,Re,c);const bt=gt?Ke:null,Dt=v.translatePosMatrix(bt?bt.posMatrix:Ke.posMatrix,Re,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(A){Le=Ye.indexBuffer2,Ce=Ye.segments2;const Nt=[M.drawingBufferWidth,M.drawingBufferHeight];Ae=be==="fillOutlinePattern"&&te?Xa(Dt,v,ee,Re,Nt):Sl(Dt,Nt)}else Le=Ye.indexBuffer,Ce=Ye.segments,Ae=te?zs(Dt,v,ee,Re):bl(Dt);at.draw(v.context,me,g,v.stencilModeForClipping(Ke),_,Gr.disabled,Ae,gt,c.id,Ye.layoutVertexBuffer,Le,Ce,c.paint,v.transform.zoom,rt)}}function li(v,n,c,p,g,_,A){const M=v.context,O=M.gl,W="fill-extrusion-pattern",te=c.paint.get(W),ee=te.constantOr(1),me=c.getCrossfadeParameters(),be=c.paint.get("fill-extrusion-opacity"),Ae=te.constantOr(null);for(const Le of p){const Ce=n.getTile(Le),Ge=Ce.getBucket(c);if(!Ge)continue;const Ke=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Le),Re=Ge.programConfigurations.get(c.id),Ye=v.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",Re);ee&&(v.context.activeTexture.set(O.TEXTURE0),Ce.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Re.updatePaintBuffers(me)),vo(Re,W,Ae,Ce,c);const rt=v.translatePosMatrix(Le.posMatrix,Ce,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),at=c.paint.get("fill-extrusion-vertical-gradient"),gt=ee?Ou(rt,v,at,be,Le,me,Ce):js(rt,v,at,be);Ye.draw(M,M.gl.TRIANGLES,g,_,A,Gr.backCCW,gt,Ke,c.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,c.paint,v.transform.zoom,Re,v.style.map.terrain&&Ge.centroidVertexBuffer)}}function $s(v,n,c,p,g,_,A){const M=v.context,O=M.gl,W=c.fbo;if(!W)return;const te=v.useProgram("hillshade"),ee=v.style.map.terrain&&v.style.map.terrain.getTerrainData(n);M.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,W.colorAttachment.get()),te.draw(M,O.TRIANGLES,g,_,A,Gr.disabled,((me,be,Ae,Le)=>{const Ce=Ae.paint.get("hillshade-shadow-color"),Ge=Ae.paint.get("hillshade-highlight-color"),Ke=Ae.paint.get("hillshade-accent-color");let Re=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(Re-=me.transform.angle);const Ye=!me.options.moving;return{u_matrix:Le?Le.posMatrix:me.transform.calculatePosMatrix(be.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:El(0,be.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),Re],u_shadow:Ce,u_highlight:Ge,u_accent:Ke}})(v,c,p,ee?n:null),ee,p.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Us(v,n,c,p,g,_){const A=v.context,M=A.gl,O=n.dem;if(O&&O.data){const W=O.dim,te=O.stride,ee=O.getPixels();if(A.activeTexture.set(M.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||v.getTileTexture(te),n.demTexture){const be=n.demTexture;be.update(ee,{premultiply:!1}),be.bind(M.NEAREST,M.CLAMP_TO_EDGE)}else n.demTexture=new q(A,ee,M.RGBA,{premultiply:!1}),n.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);A.activeTexture.set(M.TEXTURE0);let me=n.fbo;if(!me){const be=new q(A,{width:W,height:W,data:null},M.RGBA);be.bind(M.LINEAR,M.CLAMP_TO_EDGE),me=n.fbo=A.createFramebuffer(W,W,!0,!1),me.colorAttachment.set(be.texture)}A.bindFramebuffer.set(me.framebuffer),A.viewport.set([0,0,W,W]),v.useProgram("hillshadePrepare").draw(A,M.TRIANGLES,p,g,_,Gr.disabled,((be,Ae)=>{const Le=Ae.stride,Ce=u.F();return u.aO(Ce,0,u.W,-u.W,0,0,1),u.H(Ce,Ce,[0,-u.W,0]),{u_matrix:Ce,u_image:1,u_dimension:[Le,Le],u_zoom:be.overscaledZ,u_unpack:Ae.getUnpackVector()}})(n.tileID,O),null,c.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Ti(v,n,c,p,g,_){const A=p.paint.get("raster-fade-duration");if(!_&&A>0){const M=b.now(),O=(M-v.timeAdded)/A,W=n?(M-n.timeAdded)/A:-1,te=c.getSource(),ee=g.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),me=!n||Math.abs(n.tileID.overscaledZ-ee)>Math.abs(v.tileID.overscaledZ-ee),be=me&&v.refreshedUponExpiration?1:u.ac(me?O:1-W,0,1);return v.refreshedUponExpiration&&O>=1&&(v.refreshedUponExpiration=!1),n?{opacity:1,mix:1-be}:{opacity:be,mix:0}}return{opacity:1,mix:0}}const Bi=new u.aP(1,0,0,1),Vs=new u.aP(0,1,0,1),wa=new u.aP(0,0,1,1),ta=new u.aP(1,0,1,1),Gs=new u.aP(0,1,1,1);function jl(v,n,c,p){_o(v,0,n+c/2,v.transform.width,c,p)}function ra(v,n,c,p){_o(v,n-c/2,0,c,v.transform.height,p)}function _o(v,n,c,p,g,_){const A=v.context,M=A.gl;M.enable(M.SCISSOR_TEST),M.scissor(n*v.pixelRatio,c*v.pixelRatio,p*v.pixelRatio,g*v.pixelRatio),A.clear({color:_}),M.disable(M.SCISSOR_TEST)}function Fo(v,n,c){const p=v.context,g=p.gl,_=c.posMatrix,A=v.useProgram("debug"),M=xr.disabled,O=tn.disabled,W=v.colorModeForRenderPass(),te="$debug",ee=v.style.map.terrain&&v.style.map.terrain.getTerrainData(c);p.activeTexture.set(g.TEXTURE0);const me=n.getTileByID(c.key).latestRawTileData,be=Math.floor((me&&me.byteLength||0)/1024),Ae=n.getTile(c).tileSize,Le=512/Math.min(Ae,512)*(c.overscaledZ/v.transform.zoom)*.5;let Ce=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Ce+=` => ${c.overscaledZ}`),function(Ge,Ke){Ge.initDebugOverlayCanvas();const Re=Ge.debugOverlayCanvas,Ye=Ge.context.gl,rt=Ge.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,Re.width,Re.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(Ke,5,5),rt.strokeText(Ke,5,5),Ge.debugOverlayTexture.update(Re),Ge.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(v,`${Ce} ${be}kB`),A.draw(p,g.TRIANGLES,M,O,Xr.alphaBlended,Gr.disabled,Ka(_,u.aP.transparent,Le),null,te,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),A.draw(p,g.LINE_STRIP,M,O,W,Gr.disabled,Ka(_,u.aP.red),ee,te,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Ws(v,n,c){const p=v.context,g=p.gl,_=v.colorModeForRenderPass(),A=new xr(g.LEQUAL,xr.ReadWrite,v.depthRangeFor3D),M=v.useProgram("terrain"),O=n.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,v.width,v.height]);for(const W of c){const te=v.renderToTexture.getTexture(W),ee=n.getTerrainData(W.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,te.texture);const me={u_matrix:v.transform.calculatePosMatrix(W.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(v.transform.zoom)};M.draw(p,g.TRIANGLES,A,tn.disabled,_,Gr.backCCW,me,ee,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class kr{constructor(n,c){this.context=new Ol(n),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new cn}resize(n,c,p){if(this.width=Math.floor(n*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const n=this.context,c=new u.aW;c.emplaceBack(0,0),c.emplaceBack(u.W,0),c.emplaceBack(0,u.W),c.emplaceBack(u.W,u.W),this.tileExtentBuffer=n.createVertexBuffer(c,mo.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const p=new u.aW;p.emplaceBack(0,0),p.emplaceBack(u.W,0),p.emplaceBack(0,u.W),p.emplaceBack(u.W,u.W),this.debugBuffer=n.createVertexBuffer(p,mo.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const g=new u.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(u.W,0,u.W,0),g.emplaceBack(0,u.W,0,u.W),g.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=n.createVertexBuffer(g,Se.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const _=new u.aW;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(_,mo.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const A=new u.aX;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(A);const M=new u.aY;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(M);const O=this.context.gl;this.stencilClearMode=new tn({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const n=this.context,c=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.F();u.aO(p,0,this.width,this.height,0,0,1),u.J(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,c.TRIANGLES,xr.disabled,this.stencilClearMode,Xr.disabled,Gr.disabled,Oc(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,c){if(this.currentStencilSource===n.source||!n.isTileClipped()||!c||!c.length)return;this.currentStencilSource=n.source;const p=this.context,g=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(Xr.disabled),p.setDepthMode(xr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of c){const M=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);_.draw(p,g.TRIANGLES,xr.disabled,new tn({func:g.ALWAYS,mask:0},M,255,g.KEEP,g.KEEP,g.REPLACE),Xr.disabled,Gr.disabled,Oc(A.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,c=this.context.gl;return new tn({func:c.NOTEQUAL,mask:255},n,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(n){const c=this.context.gl;return new tn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(n){const c=this.context.gl,p=n.sort((A,M)=>M.overscaledZ-A.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const A={};for(let M=0;M<_;M++)A[M+g]=new tn({func:c.GEQUAL,mask:255},M+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=_,[A,p]}return[{[g]:tn.disabled},p]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Xr([n.CONSTANT_COLOR,n.ONE],new u.aP(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xr.unblended:Xr.alphaBlended}depthModeForSublayer(n,c,p){if(!this.opaquePassEnabledForLayer())return xr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new xr(p||this.context.gl.LEQUAL,c,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,c){this.style=n,this.options=c,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},A={},M={};for(const O in g){const W=g[O];W.used&&W.prepare(this.context),_[O]=W.getVisibleCoordinates(),A[O]=_[O].slice().reverse(),M[O]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<p.length;O++)if(this.style._layers[p[O]].is3D()){this.opaquePassCutoff=O;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const O of p){const W=this.style._layers[O];if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const te=A[W.source];(W.type==="custom"||te.length)&&this.renderLayer(this,g[W.source],W,te)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.aP.black:u.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[p[this.currentLayer]],W=g[O.source],te=_[O.source];this._renderTileClippingMasks(O,te),this.renderLayer(this,W,O,te)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const O=this.style._layers[p[this.currentLayer]],W=g[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const te=(O.type==="symbol"?M:A)[O.source];this._renderTileClippingMasks(O,_[O.source]),this.renderLayer(this,W,O,te)}if(this.options.showTileBoundaries){const O=function(W,te){let ee=null;const me=Object.values(W._layers).flatMap(Ce=>Ce.source&&!Ce.isHidden(te)?[W.sourceCaches[Ce.source]]:[]),be=me.filter(Ce=>Ce.getSource().type==="vector"),Ae=me.filter(Ce=>Ce.getSource().type!=="vector"),Le=Ce=>{(!ee||ee.getSource().maxzoom<Ce.getSource().maxzoom)&&(ee=Ce)};return be.forEach(Ce=>Le(Ce)),ee||Ae.forEach(Ce=>Le(Ce)),ee}(this.style,this.transform.zoom);O&&function(W,te,ee){for(let me=0;me<ee.length;me++)Fo(W,te,ee[me])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const W=O.transform.padding;jl(O,O.transform.height-(W.top||0),3,Bi),jl(O,W.bottom||0,3,Vs),ra(O,W.left||0,3,wa),ra(O,O.transform.width-(W.right||0),3,ta);const te=O.transform.centerPoint;(function(ee,me,be,Ae){_o(ee,me-1,be-10,2,20,Ae),_o(ee,me-10,be-1,20,2,Ae)})(O,te.x,O.transform.height-te.y,Gs)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let g=this.terrainFacilitator.dirty;g||(g=n?!u.aZ(c,p):!u.a_(c,p)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(u.a$(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,A){const M=_.context,O=M.gl,W=Xr.unblended,te=new xr(O.LEQUAL,xr.ReadWrite,[0,1]),ee=A.getTerrainMesh(),me=A.sourceCache.getRenderableTiles(),be=_.useProgram("terrainDepth");M.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),M.clear({color:u.aP.transparent,depth:1});for(const Ae of me){const Le=A.getTerrainData(Ae.tileID),Ce={u_matrix:_.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_ele_delta:A.getMeshFrameDelta(_.transform.zoom)};be.draw(M,O.TRIANGLES,te,tn.disabled,W,Gr.backCCW,Ce,Le,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,A){const M=_.context,O=M.gl,W=Xr.unblended,te=new xr(O.LEQUAL,xr.ReadWrite,[0,1]),ee=A.getTerrainMesh(),me=A.getCoordsTexture(),be=A.sourceCache.getRenderableTiles(),Ae=_.useProgram("terrainCoords");M.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),M.clear({color:u.aP.transparent,depth:1}),A.coordsIndex=[];for(const Le of be){const Ce=A.getTerrainData(Le.tileID);M.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,me.texture);const Ge={u_matrix:_.transform.calculatePosMatrix(Le.tileID.toUnwrapped()),u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(_.transform.zoom)};Ae.draw(M,O.TRIANGLES,te,tn.disabled,W,Gr.backCCW,Ge,Ce,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments),A.coordsIndex.push(Le.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(n,c,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,A,M,O,W){if(_.renderPass!=="translucent")return;const te=tn.disabled,ee=_.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(me,be,Ae,Le,Ce,Ge,Ke,Re,Ye){const rt=be.transform,at=ai(),gt=Ce==="map",bt=Ge==="map";for(const Dt of me){const Nt=Le.getTile(Dt),St=Nt.getBucket(Ae);if(!St||!St.text||!St.text.segments.get().length)continue;const Pt=u.ag(St.textSizeData,rt.zoom),Gt=lr(Nt,1,be.transform.zoom),gr=$n(Dt.posMatrix,bt,gt,be.transform,Gt),It=Ae.layout.get("icon-text-fit")!=="none"&&St.hasIconData();if(Pt){const jt=Math.pow(2,rt.zoom-Nt.tileID.overscaledZ),hr=be.style.map.terrain?(Sr,Ar)=>be.style.map.terrain.getElevation(Dt,Sr,Ar):null,rn=at.translatePosition(rt,Nt,Ke,Re);Mo(St,gt,bt,Ye,rt,gr,Dt.posMatrix,jt,Pt,It,at,rn,Dt.toUnwrapped(),hr)}}}(O,_,M,A,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),W),M.paint.get("icon-opacity").constantOr(1)!==0&&In(_,A,M,O,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),te,ee),M.paint.get("text-opacity").constantOr(1)!==0&&In(_,A,M,O,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),te,ee),A.map.showCollisionBoxes&&(Hc(_,A,M,O,!0),Hc(_,A,M,O,!1))})(n,c,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,A,M,O){if(_.renderPass!=="translucent")return;const W=M.paint.get("circle-opacity"),te=M.paint.get("circle-stroke-width"),ee=M.paint.get("circle-stroke-opacity"),me=!M.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(te.constantOr(1)===0||ee.constantOr(1)===0))return;const be=_.context,Ae=be.gl,Le=_.depthModeForSublayer(0,xr.ReadOnly),Ce=tn.disabled,Ge=_.colorModeForRenderPass(),Ke=[];for(let Re=0;Re<O.length;Re++){const Ye=O[Re],rt=A.getTile(Ye),at=rt.getBucket(M);if(!at)continue;const gt=at.programConfigurations.get(M.id),bt=_.useProgram("circle",gt),Dt=at.layoutVertexBuffer,Nt=at.indexBuffer,St=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ye),Pt={programConfiguration:gt,program:bt,layoutVertexBuffer:Dt,indexBuffer:Nt,uniformValues:Fu(_,Ye,rt,M),terrainData:St};if(me){const Gt=at.segments.get();for(const gr of Gt)Ke.push({segments:new u.$([gr]),sortKey:gr.sortKey,state:Pt})}else Ke.push({segments:at.segments,sortKey:0,state:Pt})}me&&Ke.sort((Re,Ye)=>Re.sortKey-Ye.sortKey);for(const Re of Ke){const{programConfiguration:Ye,program:rt,layoutVertexBuffer:at,indexBuffer:gt,uniformValues:bt,terrainData:Dt}=Re.state;rt.draw(be,Ae.TRIANGLES,Le,Ce,Ge,Gr.disabled,bt,Dt,M.id,at,gt,Re.segments,M.paint,_.transform.zoom,Ye)}})(n,c,p,g);break;case"heatmap":(function(_,A,M,O){if(M.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const W=_.context,te=W.gl,ee=tn.disabled,me=new Xr([te.ONE,te.ONE],u.aP.transparent,[!0,!0,!0,!0]);(function(be,Ae,Le){const Ce=be.gl;be.activeTexture.set(Ce.TEXTURE1),be.viewport.set([0,0,Ae.width/4,Ae.height/4]);let Ge=Le.heatmapFbo;if(Ge)Ce.bindTexture(Ce.TEXTURE_2D,Ge.colorAttachment.get()),be.bindFramebuffer.set(Ge.framebuffer);else{const Ke=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,Ke),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),Ge=Le.heatmapFbo=be.createFramebuffer(Ae.width/4,Ae.height/4,!1,!1),function(Re,Ye,rt,at){var gt,bt;const Dt=Re.gl,Nt=(gt=Re.HALF_FLOAT)!==null&&gt!==void 0?gt:Dt.UNSIGNED_BYTE,St=(bt=Re.RGBA16F)!==null&&bt!==void 0?bt:Dt.RGBA;Dt.texImage2D(Dt.TEXTURE_2D,0,St,Ye.width/4,Ye.height/4,0,Dt.RGBA,Nt,null),at.colorAttachment.set(rt)}(be,Ae,Ke,Ge)}})(W,_,M),W.clear({color:u.aP.transparent});for(let be=0;be<O.length;be++){const Ae=O[be];if(A.hasRenderableParent(Ae))continue;const Le=A.getTile(Ae),Ce=Le.getBucket(M);if(!Ce)continue;const Ge=Ce.programConfigurations.get(M.id),Ke=_.useProgram("heatmap",Ge),{zoom:Re}=_.transform;Ke.draw(W,te.TRIANGLES,xr.disabled,ee,me,Gr.disabled,Li(Ae.posMatrix,Le,Re,M.paint.get("heatmap-intensity")),null,M.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,M.paint,_.transform.zoom,Ge)}W.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(W,te){const ee=W.context,me=ee.gl,be=te.heatmapFbo;if(!be)return;ee.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,be.colorAttachment.get()),ee.activeTexture.set(me.TEXTURE1);let Ae=te.colorRampTexture;Ae||(Ae=te.colorRampTexture=new q(ee,te.colorRamp,me.RGBA)),Ae.bind(me.LINEAR,me.CLAMP_TO_EDGE),W.useProgram("heatmapTexture").draw(ee,me.TRIANGLES,xr.disabled,tn.disabled,W.colorModeForRenderPass(),Gr.disabled,((Le,Ce,Ge,Ke)=>{const Re=u.F();u.aO(Re,0,Le.width,Le.height,0,0,1);const Ye=Le.context.gl;return{u_matrix:Re,u_world:[Ye.drawingBufferWidth,Ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}})(W,te),null,te.id,W.viewportBuffer,W.quadTriangleIndexBuffer,W.viewportSegments,te.paint,W.transform.zoom)}(_,M))})(n,c,p,g);break;case"line":(function(_,A,M,O){if(_.renderPass!=="translucent")return;const W=M.paint.get("line-opacity"),te=M.paint.get("line-width");if(W.constantOr(1)===0||te.constantOr(1)===0)return;const ee=_.depthModeForSublayer(0,xr.ReadOnly),me=_.colorModeForRenderPass(),be=M.paint.get("line-dasharray"),Ae=M.paint.get("line-pattern"),Le=Ae.constantOr(1),Ce=M.paint.get("line-gradient"),Ge=M.getCrossfadeParameters(),Ke=Le?"linePattern":be?"lineSDF":Ce?"lineGradient":"line",Re=_.context,Ye=Re.gl;let rt=!0;for(const at of O){const gt=A.getTile(at);if(Le&&!gt.patternsLoaded())continue;const bt=gt.getBucket(M);if(!bt)continue;const Dt=bt.programConfigurations.get(M.id),Nt=_.context.program.get(),St=_.useProgram(Ke,Dt),Pt=rt||St.program!==Nt,Gt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(at),gr=Ae.constantOr(null);if(gr&&gt.imageAtlas){const hr=gt.imageAtlas,rn=hr.patternPositions[gr.to.toString()],Sr=hr.patternPositions[gr.from.toString()];rn&&Sr&&Dt.setConstantPatternPositions(rn,Sr)}const It=Gt?at:null,jt=Le?Ru(_,gt,M,Ge,It):be?Ls(_,gt,M,be,Ge,It):Ce?Si(_,gt,M,bt.lineClipsArray.length,It):Yn(_,gt,M,It);if(Le)Re.activeTexture.set(Ye.TEXTURE0),gt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Dt.updatePaintBuffers(Ge);else if(be&&(Pt||_.lineAtlas.dirty))Re.activeTexture.set(Ye.TEXTURE0),_.lineAtlas.bind(Re);else if(Ce){const hr=bt.gradients[M.id];let rn=hr.texture;if(M.gradientVersion!==hr.version){let Sr=256;if(M.stepInterpolant){const Ar=A.getSource().maxzoom,nn=at.canonical.z===Ar?Math.ceil(1<<_.transform.maxZoom-at.canonical.z):1;Sr=u.ac(u.aU(bt.maxLineLength/u.W*1024*nn),256,Re.maxTextureSize)}hr.gradient=u.aV({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:Sr,image:hr.gradient||void 0,clips:bt.lineClipsArray}),hr.texture?hr.texture.update(hr.gradient):hr.texture=new q(Re,hr.gradient,Ye.RGBA),hr.version=M.gradientVersion,rn=hr.texture}Re.activeTexture.set(Ye.TEXTURE0),rn.bind(M.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}St.draw(Re,Ye.TRIANGLES,ee,_.stencilModeForClipping(at),me,Gr.disabled,jt,Gt,M.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,M.paint,_.transform.zoom,Dt,bt.layoutVertexBuffer2),rt=!1}})(n,c,p,g);break;case"fill":(function(_,A,M,O){const W=M.paint.get("fill-color"),te=M.paint.get("fill-opacity");if(te.constantOr(1)===0)return;const ee=_.colorModeForRenderPass(),me=M.paint.get("fill-pattern"),be=_.opaquePassEnabledForLayer()&&!me.constantOr(1)&&W.constantOr(u.aP.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===be){const Ae=_.depthModeForSublayer(1,_.renderPass==="opaque"?xr.ReadWrite:xr.ReadOnly);Oo(_,A,M,O,Ae,ee,!1)}if(_.renderPass==="translucent"&&M.paint.get("fill-antialias")){const Ae=_.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,xr.ReadOnly);Oo(_,A,M,O,Ae,ee,!0)}})(n,c,p,g);break;case"fill-extrusion":(function(_,A,M,O){const W=M.paint.get("fill-extrusion-opacity");if(W!==0&&_.renderPass==="translucent"){const te=new xr(_.context.gl.LEQUAL,xr.ReadWrite,_.depthRangeFor3D);if(W!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))li(_,A,M,O,te,tn.disabled,Xr.disabled),li(_,A,M,O,te,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const ee=_.colorModeForRenderPass();li(_,A,M,O,te,tn.disabled,ee)}}})(n,c,p,g);break;case"hillshade":(function(_,A,M,O){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const W=_.context,te=_.depthModeForSublayer(0,xr.ReadOnly),ee=_.colorModeForRenderPass(),[me,be]=_.renderPass==="translucent"?_.stencilConfigForOverlap(O):[{},O];for(const Ae of be){const Le=A.getTile(Ae);Le.needsHillshadePrepare!==void 0&&Le.needsHillshadePrepare&&_.renderPass==="offscreen"?Us(_,Le,M,te,tn.disabled,ee):_.renderPass==="translucent"&&$s(_,Ae,Le,M,te,me[Ae.overscaledZ],ee)}W.viewport.set([0,0,_.width,_.height])})(n,c,p,g);break;case"raster":(function(_,A,M,O){if(_.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!O.length)return;const W=_.context,te=W.gl,ee=A.getSource(),me=_.useProgram("raster"),be=_.colorModeForRenderPass(),[Ae,Le]=ee instanceof N?[{},O]:_.stencilConfigForOverlap(O),Ce=Le[Le.length-1].overscaledZ,Ge=!_.options.moving;for(const Ke of Le){const Re=_.depthModeForSublayer(Ke.overscaledZ-Ce,M.paint.get("raster-opacity")===1?xr.ReadWrite:xr.ReadOnly,te.LESS),Ye=A.getTile(Ke);Ye.registerFadeDuration(M.paint.get("raster-fade-duration"));const rt=A.findLoadedParent(Ke,0),at=A.findLoadedSibling(Ke),gt=Ti(Ye,rt||at||null,A,M,_.transform,_.style.map.terrain);let bt,Dt;const Nt=M.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;W.activeTexture.set(te.TEXTURE0),Ye.texture.bind(Nt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(te.TEXTURE1),rt?(rt.texture.bind(Nt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),bt=Math.pow(2,rt.tileID.overscaledZ-Ye.tileID.overscaledZ),Dt=[Ye.tileID.canonical.x*bt%1,Ye.tileID.canonical.y*bt%1]):Ye.texture.bind(Nt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);const St=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ke),Pt=St?Ke:null,Gt=Pt?Pt.posMatrix:_.transform.calculatePosMatrix(Ke.toUnwrapped(),Ge),gr=Ya(Gt,Dt||[0,0],bt||1,gt,M);ee instanceof N?me.draw(W,te.TRIANGLES,Re,tn.disabled,be,Gr.disabled,gr,St,M.id,ee.boundsBuffer,_.quadTriangleIndexBuffer,ee.boundsSegments):me.draw(W,te.TRIANGLES,Re,Ae[Ke.overscaledZ],be,Gr.disabled,gr,St,M.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(n,c,p,g);break;case"background":(function(_,A,M,O){const W=M.paint.get("background-color"),te=M.paint.get("background-opacity");if(te===0)return;const ee=_.context,me=ee.gl,be=_.transform,Ae=be.tileSize,Le=M.paint.get("background-pattern");if(_.isPatternMissing(Le))return;const Ce=!Le&&W.a===1&&te===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ce)return;const Ge=tn.disabled,Ke=_.depthModeForSublayer(0,Ce==="opaque"?xr.ReadWrite:xr.ReadOnly),Re=_.colorModeForRenderPass(),Ye=_.useProgram(Le?"backgroundPattern":"background"),rt=O||be.coveringTiles({tileSize:Ae,terrain:_.style.map.terrain});Le&&(ee.activeTexture.set(me.TEXTURE0),_.imageManager.bind(_.context));const at=M.getCrossfadeParameters();for(const gt of rt){const bt=O?gt.posMatrix:_.transform.calculatePosMatrix(gt.toUnwrapped()),Dt=Le?jc(bt,te,_,Le,{tileID:gt,tileSize:Ae},at):Of(bt,te,W),Nt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(gt);Ye.draw(ee,me.TRIANGLES,Ke,Ge,Re,Gr.disabled,Dt,Nt,M.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(n,0,p,g);break;case"custom":(function(_,A,M){const O=_.context,W=M.implementation;if(_.renderPass==="offscreen"){const te=W.prerender;te&&(_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),te.call(W,O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),O.setStencilMode(tn.disabled);const te=W.renderingMode==="3d"?new xr(_.context.gl.LEQUAL,xr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,xr.ReadOnly);O.setDepthMode(te),W.render(O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState(),O.bindFramebuffer.set(null)}})(n,0,p)}}translatePosMatrix(n,c,p,g,_){if(!p[0]&&!p[1])return n;const A=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(A){const W=Math.sin(A),te=Math.cos(A);p=[p[0]*te-p[1]*W,p[0]*W+p[1]*te]}const M=[_?p[0]:lr(c,p[0],this.transform.zoom),_?p[1]:lr(c,p[1],this.transform.zoom),0],O=new Float32Array(16);return u.H(O,n,M),O}saveTileTexture(n){const c=this._tileTextures[n.size[0]];c?c.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const c=this._tileTextures[n];return c&&c.length>0?c.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const c=this.imageManager.getPattern(n.from.toString()),p=this.imageManager.getPattern(n.to.toString());return!c||!p}useProgram(n,c){this.cache=this.cache||{};const p=n+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new ku(this.context,Za[n],c,Tl[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:c}=this.context.gl;return this.width!==n||this.height!==c}}class ba{constructor(n,c){this.points=n,this.planes=c}static fromInvProjectionMatrix(n,c,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const O=1/(M=u.af([],M,n))[3]/c*g;return u.b0(M,M,[O,O,1/M[3],O])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const O=function(me,be){var Ae=be[0],Le=be[1],Ce=be[2],Ge=Ae*Ae+Le*Le+Ce*Ce;return Ge>0&&(Ge=1/Math.sqrt(Ge)),me[0]=be[0]*Ge,me[1]=be[1]*Ge,me[2]=be[2]*Ge,me}([],function(me,be,Ae){var Le=be[0],Ce=be[1],Ge=be[2],Ke=Ae[0],Re=Ae[1],Ye=Ae[2];return me[0]=Ce*Ye-Ge*Re,me[1]=Ge*Ke-Le*Ye,me[2]=Le*Re-Ce*Ke,me}([],P([],_[M[0]],_[M[1]]),P([],_[M[2]],_[M[1]]))),W=-((te=O)[0]*(ee=_[M[1]])[0]+te[1]*ee[1]+te[2]*ee[2]);var te,ee;return O.concat(W)});return new ba(_,A)}}class is{constructor(n,c){this.min=n,this.max=c,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(n){const c=[n%2==0,n<2],p=X(this.min),g=X(this.max);for(let _=0;_<c.length;_++)p[_]=c[_]?this.min[_]:this.center[_],g[_]=c[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new is(p,g)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<n.planes.length;g++){const _=n.planes[g];let A=0;for(let M=0;M<c.length;M++)u.b1(_,c[M])>=0&&A++;if(A===0)return 0;A!==c.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let M=0;M<n.points.length;M++){const O=n.points[M][g]-this.min[g];_=Math.min(_,O),A=Math.max(A,O)}if(A<0||_>this.max[g]-this.min[g])return 0}return 1}}class os{constructor(n=0,c=0,p=0,g=0){if(isNaN(n)||n<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=c,this.left=p,this.right=g}interpolate(n,c,p){return c.top!=null&&n.top!=null&&(this.top=u.z.number(n.top,c.top,p)),c.bottom!=null&&n.bottom!=null&&(this.bottom=u.z.number(n.bottom,c.bottom,p)),c.left!=null&&n.left!=null&&(this.left=u.z.number(n.left,c.left,p)),c.right!=null&&n.right!=null&&(this.right=u.z.number(n.right,c.right,p)),this}getCenter(n,c){const p=u.ac((this.left+n-this.right)/2,0,n),g=u.ac((this.top+c-this.bottom)/2,0,c);return new u.P(p,g)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new os(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Sa=85.051129;class zl{constructor(n,c,p,g,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=n||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new os,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new zl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const c=-u.b2(n,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new u.A(4);return u.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var A=g[0],M=g[1],O=g[2],W=g[3],te=Math.sin(_),ee=Math.cos(_);p[0]=A*ee+O*te,p[1]=M*ee+W*te,p[2]=A*-te+O*ee,p[3]=M*-te+W*ee}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const c=u.ac(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const c=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,c,p){this._unmodified=!1,this._edgeInsets.interpolate(n,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const c=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(n){const c=[new u.b3(0,n)];if(this._renderWorldCopies){const p=this.pointCoordinate(new u.P(0,0)),g=this.pointCoordinate(new u.P(this.width,0)),_=this.pointCoordinate(new u.P(this.width,this.height)),A=this.pointCoordinate(new u.P(0,this.height)),M=Math.floor(Math.min(p.x,g.x,_.x,A.x)),O=Math.floor(Math.max(p.x,g.x,_.x,A.x)),W=1;for(let te=M-W;te<=O+W;te++)te!==0&&c.push(new u.b3(te,n))}return c}coveringTiles(n){var c,p;let g=this.coveringZoomLevel(n);const _=g;if(n.minzoom!==void 0&&g<n.minzoom)return[];n.maxzoom!==void 0&&g>n.maxzoom&&(g=n.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),M=u.Y.fromLngLat(this.center),O=Math.pow(2,g),W=[O*A.x,O*A.y,0],te=[O*M.x,O*M.y,0],ee=ba.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,g);let me=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(me=g);const be=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Ae=Re=>({aabb:new is([Re*O,0,0],[(Re+1)*O,O,0]),zoom:0,x:0,y:0,wrap:Re,fullyVisible:!1}),Le=[],Ce=[],Ge=g,Ke=n.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let Re=1;Re<=3;Re++)Le.push(Ae(-Re)),Le.push(Ae(Re));for(Le.push(Ae(0));Le.length>0;){const Re=Le.pop(),Ye=Re.x,rt=Re.y;let at=Re.fullyVisible;if(!at){const St=Re.aabb.intersects(ee);if(St===0)continue;at=St===2}const gt=n.terrain?W:te,bt=Re.aabb.distanceX(gt),Dt=Re.aabb.distanceY(gt),Nt=Math.max(Math.abs(bt),Math.abs(Dt));if(Re.zoom===Ge||Nt>be+(1<<Ge-Re.zoom)-2&&Re.zoom>=me){const St=Ge-Re.zoom,Pt=W[0]-.5-(Ye<<St),Gt=W[1]-.5-(rt<<St);Ce.push({tileID:new u.Q(Re.zoom===Ge?Ke:Re.zoom,Re.wrap,Re.zoom,Ye,rt),distanceSq:z([te[0]-.5-Ye,te[1]-.5-rt]),tileDistanceToCamera:Math.sqrt(Pt*Pt+Gt*Gt)})}else for(let St=0;St<4;St++){const Pt=(Ye<<1)+St%2,Gt=(rt<<1)+(St>>1),gr=Re.zoom+1;let It=Re.aabb.quadrant(St);if(n.terrain){const jt=new u.Q(gr,Re.wrap,gr,Pt,Gt),hr=n.terrain.getMinMaxElevation(jt),rn=(c=hr.minElevation)!==null&&c!==void 0?c:this.elevation,Sr=(p=hr.maxElevation)!==null&&p!==void 0?p:this.elevation;It=new is([It.min[0],It.min[1],rn],[It.max[0],It.max[1],Sr])}Le.push({aabb:It,zoom:gr,x:Pt,y:Gt,wrap:Re.wrap,fullyVisible:at})}}return Ce.sort((Re,Ye)=>Re.distanceSq-Ye.distanceSq).map(Re=>Re.tileID)}resize(n,c){this.width=n,this.height=c,this.pixelsToGLUnits=[2/n,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const c=u.ac(n.lat,-85.051129,Sa);return new u.P(u.N(n.lng)*this.worldSize,u.O(c)*this.worldSize)}unproject(n){return new u.Y(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const c=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,n),_=n.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-_))return;const A=p+c-_,M=Math.cos(this._pitch)*this.cameraToCenterDistance/A/u.b4(1,g.lat),O=this.scaleZoom(M/this.tileSize);this._elevation=_,this._center=g,this.zoom=O}setLocationAtPoint(n,c){const p=this.pointCoordinate(c),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(n),A=new u.Y(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,c){return c?this.coordinatePoint(this.locationCoordinate(n),c.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,c){return this.coordinateLocation(this.pointCoordinate(n,c))}locationCoordinate(n){return u.Y.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,c){if(c){const me=c.pointCoordinate(n);if(me!=null)return me}const p=[n.x,n.y,0,1],g=[n.x,n.y,1,1];u.af(p,p,this.pixelMatrixInverse),u.af(g,g,this.pixelMatrixInverse);const _=p[3],A=g[3],M=p[1]/_,O=g[1]/A,W=p[2]/_,te=g[2]/A,ee=W===te?0:(0-W)/(te-W);return new u.Y(u.z.number(p[0]/_,g[0]/A,ee)/this.worldSize,u.z.number(M,O,ee)/this.worldSize)}coordinatePoint(n,c=0,p=this.pixelMatrix){const g=[n.x*this.worldSize,n.y*this.worldSize,c,1];return u.af(g,g,p),new u.P(g[0]/g[3],g[1]/g[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new Lt().extend(this.pointLocation(new u.P(0,n))).extend(this.pointLocation(new u.P(this.width,n))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Lt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Sa])}calculatePosMatrix(n,c=!1){const p=n.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=n.canonical,A=this.worldSize/this.zoomScale(_.z),M=_.x+Math.pow(2,_.z)*n.wrap,O=u.an(new Float64Array(16));return u.H(O,O,[M*A,_.y*A,0]),u.J(O,O,[A/u.W,A/u.W,1]),u.K(O,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,O),g[p]=new Float32Array(O),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(n,c){c=u.ac(+c,this.minZoom,this.maxZoom);const p={center:new u.M(n.lng,n.lat),zoom:c};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const Re=179.9999999999;g=[-Re,Re]}const _=this.tileSize*this.zoomScale(p.zoom);let A=0,M=_,O=0,W=_,te=0,ee=0;const{x:me,y:be}=this.size;if(this.latRange){const Re=this.latRange;A=u.O(Re[1])*_,M=u.O(Re[0])*_,M-A<be&&(te=be/(M-A))}g&&(O=u.b2(u.N(g[0])*_,0,_),W=u.b2(u.N(g[1])*_,0,_),W<O&&(W+=_),W-O<me&&(ee=me/(W-O)));const{x:Ae,y:Le}=this.project.call({worldSize:_},n);let Ce,Ge;const Ke=Math.max(ee||0,te||0);if(Ke){const Re=new u.P(ee?(W+O)/2:Ae,te?(M+A)/2:Le);return p.center=this.unproject.call({worldSize:_},Re).wrap(),p.zoom+=this.scaleZoom(Ke),p}if(this.latRange){const Re=be/2;Le-Re<A&&(Ge=A+Re),Le+Re>M&&(Ge=M-Re)}if(g){const Re=(O+W)/2;let Ye=Ae;this._renderWorldCopies&&(Ye=u.b2(Ae,Re-_/2,Re+_/2));const rt=me/2;Ye-rt<O&&(Ce=O+rt),Ye+rt>W&&(Ce=W-rt)}if(Ce!==void 0||Ge!==void 0){const Re=new u.P(Ce??Ae,Ge??Le);p.center=this.unproject.call({worldSize:_},Re).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=p,this._unmodified=n,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b4(1,this.center.lat)*this.worldSize;let g=u.an(new Float64Array(16));u.J(g,g,[this.width/2,-this.height/2,1]),u.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.an(new Float64Array(16)),u.J(g,g,[1,-1,1]),u.H(g,g,[-1,-1,0]),u.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this.minElevationForCurrentTile),M=_-A*this._pixelPerMeter/Math.cos(this._pitch),O=A<0?M:_,W=Math.PI/2+this._pitch,te=this._fov*(.5+n.y/this.height),ee=Math.sin(te)*O/Math.sin(u.ac(Math.PI-W-te,.01,Math.PI-.01)),me=this.getHorizon(),be=2*Math.atan(me/this.cameraToCenterDistance)*(.5+n.y/(2*me)),Ae=Math.sin(be)*O/Math.sin(u.ac(Math.PI-W-be,.01,Math.PI-.01)),Le=Math.min(ee,Ae),Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*Le+O),Ge=this.height/50;g=new Float64Array(16),u.b5(g,this._fov,this.width/this.height,Ge,Ce),g[8]=2*-n.x/this.width,g[9]=2*n.y/this.height,u.J(g,g,[1,-1,1]),u.H(g,g,[0,0,-this.cameraToCenterDistance]),u.b6(g,g,this._pitch),u.ad(g,g,this.angle),u.H(g,g,[-c,-p,0]),this.mercatorMatrix=u.J([],g,[this.worldSize,this.worldSize,this.worldSize]),u.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,g),u.H(g,g,[0,0,-this.elevation]),this.modelViewProjectionMatrix=g,this.invModelViewProjectionMatrix=u.as([],g),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,g);const Ke=this.width%2/2,Re=this.height%2/2,Ye=Math.cos(this.angle),rt=Math.sin(this.angle),at=c-Math.round(c)+Ye*Ke+rt*Re,gt=p-Math.round(p)+Ye*Re+rt*Ke,bt=new Float64Array(g);if(u.H(bt,bt,[at>.5?at-1:at,gt>.5?gt-1:gt,0]),this.alignedModelViewProjectionMatrix=bt,g=u.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new u.P(0,0)),c=[n.x*this.worldSize,n.y*this.worldSize,0,1];return u.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,n))}getCameraQueryGeometry(n){const c=this.getCameraPoint();if(n.length===1)return[n[0],c];{let p=c.x,g=c.y,_=c.x,A=c.y;for(const M of n)p=Math.min(p,M.x),g=Math.min(g,M.y),_=Math.max(_,M.x),A=Math.max(A,M.y);return[new u.P(p,g),new u.P(_,g),new u.P(_,A),new u.P(p,A),new u.P(p,g)]}}lngLatToCameraDepth(n,c){const p=this.locationCoordinate(n),g=[p.x*this.worldSize,p.y*this.worldSize,c,1];return u.af(g,g,this.modelViewProjectionMatrix),g[2]/g[3]}}function H(v,n){let c,p=!1,g=null,_=null;const A=()=>{g=null,p&&(v.apply(_,c),g=setTimeout(A,n),p=!1)};return(...M)=>(p=!0,_=this,c=M,g||A(),g)}class _e{constructor(n){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=H(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),A=Math.round(c.lng*_)/_,M=Math.round(c.lat*_)/_,O=this._map.getBearing(),W=this._map.getPitch();let te="";if(te+=n?`/${A}/${M}/${p}`:`${p}/${M}/${A}`,(O||W)&&(te+="/"+Math.round(10*O)/10),W&&(te+=`/${Math.round(W)}`),this._hashName){const ee=this._hashName;let me=!1;const be=window.location.hash.slice(1).split("&").map(Ae=>{const Le=Ae.split("=")[0];return Le===ee?(me=!0,`${Le}=${te}`):Ae}).filter(Ae=>Ae);return me||be.push(`${ee}=${te}`),`#${be.join("&")}`}return`#${te}`}}const $e={linearity:.3,easing:u.b7(0,0,.3,1)},lt=u.e({deceleration:2500,maxSpeed:1400},$e),kt=u.e({deceleration:20,maxSpeed:1400},$e),Tt=u.e({deceleration:1e3,maxSpeed:360},$e),Zt=u.e({deceleration:1e3,maxSpeed:90},$e);class Yt{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,c=b.now();for(;n.length>0&&c-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)c.zoom+=_.zoomDelta||0,c.bearing+=_.bearingDelta||0,c.pitch+=_.pitchDelta||0,_.panDelta&&c.pan._add(_.panDelta),_.around&&(c.around=_.around),_.pinchAround&&(c.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(c.pan.mag()){const _=Or(c.pan.mag(),p,u.e({},lt,n||{}));g.offset=c.pan.mult(_.amount/c.pan.mag()),g.center=this._map.transform.center,vr(g,_)}if(c.zoom){const _=Or(c.zoom,p,kt);g.zoom=this._map.transform.zoom+_.amount,vr(g,_)}if(c.bearing){const _=Or(c.bearing,p,Tt);g.bearing=this._map.transform.bearing+u.ac(_.amount,-179,179),vr(g,_)}if(c.pitch){const _=Or(c.pitch,p,Zt);g.pitch=this._map.transform.pitch+_.amount,vr(g,_)}if(g.zoom||g.bearing){const _=c.pinchAround===void 0?c.around:c.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),u.e(g,{noMoveStart:!0})}}function vr(v,n){(!v.duration||v.duration<n.duration)&&(v.duration=n.duration,v.easing=n.easing)}function Or(v,n,c){const{maxSpeed:p,linearity:g,deceleration:_}=c,A=u.ac(v*g/(n/1e3),-p,p),M=Math.abs(A)/(_*g);return{easing:c.easing,duration:1e3*M,amount:A*(M/2)}}class _r extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p,g={}){const _=T.mousePos(c.getCanvas(),p),A=c.unproject(_);super(n,u.e({point:_,lngLat:A,originalEvent:p},g)),this._defaultPrevented=!1,this.target=c}}class $r extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p){const g=n==="touchend"?p.changedTouches:p.touches,_=T.touchPos(c.getCanvasContainer(),g),A=_.map(O=>c.unproject(O)),M=_.reduce((O,W,te,ee)=>O.add(W.div(ee.length)),new u.P(0,0));super(n,{points:_,point:M,lngLats:A,lngLat:c.unproject(M),originalEvent:p}),this._defaultPrevented=!1}}class hn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p){super(n,{originalEvent:p}),this._defaultPrevented=!1}}class jn{constructor(n,c){this._map=n,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new hn(n.type,this._map,n))}mousedown(n,c){return this._mousedownPos=c,this._firePreventable(new _r(n.type,this._map,n))}mouseup(n){this._map.fire(new _r(n.type,this._map,n))}click(n,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new _r(n.type,this._map,n))}dblclick(n){return this._firePreventable(new _r(n.type,this._map,n))}mouseover(n){this._map.fire(new _r(n.type,this._map,n))}mouseout(n){this._map.fire(new _r(n.type,this._map,n))}touchstart(n){return this._firePreventable(new $r(n.type,this._map,n))}touchmove(n){this._map.fire(new $r(n.type,this._map,n))}touchend(n){this._map.fire(new $r(n.type,this._map,n))}touchcancel(n){this._map.fire(new $r(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vn{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new _r(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _r("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new _r(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pi{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(u.P.convert(n),this._map.terrain)}}class Ai{constructor(n,c){this._map=n,this._tr=new Pi(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,c){this.isEnabled()&&n.shiftKey&&n.button===0&&(T.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(n,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const _=Math.min(g.x,p.x),A=Math.max(g.x,p.x),M=Math.min(g.y,p.y),O=Math.max(g.y,p.y);T.setTransform(this._box,`translate(${_}px,${M}px)`),this._box.style.width=A-_+"px",this._box.style.height=O-M+"px"}mouseupWindow(n,c){if(!this._active||n.button!==0)return;const p=this._startPos,g=c;if(this.reset(),T.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:n})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,c){return this._map.fire(new u.k(n,{originalEvent:c}))}}function Qi(v,n){if(v.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${n.length}`);const c={};for(let p=0;p<v.length;p++)c[v[p].identifier]=n[p];return c}class Gu{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new u.P(0,0);for(const A of g)_._add(A);return _.div(g.length)}(c),this.touches=Qi(p,c)))}touchmove(n,c,p){if(this.aborted||!this.centroid)return;const g=Qi(p,c);for(const _ in this.touches){const A=g[_];(!A||A.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(n,c,p){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Ea{constructor(n){this.singleTap=new Gu(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,c,p){this.singleTap.touchstart(n,c,p)}touchmove(n,c,p){this.singleTap.touchmove(n,c,p)}touchend(n,c,p){const g=this.singleTap.touchend(n,c,p);if(g){const _=n.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(g)<30;if(_&&A||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ta{constructor(n){this._tr=new Pi(n),this._zoomIn=new Ea({numTouches:1,numTaps:2}),this._zoomOut=new Ea({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,c,p){this._zoomIn.touchstart(n,c,p),this._zoomOut.touchstart(n,c,p)}touchmove(n,c,p){this._zoomIn.touchmove(n,c,p),this._zoomOut.touchmove(n,c,p)}touchend(n,c,p){const g=this._zoomIn.touchend(n,c,p),_=this._zoomOut.touchend(n,c,p),A=this._tr;return g?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(g)},{originalEvent:n})}):_?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(_)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hs{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const c=this._moveFunction(...n);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(n,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const g=c.length?c[0]:c;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&T.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const K0={0:1,2:2};class qc{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const c=T.mouseButton(n);this._eventButton=c}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(c,p){const g=K0[p];return c.buttons===void 0||(c.buttons&g)!==g}(n,this._eventButton)}isValidEndEvent(n){return T.mouseButton(n)===this._eventButton}}class pn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const Pa=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=n=>{n.preventDefault()}},eo=({enable:v,clickTolerance:n,bearingDegreesPerPixelMoved:c=.8})=>{const p=new qc({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Hs({clickTolerance:n,move:(g,_)=>({bearingDelta:(_.x-g.x)*c}),moveStateManager:p,enable:v,assignEvents:Pa})},Xc=({enable:v,clickTolerance:n,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new qc({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Hs({clickTolerance:n,move:(g,_)=>({pitchDelta:(_.y-g.y)*c}),moveStateManager:p,enable:v,assignEvents:Pa})};class Df{constructor(n,c){this._clickTolerance=n.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(n,c,p){return this._calculateTransform(n,c,p)}touchmove(n,c,p){if(this._active&&!(p.length<this.minTouchs()))return n.preventDefault(),this._calculateTransform(n,c,p)}touchend(n,c,p){this._calculateTransform(n,c,p),this._active&&p.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,c,p){p.length>0&&(this._active=!0);const g=Qi(p,c),_=new u.P(0,0),A=new u.P(0,0);let M=0;for(const W in g){const te=g[W],ee=this._touches[W];ee&&(_._add(te),A._add(te.sub(ee)),M++,g[W]=te)}if(this._touches=g,M<this.minTouchs()||!A.mag())return;const O=A.div(M);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(M),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(n,c,p){if(!this._firstTwoTouches)return;n.preventDefault();const[g,_]=this._firstTwoTouches,A=Aa(p,c,g),M=Aa(p,c,_);if(!A||!M)return;const O=this._aroundCenter?null:A.add(M).div(2);return this._move([A,M],O,n)}touchend(n,c,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,A=Aa(p,c,g),M=Aa(p,c,_);A&&M||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Aa(v,n,c){for(let p=0;p<v.length;p++)if(v[p].identifier===c)return n[p]}function Ll(v,n){return Math.log(v/n)/Math.LN2}class Yc extends Kc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,c){const p=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Ll(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ll(this._distance,p),pinchAround:c}}}function Nf(v,n){return 180*v.angleWith(n)/Math.PI}class $f extends Kc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,c,p){const g=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nf(this._vector,g),pinchAround:c}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const c=25/(Math.PI*this._minDiameter)*360,p=Nf(n,this._startVector);return Math.abs(p)<c}}function Jc(v){return Math.abs(v.y)>Math.abs(v.x)}class Uf extends Kc{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,c,p){super.touchstart(n,c,p),this._currentTouchCount=p.length}_start(n){this._lastPoints=n,Jc(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=n[0].sub(this._lastPoints[0]),_=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(n,c,p){if(this._valid!==void 0)return this._valid;const g=n.mag()>=2,_=c.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=n.y>0==c.y>0;return Jc(n)&&Jc(c)&&A}}const tm={panStep:100,bearingStep:15,pitchStep:10};class as{constructor(n){this._tr=new Pi(n);const c=tm;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let c=0,p=0,g=0,_=0,A=0;switch(n.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:n.shiftKey?p=-1:(n.preventDefault(),_=-1);break;case 39:n.shiftKey?p=1:(n.preventDefault(),_=1);break;case 38:n.shiftKey?g=1:(n.preventDefault(),A=-1);break;case 40:n.shiftKey?g=-1:(n.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:M=>{const O=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:rm,zoom:c?Math.round(O.zoom)+c*(n.shiftKey?2:1):O.zoom,bearing:O.bearing+p*this._bearingStep,pitch:O.pitch+g*this._pitchStep,offset:[-_*this._panStep,-A*this._panStep],center:O.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rm(v){return v*(2-v)}const Vf=4.000244140625;class Gf{constructor(n,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=n,this._tr=new Pi(n),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!n[this._map.cooperativeGestures._bypassKey])return;let c=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const p=b.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%Vf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(g*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),n.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=n,this._delta-=c,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=T.mousePos(this._map.getCanvas(),n),p=this._tr;this._around=c.y>p.transform.height/2-p.transform.getHorizon()?u.M.convert(this._aroundCenter?p.center:p.unproject(c)):u.M.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Vf?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&O!==0&&(O=1/O);const W=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(W*O))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,p=this._startZoom,g=this._easing;let _,A=!1;if(this._type==="wheel"&&p&&g){const M=Math.min((b.now()-this._lastWheelEventTime)/200,1),O=g(M);_=u.z.number(p,c,O),M<1?this._frameId||(this._frameId=!0):A=!0}else _=c,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:_-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let c=u.b8;if(this._prevEase){const p=this._prevEase,g=(b.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),A=.27/Math.sqrt(_*_+1e-4)*.01,M=Math.sqrt(.0729-A*A);c=u.b7(A,M,.25,1)}return this._prevEase={start:b.now(),duration:n,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Wf{constructor(n,c){this._clickZoom=n,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class nm{constructor(n){this._tr=new Pi(n),this.reset()}reset(){this._active=!1}dblclick(n,c){return n.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class im{constructor(){this._tap=new Ea({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,c,p){if(!this._swipePoint)if(this._tapTime){const g=c[0],_=n.timeStamp-this._tapTime<500,A=this._tapPoint.dist(g)<30;_&&A?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(n,c,p)}touchmove(n,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=c[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,n.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(n,c,p)}touchend(n,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(n,c,p);g&&(this._tapTime=n.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hf{constructor(n,c,p){this._el=n,this._mousePan=c,this._touchPan=p}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bl{constructor(n,c,p){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zf{constructor(n,c,p,g){this._el=n,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class xo{constructor(n,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",n);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=c,this._container.appendChild(g);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=p,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(n){this._onCooperativeGesture(n.touches.length===1)}wheel(n){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!n[this._bypassKey])}_onCooperativeGesture(n){this._enabled&&n&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const to=v=>v.zoom||v.drag||v.pitch||v.rotate;class om extends u.k{}function wo(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Wu{constructor(n,c){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=g.type==="renderFrame"?void 0:g,M={needsRenderFrame:!1},O={},W={},te=g.touches,ee=te?this._getMapTouches(te):void 0,me=ee?T.touchPos(this._map.getCanvas(),ee):T.mousePos(this._map.getCanvas(),g);for(const{handlerName:Le,handler:Ce,allowed:Ge}of this._handlers){if(!Ce.isEnabled())continue;let Ke;this._blockedByActive(W,Ge,Le)?Ce.reset():Ce[_||g.type]&&(Ke=Ce[_||g.type](g,me,ee),this.mergeHandlerResult(M,O,Ke,Le,A),Ke&&Ke.needsRenderFrame&&this._triggerRenderFrame()),(Ke||Ce.isActive())&&(W[Le]=Ce)}const be={};for(const Le in this._previousActiveHandlers)W[Le]||(be[Le]=A);this._previousActiveHandlers=W,(Object.keys(be).length||wo(M))&&(this._changes.push([M,O,be]),this._triggerRenderFrame()),(Object.keys(W).length||wo(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=M;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yt(n),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,A]of this._listeners)T.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[n,c,p]of this._listeners)T.removeEventListener(n,c,n===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(n){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new jn(c,n));const g=c.boxZoom=new Ai(c,n);this._add("boxZoom",g),n.interactive&&n.boxZoom&&g.enable();const _=c.cooperativeGestures=new xo(c,n.cooperativeGestures);this._add("cooperativeGestures",_),n.cooperativeGestures&&_.enable();const A=new Ta(c),M=new nm(c);c.doubleClickZoom=new Wf(M,A),this._add("tapZoom",A),this._add("clickZoom",M),n.interactive&&n.doubleClickZoom&&c.doubleClickZoom.enable();const O=new im;this._add("tapDragZoom",O);const W=c.touchPitch=new Uf(c);this._add("touchPitch",W),n.interactive&&n.touchPitch&&c.touchPitch.enable(n.touchPitch);const te=eo(n),ee=Xc(n);c.dragRotate=new Bl(n,te,ee),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",ee,["mouseRotate"]),n.interactive&&n.dragRotate&&c.dragRotate.enable();const me=(({enable:Ke,clickTolerance:Re})=>{const Ye=new qc({checkCorrectEvent:rt=>T.mouseButton(rt)===0&&!rt.ctrlKey});return new Hs({clickTolerance:Re,move:(rt,at)=>({around:at,panDelta:at.sub(rt)}),activateOnStart:!0,moveStateManager:Ye,enable:Ke,assignEvents:Pa})})(n),be=new Df(n,c);c.dragPan=new Hf(p,me,be),this._add("mousePan",me),this._add("touchPan",be,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&c.dragPan.enable(n.dragPan);const Ae=new $f,Le=new Yc;c.touchZoomRotate=new Zf(p,Le,Ae,O),this._add("touchRotate",Ae,["touchPan","touchZoom"]),this._add("touchZoom",Le,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&c.touchZoomRotate.enable(n.touchZoomRotate);const Ce=c.scrollZoom=new Gf(c,()=>this._triggerRenderFrame());this._add("scrollZoom",Ce,["mousePan"]),n.interactive&&n.scrollZoom&&c.scrollZoom.enable(n.scrollZoom);const Ge=c.keyboard=new as(c);this._add("keyboard",Ge),n.interactive&&n.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Vn(c))}_add(n,c,p){this._handlers.push({handlerName:n,handler:c,allowed:p}),this._handlersById[n]=c}stop(n){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!to(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,c,p){for(const g in n)if(g!==p&&(!c||c.indexOf(g)<0))return!0;return!1}_getMapTouches(n){const c=[];for(const p of n)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(n,c,p,g,_){if(!p)return;u.e(n,p);const A={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(c.zoom=A),p.panDelta!==void 0&&(c.drag=A),p.pitchDelta!==void 0&&(c.pitch=A),p.bearingDelta!==void 0&&(c.rotate=A)}_applyChanges(){const n={},c={},p={};for(const[g,_,A]of this._changes)g.panDelta&&(n.panDelta=(n.panDelta||new u.P(0,0))._add(g.panDelta)),g.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(n.around=g.around),g.pinchAround!==void 0&&(n.pinchAround=g.pinchAround),g.noInertia&&(n.noInertia=g.noInertia),u.e(c,_),u.e(p,A);this._updateMapTransform(n,c,p),this._changes=[]}_updateMapTransform(n,c,p){const g=this._map,_=g._getTransformForUpdate(),A=g.terrain;if(!(wo(n)||A&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:M,zoomDelta:O,bearingDelta:W,pitchDelta:te,around:ee,pinchAround:me}=n;me!==void 0&&(ee=me),g._stop(!0),ee=ee||g.transform.centerPoint;const be=_.pointLocation(M?ee.sub(M):ee);W&&(_.bearing+=W),te&&(_.pitch+=te),O&&(_.zoom+=O),A?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(M)):_.setLocationAtPoint(be,ee):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(be,ee)):_.setLocationAtPoint(be,ee),g._applyUpdatedTransform(_),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(c,p,!0)}_fireEvents(n,c,p){const g=to(this._eventsInProgress),_=to(n),A={};for(const ee in n){const{originalEvent:me}=n[ee];this._eventsInProgress[ee]||(A[`${ee}start`]=me),this._eventsInProgress[ee]=n[ee]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const ee in A)this._fireEvent(ee,A[ee]);_&&this._fireEvent("move",_.originalEvent);for(const ee in n){const{originalEvent:me}=n[ee];this._fireEvent(ee,me)}const M={};let O;for(const ee in this._eventsInProgress){const{handlerName:me,originalEvent:be}=this._eventsInProgress[ee];this._handlersById[me].isActive()||(delete this._eventsInProgress[ee],O=c[me]||be,M[`${ee}end`]=O)}for(const ee in M)this._fireEvent(ee,M[ee]);const W=to(this._eventsInProgress),te=(g||_)&&!W;if(te&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),p&&te){this._updatingCamera=!0;const ee=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),me=be=>be!==0&&-this._bearingSnap<be&&be<this._bearingSnap;!ee||!ee.essential&&b.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:O})),me(this._map.getBearing())&&this._map.resetNorth()):(me(ee.bearing||this._map.getBearing())&&(ee.bearing=0),ee.freezeElevation=!0,this._map.easeTo(ee,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(n,c){this._map.fire(new u.k(n,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new om("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Y0 extends u.E{constructor(n,c){super(),this._renderFrameCallback=()=>{const p=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(n,c){return this.jumpTo({center:n},c)}panBy(n,c,p){return n=u.P.convert(n).mult(-1),this.panTo(this.transform.center,u.e({offset:n},c),p)}panTo(n,c,p){return this.easeTo(u.e({center:n},c),p)}getZoom(){return this.transform.zoom}setZoom(n,c){return this.jumpTo({zoom:n},c),this}zoomTo(n,c,p){return this.easeTo(u.e({zoom:n},c),p)}zoomIn(n,c){return this.zoomTo(this.getZoom()+1,n,c),this}zoomOut(n,c){return this.zoomTo(this.getZoom()-1,n,c),this}getBearing(){return this.transform.bearing}setBearing(n,c){return this.jumpTo({bearing:n},c),this}getPadding(){return this.transform.padding}setPadding(n,c){return this.jumpTo({padding:n},c),this}rotateTo(n,c,p){return this.easeTo(u.e({bearing:n},c),p)}resetNorth(n,c){return this.rotateTo(0,u.e({duration:1e3},n),c),this}resetNorthPitch(n,c){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},n),c),this}snapToNorth(n,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,c):this}getPitch(){return this.transform.pitch}setPitch(n,c){return this.jumpTo({pitch:n},c),this}cameraForBounds(n,c){n=Lt.convert(n);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),p,c)}_cameraForBoxAndBearing(n,c,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=u.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const St=g.padding;g.padding={top:St,bottom:St,right:St,left:St}}g.padding=u.e(_,g.padding);const A=this.transform,M=A.padding,O=new Lt(n,c),W=A.project(O.getNorthWest()),te=A.project(O.getNorthEast()),ee=A.project(O.getSouthEast()),me=A.project(O.getSouthWest()),be=u.b9(-p),Ae=W.rotate(be),Le=te.rotate(be),Ce=ee.rotate(be),Ge=me.rotate(be),Ke=new u.P(Math.max(Ae.x,Le.x,Ge.x,Ce.x),Math.max(Ae.y,Le.y,Ge.y,Ce.y)),Re=new u.P(Math.min(Ae.x,Le.x,Ge.x,Ce.x),Math.min(Ae.y,Le.y,Ge.y,Ce.y)),Ye=Ke.sub(Re),rt=(A.width-(M.left+M.right+g.padding.left+g.padding.right))/Ye.x,at=(A.height-(M.top+M.bottom+g.padding.top+g.padding.bottom))/Ye.y;if(at<0||rt<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const gt=Math.min(A.scaleZoom(A.scale*Math.min(rt,at)),g.maxZoom),bt=u.P.convert(g.offset),Dt=new u.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(u.b9(p)),Nt=bt.add(Dt).mult(A.scale/A.zoomScale(gt));return{center:A.unproject(W.add(ee).div(2).sub(Nt)),zoom:gt,bearing:p}}fitBounds(n,c,p){return this._fitInternal(this.cameraForBounds(n,c),c,p)}fitScreenCoordinates(n,c,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(n)),this.transform.pointLocation(u.P.convert(c)),p,g),g,_)}_fitInternal(n,c,p){return n?(delete(c=u.e(n,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(n,c){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,A=!1;return"zoom"in n&&p.zoom!==+n.zoom&&(g=!0,p.zoom=+n.zoom),n.center!==void 0&&(p.center=u.M.convert(n.center)),"bearing"in n&&p.bearing!==+n.bearing&&(_=!0,p.bearing=+n.bearing),"pitch"in n&&p.pitch!==+n.pitch&&(A=!0,p.pitch=+n.pitch),n.padding==null||p.isPaddingEqual(n.padding)||(p.padding=n.padding),this._applyUpdatedTransform(p),this.fire(new u.k("movestart",c)).fire(new u.k("move",c)),g&&this.fire(new u.k("zoomstart",c)).fire(new u.k("zoom",c)).fire(new u.k("zoomend",c)),_&&this.fire(new u.k("rotatestart",c)).fire(new u.k("rotate",c)).fire(new u.k("rotateend",c)),A&&this.fire(new u.k("pitchstart",c)).fire(new u.k("pitch",c)).fire(new u.k("pitchend",c)),this.fire(new u.k("moveend",c))}calculateCameraOptionsFromTo(n,c,p,g=0){const _=u.Y.fromLngLat(n,c),A=u.Y.fromLngLat(p,g),M=A.x-_.x,O=A.y-_.y,W=A.z-_.z,te=Math.hypot(M,O,W);if(te===0)throw new Error("Can't calculate camera options with same From and To");const ee=Math.hypot(M,O),me=this.transform.scaleZoom(this.transform.cameraToCenterDistance/te/this.transform.tileSize),be=180*Math.atan2(M,-O)/Math.PI;let Ae=180*Math.acos(ee/te)/Math.PI;return Ae=W<0?90-Ae:90+Ae,{center:A.toLngLat(),zoom:me,pitch:Ae,bearing:be}}easeTo(n,c){var p;this._stop(!1,n.easeId),((n=u.e({offset:[0,0],duration:500,easing:u.b8},n)).animate===!1||!n.essential&&b.prefersReducedMotion)&&(n.duration=0);const g=this._getTransformForUpdate(),_=this.getZoom(),A=this.getBearing(),M=this.getPitch(),O=this.getPadding(),W="bearing"in n?this._normalizeBearing(n.bearing,A):A,te="pitch"in n?+n.pitch:M,ee="padding"in n?n.padding:g.padding,me=u.P.convert(n.offset);let be=g.centerPoint.add(me);const Ae=g.pointLocation(be),{center:Le,zoom:Ce}=g.getConstrained(u.M.convert(n.center||Ae),(p=n.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(Le);const Ge=g.project(Ae),Ke=g.project(Le).sub(Ge),Re=g.zoomScale(Ce-_);let Ye,rt;n.around&&(Ye=u.M.convert(n.around),rt=g.locationPoint(Ye));const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ce!==_,this._rotating=this._rotating||A!==W,this._pitching=this._pitching||te!==M,this._padding=!g.isPaddingEqual(ee),this._easeId=n.easeId,this._prepareEase(c,n.noMoveStart,at),this.terrain&&this._prepareElevation(Le),this._ease(gt=>{if(this._zooming&&(g.zoom=u.z.number(_,Ce,gt)),this._rotating&&(g.bearing=u.z.number(A,W,gt)),this._pitching&&(g.pitch=u.z.number(M,te,gt)),this._padding&&(g.interpolatePadding(O,ee,gt),be=g.centerPoint.add(me)),this.terrain&&!n.freezeElevation&&this._updateElevation(gt),Ye)g.setLocationAtPoint(Ye,rt);else{const bt=g.zoomScale(g.zoom-_),Dt=Ce>_?Math.min(2,Re):Math.max(.5,Re),Nt=Math.pow(Dt,1-gt),St=g.unproject(Ge.add(Ke.mult(gt*Nt)).mult(bt));g.setLocationAtPoint(g.renderWorldCopies?St.wrap():St,be)}this._applyUpdatedTransform(g),this._fireMoveEvents(c)},gt=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(c,gt)},n),this}_prepareEase(n,c,p={}){this._moving=!0,c||p.moving||this.fire(new u.k("movestart",n)),this._zooming&&!p.zooming&&this.fire(new u.k("zoomstart",n)),this._rotating&&!p.rotating&&this.fire(new u.k("rotatestart",n)),this._pitching&&!p.pitching&&this.fire(new u.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(p-(c-(p*n+this._elevationStart))/(1-n)),this._elevationTarget=c}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const c=n.clone(),{center:p,zoom:g,pitch:_,bearing:A,elevation:M}=this.transformCameraUpdate(c);p&&(c.center=p),g!==void 0&&(c.zoom=g),_!==void 0&&(c.pitch=_),A!==void 0&&(c.bearing=A),M!==void 0&&(c.elevation=M),this.transform.apply(c)}_fireMoveEvents(n){this.fire(new u.k("move",n)),this._zooming&&this.fire(new u.k("zoom",n)),this._rotating&&this.fire(new u.k("rotate",n)),this._pitching&&this.fire(new u.k("pitch",n))}_afterEase(n,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new u.k("zoomend",n)),g&&this.fire(new u.k("rotateend",n)),_&&this.fire(new u.k("pitchend",n)),this.fire(new u.k("moveend",n))}flyTo(n,c){var p;if(!n.essential&&b.prefersReducedMotion){const jt=u.L(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,c)}this.stop(),n=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b8},n);const g=this._getTransformForUpdate(),_=this.getZoom(),A=this.getBearing(),M=this.getPitch(),O=this.getPadding(),W="bearing"in n?this._normalizeBearing(n.bearing,A):A,te="pitch"in n?+n.pitch:M,ee="padding"in n?n.padding:g.padding,me=u.P.convert(n.offset);let be=g.centerPoint.add(me);const Ae=g.pointLocation(be),{center:Le,zoom:Ce}=g.getConstrained(u.M.convert(n.center||Ae),(p=n.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(Le);const Ge=g.zoomScale(Ce-_),Ke=g.project(Ae),Re=g.project(Le).sub(Ke);let Ye=n.curve;const rt=Math.max(g.width,g.height),at=rt/Ge,gt=Re.mag();if("minZoom"in n){const jt=u.ac(Math.min(n.minZoom,_,Ce),g.minZoom,g.maxZoom),hr=rt/g.zoomScale(jt-_);Ye=Math.sqrt(hr/gt*2)}const bt=Ye*Ye;function Dt(jt){const hr=(at*at-rt*rt+(jt?-1:1)*bt*bt*gt*gt)/(2*(jt?at:rt)*bt*gt);return Math.log(Math.sqrt(hr*hr+1)-hr)}function Nt(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function St(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const Pt=Dt(!1);let Gt=function(jt){return St(Pt)/St(Pt+Ye*jt)},gr=function(jt){return rt*((St(Pt)*(Nt(hr=Pt+Ye*jt)/St(hr))-Nt(Pt))/bt)/gt;var hr},It=(Dt(!0)-Pt)/Ye;if(Math.abs(gt)<1e-6||!isFinite(It)){if(Math.abs(rt-at)<1e-6)return this.easeTo(n,c);const jt=at<rt?-1:1;It=Math.abs(Math.log(at/rt))/Ye,gr=()=>0,Gt=hr=>Math.exp(jt*Ye*hr)}return n.duration="duration"in n?+n.duration:1e3*It/("screenSpeed"in n?+n.screenSpeed/Ye:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=A!==W,this._pitching=te!==M,this._padding=!g.isPaddingEqual(ee),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Le),this._ease(jt=>{const hr=jt*It,rn=1/Gt(hr);g.zoom=jt===1?Ce:_+g.scaleZoom(rn),this._rotating&&(g.bearing=u.z.number(A,W,jt)),this._pitching&&(g.pitch=u.z.number(M,te,jt)),this._padding&&(g.interpolatePadding(O,ee,jt),be=g.centerPoint.add(me)),this.terrain&&!n.freezeElevation&&this._updateElevation(jt);const Sr=jt===1?Le:g.unproject(Ke.add(Re.mult(gr(hr))).mult(rn));g.setLocationAtPoint(g.renderWorldCopies?Sr.wrap():Sr,be),this._applyUpdatedTransform(g),this._fireMoveEvents(c)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,c)}return n||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(n,c,p){p.animate===!1||p.duration===0?(n(1),c()):(this._easeStart=b.now(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,c){n=u.b2(n,-180,180);const p=Math.abs(n-c);return Math.abs(n-360-c)<p&&(n-=360),Math.abs(n+360-c)<p&&(n+=360),n}_normalizeCenter(n){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const p=n.lng-c.center.lng;n.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const am={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class sm{constructor(n=am){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,c){const p=this._map._getUIString(`AttributionControl.${c}`);n.title=p,n.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const c=this._map.style.sourceCaches;for(const g in c){const _=c[g];if(_.used||_.usedForTerrain){const A=_.getSource();A.attribution&&n.indexOf(A.attribution)<0&&n.push(A.attribution)}}n=n.filter(g=>String(g).trim()),n.sort((g,_)=>g.length-_.length),n=n.filter((g,_)=>{for(let A=_+1;A<n.length;A++)if(n[A].indexOf(g)>=0)return!1;return!0});const p=n.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,n.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class qf{constructor(n={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const c=T.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const c=++this._id;return this._queue.push({callback:n,id:c,cancelled:!1}),c}remove(n){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const g of p)if(g.id===n)return void(g.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ss=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class Ut extends u.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,c){this.sourceCache.update(n,c),this._renderableTilesKeys=[];const p={};for(const g of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.aO(g.posMatrix,0,u.W,0,u.W,0,1),this._tiles[g.key]=new Te(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(n){for(const c in this._tiles){const p=this._tiles[c];(!n||p.tileID.equals(n)||p.tileID.isChildOf(n)||n.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const c={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16),u.aO(_.posMatrix,0,u.W,0,u.W,0,1),c[p]=_}else if(g.canonical.isChildOf(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const A=g.canonical.z-n.canonical.z,M=g.canonical.x-(g.canonical.x>>A<<A),O=g.canonical.y-(g.canonical.y>>A<<A),W=u.W>>A;u.aO(_.posMatrix,0,W,0,W,0,1),u.H(_.posMatrix,_.posMatrix,[-M*W,-O*W,0]),c[p]=_}else if(n.canonical.isChildOf(g.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const A=n.canonical.z-g.canonical.z,M=n.canonical.x-(n.canonical.x>>A<<A),O=n.canonical.y-(n.canonical.y>>A<<A),W=u.W>>A;u.aO(_.posMatrix,0,u.W,0,u.W,0,1),u.H(_.posMatrix,_.posMatrix,[M*W,O*W,0]),u.J(_.posMatrix,_.posMatrix,[1/2**A,1/2**A,0]),c[p]=_}}return c}getSourceTile(n,c){const p=this.sourceCache._source;let g=n.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!_||!_.dem)&&c)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(n.scaledTo(g--).key);return _}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=n)}}class lm{constructor(n,c,p){this.painter=n,this.sourceCache=new Ut(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,c,p,g=u.W){var _;if(!(c>=0&&c<g&&p>=0&&p<g))return 0;const A=this.getTerrainData(n),M=(_=A.tile)===null||_===void 0?void 0:_.dem;if(!M)return 0;const O=function(Ae,Le,Ce){var Ge=Le[0],Ke=Le[1];return Ae[0]=Ce[0]*Ge+Ce[4]*Ke+Ce[12],Ae[1]=Ce[1]*Ge+Ce[5]*Ke+Ce[13],Ae}([],[c/g*u.W,p/g*u.W],A.u_terrain_matrix),W=[O[0]*M.dim,O[1]*M.dim],te=Math.floor(W[0]),ee=Math.floor(W[1]),me=W[0]-te,be=W[1]-ee;return M.get(te,ee)*(1-me)*(1-be)+M.get(te+1,ee)*me*(1-be)+M.get(te,ee+1)*(1-me)*be+M.get(te+1,ee+1)*me*be}getElevationForLngLatZoom(n,c){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(n,c);return this.getElevation(p,g%u.W,_%u.W,u.W)}getElevation(n,c,p,g=u.W){return this.getDEMElevation(n,c,p,g)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const g=this.painter.context,_=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(g,new u.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const c=this.sourceCache.getSourceTile(n,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const g=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new q(g,c.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),c.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+n.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=n.canonical.z-c.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=g?_=n.canonical.z-g:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=n.canonical.x-(n.canonical.x>>_<<_),M=n.canonical.y-(n.canonical.y>>_<<_),O=u.ba(new Float64Array(16),[1/(u.W<<_),1/(u.W<<_),0]);u.H(O,O,[A*u.W,M*u.W,0]),this._demMatrixCache[n.key]={matrix:O,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(n){const c=this.painter,p=c.width/devicePixelRatio,g=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,A=0;_<this._coordsTextureSize;_++)for(let M=0;M<this._coordsTextureSize;M++,A+=4)c[A+0]=255&M,c[A+1]=255&_,c[A+2]=M>>8<<4|_>>8,c[A+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),g=new q(n,p,n.gl.RGBA,{premultiply:!1});return g.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,g=p.gl,_=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(_,M-A-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const O=c[0]+(c[2]>>4<<8),W=c[1]+((15&c[2])<<8),te=this.coordsIndex[255-c[3]],ee=te&&this.sourceCache.getTileByID(te);if(!ee)return null;const me=this._coordsTextureSize,be=(1<<ee.tileID.canonical.z)*me;return new u.Y((ee.tileID.canonical.x*me+O)/be+ee.tileID.wrap,(ee.tileID.canonical.y*me+W)/be,this.getElevation(ee.tileID,O,W,me))}depthAtPoint(n){const c=new Uint8Array(4),p=this.painter.context,g=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,c=new u.bb,p=new u.aY,g=this.meshSize,_=u.W/g,A=g*g;for(let ee=0;ee<=g;ee++)for(let me=0;me<=g;me++)c.emplaceBack(me*_,ee*_,0);for(let ee=0;ee<A;ee+=g+1)for(let me=0;me<g;me++)p.emplaceBack(me+ee,g+me+ee+1,g+me+ee+2),p.emplaceBack(me+ee,g+me+ee+2,me+ee+1);const M=c.length,O=M+2*(g+1);for(const ee of[0,1])for(let me=0;me<=g;me++)for(const be of[0,1])c.emplaceBack(me*_,ee*u.W,be);for(let ee=0;ee<2*g;ee+=2)p.emplaceBack(O+ee,O+ee+1,O+ee+3),p.emplaceBack(O+ee,O+ee+3,O+ee+2),p.emplaceBack(M+ee,M+ee+3,M+ee+1),p.emplaceBack(M+ee,M+ee+2,M+ee+3);const W=c.length,te=W+2*(g+1);for(const ee of[0,1])for(let me=0;me<=g;me++)for(const be of[0,1])c.emplaceBack(ee*u.W,me*_,be);for(let ee=0;ee<2*g;ee+=2)p.emplaceBack(W+ee,W+ee+1,W+ee+3),p.emplaceBack(W+ee,W+ee+3,W+ee+2),p.emplaceBack(te+ee,te+ee+3,te+ee+1),p.emplaceBack(te+ee,te+ee+2,te+ee+3);return this._mesh={indexBuffer:n.createIndexBuffer(p),vertexBuffer:n.createVertexBuffer(c,ss.members),segments:u.$.simpleSegment(0,0,c.length,p.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*u.bc/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,c){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(n,c);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(n){const c=this.getTerrainData(n).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(n,c){const p=u.Y.fromLngLat(n.wrap()),g=(1<<c)*u.W,_=p.x*g,A=p.y*g,M=Math.floor(_/u.W),O=Math.floor(A/u.W);return{tileID:new u.Q(c,0,c,M,O),mercatorX:_,mercatorY:A}}}class Zu{constructor(n,c,p){this._context=n,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:n,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>n.id!==c),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const na={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class um{constructor(n,c){this.painter=n,this.terrain=c,this.pool=new Zu(n.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(p=>!n._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in n.sourceCaches){this._coordsDescendingInv[p]={};const g=n.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const A=this.terrain.sourceCache.getTerrainCoords(_);for(const M in A)this._coordsDescendingInv[p][M]||(this._coordsDescendingInv[p][M]=[]),this._coordsDescendingInv[p][M].push(A[M])}}this._coordsDescendingInvStr={};for(const p of n._order){const g=n._layers[p],_=g.source;if(na[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const A in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][A]=this._coordsDescendingInv[_][A].map(M=>M.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const c=n.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(na[c]&&(this._prevType&&na[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(n.id),!g))return!0;if(na[this._prevType]||na[c]&&g){this._prevType=c;const _=this._stacks.length-1,A=this._stacks[_]||[];for(const M of this._renderableTiles){if(this.pool.isFull()&&(Ws(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[_]){const W=this.pool.getObjectForId(M.rtt[_].id);if(W.stamp===M.rtt[_].stamp){this.pool.useObject(W);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),M.rtt[_]={id:O.id,stamp:O.stamp},p.context.bindFramebuffer.set(O.fbo.framebuffer),p.context.clear({color:u.aP.transparent,stencil:0}),p.currentStencilSource=void 0;for(let W=0;W<A.length;W++){const te=p.style._layers[A[W]],ee=te.source?this._coordsDescendingInv[te.source][M.tileID.key]:[M.tileID];p.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),p._renderTileClippingMasks(te,ee),p.renderLayer(p,p.style.sourceCaches[te.source],te,ee),te.source&&(M.rttCoords[te.source]=this._coordsDescendingInvStr[te.source][M.tileID.key])}}return Ws(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),na[c]}return!1}}const Bt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Xf=w,J0={hash:!1,interactive:!0,bearingSnap:7,attributionControl:am,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},cm=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Kf={showCompass:!0,showZoom:!0,visualizePitch:!1};class hm{constructor(n,c,p=!1){this.mousedown=A=>{this.startMouse(u.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),T.mousePos(this.element,A)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,T.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=n.dragRotate._mouseRotate.getClickTolerance(),_=n.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=eo({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:M,bearingDegreesPerPixelMoved:O=.8})=>{const W=new pn;return new Hs({clickTolerance:M,move:(te,ee)=>({bearingDelta:(ee.x-te.x)*O}),moveStateManager:W,enable:A,assignEvents:cm})})({clickTolerance:g,enable:!0}),this.map=n,p&&(this.mousePitch=Xc({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:M,pitchDegreesPerPixelMoved:O=-.5})=>{const W=new pn;return new Hs({clickTolerance:M,move:(te,ee)=>({pitchDelta:(ee.y-te.y)*O}),moveStateManager:W,enable:A,assignEvents:cm})})({clickTolerance:_,enable:!0})),T.addEventListener(c,"mousedown",this.mousedown),T.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(c,"touchcancel",this.reset)}startMouse(n,c){this.mouseRotate.dragStart(n,c),this.mousePitch&&this.mousePitch.dragStart(n,c),T.disableDrag()}startTouch(n,c){this.touchRotate.dragStart(n,c),this.touchPitch&&this.touchPitch.dragStart(n,c),T.disableDrag()}moveMouse(n,c){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(n,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(n,c)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(n,c){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(n,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(n,c)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const n=this.element;T.removeEventListener(n,"mousedown",this.mousedown),T.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let ls;function fm(v,n,c){const p=new u.M(v.lng,v.lat);if(v=new u.M(v.lng,v.lat),n){const g=new u.M(v.lng-360,v.lat),_=new u.M(v.lng+360,v.lat),A=c.locationPoint(v).distSqr(n);c.locationPoint(g).distSqr(n)<A?v=g:c.locationPoint(_).distSqr(n)<A&&(v=_)}for(;Math.abs(v.lng-c.center.lng)>180;){const g=c.locationPoint(v);if(g.x>=0&&g.y>=0&&g.x<=c.width&&g.y<=c.height)break;v.lng>c.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&c.locationPoint(v).y>c.height/2-c.getHorizon()?v:p}const Yf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function us(v,n,c){const p=v.classList;for(const g in Yf)p.remove(`maplibregl-${c}-anchor-${g}`);p.add(`maplibregl-${c}-anchor-${n}`)}class Kr extends u.E{constructor(n){if(super(),this._onKeyPress=c=>{const p=c.code,g=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=c=>{var p;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?fm(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${Yf[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${_}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=u.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div");const c=T.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${g}px`),c.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=T.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const A=T.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const M=T.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ge of O){const Ke=T.createNS("http://www.w3.org/2000/svg","ellipse");Ke.setAttributeNS(null,"opacity","0.04"),Ke.setAttributeNS(null,"cx","10.5"),Ke.setAttributeNS(null,"cy","5.80029008"),Ke.setAttributeNS(null,"rx",Ge.rx),Ke.setAttributeNS(null,"ry",Ge.ry),M.appendChild(Ke)}const W=T.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);const te=T.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(te);const ee=T.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"opacity","0.25"),ee.setAttributeNS(null,"fill","#000000");const me=T.createNS("http://www.w3.org/2000/svg","path");me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ee.appendChild(me);const be=T.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"transform","translate(6.0, 7.0)"),be.setAttributeNS(null,"fill","#FFFFFF");const Ae=T.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Le=T.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#000000"),Le.setAttributeNS(null,"opacity","0.25"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962");const Ce=T.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),Ae.appendChild(Le),Ae.appendChild(Ce),A.appendChild(M),A.appendChild(W),A.appendChild(ee),A.appendChild(be),A.appendChild(Ae),c.appendChild(A),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),us(this._element,this._anchor,"marker"),n&&n.className)for(const c of n.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=u.M.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const g=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var c,p;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,_=g.terrain.depthAtPoint(this._pos),A=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,A)-_<.006)return void(this._element.style.opacity=this._opacity);const M=-this._offset.y/g.transform._pixelPerMeter,O=Math.sin(g.getPitch()*Math.PI/180)*M,W=g.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),te=g.transform.lngLatToCameraDepth(this._lngLat,A+O)-W>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=u.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,c){return n===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Qc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Dl=0,Nl=!1;const dm={maxWidth:100,unit:"metric"};function Jf(v,n,c){const p=c&&c.maxWidth||100,g=v._container.clientHeight/2,_=v.unproject([0,g]),A=v.unproject([p,g]),M=_.distanceTo(A);if(c&&c.unit==="imperial"){const O=3.2808*M;O>5280?qu(n,p,O/5280,v._getUIString("ScaleControl.Miles")):qu(n,p,O,v._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?qu(n,p,M/1852,v._getUIString("ScaleControl.NauticalMiles")):M>=1e3?qu(n,p,M/1e3,v._getUIString("ScaleControl.Kilometers")):qu(n,p,M,v._getUIString("ScaleControl.Meters"))}function qu(v,n,c,p){const g=function(_){const A=Math.pow(10,`${Math.floor(_)}`.length-1);let M=_/A;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(O){const W=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*W)/W}(M),A*M}(c);v.style.width=n*(g/c)+"px",v.innerHTML=`${g}&nbsp;${p}`}const ia={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},eh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Jt(v){if(v){if(typeof v=="number"){const n=Math.round(Math.abs(v)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,v),"top-left":new u.P(n,n),"top-right":new u.P(-n,n),bottom:new u.P(0,-v),"bottom-left":new u.P(n,-n),"bottom-right":new u.P(-n,-n),left:new u.P(v,0),right:new u.P(-v,0)}}if(v instanceof u.P||Array.isArray(v)){const n=u.P.convert(v);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:u.P.convert(v.center||[0,0]),top:u.P.convert(v.top||[0,0]),"top-left":u.P.convert(v["top-left"]||[0,0]),"top-right":u.P.convert(v["top-right"]||[0,0]),bottom:u.P.convert(v.bottom||[0,0]),"bottom-left":u.P.convert(v["bottom-left"]||[0,0]),"bottom-right":u.P.convert(v["bottom-right"]||[0,0]),left:u.P.convert(v.left||[0,0]),right:u.P.convert(v.right||[0,0])}}return Jt(new u.P(0,0))}const sr=w;d.AJAXError=u.bf,d.Evented=u.E,d.LngLat=u.M,d.MercatorCoordinate=u.Y,d.Point=u.P,d.addProtocol=u.bg,d.config=u.a,d.removeProtocol=u.bh,d.AttributionControl=sm,d.BoxZoomHandler=Ai,d.CanvasSource=xe,d.CooperativeGesturesHandler=xo,d.DoubleClickZoomHandler=Wf,d.DragPanHandler=Hf,d.DragRotateHandler=Bl,d.EdgeInsets=os,d.FullscreenControl=class extends u.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var n;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=c==null?void 0:c.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=Ht,d.GeolocateControl=class extends u.E{constructor(v){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const c=new u.M(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,g=this._map.getBearing(),_=u.e({bearing:g},this.options.fitBoundsOptions),A=Lt.fromLngLat(c,p);this._map.fitBounds(A,_,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const c=new u.M(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Nl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=n=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",n===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Kr({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Kr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},Qc,v)}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(n=!1){if(ls!==void 0&&!n)return ls;if(window.navigator.permissions===void 0)return ls=!!window.navigator.geolocation,ls;try{ls=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ls=!!window.navigator.geolocation}return ls})}().then(n=>this._setupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Dl=0,Nl=!1}_isOutOfMapMaxBounds(v){const n=this._map.getMaxBounds(),c=v.coords;return n&&(c.longitude<n.getWest()||c.longitude>n.getEast()||c.latitude<n.getSouth()||c.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),n=v.getSouthEast(),c=v.getNorthEast(),p=n.distanceTo(c),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Dl--,Nl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Dl++,Dl>1?(v={maximumAge:6e5,timeout:0},Nl=!0):(v=this.options.positionOptions,Nl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=_e,d.ImageSource=N,d.KeyboardHandler=as,d.LngLatBounds=Lt,d.LogoControl=qf,d.Map=class extends Y0{constructor(v){u.bd.mark(u.be.create);const n=Object.assign(Object.assign({},J0),v);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(n.maxPitch!=null&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new zl(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Hu,this._controls=[],this._mapId=u.a3(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=n.preserveDrawingBuffer===!0,this._antialias=n.antialias===!0,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles===!0,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions===!0,this._collectResourceTiming=n.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Bt),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=n.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new ae(n.transformRequest),typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const p=H(g=>{this._trackResize&&!this._removed&&this.resize(g)._update()},50);this._resizeObserver=new ResizeObserver(g=>{c?p(g):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Wu(this,n),this._hash=n.hash&&new _e(typeof n.hash=="string"&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,u.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new sm(typeof n.attributionControl=="boolean"?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new qf,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new u.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new u.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new u.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(v,n){if(n===void 0&&(n=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[n];return n.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(v);return n>-1&&this._controls.splice(n,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,n,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,n,c,p)}resize(v){var n;const c=this._containerDimensions(),p=c[0],g=c[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const O=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,O),this.painter.resize(p,g,O)}this.transform.resize(p,g),(n=this._requestedCameraState)===null||n===void 0||n.resize(p,g);const A=!this._moving;return A&&(this.stop(),this.fire(new u.k("movestart",v)).fire(new u.k("move",v))),this.fire(new u.k("resize",v)),A&&this.fire(new u.k("moveend",v)),this}_getClampedPixelRatio(v,n){const{0:c,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=v*g,A=n*g;return Math.min(_>c?c/_:1,A>p?p/A:1)*g}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Lt.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(u.M.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(u.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,n,c){if(v==="mouseenter"||v==="mouseover"){let p=!1;return{layer:n,listener:c,delegates:{mousemove:_=>{const A=this.getLayer(n)?this.queryRenderedFeatures(_.point,{layers:[n]}):[];A.length?p||(p=!0,c.call(this,new _r(v,this,_.originalEvent,{features:A}))):p=!1},mouseout:()=>{p=!1}}}}if(v==="mouseleave"||v==="mouseout"){let p=!1;return{layer:n,listener:c,delegates:{mousemove:A=>{(this.getLayer(n)?this.queryRenderedFeatures(A.point,{layers:[n]}):[]).length?p=!0:p&&(p=!1,c.call(this,new _r(v,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,c.call(this,new _r(v,this,A.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(n)?this.queryRenderedFeatures(g.point,{layers:[n]}):[];_.length&&(g.features=_,c.call(this,g),delete g.features)};return{layer:n,listener:c,delegates:{[v]:p}}}}on(v,n,c){if(c===void 0)return super.on(v,n);const p=this._createDelegatedListener(v,n,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(v,n,c){if(c===void 0)return super.once(v,n);const p=this._createDelegatedListener(v,n,c);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(v,n,c){return c===void 0?super.off(v,n):(this._delegatedListeners&&this._delegatedListeners[v]&&(p=>{const g=this._delegatedListeners[v];for(let _=0;_<g.length;_++){const A=g[_];if(A.layer===n&&A.listener===c){for(const M in A.delegates)this.off(M,A.delegates[M]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(v,n){if(!this.style)return[];let c;const p=v instanceof u.P||Array.isArray(v),g=p?v:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(p?{}:v)||{},g instanceof u.P||typeof g[0]=="number")c=[u.P.convert(g)];else{const _=u.P.convert(g[0]),A=u.P.convert(g[1]);c=[_,new u.P(A.x,_.y),A,new u.P(_.x,A.y),_]}return this.style.queryRenderedFeatures(c,n,this.transform)}querySourceFeatures(v,n){return this.style.querySourceFeatures(v,n)}setStyle(v,n){return(n=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(v,n))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const n=this._locale[v];if(n==null)throw new Error(`Missing UI string '${v}'`);return n}_updateStyle(v,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,n));const c=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new wl(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,n,c):this.style.loadJSON(v,n,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new wl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,n){if(typeof v=="string"){const c=this._requestManager.transformRequest(v,"Style");u.h(c,new AbortController).then(p=>{this._updateDiff(p.data,n)}).catch(p=>{p&&this.fire(new u.j(p))})}else typeof v=="object"&&this._updateDiff(v,n)}_updateDiff(v,n){try{this.style.setState(v,n)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(v,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(v,n){return this._lazyInitEmptyStyle(),this.style.addSource(v,n),this._update(!0)}isSourceLoaded(v){const n=this.style&&this.style.sourceCaches[v];if(n!==void 0)return n.loaded();this.fire(new u.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const n=this.style.sourceCaches[v.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&n.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===v.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lm(this.painter,n,v),this.painter.renderToTexture=new um(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:v})),this}getTerrain(){var v,n;return(n=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const n in v){const c=v[n]._tiles;for(const p in c){const g=c[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,n,c={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:W}=c;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||u.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:ee,data:me}=n,be=n;return this.style.addImage(v,{data:new u.R({width:te,height:ee},new Uint8Array(me)),pixelRatio:p,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:W,sdf:g,version:0,userImage:be}),be.onAdd&&be.onAdd(this,v),this}}{const{width:te,height:ee,data:me}=b.getImageData(n);this.style.addImage(v,{data:new u.R({width:te,height:ee},me),pixelRatio:p,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:W,sdf:g,version:0})}}updateImage(v,n){const c=this.style.getImage(v);if(!c)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=n instanceof HTMLImageElement||u.b(n)?b.getImageData(n):n,{width:g,height:_,data:A}=p;if(g===void 0||_===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==c.data.width||_!==c.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(n instanceof HTMLImageElement||u.b(n));return c.data.replace(A,M),this.style.updateImage(v,c),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return G.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,n){return this._lazyInitEmptyStyle(),this.style.addLayer(v,n),this._update(!0)}moveLayer(v,n){return this.style.moveLayer(v,n),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,n,c){return this.style.setLayerZoomRange(v,n,c),this._update(!0)}setFilter(v,n,c={}){return this.style.setFilter(v,n,c),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,n,c,p={}){return this.style.setPaintProperty(v,n,c,p),this._update(!0)}getPaintProperty(v,n){return this.style.getPaintProperty(v,n)}setLayoutProperty(v,n,c,p={}){return this.style.setLayoutProperty(v,n,c,p),this._update(!0)}getLayoutProperty(v,n){return this.style.getLayoutProperty(v,n)}setGlyphs(v,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,n,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,n,c,p=>{p||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,n,c=>{c||this._update(!0)}),this}setLight(v,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,n){return this.style.setFeatureState(v,n),this._update()}removeFeatureState(v,n){return this.style.removeFeatureState(v,n),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,n=0;return this._container&&(v=this._container.clientWidth||400,n=this._container.clientHeight||300),[v,n]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const n=this._canvasContainer=T.create("div","maplibregl-canvas-container",v);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const g=this._controlContainer=T.create("div","maplibregl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{_[A]=T.create("div",`maplibregl-ctrl-${A} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,n,c){this._canvas.width=Math.floor(c*v),this._canvas.height=Math.floor(c*n),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{n={requestedAttributes:v},p&&(n.statusMessage=p.statusMessage,n.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!c){const p="Failed to initialize WebGL";throw n?(n.message=p,new Error(JSON.stringify(n))):new Error(p)}this.painter=new kr(c,this.transform),R.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=b.now();this.style.zoomHistory.update(g,_);const A=new u.a8(g,{now:_,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),M=A.crossFadingFactor();M===1&&M===this._crossFadingFactor||(c=!0,this._crossFadingFactor=M),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bd.mark(u.be.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,u.bd.mark(u.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bd.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(v=>{u.bd.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Xf}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=_r,d.MapTouchEvent=$r,d.MapWheelEvent=hn,d.Marker=Kr,d.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const n=this._map.getZoom(),c=n===this._map.getMaxZoom(),p=n===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);n.title=p,n.setAttribute("aria-label",p)},this.options=u.e({},Kf,v),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,n){const c=T.create("button",v,this._container);return c.type="button",c.addEventListener("click",n),c}},d.Popup=class extends u.E{constructor(v){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?fm(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!n)return;const p=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const _=Jt(this.options.offset);if(!g){const M=this._container.offsetWidth,O=this._container.offsetHeight;let W;W=p.y+_.bottom.y<O?["top"]:p.y>this._map.transform.height-O?["bottom"]:[],p.x<M/2?W.push("left"):p.x>this._map.transform.width-M/2&&W.push("right"),g=W.length===0?"bottom":W.join("-")}let A=p.add(_[g]);this.options.subpixelPositioning||(A=A.round()),T.setTransform(this._container,`${Yf[g]} translate(${A.x}px,${A.y}px)`),us(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(ia),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=u.M.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const n=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=v;p=c.firstChild,p;)n.appendChild(p);return this.setDOMContent(n)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(eh);v&&v.focus()}},d.RasterDEMTileSource=cr,d.RasterTileSource=wr,d.ScaleControl=class{constructor(v){this._onMove=()=>{Jf(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,Jf(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},dm),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Gf,d.Style=wl,d.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Uf,d.TwoFingersTouchRotateHandler=$f,d.TwoFingersTouchZoomHandler=Yc,d.TwoFingersTouchZoomRotateHandler=Zf,d.VectorTileSource=it,d.VideoSource=D,d.addSourceType=(v,n)=>u._(void 0,void 0,void 0,function*(){if(tt(v))throw new Error(`A source type called "${v}" already exists.`);((c,p)=>{Xe[c]=p})(v,n)}),d.clearPrewarmedResources=function(){const v=Ze;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Ne),Ze=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return $().getRTLTextPluginStatus()},d.getVersion=function(){return sr},d.getWorkerCount=function(){return Ie.workerCount},d.getWorkerUrl=function(){return u.a.WORKER_URL},d.importScriptInWorkers=function(v){return _t().broadcast("IS",v)},d.prewarm=function(){ot().acquire(Ne)},d.setMaxParallelImageRequests=function(v){u.a.MAX_PARALLEL_IMAGE_REQUESTS=v},d.setRTLTextPlugin=function(v,n){return $().setRTLTextPlugin(v,n)},d.setWorkerCount=function(v){Ie.workerCount=v},d.setWorkerUrl=function(v){u.a.WORKER_URL=v}});var f=i;return f})})(BM);var NM=BM.exports;const $M=wf(NM),Sz=YF({__proto__:null,default:$M},[NM]),Ez="modulepreload",Tz=function(e){return"/osm-address-editor-vite/"+e},mT={},Pz=function(t,i,a){let l=Promise.resolve();if(i&&i.length>0){const f=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));l=Promise.all(i.map(w=>{if(w=Tz(w),w in mT)return;mT[w]=!0;const E=w.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(!!a)for(let R=f.length-1;R>=0;R--){const L=f[R];if(L.href===w&&(!E||L.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${I}`))return;const T=document.createElement("link");if(T.rel=E?"stylesheet":Ez,E||(T.as="script",T.crossOrigin=""),T.href=w,u&&T.setAttribute("nonce",u),document.head.appendChild(T),E)return new Promise((R,L)=>{T.addEventListener("load",R),T.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${w}`)))})}))}return l.then(()=>t()).catch(f=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=f,window.dispatchEvent(d),!d.defaultPrevented)throw f})},Az=vt.createContext(null);function Iz(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,l=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return i===l&&a===f}function Ho(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Ho(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const l of i)if(!t.hasOwnProperty(l)||!Ho(e[l],t[l]))return!1;return!0}return!1}function Cz(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function gT(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Ho(i,a)||t.setProjection(i)}function yT(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function vT(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const l=e.center;e.center=new l.constructor(i.longitude,i.latitude),a=a||l!==e.center}if("zoom"in i){const l=e.zoom;e.zoom=i.zoom,a=a||l!==e.zoom}if("bearing"in i){const l=e.bearing;e.bearing=i.bearing,a=a||l!==e.bearing}if("pitch"in i){const l=e.pitch;e.pitch=i.pitch,a=a||l!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const Mz=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _T(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let l=null;"interactive"in a&&(l=Object.assign({},a),delete l.interactive);const f=t[a.ref];if(f){l=l||Object.assign({},a),delete l.ref;for(const d of Mz)d in f&&(l[d]=f[d])}return l||a});return{...e,layers:i}}var xT={};const wT={version:8,sources:{},layers:[]},bT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},m_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},ST={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},kz=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Oz=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class hf{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=l=>{const f=this.props[ST[l.type]];f?f(l):l.type==="error"&&console.error(l.error)},this._onPointerEvent=l=>{(l.type==="mousemove"||l.type==="mouseout")&&this._updateHover(l);const f=this.props[bT[l.type]];f&&(this.props.interactiveLayerIds&&l.type!=="mouseover"&&l.type!=="mouseout"&&(l.features=this._hoveredFeatures||this._queryRenderedFeatures(l.point)),f(l),delete l.features)},this._onCameraEvent=l=>{if(!this._internalUpdate){const f=this.props[m_[l.type]];f&&f(l)}l.type in this._deferredEvents&&(this._deferredEvents[l.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const l=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||l||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=hf.savedMaps.pop();if(!a)return null;const l=a.map,f=l.getContainer();for(i.className=f.className;f.childNodes.length>0;)i.appendChild(f.childNodes[0]);l._container=i;const d=l._resizeObserver;d&&(d.disconnect(),d.observe(i)),a.setProps({...t,styleDiffing:!1}),l.resize();const{initialViewState:u}=t;return u&&(u.bounds?l.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),l.isStyleLoaded()?l.fire("load"):l.once("styledata",()=>l.fire("load")),l._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=wT}=i,l={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||Fz()||null,container:t,style:_T(a)},f=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[f.longitude||0,f.latitude||0],zoom:f.zoom||0,pitch:f.pitch||0,bearing:f.bearing||0}),i.gl){const I=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=I,i.gl)}const d=new this._MapClass(l);f.padding&&d.setPadding(f.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const u=d._render;d._render=I=>{this._inRender=!0,u.call(d,I),this._inRender=!1};const w=d._renderTaskQueue.run;d._renderTaskQueue.run=I=>{w.call(d._renderTaskQueue,I),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const E=d.fire;d.fire=this._fireEvent.bind(this,E),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>{this._updateStyleComponents(this.props,{}),gT(d.transform,this._renderTransform)}),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const I in bT)d.on(I,this._onPointerEvent);for(const I in m_)d.on(I,this._onCameraEvent);for(const I in ST)d.on(I,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),hf.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=Cz(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,l=this._renderTransform,{zoom:f,pitch:d,bearing:u}=l,w=a.isMoving();w&&(l.cameraElevationReference="sea");const E=vT(l,{...yT(a.transform),...t});if(w&&(l.cameraElevationReference="ground"),E&&i){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=f!==l.zoom),I.rotate||(I.rotate=u!==l.bearing),I.pitch||(I.pitch=d!==l.pitch)}return w||vT(a.transform,t),E}_updateSettings(t,i){const a=this._map;let l=!1;for(const f of kz)if(f in t&&!Ho(t[f],i[f])){l=!0;const d=a[`set${f[0].toUpperCase()}${f.slice(1)}`];d==null||d.call(a,t[f])}return l}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=wT,styleDiffing:l=!0}=t,f={diff:l};return"localIdeographFontFamily"in t&&(f.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(_T(a),f),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let l=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Ho(t.light,i.light)&&(l=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Ho(t.fog,i.fog)&&(l=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Ho(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(l=!0,a.setTerrain(t.terrain))),l}_updateHandlers(t,i){var a,l;const f=this._map;let d=!1;for(const u of Oz){const w=(a=t[u])!==null&&a!==void 0?a:!0,E=(l=i[u])!==null&&l!==void 0?l:!0;Ho(w,E)||(d=!0,w?f[u].enable(w):f[u].disable())}return d}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:l=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:l.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const f=t.type,d=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),w=u.length>0;!w&&d&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,w&&!d&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,i,a){const l=this._map,f=l.transform,d=typeof i=="string"?i:i.type;return d==="move"&&this._updateViewState(this.props,!1),d in m_&&(typeof i=="object"&&(i.viewState=yT(f)),this._map.isMoving())?(l.transform=this._renderTransform,t.call(l,i,a),l.transform=f,l):(t.call(l,i,a),l)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{gT(this._renderTransform,i),t.transform=i}}}hf.savedMaps=[];function Fz(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||xT.MapboxAccessToken}catch{}try{e=e||xT.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const Rz=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function jz(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const l=t.transform;t.transform=e.transform;const f=t.project(a);return t.transform=l,f},unproject:a=>{const l=t.transform;t.transform=e.transform;const f=t.unproject(a);return t.transform=l,f},queryTerrainElevation:(a,l)=>{const f=t.transform;t.transform=e.transform;const d=t.queryTerrainElevation(a,l);return t.transform=f,d},queryRenderedFeatures:(a,l)=>{const f=t.transform;t.transform=e.transform;const d=t.queryRenderedFeatures(a,l);return t.transform=f,d}};for(const a of zz(t))!(a in i)&&!Rz.includes(a)&&(i[a]=t[a].bind(t));return i}function zz(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const Lz=typeof document<"u"?vt.useLayoutEffect:vt.useEffect,Bz=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Dz(e,t){for(const a of Bz)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Tf=vt.createContext(null);function Nz(e,t,i){const a=vt.useContext(Az),[l,f]=vt.useState(null),d=vt.useRef(),{current:u}=vt.useRef({mapLib:null,map:null});vt.useEffect(()=>{const I=e.mapLib;let b=!0,T;return Promise.resolve(I||i).then(R=>{if(!b)return;if(!R)throw new Error("Invalid mapLib");const L="Map"in R?R:R.default;if(!L.Map)throw new Error("Invalid mapLib");if(Dz(L,e),!L.supported||L.supported(e))e.reuseMaps&&(T=hf.reuse(e,d.current)),T||(T=new hf(L.Map,e,d.current)),u.map=jz(T),u.mapLib=L,f(T),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:L}=e;L?L({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{b=!1,T&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),Lz(()=>{l&&l.setProps(e)}),vt.useImperativeHandle(t,()=>u.map,[l]);const w=vt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),E={height:"100%"};return vt.createElement("div",{id:e.id,ref:d,style:w},l&&vt.createElement(Tf.Provider,{value:u},vt.createElement("div",{"mapboxgl-children":"",style:E},e.children)))}const $z=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Tc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const l=t[a];Number.isFinite(l)&&!$z.test(a)?i[a]=`${l}px`:i[a]=l}}function Uz(e,t){const{map:i,mapLib:a}=vt.useContext(Tf),l=vt.useRef({props:e});l.current.props=e;const f=vt.useMemo(()=>{let j=!1;vt.Children.forEach(e.children,Z=>{Z&&(j=!0)});const se={...e,element:j?document.createElement("div"):null},K=new a.Marker(se);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",Z=>{var G,ae;(ae=(G=l.current.props).onClick)===null||ae===void 0||ae.call(G,{type:"click",target:K,originalEvent:Z})}),K.on("dragstart",Z=>{var G,ae;const X=Z;X.lngLat=f.getLngLat(),(ae=(G=l.current.props).onDragStart)===null||ae===void 0||ae.call(G,X)}),K.on("drag",Z=>{var G,ae;const X=Z;X.lngLat=f.getLngLat(),(ae=(G=l.current.props).onDrag)===null||ae===void 0||ae.call(G,X)}),K.on("dragend",Z=>{var G,ae;const X=Z;X.lngLat=f.getLngLat(),(ae=(G=l.current.props).onDragEnd)===null||ae===void 0||ae.call(G,X)}),K},[]);vt.useEffect(()=>(f.addTo(i.getMap()),()=>{f.remove()}),[]);const{longitude:d,latitude:u,offset:w,style:E,draggable:I=!1,popup:b=null,rotation:T=0,rotationAlignment:R="auto",pitchAlignment:L="auto"}=e;return vt.useEffect(()=>{Tc(f.getElement(),E)},[E]),vt.useImperativeHandle(t,()=>f,[]),(f.getLngLat().lng!==d||f.getLngLat().lat!==u)&&f.setLngLat([d,u]),w&&!Iz(f.getOffset(),w)&&f.setOffset(w),f.isDraggable()!==I&&f.setDraggable(I),f.getRotation()!==T&&f.setRotation(T),f.getRotationAlignment()!==R&&f.setRotationAlignment(R),f.getPitchAlignment()!==L&&f.setPitchAlignment(L),f.getPopup()!==b&&f.setPopup(b),pb.createPortal(e.children,f.getElement())}const Vz=vt.memo(vt.forwardRef(Uz));function ET(e){return new Set(e?e.trim().split(/\s+/):[])}function Gz(e,t){const{map:i,mapLib:a}=vt.useContext(Tf),l=vt.useMemo(()=>document.createElement("div"),[]),f=vt.useRef({props:e});f.current.props=e;const d=vt.useMemo(()=>{const u={...e},w=new a.Popup(u);return w.setLngLat([e.longitude,e.latitude]),w.once("open",E=>{var I,b;(b=(I=f.current.props).onOpen)===null||b===void 0||b.call(I,E)}),w},[]);if(vt.useEffect(()=>{const u=w=>{var E,I;(I=(E=f.current.props).onClose)===null||I===void 0||I.call(E,w)};return d.on("close",u),d.setDOMContent(l).addTo(i.getMap()),()=>{d.off("close",u),d.isOpen()&&d.remove()}},[]),vt.useEffect(()=>{Tc(d.getElement(),e.style)},[e.style]),vt.useImperativeHandle(t,()=>d,[]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!Ho(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const u=ET(d.options.className),w=ET(e.className);for(const E of u)w.has(E)||d.removeClassName(E);for(const E of w)u.has(E)||d.addClassName(E);d.options.className=e.className}return pb.createPortal(e.children,l)}vt.memo(vt.forwardRef(Gz));function Gp(e,t,i,a){const l=vt.useContext(Tf),f=vt.useMemo(()=>e(l),[]);return vt.useEffect(()=>{const d=a||i||t,u=typeof t=="function"&&typeof i=="function"?t:null,w=typeof i=="function"?i:typeof t=="function"?t:null,{map:E}=l;return E.hasControl(f)||(E.addControl(f,d==null?void 0:d.position),u&&u(l)),()=>{w&&w(l),E.hasControl(f)&&E.removeControl(f)}},[]),f}function Wz(e){const t=Gp(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return vt.useEffect(()=>{Tc(t._container,e.style)},[e.style]),null}vt.memo(Wz);function Hz(e){const t=Gp(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return vt.useEffect(()=>{Tc(t._controlContainer,e.style)},[e.style]),null}vt.memo(Hz);function Zz(e,t){const i=vt.useRef({props:e}),a=Gp(({mapLib:l})=>{const f=new l.GeolocateControl(e),d=f._setupUI;return f._setupUI=u=>{f._container.hasChildNodes()||d(u)},f.on("geolocate",u=>{var w,E;(E=(w=i.current.props).onGeolocate)===null||E===void 0||E.call(w,u)}),f.on("error",u=>{var w,E;(E=(w=i.current.props).onError)===null||E===void 0||E.call(w,u)}),f.on("outofmaxbounds",u=>{var w,E;(E=(w=i.current.props).onOutOfMaxBounds)===null||E===void 0||E.call(w,u)}),f.on("trackuserlocationstart",u=>{var w,E;(E=(w=i.current.props).onTrackUserLocationStart)===null||E===void 0||E.call(w,u)}),f.on("trackuserlocationend",u=>{var w,E;(E=(w=i.current.props).onTrackUserLocationEnd)===null||E===void 0||E.call(w,u)}),f},{position:e.position});return i.current.props=e,vt.useImperativeHandle(t,()=>a,[]),vt.useEffect(()=>{Tc(a._container,e.style)},[e.style]),null}const qz=vt.memo(vt.forwardRef(Zz));function Xz(e){const t=Gp(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return vt.useEffect(()=>{Tc(t._container,e.style)},[e.style]),null}const Kz=vt.memo(Xz);function Yz(e){const t=Gp(({mapLib:f})=>new f.ScaleControl(e),{position:e.position}),i=vt.useRef(e),a=i.current;i.current=e;const{style:l}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),vt.useEffect(()=>{Tc(t._container,l)},[l]),null}vt.memo(Yz);function Ty(e,t){if(!e)throw new Error(t)}function Jz(e,t,i,a){if(Ty(i.id===a.id,"layer id changed"),Ty(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:l={},paint:f={},filter:d,minzoom:u,maxzoom:w,beforeId:E}=i;if(E!==a.beforeId&&e.moveLayer(t,E),l!==a.layout){const I=a.layout||{};for(const b in l)Ho(l[b],I[b])||e.setLayoutProperty(t,b,l[b]);for(const b in I)l.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(f!==a.paint){const I=a.paint||{};for(const b in f)Ho(f[b],I[b])||e.setPaintProperty(t,b,f[b]);for(const b in I)f.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}Ho(d,a.filter)||e.setFilter(t,d),(u!==a.minzoom||w!==a.maxzoom)&&e.setLayerZoomRange(t,u,w)}function Qz(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let eL=0;function tL(e){const t=vt.useContext(Tf).map.getMap(),i=vt.useRef(e),[,a]=vt.useState(0),l=vt.useMemo(()=>e.id||`jsx-layer-${eL++}`,[]);if(vt.useEffect(()=>{if(t){const d=()=>a(u=>u+1);return t.on("styledata",d),d(),()=>{t.off("styledata",d),t.style&&t.style._loaded&&t.getLayer(l)&&t.removeLayer(l)}}},[t]),t&&t.style&&t.getLayer(l))try{Jz(t,l,e,i.current)}catch(d){console.warn(d)}else Qz(t,l,e);return i.current=e,null}let rL=0;function nL(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function iL(e,t,i){Ty(t.id===i.id,"source id changed"),Ty(t.type===i.type,"source type changed");let a="",l=0;for(const d in t)d!=="children"&&d!=="id"&&!Ho(i[d],t[d])&&(a=d,l++);if(!l)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&l===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function oL(e){const t=vt.useContext(Tf).map.getMap(),i=vt.useRef(e),[,a]=vt.useState(0),l=vt.useMemo(()=>e.id||`jsx-source-${rL++}`,[]);vt.useEffect(()=>{if(t){const d=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",d),d(),()=>{var u;if(t.off("styledata",d),t.style&&t.style._loaded&&t.getSource(l)){const w=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(w)for(const E of w)E.source===l&&t.removeLayer(E.id);t.removeSource(l)}}}},[t]);let f=t&&t.style&&t.getSource(l);return f?iL(f,e,i.current):f=nL(t,l,e),i.current=e,f&&vt.Children.map(e.children,d=>d&&vt.cloneElement(d,{source:l}))||null}const aL=Pz(()=>Promise.resolve().then(()=>Sz),void 0),sL=vt.forwardRef(function(t,i){return Nz(t,i,aL)}),lL=Vz,uL=Kz,cL=qz,hL=tL,fL=oL;function TT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function er(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(i),!0).forEach(function(a){ri(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):TT(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Py(e){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Py(e)}function dL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PT(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pL(e,t,i){return t&&PT(e.prototype,t),i&&PT(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ri(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mb(e,t){return gL(e)||vL(e,t)||UM(e,t)||xL()}function Wp(e){return mL(e)||yL(e)||UM(e)||_L()}function mL(e){if(Array.isArray(e))return ax(e)}function gL(e){if(Array.isArray(e))return e}function yL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vL(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],l=!0,f=!1,d,u;try{for(i=i.call(e);!(l=(d=i.next()).done)&&(a.push(d.value),!(t&&a.length===t));l=!0);}catch(w){f=!0,u=w}finally{try{!l&&i.return!=null&&i.return()}finally{if(f)throw u}}return a}}function UM(e,t){if(e){if(typeof e=="string")return ax(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ax(e,t)}}function ax(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var AT=function(){},gb={},VM={},GM=null,WM={mark:AT,measure:AT};try{typeof window<"u"&&(gb=window),typeof document<"u"&&(VM=document),typeof MutationObserver<"u"&&(GM=MutationObserver),typeof performance<"u"&&(WM=performance)}catch{}var wL=gb.navigator||{},IT=wL.userAgent,CT=IT===void 0?"":IT,xu=gb,_n=VM,MT=GM,rg=WM;xu.document;var vl=!!_n.documentElement&&!!_n.head&&typeof _n.addEventListener=="function"&&typeof _n.createElement=="function",HM=~CT.indexOf("MSIE")||~CT.indexOf("Trident/"),ng,ig,og,ag,sg,dl="___FONT_AWESOME___",sx=16,ZM="fa",qM="svg-inline--fa",_c="data-fa-i2svg",lx="data-fa-pseudo-element",bL="data-fa-pseudo-element-pending",yb="data-prefix",vb="data-icon",kT="fontawesome-i2svg",SL="async",EL=["HTML","HEAD","STYLE","SCRIPT"],XM=function(){try{return!0}catch{return!1}}(),yn="classic",Dn="sharp",_b=[yn,Dn];function Hp(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[yn]}})}var Ip=Hp((ng={},ri(ng,yn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ri(ng,Dn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),ng)),Cp=Hp((ig={},ri(ig,yn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ri(ig,Dn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),ig)),Mp=Hp((og={},ri(og,yn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ri(og,Dn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),og)),TL=Hp((ag={},ri(ag,yn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ri(ag,Dn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),ag)),PL=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,KM="fa-layers-text",AL=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,IL=Hp((sg={},ri(sg,yn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ri(sg,Dn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),sg)),YM=[1,2,3,4,5,6,7,8,9,10],CL=YM.concat([11,12,13,14,15,16,17,18,19,20]),ML=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],lc={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},kp=new Set;Object.keys(Cp[yn]).map(kp.add.bind(kp));Object.keys(Cp[Dn]).map(kp.add.bind(kp));var kL=[].concat(_b,Wp(kp),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",lc.GROUP,lc.SWAP_OPACITY,lc.PRIMARY,lc.SECONDARY]).concat(YM.map(function(e){return"".concat(e,"x")})).concat(CL.map(function(e){return"w-".concat(e)})),tp=xu.FontAwesomeConfig||{};function OL(e){var t=_n.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function FL(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(_n&&typeof _n.querySelector=="function"){var RL=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];RL.forEach(function(e){var t=mb(e,2),i=t[0],a=t[1],l=FL(OL(i));l!=null&&(tp[a]=l)})}var JM={styleDefault:"solid",familyDefault:"classic",cssPrefix:ZM,replacementClass:qM,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};tp.familyPrefix&&(tp.cssPrefix=tp.familyPrefix);var ff=er(er({},JM),tp);ff.autoReplaceSvg||(ff.observeMutations=!1);var or={};Object.keys(JM).forEach(function(e){Object.defineProperty(or,e,{enumerable:!0,set:function(i){ff[e]=i,rp.forEach(function(a){return a(or)})},get:function(){return ff[e]}})});Object.defineProperty(or,"familyPrefix",{enumerable:!0,set:function(t){ff.cssPrefix=t,rp.forEach(function(i){return i(or)})},get:function(){return ff.cssPrefix}});xu.FontAwesomeConfig=or;var rp=[];function jL(e){return rp.push(e),function(){rp.splice(rp.indexOf(e),1)}}var Ql=sx,Ts={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function zL(e){if(!(!e||!vl)){var t=_n.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=_n.head.childNodes,a=null,l=i.length-1;l>-1;l--){var f=i[l],d=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(d)>-1&&(a=f)}return _n.head.insertBefore(t,a),e}}var LL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Op(){for(var e=12,t="";e-- >0;)t+=LL[Math.random()*62|0];return t}function Pf(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function xb(e){return e.classList?Pf(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function QM(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function BL(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(QM(e[i]),'" ')},"").trim()}function O0(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function wb(e){return e.size!==Ts.size||e.x!==Ts.x||e.y!==Ts.y||e.rotate!==Ts.rotate||e.flipX||e.flipY}function DL(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,l={transform:"translate(".concat(i/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),d="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),w={transform:"".concat(f," ").concat(d," ").concat(u)},E={transform:"translate(".concat(a/2*-1," -256)")};return{outer:l,inner:w,path:E}}function NL(e){var t=e.transform,i=e.width,a=i===void 0?sx:i,l=e.height,f=l===void 0?sx:l,d=e.startCentered,u=d===void 0?!1:d,w="";return u&&HM?w+="translate(".concat(t.x/Ql-a/2,"em, ").concat(t.y/Ql-f/2,"em) "):u?w+="translate(calc(-50% + ".concat(t.x/Ql,"em), calc(-50% + ").concat(t.y/Ql,"em)) "):w+="translate(".concat(t.x/Ql,"em, ").concat(t.y/Ql,"em) "),w+="scale(".concat(t.size/Ql*(t.flipX?-1:1),", ").concat(t.size/Ql*(t.flipY?-1:1),") "),w+="rotate(".concat(t.rotate,"deg) "),w}var $L=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function ek(){var e=ZM,t=qM,i=or.cssPrefix,a=or.replacementClass,l=$L;if(i!==e||a!==t){var f=new RegExp("\\.".concat(e,"\\-"),"g"),d=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");l=l.replace(f,".".concat(i,"-")).replace(d,"--".concat(i,"-")).replace(u,".".concat(a))}return l}var OT=!1;function g_(){or.autoAddCss&&!OT&&(zL(ek()),OT=!0)}var UL={mixout:function(){return{dom:{css:ek,insertCss:g_}}},hooks:function(){return{beforeDOMElementCreation:function(){g_()},beforeI2svg:function(){g_()}}}},pl=xu||{};pl[dl]||(pl[dl]={});pl[dl].styles||(pl[dl].styles={});pl[dl].hooks||(pl[dl].hooks={});pl[dl].shims||(pl[dl].shims=[]);var Ba=pl[dl],tk=[],VL=function e(){_n.removeEventListener("DOMContentLoaded",e),Ay=1,tk.map(function(t){return t()})},Ay=!1;vl&&(Ay=(_n.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(_n.readyState),Ay||_n.addEventListener("DOMContentLoaded",VL));function GL(e){vl&&(Ay?setTimeout(e,0):tk.push(e))}function Zp(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,l=e.children,f=l===void 0?[]:l;return typeof e=="string"?QM(e):"<".concat(t," ").concat(BL(a),">").concat(f.map(Zp).join(""),"</").concat(t,">")}function FT(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var WL=function(t,i){return function(a,l,f,d){return t.call(i,a,l,f,d)}},y_=function(t,i,a,l){var f=Object.keys(t),d=f.length,u=l!==void 0?WL(i,l):i,w,E,I;for(a===void 0?(w=1,I=t[f[0]]):(w=0,I=a);w<d;w++)E=f[w],I=u(I,t[E],E,t);return I};function HL(e){for(var t=[],i=0,a=e.length;i<a;){var l=e.charCodeAt(i++);if(l>=55296&&l<=56319&&i<a){var f=e.charCodeAt(i++);(f&64512)==56320?t.push(((l&1023)<<10)+(f&1023)+65536):(t.push(l),i--)}else t.push(l)}return t}function ux(e){var t=HL(e);return t.length===1?t[0].toString(16):null}function ZL(e,t){var i=e.length,a=e.charCodeAt(t),l;return a>=55296&&a<=56319&&i>t+1&&(l=e.charCodeAt(t+1),l>=56320&&l<=57343)?(a-55296)*1024+l-56320+65536:a}function RT(e){return Object.keys(e).reduce(function(t,i){var a=e[i],l=!!a.icon;return l?t[a.iconName]=a.icon:t[i]=a,t},{})}function cx(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,l=a===void 0?!1:a,f=RT(t);typeof Ba.hooks.addPack=="function"&&!l?Ba.hooks.addPack(e,RT(t)):Ba.styles[e]=er(er({},Ba.styles[e]||{}),f),e==="fas"&&cx("fa",t)}var lg,ug,cg,$h=Ba.styles,qL=Ba.shims,XL=(lg={},ri(lg,yn,Object.values(Mp[yn])),ri(lg,Dn,Object.values(Mp[Dn])),lg),bb=null,rk={},nk={},ik={},ok={},ak={},KL=(ug={},ri(ug,yn,Object.keys(Ip[yn])),ri(ug,Dn,Object.keys(Ip[Dn])),ug);function YL(e){return~kL.indexOf(e)}function JL(e,t){var i=t.split("-"),a=i[0],l=i.slice(1).join("-");return a===e&&l!==""&&!YL(l)?l:null}var sk=function(){var t=function(f){return y_($h,function(d,u,w){return d[w]=y_(u,f,{}),d},{})};rk=t(function(l,f,d){if(f[3]&&(l[f[3]]=d),f[2]){var u=f[2].filter(function(w){return typeof w=="number"});u.forEach(function(w){l[w.toString(16)]=d})}return l}),nk=t(function(l,f,d){if(l[d]=d,f[2]){var u=f[2].filter(function(w){return typeof w=="string"});u.forEach(function(w){l[w]=d})}return l}),ak=t(function(l,f,d){var u=f[2];return l[d]=d,u.forEach(function(w){l[w]=d}),l});var i="far"in $h||or.autoFetchSvg,a=y_(qL,function(l,f){var d=f[0],u=f[1],w=f[2];return u==="far"&&!i&&(u="fas"),typeof d=="string"&&(l.names[d]={prefix:u,iconName:w}),typeof d=="number"&&(l.unicodes[d.toString(16)]={prefix:u,iconName:w}),l},{names:{},unicodes:{}});ik=a.names,ok=a.unicodes,bb=F0(or.styleDefault,{family:or.familyDefault})};jL(function(e){bb=F0(e.styleDefault,{family:or.familyDefault})});sk();function Sb(e,t){return(rk[e]||{})[t]}function QL(e,t){return(nk[e]||{})[t]}function uc(e,t){return(ak[e]||{})[t]}function lk(e){return ik[e]||{prefix:null,iconName:null}}function e5(e){var t=ok[e],i=Sb("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function wu(){return bb}var Eb=function(){return{prefix:null,iconName:null,rest:[]}};function F0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?yn:i,l=Ip[a][e],f=Cp[a][e]||Cp[a][l],d=e in Ba.styles?e:null;return f||d||null}var jT=(cg={},ri(cg,yn,Object.keys(Mp[yn])),ri(cg,Dn,Object.keys(Mp[Dn])),cg);function R0(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,l=a===void 0?!1:a,f=(t={},ri(t,yn,"".concat(or.cssPrefix,"-").concat(yn)),ri(t,Dn,"".concat(or.cssPrefix,"-").concat(Dn)),t),d=null,u=yn;(e.includes(f[yn])||e.some(function(E){return jT[yn].includes(E)}))&&(u=yn),(e.includes(f[Dn])||e.some(function(E){return jT[Dn].includes(E)}))&&(u=Dn);var w=e.reduce(function(E,I){var b=JL(or.cssPrefix,I);if($h[I]?(I=XL[u].includes(I)?TL[u][I]:I,d=I,E.prefix=I):KL[u].indexOf(I)>-1?(d=I,E.prefix=F0(I,{family:u})):b?E.iconName=b:I!==or.replacementClass&&I!==f[yn]&&I!==f[Dn]&&E.rest.push(I),!l&&E.prefix&&E.iconName){var T=d==="fa"?lk(E.iconName):{},R=uc(E.prefix,E.iconName);T.prefix&&(d=null),E.iconName=T.iconName||R||E.iconName,E.prefix=T.prefix||E.prefix,E.prefix==="far"&&!$h.far&&$h.fas&&!or.autoFetchSvg&&(E.prefix="fas")}return E},Eb());return(e.includes("fa-brands")||e.includes("fab"))&&(w.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(w.prefix="fad"),!w.prefix&&u===Dn&&($h.fass||or.autoFetchSvg)&&(w.prefix="fass",w.iconName=uc(w.prefix,w.iconName)||w.iconName),(w.prefix==="fa"||d==="fa")&&(w.prefix=wu()||"fas"),w}var t5=function(){function e(){dL(this,e),this.definitions={}}return pL(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];var d=l.reduce(this._pullDefinitions,{});Object.keys(d).forEach(function(u){i.definitions[u]=er(er({},i.definitions[u]||{}),d[u]),cx(u,d[u]);var w=Mp[yn][u];w&&cx(w,d[u]),sk()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var l=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(l).map(function(f){var d=l[f],u=d.prefix,w=d.iconName,E=d.icon,I=E[2];i[u]||(i[u]={}),I.length>0&&I.forEach(function(b){typeof b=="string"&&(i[u][b]=E)}),i[u][w]=E}),i}}]),e}(),zT=[],Uh={},Qh={},r5=Object.keys(Qh);function n5(e,t){var i=t.mixoutsTo;return zT=e,Uh={},Object.keys(Qh).forEach(function(a){r5.indexOf(a)===-1&&delete Qh[a]}),zT.forEach(function(a){var l=a.mixout?a.mixout():{};if(Object.keys(l).forEach(function(d){typeof l[d]=="function"&&(i[d]=l[d]),Py(l[d])==="object"&&Object.keys(l[d]).forEach(function(u){i[d]||(i[d]={}),i[d][u]=l[d][u]})}),a.hooks){var f=a.hooks();Object.keys(f).forEach(function(d){Uh[d]||(Uh[d]=[]),Uh[d].push(f[d])})}a.provides&&a.provides(Qh)}),i}function hx(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];var f=Uh[e]||[];return f.forEach(function(d){t=d.apply(null,[t].concat(a))}),t}function xc(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var l=Uh[e]||[];l.forEach(function(f){f.apply(null,i)})}function ml(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Qh[e]?Qh[e].apply(null,t):void 0}function fx(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||wu();if(t)return t=uc(i,t)||t,FT(uk.definitions,i,t)||FT(Ba.styles,i,t)}var uk=new t5,i5=function(){or.autoReplaceSvg=!1,or.observeMutations=!1,xc("noAuto")},o5={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vl?(xc("beforeI2svg",t),ml("pseudoElements2svg",t),ml("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;or.autoReplaceSvg===!1&&(or.autoReplaceSvg=!0),or.observeMutations=!0,GL(function(){s5({autoReplaceSvgRoot:i}),xc("watch",t)})}},a5={icon:function(t){if(t===null)return null;if(Py(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:uc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=F0(t[0]);return{prefix:a,iconName:uc(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(or.cssPrefix,"-"))>-1||t.match(PL))){var l=R0(t.split(" "),{skipLookups:!0});return{prefix:l.prefix||wu(),iconName:uc(l.prefix,l.iconName)||l.iconName}}if(typeof t=="string"){var f=wu();return{prefix:f,iconName:uc(f,t)||t}}}},Jo={noAuto:i5,config:or,dom:o5,parse:a5,library:uk,findIconDefinition:fx,toHtml:Zp},s5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?_n:i;(Object.keys(Ba.styles).length>0||or.autoFetchSvg)&&vl&&or.autoReplaceSvg&&Jo.dom.i2svg({node:a})};function j0(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return Zp(a)})}}),Object.defineProperty(e,"node",{get:function(){if(vl){var a=_n.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function l5(e){var t=e.children,i=e.main,a=e.mask,l=e.attributes,f=e.styles,d=e.transform;if(wb(d)&&i.found&&!a.found){var u=i.width,w=i.height,E={x:u/w/2,y:.5};l.style=O0(er(er({},f),{},{"transform-origin":"".concat(E.x+d.x/16,"em ").concat(E.y+d.y/16,"em")}))}return[{tag:"svg",attributes:l,children:t}]}function u5(e){var t=e.prefix,i=e.iconName,a=e.children,l=e.attributes,f=e.symbol,d=f===!0?"".concat(t,"-").concat(or.cssPrefix,"-").concat(i):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:er(er({},l),{},{id:d}),children:a}]}]}function Tb(e){var t=e.icons,i=t.main,a=t.mask,l=e.prefix,f=e.iconName,d=e.transform,u=e.symbol,w=e.title,E=e.maskId,I=e.titleId,b=e.extra,T=e.watchable,R=T===void 0?!1:T,L=a.found?a:i,j=L.width,se=L.height,K=l==="fak",Z=[or.replacementClass,f?"".concat(or.cssPrefix,"-").concat(f):""].filter(function(B){return b.classes.indexOf(B)===-1}).filter(function(B){return B!==""||!!B}).concat(b.classes).join(" "),G={children:[],attributes:er(er({},b.attributes),{},{"data-prefix":l,"data-icon":f,class:Z,role:b.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(j," ").concat(se)})},ae=K&&!~b.classes.indexOf("fa-fw")?{width:"".concat(j/se*16*.0625,"em")}:{};R&&(G.attributes[_c]=""),w&&(G.children.push({tag:"title",attributes:{id:G.attributes["aria-labelledby"]||"title-".concat(I||Op())},children:[w]}),delete G.attributes.title);var X=er(er({},G),{},{prefix:l,iconName:f,main:i,mask:a,maskId:E,transform:d,symbol:u,styles:er(er({},ae),b.styles)}),U=a.found&&i.found?ml("generateAbstractMask",X)||{children:[],attributes:{}}:ml("generateAbstractIcon",X)||{children:[],attributes:{}},P=U.children,z=U.attributes;return X.children=P,X.attributes=z,u?u5(X):l5(X)}function LT(e){var t=e.content,i=e.width,a=e.height,l=e.transform,f=e.title,d=e.extra,u=e.watchable,w=u===void 0?!1:u,E=er(er(er({},d.attributes),f?{title:f}:{}),{},{class:d.classes.join(" ")});w&&(E[_c]="");var I=er({},d.styles);wb(l)&&(I.transform=NL({transform:l,startCentered:!0,width:i,height:a}),I["-webkit-transform"]=I.transform);var b=O0(I);b.length>0&&(E.style=b);var T=[];return T.push({tag:"span",attributes:E,children:[t]}),f&&T.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),T}function c5(e){var t=e.content,i=e.title,a=e.extra,l=er(er(er({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),f=O0(a.styles);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),i&&d.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),d}var v_=Ba.styles;function dx(e){var t=e[0],i=e[1],a=e.slice(4),l=mb(a,1),f=l[0],d=null;return Array.isArray(f)?d={tag:"g",attributes:{class:"".concat(or.cssPrefix,"-").concat(lc.GROUP)},children:[{tag:"path",attributes:{class:"".concat(or.cssPrefix,"-").concat(lc.SECONDARY),fill:"currentColor",d:f[0]}},{tag:"path",attributes:{class:"".concat(or.cssPrefix,"-").concat(lc.PRIMARY),fill:"currentColor",d:f[1]}}]}:d={tag:"path",attributes:{fill:"currentColor",d:f}},{found:!0,width:t,height:i,icon:d}}var h5={found:!1,width:512,height:512};function f5(e,t){!XM&&!or.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function px(e,t){var i=t;return t==="fa"&&or.styleDefault!==null&&(t=wu()),new Promise(function(a,l){if(ml("missingIconAbstract"),i==="fa"){var f=lk(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&v_[t]&&v_[t][e]){var d=v_[t][e];return a(dx(d))}f5(e,t),a(er(er({},h5),{},{icon:or.showMissingIcons&&e?ml("missingIconAbstract")||{}:{}}))})}var BT=function(){},mx=or.measurePerformance&&rg&&rg.mark&&rg.measure?rg:{mark:BT,measure:BT},Ld='FA "6.5.2"',d5=function(t){return mx.mark("".concat(Ld," ").concat(t," begins")),function(){return ck(t)}},ck=function(t){mx.mark("".concat(Ld," ").concat(t," ends")),mx.measure("".concat(Ld," ").concat(t),"".concat(Ld," ").concat(t," begins"),"".concat(Ld," ").concat(t," ends"))},Pb={begin:d5,end:ck},Lg=function(){};function DT(e){var t=e.getAttribute?e.getAttribute(_c):null;return typeof t=="string"}function p5(e){var t=e.getAttribute?e.getAttribute(yb):null,i=e.getAttribute?e.getAttribute(vb):null;return t&&i}function m5(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(or.replacementClass)}function g5(){if(or.autoReplaceSvg===!0)return Bg.replace;var e=Bg[or.autoReplaceSvg];return e||Bg.replace}function y5(e){return _n.createElementNS("http://www.w3.org/2000/svg",e)}function v5(e){return _n.createElement(e)}function hk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?y5:v5:i;if(typeof e=="string")return _n.createTextNode(e);var l=a(e.tag);Object.keys(e.attributes||[]).forEach(function(d){l.setAttribute(d,e.attributes[d])});var f=e.children||[];return f.forEach(function(d){l.appendChild(hk(d,{ceFn:a}))}),l}function _5(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Bg={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(l){i.parentNode.insertBefore(hk(l),i)}),i.getAttribute(_c)===null&&or.keepOriginalSource){var a=_n.createComment(_5(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~xb(i).indexOf(or.replacementClass))return Bg.replace(t);var l=new RegExp("".concat(or.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var f=a[0].attributes.class.split(" ").reduce(function(u,w){return w===or.replacementClass||w.match(l)?u.toSvg.push(w):u.toNode.push(w),u},{toNode:[],toSvg:[]});a[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",f.toNode.join(" "))}var d=a.map(function(u){return Zp(u)}).join(`
`);i.setAttribute(_c,""),i.innerHTML=d}};function NT(e){e()}function fk(e,t){var i=typeof t=="function"?t:Lg;if(e.length===0)i();else{var a=NT;or.mutateApproach===SL&&(a=xu.requestAnimationFrame||NT),a(function(){var l=g5(),f=Pb.begin("mutate");e.map(l),f(),i()})}}var Ab=!1;function dk(){Ab=!0}function gx(){Ab=!1}var Iy=null;function $T(e){if(MT&&or.observeMutations){var t=e.treeCallback,i=t===void 0?Lg:t,a=e.nodeCallback,l=a===void 0?Lg:a,f=e.pseudoElementsCallback,d=f===void 0?Lg:f,u=e.observeMutationsRoot,w=u===void 0?_n:u;Iy=new MT(function(E){if(!Ab){var I=wu();Pf(E).forEach(function(b){if(b.type==="childList"&&b.addedNodes.length>0&&!DT(b.addedNodes[0])&&(or.searchPseudoElements&&d(b.target),i(b.target)),b.type==="attributes"&&b.target.parentNode&&or.searchPseudoElements&&d(b.target.parentNode),b.type==="attributes"&&DT(b.target)&&~ML.indexOf(b.attributeName))if(b.attributeName==="class"&&p5(b.target)){var T=R0(xb(b.target)),R=T.prefix,L=T.iconName;b.target.setAttribute(yb,R||I),L&&b.target.setAttribute(vb,L)}else m5(b.target)&&l(b.target)})}}),vl&&Iy.observe(w,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function x5(){Iy&&Iy.disconnect()}function w5(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,l){var f=l.split(":"),d=f[0],u=f.slice(1);return d&&u.length>0&&(a[d]=u.join(":").trim()),a},{})),i}function b5(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",l=R0(xb(e));return l.prefix||(l.prefix=wu()),t&&i&&(l.prefix=t,l.iconName=i),l.iconName&&l.prefix||(l.prefix&&a.length>0&&(l.iconName=QL(l.prefix,e.innerText)||Sb(l.prefix,ux(e.innerText))),!l.iconName&&or.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(l.iconName=e.firstChild.data)),l}function S5(e){var t=Pf(e.attributes).reduce(function(l,f){return l.name!=="class"&&l.name!=="style"&&(l[f.name]=f.value),l},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return or.autoA11y&&(i?t["aria-labelledby"]="".concat(or.replacementClass,"-title-").concat(a||Op()):(t["aria-hidden"]="true",t.focusable="false")),t}function E5(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ts,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function UT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=b5(e),a=i.iconName,l=i.prefix,f=i.rest,d=S5(e),u=hx("parseNodeAttributes",{},e),w=t.styleParser?w5(e):[];return er({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:l,transform:Ts,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:f,styles:w,attributes:d}},u)}var T5=Ba.styles;function pk(e){var t=or.autoReplaceSvg==="nest"?UT(e,{styleParser:!1}):UT(e);return~t.extra.classes.indexOf(KM)?ml("generateLayersText",e,t):ml("generateSvgReplacementMutation",e,t)}var bu=new Set;_b.map(function(e){bu.add("fa-".concat(e))});Object.keys(Ip[yn]).map(bu.add.bind(bu));Object.keys(Ip[Dn]).map(bu.add.bind(bu));bu=Wp(bu);function VT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!vl)return Promise.resolve();var i=_n.documentElement.classList,a=function(b){return i.add("".concat(kT,"-").concat(b))},l=function(b){return i.remove("".concat(kT,"-").concat(b))},f=or.autoFetchSvg?bu:_b.map(function(I){return"fa-".concat(I)}).concat(Object.keys(T5));f.includes("fa")||f.push("fa");var d=[".".concat(KM,":not([").concat(_c,"])")].concat(f.map(function(I){return".".concat(I,":not([").concat(_c,"])")})).join(", ");if(d.length===0)return Promise.resolve();var u=[];try{u=Pf(e.querySelectorAll(d))}catch{}if(u.length>0)a("pending"),l("complete");else return Promise.resolve();var w=Pb.begin("onTree"),E=u.reduce(function(I,b){try{var T=pk(b);T&&I.push(T)}catch(R){XM||R.name==="MissingIcon"&&console.error(R)}return I},[]);return new Promise(function(I,b){Promise.all(E).then(function(T){fk(T,function(){a("active"),a("complete"),l("pending"),typeof t=="function"&&t(),w(),I()})}).catch(function(T){w(),b(T)})})}function P5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;pk(e).then(function(i){i&&fk([i],t)})}function A5(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:fx(t||{}),l=i.mask;return l&&(l=(l||{}).icon?l:fx(l||{})),e(a,er(er({},i),{},{mask:l}))}}var I5=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,l=a===void 0?Ts:a,f=i.symbol,d=f===void 0?!1:f,u=i.mask,w=u===void 0?null:u,E=i.maskId,I=E===void 0?null:E,b=i.title,T=b===void 0?null:b,R=i.titleId,L=R===void 0?null:R,j=i.classes,se=j===void 0?[]:j,K=i.attributes,Z=K===void 0?{}:K,G=i.styles,ae=G===void 0?{}:G;if(t){var X=t.prefix,U=t.iconName,P=t.icon;return j0(er({type:"icon"},t),function(){return xc("beforeDOMElementCreation",{iconDefinition:t,params:i}),or.autoA11y&&(T?Z["aria-labelledby"]="".concat(or.replacementClass,"-title-").concat(L||Op()):(Z["aria-hidden"]="true",Z.focusable="false")),Tb({icons:{main:dx(P),mask:w?dx(w.icon):{found:!1,width:null,height:null,icon:{}}},prefix:X,iconName:U,transform:er(er({},Ts),l),symbol:d,title:T,maskId:I,titleId:L,extra:{attributes:Z,styles:ae,classes:se}})})}},C5={mixout:function(){return{icon:A5(I5)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=VT,i.nodeCallback=P5,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,l=a===void 0?_n:a,f=i.callback,d=f===void 0?function(){}:f;return VT(l,d)},t.generateSvgReplacementMutation=function(i,a){var l=a.iconName,f=a.title,d=a.titleId,u=a.prefix,w=a.transform,E=a.symbol,I=a.mask,b=a.maskId,T=a.extra;return new Promise(function(R,L){Promise.all([px(l,u),I.iconName?px(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(j){var se=mb(j,2),K=se[0],Z=se[1];R([i,Tb({icons:{main:K,mask:Z},prefix:u,iconName:l,transform:w,symbol:E,maskId:b,title:f,titleId:d,extra:T,watchable:!0})])}).catch(L)})},t.generateAbstractIcon=function(i){var a=i.children,l=i.attributes,f=i.main,d=i.transform,u=i.styles,w=O0(u);w.length>0&&(l.style=w);var E;return wb(d)&&(E=ml("generateAbstractTransformGrouping",{main:f,transform:d,containerWidth:f.width,iconWidth:f.width})),a.push(E||f.icon),{children:a,attributes:l}}}},M5={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.classes,f=l===void 0?[]:l;return j0({type:"layer"},function(){xc("beforeDOMElementCreation",{assembler:i,params:a});var d=[];return i(function(u){Array.isArray(u)?u.map(function(w){d=d.concat(w.abstract)}):d=d.concat(u.abstract)}),[{tag:"span",attributes:{class:["".concat(or.cssPrefix,"-layers")].concat(Wp(f)).join(" ")},children:d}]})}}}},k5={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.title,f=l===void 0?null:l,d=a.classes,u=d===void 0?[]:d,w=a.attributes,E=w===void 0?{}:w,I=a.styles,b=I===void 0?{}:I;return j0({type:"counter",content:i},function(){return xc("beforeDOMElementCreation",{content:i,params:a}),c5({content:i.toString(),title:f,extra:{attributes:E,styles:b,classes:["".concat(or.cssPrefix,"-layers-counter")].concat(Wp(u))}})})}}}},O5={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.transform,f=l===void 0?Ts:l,d=a.title,u=d===void 0?null:d,w=a.classes,E=w===void 0?[]:w,I=a.attributes,b=I===void 0?{}:I,T=a.styles,R=T===void 0?{}:T;return j0({type:"text",content:i},function(){return xc("beforeDOMElementCreation",{content:i,params:a}),LT({content:i,transform:er(er({},Ts),f),title:u,extra:{attributes:b,styles:R,classes:["".concat(or.cssPrefix,"-layers-text")].concat(Wp(E))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var l=a.title,f=a.transform,d=a.extra,u=null,w=null;if(HM){var E=parseInt(getComputedStyle(i).fontSize,10),I=i.getBoundingClientRect();u=I.width/E,w=I.height/E}return or.autoA11y&&!l&&(d.attributes["aria-hidden"]="true"),Promise.resolve([i,LT({content:i.innerHTML,width:u,height:w,transform:f,title:l,extra:d,watchable:!0})])}}},F5=new RegExp('"',"ug"),GT=[1105920,1112319];function R5(e){var t=e.replace(F5,""),i=ZL(t,0),a=i>=GT[0]&&i<=GT[1],l=t.length===2?t[0]===t[1]:!1;return{value:ux(l?t[0]:t),isSecondary:a||l}}function WT(e,t){var i="".concat(bL).concat(t.replace(":","-"));return new Promise(function(a,l){if(e.getAttribute(i)!==null)return a();var f=Pf(e.children),d=f.filter(function(P){return P.getAttribute(lx)===t})[0],u=xu.getComputedStyle(e,t),w=u.getPropertyValue("font-family").match(AL),E=u.getPropertyValue("font-weight"),I=u.getPropertyValue("content");if(d&&!w)return e.removeChild(d),a();if(w&&I!=="none"&&I!==""){var b=u.getPropertyValue("content"),T=~["Sharp"].indexOf(w[2])?Dn:yn,R=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(w[2])?Cp[T][w[2].toLowerCase()]:IL[T][E],L=R5(b),j=L.value,se=L.isSecondary,K=w[0].startsWith("FontAwesome"),Z=Sb(R,j),G=Z;if(K){var ae=e5(j);ae.iconName&&ae.prefix&&(Z=ae.iconName,R=ae.prefix)}if(Z&&!se&&(!d||d.getAttribute(yb)!==R||d.getAttribute(vb)!==G)){e.setAttribute(i,G),d&&e.removeChild(d);var X=E5(),U=X.extra;U.attributes[lx]=t,px(Z,R).then(function(P){var z=Tb(er(er({},X),{},{icons:{main:P,mask:Eb()},prefix:R,iconName:G,extra:U,watchable:!0})),B=_n.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(B,e.firstChild):e.appendChild(B),B.outerHTML=z.map(function(Q){return Zp(Q)}).join(`
`),e.removeAttribute(i),a()}).catch(l)}else a()}else a()})}function j5(e){return Promise.all([WT(e,"::before"),WT(e,"::after")])}function z5(e){return e.parentNode!==document.head&&!~EL.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(lx)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function HT(e){if(vl)return new Promise(function(t,i){var a=Pf(e.querySelectorAll("*")).filter(z5).map(j5),l=Pb.begin("searchPseudoElements");dk(),Promise.all(a).then(function(){l(),gx(),t()}).catch(function(){l(),gx(),i()})})}var L5={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=HT,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,l=a===void 0?_n:a;or.searchPseudoElements&&HT(l)}}},ZT=!1,B5={mixout:function(){return{dom:{unwatch:function(){dk(),ZT=!0}}}},hooks:function(){return{bootstrap:function(){$T(hx("mutationObserverCallbacks",{}))},noAuto:function(){x5()},watch:function(i){var a=i.observeMutationsRoot;ZT?gx():$T(hx("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},qT=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,l){var f=l.toLowerCase().split("-"),d=f[0],u=f.slice(1).join("-");if(d&&u==="h")return a.flipX=!0,a;if(d&&u==="v")return a.flipY=!0,a;if(u=parseFloat(u),isNaN(u))return a;switch(d){case"grow":a.size=a.size+u;break;case"shrink":a.size=a.size-u;break;case"left":a.x=a.x-u;break;case"right":a.x=a.x+u;break;case"up":a.y=a.y-u;break;case"down":a.y=a.y+u;break;case"rotate":a.rotate=a.rotate+u;break}return a},i)},D5={mixout:function(){return{parse:{transform:function(i){return qT(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var l=a.getAttribute("data-fa-transform");return l&&(i.transform=qT(l)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,l=i.transform,f=i.containerWidth,d=i.iconWidth,u={transform:"translate(".concat(f/2," 256)")},w="translate(".concat(l.x*32,", ").concat(l.y*32,") "),E="scale(".concat(l.size/16*(l.flipX?-1:1),", ").concat(l.size/16*(l.flipY?-1:1),") "),I="rotate(".concat(l.rotate," 0 0)"),b={transform:"".concat(w," ").concat(E," ").concat(I)},T={transform:"translate(".concat(d/2*-1," -256)")},R={outer:u,inner:b,path:T};return{tag:"g",attributes:er({},R.outer),children:[{tag:"g",attributes:er({},R.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:er(er({},a.icon.attributes),R.path)}]}]}}}},__={x:0,y:0,width:"100%",height:"100%"};function XT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function N5(e){return e.tag==="g"?e.children:[e]}var $5={hooks:function(){return{parseNodeAttributes:function(i,a){var l=a.getAttribute("data-fa-mask"),f=l?R0(l.split(" ").map(function(d){return d.trim()})):Eb();return f.prefix||(f.prefix=wu()),i.mask=f,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,l=i.attributes,f=i.main,d=i.mask,u=i.maskId,w=i.transform,E=f.width,I=f.icon,b=d.width,T=d.icon,R=DL({transform:w,containerWidth:b,iconWidth:E}),L={tag:"rect",attributes:er(er({},__),{},{fill:"white"})},j=I.children?{children:I.children.map(XT)}:{},se={tag:"g",attributes:er({},R.inner),children:[XT(er({tag:I.tag,attributes:er(er({},I.attributes),R.path)},j))]},K={tag:"g",attributes:er({},R.outer),children:[se]},Z="mask-".concat(u||Op()),G="clip-".concat(u||Op()),ae={tag:"mask",attributes:er(er({},__),{},{id:Z,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[L,K]},X={tag:"defs",children:[{tag:"clipPath",attributes:{id:G},children:N5(T)},ae]};return a.push(X,{tag:"rect",attributes:er({fill:"currentColor","clip-path":"url(#".concat(G,")"),mask:"url(#".concat(Z,")")},__)}),{children:a,attributes:l}}}},U5={provides:function(t){var i=!1;xu.matchMedia&&(i=xu.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],l={fill:"currentColor"},f={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:er(er({},l),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var d=er(er({},f),{},{attributeName:"opacity"}),u={tag:"circle",attributes:er(er({},l),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||u.children.push({tag:"animate",attributes:er(er({},f),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:er(er({},d),{},{values:"1;0;1;1;0;1;"})}),a.push(u),a.push({tag:"path",attributes:er(er({},l),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:er(er({},d),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:er(er({},l),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:er(er({},d),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},V5={hooks:function(){return{parseNodeAttributes:function(i,a){var l=a.getAttribute("data-fa-symbol"),f=l===null?!1:l===""?!0:l;return i.symbol=f,i}}}},G5=[UL,C5,M5,k5,O5,L5,B5,D5,$5,U5,V5];n5(G5,{mixoutsTo:Jo});Jo.noAuto;Jo.config;Jo.library;Jo.dom;var yx=Jo.parse;Jo.findIconDefinition;Jo.toHtml;var W5=Jo.icon;Jo.layer;Jo.text;Jo.counter;var mk={exports:{}},H5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Z5=H5,q5=Z5;function gk(){}function yk(){}yk.resetWarningCache=gk;var X5=function(){function e(a,l,f,d,u,w){if(w!==q5){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:yk,resetWarningCache:gk};return i.PropTypes=i,i};mk.exports=X5();var K5=mk.exports;const Fr=wf(K5);function KT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function vs(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(i),!0).forEach(function(a){Vh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KT(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Cy(e){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cy(e)}function Vh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Y5(e,t){if(e==null)return{};var i={},a=Object.keys(e),l,f;for(f=0;f<a.length;f++)l=a[f],!(t.indexOf(l)>=0)&&(i[l]=e[l]);return i}function J5(e,t){if(e==null)return{};var i=Y5(e,t),a,l;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(l=0;l<f.length;l++)a=f[l],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function vx(e){return Q5(e)||e6(e)||t6(e)||r6()}function Q5(e){if(Array.isArray(e))return _x(e)}function e6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function t6(e,t){if(e){if(typeof e=="string")return _x(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _x(e,t)}}function _x(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function r6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n6(e){var t,i=e.beat,a=e.fade,l=e.beatFade,f=e.bounce,d=e.shake,u=e.flash,w=e.spin,E=e.spinPulse,I=e.spinReverse,b=e.pulse,T=e.fixedWidth,R=e.inverse,L=e.border,j=e.listItem,se=e.flip,K=e.size,Z=e.rotation,G=e.pull,ae=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":l,"fa-bounce":f,"fa-shake":d,"fa-flash":u,"fa-spin":w,"fa-spin-reverse":I,"fa-spin-pulse":E,"fa-pulse":b,"fa-fw":T,"fa-inverse":R,"fa-border":L,"fa-li":j,"fa-flip":se===!0,"fa-flip-horizontal":se==="horizontal"||se==="both","fa-flip-vertical":se==="vertical"||se==="both"},Vh(t,"fa-".concat(K),typeof K<"u"&&K!==null),Vh(t,"fa-rotate-".concat(Z),typeof Z<"u"&&Z!==null&&Z!==0),Vh(t,"fa-pull-".concat(G),typeof G<"u"&&G!==null),Vh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ae).map(function(X){return ae[X]?X:null}).filter(function(X){return X})}function i6(e){return e=e-0,e===e}function vk(e){return i6(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var o6=["style"];function a6(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s6(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),l=vk(i.slice(0,a)),f=i.slice(a+1).trim();return l.startsWith("webkit")?t[a6(l)]=f:t[l]=f,t},{})}function _k(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(w){return _k(e,w)}),l=Object.keys(t.attributes||{}).reduce(function(w,E){var I=t.attributes[E];switch(E){case"class":w.attrs.className=I,delete t.attributes.class;break;case"style":w.attrs.style=s6(I);break;default:E.indexOf("aria-")===0||E.indexOf("data-")===0?w.attrs[E.toLowerCase()]=I:w.attrs[vk(E)]=I}return w},{attrs:{}}),f=i.style,d=f===void 0?{}:f,u=J5(i,o6);return l.attrs.style=vs(vs({},l.attrs.style),d),e.apply(void 0,[t.tag,vs(vs({},l.attrs),u)].concat(vx(a)))}var xk=!1;try{xk=!0}catch{}function l6(){if(!xk&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function YT(e){if(e&&Cy(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(yx.icon)return yx.icon(e);if(e===null)return null;if(e&&Cy(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function x_(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Vh({},e,t):{}}var JT={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},yu=Sw.forwardRef(function(e,t){var i=vs(vs({},JT),e),a=i.icon,l=i.mask,f=i.symbol,d=i.className,u=i.title,w=i.titleId,E=i.maskId,I=YT(a),b=x_("classes",[].concat(vx(n6(i)),vx((d||"").split(" ")))),T=x_("transform",typeof i.transform=="string"?yx.transform(i.transform):i.transform),R=x_("mask",YT(l)),L=W5(I,vs(vs(vs(vs({},b),T),R),{},{symbol:f,title:u,titleId:w,maskId:E}));if(!L)return l6("Could not find icon",I),null;var j=L.abstract,se={ref:t};return Object.keys(i).forEach(function(K){JT.hasOwnProperty(K)||(se[K]=i[K])}),u6(j[0],se)});yu.displayName="FontAwesomeIcon";yu.propTypes={beat:Fr.bool,border:Fr.bool,beatFade:Fr.bool,bounce:Fr.bool,className:Fr.string,fade:Fr.bool,flash:Fr.bool,mask:Fr.oneOfType([Fr.object,Fr.array,Fr.string]),maskId:Fr.string,fixedWidth:Fr.bool,inverse:Fr.bool,flip:Fr.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Fr.oneOfType([Fr.object,Fr.array,Fr.string]),listItem:Fr.bool,pull:Fr.oneOf(["right","left"]),pulse:Fr.bool,rotation:Fr.oneOf([0,90,180,270]),shake:Fr.bool,size:Fr.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Fr.bool,spinPulse:Fr.bool,spinReverse:Fr.bool,symbol:Fr.oneOfType([Fr.bool,Fr.string]),title:Fr.string,titleId:Fr.string,transform:Fr.oneOfType([Fr.string,Fr.object]),swapOpacity:Fr.bool};var u6=_k.bind(null,Sw.createElement),c6={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},xx={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},h6={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},f6=h6;function hg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wk={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,l,f){function d(E,I){if(!l[E]){if(!a[E]){var b=typeof hg=="function"&&hg;if(!I&&b)return b(E,!0);if(u)return u(E,!0);var T=new Error("Cannot find module '"+E+"'");throw T.code="MODULE_NOT_FOUND",T}var R=l[E]={exports:{}};a[E][0].call(R.exports,function(L){var j=a[E][1][L];return d(j||L)},R,R.exports,i,a,l,f)}return l[E].exports}for(var u=typeof hg=="function"&&hg,w=0;w<f.length;w++)d(f[w]);return d}return i}()({1:[function(i,a,l){l.byteLength=T,l.toByteArray=L,l.fromByteArray=K;for(var f=[],d=[],u=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,I=w.length;E<I;++E)f[E]=w[E],d[w.charCodeAt(E)]=E;d[45]=62,d[95]=63;function b(Z){var G=Z.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=Z.indexOf("=");ae===-1&&(ae=G);var X=ae===G?0:4-ae%4;return[ae,X]}function T(Z){var G=b(Z),ae=G[0],X=G[1];return(ae+X)*3/4-X}function R(Z,G,ae){return(G+ae)*3/4-ae}function L(Z){var G,ae=b(Z),X=ae[0],U=ae[1],P=new u(R(Z,X,U)),z=0,B=U>0?X-4:X,Q;for(Q=0;Q<B;Q+=4)G=d[Z.charCodeAt(Q)]<<18|d[Z.charCodeAt(Q+1)]<<12|d[Z.charCodeAt(Q+2)]<<6|d[Z.charCodeAt(Q+3)],P[z++]=G>>16&255,P[z++]=G>>8&255,P[z++]=G&255;return U===2&&(G=d[Z.charCodeAt(Q)]<<2|d[Z.charCodeAt(Q+1)]>>4,P[z++]=G&255),U===1&&(G=d[Z.charCodeAt(Q)]<<10|d[Z.charCodeAt(Q+1)]<<4|d[Z.charCodeAt(Q+2)]>>2,P[z++]=G>>8&255,P[z++]=G&255),P}function j(Z){return f[Z>>18&63]+f[Z>>12&63]+f[Z>>6&63]+f[Z&63]}function se(Z,G,ae){for(var X,U=[],P=G;P<ae;P+=3)X=(Z[P]<<16&16711680)+(Z[P+1]<<8&65280)+(Z[P+2]&255),U.push(j(X));return U.join("")}function K(Z){for(var G,ae=Z.length,X=ae%3,U=[],P=16383,z=0,B=ae-X;z<B;z+=P)U.push(se(Z,z,z+P>B?B:z+P));return X===1?(G=Z[ae-1],U.push(f[G>>2]+f[G<<4&63]+"==")):X===2&&(G=(Z[ae-2]<<8)+Z[ae-1],U.push(f[G>>10]+f[G>>4&63]+f[G<<2&63]+"=")),U.join("")}},{}],2:[function(i,a,l){(function(f){(function(){var d=i("base64-js"),u=i("ieee754");l.Buffer=b,l.SlowBuffer=X,l.INSPECT_MAX_BYTES=50;var w=2147483647;l.kMaxLength=w,b.TYPED_ARRAY_SUPPORT=E(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function I(Se){if(Se>w)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var N=new Uint8Array(Se);return N.__proto__=b.prototype,N}function b(Se,N,D){if(typeof Se=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(Se)}return T(Se,N,D)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function T(Se,N,D){if(typeof Se=="string")return se(Se,N);if(ArrayBuffer.isView(Se))return K(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(cr(Se,ArrayBuffer)||Se&&cr(Se.buffer,ArrayBuffer))return Z(Se,N,D);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=Se.valueOf&&Se.valueOf();if(xe!=null&&xe!==Se)return b.from(xe,N,D);var Xe=G(Se);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return b.from(Se[Symbol.toPrimitive]("string"),N,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}b.from=function(Se,N,D){return T(Se,N,D)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function R(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function L(Se,N,D){return R(Se),Se<=0?I(Se):N!==void 0?typeof D=="string"?I(Se).fill(N,D):I(Se).fill(N):I(Se)}b.alloc=function(Se,N,D){return L(Se,N,D)};function j(Se){return R(Se),I(Se<0?0:ae(Se)|0)}b.allocUnsafe=function(Se){return j(Se)},b.allocUnsafeSlow=function(Se){return j(Se)};function se(Se,N){if((typeof N!="string"||N==="")&&(N="utf8"),!b.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var D=U(Se,N)|0,xe=I(D),Xe=xe.write(Se,N);return Xe!==D&&(xe=xe.slice(0,Xe)),xe}function K(Se){for(var N=Se.length<0?0:ae(Se.length)|0,D=I(N),xe=0;xe<N;xe+=1)D[xe]=Se[xe]&255;return D}function Z(Se,N,D){if(N<0||Se.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<N+(D||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return N===void 0&&D===void 0?xe=new Uint8Array(Se):D===void 0?xe=new Uint8Array(Se,N):xe=new Uint8Array(Se,N,D),xe.__proto__=b.prototype,xe}function G(Se){if(b.isBuffer(Se)){var N=ae(Se.length)|0,D=I(N);return D.length===0||Se.copy(D,0,0,N),D}if(Se.length!==void 0)return typeof Se.length!="number"||Ht(Se.length)?I(0):K(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return K(Se.data)}function ae(Se){if(Se>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return Se|0}function X(Se){return+Se!=Se&&(Se=0),b.alloc(+Se)}b.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==b.prototype},b.compare=function(N,D){if(cr(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),cr(D,Uint8Array)&&(D=b.from(D,D.offset,D.byteLength)),!b.isBuffer(N)||!b.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===D)return 0;for(var xe=N.length,Xe=D.length,tt=0,ht=Math.min(xe,Xe);tt<ht;++tt)if(N[tt]!==D[tt]){xe=N[tt],Xe=D[tt];break}return xe<Xe?-1:Xe<xe?1:0},b.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(N,D){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return b.alloc(0);var xe;if(D===void 0)for(D=0,xe=0;xe<N.length;++xe)D+=N[xe].length;var Xe=b.allocUnsafe(D),tt=0;for(xe=0;xe<N.length;++xe){var ht=N[xe];if(cr(ht,Uint8Array)&&(ht=b.from(ht)),!b.isBuffer(ht))throw new TypeError('"list" argument must be an Array of Buffers');ht.copy(Xe,tt),tt+=ht.length}return Xe};function U(Se,N){if(b.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||cr(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var D=Se.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&D===0)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Wt(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return it(Se).length;default:if(Xe)return xe?-1:Wt(Se).length;N=(""+N).toLowerCase(),Xe=!0}}b.byteLength=U;function P(Se,N,D){var xe=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,N>>>=0,D<=N))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return Ie(this,N,D);case"utf8":case"utf-8":return re(this,N,D);case"ascii":return Pe(this,N,D);case"latin1":case"binary":return Ne(this,N,D);case"base64":return J(this,N,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,N,D);default:if(xe)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),xe=!0}}b.prototype._isBuffer=!0;function z(Se,N,D){var xe=Se[N];Se[N]=Se[D],Se[D]=xe}b.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<N;D+=2)z(this,D,D+1);return this},b.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<N;D+=4)z(this,D,D+3),z(this,D+1,D+2);return this},b.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<N;D+=8)z(this,D,D+7),z(this,D+1,D+6),z(this,D+2,D+5),z(this,D+3,D+4);return this},b.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?re(this,0,N):P.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(N){if(!b.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:b.compare(this,N)===0},b.prototype.inspect=function(){var N="",D=l.INSPECT_MAX_BYTES;return N=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(N+=" ... "),"<Buffer "+N+">"},b.prototype.compare=function(N,D,xe,Xe,tt){if(cr(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(D===void 0&&(D=0),xe===void 0&&(xe=N?N.length:0),Xe===void 0&&(Xe=0),tt===void 0&&(tt=this.length),D<0||xe>N.length||Xe<0||tt>this.length)throw new RangeError("out of range index");if(Xe>=tt&&D>=xe)return 0;if(Xe>=tt)return-1;if(D>=xe)return 1;if(D>>>=0,xe>>>=0,Xe>>>=0,tt>>>=0,this===N)return 0;for(var ht=tt-Xe,le=xe-D,k=Math.min(ht,le),$=this.slice(Xe,tt),Te=N.slice(D,xe),We=0;We<k;++We)if($[We]!==Te[We]){ht=$[We],le=Te[We];break}return ht<le?-1:le<ht?1:0};function B(Se,N,D,xe,Xe){if(Se.length===0)return-1;if(typeof D=="string"?(xe=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,Ht(D)&&(D=Xe?0:Se.length-1),D<0&&(D=Se.length+D),D>=Se.length){if(Xe)return-1;D=Se.length-1}else if(D<0)if(Xe)D=0;else return-1;if(typeof N=="string"&&(N=b.from(N,xe)),b.isBuffer(N))return N.length===0?-1:Q(Se,N,D,xe,Xe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(Se,N,D):Uint8Array.prototype.lastIndexOf.call(Se,N,D):Q(Se,[N],D,xe,Xe);throw new TypeError("val must be string, number or Buffer")}function Q(Se,N,D,xe,Xe){var tt=1,ht=Se.length,le=N.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(Se.length<2||N.length<2)return-1;tt=2,ht/=2,le/=2,D/=2}function k(Ve,Et){return tt===1?Ve[Et]:Ve.readUInt16BE(Et*tt)}var $;if(Xe){var Te=-1;for($=D;$<ht;$++)if(k(Se,$)===k(N,Te===-1?0:$-Te)){if(Te===-1&&(Te=$),$-Te+1===le)return Te*tt}else Te!==-1&&($-=$-Te),Te=-1}else for(D+le>ht&&(D=ht-le),$=D;$>=0;$--){for(var We=!0,nt=0;nt<le;nt++)if(k(Se,$+nt)!==k(N,nt)){We=!1;break}if(We)return $}return-1}b.prototype.includes=function(N,D,xe){return this.indexOf(N,D,xe)!==-1},b.prototype.indexOf=function(N,D,xe){return B(this,N,D,xe,!0)},b.prototype.lastIndexOf=function(N,D,xe){return B(this,N,D,xe,!1)};function q(Se,N,D,xe){D=Number(D)||0;var Xe=Se.length-D;xe?(xe=Number(xe),xe>Xe&&(xe=Xe)):xe=Xe;var tt=N.length;xe>tt/2&&(xe=tt/2);for(var ht=0;ht<xe;++ht){var le=parseInt(N.substr(ht*2,2),16);if(Ht(le))return ht;Se[D+ht]=le}return ht}function ve(Se,N,D,xe){return wr(Wt(N,Se.length-D),Se,D,xe)}function ye(Se,N,D,xe){return wr(Lt(N),Se,D,xe)}function fe(Se,N,D,xe){return ye(Se,N,D,xe)}function oe(Se,N,D,xe){return wr(it(N),Se,D,xe)}function he(Se,N,D,xe){return wr(ur(N,Se.length-D),Se,D,xe)}b.prototype.write=function(N,D,xe,Xe){if(D===void 0)Xe="utf8",xe=this.length,D=0;else if(xe===void 0&&typeof D=="string")Xe=D,xe=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(xe)?(xe=xe>>>0,Xe===void 0&&(Xe="utf8")):(Xe=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-D;if((xe===void 0||xe>tt)&&(xe=tt),N.length>0&&(xe<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ht=!1;;)switch(Xe){case"hex":return q(this,N,D,xe);case"utf8":case"utf-8":return ve(this,N,D,xe);case"ascii":return ye(this,N,D,xe);case"latin1":case"binary":return fe(this,N,D,xe);case"base64":return oe(this,N,D,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,N,D,xe);default:if(ht)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ht=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(Se,N,D){return N===0&&D===Se.length?d.fromByteArray(Se):d.fromByteArray(Se.slice(N,D))}function re(Se,N,D){D=Math.min(Se.length,D);for(var xe=[],Xe=N;Xe<D;){var tt=Se[Xe],ht=null,le=tt>239?4:tt>223?3:tt>191?2:1;if(Xe+le<=D){var k,$,Te,We;switch(le){case 1:tt<128&&(ht=tt);break;case 2:k=Se[Xe+1],(k&192)===128&&(We=(tt&31)<<6|k&63,We>127&&(ht=We));break;case 3:k=Se[Xe+1],$=Se[Xe+2],(k&192)===128&&($&192)===128&&(We=(tt&15)<<12|(k&63)<<6|$&63,We>2047&&(We<55296||We>57343)&&(ht=We));break;case 4:k=Se[Xe+1],$=Se[Xe+2],Te=Se[Xe+3],(k&192)===128&&($&192)===128&&(Te&192)===128&&(We=(tt&15)<<18|(k&63)<<12|($&63)<<6|Te&63,We>65535&&We<1114112&&(ht=We))}}ht===null?(ht=65533,le=1):ht>65535&&(ht-=65536,xe.push(ht>>>10&1023|55296),ht=56320|ht&1023),xe.push(ht),Xe+=le}return we(xe)}var de=4096;function we(Se){var N=Se.length;if(N<=de)return String.fromCharCode.apply(String,Se);for(var D="",xe=0;xe<N;)D+=String.fromCharCode.apply(String,Se.slice(xe,xe+=de));return D}function Pe(Se,N,D){var xe="";D=Math.min(Se.length,D);for(var Xe=N;Xe<D;++Xe)xe+=String.fromCharCode(Se[Xe]&127);return xe}function Ne(Se,N,D){var xe="";D=Math.min(Se.length,D);for(var Xe=N;Xe<D;++Xe)xe+=String.fromCharCode(Se[Xe]);return xe}function Ie(Se,N,D){var xe=Se.length;(!N||N<0)&&(N=0),(!D||D<0||D>xe)&&(D=xe);for(var Xe="",tt=N;tt<D;++tt)Xe+=wt(Se[tt]);return Xe}function Oe(Se,N,D){for(var xe=Se.slice(N,D),Xe="",tt=0;tt<xe.length;tt+=2)Xe+=String.fromCharCode(xe[tt]+xe[tt+1]*256);return Xe}b.prototype.slice=function(N,D){var xe=this.length;N=~~N,D=D===void 0?xe:~~D,N<0?(N+=xe,N<0&&(N=0)):N>xe&&(N=xe),D<0?(D+=xe,D<0&&(D=0)):D>xe&&(D=xe),D<N&&(D=N);var Xe=this.subarray(N,D);return Xe.__proto__=b.prototype,Xe};function Ze(Se,N,D){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+N>D)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||Ze(N,D,this.length);for(var Xe=this[N],tt=1,ht=0;++ht<D&&(tt*=256);)Xe+=this[N+ht]*tt;return Xe},b.prototype.readUIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||Ze(N,D,this.length);for(var Xe=this[N+--D],tt=1;D>0&&(tt*=256);)Xe+=this[N+--D]*tt;return Xe},b.prototype.readUInt8=function(N,D){return N=N>>>0,D||Ze(N,1,this.length),this[N]},b.prototype.readUInt16LE=function(N,D){return N=N>>>0,D||Ze(N,2,this.length),this[N]|this[N+1]<<8},b.prototype.readUInt16BE=function(N,D){return N=N>>>0,D||Ze(N,2,this.length),this[N]<<8|this[N+1]},b.prototype.readUInt32LE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},b.prototype.readUInt32BE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},b.prototype.readIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||Ze(N,D,this.length);for(var Xe=this[N],tt=1,ht=0;++ht<D&&(tt*=256);)Xe+=this[N+ht]*tt;return tt*=128,Xe>=tt&&(Xe-=Math.pow(2,8*D)),Xe},b.prototype.readIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||Ze(N,D,this.length);for(var Xe=D,tt=1,ht=this[N+--Xe];Xe>0&&(tt*=256);)ht+=this[N+--Xe]*tt;return tt*=128,ht>=tt&&(ht-=Math.pow(2,8*D)),ht},b.prototype.readInt8=function(N,D){return N=N>>>0,D||Ze(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},b.prototype.readInt16LE=function(N,D){N=N>>>0,D||Ze(N,2,this.length);var xe=this[N]|this[N+1]<<8;return xe&32768?xe|4294901760:xe},b.prototype.readInt16BE=function(N,D){N=N>>>0,D||Ze(N,2,this.length);var xe=this[N+1]|this[N]<<8;return xe&32768?xe|4294901760:xe},b.prototype.readInt32LE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},b.prototype.readInt32BE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},b.prototype.readFloatLE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),u.read(this,N,!0,23,4)},b.prototype.readFloatBE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),u.read(this,N,!1,23,4)},b.prototype.readDoubleLE=function(N,D){return N=N>>>0,D||Ze(N,8,this.length),u.read(this,N,!0,52,8)},b.prototype.readDoubleBE=function(N,D){return N=N>>>0,D||Ze(N,8,this.length),u.read(this,N,!1,52,8)};function He(Se,N,D,xe,Xe,tt){if(!b.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<tt)throw new RangeError('"value" argument is out of bounds');if(D+xe>Se.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,xe=xe>>>0,!Xe){var tt=Math.pow(2,8*xe)-1;He(this,N,D,xe,tt,0)}var ht=1,le=0;for(this[D]=N&255;++le<xe&&(ht*=256);)this[D+le]=N/ht&255;return D+xe},b.prototype.writeUIntBE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,xe=xe>>>0,!Xe){var tt=Math.pow(2,8*xe)-1;He(this,N,D,xe,tt,0)}var ht=xe-1,le=1;for(this[D+ht]=N&255;--ht>=0&&(le*=256);)this[D+ht]=N/le&255;return D+xe},b.prototype.writeUInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,255,0),this[D]=N&255,D+1},b.prototype.writeUInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeUInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeUInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D+3]=N>>>24,this[D+2]=N>>>16,this[D+1]=N>>>8,this[D]=N&255,D+4},b.prototype.writeUInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4},b.prototype.writeIntLE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,!Xe){var tt=Math.pow(2,8*xe-1);He(this,N,D,xe,tt-1,-tt)}var ht=0,le=1,k=0;for(this[D]=N&255;++ht<xe&&(le*=256);)N<0&&k===0&&this[D+ht-1]!==0&&(k=1),this[D+ht]=(N/le>>0)-k&255;return D+xe},b.prototype.writeIntBE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,!Xe){var tt=Math.pow(2,8*xe-1);He(this,N,D,xe,tt-1,-tt)}var ht=xe-1,le=1,k=0;for(this[D+ht]=N&255;--ht>=0&&(le*=256);)N<0&&k===0&&this[D+ht+1]!==0&&(k=1),this[D+ht]=(N/le>>0)-k&255;return D+xe},b.prototype.writeInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,127,-128),N<0&&(N=255+N+1),this[D]=N&255,D+1},b.prototype.writeInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),this[D]=N&255,this[D+1]=N>>>8,this[D+2]=N>>>16,this[D+3]=N>>>24,D+4},b.prototype.writeInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4};function ot(Se,N,D,xe,Xe,tt){if(D+xe>Se.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ft(Se,N,D,xe,Xe){return N=+N,D=D>>>0,Xe||ot(Se,N,D,4),u.write(Se,N,D,xe,23,4),D+4}b.prototype.writeFloatLE=function(N,D,xe){return ft(this,N,D,!0,xe)},b.prototype.writeFloatBE=function(N,D,xe){return ft(this,N,D,!1,xe)};function _t(Se,N,D,xe,Xe){return N=+N,D=D>>>0,Xe||ot(Se,N,D,8),u.write(Se,N,D,xe,52,8),D+8}b.prototype.writeDoubleLE=function(N,D,xe){return _t(this,N,D,!0,xe)},b.prototype.writeDoubleBE=function(N,D,xe){return _t(this,N,D,!1,xe)},b.prototype.copy=function(N,D,xe,Xe){if(!b.isBuffer(N))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!Xe&&Xe!==0&&(Xe=this.length),D>=N.length&&(D=N.length),D||(D=0),Xe>0&&Xe<xe&&(Xe=xe),Xe===xe||N.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-D<Xe-xe&&(Xe=N.length-D+xe);var tt=Xe-xe;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,xe,Xe);else if(this===N&&xe<D&&D<Xe)for(var ht=tt-1;ht>=0;--ht)N[ht+D]=this[ht+xe];else Uint8Array.prototype.set.call(N,this.subarray(xe,Xe),D);return tt},b.prototype.fill=function(N,D,xe,Xe){if(typeof N=="string"){if(typeof D=="string"?(Xe=D,D=0,xe=this.length):typeof xe=="string"&&(Xe=xe,xe=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!b.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(N.length===1){var tt=N.charCodeAt(0);(Xe==="utf8"&&tt<128||Xe==="latin1")&&(N=tt)}}else typeof N=="number"&&(N=N&255);if(D<0||this.length<D||this.length<xe)throw new RangeError("Out of range index");if(xe<=D)return this;D=D>>>0,xe=xe===void 0?this.length:xe>>>0,N||(N=0);var ht;if(typeof N=="number")for(ht=D;ht<xe;++ht)this[ht]=N;else{var le=b.isBuffer(N)?N:b.from(N,Xe),k=le.length;if(k===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ht=0;ht<xe-D;++ht)this[ht+D]=le[ht%k]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function mt(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(Mt,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function wt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Wt(Se,N){N=N||1/0;for(var D,xe=Se.length,Xe=null,tt=[],ht=0;ht<xe;++ht){if(D=Se.charCodeAt(ht),D>55295&&D<57344){if(!Xe){if(D>56319){(N-=3)>-1&&tt.push(239,191,189);continue}else if(ht+1===xe){(N-=3)>-1&&tt.push(239,191,189);continue}Xe=D;continue}if(D<56320){(N-=3)>-1&&tt.push(239,191,189),Xe=D;continue}D=(Xe-55296<<10|D-56320)+65536}else Xe&&(N-=3)>-1&&tt.push(239,191,189);if(Xe=null,D<128){if((N-=1)<0)break;tt.push(D)}else if(D<2048){if((N-=2)<0)break;tt.push(D>>6|192,D&63|128)}else if(D<65536){if((N-=3)<0)break;tt.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((N-=4)<0)break;tt.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return tt}function Lt(Se){for(var N=[],D=0;D<Se.length;++D)N.push(Se.charCodeAt(D)&255);return N}function ur(Se,N){for(var D,xe,Xe,tt=[],ht=0;ht<Se.length&&!((N-=2)<0);++ht)D=Se.charCodeAt(ht),xe=D>>8,Xe=D%256,tt.push(Xe),tt.push(xe);return tt}function it(Se){return d.toByteArray(mt(Se))}function wr(Se,N,D,xe){for(var Xe=0;Xe<xe&&!(Xe+D>=N.length||Xe>=Se.length);++Xe)N[Xe+D]=Se[Xe];return Xe}function cr(Se,N){return Se instanceof N||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===N.name}function Ht(Se){return Se!==Se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,l){const f=i("./validator"),d=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");a.exports={XMLParser:d,XMLValidator:f,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,l){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+f+"]["+d+"]*",w=new RegExp("^"+u+"$"),E=function(b,T){const R=[];let L=T.exec(b);for(;L;){const j=[];j.startIndex=T.lastIndex-L[0].length;const se=L.length;for(let K=0;K<se;K++)j.push(L[K]);R.push(j),L=T.exec(b)}return R},I=function(b){const T=w.exec(b);return!(T===null||typeof T>"u")};l.isExist=function(b){return typeof b<"u"},l.isEmptyObject=function(b){return Object.keys(b).length===0},l.merge=function(b,T,R){if(T){const L=Object.keys(T),j=L.length;for(let se=0;se<j;se++)R==="strict"?b[L[se]]=[T[L[se]]]:b[L[se]]=T[L[se]]}},l.getValue=function(b){return l.isExist(b)?b:""},l.isName=I,l.getAllMatches=E,l.nameRegexp=u},{}],5:[function(i,a,l){const f=i("./util"),d={allowBooleanAttributes:!1,unpairedTags:[]};l.validate=function(U,P){P=Object.assign({},d,P);const z=[];let B=!1,Q=!1;U[0]==="\uFEFF"&&(U=U.substr(1));for(let q=0;q<U.length;q++)if(U[q]==="<"&&U[q+1]==="?"){if(q+=2,q=w(U,q),q.err)return q}else if(U[q]==="<"){let ve=q;if(q++,U[q]==="!"){q=E(U,q);continue}else{let ye=!1;U[q]==="/"&&(ye=!0,q++);let fe="";for(;q<U.length&&U[q]!==">"&&U[q]!==" "&&U[q]!=="	"&&U[q]!==`
`&&U[q]!=="\r";q++)fe+=U[q];if(fe=fe.trim(),fe[fe.length-1]==="/"&&(fe=fe.substring(0,fe.length-1),q--),!G(fe)){let J;return fe.trim().length===0?J="Invalid space after '<'.":J="Tag '"+fe+"' is an invalid name.",K("InvalidTag",J,ae(U,q))}const oe=T(U,q);if(oe===!1)return K("InvalidAttr","Attributes for '"+fe+"' have open quote.",ae(U,q));let he=oe.value;if(q=oe.index,he[he.length-1]==="/"){const J=q-he.length;he=he.substring(0,he.length-1);const re=L(he,P);if(re===!0)B=!0;else return K(re.err.code,re.err.msg,ae(U,J+re.err.line))}else if(ye)if(oe.tagClosed){if(he.trim().length>0)return K("InvalidTag","Closing tag '"+fe+"' can't have attributes or invalid starting.",ae(U,ve));{const J=z.pop();if(fe!==J.tagName){let re=ae(U,J.tagStartPos);return K("InvalidTag","Expected closing tag '"+J.tagName+"' (opened in line "+re.line+", col "+re.col+") instead of closing tag '"+fe+"'.",ae(U,ve))}z.length==0&&(Q=!0)}}else return K("InvalidTag","Closing tag '"+fe+"' doesn't have proper closing.",ae(U,q));else{const J=L(he,P);if(J!==!0)return K(J.err.code,J.err.msg,ae(U,q-he.length+J.err.line));if(Q===!0)return K("InvalidXml","Multiple possible root nodes found.",ae(U,q));P.unpairedTags.indexOf(fe)!==-1||z.push({tagName:fe,tagStartPos:ve}),B=!0}for(q++;q<U.length;q++)if(U[q]==="<")if(U[q+1]==="!"){q++,q=E(U,q);continue}else if(U[q+1]==="?"){if(q=w(U,++q),q.err)return q}else break;else if(U[q]==="&"){const J=se(U,q);if(J==-1)return K("InvalidChar","char '&' is not expected.",ae(U,q));q=J}else if(Q===!0&&!u(U[q]))return K("InvalidXml","Extra text at the end",ae(U,q));U[q]==="<"&&q--}}else{if(u(U[q]))continue;return K("InvalidChar","char '"+U[q]+"' is not expected.",ae(U,q))}if(B){if(z.length==1)return K("InvalidTag","Unclosed tag '"+z[0].tagName+"'.",ae(U,z[0].tagStartPos));if(z.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(z.map(q=>q.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function u(U){return U===" "||U==="	"||U===`
`||U==="\r"}function w(U,P){const z=P;for(;P<U.length;P++)if(U[P]=="?"||U[P]==" "){const B=U.substr(z,P-z);if(P>5&&B==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",ae(U,P));if(U[P]=="?"&&U[P+1]==">"){P++;break}else continue}return P}function E(U,P){if(U.length>P+5&&U[P+1]==="-"&&U[P+2]==="-"){for(P+=3;P<U.length;P++)if(U[P]==="-"&&U[P+1]==="-"&&U[P+2]===">"){P+=2;break}}else if(U.length>P+8&&U[P+1]==="D"&&U[P+2]==="O"&&U[P+3]==="C"&&U[P+4]==="T"&&U[P+5]==="Y"&&U[P+6]==="P"&&U[P+7]==="E"){let z=1;for(P+=8;P<U.length;P++)if(U[P]==="<")z++;else if(U[P]===">"&&(z--,z===0))break}else if(U.length>P+9&&U[P+1]==="["&&U[P+2]==="C"&&U[P+3]==="D"&&U[P+4]==="A"&&U[P+5]==="T"&&U[P+6]==="A"&&U[P+7]==="["){for(P+=8;P<U.length;P++)if(U[P]==="]"&&U[P+1]==="]"&&U[P+2]===">"){P+=2;break}}return P}const I='"',b="'";function T(U,P){let z="",B="",Q=!1;for(;P<U.length;P++){if(U[P]===I||U[P]===b)B===""?B=U[P]:B!==U[P]||(B="");else if(U[P]===">"&&B===""){Q=!0;break}z+=U[P]}return B!==""?!1:{value:z,index:P,tagClosed:Q}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function L(U,P){const z=f.getAllMatches(U,R),B={};for(let Q=0;Q<z.length;Q++){if(z[Q][1].length===0)return K("InvalidAttr","Attribute '"+z[Q][2]+"' has no space in starting.",X(z[Q]));if(z[Q][3]!==void 0&&z[Q][4]===void 0)return K("InvalidAttr","Attribute '"+z[Q][2]+"' is without value.",X(z[Q]));if(z[Q][3]===void 0&&!P.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+z[Q][2]+"' is not allowed.",X(z[Q]));const q=z[Q][2];if(!Z(q))return K("InvalidAttr","Attribute '"+q+"' is an invalid name.",X(z[Q]));if(!B.hasOwnProperty(q))B[q]=1;else return K("InvalidAttr","Attribute '"+q+"' is repeated.",X(z[Q]))}return!0}function j(U,P){let z=/\d/;for(U[P]==="x"&&(P++,z=/[\da-fA-F]/);P<U.length;P++){if(U[P]===";")return P;if(!U[P].match(z))break}return-1}function se(U,P){if(P++,U[P]===";")return-1;if(U[P]==="#")return P++,j(U,P);let z=0;for(;P<U.length;P++,z++)if(!(U[P].match(/\w/)&&z<20)){if(U[P]===";")break;return-1}return P}function K(U,P,z){return{err:{code:U,msg:P,line:z.line||z,col:z.col}}}function Z(U){return f.isName(U)}function G(U){return f.isName(U)}function ae(U,P){const z=U.substring(0,P).split(/\r?\n/);return{line:z.length,col:z[z.length-1].length+1}}function X(U){return U.startIndex+U[1].length}},{"./util":4}],6:[function(i,a,l){const f=i("./orderedJs2Xml"),d={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,T){return T},attributeValueProcessor:function(b,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(b){this.options=Object.assign({},d,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=I),this.processTextOrObjNode=w,this.options.format?(this.indentate=E,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(b){return this.options.preserveOrder?f(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},u.prototype.j2x=function(b,T){let R="",L="";for(let j in b)if(Object.prototype.hasOwnProperty.call(b,j))if(typeof b[j]>"u")this.isAttribute(j)&&(L+="");else if(b[j]===null)this.isAttribute(j)?L+="":j[0]==="?"?L+=this.indentate(T)+"<"+j+"?"+this.tagEndChar:L+=this.indentate(T)+"<"+j+"/"+this.tagEndChar;else if(b[j]instanceof Date)L+=this.buildTextValNode(b[j],j,"",T);else if(typeof b[j]!="object"){const se=this.isAttribute(j);if(se)R+=this.buildAttrPairStr(se,""+b[j]);else if(j===this.options.textNodeName){let K=this.options.tagValueProcessor(j,""+b[j]);L+=this.replaceEntitiesValue(K)}else L+=this.buildTextValNode(b[j],j,"",T)}else if(Array.isArray(b[j])){const se=b[j].length;let K="";for(let Z=0;Z<se;Z++){const G=b[j][Z];typeof G>"u"||(G===null?j[0]==="?"?L+=this.indentate(T)+"<"+j+"?"+this.tagEndChar:L+=this.indentate(T)+"<"+j+"/"+this.tagEndChar:typeof G=="object"?this.options.oneListGroup?K+=this.j2x(G,T+1).val:K+=this.processTextOrObjNode(G,j,T):K+=this.buildTextValNode(G,j,"",T))}this.options.oneListGroup&&(K=this.buildObjectNode(K,j,"",T)),L+=K}else if(this.options.attributesGroupName&&j===this.options.attributesGroupName){const se=Object.keys(b[j]),K=se.length;for(let Z=0;Z<K;Z++)R+=this.buildAttrPairStr(se[Z],""+b[j][se[Z]])}else L+=this.processTextOrObjNode(b[j],j,T);return{attrStr:R,val:L}},u.prototype.buildAttrPairStr=function(b,T){return T=this.options.attributeValueProcessor(b,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+b:" "+b+'="'+T+'"'};function w(b,T,R){const L=this.j2x(b,R+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],T,L.attrStr,R):this.buildObjectNode(L.val,T,L.attrStr,R)}u.prototype.buildObjectNode=function(b,T,R,L){if(b==="")return T[0]==="?"?this.indentate(L)+"<"+T+R+"?"+this.tagEndChar:this.indentate(L)+"<"+T+R+this.closeTag(T)+this.tagEndChar;{let j="</"+T+this.tagEndChar,se="";return T[0]==="?"&&(se="?",j=""),(R||R==="")&&b.indexOf("<")===-1?this.indentate(L)+"<"+T+R+se+">"+b+j:this.options.commentPropName!==!1&&T===this.options.commentPropName&&se.length===0?this.indentate(L)+`<!--${b}-->`+this.newLine:this.indentate(L)+"<"+T+R+se+this.tagEndChar+b+this.indentate(L)+j}},u.prototype.closeTag=function(b){let T="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${b}`,T},u.prototype.buildTextValNode=function(b,T,R,L){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(L)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(L)+`<!--${b}-->`+this.newLine;if(T[0]==="?")return this.indentate(L)+"<"+T+R+"?"+this.tagEndChar;{let j=this.options.tagValueProcessor(T,b);return j=this.replaceEntitiesValue(j),j===""?this.indentate(L)+"<"+T+R+this.closeTag(T)+this.tagEndChar:this.indentate(L)+"<"+T+R+">"+j+"</"+T+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const R=this.options.entities[T];b=b.replace(R.regex,R.val)}return b};function E(b){return this.options.indentBy.repeat(b)}function I(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(i,a,l){const f=`
`;function d(T,R){let L="";return R.format&&R.indentBy.length>0&&(L=f),u(T,R,"",L)}function u(T,R,L,j){let se="",K=!1;for(let Z=0;Z<T.length;Z++){const G=T[Z],ae=w(G);if(ae===void 0)continue;let X="";if(L.length===0?X=ae:X=`${L}.${ae}`,ae===R.textNodeName){let Q=G[ae];I(X,R)||(Q=R.tagValueProcessor(ae,Q),Q=b(Q,R)),K&&(se+=j),se+=Q,K=!1;continue}else if(ae===R.cdataPropName){K&&(se+=j),se+=`<![CDATA[${G[ae][0][R.textNodeName]}]]>`,K=!1;continue}else if(ae===R.commentPropName){se+=j+`<!--${G[ae][0][R.textNodeName]}-->`,K=!0;continue}else if(ae[0]==="?"){const Q=E(G[":@"],R),q=ae==="?xml"?"":j;let ve=G[ae][0][R.textNodeName];ve=ve.length!==0?" "+ve:"",se+=q+`<${ae}${ve}${Q}?>`,K=!0;continue}let U=j;U!==""&&(U+=R.indentBy);const P=E(G[":@"],R),z=j+`<${ae}${P}`,B=u(G[ae],R,X,U);R.unpairedTags.indexOf(ae)!==-1?R.suppressUnpairedNode?se+=z+">":se+=z+"/>":(!B||B.length===0)&&R.suppressEmptyNode?se+=z+"/>":B&&B.endsWith(">")?se+=z+`>${B}${j}</${ae}>`:(se+=z+">",B&&j!==""&&(B.includes("/>")||B.includes("</"))?se+=j+R.indentBy+B+j:se+=B,se+=`</${ae}>`),K=!0}return se}function w(T){const R=Object.keys(T);for(let L=0;L<R.length;L++){const j=R[L];if(T.hasOwnProperty(j)&&j!==":@")return j}}function E(T,R){let L="";if(T&&!R.ignoreAttributes)for(let j in T){if(!T.hasOwnProperty(j))continue;let se=R.attributeValueProcessor(j,T[j]);se=b(se,R),se===!0&&R.suppressBooleanAttributes?L+=` ${j.substr(R.attributeNamePrefix.length)}`:L+=` ${j.substr(R.attributeNamePrefix.length)}="${se}"`}return L}function I(T,R){T=T.substr(0,T.length-R.textNodeName.length-1);let L=T.substr(T.lastIndexOf(".")+1);for(let j in R.stopNodes)if(R.stopNodes[j]===T||R.stopNodes[j]==="*."+L)return!0;return!1}function b(T,R){if(T&&T.length>0&&R.processEntities)for(let L=0;L<R.entities.length;L++){const j=R.entities[L];T=T.replace(j.regex,j.val)}return T}a.exports=d},{}],8:[function(i,a,l){const f=i("../util");function d(L,j){const se={};if(L[j+3]==="O"&&L[j+4]==="C"&&L[j+5]==="T"&&L[j+6]==="Y"&&L[j+7]==="P"&&L[j+8]==="E"){j=j+9;let K=1,Z=!1,G=!1,ae="";for(;j<L.length;j++)if(L[j]==="<"&&!G){if(Z&&E(L,j))j+=7,[entityName,val,j]=u(L,j+1),val.indexOf("&")===-1&&(se[R(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(Z&&I(L,j))j+=8;else if(Z&&b(L,j))j+=8;else if(Z&&T(L,j))j+=9;else if(w)G=!0;else throw new Error("Invalid DOCTYPE");K++,ae=""}else if(L[j]===">"){if(G?L[j-1]==="-"&&L[j-2]==="-"&&(G=!1,K--):K--,K===0)break}else L[j]==="["?Z=!0:ae+=L[j];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:se,i:j}}function u(L,j){let se="";for(;j<L.length&&L[j]!=="'"&&L[j]!=='"';j++)se+=L[j];if(se=se.trim(),se.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=L[j++];let Z="";for(;j<L.length&&L[j]!==K;j++)Z+=L[j];return[se,Z,j]}function w(L,j){return L[j+1]==="!"&&L[j+2]==="-"&&L[j+3]==="-"}function E(L,j){return L[j+1]==="!"&&L[j+2]==="E"&&L[j+3]==="N"&&L[j+4]==="T"&&L[j+5]==="I"&&L[j+6]==="T"&&L[j+7]==="Y"}function I(L,j){return L[j+1]==="!"&&L[j+2]==="E"&&L[j+3]==="L"&&L[j+4]==="E"&&L[j+5]==="M"&&L[j+6]==="E"&&L[j+7]==="N"&&L[j+8]==="T"}function b(L,j){return L[j+1]==="!"&&L[j+2]==="A"&&L[j+3]==="T"&&L[j+4]==="T"&&L[j+5]==="L"&&L[j+6]==="I"&&L[j+7]==="S"&&L[j+8]==="T"}function T(L,j){return L[j+1]==="!"&&L[j+2]==="N"&&L[j+3]==="O"&&L[j+4]==="T"&&L[j+5]==="A"&&L[j+6]==="T"&&L[j+7]==="I"&&L[j+8]==="O"&&L[j+9]==="N"}function R(L){if(f.isName(L))return L;throw new Error(`Invalid entity name ${L}`)}a.exports=d},{"../util":4}],9:[function(i,a,l){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,w){return w},attributeValueProcessor:function(u,w){return w},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,w,E){return u}},d=function(u){return Object.assign({},f,u)};l.buildOptions=d,l.defaultOptions=f},{}],10:[function(i,a,l){const f=i("../util"),d=i("./xmlNode"),u=i("./DocTypeReader"),w=i("strnum");class E{constructor(Q){this.options=Q,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=I,this.parseXml=j,this.parseTextData=b,this.resolveNameSpace=T,this.buildAttributesMap=L,this.isItStopNode=G,this.replaceEntitiesValue=K,this.readStopNodeData=P,this.saveTextToParentTag=Z,this.addChild=se}}function I(B){const Q=Object.keys(B);for(let q=0;q<Q.length;q++){const ve=Q[q];this.lastEntities[ve]={regex:new RegExp("&"+ve+";","g"),val:B[ve]}}}function b(B,Q,q,ve,ye,fe,oe){if(B!==void 0&&(this.options.trimValues&&!ve&&(B=B.trim()),B.length>0)){oe||(B=this.replaceEntitiesValue(B));const he=this.options.tagValueProcessor(Q,B,q,ye,fe);return he==null?B:typeof he!=typeof B||he!==B?he:this.options.trimValues?z(B,this.options.parseTagValue,this.options.numberParseOptions):B.trim()===B?z(B,this.options.parseTagValue,this.options.numberParseOptions):B}}function T(B){if(this.options.removeNSPrefix){const Q=B.split(":"),q=B.charAt(0)==="/"?"/":"";if(Q[0]==="xmlns")return"";Q.length===2&&(B=q+Q[1])}return B}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function L(B,Q,q){if(!this.options.ignoreAttributes&&typeof B=="string"){const ve=f.getAllMatches(B,R),ye=ve.length,fe={};for(let oe=0;oe<ye;oe++){const he=this.resolveNameSpace(ve[oe][1]);let J=ve[oe][4],re=this.options.attributeNamePrefix+he;if(he.length)if(this.options.transformAttributeName&&(re=this.options.transformAttributeName(re)),re==="__proto__"&&(re="#__proto__"),J!==void 0){this.options.trimValues&&(J=J.trim()),J=this.replaceEntitiesValue(J);const de=this.options.attributeValueProcessor(he,J,Q);de==null?fe[re]=J:typeof de!=typeof J||de!==J?fe[re]=de:fe[re]=z(J,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(fe[re]=!0)}if(!Object.keys(fe).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=fe,oe}return fe}}const j=function(B){B=B.replace(/\r\n?/g,`
`);const Q=new d("!xml");let q=Q,ve="",ye="";for(let fe=0;fe<B.length;fe++)if(B[fe]==="<")if(B[fe+1]==="/"){const he=X(B,">",fe,"Closing Tag is not closed.");let J=B.substring(fe+2,he).trim();if(this.options.removeNSPrefix){const we=J.indexOf(":");we!==-1&&(J=J.substr(we+1))}this.options.transformTagName&&(J=this.options.transformTagName(J)),q&&(ve=this.saveTextToParentTag(ve,q,ye));const re=ye.substring(ye.lastIndexOf(".")+1);if(J&&this.options.unpairedTags.indexOf(J)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${J}>`);let de=0;re&&this.options.unpairedTags.indexOf(re)!==-1?(de=ye.lastIndexOf(".",ye.lastIndexOf(".")-1),this.tagsNodeStack.pop()):de=ye.lastIndexOf("."),ye=ye.substring(0,de),q=this.tagsNodeStack.pop(),ve="",fe=he}else if(B[fe+1]==="?"){let he=U(B,fe,!1,"?>");if(!he)throw new Error("Pi Tag is not closed.");if(ve=this.saveTextToParentTag(ve,q,ye),!(this.options.ignoreDeclaration&&he.tagName==="?xml"||this.options.ignorePiTags)){const J=new d(he.tagName);J.add(this.options.textNodeName,""),he.tagName!==he.tagExp&&he.attrExpPresent&&(J[":@"]=this.buildAttributesMap(he.tagExp,ye,he.tagName)),this.addChild(q,J,ye)}fe=he.closeIndex+1}else if(B.substr(fe+1,3)==="!--"){const he=X(B,"-->",fe+4,"Comment is not closed.");if(this.options.commentPropName){const J=B.substring(fe+4,he-2);ve=this.saveTextToParentTag(ve,q,ye),q.add(this.options.commentPropName,[{[this.options.textNodeName]:J}])}fe=he}else if(B.substr(fe+1,2)==="!D"){const he=u(B,fe);this.docTypeEntities=he.entities,fe=he.i}else if(B.substr(fe+1,2)==="!["){const he=X(B,"]]>",fe,"CDATA is not closed.")-2,J=B.substring(fe+9,he);if(ve=this.saveTextToParentTag(ve,q,ye),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:J}]);else{let re=this.parseTextData(J,q.tagname,ye,!0,!1,!0);re==null&&(re=""),q.add(this.options.textNodeName,re)}fe=he+2}else{let he=U(B,fe,this.options.removeNSPrefix),J=he.tagName;const re=he.rawTagName;let de=he.tagExp,we=he.attrExpPresent,Pe=he.closeIndex;this.options.transformTagName&&(J=this.options.transformTagName(J)),q&&ve&&q.tagname!=="!xml"&&(ve=this.saveTextToParentTag(ve,q,ye,!1));const Ne=q;if(Ne&&this.options.unpairedTags.indexOf(Ne.tagname)!==-1&&(q=this.tagsNodeStack.pop(),ye=ye.substring(0,ye.lastIndexOf("."))),J!==Q.tagname&&(ye+=ye?"."+J:J),this.isItStopNode(this.options.stopNodes,ye,J)){let Ie="";if(de.length>0&&de.lastIndexOf("/")===de.length-1)fe=he.closeIndex;else if(this.options.unpairedTags.indexOf(J)!==-1)fe=he.closeIndex;else{const Ze=this.readStopNodeData(B,re,Pe+1);if(!Ze)throw new Error(`Unexpected end of ${re}`);fe=Ze.i,Ie=Ze.tagContent}const Oe=new d(J);J!==de&&we&&(Oe[":@"]=this.buildAttributesMap(de,ye,J)),Ie&&(Ie=this.parseTextData(Ie,J,ye,!0,we,!0,!0)),ye=ye.substr(0,ye.lastIndexOf(".")),Oe.add(this.options.textNodeName,Ie),this.addChild(q,Oe,ye)}else{if(de.length>0&&de.lastIndexOf("/")===de.length-1){J[J.length-1]==="/"?(J=J.substr(0,J.length-1),ye=ye.substr(0,ye.length-1),de=J):de=de.substr(0,de.length-1),this.options.transformTagName&&(J=this.options.transformTagName(J));const Ie=new d(J);J!==de&&we&&(Ie[":@"]=this.buildAttributesMap(de,ye,J)),this.addChild(q,Ie,ye),ye=ye.substr(0,ye.lastIndexOf("."))}else{const Ie=new d(J);this.tagsNodeStack.push(q),J!==de&&we&&(Ie[":@"]=this.buildAttributesMap(de,ye,J)),this.addChild(q,Ie,ye),q=Ie}ve="",fe=Pe}}else ve+=B[fe];return Q.child};function se(B,Q,q){const ve=this.options.updateTag(Q.tagname,q,Q[":@"]);ve===!1||(typeof ve=="string"&&(Q.tagname=ve),B.addChild(Q))}const K=function(B){if(this.options.processEntities){for(let Q in this.docTypeEntities){const q=this.docTypeEntities[Q];B=B.replace(q.regx,q.val)}for(let Q in this.lastEntities){const q=this.lastEntities[Q];B=B.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let Q in this.htmlEntities){const q=this.htmlEntities[Q];B=B.replace(q.regex,q.val)}B=B.replace(this.ampEntity.regex,this.ampEntity.val)}return B};function Z(B,Q,q,ve){return B&&(ve===void 0&&(ve=Object.keys(Q.child).length===0),B=this.parseTextData(B,Q.tagname,q,!1,Q[":@"]?Object.keys(Q[":@"]).length!==0:!1,ve),B!==void 0&&B!==""&&Q.add(this.options.textNodeName,B),B=""),B}function G(B,Q,q){const ve="*."+q;for(const ye in B){const fe=B[ye];if(ve===fe||Q===fe)return!0}return!1}function ae(B,Q,q=">"){let ve,ye="";for(let fe=Q;fe<B.length;fe++){let oe=B[fe];if(ve)oe===ve&&(ve="");else if(oe==='"'||oe==="'")ve=oe;else if(oe===q[0])if(q[1]){if(B[fe+1]===q[1])return{data:ye,index:fe}}else return{data:ye,index:fe};else oe==="	"&&(oe=" ");ye+=oe}}function X(B,Q,q,ve){const ye=B.indexOf(Q,q);if(ye===-1)throw new Error(ve);return ye+Q.length-1}function U(B,Q,q,ve=">"){const ye=ae(B,Q+1,ve);if(!ye)return;let fe=ye.data;const oe=ye.index,he=fe.search(/\s/);let J=fe,re=!0;he!==-1&&(J=fe.substring(0,he),fe=fe.substring(he+1).trimStart());const de=J;if(q){const we=J.indexOf(":");we!==-1&&(J=J.substr(we+1),re=J!==ye.data.substr(we+1))}return{tagName:J,tagExp:fe,closeIndex:oe,attrExpPresent:re,rawTagName:de}}function P(B,Q,q){const ve=q;let ye=1;for(;q<B.length;q++)if(B[q]==="<")if(B[q+1]==="/"){const fe=X(B,">",q,`${Q} is not closed`);if(B.substring(q+2,fe).trim()===Q&&(ye--,ye===0))return{tagContent:B.substring(ve,q),i:fe};q=fe}else if(B[q+1]==="?")q=X(B,"?>",q+1,"StopNode is not closed.");else if(B.substr(q+1,3)==="!--")q=X(B,"-->",q+3,"StopNode is not closed.");else if(B.substr(q+1,2)==="![")q=X(B,"]]>",q,"StopNode is not closed.")-2;else{const fe=U(B,q,">");fe&&((fe&&fe.tagName)===Q&&fe.tagExp[fe.tagExp.length-1]!=="/"&&ye++,q=fe.closeIndex)}}function z(B,Q,q){if(Q&&typeof B=="string"){const ve=B.trim();return ve==="true"?!0:ve==="false"?!1:w(B,q)}else return f.isExist(B)?B:""}a.exports=E},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,l){const{buildOptions:f}=i("./OptionsBuilder"),d=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),w=i("../validator");class E{constructor(b){this.externalEntities={},this.options=f(b)}parse(b,T){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const j=w.validate(b,T);if(j!==!0)throw Error(`${j.err.msg}:${j.err.line}:${j.err.col}`)}const R=new d(this.options);R.addExternalEntities(this.externalEntities);const L=R.parseXml(b);return this.options.preserveOrder||L===void 0?L:u(L,this.options)}addEntity(b,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(T==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=T}}a.exports=E},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,l){function f(I,b){return d(I,b)}function d(I,b,T){let R;const L={};for(let j=0;j<I.length;j++){const se=I[j],K=u(se);let Z="";if(T===void 0?Z=K:Z=T+"."+K,K===b.textNodeName)R===void 0?R=se[K]:R+=""+se[K];else{if(K===void 0)continue;if(se[K]){let G=d(se[K],b,Z);const ae=E(G,b);se[":@"]?w(G,se[":@"],Z,b):Object.keys(G).length===1&&G[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?G=G[b.textNodeName]:Object.keys(G).length===0&&(b.alwaysCreateTextNode?G[b.textNodeName]="":G=""),L[K]!==void 0&&L.hasOwnProperty(K)?(Array.isArray(L[K])||(L[K]=[L[K]]),L[K].push(G)):b.isArray(K,Z,ae)?L[K]=[G]:L[K]=G}}}return typeof R=="string"?R.length>0&&(L[b.textNodeName]=R):R!==void 0&&(L[b.textNodeName]=R),L}function u(I){const b=Object.keys(I);for(let T=0;T<b.length;T++){const R=b[T];if(R!==":@")return R}}function w(I,b,T,R){if(b){const L=Object.keys(b),j=L.length;for(let se=0;se<j;se++){const K=L[se];R.isArray(K,T+"."+K,!0,!0)?I[K]=[b[K]]:I[K]=b[K]}}}function E(I,b){const{textNodeName:T}=b,R=Object.keys(I).length;return!!(R===0||R===1&&(I[T]||typeof I[T]=="boolean"||I[T]===0))}l.prettify=f},{}],13:[function(i,a,l){class f{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,w){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:w})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=f},{}],14:[function(i,a,l){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l.read=function(f,d,u,w,E){var I,b,T=E*8-w-1,R=(1<<T)-1,L=R>>1,j=-7,se=u?E-1:0,K=u?-1:1,Z=f[d+se];for(se+=K,I=Z&(1<<-j)-1,Z>>=-j,j+=T;j>0;I=I*256+f[d+se],se+=K,j-=8);for(b=I&(1<<-j)-1,I>>=-j,j+=w;j>0;b=b*256+f[d+se],se+=K,j-=8);if(I===0)I=1-L;else{if(I===R)return b?NaN:(Z?-1:1)*(1/0);b=b+Math.pow(2,w),I=I-L}return(Z?-1:1)*b*Math.pow(2,I-w)},l.write=function(f,d,u,w,E,I){var b,T,R,L=I*8-E-1,j=(1<<L)-1,se=j>>1,K=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=w?0:I-1,G=w?1:-1,ae=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(T=isNaN(d)?1:0,b=j):(b=Math.floor(Math.log(d)/Math.LN2),d*(R=Math.pow(2,-b))<1&&(b--,R*=2),b+se>=1?d+=K/R:d+=K*Math.pow(2,1-se),d*R>=2&&(b++,R/=2),b+se>=j?(T=0,b=j):b+se>=1?(T=(d*R-1)*Math.pow(2,E),b=b+se):(T=d*Math.pow(2,se-1)*Math.pow(2,E),b=0));E>=8;f[u+Z]=T&255,Z+=G,T/=256,E-=8);for(b=b<<E|T,L+=E;L>0;f[u+Z]=b&255,Z+=G,b/=256,L-=8);f[u+Z-G]|=ae*128}},{}],15:[function(i,a,l){const f=/^[-+]?0x[a-fA-F0-9]+$/,d=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function w(I,b={}){if(b=Object.assign({},u,b),!I||typeof I!="string")return I;let T=I.trim();if(b.skipLike!==void 0&&b.skipLike.test(T))return I;if(b.hex&&f.test(T))return Number.parseInt(T,16);{const R=d.exec(T);if(R){const L=R[1],j=R[2];let se=E(R[3]);const K=R[4]||R[6];if(!b.leadingZeros&&j.length>0&&L&&T[2]!==".")return I;if(!b.leadingZeros&&j.length>0&&!L&&T[1]!==".")return I;{const Z=Number(T),G=""+Z;return G.search(/[eE]/)!==-1||K?b.eNotation?Z:I:T.indexOf(".")!==-1?G==="0"&&se===""||G===se||L&&G==="-"+se?Z:I:j?se===G||L+se===G?Z:I:T===G||T===L+G?Z:I}}else return I}}function E(I){return I&&I.indexOf(".")!==-1&&(I=I.replace(/0+$/,""),I==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substr(0,I.length-1))),I}a.exports=w},{}],16:[function(i,a,l){(function(f){(function(){var d=this&&this.__awaiter||function(T,R,L,j){function se(K){return K instanceof L?K:new L(function(Z){Z(K)})}return new(L||(L=Promise))(function(K,Z){function G(U){try{X(j.next(U))}catch(P){Z(P)}}function ae(U){try{X(j.throw(U))}catch(P){Z(P)}}function X(U){U.done?K(U.value):se(U.value).then(G,ae)}X((j=j.apply(T,R||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.osmFetch=void 0;const u=i("../auth"),w=i("../config"),E=i("./_xml"),I=T=>typeof btoa>"u"?f.from(T,"binary").toString("base64"):btoa(T);function b(T,R,L){return d(this,void 0,void 0,function*(){const{apiUrl:j,authHeader:se,basicAuth:K,userAgent:Z}=(0,w.getConfig)(),G=K&&`Basic ${I(`${K.username}:${K.password}`)}`,ae=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let X=new URLSearchParams(R).toString();X&&(X=`?${X}`);const U=yield fetch(`${j}/api${T}${X}`,Object.assign(Object.assign({},L),{headers:Object.assign({Authorization:se||G||ae||"","User-Agent":Z},L==null?void 0:L.headers)})),P=U.headers.get("Content-Type");if(P!=null&&P.startsWith("application/xml")){const z=yield U.text();return yield E.xmlParser.parse(z)}if(P!=null&&P.startsWith("application/json"))return U.json();if(U.ok)return yield U.text();throw new Error(`OSM API: ${yield U.text()}`)})}l.osmFetch=b}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.xmlParser=void 0;const f=i("fast-xml-parser");l.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:d=>d!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.createOsmChangeXml=l.createChangesetMetaXml=void 0;const f=i("fast-xml-parser"),d=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(I){return d.build({osm:{changeset:{tag:Object.entries(I).map(([b,T])=>({$k:b,$v:T}))}}})}l.createChangesetMetaXml=u;const w=(I,b,T)=>b.reduce((R,L)=>{const j={$id:L.id,$version:T?0:L.version,$changeset:I,tag:Object.entries(L.tags||{}).map(([se,K])=>({$k:se,$v:K}))};switch(L.type){case"node":{const se=Object.assign(Object.assign({},j),{$lat:L.lat,$lon:L.lon});return Object.assign(Object.assign({},R),{node:[...R.node,se]})}case"way":{if(!L.nodes)throw new Error("Way has no nodes");const se=Object.assign(Object.assign({},j),{nd:L.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},R),{way:[...R.way,se]})}case"relation":{if(!L.members)throw new Error("Relation has no members");const se=Object.assign(Object.assign({},j),{member:L.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,se]})}default:return R}},{node:[],way:[],relation:[]});function E(I,b,T){return d.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[w(I,b.create,!0)],modify:[w(I,b.modify)],delete:[Object.assign({"$if-unused":!0},w(I,b.delete))]})})}l.createOsmChangeXml=E},{"fast-xml-parser":3}],19:[function(i,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.parseOsmChangeXml=l.parseOsmChangeJson=void 0;const f=i("../_xml");function d(I){return{changeset:+I.$.changeset,id:+I.$.id,timestamp:I.$.timestamp,uid:+I.$.uid,user:I.$.user,version:+I.$.version,tags:I.tag?Object.fromEntries(I.tag.map(b=>[b.$.k,b.$.v])):void 0}}const u=I=>{const b=[];if(I.node){const T=I.node.map(R=>Object.assign(Object.assign({type:"node"},d(R)),{lat:+R.$.lat,lon:+R.$.lon}));b.push(...T)}if(I.way){const T=I.way.map(R=>{var L;return Object.assign(Object.assign({type:"way"},d(R)),{nodes:((L=R.nd)===null||L===void 0?void 0:L.map(j=>+j.$.ref))||[]})});b.push(...T)}if(I.relation){const T=I.relation.map(R=>{var L;return Object.assign(Object.assign({type:"relation"},d(R)),{members:((L=R.member)===null||L===void 0?void 0:L.map(j=>({ref:+j.$.ref,role:j.$.role,type:j.$.type})))||[]})});b.push(...T)}return b};function w(I){var b,T,R;return{create:((b=I.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(u))||[],modify:((T=I.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(u))||[],delete:((R=I.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(u))||[]}}l.parseOsmChangeJson=w;function E(I){const b=f.xmlParser.parse(I);return w(b)}l.parseOsmChangeXml=E},{"../_xml":17}],20:[function(i,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function se(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.createChangesetComment=void 0;const d=i("../_osmFetch");function u(w,E){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/changeset/${w}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(E)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}l.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,a,l){var f=this&&this.__awaiter||function(E,I,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function se(G){try{Z(T.next(G))}catch(ae){j(ae)}}function K(G){try{Z(T.throw(G))}catch(ae){j(ae)}}function Z(G){G.done?L(G.value):R(G.value).then(se,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getChangesetDiff=void 0;const d=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function w(E){return f(this,void 0,void 0,function*(){const I=yield(0,d.osmFetch)(`/0.6/changeset/${E}/download`);return(0,u.parseOsmChangeJson)(I)})}l.getChangesetDiff=w},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,l){var f=this&&this.__awaiter||function(b,T,R,L){function j(se){return se instanceof R?se:new R(function(K){K(se)})}return new(R||(R=Promise))(function(se,K){function Z(X){try{ae(L.next(X))}catch(U){K(U)}}function G(X){try{ae(L.throw(X))}catch(U){K(U)}}function ae(X){X.done?se(X.value):j(X.value).then(Z,G)}ae((L=L.apply(b,T||[])).next())})},d=this&&this.__rest||function(b,T){var R={};for(var L in b)Object.prototype.hasOwnProperty.call(b,L)&&T.indexOf(L)<0&&(R[L]=b[L]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,L=Object.getOwnPropertySymbols(b);j<L.length;j++)T.indexOf(L[j])<0&&Object.prototype.propertyIsEnumerable.call(b,L[j])&&(R[L[j]]=b[L[j]]);return R};Object.defineProperty(l,"__esModule",{value:!0}),l.getChangeset=l.listChangesets=void 0;const u=i("../_osmFetch"),w=b=>{var T;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(R=>[R.$.k,R.$.v])),discussion:(T=b.discussion)===null||T===void 0?void 0:T[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function E(b){var T;return f(this,void 0,void 0,function*(){const{only:R}=b,L=d(b,["only"]);return((T=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),L))).osm[0].changeset)===null||T===void 0?void 0:T.map(w))||[]})}l.listChangesets=E;function I(b,T=!0){return f(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:T})).osm[0].changeset.map(w)[0]})}l.getChangeset=I},{"../_osmFetch":16}],23:[function(i,a,l){var f=this&&this.__createBinding||(Object.create?function(E,I,b,T){T===void 0&&(T=b);var R=Object.getOwnPropertyDescriptor(I,b);(!R||("get"in R?!I.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return I[b]}}),Object.defineProperty(E,T,R)}:function(E,I,b,T){T===void 0&&(T=b),E[T]=I[b]}),d=this&&this.__exportStar||function(E,I){for(var b in E)b!=="default"&&!Object.prototype.hasOwnProperty.call(I,b)&&f(I,E,b)};Object.defineProperty(l,"__esModule",{value:!0}),l.createOsmChangeXml=l.parseOsmChangeXml=void 0,d(i("./createChangesetComment"),l),d(i("./getChangesetDiff"),l),d(i("./getChangesets"),l),d(i("./uploadChangeset"),l);var u=i("./_parseOsmChangeXml");Object.defineProperty(l,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var w=i("./_createOsmChangeXml");Object.defineProperty(l,"createOsmChangeXml",{enumerable:!0,get:function(){return w.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,l){var f=this&&this.__awaiter||function(E,I,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function se(G){try{Z(T.next(G))}catch(ae){j(ae)}}function K(G){try{Z(T.throw(G))}catch(ae){j(ae)}}function Z(G){G.done?L(G.value):R(G.value).then(se,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.uploadChangeset=void 0;const d=i("../_osmFetch"),u=i("./_createOsmChangeXml");function w(E,I){return f(this,void 0,void 0,function*(){const b=(0,u.createChangesetMetaXml)(E),T=+(yield(0,d.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,u.createOsmChangeXml)(T,I);return yield(0,d.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,d.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}l.uploadChangeset=w},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function se(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getCapabilities=void 0;const d=i("./_osmFetch");function u(){var w;return f(this,void 0,void 0,function*(){const E=yield(0,d.osmFetch)("/capabilities");return{limits:{maxArea:+E.osm[0].api[0].area[0].$.maximum,maxNoteArea:+E.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+E.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+E.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+E.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+E.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((w=E.osm[0].policy[0].imagery[0].blacklist)===null||w===void 0?void 0:w.map(b=>b.$.regex))||[]}}})}l.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,a,l){var f=this&&this.__awaiter||function(R,L,j,se){function K(Z){return Z instanceof j?Z:new j(function(G){G(Z)})}return new(j||(j=Promise))(function(Z,G){function ae(P){try{U(se.next(P))}catch(z){G(z)}}function X(P){try{U(se.throw(P))}catch(z){G(z)}}function U(P){P.done?Z(P.value):K(P.value).then(ae,X)}U((se=se.apply(R,L||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getRelationsForElement=l.getWaysForNode=l.getFeatureHistory=l.getFeatureAtVersion=l.getFeatures=l.getFeature=void 0;const d=i("./_osmFetch");function u(R,L,j){return f(this,void 0,void 0,function*(){const se=j&&R!=="node"?"/full":"";return(yield(0,d.osmFetch)(`/0.6/${R}/${L}${se}.json`)).elements})}l.getFeature=u;function w(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}s.json?${R}s=${L.join(",")}`)).elements})}l.getFeatures=w;function E(R,L,j){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/${j}.json`)).elements[0]})}l.getFeatureAtVersion=E;function I(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/history.json`)).elements})}l.getFeatureHistory=I;function b(R){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}l.getWaysForNode=b;function T(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/relations.json`)).elements})}l.getRelationsForElement=T},{"./_osmFetch":16}],27:[function(i,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function se(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getMapData=void 0;const d=i("./_osmFetch");function u(w){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/map.json",{bbox:w})).elements})}l.getMapData=u},{"./_osmFetch":16}],28:[function(i,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function se(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getUIdFromDisplayName=void 0;const d=i("./changesets");function u(w){return f(this,void 0,void 0,function*(){const E=yield(0,d.listChangesets)({display_name:w});if(!E.length)throw new Error("Could not get uid because the user has never edited the map");return E[0].uid})}l.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,a,l){var f=this&&this.__awaiter||function(E,I,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function se(G){try{Z(T.next(G))}catch(ae){j(ae)}}function K(G){try{Z(T.throw(G))}catch(ae){j(ae)}}function Z(G){G.done?L(G.value):R(G.value).then(se,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getUsers=l.getUser=void 0;const d=i("./_osmFetch");function u(E){return f(this,void 0,void 0,function*(){const I=yield(0,d.osmFetch)(`/0.6/user/${E==="me"?"details":E}.json`);return Object.assign(Object.assign({},I.user),{account_created:new Date(I.user.account_created)})})}l.getUser=u;function w(E){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/users",{users:E})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}l.getUsers=w},{"./_osmFetch":16}],30:[function(i,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(i("./changesets"),l),d(i("./notes"),l),d(i("./getCapabilities"),l),d(i("./getFeature"),l),d(i("./getMapData"),l),d(i("./getUIdFromDisplayName"),l),d(i("./getUser"),l)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,l){var f=this&&this.__awaiter||function(T,R,L,j){function se(K){return K instanceof L?K:new L(function(Z){Z(K)})}return new(L||(L=Promise))(function(K,Z){function G(U){try{X(j.next(U))}catch(P){Z(P)}}function ae(U){try{X(j.throw(U))}catch(P){Z(P)}}function X(U){U.done?K(U.value):se(U.value).then(G,ae)}X((j=j.apply(T,R||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getNote=l.getNotesForArea=l.getNotesForQuery=void 0;const d=i("../_osmFetch"),u=T=>{const[R,L]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:L,lng:R}})};function w(T,R){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/notes${R?"/search":""}.json`,T)).features.map(u)})}function E(T){return w(T,!0)}l.getNotesForQuery=E;function I(T){return w({bbox:T},!1)}l.getNotesForArea=I;function b(T){return f(this,void 0,void 0,function*(){const R=yield(0,d.osmFetch)(`/0.6/notes/${T}.json`);return u(R)})}l.getNote=b},{"../_osmFetch":16}],32:[function(i,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(i("./getNotes"),l),d(i("./noteActions"),l)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,l){var f=this&&this.__awaiter||function(I,b,T,R){function L(j){return j instanceof T?j:new T(function(se){se(j)})}return new(T||(T=Promise))(function(j,se){function K(ae){try{G(R.next(ae))}catch(X){se(X)}}function Z(ae){try{G(R.throw(ae))}catch(X){se(X)}}function G(ae){ae.done?j(ae.value):L(ae.value).then(K,Z)}G((R=R.apply(I,b||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.reopenNote=l.commentOnNote=l.createNote=void 0;const d=i("../_osmFetch");function u(I,b,T){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)("/0.6/notes",{lat:I,lon:b,text:T})})}l.createNote=u;function w(I,b){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${I}/comment`,{text:b})})}l.commentOnNote=w;function E(I,b){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${I}/reopen`,{text:b})})}l.reopenNote=E},{"../_osmFetch":16}],34:[function(i,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.createPopup=void 0;function f(d){let u=!1;return new Promise((w,E)=>{const[I,b]=[600,550],T=Object.entries({width:I,height:b,left:window.screen.width/2-I/2,top:window.screen.height/2-b/2}).map(([j,se])=>`${j}=${se}`).join(","),R=window.open("about:blank","oauth_window",T);if(!R)throw new Error("Popup was blocked");R.location=d,window.authComplete=j=>{w(j),u=!0};const L=setInterval(()=>{R.closed&&(u||E(new Error("Cancelled")),clearInterval(L))},500)})}l.createPopup=f},{}],35:[function(i,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function se(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.exchangeCode=void 0;const d=i("./helpers");function u(w,{options:E,pkceVerifier:I,state:b}){return f(this,void 0,void 0,function*(){const T=new URL(w).searchParams,R=T.get("error_description"),L=T.get("code"),j=T.get("state");if(R)throw new Error(R);if(!L)throw new Error("No code in OAuth response");if(!I||!b)throw new Error("No login in progress");if(b!==j)throw new Error("State Mismatch");const se={grant_type:"authorization_code",code:L,redirect_uri:E.redirectUrl,client_id:E.clientId,code_verifier:I},K=`${(0,d.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(se).toString()}`,G=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in G)throw new Error(G.error_description);const ae={issuedAt:new Date(G.created_at*1e3).toISOString(),accessToken:G.access_token,scopes:G.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ae)),delete window.authComplete,ae})}l.exchangeCode=u},{"./helpers":36}],36:[function(i,a,l){var f=this&&this.__awaiter||function(I,b,T,R){function L(j){return j instanceof T?j:new T(function(se){se(j)})}return new(T||(T=Promise))(function(j,se){function K(ae){try{G(R.next(ae))}catch(X){se(X)}}function Z(ae){try{G(R.throw(ae))}catch(X){se(X)}}function G(ae){ae.done?j(ae.value):L(ae.value).then(K,Z)}G((R=R.apply(I,b||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getOAuthBaseUrl=l.getRandomString=l.sha256=void 0;const d=i("../config");function u(I){return f(this,void 0,void 0,function*(){const b=new TextEncoder().encode(I),T=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(T))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}l.sha256=u;function w(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(I=>`0${I.toString(16)}`.slice(-2)).join("")}l.getRandomString=w;function E(){let I=(0,d.getConfig)().apiUrl;return I==="https://api.openstreetmap.org"&&(I="https://www.openstreetmap.org"),I}l.getOAuthBaseUrl=E},{"../config":39}],37:[function(i,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(i("./oauth2"),l)},{"./oauth2":38}],38:[function(i,a,l){var f=this&&this.__awaiter||function(R,L,j,se){function K(Z){return Z instanceof j?Z:new j(function(G){G(Z)})}return new(j||(j=Promise))(function(Z,G){function ae(P){try{U(se.next(P))}catch(z){G(z)}}function X(P){try{U(se.throw(P))}catch(z){G(z)}}function U(P){P.done?Z(P.value):K(P.value).then(ae,X)}U((se=se.apply(R,L||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.logout=l.isLoggedIn=l.getAuthToken=l.authReady=l.login=void 0;const d=i("./createPopup"),u=i("./exchangeCode"),w=i("./helpers");function E(R){return f(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const L=(0,w.getRandomString)(),j=(0,w.getRandomString)(),se=yield(0,w.sha256)(j),K={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:L,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:se},Z=`${(0,w.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,G={state:L,pkceVerifier:j,options:R};if(R.mode==="popup"){const ae=yield(0,d.createPopup)(Z);return(0,u.exchangeCode)(ae,G)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(G)),window.location.replace(Z);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}l.login=E,l.authReady=f(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const L=window.location.href,j=localStorage.getItem("__osmAuthTemp");if(new URL(L).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(L),window.close();else if(j)try{const se=JSON.parse(j);yield(0,u.exchangeCode)(L,se),localStorage.removeItem("__osmAuthTemp")}catch(se){console.error("OSM Auth Error",se)}}});const I=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};l.getAuthToken=I;const b=()=>!!(0,l.getAuthToken)();l.isLoggedIn=b;function T(){localStorage.removeItem("__osmAuth")}l.logout=T},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.configure=l.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},d=()=>f;l.getConfig=d;function u(w){Object.assign(f,w)}l.configure=u},{}],40:[function(i,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(i("./api"),l),d(i("./auth"),l),d(i("./config"),l),d(i("./types"),l)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,l){Object.defineProperty(l,"__esModule",{value:!0})},{}],42:[function(i,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}],43:[function(i,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}],44:[function(i,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(i("./changesets"),l),d(i("./features"),l),d(i("./general"),l),d(i("./notes"),l),d(i("./osmPatch"),l),d(i("./user"),l)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}],46:[function(i,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}],47:[function(i,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}]},{},[40])(40)})})(wk);var Da=wk.exports;const bk=()=>{const[e,t]=vt.useState(!1);vt.useEffect(()=>{t(Da.isLoggedIn())},[]);const i=vt.useCallback(()=>{(async()=>(await Da.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Da.isLoggedIn()),window.location.reload()))()},[]),a=vt.useCallback(()=>{(async()=>(Da.logout(),t(!1)))()},[]);return yt.jsx(yt.Fragment,{children:e?yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},d6=()=>{const[e,t]=vt.useState(!1),[i,a]=vt.useState(void 0);return vt.useEffect(()=>{t(Da.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const l=await Da.getUser("me");a(l)})()},[e]),yt.jsx(yt.Fragment,{children:i?yt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):yt.jsx("img",{})})},p6=()=>{const[e,t]=vt.useState(!1),[i,a]=vt.useState(void 0);return vt.useEffect(()=>{t(Da.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const l=await Da.getUser("me");a(l)})()},[e]),yt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[yt.jsxs("div",{children:[yt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?yt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):yt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),yt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[yt.jsx("div",{children:yt.jsx(d6,{})}),yt.jsx("div",{children:yt.jsx(bk,{})})]})]})},Sk=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return yt.jsxs(yt.Fragment,{children:[yt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",yt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},m6=({feature:e})=>yt.jsx(yt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return yt.jsxs("div",{className:t,children:[yt.jsx("span",{className:"underline",children:t})," = ",yt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Bd(e,t,i){return parseInt(e.substr(t,i),16)}function Ek(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function w_(e,t,i){return i=i<0?i+6:i>6?i-6:i,Ek(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function g6(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],l=e[2],f=e[3],d=e[4]||"";t="#"+a+a+l+l+f+f+d+d}return(i==7||i>8)&&(t=e),t}}function y6(e,t,i){let a;if(t==0){const l=Ek(i*255);a=l+l+l}else{const l=i<=.5?i*(t+1):i+t-i*t,f=i*2-l;a=w_(f,l,e*6+2)+w_(f,l,e*6)+w_(f,l,e*6-2)}return"#"+a}function Cd(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],l=a[e*6+.5|0];return i=i<.5?i*l*2:l+(i-.5)*(1-l)*2,y6(e,t,i)}const v6=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},QT={V:"jdenticon_config",n:"config"};var _6={};function x6(e,t){const i=typeof e=="object"&&e||_6[QT.n]||v6[QT.V]||{},a=i.lightness||{},l=i.saturation||{},f="color"in l?l.color:l,d=l.grayscale,u=i.backColor,w=i.padding;function E(b,T){let R=a[b];return R&&R.length>1||(R=T),function(L){return L=R[0]+L*(R[1]-R[0]),L<0?0:L>1?1:L}}function I(b){const T=i.hues;let R;return T&&T.length>0&&(R=T[0|.999*b*T.length]),typeof R=="number"?(R/360%1+1)%1:b}return{W:I,o:typeof f=="number"?f:.5,D:typeof d=="number"?d:0,p:E("color",[.4,.8]),F:E("grayscale",[.3,.9]),G:g6(u),X:typeof e=="number"?e:typeof w=="number"?w:t}}let fg=class{constructor(t,i){this.x=t,this.y=i}};class Tk{constructor(t,i,a,l){this.q=t,this.t=i,this.H=a,this.Y=l}I(t,i,a,l){const f=this.q+this.H,d=this.t+this.H,u=this.Y;return u===1?new fg(f-i-(l||0),this.t+t):u===2?new fg(f-t-(a||0),d-i-(l||0)):u===3?new fg(this.q+i,d-t-(a||0)):new fg(this.q+t,this.t+i)}}const w6=new Tk(0,0,0,0);class b6{constructor(t){this.J=t,this.u=w6}g(t,i){const a=i?-2:2,l=[];for(let f=i?t.length-2:0;f<t.length&&f>=0;f+=a)l.push(this.u.I(t[f],t[f+1]));this.J.g(l)}h(t,i,a,l){const f=this.u.I(t,i,a,a);this.J.h(f,a,l)}i(t,i,a,l,f){this.g([t,i,t+a,i,t+a,i+l,t,i+l],f)}j(t,i,a,l,f,d){const u=[t+a,i,t+a,i+l,t,i+l,t,i];u.splice((f||0)%4*2,2),this.g(u,d)}K(t,i,a,l,f){this.g([t+a/2,i,t+a,i+l/2,t+a/2,i+l,t,i+l/2],f)}}function S6(e,t,i,a){e=e%14;let l,f,d,u,w,E;e?e==1?(d=0|i*.5,u=0|i*.8,t.j(i-d,0,d,u,2)):e==2?(d=0|i/3,t.i(d,d,i-d,i-d)):e==3?(w=i*.1,E=i<6?1:i<8?2:0|i*.25,w=w>1?0|w:w>.5?1:w,t.i(E,E,i-w-E,i-w-E)):e==4?(f=0|i*.15,d=0|i*.5,t.h(i-d-f,i-d-f,d)):e==5?(w=i*.1,E=w*4,E>3&&(E=0|E),t.i(0,0,i,i),t.g([E,E,i-w,E,E+(i-E-w)/2,i-w],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(w=i*.14,E=i<4?1:i<6?2:0|i*.35,w=i<8?w:0|w,t.i(0,0,i,i),t.i(E,E,i-E-w,i-E-w,!0)):e==10?(w=i*.12,E=w*3,t.i(0,0,i,i),t.h(E,E,i-w-E,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(f=i*.25,t.i(0,0,i,i),t.K(f,f,i-f,i-f,!0)):!a&&(f=i*.4,d=i*1.2,t.h(f,f,d)):(l=i*.42,t.g([0,0,i,0,i,i-l*2,i-l,i,0,i]))}function eP(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function E6(e,t){return e=t.W(e),[Cd(e,t.D,t.F(0)),Cd(e,t.o,t.p(.5)),Cd(e,t.D,t.F(1)),Cd(e,t.o,t.p(1)),Cd(e,t.o,t.p(0))]}function T6(e,t,i){const a=x6(i,.08);a.G&&e.m(a.G);let l=e.k;const f=.5+l*a.X|0;l-=f*2;const d=new b6(e),u=0|l/4,w=0|f+l/2-u*2,E=0|f+l/2-u*2;function I(se,K,Z,G,ae){const X=Bd(t,Z,1);let U=G?Bd(t,G,1):0;e.L(T[R[se]]);for(let P=0;P<ae.length;P++)d.u=new Tk(w+ae[P][0]*u,E+ae[P][1]*u,u,U++%4),K(X,d,u,P);e.M()}const b=Bd(t,-7)/268435455,T=E6(b,a),R=[];let L;function j(se){if(se.indexOf(L)>=0){for(let K=0;K<se.length;K++)if(R.indexOf(se[K])>=0)return!0}}for(let se=0;se<3;se++)L=Bd(t,8+se,1)%T.length,(j([0,4])||j([2,3]))&&(L=1),R.push(L);I(0,eP,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),I(1,eP,4,5,[[0,0],[3,0],[3,3],[0,3]]),I(2,S6,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function P6(e){var a=0,l=0,f=encodeURI(e)+"%80",d=[],u,w=[],E=1732584193,I=4023233417,b=~E,T=~I,R=3285377520,L=[E,I,b,T,R],j=0,se="";function K(Z,G){return Z<<G|Z>>>32-G}for(;a<f.length;l++)d[l>>2]=d[l>>2]|(f[a]=="%"?parseInt(f.substring(a+1,a+=3),16):f.charCodeAt(a++))<<(3-(l&3))*8;for(u=((l+7>>6)+1)*16,d[u-1]=l*8-8;j<u;j+=16){for(a=0;a<80;a++)l=K(E,5)+R+(a<20?(I&b^~I&T)+1518500249:a<40?(I^b^T)+1859775393:a<60?(I&b^I&T^b&T)+2400959708:(I^b^T)+3395469782)+(w[a]=a<16?d[j+a]|0:K(w[a-3]^w[a-8]^w[a-14]^w[a-16],1)),R=T,T=b,b=K(I,30),I=E,E=l;L[0]=E=L[0]+E|0,L[1]=I=L[1]+I|0,L[2]=b=L[2]+b|0,L[3]=T=L[3]+T|0,L[4]=R=L[4]+R|0}for(a=0;a<40;a++)se+=(L[a>>3]>>>(7-(a&7))*4&15).toString(16);return se}function A6(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function I6(e){return P6(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function _h(e){return(e*10+.5|0)/10}class C6{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+_h(t[a].x)+" "+_h(t[a].y);this.v+=i+"Z"}h(t,i,a){const l=a?0:1,f=_h(i/2),d=_h(i),u="a"+f+","+f+" 0 1,"+l+" ";this.v+="M"+_h(t.x)+" "+_h(t.y+i/2)+u+d+",0"+u+-d+",0"}}class M6{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Bd(i[2],0)/255:1;this.O.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new C6)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.O.P(i,t[i].v)}}const k6={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class O6{constructor(t){this.k=t,this.C='<svg xmlns="'+k6.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}P(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function F6(e,t,i){const a=new O6(t);return T6(new M6(a),A6(e)||I6(e),i),a.toString()}const R6=({feature:e,size:t})=>e.properties===null?null:yt.jsx(yt.Fragment,{children:e.properties.userIconHref.length>0?yt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):yt.jsx("span",{dangerouslySetInnerHTML:{__html:F6(e.properties.user||"noname",t)}})}),j6=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?yt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var z6={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const L6=({viewState:e})=>{const[t,i]=vt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return vt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),yt.jsx(yt.Fragment,{children:e&&t&&yt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[yt.jsx(yu,{icon:z6,style:{padding:"0px 3px"}}),yt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var Pk={};class Xi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let l=0;l<this._n&&l<32;l++){const f=i[l],d=t+f,u=Math.abs(t)<Math.abs(f)?t-(d-f):f-(d-t);u&&(i[a++]=u),t=d}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,l,f,d=0;if(i>0){for(d=t[--i];i>0&&(a=d,l=t[--i],d=a+l,f=l-(d-a),!f););i>0&&(f<0&&t[i-1]<0||f>0&&t[i-1]>0)&&(l=f*2,a=d+l,l==a-d&&(d=a))}return d}}function*B6(e){for(const t of e)yield*t}function Ak(e){return Array.from(B6(e))}function Gh(e,t,i){e=+e,t=+t,i=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+i;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/i))|0,f=new Array(l);++a<l;)f[a]=e+a*i;return f}var dr=1e-6,Fp=1e-12,Cr=Math.PI,Nn=Cr/2,My=Cr/4,uo=Cr*2,sn=180/Cr,yr=Cr/180,Nr=Math.abs,Af=Math.atan,co=Math.atan2,ar=Math.cos,dg=Math.ceil,Ik=Math.exp,wx=Math.hypot,ky=Math.log,b_=Math.pow,tr=Math.sin,fa=Math.sign||function(e){return e>0?1:e<0?-1:0},wi=Math.sqrt,Ib=Math.tan;function Ck(e){return e>1?0:e<-1?Cr:Math.acos(e)}function ho(e){return e>1?Nn:e<-1?-Nn:Math.asin(e)}function tP(e){return(e=tr(e/2))*e}function On(){}function Oy(e,t){e&&nP.hasOwnProperty(e.type)&&nP[e.type](e,t)}var rP={Feature:function(e,t){Oy(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,l=i.length;++a<l;)Oy(i[a].geometry,t)}},nP={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,l=i.length;++a<l;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){bx(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,l=i.length;++a<l;)bx(i[a],t,0)},Polygon:function(e,t){iP(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,l=i.length;++a<l;)iP(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,l=i.length;++a<l;)Oy(i[a],t)}};function bx(e,t,i){var a=-1,l=e.length-i,f;for(t.lineStart();++a<l;)f=e[a],t.point(f[0],f[1],f[2]);t.lineEnd()}function iP(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)bx(e[i],t,1);t.polygonEnd()}function La(e,t){e&&rP.hasOwnProperty(e.type)?rP[e.type](e,t):Oy(e,t)}var Fy=new Xi,Ry=new Xi,Mk,kk,Sx,Ex,Tx,Is={point:On,lineStart:On,lineEnd:On,polygonStart:function(){Fy=new Xi,Is.lineStart=D6,Is.lineEnd=N6},polygonEnd:function(){var e=+Fy;Ry.add(e<0?uo+e:e),this.lineStart=this.lineEnd=this.point=On},sphere:function(){Ry.add(uo)}};function D6(){Is.point=$6}function N6(){Ok(Mk,kk)}function $6(e,t){Is.point=Ok,Mk=e,kk=t,e*=yr,t*=yr,Sx=e,Ex=ar(t=t/2+My),Tx=tr(t)}function Ok(e,t){e*=yr,t*=yr,t=t/2+My;var i=e-Sx,a=i>=0?1:-1,l=a*i,f=ar(t),d=tr(t),u=Tx*d,w=Ex*f+u*ar(l),E=u*a*tr(l);Fy.add(co(E,w)),Sx=e,Ex=f,Tx=d}function U6(e){return Ry=new Xi,La(e,Is),Ry*2}function jy(e){return[co(e[1],e[0]),ho(e[2])]}function wc(e){var t=e[0],i=e[1],a=ar(i);return[a*ar(t),a*tr(t),tr(i)]}function pg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function df(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function S_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function mg(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function zy(e){var t=wi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Mn,Eo,Ln,Wo,ic,Fk,Rk,ef,np,ru,gl,nl={point:Px,lineStart:oP,lineEnd:aP,polygonStart:function(){nl.point=zk,nl.lineStart=V6,nl.lineEnd=G6,np=new Xi,Is.polygonStart()},polygonEnd:function(){Is.polygonEnd(),nl.point=Px,nl.lineStart=oP,nl.lineEnd=aP,Fy<0?(Mn=-(Ln=180),Eo=-(Wo=90)):np>dr?Wo=90:np<-dr&&(Eo=-90),gl[0]=Mn,gl[1]=Ln},sphere:function(){Mn=-(Ln=180),Eo=-(Wo=90)}};function Px(e,t){ru.push(gl=[Mn=e,Ln=e]),t<Eo&&(Eo=t),t>Wo&&(Wo=t)}function jk(e,t){var i=wc([e*yr,t*yr]);if(ef){var a=df(ef,i),l=[a[1],-a[0],0],f=df(l,a);zy(f),f=jy(f);var d=e-ic,u=d>0?1:-1,w=f[0]*sn*u,E,I=Nr(d)>180;I^(u*ic<w&&w<u*e)?(E=f[1]*sn,E>Wo&&(Wo=E)):(w=(w+360)%360-180,I^(u*ic<w&&w<u*e)?(E=-f[1]*sn,E<Eo&&(Eo=E)):(t<Eo&&(Eo=t),t>Wo&&(Wo=t))),I?e<ic?Go(Mn,e)>Go(Mn,Ln)&&(Ln=e):Go(e,Ln)>Go(Mn,Ln)&&(Mn=e):Ln>=Mn?(e<Mn&&(Mn=e),e>Ln&&(Ln=e)):e>ic?Go(Mn,e)>Go(Mn,Ln)&&(Ln=e):Go(e,Ln)>Go(Mn,Ln)&&(Mn=e)}else ru.push(gl=[Mn=e,Ln=e]);t<Eo&&(Eo=t),t>Wo&&(Wo=t),ef=i,ic=e}function oP(){nl.point=jk}function aP(){gl[0]=Mn,gl[1]=Ln,nl.point=Px,ef=null}function zk(e,t){if(ef){var i=e-ic;np.add(Nr(i)>180?i+(i>0?360:-360):i)}else Fk=e,Rk=t;Is.point(e,t),jk(e,t)}function V6(){Is.lineStart()}function G6(){zk(Fk,Rk),Is.lineEnd(),Nr(np)>dr&&(Mn=-(Ln=180)),gl[0]=Mn,gl[1]=Ln,ef=null}function Go(e,t){return(t-=e)<0?t+360:t}function W6(e,t){return e[0]-t[0]}function sP(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function H6(e){var t,i,a,l,f,d,u;if(Wo=Ln=-(Mn=Eo=1/0),ru=[],La(e,nl),i=ru.length){for(ru.sort(W6),t=1,a=ru[0],f=[a];t<i;++t)l=ru[t],sP(a,l[0])||sP(a,l[1])?(Go(a[0],l[1])>Go(a[0],a[1])&&(a[1]=l[1]),Go(l[0],a[1])>Go(a[0],a[1])&&(a[0]=l[0])):f.push(a=l);for(d=-1/0,i=f.length-1,t=0,a=f[i];t<=i;a=l,++t)l=f[t],(u=Go(a[1],l[0]))>d&&(d=u,Mn=l[0],Ln=a[1])}return ru=gl=null,Mn===1/0||Eo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mn,Eo],[Ln,Wo]]}var Dd,Ly,By,Dy,Ny,$y,Uy,Vy,Ax,Ix,Cx,Lk,Bk,oo,ao,so,Na={sphere:On,point:Cb,lineStart:lP,lineEnd:uP,polygonStart:function(){Na.lineStart=X6,Na.lineEnd=K6},polygonEnd:function(){Na.lineStart=lP,Na.lineEnd=uP}};function Cb(e,t){e*=yr,t*=yr;var i=ar(t);qp(i*ar(e),i*tr(e),tr(t))}function qp(e,t,i){++Dd,By+=(e-By)/Dd,Dy+=(t-Dy)/Dd,Ny+=(i-Ny)/Dd}function lP(){Na.point=Z6}function Z6(e,t){e*=yr,t*=yr;var i=ar(t);oo=i*ar(e),ao=i*tr(e),so=tr(t),Na.point=q6,qp(oo,ao,so)}function q6(e,t){e*=yr,t*=yr;var i=ar(t),a=i*ar(e),l=i*tr(e),f=tr(t),d=co(wi((d=ao*f-so*l)*d+(d=so*a-oo*f)*d+(d=oo*l-ao*a)*d),oo*a+ao*l+so*f);Ly+=d,$y+=d*(oo+(oo=a)),Uy+=d*(ao+(ao=l)),Vy+=d*(so+(so=f)),qp(oo,ao,so)}function uP(){Na.point=Cb}function X6(){Na.point=Y6}function K6(){Dk(Lk,Bk),Na.point=Cb}function Y6(e,t){Lk=e,Bk=t,e*=yr,t*=yr,Na.point=Dk;var i=ar(t);oo=i*ar(e),ao=i*tr(e),so=tr(t),qp(oo,ao,so)}function Dk(e,t){e*=yr,t*=yr;var i=ar(t),a=i*ar(e),l=i*tr(e),f=tr(t),d=ao*f-so*l,u=so*a-oo*f,w=oo*l-ao*a,E=wx(d,u,w),I=ho(E),b=E&&-I/E;Ax.add(b*d),Ix.add(b*u),Cx.add(b*w),Ly+=I,$y+=I*(oo+(oo=a)),Uy+=I*(ao+(ao=l)),Vy+=I*(so+(so=f)),qp(oo,ao,so)}function J6(e){Dd=Ly=By=Dy=Ny=$y=Uy=Vy=0,Ax=new Xi,Ix=new Xi,Cx=new Xi,La(e,Na);var t=+Ax,i=+Ix,a=+Cx,l=wx(t,i,a);return l<Fp&&(t=$y,i=Uy,a=Vy,Ly<dr&&(t=By,i=Dy,a=Ny),l=wx(t,i,a),l<Fp)?[NaN,NaN]:[co(i,t)*sn,ho(a/l)*sn]}function xh(e){return function(){return e}}function Mx(e,t){function i(a,l){return a=e(a,l),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,l){return a=t.invert(a,l),a&&e.invert(a[0],a[1])}),i}function kx(e,t){return[Nr(e)>Cr?e+Math.round(-e/uo)*uo:e,t]}kx.invert=kx;function Mb(e,t,i){return(e%=uo)?t||i?Mx(hP(e),fP(t,i)):hP(e):t||i?fP(t,i):kx}function cP(e){return function(t,i){return t+=e,[t>Cr?t-uo:t<-Cr?t+uo:t,i]}}function hP(e){var t=cP(e);return t.invert=cP(-e),t}function fP(e,t){var i=ar(e),a=tr(e),l=ar(t),f=tr(t);function d(u,w){var E=ar(w),I=ar(u)*E,b=tr(u)*E,T=tr(w),R=T*i+I*a;return[co(b*l-R*f,I*i-T*a),ho(R*l+b*f)]}return d.invert=function(u,w){var E=ar(w),I=ar(u)*E,b=tr(u)*E,T=tr(w),R=T*l-b*f;return[co(b*l+T*f,I*i+R*a),ho(R*i-I*a)]},d}function Nk(e){e=Mb(e[0]*yr,e[1]*yr,e.length>2?e[2]*yr:0);function t(i){return i=e(i[0]*yr,i[1]*yr),i[0]*=sn,i[1]*=sn,i}return t.invert=function(i){return i=e.invert(i[0]*yr,i[1]*yr),i[0]*=sn,i[1]*=sn,i},t}function $k(e,t,i,a,l,f){if(i){var d=ar(t),u=tr(t),w=a*i;l==null?(l=t+a*uo,f=t-w/2):(l=dP(d,l),f=dP(d,f),(a>0?l<f:l>f)&&(l+=a*uo));for(var E,I=l;a>0?I>f:I<f;I-=w)E=jy([d,-u*ar(I),-u*tr(I)]),e.point(E[0],E[1])}}function dP(e,t){t=wc(t),t[0]-=e,zy(t);var i=Ck(-t[1]);return((-t[2]<0?-i:i)+uo-dr)%uo}function Q6(){var e=xh([0,0]),t=xh(90),i=xh(6),a,l,f={point:d};function d(w,E){a.push(w=l(w,E)),w[0]*=sn,w[1]*=sn}function u(){var w=e.apply(this,arguments),E=t.apply(this,arguments)*yr,I=i.apply(this,arguments)*yr;return a=[],l=Mb(-w[0]*yr,-w[1]*yr,0).invert,$k(f,E,I,1),w={type:"Polygon",coordinates:[a]},a=l=null,w}return u.center=function(w){return arguments.length?(e=typeof w=="function"?w:xh([+w[0],+w[1]]),u):e},u.radius=function(w){return arguments.length?(t=typeof w=="function"?w:xh(+w),u):t},u.precision=function(w){return arguments.length?(i=typeof w=="function"?w:xh(+w),u):i},u}function Uk(){var e=[],t;return{point:function(i,a,l){t.push([i,a,l])},lineStart:function(){e.push(t=[])},lineEnd:On,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Dg(e,t){return Nr(e[0]-t[0])<dr&&Nr(e[1]-t[1])<dr}function gg(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function Vk(e,t,i,a,l){var f=[],d=[],u,w;if(e.forEach(function(L){if(!((j=L.length-1)<=0)){var j,se=L[0],K=L[j],Z;if(Dg(se,K)){if(!se[2]&&!K[2]){for(l.lineStart(),u=0;u<j;++u)l.point((se=L[u])[0],se[1]);l.lineEnd();return}K[0]+=2*dr}f.push(Z=new gg(se,L,null,!0)),d.push(Z.o=new gg(se,null,Z,!1)),f.push(Z=new gg(K,L,null,!1)),d.push(Z.o=new gg(K,null,Z,!0))}}),!!f.length){for(d.sort(t),pP(f),pP(d),u=0,w=d.length;u<w;++u)d[u].e=i=!i;for(var E=f[0],I,b;;){for(var T=E,R=!0;T.v;)if((T=T.n)===E)return;I=T.z,l.lineStart();do{if(T.v=T.o.v=!0,T.e){if(R)for(u=0,w=I.length;u<w;++u)l.point((b=I[u])[0],b[1]);else a(T.x,T.n.x,1,l);T=T.n}else{if(R)for(I=T.p.z,u=I.length-1;u>=0;--u)l.point((b=I[u])[0],b[1]);else a(T.x,T.p.x,-1,l);T=T.p}T=T.o,I=T.z,R=!R}while(!T.v);l.lineEnd()}}}function pP(e){if(t=e.length){for(var t,i=0,a=e[0],l;++i<t;)a.n=l=e[i],l.p=a,a=l;a.n=l=e[0],l.p=a}}function E_(e){return Nr(e[0])<=Cr?e[0]:fa(e[0])*((Nr(e[0])+Cr)%uo-Cr)}function Gk(e,t){var i=E_(t),a=t[1],l=tr(a),f=[tr(i),-ar(i),0],d=0,u=0,w=new Xi;l===1?a=Nn+dr:l===-1&&(a=-Nn-dr);for(var E=0,I=e.length;E<I;++E)if(T=(b=e[E]).length)for(var b,T,R=b[T-1],L=E_(R),j=R[1]/2+My,se=tr(j),K=ar(j),Z=0;Z<T;++Z,L=ae,se=U,K=P,R=G){var G=b[Z],ae=E_(G),X=G[1]/2+My,U=tr(X),P=ar(X),z=ae-L,B=z>=0?1:-1,Q=B*z,q=Q>Cr,ve=se*U;if(w.add(co(ve*B*tr(Q),K*P+ve*ar(Q))),d+=q?z+B*uo:z,q^L>=i^ae>=i){var ye=df(wc(R),wc(G));zy(ye);var fe=df(f,ye);zy(fe);var oe=(q^z>=0?-1:1)*ho(fe[2]);(a>oe||a===oe&&(ye[0]||ye[1]))&&(u+=q^z>=0?1:-1)}}return(d<-dr||d<dr&&w<-Fp)^u&1}function Wk(e,t,i,a){return function(l){var f=t(l),d=Uk(),u=t(d),w=!1,E,I,b,T={point:R,lineStart:j,lineEnd:se,polygonStart:function(){T.point=K,T.lineStart=Z,T.lineEnd=G,I=[],E=[]},polygonEnd:function(){T.point=R,T.lineStart=j,T.lineEnd=se,I=Ak(I);var ae=Gk(E,a);I.length?(w||(l.polygonStart(),w=!0),Vk(I,tB,ae,i,l)):ae&&(w||(l.polygonStart(),w=!0),l.lineStart(),i(null,null,1,l),l.lineEnd()),w&&(l.polygonEnd(),w=!1),I=E=null},sphere:function(){l.polygonStart(),l.lineStart(),i(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function R(ae,X){e(ae,X)&&l.point(ae,X)}function L(ae,X){f.point(ae,X)}function j(){T.point=L,f.lineStart()}function se(){T.point=R,f.lineEnd()}function K(ae,X){b.push([ae,X]),u.point(ae,X)}function Z(){u.lineStart(),b=[]}function G(){K(b[0][0],b[0][1]),u.lineEnd();var ae=u.clean(),X=d.result(),U,P=X.length,z,B,Q;if(b.pop(),E.push(b),b=null,!!P){if(ae&1){if(B=X[0],(z=B.length-1)>0){for(w||(l.polygonStart(),w=!0),l.lineStart(),U=0;U<z;++U)l.point((Q=B[U])[0],Q[1]);l.lineEnd()}return}P>1&&ae&2&&X.push(X.pop().concat(X.shift())),I.push(X.filter(eB))}}return T}}function eB(e){return e.length>1}function tB(e,t){return((e=e.x)[0]<0?e[1]-Nn-dr:Nn-e[1])-((t=t.x)[0]<0?t[1]-Nn-dr:Nn-t[1])}const Ox=Wk(function(){return!0},rB,iB,[-Cr,-Nn]);function rB(e){var t=NaN,i=NaN,a=NaN,l;return{lineStart:function(){e.lineStart(),l=1},point:function(f,d){var u=f>0?Cr:-Cr,w=Nr(f-t);Nr(w-Cr)<dr?(e.point(t,i=(i+d)/2>0?Nn:-Nn),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(f,i),l=0):a!==u&&w>=Cr&&(Nr(t-a)<dr&&(t-=a*dr),Nr(f-u)<dr&&(f-=u*dr),i=nB(t,i,f,d),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),l=0),e.point(t=f,i=d),a=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-l}}}function nB(e,t,i,a){var l,f,d=tr(e-i);return Nr(d)>dr?Af((tr(t)*(f=ar(a))*tr(i)-tr(a)*(l=ar(t))*tr(e))/(l*f*d)):(t+a)/2}function iB(e,t,i,a){var l;if(e==null)l=i*Nn,a.point(-Cr,l),a.point(0,l),a.point(Cr,l),a.point(Cr,0),a.point(Cr,-l),a.point(0,-l),a.point(-Cr,-l),a.point(-Cr,0),a.point(-Cr,l);else if(Nr(e[0]-t[0])>dr){var f=e[0]<t[0]?Cr:-Cr;l=i*f/2,a.point(-f,l),a.point(0,l),a.point(f,l)}else a.point(t[0],t[1])}function Hk(e){var t=ar(e),i=6*yr,a=t>0,l=Nr(t)>dr;function f(I,b,T,R){$k(R,e,i,T,I,b)}function d(I,b){return ar(I)*ar(b)>t}function u(I){var b,T,R,L,j;return{lineStart:function(){L=R=!1,j=1},point:function(se,K){var Z=[se,K],G,ae=d(se,K),X=a?ae?0:E(se,K):ae?E(se+(se<0?Cr:-Cr),K):0;if(!b&&(L=R=ae)&&I.lineStart(),ae!==R&&(G=w(b,Z),(!G||Dg(b,G)||Dg(Z,G))&&(Z[2]=1)),ae!==R)j=0,ae?(I.lineStart(),G=w(Z,b),I.point(G[0],G[1])):(G=w(b,Z),I.point(G[0],G[1],2),I.lineEnd()),b=G;else if(l&&b&&a^ae){var U;!(X&T)&&(U=w(Z,b,!0))&&(j=0,a?(I.lineStart(),I.point(U[0][0],U[0][1]),I.point(U[1][0],U[1][1]),I.lineEnd()):(I.point(U[1][0],U[1][1]),I.lineEnd(),I.lineStart(),I.point(U[0][0],U[0][1],3)))}ae&&(!b||!Dg(b,Z))&&I.point(Z[0],Z[1]),b=Z,R=ae,T=X},lineEnd:function(){R&&I.lineEnd(),b=null},clean:function(){return j|(L&&R)<<1}}}function w(I,b,T){var R=wc(I),L=wc(b),j=[1,0,0],se=df(R,L),K=pg(se,se),Z=se[0],G=K-Z*Z;if(!G)return!T&&I;var ae=t*K/G,X=-t*Z/G,U=df(j,se),P=mg(j,ae),z=mg(se,X);S_(P,z);var B=U,Q=pg(P,B),q=pg(B,B),ve=Q*Q-q*(pg(P,P)-1);if(!(ve<0)){var ye=wi(ve),fe=mg(B,(-Q-ye)/q);if(S_(fe,P),fe=jy(fe),!T)return fe;var oe=I[0],he=b[0],J=I[1],re=b[1],de;he<oe&&(de=oe,oe=he,he=de);var we=he-oe,Pe=Nr(we-Cr)<dr,Ne=Pe||we<dr;if(!Pe&&re<J&&(de=J,J=re,re=de),Ne?Pe?J+re>0^fe[1]<(Nr(fe[0]-oe)<dr?J:re):J<=fe[1]&&fe[1]<=re:we>Cr^(oe<=fe[0]&&fe[0]<=he)){var Ie=mg(B,(-Q+ye)/q);return S_(Ie,P),[fe,jy(Ie)]}}}function E(I,b){var T=a?e:Cr-e,R=0;return I<-T?R|=1:I>T&&(R|=2),b<-T?R|=4:b>T&&(R|=8),R}return Wk(d,u,f,a?[0,-e]:[-Cr,e-Cr])}function oB(e,t,i,a,l,f){var d=e[0],u=e[1],w=t[0],E=t[1],I=0,b=1,T=w-d,R=E-u,L;if(L=i-d,!(!T&&L>0)){if(L/=T,T<0){if(L<I)return;L<b&&(b=L)}else if(T>0){if(L>b)return;L>I&&(I=L)}if(L=l-d,!(!T&&L<0)){if(L/=T,T<0){if(L>b)return;L>I&&(I=L)}else if(T>0){if(L<I)return;L<b&&(b=L)}if(L=a-u,!(!R&&L>0)){if(L/=R,R<0){if(L<I)return;L<b&&(b=L)}else if(R>0){if(L>b)return;L>I&&(I=L)}if(L=f-u,!(!R&&L<0)){if(L/=R,R<0){if(L>b)return;L>I&&(I=L)}else if(R>0){if(L<I)return;L<b&&(b=L)}return I>0&&(e[0]=d+I*T,e[1]=u+I*R),b<1&&(t[0]=d+b*T,t[1]=u+b*R),!0}}}}}var Nd=1e9,yg=-Nd;function z0(e,t,i,a){function l(E,I){return e<=E&&E<=i&&t<=I&&I<=a}function f(E,I,b,T){var R=0,L=0;if(E==null||(R=d(E,b))!==(L=d(I,b))||w(E,I)<0^b>0)do T.point(R===0||R===3?e:i,R>1?a:t);while((R=(R+b+4)%4)!==L);else T.point(I[0],I[1])}function d(E,I){return Nr(E[0]-e)<dr?I>0?0:3:Nr(E[0]-i)<dr?I>0?2:1:Nr(E[1]-t)<dr?I>0?1:0:I>0?3:2}function u(E,I){return w(E.x,I.x)}function w(E,I){var b=d(E,1),T=d(I,1);return b!==T?b-T:b===0?I[1]-E[1]:b===1?E[0]-I[0]:b===2?E[1]-I[1]:I[0]-E[0]}return function(E){var I=E,b=Uk(),T,R,L,j,se,K,Z,G,ae,X,U,P={point:z,lineStart:ve,lineEnd:ye,polygonStart:Q,polygonEnd:q};function z(oe,he){l(oe,he)&&I.point(oe,he)}function B(){for(var oe=0,he=0,J=R.length;he<J;++he)for(var re=R[he],de=1,we=re.length,Pe=re[0],Ne,Ie,Oe=Pe[0],Ze=Pe[1];de<we;++de)Ne=Oe,Ie=Ze,Pe=re[de],Oe=Pe[0],Ze=Pe[1],Ie<=a?Ze>a&&(Oe-Ne)*(a-Ie)>(Ze-Ie)*(e-Ne)&&++oe:Ze<=a&&(Oe-Ne)*(a-Ie)<(Ze-Ie)*(e-Ne)&&--oe;return oe}function Q(){I=b,T=[],R=[],U=!0}function q(){var oe=B(),he=U&&oe,J=(T=Ak(T)).length;(he||J)&&(E.polygonStart(),he&&(E.lineStart(),f(null,null,1,E),E.lineEnd()),J&&Vk(T,u,oe,f,E),E.polygonEnd()),I=E,T=R=L=null}function ve(){P.point=fe,R&&R.push(L=[]),X=!0,ae=!1,Z=G=NaN}function ye(){T&&(fe(j,se),K&&ae&&b.rejoin(),T.push(b.result())),P.point=z,ae&&I.lineEnd()}function fe(oe,he){var J=l(oe,he);if(R&&L.push([oe,he]),X)j=oe,se=he,K=J,X=!1,J&&(I.lineStart(),I.point(oe,he));else if(J&&ae)I.point(oe,he);else{var re=[Z=Math.max(yg,Math.min(Nd,Z)),G=Math.max(yg,Math.min(Nd,G))],de=[oe=Math.max(yg,Math.min(Nd,oe)),he=Math.max(yg,Math.min(Nd,he))];oB(re,de,e,t,i,a)?(ae||(I.lineStart(),I.point(re[0],re[1])),I.point(de[0],de[1]),J||I.lineEnd(),U=!1):J&&(I.lineStart(),I.point(oe,he),U=!1)}Z=oe,G=he,ae=J}return P}}function aB(){var e=0,t=0,i=960,a=500,l,f,d;return d={stream:function(u){return l&&f===u?l:l=z0(e,t,i,a)(f=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],a=+u[1][1],l=f=null,d):[[e,t],[i,a]]}}}var Fx,Rx,Ng,$g,pf={sphere:On,point:On,lineStart:sB,lineEnd:On,polygonStart:On,polygonEnd:On};function sB(){pf.point=uB,pf.lineEnd=lB}function lB(){pf.point=pf.lineEnd=On}function uB(e,t){e*=yr,t*=yr,Rx=e,Ng=tr(t),$g=ar(t),pf.point=cB}function cB(e,t){e*=yr,t*=yr;var i=tr(t),a=ar(t),l=Nr(e-Rx),f=ar(l),d=tr(l),u=a*d,w=$g*i-Ng*a*f,E=Ng*i+$g*a*f;Fx.add(co(wi(u*u+w*w),E)),Rx=e,Ng=i,$g=a}function Zk(e){return Fx=new Xi,La(e,pf),+Fx}var jx=[null,null],hB={type:"LineString",coordinates:jx};function Gy(e,t){return jx[0]=e,jx[1]=t,Zk(hB)}var mP={Feature:function(e,t){return Wy(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,l=i.length;++a<l;)if(Wy(i[a].geometry,t))return!0;return!1}},gP={Sphere:function(){return!0},Point:function(e,t){return yP(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,l=i.length;++a<l;)if(yP(i[a],t))return!0;return!1},LineString:function(e,t){return vP(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,l=i.length;++a<l;)if(vP(i[a],t))return!0;return!1},Polygon:function(e,t){return _P(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,l=i.length;++a<l;)if(_P(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,l=i.length;++a<l;)if(Wy(i[a],t))return!0;return!1}};function Wy(e,t){return e&&gP.hasOwnProperty(e.type)?gP[e.type](e,t):!1}function yP(e,t){return Gy(e,t)===0}function vP(e,t){for(var i,a,l,f=0,d=e.length;f<d;f++){if(a=Gy(e[f],t),a===0||f>0&&(l=Gy(e[f],e[f-1]),l>0&&i<=l&&a<=l&&(i+a-l)*(1-Math.pow((i-a)/l,2))<Fp*l))return!0;i=a}return!1}function _P(e,t){return!!Gk(e.map(fB),qk(t))}function fB(e){return e=e.map(qk),e.pop(),e}function qk(e){return[e[0]*yr,e[1]*yr]}function dB(e,t){return(e&&mP.hasOwnProperty(e.type)?mP[e.type]:Wy)(e,t)}function xP(e,t,i){var a=Gh(e,t-dr,i).concat(t);return function(l){return a.map(function(f){return[l,f]})}}function wP(e,t,i){var a=Gh(e,t-dr,i).concat(t);return function(l){return a.map(function(f){return[f,l]})}}function Xk(){var e,t,i,a,l,f,d,u,w=10,E=w,I=90,b=360,T,R,L,j,se=2.5;function K(){return{type:"MultiLineString",coordinates:Z()}}function Z(){return Gh(dg(a/I)*I,i,I).map(L).concat(Gh(dg(u/b)*b,d,b).map(j)).concat(Gh(dg(t/w)*w,e,w).filter(function(G){return Nr(G%I)>dr}).map(T)).concat(Gh(dg(f/E)*E,l,E).filter(function(G){return Nr(G%b)>dr}).map(R))}return K.lines=function(){return Z().map(function(G){return{type:"LineString",coordinates:G}})},K.outline=function(){return{type:"Polygon",coordinates:[L(a).concat(j(d).slice(1),L(i).reverse().slice(1),j(u).reverse().slice(1))]}},K.extent=function(G){return arguments.length?K.extentMajor(G).extentMinor(G):K.extentMinor()},K.extentMajor=function(G){return arguments.length?(a=+G[0][0],i=+G[1][0],u=+G[0][1],d=+G[1][1],a>i&&(G=a,a=i,i=G),u>d&&(G=u,u=d,d=G),K.precision(se)):[[a,u],[i,d]]},K.extentMinor=function(G){return arguments.length?(t=+G[0][0],e=+G[1][0],f=+G[0][1],l=+G[1][1],t>e&&(G=t,t=e,e=G),f>l&&(G=f,f=l,l=G),K.precision(se)):[[t,f],[e,l]]},K.step=function(G){return arguments.length?K.stepMajor(G).stepMinor(G):K.stepMinor()},K.stepMajor=function(G){return arguments.length?(I=+G[0],b=+G[1],K):[I,b]},K.stepMinor=function(G){return arguments.length?(w=+G[0],E=+G[1],K):[w,E]},K.precision=function(G){return arguments.length?(se=+G,T=xP(f,l,90),R=wP(t,e,se),L=xP(u,d,90),j=wP(a,i,se),K):se},K.extentMajor([[-180,-90+dr],[180,90-dr]]).extentMinor([[-180,-80-dr],[180,80+dr]])}function pB(){return Xk()()}function mB(e,t){var i=e[0]*yr,a=e[1]*yr,l=t[0]*yr,f=t[1]*yr,d=ar(a),u=tr(a),w=ar(f),E=tr(f),I=d*ar(i),b=d*tr(i),T=w*ar(l),R=w*tr(l),L=2*ho(wi(tP(f-a)+d*w*tP(l-i))),j=tr(L),se=L?function(K){var Z=tr(K*=L)/j,G=tr(L-K)/j,ae=G*I+Z*T,X=G*b+Z*R,U=G*u+Z*E;return[co(X,ae)*sn,co(U,wi(ae*ae+X*X))*sn]}:function(){return[i*sn,a*sn]};return se.distance=L,se}const Rp=e=>e;var T_=new Xi,zx=new Xi,Kk,Yk,Lx,Bx,il={point:On,lineStart:On,lineEnd:On,polygonStart:function(){il.lineStart=gB,il.lineEnd=vB},polygonEnd:function(){il.lineStart=il.lineEnd=il.point=On,T_.add(Nr(zx)),zx=new Xi},result:function(){var e=T_/2;return T_=new Xi,e}};function gB(){il.point=yB}function yB(e,t){il.point=Jk,Kk=Lx=e,Yk=Bx=t}function Jk(e,t){zx.add(Bx*e-Lx*t),Lx=e,Bx=t}function vB(){Jk(Kk,Yk)}var mf=1/0,Hy=mf,jp=-mf,Zy=jp,qy={point:_B,lineStart:On,lineEnd:On,polygonStart:On,polygonEnd:On,result:function(){var e=[[mf,Hy],[jp,Zy]];return jp=Zy=-(Hy=mf=1/0),e}};function _B(e,t){e<mf&&(mf=e),e>jp&&(jp=e),t<Hy&&(Hy=t),t>Zy&&(Zy=t)}var Dx=0,Nx=0,$d=0,Xy=0,Ky=0,Wh=0,$x=0,Ux=0,Ud=0,Qk,e3,bs,Ss,ca={point:bc,lineStart:bP,lineEnd:SP,polygonStart:function(){ca.lineStart=bB,ca.lineEnd=SB},polygonEnd:function(){ca.point=bc,ca.lineStart=bP,ca.lineEnd=SP},result:function(){var e=Ud?[$x/Ud,Ux/Ud]:Wh?[Xy/Wh,Ky/Wh]:$d?[Dx/$d,Nx/$d]:[NaN,NaN];return Dx=Nx=$d=Xy=Ky=Wh=$x=Ux=Ud=0,e}};function bc(e,t){Dx+=e,Nx+=t,++$d}function bP(){ca.point=xB}function xB(e,t){ca.point=wB,bc(bs=e,Ss=t)}function wB(e,t){var i=e-bs,a=t-Ss,l=wi(i*i+a*a);Xy+=l*(bs+e)/2,Ky+=l*(Ss+t)/2,Wh+=l,bc(bs=e,Ss=t)}function SP(){ca.point=bc}function bB(){ca.point=EB}function SB(){t3(Qk,e3)}function EB(e,t){ca.point=t3,bc(Qk=bs=e,e3=Ss=t)}function t3(e,t){var i=e-bs,a=t-Ss,l=wi(i*i+a*a);Xy+=l*(bs+e)/2,Ky+=l*(Ss+t)/2,Wh+=l,l=Ss*e-bs*t,$x+=l*(bs+e),Ux+=l*(Ss+t),Ud+=l*3,bc(bs=e,Ss=t)}function r3(e){this._context=e}r3.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,uo);break}}},result:On};var Vx=new Xi,P_,n3,i3,Vd,Gd,zp={point:On,lineStart:function(){zp.point=TB},lineEnd:function(){P_&&o3(n3,i3),zp.point=On},polygonStart:function(){P_=!0},polygonEnd:function(){P_=null},result:function(){var e=+Vx;return Vx=new Xi,e}};function TB(e,t){zp.point=o3,n3=Vd=e,i3=Gd=t}function o3(e,t){Vd-=e,Gd-=t,Vx.add(wi(Vd*Vd+Gd*Gd)),Vd=e,Gd=t}function a3(){this._string=[]}a3.prototype={_radius:4.5,_circle:EP(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=EP(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function EP(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function PB(e,t){var i=4.5,a,l;function f(d){return d&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),La(d,a(l))),l.result()}return f.area=function(d){return La(d,a(il)),il.result()},f.measure=function(d){return La(d,a(zp)),zp.result()},f.bounds=function(d){return La(d,a(qy)),qy.result()},f.centroid=function(d){return La(d,a(ca)),ca.result()},f.projection=function(d){return arguments.length?(a=d==null?(e=null,Rp):(e=d).stream,f):e},f.context=function(d){return arguments.length?(l=d==null?(t=null,new a3):new r3(t=d),typeof i!="function"&&l.pointRadius(i),f):t},f.pointRadius=function(d){return arguments.length?(i=typeof d=="function"?d:(l.pointRadius(+d),+d),f):i},f.projection(e).context(t)}function AB(e){return{stream:Xp(e)}}function Xp(e){return function(t){var i=new Gx;for(var a in e)i[a]=e[a];return i.stream=t,i}}function Gx(){}Gx.prototype={constructor:Gx,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function kb(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),La(i,e.stream(qy)),t(qy.result()),a!=null&&e.clipExtent(a),e}function L0(e,t,i){return kb(e,function(a){var l=t[1][0]-t[0][0],f=t[1][1]-t[0][1],d=Math.min(l/(a[1][0]-a[0][0]),f/(a[1][1]-a[0][1])),u=+t[0][0]+(l-d*(a[1][0]+a[0][0]))/2,w=+t[0][1]+(f-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([u,w])},i)}function Ob(e,t,i){return L0(e,[[0,0],t],i)}function Fb(e,t,i){return kb(e,function(a){var l=+t,f=l/(a[1][0]-a[0][0]),d=(l-f*(a[1][0]+a[0][0]))/2,u=-f*a[0][1];e.scale(150*f).translate([d,u])},i)}function Rb(e,t,i){return kb(e,function(a){var l=+t,f=l/(a[1][1]-a[0][1]),d=-f*a[0][0],u=(l-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([d,u])},i)}var TP=16,IB=ar(30*yr);function PP(e,t){return+t?MB(e,t):CB(e)}function CB(e){return Xp({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function MB(e,t){function i(a,l,f,d,u,w,E,I,b,T,R,L,j,se){var K=E-a,Z=I-l,G=K*K+Z*Z;if(G>4*t&&j--){var ae=d+T,X=u+R,U=w+L,P=wi(ae*ae+X*X+U*U),z=ho(U/=P),B=Nr(Nr(U)-1)<dr||Nr(f-b)<dr?(f+b)/2:co(X,ae),Q=e(B,z),q=Q[0],ve=Q[1],ye=q-a,fe=ve-l,oe=Z*ye-K*fe;(oe*oe/G>t||Nr((K*ye+Z*fe)/G-.5)>.3||d*T+u*R+w*L<IB)&&(i(a,l,f,d,u,w,q,ve,B,ae/=P,X/=P,U,j,se),se.point(q,ve),i(q,ve,B,ae,X,U,E,I,b,T,R,L,j,se))}}return function(a){var l,f,d,u,w,E,I,b,T,R,L,j,se={point:K,lineStart:Z,lineEnd:ae,polygonStart:function(){a.polygonStart(),se.lineStart=X},polygonEnd:function(){a.polygonEnd(),se.lineStart=Z}};function K(z,B){z=e(z,B),a.point(z[0],z[1])}function Z(){b=NaN,se.point=G,a.lineStart()}function G(z,B){var Q=wc([z,B]),q=e(z,B);i(b,T,I,R,L,j,b=q[0],T=q[1],I=z,R=Q[0],L=Q[1],j=Q[2],TP,a),a.point(b,T)}function ae(){se.point=K,a.lineEnd()}function X(){Z(),se.point=U,se.lineEnd=P}function U(z,B){G(l=z,B),f=b,d=T,u=R,w=L,E=j,se.point=G}function P(){i(b,T,I,R,L,j,f,d,l,u,w,E,TP,a),se.lineEnd=ae,ae()}return se}}var kB=Xp({point:function(e,t){this.stream.point(e*yr,t*yr)}});function OB(e){return Xp({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function FB(e,t,i,a,l){function f(d,u){return d*=a,u*=l,[t+e*d,i-e*u]}return f.invert=function(d,u){return[(d-t)/e*a,(i-u)/e*l]},f}function AP(e,t,i,a,l,f){if(!f)return FB(e,t,i,a,l);var d=ar(f),u=tr(f),w=d*e,E=u*e,I=d/e,b=u/e,T=(u*i-d*t)/e,R=(u*t+d*i)/e;function L(j,se){return j*=a,se*=l,[w*j-E*se+t,i-E*j-w*se]}return L.invert=function(j,se){return[a*(I*j-b*se+T),l*(R-b*j-I*se)]},L}function Ms(e){return jb(function(){return e})()}function jb(e){var t,i=150,a=480,l=250,f=0,d=0,u=0,w=0,E=0,I,b=0,T=1,R=1,L=null,j=Ox,se=null,K,Z,G,ae=Rp,X=.5,U,P,z,B,Q;function q(oe){return z(oe[0]*yr,oe[1]*yr)}function ve(oe){return oe=z.invert(oe[0],oe[1]),oe&&[oe[0]*sn,oe[1]*sn]}q.stream=function(oe){return B&&Q===oe?B:B=kB(OB(I)(j(U(ae(Q=oe)))))},q.preclip=function(oe){return arguments.length?(j=oe,L=void 0,fe()):j},q.postclip=function(oe){return arguments.length?(ae=oe,se=K=Z=G=null,fe()):ae},q.clipAngle=function(oe){return arguments.length?(j=+oe?Hk(L=oe*yr):(L=null,Ox),fe()):L*sn},q.clipExtent=function(oe){return arguments.length?(ae=oe==null?(se=K=Z=G=null,Rp):z0(se=+oe[0][0],K=+oe[0][1],Z=+oe[1][0],G=+oe[1][1]),fe()):se==null?null:[[se,K],[Z,G]]},q.scale=function(oe){return arguments.length?(i=+oe,ye()):i},q.translate=function(oe){return arguments.length?(a=+oe[0],l=+oe[1],ye()):[a,l]},q.center=function(oe){return arguments.length?(f=oe[0]%360*yr,d=oe[1]%360*yr,ye()):[f*sn,d*sn]},q.rotate=function(oe){return arguments.length?(u=oe[0]%360*yr,w=oe[1]%360*yr,E=oe.length>2?oe[2]%360*yr:0,ye()):[u*sn,w*sn,E*sn]},q.angle=function(oe){return arguments.length?(b=oe%360*yr,ye()):b*sn},q.reflectX=function(oe){return arguments.length?(T=oe?-1:1,ye()):T<0},q.reflectY=function(oe){return arguments.length?(R=oe?-1:1,ye()):R<0},q.precision=function(oe){return arguments.length?(U=PP(P,X=oe*oe),fe()):wi(X)},q.fitExtent=function(oe,he){return L0(q,oe,he)},q.fitSize=function(oe,he){return Ob(q,oe,he)},q.fitWidth=function(oe,he){return Fb(q,oe,he)},q.fitHeight=function(oe,he){return Rb(q,oe,he)};function ye(){var oe=AP(i,0,0,T,R,b).apply(null,t(f,d)),he=AP(i,a-oe[0],l-oe[1],T,R,b);return I=Mb(u,w,E),P=Mx(t,he),z=Mx(I,P),U=PP(P,X),fe()}function fe(){return B=Q=null,q}return function(){return t=e.apply(this,arguments),q.invert=t.invert&&ve,ye()}}function zb(e){var t=0,i=Cr/3,a=jb(e),l=a(t,i);return l.parallels=function(f){return arguments.length?a(t=f[0]*yr,i=f[1]*yr):[t*sn,i*sn]},l}function RB(e){var t=ar(e);function i(a,l){return[a*t,tr(l)/t]}return i.invert=function(a,l){return[a/t,ho(l*t)]},i}function s3(e,t){var i=tr(e),a=(i+tr(t))/2;if(Nr(a)<dr)return RB(e);var l=1+i*(2*a-i),f=wi(l)/a;function d(u,w){var E=wi(l-2*a*tr(w))/a;return[E*tr(u*=a),f-E*ar(u)]}return d.invert=function(u,w){var E=f-w,I=co(u,Nr(E))*fa(E);return E*a<0&&(I-=Cr*fa(u)*fa(E)),[I/a,ho((l-(u*u+E*E)*a*a)/(2*a))]},d}function Yy(){return zb(s3).scale(155.424).center([0,33.6442])}function l3(){return Yy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function jB(e){var t=e.length;return{point:function(i,a){for(var l=-1;++l<t;)e[l].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function zB(){var e,t,i=l3(),a,l=Yy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,d=Yy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,w,E={point:function(T,R){w=[T,R]}};function I(T){var R=T[0],L=T[1];return w=null,a.point(R,L),w||(f.point(R,L),w)||(u.point(R,L),w)}I.invert=function(T){var R=i.scale(),L=i.translate(),j=(T[0]-L[0])/R,se=(T[1]-L[1])/R;return(se>=.12&&se<.234&&j>=-.425&&j<-.214?l:se>=.166&&se<.234&&j>=-.214&&j<-.115?d:i).invert(T)},I.stream=function(T){return e&&t===T?e:e=jB([i.stream(t=T),l.stream(T),d.stream(T)])},I.precision=function(T){return arguments.length?(i.precision(T),l.precision(T),d.precision(T),b()):i.precision()},I.scale=function(T){return arguments.length?(i.scale(T),l.scale(T*.35),d.scale(T),I.translate(i.translate())):i.scale()},I.translate=function(T){if(!arguments.length)return i.translate();var R=i.scale(),L=+T[0],j=+T[1];return a=i.translate(T).clipExtent([[L-.455*R,j-.238*R],[L+.455*R,j+.238*R]]).stream(E),f=l.translate([L-.307*R,j+.201*R]).clipExtent([[L-.425*R+dr,j+.12*R+dr],[L-.214*R-dr,j+.234*R-dr]]).stream(E),u=d.translate([L-.205*R,j+.212*R]).clipExtent([[L-.214*R+dr,j+.166*R+dr],[L-.115*R-dr,j+.234*R-dr]]).stream(E),b()},I.fitExtent=function(T,R){return L0(I,T,R)},I.fitSize=function(T,R){return Ob(I,T,R)},I.fitWidth=function(T,R){return Fb(I,T,R)},I.fitHeight=function(T,R){return Rb(I,T,R)};function b(){return e=t=null,I}return I.scale(1070)}function u3(e){return function(t,i){var a=ar(t),l=ar(i),f=e(a*l);return f===1/0?[2,0]:[f*l*tr(t),f*tr(i)]}}function Kp(e){return function(t,i){var a=wi(t*t+i*i),l=e(a),f=tr(l),d=ar(l);return[co(t*f,a*d),ho(a&&i*f/a)]}}var Lb=u3(function(e){return wi(2/(1+e))});Lb.invert=Kp(function(e){return 2*ho(e/2)});function LB(){return Ms(Lb).scale(124.75).clipAngle(180-.001)}var Bb=u3(function(e){return(e=Ck(e))&&e/tr(e)});Bb.invert=Kp(function(e){return e});function BB(){return Ms(Bb).scale(79.4188).clipAngle(180-.001)}function Yp(e,t){return[e,ky(Ib((Nn+t)/2))]}Yp.invert=function(e,t){return[e,2*Af(Ik(t))-Nn]};function DB(){return c3(Yp).scale(961/uo)}function c3(e){var t=Ms(e),i=t.center,a=t.scale,l=t.translate,f=t.clipExtent,d=null,u,w,E;t.scale=function(b){return arguments.length?(a(b),I()):a()},t.translate=function(b){return arguments.length?(l(b),I()):l()},t.center=function(b){return arguments.length?(i(b),I()):i()},t.clipExtent=function(b){return arguments.length?(b==null?d=u=w=E=null:(d=+b[0][0],u=+b[0][1],w=+b[1][0],E=+b[1][1]),I()):d==null?null:[[d,u],[w,E]]};function I(){var b=Cr*a(),T=t(Nk(t.rotate()).invert([0,0]));return f(d==null?[[T[0]-b,T[1]-b],[T[0]+b,T[1]+b]]:e===Yp?[[Math.max(T[0]-b,d),u],[Math.min(T[0]+b,w),E]]:[[d,Math.max(T[1]-b,u)],[w,Math.min(T[1]+b,E)]])}return I()}function vg(e){return Ib((Nn+e)/2)}function h3(e,t){var i=ar(e),a=e===t?tr(e):ky(i/ar(t))/ky(vg(t)/vg(e)),l=i*b_(vg(e),a)/a;if(!a)return Yp;function f(d,u){l>0?u<-Nn+dr&&(u=-Nn+dr):u>Nn-dr&&(u=Nn-dr);var w=l/b_(vg(u),a);return[w*tr(a*d),l-w*ar(a*d)]}return f.invert=function(d,u){var w=l-u,E=fa(a)*wi(d*d+w*w),I=co(d,Nr(w))*fa(w);return w*a<0&&(I-=Cr*fa(d)*fa(w)),[I/a,2*Af(b_(l/E,1/a))-Nn]},f}function NB(){return zb(h3).scale(109.5).parallels([30,30])}function Lp(e,t){return[e,t]}Lp.invert=Lp;function $B(){return Ms(Lp).scale(152.63)}function f3(e,t){var i=ar(e),a=e===t?tr(e):(i-ar(t))/(t-e),l=i/a+e;if(Nr(a)<dr)return Lp;function f(d,u){var w=l-u,E=a*d;return[w*tr(E),l-w*ar(E)]}return f.invert=function(d,u){var w=l-u,E=co(d,Nr(w))*fa(w);return w*a<0&&(E-=Cr*fa(d)*fa(w)),[E/a,l-fa(a)*wi(d*d+w*w)]},f}function UB(){return zb(f3).scale(131.154).center([0,13.9389])}var ip=1.340264,op=-.081106,ap=893e-6,sp=.003796,Jy=wi(3)/2,VB=12;function Db(e,t){var i=ho(Jy*tr(t)),a=i*i,l=a*a*a;return[e*ar(i)/(Jy*(ip+3*op*a+l*(7*ap+9*sp*a))),i*(ip+op*a+l*(ap+sp*a))]}Db.invert=function(e,t){for(var i=t,a=i*i,l=a*a*a,f=0,d,u,w;f<VB&&(u=i*(ip+op*a+l*(ap+sp*a))-t,w=ip+3*op*a+l*(7*ap+9*sp*a),i-=d=u/w,a=i*i,l=a*a*a,!(Nr(d)<Fp));++f);return[Jy*e*(ip+3*op*a+l*(7*ap+9*sp*a))/ar(i),ho(tr(i)/Jy)]};function GB(){return Ms(Db).scale(177.158)}function Nb(e,t){var i=ar(t),a=ar(e)*i;return[i*tr(e)/a,tr(t)/a]}Nb.invert=Kp(Af);function WB(){return Ms(Nb).scale(144.049).clipAngle(60)}function HB(){var e=1,t=0,i=0,a=1,l=1,f=0,d,u,w=null,E,I,b,T=1,R=1,L=Xp({point:function(ae,X){var U=G([ae,X]);this.stream.point(U[0],U[1])}}),j=Rp,se,K;function Z(){return T=e*a,R=e*l,se=K=null,G}function G(ae){var X=ae[0]*T,U=ae[1]*R;if(f){var P=U*d-X*u;X=X*d+U*u,U=P}return[X+t,U+i]}return G.invert=function(ae){var X=ae[0]-t,U=ae[1]-i;if(f){var P=U*d+X*u;X=X*d-U*u,U=P}return[X/T,U/R]},G.stream=function(ae){return se&&K===ae?se:se=L(j(K=ae))},G.postclip=function(ae){return arguments.length?(j=ae,w=E=I=b=null,Z()):j},G.clipExtent=function(ae){return arguments.length?(j=ae==null?(w=E=I=b=null,Rp):z0(w=+ae[0][0],E=+ae[0][1],I=+ae[1][0],b=+ae[1][1]),Z()):w==null?null:[[w,E],[I,b]]},G.scale=function(ae){return arguments.length?(e=+ae,Z()):e},G.translate=function(ae){return arguments.length?(t=+ae[0],i=+ae[1],Z()):[t,i]},G.angle=function(ae){return arguments.length?(f=ae%360*yr,u=tr(f),d=ar(f),Z()):f*sn},G.reflectX=function(ae){return arguments.length?(a=ae?-1:1,Z()):a<0},G.reflectY=function(ae){return arguments.length?(l=ae?-1:1,Z()):l<0},G.fitExtent=function(ae,X){return L0(G,ae,X)},G.fitSize=function(ae,X){return Ob(G,ae,X)},G.fitWidth=function(ae,X){return Fb(G,ae,X)},G.fitHeight=function(ae,X){return Rb(G,ae,X)},G}function $b(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}$b.invert=function(e,t){var i=t,a=25,l;do{var f=i*i,d=f*f;i-=l=(i*(1.007226+f*(.015085+d*(-.044475+.028874*f-.005916*d)))-t)/(1.007226+f*(.015085*3+d*(-.044475*7+.028874*9*f-.005916*11*d)))}while(Nr(l)>dr&&--a>0);return[e/(.8707+(f=i*i)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),i]};function ZB(){return Ms($b).scale(175.295)}function Ub(e,t){return[ar(t)*tr(e),tr(t)]}Ub.invert=Kp(ho);function qB(){return Ms(Ub).scale(249.5).clipAngle(90+dr)}function Vb(e,t){var i=ar(t),a=1+ar(e)*i;return[i*tr(e)/a,tr(t)/a]}Vb.invert=Kp(function(e){return 2*Af(e)});function XB(){return Ms(Vb).scale(250).clipAngle(142)}function Gb(e,t){return[ky(Ib((Nn+t)/2)),-e]}Gb.invert=function(e,t){return[-t,2*Af(Ik(e))-Nn]};function KB(){var e=c3(Gb),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const YB=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:l3,geoAlbersUsa:zB,geoArea:U6,geoAzimuthalEqualArea:LB,geoAzimuthalEqualAreaRaw:Lb,geoAzimuthalEquidistant:BB,geoAzimuthalEquidistantRaw:Bb,geoBounds:H6,geoCentroid:J6,geoCircle:Q6,geoClipAntimeridian:Ox,geoClipCircle:Hk,geoClipExtent:aB,geoClipRectangle:z0,geoConicConformal:NB,geoConicConformalRaw:h3,geoConicEqualArea:Yy,geoConicEqualAreaRaw:s3,geoConicEquidistant:UB,geoConicEquidistantRaw:f3,geoContains:dB,geoDistance:Gy,geoEqualEarth:GB,geoEqualEarthRaw:Db,geoEquirectangular:$B,geoEquirectangularRaw:Lp,geoGnomonic:WB,geoGnomonicRaw:Nb,geoGraticule:Xk,geoGraticule10:pB,geoIdentity:HB,geoInterpolate:mB,geoLength:Zk,geoMercator:DB,geoMercatorRaw:Yp,geoNaturalEarth1:ZB,geoNaturalEarth1Raw:$b,geoOrthographic:qB,geoOrthographicRaw:Ub,geoPath:PB,geoProjection:Ms,geoProjectionMutator:jb,geoRotation:Nk,geoStereographic:XB,geoStereographicRaw:Vb,geoStream:La,geoTransform:AB,geoTransverseMercator:KB,geoTransverseMercatorRaw:Gb},Symbol.toStringTag,{value:"Module"})),JB=vw(YB);var Su=2*Math.PI*6378137/2,QB=Math.PI/180;function d3(e){return e=e||256,2*Math.PI*6378137/e}function eD(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function Wx(e,t,i){var a=p3(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function p3(e,t,i){var a=t,l=Jb(e[0]),f=Yb(e[1]),d=Math.sin(f*QB),u=Math.pow(2,a),w=u*(l/360+.5),E=u*(.5-.25*Math.log((1+d)/(1-d))/Math.PI);return Pc([w,E,a],i)}function tD(e,t=6){var i=e[0],a=e[1],l=e[2],f=e[3],d=(i-l)/2+l,u=(a-f)/2+f;return t!=null&&(d=Number(d.toFixed(t)),u=Number(u.toFixed(t))),[d,u]}function Qy(e,t,i={enable:!0,decimal:1}){e=B0(e,t);var a=e[0],l=e[1],f=a*Su/180,d=Math.log(Math.tan((90+l)*Math.PI/360))/(Math.PI/180);return d=d*Su/180,i.enable&&(f=Number(f.toFixed(i.decimal)),d=Number(d.toFixed(i.decimal))),[f,d]}function Hx(e,t=6){var i=e[0],a=e[1],l=i/Su*180,f=a/Su*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(l=Number(l.toFixed(t)),f=Number(f.toFixed(t))),[l,f]}function Wb(e,t,i){var a=e[0],l=e[1],f=Xb(t,i),d=(a+Su)/f,u=(l+Su)/f;return[d,u,t]}function m3(e,t,i){e=B0(e,i);var a=Qy(e),l=Wb(a,t);return Hb(l)}function rD(e,t,i){if(e=B0(e,i),t===0)return[0,0,0];var a=m3(e,t);return y3(a)}function nD(e,t){if(t===0)return[0,0,0];var i=Wb(e,t);return Hb(i)}function Zx(e,t,i=1){var a=e[0],l=e[1],f=e[2],d=Xb(f,t),u=a*d-Su,w=l*d-Su;return i!=null&&(u=Number(u.toFixed(i)),w=Number(w.toFixed(i))),[u,w]}function Hb(e,t,i){t=t||256;var a=e[0],l=e[1],f=e[2];if(f===0)return[0,0,0];qb(f);var d=Math.ceil(a/t)-1,u=Math.ceil(l/t)-1;return d<0&&(d=0),u<0&&(u=0),[d,u,f]}function Zb(e,t,i){Pc(e,i),t=t||256;var a=e[0],l=e[1],f=e[2],d=Zx([a*t,l*t,f]),u=Zx([(a+1)*t,(l+1)*t,f]);return[d[0],d[1],u[0],u[1]]}function g3(e,t){Pc(e,t);var i=e[0],a=e[1],l=e[2];if(l===0)return[-180,-85.051129,180,85.051129];var f=Zb([i,a,l]),d=f[0],u=f[1],w=f[2],E=f[3],I=Hx([d,u,l]),b=Hx([w,E,l]);return[I[0],I[1],b[0],b[1]]}function iD(e){var t=Jp(e);return Zb(t)}function oD(e){var t=Jp(e);return g3(t)}function y3(e,t){Pc(e,t);var i=e[0],a=e[1],l=e[2];if(l===0)return[0,0,0];var f=i,d=Math.pow(2,l)-1-a;return[f,d,l]}function Jp(e){var t=e[0],i=e[1],a=e[2],l=t,f=Math.pow(2,a)-i-1;return[l,f,a]}function aD(e){var t=Jp(e);return v3(t)}function v3(e,t){Pc(e,t);var i=e[0],a=e[1],l=e[2];if(l===0)return"";var f="";return a=Math.pow(2,l)-1-a,Kb(l,0,-1).map(function(d){var u=0,w=1<<d-1;i&w&&(u+=1),a&w&&(u+=2),f=f.concat(u)}),f}function sD(e){var t=_3(e);return Jp(t)}function _3(e){var t=0,i=0,a=e.length;return Kb(a,0,-1).map(function(l){var f=1<<l-1;switch(parseInt(e[a-l],0)){case 0:break;case 1:t+=f;break;case 2:i+=f;break;case 3:t+=f,i+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function lD(e){var t=Qy([e[0],e[1]]),i=Qy([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function Pc(e,t){var i=e[0],a=e[1],l=e[2];if(t===!1)return e;if(l==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return l=qb(l),e=x3(e),e}function x3(e){var t=e[0],i=e[1],a=e[2],l=Math.pow(2,a);return t=t%l,t<0&&(t=t+l),[t,i,a]}function qb(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function B0(e,t){if(t===!1)return e;var i=Jb(e[0]),a=Yb(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function Xb(e,t){return d3(t)/Math.pow(2,e)}function Kb(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),l=Array(a),f=0;f<a;f++,e+=i)l[f]=e;return l}function uD(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],l=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<i&&(i=f[1]),f[2]>a&&(a=f[2]),f[3]>l&&(l=f[3])}),[t,i,a,l]}}function cD(e){try{return Pc(e),!0}catch{return!1}}function Yb(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Jb(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function hD(e){var t=Wx([e[0],e[1]],32),i=Wx([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],l=fD(a);if(l===0)return[0,0,0];var f=a[0]>>>32-l,d=a[1]>>>32-l;return[f,d,l]}function fD(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const dD=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:tD,bboxToMeters:lD,bboxToTile:hD,googleToBBox:oD,googleToBBoxMeters:iD,googleToQuadkey:aD,googleToTile:Jp,hash:eD,initialResolution:d3,latitude:Yb,lngLatToGoogle:rD,lngLatToMeters:Qy,lngLatToTile:m3,longitude:Jb,maxBBox:uD,metersToLngLat:Hx,metersToPixels:Wb,metersToTile:nD,pixelsToMeters:Zx,pixelsToTile:Hb,pointToTile:Wx,pointToTileFraction:p3,quadkeyToGoogle:_3,quadkeyToTile:sD,range:Kb,resolution:Xb,tileToBBox:g3,tileToBBoxMeters:Zb,tileToGoogle:y3,tileToQuadkey:v3,validTile:cD,validateLngLat:B0,validateTile:Pc,validateZoom:qb,wrapTile:x3},Symbol.toStringTag,{value:"Module"})),pD=vw(dD);var D0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */D0.read=function(e,t,i,a,l){var f,d,u=l*8-a-1,w=(1<<u)-1,E=w>>1,I=-7,b=i?l-1:0,T=i?-1:1,R=e[t+b];for(b+=T,f=R&(1<<-I)-1,R>>=-I,I+=u;I>0;f=f*256+e[t+b],b+=T,I-=8);for(d=f&(1<<-I)-1,f>>=-I,I+=a;I>0;d=d*256+e[t+b],b+=T,I-=8);if(f===0)f=1-E;else{if(f===w)return d?NaN:(R?-1:1)*(1/0);d=d+Math.pow(2,a),f=f-E}return(R?-1:1)*d*Math.pow(2,f-a)};D0.write=function(e,t,i,a,l,f){var d,u,w,E=f*8-l-1,I=(1<<E)-1,b=I>>1,T=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=a?0:f-1,L=a?1:-1,j=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,d=I):(d=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-d))<1&&(d--,w*=2),d+b>=1?t+=T/w:t+=T*Math.pow(2,1-b),t*w>=2&&(d++,w/=2),d+b>=I?(u=0,d=I):d+b>=1?(u=(t*w-1)*Math.pow(2,l),d=d+b):(u=t*Math.pow(2,b-1)*Math.pow(2,l),d=0));l>=8;e[i+R]=u&255,R+=L,u/=256,l-=8);for(d=d<<l|u,E+=l;E>0;e[i+R]=d&255,R+=L,d/=256,E-=8);e[i+R-L]|=j*128};var mD=Zr,_g=D0;function Zr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0;Zr.Fixed64=1;Zr.Bytes=2;Zr.Fixed32=5;var qx=65536*65536,IP=1/qx,gD=12,w3=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Zr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),l=a>>3,f=this.pos;this.type=a&7,e(l,t,this),this.pos===f&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=xg(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=MP(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=xg(this.buf,this.pos)+xg(this.buf,this.pos+4)*qx;return this.pos+=8,e},readSFixed64:function(){var e=xg(this.buf,this.pos)+MP(this.buf,this.pos+4)*qx;return this.pos+=8,e},readFloat:function(){var e=_g.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=_g.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,yD(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=gD&&w3?kD(this.buf,t,e):MD(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Zr.Bytes)return e.push(this.readVarint(t));var i=Qs(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSVarint());var t=Qs(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Zr.Bytes)return e.push(this.readBoolean());var t=Qs(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFloat());var t=Qs(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Zr.Bytes)return e.push(this.readDouble());var t=Qs(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFixed32());var t=Qs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSFixed32());var t=Qs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFixed64());var t=Qs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSFixed64());var t=Qs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Zr.Fixed32)this.pos+=4;else if(t===Zr.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),bh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),bh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),bh(this.buf,e&-1,this.pos),bh(this.buf,Math.floor(e*IP),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),bh(this.buf,e&-1,this.pos),bh(this.buf,Math.floor(e*IP),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){vD(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=OD(this.buf,e,this.pos);var i=this.pos-t;i>=128&&CP(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),_g.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),_g.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&CP(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Zr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,wD,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,bD,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,TD,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,SD,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,ED,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,PD,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,AD,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,ID,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,CD,t)},writeBytesField:function(e,t){this.writeTag(e,Zr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Zr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Zr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Zr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Zr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Zr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Zr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Zr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Zr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Zr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function yD(e,t,i){var a=i.buf,l,f;if(f=a[i.pos++],l=(f&112)>>4,f<128||(f=a[i.pos++],l|=(f&127)<<3,f<128)||(f=a[i.pos++],l|=(f&127)<<10,f<128)||(f=a[i.pos++],l|=(f&127)<<17,f<128)||(f=a[i.pos++],l|=(f&127)<<24,f<128)||(f=a[i.pos++],l|=(f&1)<<31,f<128))return wh(e,l,t);throw new Error("Expected varint not more than 10 bytes")}function Qs(e){return e.type===Zr.Bytes?e.readVarint()+e.pos:e.pos+1}function wh(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function vD(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),_D(i,a,t),xD(a,t)}function _D(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function xD(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function CP(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var l=i.pos-1;l>=e;l--)i.buf[l+a]=i.buf[l]}function wD(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function bD(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function SD(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function ED(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function TD(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function PD(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function AD(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function ID(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function CD(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function xg(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function bh(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function MP(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function MD(e,t,i){for(var a="",l=t;l<i;){var f=e[l],d=null,u=f>239?4:f>223?3:f>191?2:1;if(l+u>i)break;var w,E,I;u===1?f<128&&(d=f):u===2?(w=e[l+1],(w&192)===128&&(d=(f&31)<<6|w&63,d<=127&&(d=null))):u===3?(w=e[l+1],E=e[l+2],(w&192)===128&&(E&192)===128&&(d=(f&15)<<12|(w&63)<<6|E&63,(d<=2047||d>=55296&&d<=57343)&&(d=null))):u===4&&(w=e[l+1],E=e[l+2],I=e[l+3],(w&192)===128&&(E&192)===128&&(I&192)===128&&(d=(f&15)<<18|(w&63)<<12|(E&63)<<6|I&63,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,u=1):d>65535&&(d-=65536,a+=String.fromCharCode(d>>>10&1023|55296),d=56320|d&1023),a+=String.fromCharCode(d),l+=u}return a}function kD(e,t,i){return w3.decode(e.subarray(t,i))}function OD(e,t,i){for(var a=0,l,f;a<t.length;a++){if(l=t.charCodeAt(a),l>55295&&l<57344)if(f)if(l<56320){e[i++]=239,e[i++]=191,e[i++]=189,f=l;continue}else l=f-55296<<10|l-56320|65536,f=null;else{l>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):f=l;continue}else f&&(e[i++]=239,e[i++]=191,e[i++]=189,f=null);l<128?e[i++]=l:(l<2048?e[i++]=l>>6|192:(l<65536?e[i++]=l>>12|224:(e[i++]=l>>18|240,e[i++]=l>>12&63|128),e[i++]=l>>6&63|128),e[i++]=l&63|128)}return i}var Qb={exports:{}},b3=function(t,i){return function(){for(var l=new Array(arguments.length),f=0;f<l.length;f++)l[f]=arguments[f];return t.apply(i,l)}},FD=b3,Ac=Object.prototype.toString;function e2(e){return Ac.call(e)==="[object Array]"}function Xx(e){return typeof e>"u"}function RD(e){return e!==null&&!Xx(e)&&e.constructor!==null&&!Xx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function jD(e){return Ac.call(e)==="[object ArrayBuffer]"}function zD(e){return typeof FormData<"u"&&e instanceof FormData}function LD(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function BD(e){return typeof e=="string"}function DD(e){return typeof e=="number"}function S3(e){return e!==null&&typeof e=="object"}function Ug(e){if(Ac.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function ND(e){return Ac.call(e)==="[object Date]"}function $D(e){return Ac.call(e)==="[object File]"}function UD(e){return Ac.call(e)==="[object Blob]"}function E3(e){return Ac.call(e)==="[object Function]"}function VD(e){return S3(e)&&E3(e.pipe)}function GD(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function WD(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function HD(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function t2(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),e2(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.call(null,e[l],l,e)}function Kx(){var e={};function t(l,f){Ug(e[f])&&Ug(l)?e[f]=Kx(e[f],l):Ug(l)?e[f]=Kx({},l):e2(l)?e[f]=l.slice():e[f]=l}for(var i=0,a=arguments.length;i<a;i++)t2(arguments[i],t);return e}function ZD(e,t,i){return t2(t,function(l,f){i&&typeof l=="function"?e[f]=FD(l,i):e[f]=l}),e}function qD(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Qo={isArray:e2,isArrayBuffer:jD,isBuffer:RD,isFormData:zD,isArrayBufferView:LD,isString:BD,isNumber:DD,isObject:S3,isPlainObject:Ug,isUndefined:Xx,isDate:ND,isFile:$D,isBlob:UD,isFunction:E3,isStream:VD,isURLSearchParams:GD,isStandardBrowserEnv:HD,forEach:t2,merge:Kx,extend:ZD,trim:WD,stripBOM:qD},Sh=Qo;function kP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var T3=function(t,i,a){if(!i)return t;var l;if(a)l=a(i);else if(Sh.isURLSearchParams(i))l=i.toString();else{var f=[];Sh.forEach(i,function(w,E){w===null||typeof w>"u"||(Sh.isArray(w)?E=E+"[]":w=[w],Sh.forEach(w,function(b){Sh.isDate(b)?b=b.toISOString():Sh.isObject(b)&&(b=JSON.stringify(b)),f.push(kP(E)+"="+kP(b))}))}),l=f.join("&")}if(l){var d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t},XD=Qo;function N0(){this.handlers=[]}N0.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};N0.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};N0.prototype.forEach=function(t){XD.forEach(this.handlers,function(a){a!==null&&t(a)})};var KD=N0,YD=Qo,JD=function(t,i){YD.forEach(t,function(l,f){f!==i&&f.toUpperCase()===i.toUpperCase()&&(t[i]=l,delete t[f])})},P3=function(t,i,a,l,f){return t.config=i,a&&(t.code=a),t.request=l,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},A_,OP;function A3(){if(OP)return A_;OP=1;var e=P3;return A_=function(i,a,l,f,d){var u=new Error(i);return e(u,a,l,f,d)},A_}var I_,FP;function QD(){if(FP)return I_;FP=1;var e=A3();return I_=function(i,a,l){var f=l.config.validateStatus;!l.status||!f||f(l.status)?i(l):a(e("Request failed with status code "+l.status,l.config,null,l.request,l))},I_}var C_,RP;function eN(){if(RP)return C_;RP=1;var e=Qo;return C_=e.isStandardBrowserEnv()?function(){return{write:function(a,l,f,d,u,w){var E=[];E.push(a+"="+encodeURIComponent(l)),e.isNumber(f)&&E.push("expires="+new Date(f).toGMTString()),e.isString(d)&&E.push("path="+d),e.isString(u)&&E.push("domain="+u),w===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var l=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),C_}var M_,jP;function tN(){return jP||(jP=1,M_=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),M_}var k_,zP;function rN(){return zP||(zP=1,k_=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),k_}var O_,LP;function nN(){if(LP)return O_;LP=1;var e=tN(),t=rN();return O_=function(a,l){return a&&!e(l)?t(a,l):l},O_}var F_,BP;function iN(){if(BP)return F_;BP=1;var e=Qo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return F_=function(a){var l={},f,d,u;return a&&e.forEach(a.split(`
`),function(E){if(u=E.indexOf(":"),f=e.trim(E.substr(0,u)).toLowerCase(),d=e.trim(E.substr(u+1)),f){if(l[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?l[f]=(l[f]?l[f]:[]).concat([d]):l[f]=l[f]?l[f]+", "+d:d}}),l},F_}var R_,DP;function oN(){if(DP)return R_;DP=1;var e=Qo;return R_=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),l;function f(d){var u=d;return i&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return l=f(window.location.href),function(u){var w=e.isString(u)?f(u):u;return w.protocol===l.protocol&&w.host===l.host}}():function(){return function(){return!0}}(),R_}var j_,NP;function $P(){if(NP)return j_;NP=1;var e=Qo,t=QD(),i=eN(),a=T3,l=nN(),f=iN(),d=oN(),u=A3();return j_=function(E){return new Promise(function(b,T){var R=E.data,L=E.headers,j=E.responseType;e.isFormData(R)&&delete L["Content-Type"];var se=new XMLHttpRequest;if(E.auth){var K=E.auth.username||"",Z=E.auth.password?unescape(encodeURIComponent(E.auth.password)):"";L.Authorization="Basic "+btoa(K+":"+Z)}var G=l(E.baseURL,E.url);se.open(E.method.toUpperCase(),a(G,E.params,E.paramsSerializer),!0),se.timeout=E.timeout;function ae(){if(se){var U="getAllResponseHeaders"in se?f(se.getAllResponseHeaders()):null,P=!j||j==="text"||j==="json"?se.responseText:se.response,z={data:P,status:se.status,statusText:se.statusText,headers:U,config:E,request:se};t(b,T,z),se=null}}if("onloadend"in se?se.onloadend=ae:se.onreadystatechange=function(){!se||se.readyState!==4||se.status===0&&!(se.responseURL&&se.responseURL.indexOf("file:")===0)||setTimeout(ae)},se.onabort=function(){se&&(T(u("Request aborted",E,"ECONNABORTED",se)),se=null)},se.onerror=function(){T(u("Network Error",E,null,se)),se=null},se.ontimeout=function(){var P="timeout of "+E.timeout+"ms exceeded";E.timeoutErrorMessage&&(P=E.timeoutErrorMessage),T(u(P,E,E.transitional&&E.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",se)),se=null},e.isStandardBrowserEnv()){var X=(E.withCredentials||d(G))&&E.xsrfCookieName?i.read(E.xsrfCookieName):void 0;X&&(L[E.xsrfHeaderName]=X)}"setRequestHeader"in se&&e.forEach(L,function(P,z){typeof R>"u"&&z.toLowerCase()==="content-type"?delete L[z]:se.setRequestHeader(z,P)}),e.isUndefined(E.withCredentials)||(se.withCredentials=!!E.withCredentials),j&&j!=="json"&&(se.responseType=E.responseType),typeof E.onDownloadProgress=="function"&&se.addEventListener("progress",E.onDownloadProgress),typeof E.onUploadProgress=="function"&&se.upload&&se.upload.addEventListener("progress",E.onUploadProgress),E.cancelToken&&E.cancelToken.promise.then(function(P){se&&(se.abort(),T(P),se=null)}),R||(R=null),se.send(R)})},j_}var Oi=Qo,UP=JD,aN=P3,sN={"Content-Type":"application/x-www-form-urlencoded"};function VP(e,t){!Oi.isUndefined(e)&&Oi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function lN(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=$P()),e}function uN(e,t,i){if(Oi.isString(e))try{return(t||JSON.parse)(e),Oi.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var $0={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:lN(),transformRequest:[function(t,i){return UP(i,"Accept"),UP(i,"Content-Type"),Oi.isFormData(t)||Oi.isArrayBuffer(t)||Oi.isBuffer(t)||Oi.isStream(t)||Oi.isFile(t)||Oi.isBlob(t)?t:Oi.isArrayBufferView(t)?t.buffer:Oi.isURLSearchParams(t)?(VP(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Oi.isObject(t)||i&&i["Content-Type"]==="application/json"?(VP(i,"application/json"),uN(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,l=i&&i.forcedJSONParsing,f=!a&&this.responseType==="json";if(f||l&&Oi.isString(t)&&t.length)try{return JSON.parse(t)}catch(d){if(f)throw d.name==="SyntaxError"?aN(d,this,"E_JSON_PARSE"):d}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};$0.headers={common:{Accept:"application/json, text/plain, */*"}};Oi.forEach(["delete","get","head"],function(t){$0.headers[t]={}});Oi.forEach(["post","put","patch"],function(t){$0.headers[t]=Oi.merge(sN)});var r2=$0,cN=Qo,hN=r2,fN=function(t,i,a){var l=this||hN;return cN.forEach(a,function(d){t=d.call(l,t,i)}),t},z_,GP;function I3(){return GP||(GP=1,z_=function(t){return!!(t&&t.__CANCEL__)}),z_}var WP=Qo,L_=fN,dN=I3(),pN=r2;function B_(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var mN=function(t){B_(t),t.headers=t.headers||{},t.data=L_.call(t,t.data,t.headers,t.transformRequest),t.headers=WP.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),WP.forEach(["delete","get","head","post","put","patch","common"],function(l){delete t.headers[l]});var i=t.adapter||pN.adapter;return i(t).then(function(l){return B_(t),l.data=L_.call(t,l.data,l.headers,t.transformResponse),l},function(l){return dN(l)||(B_(t),l&&l.response&&(l.response.data=L_.call(t,l.response.data,l.response.headers,t.transformResponse))),Promise.reject(l)})},Zi=Qo,C3=function(t,i){i=i||{};var a={},l=["url","method","data"],f=["headers","auth","proxy","params"],d=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function w(T,R){return Zi.isPlainObject(T)&&Zi.isPlainObject(R)?Zi.merge(T,R):Zi.isPlainObject(R)?Zi.merge({},R):Zi.isArray(R)?R.slice():R}function E(T){Zi.isUndefined(i[T])?Zi.isUndefined(t[T])||(a[T]=w(void 0,t[T])):a[T]=w(t[T],i[T])}Zi.forEach(l,function(R){Zi.isUndefined(i[R])||(a[R]=w(void 0,i[R]))}),Zi.forEach(f,E),Zi.forEach(d,function(R){Zi.isUndefined(i[R])?Zi.isUndefined(t[R])||(a[R]=w(void 0,t[R])):a[R]=w(void 0,i[R])}),Zi.forEach(u,function(R){R in i?a[R]=w(t[R],i[R]):R in t&&(a[R]=w(void 0,t[R]))});var I=l.concat(f).concat(d).concat(u),b=Object.keys(t).concat(Object.keys(i)).filter(function(R){return I.indexOf(R)===-1});return Zi.forEach(b,E),a};const gN="axios",yN="0.21.4",vN="Promise based HTTP client for the browser and node.js",_N="index.js",xN={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},wN={type:"git",url:"https://github.com/axios/axios.git"},bN=["xhr","http","ajax","promise","node"],SN="Matt Zabriskie",EN="MIT",TN={url:"https://github.com/axios/axios/issues"},PN="https://axios-http.com",AN={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},IN={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},CN="dist/axios.min.js",MN="dist/axios.min.js",kN="./index.d.ts",ON={"follow-redirects":"^1.14.0"},FN=[{path:"./dist/axios.min.js",threshold:"5kB"}],RN={name:gN,version:yN,description:vN,main:_N,scripts:xN,repository:wN,keywords:bN,author:SN,license:EN,bugs:TN,homepage:PN,devDependencies:AN,browser:IN,jsdelivr:CN,unpkg:MN,typings:kN,dependencies:ON,bundlesize:FN};var M3=RN,n2={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){n2[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var HP={},jN=M3.version.split(".");function k3(e,t){for(var i=t?t.split("."):jN,a=e.split("."),l=0;l<3;l++){if(i[l]>a[l])return!0;if(i[l]<a[l])return!1}return!1}n2.transitional=function(t,i,a){var l=i&&k3(i);function f(d,u){return"[Axios v"+M3.version+"] Transitional option '"+d+"'"+u+(a?". "+a:"")}return function(d,u,w){if(t===!1)throw new Error(f(u," has been removed in "+i));return l&&!HP[u]&&(HP[u]=!0,console.warn(f(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(d,u,w):!0}};function zN(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),l=a.length;l-- >0;){var f=a[l],d=t[f];if(d){var u=e[f],w=u===void 0||d(u,f,e);if(w!==!0)throw new TypeError("option "+f+" must be "+w);continue}if(i!==!0)throw Error("Unknown option "+f)}}var LN={isOlderVersion:k3,assertOptions:zN,validators:n2},O3=Qo,BN=T3,ZP=KD,qP=mN,U0=C3,F3=LN,Eh=F3.validators;function Qp(e){this.defaults=e,this.interceptors={request:new ZP,response:new ZP}}Qp.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=U0(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&F3.assertOptions(i,{silentJSONParsing:Eh.transitional(Eh.boolean,"1.0.0"),forcedJSONParsing:Eh.transitional(Eh.boolean,"1.0.0"),clarifyTimeoutError:Eh.transitional(Eh.boolean,"1.0.0")},!1);var a=[],l=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(l=l&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});var d;if(!l){var u=[qP,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(f),d=Promise.resolve(t);u.length;)d=d.then(u.shift(),u.shift());return d}for(var w=t;a.length;){var E=a.shift(),I=a.shift();try{w=E(w)}catch(b){I(b);break}}try{d=qP(w)}catch(b){return Promise.reject(b)}for(;f.length;)d=d.then(f.shift(),f.shift());return d};Qp.prototype.getUri=function(t){return t=U0(this.defaults,t),BN(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};O3.forEach(["delete","get","head","options"],function(t){Qp.prototype[t]=function(i,a){return this.request(U0(a||{},{method:t,url:i,data:(a||{}).data}))}});O3.forEach(["post","put","patch"],function(t){Qp.prototype[t]=function(i,a,l){return this.request(U0(l||{},{method:t,url:i,data:a}))}});var DN=Qp,D_,XP;function R3(){if(XP)return D_;XP=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,D_=e,D_}var N_,KP;function NN(){if(KP)return N_;KP=1;var e=R3();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(d){a=d});var l=this;i(function(d){l.reason||(l.reason=new e(d),a(l.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,l=new t(function(d){a=d});return{token:l,cancel:a}},N_=t,N_}var $_,YP;function $N(){return YP||(YP=1,$_=function(t){return function(a){return t.apply(null,a)}}),$_}var U_,JP;function UN(){return JP||(JP=1,U_=function(t){return typeof t=="object"&&t.isAxiosError===!0}),U_}var QP=Qo,VN=b3,Vg=DN,GN=C3,WN=r2;function j3(e){var t=new Vg(e),i=VN(Vg.prototype.request,t);return QP.extend(i,Vg.prototype,t),QP.extend(i,t),i}var Wa=j3(WN);Wa.Axios=Vg;Wa.create=function(t){return j3(GN(Wa.defaults,t))};Wa.Cancel=R3();Wa.CancelToken=NN();Wa.isCancel=I3();Wa.all=function(t){return Promise.all(t)};Wa.spread=$N();Wa.isAxiosError=UN();Qb.exports=Wa;Qb.exports.default=Wa;var HN=Qb.exports,ZN=HN;const qN={},XN=Object.freeze(Object.defineProperty({__proto__:null,default:qN},Symbol.toStringTag,{value:"Module"})),z3=vw(XN);var V0={},KN=tf;function tf(e,t){this.x=e,this.y=t}tf.prototype={clone:function(){return new tf(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,l=i*this.x+t*this.y;return this.x=a,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),l=t.x+i*(this.x-t.x)-a*(this.y-t.y),f=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=l,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};tf.convert=function(e){return e instanceof tf?e:Array.isArray(e)?new tf(e[0],e[1]):e};var YN=KN,L3=gf;function gf(e,t,i,a,l){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=l,e.readFields(JN,this,t)}function JN(e,t,i){e==1?t.id=i.readVarint():e==2?QN(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function QN(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],l=t._values[e.readVarint()];t.properties[a]=l}}gf.types=["Unknown","Point","LineString","Polygon"];gf.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,l=0,f=0,d=[],u;e.pos<t;){if(a<=0){var w=e.readVarint();i=w&7,a=w>>3}if(a--,i===1||i===2)l+=e.readSVarint(),f+=e.readSVarint(),i===1&&(u&&d.push(u),u=[]),u.push(new YN(l,f));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&d.push(u),d};gf.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,l=0,f=0,d=1/0,u=-1/0,w=1/0,E=-1/0;e.pos<t;){if(a<=0){var I=e.readVarint();i=I&7,a=I>>3}if(a--,i===1||i===2)l+=e.readSVarint(),f+=e.readSVarint(),l<d&&(d=l),l>u&&(u=l),f<w&&(w=f),f>E&&(E=f);else if(i!==7)throw new Error("unknown command "+i)}return[d,w,u,E]};gf.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),l=this.extent*e,f=this.extent*t,d=this.loadGeometry(),u=gf.types[this.type],w,E;function I(R){for(var L=0;L<R.length;L++){var j=R[L],se=180-(j.y+f)*360/a;R[L]=[(j.x+l)*360/a-180,360/Math.PI*Math.atan(Math.exp(se*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(w=0;w<d.length;w++)b[w]=d[w][0];d=b,I(d);break;case 2:for(w=0;w<d.length;w++)I(d[w]);break;case 3:for(d=e8(d),w=0;w<d.length;w++)for(E=0;E<d[w].length;E++)I(d[w][E]);break}d.length===1?d=d[0]:u="Multi"+u;var T={type:"Feature",geometry:{type:u,coordinates:d},properties:this.properties};return"id"in this&&(T.id=this.id),T};function e8(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,l,f=0;f<t;f++){var d=t8(e[f]);d!==0&&(l===void 0&&(l=d<0),l===d<0?(a&&i.push(a),a=[e[f]]):a.push(e[f]))}return a&&i.push(a),i}function t8(e){for(var t=0,i=0,a=e.length,l=a-1,f,d;i<a;l=i++)f=e[i],d=e[l],t+=(d.x-f.x)*(f.y+d.y);return t}var r8=L3,B3=D3;function D3(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(n8,this,t),this.length=this._features.length}function n8(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(i8(i))}function i8(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}D3.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new r8(this._pbf,t,this.extent,this._keys,this._values)};var o8=B3,a8=s8;function s8(e,t){this.layers=e.readFields(l8,{},t)}function l8(e,t,i){if(e===3){var a=new o8(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}V0.VectorTile=a8;V0.VectorTileFeature=L3;V0.VectorTileLayer=B3;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=JB,i=pD,a=mD,l=ZN,f=z3,d=V0;function u(Z){return Z&&typeof Z=="object"&&"default"in Z?Z:{default:Z}}var w=u(a),E=u(l),I=u(f),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof za<"u"?za:typeof self<"u"?self:{};function T(Z){var G={exports:{}};return Z(G,G.exports),G.exports}var R=T(function(Z,G){(function(X,U){Z.exports=U(E.default)})(b,function(ae){return function(X){var U={};function P(z){if(U[z])return U[z].exports;var B=U[z]={i:z,l:!1,exports:{}};return X[z].call(B.exports,B,B.exports,P),B.l=!0,B.exports}return P.m=X,P.c=U,P.d=function(z,B,Q){P.o(z,B)||Object.defineProperty(z,B,{enumerable:!0,get:Q})},P.r=function(z){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})},P.t=function(z,B){if(B&1&&(z=P(z)),B&8||B&4&&typeof z=="object"&&z&&z.__esModule)return z;var Q=Object.create(null);if(P.r(Q),Object.defineProperty(Q,"default",{enumerable:!0,value:z}),B&2&&typeof z!="string")for(var q in z)P.d(Q,q,(function(ve){return z[ve]}).bind(null,q));return Q},P.n=function(z){var B=z&&z.__esModule?function(){return z.default}:function(){return z};return P.d(B,"a",B),B},P.o=function(z,B){return Object.prototype.hasOwnProperty.call(z,B)},P.p="",P(P.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(X,U,P){P.r(U),P.d(U,"CacheControl",function(){return Pe}),P.d(U,"parse",function(){return Ne}),P.d(U,"format",function(){return Ie}),P("./node_modules/core-js/modules/es6.array.from.js"),P("./node_modules/core-js/modules/es6.function.name.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/core-js/modules/web.dom.iterable.js"),P("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.regexp.split.js"),P("./node_modules/core-js/modules/es6.number.is-finite.js");function z(Oe,Ze){return ye(Oe)||ve(Oe,Ze)||Q(Oe,Ze)||B()}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(Oe,Ze){if(Oe){if(typeof Oe=="string")return q(Oe,Ze);var He=Object.prototype.toString.call(Oe).slice(8,-1);if(He==="Object"&&Oe.constructor&&(He=Oe.constructor.name),He==="Map"||He==="Set")return Array.from(Oe);if(He==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(He))return q(Oe,Ze)}}function q(Oe,Ze){(Ze==null||Ze>Oe.length)&&(Ze=Oe.length);for(var He=0,ot=new Array(Ze);He<Ze;He++)ot[He]=Oe[He];return ot}function ve(Oe,Ze){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Oe)))){var He=[],ot=!0,ft=!1,_t=void 0;try{for(var Mt=Oe[Symbol.iterator](),mt;!(ot=(mt=Mt.next()).done)&&(He.push(mt.value),!(Ze&&He.length===Ze));ot=!0);}catch(wt){ft=!0,_t=wt}finally{try{!ot&&Mt.return!=null&&Mt.return()}finally{if(ft)throw _t}}return He}}function ye(Oe){if(Array.isArray(Oe))return Oe}function fe(Oe,Ze){if(!(Oe instanceof Ze))throw new TypeError("Cannot call a class as a function")}function oe(Oe,Ze){for(var He=0;He<Ze.length;He++){var ot=Ze[He];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Oe,ot.key,ot)}}function he(Oe,Ze,He){return Ze&&oe(Oe.prototype,Ze),He&&oe(Oe,He),Oe}var J=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,re={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function de(Oe){return Oe===null}function we(Oe){if(!Oe)return null;var Ze=parseInt(Oe,10);return!Number.isFinite(Ze)||Ze<0?null:Ze}var Pe=function(){function Oe(){fe(this,Oe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return he(Oe,[{key:"parse",value:function(He){if(!He||He.length===0)return this;var ot={},ft=He.match(J)||[];return Array.prototype.forEach.call(ft,function(_t){var Mt=_t.split("=",2),mt=z(Mt,1),wt=mt[0],Wt=null;Mt.length>1&&(Wt=Mt[1].trim()),ot[wt.toLowerCase()]=Wt}),this.maxAge=we(ot[re.maxAge]),this.sharedMaxAge=we(ot[re.sharedMaxAge]),this.maxStale=de(ot[re.maxStale]),this.maxStaleDuration=we(ot[re.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=we(ot[re.minFresh]),this.immutable=de(ot[re.immutable]),this.mustRevalidate=de(ot[re.mustRevalidate]),this.noCache=de(ot[re.noCache]),this.noStore=de(ot[re.noStore]),this.noTransform=de(ot[re.noTransform]),this.onlyIfCached=de(ot[re.onlyIfCached]),this.private=de(ot[re.private]),this.proxyRevalidate=de(ot[re.proxyRevalidate]),this.public=de(ot[re.public]),this}},{key:"format",value:function(){var He=[];return this.maxAge&&He.push("".concat(re.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&He.push("".concat(re.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?He.push("".concat(re.maxStale,"=").concat(this.maxStaleDuration)):He.push(re.maxStale)),this.minFresh&&He.push("".concat(re.minFresh,"=").concat(this.minFresh)),this.immutable&&He.push(re.immutable),this.mustRevalidate&&He.push(re.mustRevalidate),this.noCache&&He.push(re.noCache),this.noStore&&He.push(re.noStore),this.noTransform&&He.push(re.noTransform),this.onlyIfCached&&He.push(re.onlyIfCached),this.private&&He.push(re.private),this.proxyRevalidate&&He.push(re.proxyRevalidate),this.public&&He.push(re.public),He.join(", ")}}]),Oe}();function Ne(Oe){var Ze=new Pe;return Ze.parse(Oe)}function Ie(Oe){return Oe instanceof Pe?Oe.format():Pe.prototype.format.call(Oe)}U.default={CacheControl:Pe,parse:Ne,format:Ie}},"./node_modules/charenc/charenc.js":function(X,U){var P={utf8:{stringToBytes:function(z){return P.bin.stringToBytes(unescape(encodeURIComponent(z)))},bytesToString:function(z){return decodeURIComponent(escape(P.bin.bytesToString(z)))}},bin:{stringToBytes:function(z){for(var B=[],Q=0;Q<z.length;Q++)B.push(z.charCodeAt(Q)&255);return B},bytesToString:function(z){for(var B=[],Q=0;Q<z.length;Q++)B.push(String.fromCharCode(z[Q]));return B.join("")}}};X.exports=P},"./node_modules/core-js/modules/_a-function.js":function(X,U){X.exports=function(P){if(typeof P!="function")throw TypeError(P+" is not a function!");return P}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_wks.js")("unscopables"),B=Array.prototype;B[z]==null&&P("./node_modules/core-js/modules/_hide.js")(B,z,{}),X.exports=function(Q){B[z][Q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_string-at.js")(!0);X.exports=function(B,Q,q){return Q+(q?z(B,Q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_is-object.js");X.exports=function(B){if(!z(B))throw TypeError(B+" is not an object!");return B}},"./node_modules/core-js/modules/_array-includes.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_to-iobject.js"),B=P("./node_modules/core-js/modules/_to-length.js"),Q=P("./node_modules/core-js/modules/_to-absolute-index.js");X.exports=function(q){return function(ve,ye,fe){var oe=z(ve),he=B(oe.length),J=Q(fe,he),re;if(q&&ye!=ye){for(;he>J;)if(re=oe[J++],re!=re)return!0}else for(;he>J;J++)if((q||J in oe)&&oe[J]===ye)return q||J||0;return!q&&-1}}},"./node_modules/core-js/modules/_bind.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_a-function.js"),B=P("./node_modules/core-js/modules/_is-object.js"),Q=P("./node_modules/core-js/modules/_invoke.js"),q=[].slice,ve={},ye=function(fe,oe,he){if(!(oe in ve)){for(var J=[],re=0;re<oe;re++)J[re]="a["+re+"]";ve[oe]=Function("F,a","return new F("+J.join(",")+")")}return ve[oe](fe,he)};X.exports=Function.bind||function(oe){var he=z(this),J=q.call(arguments,1),re=function(){var de=J.concat(q.call(arguments));return this instanceof re?ye(he,de.length,de):Q(he,de,oe)};return B(he.prototype)&&(re.prototype=he.prototype),re}},"./node_modules/core-js/modules/_classof.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_cof.js"),B=P("./node_modules/core-js/modules/_wks.js")("toStringTag"),Q=z(function(){return arguments}())=="Arguments",q=function(ve,ye){try{return ve[ye]}catch{}};X.exports=function(ve){var ye,fe,oe;return ve===void 0?"Undefined":ve===null?"Null":typeof(fe=q(ye=Object(ve),B))=="string"?fe:Q?z(ye):(oe=z(ye))=="Object"&&typeof ye.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(X,U){var P={}.toString;X.exports=function(z){return P.call(z).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(X,U){var P=X.exports={version:"2.6.12"};typeof __e=="number"&&(__e=P)},"./node_modules/core-js/modules/_create-property.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_property-desc.js");X.exports=function(Q,q,ve){q in Q?z.f(Q,q,B(0,ve)):Q[q]=ve}},"./node_modules/core-js/modules/_ctx.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_a-function.js");X.exports=function(B,Q,q){if(z(B),Q===void 0)return B;switch(q){case 1:return function(ve){return B.call(Q,ve)};case 2:return function(ve,ye){return B.call(Q,ve,ye)};case 3:return function(ve,ye,fe){return B.call(Q,ve,ye,fe)}}return function(){return B.apply(Q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(X,U){X.exports=function(P){if(P==null)throw TypeError("Can't call method on  "+P);return P}},"./node_modules/core-js/modules/_descriptors.js":function(X,U,P){X.exports=!P("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_is-object.js"),B=P("./node_modules/core-js/modules/_global.js").document,Q=z(B)&&z(B.createElement);X.exports=function(q){return Q?B.createElement(q):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(X,U){X.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-keys.js"),B=P("./node_modules/core-js/modules/_object-gops.js"),Q=P("./node_modules/core-js/modules/_object-pie.js");X.exports=function(q){var ve=z(q),ye=B.f;if(ye)for(var fe=ye(q),oe=Q.f,he=0,J;fe.length>he;)oe.call(q,J=fe[he++])&&ve.push(J);return ve}},"./node_modules/core-js/modules/_export.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_core.js"),Q=P("./node_modules/core-js/modules/_hide.js"),q=P("./node_modules/core-js/modules/_redefine.js"),ve=P("./node_modules/core-js/modules/_ctx.js"),ye="prototype",fe=function(oe,he,J){var re=oe&fe.F,de=oe&fe.G,we=oe&fe.S,Pe=oe&fe.P,Ne=oe&fe.B,Ie=de?z:we?z[he]||(z[he]={}):(z[he]||{})[ye],Oe=de?B:B[he]||(B[he]={}),Ze=Oe[ye]||(Oe[ye]={}),He,ot,ft,_t;de&&(J=he);for(He in J)ot=!re&&Ie&&Ie[He]!==void 0,ft=(ot?Ie:J)[He],_t=Ne&&ot?ve(ft,z):Pe&&typeof ft=="function"?ve(Function.call,ft):ft,Ie&&q(Ie,He,ft,oe&fe.U),Oe[He]!=ft&&Q(Oe,He,_t),Pe&&Ze[He]!=ft&&(Ze[He]=ft)};z.core=B,fe.F=1,fe.G=2,fe.S=4,fe.P=8,fe.B=16,fe.W=32,fe.U=64,fe.R=128,X.exports=fe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(B){var Q=/./;try{"/./"[B](Q)}catch{try{return Q[z]=!1,!"/./"[B](Q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(X,U){X.exports=function(P){try{return!!P()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(X,U,P){P("./node_modules/core-js/modules/es6.regexp.exec.js");var z=P("./node_modules/core-js/modules/_redefine.js"),B=P("./node_modules/core-js/modules/_hide.js"),Q=P("./node_modules/core-js/modules/_fails.js"),q=P("./node_modules/core-js/modules/_defined.js"),ve=P("./node_modules/core-js/modules/_wks.js"),ye=P("./node_modules/core-js/modules/_regexp-exec.js"),fe=ve("species"),oe=!Q(function(){var J=/./;return J.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(J,"$<a>")!=="7"}),he=function(){var J=/(?:)/,re=J.exec;J.exec=function(){return re.apply(this,arguments)};var de="ab".split(J);return de.length===2&&de[0]==="a"&&de[1]==="b"}();X.exports=function(J,re,de){var we=ve(J),Pe=!Q(function(){var ot={};return ot[we]=function(){return 7},""[J](ot)!=7}),Ne=Pe?!Q(function(){var ot=!1,ft=/a/;return ft.exec=function(){return ot=!0,null},J==="split"&&(ft.constructor={},ft.constructor[fe]=function(){return ft}),ft[we](""),!ot}):void 0;if(!Pe||!Ne||J==="replace"&&!oe||J==="split"&&!he){var Ie=/./[we],Oe=de(q,we,""[J],function(ft,_t,Mt,mt,wt){return _t.exec===ye?Pe&&!wt?{done:!0,value:Ie.call(_t,Mt,mt)}:{done:!0,value:ft.call(Mt,_t,mt)}:{done:!1}}),Ze=Oe[0],He=Oe[1];z(String.prototype,J,Ze),B(RegExp.prototype,we,re==2?function(ot,ft){return He.call(ot,this,ft)}:function(ot){return He.call(ot,this)})}}},"./node_modules/core-js/modules/_flags.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_an-object.js");X.exports=function(){var B=z(this),Q="";return B.global&&(Q+="g"),B.ignoreCase&&(Q+="i"),B.multiline&&(Q+="m"),B.unicode&&(Q+="u"),B.sticky&&(Q+="y"),Q}},"./node_modules/core-js/modules/_function-to-string.js":function(X,U,P){X.exports=P("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(X,U){var P=X.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=P)},"./node_modules/core-js/modules/_has.js":function(X,U){var P={}.hasOwnProperty;X.exports=function(z,B){return P.call(z,B)}},"./node_modules/core-js/modules/_hide.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_property-desc.js");X.exports=P("./node_modules/core-js/modules/_descriptors.js")?function(Q,q,ve){return z.f(Q,q,B(1,ve))}:function(Q,q,ve){return Q[q]=ve,Q}},"./node_modules/core-js/modules/_html.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_global.js").document;X.exports=z&&z.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(X,U,P){X.exports=!P("./node_modules/core-js/modules/_descriptors.js")&&!P("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(P("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(X,U){X.exports=function(P,z,B){var Q=B===void 0;switch(z.length){case 0:return Q?P():P.call(B);case 1:return Q?P(z[0]):P.call(B,z[0]);case 2:return Q?P(z[0],z[1]):P.call(B,z[0],z[1]);case 3:return Q?P(z[0],z[1],z[2]):P.call(B,z[0],z[1],z[2]);case 4:return Q?P(z[0],z[1],z[2],z[3]):P.call(B,z[0],z[1],z[2],z[3])}return P.apply(B,z)}},"./node_modules/core-js/modules/_iobject.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_cof.js");X.exports=Object("z").propertyIsEnumerable(0)?Object:function(B){return z(B)=="String"?B.split(""):Object(B)}},"./node_modules/core-js/modules/_is-array-iter.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_iterators.js"),B=P("./node_modules/core-js/modules/_wks.js")("iterator"),Q=Array.prototype;X.exports=function(q){return q!==void 0&&(z.Array===q||Q[B]===q)}},"./node_modules/core-js/modules/_is-array.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_cof.js");X.exports=Array.isArray||function(Q){return z(Q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(X,U){X.exports=function(P){return typeof P=="object"?P!==null:typeof P=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_is-object.js"),B=P("./node_modules/core-js/modules/_cof.js"),Q=P("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(q){var ve;return z(q)&&((ve=q[Q])!==void 0?!!ve:B(q)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_an-object.js");X.exports=function(B,Q,q,ve){try{return ve?Q(z(q)[0],q[1]):Q(q)}catch(fe){var ye=B.return;throw ye!==void 0&&z(ye.call(B)),fe}}},"./node_modules/core-js/modules/_iter-create.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-create.js"),B=P("./node_modules/core-js/modules/_property-desc.js"),Q=P("./node_modules/core-js/modules/_set-to-string-tag.js"),q={};P("./node_modules/core-js/modules/_hide.js")(q,P("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),X.exports=function(ve,ye,fe){ve.prototype=z(q,{next:B(1,fe)}),Q(ve,ye+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_library.js"),B=P("./node_modules/core-js/modules/_export.js"),Q=P("./node_modules/core-js/modules/_redefine.js"),q=P("./node_modules/core-js/modules/_hide.js"),ve=P("./node_modules/core-js/modules/_iterators.js"),ye=P("./node_modules/core-js/modules/_iter-create.js"),fe=P("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=P("./node_modules/core-js/modules/_object-gpo.js"),he=P("./node_modules/core-js/modules/_wks.js")("iterator"),J=!([].keys&&"next"in[].keys()),re="@@iterator",de="keys",we="values",Pe=function(){return this};X.exports=function(Ne,Ie,Oe,Ze,He,ot,ft){ye(Oe,Ie,Ze);var _t=function(N){if(!J&&N in Wt)return Wt[N];switch(N){case de:return function(){return new Oe(this,N)};case we:return function(){return new Oe(this,N)}}return function(){return new Oe(this,N)}},Mt=Ie+" Iterator",mt=He==we,wt=!1,Wt=Ne.prototype,Lt=Wt[he]||Wt[re]||He&&Wt[He],ur=Lt||_t(He),it=He?mt?_t("entries"):ur:void 0,wr=Ie=="Array"&&Wt.entries||Lt,cr,Ht,Se;if(wr&&(Se=oe(wr.call(new Ne)),Se!==Object.prototype&&Se.next&&(fe(Se,Mt,!0),!z&&typeof Se[he]!="function"&&q(Se,he,Pe))),mt&&Lt&&Lt.name!==we&&(wt=!0,ur=function(){return Lt.call(this)}),(!z||ft)&&(J||wt||!Wt[he])&&q(Wt,he,ur),ve[Ie]=ur,ve[Mt]=Pe,He)if(cr={values:mt?ur:_t(we),keys:ot?ur:_t(de),entries:it},ft)for(Ht in cr)Ht in Wt||Q(Wt,Ht,cr[Ht]);else B(B.P+B.F*(J||wt),Ie,cr);return cr}},"./node_modules/core-js/modules/_iter-detect.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_wks.js")("iterator"),B=!1;try{var Q=[7][z]();Q.return=function(){B=!0},Array.from(Q,function(){throw 2})}catch{}X.exports=function(q,ve){if(!ve&&!B)return!1;var ye=!1;try{var fe=[7],oe=fe[z]();oe.next=function(){return{done:ye=!0}},fe[z]=function(){return oe},q(fe)}catch{}return ye}},"./node_modules/core-js/modules/_iter-step.js":function(X,U){X.exports=function(P,z){return{value:z,done:!!P}}},"./node_modules/core-js/modules/_iterators.js":function(X,U){X.exports={}},"./node_modules/core-js/modules/_library.js":function(X,U){X.exports=!1},"./node_modules/core-js/modules/_meta.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_uid.js")("meta"),B=P("./node_modules/core-js/modules/_is-object.js"),Q=P("./node_modules/core-js/modules/_has.js"),q=P("./node_modules/core-js/modules/_object-dp.js").f,ve=0,ye=Object.isExtensible||function(){return!0},fe=!P("./node_modules/core-js/modules/_fails.js")(function(){return ye(Object.preventExtensions({}))}),oe=function(we){q(we,z,{value:{i:"O"+ ++ve,w:{}}})},he=function(we,Pe){if(!B(we))return typeof we=="symbol"?we:(typeof we=="string"?"S":"P")+we;if(!Q(we,z)){if(!ye(we))return"F";if(!Pe)return"E";oe(we)}return we[z].i},J=function(we,Pe){if(!Q(we,z)){if(!ye(we))return!0;if(!Pe)return!1;oe(we)}return we[z].w},re=function(we){return fe&&de.NEED&&ye(we)&&!Q(we,z)&&oe(we),we},de=X.exports={KEY:z,NEED:!1,fastKey:he,getWeak:J,onFreeze:re}},"./node_modules/core-js/modules/_object-create.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_object-dps.js"),Q=P("./node_modules/core-js/modules/_enum-bug-keys.js"),q=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},ye="prototype",fe=function(){var oe=P("./node_modules/core-js/modules/_dom-create.js")("iframe"),he=Q.length,J="<",re=">",de;for(oe.style.display="none",P("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",de=oe.contentWindow.document,de.open(),de.write(J+"script"+re+"document.F=Object"+J+"/script"+re),de.close(),fe=de.F;he--;)delete fe[ye][Q[he]];return fe()};X.exports=Object.create||function(he,J){var re;return he!==null?(ve[ye]=z(he),re=new ve,ve[ye]=null,re[q]=he):re=fe(),J===void 0?re:B(re,J)}},"./node_modules/core-js/modules/_object-dp.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_ie8-dom-define.js"),Q=P("./node_modules/core-js/modules/_to-primitive.js"),q=Object.defineProperty;U.f=P("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ye,fe,oe){if(z(ye),fe=Q(fe,!0),z(oe),B)try{return q(ye,fe,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(ye[fe]=oe.value),ye}},"./node_modules/core-js/modules/_object-dps.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_an-object.js"),Q=P("./node_modules/core-js/modules/_object-keys.js");X.exports=P("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,ye){B(ve);for(var fe=Q(ye),oe=fe.length,he=0,J;oe>he;)z.f(ve,J=fe[he++],ye[J]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-pie.js"),B=P("./node_modules/core-js/modules/_property-desc.js"),Q=P("./node_modules/core-js/modules/_to-iobject.js"),q=P("./node_modules/core-js/modules/_to-primitive.js"),ve=P("./node_modules/core-js/modules/_has.js"),ye=P("./node_modules/core-js/modules/_ie8-dom-define.js"),fe=Object.getOwnPropertyDescriptor;U.f=P("./node_modules/core-js/modules/_descriptors.js")?fe:function(he,J){if(he=Q(he),J=q(J,!0),ye)try{return fe(he,J)}catch{}if(ve(he,J))return B(!z.f.call(he,J),he[J])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_to-iobject.js"),B=P("./node_modules/core-js/modules/_object-gopn.js").f,Q={}.toString,q=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(ye){try{return B(ye)}catch{return q.slice()}};X.exports.f=function(fe){return q&&Q.call(fe)=="[object Window]"?ve(fe):B(z(fe))}},"./node_modules/core-js/modules/_object-gopn.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-keys-internal.js"),B=P("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");U.f=Object.getOwnPropertyNames||function(q){return z(q,B)}},"./node_modules/core-js/modules/_object-gops.js":function(X,U){U.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_has.js"),B=P("./node_modules/core-js/modules/_to-object.js"),Q=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),q=Object.prototype;X.exports=Object.getPrototypeOf||function(ve){return ve=B(ve),z(ve,Q)?ve[Q]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?q:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_has.js"),B=P("./node_modules/core-js/modules/_to-iobject.js"),Q=P("./node_modules/core-js/modules/_array-includes.js")(!1),q=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");X.exports=function(ve,ye){var fe=B(ve),oe=0,he=[],J;for(J in fe)J!=q&&z(fe,J)&&he.push(J);for(;ye.length>oe;)z(fe,J=ye[oe++])&&(~Q(he,J)||he.push(J));return he}},"./node_modules/core-js/modules/_object-keys.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-keys-internal.js"),B=P("./node_modules/core-js/modules/_enum-bug-keys.js");X.exports=Object.keys||function(q){return z(q,B)}},"./node_modules/core-js/modules/_object-pie.js":function(X,U){U.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-gopn.js"),B=P("./node_modules/core-js/modules/_object-gops.js"),Q=P("./node_modules/core-js/modules/_an-object.js"),q=P("./node_modules/core-js/modules/_global.js").Reflect;X.exports=q&&q.ownKeys||function(ye){var fe=z.f(Q(ye)),oe=B.f;return oe?fe.concat(oe(ye)):fe}},"./node_modules/core-js/modules/_property-desc.js":function(X,U){X.exports=function(P,z){return{enumerable:!(P&1),configurable:!(P&2),writable:!(P&4),value:z}}},"./node_modules/core-js/modules/_redefine.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_hide.js"),Q=P("./node_modules/core-js/modules/_has.js"),q=P("./node_modules/core-js/modules/_uid.js")("src"),ve=P("./node_modules/core-js/modules/_function-to-string.js"),ye="toString",fe=(""+ve).split(ye);P("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return ve.call(oe)},(X.exports=function(oe,he,J,re){var de=typeof J=="function";de&&(Q(J,"name")||B(J,"name",he)),oe[he]!==J&&(de&&(Q(J,q)||B(J,q,oe[he]?""+oe[he]:fe.join(String(he)))),oe===z?oe[he]=J:re?oe[he]?oe[he]=J:B(oe,he,J):(delete oe[he],B(oe,he,J)))})(Function.prototype,ye,function(){return typeof this=="function"&&this[q]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_classof.js"),B=RegExp.prototype.exec;X.exports=function(Q,q){var ve=Q.exec;if(typeof ve=="function"){var ye=ve.call(Q,q);if(typeof ye!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ye}if(z(Q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return B.call(Q,q)}},"./node_modules/core-js/modules/_regexp-exec.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_flags.js"),B=RegExp.prototype.exec,Q=String.prototype.replace,q=B,ve="lastIndex",ye=function(){var he=/a/,J=/b*/g;return B.call(he,"a"),B.call(J,"a"),he[ve]!==0||J[ve]!==0}(),fe=/()??/.exec("")[1]!==void 0,oe=ye||fe;oe&&(q=function(J){var re=this,de,we,Pe,Ne;return fe&&(we=new RegExp("^"+re.source+"$(?!\\s)",z.call(re))),ye&&(de=re[ve]),Pe=B.call(re,J),ye&&Pe&&(re[ve]=re.global?Pe.index+Pe[0].length:de),fe&&Pe&&Pe.length>1&&Q.call(Pe[0],we,function(){for(Ne=1;Ne<arguments.length-2;Ne++)arguments[Ne]===void 0&&(Pe[Ne]=void 0)}),Pe}),X.exports=q},"./node_modules/core-js/modules/_set-to-string-tag.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-dp.js").f,B=P("./node_modules/core-js/modules/_has.js"),Q=P("./node_modules/core-js/modules/_wks.js")("toStringTag");X.exports=function(q,ve,ye){q&&!B(q=ye?q:q.prototype,Q)&&z(q,Q,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_shared.js")("keys"),B=P("./node_modules/core-js/modules/_uid.js");X.exports=function(Q){return z[Q]||(z[Q]=B(Q))}},"./node_modules/core-js/modules/_shared.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_core.js"),B=P("./node_modules/core-js/modules/_global.js"),Q="__core-js_shared__",q=B[Q]||(B[Q]={});(X.exports=function(ve,ye){return q[ve]||(q[ve]=ye!==void 0?ye:{})})("versions",[]).push({version:z.version,mode:P("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_a-function.js"),Q=P("./node_modules/core-js/modules/_wks.js")("species");X.exports=function(q,ve){var ye=z(q).constructor,fe;return ye===void 0||(fe=z(ye)[Q])==null?ve:B(fe)}},"./node_modules/core-js/modules/_string-at.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),B=P("./node_modules/core-js/modules/_defined.js");X.exports=function(Q){return function(q,ve){var ye=String(B(q)),fe=z(ve),oe=ye.length,he,J;return fe<0||fe>=oe?Q?"":void 0:(he=ye.charCodeAt(fe),he<55296||he>56319||fe+1===oe||(J=ye.charCodeAt(fe+1))<56320||J>57343?Q?ye.charAt(fe):he:Q?ye.slice(fe,fe+2):(he-55296<<10)+(J-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_is-regexp.js"),B=P("./node_modules/core-js/modules/_defined.js");X.exports=function(Q,q,ve){if(z(q))throw TypeError("String#"+ve+" doesn't accept regex!");return String(B(Q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),B=Math.max,Q=Math.min;X.exports=function(q,ve){return q=z(q),q<0?B(q+ve,0):Q(q,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(X,U){var P=Math.ceil,z=Math.floor;X.exports=function(B){return isNaN(B=+B)?0:(B>0?z:P)(B)}},"./node_modules/core-js/modules/_to-iobject.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_iobject.js"),B=P("./node_modules/core-js/modules/_defined.js");X.exports=function(Q){return z(B(Q))}},"./node_modules/core-js/modules/_to-length.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),B=Math.min;X.exports=function(Q){return Q>0?B(z(Q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_defined.js");X.exports=function(B){return Object(z(B))}},"./node_modules/core-js/modules/_to-primitive.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_is-object.js");X.exports=function(B,Q){if(!z(B))return B;var q,ve;if(Q&&typeof(q=B.toString)=="function"&&!z(ve=q.call(B))||typeof(q=B.valueOf)=="function"&&!z(ve=q.call(B))||!Q&&typeof(q=B.toString)=="function"&&!z(ve=q.call(B)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(X,U){var P=0,z=Math.random();X.exports=function(B){return"Symbol(".concat(B===void 0?"":B,")_",(++P+z).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_core.js"),Q=P("./node_modules/core-js/modules/_library.js"),q=P("./node_modules/core-js/modules/_wks-ext.js"),ve=P("./node_modules/core-js/modules/_object-dp.js").f;X.exports=function(ye){var fe=B.Symbol||(B.Symbol=Q?{}:z.Symbol||{});ye.charAt(0)!="_"&&!(ye in fe)&&ve(fe,ye,{value:q.f(ye)})}},"./node_modules/core-js/modules/_wks-ext.js":function(X,U,P){U.f=P("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_shared.js")("wks"),B=P("./node_modules/core-js/modules/_uid.js"),Q=P("./node_modules/core-js/modules/_global.js").Symbol,q=typeof Q=="function",ve=X.exports=function(ye){return z[ye]||(z[ye]=q&&Q[ye]||(q?Q:B)("Symbol."+ye))};ve.store=z},"./node_modules/core-js/modules/core.get-iterator-method.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_classof.js"),B=P("./node_modules/core-js/modules/_wks.js")("iterator"),Q=P("./node_modules/core-js/modules/_iterators.js");X.exports=P("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(q){if(q!=null)return q[B]||q["@@iterator"]||Q[z(q)]}},"./node_modules/core-js/modules/es6.array.from.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_ctx.js"),B=P("./node_modules/core-js/modules/_export.js"),Q=P("./node_modules/core-js/modules/_to-object.js"),q=P("./node_modules/core-js/modules/_iter-call.js"),ve=P("./node_modules/core-js/modules/_is-array-iter.js"),ye=P("./node_modules/core-js/modules/_to-length.js"),fe=P("./node_modules/core-js/modules/_create-property.js"),oe=P("./node_modules/core-js/modules/core.get-iterator-method.js");B(B.S+B.F*!P("./node_modules/core-js/modules/_iter-detect.js")(function(he){Array.from(he)}),"Array",{from:function(J){var re=Q(J),de=typeof this=="function"?this:Array,we=arguments.length,Pe=we>1?arguments[1]:void 0,Ne=Pe!==void 0,Ie=0,Oe=oe(re),Ze,He,ot,ft;if(Ne&&(Pe=z(Pe,we>2?arguments[2]:void 0,2)),Oe!=null&&!(de==Array&&ve(Oe)))for(ft=Oe.call(re),He=new de;!(ot=ft.next()).done;Ie++)fe(He,Ie,Ne?q(ft,Pe,[ot.value,Ie],!0):ot.value);else for(Ze=ye(re.length),He=new de(Ze);Ze>Ie;Ie++)fe(He,Ie,Ne?Pe(re[Ie],Ie):re[Ie]);return He.length=Ie,He}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_add-to-unscopables.js"),B=P("./node_modules/core-js/modules/_iter-step.js"),Q=P("./node_modules/core-js/modules/_iterators.js"),q=P("./node_modules/core-js/modules/_to-iobject.js");X.exports=P("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,ye){this._t=q(ve),this._i=0,this._k=ye},function(){var ve=this._t,ye=this._k,fe=this._i++;return!ve||fe>=ve.length?(this._t=void 0,B(1)):ye=="keys"?B(0,fe):ye=="values"?B(0,ve[fe]):B(0,[fe,ve[fe]])},"values"),Q.Arguments=Q.Array,z("keys"),z("values"),z("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_export.js");z(z.P,"Function",{bind:P("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_object-dp.js").f,B=Function.prototype,Q=/^\s*function ([^ (]*)/,q="name";q in B||P("./node_modules/core-js/modules/_descriptors.js")&&z(B,q,{configurable:!0,get:function(){try{return(""+this).match(Q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_global.js").isFinite;z(z.S,"Number",{isFinite:function(q){return typeof q=="number"&&B(q)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_classof.js"),B={};B[P("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",B+""!="[object z]"&&P("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+z(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_regexp-exec.js");P("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:z!==/./.exec},{exec:z})},"./node_modules/core-js/modules/es6.regexp.split.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_is-regexp.js"),B=P("./node_modules/core-js/modules/_an-object.js"),Q=P("./node_modules/core-js/modules/_species-constructor.js"),q=P("./node_modules/core-js/modules/_advance-string-index.js"),ve=P("./node_modules/core-js/modules/_to-length.js"),ye=P("./node_modules/core-js/modules/_regexp-exec-abstract.js"),fe=P("./node_modules/core-js/modules/_regexp-exec.js"),oe=P("./node_modules/core-js/modules/_fails.js"),he=Math.min,J=[].push,re="split",de="length",we="lastIndex",Pe=4294967295,Ne=!oe(function(){});P("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ie,Oe,Ze,He){var ot;return"abbc"[re](/(b)*/)[1]=="c"||"test"[re](/(?:)/,-1)[de]!=4||"ab"[re](/(?:ab)*/)[de]!=2||"."[re](/(.?)(.?)/)[de]!=4||"."[re](/()()/)[de]>1||""[re](/.?/)[de]?ot=function(ft,_t){var Mt=String(this);if(ft===void 0&&_t===0)return[];if(!z(ft))return Ze.call(Mt,ft,_t);for(var mt=[],wt=(ft.ignoreCase?"i":"")+(ft.multiline?"m":"")+(ft.unicode?"u":"")+(ft.sticky?"y":""),Wt=0,Lt=_t===void 0?Pe:_t>>>0,ur=new RegExp(ft.source,wt+"g"),it,wr,cr;(it=fe.call(ur,Mt))&&(wr=ur[we],!(wr>Wt&&(mt.push(Mt.slice(Wt,it.index)),it[de]>1&&it.index<Mt[de]&&J.apply(mt,it.slice(1)),cr=it[0][de],Wt=wr,mt[de]>=Lt)));)ur[we]===it.index&&ur[we]++;return Wt===Mt[de]?(cr||!ur.test(""))&&mt.push(""):mt.push(Mt.slice(Wt)),mt[de]>Lt?mt.slice(0,Lt):mt}:"0"[re](void 0,0)[de]?ot=function(ft,_t){return ft===void 0&&_t===0?[]:Ze.call(this,ft,_t)}:ot=Ze,[function(_t,Mt){var mt=Ie(this),wt=_t==null?void 0:_t[Oe];return wt!==void 0?wt.call(_t,mt,Mt):ot.call(String(mt),_t,Mt)},function(ft,_t){var Mt=He(ot,ft,this,_t,ot!==Ze);if(Mt.done)return Mt.value;var mt=B(ft),wt=String(this),Wt=Q(mt,RegExp),Lt=mt.unicode,ur=(mt.ignoreCase?"i":"")+(mt.multiline?"m":"")+(mt.unicode?"u":"")+(Ne?"y":"g"),it=new Wt(Ne?mt:"^(?:"+mt.source+")",ur),wr=_t===void 0?Pe:_t>>>0;if(wr===0)return[];if(wt.length===0)return ye(it,wt)===null?[wt]:[];for(var cr=0,Ht=0,Se=[];Ht<wt.length;){it.lastIndex=Ne?Ht:0;var N=ye(it,Ne?wt:wt.slice(Ht)),D;if(N===null||(D=he(ve(it.lastIndex+(Ne?0:Ht)),wt.length))===cr)Ht=q(wt,Ht,Lt);else{if(Se.push(wt.slice(cr,Ht)),Se.length===wr)return Se;for(var xe=1;xe<=N.length-1;xe++)if(Se.push(N[xe]),Se.length===wr)return Se;Ht=cr=D}}return Se.push(wt.slice(cr)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_string-context.js"),Q="includes";z(z.P+z.F*P("./node_modules/core-js/modules/_fails-is-regexp.js")(Q),"String",{includes:function(ve){return!!~B(this,ve,Q).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_has.js"),Q=P("./node_modules/core-js/modules/_descriptors.js"),q=P("./node_modules/core-js/modules/_export.js"),ve=P("./node_modules/core-js/modules/_redefine.js"),ye=P("./node_modules/core-js/modules/_meta.js").KEY,fe=P("./node_modules/core-js/modules/_fails.js"),oe=P("./node_modules/core-js/modules/_shared.js"),he=P("./node_modules/core-js/modules/_set-to-string-tag.js"),J=P("./node_modules/core-js/modules/_uid.js"),re=P("./node_modules/core-js/modules/_wks.js"),de=P("./node_modules/core-js/modules/_wks-ext.js"),we=P("./node_modules/core-js/modules/_wks-define.js"),Pe=P("./node_modules/core-js/modules/_enum-keys.js"),Ne=P("./node_modules/core-js/modules/_is-array.js"),Ie=P("./node_modules/core-js/modules/_an-object.js"),Oe=P("./node_modules/core-js/modules/_is-object.js"),Ze=P("./node_modules/core-js/modules/_to-object.js"),He=P("./node_modules/core-js/modules/_to-iobject.js"),ot=P("./node_modules/core-js/modules/_to-primitive.js"),ft=P("./node_modules/core-js/modules/_property-desc.js"),_t=P("./node_modules/core-js/modules/_object-create.js"),Mt=P("./node_modules/core-js/modules/_object-gopn-ext.js"),mt=P("./node_modules/core-js/modules/_object-gopd.js"),wt=P("./node_modules/core-js/modules/_object-gops.js"),Wt=P("./node_modules/core-js/modules/_object-dp.js"),Lt=P("./node_modules/core-js/modules/_object-keys.js"),ur=mt.f,it=Wt.f,wr=Mt.f,cr=z.Symbol,Ht=z.JSON,Se=Ht&&Ht.stringify,N="prototype",D=re("_hidden"),xe=re("toPrimitive"),Xe={}.propertyIsEnumerable,tt=oe("symbol-registry"),ht=oe("symbols"),le=oe("op-symbols"),k=Object[N],$=typeof cr=="function"&&!!wt.f,Te=z.QObject,We=!Te||!Te[N]||!Te[N].findChild,nt=Q&&fe(function(){return _t(it({},"a",{get:function(){return it(this,"a",{value:7}).a}})).a!=7})?function(Be,je,Ue){var ze=ur(k,je);ze&&delete k[je],it(Be,je,Ue),ze&&Be!==k&&it(k,je,ze)}:it,Ve=function(Be){var je=ht[Be]=_t(cr[N]);return je._k=Be,je},Et=$&&typeof cr.iterator=="symbol"?function(Be){return typeof Be=="symbol"}:function(Be){return Be instanceof cr},Ft=function(je,Ue,ze){return je===k&&Ft(le,Ue,ze),Ie(je),Ue=ot(Ue,!0),Ie(ze),B(ht,Ue)?(ze.enumerable?(B(je,D)&&je[D][Ue]&&(je[D][Ue]=!1),ze=_t(ze,{enumerable:ft(0,!1)})):(B(je,D)||it(je,D,ft(1,{})),je[D][Ue]=!0),nt(je,Ue,ze)):it(je,Ue,ze)},pr=function(je,Ue){Ie(je);for(var ze=Pe(Ue=He(Ue)),Qe=0,dt=ze.length,ut;dt>Qe;)Ft(je,ut=ze[Qe++],Ue[ut]);return je},br=function(je,Ue){return Ue===void 0?_t(je):pr(_t(je),Ue)},Rt=function(je){var Ue=Xe.call(this,je=ot(je,!0));return this===k&&B(ht,je)&&!B(le,je)?!1:Ue||!B(this,je)||!B(ht,je)||B(this,D)&&this[D][je]?Ue:!0},$n=function(je,Ue){if(je=He(je),Ue=ot(Ue,!0),!(je===k&&B(ht,Ue)&&!B(le,Ue))){var ze=ur(je,Ue);return ze&&B(ht,Ue)&&!(B(je,D)&&je[D][Ue])&&(ze.enumerable=!0),ze}},ni=function(je){for(var Ue=wr(He(je)),ze=[],Qe=0,dt;Ue.length>Qe;)!B(ht,dt=Ue[Qe++])&&dt!=D&&dt!=ye&&ze.push(dt);return ze},ln=function(je){for(var Ue=je===k,ze=wr(Ue?le:He(je)),Qe=[],dt=0,ut;ze.length>dt;)B(ht,ut=ze[dt++])&&(!Ue||B(k,ut))&&Qe.push(ht[ut]);return Qe};$||(cr=function(){if(this instanceof cr)throw TypeError("Symbol is not a constructor!");var je=J(arguments.length>0?arguments[0]:void 0),Ue=function(ze){this===k&&Ue.call(le,ze),B(this,D)&&B(this[D],je)&&(this[D][je]=!1),nt(this,je,ft(1,ze))};return Q&&We&&nt(k,je,{configurable:!0,set:Ue}),Ve(je)},ve(cr[N],"toString",function(){return this._k}),mt.f=$n,Wt.f=Ft,P("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=ni,P("./node_modules/core-js/modules/_object-pie.js").f=Rt,wt.f=ln,Q&&!P("./node_modules/core-js/modules/_library.js")&&ve(k,"propertyIsEnumerable",Rt,!0),de.f=function(Be){return Ve(re(Be))}),q(q.G+q.W+q.F*!$,{Symbol:cr});for(var Me="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;Me.length>ie;)re(Me[ie++]);for(var ce=Lt(re.store),pe=0;ce.length>pe;)we(ce[pe++]);q(q.S+q.F*!$,"Symbol",{for:function(Be){return B(tt,Be+="")?tt[Be]:tt[Be]=cr(Be)},keyFor:function(je){if(!Et(je))throw TypeError(je+" is not a symbol!");for(var Ue in tt)if(tt[Ue]===je)return Ue},useSetter:function(){We=!0},useSimple:function(){We=!1}}),q(q.S+q.F*!$,"Object",{create:br,defineProperty:Ft,defineProperties:pr,getOwnPropertyDescriptor:$n,getOwnPropertyNames:ni,getOwnPropertySymbols:ln});var Fe=fe(function(){wt.f(1)});q(q.S+q.F*Fe,"Object",{getOwnPropertySymbols:function(je){return wt.f(Ze(je))}}),Ht&&q(q.S+q.F*(!$||fe(function(){var Be=cr();return Se([Be])!="[null]"||Se({a:Be})!="{}"||Se(Object(Be))!="{}"})),"JSON",{stringify:function(je){for(var Ue=[je],ze=1,Qe,dt;arguments.length>ze;)Ue.push(arguments[ze++]);if(dt=Qe=Ue[1],!(!Oe(Qe)&&je===void 0||Et(je)))return Ne(Qe)||(Qe=function(ut,ct){if(typeof dt=="function"&&(ct=dt.call(this,ut,ct)),!Et(ct))return ct}),Ue[1]=Qe,Se.apply(Ht,Ue)}}),cr[N][xe]||P("./node_modules/core-js/modules/_hide.js")(cr[N],xe,cr[N].valueOf),he(cr,"Symbol"),he(Math,"Math",!0),he(z.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_array-includes.js")(!0);z(z.P,"Array",{includes:function(q){return B(this,q,arguments.length>1?arguments[1]:void 0)}}),P("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(X,U,P){var z=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_own-keys.js"),Q=P("./node_modules/core-js/modules/_to-iobject.js"),q=P("./node_modules/core-js/modules/_object-gopd.js"),ve=P("./node_modules/core-js/modules/_create-property.js");z(z.S,"Object",{getOwnPropertyDescriptors:function(fe){for(var oe=Q(fe),he=q.f,J=B(oe),re={},de=0,we,Pe;J.length>de;)Pe=he(oe,we=J[de++]),Pe!==void 0&&ve(re,we,Pe);return re}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(X,U,P){P("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(X,U,P){for(var z=P("./node_modules/core-js/modules/es6.array.iterator.js"),B=P("./node_modules/core-js/modules/_object-keys.js"),Q=P("./node_modules/core-js/modules/_redefine.js"),q=P("./node_modules/core-js/modules/_global.js"),ve=P("./node_modules/core-js/modules/_hide.js"),ye=P("./node_modules/core-js/modules/_iterators.js"),fe=P("./node_modules/core-js/modules/_wks.js"),oe=fe("iterator"),he=fe("toStringTag"),J=ye.Array,re={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},de=B(re),we=0;we<de.length;we++){var Pe=de[we],Ne=re[Pe],Ie=q[Pe],Oe=Ie&&Ie.prototype,Ze;if(Oe&&(Oe[oe]||ve(Oe,oe,J),Oe[he]||ve(Oe,he,Pe),ye[Pe]=J,Ne))for(Ze in z)Oe[Ze]||Q(Oe,Ze,z[Ze],!0)}},"./node_modules/crypt/crypt.js":function(X,U){(function(){var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z={rotl:function(B,Q){return B<<Q|B>>>32-Q},rotr:function(B,Q){return B<<32-Q|B>>>Q},endian:function(B){if(B.constructor==Number)return z.rotl(B,8)&16711935|z.rotl(B,24)&4278255360;for(var Q=0;Q<B.length;Q++)B[Q]=z.endian(B[Q]);return B},randomBytes:function(B){for(var Q=[];B>0;B--)Q.push(Math.floor(Math.random()*256));return Q},bytesToWords:function(B){for(var Q=[],q=0,ve=0;q<B.length;q++,ve+=8)Q[ve>>>5]|=B[q]<<24-ve%32;return Q},wordsToBytes:function(B){for(var Q=[],q=0;q<B.length*32;q+=8)Q.push(B[q>>>5]>>>24-q%32&255);return Q},bytesToHex:function(B){for(var Q=[],q=0;q<B.length;q++)Q.push((B[q]>>>4).toString(16)),Q.push((B[q]&15).toString(16));return Q.join("")},hexToBytes:function(B){for(var Q=[],q=0;q<B.length;q+=2)Q.push(parseInt(B.substr(q,2),16));return Q},bytesToBase64:function(B){for(var Q=[],q=0;q<B.length;q+=3)for(var ve=B[q]<<16|B[q+1]<<8|B[q+2],ye=0;ye<4;ye++)q*8+ye*6<=B.length*8?Q.push(P.charAt(ve>>>6*(3-ye)&63)):Q.push("=");return Q.join("")},base64ToBytes:function(B){B=B.replace(/[^A-Z0-9+\/]/ig,"");for(var Q=[],q=0,ve=0;q<B.length;ve=++q%4)ve!=0&&Q.push((P.indexOf(B.charAt(q-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|P.indexOf(B.charAt(q))>>>6-ve*2);return Q}};X.exports=z})()},"./node_modules/is-buffer/index.js":function(X,U){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */X.exports=function(B){return B!=null&&(P(B)||z(B)||!!B._isBuffer)};function P(B){return!!B.constructor&&typeof B.constructor.isBuffer=="function"&&B.constructor.isBuffer(B)}function z(B){return typeof B.readFloatLE=="function"&&typeof B.slice=="function"&&P(B.slice(0,0))}},"./node_modules/md5/md5.js":function(X,U,P){(function(){var z=P("./node_modules/crypt/crypt.js"),B=P("./node_modules/charenc/charenc.js").utf8,Q=P("./node_modules/is-buffer/index.js"),q=P("./node_modules/charenc/charenc.js").bin,ve=function(ye,fe){ye.constructor==String?fe&&fe.encoding==="binary"?ye=q.stringToBytes(ye):ye=B.stringToBytes(ye):Q(ye)?ye=Array.prototype.slice.call(ye,0):!Array.isArray(ye)&&ye.constructor!==Uint8Array&&(ye=ye.toString());for(var oe=z.bytesToWords(ye),he=ye.length*8,J=1732584193,re=-271733879,de=-1732584194,we=271733878,Pe=0;Pe<oe.length;Pe++)oe[Pe]=(oe[Pe]<<8|oe[Pe]>>>24)&16711935|(oe[Pe]<<24|oe[Pe]>>>8)&4278255360;oe[he>>>5]|=128<<he%32,oe[(he+64>>>9<<4)+14]=he;for(var Ne=ve._ff,Ie=ve._gg,Oe=ve._hh,Ze=ve._ii,Pe=0;Pe<oe.length;Pe+=16){var He=J,ot=re,ft=de,_t=we;J=Ne(J,re,de,we,oe[Pe+0],7,-680876936),we=Ne(we,J,re,de,oe[Pe+1],12,-389564586),de=Ne(de,we,J,re,oe[Pe+2],17,606105819),re=Ne(re,de,we,J,oe[Pe+3],22,-1044525330),J=Ne(J,re,de,we,oe[Pe+4],7,-176418897),we=Ne(we,J,re,de,oe[Pe+5],12,1200080426),de=Ne(de,we,J,re,oe[Pe+6],17,-1473231341),re=Ne(re,de,we,J,oe[Pe+7],22,-45705983),J=Ne(J,re,de,we,oe[Pe+8],7,1770035416),we=Ne(we,J,re,de,oe[Pe+9],12,-1958414417),de=Ne(de,we,J,re,oe[Pe+10],17,-42063),re=Ne(re,de,we,J,oe[Pe+11],22,-1990404162),J=Ne(J,re,de,we,oe[Pe+12],7,1804603682),we=Ne(we,J,re,de,oe[Pe+13],12,-40341101),de=Ne(de,we,J,re,oe[Pe+14],17,-1502002290),re=Ne(re,de,we,J,oe[Pe+15],22,1236535329),J=Ie(J,re,de,we,oe[Pe+1],5,-165796510),we=Ie(we,J,re,de,oe[Pe+6],9,-1069501632),de=Ie(de,we,J,re,oe[Pe+11],14,643717713),re=Ie(re,de,we,J,oe[Pe+0],20,-373897302),J=Ie(J,re,de,we,oe[Pe+5],5,-701558691),we=Ie(we,J,re,de,oe[Pe+10],9,38016083),de=Ie(de,we,J,re,oe[Pe+15],14,-660478335),re=Ie(re,de,we,J,oe[Pe+4],20,-405537848),J=Ie(J,re,de,we,oe[Pe+9],5,568446438),we=Ie(we,J,re,de,oe[Pe+14],9,-1019803690),de=Ie(de,we,J,re,oe[Pe+3],14,-187363961),re=Ie(re,de,we,J,oe[Pe+8],20,1163531501),J=Ie(J,re,de,we,oe[Pe+13],5,-1444681467),we=Ie(we,J,re,de,oe[Pe+2],9,-51403784),de=Ie(de,we,J,re,oe[Pe+7],14,1735328473),re=Ie(re,de,we,J,oe[Pe+12],20,-1926607734),J=Oe(J,re,de,we,oe[Pe+5],4,-378558),we=Oe(we,J,re,de,oe[Pe+8],11,-2022574463),de=Oe(de,we,J,re,oe[Pe+11],16,1839030562),re=Oe(re,de,we,J,oe[Pe+14],23,-35309556),J=Oe(J,re,de,we,oe[Pe+1],4,-1530992060),we=Oe(we,J,re,de,oe[Pe+4],11,1272893353),de=Oe(de,we,J,re,oe[Pe+7],16,-155497632),re=Oe(re,de,we,J,oe[Pe+10],23,-1094730640),J=Oe(J,re,de,we,oe[Pe+13],4,681279174),we=Oe(we,J,re,de,oe[Pe+0],11,-358537222),de=Oe(de,we,J,re,oe[Pe+3],16,-722521979),re=Oe(re,de,we,J,oe[Pe+6],23,76029189),J=Oe(J,re,de,we,oe[Pe+9],4,-640364487),we=Oe(we,J,re,de,oe[Pe+12],11,-421815835),de=Oe(de,we,J,re,oe[Pe+15],16,530742520),re=Oe(re,de,we,J,oe[Pe+2],23,-995338651),J=Ze(J,re,de,we,oe[Pe+0],6,-198630844),we=Ze(we,J,re,de,oe[Pe+7],10,1126891415),de=Ze(de,we,J,re,oe[Pe+14],15,-1416354905),re=Ze(re,de,we,J,oe[Pe+5],21,-57434055),J=Ze(J,re,de,we,oe[Pe+12],6,1700485571),we=Ze(we,J,re,de,oe[Pe+3],10,-1894986606),de=Ze(de,we,J,re,oe[Pe+10],15,-1051523),re=Ze(re,de,we,J,oe[Pe+1],21,-2054922799),J=Ze(J,re,de,we,oe[Pe+8],6,1873313359),we=Ze(we,J,re,de,oe[Pe+15],10,-30611744),de=Ze(de,we,J,re,oe[Pe+6],15,-1560198380),re=Ze(re,de,we,J,oe[Pe+13],21,1309151649),J=Ze(J,re,de,we,oe[Pe+4],6,-145523070),we=Ze(we,J,re,de,oe[Pe+11],10,-1120210379),de=Ze(de,we,J,re,oe[Pe+2],15,718787259),re=Ze(re,de,we,J,oe[Pe+9],21,-343485551),J=J+He>>>0,re=re+ot>>>0,de=de+ft>>>0,we=we+_t>>>0}return z.endian([J,re,de,we])};ve._ff=function(ye,fe,oe,he,J,re,de){var we=ye+(fe&oe|~fe&he)+(J>>>0)+de;return(we<<re|we>>>32-re)+fe},ve._gg=function(ye,fe,oe,he,J,re,de){var we=ye+(fe&he|oe&~he)+(J>>>0)+de;return(we<<re|we>>>32-re)+fe},ve._hh=function(ye,fe,oe,he,J,re,de){var we=ye+(fe^oe^he)+(J>>>0)+de;return(we<<re|we>>>32-re)+fe},ve._ii=function(ye,fe,oe,he,J,re,de){var we=ye+(oe^(fe|~he))+(J>>>0)+de;return(we<<re|we>>>32-re)+fe},ve._blocksize=16,ve._digestsize=16,X.exports=function(ye,fe){if(ye==null)throw new Error("Illegal argument "+ye);var oe=z.wordsToBytes(ve(ye,fe));return fe&&fe.asBytes?oe:fe&&fe.asString?q.bytesToString(oe):z.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(X,U,P){var z=function(B){var Q=Object.prototype,q=Q.hasOwnProperty,ve,ye=typeof Symbol=="function"?Symbol:{},fe=ye.iterator||"@@iterator",oe=ye.asyncIterator||"@@asyncIterator",he=ye.toStringTag||"@@toStringTag";function J(N,D,xe){return Object.defineProperty(N,D,{value:xe,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{J({},"")}catch{J=function(D,xe,Xe){return D[xe]=Xe}}function re(N,D,xe,Xe){var tt=D&&D.prototype instanceof Ze?D:Ze,ht=Object.create(tt.prototype),le=new cr(Xe||[]);return ht._invoke=Lt(N,xe,le),ht}B.wrap=re;function de(N,D,xe){try{return{type:"normal",arg:N.call(D,xe)}}catch(Xe){return{type:"throw",arg:Xe}}}var we="suspendedStart",Pe="suspendedYield",Ne="executing",Ie="completed",Oe={};function Ze(){}function He(){}function ot(){}var ft={};ft[fe]=function(){return this};var _t=Object.getPrototypeOf,Mt=_t&&_t(_t(Ht([])));Mt&&Mt!==Q&&q.call(Mt,fe)&&(ft=Mt);var mt=ot.prototype=Ze.prototype=Object.create(ft);He.prototype=mt.constructor=ot,ot.constructor=He,He.displayName=J(ot,he,"GeneratorFunction");function wt(N){["next","throw","return"].forEach(function(D){J(N,D,function(xe){return this._invoke(D,xe)})})}B.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return D?D===He||(D.displayName||D.name)==="GeneratorFunction":!1},B.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,ot):(N.__proto__=ot,J(N,he,"GeneratorFunction")),N.prototype=Object.create(mt),N},B.awrap=function(N){return{__await:N}};function Wt(N,D){function xe(ht,le,k,$){var Te=de(N[ht],N,le);if(Te.type==="throw")$(Te.arg);else{var We=Te.arg,nt=We.value;return nt&&typeof nt=="object"&&q.call(nt,"__await")?D.resolve(nt.__await).then(function(Ve){xe("next",Ve,k,$)},function(Ve){xe("throw",Ve,k,$)}):D.resolve(nt).then(function(Ve){We.value=Ve,k(We)},function(Ve){return xe("throw",Ve,k,$)})}}var Xe;function tt(ht,le){function k(){return new D(function($,Te){xe(ht,le,$,Te)})}return Xe=Xe?Xe.then(k,k):k()}this._invoke=tt}wt(Wt.prototype),Wt.prototype[oe]=function(){return this},B.AsyncIterator=Wt,B.async=function(N,D,xe,Xe,tt){tt===void 0&&(tt=Promise);var ht=new Wt(re(N,D,xe,Xe),tt);return B.isGeneratorFunction(D)?ht:ht.next().then(function(le){return le.done?le.value:ht.next()})};function Lt(N,D,xe){var Xe=we;return function(ht,le){if(Xe===Ne)throw new Error("Generator is already running");if(Xe===Ie){if(ht==="throw")throw le;return Se()}for(xe.method=ht,xe.arg=le;;){var k=xe.delegate;if(k){var $=ur(k,xe);if($){if($===Oe)continue;return $}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(Xe===we)throw Xe=Ie,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);Xe=Ne;var Te=de(N,D,xe);if(Te.type==="normal"){if(Xe=xe.done?Ie:Pe,Te.arg===Oe)continue;return{value:Te.arg,done:xe.done}}else Te.type==="throw"&&(Xe=Ie,xe.method="throw",xe.arg=Te.arg)}}}function ur(N,D){var xe=N.iterator[D.method];if(xe===ve){if(D.delegate=null,D.method==="throw"){if(N.iterator.return&&(D.method="return",D.arg=ve,ur(N,D),D.method==="throw"))return Oe;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return Oe}var Xe=de(xe,N.iterator,D.arg);if(Xe.type==="throw")return D.method="throw",D.arg=Xe.arg,D.delegate=null,Oe;var tt=Xe.arg;if(!tt)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,Oe;if(tt.done)D[N.resultName]=tt.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=ve);else return tt;return D.delegate=null,Oe}wt(mt),J(mt,he,"Generator"),mt[fe]=function(){return this},mt.toString=function(){return"[object Generator]"};function it(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function wr(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function cr(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(it,this),this.reset(!0)}B.keys=function(N){var D=[];for(var xe in N)D.push(xe);return D.reverse(),function Xe(){for(;D.length;){var tt=D.pop();if(tt in N)return Xe.value=tt,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function Ht(N){if(N){var D=N[fe];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var xe=-1,Xe=function tt(){for(;++xe<N.length;)if(q.call(N,xe))return tt.value=N[xe],tt.done=!1,tt;return tt.value=ve,tt.done=!0,tt};return Xe.next=Xe}}return{next:Se}}B.values=Ht;function Se(){return{value:ve,done:!0}}return cr.prototype={constructor:cr,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(wr),!N)for(var D in this)D.charAt(0)==="t"&&q.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=ve)},stop:function(){this.done=!0;var N=this.tryEntries[0],D=N.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var D=this;function xe($,Te){return ht.type="throw",ht.arg=N,D.next=$,Te&&(D.method="next",D.arg=ve),!!Te}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var tt=this.tryEntries[Xe],ht=tt.completion;if(tt.tryLoc==="root")return xe("end");if(tt.tryLoc<=this.prev){var le=q.call(tt,"catchLoc"),k=q.call(tt,"finallyLoc");if(le&&k){if(this.prev<tt.catchLoc)return xe(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return xe(tt.finallyLoc)}else if(le){if(this.prev<tt.catchLoc)return xe(tt.catchLoc,!0)}else if(k){if(this.prev<tt.finallyLoc)return xe(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,D){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Xe=this.tryEntries[xe];if(Xe.tryLoc<=this.prev&&q.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var tt=Xe;break}}tt&&(N==="break"||N==="continue")&&tt.tryLoc<=D&&D<=tt.finallyLoc&&(tt=null);var ht=tt?tt.completion:{};return ht.type=N,ht.arg=D,tt?(this.method="next",this.next=tt.finallyLoc,Oe):this.complete(ht)},complete:function(N,D){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&D&&(this.next=D),Oe},finish:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.finallyLoc===N)return this.complete(xe.completion,xe.afterLoc),wr(xe),Oe}},catch:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.tryLoc===N){var Xe=xe.completion;if(Xe.type==="throw"){var tt=Xe.arg;wr(xe)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(N,D,xe){return this.delegate={iterator:Ht(N),resultName:D,nextLoc:xe},this.method==="next"&&(this.arg=ve),Oe}},B}(X.exports);try{regeneratorRuntime=z}catch{Function("r","regeneratorRuntime = r")(z)}},"./src/api.js":function(X,U,P){P.r(U),P.d(U,"setup",function(){return Ne}),P.d(U,"setupCache",function(){return Pe}),P("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js");var z=P("axios"),B=P.n(z),Q=P("./src/request.js"),q=P("./src/cache.js");P.d(U,"serializeQuery",function(){return q.serializeQuery});var ve=P("./src/config.js"),ye=P("./src/utilities.js");function fe(Ie,Oe){if(Ie==null)return{};var Ze=oe(Ie,Oe),He,ot;if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(Ie);for(ot=0;ot<ft.length;ot++)He=ft[ot],!(Oe.indexOf(He)>=0)&&Object.prototype.propertyIsEnumerable.call(Ie,He)&&(Ze[He]=Ie[He])}return Ze}function oe(Ie,Oe){if(Ie==null)return{};var Ze={},He=Object.keys(Ie),ot,ft;for(ft=0;ft<He.length;ft++)ot=He[ft],!(Oe.indexOf(ot)>=0)&&(Ze[ot]=Ie[ot]);return Ze}function he(Ie,Oe){var Ze=Object.keys(Ie);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(Ie);Oe&&(He=He.filter(function(ot){return Object.getOwnPropertyDescriptor(Ie,ot).enumerable})),Ze.push.apply(Ze,He)}return Ze}function J(Ie){for(var Oe=1;Oe<arguments.length;Oe++){var Ze=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?he(Object(Ze),!0).forEach(function(He){re(Ie,He,Ze[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(Ze)):he(Object(Ze)).forEach(function(He){Object.defineProperty(Ie,He,Object.getOwnPropertyDescriptor(Ze,He))})}return Ie}function re(Ie,Oe,Ze){return Oe in Ie?Object.defineProperty(Ie,Oe,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):Ie[Oe]=Ze,Ie}function de(Ie,Oe,Ze,He,ot,ft,_t){try{var Mt=Ie[ft](_t),mt=Mt.value}catch(wt){Ze(wt);return}Mt.done?Oe(mt):Promise.resolve(mt).then(He,ot)}function we(Ie){return function(){var Oe=this,Ze=arguments;return new Promise(function(He,ot){var ft=Ie.apply(Oe,Ze);function _t(mt){de(ft,He,ot,_t,Mt,"next",mt)}function Mt(mt){de(ft,He,ot,_t,Mt,"throw",mt)}_t(void 0)})}}function Pe(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie=Object(ve.makeConfig)(Ie);function Oe(He){return Ze.apply(this,arguments)}function Ze(){return Ze=we(regeneratorRuntime.mark(function He(ot){var ft,_t,Mt,mt,wt;return regeneratorRuntime.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return ft=Object(ve.mergeRequestConfig)(Ie,ot),Lt.next=3,Object(Q.default)(ft,ot);case 3:if(_t=Lt.sent,Mt=_t.next,Object(ye.isFunction)(Mt)){Lt.next=7;break}return Lt.abrupt("return",Mt);case 7:return Lt.prev=7,Lt.next=10,ft.adapter(ot);case 10:_t=Lt.sent,Lt.next=16;break;case 13:Lt.prev=13,Lt.t0=Lt.catch(7),mt=Lt.t0;case 16:if(!mt){Lt.next=31;break}if(wt=Object(ye.isFunction)(ft.readOnError)?ft.readOnError(mt,ot):ft.readOnError,!wt){Lt.next=30;break}return Lt.prev=19,ft.acceptStale=!0,Lt.next=23,Object(Q.default)(ft,ot);case 23:return _t=Lt.sent,_t.next.request.stale=!0,Lt.abrupt("return",_t.next);case 28:Lt.prev=28,Lt.t1=Lt.catch(19);case 30:throw mt;case 31:return Lt.abrupt("return",Mt(_t));case 32:case"end":return Lt.stop()}},He,null,[[7,13],[19,28]])})),Ze.apply(this,arguments)}return{adapter:Oe,config:Ie,store:Ie.store}}function Ne(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Oe=J(J(J({},ve.defaults.axios),Ie),{},{cache:J(J({},ve.defaults.axios.cache),Ie.cache)}),Ze=Pe(Oe.cache);Oe.cache;var He=fe(Oe,["cache"]),ot=B.a.create(J(J({},He),{},{adapter:Ze.adapter}));return ot.cache=Ze.store,ot}U.default={setup:Ne,setupCache:Pe,serializeQuery:q.serializeQuery}},"./src/cache.js":function(X,U,P){P.r(U),P.d(U,"read",function(){return he}),P.d(U,"write",function(){return fe}),P.d(U,"key",function(){return re}),P.d(U,"invalidate",function(){return Pe}),P.d(U,"serializeQuery",function(){return Ne}),P("./node_modules/core-js/modules/es7.array.includes.js"),P("./node_modules/core-js/modules/es6.string.includes.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/utilities.js"),B=P("./node_modules/md5/md5.js"),Q=P.n(B),q=P("./src/serialize.js");function ve(Ie,Oe,Ze,He,ot,ft,_t){try{var Mt=Ie[ft](_t),mt=Mt.value}catch(wt){Ze(wt);return}Mt.done?Oe(mt):Promise.resolve(mt).then(He,ot)}function ye(Ie){return function(){var Oe=this,Ze=arguments;return new Promise(function(He,ot){var ft=Ie.apply(Oe,Ze);function _t(mt){ve(ft,He,ot,_t,Mt,"next",mt)}function Mt(mt){ve(ft,He,ot,_t,Mt,"throw",mt)}_t(void 0)})}}function fe(Ie,Oe,Ze){return oe.apply(this,arguments)}function oe(){return oe=ye(regeneratorRuntime.mark(function Ie(Oe,Ze,He){var ot;return regeneratorRuntime.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.prev=0,ot={expires:Oe.expires,data:Object(q.default)(Oe,Ze,He)},_t.next=4,Oe.store.setItem(Oe.uuid,ot);case 4:_t.next=19;break;case 6:if(_t.prev=6,_t.t0=_t.catch(0),Oe.debug("Could not store response",_t.t0),!Oe.clearOnError){_t.next=18;break}return _t.prev=10,_t.next=13,Oe.store.clear();case 13:_t.next=18;break;case 15:_t.prev=15,_t.t1=_t.catch(10),Oe.debug("Could not clear store",_t.t1);case 18:return _t.abrupt("return",!1);case 19:return _t.abrupt("return",!0);case 20:case"end":return _t.stop()}},Ie,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function he(Ie,Oe){return J.apply(this,arguments)}function J(){return J=ye(regeneratorRuntime.mark(function Ie(Oe,Ze){var He,ot,ft,_t,Mt,mt,wt,Wt;return regeneratorRuntime.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return He=Oe.uuid,ot=Oe.ignoreCache,ur.next=3,Oe.store.getItem(He);case 3:if(ft=ur.sent,!(ot||!ft||!ft.data)){ur.next=10;break}throw Oe.debug("cache-miss",Ze.url),_t=new Error,_t.reason="cache-miss",_t.message="Entry not found from cache",_t;case 10:if(Mt=ft.expires,mt=ft.data,wt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!wt&&!Oe.acceptStale&&Mt!==0&&Mt<Date.now())){ur.next=18;break}throw Oe.debug("cache-stale",Ze.url),Wt=new Error,Wt.reason="cache-stale",Wt.message="Entry is stale",Wt;case 18:return Oe.debug(Oe.acceptStale?"cache-hit-stale":"cache-hit",Ze.url),ur.abrupt("return",mt);case 20:case"end":return ur.stop()}},Ie)})),J.apply(this,arguments)}function re(Ie){if(Object(z.isFunction)(Ie.key))return Ie.key;var Oe;return Object(z.isString)(Ie.key)?Oe=function(He){var ot="".concat(He.baseURL?He.baseURL:"").concat(He.url),ft="".concat(Ie.key,"/").concat(ot).concat(Ne(He));return He.data?ft+Q()(He.data):ft}:Oe=function(He){var ot="".concat(He.baseURL?He.baseURL:"").concat(He.url),ft=ot+Ne(He);return He.data?ft+Q()(He.data):ft},Oe}function de(Ie,Oe){return we.apply(this,arguments)}function we(){return we=ye(regeneratorRuntime.mark(function Ie(Oe,Ze){var He;return regeneratorRuntime.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(He=Ze.method.toLowerCase(),!Oe.exclude.methods.includes(He)){ft.next=4;break}return ft.next=4,Oe.store.removeItem(Oe.uuid);case 4:case"end":return ft.stop()}},Ie)})),we.apply(this,arguments)}function Pe(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(z.isFunction)(Ie.invalidate)?Ie.invalidate:de}function Ne(Ie){if(!Ie.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ie.params);var Oe=Ie.params,Ze=Ie.params instanceof URLSearchParams;return Ze||(Oe=new URLSearchParams,Object.keys(Ie.params).forEach(function(He){return Oe.append(He,Ie.params[He])})),"?".concat(Oe.toString())}U.default={read:he,write:fe,key:re,invalidate:Pe,serializeQuery:Ne}},"./src/config.js":function(X,U,P){P.r(U),P.d(U,"defaults",function(){return J}),P.d(U,"makeConfig",function(){return de}),P.d(U,"mergeRequestConfig",function(){return we}),P("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("axios"),B=P.n(z),Q=P("./src/memory.js"),q=P("./src/cache.js");function ve(Pe,Ne){var Ie=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(Pe);Ne&&(Oe=Oe.filter(function(Ze){return Object.getOwnPropertyDescriptor(Pe,Ze).enumerable})),Ie.push.apply(Ie,Oe)}return Ie}function ye(Pe){for(var Ne=1;Ne<arguments.length;Ne++){var Ie=arguments[Ne]!=null?arguments[Ne]:{};Ne%2?ve(Object(Ie),!0).forEach(function(Oe){fe(Pe,Oe,Ie[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(Ie)):ve(Object(Ie)).forEach(function(Oe){Object.defineProperty(Pe,Oe,Object.getOwnPropertyDescriptor(Ie,Oe))})}return Pe}function fe(Pe,Ne,Ie){return Ne in Pe?Object.defineProperty(Pe,Ne,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):Pe[Ne]=Ie,Pe}var oe=function(){},he=function(){for(var Ne,Ie=arguments.length,Oe=new Array(Ie),Ze=0;Ze<Ie;Ze++)Oe[Ze]=arguments[Ze];return(Ne=console).log.apply(Ne,["[axios-cache-adapter]"].concat(Oe))},J={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:B.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},re=["limit","store","adapter","uuid","acceptStale"],de=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=ye(ye(ye({},J.cache),Ne),{},{exclude:ye(ye({},J.cache.exclude),Ne.exclude)});return Ie.key=Object(q.key)(Ie),Ie.invalidate=Object(q.invalidate)(Ie),Ie.debug!==!1?Ie.debug=typeof Ie.debug=="function"?Ie.debug:he:Ie.debug=oe,Ie.store||(Ie.store=new Q.default),Ie.debug("Global cache config",Ie),Ie},we=function(Ne,Ie){var Oe=Ie.cache||{};Oe&&re.forEach(function(He){return Oe[He]?delete Oe[He]:void 0});var Ze=ye(ye(ye({},Ne),Oe),{},{exclude:ye(ye({},Ne.exclude),Oe.exclude)});return Ze.debug===!0&&(Ze.debug=he),Oe.key&&(Ze.key=Object(q.key)(Oe)),Ze.uuid=Ze.key(Ie),Ne.debug("Request config for ".concat(Ie.url),Ze),Ze};U.default={defaults:J,makeConfig:de,mergeRequestConfig:we}},"./src/exclude.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/core-js/modules/es7.array.includes.js"),P("./node_modules/core-js/modules/es6.string.includes.js");var z=P("./src/utilities.js");function B(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=arguments.length>1?arguments[1]:void 0,ve=Q.exclude,ye=ve===void 0?{}:ve,fe=Q.debug,oe=q.method.toLowerCase();if(oe==="head"||ye.methods.includes(oe))return fe("Excluding request by HTTP method ".concat(q.url)),!0;if(typeof ye.filter=="function"&&ye.filter(q))return fe("Excluding request by filter ".concat(q.url)),!0;var he=/\?.*$/.test(q.url)||Object(z.isObject)(q.params)&&Object.keys(q.params).length!==0||typeof URLSearchParams<"u"&&q.params instanceof URLSearchParams;if(ye.query&&he)return fe("Excluding request by query ".concat(q.url)),!0;var J=ye.paths||[],re=J.some(function(de){return q.url.match(de)});return re?(fe("Excluding request by url match ".concat(q.url)),!0):!1}U.default=B},"./src/index.node.js":function(X,U,P){P.r(U);var z=P("./src/api.js");P.d(U,"setup",function(){return z.setup}),P.d(U,"setupCache",function(){return z.setupCache}),P.d(U,"serializeQuery",function(){return z.serializeQuery});var B=P("./src/redis.js");P.d(U,"RedisStore",function(){return B.default});var Q=P("./src/redis-default.js");P.d(U,"RedisDefaultStore",function(){return Q.default}),U.default={setup:z.setup,setupCache:z.setupCache,serializeQuery:z.serializeQuery,RedisStore:B.default,RedisDefaultStore:Q.default}},"./src/limit.js":function(X,U,P){P.r(U),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(ve,ye,fe,oe,he,J,re){try{var de=ve[J](re),we=de.value}catch(Pe){fe(Pe);return}de.done?ye(we):Promise.resolve(we).then(oe,he)}function B(ve){return function(){var ye=this,fe=arguments;return new Promise(function(oe,he){var J=ve.apply(ye,fe);function re(we){z(J,oe,he,re,de,"next",we)}function de(we){z(J,oe,he,re,de,"throw",we)}re(void 0)})}}function Q(ve){return q.apply(this,arguments)}function q(){return q=B(regeneratorRuntime.mark(function ve(ye){var fe,oe;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,ye.store.length();case 2:if(fe=J.sent,!(fe<ye.limit)){J.next=5;break}return J.abrupt("return");case 5:return ye.debug("Current store size: ".concat(fe)),J.next=8,ye.store.iterate(function(re,de){oe||(oe={value:re,key:de}),re.expires<oe.value.expires&&(oe={value:re,key:de})});case 8:if(!oe){J.next=12;break}return ye.debug("Removing item: ".concat(oe.key)),J.next=12,ye.store.removeItem(oe.key);case 12:case"end":return J.stop()}},ve)})),q.apply(this,arguments)}U.default=Q},"./src/memory.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js");var z=P("./src/utilities.js");function B(oe,he,J,re,de,we,Pe){try{var Ne=oe[we](Pe),Ie=Ne.value}catch(Oe){J(Oe);return}Ne.done?he(Ie):Promise.resolve(Ie).then(re,de)}function Q(oe){return function(){var he=this,J=arguments;return new Promise(function(re,de){var we=oe.apply(he,J);function Pe(Ie){B(we,re,de,Pe,Ne,"next",Ie)}function Ne(Ie){B(we,re,de,Pe,Ne,"throw",Ie)}Pe(void 0)})}}function q(oe,he){if(!(oe instanceof he))throw new TypeError("Cannot call a class as a function")}function ve(oe,he){for(var J=0;J<he.length;J++){var re=he[J];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function ye(oe,he,J){return he&&ve(oe.prototype,he),J&&ve(oe,J),oe}var fe=function(){function oe(){q(this,oe),this.store={}}return ye(oe,[{key:"getItem",value:function(){var he=Q(regeneratorRuntime.mark(function re(de){var we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return we=this.store[de]||null,Ne.abrupt("return",JSON.parse(we));case 2:case"end":return Ne.stop()}},re,this)}));function J(re){return he.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var he=Q(regeneratorRuntime.mark(function re(de,we){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return this.store[de]=JSON.stringify(we),Ne.abrupt("return",we);case 2:case"end":return Ne.stop()}},re,this)}));function J(re,de){return he.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var he=Q(regeneratorRuntime.mark(function re(de){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:delete this.store[de];case 1:case"end":return Pe.stop()}},re,this)}));function J(re){return he.apply(this,arguments)}return J}()},{key:"clear",value:function(){var he=Q(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:this.store={};case 1:case"end":return we.stop()}},re,this)}));function J(){return he.apply(this,arguments)}return J}()},{key:"length",value:function(){var he=Q(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",Object.keys(this.store).length);case 1:case"end":return we.stop()}},re,this)}));function J(){return he.apply(this,arguments)}return J}()},{key:"iterate",value:function(J){return Promise.all(Object(z.mapObject)(this.store,J))}}]),oe}();U.default=fe},"./src/redis-default.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.function.bind.js"),P("./node_modules/core-js/modules/es6.function.name.js");var z=P("util");function B(oe,he,J,re,de,we,Pe){try{var Ne=oe[we](Pe),Ie=Ne.value}catch(Oe){J(Oe);return}Ne.done?he(Ie):Promise.resolve(Ie).then(re,de)}function Q(oe){return function(){var he=this,J=arguments;return new Promise(function(re,de){var we=oe.apply(he,J);function Pe(Ie){B(we,re,de,Pe,Ne,"next",Ie)}function Ne(Ie){B(we,re,de,Pe,Ne,"throw",Ie)}Pe(void 0)})}}function q(oe,he){if(!(oe instanceof he))throw new TypeError("Cannot call a class as a function")}function ve(oe,he){for(var J=0;J<he.length;J++){var re=he[J];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function ye(oe,he,J){return he&&ve(oe.prototype,he),J&&ve(oe,J),oe}var fe=function(){function oe(he){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q(this,oe);var re=new TypeError("First parameter must be a valid RedisClient instance.");try{if(he.constructor.name!=="RedisClient")throw re}catch{throw re}this.client=he,this.prefix=J.prefix||"axios-cache",this.maxScanCount=J.maxScanCount||1e3,this.getAsync=Object(z.promisify)(he.get).bind(he),this.psetexAsync=Object(z.promisify)(he.psetex).bind(he),this.delAsync=Object(z.promisify)(he.del).bind(he),this.scanAsync=Object(z.promisify)(he.scan).bind(he)}return ye(oe,[{key:"calculateTTL",value:function(J){var re=Date.now();return J.expires&&J.expires>re?J.expires-re:-1}},{key:"transformKey",value:function(J){return this.prefix+"_"+J}},{key:"getItem",value:function(){var he=Q(regeneratorRuntime.mark(function re(de){var we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.getAsync(this.transformKey(de));case 2:if(Ne.t0=Ne.sent,Ne.t0){Ne.next=5;break}Ne.t0=null;case 5:return we=Ne.t0,Ne.abrupt("return",JSON.parse(we));case 7:case"end":return Ne.stop()}},re,this)}));function J(re){return he.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var he=Q(regeneratorRuntime.mark(function re(de,we){var Pe,Ne;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Pe=this.transformKey(de),Ne=this.calculateTTL(we),!(Ne>0)){Oe.next=5;break}return Oe.next=5,this.psetexAsync(Pe,Ne,JSON.stringify(we));case 5:return Oe.abrupt("return",we);case 6:case"end":return Oe.stop()}},re,this)}));function J(re,de){return he.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var he=Q(regeneratorRuntime.mark(function re(de){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.delAsync(this.transformKey(de));case 2:case"end":return Pe.stop()}},re,this)}));function J(re){return he.apply(this,arguments)}return J}()},{key:"scan",value:function(){var he=Q(regeneratorRuntime.mark(function re(de){var we,Pe;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:we="0";case 1:return Ie.next=3,this.scanAsync(we,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Pe=Ie.sent,we=Pe[0],Ie.next=7,de(Pe[1]);case 7:if(we!=="0"){Ie.next=1;break}case 8:case"end":return Ie.stop()}},re,this)}));function J(re){return he.apply(this,arguments)}return J}()},{key:"clear",value:function(){var he=Q(regeneratorRuntime.mark(function re(){var de=this;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.scan(function(Ne){return de.delAsync(Ne)});case 2:case"end":return Pe.stop()}},re,this)}));function J(){return he.apply(this,arguments)}return J}()},{key:"length",value:function(){var he=Q(regeneratorRuntime.mark(function re(){var de;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return de=0,Pe.next=3,this.scan(function(Ne){de+=Ne.length});case 3:return Pe.abrupt("return",de);case 4:case"end":return Pe.stop()}},re,this)}));function J(){return he.apply(this,arguments)}return J}()},{key:"iterate",value:function(){var he=Q(regeneratorRuntime.mark(function re(de){var we=this,Pe,Ne;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Ne=function(){return Ne=Q(regeneratorRuntime.mark(function He(ot){var ft,_t;return regeneratorRuntime.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,this.getAsync(ot);case 2:if(mt.t0=mt.sent,mt.t0){mt.next=5;break}mt.t0=null;case 5:return ft=mt.t0,_t=JSON.parse(ft),mt.next=9,de(_t,ot);case 9:return mt.abrupt("return",mt.sent);case 10:case"end":return mt.stop()}},He,this)})),Ne.apply(this,arguments)},Pe=function(He){return Ne.apply(this,arguments)},Oe.next=4,this.scan(function(Ze){return Promise.all(Ze.map(Pe.bind(we)))});case 4:return Oe.abrupt("return",Promise.resolve([]));case 5:case"end":return Oe.stop()}},re,this)}));function J(re){return he.apply(this,arguments)}return J}()}]),oe}();U.default=fe},"./src/redis.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.function.bind.js"),P("./node_modules/core-js/modules/es6.function.name.js");var z=P("util"),B=P("./src/utilities.js");function Q(he,J,re,de,we,Pe,Ne){try{var Ie=he[Pe](Ne),Oe=Ie.value}catch(Ze){re(Ze);return}Ie.done?J(Oe):Promise.resolve(Oe).then(de,we)}function q(he){return function(){var J=this,re=arguments;return new Promise(function(de,we){var Pe=he.apply(J,re);function Ne(Oe){Q(Pe,de,we,Ne,Ie,"next",Oe)}function Ie(Oe){Q(Pe,de,we,Ne,Ie,"throw",Oe)}Ne(void 0)})}}function ve(he,J){if(!(he instanceof J))throw new TypeError("Cannot call a class as a function")}function ye(he,J){for(var re=0;re<J.length;re++){var de=J[re];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(he,de.key,de)}}function fe(he,J,re){return J&&ye(he.prototype,J),re&&ye(he,re),he}var oe=function(){function he(J){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,he);var de=new TypeError("First parameter must be a valid RedisClient instance.");try{if(J.constructor.name!=="RedisClient")throw de}catch{throw de}this.client=J,this.HASH_KEY=re,this.hgetAsync=Object(z.promisify)(J.hget).bind(J),this.hsetAsync=Object(z.promisify)(J.hset).bind(J),this.hdelAsync=Object(z.promisify)(J.hdel).bind(J),this.delAsync=Object(z.promisify)(J.del).bind(J),this.hlenAsync=Object(z.promisify)(J.hlen).bind(J),this.hgetallAsync=Object(z.promisify)(J.hgetall).bind(J)}return fe(he,[{key:"getItem",value:function(){var J=q(regeneratorRuntime.mark(function de(we){var Pe;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetAsync(this.HASH_KEY,we);case 2:if(Ie.t0=Ie.sent,Ie.t0){Ie.next=5;break}Ie.t0=null;case 5:return Pe=Ie.t0,Ie.abrupt("return",JSON.parse(Pe));case 7:case"end":return Ie.stop()}},de,this)}));function re(de){return J.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var J=q(regeneratorRuntime.mark(function de(we,Pe){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hsetAsync(this.HASH_KEY,we,JSON.stringify(Pe));case 2:return Ie.abrupt("return",Pe);case 3:case"end":return Ie.stop()}},de,this)}));function re(de,we){return J.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var J=q(regeneratorRuntime.mark(function de(we){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.hdelAsync(this.HASH_KEY,we);case 2:case"end":return Ne.stop()}},de,this)}));function re(de){return J.apply(this,arguments)}return re}()},{key:"clear",value:function(){var J=q(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Pe.stop()}},de,this)}));function re(){return J.apply(this,arguments)}return re}()},{key:"length",value:function(){var J=q(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Pe.stop()}},de,this)}));function re(){return J.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var J=q(regeneratorRuntime.mark(function de(we){var Pe;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Pe=Ie.sent,Ie.abrupt("return",Promise.all(Object(B.mapObject)(Pe,we)));case 4:case"end":return Ie.stop()}},de,this)}));function re(de){return J.apply(this,arguments)}return re}()}]),he}();U.default=oe},"./src/request.js":function(X,U,P){P.r(U),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/response.js"),B=P("./src/exclude.js"),Q=P("./src/cache.js");function q(oe,he,J,re,de,we,Pe){try{var Ne=oe[we](Pe),Ie=Ne.value}catch(Oe){J(Oe);return}Ne.done?he(Ie):Promise.resolve(Ie).then(re,de)}function ve(oe){return function(){var he=this,J=arguments;return new Promise(function(re,de){var we=oe.apply(he,J);function Pe(Ie){q(we,re,de,Pe,Ne,"next",Ie)}function Ne(Ie){q(we,re,de,Pe,Ne,"throw",Ie)}Pe(void 0)})}}function ye(oe,he){return fe.apply(this,arguments)}function fe(){return fe=ve(regeneratorRuntime.mark(function oe(he,J){var re,de,we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return we=function(){return he.excludeFromCache=!0,{config:he,next:re}},he.debug("uuid",he.uuid),re=function(){for(var Oe=arguments.length,Ze=new Array(Oe),He=0;He<Oe;He++)Ze[He]=arguments[He];return z.default.apply(void 0,[he,J].concat(Ze))},Ne.next=5,he.invalidate(he,J);case 5:if(!Object(B.default)(he,J)){Ne.next=7;break}return Ne.abrupt("return",we());case 7:return Ne.prev=7,Ne.next=10,Object(Q.read)(he,J);case 10:return de=Ne.sent,de.config=J,de.request={fromCache:!0},Ne.abrupt("return",{config:he,next:de});case 16:if(Ne.prev=16,Ne.t0=Ne.catch(7),!(he.clearOnStale&&Ne.t0.reason==="cache-stale")){Ne.next=21;break}return Ne.next=21,he.store.removeItem(he.uuid);case 21:return Ne.abrupt("return",{config:he,next:re});case 22:case"end":return Ne.stop()}},oe,null,[[7,16]])})),fe.apply(this,arguments)}U.default=ye},"./src/response.js":function(X,U,P){P.r(U),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/limit.js"),B=P("./src/cache.js"),Q=P("./node_modules/cache-control-esm/index.js");function q(oe,he,J,re,de,we,Pe){try{var Ne=oe[we](Pe),Ie=Ne.value}catch(Oe){J(Oe);return}Ne.done?he(Ie):Promise.resolve(Ie).then(re,de)}function ve(oe){return function(){var he=this,J=arguments;return new Promise(function(re,de){var we=oe.apply(he,J);function Pe(Ie){q(we,re,de,Pe,Ne,"next",Ie)}function Ne(Ie){q(we,re,de,Pe,Ne,"throw",Ie)}Pe(void 0)})}}function ye(oe,he,J){return fe.apply(this,arguments)}function fe(){return fe=ve(regeneratorRuntime.mark(function oe(he,J,re){var de,we,Pe,Ne,Ie;return regeneratorRuntime.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(de=re.request,we=de===void 0?{}:de,Pe=re.headers,Ne=Pe===void 0?{}:Pe,!(["arraybuffer","blob"].indexOf(we.responseType)>-1)){Ze.next=3;break}return Ze.abrupt("return",re);case 3:if(Ie={},he.readHeaders&&(Ne["cache-control"]?(Ie=Object(Q.parse)(Ne["cache-control"]),(Ie.noCache||Ie.noStore)&&(he.excludeFromCache=!0)):Ne.expires?he.expires=new Date(Ne.expires).getTime():he.expires=new Date().getTime()),he.excludeFromCache){Ze.next=15;break}if(Ie.maxAge||Ie.maxAge===0?he.expires=Date.now()+Ie.maxAge*1e3:he.readHeaders||(he.expires=he.maxAge===0?Date.now():Date.now()+he.maxAge),!he.limit){Ze.next=11;break}return he.debug("Detected limit: ".concat(he.limit)),Ze.next=11,Object(z.default)(he);case 11:return Ze.next=13,Object(B.write)(he,J,re);case 13:Ze.next=16;break;case 15:re.request.excludedFromCache=!0;case 16:return Ze.abrupt("return",re);case 17:case"end":return Ze.stop()}},oe)})),fe.apply(this,arguments)}U.default=ye},"./src/serialize.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(q,ve){if(q==null)return{};var ye=B(q,ve),fe,oe;if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(q);for(oe=0;oe<he.length;oe++)fe=he[oe],!(ve.indexOf(fe)>=0)&&Object.prototype.propertyIsEnumerable.call(q,fe)&&(ye[fe]=q[fe])}return ye}function B(q,ve){if(q==null)return{};var ye={},fe=Object.keys(q),oe,he;for(he=0;he<fe.length;he++)oe=fe[he],!(ve.indexOf(oe)>=0)&&(ye[oe]=q[oe]);return ye}function Q(q,ve,ye){if(ye.data)try{ye.data=JSON.parse(ye.data)}catch(oe){q.debug("Could not parse data as JSON",oe)}ye.request,ye.config;var fe=z(ye,["request","config"]);return fe}U.default=Q},"./src/utilities.js":function(X,U,P){P.r(U),P.d(U,"isObject",function(){return B}),P.d(U,"getTag",function(){return Q}),P.d(U,"isFunction",function(){return q}),P.d(U,"isString",function(){return ve}),P.d(U,"mapObject",function(){return ye}),P("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(fe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(he){return typeof he}:z=function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},z(fe)}function B(fe){var oe=z(fe);return fe!=null&&(oe==="object"||oe==="function")}function Q(fe){return fe===null?fe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(fe)}function q(fe){if(!B(fe))return!1;var oe=Q(fe);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function ve(fe){var oe=z(fe);return oe==="string"||oe==="object"&&fe!=null&&!Array.isArray(fe)&&Q(fe)==="[object String]"}function ye(fe,oe){return B(fe)?Object.keys(fe).map(function(he){return oe(fe[he],he)}):[]}},axios:function(X,U){X.exports=ae},util:function(X,U){X.exports=I.default}})})});const L={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},j=R.setupCache({maxAge:60*60*24*1e3}),se=E.default.create({adapter:j.adapter}),K=async(Z,G={})=>{const ae={...L,...G},[X,U]=i.lngLatToGoogle(Z,ae.zoomBase),P=ae.tileUrl.replace("{z}",String(ae.zoomBase)).replace("{x}",String(X)).replace("{y}",String(U)),z={code:"",prefecture:"",city:""};let B;try{const ve=await se.get(P,{responseType:"arraybuffer"});B=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const Q=new d.VectorTile(new w.default(B));let q=Object.keys(Q.layers);return Array.isArray(q)||(q=[q]),q.forEach(ve=>{const ye=Q.layers[ve];if(ye&&ae.layer===ye.name)for(let fe=0;fe<ye.length;fe++){const oe=ye.feature(fe).toGeoJSON(X,U,ae.zoomBase);q.length>1&&(oe.properties.vt_layer=ve);const he={type:"FeatureCollection",features:[oe]};t.geoContains(he,Z)&&(z.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,z.prefecture=oe.properties.prefecture,z.city=oe.properties.city)}}),z};e.openReverseGeocoder=K})(Pk);const u8={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},c8={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},h8={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},f8={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},eA={JPN:h8,CHN:u8,DEU:c8,KOR:f8};var tA=Object.prototype.toString,N3=function(t){var i=tA.call(t),a=i==="[object Arguments]";return a||(a=i!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&tA.call(t.callee)==="[object Function]"),a},V_,rA;function d8(){if(rA)return V_;rA=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=N3,l=Object.prototype.propertyIsEnumerable,f=!l.call({toString:null},"toString"),d=l.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=function(T){var R=T.constructor;return R&&R.prototype===T},E={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},I=function(){if(typeof window>"u")return!1;for(var T in window)try{if(!E["$"+T]&&t.call(window,T)&&window[T]!==null&&typeof window[T]=="object")try{w(window[T])}catch{return!0}}catch{return!0}return!1}(),b=function(T){if(typeof window>"u"||!I)return w(T);try{return w(T)}catch{return!1}};e=function(R){var L=R!==null&&typeof R=="object",j=i.call(R)==="[object Function]",se=a(R),K=L&&i.call(R)==="[object String]",Z=[];if(!L&&!j&&!se)throw new TypeError("Object.keys called on a non-object");var G=d&&j;if(K&&R.length>0&&!t.call(R,0))for(var ae=0;ae<R.length;++ae)Z.push(String(ae));if(se&&R.length>0)for(var X=0;X<R.length;++X)Z.push(String(X));else for(var U in R)!(G&&U==="prototype")&&t.call(R,U)&&Z.push(String(U));if(f)for(var P=b(R),z=0;z<u.length;++z)!(P&&u[z]==="constructor")&&t.call(R,u[z])&&Z.push(u[z]);return Z}}return V_=e,V_}var p8=Array.prototype.slice,m8=N3,nA=Object.keys,Gg=nA?function(t){return nA(t)}:d8(),iA=Object.keys;Gg.shim=function(){if(Object.keys){var t=function(){var i=Object.keys(arguments);return i&&i.length===arguments.length}(1,2);t||(Object.keys=function(a){return m8(a)?iA(p8.call(a)):iA(a)})}else Object.keys=Gg;return Object.keys||Gg};var i2=Gg,g8=Error,y8=EvalError,v8=RangeError,_8=ReferenceError,$3=SyntaxError,Au=TypeError,x8=URIError,G0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),a=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var l=42;t[i]=l;for(i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var f=Object.getOwnPropertySymbols(t);if(f.length!==1||f[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(t,i);if(d.value!==l||d.enumerable!==!0)return!1}return!0},oA=typeof Symbol<"u"&&Symbol,w8=G0,o2=function(){return typeof oA!="function"||typeof Symbol!="function"||typeof oA("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:w8()},G_={__proto__:null,foo:{}},b8=Object,S8=function(){return{__proto__:G_}.foo===G_.foo&&!(G_ instanceof b8)},E8="Function.prototype.bind called on incompatible ",T8=Object.prototype.toString,P8=Math.max,A8="[object Function]",aA=function(t,i){for(var a=[],l=0;l<t.length;l+=1)a[l]=t[l];for(var f=0;f<i.length;f+=1)a[f+t.length]=i[f];return a},I8=function(t,i){for(var a=[],l=i||0,f=0;l<t.length;l+=1,f+=1)a[f]=t[l];return a},C8=function(e,t){for(var i="",a=0;a<e.length;a+=1)i+=e[a],a+1<e.length&&(i+=t);return i},M8=function(t){var i=this;if(typeof i!="function"||T8.apply(i)!==A8)throw new TypeError(E8+i);for(var a=I8(arguments,1),l,f=function(){if(this instanceof l){var I=i.apply(this,aA(a,arguments));return Object(I)===I?I:this}return i.apply(t,aA(a,arguments))},d=P8(0,i.length-a.length),u=[],w=0;w<d;w++)u[w]="$"+w;if(l=Function("binder","return function ("+C8(u,",")+"){ return binder.apply(this,arguments); }")(f),i.prototype){var E=function(){};E.prototype=i.prototype,l.prototype=new E,E.prototype=null}return l},k8=M8,a2=Function.prototype.bind||k8,O8=Function.prototype.call,F8=Object.prototype.hasOwnProperty,R8=a2,U3=R8.call(O8,F8),Lr,j8=g8,z8=y8,L8=v8,B8=_8,yf=$3,rf=Au,D8=x8,V3=Function,W_=function(e){try{return V3('"use strict"; return ('+e+").constructor;")()}catch{}},fc=Object.getOwnPropertyDescriptor;if(fc)try{fc({},"")}catch{fc=null}var H_=function(){throw new rf},N8=fc?function(){try{return arguments.callee,H_}catch{try{return fc(arguments,"callee").get}catch{return H_}}}():H_,Th=o2(),$8=S8(),vi=Object.getPrototypeOf||($8?function(e){return e.__proto__}:null),Ih={},U8=typeof Uint8Array>"u"||!vi?Lr:vi(Uint8Array),dc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Lr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Lr:ArrayBuffer,"%ArrayIteratorPrototype%":Th&&vi?vi([][Symbol.iterator]()):Lr,"%AsyncFromSyncIteratorPrototype%":Lr,"%AsyncFunction%":Ih,"%AsyncGenerator%":Ih,"%AsyncGeneratorFunction%":Ih,"%AsyncIteratorPrototype%":Ih,"%Atomics%":typeof Atomics>"u"?Lr:Atomics,"%BigInt%":typeof BigInt>"u"?Lr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Lr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Lr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Lr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":j8,"%eval%":eval,"%EvalError%":z8,"%Float32Array%":typeof Float32Array>"u"?Lr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Lr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Lr:FinalizationRegistry,"%Function%":V3,"%GeneratorFunction%":Ih,"%Int8Array%":typeof Int8Array>"u"?Lr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Lr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Lr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Th&&vi?vi(vi([][Symbol.iterator]())):Lr,"%JSON%":typeof JSON=="object"?JSON:Lr,"%Map%":typeof Map>"u"?Lr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Th||!vi?Lr:vi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Lr:Promise,"%Proxy%":typeof Proxy>"u"?Lr:Proxy,"%RangeError%":L8,"%ReferenceError%":B8,"%Reflect%":typeof Reflect>"u"?Lr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Lr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Th||!vi?Lr:vi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Lr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Th&&vi?vi(""[Symbol.iterator]()):Lr,"%Symbol%":Th?Symbol:Lr,"%SyntaxError%":yf,"%ThrowTypeError%":N8,"%TypedArray%":U8,"%TypeError%":rf,"%Uint8Array%":typeof Uint8Array>"u"?Lr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Lr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Lr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Lr:Uint32Array,"%URIError%":D8,"%WeakMap%":typeof WeakMap>"u"?Lr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Lr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Lr:WeakSet};if(vi)try{null.error}catch(e){var V8=vi(vi(e));dc["%Error.prototype%"]=V8}var G8=function e(t){var i;if(t==="%AsyncFunction%")i=W_("async function () {}");else if(t==="%GeneratorFunction%")i=W_("function* () {}");else if(t==="%AsyncGeneratorFunction%")i=W_("async function* () {}");else if(t==="%AsyncGenerator%"){var a=e("%AsyncGeneratorFunction%");a&&(i=a.prototype)}else if(t==="%AsyncIteratorPrototype%"){var l=e("%AsyncGenerator%");l&&vi&&(i=vi(l.prototype))}return dc[t]=i,i},sA={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},em=a2,e0=U3,W8=em.call(Function.call,Array.prototype.concat),H8=em.call(Function.apply,Array.prototype.splice),lA=em.call(Function.call,String.prototype.replace),t0=em.call(Function.call,String.prototype.slice),Z8=em.call(Function.call,RegExp.prototype.exec),q8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,X8=/\\(\\)?/g,K8=function(t){var i=t0(t,0,1),a=t0(t,-1);if(i==="%"&&a!=="%")throw new yf("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&i!=="%")throw new yf("invalid intrinsic syntax, expected opening `%`");var l=[];return lA(t,q8,function(f,d,u,w){l[l.length]=u?lA(w,X8,"$1"):d||f}),l},Y8=function(t,i){var a=t,l;if(e0(sA,a)&&(l=sA[a],a="%"+l[0]+"%"),e0(dc,a)){var f=dc[a];if(f===Ih&&(f=G8(a)),typeof f>"u"&&!i)throw new rf("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:l,name:a,value:f}}throw new yf("intrinsic "+t+" does not exist!")},ks=function(t,i){if(typeof t!="string"||t.length===0)throw new rf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new rf('"allowMissing" argument must be a boolean');if(Z8(/^%?[^%]*%?$/,t)===null)throw new yf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=K8(t),l=a.length>0?a[0]:"",f=Y8("%"+l+"%",i),d=f.name,u=f.value,w=!1,E=f.alias;E&&(l=E[0],H8(a,W8([0,1],E)));for(var I=1,b=!0;I<a.length;I+=1){var T=a[I],R=t0(T,0,1),L=t0(T,-1);if((R==='"'||R==="'"||R==="`"||L==='"'||L==="'"||L==="`")&&R!==L)throw new yf("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(w=!0),l+="."+T,d="%"+l+"%",e0(dc,d))u=dc[d];else if(u!=null){if(!(T in u)){if(!i)throw new rf("base intrinsic for "+t+" exists, but the property is not available.");return}if(fc&&I+1>=a.length){var j=fc(u,T);b=!!j,b&&"get"in j&&!("originalValue"in j.get)?u=j.get:u=u[T]}else b=e0(u,T),u=u[T];b&&!w&&(dc[d]=u)}}return u},J8=ks,Wg=J8("%Object.defineProperty%",!0)||!1;if(Wg)try{Wg({},"a",{value:1})}catch{Wg=!1}var s2=Wg,Q8=ks,Hg=Q8("%Object.getOwnPropertyDescriptor%",!0);if(Hg)try{Hg([],"length")}catch{Hg=null}var l2=Hg,uA=s2,e$=$3,Ph=Au,cA=l2,u2=function(t,i,a){if(!t||typeof t!="object"&&typeof t!="function")throw new Ph("`obj` must be an object or a function`");if(typeof i!="string"&&typeof i!="symbol")throw new Ph("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ph("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ph("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ph("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ph("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,w=!!cA&&cA(t,i);if(uA)uA(t,i,{configurable:d===null&&w?w.configurable:!d,enumerable:l===null&&w?w.enumerable:!l,value:a,writable:f===null&&w?w.writable:!f});else if(u||!l&&!f&&!d)t[i]=a;else throw new e$("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Yx=s2,G3=function(){return!!Yx};G3.hasArrayLengthDefineBug=function(){if(!Yx)return null;try{return Yx([],"length",{value:1}).length!==1}catch{return!0}};var c2=G3,t$=i2,r$=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n$=Object.prototype.toString,i$=Array.prototype.concat,hA=u2,o$=function(e){return typeof e=="function"&&n$.call(e)==="[object Function]"},W3=c2(),a$=function(e,t,i,a){if(t in e){if(a===!0){if(e[t]===i)return}else if(!o$(a)||!a())return}W3?hA(e,t,i,!0):hA(e,t,i)},H3=function(e,t){var i=arguments.length>2?arguments[2]:{},a=t$(t);r$&&(a=i$.call(a,Object.getOwnPropertySymbols(t)));for(var l=0;l<a.length;l+=1)a$(e,a[l],t[a[l]],i[a[l]])};H3.supportsDescriptors=!!W3;var Ic=H3,Z3={exports:{}},s$=ks,fA=u2,l$=c2(),dA=l2,pA=Au,u$=s$("%Math.floor%"),c$=function(t,i){if(typeof t!="function")throw new pA("`fn` is not a function");if(typeof i!="number"||i<0||i>4294967295||u$(i)!==i)throw new pA("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],l=!0,f=!0;if("length"in t&&dA){var d=dA(t,"length");d&&!d.configurable&&(l=!1),d&&!d.writable&&(f=!1)}return(l||f||!a)&&(l$?fA(t,"length",i,!0,!0):fA(t,"length",i)),t};(function(e){var t=a2,i=ks,a=c$,l=Au,f=i("%Function.prototype.apply%"),d=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||t.call(d,f),w=s2,E=i("%Math.max%");e.exports=function(T){if(typeof T!="function")throw new l("a function is required");var R=u(t,d,arguments);return a(R,1+E(0,T.length-(arguments.length-1)),!0)};var I=function(){return u(t,f,arguments)};w?w(e.exports,"apply",{value:I}):e.exports.apply=I})(Z3);var If=Z3.exports,q3=ks,X3=If,h$=X3(q3("String.prototype.indexOf")),ga=function(t,i){var a=q3(t,!!i);return typeof a=="function"&&h$(t,".prototype.")>-1?X3(a):a},f$=i2,K3=G0(),Y3=ga,mA=Object,d$=Y3("Array.prototype.push"),gA=Y3("Object.prototype.propertyIsEnumerable"),p$=K3?Object.getOwnPropertySymbols:null,J3=function(t,i){if(t==null)throw new TypeError("target must be an object");var a=mA(t);if(arguments.length===1)return a;for(var l=1;l<arguments.length;++l){var f=mA(arguments[l]),d=f$(f),u=K3&&(Object.getOwnPropertySymbols||p$);if(u)for(var w=u(f),E=0;E<w.length;++E){var I=w[E];gA(f,I)&&d$(d,I)}for(var b=0;b<d.length;++b){var T=d[b];if(gA(f,T)){var R=f[T];a[T]=R}}}return a},Z_=J3,m$=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),i={},a=0;a<t.length;++a)i[t[a]]=t[a];var l=Object.assign({},i),f="";for(var d in l)f+=d;return e!==f},g$=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},Q3=function(){return!Object.assign||m$()||g$()?Z_:Object.assign},y$=Ic,v$=Q3,_$=function(){var t=v$();return y$(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},x$=Ic,w$=If,b$=J3,eO=Q3,S$=_$,E$=w$.apply(eO()),tO=function(t,i){return E$(Object,arguments)};x$(tO,{getPolyfill:eO,implementation:b$,shim:S$});var T$=tO,Bp=function(){return typeof(function(){}).name=="string"},lp=Object.getOwnPropertyDescriptor;if(lp)try{lp([],"length")}catch{lp=null}Bp.functionsHaveConfigurableNames=function(){if(!Bp()||!lp)return!1;var t=lp(function(){},"name");return!!t&&!!t.configurable};var P$=Function.prototype.bind;Bp.boundFunctionsHaveNames=function(){return Bp()&&typeof P$=="function"&&(function(){}).bind().name!==""};var A$=Bp,yA=u2,I$=c2(),C$=A$.functionsHaveConfigurableNames(),M$=Au,k$=function(t,i){if(typeof t!="function")throw new M$("`fn` is not a function");var a=arguments.length>2&&!!arguments[2];return(!a||C$)&&(I$?yA(t,"name",i,!0,!0):yA(t,"name",i)),t},O$=k$,F$=Au,R$=Object,rO=O$(function(){if(this==null||this!==R$(this))throw new F$("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),j$=rO,z$=Ic.supportsDescriptors,L$=Object.getOwnPropertyDescriptor,nO=function(){if(z$&&/a/mig.flags==="gim"){var t=L$(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var i="",a={};if(Object.defineProperty(a,"hasIndices",{get:function(){i+="d"}}),Object.defineProperty(a,"sticky",{get:function(){i+="y"}}),i==="dy")return t.get}}return j$},B$=Ic.supportsDescriptors,D$=nO,N$=Object.getOwnPropertyDescriptor,$$=Object.defineProperty,U$=TypeError,vA=Object.getPrototypeOf,V$=/a/,G$=function(){if(!B$||!vA)throw new U$("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=D$(),i=vA(V$),a=N$(i,"flags");return(!a||a.get!==t)&&$$(i,"flags",{configurable:!0,enumerable:!1,get:t}),t},W$=Ic,H$=If,Z$=rO,iO=nO,q$=G$,oO=H$(iO());W$(oO,{getPolyfill:iO,implementation:Z$,shim:q$});var X$=oO,Zg={exports:{}},K$=G0,Cc=function(){return K$()&&!!Symbol.toStringTag},Y$=Cc(),J$=ga,Jx=J$("Object.prototype.toString"),W0=function(t){return Y$&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Jx(t)==="[object Arguments]"},aO=function(t){return W0(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Jx(t)!=="[object Array]"&&Jx(t.callee)==="[object Function]"},Q$=function(){return W0(arguments)}();W0.isLegacyArguments=aO;var sO=Q$?W0:aO,h2=typeof Map=="function"&&Map.prototype,q_=Object.getOwnPropertyDescriptor&&h2?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r0=h2&&q_&&typeof q_.get=="function"?q_.get:null,_A=h2&&Map.prototype.forEach,f2=typeof Set=="function"&&Set.prototype,X_=Object.getOwnPropertyDescriptor&&f2?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,n0=f2&&X_&&typeof X_.get=="function"?X_.get:null,xA=f2&&Set.prototype.forEach,eU=typeof WeakMap=="function"&&WeakMap.prototype,up=eU?WeakMap.prototype.has:null,tU=typeof WeakSet=="function"&&WeakSet.prototype,cp=tU?WeakSet.prototype.has:null,rU=typeof WeakRef=="function"&&WeakRef.prototype,wA=rU?WeakRef.prototype.deref:null,nU=Boolean.prototype.valueOf,iU=Object.prototype.toString,oU=Function.prototype.toString,aU=String.prototype.match,d2=String.prototype.slice,lu=String.prototype.replace,sU=String.prototype.toUpperCase,bA=String.prototype.toLowerCase,lO=RegExp.prototype.test,SA=Array.prototype.concat,_s=Array.prototype.join,lU=Array.prototype.slice,EA=Math.floor,Qx=typeof BigInt=="function"?BigInt.prototype.valueOf:null,K_=Object.getOwnPropertySymbols,ew=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,vf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Yi=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===vf||!0)?Symbol.toStringTag:null,uO=Object.prototype.propertyIsEnumerable,TA=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function PA(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||lO.call(/e/,t))return t;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var a=e<0?-EA(-e):EA(e);if(a!==e){var l=String(a),f=d2.call(t,l.length+1);return lu.call(l,i,"$&_")+"."+lu.call(lu.call(f,/([0-9]{3})/g,"$&_"),/_$/,"")}}return lu.call(t,i,"$&_")}var tw=z3,AA=tw.custom,IA=hO(AA)?AA:null,uU=function e(t,i,a,l){var f=i||{};if(nu(f,"quoteStyle")&&f.quoteStyle!=="single"&&f.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(nu(f,"maxStringLength")&&(typeof f.maxStringLength=="number"?f.maxStringLength<0&&f.maxStringLength!==1/0:f.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var d=nu(f,"customInspect")?f.customInspect:!0;if(typeof d!="boolean"&&d!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(nu(f,"indent")&&f.indent!==null&&f.indent!=="	"&&!(parseInt(f.indent,10)===f.indent&&f.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(nu(f,"numericSeparator")&&typeof f.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=f.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return dO(t,f);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var w=String(t);return u?PA(t,w):w}if(typeof t=="bigint"){var E=String(t)+"n";return u?PA(t,E):E}var I=typeof f.depth>"u"?5:f.depth;if(typeof a>"u"&&(a=0),a>=I&&I>0&&typeof t=="object")return rw(t)?"[Array]":"[Object]";var b=AU(f,a);if(typeof l>"u")l=[];else if(fO(l,t)>=0)return"[Circular]";function T(ye,fe,oe){if(fe&&(l=lU.call(l),l.push(fe)),oe){var he={depth:f.depth};return nu(f,"quoteStyle")&&(he.quoteStyle=f.quoteStyle),e(ye,he,a+1,l)}return e(ye,f,a+1,l)}if(typeof t=="function"&&!CA(t)){var R=vU(t),L=wg(t,T);return"[Function"+(R?": "+R:" (anonymous)")+"]"+(L.length>0?" { "+_s.call(L,", ")+" }":"")}if(hO(t)){var j=vf?lu.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):ew.call(t);return typeof t=="object"&&!vf?Md(j):j}if(EU(t)){for(var se="<"+bA.call(String(t.nodeName)),K=t.attributes||[],Z=0;Z<K.length;Z++)se+=" "+K[Z].name+"="+cO(cU(K[Z].value),"double",f);return se+=">",t.childNodes&&t.childNodes.length&&(se+="..."),se+="</"+bA.call(String(t.nodeName))+">",se}if(rw(t)){if(t.length===0)return"[]";var G=wg(t,T);return b&&!PU(G)?"["+nw(G,b)+"]":"[ "+_s.call(G,", ")+" ]"}if(fU(t)){var ae=wg(t,T);return!("cause"in Error.prototype)&&"cause"in t&&!uO.call(t,"cause")?"{ ["+String(t)+"] "+_s.call(SA.call("[cause]: "+T(t.cause),ae),", ")+" }":ae.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+_s.call(ae,", ")+" }"}if(typeof t=="object"&&d){if(IA&&typeof t[IA]=="function"&&tw)return tw(t,{depth:I-a});if(d!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(_U(t)){var X=[];return _A&&_A.call(t,function(ye,fe){X.push(T(fe,t,!0)+" => "+T(ye,t))}),MA("Map",r0.call(t),X,b)}if(bU(t)){var U=[];return xA&&xA.call(t,function(ye){U.push(T(ye,t))}),MA("Set",n0.call(t),U,b)}if(xU(t))return Y_("WeakMap");if(SU(t))return Y_("WeakSet");if(wU(t))return Y_("WeakRef");if(pU(t))return Md(T(Number(t)));if(gU(t))return Md(T(Qx.call(t)));if(mU(t))return Md(nU.call(t));if(dU(t))return Md(T(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===za)return"{ [object globalThis] }";if(!hU(t)&&!CA(t)){var P=wg(t,T),z=TA?TA(t)===Object.prototype:t instanceof Object||t.constructor===Object,B=t instanceof Object?"":"null prototype",Q=!z&&Yi&&Object(t)===t&&Yi in t?d2.call(Iu(t),8,-1):B?"Object":"",q=z||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ve=q+(Q||B?"["+_s.call(SA.call([],Q||[],B||[]),": ")+"] ":"");return P.length===0?ve+"{}":b?ve+"{"+nw(P,b)+"}":ve+"{ "+_s.call(P,", ")+" }"}return String(t)};function cO(e,t,i){var a=(i.quoteStyle||t)==="double"?'"':"'";return a+e+a}function cU(e){return lu.call(String(e),/"/g,"&quot;")}function rw(e){return Iu(e)==="[object Array]"&&(!Yi||!(typeof e=="object"&&Yi in e))}function hU(e){return Iu(e)==="[object Date]"&&(!Yi||!(typeof e=="object"&&Yi in e))}function CA(e){return Iu(e)==="[object RegExp]"&&(!Yi||!(typeof e=="object"&&Yi in e))}function fU(e){return Iu(e)==="[object Error]"&&(!Yi||!(typeof e=="object"&&Yi in e))}function dU(e){return Iu(e)==="[object String]"&&(!Yi||!(typeof e=="object"&&Yi in e))}function pU(e){return Iu(e)==="[object Number]"&&(!Yi||!(typeof e=="object"&&Yi in e))}function mU(e){return Iu(e)==="[object Boolean]"&&(!Yi||!(typeof e=="object"&&Yi in e))}function hO(e){if(vf)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!ew)return!1;try{return ew.call(e),!0}catch{}return!1}function gU(e){if(!e||typeof e!="object"||!Qx)return!1;try{return Qx.call(e),!0}catch{}return!1}var yU=Object.prototype.hasOwnProperty||function(e){return e in this};function nu(e,t){return yU.call(e,t)}function Iu(e){return iU.call(e)}function vU(e){if(e.name)return e.name;var t=aU.call(oU.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function fO(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,a=e.length;i<a;i++)if(e[i]===t)return i;return-1}function _U(e){if(!r0||!e||typeof e!="object")return!1;try{r0.call(e);try{n0.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function xU(e){if(!up||!e||typeof e!="object")return!1;try{up.call(e,up);try{cp.call(e,cp)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function wU(e){if(!wA||!e||typeof e!="object")return!1;try{return wA.call(e),!0}catch{}return!1}function bU(e){if(!n0||!e||typeof e!="object")return!1;try{n0.call(e);try{r0.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function SU(e){if(!cp||!e||typeof e!="object")return!1;try{cp.call(e,cp);try{up.call(e,up)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function EU(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function dO(e,t){if(e.length>t.maxStringLength){var i=e.length-t.maxStringLength,a="... "+i+" more character"+(i>1?"s":"");return dO(d2.call(e,0,t.maxStringLength),t)+a}var l=lu.call(lu.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,TU);return cO(l,"single",t)}function TU(e){var t=e.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return i?"\\"+i:"\\x"+(t<16?"0":"")+sU.call(t.toString(16))}function Md(e){return"Object("+e+")"}function Y_(e){return e+" { ? }"}function MA(e,t,i,a){var l=a?nw(i,a):_s.call(i,", ");return e+" ("+t+") {"+l+"}"}function PU(e){for(var t=0;t<e.length;t++)if(fO(e[t],`
`)>=0)return!1;return!0}function AU(e,t){var i;if(e.indent==="	")i="	";else if(typeof e.indent=="number"&&e.indent>0)i=_s.call(Array(e.indent+1)," ");else return null;return{base:i,prev:_s.call(Array(t+1),i)}}function nw(e,t){if(e.length===0)return"";var i=`
`+t.prev+t.base;return i+_s.call(e,","+i)+`
`+t.prev}function wg(e,t){var i=rw(e),a=[];if(i){a.length=e.length;for(var l=0;l<e.length;l++)a[l]=nu(e,l)?t(e[l],e):""}var f=typeof K_=="function"?K_(e):[],d;if(vf){d={};for(var u=0;u<f.length;u++)d["$"+f[u]]=f[u]}for(var w in e)nu(e,w)&&(i&&String(Number(w))===w&&w<e.length||vf&&d["$"+w]instanceof Symbol||(lO.call(/[^\w$]/,w)?a.push(t(w,e)+": "+t(e[w],e)):a.push(w+": "+t(e[w],e))));if(typeof K_=="function")for(var E=0;E<f.length;E++)uO.call(e,f[E])&&a.push("["+t(f[E])+"]: "+t(e[f[E]],e));return a}var pO=ks,Cf=ga,IU=uU,CU=Au,bg=pO("%WeakMap%",!0),Sg=pO("%Map%",!0),MU=Cf("WeakMap.prototype.get",!0),kU=Cf("WeakMap.prototype.set",!0),OU=Cf("WeakMap.prototype.has",!0),FU=Cf("Map.prototype.get",!0),RU=Cf("Map.prototype.set",!0),jU=Cf("Map.prototype.has",!0),p2=function(e,t){for(var i=e,a;(a=i.next)!==null;i=a)if(a.key===t)return i.next=a.next,a.next=e.next,e.next=a,a},zU=function(e,t){var i=p2(e,t);return i&&i.value},LU=function(e,t,i){var a=p2(e,t);a?a.value=i:e.next={key:t,next:e.next,value:i}},BU=function(e,t){return!!p2(e,t)},mO=function(){var t,i,a,l={assert:function(f){if(!l.has(f))throw new CU("Side channel does not contain "+IU(f))},get:function(f){if(bg&&f&&(typeof f=="object"||typeof f=="function")){if(t)return MU(t,f)}else if(Sg){if(i)return FU(i,f)}else if(a)return zU(a,f)},has:function(f){if(bg&&f&&(typeof f=="object"||typeof f=="function")){if(t)return OU(t,f)}else if(Sg){if(i)return jU(i,f)}else if(a)return BU(a,f);return!1},set:function(f,d){bg&&f&&(typeof f=="object"||typeof f=="function")?(t||(t=new bg),kU(t,f,d)):Sg?(i||(i=new Sg),RU(i,f,d)):(a||(a={key:{},next:null}),LU(a,f,d))}};return l},DU=U3,kd=mO(),el=Au,m2={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new el("`O` is not an object");if(typeof t!="string")throw new el("`slot` must be a string");if(kd.assert(e),!m2.has(e,t))throw new el("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new el("`O` is not an object");if(typeof t!="string")throw new el("`slot` must be a string");var i=kd.get(e);return i&&i["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new el("`O` is not an object");if(typeof t!="string")throw new el("`slot` must be a string");var i=kd.get(e);return!!i&&DU(i,"$"+t)},set:function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new el("`O` is not an object");if(typeof t!="string")throw new el("`slot` must be a string");var a=kd.get(e);a||(a={},kd.set(e,a)),a["$"+t]=i}};Object.freeze&&Object.freeze(m2);var NU=m2,Od=NU,$U=SyntaxError,kA=typeof StopIteration=="object"?StopIteration:null,UU=function(t){if(!kA)throw new $U("this environment lacks StopIteration");Od.set(t,"[[Done]]",!1);var i={next:function(){var l=Od.get(this,"[[Iterator]]"),f=Od.get(l,"[[Done]]");try{return{done:f,value:f?void 0:l.next()}}catch(d){if(Od.set(l,"[[Done]]",!0),d!==kA)throw d;return{done:!0,value:void 0}}}};return Od.set(i,"[[Iterator]]",t),i},J_,OA;function VU(){if(OA)return J_;OA=1;var e={}.toString;return J_=Array.isArray||function(t){return e.call(t)=="[object Array]"},J_}var GU=String.prototype.valueOf,WU=function(t){try{return GU.call(t),!0}catch{return!1}},HU=Object.prototype.toString,ZU="[object String]",qU=Cc(),gO=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:qU?WU(t):HU.call(t)===ZU},g2=typeof Map=="function"&&Map.prototype?Map:null,XU=typeof Set=="function"&&Set.prototype?Set:null,i0;g2||(i0=function(t){return!1});var yO=g2?Map.prototype.has:null,FA=XU?Set.prototype.has:null;!i0&&!yO&&(i0=function(t){return!1});var vO=i0||function(t){if(!t||typeof t!="object")return!1;try{if(yO.call(t),FA)try{FA.call(t)}catch{return!0}return t instanceof g2}catch{}return!1},KU=typeof Map=="function"&&Map.prototype?Map:null,y2=typeof Set=="function"&&Set.prototype?Set:null,o0;y2||(o0=function(t){return!1});var RA=KU?Map.prototype.has:null,_O=y2?Set.prototype.has:null;!o0&&!_O&&(o0=function(t){return!1});var xO=o0||function(t){if(!t||typeof t!="object")return!1;try{if(_O.call(t),RA)try{RA.call(t)}catch{return!0}return t instanceof y2}catch{}return!1},jA=sO,zA=UU;if(o2()||G0()){var Q_=Symbol.iterator;Zg.exports=function(t){if(t!=null&&typeof t[Q_]<"u")return t[Q_]();if(jA(t))return Array.prototype[Q_].call(t)}}else{var YU=VU(),JU=gO,LA=ks,QU=LA("%Map%",!0),eV=LA("%Set%",!0),Oa=ga,BA=Oa("Array.prototype.push"),DA=Oa("String.prototype.charCodeAt"),tV=Oa("String.prototype.slice"),rV=function(t,i){var a=t.length;if(i+1>=a)return i+1;var l=DA(t,i);if(l<55296||l>56319)return i+1;var f=DA(t,i+1);return f<56320||f>57343?i+1:i+2},e1=function(t){var i=0;return{next:function(){var l=i>=t.length,f;return l||(f=t[i],i+=1),{done:l,value:f}}}},NA=function(t,i){if(YU(t)||jA(t))return e1(t);if(JU(t)){var a=0;return{next:function(){var f=rV(t,a),d=tV(t,a,f);return a=f,{done:f>t.length,value:d}}}}if(i&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()};if(!QU&&!eV)Zg.exports=function(t){if(t!=null)return NA(t,!0)};else{var nV=vO,iV=xO,$A=Oa("Map.prototype.forEach",!0),UA=Oa("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var VA=Oa("Map.prototype.iterator",!0),GA=Oa("Set.prototype.iterator",!0);var WA=Oa("Map.prototype.@@iterator",!0)||Oa("Map.prototype._es6-shim iterator_",!0),HA=Oa("Set.prototype.@@iterator",!0)||Oa("Set.prototype._es6-shim iterator_",!0),oV=function(t){if(nV(t)){if(VA)return zA(VA(t));if(WA)return WA(t);if($A){var i=[];return $A(t,function(l,f){BA(i,[f,l])}),e1(i)}}if(iV(t)){if(GA)return zA(GA(t));if(HA)return HA(t);if(UA){var a=[];return UA(t,function(l){BA(a,l)}),e1(a)}}};Zg.exports=function(t){return oV(t)||NA(t)}}}var aV=Zg.exports,ZA=function(e){return e!==e},wO=function(t,i){return t===0&&i===0?1/t===1/i:!!(t===i||ZA(t)&&ZA(i))},sV=wO,bO=function(){return typeof Object.is=="function"?Object.is:sV},lV=bO,uV=Ic,cV=function(){var t=lV();return uV(Object,{is:t},{is:function(){return Object.is!==t}}),t},hV=Ic,fV=If,dV=wO,SO=bO,pV=cV,EO=fV(SO(),Object);hV(EO,{getPolyfill:SO,implementation:dV,shim:pV});var mV=EO,gV={}.toString,yV=Array.isArray||function(e){return gV.call(e)=="[object Array]"},vV=If,TO=ga,_V=ks,iw=_V("%ArrayBuffer%",!0),qg=TO("ArrayBuffer.prototype.byteLength",!0),xV=TO("Object.prototype.toString"),qA=!!iw&&!qg&&new iw(0).slice,XA=!!qA&&vV(qA),PO=qg||XA?function(t){if(!t||typeof t!="object")return!1;try{return qg?qg(t):XA(t,0),!0}catch{return!1}}:iw?function(t){return xV(t)==="[object ArrayBuffer]"}:function(t){return!1},wV=Date.prototype.getDay,bV=function(t){try{return wV.call(t),!0}catch{return!1}},SV=Object.prototype.toString,EV="[object Date]",TV=Cc(),PV=function(t){return typeof t!="object"||t===null?!1:TV?bV(t):SV.call(t)===EV},ow=ga,AO=Cc(),IO,CO,aw,sw;if(AO){IO=ow("Object.prototype.hasOwnProperty"),CO=ow("RegExp.prototype.exec"),aw={};var t1=function(){throw aw};sw={toString:t1,valueOf:t1},typeof Symbol.toPrimitive=="symbol"&&(sw[Symbol.toPrimitive]=t1)}var AV=ow("Object.prototype.toString"),IV=Object.getOwnPropertyDescriptor,CV="[object RegExp]",MV=AO?function(t){if(!t||typeof t!="object")return!1;var i=IV(t,"lastIndex"),a=i&&IO(i,"value");if(!a)return!1;try{CO(t,sw)}catch(l){return l===aw}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:AV(t)===CV},kV=ga,KA=kV("SharedArrayBuffer.prototype.byteLength",!0),OV=KA?function(t){if(!t||typeof t!="object")return!1;try{return KA(t),!0}catch{return!1}}:function(t){return!1},FV=Number.prototype.toString,RV=function(t){try{return FV.call(t),!0}catch{return!1}},jV=Object.prototype.toString,zV="[object Number]",LV=Cc(),BV=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:LV?RV(t):jV.call(t)===zV},MO=ga,DV=MO("Boolean.prototype.toString"),NV=MO("Object.prototype.toString"),$V=function(t){try{return DV(t),!0}catch{return!1}},UV="[object Boolean]",VV=Cc(),GV=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:VV&&Symbol.toStringTag in t?$V(t):NV(t)===UV},lw={exports:{}},WV=Object.prototype.toString,HV=o2();if(HV){var ZV=Symbol.prototype.toString,qV=/^Symbol\(.*\)$/,XV=function(t){return typeof t.valueOf()!="symbol"?!1:qV.test(ZV.call(t))};lw.exports=function(t){if(typeof t=="symbol")return!0;if(WV.call(t)!=="[object Symbol]")return!1;try{return XV(t)}catch{return!1}}}else lw.exports=function(t){return!1};var KV=lw.exports,uw={exports:{}},YA=typeof BigInt<"u"&&BigInt,YV=function(){return typeof YA=="function"&&typeof BigInt=="function"&&typeof YA(42)=="bigint"&&typeof BigInt(42)=="bigint"},JV=YV();if(JV){var QV=BigInt.prototype.valueOf,e7=function(t){try{return QV.call(t),!0}catch{}return!1};uw.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:e7(t)}}else uw.exports=function(t){return!1};var t7=uw.exports,r7=gO,n7=BV,i7=GV,o7=KV,a7=t7,s7=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(r7(t))return"String";if(n7(t))return"Number";if(i7(t))return"Boolean";if(o7(t))return"Symbol";if(a7(t))return"BigInt"},a0=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,JA=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,s0;a0||(s0=function(t){return!1});var cw=a0?a0.prototype.has:null,r1=JA?JA.prototype.has:null;!s0&&!cw&&(s0=function(t){return!1});var l7=s0||function(t){if(!t||typeof t!="object")return!1;try{if(cw.call(t,cw),r1)try{r1.call(t,r1)}catch{return!0}return t instanceof a0}catch{}return!1},hw={exports:{}},u7=ks,kO=ga,c7=u7("%WeakSet%",!0),n1=kO("WeakSet.prototype.has",!0);if(n1){var i1=kO("WeakMap.prototype.has",!0);hw.exports=function(t){if(!t||typeof t!="object")return!1;try{if(n1(t,n1),i1)try{i1(t,i1)}catch{return!0}return t instanceof c7}catch{}return!1}}else hw.exports=function(t){return!1};var h7=hw.exports,f7=vO,d7=xO,p7=l7,m7=h7,g7=function(t){if(t&&typeof t=="object"){if(f7(t))return"Map";if(d7(t))return"Set";if(p7(t))return"WeakMap";if(m7(t))return"WeakSet"}return!1},OO=Function.prototype.toString,Hh=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,fw,Xg;if(typeof Hh=="function"&&typeof Object.defineProperty=="function")try{fw=Object.defineProperty({},"length",{get:function(){throw Xg}}),Xg={},Hh(function(){throw 42},null,fw)}catch(e){e!==Xg&&(Hh=null)}else Hh=null;var y7=/^\s*class\b/,dw=function(t){try{var i=OO.call(t);return y7.test(i)}catch{return!1}},o1=function(t){try{return dw(t)?!1:(OO.call(t),!0)}catch{return!1}},Kg=Object.prototype.toString,v7="[object Object]",_7="[object Function]",x7="[object GeneratorFunction]",w7="[object HTMLAllCollection]",b7="[object HTML document.all class]",S7="[object HTMLCollection]",E7=typeof Symbol=="function"&&!!Symbol.toStringTag,T7=!(0 in[,]),pw=function(){return!1};if(typeof document=="object"){var P7=document.all;Kg.call(P7)===Kg.call(document.all)&&(pw=function(t){if((T7||!t)&&(typeof t>"u"||typeof t=="object"))try{var i=Kg.call(t);return(i===w7||i===b7||i===S7||i===v7)&&t("")==null}catch{}return!1})}var A7=Hh?function(t){if(pw(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Hh(t,null,fw)}catch(i){if(i!==Xg)return!1}return!dw(t)&&o1(t)}:function(t){if(pw(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(E7)return o1(t);if(dw(t))return!1;var i=Kg.call(t);return i!==_7&&i!==x7&&!/^\[object HTML/.test(i)?!1:o1(t)},I7=A7,C7=Object.prototype.toString,FO=Object.prototype.hasOwnProperty,M7=function(t,i,a){for(var l=0,f=t.length;l<f;l++)FO.call(t,l)&&(a==null?i(t[l],l,t):i.call(a,t[l],l,t))},k7=function(t,i,a){for(var l=0,f=t.length;l<f;l++)a==null?i(t.charAt(l),l,t):i.call(a,t.charAt(l),l,t)},O7=function(t,i,a){for(var l in t)FO.call(t,l)&&(a==null?i(t[l],l,t):i.call(a,t[l],l,t))},F7=function(t,i,a){if(!I7(i))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=a),C7.call(t)==="[object Array]"?M7(t,i,l):typeof t=="string"?k7(t,i,l):O7(t,i,l)},R7=F7,j7=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],a1=j7,z7=typeof globalThis>"u"?za:globalThis,L7=function(){for(var t=[],i=0;i<a1.length;i++)typeof z7[a1[i]]=="function"&&(t[t.length]=a1[i]);return t},l0=R7,B7=L7,QA=If,v2=ga,Yg=l2,D7=v2("Object.prototype.toString"),RO=Cc(),eI=typeof globalThis>"u"?za:globalThis,mw=B7(),_2=v2("String.prototype.slice"),s1=Object.getPrototypeOf,N7=v2("Array.prototype.indexOf",!0)||function(t,i){for(var a=0;a<t.length;a+=1)if(t[a]===i)return a;return-1},u0={__proto__:null};RO&&Yg&&s1?l0(mw,function(e){var t=new eI[e];if(Symbol.toStringTag in t){var i=s1(t),a=Yg(i,Symbol.toStringTag);if(!a){var l=s1(i);a=Yg(l,Symbol.toStringTag)}u0["$"+e]=QA(a.get)}}):l0(mw,function(e){var t=new eI[e],i=t.slice||t.set;i&&(u0["$"+e]=QA(i))});var $7=function(t){var i=!1;return l0(u0,function(a,l){if(!i)try{"$"+a(t)===l&&(i=_2(l,1))}catch{}}),i},U7=function(t){var i=!1;return l0(u0,function(a,l){if(!i)try{a(t),i=_2(l,1)}catch{}}),i},V7=function(t){if(!t||typeof t!="object")return!1;if(!RO){var i=_2(D7(t),8,-1);return N7(mw,i)>-1?i:i!=="Object"?!1:U7(t)}return Yg?$7(t):null},G7=ga,tI=G7("ArrayBuffer.prototype.byteLength",!0),W7=PO,H7=function(t){return W7(t)?tI?tI(t):t.byteLength:NaN},jO=T$,Os=ga,rI=X$,Z7=ks,_f=aV,q7=mO,nI=mV,iI=sO,oI=yV,aI=PO,sI=PV,lI=MV,uI=OV,cI=i2,hI=s7,fI=g7,dI=V7,pI=H7,mI=Os("SharedArrayBuffer.prototype.byteLength",!0),gI=Os("Date.prototype.getTime"),l1=Object.getPrototypeOf,yI=Os("Object.prototype.toString"),c0=Z7("%Set%",!0),gw=Os("Map.prototype.has",!0),h0=Os("Map.prototype.get",!0),vI=Os("Map.prototype.size",!0),f0=Os("Set.prototype.add",!0),zO=Os("Set.prototype.delete",!0),d0=Os("Set.prototype.has",!0),Jg=Os("Set.prototype.size",!0);function _I(e,t,i,a){for(var l=_f(e),f;(f=l.next())&&!f.done;)if(Va(t,f.value,i,a))return zO(e,f.value),!0;return!1}function LO(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function X7(e,t,i,a,l,f){var d=LO(i);if(d!=null)return d;var u=h0(t,d),w=jO({},l,{strict:!1});return typeof u>"u"&&!gw(t,d)||!Va(a,u,w,f)?!1:!gw(e,d)&&Va(a,u,w,f)}function K7(e,t,i){var a=LO(i);return a??(d0(t,a)&&!d0(e,a))}function xI(e,t,i,a,l,f){for(var d=_f(e),u,w;(u=d.next())&&!u.done;)if(w=u.value,Va(i,w,l,f)&&Va(a,h0(t,w),l,f))return zO(e,w),!0;return!1}function Va(e,t,i,a){var l=i||{};if(l.strict?nI(e,t):e===t)return!0;var f=hI(e),d=hI(t);if(f!==d)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return l.strict?nI(e,t):e==t;var u=a.has(e),w=a.has(t),E;if(u&&w){if(a.get(e)===a.get(t))return!0}else E={};return u||a.set(e,E),w||a.set(t,E),Q7(e,t,l,a)}function wI(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Y7(e,t,i,a){if(Jg(e)!==Jg(t))return!1;for(var l=_f(e),f=_f(t),d,u,w;(d=l.next())&&!d.done;)if(d.value&&typeof d.value=="object")w||(w=new c0),f0(w,d.value);else if(!d0(t,d.value)){if(i.strict||!K7(e,t,d.value))return!1;w||(w=new c0),f0(w,d.value)}if(w){for(;(u=f.next())&&!u.done;)if(u.value&&typeof u.value=="object"){if(!_I(w,u.value,i.strict,a))return!1}else if(!i.strict&&!d0(e,u.value)&&!_I(w,u.value,i.strict,a))return!1;return Jg(w)===0}return!0}function J7(e,t,i,a){if(vI(e)!==vI(t))return!1;for(var l=_f(e),f=_f(t),d,u,w,E,I,b;(d=l.next())&&!d.done;)if(E=d.value[0],I=d.value[1],E&&typeof E=="object")w||(w=new c0),f0(w,E);else if(b=h0(t,E),typeof b>"u"&&!gw(t,E)||!Va(I,b,i,a)){if(i.strict||!X7(e,t,E,I,i,a))return!1;w||(w=new c0),f0(w,E)}if(w){for(;(u=f.next())&&!u.done;)if(E=u.value[0],b=u.value[1],E&&typeof E=="object"){if(!xI(w,e,E,b,i,a))return!1}else if(!i.strict&&(!e.has(E)||!Va(h0(e,E),b,i,a))&&!xI(w,e,E,b,jO({},i,{strict:!1}),a))return!1;return Jg(w)===0}return!0}function Q7(e,t,i,a){var l,f;if(typeof e!=typeof t||e==null||t==null||yI(e)!==yI(t)||iI(e)!==iI(t))return!1;var d=oI(e),u=oI(t);if(d!==u)return!1;var w=e instanceof Error,E=t instanceof Error;if(w!==E||(w||E)&&(e.name!==t.name||e.message!==t.message))return!1;var I=lI(e),b=lI(t);if(I!==b||(I||b)&&(e.source!==t.source||rI(e)!==rI(t)))return!1;var T=sI(e),R=sI(t);if(T!==R||(T||R)&&gI(e)!==gI(t)||i.strict&&l1&&l1(e)!==l1(t))return!1;var L=dI(e),j=dI(t);if(L!==j)return!1;if(L||j){if(e.length!==t.length)return!1;for(l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}var se=wI(e),K=wI(t);if(se!==K)return!1;if(se||K){if(e.length!==t.length)return!1;for(l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}var Z=aI(e),G=aI(t);if(Z!==G)return!1;if(Z||G)return pI(e)!==pI(t)?!1:typeof Uint8Array=="function"&&Va(new Uint8Array(e),new Uint8Array(t),i,a);var ae=uI(e),X=uI(t);if(ae!==X)return!1;if(ae||X)return mI(e)!==mI(t)?!1:typeof Uint8Array=="function"&&Va(new Uint8Array(e),new Uint8Array(t),i,a);if(typeof e!=typeof t)return!1;var U=cI(e),P=cI(t);if(U.length!==P.length)return!1;for(U.sort(),P.sort(),l=U.length-1;l>=0;l--)if(U[l]!=P[l])return!1;for(l=U.length-1;l>=0;l--)if(f=U[l],!Va(e[f],t[f],i,a))return!1;var z=fI(e),B=fI(t);return z!==B?!1:z==="Set"||B==="Set"?Y7(e,t,i,a):z==="Map"?J7(e,t,i,a):!0}var e9=function(t,i,a){return Va(t,i,a,q7())};const t9=wf(e9);var r9=Object.defineProperty,Qr=(e,t)=>r9(e,"name",{value:t,configurable:!0}),n9=class{constructor(t){this.direction=!1,this.compareProperties=!0;var i,a,l;this.precision=10**-((i=t==null?void 0:t.precision)!=null?i:17),this.direction=(a=t==null?void 0:t.direction)!=null?a:!1,this.compareProperties=(l=t==null?void 0:t.compareProperties)!=null?l:!0}compare(t,i){if(t.type!==i.type||!Wd(t,i))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,i.coordinates);case"LineString":return this.compareLine(t.coordinates,i.coordinates);case"Polygon":return this.comparePolygon(t,i);case"GeometryCollection":return this.compareGeometryCollection(t,i);case"Feature":return this.compareFeature(t,i);case"FeatureCollection":return this.compareFeatureCollection(t,i);default:if(t.type.startsWith("Multi")){const a=yw(t),l=yw(i);return a.every(f=>l.some(d=>this.compare(f,d)))}}return!1}compareCoord(t,i){return t.length===i.length&&t.every((a,l)=>Math.abs(a-i[l])<this.precision)}compareLine(t,i,a=0,l=!1){if(!Wd(t,i))return!1;const f=t;let d=i;if(l&&!this.compareCoord(f[0],d[0])){const w=this.fixStartIndex(d,f);if(w)d=w;else return!1}const u=this.compareCoord(f[a],d[a]);return this.direction||u?this.comparePath(f,d):this.compareCoord(f[a],d[d.length-(1+a)])?this.comparePath(f.slice().reverse(),d):!1}fixStartIndex(t,i){let a,l=-1;for(let f=0;f<t.length;f++)if(this.compareCoord(t[f],i[0])){l=f;break}return l>=0&&(a=[].concat(t.slice(l,t.length),t.slice(1,l+1))),a}comparePath(t,i){return t.every((a,l)=>this.compareCoord(a,i[l]))}comparePolygon(t,i){if(this.compareLine(t.coordinates[0],i.coordinates[0],1,!0)){const a=t.coordinates.slice(1,t.coordinates.length),l=i.coordinates.slice(1,i.coordinates.length);return a.every(f=>l.some(d=>this.compareLine(f,d,1,!0)))}return!1}compareGeometryCollection(t,i){return Wd(t.geometries,i.geometries)&&this.compareBBox(t,i)&&t.geometries.every((a,l)=>this.compare(a,i.geometries[l]))}compareFeature(t,i){return t.id===i.id&&(this.compareProperties?t9(t.properties,i.properties):!0)&&this.compareBBox(t,i)&&this.compare(t.geometry,i.geometry)}compareFeatureCollection(t,i){return Wd(t.features,i.features)&&this.compareBBox(t,i)&&t.features.every((a,l)=>this.compare(a,i.features[l]))}compareBBox(t,i){return!t.bbox&&!i.bbox||(t.bbox&&i.bbox?this.compareCoord(t.bbox,i.bbox):!1)}};Qr(n9,"GeojsonEquality");function Wd(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}Qr(Wd,"sameLength");function yw(e){return e.coordinates.map(t=>({type:e.type.replace("Multi",""),coordinates:t}))}Qr(yw,"explode");var Uo=63710088e-1,BO={centimeters:Uo*100,centimetres:Uo*100,degrees:360/(2*Math.PI),feet:Uo*3.28084,inches:Uo*39.37,kilometers:Uo/1e3,kilometres:Uo/1e3,meters:Uo,metres:Uo,miles:Uo/1609.344,millimeters:Uo*1e3,millimetres:Uo*1e3,nauticalmiles:Uo/1852,radians:1,yards:Uo*1.0936},bI={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Cs(e,t,i={}){const a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}Qr(Cs,"feature");function i9(e,t,i={}){switch(e){case"Point":return xs(t).geometry;case"LineString":return sl(t).geometry;case"Polygon":return H0(t).geometry;case"MultiPoint":return NO(t).geometry;case"MultiLineString":return DO(t).geometry;case"MultiPolygon":return $O(t).geometry;default:throw new Error(e+" is invalid")}}Qr(i9,"geometry");function xs(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xf(e[0])||!xf(e[1]))throw new Error("coordinates must contain numbers");return Cs({type:"Point",coordinates:e},t,i)}Qr(xs,"point");function o9(e,t,i={}){return Z0(e.map(a=>xs(a,t)),i)}Qr(o9,"points");function H0(e,t,i={}){for(const l of e){if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(l[l.length-1].length!==l[0].length)throw new Error("First and last Position are not equivalent.");for(let f=0;f<l[l.length-1].length;f++)if(l[l.length-1][f]!==l[0][f])throw new Error("First and last Position are not equivalent.")}return Cs({type:"Polygon",coordinates:e},t,i)}Qr(H0,"polygon");function a9(e,t,i={}){return Z0(e.map(a=>H0(a,t)),i)}Qr(a9,"polygons");function sl(e,t,i={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Cs({type:"LineString",coordinates:e},t,i)}Qr(sl,"lineString");function s9(e,t,i={}){return Z0(e.map(a=>sl(a,t)),i)}Qr(s9,"lineStrings");function Z0(e,t={}){const i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=e,i}Qr(Z0,"featureCollection");function DO(e,t,i={}){return Cs({type:"MultiLineString",coordinates:e},t,i)}Qr(DO,"multiLineString");function NO(e,t,i={}){return Cs({type:"MultiPoint",coordinates:e},t,i)}Qr(NO,"multiPoint");function $O(e,t,i={}){return Cs({type:"MultiPolygon",coordinates:e},t,i)}Qr($O,"multiPolygon");function l9(e,t,i={}){return Cs({type:"GeometryCollection",geometries:e},t,i)}Qr(l9,"geometryCollection");function u9(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const i=Math.pow(10,t||0);return Math.round(e*i)/i}Qr(u9,"round");function UO(e,t="kilometers"){const i=BO[t];if(!i)throw new Error(t+" units is invalid");return e*i}Qr(UO,"radiansToLength");function x2(e,t="kilometers"){const i=BO[t];if(!i)throw new Error(t+" units is invalid");return e/i}Qr(x2,"lengthToRadians");function c9(e,t){return VO(x2(e,t))}Qr(c9,"lengthToDegrees");function h9(e){let t=e%360;return t<0&&(t+=360),t}Qr(h9,"bearingToAzimuth");function VO(e){return e%(2*Math.PI)*180/Math.PI}Qr(VO,"radiansToDegrees");function f9(e){return e%360*Math.PI/180}Qr(f9,"degreesToRadians");function d9(e,t="kilometers",i="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return UO(x2(e,t),i)}Qr(d9,"convertLength");function p9(e,t="meters",i="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");const a=bI[t];if(!a)throw new Error("invalid original units");const l=bI[i];if(!l)throw new Error("invalid final units");return e/a*l}Qr(p9,"convertArea");function xf(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}Qr(xf,"isNumber");function w2(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}Qr(w2,"isObject");function m9(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!xf(t))throw new Error("bbox must only contain numbers")})}Qr(m9,"validateBBox");function g9(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}Qr(g9,"validateId");var y9=Object.defineProperty,Cu=(e,t)=>y9(e,"name",{value:t,configurable:!0});function GO(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}Cu(GO,"getCoord");function v9(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}Cu(v9,"getCoords");function WO(e){if(e.length>1&&xf(e[0])&&xf(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return WO(e[0]);throw new Error("coordinates must only contain numbers")}Cu(WO,"containsNumber");function _9(e,t,i){if(!t||!i)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.type)}Cu(_9,"geojsonType");function x9(e,t,i){if(!e)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.geometry.type)}Cu(x9,"featureOf");function w9(e,t,i){if(!e)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+i+", FeatureCollection required");for(const a of e.features){if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!a.geometry||a.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+a.geometry.type)}}Cu(w9,"collectionOf");function HO(e){return e.type==="Feature"?e.geometry:e}Cu(HO,"getGeom");function b9(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}Cu(b9,"getType");var S9=Object.defineProperty,ji=(e,t)=>S9(e,"name",{value:t,configurable:!0});function Mf(e,t,i){if(e!==null)for(var a,l,f,d,u,w,E,I=0,b=0,T,R=e.type,L=R==="FeatureCollection",j=R==="Feature",se=L?e.features.length:1,K=0;K<se;K++){E=L?e.features[K].geometry:j?e.geometry:e,T=E?E.type==="GeometryCollection":!1,u=T?E.geometries.length:1;for(var Z=0;Z<u;Z++){var G=0,ae=0;if(d=T?E.geometries[Z]:E,d!==null){w=d.coordinates;var X=d.type;switch(I=i&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(w,b,K,G,ae)===!1)return!1;b++,G++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(t(w[a],b,K,G,ae)===!1)return!1;b++,X==="MultiPoint"&&G++}X==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(l=0;l<w[a].length-I;l++){if(t(w[a][l],b,K,G,ae)===!1)return!1;b++}X==="MultiLineString"&&G++,X==="Polygon"&&ae++}X==="Polygon"&&G++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(ae=0,l=0;l<w[a].length;l++){for(f=0;f<w[a][l].length-I;f++){if(t(w[a][l][f],b,K,G,ae)===!1)return!1;b++}ae++}G++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(Mf(d.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}ji(Mf,"coordEach");function E9(e,t,i,a){var l=i;return Mf(e,function(f,d,u,w,E){d===0&&i===void 0?l=f:l=t(l,f,d,u,w,E)},a),l}ji(E9,"coordReduce");function ZO(e,t){var i;switch(e.type){case"FeatureCollection":for(i=0;i<e.features.length&&t(e.features[i].properties,i)!==!1;i++);break;case"Feature":t(e.properties,0);break}}ji(ZO,"propEach");function T9(e,t,i){var a=i;return ZO(e,function(l,f){f===0&&i===void 0?a=l:a=t(a,l,f)}),a}ji(T9,"propReduce");function qO(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var i=0;i<e.features.length&&t(e.features[i],i)!==!1;i++);}ji(qO,"featureEach");function P9(e,t,i){var a=i;return qO(e,function(l,f){f===0&&i===void 0?a=l:a=t(a,l,f)}),a}ji(P9,"featureReduce");function A9(e){var t=[];return Mf(e,function(i){t.push(i)}),t}ji(A9,"coordAll");function b2(e,t){var i,a,l,f,d,u,w,E,I,b,T=0,R=e.type==="FeatureCollection",L=e.type==="Feature",j=R?e.features.length:1;for(i=0;i<j;i++){for(u=R?e.features[i].geometry:L?e.geometry:e,E=R?e.features[i].properties:L?e.properties:{},I=R?e.features[i].bbox:L?e.bbox:void 0,b=R?e.features[i].id:L?e.id:void 0,w=u?u.type==="GeometryCollection":!1,d=w?u.geometries.length:1,l=0;l<d;l++){if(f=w?u.geometries[l]:u,f===null){if(t(null,T,E,I,b)===!1)return!1;continue}switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(f,T,E,I,b)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<f.geometries.length;a++)if(t(f.geometries[a],T,E,I,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}ji(b2,"geomEach");function I9(e,t,i){var a=i;return b2(e,function(l,f,d,u,w){f===0&&i===void 0?a=l:a=t(a,l,f,d,u,w)}),a}ji(I9,"geomReduce");function q0(e,t){b2(e,function(i,a,l,f,d){var u=i===null?null:i.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(Cs(i,l,{bbox:f,id:d}),a,0)===!1?!1:void 0}var w;switch(u){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon";break}for(var E=0;E<i.coordinates.length;E++){var I=i.coordinates[E],b={type:w,coordinates:I};if(t(Cs(b,l),a,E)===!1)return!1}})}ji(q0,"flattenEach");function C9(e,t,i){var a=i;return q0(e,function(l,f,d){f===0&&d===0&&i===void 0?a=l:a=t(a,l,f,d)}),a}ji(C9,"flattenReduce");function XO(e,t){q0(e,function(i,a,l){var f=0;if(i.geometry){var d=i.geometry.type;if(!(d==="Point"||d==="MultiPoint")){var u,w=0,E=0,I=0;if(Mf(i,function(b,T,R,L,j){if(u===void 0||a>w||L>E||j>I){u=b,w=a,E=L,I=j,f=0;return}var se=sl([u,b],i.properties);if(t(se,a,l,j,f)===!1)return!1;f++,u=b})===!1)return!1}}})}ji(XO,"segmentEach");function M9(e,t,i){var a=i,l=!1;return XO(e,function(f,d,u,w,E){l===!1&&i===void 0?a=f:a=t(a,f,d,u,w,E),l=!0}),a}ji(M9,"segmentReduce");function KO(e,t){if(!e)throw new Error("geojson is required");q0(e,function(i,a,l){if(i.geometry!==null){var f=i.geometry.type,d=i.geometry.coordinates;switch(f){case"LineString":if(t(i,a,l,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<d.length;u++)if(t(sl(d[u],i.properties),a,l,u)===!1)return!1;break}}})}ji(KO,"lineEach");function k9(e,t,i){var a=i;return KO(e,function(l,f,d,u){f===0&&i===void 0?a=l:a=t(a,l,f,d,u)}),a}ji(k9,"lineReduce");function O9(e,t){if(t=t||{},!w2(t))throw new Error("options is invalid");var i=t.featureIndex||0,a=t.multiFeatureIndex||0,l=t.geometryIndex||0,f=t.segmentIndex||0,d=t.properties,u;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),d=d||e.features[i].properties,u=e.features[i].geometry;break;case"Feature":d=d||e.properties,u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var w=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=w.length+f-1),sl([w[f],w[f+1]],d,t);case"Polygon":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f-1),sl([w[l][f],w[l][f+1]],d,t);case"MultiLineString":return a<0&&(a=w.length+a),f<0&&(f=w[a].length+f-1),sl([w[a][f],w[a][f+1]],d,t);case"MultiPolygon":return a<0&&(a=w.length+a),l<0&&(l=w[a].length+l),f<0&&(f=w[a][l].length-f-1),sl([w[a][l][f],w[a][l][f+1]],d,t)}throw new Error("geojson is invalid")}ji(O9,"findSegment");function F9(e,t){if(t=t||{},!w2(t))throw new Error("options is invalid");var i=t.featureIndex||0,a=t.multiFeatureIndex||0,l=t.geometryIndex||0,f=t.coordIndex||0,d=t.properties,u;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),d=d||e.features[i].properties,u=e.features[i].geometry;break;case"Feature":d=d||e.properties,u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var w=u.coordinates;switch(u.type){case"Point":return xs(w,d,t);case"MultiPoint":return a<0&&(a=w.length+a),xs(w[a],d,t);case"LineString":return f<0&&(f=w.length+f),xs(w[f],d,t);case"Polygon":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f),xs(w[l][f],d,t);case"MultiLineString":return a<0&&(a=w.length+a),f<0&&(f=w[a].length+f),xs(w[a][f],d,t);case"MultiPolygon":return a<0&&(a=w.length+a),l<0&&(l=w[a].length+l),f<0&&(f=w[a][l].length-f),xs(w[a][l][f],d,t)}throw new Error("geojson is invalid")}ji(F9,"findPoint");function R9(e,t){var i=0,a=0,l=0,f=0,d=0,u=0,w=0,E=0,I=null,b=null,T=e[0],R=e[1],L=t.length;for(i;i<L;i++){a=0;var j=t[i].length-1,se=t[i];if(I=se[0],I[0]!==se[j][0]&&I[1]!==se[j][1])throw new Error("First and last coordinates in a ring must be the same");for(d=I[0]-T,u=I[1]-R,a;a<j;a++){if(b=se[a+1],E=b[1]-R,u<0&&E<0||u>0&&E>0){I=b,u=E,d=I[0]-T;continue}if(w=b[0]-e[0],E>0&&u<=0){if(f=d*E-w*u,f>0)l=l+1;else if(f===0)return 0}else if(u>0&&E<=0){if(f=d*E-w*u,f<0)l=l+1;else if(f===0)return 0}else if(E===0&&u<0){if(f=d*E-w*u,f===0)return 0}else if(u===0&&E<0){if(f=d*E-w*u,f===0)return 0}else if(u===0&&E===0){if(w<=0&&d>=0)return 0;if(d<=0&&w>=0)return 0}I=b,u=E,d=w}}return l%2!==0}var j9=Object.defineProperty,YO=(e,t)=>j9(e,"name",{value:t,configurable:!0});function JO(e,t,i={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const a=GO(e),l=HO(t),f=l.type,d=t.bbox;let u=l.coordinates;if(d&&QO(a,d)===!1)return!1;f==="Polygon"&&(u=[u]);let w=!1;for(var E=0;E<u.length;++E){const I=R9(a,u[E]);if(I===0)return!i.ignoreBoundary;I&&(w=!0)}return w}YO(JO,"booleanPointInPolygon");function QO(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}YO(QO,"inBBox");var z9=Object.defineProperty,L9=(e,t)=>z9(e,"name",{value:t,configurable:!0});function e4(e,t={}){let i=0,a=0,l=0;return Mf(e,function(f){i+=f[0],a+=f[1],l++},!0),xs([i/l,a/l],t.properties)}L9(e4,"centroid");const B9=()=>{const[e,t]=vt.useState(!1);return{detectCountry:vt.useCallback(async(a,l)=>{t(!0);const d=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of d.features)if(JO([a,l],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},u1=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var u;const[l,f]=vt.useState((u=e.properties)==null?void 0:u[t.key]);vt.useEffect(()=>{var w;f((w=e.properties)==null?void 0:w[t.key])},[e]);const d=vt.useCallback(w=>{f(w.currentTarget.value),a&&a(w)},[]);return yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:l,onChange:d}),yt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(w=>{if(parseInt(w.tags.admin_level)===t.adminLevel)return yt.jsx("option",{value:w.tags.name},w.id);if(w.type==="node"&&t.adminLevel===9)return yt.jsx("option",{value:w.tags.name},w.id)})})]})},D9=({feature:e,fields:t})=>e.properties?yt.jsxs(yt.Fragment,{children:[t.postcodeField&&yt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,N9=({placeholder:e,defaultValue:t})=>{const[i,a]=vt.useState(t);vt.useEffect(()=>{a(t)},[t]);const l=vt.useCallback(f=>{a(f.currentTarget.value)},[]);return yt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:l})]})};var p0={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */p0.exports;(function(e,t){(function(){var i,a="4.15.0",l=200,f="Expected a function",d="__lodash_hash_undefined__",u=1,w=2,E=1/0,I=9007199254740991,b="[object Arguments]",T="[object Array]",R="[object Boolean]",L="[object Date]",j="[object Error]",se="[object Function]",K="[object GeneratorFunction]",Z="[object Map]",G="[object Number]",ae="[object Object]",X="[object Promise]",U="[object RegExp]",P="[object Set]",z="[object String]",B="[object Symbol]",Q="[object WeakMap]",q="[object ArrayBuffer]",ve="[object DataView]",ye="[object Float32Array]",fe="[object Float64Array]",oe="[object Int8Array]",he="[object Int16Array]",J="[object Int32Array]",re="[object Uint8Array]",de="[object Uint8ClampedArray]",we="[object Uint16Array]",Pe="[object Uint32Array]",Ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Oe=/^\./,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/[\\^$.*+?()[\]{}|]/g,ot=/\\(\\)?/g,ft=/\w*$/,_t=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,mt={};mt[ye]=mt[fe]=mt[oe]=mt[he]=mt[J]=mt[re]=mt[de]=mt[we]=mt[Pe]=!0,mt[b]=mt[T]=mt[q]=mt[R]=mt[ve]=mt[L]=mt[j]=mt[se]=mt[Z]=mt[G]=mt[ae]=mt[U]=mt[P]=mt[z]=mt[Q]=!1;var wt={};wt[b]=wt[T]=wt[q]=wt[ve]=wt[R]=wt[L]=wt[ye]=wt[fe]=wt[oe]=wt[he]=wt[J]=wt[Z]=wt[G]=wt[ae]=wt[U]=wt[P]=wt[z]=wt[B]=wt[re]=wt[de]=wt[we]=wt[Pe]=!0,wt[j]=wt[se]=wt[Q]=!1;var Wt=typeof za=="object"&&za&&za.Object===Object&&za,Lt=typeof self=="object"&&self&&self.Object===Object&&self,ur=Wt||Lt||Function("return this")(),it=t&&!t.nodeType&&t,wr=it&&!0&&e&&!e.nodeType&&e,cr=wr&&wr.exports===it,Ht=cr&&Wt.process,Se=function(){try{return Ht&&Ht.binding("util")}catch{}}(),N=Se&&Se.isTypedArray;function D(H,_e){return H.set(_e[0],_e[1]),H}function xe(H,_e){return H.add(_e),H}function Xe(H,_e,$e){switch($e.length){case 0:return H.call(_e);case 1:return H.call(_e,$e[0]);case 2:return H.call(_e,$e[0],$e[1]);case 3:return H.call(_e,$e[0],$e[1],$e[2])}return H.apply(_e,$e)}function tt(H,_e){for(var $e=-1,lt=H?H.length:0;++$e<lt&&_e(H[$e],$e,H)!==!1;);return H}function ht(H,_e){for(var $e=-1,lt=_e.length,kt=H.length;++$e<lt;)H[kt+$e]=_e[$e];return H}function le(H,_e,$e,lt){var kt=-1,Tt=H?H.length:0;for(lt&&Tt&&($e=H[++kt]);++kt<Tt;)$e=_e($e,H[kt],kt,H);return $e}function k(H,_e){for(var $e=-1,lt=H?H.length:0;++$e<lt;)if(_e(H[$e],$e,H))return!0;return!1}function $(H){return function(_e){return _e==null?i:_e[H]}}function Te(H,_e){for(var $e=-1,lt=Array(H);++$e<H;)lt[$e]=_e($e);return lt}function We(H){return function(_e){return H(_e)}}function nt(H,_e){return H==null?i:H[_e]}function Ve(H){var _e=!1;if(H!=null&&typeof H.toString!="function")try{_e=!!(H+"")}catch{}return _e}function Et(H){var _e=-1,$e=Array(H.size);return H.forEach(function(lt,kt){$e[++_e]=[kt,lt]}),$e}function Ft(H,_e){return function($e){return H(_e($e))}}function pr(H){var _e=-1,$e=Array(H.size);return H.forEach(function(lt){$e[++_e]=lt}),$e}var br=Array.prototype,Rt=Function.prototype,$n=Object.prototype,ni=ur["__core-js_shared__"],ln=function(){var H=/[^.]+$/.exec(ni&&ni.keys&&ni.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),Me=Rt.toString,ie=$n.hasOwnProperty,ce=Me.call(Object),pe=$n.toString,Fe=RegExp("^"+Me.call(ie).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=cr?ur.Buffer:i,je=ur.Symbol,Ue=ur.Uint8Array,ze=Ft(Object.getPrototypeOf,Object),Qe=Object.create,dt=$n.propertyIsEnumerable,ut=br.splice,ct=Object.getOwnPropertySymbols,rr=Be?Be.isBuffer:i,Kt=Ft(Object.keys,Object),Er=Math.max,lr=rs(ur,"DataView"),Tr=rs(ur,"Map"),Dr=rs(ur,"Promise"),Vr=rs(ur,"Set"),un=rs(ur,"WeakMap"),mr=rs(Object,"create"),en=!dt.call({valueOf:1},"valueOf"),En=go(lr),ii=go(Tr),bi=go(Dr),Tn=go(Vr),Ha=go(un),_l=je?je.prototype:i,Mr=_l?_l.valueOf:i,xl=_l?_l.toString:i;function Pr(){}function Pn(H){var _e=-1,$e=H?H.length:0;for(this.clear();++_e<$e;){var lt=H[_e];this.set(lt[0],lt[1])}}function oi(){this.__data__=mr?mr(null):{}}function Fs(H){return this.has(H)&&delete this.__data__[H]}function ai(H){var _e=this.__data__;if(mr){var $e=_e[H];return $e===d?i:$e}return ie.call(_e,H)?_e[H]:i}function zi(H){var _e=this.__data__;return mr?_e[H]!==i:ie.call(_e,H)}function Mc(H,_e){var $e=this.__data__;return $e[H]=mr&&_e===i?d:_e,this}Pn.prototype.clear=oi,Pn.prototype.delete=Fs,Pn.prototype.get=ai,Pn.prototype.has=zi,Pn.prototype.set=Mc;function Un(H){var _e=-1,$e=H?H.length:0;for(this.clear();++_e<$e;){var lt=H[_e];this.set(lt[0],lt[1])}}function xn(){this.__data__=[]}function Rs(H){var _e=this.__data__,$e=Ka(_e,H);if($e<0)return!1;var lt=_e.length-1;return $e==lt?_e.pop():ut.call(_e,$e,1),!0}function ya(H){var _e=this.__data__,$e=Ka(_e,H);return $e<0?i:_e[$e][1]}function cn(H){return Ka(this.__data__,H)>-1}function va(H,_e){var $e=this.__data__,lt=Ka($e,H);return lt<0?$e.push([H,_e]):$e[lt][1]=_e,this}Un.prototype.clear=xn,Un.prototype.delete=Rs,Un.prototype.get=ya,Un.prototype.has=cn,Un.prototype.set=va;function An(H){var _e=-1,$e=H?H.length:0;for(this.clear();++_e<$e;){var lt=H[_e];this.set(lt[0],lt[1])}}function wl(){this.__data__={hash:new Pn,map:new(Tr||Un),string:new Pn}}function mo(H){return Ml(this,H).delete(H)}function Mu(H){return Ml(this,H).get(H)}function Za(H){return Ml(this,H).has(H)}function Rr(H,_e){return Ml(this,H).set(H,_e),this}An.prototype.clear=wl,An.prototype.delete=mo,An.prototype.get=Mu,An.prototype.has=Za,An.prototype.set=Rr;function _a(H){var _e=-1,$e=H?H.length:0;for(this.__data__=new An;++_e<$e;)this.add(H[_e])}function qa(H){return this.__data__.set(H,d),this}function ku(H){return this.__data__.has(H)}_a.prototype.add=_a.prototype.push=qa,_a.prototype.has=ku;function si(H){this.__data__=new Un(H)}function js(){this.__data__=new Un}function Ou(H){return this.__data__.delete(H)}function bl(H){return this.__data__.get(H)}function zs(H){return this.__data__.has(H)}function Sl(H,_e){var $e=this.__data__;if($e instanceof Un){var lt=$e.__data__;if(!Tr||lt.length<l-1)return lt.push([H,_e]),this;$e=this.__data__=new An(lt)}return $e.set(H,_e),this}si.prototype.clear=js,si.prototype.delete=Ou,si.prototype.get=bl,si.prototype.has=zs,si.prototype.set=Sl;function Xa(H,_e){var $e=In(H)||ko(H)?Te(H.length,String):[],lt=$e.length,kt=!!lt;for(var Tt in H)(_e||ie.call(H,Tt))&&!(kt&&(Tt=="length"||ea(Tt,lt)))&&$e.push(Tt);return $e}function Fu(H,_e,$e){($e!==i&&!Mo(H[_e],$e)||typeof _e=="number"&&$e===i&&!(_e in H))&&(H[_e]=$e)}function kc(H,_e,$e){var lt=H[_e];(!(ie.call(H,_e)&&Mo(lt,$e))||$e===i&&!(_e in H))&&(H[_e]=$e)}function Ka(H,_e){for(var $e=H.length;$e--;)if(Mo(H[$e][0],_e))return $e;return-1}function Oc(H,_e){return H&&Cl(_e,Fo(_e),H)}function Li(H,_e,$e,lt,kt,Tt,Zt){var Yt;if(lt&&(Yt=Tt?lt(H,kt,Tt,Zt):lt(H)),Yt!==i)return Yt;if(!Ti(H))return H;var vr=In(H);if(vr){if(Yt=Gc(H),!_e)return Il(H,Yt)}else{var Or=Ji(H),_r=Or==se||Or==K;if(Oo(H))return Ff(H,_e);if(Or==ae||Or==b||_r&&!Tt){if(Ve(H))return Tt?H:{};if(Yt=$u(_r?{}:H),!_e)return Bc(H,Oc(Yt,H))}else{if(!wt[Or])return Tt?H:{};Yt=Wc(H,Or,Li,_e)}}Zt||(Zt=new si);var $r=Zt.get(H);if($r)return $r;if(Zt.set(H,Yt),!vr)var hn=$e?$c(H):Fo(H);return tt(hn||H,function(jn,Vn){hn&&(Vn=jn,jn=H[Vn]),kc(Yt,Vn,Li(jn,_e,$e,lt,Vn,H,Zt))}),Yt}function El(H){return Ti(H)?Qe(H):{}}var Yn=Nc(Ru),Si=xa();function Ru(H,_e){return H&&Si(H,_e,Fo)}function Ls(H,_e){_e=ns(_e,H)?[_e]:Qa(_e);for(var $e=0,lt=_e.length;H!=null&&$e<lt;)H=H[Gr(_e[$e++])];return $e&&$e==lt?H:i}function ju(H,_e,$e){var lt=_e(H);return In(H)?lt:ht(lt,$e(H))}function zu(H){return pe.call(H)}function Ya(H,_e){return H!=null&&_e in Object(H)}function Lu(H,_e,$e,lt,kt){return H===_e?!0:H==null||_e==null||!Ti(H)&&!Bi(_e)?H!==H&&_e!==_e:Fc(H,_e,Lu,$e,lt,kt)}function Fc(H,_e,$e,lt,kt,Tt){var Zt=In(H),Yt=In(_e),vr=T,Or=T;Zt||(vr=Ji(H),vr=vr==b?ae:vr),Yt||(Or=Ji(_e),Or=Or==b?ae:Or);var _r=vr==ae&&!Ve(H),$r=Or==ae&&!Ve(_e),hn=vr==Or;if(hn&&!_r)return Tt||(Tt=new si),Zt||ta(H)?Nu(H,_e,$e,lt,kt,Tt):Lf(H,_e,vr,$e,lt,kt,Tt);if(!(kt&w)){var jn=_r&&ie.call(H,"__wrapped__"),Vn=$r&&ie.call(_e,"__wrapped__");if(jn||Vn){var Pi=jn?H.value():H,Ai=Vn?_e.value():_e;return Tt||(Tt=new si),$e(Pi,Ai,lt,kt,Tt)}}return hn?(Tt||(Tt=new si),Bf(H,_e,$e,lt,kt,Tt)):!1}function Rc(H,_e,$e,lt){var kt=$e.length,Tt=kt,Zt=!lt;if(H==null)return!Tt;for(H=Object(H);kt--;){var Yt=$e[kt];if(Zt&&Yt[2]?Yt[1]!==H[Yt[0]]:!(Yt[0]in H))return!1}for(;++kt<Tt;){Yt=$e[kt];var vr=Yt[0],Or=H[vr],_r=Yt[1];if(Zt&&Yt[2]){if(Or===i&&!(vr in H))return!1}else{var $r=new si;if(lt)var hn=lt(Or,_r,vr,H,_e,$r);if(!(hn===i?Lu(_r,Or,lt,u|w,$r):hn))return!1}}return!0}function kf(H){if(!Ti(H)||Vu(H))return!1;var _e=$s(H)||Ve(H)?Fe:_t;return _e.test(go(H))}function Of(H){return Bi(H)&&Us(H.length)&&!!mt[pe.call(H)]}function jc(H){return typeof H=="function"?H:H==null?ba:typeof H=="object"?In(H)?Bu(H[0],H[1]):Al(H):os(H)}function Tl(H){if(!Xr(H))return Kt(H);var _e=[];for(var $e in Object(H))ie.call(H,$e)&&$e!="constructor"&&_e.push($e);return _e}function Pl(H){if(!Ti(H))return Ns(H);var _e=Xr(H),$e=[];for(var lt in H)lt=="constructor"&&(_e||!ie.call(H,lt))||$e.push(lt);return $e}function Al(H){var _e=kl(H);return _e.length==1&&_e[0][2]?xr(_e[0][0],_e[0][1]):function($e){return $e===H||Rc($e,H,_e)}}function Bu(H,_e){return ns(H)&&Ol(_e)?xr(Gr(H),_e):function($e){var lt=ra($e,H);return lt===i&&lt===_e?_o($e,H):Lu(_e,lt,i,u|w)}}function Ja(H,_e,$e,lt,kt){if(H!==_e){if(!(In(_e)||ta(_e)))var Tt=Pl(_e);tt(Tt||_e,function(Zt,Yt){if(Tt&&(Yt=Zt,Zt=_e[Yt]),Ti(Zt))kt||(kt=new si),Ei(H,_e,Yt,$e,Ja,lt,kt);else{var vr=lt?lt(H[Yt],Zt,Yt+"",H,_e,kt):i;vr===i&&(vr=Zt),Fu(H,Yt,vr)}})}}function Ei(H,_e,$e,lt,kt,Tt,Zt){var Yt=H[$e],vr=_e[$e],Or=Zt.get(vr);if(Or){Fu(H,$e,Or);return}var _r=Tt?Tt(Yt,vr,$e+"",H,_e,Zt):i,$r=_r===i;$r&&(_r=vr,In(vr)||ta(vr)?In(Yt)?_r=Yt:vo(Yt)?_r=Il(Yt):($r=!1,_r=Li(vr,!0)):Vs(vr)||ko(vr)?ko(Yt)?_r=Gs(Yt):!Ti(Yt)||lt&&$s(Yt)?($r=!1,_r=Li(vr,!0)):_r=Yt:$r=!1),$r&&(Zt.set(vr,_r),kt(_r,vr,lt,Tt,Zt),Zt.delete(vr)),Fu(H,$e,_r)}function jr(H){return function(_e){return Ls(_e,H)}}function Du(H,_e){return _e=Er(_e===i?H.length-1:_e,0),function(){for(var $e=arguments,lt=-1,kt=Er($e.length-_e,0),Tt=Array(kt);++lt<kt;)Tt[lt]=$e[_e+lt];lt=-1;for(var Zt=Array(_e+1);++lt<_e;)Zt[lt]=$e[lt];return Zt[_e]=Tt,Xe(H,this,Zt)}}function Bs(H){if(typeof H=="string")return H;if(wa(H))return xl?xl.call(H):"";var _e=H+"";return _e=="0"&&1/H==-E?"-0":_e}function Qa(H){return In(H)?H:tn(H)}function Ff(H,_e){if(_e)return H.slice();var $e=new H.constructor(H.length);return H.copy($e),$e}function es(H){var _e=new H.constructor(H.byteLength);return new Ue(_e).set(new Ue(H)),_e}function Rf(H,_e){var $e=_e?es(H.buffer):H.buffer;return new H.constructor($e,H.byteOffset,H.byteLength)}function ts(H,_e,$e){var lt=_e?$e(Et(H),!0):Et(H);return le(lt,D,new H.constructor)}function jf(H){var _e=new H.constructor(H.source,ft.exec(H));return _e.lastIndex=H.lastIndex,_e}function zc(H,_e,$e){var lt=_e?$e(pr(H),!0):pr(H);return le(lt,xe,new H.constructor)}function zf(H){return Mr?Object(Mr.call(H)):{}}function Lc(H,_e){var $e=_e?es(H.buffer):H.buffer;return new H.constructor($e,H.byteOffset,H.length)}function Il(H,_e){var $e=-1,lt=H.length;for(_e||(_e=Array(lt));++$e<lt;)_e[$e]=H[$e];return _e}function Cl(H,_e,$e,lt){$e||($e={});for(var kt=-1,Tt=_e.length;++kt<Tt;){var Zt=_e[kt],Yt=lt?lt($e[Zt],H[Zt],Zt,$e,H):i;kc($e,Zt,Yt===i?H[Zt]:Yt)}return $e}function Bc(H,_e){return Cl(H,Uc(H),_e)}function Dc(H){return Du(function(_e,$e){var lt=-1,kt=$e.length,Tt=kt>1?$e[kt-1]:i,Zt=kt>2?$e[2]:i;for(Tt=H.length>3&&typeof Tt=="function"?(kt--,Tt):i,Zt&&Co($e[0],$e[1],Zt)&&(Tt=kt<3?i:Tt,kt=1),_e=Object(_e);++lt<kt;){var Yt=$e[lt];Yt&&H(_e,Yt,lt,Tt)}return _e})}function Nc(H,_e){return function($e,lt){if($e==null)return $e;if(!yo($e))return H($e,lt);for(var kt=$e.length,Tt=_e?kt:-1,Zt=Object($e);(_e?Tt--:++Tt<kt)&&lt(Zt[Tt],Tt,Zt)!==!1;);return $e}}function xa(H){return function(_e,$e,lt){for(var kt=-1,Tt=Object(_e),Zt=lt(_e),Yt=Zt.length;Yt--;){var vr=Zt[H?Yt:++kt];if($e(Tt[vr],vr,Tt)===!1)break}return _e}}function Nu(H,_e,$e,lt,kt,Tt){var Zt=kt&w,Yt=H.length,vr=_e.length;if(Yt!=vr&&!(Zt&&vr>Yt))return!1;var Or=Tt.get(H);if(Or&&Tt.get(_e))return Or==_e;var _r=-1,$r=!0,hn=kt&u?new _a:i;for(Tt.set(H,_e),Tt.set(_e,H);++_r<Yt;){var jn=H[_r],Vn=_e[_r];if(lt)var Pi=Zt?lt(Vn,jn,_r,_e,H,Tt):lt(jn,Vn,_r,H,_e,Tt);if(Pi!==i){if(Pi)continue;$r=!1;break}if(hn){if(!k(_e,function(Ai,Qi){if(!hn.has(Qi)&&(jn===Ai||$e(jn,Ai,lt,kt,Tt)))return hn.add(Qi)})){$r=!1;break}}else if(!(jn===Vn||$e(jn,Vn,lt,kt,Tt))){$r=!1;break}}return Tt.delete(H),Tt.delete(_e),$r}function Lf(H,_e,$e,lt,kt,Tt,Zt){switch($e){case ve:if(H.byteLength!=_e.byteLength||H.byteOffset!=_e.byteOffset)return!1;H=H.buffer,_e=_e.buffer;case q:return!(H.byteLength!=_e.byteLength||!lt(new Ue(H),new Ue(_e)));case R:case L:case G:return Mo(+H,+_e);case j:return H.name==_e.name&&H.message==_e.message;case U:case z:return H==_e+"";case Z:var Yt=Et;case P:var vr=Tt&w;if(Yt||(Yt=pr),H.size!=_e.size&&!vr)return!1;var Or=Zt.get(H);if(Or)return Or==_e;Tt|=u,Zt.set(H,_e);var _r=Nu(Yt(H),Yt(_e),lt,kt,Tt,Zt);return Zt.delete(H),_r;case B:if(Mr)return Mr.call(H)==Mr.call(_e)}return!1}function Bf(H,_e,$e,lt,kt,Tt){var Zt=kt&w,Yt=Fo(H),vr=Yt.length,Or=Fo(_e),_r=Or.length;if(vr!=_r&&!Zt)return!1;for(var $r=vr;$r--;){var hn=Yt[$r];if(!(Zt?hn in _e:ie.call(_e,hn)))return!1}var jn=Tt.get(H);if(jn&&Tt.get(_e))return jn==_e;var Vn=!0;Tt.set(H,_e),Tt.set(_e,H);for(var Pi=Zt;++$r<vr;){hn=Yt[$r];var Ai=H[hn],Qi=_e[hn];if(lt)var Gu=Zt?lt(Qi,Ai,hn,_e,H,Tt):lt(Ai,Qi,hn,H,_e,Tt);if(!(Gu===i?Ai===Qi||$e(Ai,Qi,lt,kt,Tt):Gu)){Vn=!1;break}Pi||(Pi=hn=="constructor")}if(Vn&&!Pi){var Ea=H.constructor,Ta=_e.constructor;Ea!=Ta&&"constructor"in H&&"constructor"in _e&&!(typeof Ea=="function"&&Ea instanceof Ea&&typeof Ta=="function"&&Ta instanceof Ta)&&(Vn=!1)}return Tt.delete(H),Tt.delete(_e),Vn}function $c(H){return ju(H,Fo,Uc)}function Ds(){var H=Pr.iteratee||is;return H=H===is?jc:H,arguments.length?H(arguments[0],arguments[1]):H}function Ml(H,_e){var $e=H.__data__;return Uu(_e)?$e[typeof _e=="string"?"string":"hash"]:$e.map}function kl(H){for(var _e=Fo(H),$e=_e.length;$e--;){var lt=_e[$e],kt=H[lt];_e[$e]=[lt,kt,Ol(kt)]}return _e}function rs(H,_e){var $e=nt(H,_e);return kf($e)?$e:i}var Uc=ct?Ft(ct,Object):Sa,Ji=zu;(lr&&Ji(new lr(new ArrayBuffer(1)))!=ve||Tr&&Ji(new Tr)!=Z||Dr&&Ji(Dr.resolve())!=X||Vr&&Ji(new Vr)!=P||un&&Ji(new un)!=Q)&&(Ji=function(H){var _e=pe.call(H),$e=_e==ae?H.constructor:i,lt=$e?go($e):i;if(lt)switch(lt){case En:return ve;case ii:return Z;case bi:return X;case Tn:return P;case Ha:return Q}return _e});function Vc(H,_e,$e){_e=ns(_e,H)?[_e]:Qa(_e);for(var lt,kt=-1,Zt=_e.length;++kt<Zt;){var Tt=Gr(_e[kt]);if(!(lt=H!=null&&$e(H,Tt)))break;H=H[Tt]}if(lt)return lt;var Zt=H?H.length:0;return!!Zt&&Us(Zt)&&ea(Tt,Zt)&&(In(H)||ko(H))}function Gc(H){var _e=H.length,$e=H.constructor(_e);return _e&&typeof H[0]=="string"&&ie.call(H,"index")&&($e.index=H.index,$e.input=H.input),$e}function $u(H){return typeof H.constructor=="function"&&!Xr(H)?El(ze(H)):{}}function Wc(H,_e,$e,lt){var kt=H.constructor;switch(_e){case q:return es(H);case R:case L:return new kt(+H);case ve:return Rf(H,lt);case ye:case fe:case oe:case he:case J:case re:case de:case we:case Pe:return Lc(H,lt);case Z:return ts(H,lt,$e);case G:case z:return new kt(H);case U:return jf(H);case P:return zc(H,lt,$e);case B:return zf(H)}}function ea(H,_e){return _e=_e??I,!!_e&&(typeof H=="number"||Mt.test(H))&&H>-1&&H%1==0&&H<_e}function Co(H,_e,$e){if(!Ti($e))return!1;var lt=typeof _e;return(lt=="number"?yo($e)&&ea(_e,$e.length):lt=="string"&&_e in $e)?Mo($e[_e],H):!1}function ns(H,_e){if(In(H))return!1;var $e=typeof H;return $e=="number"||$e=="symbol"||$e=="boolean"||H==null||wa(H)?!0:Ie.test(H)||!Ne.test(H)||_e!=null&&H in Object(_e)}function Uu(H){var _e=typeof H;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?H!=="__proto__":H===null}function Vu(H){return!!ln&&ln in H}function Xr(H){var _e=H&&H.constructor,$e=typeof _e=="function"&&_e.prototype||$n;return H===$e}function Ol(H){return H===H&&!Ti(H)}function xr(H,_e){return function($e){return $e==null?!1:$e[H]===_e&&(_e!==i||H in Object($e))}}function Ns(H){var _e=[];if(H!=null)for(var $e in Object(H))_e.push($e);return _e}var tn=Rl(function(H){H=jl(H);var _e=[];return Oe.test(H)&&_e.push(""),H.replace(Ze,function($e,lt,kt,Tt){_e.push(kt?Tt.replace(ot,"$1"):lt||$e)}),_e});function Gr(H){if(typeof H=="string"||wa(H))return H;var _e=H+"";return _e=="0"&&1/H==-E?"-0":_e}function go(H){if(H!=null){try{return Me.call(H)}catch{}try{return H+""}catch{}}return""}function Hc(H){for(var _e=-1,$e=H?H.length:0,lt=0,kt=[];++_e<$e;){var Tt=H[_e];Tt&&(kt[lt++]=Tt)}return kt}function Fl(H,_e){var $e=In(H)?tt:Yn;return $e(H,Ds(_e,3))}function Rl(H,_e){if(typeof H!="function"||_e&&typeof _e!="function")throw new TypeError(f);var $e=function(){var lt=arguments,kt=_e?_e.apply(this,lt):lt[0],Tt=$e.cache;if(Tt.has(kt))return Tt.get(kt);var Zt=H.apply(this,lt);return $e.cache=Tt.set(kt,Zt),Zt};return $e.cache=new(Rl.Cache||An),$e}Rl.Cache=An;function Zc(H){return Li(H,!1,!0)}function Mo(H,_e){return H===_e||H!==H&&_e!==_e}function ko(H){return vo(H)&&ie.call(H,"callee")&&(!dt.call(H,"callee")||pe.call(H)==b)}var In=Array.isArray;function yo(H){return H!=null&&Us(H.length)&&!$s(H)}function vo(H){return Bi(H)&&yo(H)}var Oo=rr||zl;function li(H){if(yo(H)&&(In(H)||typeof H=="string"||typeof H.splice=="function"||Oo(H)||ko(H)))return!H.length;var _e=Ji(H);if(_e==Z||_e==P)return!H.size;if(en||Xr(H))return!Kt(H).length;for(var $e in H)if(ie.call(H,$e))return!1;return!0}function $s(H){var _e=Ti(H)?pe.call(H):"";return _e==se||_e==K}function Us(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=I}function Ti(H){var _e=typeof H;return!!H&&(_e=="object"||_e=="function")}function Bi(H){return!!H&&typeof H=="object"}function Vs(H){if(!Bi(H)||pe.call(H)!=ae||Ve(H))return!1;var _e=ze(H);if(_e===null)return!0;var $e=ie.call(_e,"constructor")&&_e.constructor;return typeof $e=="function"&&$e instanceof $e&&Me.call($e)==ce}function wa(H){return typeof H=="symbol"||Bi(H)&&pe.call(H)==B}var ta=N?We(N):Of;function Gs(H){return Cl(H,Ws(H))}function jl(H){return H==null?"":Bs(H)}function ra(H,_e,$e){var lt=H==null?i:Ls(H,_e);return lt===i?$e:lt}function _o(H,_e){return H!=null&&Vc(H,_e,Ya)}function Fo(H){return yo(H)?Xa(H):Tl(H)}function Ws(H){return yo(H)?Xa(H,!0):Pl(H)}var kr=Dc(function(H,_e,$e){Ja(H,_e,$e)});function ba(H){return H}function is(H){return jc(typeof H=="function"?H:Li(H,!0))}function os(H){return ns(H)?$(Gr(H)):jr(H)}function Sa(){return[]}function zl(){return!1}Pr.compact=Hc,Pr.iteratee=is,Pr.keys=Fo,Pr.keysIn=Ws,Pr.memoize=Rl,Pr.merge=kr,Pr.property=os,Pr.toPlainObject=Gs,Pr.clone=Zc,Pr.eq=Mo,Pr.forEach=Fl,Pr.get=ra,Pr.hasIn=_o,Pr.identity=ba,Pr.isArguments=ko,Pr.isArray=In,Pr.isArrayLike=yo,Pr.isArrayLikeObject=vo,Pr.isBuffer=Oo,Pr.isEmpty=li,Pr.isFunction=$s,Pr.isLength=Us,Pr.isObject=Ti,Pr.isObjectLike=Bi,Pr.isPlainObject=Vs,Pr.isSymbol=wa,Pr.isTypedArray=ta,Pr.stubArray=Sa,Pr.stubFalse=zl,Pr.toString=jl,Pr.each=Fl,Pr.VERSION=a,wr&&((wr.exports=Pr)._=Pr,it._=Pr)}).call(za)})(p0,p0.exports);var $9=p0.exports,U9=Qg;function Qg(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Qg(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Qg(e.geometries[a],t);else if(i==="Feature")Qg(e.geometry,t);else if(i==="Polygon")SI(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)SI(e.coordinates[a],t);return e}function SI(e,t){if(e.length!==0){EI(e[0],t);for(var i=1;i<e.length;i++)EI(e[i],!t)}}function EI(e,t){for(var i=0,a=0,l=0,f=e.length,d=f-1;l<f;d=l++){var u=(e[l][0]-e[d][0])*(e[d][1]+e[l][1]),w=i+u;a+=Math.abs(i)>=Math.abs(u)?i-w+u:u-w+i,i=w}i+a>=0!=!!t&&e.reverse()}const V9=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var G9=V9,Ir=$9,Eg=U9,ey={};G9.forEach(function(e){if(e.polygon==="all")ey[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),ey[e.key]={},ey[e.key][t]=i}});function W9(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Ir.merge(e,t)}var m0={};m0=function(e,t,i){t=Ir.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:ey,deduplicator:W9},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=f(e):a=l(e),a;function l(w){var E=new Array,I=new Array,b=new Array;function T(X){var U=Ir.clone(X);U.lat=X.center.lat,U.lon=X.center.lon,U.__is_center_placeholder=!0,E.push(U)}function R(X){var U=Ir.clone(X);U.nodes=[];function P(z,B,Q){var q={type:"node",id:"_"+U.type+"/"+U.id+"bounds"+Q,lat:z,lon:B};U.nodes.push(q.id),E.push(q)}P(U.bounds.minlat,U.bounds.minlon,1),P(U.bounds.maxlat,U.bounds.minlon,2),P(U.bounds.maxlat,U.bounds.maxlon,3),P(U.bounds.minlat,U.bounds.maxlon,4),U.nodes.push(U.nodes[0]),U.__is_bounds_placeholder=!0,I.push(U)}function L(X){function U(P,z,B){var Q={type:"node",id:B,lat:P,lon:z};E.push(Q)}Ir.isArray(X.nodes)||(X.nodes=X.geometry.map(function(P){return P!==null?"_anonymous@"+P.lat+"/"+P.lon:"_anonymous@unknown_location"})),X.geometry.forEach(function(P,z){P&&U(P.lat,P.lon,X.nodes[z])})}function j(X){function U(z,B,Q){var q={type:"node",id:Q,lat:z,lon:B};E.push(q)}function P(z,B){if(I.some(function(ve){return ve.type=="way"&&ve.id==B}))return;var Q={type:"way",id:B,nodes:[]};function q(ve,ye){var fe={type:"node",id:"_anonymous@"+ve+"/"+ye,lat:ve,lon:ye};Q.nodes.push(fe.id),E.push(fe)}z.forEach(function(ve){ve?q(ve.lat,ve.lon):Q.nodes.push(void 0)}),I.push(Q)}X.members.forEach(function(z,B){z.type=="node"?z.lat&&U(z.lat,z.lon,z.ref):z.type=="way"&&z.geometry&&(z.ref="_fullGeom"+z.ref,P(z.geometry,z.ref))})}for(var se=0;se<w.elements.length;se++)switch(w.elements[se].type){case"node":var K=w.elements[se];E.push(K);break;case"way":var Z=Ir.clone(w.elements[se]);Z.nodes=Ir.clone(Z.nodes),I.push(Z),Z.center&&T(Z),Z.geometry?L(Z):Z.bounds&&R(Z);break;case"relation":var G=Ir.clone(w.elements[se]);G.members=Ir.clone(G.members),b.push(G);var ae=G.members&&G.members.some(function(X){return X.type=="node"&&X.lat||X.type=="way"&&X.geometry&&X.geometry.length>0});G.center&&T(G),ae?j(G):G.bounds&&R(G);break}return d(E,I,b)}function f(w){var E=new Array,I=new Array,b=new Array;function T(G,ae,X){G.hasAttribute(X)&&(ae[X]=G.getAttribute(X))}function R(G,ae){var X=Ir.clone(G);T(ae,X,"lat"),T(ae,X,"lon"),X.__is_center_placeholder=!0,E.push(X)}function L(G,ae){var X=Ir.clone(G);X.nodes=[];function U(P,z,B){var Q={type:"node",id:"_"+X.type+"/"+X.id+"bounds"+B,lat:P,lon:z};X.nodes.push(Q.id),E.push(Q)}U(ae.getAttribute("minlat"),ae.getAttribute("minlon"),1),U(ae.getAttribute("maxlat"),ae.getAttribute("minlon"),2),U(ae.getAttribute("maxlat"),ae.getAttribute("maxlon"),3),U(ae.getAttribute("minlat"),ae.getAttribute("maxlon"),4),X.nodes.push(X.nodes[0]),X.__is_bounds_placeholder=!0,I.push(X)}function j(G,ae){function X(U,P,z){var B={type:"node",id:z,lat:U,lon:P};return E.push(B),B.id}Ir.isArray(G.nodes)||(G.nodes=[],Ir.each(ae,function(U,P){G.nodes.push("_anonymous@"+U.getAttribute("lat")+"/"+U.getAttribute("lon"))})),Ir.each(ae,function(U,P){U.getAttribute("lat")&&X(U.getAttribute("lat"),U.getAttribute("lon"),G.nodes[P])})}function se(G,ae){function X(P,z,B){var Q={type:"node",id:B,lat:P,lon:z};E.push(Q)}function U(P,z){if(I.some(function(q){return q.type=="way"&&q.id==z}))return;var B={type:"way",id:z,nodes:[]};function Q(q,ve){var ye={type:"node",id:"_anonymous@"+q+"/"+ve,lat:q,lon:ve};B.nodes.push(ye.id),E.push(ye)}Ir.each(P,function(q){q.getAttribute("lat")?Q(q.getAttribute("lat"),q.getAttribute("lon")):B.nodes.push(void 0)}),I.push(B)}Ir.each(ae,function(P,z){G.members[z].type=="node"?P.getAttribute("lat")&&X(P.getAttribute("lat"),P.getAttribute("lon"),G.members[z].ref):G.members[z].type=="way"&&P.getElementsByTagName("nd").length>0&&(G.members[z].ref="_fullGeom"+G.members[z].ref,U(P.getElementsByTagName("nd"),G.members[z].ref))})}Ir.each(w.getElementsByTagName("node"),function(G,ae){var X={};Ir.each(G.getElementsByTagName("tag"),function(P){X[P.getAttribute("k")]=P.getAttribute("v")});var U={type:"node"};T(G,U,"id"),T(G,U,"lat"),T(G,U,"lon"),T(G,U,"version"),T(G,U,"timestamp"),T(G,U,"changeset"),T(G,U,"uid"),T(G,U,"user"),Ir.isEmpty(X)||(U.tags=X),E.push(U)});var K,Z;return Ir.each(w.getElementsByTagName("way"),function(G,ae){var X={},U=[];Ir.each(G.getElementsByTagName("tag"),function(B){X[B.getAttribute("k")]=B.getAttribute("v")});var P=!1;Ir.each(G.getElementsByTagName("nd"),function(B,Q){var q;(q=B.getAttribute("ref"))&&(U[Q]=q),!P&&B.getAttribute("lat")&&(P=!0)});var z={type:"way"};T(G,z,"id"),T(G,z,"version"),T(G,z,"timestamp"),T(G,z,"changeset"),T(G,z,"uid"),T(G,z,"user"),U.length>0&&(z.nodes=U),Ir.isEmpty(X)||(z.tags=X),(K=G.getElementsByTagName("center")[0])&&R(z,K),P?j(z,G.getElementsByTagName("nd")):(Z=G.getElementsByTagName("bounds")[0])&&L(z,Z),I.push(z)}),Ir.each(w.getElementsByTagName("relation"),function(G,ae){var X={},U=[];Ir.each(G.getElementsByTagName("tag"),function(B){X[B.getAttribute("k")]=B.getAttribute("v")});var P=!1;Ir.each(G.getElementsByTagName("member"),function(B,Q){U[Q]={},T(B,U[Q],"ref"),T(B,U[Q],"role"),T(B,U[Q],"type"),(!P&&U[Q].type=="node"&&B.getAttribute("lat")||U[Q].type=="way"&&B.getElementsByTagName("nd").length>0)&&(P=!0)});var z={type:"relation"};T(G,z,"id"),T(G,z,"version"),T(G,z,"timestamp"),T(G,z,"changeset"),T(G,z,"uid"),T(G,z,"user"),U.length>0&&(z.members=U),Ir.isEmpty(X)||(z.tags=X),(K=G.getElementsByTagName("center")[0])&&R(z,K),P?se(z,G.getElementsByTagName("member")):(Z=G.getElementsByTagName("bounds")[0])&&L(z,Z),b.push(z)}),d(E,I,b)}function d(w,E,I){function b(Oe,Ze){if(typeof Ze!="object"&&(Ze={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Oe,Ze);for(var He in Oe)if(t.uninterestingTags[He]!==!0&&!(Ze[He]===!0||Ze[He]===Oe[He]))return!0;return!1}function T(Oe){var Ze={timestamp:Oe.timestamp,version:Oe.version,changeset:Oe.changeset,user:Oe.user,uid:Oe.uid};for(var He in Ze)Ze[He]===void 0&&delete Ze[He];return Ze}for(var R=new Object,L=new Object,j=0;j<w.length;j++){var se=w[j];R[se.id]!==void 0&&(se=t.deduplicator(se,R[se.id])),R[se.id]=se,typeof se.tags<"u"&&b(se.tags)&&(L[se.id]=!0)}for(var j=0;j<I.length;j++)if(Ir.isArray(I[j].members))for(var K=0;K<I[j].members.length;K++)I[j].members[K].type=="node"&&(L[I[j].members[K].ref]=!0);for(var Z=new Object,G=new Object,j=0;j<E.length;j++){var ae=E[j];if(Z[ae.id]&&(ae=t.deduplicator(ae,Z[ae.id])),Z[ae.id]=ae,Ir.isArray(ae.nodes))for(var K=0;K<ae.nodes.length;K++)typeof ae.nodes[K]!="object"&&(G[ae.nodes[K]]=!0,ae.nodes[K]=R[ae.nodes[K]])}var X=new Array;for(var U in R){var se=R[U];(!G[U]||L[U])&&X.push(se)}for(var P=new Array,j=0;j<I.length;j++){var z=I[j];P[z.id]&&(z=t.deduplicator(z,P[z.id])),P[z.id]=z}var B={node:{},way:{},relation:{}};for(var U in P){var z=P[U];if(!Ir.isArray(z.members)){t.verbose&&console.warn("Relation",z.type+"/"+z.id,"ignored because it has no members");continue}for(var K=0;K<z.members.length;K++){var Q=z.members[K].type,q=z.members[K].ref;if(typeof q!="number"&&(q=q.replace("_fullGeom","")),!B[Q]){t.verbose&&console.warn("Relation",z.type+"/"+z.id,"member",Q+"/"+q,"ignored because it has an invalid type");continue}typeof B[Q][q]>"u"&&(B[Q][q]=[]),B[Q][q].push({role:z.members[K].role,rel:z.id,reltags:z.tags})}}var ve,ye=[];for(j=0;j<X.length;j++){if(typeof X[j].lon>"u"||typeof X[j].lat>"u"){t.verbose&&console.warn("POI",X[j].type+"/"+X[j].id,"ignored because it lacks coordinates");continue}var fe={type:"Feature",id:X[j].type+"/"+X[j].id,properties:{type:X[j].type,id:X[j].id,tags:X[j].tags||{},relations:B.node[X[j].id]||[],meta:T(X[j])},geometry:{type:"Point",coordinates:[+X[j].lon,+X[j].lat]}};X[j].__is_center_placeholder&&(fe.properties.geometry="center"),i?i(fe):ye.push(fe)}for(var oe=[],he=[],j=0;j<I.length;j++)if(P[I[j].id]===I[j]){if(typeof I[j].tags<"u"&&(I[j].tags.type=="route"||I[j].tags.type=="waterway")){let Ze=function(He){var ot=!1,ft;ft=He.members.filter(function(wt){return wt.type==="way"}),ft=ft.map(function(wt){var Wt=Z[wt.ref];if(Wt===void 0||Wt.nodes===void 0){t.verbose&&console.warn("Route "+He.type+"/"+He.id,"tainted by a missing or incomplete  way",wt.type+"/"+wt.ref),ot=!0;return}return{id:wt.ref,role:wt.role,way:Wt,nodes:Wt.nodes.filter(function(Lt){return Lt!==void 0?!0:(ot=!0,t.verbose&&console.warn("Route",He.type+"/"+He.id,"tainted by a way",wt.type+"/"+wt.ref,"with a missing node"),!1)})}}),ft=Ir.compact(ft);var _t;_t=c1(ft);var Mt=[];if(Mt=Ir.compact(_t.map(function(wt){return Ir.compact(wt.map(function(Wt){return[+Wt.lon,+Wt.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",He.type+"/"+He.id,"contains no coordinates"),!1;var mt={type:"Feature",id:He.type+"/"+He.id,properties:{type:He.type,id:He.id,tags:He.tags||{},relations:B[He.type][He.id]||[],meta:T(He)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return ot&&(t.verbose&&console.warn("Route",He.type+"/"+He.id,"is tainted"),mt.properties.tainted=!0),mt};var Ne=Ze;if(!Ir.isArray(I[j].members)){t.verbose&&console.warn("Route",I[j].type+"/"+I[j].id,"ignored because it has no members");continue}if(I[j].members.forEach(function(He){Z[He.ref]&&!b(Z[He.ref].tags)&&(Z[He.ref].is_skippablerelationmember=!0)}),fe=Ze(I[j]),fe===!1){t.verbose&&console.warn("Route relation",I[j].type+"/"+I[j].id,"ignored because it has invalid geometry");continue}i?i(Eg(fe)):he.push(fe)}if(typeof I[j].tags<"u"&&(I[j].tags.type=="multipolygon"||I[j].tags.type=="boundary")){let He=function(ot,ft){var _t=!1,Mt=re?"way":"relation",mt=typeof ot.id=="number"?ot.id:+ot.id.replace("_fullGeom",""),wt;wt=ft.members.filter(function(D){return D.type==="way"}),wt=wt.map(function(D){var xe=Z[D.ref];if(xe===void 0||xe.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+mt,"tainted by a missing or incomplete way",D.type+"/"+D.ref),_t=!0;return}return{id:D.ref,role:D.role||"outer",way:xe,nodes:xe.nodes.filter(function(Xe){return Xe!==void 0?!0:(_t=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+mt,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),wt=Ir.compact(wt);var Wt,Lt;Wt=c1(wt.filter(function(D){return D.role==="outer"})),Lt=c1(wt.filter(function(D){return D.role==="inner"}));var ur;function it(D){var xe=function(k,$){for(var Te=0;Te<$.length;Te++)if(tt($[Te],k))return!0;return!1},Xe=function(k){return k.map(function($){return[+$.lat,+$.lon]})},tt=function(k,$){for(var Te=k[0],We=k[1],nt=!1,Ve=0,Et=$.length-1;Ve<$.length;Et=Ve++){var Ft=$[Ve][0],pr=$[Ve][1],br=$[Et][0],Rt=$[Et][1],$n=pr>We!=Rt>We&&Te<(br-Ft)*(We-pr)/(Rt-pr)+Ft;$n&&(nt=!nt)}return nt},ht,le;for(D=Xe(D),ht=0;ht<Wt.length;ht++)if(le=Xe(Wt[ht]),xe(le,D))return ht}ur=Wt.map(function(D){return[D]});for(var wr=0;wr<Lt.length;wr++){var cr=it(Lt[wr]);cr!==void 0?ur[cr].push(Lt[wr]):t.verbose&&console.warn("Multipolygon",Mt+"/"+mt,"contains an inner ring with no containing outer")}var Ht=[];if(Ht=Ir.compact(ur.map(function(D){var xe=Ir.compact(D.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+mt,"contains a ring with less than four nodes");return}return Ir.compact(Xe.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(xe.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+mt,"contains an empty ring cluster");return}return xe})),Ht.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+mt,"contains no coordinates"),!1;var Se="MultiPolygon";Ht.length===1&&(Se="Polygon",Ht=Ht[0]);var N={type:"Feature",id:ot.type+"/"+mt,properties:{type:ot.type,id:mt,tags:ot.tags||{},relations:B[ot.type][ot.id]||[],meta:T(ot)},geometry:{type:Se,coordinates:Ht}};return _t&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+mt,"is tainted"),N.properties.tainted=!0),N};var Ie=He;if(!Ir.isArray(I[j].members)){t.verbose&&console.warn("Multipolygon",I[j].type+"/"+I[j].id,"ignored because it has no members");continue}for(var J=0,K=0;K<I[j].members.length;K++)I[j].members[K].role=="outer"?J++:t.verbose&&I[j].members[K].role!="inner"&&console.warn("Multipolygon",I[j].type+"/"+I[j].id,"member",I[j].members[K].type+"/"+I[j].members[K].ref,'ignored because it has an invalid role: "'+I[j].members[K].role+'"');if(I[j].members.forEach(function(ot){Z[ot.ref]&&(ot.role==="outer"&&!b(Z[ot.ref].tags,I[j].tags)&&(Z[ot.ref].is_skippablerelationmember=!0),ot.role==="inner"&&!b(Z[ot.ref].tags)&&(Z[ot.ref].is_skippablerelationmember=!0))}),J==0){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because it has no outer ways");continue}var re=!1;J==1&&!b(I[j].tags,{type:!0})&&(re=!0);var fe=null;if(!re)fe=He(I[j],I[j]);else{var de=I[j].members.filter(function(ot){return ot.role==="outer"})[0];if(de=Z[de.ref],de===void 0){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because outer way",de.type+"/"+de.ref,"is missing");continue}de.is_skippablerelationmember=!0,fe=He(de,I[j])}if(fe===!1){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because it has invalid geometry");continue}i?i(Eg(fe)):he.push(fe)}}for(var j=0;j<E.length;j++)if(Z[E[j].id]===E[j]){if(!Ir.isArray(E[j].nodes)){t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"ignored because it has no nodes");continue}if(!E[j].is_skippablerelationmember){typeof E[j].id!="number"&&(E[j].id=+E[j].id.replace("_fullGeom","")),E[j].tainted=!1,E[j].hidden=!1;var we=new Array;for(K=0;K<E[j].nodes.length;K++)typeof E[j].nodes[K]=="object"?we.push([+E[j].nodes[K].lon,+E[j].nodes[K].lat]):(t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"is tainted by an invalid node"),E[j].tainted=!0);if(we.length<=1){t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"ignored because it contains too few nodes");continue}var Pe="LineString";typeof E[j].nodes[0]<"u"&&typeof E[j].nodes[E[j].nodes.length-1]<"u"&&E[j].nodes[0].id===E[j].nodes[E[j].nodes.length-1].id&&(typeof E[j].tags<"u"&&u(E[j].tags)||E[j].__is_bounds_placeholder)&&(Pe="Polygon",we=[we]);var fe={type:"Feature",id:E[j].type+"/"+E[j].id,properties:{type:E[j].type,id:E[j].id,tags:E[j].tags||{},relations:B.way[E[j].id]||[],meta:T(E[j])},geometry:{type:Pe,coordinates:we}};E[j].tainted&&(t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"is tainted"),fe.properties.tainted=!0),E[j].__is_bounds_placeholder&&(fe.properties.geometry="bounds"),i?i(Eg(fe)):Pe=="LineString"?oe.push(fe):he.push(fe)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(he),ve.features=ve.features.concat(oe),ve.features=ve.features.concat(ye),t.flatProperties&&ve.features.forEach(function(Oe){Oe.properties=Ir.merge(Oe.properties.meta,Oe.properties.tags,{id:Oe.properties.type+"/"+Oe.properties.id})}),ve=Eg(ve),ve)}function u(w){var E=t.polygonFeatures;if(typeof E=="function")return E(w);if(w.area==="no")return!1;for(var I in w){var b=w[I],T=E[I];if(!(typeof T>"u")&&b!=="no"&&(T===!0||T.included_values&&T.included_values[b]===!0||T.excluded_values&&T.excluded_values[b]!==!0))return!0}return!1}};function c1(e){for(var t=function(b){return b[0]},i=function(b){return b[b.length-1]},a=function(b,T){return b!==void 0&&T!==void 0&&b.id===T.id},l=[],f,d,u,w,E,I;e.length;)for(f=e.pop().nodes.slice(),l.push(f);e.length&&!a(t(f),i(f));){for(d=t(f),u=i(f),w=0;w<e.length;w++)if(I=e[w].nodes,a(u,t(I))){E=f.push,I=I.slice(1);break}else if(a(u,i(I))){E=f.push,I=I.slice(0,-1).reverse();break}else if(a(d,i(I))){E=f.unshift,I=I.slice(0,-1);break}else if(a(d,t(I))){E=f.unshift,I=I.slice(1).reverse();break}else I=E=null;if(!I)break;e.splice(w,1),E.apply(f,I)}return l}m0.toGeojson=m0;var H9=m0;const Z9=wf(H9),h1={type:"FeatureCollection",features:[]},t4=()=>{const[e,t]=vt.useState(!1),i=vt.useCallback(async(d,u,w)=>{var j,se;if(e||(console.log(w),w<16))return h1;t(!0);let E=300;w>17&&(E=200),w>18&&(E=100),w>19&&(E=50),console.log("overpass: loading...");let I="[out:json]";I+=`[timeout:25];
`,I+='nwr["building"]',I+=`(around:${E},${d},${u});
`,I+="out meta geom;",console.log(I);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(I)}`,{});if(b.status!==200)return t(!1),h1;const T=await b.json();console.log("overpass json elements: ",T.elements);const R=Z9(T);console.log("overpass osmtogeojson raw: ",R);for await(const K of R.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const Z=(j=T.elements.filter(ae=>K.id?typeof K.id=="number"?ae.id===K.id:ae.id===parseInt(K.id):!1))==null?void 0:j[0];if(Z&&(K.properties.tags=Z.tags,K.properties.nodes=Z.nodes),K.geometry.type==="Polygon"){const ae=H0(K.geometry.coordinates);var L=e4(ae);K.properties.center=L.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const G=K.properties.uid;if(G){let ae=localStorage.getItem(G+"-icon");if(ae===null){const X=await Da.getUser(G);(se=X.img)!=null&&se.href?(ae=X.img.href,localStorage.setItem(G+"-icon",X.img.href)):localStorage.setItem(G+"-icon","")}K.properties.userIconHref=ae||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[a,l]=vt.useState(!1),f=vt.useCallback(async d=>{console.log("overpass: loading...",d),l(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(w.status!==200){l(!1);return}const E=await w.json();console.log("overpass json parent elements: ",E.elements);const I=250,b=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${I});
      out;
      `;console.log(b);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(T.status!==200){l(!1);return}const R=await T.json();console.log("overpass json child elements: ",R.elements);const L=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${I});
      out;
      `;console.log(L);const j=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(L)}`,{});if(j.status!==200){l(!1);return}const se=await j.json();return console.log("overpass json neighbour elements: ",se.elements),l(!1),[...E.elements,...R.elements,...se.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:a}},q9=()=>yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),yt.jsxs("datalist",{id:"source-list",children:[yt.jsx("option",{value:"survey"}),yt.jsx("option",{value:"local knowledge"}),yt.jsx("option",{value:"extrapolation"}),yt.jsx("option",{value:"estimation from existing data"})]})]}),f1={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},X9=({feature:e,onCancel:t,onSubmit:i})=>{var ve,ye,fe,oe;const{detectCountry:a,loadingCountry:l}=B9(),{fetchOverpassAdmin:f,loadingOverpassAdmin:d}=t4(),u=JSON.parse((ve=e.properties)==null?void 0:ve.center),[w,E]=vt.useState(void 0),[I,b]=vt.useState(),[T,R]=vt.useState(e),[L,j]=vt.useState(!1),[se,K]=vt.useState(!1),[Z,G]=vt.useState(!1),[ae,X]=vt.useState(),[U,P]=vt.useState();vt.useEffect(()=>{j(Da.isLoggedIn())},[]),vt.useEffect(()=>{(async()=>{var J,re;const he=await a(u[0],u[1]);if(E(he),(J=he==null?void 0:he.properties)!=null&&J.ISO_A3&&eA[he.properties.ISO_A3]){const de=eA[he.properties.ISO_A3];b(de);const we=de.defaultComment+" "+((re=e.properties)==null?void 0:re.id);P(we)}})()},[e]),vt.useEffect(()=>{console.log(T.properties)},[T]);const z=vt.useCallback(async()=>{const he=await Pk.openReverseGeocoder([u[0],u[1]]);R(J=>{const re={properties:{"addr:province":he.prefecture,"addr:city":he.city,...J.properties}};return J.properties=re.properties,J})},[]),B=vt.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const he=await f(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",he),X(he)},[T]),Q=vt.useCallback(async he=>{var Ie,Oe,Ze;G(!0),he.preventDefault();const J=new FormData(he.currentTarget),re=JSON.parse((Ie=e.properties)==null?void 0:Ie.tags);J.forEach((He,ot)=>{typeof He=="string"&&He.length>0&&ot!=="comment"&&ot!=="source"&&(re[ot]=He)});const de={type:"way",id:e.id,version:(Oe=e.properties)==null?void 0:Oe.version,tags:re,nodes:JSON.parse((Ze=e.properties)==null?void 0:Ze.nodes)};console.info(JSON.stringify(de,null,2));const we={create:[],modify:[de],delete:[]},Pe=J.get("comment");Pe&&(f1.comment=Pe.toString());const Ne=J.get("source");Ne&&(f1.source=Ne.toString()),await Da.uploadChangeset(f1,we),G(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),q=vt.useCallback(()=>{K(!0)},[]);return T.properties?yt.jsxs("div",{children:[yt.jsxs("div",{children:["OSM:"," ",yt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",yt.jsx(Sk,{feature:T}),I&&yt.jsxs("span",{children:[" | ","Address:"," ",yt.jsx(D9,{feature:T,fields:I})]})]}),l?yt.jsx(yu,{icon:xx,spin:!0}):yt.jsx(yt.Fragment,{children:I?yt.jsxs("form",{onSubmit:Q,children:[yt.jsx("div",{className:"flex flex-wrap",children:yt.jsx(u1,{feature:T,fieldOption:I.postcodeField,onChange:q})}),yt.jsx("div",{className:"flex flex-wrap",children:I.mainFields.map(he=>yt.jsx(u1,{feature:T,fieldOption:he,onChange:q,suggestList:ae},he.key))}),yt.jsx("div",{className:"flex flex-wrap",children:I.detailFields.map(he=>yt.jsx(u1,{feature:T,fieldOption:he,onChange:q},he.key))}),yt.jsxs("div",{className:"flex flex-wrap",children:[yt.jsx(q9,{}),yt.jsx(N9,{defaultValue:U})]}),yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((ye=w==null?void 0:w.properties)==null?void 0:ye.ISO_A3)==="JPN"&&yt.jsx("button",{type:"button",onClick:z,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),yt.jsxs("button",{type:"button",disabled:d,onClick:B,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",d&&yt.jsx(yu,{icon:xx,spin:!0})]}),yt.jsx("button",{disabled:!L||Z||!se,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!L&&yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),yt.jsx(bk,{})]})]})})]}):yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[yt.jsxs("div",{className:"py-2",children:[yt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(fe=w==null?void 0:w.properties)==null?void 0:fe.NAME," (ISO code:",(oe=w==null?void 0:w.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),yt.jsx("p",{children:yt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function K9(e,t){const[i,a]=vt.useState(e);return vt.useEffect(()=>{const l=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(l)}},[e,t]),i}const Y9={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},J9={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function Q9(){const e=vt.useRef(null),[t,i]=vt.useState(),a=K9(t,2500),l=vt.useRef(null),[f,d]=vt.useState({type:"FeatureCollection",features:[]}),[u,w]=vt.useState("auto"),[E,I]=vt.useState(),[b,T]=vt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:L}=t4();vt.useEffect(()=>{setTimeout(()=>{var P;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(P=l.current)==null||P.trigger())},500)},[]);const j=vt.useCallback(P=>{const z=P.target.getCenter(),B=P.target.getZoom();i({zoom:B,latitude:z.lat,longitude:z.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),se=vt.useCallback(P=>{i(P.viewState)},[]),K=vt.useCallback(P=>{i(P.viewState)},[]);vt.useEffect(()=>{(async()=>{if(!a)return;const P=a,z=await R(P.latitude,P.longitude,P.zoom);d(z)})()},[a]);const Z=vt.useCallback(P=>{var ve;w("pointer");const{features:z,point:{x:B,y:Q}}=P,q=z&&z[0];q?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:q.id},{hover:!0}),I({feature:q,x:B,y:Q})):I(void 0)},[]),G=vt.useCallback(P=>{var z;w("auto"),(z=e.current)==null||z.querySourceFeatures("buildings-source").map(B=>{var Q;(Q=e.current)==null||Q.setFeatureState({source:"buildings-source",id:B.id},{hover:!1})}),I(void 0)},[]),ae=vt.useCallback(P=>{var B;X();const z=P.features&&P.features[0];z&&((B=e.current)==null||B.setFeatureState({source:"buildings-source",id:z.id},{select:!0}),T([z]))},[]),X=vt.useCallback(()=>{var P;(P=e.current)==null||P.querySourceFeatures("buildings-source").map(z=>{var B;(B=e.current)==null||B.setFeatureState({source:"buildings-source",id:z.id},{select:!1})}),T([])},[]),U=vt.useMemo(()=>{let P=25;return t&&(P=t.zoom<18?20:t.zoom<19?25:35),f.features.map((z,B)=>!z.properties||!z.properties.center?null:yt.jsx(lL,{style:{cursor:"pointer"},longitude:z.properties.center[0],latitude:z.properties.center[1],anchor:"center",children:yt.jsx(R6,{feature:z,size:P})},`marker-${B}`))},[f,t]);return yt.jsxs("div",{children:[yt.jsx(p6,{}),yt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:yt.jsx(L6,{viewState:t})}),yt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&yt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:yt.jsx("div",{style:{padding:"10px"},children:b.map(P=>yt.jsx(X9,{feature:P,onCancel:X,onSubmit:X},P.id))})}),yt.jsxs(sL,{ref:e,...t,onMove:se,onMoveEnd:K,onLoad:j,interactiveLayerIds:["buildings-layer-fill"],onClick:ae,onMouseEnter:Z,onMouseLeave:G,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:$M,style:{width:"100%",height:"100%"},mapStyle:Y9,children:[yt.jsx(fL,{id:"buildings-source",type:"geojson",data:f,children:yt.jsx(hL,{...J9})}),yt.jsx(uL,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),yt.jsx(cL,{ref:l,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),yt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?yt.jsx(yu,{size:"2x",icon:f6}):L?yt.jsx(yu,{size:"2x",icon:xx,spin:!0}):yt.jsx(yu,{size:"2x",icon:c6})}),U,E&&yt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:E.x+5,top:E.y+5},children:[yt.jsx(Sk,{feature:E.feature}),yt.jsx("br",{}),yt.jsx(j6,{feature:E.feature}),yt.jsx(m6,{feature:E.feature})]})]})]})]})}var r4={},X0={};X0.byteLength=rG;X0.toByteArray=iG;X0.fromByteArray=sG;var Es=[],sa=[],eG=typeof Uint8Array<"u"?Uint8Array:Array,d1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ah=0,tG=d1.length;Ah<tG;++Ah)Es[Ah]=d1[Ah],sa[d1.charCodeAt(Ah)]=Ah;sa[45]=62;sa[95]=63;function n4(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function rG(e){var t=n4(e),i=t[0],a=t[1];return(i+a)*3/4-a}function nG(e,t,i){return(t+i)*3/4-i}function iG(e){var t,i=n4(e),a=i[0],l=i[1],f=new eG(nG(e,a,l)),d=0,u=l>0?a-4:a,w;for(w=0;w<u;w+=4)t=sa[e.charCodeAt(w)]<<18|sa[e.charCodeAt(w+1)]<<12|sa[e.charCodeAt(w+2)]<<6|sa[e.charCodeAt(w+3)],f[d++]=t>>16&255,f[d++]=t>>8&255,f[d++]=t&255;return l===2&&(t=sa[e.charCodeAt(w)]<<2|sa[e.charCodeAt(w+1)]>>4,f[d++]=t&255),l===1&&(t=sa[e.charCodeAt(w)]<<10|sa[e.charCodeAt(w+1)]<<4|sa[e.charCodeAt(w+2)]>>2,f[d++]=t>>8&255,f[d++]=t&255),f}function oG(e){return Es[e>>18&63]+Es[e>>12&63]+Es[e>>6&63]+Es[e&63]}function aG(e,t,i){for(var a,l=[],f=t;f<i;f+=3)a=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),l.push(oG(a));return l.join("")}function sG(e){for(var t,i=e.length,a=i%3,l=[],f=16383,d=0,u=i-a;d<u;d+=f)l.push(aG(e,d,d+f>u?u:d+f));return a===1?(t=e[i-1],l.push(Es[t>>2]+Es[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],l.push(Es[t>>10]+Es[t>>4&63]+Es[t<<2&63]+"=")),l.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=X0,i=D0,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=Z,e.INSPECT_MAX_BYTES=50;const l=2147483647;e.kMaxLength=l,u.TYPED_ARRAY_SUPPORT=f(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const le=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(le,k),le.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function d(le){if(le>l)throw new RangeError('The value "'+le+'" is invalid for option "size"');const k=new Uint8Array(le);return Object.setPrototypeOf(k,u.prototype),k}function u(le,k,$){if(typeof le=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(le)}return w(le,k,$)}u.poolSize=8192;function w(le,k,$){if(typeof le=="string")return T(le,k);if(ArrayBuffer.isView(le))return L(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(D(le,ArrayBuffer)||le&&D(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(le,SharedArrayBuffer)||le&&D(le.buffer,SharedArrayBuffer)))return j(le,k,$);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Te=le.valueOf&&le.valueOf();if(Te!=null&&Te!==le)return u.from(Te,k,$);const We=se(le);if(We)return We;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return u.from(le[Symbol.toPrimitive]("string"),k,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}u.from=function(le,k,$){return w(le,k,$)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function E(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function I(le,k,$){return E(le),le<=0?d(le):k!==void 0?typeof $=="string"?d(le).fill(k,$):d(le).fill(k):d(le)}u.alloc=function(le,k,$){return I(le,k,$)};function b(le){return E(le),d(le<0?0:K(le)|0)}u.allocUnsafe=function(le){return b(le)},u.allocUnsafeSlow=function(le){return b(le)};function T(le,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const $=G(le,k)|0;let Te=d($);const We=Te.write(le,k);return We!==$&&(Te=Te.slice(0,We)),Te}function R(le){const k=le.length<0?0:K(le.length)|0,$=d(k);for(let Te=0;Te<k;Te+=1)$[Te]=le[Te]&255;return $}function L(le){if(D(le,Uint8Array)){const k=new Uint8Array(le);return j(k.buffer,k.byteOffset,k.byteLength)}return R(le)}function j(le,k,$){if(k<0||le.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<k+($||0))throw new RangeError('"length" is outside of buffer bounds');let Te;return k===void 0&&$===void 0?Te=new Uint8Array(le):$===void 0?Te=new Uint8Array(le,k):Te=new Uint8Array(le,k,$),Object.setPrototypeOf(Te,u.prototype),Te}function se(le){if(u.isBuffer(le)){const k=K(le.length)|0,$=d(k);return $.length===0||le.copy($,0,0,k),$}if(le.length!==void 0)return typeof le.length!="number"||xe(le.length)?d(0):R(le);if(le.type==="Buffer"&&Array.isArray(le.data))return R(le.data)}function K(le){if(le>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return le|0}function Z(le){return+le!=le&&(le=0),u.alloc(+le)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,$){if(D(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),D($,Uint8Array)&&($=u.from($,$.offset,$.byteLength)),!u.isBuffer(k)||!u.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===$)return 0;let Te=k.length,We=$.length;for(let nt=0,Ve=Math.min(Te,We);nt<Ve;++nt)if(k[nt]!==$[nt]){Te=k[nt],We=$[nt];break}return Te<We?-1:We<Te?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,$){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let Te;if($===void 0)for($=0,Te=0;Te<k.length;++Te)$+=k[Te].length;const We=u.allocUnsafe($);let nt=0;for(Te=0;Te<k.length;++Te){let Ve=k[Te];if(D(Ve,Uint8Array))nt+Ve.length>We.length?(u.isBuffer(Ve)||(Ve=u.from(Ve)),Ve.copy(We,nt)):Uint8Array.prototype.set.call(We,Ve,nt);else if(u.isBuffer(Ve))Ve.copy(We,nt);else throw new TypeError('"list" argument must be an Array of Buffers');nt+=Ve.length}return We};function G(le,k){if(u.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||D(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const $=le.length,Te=arguments.length>2&&arguments[2]===!0;if(!Te&&$===0)return 0;let We=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return wr(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $*2;case"hex":return $>>>1;case"base64":return Se(le).length;default:if(We)return Te?-1:wr(le).length;k=(""+k).toLowerCase(),We=!0}}u.byteLength=G;function ae(le,k,$){let Te=!1;if((k===void 0||k<0)&&(k=0),k>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0,k>>>=0,$<=k))return"";for(le||(le="utf8");;)switch(le){case"hex":return de(this,k,$);case"utf8":case"utf-8":return fe(this,k,$);case"ascii":return J(this,k,$);case"latin1":case"binary":return re(this,k,$);case"base64":return ye(this,k,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,k,$);default:if(Te)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Te=!0}}u.prototype._isBuffer=!0;function X(le,k,$){const Te=le[k];le[k]=le[$],le[$]=Te}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let $=0;$<k;$+=2)X(this,$,$+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let $=0;$<k;$+=4)X(this,$,$+3),X(this,$+1,$+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let $=0;$<k;$+=8)X(this,$,$+7),X(this,$+1,$+6),X(this,$+2,$+5),X(this,$+3,$+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?fe(this,0,k):ae.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const $=e.INSPECT_MAX_BYTES;return k=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(k+=" ... "),"<Buffer "+k+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(k,$,Te,We,nt){if(D(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if($===void 0&&($=0),Te===void 0&&(Te=k?k.length:0),We===void 0&&(We=0),nt===void 0&&(nt=this.length),$<0||Te>k.length||We<0||nt>this.length)throw new RangeError("out of range index");if(We>=nt&&$>=Te)return 0;if(We>=nt)return-1;if($>=Te)return 1;if($>>>=0,Te>>>=0,We>>>=0,nt>>>=0,this===k)return 0;let Ve=nt-We,Et=Te-$;const Ft=Math.min(Ve,Et),pr=this.slice(We,nt),br=k.slice($,Te);for(let Rt=0;Rt<Ft;++Rt)if(pr[Rt]!==br[Rt]){Ve=pr[Rt],Et=br[Rt];break}return Ve<Et?-1:Et<Ve?1:0};function U(le,k,$,Te,We){if(le.length===0)return-1;if(typeof $=="string"?(Te=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),$=+$,xe($)&&($=We?0:le.length-1),$<0&&($=le.length+$),$>=le.length){if(We)return-1;$=le.length-1}else if($<0)if(We)$=0;else return-1;if(typeof k=="string"&&(k=u.from(k,Te)),u.isBuffer(k))return k.length===0?-1:P(le,k,$,Te,We);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?We?Uint8Array.prototype.indexOf.call(le,k,$):Uint8Array.prototype.lastIndexOf.call(le,k,$):P(le,[k],$,Te,We);throw new TypeError("val must be string, number or Buffer")}function P(le,k,$,Te,We){let nt=1,Ve=le.length,Et=k.length;if(Te!==void 0&&(Te=String(Te).toLowerCase(),Te==="ucs2"||Te==="ucs-2"||Te==="utf16le"||Te==="utf-16le")){if(le.length<2||k.length<2)return-1;nt=2,Ve/=2,Et/=2,$/=2}function Ft(br,Rt){return nt===1?br[Rt]:br.readUInt16BE(Rt*nt)}let pr;if(We){let br=-1;for(pr=$;pr<Ve;pr++)if(Ft(le,pr)===Ft(k,br===-1?0:pr-br)){if(br===-1&&(br=pr),pr-br+1===Et)return br*nt}else br!==-1&&(pr-=pr-br),br=-1}else for($+Et>Ve&&($=Ve-Et),pr=$;pr>=0;pr--){let br=!0;for(let Rt=0;Rt<Et;Rt++)if(Ft(le,pr+Rt)!==Ft(k,Rt)){br=!1;break}if(br)return pr}return-1}u.prototype.includes=function(k,$,Te){return this.indexOf(k,$,Te)!==-1},u.prototype.indexOf=function(k,$,Te){return U(this,k,$,Te,!0)},u.prototype.lastIndexOf=function(k,$,Te){return U(this,k,$,Te,!1)};function z(le,k,$,Te){$=Number($)||0;const We=le.length-$;Te?(Te=Number(Te),Te>We&&(Te=We)):Te=We;const nt=k.length;Te>nt/2&&(Te=nt/2);let Ve;for(Ve=0;Ve<Te;++Ve){const Et=parseInt(k.substr(Ve*2,2),16);if(xe(Et))return Ve;le[$+Ve]=Et}return Ve}function B(le,k,$,Te){return N(wr(k,le.length-$),le,$,Te)}function Q(le,k,$,Te){return N(cr(k),le,$,Te)}function q(le,k,$,Te){return N(Se(k),le,$,Te)}function ve(le,k,$,Te){return N(Ht(k,le.length-$),le,$,Te)}u.prototype.write=function(k,$,Te,We){if($===void 0)We="utf8",Te=this.length,$=0;else if(Te===void 0&&typeof $=="string")We=$,Te=this.length,$=0;else if(isFinite($))$=$>>>0,isFinite(Te)?(Te=Te>>>0,We===void 0&&(We="utf8")):(We=Te,Te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const nt=this.length-$;if((Te===void 0||Te>nt)&&(Te=nt),k.length>0&&(Te<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let Ve=!1;for(;;)switch(We){case"hex":return z(this,k,$,Te);case"utf8":case"utf-8":return B(this,k,$,Te);case"ascii":case"latin1":case"binary":return Q(this,k,$,Te);case"base64":return q(this,k,$,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,k,$,Te);default:if(Ve)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Ve=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ye(le,k,$){return k===0&&$===le.length?t.fromByteArray(le):t.fromByteArray(le.slice(k,$))}function fe(le,k,$){$=Math.min(le.length,$);const Te=[];let We=k;for(;We<$;){const nt=le[We];let Ve=null,Et=nt>239?4:nt>223?3:nt>191?2:1;if(We+Et<=$){let Ft,pr,br,Rt;switch(Et){case 1:nt<128&&(Ve=nt);break;case 2:Ft=le[We+1],(Ft&192)===128&&(Rt=(nt&31)<<6|Ft&63,Rt>127&&(Ve=Rt));break;case 3:Ft=le[We+1],pr=le[We+2],(Ft&192)===128&&(pr&192)===128&&(Rt=(nt&15)<<12|(Ft&63)<<6|pr&63,Rt>2047&&(Rt<55296||Rt>57343)&&(Ve=Rt));break;case 4:Ft=le[We+1],pr=le[We+2],br=le[We+3],(Ft&192)===128&&(pr&192)===128&&(br&192)===128&&(Rt=(nt&15)<<18|(Ft&63)<<12|(pr&63)<<6|br&63,Rt>65535&&Rt<1114112&&(Ve=Rt))}}Ve===null?(Ve=65533,Et=1):Ve>65535&&(Ve-=65536,Te.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),Te.push(Ve),We+=Et}return he(Te)}const oe=4096;function he(le){const k=le.length;if(k<=oe)return String.fromCharCode.apply(String,le);let $="",Te=0;for(;Te<k;)$+=String.fromCharCode.apply(String,le.slice(Te,Te+=oe));return $}function J(le,k,$){let Te="";$=Math.min(le.length,$);for(let We=k;We<$;++We)Te+=String.fromCharCode(le[We]&127);return Te}function re(le,k,$){let Te="";$=Math.min(le.length,$);for(let We=k;We<$;++We)Te+=String.fromCharCode(le[We]);return Te}function de(le,k,$){const Te=le.length;(!k||k<0)&&(k=0),(!$||$<0||$>Te)&&($=Te);let We="";for(let nt=k;nt<$;++nt)We+=Xe[le[nt]];return We}function we(le,k,$){const Te=le.slice(k,$);let We="";for(let nt=0;nt<Te.length-1;nt+=2)We+=String.fromCharCode(Te[nt]+Te[nt+1]*256);return We}u.prototype.slice=function(k,$){const Te=this.length;k=~~k,$=$===void 0?Te:~~$,k<0?(k+=Te,k<0&&(k=0)):k>Te&&(k=Te),$<0?($+=Te,$<0&&($=0)):$>Te&&($=Te),$<k&&($=k);const We=this.subarray(k,$);return Object.setPrototypeOf(We,u.prototype),We};function Pe(le,k,$){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+k>$)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,$,Te){k=k>>>0,$=$>>>0,Te||Pe(k,$,this.length);let We=this[k],nt=1,Ve=0;for(;++Ve<$&&(nt*=256);)We+=this[k+Ve]*nt;return We},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,$,Te){k=k>>>0,$=$>>>0,Te||Pe(k,$,this.length);let We=this[k+--$],nt=1;for(;$>0&&(nt*=256);)We+=this[k+--$]*nt;return We},u.prototype.readUint8=u.prototype.readUInt8=function(k,$){return k=k>>>0,$||Pe(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,$){return k=k>>>0,$||Pe(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,$){return k=k>>>0,$||Pe(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,$){return k=k>>>0,$||Pe(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,$){return k=k>>>0,$||Pe(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=tt(function(k){k=k>>>0,Wt(k,"offset");const $=this[k],Te=this[k+7];($===void 0||Te===void 0)&&Lt(k,this.length-8);const We=$+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,nt=this[++k]+this[++k]*2**8+this[++k]*2**16+Te*2**24;return BigInt(We)+(BigInt(nt)<<BigInt(32))}),u.prototype.readBigUInt64BE=tt(function(k){k=k>>>0,Wt(k,"offset");const $=this[k],Te=this[k+7];($===void 0||Te===void 0)&&Lt(k,this.length-8);const We=$*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],nt=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Te;return(BigInt(We)<<BigInt(32))+BigInt(nt)}),u.prototype.readIntLE=function(k,$,Te){k=k>>>0,$=$>>>0,Te||Pe(k,$,this.length);let We=this[k],nt=1,Ve=0;for(;++Ve<$&&(nt*=256);)We+=this[k+Ve]*nt;return nt*=128,We>=nt&&(We-=Math.pow(2,8*$)),We},u.prototype.readIntBE=function(k,$,Te){k=k>>>0,$=$>>>0,Te||Pe(k,$,this.length);let We=$,nt=1,Ve=this[k+--We];for(;We>0&&(nt*=256);)Ve+=this[k+--We]*nt;return nt*=128,Ve>=nt&&(Ve-=Math.pow(2,8*$)),Ve},u.prototype.readInt8=function(k,$){return k=k>>>0,$||Pe(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,$){k=k>>>0,$||Pe(k,2,this.length);const Te=this[k]|this[k+1]<<8;return Te&32768?Te|4294901760:Te},u.prototype.readInt16BE=function(k,$){k=k>>>0,$||Pe(k,2,this.length);const Te=this[k+1]|this[k]<<8;return Te&32768?Te|4294901760:Te},u.prototype.readInt32LE=function(k,$){return k=k>>>0,$||Pe(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,$){return k=k>>>0,$||Pe(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=tt(function(k){k=k>>>0,Wt(k,"offset");const $=this[k],Te=this[k+7];($===void 0||Te===void 0)&&Lt(k,this.length-8);const We=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(Te<<24);return(BigInt(We)<<BigInt(32))+BigInt($+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=tt(function(k){k=k>>>0,Wt(k,"offset");const $=this[k],Te=this[k+7];($===void 0||Te===void 0)&&Lt(k,this.length-8);const We=($<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(We)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Te)}),u.prototype.readFloatLE=function(k,$){return k=k>>>0,$||Pe(k,4,this.length),i.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,$){return k=k>>>0,$||Pe(k,4,this.length),i.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,$){return k=k>>>0,$||Pe(k,8,this.length),i.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,$){return k=k>>>0,$||Pe(k,8,this.length),i.read(this,k,!1,52,8)};function Ne(le,k,$,Te,We,nt){if(!u.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>We||k<nt)throw new RangeError('"value" argument is out of bounds');if($+Te>le.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,$,Te,We){if(k=+k,$=$>>>0,Te=Te>>>0,!We){const Et=Math.pow(2,8*Te)-1;Ne(this,k,$,Te,Et,0)}let nt=1,Ve=0;for(this[$]=k&255;++Ve<Te&&(nt*=256);)this[$+Ve]=k/nt&255;return $+Te},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,$,Te,We){if(k=+k,$=$>>>0,Te=Te>>>0,!We){const Et=Math.pow(2,8*Te)-1;Ne(this,k,$,Te,Et,0)}let nt=Te-1,Ve=1;for(this[$+nt]=k&255;--nt>=0&&(Ve*=256);)this[$+nt]=k/Ve&255;return $+Te},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,1,255,0),this[$]=k&255,$+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,2,65535,0),this[$]=k&255,this[$+1]=k>>>8,$+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,2,65535,0),this[$]=k>>>8,this[$+1]=k&255,$+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,4,4294967295,0),this[$+3]=k>>>24,this[$+2]=k>>>16,this[$+1]=k>>>8,this[$]=k&255,$+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,4,4294967295,0),this[$]=k>>>24,this[$+1]=k>>>16,this[$+2]=k>>>8,this[$+3]=k&255,$+4};function Ie(le,k,$,Te,We){wt(k,Te,We,le,$,7);let nt=Number(k&BigInt(4294967295));le[$++]=nt,nt=nt>>8,le[$++]=nt,nt=nt>>8,le[$++]=nt,nt=nt>>8,le[$++]=nt;let Ve=Number(k>>BigInt(32)&BigInt(4294967295));return le[$++]=Ve,Ve=Ve>>8,le[$++]=Ve,Ve=Ve>>8,le[$++]=Ve,Ve=Ve>>8,le[$++]=Ve,$}function Oe(le,k,$,Te,We){wt(k,Te,We,le,$,7);let nt=Number(k&BigInt(4294967295));le[$+7]=nt,nt=nt>>8,le[$+6]=nt,nt=nt>>8,le[$+5]=nt,nt=nt>>8,le[$+4]=nt;let Ve=Number(k>>BigInt(32)&BigInt(4294967295));return le[$+3]=Ve,Ve=Ve>>8,le[$+2]=Ve,Ve=Ve>>8,le[$+1]=Ve,Ve=Ve>>8,le[$]=Ve,$+8}u.prototype.writeBigUInt64LE=tt(function(k,$=0){return Ie(this,k,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=tt(function(k,$=0){return Oe(this,k,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,$,Te,We){if(k=+k,$=$>>>0,!We){const Ft=Math.pow(2,8*Te-1);Ne(this,k,$,Te,Ft-1,-Ft)}let nt=0,Ve=1,Et=0;for(this[$]=k&255;++nt<Te&&(Ve*=256);)k<0&&Et===0&&this[$+nt-1]!==0&&(Et=1),this[$+nt]=(k/Ve>>0)-Et&255;return $+Te},u.prototype.writeIntBE=function(k,$,Te,We){if(k=+k,$=$>>>0,!We){const Ft=Math.pow(2,8*Te-1);Ne(this,k,$,Te,Ft-1,-Ft)}let nt=Te-1,Ve=1,Et=0;for(this[$+nt]=k&255;--nt>=0&&(Ve*=256);)k<0&&Et===0&&this[$+nt+1]!==0&&(Et=1),this[$+nt]=(k/Ve>>0)-Et&255;return $+Te},u.prototype.writeInt8=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,1,127,-128),k<0&&(k=255+k+1),this[$]=k&255,$+1},u.prototype.writeInt16LE=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,2,32767,-32768),this[$]=k&255,this[$+1]=k>>>8,$+2},u.prototype.writeInt16BE=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,2,32767,-32768),this[$]=k>>>8,this[$+1]=k&255,$+2},u.prototype.writeInt32LE=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,4,2147483647,-2147483648),this[$]=k&255,this[$+1]=k>>>8,this[$+2]=k>>>16,this[$+3]=k>>>24,$+4},u.prototype.writeInt32BE=function(k,$,Te){return k=+k,$=$>>>0,Te||Ne(this,k,$,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[$]=k>>>24,this[$+1]=k>>>16,this[$+2]=k>>>8,this[$+3]=k&255,$+4},u.prototype.writeBigInt64LE=tt(function(k,$=0){return Ie(this,k,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=tt(function(k,$=0){return Oe(this,k,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ze(le,k,$,Te,We,nt){if($+Te>le.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function He(le,k,$,Te,We){return k=+k,$=$>>>0,We||Ze(le,k,$,4),i.write(le,k,$,Te,23,4),$+4}u.prototype.writeFloatLE=function(k,$,Te){return He(this,k,$,!0,Te)},u.prototype.writeFloatBE=function(k,$,Te){return He(this,k,$,!1,Te)};function ot(le,k,$,Te,We){return k=+k,$=$>>>0,We||Ze(le,k,$,8),i.write(le,k,$,Te,52,8),$+8}u.prototype.writeDoubleLE=function(k,$,Te){return ot(this,k,$,!0,Te)},u.prototype.writeDoubleBE=function(k,$,Te){return ot(this,k,$,!1,Te)},u.prototype.copy=function(k,$,Te,We){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(Te||(Te=0),!We&&We!==0&&(We=this.length),$>=k.length&&($=k.length),$||($=0),We>0&&We<Te&&(We=Te),We===Te||k.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(Te<0||Te>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),k.length-$<We-Te&&(We=k.length-$+Te);const nt=We-Te;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin($,Te,We):Uint8Array.prototype.set.call(k,this.subarray(Te,We),$),nt},u.prototype.fill=function(k,$,Te,We){if(typeof k=="string"){if(typeof $=="string"?(We=$,$=0,Te=this.length):typeof Te=="string"&&(We=Te,Te=this.length),We!==void 0&&typeof We!="string")throw new TypeError("encoding must be a string");if(typeof We=="string"&&!u.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(k.length===1){const Ve=k.charCodeAt(0);(We==="utf8"&&Ve<128||We==="latin1")&&(k=Ve)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if($<0||this.length<$||this.length<Te)throw new RangeError("Out of range index");if(Te<=$)return this;$=$>>>0,Te=Te===void 0?this.length:Te>>>0,k||(k=0);let nt;if(typeof k=="number")for(nt=$;nt<Te;++nt)this[nt]=k;else{const Ve=u.isBuffer(k)?k:u.from(k,We),Et=Ve.length;if(Et===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(nt=0;nt<Te-$;++nt)this[nt+$]=Ve[nt%Et]}return this};const ft={};function _t(le,k,$){ft[le]=class extends ${constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}_t("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_t("ERR_INVALID_ARG_TYPE",function(le,k){return`The "${le}" argument must be of type number. Received type ${typeof k}`},TypeError),_t("ERR_OUT_OF_RANGE",function(le,k,$){let Te=`The value of "${le}" is out of range.`,We=$;return Number.isInteger($)&&Math.abs($)>2**32?We=Mt(String($)):typeof $=="bigint"&&(We=String($),($>BigInt(2)**BigInt(32)||$<-(BigInt(2)**BigInt(32)))&&(We=Mt(We)),We+="n"),Te+=` It must be ${k}. Received ${We}`,Te},RangeError);function Mt(le){let k="",$=le.length;const Te=le[0]==="-"?1:0;for(;$>=Te+4;$-=3)k=`_${le.slice($-3,$)}${k}`;return`${le.slice(0,$)}${k}`}function mt(le,k,$){Wt(k,"offset"),(le[k]===void 0||le[k+$]===void 0)&&Lt(k,le.length-($+1))}function wt(le,k,$,Te,We,nt){if(le>$||le<k){const Ve=typeof k=="bigint"?"n":"";let Et;throw nt>3?k===0||k===BigInt(0)?Et=`>= 0${Ve} and < 2${Ve} ** ${(nt+1)*8}${Ve}`:Et=`>= -(2${Ve} ** ${(nt+1)*8-1}${Ve}) and < 2 ** ${(nt+1)*8-1}${Ve}`:Et=`>= ${k}${Ve} and <= ${$}${Ve}`,new ft.ERR_OUT_OF_RANGE("value",Et,le)}mt(Te,We,nt)}function Wt(le,k){if(typeof le!="number")throw new ft.ERR_INVALID_ARG_TYPE(k,"number",le)}function Lt(le,k,$){throw Math.floor(le)!==le?(Wt(le,$),new ft.ERR_OUT_OF_RANGE($||"offset","an integer",le)):k<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE($||"offset",`>= ${$?1:0} and <= ${k}`,le)}const ur=/[^+/0-9A-Za-z-_]/g;function it(le){if(le=le.split("=")[0],le=le.trim().replace(ur,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function wr(le,k){k=k||1/0;let $;const Te=le.length;let We=null;const nt=[];for(let Ve=0;Ve<Te;++Ve){if($=le.charCodeAt(Ve),$>55295&&$<57344){if(!We){if($>56319){(k-=3)>-1&&nt.push(239,191,189);continue}else if(Ve+1===Te){(k-=3)>-1&&nt.push(239,191,189);continue}We=$;continue}if($<56320){(k-=3)>-1&&nt.push(239,191,189),We=$;continue}$=(We-55296<<10|$-56320)+65536}else We&&(k-=3)>-1&&nt.push(239,191,189);if(We=null,$<128){if((k-=1)<0)break;nt.push($)}else if($<2048){if((k-=2)<0)break;nt.push($>>6|192,$&63|128)}else if($<65536){if((k-=3)<0)break;nt.push($>>12|224,$>>6&63|128,$&63|128)}else if($<1114112){if((k-=4)<0)break;nt.push($>>18|240,$>>12&63|128,$>>6&63|128,$&63|128)}else throw new Error("Invalid code point")}return nt}function cr(le){const k=[];for(let $=0;$<le.length;++$)k.push(le.charCodeAt($)&255);return k}function Ht(le,k){let $,Te,We;const nt=[];for(let Ve=0;Ve<le.length&&!((k-=2)<0);++Ve)$=le.charCodeAt(Ve),Te=$>>8,We=$%256,nt.push(We),nt.push(Te);return nt}function Se(le){return t.toByteArray(it(le))}function N(le,k,$,Te){let We;for(We=0;We<Te&&!(We+$>=k.length||We>=le.length);++We)k[We+$]=le[We];return We}function D(le,k){return le instanceof k||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===k.name}function xe(le){return le!==le}const Xe=function(){const le="0123456789abcdef",k=new Array(256);for(let $=0;$<16;++$){const Te=$*16;for(let We=0;We<16;++We)k[Te+We]=le[$]+le[We]}return k}();function tt(le){return typeof BigInt>"u"?ht:le}function ht(){throw new Error("BigInt not supported")}})(r4);window.Buffer=r4.Buffer;bz.render(yt.jsx(Sw.StrictMode,{children:yt.jsx(Q9,{})}),document.getElementById("root"));

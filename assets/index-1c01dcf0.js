function ik(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function C_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var $S={exports:{}},mg={},VS={exports:{}},Bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ed=Symbol.for("react.element"),ok=Symbol.for("react.portal"),sk=Symbol.for("react.fragment"),ak=Symbol.for("react.strict_mode"),lk=Symbol.for("react.profiler"),uk=Symbol.for("react.provider"),ck=Symbol.for("react.context"),hk=Symbol.for("react.forward_ref"),fk=Symbol.for("react.suspense"),dk=Symbol.for("react.memo"),pk=Symbol.for("react.lazy"),Gw=Symbol.iterator;function mk(e){return e===null||typeof e!="object"?null:(e=Gw&&e[Gw]||e["@@iterator"],typeof e=="function"?e:null)}var GS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZS=Object.assign,HS={};function Sh(e,t,i){this.props=e,this.context=t,this.refs=HS,this.updater=i||GS}Sh.prototype.isReactComponent={};Sh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function WS(){}WS.prototype=Sh.prototype;function I_(e,t,i){this.props=e,this.context=t,this.refs=HS,this.updater=i||GS}var A_=I_.prototype=new WS;A_.constructor=I_;ZS(A_,Sh.prototype);A_.isPureReactComponent=!0;var Zw=Array.isArray,XS=Object.prototype.hasOwnProperty,P_={current:null},qS={key:!0,ref:!0,__self:!0,__source:!0};function KS(e,t,i){var a,c={},d=null,g=null;if(t!=null)for(a in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(d=""+t.key),t)XS.call(t,a)&&!qS.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=i;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:Ed,type:e,key:d,ref:g,props:c,_owner:P_.current}}function gk(e,t){return{$$typeof:Ed,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function k_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ed}function yk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Hw=/\/+/g;function Dy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yk(""+e.key):t.toString(36)}function Gp(e,t,i,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Ed:case ok:g=!0}}if(g)return g=e,c=c(g),e=a===""?"."+Dy(g,0):a,Zw(c)?(i="",e!=null&&(i=e.replace(Hw,"$&/")+"/"),Gp(c,t,i,"",function(w){return w})):c!=null&&(k_(c)&&(c=gk(c,i+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(Hw,"$&/")+"/")+e)),t.push(c)),1;if(g=0,a=a===""?".":a+":",Zw(e))for(var l=0;l<e.length;l++){d=e[l];var b=a+Dy(d,l);g+=Gp(d,t,i,b,c)}else if(b=mk(e),typeof b=="function")for(e=b.call(e),l=0;!(d=e.next()).done;)d=d.value,b=a+Dy(d,l++),g+=Gp(d,t,i,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function mp(e,t,i){if(e==null)return e;var a=[],c=0;return Gp(e,a,"","",function(d){return t.call(i,d,c++)}),a}function vk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fo={current:null},Zp={transition:null},_k={ReactCurrentDispatcher:fo,ReactCurrentBatchConfig:Zp,ReactCurrentOwner:P_};Bn.Children={map:mp,forEach:function(e,t,i){mp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return mp(e,function(){t++}),t},toArray:function(e){return mp(e,function(t){return t})||[]},only:function(e){if(!k_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Bn.Component=Sh;Bn.Fragment=sk;Bn.Profiler=lk;Bn.PureComponent=I_;Bn.StrictMode=ak;Bn.Suspense=fk;Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_k;Bn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=ZS({},e.props),c=e.key,d=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,g=P_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)XS.call(t,b)&&!qS.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];a.children=l}return{$$typeof:Ed,type:e.type,key:c,ref:d,props:a,_owner:g}};Bn.createContext=function(e){return e={$$typeof:ck,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uk,_context:e},e.Consumer=e};Bn.createElement=KS;Bn.createFactory=function(e){var t=KS.bind(null,e);return t.type=e,t};Bn.createRef=function(){return{current:null}};Bn.forwardRef=function(e){return{$$typeof:hk,render:e}};Bn.isValidElement=k_;Bn.lazy=function(e){return{$$typeof:pk,_payload:{_status:-1,_result:e},_init:vk}};Bn.memo=function(e,t){return{$$typeof:dk,type:e,compare:t===void 0?null:t}};Bn.startTransition=function(e){var t=Zp.transition;Zp.transition={};try{e()}finally{Zp.transition=t}};Bn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bn.useCallback=function(e,t){return fo.current.useCallback(e,t)};Bn.useContext=function(e){return fo.current.useContext(e)};Bn.useDebugValue=function(){};Bn.useDeferredValue=function(e){return fo.current.useDeferredValue(e)};Bn.useEffect=function(e,t){return fo.current.useEffect(e,t)};Bn.useId=function(){return fo.current.useId()};Bn.useImperativeHandle=function(e,t,i){return fo.current.useImperativeHandle(e,t,i)};Bn.useInsertionEffect=function(e,t){return fo.current.useInsertionEffect(e,t)};Bn.useLayoutEffect=function(e,t){return fo.current.useLayoutEffect(e,t)};Bn.useMemo=function(e,t){return fo.current.useMemo(e,t)};Bn.useReducer=function(e,t,i){return fo.current.useReducer(e,t,i)};Bn.useRef=function(e){return fo.current.useRef(e)};Bn.useState=function(e){return fo.current.useState(e)};Bn.useSyncExternalStore=function(e,t,i){return fo.current.useSyncExternalStore(e,t,i)};Bn.useTransition=function(){return fo.current.useTransition()};Bn.version="18.2.0";VS.exports=Bn;var yt=VS.exports;const YS=Sd(yt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk=yt,wk=Symbol.for("react.element"),bk=Symbol.for("react.fragment"),Sk=Object.prototype.hasOwnProperty,Ek=xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tk={key:!0,ref:!0,__self:!0,__source:!0};function JS(e,t,i){var a,c={},d=null,g=null;i!==void 0&&(d=""+i),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(g=t.ref);for(a in t)Sk.call(t,a)&&!Tk.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:wk,type:e,key:d,ref:g,props:c,_owner:Ek.current}}mg.Fragment=bk;mg.jsx=JS;mg.jsxs=JS;$S.exports=mg;var pt=$S.exports,QS={exports:{}},No={},eE={exports:{}},tE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ie,ye){var Te=ie.length;ie.push(ye);e:for(;0<Te;){var Se=Te-1>>>1,$e=ie[Se];if(0<c($e,ye))ie[Se]=ye,ie[Te]=$e,Te=Se;else break e}}function i(ie){return ie.length===0?null:ie[0]}function a(ie){if(ie.length===0)return null;var ye=ie[0],Te=ie.pop();if(Te!==ye){ie[0]=Te;e:for(var Se=0,$e=ie.length,Pe=$e>>>1;Se<Pe;){var Le=2*(Se+1)-1,Xe=ie[Le],Ze=Le+1,nt=ie[Ze];if(0>c(Xe,Te))Ze<$e&&0>c(nt,Xe)?(ie[Se]=nt,ie[Ze]=Te,Se=Ze):(ie[Se]=Xe,ie[Le]=Te,Se=Le);else if(Ze<$e&&0>c(nt,Te))ie[Se]=nt,ie[Ze]=Te,Se=Ze;else break e}}return ye}function c(ie,ye){var Te=ie.sortIndex-ye.sortIndex;return Te!==0?Te:ie.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var g=Date,l=g.now();e.unstable_now=function(){return g.now()-l}}var b=[],w=[],A=1,C=null,M=3,R=!1,J=!1,Y=!1,de=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ie){for(var ye=i(w);ye!==null;){if(ye.callback===null)a(w);else if(ye.startTime<=ie)a(w),ye.sortIndex=ye.expirationTime,t(b,ye);else break;ye=i(w)}}function re(ie){if(Y=!1,U(ie),!J)if(i(b)!==null)J=!0,ue(Z);else{var ye=i(w);ye!==null&&ne(re,ye.startTime-ie)}}function Z(ie,ye){J=!1,Y&&(Y=!1,G(k),k=-1),R=!0;var Te=M;try{for(U(ye),C=i(b);C!==null&&(!(C.expirationTime>ye)||ie&&!ee());){var Se=C.callback;if(typeof Se=="function"){C.callback=null,M=C.priorityLevel;var $e=Se(C.expirationTime<=ye);ye=e.unstable_now(),typeof $e=="function"?C.callback=$e:C===i(b)&&a(b),U(ye)}else a(b);C=i(b)}if(C!==null)var Pe=!0;else{var Le=i(w);Le!==null&&ne(re,Le.startTime-ye),Pe=!1}return Pe}finally{C=null,M=Te,R=!1}}var N=!1,E=null,k=-1,H=5,q=-1;function ee(){return!(e.unstable_now()-q<H)}function ve(){if(E!==null){var ie=e.unstable_now();q=ie;var ye=!0;try{ye=E(!0,ie)}finally{ye?xe():(N=!1,E=null)}}else N=!1}var xe;if(typeof $=="function")xe=function(){$(ve)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,te=be.port2;be.port1.onmessage=ve,xe=function(){te.postMessage(null)}}else xe=function(){de(ve,0)};function ue(ie){E=ie,N||(N=!0,xe())}function ne(ie,ye){k=de(function(){ie(e.unstable_now())},ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){J||R||(J=!0,ue(Z))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(ie){switch(M){case 1:case 2:case 3:var ye=3;break;default:ye=M}var Te=M;M=ye;try{return ie()}finally{M=Te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,ye){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Te=M;M=ie;try{return ye()}finally{M=Te}},e.unstable_scheduleCallback=function(ie,ye,Te){var Se=e.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Se+Te:Se):Te=Se,ie){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Te+$e,ie={id:A++,callback:ye,priorityLevel:ie,startTime:Te,expirationTime:$e,sortIndex:-1},Te>Se?(ie.sortIndex=Te,t(w,ie),i(b)===null&&ie===i(w)&&(Y?(G(k),k=-1):Y=!0,ne(re,Te-Se))):(ie.sortIndex=$e,t(b,ie),J||R||(J=!0,ue(Z))),ie},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(ie){var ye=M;return function(){var Te=M;M=ye;try{return ie.apply(this,arguments)}finally{M=Te}}}})(tE);eE.exports=tE;var Ck=eE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE=yt,Bo=Ck;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rE=new Set,td={};function tc(e,t){hh(e,t),hh(e+"Capture",t)}function hh(e,t){for(td[e]=t,e=0;e<t.length;e++)rE.add(t[e])}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V0=Object.prototype.hasOwnProperty,Ik=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ww={},Xw={};function Ak(e){return V0.call(Xw,e)?!0:V0.call(Ww,e)?!1:Ik.test(e)?Xw[e]=!0:(Ww[e]=!0,!1)}function Pk(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kk(e,t,i,a){if(t===null||typeof t>"u"||Pk(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function po(e,t,i,a,c,d,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=g}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mi[e]=new po(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mi[t]=new po(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mi[e]=new po(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mi[e]=new po(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mi[e]=new po(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mi[e]=new po(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mi[e]=new po(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mi[e]=new po(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mi[e]=new po(e,5,!1,e.toLowerCase(),null,!1,!1)});var M_=/[\-:]([a-z])/g;function z_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M_,z_);Mi[t]=new po(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M_,z_);Mi[t]=new po(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M_,z_);Mi[t]=new po(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mi[e]=new po(e,1,!1,e.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new po("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mi[e]=new po(e,1,!1,e.toLowerCase(),null,!0,!0)});function L_(e,t,i,a){var c=Mi.hasOwnProperty(t)?Mi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kk(t,i,c,a)&&(i=null),a||c===null?Ak(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Ja=nE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gp=Symbol.for("react.element"),Bc=Symbol.for("react.portal"),Nc=Symbol.for("react.fragment"),F_=Symbol.for("react.strict_mode"),G0=Symbol.for("react.profiler"),iE=Symbol.for("react.provider"),oE=Symbol.for("react.context"),O_=Symbol.for("react.forward_ref"),Z0=Symbol.for("react.suspense"),H0=Symbol.for("react.suspense_list"),R_=Symbol.for("react.memo"),Fl=Symbol.for("react.lazy"),sE=Symbol.for("react.offscreen"),qw=Symbol.iterator;function vf(e){return e===null||typeof e!="object"?null:(e=qw&&e[qw]||e["@@iterator"],typeof e=="function"?e:null)}var Lr=Object.assign,By;function If(e){if(By===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);By=t&&t[1]||""}return`
`+By+e}var Ny=!1;function Uy(e,t){if(!e||Ny)return"";Ny=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var a=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){a=w}e.call(t.prototype)}else{try{throw Error()}catch(w){a=w}e()}}catch(w){if(w&&a&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=a.stack.split(`
`),g=c.length-1,l=d.length-1;1<=g&&0<=l&&c[g]!==d[l];)l--;for(;1<=g&&0<=l;g--,l--)if(c[g]!==d[l]){if(g!==1||l!==1)do if(g--,l--,0>l||c[g]!==d[l]){var b=`
`+c[g].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=g&&0<=l);break}}}finally{Ny=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?If(e):""}function Mk(e){switch(e.tag){case 5:return If(e.type);case 16:return If("Lazy");case 13:return If("Suspense");case 19:return If("SuspenseList");case 0:case 2:case 15:return e=Uy(e.type,!1),e;case 11:return e=Uy(e.type.render,!1),e;case 1:return e=Uy(e.type,!0),e;default:return""}}function W0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nc:return"Fragment";case Bc:return"Portal";case G0:return"Profiler";case F_:return"StrictMode";case Z0:return"Suspense";case H0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case oE:return(e.displayName||"Context")+".Consumer";case iE:return(e._context.displayName||"Context")+".Provider";case O_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R_:return t=e.displayName||null,t!==null?t:W0(e.type)||"Memo";case Fl:t=e._payload,e=e._init;try{return W0(e(t))}catch{}}return null}function zk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W0(t);case 8:return t===F_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lk(e){var t=aE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yp(e){e._valueTracker||(e._valueTracker=Lk(e))}function lE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=aE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function fm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function X0(e,t){var i=t.checked;return Lr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Kw(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=Jl(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uE(e,t){t=t.checked,t!=null&&L_(e,"checked",t,!1)}function q0(e,t){uE(e,t);var i=Jl(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?K0(e,t.type,i):t.hasOwnProperty("defaultValue")&&K0(e,t.type,Jl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yw(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function K0(e,t,i){(t!=="number"||fm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Af=Array.isArray;function nh(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Jl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Y0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Lr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jw(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(Af(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Jl(i)}}function cE(e,t){var i=Jl(t.value),a=Jl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Qw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vp,fE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vp=vp||document.createElement("div"),vp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function nd(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Bf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fk=["Webkit","ms","Moz","O"];Object.keys(Bf).forEach(function(e){Fk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bf[t]=Bf[e]})});function dE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Bf.hasOwnProperty(e)&&Bf[e]?(""+t).trim():t+"px"}function pE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=dE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var Ok=Lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q0(e,t){if(t){if(Ok[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function ev(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tv=null;function j_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nv=null,rh=null,ih=null;function eb(e){if(e=Id(e)){if(typeof nv!="function")throw Error(At(280));var t=e.stateNode;t&&(t=xg(t),nv(e.stateNode,e.type,t))}}function mE(e){rh?ih?ih.push(e):ih=[e]:rh=e}function gE(){if(rh){var e=rh,t=ih;if(ih=rh=null,eb(e),t)for(e=0;e<t.length;e++)eb(t[e])}}function yE(e,t){return e(t)}function vE(){}var $y=!1;function _E(e,t,i){if($y)return e(t,i);$y=!0;try{return yE(e,t,i)}finally{$y=!1,(rh!==null||ih!==null)&&(vE(),gE())}}function rd(e,t){var i=e.stateNode;if(i===null)return null;var a=xg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var rv=!1;if(Ga)try{var _f={};Object.defineProperty(_f,"passive",{get:function(){rv=!0}}),window.addEventListener("test",_f,_f),window.removeEventListener("test",_f,_f)}catch{rv=!1}function Rk(e,t,i,a,c,d,g,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(A){this.onError(A)}}var Nf=!1,dm=null,pm=!1,iv=null,jk={onError:function(e){Nf=!0,dm=e}};function Dk(e,t,i,a,c,d,g,l,b){Nf=!1,dm=null,Rk.apply(jk,arguments)}function Bk(e,t,i,a,c,d,g,l,b){if(Dk.apply(this,arguments),Nf){if(Nf){var w=dm;Nf=!1,dm=null}else throw Error(At(198));pm||(pm=!0,iv=w)}}function nc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function xE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tb(e){if(nc(e)!==e)throw Error(At(188))}function Nk(e){var t=e.alternate;if(!t){if(t=nc(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return tb(c),e;if(d===a)return tb(c),t;d=d.sibling}throw Error(At(188))}if(i.return!==a.return)i=c,a=d;else{for(var g=!1,l=c.child;l;){if(l===i){g=!0,i=c,a=d;break}if(l===a){g=!0,a=c,i=d;break}l=l.sibling}if(!g){for(l=d.child;l;){if(l===i){g=!0,i=d,a=c;break}if(l===a){g=!0,a=d,i=c;break}l=l.sibling}if(!g)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function wE(e){return e=Nk(e),e!==null?bE(e):null}function bE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bE(e);if(t!==null)return t;e=e.sibling}return null}var SE=Bo.unstable_scheduleCallback,nb=Bo.unstable_cancelCallback,Uk=Bo.unstable_shouldYield,$k=Bo.unstable_requestPaint,Yr=Bo.unstable_now,Vk=Bo.unstable_getCurrentPriorityLevel,D_=Bo.unstable_ImmediatePriority,EE=Bo.unstable_UserBlockingPriority,mm=Bo.unstable_NormalPriority,Gk=Bo.unstable_LowPriority,TE=Bo.unstable_IdlePriority,gg=null,la=null;function Zk(e){if(la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(gg,e,void 0,(e.current.flags&128)===128)}catch{}}var js=Math.clz32?Math.clz32:Xk,Hk=Math.log,Wk=Math.LN2;function Xk(e){return e>>>=0,e===0?32:31-(Hk(e)/Wk|0)|0}var _p=64,xp=4194304;function Pf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gm(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,g=i&268435455;if(g!==0){var l=g&~c;l!==0?a=Pf(l):(d&=g,d!==0&&(a=Pf(d)))}else g=i&~c,g!==0?a=Pf(g):d!==0&&(a=Pf(d));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-js(t),c=1<<i,a|=e[i],t&=~c;return a}function qk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kk(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var g=31-js(d),l=1<<g,b=c[g];b===-1?(!(l&i)||l&a)&&(c[g]=qk(l,t)):b<=t&&(e.expiredLanes|=l),d&=~l}}function ov(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CE(){var e=_p;return _p<<=1,!(_p&4194240)&&(_p=64),e}function Vy(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Td(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-js(t),e[t]=i}function Yk(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-js(i),d=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~d}}function B_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-js(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var rr=0;function IE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var AE,N_,PE,kE,ME,sv=!1,wp=[],Gl=null,Zl=null,Hl=null,id=new Map,od=new Map,Dl=[],Jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rb(e,t){switch(e){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Zl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":id.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":od.delete(t.pointerId)}}function xf(e,t,i,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Id(t),t!==null&&N_(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Qk(e,t,i,a,c){switch(t){case"focusin":return Gl=xf(Gl,e,t,i,a,c),!0;case"dragenter":return Zl=xf(Zl,e,t,i,a,c),!0;case"mouseover":return Hl=xf(Hl,e,t,i,a,c),!0;case"pointerover":var d=c.pointerId;return id.set(d,xf(id.get(d)||null,e,t,i,a,c)),!0;case"gotpointercapture":return d=c.pointerId,od.set(d,xf(od.get(d)||null,e,t,i,a,c)),!0}return!1}function zE(e){var t=Nu(e.target);if(t!==null){var i=nc(t);if(i!==null){if(t=i.tag,t===13){if(t=xE(i),t!==null){e.blockedOn=t,ME(e.priority,function(){PE(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=av(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);tv=a,i.target.dispatchEvent(a),tv=null}else return t=Id(i),t!==null&&N_(t),e.blockedOn=i,!1;t.shift()}return!0}function ib(e,t,i){Hp(e)&&i.delete(t)}function eM(){sv=!1,Gl!==null&&Hp(Gl)&&(Gl=null),Zl!==null&&Hp(Zl)&&(Zl=null),Hl!==null&&Hp(Hl)&&(Hl=null),id.forEach(ib),od.forEach(ib)}function wf(e,t){e.blockedOn===t&&(e.blockedOn=null,sv||(sv=!0,Bo.unstable_scheduleCallback(Bo.unstable_NormalPriority,eM)))}function sd(e){function t(c){return wf(c,e)}if(0<wp.length){wf(wp[0],e);for(var i=1;i<wp.length;i++){var a=wp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Gl!==null&&wf(Gl,e),Zl!==null&&wf(Zl,e),Hl!==null&&wf(Hl,e),id.forEach(t),od.forEach(t),i=0;i<Dl.length;i++)a=Dl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Dl.length&&(i=Dl[0],i.blockedOn===null);)zE(i),i.blockedOn===null&&Dl.shift()}var oh=Ja.ReactCurrentBatchConfig,ym=!0;function tM(e,t,i,a){var c=rr,d=oh.transition;oh.transition=null;try{rr=1,U_(e,t,i,a)}finally{rr=c,oh.transition=d}}function nM(e,t,i,a){var c=rr,d=oh.transition;oh.transition=null;try{rr=4,U_(e,t,i,a)}finally{rr=c,oh.transition=d}}function U_(e,t,i,a){if(ym){var c=av(e,t,i,a);if(c===null)Qy(e,t,a,vm,i),rb(e,a);else if(Qk(c,e,t,i,a))a.stopPropagation();else if(rb(e,a),t&4&&-1<Jk.indexOf(e)){for(;c!==null;){var d=Id(c);if(d!==null&&AE(d),d=av(e,t,i,a),d===null&&Qy(e,t,a,vm,i),d===c)break;c=d}c!==null&&a.stopPropagation()}else Qy(e,t,a,null,i)}}var vm=null;function av(e,t,i,a){if(vm=null,e=j_(a),e=Nu(e),e!==null)if(t=nc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=xE(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vm=e,null}function LE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vk()){case D_:return 1;case EE:return 4;case mm:case Gk:return 16;case TE:return 536870912;default:return 16}default:return 16}}var Ul=null,$_=null,Wp=null;function FE(){if(Wp)return Wp;var e,t=$_,i=t.length,a,c="value"in Ul?Ul.value:Ul.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(a=1;a<=g&&t[i-a]===c[d-a];a++);return Wp=c.slice(e,1<a?1-a:void 0)}function Xp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bp(){return!0}function ob(){return!1}function Uo(e){function t(i,a,c,d,g){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?bp:ob,this.isPropagationStopped=ob,this}return Lr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=bp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=bp)},persist:function(){},isPersistent:bp}),t}var Eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V_=Uo(Eh),Cd=Lr({},Eh,{view:0,detail:0}),rM=Uo(Cd),Gy,Zy,bf,yg=Lr({},Cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:G_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bf&&(bf&&e.type==="mousemove"?(Gy=e.screenX-bf.screenX,Zy=e.screenY-bf.screenY):Zy=Gy=0,bf=e),Gy)},movementY:function(e){return"movementY"in e?e.movementY:Zy}}),sb=Uo(yg),iM=Lr({},yg,{dataTransfer:0}),oM=Uo(iM),sM=Lr({},Cd,{relatedTarget:0}),Hy=Uo(sM),aM=Lr({},Eh,{animationName:0,elapsedTime:0,pseudoElement:0}),lM=Uo(aM),uM=Lr({},Eh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cM=Uo(uM),hM=Lr({},Eh,{data:0}),ab=Uo(hM),fM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pM[e])?!!t[e]:!1}function G_(){return mM}var gM=Lr({},Cd,{key:function(e){if(e.key){var t=fM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:G_,charCode:function(e){return e.type==="keypress"?Xp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yM=Uo(gM),vM=Lr({},yg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lb=Uo(vM),_M=Lr({},Cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:G_}),xM=Uo(_M),wM=Lr({},Eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),bM=Uo(wM),SM=Lr({},yg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EM=Uo(SM),TM=[9,13,27,32],Z_=Ga&&"CompositionEvent"in window,Uf=null;Ga&&"documentMode"in document&&(Uf=document.documentMode);var CM=Ga&&"TextEvent"in window&&!Uf,OE=Ga&&(!Z_||Uf&&8<Uf&&11>=Uf),ub=String.fromCharCode(32),cb=!1;function RE(e,t){switch(e){case"keyup":return TM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Uc=!1;function IM(e,t){switch(e){case"compositionend":return jE(t);case"keypress":return t.which!==32?null:(cb=!0,ub);case"textInput":return e=t.data,e===ub&&cb?null:e;default:return null}}function AM(e,t){if(Uc)return e==="compositionend"||!Z_&&RE(e,t)?(e=FE(),Wp=$_=Ul=null,Uc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return OE&&t.locale!=="ko"?null:t.data;default:return null}}var PM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PM[e.type]:t==="textarea"}function DE(e,t,i,a){mE(a),t=_m(t,"onChange"),0<t.length&&(i=new V_("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var $f=null,ad=null;function kM(e){qE(e,0)}function vg(e){var t=Gc(e);if(lE(t))return e}function MM(e,t){if(e==="change")return t}var BE=!1;if(Ga){var Wy;if(Ga){var Xy="oninput"in document;if(!Xy){var fb=document.createElement("div");fb.setAttribute("oninput","return;"),Xy=typeof fb.oninput=="function"}Wy=Xy}else Wy=!1;BE=Wy&&(!document.documentMode||9<document.documentMode)}function db(){$f&&($f.detachEvent("onpropertychange",NE),ad=$f=null)}function NE(e){if(e.propertyName==="value"&&vg(ad)){var t=[];DE(t,ad,e,j_(e)),_E(kM,t)}}function zM(e,t,i){e==="focusin"?(db(),$f=t,ad=i,$f.attachEvent("onpropertychange",NE)):e==="focusout"&&db()}function LM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vg(ad)}function FM(e,t){if(e==="click")return vg(t)}function OM(e,t){if(e==="input"||e==="change")return vg(t)}function RM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bs=typeof Object.is=="function"?Object.is:RM;function ld(e,t){if(Bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!V0.call(t,c)||!Bs(e[c],t[c]))return!1}return!0}function pb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mb(e,t){var i=pb(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=pb(i)}}function UE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $E(){for(var e=window,t=fm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=fm(e.document)}return t}function H_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jM(e){var t=$E(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&UE(i.ownerDocument.documentElement,i)){if(a!==null&&H_(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=mb(i,d);var g=mb(i,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var DM=Ga&&"documentMode"in document&&11>=document.documentMode,$c=null,lv=null,Vf=null,uv=!1;function gb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;uv||$c==null||$c!==fm(a)||(a=$c,"selectionStart"in a&&H_(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Vf&&ld(Vf,a)||(Vf=a,a=_m(lv,"onSelect"),0<a.length&&(t=new V_("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=$c)))}function Sp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Vc={animationend:Sp("Animation","AnimationEnd"),animationiteration:Sp("Animation","AnimationIteration"),animationstart:Sp("Animation","AnimationStart"),transitionend:Sp("Transition","TransitionEnd")},qy={},VE={};Ga&&(VE=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);function _g(e){if(qy[e])return qy[e];if(!Vc[e])return e;var t=Vc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in VE)return qy[e]=t[i];return e}var GE=_g("animationend"),ZE=_g("animationiteration"),HE=_g("animationstart"),WE=_g("transitionend"),XE=new Map,yb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ru(e,t){XE.set(e,t),tc(t,[e])}for(var Ky=0;Ky<yb.length;Ky++){var Yy=yb[Ky],BM=Yy.toLowerCase(),NM=Yy[0].toUpperCase()+Yy.slice(1);ru(BM,"on"+NM)}ru(GE,"onAnimationEnd");ru(ZE,"onAnimationIteration");ru(HE,"onAnimationStart");ru("dblclick","onDoubleClick");ru("focusin","onFocus");ru("focusout","onBlur");ru(WE,"onTransitionEnd");hh("onMouseEnter",["mouseout","mouseover"]);hh("onMouseLeave",["mouseout","mouseover"]);hh("onPointerEnter",["pointerout","pointerover"]);hh("onPointerLeave",["pointerout","pointerover"]);tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UM=new Set("cancel close invalid load scroll toggle".split(" ").concat(kf));function vb(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,Bk(a,t,void 0,e),e.currentTarget=null}function qE(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var g=a.length-1;0<=g;g--){var l=a[g],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==d&&c.isPropagationStopped())break e;vb(c,l,w),d=b}else for(g=0;g<a.length;g++){if(l=a[g],b=l.instance,w=l.currentTarget,l=l.listener,b!==d&&c.isPropagationStopped())break e;vb(c,l,w),d=b}}}if(pm)throw e=iv,pm=!1,iv=null,e}function yr(e,t){var i=t[pv];i===void 0&&(i=t[pv]=new Set);var a=e+"__bubble";i.has(a)||(KE(t,e,2,!1),i.add(a))}function Jy(e,t,i){var a=0;t&&(a|=4),KE(i,e,a,t)}var Ep="_reactListening"+Math.random().toString(36).slice(2);function ud(e){if(!e[Ep]){e[Ep]=!0,rE.forEach(function(i){i!=="selectionchange"&&(UM.has(i)||Jy(i,!1,e),Jy(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ep]||(t[Ep]=!0,Jy("selectionchange",!1,t))}}function KE(e,t,i,a){switch(LE(t)){case 1:var c=tM;break;case 4:c=nM;break;default:c=U_}i=c.bind(null,t,i,e),c=void 0,!rv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Qy(e,t,i,a,c){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var b=g.tag;if((b===3||b===4)&&(b=g.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;g=g.return}for(;l!==null;){if(g=Nu(l),g===null)return;if(b=g.tag,b===5||b===6){a=d=g;continue e}l=l.parentNode}}a=a.return}_E(function(){var w=d,A=j_(i),C=[];e:{var M=XE.get(e);if(M!==void 0){var R=V_,J=e;switch(e){case"keypress":if(Xp(i)===0)break e;case"keydown":case"keyup":R=yM;break;case"focusin":J="focus",R=Hy;break;case"focusout":J="blur",R=Hy;break;case"beforeblur":case"afterblur":R=Hy;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=sb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=oM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=xM;break;case GE:case ZE:case HE:R=lM;break;case WE:R=bM;break;case"scroll":R=rM;break;case"wheel":R=EM;break;case"copy":case"cut":case"paste":R=cM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=lb}var Y=(t&4)!==0,de=!Y&&e==="scroll",G=Y?M!==null?M+"Capture":null:M;Y=[];for(var $=w,U;$!==null;){U=$;var re=U.stateNode;if(U.tag===5&&re!==null&&(U=re,G!==null&&(re=rd($,G),re!=null&&Y.push(cd($,re,U)))),de)break;$=$.return}0<Y.length&&(M=new R(M,J,null,i,A),C.push({event:M,listeners:Y}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",M&&i!==tv&&(J=i.relatedTarget||i.fromElement)&&(Nu(J)||J[Za]))break e;if((R||M)&&(M=A.window===A?A:(M=A.ownerDocument)?M.defaultView||M.parentWindow:window,R?(J=i.relatedTarget||i.toElement,R=w,J=J?Nu(J):null,J!==null&&(de=nc(J),J!==de||J.tag!==5&&J.tag!==6)&&(J=null)):(R=null,J=w),R!==J)){if(Y=sb,re="onMouseLeave",G="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(Y=lb,re="onPointerLeave",G="onPointerEnter",$="pointer"),de=R==null?M:Gc(R),U=J==null?M:Gc(J),M=new Y(re,$+"leave",R,i,A),M.target=de,M.relatedTarget=U,re=null,Nu(A)===w&&(Y=new Y(G,$+"enter",J,i,A),Y.target=U,Y.relatedTarget=de,re=Y),de=re,R&&J)t:{for(Y=R,G=J,$=0,U=Y;U;U=Mc(U))$++;for(U=0,re=G;re;re=Mc(re))U++;for(;0<$-U;)Y=Mc(Y),$--;for(;0<U-$;)G=Mc(G),U--;for(;$--;){if(Y===G||G!==null&&Y===G.alternate)break t;Y=Mc(Y),G=Mc(G)}Y=null}else Y=null;R!==null&&_b(C,M,R,Y,!1),J!==null&&de!==null&&_b(C,de,J,Y,!0)}}e:{if(M=w?Gc(w):window,R=M.nodeName&&M.nodeName.toLowerCase(),R==="select"||R==="input"&&M.type==="file")var Z=MM;else if(hb(M))if(BE)Z=OM;else{Z=LM;var N=zM}else(R=M.nodeName)&&R.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(Z=FM);if(Z&&(Z=Z(e,w))){DE(C,Z,i,A);break e}N&&N(e,M,w),e==="focusout"&&(N=M._wrapperState)&&N.controlled&&M.type==="number"&&K0(M,"number",M.value)}switch(N=w?Gc(w):window,e){case"focusin":(hb(N)||N.contentEditable==="true")&&($c=N,lv=w,Vf=null);break;case"focusout":Vf=lv=$c=null;break;case"mousedown":uv=!0;break;case"contextmenu":case"mouseup":case"dragend":uv=!1,gb(C,i,A);break;case"selectionchange":if(DM)break;case"keydown":case"keyup":gb(C,i,A)}var E;if(Z_)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Uc?RE(e,i)&&(k="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(k="onCompositionStart");k&&(OE&&i.locale!=="ko"&&(Uc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Uc&&(E=FE()):(Ul=A,$_="value"in Ul?Ul.value:Ul.textContent,Uc=!0)),N=_m(w,k),0<N.length&&(k=new ab(k,e,null,i,A),C.push({event:k,listeners:N}),E?k.data=E:(E=jE(i),E!==null&&(k.data=E)))),(E=CM?IM(e,i):AM(e,i))&&(w=_m(w,"onBeforeInput"),0<w.length&&(A=new ab("onBeforeInput","beforeinput",null,i,A),C.push({event:A,listeners:w}),A.data=E))}qE(C,t)})}function cd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function _m(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=rd(e,i),d!=null&&a.unshift(cd(e,d,c)),d=rd(e,t),d!=null&&a.push(cd(e,d,c))),e=e.return}return a}function Mc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _b(e,t,i,a,c){for(var d=t._reactName,g=[];i!==null&&i!==a;){var l=i,b=l.alternate,w=l.stateNode;if(b!==null&&b===a)break;l.tag===5&&w!==null&&(l=w,c?(b=rd(i,d),b!=null&&g.unshift(cd(i,b,l))):c||(b=rd(i,d),b!=null&&g.push(cd(i,b,l)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var $M=/\r\n?/g,VM=/\u0000|\uFFFD/g;function xb(e){return(typeof e=="string"?e:""+e).replace($M,`
`).replace(VM,"")}function Tp(e,t,i){if(t=xb(t),xb(e)!==t&&i)throw Error(At(425))}function xm(){}var cv=null,hv=null;function fv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dv=typeof setTimeout=="function"?setTimeout:void 0,GM=typeof clearTimeout=="function"?clearTimeout:void 0,wb=typeof Promise=="function"?Promise:void 0,ZM=typeof queueMicrotask=="function"?queueMicrotask:typeof wb<"u"?function(e){return wb.resolve(null).then(e).catch(HM)}:dv;function HM(e){setTimeout(function(){throw e})}function e0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),sd(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);sd(t)}function Wl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Th=Math.random().toString(36).slice(2),ra="__reactFiber$"+Th,hd="__reactProps$"+Th,Za="__reactContainer$"+Th,pv="__reactEvents$"+Th,WM="__reactListeners$"+Th,XM="__reactHandles$"+Th;function Nu(e){var t=e[ra];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Za]||i[ra]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=bb(e);e!==null;){if(i=e[ra])return i;e=bb(e)}return t}e=i,i=e.parentNode}return null}function Id(e){return e=e[ra]||e[Za],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function xg(e){return e[hd]||null}var mv=[],Zc=-1;function iu(e){return{current:e}}function vr(e){0>Zc||(e.current=mv[Zc],mv[Zc]=null,Zc--)}function mr(e,t){Zc++,mv[Zc]=e.current,e.current=t}var Ql={},Xi=iu(Ql),bo=iu(!1),Hu=Ql;function fh(e,t){var i=e.type.contextTypes;if(!i)return Ql;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function So(e){return e=e.childContextTypes,e!=null}function wm(){vr(bo),vr(Xi)}function Sb(e,t,i){if(Xi.current!==Ql)throw Error(At(168));mr(Xi,t),mr(bo,i)}function YE(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(At(108,zk(e)||"Unknown",c));return Lr({},i,a)}function bm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ql,Hu=Xi.current,mr(Xi,e),mr(bo,bo.current),!0}function Eb(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=YE(e,t,Hu),a.__reactInternalMemoizedMergedChildContext=e,vr(bo),vr(Xi),mr(Xi,e)):vr(bo),mr(bo,i)}var Ba=null,wg=!1,t0=!1;function JE(e){Ba===null?Ba=[e]:Ba.push(e)}function qM(e){wg=!0,JE(e)}function ou(){if(!t0&&Ba!==null){t0=!0;var e=0,t=rr;try{var i=Ba;for(rr=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Ba=null,wg=!1}catch(c){throw Ba!==null&&(Ba=Ba.slice(e+1)),SE(D_,ou),c}finally{rr=t,t0=!1}}return null}var Hc=[],Wc=0,Sm=null,Em=0,os=[],ss=0,Wu=null,Ua=1,$a="";function ju(e,t){Hc[Wc++]=Em,Hc[Wc++]=Sm,Sm=e,Em=t}function QE(e,t,i){os[ss++]=Ua,os[ss++]=$a,os[ss++]=Wu,Wu=e;var a=Ua;e=$a;var c=32-js(a)-1;a&=~(1<<c),i+=1;var d=32-js(t)+c;if(30<d){var g=c-c%5;d=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Ua=1<<32-js(t)+c|i<<c|a,$a=d+e}else Ua=1<<d|i<<c|a,$a=e}function W_(e){e.return!==null&&(ju(e,1),QE(e,1,0))}function X_(e){for(;e===Sm;)Sm=Hc[--Wc],Hc[Wc]=null,Em=Hc[--Wc],Hc[Wc]=null;for(;e===Wu;)Wu=os[--ss],os[ss]=null,$a=os[--ss],os[ss]=null,Ua=os[--ss],os[ss]=null}var Do=null,jo=null,Tr=!1,Ms=null;function eT(e,t){var i=as(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Tb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Do=e,jo=Wl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Do=e,jo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Wu!==null?{id:Ua,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=as(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Do=e,jo=null,!0):!1;default:return!1}}function gv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yv(e){if(Tr){var t=jo;if(t){var i=t;if(!Tb(e,t)){if(gv(e))throw Error(At(418));t=Wl(i.nextSibling);var a=Do;t&&Tb(e,t)?eT(a,i):(e.flags=e.flags&-4097|2,Tr=!1,Do=e)}}else{if(gv(e))throw Error(At(418));e.flags=e.flags&-4097|2,Tr=!1,Do=e}}}function Cb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Do=e}function Cp(e){if(e!==Do)return!1;if(!Tr)return Cb(e),Tr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fv(e.type,e.memoizedProps)),t&&(t=jo)){if(gv(e))throw tT(),Error(At(418));for(;t;)eT(e,t),t=Wl(t.nextSibling)}if(Cb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){jo=Wl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}jo=null}}else jo=Do?Wl(e.stateNode.nextSibling):null;return!0}function tT(){for(var e=jo;e;)e=Wl(e.nextSibling)}function dh(){jo=Do=null,Tr=!1}function q_(e){Ms===null?Ms=[e]:Ms.push(e)}var KM=Ja.ReactCurrentBatchConfig;function Ps(e,t){if(e&&e.defaultProps){t=Lr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Tm=iu(null),Cm=null,Xc=null,K_=null;function Y_(){K_=Xc=Cm=null}function J_(e){var t=Tm.current;vr(Tm),e._currentValue=t}function vv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function sh(e,t){Cm=e,K_=Xc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wo=!0),e.firstContext=null)}function cs(e){var t=e._currentValue;if(K_!==e)if(e={context:e,memoizedValue:t,next:null},Xc===null){if(Cm===null)throw Error(At(308));Xc=e,Cm.dependencies={lanes:0,firstContext:e}}else Xc=Xc.next=e;return t}var Uu=null;function Q_(e){Uu===null?Uu=[e]:Uu.push(e)}function nT(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,Q_(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ha(e,a)}function Ha(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Ol=!1;function e1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Va(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Zn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Ha(e,i)}return c=a.interleaved,c===null?(t.next=t,Q_(a)):(t.next=c.next,c.next=t),a.interleaved=t,Ha(e,i)}function qp(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,B_(e,i)}}function Ib(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=g:d=d.next=g,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Im(e,t,i,a){var c=e.updateQueue;Ol=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,g===null?d=w:g.next=w,g=b;var A=e.alternate;A!==null&&(A=A.updateQueue,l=A.lastBaseUpdate,l!==g&&(l===null?A.firstBaseUpdate=w:l.next=w,A.lastBaseUpdate=b))}if(d!==null){var C=c.baseState;g=0,A=w=b=null,l=d;do{var M=l.lane,R=l.eventTime;if((a&M)===M){A!==null&&(A=A.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var J=e,Y=l;switch(M=t,R=i,Y.tag){case 1:if(J=Y.payload,typeof J=="function"){C=J.call(R,C,M);break e}C=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=Y.payload,M=typeof J=="function"?J.call(R,C,M):J,M==null)break e;C=Lr({},C,M);break e;case 2:Ol=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[l]:M.push(l))}else R={eventTime:R,lane:M,tag:l.tag,payload:l.payload,callback:l.callback,next:null},A===null?(w=A=R,b=C):A=A.next=R,g|=M;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;M=l,l=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(1);if(A===null&&(b=C),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);qu|=g,e.lanes=g,e.memoizedState=C}}function Ab(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(At(191,c));c.call(a)}}}var iT=new nE.Component().refs;function _v(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Lr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var bg={isMounted:function(e){return(e=e._reactInternals)?nc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=lo(),c=Kl(e),d=Va(a,c);d.payload=t,i!=null&&(d.callback=i),t=Xl(e,d,c),t!==null&&(Ds(t,e,c,a),qp(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=lo(),c=Kl(e),d=Va(a,c);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=Xl(e,d,c),t!==null&&(Ds(t,e,c,a),qp(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=lo(),a=Kl(e),c=Va(i,a);c.tag=2,t!=null&&(c.callback=t),t=Xl(e,c,a),t!==null&&(Ds(t,e,a,i),qp(t,e,a))}};function Pb(e,t,i,a,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,g):t.prototype&&t.prototype.isPureReactComponent?!ld(i,a)||!ld(c,d):!0}function oT(e,t,i){var a=!1,c=Ql,d=t.contextType;return typeof d=="object"&&d!==null?d=cs(d):(c=So(t)?Hu:Xi.current,a=t.contextTypes,d=(a=a!=null)?fh(e,c):Ql),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function kb(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&bg.enqueueReplaceState(t,t.state,null)}function xv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=iT,e1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=cs(d):(d=So(t)?Hu:Xi.current,c.context=fh(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(_v(e,t,d,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&bg.enqueueReplaceState(c,c.state,null),Im(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Sf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var c=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(g){var l=c.refs;l===iT&&(l=c.refs={}),g===null?delete l[d]:l[d]=g},t._stringRef=d,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function Ip(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Mb(e){var t=e._init;return t(e._payload)}function sT(e){function t(G,$){if(e){var U=G.deletions;U===null?(G.deletions=[$],G.flags|=16):U.push($)}}function i(G,$){if(!e)return null;for(;$!==null;)t(G,$),$=$.sibling;return null}function a(G,$){for(G=new Map;$!==null;)$.key!==null?G.set($.key,$):G.set($.index,$),$=$.sibling;return G}function c(G,$){return G=Yl(G,$),G.index=0,G.sibling=null,G}function d(G,$,U){return G.index=U,e?(U=G.alternate,U!==null?(U=U.index,U<$?(G.flags|=2,$):U):(G.flags|=2,$)):(G.flags|=1048576,$)}function g(G){return e&&G.alternate===null&&(G.flags|=2),G}function l(G,$,U,re){return $===null||$.tag!==6?($=l0(U,G.mode,re),$.return=G,$):($=c($,U),$.return=G,$)}function b(G,$,U,re){var Z=U.type;return Z===Nc?A(G,$,U.props.children,re,U.key):$!==null&&($.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Fl&&Mb(Z)===$.type)?(re=c($,U.props),re.ref=Sf(G,$,U),re.return=G,re):(re=tm(U.type,U.key,U.props,null,G.mode,re),re.ref=Sf(G,$,U),re.return=G,re)}function w(G,$,U,re){return $===null||$.tag!==4||$.stateNode.containerInfo!==U.containerInfo||$.stateNode.implementation!==U.implementation?($=u0(U,G.mode,re),$.return=G,$):($=c($,U.children||[]),$.return=G,$)}function A(G,$,U,re,Z){return $===null||$.tag!==7?($=Zu(U,G.mode,re,Z),$.return=G,$):($=c($,U),$.return=G,$)}function C(G,$,U){if(typeof $=="string"&&$!==""||typeof $=="number")return $=l0(""+$,G.mode,U),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case gp:return U=tm($.type,$.key,$.props,null,G.mode,U),U.ref=Sf(G,null,$),U.return=G,U;case Bc:return $=u0($,G.mode,U),$.return=G,$;case Fl:var re=$._init;return C(G,re($._payload),U)}if(Af($)||vf($))return $=Zu($,G.mode,U,null),$.return=G,$;Ip(G,$)}return null}function M(G,$,U,re){var Z=$!==null?$.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return Z!==null?null:l(G,$,""+U,re);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case gp:return U.key===Z?b(G,$,U,re):null;case Bc:return U.key===Z?w(G,$,U,re):null;case Fl:return Z=U._init,M(G,$,Z(U._payload),re)}if(Af(U)||vf(U))return Z!==null?null:A(G,$,U,re,null);Ip(G,U)}return null}function R(G,$,U,re,Z){if(typeof re=="string"&&re!==""||typeof re=="number")return G=G.get(U)||null,l($,G,""+re,Z);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case gp:return G=G.get(re.key===null?U:re.key)||null,b($,G,re,Z);case Bc:return G=G.get(re.key===null?U:re.key)||null,w($,G,re,Z);case Fl:var N=re._init;return R(G,$,U,N(re._payload),Z)}if(Af(re)||vf(re))return G=G.get(U)||null,A($,G,re,Z,null);Ip($,re)}return null}function J(G,$,U,re){for(var Z=null,N=null,E=$,k=$=0,H=null;E!==null&&k<U.length;k++){E.index>k?(H=E,E=null):H=E.sibling;var q=M(G,E,U[k],re);if(q===null){E===null&&(E=H);break}e&&E&&q.alternate===null&&t(G,E),$=d(q,$,k),N===null?Z=q:N.sibling=q,N=q,E=H}if(k===U.length)return i(G,E),Tr&&ju(G,k),Z;if(E===null){for(;k<U.length;k++)E=C(G,U[k],re),E!==null&&($=d(E,$,k),N===null?Z=E:N.sibling=E,N=E);return Tr&&ju(G,k),Z}for(E=a(G,E);k<U.length;k++)H=R(E,G,k,U[k],re),H!==null&&(e&&H.alternate!==null&&E.delete(H.key===null?k:H.key),$=d(H,$,k),N===null?Z=H:N.sibling=H,N=H);return e&&E.forEach(function(ee){return t(G,ee)}),Tr&&ju(G,k),Z}function Y(G,$,U,re){var Z=vf(U);if(typeof Z!="function")throw Error(At(150));if(U=Z.call(U),U==null)throw Error(At(151));for(var N=Z=null,E=$,k=$=0,H=null,q=U.next();E!==null&&!q.done;k++,q=U.next()){E.index>k?(H=E,E=null):H=E.sibling;var ee=M(G,E,q.value,re);if(ee===null){E===null&&(E=H);break}e&&E&&ee.alternate===null&&t(G,E),$=d(ee,$,k),N===null?Z=ee:N.sibling=ee,N=ee,E=H}if(q.done)return i(G,E),Tr&&ju(G,k),Z;if(E===null){for(;!q.done;k++,q=U.next())q=C(G,q.value,re),q!==null&&($=d(q,$,k),N===null?Z=q:N.sibling=q,N=q);return Tr&&ju(G,k),Z}for(E=a(G,E);!q.done;k++,q=U.next())q=R(E,G,k,q.value,re),q!==null&&(e&&q.alternate!==null&&E.delete(q.key===null?k:q.key),$=d(q,$,k),N===null?Z=q:N.sibling=q,N=q);return e&&E.forEach(function(ve){return t(G,ve)}),Tr&&ju(G,k),Z}function de(G,$,U,re){if(typeof U=="object"&&U!==null&&U.type===Nc&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case gp:e:{for(var Z=U.key,N=$;N!==null;){if(N.key===Z){if(Z=U.type,Z===Nc){if(N.tag===7){i(G,N.sibling),$=c(N,U.props.children),$.return=G,G=$;break e}}else if(N.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Fl&&Mb(Z)===N.type){i(G,N.sibling),$=c(N,U.props),$.ref=Sf(G,N,U),$.return=G,G=$;break e}i(G,N);break}else t(G,N);N=N.sibling}U.type===Nc?($=Zu(U.props.children,G.mode,re,U.key),$.return=G,G=$):(re=tm(U.type,U.key,U.props,null,G.mode,re),re.ref=Sf(G,$,U),re.return=G,G=re)}return g(G);case Bc:e:{for(N=U.key;$!==null;){if($.key===N)if($.tag===4&&$.stateNode.containerInfo===U.containerInfo&&$.stateNode.implementation===U.implementation){i(G,$.sibling),$=c($,U.children||[]),$.return=G,G=$;break e}else{i(G,$);break}else t(G,$);$=$.sibling}$=u0(U,G.mode,re),$.return=G,G=$}return g(G);case Fl:return N=U._init,de(G,$,N(U._payload),re)}if(Af(U))return J(G,$,U,re);if(vf(U))return Y(G,$,U,re);Ip(G,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,$!==null&&$.tag===6?(i(G,$.sibling),$=c($,U),$.return=G,G=$):(i(G,$),$=l0(U,G.mode,re),$.return=G,G=$),g(G)):i(G,$)}return de}var ph=sT(!0),aT=sT(!1),Ad={},ua=iu(Ad),fd=iu(Ad),dd=iu(Ad);function $u(e){if(e===Ad)throw Error(At(174));return e}function t1(e,t){switch(mr(dd,t),mr(fd,e),mr(ua,Ad),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:J0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=J0(t,e)}vr(ua),mr(ua,t)}function mh(){vr(ua),vr(fd),vr(dd)}function lT(e){$u(dd.current);var t=$u(ua.current),i=J0(t,e.type);t!==i&&(mr(fd,e),mr(ua,i))}function n1(e){fd.current===e&&(vr(ua),vr(fd))}var kr=iu(0);function Am(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var n0=[];function r1(){for(var e=0;e<n0.length;e++)n0[e]._workInProgressVersionPrimary=null;n0.length=0}var Kp=Ja.ReactCurrentDispatcher,r0=Ja.ReactCurrentBatchConfig,Xu=0,zr=null,ai=null,yi=null,Pm=!1,Gf=!1,pd=0,YM=0;function Vi(){throw Error(At(321))}function i1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Bs(e[i],t[i]))return!1;return!0}function o1(e,t,i,a,c,d){if(Xu=d,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kp.current=e===null||e.memoizedState===null?t3:n3,e=i(a,c),Gf){d=0;do{if(Gf=!1,pd=0,25<=d)throw Error(At(301));d+=1,yi=ai=null,t.updateQueue=null,Kp.current=r3,e=i(a,c)}while(Gf)}if(Kp.current=km,t=ai!==null&&ai.next!==null,Xu=0,yi=ai=zr=null,Pm=!1,t)throw Error(At(300));return e}function s1(){var e=pd!==0;return pd=0,e}function na(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?zr.memoizedState=yi=e:yi=yi.next=e,yi}function hs(){if(ai===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=ai.next;var t=yi===null?zr.memoizedState:yi.next;if(t!==null)yi=t,ai=e;else{if(e===null)throw Error(At(310));ai=e,e={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},yi===null?zr.memoizedState=yi=e:yi=yi.next=e}return yi}function md(e,t){return typeof t=="function"?t(e):t}function i0(e){var t=hs(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ai,c=a.baseQueue,d=i.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}a.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,a=a.baseState;var l=g=null,b=null,w=d;do{var A=w.lane;if((Xu&A)===A)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),a=w.hasEagerState?w.eagerState:e(a,w.action);else{var C={lane:A,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=C,g=a):b=b.next=C,zr.lanes|=A,qu|=A}w=w.next}while(w!==null&&w!==d);b===null?g=a:b.next=l,Bs(a,t.memoizedState)||(wo=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do d=c.lane,zr.lanes|=d,qu|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function o0(e){var t=hs(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);Bs(d,t.memoizedState)||(wo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,a]}function uT(){}function cT(e,t){var i=zr,a=hs(),c=t(),d=!Bs(a.memoizedState,c);if(d&&(a.memoizedState=c,wo=!0),a=a.queue,a1(dT.bind(null,i,a,e),[e]),a.getSnapshot!==t||d||yi!==null&&yi.memoizedState.tag&1){if(i.flags|=2048,gd(9,fT.bind(null,i,a,c,t),void 0,null),vi===null)throw Error(At(349));Xu&30||hT(i,t,c)}return c}function hT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function fT(e,t,i,a){t.value=i,t.getSnapshot=a,pT(t)&&mT(e)}function dT(e,t,i){return i(function(){pT(t)&&mT(e)})}function pT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Bs(e,i)}catch{return!0}}function mT(e){var t=Ha(e,1);t!==null&&Ds(t,e,1,-1)}function zb(e){var t=na();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:md,lastRenderedState:e},t.queue=e,e=e.dispatch=e3.bind(null,zr,e),[t.memoizedState,e]}function gd(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function gT(){return hs().memoizedState}function Yp(e,t,i,a){var c=na();zr.flags|=e,c.memoizedState=gd(1|t,i,void 0,a===void 0?null:a)}function Sg(e,t,i,a){var c=hs();a=a===void 0?null:a;var d=void 0;if(ai!==null){var g=ai.memoizedState;if(d=g.destroy,a!==null&&i1(a,g.deps)){c.memoizedState=gd(t,i,d,a);return}}zr.flags|=e,c.memoizedState=gd(1|t,i,d,a)}function Lb(e,t){return Yp(8390656,8,e,t)}function a1(e,t){return Sg(2048,8,e,t)}function yT(e,t){return Sg(4,2,e,t)}function vT(e,t){return Sg(4,4,e,t)}function _T(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xT(e,t,i){return i=i!=null?i.concat([e]):null,Sg(4,4,_T.bind(null,t,e),i)}function l1(){}function wT(e,t){var i=hs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&i1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function bT(e,t){var i=hs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&i1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function ST(e,t,i){return Xu&21?(Bs(i,t)||(i=CE(),zr.lanes|=i,qu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=i)}function JM(e,t){var i=rr;rr=i!==0&&4>i?i:4,e(!0);var a=r0.transition;r0.transition={};try{e(!1),t()}finally{rr=i,r0.transition=a}}function ET(){return hs().memoizedState}function QM(e,t,i){var a=Kl(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},TT(e))CT(t,i);else if(i=nT(e,t,i,a),i!==null){var c=lo();Ds(i,e,a,c),IT(i,t,a)}}function e3(e,t,i){var a=Kl(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(TT(e))CT(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,l=d(g,i);if(c.hasEagerState=!0,c.eagerState=l,Bs(l,g)){var b=t.interleaved;b===null?(c.next=c,Q_(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=nT(e,t,c,a),i!==null&&(c=lo(),Ds(i,e,a,c),IT(i,t,a))}}function TT(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function CT(e,t){Gf=Pm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function IT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,B_(e,i)}}var km={readContext:cs,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},t3={readContext:cs,useCallback:function(e,t){return na().memoizedState=[e,t===void 0?null:t],e},useContext:cs,useEffect:Lb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Yp(4194308,4,_T.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Yp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yp(4,2,e,t)},useMemo:function(e,t){var i=na();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=na();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=QM.bind(null,zr,e),[a.memoizedState,e]},useRef:function(e){var t=na();return e={current:e},t.memoizedState=e},useState:zb,useDebugValue:l1,useDeferredValue:function(e){return na().memoizedState=e},useTransition:function(){var e=zb(!1),t=e[0];return e=JM.bind(null,e[1]),na().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=zr,c=na();if(Tr){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),vi===null)throw Error(At(349));Xu&30||hT(a,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,Lb(dT.bind(null,a,d,e),[e]),a.flags|=2048,gd(9,fT.bind(null,a,d,i,t),void 0,null),i},useId:function(){var e=na(),t=vi.identifierPrefix;if(Tr){var i=$a,a=Ua;i=(a&~(1<<32-js(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=pd++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=YM++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},n3={readContext:cs,useCallback:wT,useContext:cs,useEffect:a1,useImperativeHandle:xT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:bT,useReducer:i0,useRef:gT,useState:function(){return i0(md)},useDebugValue:l1,useDeferredValue:function(e){var t=hs();return ST(t,ai.memoizedState,e)},useTransition:function(){var e=i0(md)[0],t=hs().memoizedState;return[e,t]},useMutableSource:uT,useSyncExternalStore:cT,useId:ET,unstable_isNewReconciler:!1},r3={readContext:cs,useCallback:wT,useContext:cs,useEffect:a1,useImperativeHandle:xT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:bT,useReducer:o0,useRef:gT,useState:function(){return o0(md)},useDebugValue:l1,useDeferredValue:function(e){var t=hs();return ai===null?t.memoizedState=e:ST(t,ai.memoizedState,e)},useTransition:function(){var e=o0(md)[0],t=hs().memoizedState;return[e,t]},useMutableSource:uT,useSyncExternalStore:cT,useId:ET,unstable_isNewReconciler:!1};function gh(e,t){try{var i="",a=t;do i+=Mk(a),a=a.return;while(a);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function s0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function wv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var i3=typeof WeakMap=="function"?WeakMap:Map;function AT(e,t,i){i=Va(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){zm||(zm=!0,Mv=a),wv(e,t)},i}function PT(e,t,i){i=Va(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){wv(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){wv(e,t),typeof a!="function"&&(ql===null?ql=new Set([this]):ql.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function Fb(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new i3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=v3.bind(null,e,t,i),t.then(e,e))}function Ob(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rb(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Va(-1,1),t.tag=2,Xl(i,t,1))),i.lanes|=1),e)}var o3=Ja.ReactCurrentOwner,wo=!1;function io(e,t,i,a){t.child=e===null?aT(t,null,i,a):ph(t,e.child,i,a)}function jb(e,t,i,a,c){i=i.render;var d=t.ref;return sh(t,c),a=o1(e,t,i,a,d,c),i=s1(),e!==null&&!wo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Wa(e,t,c)):(Tr&&i&&W_(t),t.flags|=1,io(e,t,a,c),t.child)}function Db(e,t,i,a,c){if(e===null){var d=i.type;return typeof d=="function"&&!g1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,kT(e,t,d,a,c)):(e=tm(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var g=d.memoizedProps;if(i=i.compare,i=i!==null?i:ld,i(g,a)&&e.ref===t.ref)return Wa(e,t,c)}return t.flags|=1,e=Yl(d,a),e.ref=t.ref,e.return=t,t.child=e}function kT(e,t,i,a,c){if(e!==null){var d=e.memoizedProps;if(ld(d,a)&&e.ref===t.ref)if(wo=!1,t.pendingProps=a=d,(e.lanes&c)!==0)e.flags&131072&&(wo=!0);else return t.lanes=e.lanes,Wa(e,t,c)}return bv(e,t,i,a,c)}function MT(e,t,i){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mr(Kc,Lo),Lo|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mr(Kc,Lo),Lo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:i,mr(Kc,Lo),Lo|=a}else d!==null?(a=d.baseLanes|i,t.memoizedState=null):a=i,mr(Kc,Lo),Lo|=a;return io(e,t,c,i),t.child}function zT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function bv(e,t,i,a,c){var d=So(i)?Hu:Xi.current;return d=fh(t,d),sh(t,c),i=o1(e,t,i,a,d,c),a=s1(),e!==null&&!wo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Wa(e,t,c)):(Tr&&a&&W_(t),t.flags|=1,io(e,t,i,c),t.child)}function Bb(e,t,i,a,c){if(So(i)){var d=!0;bm(t)}else d=!1;if(sh(t,c),t.stateNode===null)Jp(e,t),oT(t,i,a),xv(t,i,a,c),a=!0;else if(e===null){var g=t.stateNode,l=t.memoizedProps;g.props=l;var b=g.context,w=i.contextType;typeof w=="object"&&w!==null?w=cs(w):(w=So(i)?Hu:Xi.current,w=fh(t,w));var A=i.getDerivedStateFromProps,C=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function";C||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==a||b!==w)&&kb(t,g,a,w),Ol=!1;var M=t.memoizedState;g.state=M,Im(t,a,g,c),b=t.memoizedState,l!==a||M!==b||bo.current||Ol?(typeof A=="function"&&(_v(t,i,A,a),b=t.memoizedState),(l=Ol||Pb(t,i,l,a,M,b,w))?(C||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),g.props=a,g.state=b,g.context=w,a=l):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,rT(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:Ps(t.type,l),g.props=w,C=t.pendingProps,M=g.context,b=i.contextType,typeof b=="object"&&b!==null?b=cs(b):(b=So(i)?Hu:Xi.current,b=fh(t,b));var R=i.getDerivedStateFromProps;(A=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==C||M!==b)&&kb(t,g,a,b),Ol=!1,M=t.memoizedState,g.state=M,Im(t,a,g,c);var J=t.memoizedState;l!==C||M!==J||bo.current||Ol?(typeof R=="function"&&(_v(t,i,R,a),J=t.memoizedState),(w=Ol||Pb(t,i,w,a,M,J,b)||!1)?(A||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,J,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,J,b)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=J),g.props=a,g.state=J,g.context=b,a=w):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),a=!1)}return Sv(e,t,i,a,d,c)}function Sv(e,t,i,a,c,d){zT(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&Eb(t,i,!1),Wa(e,t,d);a=t.stateNode,o3.current=t;var l=g&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=ph(t,e.child,null,d),t.child=ph(t,null,l,d)):io(e,t,l,d),t.memoizedState=a.state,c&&Eb(t,i,!0),t.child}function LT(e){var t=e.stateNode;t.pendingContext?Sb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sb(e,t.context,!1),t1(e,t.containerInfo)}function Nb(e,t,i,a,c){return dh(),q_(c),t.flags|=256,io(e,t,i,a),t.child}var Ev={dehydrated:null,treeContext:null,retryLane:0};function Tv(e){return{baseLanes:e,cachePool:null,transitions:null}}function FT(e,t,i){var a=t.pendingProps,c=kr.current,d=!1,g=(t.flags&128)!==0,l;if((l=g)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),mr(kr,c&1),e===null)return yv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=a.children,e=a.fallback,d?(a=t.mode,d=t.child,g={mode:"hidden",children:g},!(a&1)&&d!==null?(d.childLanes=0,d.pendingProps=g):d=Cg(g,a,0,null),e=Zu(e,a,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Tv(i),t.memoizedState=Ev,e):u1(t,g));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return s3(e,t,g,a,l,c,i);if(d){d=a.fallback,g=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:a.children};return!(g&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=Yl(c,b),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=Yl(l,d):(d=Zu(d,g,i,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,g=e.child.memoizedState,g=g===null?Tv(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},d.memoizedState=g,d.childLanes=e.childLanes&~i,t.memoizedState=Ev,a}return d=e.child,e=d.sibling,a=Yl(d,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function u1(e,t){return t=Cg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ap(e,t,i,a){return a!==null&&q_(a),ph(t,e.child,null,i),e=u1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function s3(e,t,i,a,c,d,g){if(i)return t.flags&256?(t.flags&=-257,a=s0(Error(At(422))),Ap(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,c=t.mode,a=Cg({mode:"visible",children:a.children},c,0,null),d=Zu(d,c,g,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,t.mode&1&&ph(t,e.child,null,g),t.child.memoizedState=Tv(g),t.memoizedState=Ev,d);if(!(t.mode&1))return Ap(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,d=Error(At(419)),a=s0(d,a,void 0),Ap(e,t,g,a)}if(l=(g&e.childLanes)!==0,wo||l){if(a=vi,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|g)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Ha(e,c),Ds(a,e,c,-1))}return m1(),a=s0(Error(At(421))),Ap(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=_3.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,jo=Wl(c.nextSibling),Do=t,Tr=!0,Ms=null,e!==null&&(os[ss++]=Ua,os[ss++]=$a,os[ss++]=Wu,Ua=e.id,$a=e.overflow,Wu=t),t=u1(t,a.children),t.flags|=4096,t)}function Ub(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),vv(e.return,t,i)}function a0(e,t,i,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=c)}function OT(e,t,i){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(io(e,t,a.children,i),a=kr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ub(e,i,t);else if(e.tag===19)Ub(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(mr(kr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Am(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),a0(t,!1,c,i,d);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Am(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}a0(t,!0,i,null,d);break;case"together":a0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),qu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=Yl(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Yl(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function a3(e,t,i){switch(t.tag){case 3:LT(t),dh();break;case 5:lT(t);break;case 1:So(t.type)&&bm(t);break;case 4:t1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;mr(Tm,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(mr(kr,kr.current&1),t.flags|=128,null):i&t.child.childLanes?FT(e,t,i):(mr(kr,kr.current&1),e=Wa(e,t,i),e!==null?e.sibling:null);mr(kr,kr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return OT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),mr(kr,kr.current),a)break;return null;case 22:case 23:return t.lanes=0,MT(e,t,i)}return Wa(e,t,i)}var RT,Cv,jT,DT;RT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Cv=function(){};jT=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,$u(ua.current);var d=null;switch(i){case"input":c=X0(e,c),a=X0(e,a),d=[];break;case"select":c=Lr({},c,{value:void 0}),a=Lr({},a,{value:void 0}),d=[];break;case"textarea":c=Y0(e,c),a=Y0(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=xm)}Q0(i,a);var g;i=null;for(w in c)if(!a.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(g in l)l.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(td.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in a){var b=a[w];if(l=c!=null?c[w]:void 0,a.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(g in l)!l.hasOwnProperty(g)||b&&b.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in b)b.hasOwnProperty(g)&&l[g]!==b[g]&&(i||(i={}),i[g]=b[g])}else i||(d||(d=[]),d.push(w,i)),i=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(td.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&yr("scroll",e),d||l===b||(d=[])):(d=d||[]).push(w,b))}i&&(d=d||[]).push("style",i);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};DT=function(e,t,i,a){i!==a&&(t.flags|=4)};function Ef(e,t){if(!Tr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Gi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function l3(e,t,i){var a=t.pendingProps;switch(X_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(t),null;case 1:return So(t.type)&&wm(),Gi(t),null;case 3:return a=t.stateNode,mh(),vr(bo),vr(Xi),r1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Cp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ms!==null&&(Fv(Ms),Ms=null))),Cv(e,t),Gi(t),null;case 5:n1(t);var c=$u(dd.current);if(i=t.type,e!==null&&t.stateNode!=null)jT(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Gi(t),null}if(e=$u(ua.current),Cp(t)){a=t.stateNode,i=t.type;var d=t.memoizedProps;switch(a[ra]=t,a[hd]=d,e=(t.mode&1)!==0,i){case"dialog":yr("cancel",a),yr("close",a);break;case"iframe":case"object":case"embed":yr("load",a);break;case"video":case"audio":for(c=0;c<kf.length;c++)yr(kf[c],a);break;case"source":yr("error",a);break;case"img":case"image":case"link":yr("error",a),yr("load",a);break;case"details":yr("toggle",a);break;case"input":Kw(a,d),yr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},yr("invalid",a);break;case"textarea":Jw(a,d),yr("invalid",a)}Q0(i,d),c=null;for(var g in d)if(d.hasOwnProperty(g)){var l=d[g];g==="children"?typeof l=="string"?a.textContent!==l&&(d.suppressHydrationWarning!==!0&&Tp(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&Tp(a.textContent,l,e),c=["children",""+l]):td.hasOwnProperty(g)&&l!=null&&g==="onScroll"&&yr("scroll",a)}switch(i){case"input":yp(a),Yw(a,d,!0);break;case"textarea":yp(a),Qw(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=xm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(i,{is:a.is}):(e=g.createElement(i),i==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,i),e[ra]=t,e[hd]=a,RT(e,t,!1,!1),t.stateNode=e;e:{switch(g=ev(i,a),i){case"dialog":yr("cancel",e),yr("close",e),c=a;break;case"iframe":case"object":case"embed":yr("load",e),c=a;break;case"video":case"audio":for(c=0;c<kf.length;c++)yr(kf[c],e);c=a;break;case"source":yr("error",e),c=a;break;case"img":case"image":case"link":yr("error",e),yr("load",e),c=a;break;case"details":yr("toggle",e),c=a;break;case"input":Kw(e,a),c=X0(e,a),yr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Lr({},a,{value:void 0}),yr("invalid",e);break;case"textarea":Jw(e,a),c=Y0(e,a),yr("invalid",e);break;default:c=a}Q0(i,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="style"?pE(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&fE(e,b)):d==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&nd(e,b):typeof b=="number"&&nd(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(td.hasOwnProperty(d)?b!=null&&d==="onScroll"&&yr("scroll",e):b!=null&&L_(e,d,b,g))}switch(i){case"input":yp(e),Yw(e,a,!1);break;case"textarea":yp(e),Qw(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Jl(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?nh(e,!!a.multiple,d,!1):a.defaultValue!=null&&nh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=xm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gi(t),null;case 6:if(e&&t.stateNode!=null)DT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=$u(dd.current),$u(ua.current),Cp(t)){if(a=t.stateNode,i=t.memoizedProps,a[ra]=t,(d=a.nodeValue!==i)&&(e=Do,e!==null))switch(e.tag){case 3:Tp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tp(a.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[ra]=t,t.stateNode=a}return Gi(t),null;case 13:if(vr(kr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Tr&&jo!==null&&t.mode&1&&!(t.flags&128))tT(),dh(),t.flags|=98560,d=!1;else if(d=Cp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(At(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(At(317));d[ra]=t}else dh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Gi(t),d=!1}else Ms!==null&&(Fv(Ms),Ms=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||kr.current&1?li===0&&(li=3):m1())),t.updateQueue!==null&&(t.flags|=4),Gi(t),null);case 4:return mh(),Cv(e,t),e===null&&ud(t.stateNode.containerInfo),Gi(t),null;case 10:return J_(t.type._context),Gi(t),null;case 17:return So(t.type)&&wm(),Gi(t),null;case 19:if(vr(kr),d=t.memoizedState,d===null)return Gi(t),null;if(a=(t.flags&128)!==0,g=d.rendering,g===null)if(a)Ef(d,!1);else{if(li!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=Am(e),g!==null){for(t.flags|=128,Ef(d,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)d=i,e=a,d.flags&=14680066,g=d.alternate,g===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,e=g.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return mr(kr,kr.current&1|2),t.child}e=e.sibling}d.tail!==null&&Yr()>yh&&(t.flags|=128,a=!0,Ef(d,!1),t.lanes=4194304)}else{if(!a)if(e=Am(g),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Ef(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Tr)return Gi(t),null}else 2*Yr()-d.renderingStartTime>yh&&i!==1073741824&&(t.flags|=128,a=!0,Ef(d,!1),t.lanes=4194304);d.isBackwards?(g.sibling=t.child,t.child=g):(i=d.last,i!==null?i.sibling=g:t.child=g,d.last=g)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Yr(),t.sibling=null,i=kr.current,mr(kr,a?i&1|2:i&1),t):(Gi(t),null);case 22:case 23:return p1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Lo&1073741824&&(Gi(t),t.subtreeFlags&6&&(t.flags|=8192)):Gi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function u3(e,t){switch(X_(t),t.tag){case 1:return So(t.type)&&wm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mh(),vr(bo),vr(Xi),r1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return n1(t),null;case 13:if(vr(kr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));dh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vr(kr),null;case 4:return mh(),null;case 10:return J_(t.type._context),null;case 22:case 23:return p1(),null;case 24:return null;default:return null}}var Pp=!1,Hi=!1,c3=typeof WeakSet=="function"?WeakSet:Set,en=null;function qc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){jr(e,t,a)}else i.current=null}function Iv(e,t,i){try{i()}catch(a){jr(e,t,a)}}var $b=!1;function h3(e,t){if(cv=ym,e=$E(),H_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var g=0,l=-1,b=-1,w=0,A=0,C=e,M=null;t:for(;;){for(var R;C!==i||c!==0&&C.nodeType!==3||(l=g+c),C!==d||a!==0&&C.nodeType!==3||(b=g+a),C.nodeType===3&&(g+=C.nodeValue.length),(R=C.firstChild)!==null;)M=C,C=R;for(;;){if(C===e)break t;if(M===i&&++w===c&&(l=g),M===d&&++A===a&&(b=g),(R=C.nextSibling)!==null)break;C=M,M=C.parentNode}C=R}i=l===-1||b===-1?null:{start:l,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(hv={focusedElem:e,selectionRange:i},ym=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var J=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(J!==null){var Y=J.memoizedProps,de=J.memoizedState,G=t.stateNode,$=G.getSnapshotBeforeUpdate(t.elementType===t.type?Y:Ps(t.type,Y),de);G.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(re){jr(t,t.return,re)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return J=$b,$b=!1,J}function Zf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Iv(t,i,d)}c=c.next}while(c!==a)}}function Eg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Av(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function BT(e){var t=e.alternate;t!==null&&(e.alternate=null,BT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ra],delete t[hd],delete t[pv],delete t[WM],delete t[XM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NT(e){return e.tag===5||e.tag===3||e.tag===4}function Vb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=xm));else if(a!==4&&(e=e.child,e!==null))for(Pv(e,t,i),e=e.sibling;e!==null;)Pv(e,t,i),e=e.sibling}function kv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(kv(e,t,i),e=e.sibling;e!==null;)kv(e,t,i),e=e.sibling}var Ai=null,ks=!1;function zl(e,t,i){for(i=i.child;i!==null;)UT(e,t,i),i=i.sibling}function UT(e,t,i){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(gg,i)}catch{}switch(i.tag){case 5:Hi||qc(i,t);case 6:var a=Ai,c=ks;Ai=null,zl(e,t,i),Ai=a,ks=c,Ai!==null&&(ks?(e=Ai,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ai.removeChild(i.stateNode));break;case 18:Ai!==null&&(ks?(e=Ai,i=i.stateNode,e.nodeType===8?e0(e.parentNode,i):e.nodeType===1&&e0(e,i),sd(e)):e0(Ai,i.stateNode));break;case 4:a=Ai,c=ks,Ai=i.stateNode.containerInfo,ks=!0,zl(e,t,i),Ai=a,ks=c;break;case 0:case 11:case 14:case 15:if(!Hi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,g=d.destroy;d=d.tag,g!==void 0&&(d&2||d&4)&&Iv(i,t,g),c=c.next}while(c!==a)}zl(e,t,i);break;case 1:if(!Hi&&(qc(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(l){jr(i,t,l)}zl(e,t,i);break;case 21:zl(e,t,i);break;case 22:i.mode&1?(Hi=(a=Hi)||i.memoizedState!==null,zl(e,t,i),Hi=a):zl(e,t,i);break;default:zl(e,t,i)}}function Gb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new c3),t.forEach(function(a){var c=x3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function As(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var d=e,g=t,l=g;e:for(;l!==null;){switch(l.tag){case 5:Ai=l.stateNode,ks=!1;break e;case 3:Ai=l.stateNode.containerInfo,ks=!0;break e;case 4:Ai=l.stateNode.containerInfo,ks=!0;break e}l=l.return}if(Ai===null)throw Error(At(160));UT(d,g,c),Ai=null,ks=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){jr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$T(t,e),t=t.sibling}function $T(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(As(t,e),ta(e),a&4){try{Zf(3,e,e.return),Eg(3,e)}catch(Y){jr(e,e.return,Y)}try{Zf(5,e,e.return)}catch(Y){jr(e,e.return,Y)}}break;case 1:As(t,e),ta(e),a&512&&i!==null&&qc(i,i.return);break;case 5:if(As(t,e),ta(e),a&512&&i!==null&&qc(i,i.return),e.flags&32){var c=e.stateNode;try{nd(c,"")}catch(Y){jr(e,e.return,Y)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,g=i!==null?i.memoizedProps:d,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&uE(c,d),ev(l,g);var w=ev(l,d);for(g=0;g<b.length;g+=2){var A=b[g],C=b[g+1];A==="style"?pE(c,C):A==="dangerouslySetInnerHTML"?fE(c,C):A==="children"?nd(c,C):L_(c,A,C,w)}switch(l){case"input":q0(c,d);break;case"textarea":cE(c,d);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var R=d.value;R!=null?nh(c,!!d.multiple,R,!1):M!==!!d.multiple&&(d.defaultValue!=null?nh(c,!!d.multiple,d.defaultValue,!0):nh(c,!!d.multiple,d.multiple?[]:"",!1))}c[hd]=d}catch(Y){jr(e,e.return,Y)}}break;case 6:if(As(t,e),ta(e),a&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(Y){jr(e,e.return,Y)}}break;case 3:if(As(t,e),ta(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{sd(t.containerInfo)}catch(Y){jr(e,e.return,Y)}break;case 4:As(t,e),ta(e);break;case 13:As(t,e),ta(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(f1=Yr())),a&4&&Gb(e);break;case 22:if(A=i!==null&&i.memoizedState!==null,e.mode&1?(Hi=(w=Hi)||A,As(t,e),Hi=w):As(t,e),ta(e),a&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!A&&e.mode&1)for(en=e,A=e.child;A!==null;){for(C=en=A;en!==null;){switch(M=en,R=M.child,M.tag){case 0:case 11:case 14:case 15:Zf(4,M,M.return);break;case 1:qc(M,M.return);var J=M.stateNode;if(typeof J.componentWillUnmount=="function"){a=M,i=M.return;try{t=a,J.props=t.memoizedProps,J.state=t.memoizedState,J.componentWillUnmount()}catch(Y){jr(a,i,Y)}}break;case 5:qc(M,M.return);break;case 22:if(M.memoizedState!==null){Hb(C);continue}}R!==null?(R.return=M,en=R):Hb(C)}A=A.sibling}e:for(A=null,C=e;;){if(C.tag===5){if(A===null){A=C;try{c=C.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=C.stateNode,b=C.memoizedProps.style,g=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=dE("display",g))}catch(Y){jr(e,e.return,Y)}}}else if(C.tag===6){if(A===null)try{C.stateNode.nodeValue=w?"":C.memoizedProps}catch(Y){jr(e,e.return,Y)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;A===C&&(A=null),C=C.return}A===C&&(A=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:As(t,e),ta(e),a&4&&Gb(e);break;case 21:break;default:As(t,e),ta(e)}}function ta(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(NT(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(nd(c,""),a.flags&=-33);var d=Vb(e);kv(e,d,c);break;case 3:case 4:var g=a.stateNode.containerInfo,l=Vb(e);Pv(e,l,g);break;default:throw Error(At(161))}}catch(b){jr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function f3(e,t,i){en=e,VT(e)}function VT(e,t,i){for(var a=(e.mode&1)!==0;en!==null;){var c=en,d=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||Pp;if(!g){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Hi;l=Pp;var w=Hi;if(Pp=g,(Hi=b)&&!w)for(en=c;en!==null;)g=en,b=g.child,g.tag===22&&g.memoizedState!==null?Wb(c):b!==null?(b.return=g,en=b):Wb(c);for(;d!==null;)en=d,VT(d),d=d.sibling;en=c,Pp=l,Hi=w}Zb(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,en=d):Zb(e)}}function Zb(e){for(;en!==null;){var t=en;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Hi||Eg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Hi)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ps(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Ab(t,d,a);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Ab(t,g,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var A=w.memoizedState;if(A!==null){var C=A.dehydrated;C!==null&&sd(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Hi||t.flags&512&&Av(t)}catch(M){jr(t,t.return,M)}}if(t===e){en=null;break}if(i=t.sibling,i!==null){i.return=t.return,en=i;break}en=t.return}}function Hb(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var i=t.sibling;if(i!==null){i.return=t.return,en=i;break}en=t.return}}function Wb(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Eg(4,t)}catch(b){jr(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){jr(t,c,b)}}var d=t.return;try{Av(t)}catch(b){jr(t,d,b)}break;case 5:var g=t.return;try{Av(t)}catch(b){jr(t,g,b)}}}catch(b){jr(t,t.return,b)}if(t===e){en=null;break}var l=t.sibling;if(l!==null){l.return=t.return,en=l;break}en=t.return}}var d3=Math.ceil,Mm=Ja.ReactCurrentDispatcher,c1=Ja.ReactCurrentOwner,us=Ja.ReactCurrentBatchConfig,Zn=0,vi=null,ei=null,ki=0,Lo=0,Kc=iu(0),li=0,yd=null,qu=0,Tg=0,h1=0,Hf=null,_o=null,f1=0,yh=1/0,Da=null,zm=!1,Mv=null,ql=null,kp=!1,$l=null,Lm=0,Wf=0,zv=null,Qp=-1,em=0;function lo(){return Zn&6?Yr():Qp!==-1?Qp:Qp=Yr()}function Kl(e){return e.mode&1?Zn&2&&ki!==0?ki&-ki:KM.transition!==null?(em===0&&(em=CE()),em):(e=rr,e!==0||(e=window.event,e=e===void 0?16:LE(e.type)),e):1}function Ds(e,t,i,a){if(50<Wf)throw Wf=0,zv=null,Error(At(185));Td(e,i,a),(!(Zn&2)||e!==vi)&&(e===vi&&(!(Zn&2)&&(Tg|=i),li===4&&Bl(e,ki)),Eo(e,a),i===1&&Zn===0&&!(t.mode&1)&&(yh=Yr()+500,wg&&ou()))}function Eo(e,t){var i=e.callbackNode;Kk(e,t);var a=gm(e,e===vi?ki:0);if(a===0)i!==null&&nb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&nb(i),t===1)e.tag===0?qM(Xb.bind(null,e)):JE(Xb.bind(null,e)),ZM(function(){!(Zn&6)&&ou()}),i=null;else{switch(IE(a)){case 1:i=D_;break;case 4:i=EE;break;case 16:i=mm;break;case 536870912:i=TE;break;default:i=mm}i=YT(i,GT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function GT(e,t){if(Qp=-1,em=0,Zn&6)throw Error(At(327));var i=e.callbackNode;if(ah()&&e.callbackNode!==i)return null;var a=gm(e,e===vi?ki:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Fm(e,a);else{t=a;var c=Zn;Zn|=2;var d=HT();(vi!==e||ki!==t)&&(Da=null,yh=Yr()+500,Gu(e,t));do try{g3();break}catch(l){ZT(e,l)}while(1);Y_(),Mm.current=d,Zn=c,ei!==null?t=0:(vi=null,ki=0,t=li)}if(t!==0){if(t===2&&(c=ov(e),c!==0&&(a=c,t=Lv(e,c))),t===1)throw i=yd,Gu(e,0),Bl(e,a),Eo(e,Yr()),i;if(t===6)Bl(e,a);else{if(c=e.current.alternate,!(a&30)&&!p3(c)&&(t=Fm(e,a),t===2&&(d=ov(e),d!==0&&(a=d,t=Lv(e,d))),t===1))throw i=yd,Gu(e,0),Bl(e,a),Eo(e,Yr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:Du(e,_o,Da);break;case 3:if(Bl(e,a),(a&130023424)===a&&(t=f1+500-Yr(),10<t)){if(gm(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){lo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=dv(Du.bind(null,e,_o,Da),t);break}Du(e,_o,Da);break;case 4:if(Bl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-js(a);d=1<<g,g=t[g],g>c&&(c=g),a&=~d}if(a=c,a=Yr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*d3(a/1960))-a,10<a){e.timeoutHandle=dv(Du.bind(null,e,_o,Da),a);break}Du(e,_o,Da);break;case 5:Du(e,_o,Da);break;default:throw Error(At(329))}}}return Eo(e,Yr()),e.callbackNode===i?GT.bind(null,e):null}function Lv(e,t){var i=Hf;return e.current.memoizedState.isDehydrated&&(Gu(e,t).flags|=256),e=Fm(e,t),e!==2&&(t=_o,_o=i,t!==null&&Fv(t)),e}function Fv(e){_o===null?_o=e:_o.push.apply(_o,e)}function p3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],d=c.getSnapshot;c=c.value;try{if(!Bs(d(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bl(e,t){for(t&=~h1,t&=~Tg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-js(t),a=1<<i;e[i]=-1,t&=~a}}function Xb(e){if(Zn&6)throw Error(At(327));ah();var t=gm(e,0);if(!(t&1))return Eo(e,Yr()),null;var i=Fm(e,t);if(e.tag!==0&&i===2){var a=ov(e);a!==0&&(t=a,i=Lv(e,a))}if(i===1)throw i=yd,Gu(e,0),Bl(e,t),Eo(e,Yr()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e,_o,Da),Eo(e,Yr()),null}function d1(e,t){var i=Zn;Zn|=1;try{return e(t)}finally{Zn=i,Zn===0&&(yh=Yr()+500,wg&&ou())}}function Ku(e){$l!==null&&$l.tag===0&&!(Zn&6)&&ah();var t=Zn;Zn|=1;var i=us.transition,a=rr;try{if(us.transition=null,rr=1,e)return e()}finally{rr=a,us.transition=i,Zn=t,!(Zn&6)&&ou()}}function p1(){Lo=Kc.current,vr(Kc)}function Gu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,GM(i)),ei!==null)for(i=ei.return;i!==null;){var a=i;switch(X_(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&wm();break;case 3:mh(),vr(bo),vr(Xi),r1();break;case 5:n1(a);break;case 4:mh();break;case 13:vr(kr);break;case 19:vr(kr);break;case 10:J_(a.type._context);break;case 22:case 23:p1()}i=i.return}if(vi=e,ei=e=Yl(e.current,null),ki=Lo=t,li=0,yd=null,h1=Tg=qu=0,_o=Hf=null,Uu!==null){for(t=0;t<Uu.length;t++)if(i=Uu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,d=i.pending;if(d!==null){var g=d.next;d.next=c,a.next=g}i.pending=a}Uu=null}return e}function ZT(e,t){do{var i=ei;try{if(Y_(),Kp.current=km,Pm){for(var a=zr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Pm=!1}if(Xu=0,yi=ai=zr=null,Gf=!1,pd=0,c1.current=null,i===null||i.return===null){li=1,yd=t,ei=null;break}e:{var d=e,g=i.return,l=i,b=t;if(t=ki,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,A=l,C=A.tag;if(!(A.mode&1)&&(C===0||C===11||C===15)){var M=A.alternate;M?(A.updateQueue=M.updateQueue,A.memoizedState=M.memoizedState,A.lanes=M.lanes):(A.updateQueue=null,A.memoizedState=null)}var R=Ob(g);if(R!==null){R.flags&=-257,Rb(R,g,l,d,t),R.mode&1&&Fb(d,w,t),t=R,b=w;var J=t.updateQueue;if(J===null){var Y=new Set;Y.add(b),t.updateQueue=Y}else J.add(b);break e}else{if(!(t&1)){Fb(d,w,t),m1();break e}b=Error(At(426))}}else if(Tr&&l.mode&1){var de=Ob(g);if(de!==null){!(de.flags&65536)&&(de.flags|=256),Rb(de,g,l,d,t),q_(gh(b,l));break e}}d=b=gh(b,l),li!==4&&(li=2),Hf===null?Hf=[d]:Hf.push(d),d=g;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var G=AT(d,b,t);Ib(d,G);break e;case 1:l=b;var $=d.type,U=d.stateNode;if(!(d.flags&128)&&(typeof $.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ql===null||!ql.has(U)))){d.flags|=65536,t&=-t,d.lanes|=t;var re=PT(d,l,t);Ib(d,re);break e}}d=d.return}while(d!==null)}XT(i)}catch(Z){t=Z,ei===i&&i!==null&&(ei=i=i.return);continue}break}while(1)}function HT(){var e=Mm.current;return Mm.current=km,e===null?km:e}function m1(){(li===0||li===3||li===2)&&(li=4),vi===null||!(qu&268435455)&&!(Tg&268435455)||Bl(vi,ki)}function Fm(e,t){var i=Zn;Zn|=2;var a=HT();(vi!==e||ki!==t)&&(Da=null,Gu(e,t));do try{m3();break}catch(c){ZT(e,c)}while(1);if(Y_(),Zn=i,Mm.current=a,ei!==null)throw Error(At(261));return vi=null,ki=0,li}function m3(){for(;ei!==null;)WT(ei)}function g3(){for(;ei!==null&&!Uk();)WT(ei)}function WT(e){var t=KT(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,t===null?XT(e):ei=t,c1.current=null}function XT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=u3(i,t),i!==null){i.flags&=32767,ei=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{li=6,ei=null;return}}else if(i=l3(i,t,Lo),i!==null){ei=i;return}if(t=t.sibling,t!==null){ei=t;return}ei=t=e}while(t!==null);li===0&&(li=5)}function Du(e,t,i){var a=rr,c=us.transition;try{us.transition=null,rr=1,y3(e,t,i,a)}finally{us.transition=c,rr=a}return null}function y3(e,t,i,a){do ah();while($l!==null);if(Zn&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(Yk(e,d),e===vi&&(ei=vi=null,ki=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||kp||(kp=!0,YT(mm,function(){return ah(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=us.transition,us.transition=null;var g=rr;rr=1;var l=Zn;Zn|=4,c1.current=null,h3(e,i),$T(i,e),jM(hv),ym=!!cv,hv=cv=null,e.current=i,f3(i),$k(),Zn=l,rr=g,us.transition=d}else e.current=i;if(kp&&(kp=!1,$l=e,Lm=c),d=e.pendingLanes,d===0&&(ql=null),Zk(i.stateNode),Eo(e,Yr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(zm)throw zm=!1,e=Mv,Mv=null,e;return Lm&1&&e.tag!==0&&ah(),d=e.pendingLanes,d&1?e===zv?Wf++:(Wf=0,zv=e):Wf=0,ou(),null}function ah(){if($l!==null){var e=IE(Lm),t=us.transition,i=rr;try{if(us.transition=null,rr=16>e?16:e,$l===null)var a=!1;else{if(e=$l,$l=null,Lm=0,Zn&6)throw Error(At(331));var c=Zn;for(Zn|=4,en=e.current;en!==null;){var d=en,g=d.child;if(en.flags&16){var l=d.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(en=w;en!==null;){var A=en;switch(A.tag){case 0:case 11:case 15:Zf(8,A,d)}var C=A.child;if(C!==null)C.return=A,en=C;else for(;en!==null;){A=en;var M=A.sibling,R=A.return;if(BT(A),A===w){en=null;break}if(M!==null){M.return=R,en=M;break}en=R}}}var J=d.alternate;if(J!==null){var Y=J.child;if(Y!==null){J.child=null;do{var de=Y.sibling;Y.sibling=null,Y=de}while(Y!==null)}}en=d}}if(d.subtreeFlags&2064&&g!==null)g.return=d,en=g;else e:for(;en!==null;){if(d=en,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Zf(9,d,d.return)}var G=d.sibling;if(G!==null){G.return=d.return,en=G;break e}en=d.return}}var $=e.current;for(en=$;en!==null;){g=en;var U=g.child;if(g.subtreeFlags&2064&&U!==null)U.return=g,en=U;else e:for(g=$;en!==null;){if(l=en,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Eg(9,l)}}catch(Z){jr(l,l.return,Z)}if(l===g){en=null;break e}var re=l.sibling;if(re!==null){re.return=l.return,en=re;break e}en=l.return}}if(Zn=c,ou(),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(gg,e)}catch{}a=!0}return a}finally{rr=i,us.transition=t}}return!1}function qb(e,t,i){t=gh(i,t),t=AT(e,t,1),e=Xl(e,t,1),t=lo(),e!==null&&(Td(e,1,t),Eo(e,t))}function jr(e,t,i){if(e.tag===3)qb(e,e,i);else for(;t!==null;){if(t.tag===3){qb(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ql===null||!ql.has(a))){e=gh(i,e),e=PT(t,e,1),t=Xl(t,e,1),e=lo(),t!==null&&(Td(t,1,e),Eo(t,e));break}}t=t.return}}function v3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=lo(),e.pingedLanes|=e.suspendedLanes&i,vi===e&&(ki&i)===i&&(li===4||li===3&&(ki&130023424)===ki&&500>Yr()-f1?Gu(e,0):h1|=i),Eo(e,t)}function qT(e,t){t===0&&(e.mode&1?(t=xp,xp<<=1,!(xp&130023424)&&(xp=4194304)):t=1);var i=lo();e=Ha(e,t),e!==null&&(Td(e,t,i),Eo(e,i))}function _3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),qT(e,i)}function x3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),qT(e,i)}var KT;KT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||bo.current)wo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return wo=!1,a3(e,t,i);wo=!!(e.flags&131072)}else wo=!1,Tr&&t.flags&1048576&&QE(t,Em,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Jp(e,t),e=t.pendingProps;var c=fh(t,Xi.current);sh(t,i),c=o1(null,t,a,e,c,i);var d=s1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,So(a)?(d=!0,bm(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,e1(t),c.updater=bg,t.stateNode=c,c._reactInternals=t,xv(t,a,e,i),t=Sv(null,t,a,!0,d,i)):(t.tag=0,Tr&&d&&W_(t),io(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Jp(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=b3(a),e=Ps(a,e),c){case 0:t=bv(null,t,a,e,i);break e;case 1:t=Bb(null,t,a,e,i);break e;case 11:t=jb(null,t,a,e,i);break e;case 14:t=Db(null,t,a,Ps(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ps(a,c),bv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ps(a,c),Bb(e,t,a,c,i);case 3:e:{if(LT(t),e===null)throw Error(At(387));a=t.pendingProps,d=t.memoizedState,c=d.element,rT(e,t),Im(t,a,null,i);var g=t.memoizedState;if(a=g.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=gh(Error(At(423)),t),t=Nb(e,t,a,i,c);break e}else if(a!==c){c=gh(Error(At(424)),t),t=Nb(e,t,a,i,c);break e}else for(jo=Wl(t.stateNode.containerInfo.firstChild),Do=t,Tr=!0,Ms=null,i=aT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(dh(),a===c){t=Wa(e,t,i);break e}io(e,t,a,i)}t=t.child}return t;case 5:return lT(t),e===null&&yv(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,g=c.children,fv(a,c)?g=null:d!==null&&fv(a,d)&&(t.flags|=32),zT(e,t),io(e,t,g,i),t.child;case 6:return e===null&&yv(t),null;case 13:return FT(e,t,i);case 4:return t1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ph(t,null,a,i):io(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ps(a,c),jb(e,t,a,c,i);case 7:return io(e,t,t.pendingProps,i),t.child;case 8:return io(e,t,t.pendingProps.children,i),t.child;case 12:return io(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,d=t.memoizedProps,g=c.value,mr(Tm,a._currentValue),a._currentValue=g,d!==null)if(Bs(d.value,g)){if(d.children===c.children&&!bo.current){t=Wa(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){g=d.child;for(var b=l.firstContext;b!==null;){if(b.context===a){if(d.tag===1){b=Va(-1,i&-i),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var A=w.pending;A===null?b.next=b:(b.next=A.next,A.next=b),w.pending=b}}d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),vv(d.return,i,t),l.lanes|=i;break}b=b.next}}else if(d.tag===10)g=d.type===t.type?null:d.child;else if(d.tag===18){if(g=d.return,g===null)throw Error(At(341));g.lanes|=i,l=g.alternate,l!==null&&(l.lanes|=i),vv(g,i,t),g=d.sibling}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===t){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}io(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,sh(t,i),c=cs(c),a=a(c),t.flags|=1,io(e,t,a,i),t.child;case 14:return a=t.type,c=Ps(a,t.pendingProps),c=Ps(a.type,c),Db(e,t,a,c,i);case 15:return kT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ps(a,c),Jp(e,t),t.tag=1,So(a)?(e=!0,bm(t)):e=!1,sh(t,i),oT(t,a,c),xv(t,a,c,i),Sv(null,t,a,!0,e,i);case 19:return OT(e,t,i);case 22:return MT(e,t,i)}throw Error(At(156,t.tag))};function YT(e,t){return SE(e,t)}function w3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(e,t,i,a){return new w3(e,t,i,a)}function g1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function b3(e){if(typeof e=="function")return g1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===O_)return 11;if(e===R_)return 14}return 2}function Yl(e,t){var i=e.alternate;return i===null?(i=as(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function tm(e,t,i,a,c,d){var g=2;if(a=e,typeof e=="function")g1(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Nc:return Zu(i.children,c,d,t);case F_:g=8,c|=8;break;case G0:return e=as(12,i,t,c|2),e.elementType=G0,e.lanes=d,e;case Z0:return e=as(13,i,t,c),e.elementType=Z0,e.lanes=d,e;case H0:return e=as(19,i,t,c),e.elementType=H0,e.lanes=d,e;case sE:return Cg(i,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case iE:g=10;break e;case oE:g=9;break e;case O_:g=11;break e;case R_:g=14;break e;case Fl:g=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=as(g,i,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function Zu(e,t,i,a){return e=as(7,e,a,t),e.lanes=i,e}function Cg(e,t,i,a){return e=as(22,e,a,t),e.elementType=sE,e.lanes=i,e.stateNode={isHidden:!1},e}function l0(e,t,i){return e=as(6,e,null,t),e.lanes=i,e}function u0(e,t,i){return t=as(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function S3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vy(0),this.expirationTimes=Vy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vy(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function y1(e,t,i,a,c,d,g,l,b){return e=new S3(e,t,i,l,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=as(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},e1(d),e}function E3(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function JT(e){if(!e)return Ql;e=e._reactInternals;e:{if(nc(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(So(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(So(i))return YE(e,i,t)}return t}function QT(e,t,i,a,c,d,g,l,b){return e=y1(i,a,!0,e,c,d,g,l,b),e.context=JT(null),i=e.current,a=lo(),c=Kl(i),d=Va(a,c),d.callback=t??null,Xl(i,d,c),e.current.lanes=c,Td(e,c,a),Eo(e,a),e}function Ig(e,t,i,a){var c=t.current,d=lo(),g=Kl(c);return i=JT(i),t.context===null?t.context=i:t.pendingContext=i,t=Va(d,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Xl(c,t,g),e!==null&&(Ds(e,c,g,d),qp(e,c,g)),g}function Om(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function v1(e,t){Kb(e,t),(e=e.alternate)&&Kb(e,t)}function T3(){return null}var eC=typeof reportError=="function"?reportError:function(e){console.error(e)};function _1(e){this._internalRoot=e}Ag.prototype.render=_1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));Ig(e,t,null,null)};Ag.prototype.unmount=_1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ku(function(){Ig(null,e,null,null)}),t[Za]=null}};function Ag(e){this._internalRoot=e}Ag.prototype.unstable_scheduleHydration=function(e){if(e){var t=kE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Dl.length&&t!==0&&t<Dl[i].priority;i++);Dl.splice(i,0,e),i===0&&zE(e)}};function x1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yb(){}function C3(e,t,i,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var w=Om(g);d.call(w)}}var g=QT(t,a,e,0,null,!1,!1,"",Yb);return e._reactRootContainer=g,e[Za]=g.current,ud(e.nodeType===8?e.parentNode:e),Ku(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var w=Om(b);l.call(w)}}var b=y1(e,0,!1,null,null,!1,!1,"",Yb);return e._reactRootContainer=b,e[Za]=b.current,ud(e.nodeType===8?e.parentNode:e),Ku(function(){Ig(t,b,i,a)}),b}function kg(e,t,i,a,c){var d=i._reactRootContainer;if(d){var g=d;if(typeof c=="function"){var l=c;c=function(){var b=Om(g);l.call(b)}}Ig(t,g,e,c)}else g=C3(i,t,e,c,a);return Om(g)}AE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Pf(t.pendingLanes);i!==0&&(B_(t,i|1),Eo(t,Yr()),!(Zn&6)&&(yh=Yr()+500,ou()))}break;case 13:Ku(function(){var a=Ha(e,1);if(a!==null){var c=lo();Ds(a,e,1,c)}}),v1(e,1)}};N_=function(e){if(e.tag===13){var t=Ha(e,134217728);if(t!==null){var i=lo();Ds(t,e,134217728,i)}v1(e,134217728)}};PE=function(e){if(e.tag===13){var t=Kl(e),i=Ha(e,t);if(i!==null){var a=lo();Ds(i,e,t,a)}v1(e,t)}};kE=function(){return rr};ME=function(e,t){var i=rr;try{return rr=e,t()}finally{rr=i}};nv=function(e,t,i){switch(t){case"input":if(q0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=xg(a);if(!c)throw Error(At(90));lE(a),q0(a,c)}}}break;case"textarea":cE(e,i);break;case"select":t=i.value,t!=null&&nh(e,!!i.multiple,t,!1)}};yE=d1;vE=Ku;var I3={usingClientEntryPoint:!1,Events:[Id,Gc,xg,mE,gE,d1]},Tf={findFiberByHostInstance:Nu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},A3={bundleType:Tf.bundleType,version:Tf.version,rendererPackageName:Tf.rendererPackageName,rendererConfig:Tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wE(e),e===null?null:e.stateNode},findFiberByHostInstance:Tf.findFiberByHostInstance||T3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mp.isDisabled&&Mp.supportsFiber)try{gg=Mp.inject(A3),la=Mp}catch{}}No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I3;No.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x1(t))throw Error(At(200));return E3(e,t,null,i)};No.createRoot=function(e,t){if(!x1(e))throw Error(At(299));var i=!1,a="",c=eC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=y1(e,1,!1,null,null,i,!1,a,c),e[Za]=t.current,ud(e.nodeType===8?e.parentNode:e),new _1(t)};No.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=wE(t),e=e===null?null:e.stateNode,e};No.flushSync=function(e){return Ku(e)};No.hydrate=function(e,t,i){if(!Pg(t))throw Error(At(200));return kg(null,e,t,!0,i)};No.hydrateRoot=function(e,t,i){if(!x1(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,c=!1,d="",g=eC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=QT(t,null,e,1,i??null,c,!1,d,g),e[Za]=t.current,ud(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Ag(t)};No.render=function(e,t,i){if(!Pg(t))throw Error(At(200));return kg(null,e,t,!1,i)};No.unmountComponentAtNode=function(e){if(!Pg(e))throw Error(At(40));return e._reactRootContainer?(Ku(function(){kg(null,null,e,!1,function(){e._reactRootContainer=null,e[Za]=null})}),!0):!1};No.unstable_batchedUpdates=d1;No.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Pg(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return kg(e,t,i,!1,a)};No.version="18.2.0-next-9e3b772b8-20220608";function tC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tC)}catch(e){console.error(e)}}tC(),QS.exports=No;var w1=QS.exports;const P3=Sd(w1);var nC={exports:{}};(function(e,t){(function(i,a){e.exports=a()})(jl,function(){var i,a,c;function d(l,b){if(!i)i=b;else if(!a)a=b;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",A={};i(A),c=b(A),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(l){function b(o,n,s,h){return new(s||(s=Promise))(function(p,v){function x(F){try{P(h.next(F))}catch(W){v(W)}}function S(F){try{P(h.throw(F))}catch(W){v(W)}}function P(F){var W;F.done?p(F.value):(W=F.value,W instanceof s?W:new s(function(Q){Q(W)})).then(x,S)}P((h=h.apply(o,n||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var A=C;function C(o,n){this.x=o,this.y=n}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(o){return o instanceof C?o:Array.isArray(o)?new C(o[0],o[1]):o};var M=w(A),R=J;function J(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}J.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var x=0,S=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Y=w(R);let de,G;function $(){return de==null&&(de=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),de}function U(){if(G==null&&(G=!1,$())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){G=!0;break}}}return G||!1}function re(o,n,s,h){const p=new Y(o,n,s,h);return function(v){return p.solve(v)}}const Z=re(.25,.1,.25,1);function N(o,n,s){return Math.min(s,Math.max(n,o))}function E(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function k(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let H=1;function q(o,n,s){const h={};for(const p in o)h[p]=n.call(s||this,o[p],p,o);return h}function ee(o,n,s){const h={};for(const p in o)n.call(s||this,o[p],p,o)&&(h[p]=o[p]);return h}function ve(o){return Array.isArray(o)?o.map(ve):typeof o=="object"&&o?q(o,ve):o}const xe={};function be(o){xe[o]||(typeof console<"u"&&console.warn(o),xe[o]=!0)}function te(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function ue(o){let n=0;for(let s,h,p=0,v=o.length,x=v-1;p<v;x=p++)s=o[p],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function ne(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ie=null;function ye(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Se(o,n,s,h,p){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),P=new Uint8ClampedArray(h*p*4);if(yield v.copyTo(P,function(F,W,Q,ae,fe){const me=4*Math.max(-W,0),Ae=(Math.max(0,Q)-Q)*ae*4+me,Re=4*ae,Ne=Math.max(0,W),Je=Math.max(0,Q);return{rect:{x:Ne,y:Je,width:Math.min(F.width,W+ae)-Ne,height:Math.min(F.height,Q+fe)-Je},layout:[{offset:Ae,stride:Re}]}}(o,n,s,h,p)),S)for(let F=0;F<P.length;F+=4){const W=P[F];P[F]=P[F+2],P[F+2]=W}return P}finally{v.close()}})}let $e,Pe,Le,Xe;const Ze={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){return this.getImageCanvasContext(o).getImageData(-n,-n,o.width+2*n,o.height+2*n)},getImageCanvasContext(o){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=o.width,n.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(Le||(Le=document.createElement("a")),Le.href=o,Le.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Xe==null&&(Xe=matchMedia("(prefers-reduced-motion: reduce)")),Xe.matches)}},nt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class ct extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const vt=ne()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,It=o=>nt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function ft(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:vt(),signal:s.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(S=>{(o.type==="arrayBuffer"||o.type==="image"?S.arrayBuffer():o.type==="json"?S.json():S.text()).then(P=>{v||(p=!0,n(null,P,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(P=>{v||n(new Error(P.message))})})(x):x.blob().then(S=>n(new ct(x.status,x.statusText,o.url,S)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,p||s.abort()}}}const St=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(ne()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!ne())return(It(o.url)||ft)(o,n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(vt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ft(o,n);if(ne()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(S){return p(S)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new ct(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},Gt=function(o,n){return St(k(o,{type:"arrayBuffer"}),n)};function Ut(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function un(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function xn(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class yn{constructor(n,s={}){k(this,s),this.type=n}}class on extends yn{constructor(n,s={}){super("error",k({error:n},s))}}class gn{on(n,s){return this._listeners=this._listeners||{},un(n,s,this._listeners),this}off(n,s){return xn(n,s,this._listeners),xn(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},un(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new yn(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of p)S.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)xn(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(k(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof on&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const j=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function O(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return j.forEach(h=>{h in n&&(s[h]=n[h])}),s}function pe(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!pe(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!pe(o[s],n[s]))return!1;return!0}return o===n}const Be={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function et(o,n,s){s.push({command:Be.addSource,args:[o,n[o]]})}function lt(o,n,s){n.push({command:Be.removeSource,args:[o]}),s[o]=!0}function le(o,n,s,h){lt(o,s,h),et(o,n,s)}function L(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!pe(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!pe(o[s][h],n[s][h]))return!1;return!0}function D(o,n,s,h,p,v){let x;for(x in n=n||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(pe(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(pe(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}))}function Ee(o){return o.id}function Ge(o,n){return o[n.id]=n,o}class je{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function at(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class jt extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Tn{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new Tn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const vn={kind:"null"},_t={kind:"number"},Rt={kind:"string"},nn={kind:"boolean"},xr={kind:"color"},ui={kind:"object"},cn={kind:"value"},er={kind:"collator"},ze={kind:"formatted"},oe={kind:"padding"},ce={kind:"resolvedImage"},_e={kind:"variableAnchorOffsetCollection"};function we(o,n){return{kind:"array",itemType:o,N:n}}function Ce(o){if(o.kind==="array"){const n=Ce(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const He=[vn,_t,Rt,nn,xr,ze,ui,we(cn),oe,ce,_e];function Ve(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ve(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of He)if(!Ve(s,n))return null}}return`Expected ${Ce(o)} but found ${Ce(n)} instead.`}function Oe(o,n){return n.some(s=>s.kind===o.kind)}function qe(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function ut(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const ht=.96422,mt=.82521,Jt=4/29,ln=6/29,Dt=3*ln*ln,Qt=ln*ln*ln,hn=Math.PI/180,Rn=180/Math.PI;function jn(o){return(o%=360)<0&&(o+=360),o}function Fn([o,n,s,h]){let p,v;const x=Jr((.2225045*(o=Mn(o))+.7168786*(n=Mn(n))+.0606169*(s=Mn(s)))/1);o===n&&n===s?p=v=x:(p=Jr((.4360747*o+.3850649*n+.1430804*s)/ht),v=Jr((.0139322*o+.0971045*n+.7141733*s)/mt));const S=116*x-16;return[S<0?0:S,500*(p-x),200*(x-v),h]}function Mn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Jr(o){return o>Qt?Math.pow(o,1/3):o/Dt+Jt}function qn([o,n,s,h]){let p=(o+16)/116,v=isNaN(n)?p:p+n/500,x=isNaN(s)?p:p-s/200;return p=1*Br(p),v=ht*Br(v),x=mt*Br(x),[wr(3.1338561*v-1.6168667*p-.4906146*x),wr(-.9787684*v+1.9161415*p+.033454*x),wr(.0719453*v-.2289914*p+1.4052427*x),h]}function wr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Br(o){return o>ln?o*o*o:Dt*(o-Jt)}function ti(o){return parseInt(o.padEnd(2,o),16)/255}function Us(o,n){return fs(n?o/100:o,0,1)}function fs(o,n,s){return Math.min(Math.max(n,o),s)}function wn(o){return!o.some(Number.isNaN)}const ds={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Vn{constructor(n,s,h,p=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof Vn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=ds[h];if(p){const[x,S,P]=p;return[x/255,S/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[ti(h.slice(S,S+=x)),ti(h.slice(S,S+=x)),ti(h.slice(S,S+=x)),ti(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je]=x,We=[W||" ",fe||" ",Re].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const Qe=[F,ae,Ae].join(""),rt=Qe==="%%%"?100:Qe===""?255:0;if(rt){const gt=[fs(+P/rt,0,1),fs(+Q/rt,0,1),fs(+me/rt,0,1),Ne?Us(+Ne,Je):1];if(wn(gt))return gt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,P,F,W,Q,ae,fe,me]=v,Ae=[P||" ",W||" ",ae].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const Re=[+S,fs(+F,0,100),fs(+Q,0,100),fe?Us(+fe,me):1];if(wn(Re))return function([Ne,Je,We,Qe]){function rt(gt){const Ot=(gt+Ne/30)%12,Vt=Je*Math.min(We,1-We);return We-Vt*Math.max(-1,Math.min(Ot-3,9-Ot,1))}return Ne=jn(Ne),Je/=100,We/=100,[rt(0),rt(8),rt(4),Qe]}(Re)}}}(n);return s?new Vn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,p,v]=Fn(n),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?jn(Math.atan2(p,h)*Rn):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Fn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${p})`}}Vn.black=new Vn(0,0,0,1),Vn.white=new Vn(1,1,1,1),Vn.transparent=new Vn(0,0,0,0),Vn.red=new Vn(1,0,0,1);class su{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class el{constructor(n,s,h,p,v){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class Qr{constructor(n){this.sections=n}static fromString(n){return new Qr([new el(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Qr?n:Qr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class xi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof xi)return n;if(typeof n=="number")return new xi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new xi(n)}}toString(){return JSON.stringify(this.values)}}const To=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class zi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof zi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],p=n[s+1];if(typeof h!="string"||!To.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new zi(n)}}toString(){return JSON.stringify(this.values)}}class Nr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Nr({name:n,available:!1}):null}}function tl(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $s(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Vn||o instanceof su||o instanceof Qr||o instanceof xi||o instanceof zi||o instanceof Nr)return!0;if(Array.isArray(o)){for(const n of o)if(!$s(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!$s(o[n]))return!1;return!0}return!1}function ir(o){if(o===null)return vn;if(typeof o=="string")return Rt;if(typeof o=="boolean")return nn;if(typeof o=="number")return _t;if(o instanceof Vn)return xr;if(o instanceof su)return er;if(o instanceof Qr)return ze;if(o instanceof xi)return oe;if(o instanceof zi)return _e;if(o instanceof Nr)return ce;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=ir(h);if(s){if(s===p)continue;s=cn;break}s=p}return we(s||cn,n)}return ui}function bn(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Vn||o instanceof Qr||o instanceof xi||o instanceof zi||o instanceof Nr?o.toString():JSON.stringify(o)}class ps{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!$s(n[1]))return s.error("invalid value");const h=n[1];let p=ir(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new ps(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class hr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const nl={string:Rt,number:_t,boolean:nn,object:ui};class Li{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let S,P;if(n.length>2){const F=n[1];if(typeof F!="string"||!(F in nl)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=nl[F],p++}else S=cn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=n[2],p++}h=we(S,P)}else{if(!nl[v])throw new Error(`Types doesn't contain name = ${v}`);h=nl[v]}const x=[];for(;p<n.length;p++){const S=s.parse(n[p],p,cn);if(!S)return null;x.push(S)}return new Li(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Ve(this.type,ir(h)))return h;if(s===this.args.length-1)throw new hr(`Expected value to be of type ${Ce(this.type)}, but found ${Ce(ir(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const au={"to-boolean":nn,"to-color":xr,"to-number":_t,"to-string":Rt};class qi{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!au[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=au[h],v=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,cn);if(!S)return null;v.push(S)}return new qi(p,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof Vn)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:tl(s[0],s[1],s[2],s[3]),!h))return new Vn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new hr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const p=xi.parse(s);if(p)return p}throw new hr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const p=zi.parse(s);if(p)return p}throw new hr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new hr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Qr.fromString(bn(this.args[0].evaluate(n)));case"resolvedImage":return Nr.fromString(bn(this.args[0].evaluate(n)));default:return bn(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const sc=["Unknown","Point","LineString","Polygon"];class lu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?sc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Vn.parse(n)),s}}class ci{constructor(n,s,h=[],p,v=new Tn,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,v={}){return s?this.concat(s,h,p)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(p,v,x){return x==="assert"?new Li(v,[p]):x==="coerce"?new qi(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,P=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof ps)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new lu;try{x=new ps(x.type,x.evaluate(S))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new ci(this.registry,this._isConstant,p,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new jt(h,n))}checkSubtype(n,s){const h=Ve(n,s);return h&&this.error(h),h}}class rl{constructor(n,s,h){this.type=er,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,nn);if(!p)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,nn);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Rt),!x)?null:new rl(p,v,x)}evaluate(n){return new su(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Go=8192;function uu(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function da(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function ac(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*Go),Math.round(h*p*Go)]}function lc(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-s[0],x=o[1]-s[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function pa(o,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const P=n[x];for(let F=0,W=P.length;F<W-1;F++){if(lc(o,P[F],P[F+1]))return!1;(p=P[F])[1]>(h=o)[1]!=(v=P[F+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(s=!s)}}var h,p,v;return s}function il(o,n){for(let s=0;s<n.length;s++)if(pa(o,n[s]))return!0;return!1}function ma(o,n,s,h){const p=h[0]-s[0],v=h[1]-s[1],x=(o[0]-s[0])*v-p*(o[1]-s[1]),S=(n[0]-s[0])*v-p*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function Ph(o,n,s){for(const F of s)for(let W=0;W<F.length-1;++W)if((S=[(x=F[W+1])[0]-(v=F[W])[0],x[1]-v[1]])[0]*(P=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-S[1]*P[0]!=0&&ma(h,p,v,x)&&ma(v,x,h,p))return!0;var h,p,v,x,S,P;return!1}function ms(o,n){for(let s=0;s<o.length;++s)if(!pa(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(Ph(o[s],o[s+1],n))return!1;return!0}function uc(o,n){for(let s=0;s<n.length;s++)if(ms(o,n[s]))return!0;return!1}function ol(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const S=ac(o[p][x],s);uu(n,S),v.push(S)}h.push(v)}return h}function cc(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=ol(o[p],n,s);h.push(v)}return h}function hc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let v=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;v===0&&(v=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=v}uu(n,o)}function sl(o,n,s,h){const p=Math.pow(2,h.z)*Go,v=[h.x*Go,h.y*Go],x=[];for(const S of o)for(const P of S){const F=[P.x+v[0],P.y+v[1]];hc(F,n,s,p),x.push(F)}return x}function cu(o,n,s,h){const p=Math.pow(2,h.z)*Go,v=[h.x*Go,h.y*Go],x=[];for(const P of o){const F=[];for(const W of P){const Q=[W.x+v[0],W.y+v[1]];uu(n,Q),F.push(Q)}x.push(F)}if(n[2]-n[0]<=p/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const P of x)for(const F of P)hc(F,n,s,p)}var S;return x}class gs{constructor(n,s){this.type=nn,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if($s(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new gs(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new gs(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new gs(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=ol(h.coordinates,v,x),P=sl(s.geometry(),p,v,x);if(!da(p,v))return!1;for(const F of P)if(!pa(F,S))return!1}if(h.type==="MultiPolygon"){const S=cc(h.coordinates,v,x),P=sl(s.geometry(),p,v,x);if(!da(p,v))return!1;for(const F of P)if(!il(F,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=ol(h.coordinates,v,x),P=cu(s.geometry(),p,v,x);if(!da(p,v))return!1;for(const F of P)if(!ms(F,S))return!1}if(h.type==="MultiPolygon"){const S=cc(h.coordinates,v,x),P=cu(s.geometry(),p,v,x);if(!da(p,v))return!1;for(const F of P)if(!uc(F,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class al{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new al(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class hi{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],p=hi.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=x.filter(([F])=>!Array.isArray(F)||F.length===n.length-1);let P=null;for(const[F,W]of S){P=new ci(s.registry,ll,s.path,null,s.scope);const Q=[];let ae=!1;for(let fe=1;fe<n.length;fe++){const me=n[fe],Ae=Array.isArray(F)?F[fe-1]:F.type,Re=P.parse(me,1+Q.length,Ae);if(!Re){ae=!0;break}Q.push(Re)}if(!ae)if(Array.isArray(F)&&F.length!==Q.length)P.error(`Expected ${F.length} arguments, but found ${Q.length} instead.`);else{for(let fe=0;fe<Q.length;fe++){const me=Array.isArray(F)?F[fe]:F.type,Ae=Q[fe];P.concat(fe+1).checkSubtype(me,Ae.type)}if(P.errors.length===0)return new hi(h,v,W,Q)}}if(S.length===1)s.errors.push(...P.errors);else{const F=(S.length?S:x).map(([Q])=>{return ae=Q,Array.isArray(ae)?`(${ae.map(Ce).join(", ")})`:`(${Ce(ae.type)}...)`;var ae}).join(" | "),W=[];for(let Q=1;Q<n.length;Q++){const ae=s.parse(n[Q],1+W.length);if(!ae)return null;W.push(Ce(ae.type))}s.error(`Expected arguments of type ${F}, but found (${W.join(", ")}) instead.`)}return null}static register(n,s){hi.definitions=s;for(const h in s)n[h]=hi}}function ll(o){if(o instanceof al)return ll(o.boundExpression);if(o instanceof hi&&o.name==="error"||o instanceof rl||o instanceof gs)return!1;const n=o instanceof qi||o instanceof Li;let s=!0;return o.eachChild(h=>{s=n?s&&ll(h):s&&h instanceof ps}),!!s&&ul(o)&&cl(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ul(o){if(o instanceof hi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof gs)return!1;let n=!0;return o.eachChild(s=>{n&&!ul(s)&&(n=!1)}),n}function ga(o){if(o instanceof hi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!ga(s)&&(n=!1)}),n}function cl(o,n){if(o instanceof hi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!cl(h,n)&&(s=!1)}),s}function ys(o,n){const s=o.length-1;let h,p,v=0,x=s,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=o[S],p=o[S+1],h<=n){if(S===s||n<p)return S;v=S+1}else{if(!(h>n))throw new hr("Input is not a number.");x=S-1}return 0}class Zo{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,_t);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],P=n[x+1],F=x,W=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(p.length&&p[p.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const Q=s.parse(P,W,v);if(!Q)return null;v=v||Q.type,p.push([S,Q])}return new Zo(v,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(n):h[ys(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function In(o,n,s){return o+s*(n-o)}function hl(o,n,s){return o.map((h,p)=>In(h,n[p],s))}const wi={number:In,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[p,v,x,S]=hl(o.rgb,n.rgb,s);return new Vn(p,v,x,S,!1)}case"hcl":{const[p,v,x,S]=o.hcl,[P,F,W,Q]=n.hcl;let ae,fe;if(isNaN(p)||isNaN(P))isNaN(p)?isNaN(P)?ae=NaN:(ae=P,x!==1&&x!==0||(fe=F)):(ae=p,W!==1&&W!==0||(fe=v));else{let Je=P-p;P>p&&Je>180?Je-=360:P<p&&p-P>180&&(Je+=360),ae=p+s*Je}const[me,Ae,Re,Ne]=function([Je,We,Qe,rt]){return Je=isNaN(Je)?0:Je*hn,qn([Qe,Math.cos(Je)*We,Math.sin(Je)*We,rt])}([ae,fe??In(v,F,s),In(x,W,s),In(S,Q,s)]);return new Vn(me,Ae,Re,Ne,!1)}case"lab":{const[p,v,x,S]=qn(hl(o.lab,n.lab,s));return new Vn(p,v,x,S,!1)}}},array:hl,padding:function(o,n,s){return new xi(hl(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,p=n.values;if(h.length!==p.length)throw new hr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==p[x])throw new hr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${p[x]}`);v.push(h[x]);const[S,P]=h[x+1],[F,W]=p[x+1];v.push([In(S,F,s),In(P,W,s)])}return new zi(v)}};class fi{constructor(n,s,h,p,v){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,p){let v=0;if(n.name==="exponential")v=hu(s,n.base,h,p);else if(n.name==="linear")v=hu(s,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new Y(x[0],x[1],x[2],x[3]).solve(hu(s,1,h,p))}return v}static parse(n,s){let[h,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const F=p[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:F}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const F=p.slice(1);if(F.length!==4||F.some(W=>typeof W!="number"||W<0||W>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:F}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,_t),!v)return null;const S=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=xr:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let F=0;F<x.length;F+=2){const W=x[F],Q=x[F+1],ae=F+3,fe=F+4;if(typeof W!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ae);if(S.length&&S[S.length-1][0]>=W)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ae);const me=s.parse(Q,fe,P);if(!me)return null;P=P||me.type,S.push([W,me])}return ut(P,_t)||ut(P,xr)||ut(P,oe)||ut(P,_e)||ut(P,we(_t))?new fi(P,h,p,v,S):s.error(`Type ${Ce(P)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(n);const x=ys(s,p),S=fi.interpolationFactor(this.interpolation,p,s[x],s[x+1]),P=h[x].evaluate(n),F=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return wi[this.type.kind](P,F,S);case"interpolate-hcl":return wi.color(P,F,S,"hcl");case"interpolate-lab":return wi.color(P,F,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function hu(o,n,s,h){const p=h-s,v=o-s;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class fl{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const S of n.slice(1)){const P=s.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,v.push(P)}if(!h)throw new Error("No output type");const x=p&&v.some(S=>Ve(p,S.type));return new fl(x?cn:h,v)}evaluate(n){let s,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof Nr&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class dl{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=s.parse(n[v+1],v+1);if(!S)return null;h.push([x,S])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new dl(h,p):null}outputDefined(){return this.result.outputDefined()}}class fu{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,_t),p=s.parse(n[2],2,we(s.expectedType||cn));return h&&p?new fu(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new hr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new hr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new hr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class pl{constructor(n,s){this.type=nn,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,cn),p=s.parse(n[2],2,cn);return h&&p?Oe(h.type,[nn,Rt,_t,vn,cn])?new pl(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!qe(s,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(ir(s))} instead.`);if(!qe(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Ce(ir(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class ml{constructor(n,s,h){this.type=_t,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,cn),p=s.parse(n[2],2,cn);if(!h||!p)return null;if(!Oe(h.type,[nn,Rt,_t,vn,cn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,_t);return v?new ml(h,p,v):null}return new ml(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!qe(s,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(ir(s))} instead.`);if(!qe(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Ce(ir(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class ya{constructor(n,s,h,p,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},x=[];for(let F=2;F<n.length-1;F+=2){let W=n[F];const Q=n[F+1];Array.isArray(W)||(W=[W]);const ae=s.concat(F);if(W.length===0)return ae.error("Expected at least one branch label.");for(const me of W){if(typeof me!="number"&&typeof me!="string")return ae.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return ae.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return ae.error("Numeric branch labels must be integer values.");if(h){if(ae.checkSubtype(h,ir(me)))return null}else h=ir(me);if(v[String(me)]!==void 0)return ae.error("Branch labels must be unique.");v[String(me)]=x.length}const fe=s.parse(Q,F,p);if(!fe)return null;p=p||fe.type,x.push(fe)}const S=s.parse(n[1],1,cn);if(!S)return null;const P=s.parse(n[n.length-1],n.length-1,p);return P?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new ya(h,p,S,v,x,P):null}evaluate(n){const s=this.input.evaluate(n);return(ir(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class du{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,nn);if(!S)return null;const P=s.parse(n[x+1],x+1,h);if(!P)return null;p.push([S,P]),h=h||P.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new du(h,p,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class gl{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,cn),p=s.parse(n[2],2,_t);if(!h||!p)return null;if(!Oe(h.type,[we(cn),Rt,cn]))return s.error(`Expected first argument to be of type array or string, but found ${Ce(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,_t);return v?new gl(h.type,h,p,v):null}return new gl(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!qe(s,["string","array"]))throw new hr(`Expected first argument to be of type array or string, but found ${Ce(ir(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function fc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function dc(o,n,s,h){return h.compare(n,s)===0}function Vs(o,n,s){const h=o!=="=="&&o!=="!=";return class rC{constructor(v,x,S){this.type=nn,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let P=x.parse(v[1],1,cn);if(!P)return null;if(!fc(S,P.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${Ce(P.type)}'.`);let F=x.parse(v[2],2,cn);if(!F)return null;if(!fc(S,F.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${Ce(F.type)}'.`);if(P.type.kind!==F.type.kind&&P.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${Ce(P.type)}' and '${Ce(F.type)}'.`);h&&(P.type.kind==="value"&&F.type.kind!=="value"?P=new Li(F.type,[P]):P.type.kind!=="value"&&F.type.kind==="value"&&(F=new Li(P.type,[F])));let W=null;if(v.length===4){if(P.type.kind!=="string"&&F.type.kind!=="string"&&P.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(W=x.parse(v[3],3,er),!W)return null}return new rC(P,F,W)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const P=ir(x),F=ir(S);if(P.kind!==F.kind||P.kind!=="string"&&P.kind!=="number")throw new hr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=ir(x),F=ir(S);if(P.kind!=="string"||F.kind!=="string")return n(v,x,S)}return this.collator?s(v,x,S,this.collator.evaluate(v)):n(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const kh=Vs("==",function(o,n,s){return n===s},dc),pc=Vs("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!dc(0,n,s,h)}),pu=Vs("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Mh=Vs(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),zh=Vs("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Lh=Vs(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class mu{constructor(n,s,h,p,v){this.type=Rt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,_t);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,Rt),!v))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,Rt),!x))return null;let S=null;if(p["min-fraction-digits"]&&(S=s.parse(p["min-fraction-digits"],1,_t),!S))return null;let P=null;return p["max-fraction-digits"]&&(P=s.parse(p["max-fraction-digits"],1,_t),!P)?null:new mu(h,v,x,S,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class va{constructor(n){this.type=ze,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let P=null;if(S["font-scale"]&&(P=s.parse(S["font-scale"],1,_t),!P))return null;let F=null;if(S["text-font"]&&(F=s.parse(S["text-font"],1,we(Rt)),!F))return null;let W=null;if(S["text-color"]&&(W=s.parse(S["text-color"],1,xr),!W))return null;const Q=p[p.length-1];Q.scale=P,Q.font=F,Q.textColor=W}else{const P=s.parse(n[x],1,cn);if(!P)return null;const F=P.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new va(p)}evaluate(n){return new Qr(this.sections.map(s=>{const h=s.content.evaluate(n);return ir(h)===ce?new el("",h,null,null,null):new el(bn(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class gu{constructor(n){this.type=ce,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Rt);return h?new gu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Nr.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class yu{constructor(n){this.type=_t,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ce(h.type)} instead.`):new yu(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new hr(`Expected value to be of type string or array, but found ${Ce(ir(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Gs={"==":kh,"!=":pc,">":Mh,"<":pu,">=":Lh,"<=":zh,array:Li,at:fu,boolean:Li,case:du,coalesce:fl,collator:rl,format:va,image:gu,in:pl,"index-of":ml,interpolate:fi,"interpolate-hcl":fi,"interpolate-lab":fi,length:yu,let:dl,literal:ps,match:ya,number:Li,"number-format":mu,object:Li,slice:gl,step:Zo,string:Li,"to-boolean":qi,"to-color":qi,"to-number":qi,"to-string":qi,var:al,within:gs};function mc(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=tl(n,s,h,v);if(x)throw new hr(x);return new Vn(n/255,s/255,h/255,v,!1)}function _a(o,n){return o in n}function vu(o,n){const s=n[o];return s===void 0?null:s}function Fi(o){return{type:o}}function _u(o){return{result:"success",value:o}}function Ur(o){return{result:"error",value:o}}function Zs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function gc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function xu(o){return!!o.expression&&o.expression.interpolated}function Dn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Jn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Fh(o){return o}function Sn(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(xu(n)?"exponential":"interval");if(s||n.type==="padding"){const W=s?Vn.parse:xi.parse;(o=at({},o)).stops&&(o.stops=o.stops.map(Q=>[Q[0],W(Q[1])])),o.default=W(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,P,F;if(v==="exponential")S=Hs;else if(v==="interval")S=Hn;else if(v==="categorical"){S=or,P=Object.create(null);for(const W of o.stops)P[W[0]]=W[1];F=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=wu}if(h){const W={},Q=[];for(let me=0;me<o.stops.length;me++){const Ae=o.stops[me],Re=Ae[0].zoom;W[Re]===void 0&&(W[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},Q.push(Re)),W[Re].stops.push([Ae[0].value,Ae[1]])}const ae=[];for(const me of Q)ae.push([W[me].zoom,Sn(W[me],n)]);const fe={name:"linear"};return{kind:"composite",interpolationType:fe,interpolationFactor:fi.interpolationFactor.bind(void 0,fe),zoomStops:ae.map(me=>me[0]),evaluate:({zoom:me},Ae)=>Hs({stops:ae,base:o.base},n,me).evaluate(me,Ae)}}if(p){const W=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:fi.interpolationFactor.bind(void 0,W),zoomStops:o.stops.map(Q=>Q[0]),evaluate:({zoom:Q})=>S(o,n,Q,P,F)}}return{kind:"source",evaluate(W,Q){const ae=Q&&Q.properties?Q.properties[o.property]:void 0;return ae===void 0?vs(o.default,n.default):S(o,n,ae,P,F)}}}function vs(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function or(o,n,s,h,p){return vs(typeof s===p?h[s]:void 0,o.default,n.default)}function Hn(o,n,s){if(Dn(s)!=="number")return vs(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=ys(o.stops.map(v=>v[0]),s);return o.stops[p][1]}function Hs(o,n,s){const h=o.base!==void 0?o.base:1;if(Dn(s)!=="number")return vs(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=ys(o.stops.map(W=>W[0]),s),x=function(W,Q,ae,fe){const me=fe-ae,Ae=W-ae;return me===0?0:Q===1?Ae/me:(Math.pow(Q,Ae)-1)/(Math.pow(Q,me)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),S=o.stops[v][1],P=o.stops[v+1][1],F=wi[n.type]||Fh;return typeof S.evaluate=="function"?{evaluate(...W){const Q=S.evaluate.apply(void 0,W),ae=P.evaluate.apply(void 0,W);if(Q!==void 0&&ae!==void 0)return F(Q,ae,x,o.colorSpace)}}:F(S,P,x,o.colorSpace)}function wu(o,n,s){switch(n.type){case"color":s=Vn.parse(s);break;case"formatted":s=Qr.fromString(s.toString());break;case"resolvedImage":s=Nr.fromString(s.toString());break;case"padding":s=xi.parse(s);break;default:Dn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return vs(s,o.default,n.default)}hi.register(Gs,{error:[{kind:"error"},[Rt],(o,[n])=>{throw new hr(n.evaluate(o))}],typeof:[Rt,[cn],(o,[n])=>Ce(ir(n.evaluate(o)))],"to-rgba":[we(_t,4),[xr],(o,[n])=>{const[s,h,p,v]=n.evaluate(o).rgb;return[255*s,255*h,255*p,v]}],rgb:[xr,[_t,_t,_t],mc],rgba:[xr,[_t,_t,_t,_t],mc],has:{type:nn,overloads:[[[Rt],(o,[n])=>_a(n.evaluate(o),o.properties())],[[Rt,ui],(o,[n,s])=>_a(n.evaluate(o),s.evaluate(o))]]},get:{type:cn,overloads:[[[Rt],(o,[n])=>vu(n.evaluate(o),o.properties())],[[Rt,ui],(o,[n,s])=>vu(n.evaluate(o),s.evaluate(o))]]},"feature-state":[cn,[Rt],(o,[n])=>vu(n.evaluate(o),o.featureState||{})],properties:[ui,[],o=>o.properties()],"geometry-type":[Rt,[],o=>o.geometryType()],id:[cn,[],o=>o.id()],zoom:[_t,[],o=>o.globals.zoom],"heatmap-density":[_t,[],o=>o.globals.heatmapDensity||0],"line-progress":[_t,[],o=>o.globals.lineProgress||0],accumulated:[cn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[_t,Fi(_t),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[_t,Fi(_t),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:_t,overloads:[[[_t,_t],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[_t],(o,[n])=>-n.evaluate(o)]]},"/":[_t,[_t,_t],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[_t,[_t,_t],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[_t,[],()=>Math.LN2],pi:[_t,[],()=>Math.PI],e:[_t,[],()=>Math.E],"^":[_t,[_t,_t],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[_t,[_t],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))],log2:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[_t,[_t],(o,[n])=>Math.sin(n.evaluate(o))],cos:[_t,[_t],(o,[n])=>Math.cos(n.evaluate(o))],tan:[_t,[_t],(o,[n])=>Math.tan(n.evaluate(o))],asin:[_t,[_t],(o,[n])=>Math.asin(n.evaluate(o))],acos:[_t,[_t],(o,[n])=>Math.acos(n.evaluate(o))],atan:[_t,[_t],(o,[n])=>Math.atan(n.evaluate(o))],min:[_t,Fi(_t),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[_t,Fi(_t),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[_t,[_t],(o,[n])=>Math.abs(n.evaluate(o))],round:[_t,[_t],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[_t,[_t],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[_t,[_t],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[nn,[Rt,cn],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[nn,[cn],(o,[n])=>o.id()===n.value],"filter-type-==":[nn,[Rt],(o,[n])=>o.geometryType()===n.value],"filter-<":[nn,[Rt,cn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[nn,[cn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[nn,[Rt,cn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[nn,[cn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[nn,[Rt,cn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[nn,[cn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[nn,[Rt,cn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[nn,[cn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[nn,[cn],(o,[n])=>n.value in o.properties()],"filter-has-id":[nn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[nn,[we(Rt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[nn,[we(cn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[nn,[Rt,we(cn)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[nn,[Rt,we(cn)],(o,[n,s])=>function(h,p,v,x){for(;v<=x;){const S=v+x>>1;if(p[S]===h)return!0;p[S]>h?x=S-1:v=S+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:nn,overloads:[[[nn,nn],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Fi(nn),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:nn,overloads:[[[nn,nn],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Fi(nn),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[nn,[nn],(o,[n])=>!n.evaluate(o)],"is-supported-script":[nn,[Rt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Rt,[Rt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Rt,[Rt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Rt,Fi(cn),(o,n)=>n.map(s=>bn(s.evaluate(o))).join("")],"resolved-locale":[Rt,[er],(o,[n])=>n.evaluate(o).resolvedLocale()]});class bu{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new lu,this._defaultValue=s?(h=s).type==="color"&&Jn(h.default)?new Vn(0,0,0,0):h.type==="color"?Vn.parse(h.default)||null:h.type==="padding"?xi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?zi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new hr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function yl(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Gs}function _s(o,n){const s=new ci(Gs,ll,[],n?function(p){const v={color:xr,string:Rt,number:_t,enum:Rt,boolean:nn,formatted:ze,padding:oe,resolvedImage:ce,variableAnchorOffsetCollection:_e};return p.type==="array"?we(v[p.value]||cn,p.length):v[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?_u(new bu(h,n)):Ur(s.errors)}class Co{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!ga(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}}class vl{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!ga(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}interpolationFactor(n,s,h){return this.interpolationType?fi.interpolationFactor(this.interpolationType,n,s,h):0}}function _l(o,n){const s=_s(o,n);if(s.result==="error")return s;const h=s.value.expression,p=ul(h);if(!p&&!Zs(n))return Ur([new jt("","data expressions not supported")]);const v=cl(h,["zoom"]);if(!v&&!gc(n))return Ur([new jt("","zoom expressions not supported")]);const x=xa(h);return x||v?x instanceof jt?Ur([x]):x instanceof fi&&!xu(n)?Ur([new jt("",'"interpolate" expressions cannot be used with this property')]):_u(x?new vl(p?"camera":"composite",s.value,x.labels,x instanceof fi?x.interpolation:void 0):new Co(p?"constant":"source",s.value)):Ur([new jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ho{constructor(n,s){this._parameters=n,this._specification=s,at(this,Sn(this._parameters,this._specification))}static deserialize(n){return new Ho(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function xa(o){let n=null;if(o instanceof dl)n=xa(o.result);else if(o instanceof fl){for(const s of o.args)if(n=xa(s),n)break}else(o instanceof Zo||o instanceof fi)&&o.input instanceof hi&&o.input.name==="zoom"&&(n=o);return n instanceof jt||o.eachChild(s=>{const h=xa(s);h instanceof jt?n=h:!n&&h?n=new jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new jt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function mo(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!mo(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ws={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $r(o){if(o==null)return{filter:()=>!0,needGeometry:!1};mo(o)||(o=Xs(o));const n=_s(o,Ws);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:xl(o)}}function xs(o,n){return o<n?-1:o>n?1:0}function xl(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(xl(o[n]))return!0;return!1}function Xs(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Su(o[1],o[2],"=="):n==="!="?ni(Su(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Su(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Xs))):n==="all"?["all"].concat(o.slice(1).map(Xs)):n==="none"?["all"].concat(o.slice(1).map(Xs).map(ni)):n==="in"?wa(o[1],o.slice(2)):n==="!in"?ni(wa(o[1],o.slice(2))):n==="has"?ba(o[1]):n==="!has"?ni(ba(o[1])):n!=="within"||o;var s}function Su(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function wa(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(xs)]]:["filter-in-small",o,["literal",n]]}}function ba(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ni(o){return["!",o]}function Io(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${Io(v)},`;return`${p}]`}const s=Object.keys(o).sort();let h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${Io(o[s[p]])},`;return`${h}}`}function Sa(o){let n="";for(const s of j)n+=`/${Io(o[s])}`;return n}function Ea(o){const n=o.value;return n?[new je(o.key,n,"constants have been deprecated as of v8")]:[]}function Qn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Wo(o){if(Array.isArray(o))return o.map(Wo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Wo(o[s]);return n}return Qn(o)}function ri(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec,S=o.validateSpec;let P=[];const F=Dn(s);if(F!=="object")return[new je(n,s,`object expected, ${F} found`)];for(const W in s){const Q=W.split(".")[0],ae=h[Q]||h["*"];let fe;if(p[Q])fe=p[Q];else if(h[Q])fe=S;else if(p["*"])fe=p["*"];else{if(!h["*"]){P.push(new je(n,s[W],`unknown property "${W}"`));continue}fe=S}P=P.concat(fe({key:(n&&`${n}.`)+W,value:s[W],valueSpec:ae,style:v,styleSpec:x,object:s,objectKey:W,validateSpec:S},s))}for(const W in h)p[W]||h[W].required&&h[W].default===void 0&&s[W]===void 0&&P.push(new je(n,s,`missing required property "${W}"`));return P}function ws(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Dn(n)!=="array")return[new je(v,n,`array expected, ${Dn(n)} found`)];if(s.length&&n.length!==s.length)return[new je(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new je(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};p.$version<7&&(S.function=s.function),Dn(s.value)==="object"&&(S=s.value);let P=[];for(let F=0;F<n.length;F++)P=P.concat(x({array:n,arrayIndex:F,value:n[F],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${v}[${F}]`}));return P}function qs(o){const n=o.key,s=o.value,h=o.valueSpec;let p=Dn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new je(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new je(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new je(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Ki(o){const n=o.valueSpec,s=Qn(o.value.type);let h,p,v,x={};const S=s!=="categorical"&&o.value.property===void 0,P=!S,F=Dn(o.value.stops)==="array"&&Dn(o.value.stops[0])==="array"&&Dn(o.value.stops[0][0])==="object",W=ri({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(fe){if(s==="identity")return[new je(fe.key,fe.value,'identity function may not have a "stops" property')];let me=[];const Ae=fe.value;return me=me.concat(ws({key:fe.key,value:Ae,valueSpec:fe.valueSpec,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,arrayElementValidator:Q})),Dn(Ae)==="array"&&Ae.length===0&&me.push(new je(fe.key,Ae,"array must have at least one stop")),me},default:function(fe){return fe.validateSpec({key:fe.key,value:fe.value,valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec})}}});return s==="identity"&&S&&W.push(new je(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||W.push(new je(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!xu(o.valueSpec)&&W.push(new je(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!Zs(o.valueSpec)?W.push(new je(o.key,o.value,"property functions not supported")):S&&!gc(o.valueSpec)&&W.push(new je(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||W.push(new je(o.key,o.value,'"property" property is required')),W;function Q(fe){let me=[];const Ae=fe.value,Re=fe.key;if(Dn(Ae)!=="array")return[new je(Re,Ae,`array expected, ${Dn(Ae)} found`)];if(Ae.length!==2)return[new je(Re,Ae,`array length 2 expected, length ${Ae.length} found`)];if(F){if(Dn(Ae[0])!=="object")return[new je(Re,Ae,`object expected, ${Dn(Ae[0])} found`)];if(Ae[0].zoom===void 0)return[new je(Re,Ae,"object stop key must have zoom")];if(Ae[0].value===void 0)return[new je(Re,Ae,"object stop key must have value")];if(v&&v>Qn(Ae[0].zoom))return[new je(Re,Ae[0].zoom,"stop zoom values must appear in ascending order")];Qn(Ae[0].zoom)!==v&&(v=Qn(Ae[0].zoom),p=void 0,x={}),me=me.concat(ri({key:`${Re}[0]`,value:Ae[0],valueSpec:{zoom:{}},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{zoom:qs,value:ae}}))}else me=me.concat(ae({key:`${Re}[0]`,value:Ae[0],valueSpec:{},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec},Ae));return yl(Wo(Ae[1]))?me.concat([new je(`${Re}[1]`,Ae[1],"expressions are not allowed in function stops.")]):me.concat(fe.validateSpec({key:`${Re}[1]`,value:Ae[1],valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec}))}function ae(fe,me){const Ae=Dn(fe.value),Re=Qn(fe.value),Ne=fe.value!==null?fe.value:me;if(h){if(Ae!==h)return[new je(fe.key,Ne,`${Ae} stop domain type must match previous stop domain type ${h}`)]}else h=Ae;if(Ae!=="number"&&Ae!=="string"&&Ae!=="boolean")return[new je(fe.key,Ne,"stop domain value must be a number, string, or boolean")];if(Ae!=="number"&&s!=="categorical"){let Je=`number expected, ${Ae} found`;return Zs(n)&&s===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(fe.key,Ne,Je)]}return s!=="categorical"||Ae!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&Ae==="number"&&p!==void 0&&Re<p?[new je(fe.key,Ne,"stop domain values must appear in ascending order")]:(p=Re,s==="categorical"&&Re in x?[new je(fe.key,Ne,"stop domain values must be unique")]:(x[Re]=!0,[])):[new je(fe.key,Ne,`integer expected, found ${Re}`)]}}function Xo(o){const n=(o.expressionContext==="property"?_l:_s)(Wo(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new je(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new je(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ga(s))return[new je(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ga(s))return[new je(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!cl(s,["zoom","feature-state"]))return[new je(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ul(s))return[new je(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ta(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Qn(s))===-1&&p.push(new je(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Qn(s))===-1&&p.push(new je(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function bs(o){return mo(Wo(o.value))?Xo(at({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):wl(o)}function wl(o){const n=o.value,s=o.key;if(Dn(n)!=="array")return[new je(s,n,`array expected, ${Dn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new je(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Ta({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Qn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Qn(n[1])==="$type"&&v.push(new je(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new je(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Dn(n[1]),p!=="string"&&v.push(new je(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=Dn(n[x]),Qn(n[1])==="$type"?v=v.concat(Ta({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new je(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(wl({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Dn(n[1]),n.length!==2?v.push(new je(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new je(`${s}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=Dn(n[1]),n.length!==2?v.push(new je(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new je(`${s}[1]`,n[1],`object expected, ${p} found`))}return v}function Eu(o,n){const s=o.key,h=o.validateSpec,p=o.style,v=o.styleSpec,x=o.value,S=o.objectKey,P=v[`${n}_${o.layerType}`];if(!P)return[];const F=S.match(/^(.*)-transition$/);if(n==="paint"&&F&&P[F[1]]&&P[F[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:p,styleSpec:v});const W=o.valueSpec||P[S];if(!W)return[new je(s,x,`unknown property "${S}"`)];let Q;if(Dn(x)==="string"&&Zs(W)&&!W.tokens&&(Q=/^{([^}]+)}$/.exec(x)))return[new je(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Q[1])} }\`.`)];const ae=[];return o.layerType==="symbol"&&(S==="text-field"&&p&&!p.glyphs&&ae.push(new je(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Jn(Wo(x))&&Qn(x.type)==="identity"&&ae.push(new je(s,x,'"text-font" does not support identity functions'))),ae.concat(h({key:o.key,value:x,valueSpec:W,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:S}))}function Tu(o){return Eu(o,"paint")}function Cu(o){return Eu(o,"layout")}function V(o){let n=[];const s=o.value,h=o.key,p=o.style,v=o.styleSpec;s.type||s.ref||n.push(new je(h,s,'either "type" or "ref" is required'));let x=Qn(s.type);const S=Qn(s.ref);if(s.id){const P=Qn(s.id);for(let F=0;F<o.arrayIndex;F++){const W=p.layers[F];Qn(W.id)===P&&n.push(new je(h,s.id,`duplicate layer id "${s.id}", previously used at line ${W.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&n.push(new je(h,s[F],`"${F}" is prohibited for ref layers`))}),p.layers.forEach(F=>{Qn(F.id)===S&&(P=F)}),P?P.ref?n.push(new je(h,s.ref,"ref cannot reference another ref layer")):x=Qn(P.type):n.push(new je(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const P=p.sources&&p.sources[s.source],F=P&&Qn(P.type);P?F==="vector"&&x==="raster"?n.push(new je(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?n.push(new je(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?n.push(new je(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?n.push(new je(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&P.lineMetrics||n.push(new je(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new je(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new je(h,s.source,`source "${s.source}" not found`))}else n.push(new je(h,s,'missing required property "source"'));return n=n.concat(ri({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:bs,layout:P=>ri({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>Cu(at({layerType:x},F))}}),paint:P=>ri({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>Tu(at({layerType:x},F))}})}})),n}function ge(o){const n=o.value,s=o.key,h=Dn(n);return h!=="string"?[new je(s,n,`string expected, ${h} found`)]:[]}const Ue={promoteId:function({key:o,value:n}){if(Dn(n)==="string")return ge({key:o,value:n});{const s=[];for(const h in n)s.push(...ge({key:`${o}.${h}`,value:n[h]}));return s}}};function it(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style,v=o.validateSpec;if(!n.type)return[new je(s,n,'"type" is required')];const x=Qn(n.type);let S;switch(x){case"vector":case"raster":return S=ri({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Ue,validateSpec:v}),S;case"raster-dem":return S=function(P){var F;const W=(F=P.sourceName)!==null&&F!==void 0?F:"",Q=P.value,ae=P.styleSpec,fe=ae.source_raster_dem,me=P.style;let Ae=[];const Re=Dn(Q);if(Q===void 0)return Ae;if(Re!=="object")return Ae.push(new je("source_raster_dem",Q,`object expected, ${Re} found`)),Ae;const Ne=Qn(Q.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],We=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Qe in Q)!Ne&&Je.includes(Qe)?Ae.push(new je(Qe,Q[Qe],`In "${W}": "${Qe}" is only valid when "encoding" is set to "custom". ${We} encoding found`)):fe[Qe]?Ae=Ae.concat(P.validateSpec({key:Qe,value:Q[Qe],valueSpec:fe[Qe],validateSpec:P.validateSpec,style:me,styleSpec:ae})):Ae.push(new je(Qe,Q[Qe],`unknown property "${Qe}"`));return Ae}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=ri({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:Ue}),n.cluster)for(const P in n.clusterProperties){const[F,W]=n.clusterProperties[P],Q=typeof F=="string"?[F,["accumulated"],["get",P]]:F;S.push(...Xo({key:`${s}.${P}.map`,value:W,validateSpec:v,expressionContext:"cluster-map"})),S.push(...Xo({key:`${s}.${P}.reduce`,value:Q,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return ri({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return ri({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new je(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ta({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:h})}}function zt(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let v=[];const x=Dn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("light",n,`object expected, ${x} found`)]),v;for(const S in n){const P=S.match(/^(.*)-transition$/);v=v.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new je(S,n[S],`unknown property "${S}"`)])}return v}function Tt(o){const n=o.value,s=o.styleSpec,h=s.terrain,p=o.style;let v=[];const x=Dn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("terrain",n,`object expected, ${x} found`)]),v;for(const S in n)v=v.concat(h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new je(S,n[S],`unknown property "${S}"`)]);return v}function Zt(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const p=[],v=[];for(const x in s)s[x].id&&p.includes(s[x].id)&&n.push(new je(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new je(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(ri({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return ge({key:h,value:s})}const Xt={"*":()=>[],array:ws,boolean:function(o){const n=o.value,s=o.key,h=Dn(n);return h!=="boolean"?[new je(s,n,`boolean expected, ${h} found`)]:[]},number:qs,color:function(o){const n=o.key,s=o.value,h=Dn(s);return h!=="string"?[new je(n,s,`color expected, ${h} found`)]:Vn.parse(String(s))?[]:[new je(n,s,`color expected, "${s}" found`)]},constants:Ea,enum:Ta,filter:bs,function:Ki,layer:V,object:ri,source:it,light:zt,terrain:Tt,string:ge,formatted:function(o){return ge(o).length===0?[]:Xo(o)},resolvedImage:function(o){return ge(o).length===0?[]:Xo(o)},padding:function(o){const n=o.key,s=o.value;if(Dn(s)==="array"){if(s.length<1||s.length>4)return[new je(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return p}return qs({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=Dn(s),p=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new je(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Ta({key:`${n}[${x}]`,value:s[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(ws({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:Zt};function fn(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=fn,s.expression&&Jn(Qn(n))?Ki(o):s.expression&&yl(Wo(n))?Xo(o):s.type&&Xt[s.type]?Xt[s.type](o):ri(at({},o,{valueSpec:s.type?h[s.type]:s}))}function Gn(o){const n=o.value,s=o.key,h=ge(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new je(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new je(s,n,'"glyphs" url must include a "{range}" token'))),h}function En(o,n=se){let s=[];return s=s.concat(fn({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:fn,objectElementValidators:{glyphs:Gn,"*":()=>[]}})),o.constants&&(s=s.concat(Ea({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:fn}))),sr(s)}function Nn(o){return function(n){return o({...n,validateSpec:fn})}}function sr(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function ar(o){return function(...n){return sr(o.apply(this,n))}}En.source=ar(Nn(it)),En.sprite=ar(Nn(Zt)),En.glyphs=ar(Nn(Gn)),En.light=ar(Nn(zt)),En.terrain=ar(Nn(Tt)),En.layer=ar(Nn(V)),En.filter=ar(Nn(bs)),En.paintProperty=ar(Nn(Tu)),En.layoutProperty=ar(Nn(Cu));const tr=En,qo=tr.light,Yi=tr.paintProperty,Ko=tr.layoutProperty;function Ca(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new on(new Error(h.message))),s=!0;return s}class Ao{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const F=x[3+P],W=x[3+P+1];p.push(F===W?null:x.subarray(F,W))}const S=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,p,v){this._forEachCell(s,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,v,x){this.cells[v].push(x)}query(n,s,h,p,v){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=p&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,s,h,p,this._queryCell,P,{},v),P}}_queryCell(n,s,h,p,v,x,S,P){const F=this.cells[v];if(F!==null){const W=this.keys,Q=this.bboxes;for(let ae=0;ae<F.length;ae++){const fe=F[ae];if(S[fe]===void 0){const me=4*fe;(P?P(Q[me+0],Q[me+1],Q[me+2],Q[me+3]):n<=Q[me+2]&&s<=Q[me+3]&&h>=Q[me+0]&&p>=Q[me+1])?(S[fe]=!0,x.push(W[fe])):S[fe]=!1}}}}_forEachCell(n,s,h,p,v,x,S,P){const F=this._convertToCellCoord(n),W=this._convertToCellCoord(s),Q=this._convertToCellCoord(h),ae=this._convertToCellCoord(p);for(let fe=F;fe<=Q;fe++)for(let me=W;me<=ae;me++){const Ae=this.d*me+fe;if((!P||P(this._convertFromCellCoord(fe),this._convertFromCellCoord(me),this._convertFromCellCoord(fe+1),this._convertFromCellCoord(me+1)))&&v.call(this,n,s,h,p,Ae,x,S,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const S=n[x];p[3+x]=v,p.set(S,v),v+=S.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Ao(n.buffer)}}const Oi={};function Bt(o,n,s={}){if(Oi[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Oi[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",Ao),Bt("Color",Vn),Bt("Error",Error),Bt("AJAXError",ct),Bt("ResolvedImage",Nr),Bt("StylePropertyFunction",Ho),Bt("StyleExpression",bu,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",vl),Bt("ZoomConstantExpression",Co),Bt("CompoundExpression",hi,{omit:["_evaluate"]});for(const o in Gs)Gs[o]._classRegistryKey||Bt(`Expression_${o}`,Gs[o]);function yc(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Ks(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(yc(o)||ye(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Ks(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Oi[h])throw new Error(`${h} is not registered.`);const p=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Oi[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=Oi[h].shallow.indexOf(v)>=0?x:Ks(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function bl(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||yc(o)||ye(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(bl);if(typeof o=="object"){const n=o.$name||"Object";if(!Oi[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Oi[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=Oi[n].shallow.indexOf(p)>=0?v:bl(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class jd{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Ft={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Oh(o){for(const n of o)if(jh(n.charCodeAt(0)))return!0;return!1}function Rh(o){for(const n of o)if(!Zg(n.charCodeAt(0)))return!1;return!0}function Zg(o){return!(Ft.Arabic(o)||Ft["Arabic Supplement"](o)||Ft["Arabic Extended-A"](o)||Ft["Arabic Presentation Forms-A"](o)||Ft["Arabic Presentation Forms-B"](o))}function jh(o){return!(o!==746&&o!==747&&(o<4352||!(Ft["Bopomofo Extended"](o)||Ft.Bopomofo(o)||Ft["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ft["CJK Compatibility Ideographs"](o)||Ft["CJK Compatibility"](o)||Ft["CJK Radicals Supplement"](o)||Ft["CJK Strokes"](o)||!(!Ft["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Ft["CJK Unified Ideographs Extension A"](o)||Ft["CJK Unified Ideographs"](o)||Ft["Enclosed CJK Letters and Months"](o)||Ft["Hangul Compatibility Jamo"](o)||Ft["Hangul Jamo Extended-A"](o)||Ft["Hangul Jamo Extended-B"](o)||Ft["Hangul Jamo"](o)||Ft["Hangul Syllables"](o)||Ft.Hiragana(o)||Ft["Ideographic Description Characters"](o)||Ft.Kanbun(o)||Ft["Kangxi Radicals"](o)||Ft["Katakana Phonetic Extensions"](o)||Ft.Katakana(o)&&o!==12540||!(!Ft["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Ft["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ft["Unified Canadian Aboriginal Syllabics"](o)||Ft["Unified Canadian Aboriginal Syllabics Extended"](o)||Ft["Vertical Forms"](o)||Ft["Yijing Hexagram Symbols"](o)||Ft["Yi Syllables"](o)||Ft["Yi Radicals"](o))))}function Dd(o){return!(jh(o)||function(n){return!!(Ft["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ft["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ft["Letterlike Symbols"](n)||Ft["Number Forms"](n)||Ft["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ft["Control Pictures"](n)&&n!==9251||Ft["Optical Character Recognition"](n)||Ft["Enclosed Alphanumerics"](n)||Ft["Geometric Shapes"](n)||Ft["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ft["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ft["CJK Symbols and Punctuation"](n)||Ft.Katakana(n)||Ft["Private Use Area"](n)||Ft["CJK Compatibility Forms"](n)||Ft["Small Form Variants"](n)||Ft["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Bd(o){return o>=1424&&o<=2303||Ft["Arabic Presentation Forms-A"](o)||Ft["Arabic Presentation Forms-B"](o)}function Nd(o,n){return!(!n&&Bd(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ft.Khmer(o))}function Hg(o){for(const n of o)if(Bd(n.charCodeAt(0)))return!0;return!1}const Dh="deferred",Bh="loading",Nh="loaded";let Uh=null,Ri="unavailable",Ys=null;const Iu=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Ri="error"),Uh&&Uh(o)};function $h(){Au.fire(new yn("pluginStateChange",{pluginStatus:Ri,pluginURL:Ys}))}const Au=new gn,Vh=function(){return Ri},Ud=function(){if(Ri!==Dh||!Ys)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ri=Bh,$h(),Ys&&Gt({url:Ys},o=>{o?Iu(o):(Ri=Nh,$h())})},Ji={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ri===Nh||Ji.applyArabicShaping!=null,isLoading:()=>Ri===Bh,setState(o){if(!ne())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ri=o.pluginStatus,Ys=o.pluginURL},isParsed(){if(!ne())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ji.applyArabicShaping!=null&&Ji.processBidirectionalText!=null&&Ji.processStyledBidirectionalText!=null},getPluginURL(){if(!ne())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ys}};class lr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jd,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!Nd(p.charCodeAt(0),h))return!1;return!0}(n,Ji.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class vc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(Jn(h))return new Ho(h,p);if(yl(h)){const v=_l(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return p.type==="color"&&typeof h=="string"?v=Vn.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=zi.parse(h)):v=xi.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Gh{constructor(n){this.property=n,this.value=new vc(n,void 0)}transitioned(n,s){return new Vd(this.property,this.value,s,k({},n.transition,this.transition),n.now)}untransitioned(){return new Vd(this.property,this.value,null,{},0)}}class $d{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ve(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Gh(this._values[n].property)),this._values[n].value=new vc(this._values[n].property,s===null?void 0:ve(s))}getTransition(n){return ve(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Gh(this._values[n].property)),this._values[n].transition=ve(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new Gd(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new Gd(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Vd{constructor(n,s,h,p,v){this.property=n,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const F=P*P,W=F*P;return 4*(P<.5?W:3*(P-F)+W-.75)}(S))}}return v}}class Gd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new _c(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Wg{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ve(this._values[n].value)}setValue(n,s){this._values[n]=new vc(this._values[n].property,s===null?void 0:ve(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new _c(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}}class bi{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class _c{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const p=wi[this.specification.type];return p?p(n,s,h):n}}class sn{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new bi(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new bi(this,{kind:"constant",value:void 0},n.parameters);const p=wi[this.specification.type];if(p){const v=p(n.value.value,s.value.value,h);return new bi(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,p,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,p,v,x)}}class Pu extends sn{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new bi(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,s);return new bi(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new bi(this,{kind:"constant",value:v},s)}return new bi(this,n.expression,s)}evaluate(n,s,h,p,v,x){if(n.kind==="source"){const S=n.evaluate(s,h,p,v,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Zh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new lr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new lr(Math.floor(s.zoom),s)),n.expression.evaluate(new lr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Hh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class Cr{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new vc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Gh(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}Bt("DataDrivenProperty",sn),Bt("DataConstantProperty",qt),Bt("CrossFadedDataDrivenProperty",Pu),Bt("CrossFadedProperty",Zh),Bt("ColorRampProperty",Hh);const Wh="-transition";class go extends gn{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Wg(s.layout)),s.paint)){this._transitionablePaint=new $d(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new _c(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Ko,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Wh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Yi,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Wh))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),S=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,S,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,v={}){return(!v||v.validate!==!1)&&Ca(this,n.call(tr,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof bi&&Zs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Zd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ia{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function pr(o,n=1){let s=0,h=0;return{members:o.map(p=>{const v=Zd[p.type].BYTES_PER_ELEMENT,x=s=Sl(s,Math.max(n,v)),S=p.components||1;return h=Math.max(h,v),s+=v*S,{name:p.name,type:p.type,components:S,offset:x}}),size:Sl(s,Math.max(h,n)),alignment:n}}function Sl(o,n){return Math.ceil(o/n)*n}class ku extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}ku.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",ku);class Mu extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,n}}Mu.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",Mu);class Aa extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,n}}Aa.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",Aa);class Xh extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,S){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=S,n}}Xh.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",Xh);class qh extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,S){const P=4*n,F=8*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[F+4]=p,this.uint8[F+5]=v,this.uint8[F+6]=x,this.uint8[F+7]=S,n}}qh.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",qh);class El extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}El.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",El);class Kh extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F,W){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,s,h,p,v,x,S,P,F,W)}emplace(n,s,h,p,v,x,S,P,F,W,Q){const ae=10*n;return this.uint16[ae+0]=s,this.uint16[ae+1]=h,this.uint16[ae+2]=p,this.uint16[ae+3]=v,this.uint16[ae+4]=x,this.uint16[ae+5]=S,this.uint16[ae+6]=P,this.uint16[ae+7]=F,this.uint16[ae+8]=W,this.uint16[ae+9]=Q,n}}Kh.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",Kh);class Yh extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F,W,Q,ae){const fe=this.length;return this.resize(fe+1),this.emplace(fe,n,s,h,p,v,x,S,P,F,W,Q,ae)}emplace(n,s,h,p,v,x,S,P,F,W,Q,ae,fe){const me=12*n;return this.int16[me+0]=s,this.int16[me+1]=h,this.int16[me+2]=p,this.int16[me+3]=v,this.uint16[me+4]=x,this.uint16[me+5]=S,this.uint16[me+6]=P,this.uint16[me+7]=F,this.int16[me+8]=W,this.int16[me+9]=Q,this.int16[me+10]=ae,this.int16[me+11]=fe,n}}Yh.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",Yh);class Un extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}Un.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",Un);class y extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}y.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",y);class r extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F){const W=this.length;return this.resize(W+1),this.emplace(W,n,s,h,p,v,x,S,P,F)}emplace(n,s,h,p,v,x,S,P,F,W){const Q=10*n,ae=5*n;return this.int16[Q+0]=s,this.int16[Q+1]=h,this.int16[Q+2]=p,this.int16[Q+3]=v,this.int16[Q+4]=x,this.int16[Q+5]=S,this.uint32[ae+3]=P,this.uint16[Q+8]=F,this.uint16[Q+9]=W,n}}r.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",r);class u extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,S){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=S,n}}u.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",u);class f extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,p,v)}emplace(n,s,h,p,v,x){const S=4*n,P=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=p,this.int16[P+6]=v,this.int16[P+7]=x,n}}f.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",f);class m extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=p,this.float32[S+2]=v,n}}m.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",m);class _ extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}_.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",_);class T extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne){const Je=this.length;return this.resize(Je+1),this.emplace(Je,n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne)}emplace(n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je){const We=24*n,Qe=12*n,rt=48*n;return this.int16[We+0]=s,this.int16[We+1]=h,this.uint16[We+2]=p,this.uint16[We+3]=v,this.uint32[Qe+2]=x,this.uint32[Qe+3]=S,this.uint32[Qe+4]=P,this.uint16[We+10]=F,this.uint16[We+11]=W,this.uint16[We+12]=Q,this.float32[Qe+7]=ae,this.float32[Qe+8]=fe,this.uint8[rt+36]=me,this.uint8[rt+37]=Ae,this.uint8[rt+38]=Re,this.uint32[Qe+10]=Ne,this.int16[We+22]=Je,n}}T.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class I extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je,We,Qe,rt,gt,Ot,Vt,Lt,Mt,Ct,Nt){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je,We,Qe,rt,gt,Ot,Vt,Lt,Mt,Ct,Nt)}emplace(n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je,We,Qe,rt,gt,Ot,Vt,Lt,Mt,Ct,Nt,Pt){const bt=32*n,tn=16*n;return this.int16[bt+0]=s,this.int16[bt+1]=h,this.int16[bt+2]=p,this.int16[bt+3]=v,this.int16[bt+4]=x,this.int16[bt+5]=S,this.int16[bt+6]=P,this.int16[bt+7]=F,this.uint16[bt+8]=W,this.uint16[bt+9]=Q,this.uint16[bt+10]=ae,this.uint16[bt+11]=fe,this.uint16[bt+12]=me,this.uint16[bt+13]=Ae,this.uint16[bt+14]=Re,this.uint16[bt+15]=Ne,this.uint16[bt+16]=Je,this.uint16[bt+17]=We,this.uint16[bt+18]=Qe,this.uint16[bt+19]=rt,this.uint16[bt+20]=gt,this.uint16[bt+21]=Ot,this.uint16[bt+22]=Vt,this.uint32[tn+12]=Lt,this.float32[tn+13]=Mt,this.float32[tn+14]=Ct,this.uint16[bt+30]=Nt,this.uint16[bt+31]=Pt,n}}I.prototype.bytesPerElement=64,Bt("StructArrayLayout8i15ui1ul2f2ui64",I);class z extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}z.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",z);class B extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}B.prototype.bytesPerElement=12,Bt("StructArrayLayout1ui2f12",B);class X extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}X.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",X);class K extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}K.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",K);class he extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}he.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",he);class Me extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,n}}Me.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",Me);class ke extends Ia{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}ke.prototype.size=20;class Fe extends r{get(n){return new ke(this,n)}}Bt("CollisionBoxArray",Fe);class Ie extends Ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ie.prototype.size=48;class Ke extends T{get(n){return new Ie(this,n)}}Bt("PlacedSymbolArray",Ke);class tt extends Ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}tt.prototype.size=64;class De extends I{get(n){return new tt(this,n)}}Bt("SymbolInstanceArray",De);class Ye extends z{getoffsetX(n){return this.float32[1*n+0]}}Bt("GlyphOffsetArray",Ye);class ot extends Mu{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Bt("SymbolLineVertexArray",ot);class st extends Ia{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}st.prototype.size=12;class dt extends B{get(n){return new st(this,n)}}Bt("TextAnchorOffsetArray",dt);class wt extends Ia{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}wt.prototype.size=8;class xt extends X{get(n){return new wt(this,n)}}Bt("FeatureIndexArray",xt);class Et extends ku{}class $t extends ku{}class Pn extends ku{}class kt extends Xh{}class an extends qh{}class Ht extends El{}class Wn extends Kh{}class An extends Yh{}class _n extends Un{}class kn extends y{}class br extends u{}class nr extends m{}class ii extends _{}class Vr extends K{}const Ir=pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qi}=Ir;class ur{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let v=this.segments[this.segments.length-1];return n>ur.MAX_VERTEX_ARRAY_LENGTH&&be(`Max vertices per segment is ${ur.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>ur.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new ur([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Yo(o,n){return 256*(o=N(Math.floor(o),0,255))+N(Math.floor(n),0,255)}ur.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",ur);const Jo=pr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Js={exports:{}},Pa={exports:{}};Pa.exports=function(o,n){var s,h,p,v,x,S,P,F;for(h=o.length-(s=3&o.length),p=n,x=3432918353,S=461845907,F=0;F<h;)P=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,p=27492+(65535&(v=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt(F+2))<<16;case 2:P^=(255&o.charCodeAt(F+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(F)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Tl=Pa.exports,di={exports:{}};di.exports=function(o,n){for(var s,h=o.length,p=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var oi=Tl,Si=di.exports;Js.exports=oi,Js.exports.murmur3=oi,Js.exports.murmur2=Si;var ka=w(Js.exports);class Sr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(Gr(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Gr(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=s?p=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return ji(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new Sr;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Gr(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ka(String(o))}function ji(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;Er(o,v,x),Er(n,3*v,3*x),Er(n,3*v+1,3*x+1),Er(n,3*v+2,3*x+2)}x-s<h-x?(ji(o,n,s,x),s=x+1):(ji(o,n,x+1,h),h=x)}}function Er(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Bt("FeaturePositionMap",Sr);class Ma{constructor(n,s){this.gl=n.gl,this.location=s}}class xc extends Ma{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Hd extends Ma{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Wd extends Ma{constructor(n,s){super(n,s),this.current=Vn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Xg=new Float32Array(16);function Jh(o){return[Yo(255*o.r,255*o.g),Yo(255*o.b,255*o.a)]}class Qo{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Wd(n,s):new xc(n,s)}}class za{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Hd(n,s):new xc(n,s)}}class es{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new lr(0),s,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const p=Jh(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class yo{constructor(n,s,h,p,v,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,p,v){const x=this.expression.evaluate(new lr(this.zoom),s,{},p,[],v),S=this.expression.evaluate(new lr(this.zoom+1),s,{},p,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,S)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,p){if(this.type==="color"){const v=Jh(h),x=Jh(p);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=N(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new xc(n,s)}}class ts{constructor(n,s,h,p,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:v,mid:x,max:S}=h,P=p[v],F=p[x],W=p[S];if(P&&F&&W)for(let Q=n;Q<s;Q++)this.zoomInPaintVertexArray.emplace(Q,F.tl[0],F.tl[1],F.br[0],F.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],F.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(Q,F.tl[0],F.tl[1],F.br[0],F.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],F.pixelRatio,W.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Jo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Jo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Qh{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof bi&&Zs(x.property.specification)))continue;const S=cA(v,n.type),P=x.value,F=x.property.specification.type,W=x.property.useIntegerZoom,Q=x.property.specification["property-type"],ae=Q==="cross-faded"||Q==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=ae?new za(P.value,S):new Qo(P.value,S,F),p.push(`/u_${v}`);else if(P.kind==="source"||ae){const fe=hx(v,F,"source");this.binders[v]=ae?new ts(P,F,W,s,fe,n.id):new es(P,S,F,fe),p.push(`/a_${v}`)}else{const fe=hx(v,F,"composite");this.binders[v]=new yo(P,S,F,W,s,fe),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof es||s instanceof yo?s.maxValue:0}populatePaintArrays(n,s,h,p,v){for(const x in this.binders){const S=this.binders[x];(S instanceof es||S instanceof yo||S instanceof ts)&&S.populatePaintArray(n,s,h,p,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof za&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,v){let x=!1;for(const S in n){const P=s.getPositions(S);for(const F of P){const W=h.feature(F.index);for(const Q in this.binders){const ae=this.binders[Q];if((ae instanceof es||ae instanceof yo||ae instanceof ts)&&ae.expression.isStateDependent===!0){const fe=p.paint.get(Q);ae.expression=fe.value,ae.updatePaintArray(F.start,F.end,W,n[S],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Qo||h instanceof za)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof es||h instanceof yo)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof ts)for(let p=0;p<Jo.members.length;p++)n.push(Jo.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Qo||h instanceof za||h instanceof yo)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Qo||v instanceof za||v instanceof yo){for(const x of v.uniformNames)if(s[x]){const S=v.getBinding(n,s[x],x);h.push({name:x,property:p,binding:S})}}}return h}setUniforms(n,s,h,p){for(const{name:v,property:x,binding:S}of s)this.binders[x].setUniform(S,p,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof ts){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof es||h instanceof yo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof es||h instanceof yo||h instanceof ts)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof es||s instanceof yo||s instanceof ts)&&s.destroy()}}}class Ss{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new Qh(p,s,h);this.needsUpload=!1,this._featureMap=new Sr,this._bufferOffset=0}populatePaintArrays(n,s,h,p,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,p,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function cA(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function hx(o,n,s){const h={color:{source:El,composite:Me},number:{source:z,composite:El}},p=function(v){return{"line-pattern":{source:Wn,composite:Wn},"fill-pattern":{source:Wn,composite:Wn},"fill-extrusion-pattern":{source:Wn,composite:Wn}}[v]}(o);return p&&p[s]||h[n][s]}Bt("ConstantBinder",Qo),Bt("CrossFadedConstantBinder",za),Bt("SourceExpressionBinder",es),Bt("CrossFadedCompositeBinder",ts),Bt("CompositeExpressionBinder",yo),Bt("ProgramConfiguration",Qh,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",Ss);const Fr=8192,qg=Math.pow(2,14)-1,fx=-qg-1;function zu(o){const n=Fr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let v=0;v<p.length;v++){const x=p[v],S=Math.round(x.x*n),P=Math.round(x.y*n);x.x=N(S,fx,qg),x.y=N(P,fx,qg),(S<x.x||S>x.x+1||P<x.y||P>x.y+1)&&be("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Lu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?zu(o):[]}}function Xd(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class Kg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.indexArray=new ii,this.segments=new ur,this.programConfigurations=new Ss(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],v=[];let x=null,S=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:P,id:F,index:W,sourceLayerIndex:Q}of n){const ae=this.layers[0]._featureFilter.needGeometry,fe=Lu(P,ae);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),fe,h))continue;const me=S?x.evaluate(fe,{},h):void 0,Ae={id:F,properties:P.properties,type:P.type,sourceLayerIndex:Q,index:W,geometry:ae?fe.geometry:zu(P),patterns:{},sortKey:me};v.push(Ae)}S&&v.sort((P,F)=>P.sortKey-F.sortKey);for(const P of v){const{geometry:F,index:W,sourceLayerIndex:Q}=P,ae=n[W].feature;this.addFeature(P,F,W,h),s.featureIndex.insert(ae,F,W,Q,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Qi),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const v of s)for(const x of v){const S=x.x,P=x.y;if(S<0||S>=Fr||P<0||P>=Fr)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),W=F.vertexLength;Xd(this.layoutVertexArray,S,P,-1,-1),Xd(this.layoutVertexArray,S,P,1,-1),Xd(this.layoutVertexArray,S,P,1,1),Xd(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function dx(o,n){for(let s=0;s<o.length;s++)if(wc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(wc(o,n[s]))return!0;return!!Yg(o,n)}function hA(o,n,s){return!!wc(o,n)||!!Jg(n,o,s)}function px(o,n){if(o.length===1)return gx(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(wc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(gx(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Yg(o,n[s]))return!0;return!1}function fA(o,n,s){if(o.length>1){if(Yg(o,n))return!0;for(let h=0;h<n.length;h++)if(Jg(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Jg(o[h],n,s))return!0;return!1}function Yg(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let v=0;v<n.length-1;v++)if(dA(h,p,n[v],n[v+1]))return!0}return!1}function dA(o,n,s,h){return te(o,s,h)!==te(n,s,h)&&te(o,n,s)!==te(o,n,h)}function Jg(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(mx(o,n[p-1],n[p])<h)return!0;return!1}function mx(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function gx(o,n){let s,h,p,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,P=s.length-1;S<s.length;P=S++)h=s[S],p=s[P],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function wc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function pA(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=te(o,n,s[0]);return v!==te(o,n,s[1])||v!==te(o,n,s[2])||v!==te(o,n,s[3])}function ef(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function qd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Kd(o,n,s,h,p){if(!n[0]&&!n[1])return o;const v=M.convert(n)._mult(p);s==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(v));return x}let yx,vx;Bt("CircleBucket",Kg,{omit:["layers"]});var mA={get paint(){return vx=vx||new Cr({"circle-radius":new sn(se.paint_circle["circle-radius"]),"circle-color":new sn(se.paint_circle["circle-color"]),"circle-blur":new sn(se.paint_circle["circle-blur"]),"circle-opacity":new sn(se.paint_circle["circle-opacity"]),"circle-translate":new qt(se.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(se.paint_circle["circle-stroke-opacity"])})},get layout(){return yx=yx||new Cr({"circle-sort-key":new sn(se.layout_circle["circle-sort-key"])})}},Di=1e-6,bc=typeof Float32Array<"u"?Float32Array:Array;function Qg(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function _x(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3],S=n[4],P=n[5],F=n[6],W=n[7],Q=n[8],ae=n[9],fe=n[10],me=n[11],Ae=n[12],Re=n[13],Ne=n[14],Je=n[15],We=s[0],Qe=s[1],rt=s[2],gt=s[3];return o[0]=We*h+Qe*S+rt*Q+gt*Ae,o[1]=We*p+Qe*P+rt*ae+gt*Re,o[2]=We*v+Qe*F+rt*fe+gt*Ne,o[3]=We*x+Qe*W+rt*me+gt*Je,o[4]=(We=s[4])*h+(Qe=s[5])*S+(rt=s[6])*Q+(gt=s[7])*Ae,o[5]=We*p+Qe*P+rt*ae+gt*Re,o[6]=We*v+Qe*F+rt*fe+gt*Ne,o[7]=We*x+Qe*W+rt*me+gt*Je,o[8]=(We=s[8])*h+(Qe=s[9])*S+(rt=s[10])*Q+(gt=s[11])*Ae,o[9]=We*p+Qe*P+rt*ae+gt*Re,o[10]=We*v+Qe*F+rt*fe+gt*Ne,o[11]=We*x+Qe*W+rt*me+gt*Je,o[12]=(We=s[12])*h+(Qe=s[13])*S+(rt=s[14])*Q+(gt=s[15])*Ae,o[13]=We*p+Qe*P+rt*ae+gt*Re,o[14]=We*v+Qe*F+rt*fe+gt*Ne,o[15]=We*x+Qe*W+rt*me+gt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var tf,gA=_x;function Yd(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*x,o[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*x,o[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*x,o[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*x,o}tf=new bc(4),bc!=Float32Array&&(tf[0]=0,tf[1]=0,tf[2]=0,tf[3]=0);class yA extends go{constructor(n){super(n,mA)}createBucket(n){return new Kg(n)}queryRadius(n){const s=n;return ef("circle-radius",this,s)+ef("circle-stroke-width",this,s)+qd(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,p,v,x,S,P){const F=Kd(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),W=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),Q=this.paint.get("circle-pitch-alignment")==="map",ae=Q?F:function(me,Ae){return me.map(Re=>xx(Re,Ae))}(F,P),fe=Q?W*S:W;for(const me of p)for(const Ae of me){const Re=Q?Ae:xx(Ae,P);let Ne=fe;const Je=Yd([],[Ae.x,Ae.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=Je[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=x.cameraToCenterDistance/Je[3]),hA(ae,Re,Ne))return!0}return!1}}function xx(o,n){const s=Yd([],[o.x,o.y,0,1],n);return new M(s[0]/s[3],s[1]/s[3])}class wx extends Kg{}let bx;Bt("HeatmapBucket",wx,{omit:["layers"]});var vA={get paint(){return bx=bx||new Cr({"heatmap-radius":new sn(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hh(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(se.paint_heatmap["heatmap-opacity"])})}};function ey(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function Sx(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=ey({},{width:n,height:s},h);ty(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function ty(o,n,s,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<p.height;P++){const F=((s.y+P)*o.width+s.x)*v,W=((h.y+P)*n.width+h.x)*v;for(let Q=0;Q<p.width*v;Q++)S[W+Q]=x[F+Q]}return n}class nf{constructor(n,s){ey(this,n,1,s)}resize(n){Sx(this,n,1)}clone(){return new nf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){ty(n,s,h,p,v,1)}}class Po{constructor(n,s){ey(this,n,4,s)}resize(n){Sx(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Po({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){ty(n,s,h,p,v,4)}}function Ex(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new Po({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,S,P)=>{n[o.evaluationKey]=P;const F=o.expression.evaluate(n);p.data[x+S+0]=Math.floor(255*F.r/F.a),p.data[x+S+1]=Math.floor(255*F.g/F.a),p.data[x+S+2]=Math.floor(255*F.b/F.a),p.data[x+S+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let P=0,F=0;P<s;P++,F+=4){const W=P/(s-1),{start:Q,end:ae}=o.clips[x];v(S,F,Q*(1-W)+ae*W)}else for(let x=0,S=0;x<s;x++,S+=4)v(0,S,x/(s-1));return p}Bt("AlphaImage",nf),Bt("RGBAImage",Po);class _A extends go{createBucket(n){return new wx(n)}constructor(n){super(n,vA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ex({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Tx;var xA={get paint(){return Tx=Tx||new Cr({"hillshade-illumination-direction":new qt(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(se.paint_hillshade["hillshade-accent-color"])})}};class wA extends go{constructor(n){super(n,xA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const bA=pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:SA}=bA;var ny={exports:{}};function Jd(o,n,s){s=s||2;var h,p,v,x,S,P,F,W=n&&n.length,Q=W?n[0]*s:o.length,ae=Cx(o,0,Q,s,!0),fe=[];if(!ae||ae.next===ae.prev)return fe;if(W&&(ae=function(Ae,Re,Ne,Je){var We,Qe,rt,gt=[];for(We=0,Qe=Re.length;We<Qe;We++)(rt=Cx(Ae,Re[We]*Je,We<Qe-1?Re[We+1]*Je:Ae.length,Je,!1))===rt.next&&(rt.steiner=!0),gt.push(MA(rt));for(gt.sort(AA),We=0;We<gt.length;We++)Ne=PA(gt[We],Ne);return Ne}(o,n,ae,s)),o.length>80*s){h=v=o[0],p=x=o[1];for(var me=s;me<Q;me+=s)(S=o[me])<h&&(h=S),(P=o[me+1])<p&&(p=P),S>v&&(v=S),P>x&&(x=P);F=(F=Math.max(v-h,x-p))!==0?32767/F:0}return rf(ae,fe,s,h,p,F,0),fe}function Cx(o,n,s,h,p){var v,x;if(p===oy(o,n,s,h)>0)for(v=n;v<s;v+=h)x=Px(v,o[v],o[v+1],x);else for(v=s-h;v>=n;v-=h)x=Px(v,o[v],o[v+1],x);return x&&Qd(x,x.next)&&(sf(x),x=x.next),x}function Fu(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!Qd(h,h.next)&&Ar(h.prev,h,h.next)!==0)h=h.next;else{if(sf(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function rf(o,n,s,h,p,v,x){if(o){!x&&v&&function(W,Q,ae,fe){var me=W;do me.z===0&&(me.z=ry(me.x,me.y,Q,ae,fe)),me.prevZ=me.prev,me.nextZ=me.next,me=me.next;while(me!==W);me.prevZ.nextZ=null,me.prevZ=null,function(Ae){var Re,Ne,Je,We,Qe,rt,gt,Ot,Vt=1;do{for(Ne=Ae,Ae=null,Qe=null,rt=0;Ne;){for(rt++,Je=Ne,gt=0,Re=0;Re<Vt&&(gt++,Je=Je.nextZ);Re++);for(Ot=Vt;gt>0||Ot>0&&Je;)gt!==0&&(Ot===0||!Je||Ne.z<=Je.z)?(We=Ne,Ne=Ne.nextZ,gt--):(We=Je,Je=Je.nextZ,Ot--),Qe?Qe.nextZ=We:Ae=We,We.prevZ=Qe,Qe=We;Ne=Je}Qe.nextZ=null,Vt*=2}while(rt>1)}(me)}(o,h,p,v);for(var S,P,F=o;o.prev!==o.next;)if(S=o.prev,P=o.next,v?TA(o,h,p,v):EA(o))n.push(S.i/s|0),n.push(o.i/s|0),n.push(P.i/s|0),sf(o),o=P.next,F=P.next;else if((o=P)===F){x?x===1?rf(o=CA(Fu(o),n,s),n,s,h,p,v,2):x===2&&IA(o,n,s,h,p,v):rf(Fu(o),n,s,h,p,v,1);break}}}function EA(o){var n=o.prev,s=o,h=o.next;if(Ar(n,s,h)>=0)return!1;for(var p=n.x,v=s.x,x=h.x,S=n.y,P=s.y,F=h.y,W=p<v?p<x?p:x:v<x?v:x,Q=S<P?S<F?S:F:P<F?P:F,ae=p>v?p>x?p:x:v>x?v:x,fe=S>P?S>F?S:F:P>F?P:F,me=h.next;me!==n;){if(me.x>=W&&me.x<=ae&&me.y>=Q&&me.y<=fe&&Sc(p,S,v,P,x,F,me.x,me.y)&&Ar(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function TA(o,n,s,h){var p=o.prev,v=o,x=o.next;if(Ar(p,v,x)>=0)return!1;for(var S=p.x,P=v.x,F=x.x,W=p.y,Q=v.y,ae=x.y,fe=S<P?S<F?S:F:P<F?P:F,me=W<Q?W<ae?W:ae:Q<ae?Q:ae,Ae=S>P?S>F?S:F:P>F?P:F,Re=W>Q?W>ae?W:ae:Q>ae?Q:ae,Ne=ry(fe,me,n,s,h),Je=ry(Ae,Re,n,s,h),We=o.prevZ,Qe=o.nextZ;We&&We.z>=Ne&&Qe&&Qe.z<=Je;){if(We.x>=fe&&We.x<=Ae&&We.y>=me&&We.y<=Re&&We!==p&&We!==x&&Sc(S,W,P,Q,F,ae,We.x,We.y)&&Ar(We.prev,We,We.next)>=0||(We=We.prevZ,Qe.x>=fe&&Qe.x<=Ae&&Qe.y>=me&&Qe.y<=Re&&Qe!==p&&Qe!==x&&Sc(S,W,P,Q,F,ae,Qe.x,Qe.y)&&Ar(Qe.prev,Qe,Qe.next)>=0))return!1;Qe=Qe.nextZ}for(;We&&We.z>=Ne;){if(We.x>=fe&&We.x<=Ae&&We.y>=me&&We.y<=Re&&We!==p&&We!==x&&Sc(S,W,P,Q,F,ae,We.x,We.y)&&Ar(We.prev,We,We.next)>=0)return!1;We=We.prevZ}for(;Qe&&Qe.z<=Je;){if(Qe.x>=fe&&Qe.x<=Ae&&Qe.y>=me&&Qe.y<=Re&&Qe!==p&&Qe!==x&&Sc(S,W,P,Q,F,ae,Qe.x,Qe.y)&&Ar(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.nextZ}return!0}function CA(o,n,s){var h=o;do{var p=h.prev,v=h.next.next;!Qd(p,v)&&Ix(p,h,h.next,v)&&of(p,v)&&of(v,p)&&(n.push(p.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),sf(h),sf(h.next),h=o=v),h=h.next}while(h!==o);return Fu(h)}function IA(o,n,s,h,p,v){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&zA(x,S)){var P=Ax(x,S);return x=Fu(x,x.next),P=Fu(P,P.next),rf(x,n,s,h,p,v,0),void rf(P,n,s,h,p,v,0)}S=S.next}x=x.next}while(x!==o)}function AA(o,n){return o.x-n.x}function PA(o,n){var s=function(p,v){var x,S=v,P=p.x,F=p.y,W=-1/0;do{if(F<=S.y&&F>=S.next.y&&S.next.y!==S.y){var Q=S.x+(F-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(Q<=P&&Q>W&&(W=Q,x=S.x<S.next.x?S:S.next,Q===P))return x}S=S.next}while(S!==v);if(!x)return null;var ae,fe=x,me=x.x,Ae=x.y,Re=1/0;S=x;do P>=S.x&&S.x>=me&&P!==S.x&&Sc(F<Ae?P:W,F,me,Ae,F<Ae?W:P,F,S.x,S.y)&&(ae=Math.abs(F-S.y)/(P-S.x),of(S,p)&&(ae<Re||ae===Re&&(S.x>x.x||S.x===x.x&&kA(x,S)))&&(x=S,Re=ae)),S=S.next;while(S!==fe);return x}(o,n);if(!s)return n;var h=Ax(s,o);return Fu(h,h.next),Fu(s,s.next)}function kA(o,n){return Ar(o.prev,o,n.prev)<0&&Ar(n.next,o,o.next)<0}function ry(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function MA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Sc(o,n,s,h,p,v,x,S){return(p-x)*(n-S)>=(o-x)*(v-S)&&(o-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(v-S)>=(p-x)*(h-S)}function zA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&Ix(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(of(o,n)&&of(n,o)&&function(s,h){var p=s,v=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&x<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(o,n)&&(Ar(o.prev,o,n.prev)||Ar(o,n.prev,n))||Qd(o,n)&&Ar(o.prev,o,o.next)>0&&Ar(n.prev,n,n.next)>0)}function Ar(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Qd(o,n){return o.x===n.x&&o.y===n.y}function Ix(o,n,s,h){var p=tp(Ar(o,n,s)),v=tp(Ar(o,n,h)),x=tp(Ar(s,h,o)),S=tp(Ar(s,h,n));return p!==v&&x!==S||!(p!==0||!ep(o,s,n))||!(v!==0||!ep(o,h,n))||!(x!==0||!ep(s,o,h))||!(S!==0||!ep(s,n,h))}function ep(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function tp(o){return o>0?1:o<0?-1:0}function of(o,n){return Ar(o.prev,o,o.next)<0?Ar(o,n,o.next)>=0&&Ar(o,o.prev,n)>=0:Ar(o,n,o.prev)<0||Ar(o,o.next,n)<0}function Ax(o,n){var s=new iy(o.i,o.x,o.y),h=new iy(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function Px(o,n,s,h){var p=new iy(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function sf(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function iy(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function oy(o,n,s,h){for(var p=0,v=n,x=s-h;v<s;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}ny.exports=Jd,ny.exports.default=Jd,Jd.deviation=function(o,n,s,h){var p=n&&n.length,v=Math.abs(oy(o,0,p?n[0]*s:o.length,s));if(p)for(var x=0,S=n.length;x<S;x++)v-=Math.abs(oy(o,n[x]*s,x<S-1?n[x+1]*s:o.length,s));var P=0;for(x=0;x<h.length;x+=3){var F=h[x]*s,W=h[x+1]*s,Q=h[x+2]*s;P+=Math.abs((o[F]-o[Q])*(o[W+1]-o[F+1])-(o[F]-o[W])*(o[Q+1]-o[F+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},Jd.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<n;x++)s.vertices.push(o[p][v][x]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var kx=w(ny.exports);function LA(o,n,s,h,p){Mx(o,n,s||0,h||o.length-1,p||FA)}function Mx(o,n,s,h,p){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,S=Math.log(v),P=.5*Math.exp(2*S/3),F=.5*Math.sqrt(S*P*(v-P)/v)*(x-v/2<0?-1:1);Mx(o,n,Math.max(s,Math.floor(n-x*P/v+F)),Math.min(h,Math.floor(n+(v-x)*P/v+F)),p)}var W=o[n],Q=s,ae=h;for(af(o,s,n),p(o[h],W)>0&&af(o,s,h);Q<ae;){for(af(o,Q,ae),Q++,ae--;p(o[Q],W)<0;)Q++;for(;p(o[ae],W)>0;)ae--}p(o[s],W)===0?af(o,s,ae):af(o,++ae,h),ae<=n&&(s=ae+1),n<=ae&&(h=ae-1)}}function af(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function FA(o,n){return o<n?-1:o>n?1:0}function sy(o,n){const s=o.length;if(s<=1)return[o];const h=[];let p,v;for(let x=0;x<s;x++){const S=ue(o[x]);S!==0&&(o[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(LA(h[x],n,1,h[x].length-1,OA),h[x]=h[x].slice(0,n));return h}function OA(o,n){return n.area-o.area}function ay(o,n,s){const h=s.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const S=x.constantOr(null);S&&(p=!0,h[S.to]=!0,h[S.from]=!0)}return p}function ly(o,n,s,h,p){const v=p.patternDependencies;for(const x of n){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:h-1},s,{},p.availableImages),F=S.evaluate({zoom:h},s,{},p.availableImages),W=S.evaluate({zoom:h+1},s,{},p.availableImages);P=P&&P.name?P.name:P,F=F&&F.name?F.name:F,W=W&&W.name?W.name:W,v[P]=!0,v[F]=!0,v[W]=!0,s.patterns[x.id]={min:P,mid:F,max:W}}}return s}class uy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pn,this.indexArray=new ii,this.indexArray2=new Vr,this.programConfigurations=new Ss(n.layers,n.zoom),this.segments=new ur,this.segments2=new ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=ay("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:S,id:P,index:F,sourceLayerIndex:W}of n){const Q=this.layers[0]._featureFilter.needGeometry,ae=Lu(S,Q);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ae,h))continue;const fe=v?p.evaluate(ae,{},h,s.availableImages):void 0,me={id:P,properties:S.properties,type:S.type,sourceLayerIndex:W,index:F,geometry:Q?ae.geometry:zu(S),patterns:{},sortKey:fe};x.push(me)}v&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:F,sourceLayerIndex:W}=S;if(this.hasPattern){const Q=ly("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(Q)}else this.addFeature(S,P,F,h,{});s.featureIndex.insert(n[F].feature,P,F,W,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,SA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,v){for(const x of sy(s,500)){let S=0;for(const fe of x)S+=fe.length;const P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),F=P.vertexLength,W=[],Q=[];for(const fe of x){if(fe.length===0)continue;fe!==x[0]&&Q.push(W.length/2);const me=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),Ae=me.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(Ae+fe.length-1,Ae),W.push(fe[0].x),W.push(fe[0].y);for(let Re=1;Re<fe.length;Re++)this.layoutVertexArray.emplaceBack(fe[Re].x,fe[Re].y),this.indexArray2.emplaceBack(Ae+Re-1,Ae+Re),W.push(fe[Re].x),W.push(fe[Re].y);me.vertexLength+=fe.length,me.primitiveLength+=fe.length}const ae=kx(W,Q);for(let fe=0;fe<ae.length;fe+=3)this.indexArray.emplaceBack(F+ae[fe],F+ae[fe+1],F+ae[fe+2]);P.vertexLength+=S,P.primitiveLength+=ae.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}let zx,Lx;Bt("FillBucket",uy,{omit:["layers","patternFeatures"]});var RA={get paint(){return Lx=Lx||new Cr({"fill-antialias":new qt(se.paint_fill["fill-antialias"]),"fill-opacity":new sn(se.paint_fill["fill-opacity"]),"fill-color":new sn(se.paint_fill["fill-color"]),"fill-outline-color":new sn(se.paint_fill["fill-outline-color"]),"fill-translate":new qt(se.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pu(se.paint_fill["fill-pattern"])})},get layout(){return zx=zx||new Cr({"fill-sort-key":new sn(se.layout_fill["fill-sort-key"])})}};class jA extends go{constructor(n){super(n,RA)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new uy(n)}queryRadius(){return qd(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,p,v,x,S){return px(Kd(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),p)}isTileClipped(){return!0}}const DA=pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),BA=pr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:NA}=DA;var Cl={},UA=A,Fx=Ec;function Ec(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields($A,this,n)}function $A(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],S=p._values[h.readVarint()];p.properties[x]=S}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function VA(o){for(var n,s,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((s=o[x]).x-(n=o[p]).x)*(n.y+s.y);return h}Ec.types=["Unknown","Point","LineString","Polygon"],Ec.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,S=[];o.pos<s;){if(p<=0){var P=o.readVarint();h=7&P,p=P>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new UA(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},Ec.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,v=0,x=1/0,S=-1/0,P=1/0,F=-1/0;o.pos<n;){if(h<=0){var W=o.readVarint();s=7&W,h=W>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<x&&(x=p),p>S&&(S=p),(v+=o.readSVarint())<P&&(P=v),v>F&&(F=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,S,F]},Ec.prototype.toGeoJSON=function(o,n,s){var h,p,v=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*n,P=this.loadGeometry(),F=Ec.types[this.type];function W(fe){for(var me=0;me<fe.length;me++){var Ae=fe[me];fe[me]=[360*(Ae.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ae.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var Q=[];for(h=0;h<P.length;h++)Q[h]=P[h][0];W(P=Q);break;case 2:for(h=0;h<P.length;h++)W(P[h]);break;case 3:for(P=function(fe){var me=fe.length;if(me<=1)return[fe];for(var Ae,Re,Ne=[],Je=0;Je<me;Je++){var We=VA(fe[Je]);We!==0&&(Re===void 0&&(Re=We<0),Re===We<0?(Ae&&Ne.push(Ae),Ae=[fe[Je]]):Ae.push(fe[Je]))}return Ae&&Ne.push(Ae),Ne}(P),h=0;h<P.length;h++)for(p=0;p<P[h].length;p++)W(P[h][p])}P.length===1?P=P[0]:F="Multi"+F;var ae={type:"Feature",geometry:{type:F,coordinates:P},properties:this.properties};return"id"in this&&(ae.id=this.id),ae};var GA=Fx,Ox=Rx;function Rx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(ZA,this,n),this.length=this._features.length}function ZA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(s))}Rx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new GA(this._pbf,n,this.extent,this._keys,this._values)};var HA=Ox;function WA(o,n,s){if(o===3){var h=new HA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Cl.VectorTile=function(o,n){this.layers=o.readFields(WA,{},n)},Cl.VectorTileFeature=Fx,Cl.VectorTileLayer=Ox;const XA=Cl.VectorTileFeature.types,cy=Math.pow(2,13);function lf(o,n,s,h,p,v,x,S){o.emplaceBack(n,s,2*Math.floor(h*cy)+x,p*cy*2,v*cy*2,Math.round(S))}class hy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new kt,this.centroidVertexArray=new Et,this.indexArray=new ii,this.programConfigurations=new Ss(n.layers,n.zoom),this.segments=new ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=ay("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:x,sourceLayerIndex:S}of n){const P=this.layers[0]._featureFilter.needGeometry,F=Lu(p,P);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),F,h))continue;const W={id:v,sourceLayerIndex:S,index:x,geometry:P?F.geometry:zu(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(ly("fill-extrusion",this.layers,W,this.zoom,s)):this.addFeature(W,W.geometry,x,h,{}),s.featureIndex.insert(p,W.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,NA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,BA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,v){const x={x:0,y:0,vertexCount:0};for(const S of sy(s,500)){let P=0;for(const me of S)P+=me.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of S){if(me.length===0||KA(me))continue;let Ae=0;for(let Re=0;Re<me.length;Re++){const Ne=me[Re];if(Re>=1){const Je=me[Re-1];if(!qA(Ne,Je)){F.vertexLength+4>ur.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const We=Ne.sub(Je)._perp()._unit(),Qe=Je.dist(Ne);Ae+Qe>32768&&(Ae=0),lf(this.layoutVertexArray,Ne.x,Ne.y,We.x,We.y,0,0,Ae),lf(this.layoutVertexArray,Ne.x,Ne.y,We.x,We.y,0,1,Ae),x.x+=2*Ne.x,x.y+=2*Ne.y,x.vertexCount+=2,Ae+=Qe,lf(this.layoutVertexArray,Je.x,Je.y,We.x,We.y,0,0,Ae),lf(this.layoutVertexArray,Je.x,Je.y,We.x,We.y,0,1,Ae),x.x+=2*Je.x,x.y+=2*Je.y,x.vertexCount+=2;const rt=F.vertexLength;this.indexArray.emplaceBack(rt,rt+2,rt+1),this.indexArray.emplaceBack(rt+1,rt+2,rt+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+P>ur.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),XA[n.type]!=="Polygon")continue;const W=[],Q=[],ae=F.vertexLength;for(const me of S)if(me.length!==0){me!==S[0]&&Q.push(W.length/2);for(let Ae=0;Ae<me.length;Ae++){const Re=me[Ae];lf(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),x.x+=Re.x,x.y+=Re.y,x.vertexCount+=1,W.push(Re.x),W.push(Re.y)}}const fe=kx(W,Q);for(let me=0;me<fe.length;me+=3)this.indexArray.emplaceBack(ae+fe[me],ae+fe[me+2],ae+fe[me+1]);F.primitiveLength+=fe.length/3,F.vertexLength+=P}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function qA(o,n){return o.x===n.x&&(o.x<0||o.x>Fr)||o.y===n.y&&(o.y<0||o.y>Fr)}function KA(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Fr)||o.every(n=>n.y<0)||o.every(n=>n.y>Fr)}let jx;Bt("FillExtrusionBucket",hy,{omit:["layers","features"]});var YA={get paint(){return jx=jx||new Cr({"fill-extrusion-opacity":new qt(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pu(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class JA extends go{constructor(n){super(n,YA)}createBucket(n){return new hy(n)}queryRadius(){return qd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,p,v,x,S,P){const F=Kd(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),W=this.paint.get("fill-extrusion-height").evaluate(s,h),Q=this.paint.get("fill-extrusion-base").evaluate(s,h),ae=function(me,Ae,Re,Ne){const Je=[];for(const We of me){const Qe=[We.x,We.y,0,1];Yd(Qe,Qe,Ae),Je.push(new M(Qe[0]/Qe[3],Qe[1]/Qe[3]))}return Je}(F,P),fe=function(me,Ae,Re,Ne){const Je=[],We=[],Qe=Ne[8]*Ae,rt=Ne[9]*Ae,gt=Ne[10]*Ae,Ot=Ne[11]*Ae,Vt=Ne[8]*Re,Lt=Ne[9]*Re,Mt=Ne[10]*Re,Ct=Ne[11]*Re;for(const Nt of me){const Pt=[],bt=[];for(const tn of Nt){const Wt=tn.x,Cn=tn.y,cr=Ne[0]*Wt+Ne[4]*Cn+Ne[12],fr=Ne[1]*Wt+Ne[5]*Cn+Ne[13],Hr=Ne[2]*Wt+Ne[6]*Cn+Ne[14],vo=Ne[3]*Wt+Ne[7]*Cn+Ne[15],Bi=Hr+gt,Or=vo+Ot,si=cr+Vt,mi=fr+Lt,Ni=Hr+Mt,Ui=vo+Ct,Wr=new M((cr+Qe)/Or,(fr+rt)/Or);Wr.z=Bi/Or,Pt.push(Wr);const Xr=new M(si/Ui,mi/Ui);Xr.z=Ni/Ui,bt.push(Xr)}Je.push(Pt),We.push(bt)}return[Je,We]}(p,Q,W,P);return function(me,Ae,Re){let Ne=1/0;px(Re,Ae)&&(Ne=Dx(Re,Ae[0]));for(let Je=0;Je<Ae.length;Je++){const We=Ae[Je],Qe=me[Je];for(let rt=0;rt<We.length-1;rt++){const gt=We[rt],Ot=[gt,We[rt+1],Qe[rt+1],Qe[rt],gt];dx(Re,Ot)&&(Ne=Math.min(Ne,Dx(Re,Ot)))}}return Ne!==1/0&&Ne}(fe[0],fe[1],ae)}}function uf(o,n){return o.x*n.x+o.y*n.y}function Dx(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const v=n[s],x=o[0],S=p.sub(h),P=v.sub(h),F=x.sub(h),W=uf(S,S),Q=uf(S,P),ae=uf(P,P),fe=uf(F,S),me=uf(F,P),Ae=W*ae-Q*Q,Re=(ae*fe-Q*me)/Ae,Ne=(W*me-Q*fe)/Ae,Je=h.z*(1-Re-Ne)+p.z*Re+v.z*Ne;if(isFinite(Je))return Je}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const QA=pr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:eP}=QA,tP=pr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:nP}=tP,rP=Cl.VectorTileFeature.types,iP=Math.cos(Math.PI/180*37.5),Bx=Math.pow(2,14)/.5;class fy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new an,this.layoutVertexArray2=new Ht,this.indexArray=new ii,this.programConfigurations=new Ss(n.layers,n.zoom),this.segments=new ur,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=ay("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:S,id:P,index:F,sourceLayerIndex:W}of n){const Q=this.layers[0]._featureFilter.needGeometry,ae=Lu(S,Q);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ae,h))continue;const fe=v?p.evaluate(ae,{},h):void 0,me={id:P,properties:S.properties,type:S.type,sourceLayerIndex:W,index:F,geometry:Q?ae.geometry:zu(S),patterns:{},sortKey:fe};x.push(me)}v&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:F,sourceLayerIndex:W}=S;if(this.hasPattern){const Q=ly("line",this.layers,S,this.zoom,s);this.patternFeatures.push(Q)}else this.addFeature(S,P,F,h,{});s.featureIndex.insert(n[F].feature,P,F,W,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,nP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,eP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),F=x.get("line-miter-limit"),W=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Q of s)this.addLine(Q,n,S,P,F,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,s,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ne=0;Ne<n.length-1;Ne++)this.totalDistance+=n[Ne].dist(n[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=rP[s.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let F=0;for(;F<P-1&&n[F].equals(n[F+1]);)F++;if(P<(S?3:2))return;h==="bevel"&&(v=1.05);const W=this.overscaling<=16?15*Fr/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let ae,fe,me,Ae,Re;this.e1=this.e2=-1,S&&(ae=n[P-2],Re=n[F].sub(ae)._unit()._perp());for(let Ne=F;Ne<P;Ne++){if(me=Ne===P-1?S?n[F+1]:void 0:n[Ne+1],me&&n[Ne].equals(me))continue;Re&&(Ae=Re),ae&&(fe=ae),ae=n[Ne],Re=me?me.sub(ae)._unit()._perp():Ae,Ae=Ae||Re;let Je=Ae.add(Re);Je.x===0&&Je.y===0||Je._unit();const We=Ae.x*Re.x+Ae.y*Re.y,Qe=Je.x*Re.x+Je.y*Re.y,rt=Qe!==0?1/Qe:1/0,gt=2*Math.sqrt(2-2*Qe),Ot=Qe<iP&&fe&&me,Vt=Ae.x*Re.y-Ae.y*Re.x>0;if(Ot&&Ne>F){const Ct=ae.dist(fe);if(Ct>2*W){const Nt=ae.sub(ae.sub(fe)._mult(W/Ct)._round());this.updateDistance(fe,Nt),this.addCurrentVertex(Nt,Ae,0,0,Q),fe=Nt}}const Lt=fe&&me;let Mt=Lt?h:S?"butt":p;if(Lt&&Mt==="round"&&(rt<x?Mt="miter":rt<=2&&(Mt="fakeround")),Mt==="miter"&&rt>v&&(Mt="bevel"),Mt==="bevel"&&(rt>2&&(Mt="flipbevel"),rt<v&&(Mt="miter")),fe&&this.updateDistance(fe,ae),Mt==="miter")Je._mult(rt),this.addCurrentVertex(ae,Je,0,0,Q);else if(Mt==="flipbevel"){if(rt>100)Je=Re.mult(-1);else{const Ct=rt*Ae.add(Re).mag()/Ae.sub(Re).mag();Je._perp()._mult(Ct*(Vt?-1:1))}this.addCurrentVertex(ae,Je,0,0,Q),this.addCurrentVertex(ae,Je.mult(-1),0,0,Q)}else if(Mt==="bevel"||Mt==="fakeround"){const Ct=-Math.sqrt(rt*rt-1),Nt=Vt?Ct:0,Pt=Vt?0:Ct;if(fe&&this.addCurrentVertex(ae,Ae,Nt,Pt,Q),Mt==="fakeround"){const bt=Math.round(180*gt/Math.PI/20);for(let tn=1;tn<bt;tn++){let Wt=tn/bt;if(Wt!==.5){const cr=Wt-.5;Wt+=Wt*cr*(Wt-1)*((1.0904+We*(We*(3.55645-1.43519*We)-3.2452))*cr*cr+(.848013+We*(.215638*We-1.06021)))}const Cn=Re.sub(Ae)._mult(Wt)._add(Ae)._unit()._mult(Vt?-1:1);this.addHalfVertex(ae,Cn.x,Cn.y,!1,Vt,0,Q)}}me&&this.addCurrentVertex(ae,Re,-Nt,-Pt,Q)}else if(Mt==="butt")this.addCurrentVertex(ae,Je,0,0,Q);else if(Mt==="square"){const Ct=fe?1:-1;this.addCurrentVertex(ae,Je,Ct,Ct,Q)}else Mt==="round"&&(fe&&(this.addCurrentVertex(ae,Ae,0,0,Q),this.addCurrentVertex(ae,Ae,1,1,Q,!0)),me&&(this.addCurrentVertex(ae,Re,-1,-1,Q,!0),this.addCurrentVertex(ae,Re,0,0,Q)));if(Ot&&Ne<P-1){const Ct=ae.dist(me);if(Ct>2*W){const Nt=ae.add(me.sub(ae)._mult(W/Ct)._round());this.updateDistance(ae,Nt),this.addCurrentVertex(Nt,Re,0,0,Q),ae=Nt}}}}addCurrentVertex(n,s,h,p,v,x=!1){const S=s.y*p-s.x,P=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,S,P,x,!0,-p,v),this.distance>Bx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,v,x))}addHalfVertex({x:n,y:s},h,p,v,x,S,P){const F=.5*(this.lineClips?this.scaledDistance*(Bx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(S===0?0:S<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),P.primitiveLength++),x?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Nx,Ux;Bt("LineBucket",fy,{omit:["layers","patternFeatures"]});var $x={get paint(){return Ux=Ux||new Cr({"line-opacity":new sn(se.paint_line["line-opacity"]),"line-color":new sn(se.paint_line["line-color"]),"line-translate":new qt(se.paint_line["line-translate"]),"line-translate-anchor":new qt(se.paint_line["line-translate-anchor"]),"line-width":new sn(se.paint_line["line-width"]),"line-gap-width":new sn(se.paint_line["line-gap-width"]),"line-offset":new sn(se.paint_line["line-offset"]),"line-blur":new sn(se.paint_line["line-blur"]),"line-dasharray":new Zh(se.paint_line["line-dasharray"]),"line-pattern":new Pu(se.paint_line["line-pattern"]),"line-gradient":new Hh(se.paint_line["line-gradient"])})},get layout(){return Nx=Nx||new Cr({"line-cap":new qt(se.layout_line["line-cap"]),"line-join":new sn(se.layout_line["line-join"]),"line-miter-limit":new qt(se.layout_line["line-miter-limit"]),"line-round-limit":new qt(se.layout_line["line-round-limit"]),"line-sort-key":new sn(se.layout_line["line-sort-key"])})}};class oP extends sn{possiblyEvaluate(n,s){return s=new lr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=k({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let np;class sP extends go{constructor(n){super(n,$x),this.gradientVersion=0,np||(np=new oP($x.paint.properties["line-width"].specification),np.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Zo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=np.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new fy(n)}queryRadius(n){const s=n,h=Vx(ef("line-width",this,s),ef("line-gap-width",this,s)),p=ef("line-offset",this,s);return h/2+Math.abs(p)+qd(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,p,v,x,S){const P=Kd(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),F=S/2*Vx(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),W=this.paint.get("line-offset").evaluate(s,h);return W&&(p=function(Q,ae){const fe=[];for(let me=0;me<Q.length;me++){const Ae=Q[me],Re=[];for(let Ne=0;Ne<Ae.length;Ne++){const Je=Ae[Ne-1],We=Ae[Ne],Qe=Ae[Ne+1],rt=Ne===0?new M(0,0):We.sub(Je)._unit()._perp(),gt=Ne===Ae.length-1?new M(0,0):Qe.sub(We)._unit()._perp(),Ot=rt._add(gt)._unit(),Vt=Ot.x*gt.x+Ot.y*gt.y;Vt!==0&&Ot._mult(1/Vt),Re.push(Ot._mult(ae)._add(We))}fe.push(Re)}return fe}(p,W*S)),function(Q,ae,fe){for(let me=0;me<ae.length;me++){const Ae=ae[me];if(Q.length>=3){for(let Re=0;Re<Ae.length;Re++)if(wc(Q,Ae[Re]))return!0}if(fA(Q,Ae,fe))return!0}return!1}(P,p,F)}isTileClipped(){return!0}}function Vx(o,n){return n>0?n+2*o:o}const aP=pr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),lP=pr([{name:"a_projected_pos",components:3,type:"Float32"}],4);pr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const uP=pr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);pr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Gx=pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cP=pr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hP(o,n,s){return o.sections.forEach(h=>{h.text=function(p,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),Ji.applyArabicShaping&&(p=Ji.applyArabicShaping(p)),p}(h.text,n,s)}),o}pr([{name:"triangle",components:3,type:"Uint16"}]),pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),pr([{type:"Float32",name:"offsetX"}]),pr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),pr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const cf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Zr=24,Zx=Kn,Hx=function(o,n,s,h,p){var v,x,S=8*p-h-1,P=(1<<S)-1,F=P>>1,W=-7,Q=s?p-1:0,ae=s?-1:1,fe=o[n+Q];for(Q+=ae,v=fe&(1<<-W)-1,fe>>=-W,W+=S;W>0;v=256*v+o[n+Q],Q+=ae,W-=8);for(x=v&(1<<-W)-1,v>>=-W,W+=h;W>0;x=256*x+o[n+Q],Q+=ae,W-=8);if(v===0)v=1-F;else{if(v===P)return x?NaN:1/0*(fe?-1:1);x+=Math.pow(2,h),v-=F}return(fe?-1:1)*x*Math.pow(2,v-h)},Wx=function(o,n,s,h,p,v){var x,S,P,F=8*v-p-1,W=(1<<F)-1,Q=W>>1,ae=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=h?0:v-1,me=h?1:-1,Ae=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=W):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+Q>=1?ae/P:ae*Math.pow(2,1-Q))*P>=2&&(x++,P/=2),x+Q>=W?(S=0,x=W):x+Q>=1?(S=(n*P-1)*Math.pow(2,p),x+=Q):(S=n*Math.pow(2,Q-1)*Math.pow(2,p),x=0));p>=8;o[s+fe]=255&S,fe+=me,S/=256,p-=8);for(x=x<<p|S,F+=p;F>0;o[s+fe]=255&x,fe+=me,x/=256,F-=8);o[s+fe-me]|=128*Ae};function Kn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0,Kn.Fixed64=1,Kn.Bytes=2,Kn.Fixed32=5;var dy=4294967296,Xx=1/dy,qx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function La(o){return o.type===Kn.Bytes?o.readVarint()+o.pos:o.pos+1}function Tc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Kx(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function fP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function dP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function pP(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function mP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function gP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function yP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function vP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function _P(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function xP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function rp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Cc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Yx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Kn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=rp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Yx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=rp(this.buf,this.pos)+rp(this.buf,this.pos+4)*dy;return this.pos+=8,o},readSFixed64:function(){var o=rp(this.buf,this.pos)+Yx(this.buf,this.pos+4)*dy;return this.pos+=8,o},readFloat:function(){var o=Hx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Hx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,v,x){var S,P,F=x.buf;if(S=(112&(P=F[x.pos++]))>>4,P<128||(S|=(127&(P=F[x.pos++]))<<3,P<128)||(S|=(127&(P=F[x.pos++]))<<10,P<128)||(S|=(127&(P=F[x.pos++]))<<17,P<128)||(S|=(127&(P=F[x.pos++]))<<24,P<128)||(S|=(1&(P=F[x.pos++]))<<31,P<128))return Tc(p,S,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&qx?function(s,h,p){return qx.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var v="",x=h;x<p;){var S,P,F,W=s[x],Q=null,ae=W>239?4:W>223?3:W>191?2:1;if(x+ae>p)break;ae===1?W<128&&(Q=W):ae===2?(192&(S=s[x+1]))==128&&(Q=(31&W)<<6|63&S)<=127&&(Q=null):ae===3?(P=s[x+2],(192&(S=s[x+1]))==128&&(192&P)==128&&((Q=(15&W)<<12|(63&S)<<6|63&P)<=2047||Q>=55296&&Q<=57343)&&(Q=null)):ae===4&&(P=s[x+2],F=s[x+3],(192&(S=s[x+1]))==128&&(192&P)==128&&(192&F)==128&&((Q=(15&W)<<18|(63&S)<<12|(63&P)<<6|63&F)<=65535||Q>=1114112)&&(Q=null)),Q===null?(Q=65533,ae=1):Q>65535&&(Q-=65536,v+=String.fromCharCode(Q>>>10&1023|55296),Q=56320|1023&Q),v+=String.fromCharCode(Q),x+=ae}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Kn.Bytes)return o.push(this.readVarint(n));var s=La(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSVarint());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Kn.Bytes)return o.push(this.readBoolean());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFloat());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Kn.Bytes)return o.push(this.readDouble());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed32());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed32());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed64());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed64());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Kn.Fixed32)this.pos+=4;else{if(n!==Kn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Cc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Cc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Cc(this.buf,-1&o,this.pos),Cc(this.buf,Math.floor(o*Xx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Cc(this.buf,-1&o,this.pos),Cc(this.buf,Math.floor(o*Xx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var x,S,P=0;P<p.length;P++){if((x=p.charCodeAt(P))>55295&&x<57344){if(!S){x>56319||P+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Kx(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Wx(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Wx(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Kx(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Kn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,fP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,dP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,gP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,pP,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,mP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,yP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,vP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,_P,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,xP,n)},writeBytesField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var py=w(Zx);const my=3;function wP(o,n,s){o===1&&s.readMessage(bP,n)}function bP(o,n,s){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:S,top:P,advance:F}=s.readMessage(SP,{});n.push({id:h,bitmap:new nf({width:v+2*my,height:x+2*my},p),metrics:{width:v,height:x,left:S,top:P,advance:F}})}}function SP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Jx=my;function Qx(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,v=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const P=h[S];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===P.w&&x.h===P.h){const F=h.pop();S<h.length&&(h[S]=F)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}const eo=1;class gy{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+eo,this.paddedRect.y+eo]}get br(){return[this.paddedRect.x+this.paddedRect.w-eo,this.paddedRect.y+this.paddedRect.h-eo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*eo)/this.pixelRatio,(this.paddedRect.h-2*eo)/this.pixelRatio]}}class ew{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,p,v);const{w:x,h:S}=Qx(v),P=new Po({width:x||1,height:S||1});for(const F in n){const W=n[F],Q=h[F].paddedRect;Po.copy(W.data,P,{x:0,y:0},{x:Q.x+eo,y:Q.y+eo},W.data)}for(const F in s){const W=s[F],Q=p[F].paddedRect,ae=Q.x+eo,fe=Q.y+eo,me=W.data.width,Ae=W.data.height;Po.copy(W.data,P,{x:0,y:0},{x:ae,y:fe},W.data),Po.copy(W.data,P,{x:0,y:Ae-1},{x:ae,y:fe-1},{width:me,height:1}),Po.copy(W.data,P,{x:0,y:0},{x:ae,y:fe+Ae},{width:me,height:1}),Po.copy(W.data,P,{x:me-1,y:0},{x:ae-1,y:fe},{width:1,height:Ae}),Po.copy(W.data,P,{x:0,y:0},{x:ae+me,y:fe},{width:1,height:Ae})}this.image=P,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2*eo,h:v.data.height+2*eo};h.push(x),s[p]=new gy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,v]=n.tl;h.update(s.data,void 0,{x:p,y:v})}}var Il;Bt("ImagePosition",gy),Bt("ImageAtlas",ew),l.ai=void 0,(Il=l.ai||(l.ai={}))[Il.none=0]="none",Il[Il.horizontal=1]="horizontal",Il[Il.vertical=2]="vertical",Il[Il.horizontalOnly=3]="horizontalOnly";const hf=-17;class ff{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new ff;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new ff;return s.imageName=n,s}}class Ic{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Ic;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=p&&Dd(p)&&!cf[n[h+1]]||v&&Dd(v)&&!cf[n[h-1]]||!cf[n[h]]?n[h]:cf[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&op[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&op[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Ic;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(ff.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void be("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(ff.forImage(s)),this.sectionIndex.push(this.sections.length-1)):be("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ip(o,n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae){const Re=Ic.fromFeature(o,p);let Ne;Q===l.ai.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:We}=Ji;if(Je&&Re.sections.length===1){Ne=[];const gt=Je(Re.toString(),yy(Re,F,v,n,h,fe,me));for(const Ot of gt){const Vt=new Ic;Vt.text=Ot,Vt.sections=Re.sections;for(let Lt=0;Lt<Ot.length;Lt++)Vt.sectionIndex.push(0);Ne.push(Vt)}}else if(We){Ne=[];const gt=We(Re.text,Re.sectionIndex,yy(Re,F,v,n,h,fe,me));for(const Ot of gt){const Vt=new Ic;Vt.text=Ot[0],Vt.sectionIndex=Ot[1],Vt.sections=Re.sections,Ne.push(Vt)}}else Ne=function(gt,Ot){const Vt=[],Lt=gt.text;let Mt=0;for(const Ct of Ot)Vt.push(gt.substring(Mt,Ct)),Mt=Ct;return Mt<Lt.length&&Vt.push(gt.substring(Mt,Lt.length)),Vt}(Re,yy(Re,F,v,n,h,fe,me));const Qe=[],rt={positionedLines:Qe,text:Re.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:Q,iconsInText:!1,verticalizable:!1};return function(gt,Ot,Vt,Lt,Mt,Ct,Nt,Pt,bt,tn,Wt,Cn){let cr=0,fr=hf,Hr=0,vo=0;const Bi=Pt==="right"?1:Pt==="left"?0:.5;let Or=0;for(const Wr of Mt){Wr.trim();const Xr=Wr.getMaxScale(),Ei=(Xr-1)*Zr,$i={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Or]=$i;const Ti=$i.positionedGlyphs;let to=0;if(!Wr.length()){fr+=Ct,++Or;continue}for(let qr=0;qr<Wr.length();qr++){const zn=Wr.getSection(qr),Ci=Wr.getSectionIndex(qr),gi=Wr.getCharCode(qr);let Kr=0,ns=null,Es=null,Ts=null,Fa=Zr;const rs=!(bt===l.ai.horizontal||!Wt&&!jh(gi)||Wt&&(op[gi]||(si=gi,Ft.Arabic(si)||Ft["Arabic Supplement"](si)||Ft["Arabic Extended-A"](si)||Ft["Arabic Presentation Forms-A"](si)||Ft["Arabic Presentation Forms-B"](si))));if(zn.imageName){const Mo=Lt[zn.imageName];if(!Mo)continue;Ts=zn.imageName,gt.iconsInText=gt.iconsInText||!0,Es=Mo.paddedRect;const ro=Mo.displaySize;zn.scale=zn.scale*Zr/Cn,ns={width:ro[0],height:ro[1],left:eo,top:-Jx,advance:rs?ro[1]:ro[0]},Kr=Ei+(Zr-ro[1]*zn.scale),Fa=ns.advance;const Oa=rs?ro[0]*zn.scale-Zr*Xr:ro[1]*zn.scale-Zr*Xr;Oa>0&&Oa>to&&(to=Oa)}else{const Mo=Vt[zn.fontStack],ro=Mo&&Mo[gi];if(ro&&ro.rect)Es=ro.rect,ns=ro.metrics;else{const Oa=Ot[zn.fontStack],yf=Oa&&Oa[gi];if(!yf)continue;ns=yf.metrics}Kr=(Xr-zn.scale)*Zr}rs?(gt.verticalizable=!0,Ti.push({glyph:gi,imageName:Ts,x:cr,y:fr+Kr,vertical:rs,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:Ci,metrics:ns,rect:Es}),cr+=Fa*zn.scale+tn):(Ti.push({glyph:gi,imageName:Ts,x:cr,y:fr+Kr,vertical:rs,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:Ci,metrics:ns,rect:Es}),cr+=ns.advance*zn.scale+tn)}Ti.length!==0&&(Hr=Math.max(cr-tn,Hr),CP(Ti,0,Ti.length-1,Bi,to)),cr=0;const no=Ct*Xr+to;$i.lineOffset=Math.max(to,Ei),fr+=no,vo=Math.max(no,vo),++Or}var si;const mi=fr-hf,{horizontalAlign:Ni,verticalAlign:Ui}=vy(Nt);(function(Wr,Xr,Ei,$i,Ti,to,no,qr,zn){const Ci=(Xr-Ei)*Ti;let gi=0;gi=to!==no?-qr*$i-hf:(-$i*zn+.5)*no;for(const Kr of Wr)for(const ns of Kr.positionedGlyphs)ns.x+=Ci,ns.y+=gi})(gt.positionedLines,Bi,Ni,Ui,Hr,vo,Ct,mi,Mt.length),gt.top+=-Ui*mi,gt.bottom=gt.top+mi,gt.left+=-Ni*Hr,gt.right=gt.left+Hr}(rt,n,s,h,Ne,x,S,P,Q,F,ae,Ae),!function(gt){for(const Ot of gt)if(Ot.positionedGlyphs.length!==0)return!1;return!0}(Qe)&&rt}const op={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},EP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function tw(o,n,s,h,p,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Zr/v+p:0}{const x=s[n.fontStack],S=x&&x[o];return S?S.metrics.advance*n.scale+p:0}}function nw(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function TP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function rw(o,n,s,h,p,v){let x=null,S=nw(n,s,p,v);for(const P of h){const F=nw(n-P.x,s,p,v)+P.badness;F<=S&&(x=P,S=F)}return{index:o,x:n,priorBreak:x,badness:S}}function iw(o){return o?iw(o.priorBreak).concat(o.index):[]}function yy(o,n,s,h,p,v,x){if(v!=="point")return[];if(!o)return[];const S=[],P=function(ae,fe,me,Ae,Re,Ne){let Je=0;for(let We=0;We<ae.length();We++){const Qe=ae.getSection(We);Je+=tw(ae.getCharCode(We),Qe,Ae,Re,fe,Ne)}return Je/Math.max(1,Math.ceil(Je/me))}(o,n,s,h,p,x),F=o.text.indexOf("")>=0;let W=0;for(let ae=0;ae<o.length();ae++){const fe=o.getSection(ae),me=o.getCharCode(ae);if(op[me]||(W+=tw(me,fe,h,p,n,x)),ae<o.length()-1){const Ae=!((Q=me)<11904||!(Ft["Bopomofo Extended"](Q)||Ft.Bopomofo(Q)||Ft["CJK Compatibility Forms"](Q)||Ft["CJK Compatibility Ideographs"](Q)||Ft["CJK Compatibility"](Q)||Ft["CJK Radicals Supplement"](Q)||Ft["CJK Strokes"](Q)||Ft["CJK Symbols and Punctuation"](Q)||Ft["CJK Unified Ideographs Extension A"](Q)||Ft["CJK Unified Ideographs"](Q)||Ft["Enclosed CJK Letters and Months"](Q)||Ft["Halfwidth and Fullwidth Forms"](Q)||Ft.Hiragana(Q)||Ft["Ideographic Description Characters"](Q)||Ft["Kangxi Radicals"](Q)||Ft["Katakana Phonetic Extensions"](Q)||Ft.Katakana(Q)||Ft["Vertical Forms"](Q)||Ft["Yi Radicals"](Q)||Ft["Yi Syllables"](Q)));(EP[me]||Ae||fe.imageName)&&S.push(rw(ae+1,W,P,S,TP(me,o.getCharCode(ae+1),Ae&&F),!1))}}var Q;return iw(rw(o.length(),W,P,S,0,!0))}function vy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function CP(o,n,s,h,p){if(!h&&!p)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*h;for(let S=n;S<=s;S++)o[S].x-=x,o[S].y+=p}function IP(o,n,s){const{horizontalAlign:h,verticalAlign:p}=vy(s),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function ow(o,n,s,h,p,v){const x=o.image;let S;if(x.content){const Re=x.content,Ne=x.pixelRatio||1;S=[Re[0]/Ne,Re[1]/Ne,x.displaySize[0]-Re[2]/Ne,x.displaySize[1]-Re[3]/Ne]}const P=n.left*v,F=n.right*v;let W,Q,ae,fe;s==="width"||s==="both"?(fe=p[0]+P-h[3],Q=p[0]+F+h[1]):(fe=p[0]+(P+F-x.displaySize[0])/2,Q=fe+x.displaySize[0]);const me=n.top*v,Ae=n.bottom*v;return s==="height"||s==="both"?(W=p[1]+me-h[0],ae=p[1]+Ae+h[2]):(W=p[1]+(me+Ae-x.displaySize[1])/2,ae=W+x.displaySize[1]),{image:x,top:W,right:Q,bottom:ae,left:fe,collisionPadding:S}}const df=255,Qs=128,Al=df*Qs;function sw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new lr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[v],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:P,minSize:s.evaluate(new lr(S)),maxSize:s.evaluate(new lr(P)),interpolationType:p}}}function _y(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}const AP=Cl.VectorTileFeature.types,PP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sp(o,n,s,h,p,v,x,S,P,F,W,Q,ae){const fe=S?Math.min(Al,Math.round(S[0])):0,me=S?Math.min(Al,Math.round(S[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),v,x,(fe<<1)+(P?1:0),me,16*F,16*W,256*Q,256*ae)}function xy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function kP(o){for(const n of o.sections)if(Hg(n.text))return!0;return!1}class wy{constructor(n){this.layoutVertexArray=new An,this.indexArray=new ii,this.programConfigurations=n,this.segments=new ur,this.dynamicLayoutVertexArray=new _n,this.opacityVertexArray=new kn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ke}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,aP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,lP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,PP,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",wy);class by{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new ur,this.collisionVertexArray=new nr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,uP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",by);class Ac{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Qg([]),this.placementViewportMatrix=Qg([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=sw(this.zoom,s["text-size"]),this.iconSizeData=sw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=_y(h,"text-overlap","text-allow-overlap")!=="never"||_y(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new wy(new Ss(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new wy(new Ss(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ye,this.lineVertexArray=new ot,this.symbolInstances=new De,this.textAnchorOffsets=new dt}calculateGlyphDependencies(n,s,h,p,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||p)&&v){const S=cf[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),S=v.get("text-field"),P=v.get("icon-image"),F=(S.value.kind!=="constant"||S.value.value instanceof Qr&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),W=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,Q=v.get("symbol-sort-key");if(this.features=[],!F&&!W)return;const ae=s.iconDependencies,fe=s.glyphDependencies,me=s.availableImages,Ae=new lr(this.zoom);for(const{feature:Re,id:Ne,index:Je,sourceLayerIndex:We}of n){const Qe=p._featureFilter.needGeometry,rt=Lu(Re,Qe);if(!p._featureFilter.filter(Ae,rt,h))continue;let gt,Ot;if(Qe||(rt.geometry=zu(Re)),F){const Lt=p.getValueAndResolveTokens("text-field",rt,h,me),Mt=Qr.factory(Lt);kP(Mt)&&(this.hasRTLText=!0),(!this.hasRTLText||Vh()==="unavailable"||this.hasRTLText&&Ji.isParsed())&&(gt=hP(Mt,p,rt))}if(W){const Lt=p.getValueAndResolveTokens("icon-image",rt,h,me);Ot=Lt instanceof Nr?Lt:Nr.fromString(Lt)}if(!gt&&!Ot)continue;const Vt=this.sortFeaturesByKey?Q.evaluate(rt,{},h):void 0;if(this.features.push({id:Ne,text:gt,icon:Ot,index:Je,sourceLayerIndex:We,geometry:rt.geometry,properties:Re.properties,type:AP[Re.type],sortKey:Vt}),Ot&&(ae[Ot.name]=!0),gt){const Lt=x.evaluate(rt,{},h).join(","),Mt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const Ct of gt.sections)if(Ct.image)ae[Ct.image.name]=!0;else{const Nt=Oh(gt.toString()),Pt=Ct.fontStack||Lt,bt=fe[Pt]=fe[Pt]||{};this.calculateGlyphDependencies(Ct.text,bt,Mt,this.allowVerticalPlacement,Nt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Re){const Ne={},Je={},We=[];let Qe=0;function rt(Lt){We.push(Re[Lt]),Qe++}function gt(Lt,Mt,Ct){const Nt=Je[Lt];return delete Je[Lt],Je[Mt]=Nt,We[Nt].geometry[0].pop(),We[Nt].geometry[0]=We[Nt].geometry[0].concat(Ct[0]),Nt}function Ot(Lt,Mt,Ct){const Nt=Ne[Mt];return delete Ne[Mt],Ne[Lt]=Nt,We[Nt].geometry[0].shift(),We[Nt].geometry[0]=Ct[0].concat(We[Nt].geometry[0]),Nt}function Vt(Lt,Mt,Ct){const Nt=Ct?Mt[0][Mt[0].length-1]:Mt[0][0];return`${Lt}:${Nt.x}:${Nt.y}`}for(let Lt=0;Lt<Re.length;Lt++){const Mt=Re[Lt],Ct=Mt.geometry,Nt=Mt.text?Mt.text.toString():null;if(!Nt){rt(Lt);continue}const Pt=Vt(Nt,Ct),bt=Vt(Nt,Ct,!0);if(Pt in Je&&bt in Ne&&Je[Pt]!==Ne[bt]){const tn=Ot(Pt,bt,Ct),Wt=gt(Pt,bt,We[tn].geometry);delete Ne[Pt],delete Je[bt],Je[Vt(Nt,We[Wt].geometry,!0)]=Wt,We[tn].geometry=null}else Pt in Je?gt(Pt,bt,Ct):bt in Ne?Ot(Pt,bt,Ct):(rt(Lt),Ne[Pt]=Qe-1,Je[bt]=Qe-1)}return We.filter(Lt=>Lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ne)=>Re.sortKey-Ne.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:p},S<s.length-1&&(p+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const P=x[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,v,x,S,P,F,W,Q,ae){const fe=n.indexArray,me=n.layoutVertexArray,Ae=n.segments.prepareSegment(4*s.length,me,fe,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ne=Ae.vertexLength,Je=this.allowVerticalPlacement&&S===l.ai.vertical?Math.PI/2:0,We=x.text&&x.text.sections;for(let Qe=0;Qe<s.length;Qe++){const{tl:rt,tr:gt,bl:Ot,br:Vt,tex:Lt,pixelOffsetTL:Mt,pixelOffsetBR:Ct,minFontScaleX:Nt,minFontScaleY:Pt,glyphOffset:bt,isSDF:tn,sectionIndex:Wt}=s[Qe],Cn=Ae.vertexLength,cr=bt[1];sp(me,P.x,P.y,rt.x,cr+rt.y,Lt.x,Lt.y,h,tn,Mt.x,Mt.y,Nt,Pt),sp(me,P.x,P.y,gt.x,cr+gt.y,Lt.x+Lt.w,Lt.y,h,tn,Ct.x,Mt.y,Nt,Pt),sp(me,P.x,P.y,Ot.x,cr+Ot.y,Lt.x,Lt.y+Lt.h,h,tn,Mt.x,Ct.y,Nt,Pt),sp(me,P.x,P.y,Vt.x,cr+Vt.y,Lt.x+Lt.w,Lt.y+Lt.h,h,tn,Ct.x,Ct.y,Nt,Pt),xy(n.dynamicLayoutVertexArray,P,Je),fe.emplaceBack(Cn,Cn+1,Cn+2),fe.emplaceBack(Cn+1,Cn+2,Cn+3),Ae.vertexLength+=4,Ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),Qe!==s.length-1&&Wt===s[Qe+1].sectionIndex||n.programConfigurations.populatePaintArrays(me.length,x,x.index,{},ae,We&&We[Wt])}n.placedSymbolArray.emplaceBack(P.x,P.y,Re,this.glyphOffsetArray.length-Re,Ne,F,W,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],S,0,!1,0,Q)}_addCollisionDebugVertex(n,s,h,p,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,p,v,x,S){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),F=P.vertexLength,W=v.layoutVertexArray,Q=v.collisionVertexArray,ae=S.anchorX,fe=S.anchorY;this._addCollisionDebugVertex(W,Q,x,ae,fe,new M(n,s)),this._addCollisionDebugVertex(W,Q,x,ae,fe,new M(h,s)),this._addCollisionDebugVertex(W,Q,x,ae,fe,new M(h,p)),this._addCollisionDebugVertex(W,Q,x,ae,fe,new M(n,p)),P.vertexLength+=4;const me=v.indexArray;me.emplaceBack(F,F+1),me.emplaceBack(F+1,F+2),me.emplaceBack(F+2,F+3),me.emplaceBack(F+3,F),P.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new by(br,Gx.members,Vr),this.iconCollisionBox=new by(br,Gx.members,Vr);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,v,x,S,P,F){const W={};for(let Q=s;Q<h;Q++){const ae=n.get(Q);W.textBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.textFeatureIndex=ae.featureIndex;break}for(let Q=p;Q<v;Q++){const ae=n.get(Q);W.verticalTextBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.verticalTextFeatureIndex=ae.featureIndex;break}for(let Q=x;Q<S;Q++){const ae=n.get(Q);W.iconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.iconFeatureIndex=ae.featureIndex;break}for(let Q=P;Q<F;Q++){const ae=n.get(Q);W.verticalIconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.verticalIconFeatureIndex=ae.featureIndex;break}return W}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const P=this.symbolInstances.get(S);p.push(0|Math.round(s*P.anchorX+h*P.anchorY)),v.push(P.featureIndex)}return x.sort((S,P)=>p[S]-p[P]||v[P]-v[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let aw,lw;Bt("SymbolBucket",Ac,{omit:["layers","collisionBoxArray","features","compareText"]}),Ac.MAX_GLYPHS=65535,Ac.addDynamicAttributes=xy;var Sy={get paint(){return lw=lw||new Cr({"icon-opacity":new sn(se.paint_symbol["icon-opacity"]),"icon-color":new sn(se.paint_symbol["icon-color"]),"icon-halo-color":new sn(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(se.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(se.paint_symbol["text-opacity"]),"text-color":new sn(se.paint_symbol["text-color"],{runtimeType:xr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sn(se.paint_symbol["text-halo-color"]),"text-halo-width":new sn(se.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(se.paint_symbol["text-halo-blur"]),"text-translate":new qt(se.paint_symbol["text-translate"]),"text-translate-anchor":new qt(se.paint_symbol["text-translate-anchor"])})},get layout(){return aw=aw||new Cr({"symbol-placement":new qt(se.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(se.layout_symbol["icon-size"]),"icon-text-fit":new qt(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(se.layout_symbol["icon-image"]),"icon-rotate":new sn(se.layout_symbol["icon-rotate"]),"icon-padding":new sn(se.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(se.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(se.layout_symbol["icon-offset"]),"icon-anchor":new sn(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(se.layout_symbol["text-rotation-alignment"]),"text-field":new sn(se.layout_symbol["text-field"]),"text-font":new sn(se.layout_symbol["text-font"]),"text-size":new sn(se.layout_symbol["text-size"]),"text-max-width":new sn(se.layout_symbol["text-max-width"]),"text-line-height":new qt(se.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(se.layout_symbol["text-letter-spacing"]),"text-justify":new sn(se.layout_symbol["text-justify"]),"text-radial-offset":new sn(se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sn(se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sn(se.layout_symbol["text-anchor"]),"text-max-angle":new qt(se.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(se.layout_symbol["text-writing-mode"]),"text-rotate":new sn(se.layout_symbol["text-rotate"]),"text-padding":new qt(se.layout_symbol["text-padding"]),"text-keep-upright":new qt(se.layout_symbol["text-keep-upright"]),"text-transform":new sn(se.layout_symbol["text-transform"]),"text-offset":new sn(se.layout_symbol["text-offset"]),"text-allow-overlap":new qt(se.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(se.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(se.layout_symbol["text-ignore-placement"]),"text-optional":new qt(se.layout_symbol["text-optional"])})}};class uw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:vn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",uw,{omit:["defaultValue"]});class ap extends go{constructor(n){super(n,Sy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const v=this.layout.get(n).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||yl(x.value)||!v?v:function(S,P){return P.replace(/{([^{}]+)}/g,(F,W)=>W in S?String(S[W]):"")}(s.properties,v)}createBucket(n){return new Ac(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Sy.paint.overridableProperties){if(!ap.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new uw(s),p=new bu(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Co("source",p):new vl("composite",p,s.value.zoomStops),this.paint._values[n]=new bi(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&ap.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=Sy.paint.properties[s];let v=!1;const x=S=>{for(const P of S)if(p.overrides&&p.overrides.hasOverride(P))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Qr)x(h.value.value.sections);else if(h.value.kind==="source"){const S=F=>{v||(F instanceof ps&&ir(F.value)===ze?x(F.value.sections):F instanceof va?x(F.sections):F.eachChild(S))},P=h.value;P._styleExpression&&S(P._styleExpression.expression)}return v}}let cw;var MP={get paint(){return cw=cw||new Cr({"background-color":new qt(se.paint_background["background-color"]),"background-pattern":new Zh(se.paint_background["background-pattern"]),"background-opacity":new qt(se.paint_background["background-opacity"])})}};class zP extends go{constructor(n){super(n,MP)}}let hw;var LP={get paint(){return hw=hw||new Cr({"raster-opacity":new qt(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(se.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(se.paint_raster["raster-saturation"]),"raster-contrast":new qt(se.paint_raster["raster-contrast"]),"raster-resampling":new qt(se.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(se.paint_raster["raster-fade-duration"])})}};class FP extends go{constructor(n){super(n,LP)}}class OP extends go{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class RP{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Ey=63710088e-1;class Pl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pl(E(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return Ey*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Pl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Pl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Pl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const fw=2*Math.PI*Ey;function dw(o){return fw*Math.cos(o*Math.PI/180)}function pw(o){return(180+o)/360}function mw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function gw(o,n){return o/dw(n)}function Ty(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class lp{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Pl.convert(n);return new lp(pw(h.lng),mw(h.lat),gw(s,h.lat))}toLngLat(){return new Pl(360*this.x-180,Ty(this.y))}toAltitude(){return this.z*dw(Ty(this.y))}meterInMercatorCoordinateUnits(){return 1/fw*(n=Ty(this.y),1/Math.cos(n*Math.PI/180));var n}}function yw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Cy{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=pf(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(x=this.y,S=this.z,P=yw(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),F=yw(256*(v+1),256*(x+1),S),P[0]+","+P[1]+","+F[0]+","+F[1]);var v,x,S,P,F;const W=function(Q,ae,fe){let me,Ae="";for(let Re=Q;Re>0;Re--)me=1<<Re-1,Ae+=(ae&me?1:0)+(fe&me?2:0);return Ae}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new M((n.x*s-this.x)*Fr,(n.y*s-this.y)*Fr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=pf(n,s.z,s.z,s.x,s.y)}}class ko{constructor(n,s,h,p,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new Cy(h,+p,+v),this.key=pf(s,n,h,p,v)}clone(){return new ko(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new ko(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ko(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?pf(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):pf(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new ko(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new ko(s,this.wrap,s,h,p),new ko(s,this.wrap,s,h+1,p),new ko(s,this.wrap,s,h,p+1),new ko(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new ko(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new ko(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new lp(n.x-this.wrap,n.y))}}function pf(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+h).toString(36)+s.toString(36)+n.toString(36)}Bt("CanonicalTileID",Cy),Bt("OverscaledTileID",ko,{omit:["posMatrix"]});class _w{constructor(n,s,h,p=1,v=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void be(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const P=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<P;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(P,F)]=this.data[this._idx(P-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,P)]=this.data[this._idx(F,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<P;F++)for(let W=0;W<P;W++){const Q=this.get(F,W);Q>this.max&&(this.max=Q),Q<this.min&&(this.min=Q)}}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Po({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const P=-s*this.dim,F=-h*this.dim;for(let W=x;W<S;W++)for(let Q=p;Q<v;Q++)this.data[this._idx(Q,W)]=n.data[this._idx(Q+P,W+F)]}}Bt("DEMData",_w);class xw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class ww{constructor(n,s,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class bw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ao(Fr,16,0),this.grid3D=new Ao(Fr,16,0),this.featureIndexArray=new xt,this.promoteId=s}insert(n,s,h,p,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const P=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const W=s[F],Q=[1/0,1/0,-1/0,-1/0];for(let ae=0;ae<W.length;ae++){const fe=W[ae];Q[0]=Math.min(Q[0],fe.x),Q[1]=Math.min(Q[1],fe.y),Q[2]=Math.max(Q[2],fe.x),Q[3]=Math.max(Q[3],fe.y)}Q[0]<Fr&&Q[1]<Fr&&Q[2]>=0&&Q[3]>=0&&P.insert(S,Q[0],Q[1],Q[2],Q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Cl.VectorTile(new py(this.rawTileData)).layers,this.sourceLayerCoder=new xw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const v=n.params||{},x=Fr/n.tileSize/n.scale,S=$r(v.filter),P=n.queryGeometry,F=n.queryPadding*x,W=Ew(P),Q=this.grid.query(W.minX-F,W.minY-F,W.maxX+F,W.maxY+F),ae=Ew(n.cameraQueryGeometry),fe=this.grid3D.query(ae.minX-F,ae.minY-F,ae.maxX+F,ae.maxY+F,(Re,Ne,Je,We)=>function(Qe,rt,gt,Ot,Vt){for(const Mt of Qe)if(rt<=Mt.x&&gt<=Mt.y&&Ot>=Mt.x&&Vt>=Mt.y)return!0;const Lt=[new M(rt,gt),new M(rt,Vt),new M(Ot,Vt),new M(Ot,gt)];if(Qe.length>2){for(const Mt of Lt)if(wc(Qe,Mt))return!0}for(let Mt=0;Mt<Qe.length-1;Mt++)if(pA(Qe[Mt],Qe[Mt+1],Lt))return!0;return!1}(n.cameraQueryGeometry,Re-F,Ne-F,Je+F,We+F));for(const Re of fe)Q.push(Re);Q.sort(jP);const me={};let Ae;for(let Re=0;Re<Q.length;Re++){const Ne=Q[Re];if(Ne===Ae)continue;Ae=Ne;const Je=this.featureIndexArray.get(Ne);let We=null;this.loadMatchingFeature(me,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,S,v.layers,v.availableImages,s,h,p,(Qe,rt,gt)=>(We||(We=zu(Qe)),rt.queryIntersectsFeature(P,Qe,gt,We,this.z,n.transform,x,n.pixelPosMatrix)))}return me}loadMatchingFeature(n,s,h,p,v,x,S,P,F,W,Q){const ae=this.bucketLayerIDs[s];if(x&&!function(Re,Ne){for(let Je=0;Je<Re.length;Je++)if(Ne.indexOf(Re[Je])>=0)return!0;return!1}(x,ae))return;const fe=this.sourceLayerCoder.decode(h),me=this.vtLayers[fe].feature(p);if(v.needGeometry){const Re=Lu(me,!0);if(!v.filter(new lr(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!v.filter(new lr(this.tileID.overscaledZ),me))return;const Ae=this.getId(me,fe);for(let Re=0;Re<ae.length;Re++){const Ne=ae[Re];if(x&&x.indexOf(Ne)<0)continue;const Je=P[Ne];if(!Je)continue;let We={};Ae&&W&&(We=W.getState(Je.sourceLayer||"_geojsonTileLayer",Ae));const Qe=k({},F[Ne]);Qe.paint=Sw(Qe.paint,Je.paint,me,We,S),Qe.layout=Sw(Qe.layout,Je.layout,me,We,S);const rt=!Q||Q(me,Je,We);if(!rt)continue;const gt=new ww(me,this.z,this.x,this.y,Ae);gt.layer=Qe;let Ot=n[Ne];Ot===void 0&&(Ot=n[Ne]=[]),Ot.push({featureIndex:p,feature:gt,intersectionZ:rt})}}lookupSymbolFeatures(n,s,h,p,v,x,S,P){const F={};this.loadVTLayers();const W=$r(v);for(const Q of n)this.loadMatchingFeature(F,h,p,Q,W,x,S,P,s);return F}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Sw(o,n,s,h,p){return q(o,(v,x)=>{const S=n instanceof _c?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,p):S})}function Ew(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:s,maxX:h,maxY:p}}function jP(o,n){return n-o}function Tw(o,n,s,h,p){const v=[];for(let x=0;x<o.length;x++){const S=o[x];let P;for(let F=0;F<S.length-1;F++){let W=S[F],Q=S[F+1];W.x<n&&Q.x<n||(W.x<n?W=new M(n,W.y+(n-W.x)/(Q.x-W.x)*(Q.y-W.y))._round():Q.x<n&&(Q=new M(n,W.y+(n-W.x)/(Q.x-W.x)*(Q.y-W.y))._round()),W.y<s&&Q.y<s||(W.y<s?W=new M(W.x+(s-W.y)/(Q.y-W.y)*(Q.x-W.x),s)._round():Q.y<s&&(Q=new M(W.x+(s-W.y)/(Q.y-W.y)*(Q.x-W.x),s)._round()),W.x>=h&&Q.x>=h||(W.x>=h?W=new M(h,W.y+(h-W.x)/(Q.x-W.x)*(Q.y-W.y))._round():Q.x>=h&&(Q=new M(h,W.y+(h-W.x)/(Q.x-W.x)*(Q.y-W.y))._round()),W.y>=p&&Q.y>=p||(W.y>=p?W=new M(W.x+(p-W.y)/(Q.y-W.y)*(Q.x-W.x),p)._round():Q.y>=p&&(Q=new M(W.x+(p-W.y)/(Q.y-W.y)*(Q.x-W.x),p)._round()),P&&W.equals(P[P.length-1])||(P=[W],v.push(P)),P.push(Q)))))}}return v}Bt("FeatureIndex",bw,{omit:["rawTileData","sourceLayerCoder"]});class kl extends M{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new kl(this.x,this.y,this.angle,this.segment)}}function Cw(o,n,s,h,p){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(v),v=o[x]}S+=o[x].dist(o[x+1]),x++;const P=[];let F=0;for(;S<s/2;){const W=o[x],Q=o[x+1];if(!Q)return!1;let ae=o[x-1].angleTo(W)-W.angleTo(Q);for(ae=Math.abs((ae+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:ae}),F+=ae;S-P[0].distance>h;)F-=P.shift().angleDelta;if(F>p)return!1;x++,S+=W.dist(Q)}return!0}function Iw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function Aw(o,n,s){return o?.6*n*s:0}function Pw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function DP(o,n,s,h,p,v){const x=Aw(s,p,v),S=Pw(s,h)*v;let P=0;const F=Iw(o)/2;for(let W=0;W<o.length-1;W++){const Q=o[W],ae=o[W+1],fe=Q.dist(ae);if(P+fe>F){const me=(F-P)/fe,Ae=wi.number(Q.x,ae.x,me),Re=wi.number(Q.y,ae.y,me),Ne=new kl(Ae,Re,ae.angleTo(Q),W);return Ne._round(),!x||Cw(o,Ne,S,x,n)?Ne:void 0}P+=fe}}function BP(o,n,s,h,p,v,x,S,P){const F=Aw(h,v,x),W=Pw(h,p),Q=W*x,ae=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return n-Q<n/4&&(n=Q+n/4),kw(o,ae?n/2*S%n:(W/2+2*v)*x*S%n,n,F,s,Q,ae,!1,P)}function kw(o,n,s,h,p,v,x,S,P){const F=v/2,W=Iw(o);let Q=0,ae=n-s,fe=[];for(let me=0;me<o.length-1;me++){const Ae=o[me],Re=o[me+1],Ne=Ae.dist(Re),Je=Re.angleTo(Ae);for(;ae+s<Q+Ne;){ae+=s;const We=(ae-Q)/Ne,Qe=wi.number(Ae.x,Re.x,We),rt=wi.number(Ae.y,Re.y,We);if(Qe>=0&&Qe<P&&rt>=0&&rt<P&&ae-F>=0&&ae+F<=W){const gt=new kl(Qe,rt,Je,me);gt._round(),h&&!Cw(o,gt,v,h,p)||fe.push(gt)}}Q+=Ne}return S||fe.length||x||(fe=kw(o,Q/2,s,h,p,v,x,!0,P)),fe}Bt("Anchor",kl);const Pc=eo;function Mw(o,n,s,h){const p=[],v=o.image,x=v.pixelRatio,S=v.paddedRect.w-2*Pc,P=v.paddedRect.h-2*Pc,F=o.right-o.left,W=o.bottom-o.top,Q=v.stretchX||[[0,S]],ae=v.stretchY||[[0,P]],fe=(Ct,Nt)=>Ct+Nt[1]-Nt[0],me=Q.reduce(fe,0),Ae=ae.reduce(fe,0),Re=S-me,Ne=P-Ae;let Je=0,We=me,Qe=0,rt=Ae,gt=0,Ot=Re,Vt=0,Lt=Ne;if(v.content&&h){const Ct=v.content;Je=up(Q,0,Ct[0]),Qe=up(ae,0,Ct[1]),We=up(Q,Ct[0],Ct[2]),rt=up(ae,Ct[1],Ct[3]),gt=Ct[0]-Je,Vt=Ct[1]-Qe,Ot=Ct[2]-Ct[0]-We,Lt=Ct[3]-Ct[1]-rt}const Mt=(Ct,Nt,Pt,bt)=>{const tn=cp(Ct.stretch-Je,We,F,o.left),Wt=hp(Ct.fixed-gt,Ot,Ct.stretch,me),Cn=cp(Nt.stretch-Qe,rt,W,o.top),cr=hp(Nt.fixed-Vt,Lt,Nt.stretch,Ae),fr=cp(Pt.stretch-Je,We,F,o.left),Hr=hp(Pt.fixed-gt,Ot,Pt.stretch,me),vo=cp(bt.stretch-Qe,rt,W,o.top),Bi=hp(bt.fixed-Vt,Lt,bt.stretch,Ae),Or=new M(tn,Cn),si=new M(fr,Cn),mi=new M(fr,vo),Ni=new M(tn,vo),Ui=new M(Wt/x,cr/x),Wr=new M(Hr/x,Bi/x),Xr=n*Math.PI/180;if(Xr){const Ti=Math.sin(Xr),to=Math.cos(Xr),no=[to,-Ti,Ti,to];Or._matMult(no),si._matMult(no),Ni._matMult(no),mi._matMult(no)}const Ei=Ct.stretch+Ct.fixed,$i=Nt.stretch+Nt.fixed;return{tl:Or,tr:si,bl:Ni,br:mi,tex:{x:v.paddedRect.x+Pc+Ei,y:v.paddedRect.y+Pc+$i,w:Pt.stretch+Pt.fixed-Ei,h:bt.stretch+bt.fixed-$i},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ui,pixelOffsetBR:Wr,minFontScaleX:Ot/x/F,minFontScaleY:Lt/x/W,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const Ct=zw(Q,Re,me),Nt=zw(ae,Ne,Ae);for(let Pt=0;Pt<Ct.length-1;Pt++){const bt=Ct[Pt],tn=Ct[Pt+1];for(let Wt=0;Wt<Nt.length-1;Wt++)p.push(Mt(bt,Nt[Wt],tn,Nt[Wt+1]))}}else p.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return p}function up(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function zw(o,n,s){const h=[{fixed:-Pc,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:n+Pc,stretch:s}),h}function cp(o,n,s,h){return o/n*s+h}function hp(o,n,s,h){return o-n*s/h}class fp{constructor(n,s,h,p,v,x,S,P,F,W){if(this.boxStartIndex=n.length,F){let Q=x.top,ae=x.bottom;const fe=x.collisionPadding;fe&&(Q-=fe[1],ae+=fe[3]);let me=ae-Q;me>0&&(me=Math.max(10,me),this.circleDiameter=me)}else{let Q=x.top*S-P[0],ae=x.bottom*S+P[2],fe=x.left*S-P[3],me=x.right*S+P[1];const Ae=x.collisionPadding;if(Ae&&(fe-=Ae[0]*S,Q-=Ae[1]*S,me+=Ae[2]*S,ae+=Ae[3]*S),W){const Re=new M(fe,Q),Ne=new M(me,Q),Je=new M(fe,ae),We=new M(me,ae),Qe=W*Math.PI/180;Re._rotate(Qe),Ne._rotate(Qe),Je._rotate(Qe),We._rotate(Qe),fe=Math.min(Re.x,Ne.x,Je.x,We.x),me=Math.max(Re.x,Ne.x,Je.x,We.x),Q=Math.min(Re.y,Ne.y,Je.y,We.y),ae=Math.max(Re.y,Ne.y,Je.y,We.y)}n.emplaceBack(s.x,s.y,fe,Q,me,ae,h,p,v)}this.boxEndIndex=n.length}}class NP{constructor(n=[],s=UP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(p,x)>=0)break;s[n]=x,n=v}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,v=s[n];for(;n<p;){let x=1+(n<<1),S=s[x];const P=x+1;if(P<this.length&&h(s[P],S)<0&&(x=P,S=s[P]),h(S,v)>=0)break;s[n]=S,n=x}s[n]=v}}function UP(o,n){return o<n?-1:o>n?1:0}function $P(o,n=1,s=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const S=o[0];for(let fe=0;fe<S.length;fe++){const me=S[fe];(!fe||me.x<h)&&(h=me.x),(!fe||me.y<p)&&(p=me.y),(!fe||me.x>v)&&(v=me.x),(!fe||me.y>x)&&(x=me.y)}const P=Math.min(v-h,x-p);let F=P/2;const W=new NP([],VP);if(P===0)return new M(h,p);for(let fe=h;fe<v;fe+=P)for(let me=p;me<x;me+=P)W.push(new kc(fe+F,me+F,F,o));let Q=function(fe){let me=0,Ae=0,Re=0;const Ne=fe[0];for(let Je=0,We=Ne.length,Qe=We-1;Je<We;Qe=Je++){const rt=Ne[Je],gt=Ne[Qe],Ot=rt.x*gt.y-gt.x*rt.y;Ae+=(rt.x+gt.x)*Ot,Re+=(rt.y+gt.y)*Ot,me+=3*Ot}return new kc(Ae/me,Re/me,0,fe)}(o),ae=W.length;for(;W.length;){const fe=W.pop();(fe.d>Q.d||!Q.d)&&(Q=fe,s&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,ae)),fe.max-Q.d<=n||(F=fe.h/2,W.push(new kc(fe.p.x-F,fe.p.y-F,F,o)),W.push(new kc(fe.p.x+F,fe.p.y-F,F,o)),W.push(new kc(fe.p.x-F,fe.p.y+F,F,o)),W.push(new kc(fe.p.x+F,fe.p.y+F,F,o)),ae+=4)}return s&&(console.log(`num probes: ${ae}`),console.log(`best distance: ${Q.d}`)),Q.p}function VP(o,n){return n.max-o.max}function kc(o,n,s,h){this.p=new M(o,n),this.h=s,this.d=function(p,v){let x=!1,S=1/0;for(let P=0;P<v.length;P++){const F=v[P];for(let W=0,Q=F.length,ae=Q-1;W<Q;ae=W++){const fe=F[W],me=F[ae];fe.y>p.y!=me.y>p.y&&p.x<(me.x-fe.x)*(p.y-fe.y)/(me.y-fe.y)+fe.x&&(x=!x),S=Math.min(S,mx(p,fe,me))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var pi;l.aq=void 0,(pi=l.aq||(l.aq={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";const Ml=7,Iy=Number.POSITIVE_INFINITY;function Lw(o,n){return n[1]!==Iy?function(s,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-Ml;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+Ml}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(s,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ml;break;case"bottom-right":case"bottom-left":v=-x+Ml;break;case"bottom":v=-h+Ml;break;case"top":v=h-Ml}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function Fw(o,n,s){var h;const p=o.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const S=v.values,P=[];for(let F=0;F<S.length;F+=2){const W=P[F]=S[F],Q=S[F+1].map(ae=>ae*Zr);W.startsWith("top")?Q[1]-=Ml:W.startsWith("bottom")&&(Q[1]+=Ml),P[F+1]=Q}return new zi(P)}const x=p.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},s)*Zr,Iy]:p.get("text-offset").evaluate(n,{},s).map(F=>F*Zr);const P=[];for(const F of x)P.push(F,Lw(F,S));return new zi(P)}return null}function Ay(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function GP(o,n,s,h,p,v,x,S,P,F,W){let Q=v.textMaxSize.evaluate(n,{});Q===void 0&&(Q=x);const ae=o.layers[0].layout,fe=ae.get("icon-offset").evaluate(n,{},W),me=Rw(s.horizontal),Ae=x/24,Re=o.tilePixelRatio*Ae,Ne=o.tilePixelRatio*Q/24,Je=o.tilePixelRatio*S,We=o.tilePixelRatio*ae.get("symbol-spacing"),Qe=ae.get("text-padding")*o.tilePixelRatio,rt=function(bt,tn,Wt,Cn=1){const cr=bt.get("icon-padding").evaluate(tn,{},Wt),fr=cr&&cr.values;return[fr[0]*Cn,fr[1]*Cn,fr[2]*Cn,fr[3]*Cn]}(ae,n,W,o.tilePixelRatio),gt=ae.get("text-max-angle")/180*Math.PI,Ot=ae.get("text-rotation-alignment")!=="viewport"&&ae.get("symbol-placement")!=="point",Vt=ae.get("icon-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",Lt=ae.get("symbol-placement"),Mt=We/2,Ct=ae.get("icon-text-fit");let Nt;h&&Ct!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Nt=ow(h,s.vertical,Ct,ae.get("icon-text-fit-padding"),fe,Ae)),me&&(h=ow(h,me,Ct,ae.get("icon-text-fit-padding"),fe,Ae)));const Pt=(bt,tn)=>{tn.x<0||tn.x>=Fr||tn.y<0||tn.y>=Fr||function(Wt,Cn,cr,fr,Hr,vo,Bi,Or,si,mi,Ni,Ui,Wr,Xr,Ei,$i,Ti,to,no,qr,zn,Ci,gi,Kr,ns){const Es=Wt.addToLineVertexArray(Cn,cr);let Ts,Fa,rs,Mo,ro=0,Oa=0,yf=0,Nw=0,Ry=-1,jy=-1;const Ra={};let Uw=ka("");if(Wt.allowVerticalPlacement&&fr.vertical){const Ii=Or.layout.get("text-rotate").evaluate(zn,{},Kr)+90;rs=new fp(si,Cn,mi,Ni,Ui,fr.vertical,Wr,Xr,Ei,Ii),Bi&&(Mo=new fp(si,Cn,mi,Ni,Ui,Bi,Ti,to,Ei,Ii))}if(Hr){const Ii=Or.layout.get("icon-rotate").evaluate(zn,{}),zo=Or.layout.get("icon-text-fit")!=="none",Ou=Mw(Hr,Ii,gi,zo),Is=Bi?Mw(Bi,Ii,gi,zo):void 0;Fa=new fp(si,Cn,mi,Ni,Ui,Hr,Ti,to,!1,Ii),ro=4*Ou.length;const Ru=Wt.iconSizeData;let ea=null;Ru.kind==="source"?(ea=[Qs*Or.layout.get("icon-size").evaluate(zn,{})],ea[0]>Al&&be(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${df}. Reduce your "icon-size".`)):Ru.kind==="composite"&&(ea=[Qs*Ci.compositeIconSizes[0].evaluate(zn,{},Kr),Qs*Ci.compositeIconSizes[1].evaluate(zn,{},Kr)],(ea[0]>Al||ea[1]>Al)&&be(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${df}. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,Ou,ea,qr,no,zn,l.ai.none,Cn,Es.lineStartIndex,Es.lineLength,-1,Kr),Ry=Wt.icon.placedSymbolArray.length-1,Is&&(Oa=4*Is.length,Wt.addSymbols(Wt.icon,Is,ea,qr,no,zn,l.ai.vertical,Cn,Es.lineStartIndex,Es.lineLength,-1,Kr),jy=Wt.icon.placedSymbolArray.length-1)}const $w=Object.keys(fr.horizontal);for(const Ii of $w){const zo=fr.horizontal[Ii];if(!Ts){Uw=ka(zo.text);const Is=Or.layout.get("text-rotate").evaluate(zn,{},Kr);Ts=new fp(si,Cn,mi,Ni,Ui,zo,Wr,Xr,Ei,Is)}const Ou=zo.positionedLines.length===1;if(yf+=Ow(Wt,Cn,zo,vo,Or,Ei,zn,$i,Es,fr.vertical?l.ai.horizontal:l.ai.horizontalOnly,Ou?$w:[Ii],Ra,Ry,Ci,Kr),Ou)break}fr.vertical&&(Nw+=Ow(Wt,Cn,fr.vertical,vo,Or,Ei,zn,$i,Es,l.ai.vertical,["vertical"],Ra,jy,Ci,Kr));const WP=Ts?Ts.boxStartIndex:Wt.collisionBoxArray.length,XP=Ts?Ts.boxEndIndex:Wt.collisionBoxArray.length,qP=rs?rs.boxStartIndex:Wt.collisionBoxArray.length,KP=rs?rs.boxEndIndex:Wt.collisionBoxArray.length,YP=Fa?Fa.boxStartIndex:Wt.collisionBoxArray.length,JP=Fa?Fa.boxEndIndex:Wt.collisionBoxArray.length,QP=Mo?Mo.boxStartIndex:Wt.collisionBoxArray.length,ek=Mo?Mo.boxEndIndex:Wt.collisionBoxArray.length;let Cs=-1;const pp=(Ii,zo)=>Ii&&Ii.circleDiameter?Math.max(Ii.circleDiameter,zo):zo;Cs=pp(Ts,Cs),Cs=pp(rs,Cs),Cs=pp(Fa,Cs),Cs=pp(Mo,Cs);const Vw=Cs>-1?1:0;Vw&&(Cs*=ns/Zr),Wt.glyphOffsetArray.length>=Ac.MAX_GLYPHS&&be("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zn.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,zn.sortKey);const tk=Fw(Or,zn,Kr),[nk,rk]=function(Ii,zo){const Ou=Ii.length,Is=zo==null?void 0:zo.values;if((Is==null?void 0:Is.length)>0)for(let Ru=0;Ru<Is.length;Ru+=2){const ea=Is[Ru+1];Ii.emplaceBack(l.aq[Is[Ru]],ea[0],ea[1])}return[Ou,Ii.length]}(Wt.textAnchorOffsets,tk);Wt.symbolInstances.emplaceBack(Cn.x,Cn.y,Ra.right>=0?Ra.right:-1,Ra.center>=0?Ra.center:-1,Ra.left>=0?Ra.left:-1,Ra.vertical||-1,Ry,jy,Uw,WP,XP,qP,KP,YP,JP,QP,ek,mi,yf,Nw,ro,Oa,Vw,0,Wr,Cs,nk,rk)}(o,tn,bt,s,h,p,Nt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Re,[Qe,Qe,Qe,Qe],Ot,P,Je,rt,Vt,fe,n,v,F,W,x)};if(Lt==="line")for(const bt of Tw(n.geometry,0,0,Fr,Fr)){const tn=BP(bt,We,gt,s.vertical||me,h,24,Ne,o.overscaling,Fr);for(const Wt of tn)me&&ZP(o,me.text,Mt,Wt)||Pt(bt,Wt)}else if(Lt==="line-center"){for(const bt of n.geometry)if(bt.length>1){const tn=DP(bt,gt,s.vertical||me,h,24,Ne);tn&&Pt(bt,tn)}}else if(n.type==="Polygon")for(const bt of sy(n.geometry,0)){const tn=$P(bt,16);Pt(bt[0],new kl(tn.x,tn.y,0))}else if(n.type==="LineString")for(const bt of n.geometry)Pt(bt,new kl(bt[0].x,bt[0].y,0));else if(n.type==="Point")for(const bt of n.geometry)for(const tn of bt)Pt([tn],new kl(tn.x,tn.y,0))}function Ow(o,n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me){const Ae=function(Je,We,Qe,rt,gt,Ot,Vt,Lt){const Mt=rt.layout.get("text-rotate").evaluate(Ot,{})*Math.PI/180,Ct=[];for(const Nt of We.positionedLines)for(const Pt of Nt.positionedGlyphs){if(!Pt.rect)continue;const bt=Pt.rect||{};let tn=Jx+1,Wt=!0,Cn=1,cr=0;const fr=(gt||Lt)&&Pt.vertical,Hr=Pt.metrics.advance*Pt.scale/2;if(Lt&&We.verticalizable&&(cr=Nt.lineOffset/2-(Pt.imageName?-(Zr-Pt.metrics.width*Pt.scale)/2:(Pt.scale-1)*Zr)),Pt.imageName){const qr=Vt[Pt.imageName];Wt=qr.sdf,Cn=qr.pixelRatio,tn=eo/Cn}const vo=gt?[Pt.x+Hr,Pt.y]:[0,0];let Bi=gt?[0,0]:[Pt.x+Hr+Qe[0],Pt.y+Qe[1]-cr],Or=[0,0];fr&&(Or=Bi,Bi=[0,0]);const si=Pt.metrics.isDoubleResolution?2:1,mi=(Pt.metrics.left-tn)*Pt.scale-Hr+Bi[0],Ni=(-Pt.metrics.top-tn)*Pt.scale+Bi[1],Ui=mi+bt.w/si*Pt.scale/Cn,Wr=Ni+bt.h/si*Pt.scale/Cn,Xr=new M(mi,Ni),Ei=new M(Ui,Ni),$i=new M(mi,Wr),Ti=new M(Ui,Wr);if(fr){const qr=new M(-Hr,Hr-hf),zn=-Math.PI/2,Ci=Zr/2-Hr,gi=new M(5-hf-Ci,-(Pt.imageName?Ci:0)),Kr=new M(...Or);Xr._rotateAround(zn,qr)._add(gi)._add(Kr),Ei._rotateAround(zn,qr)._add(gi)._add(Kr),$i._rotateAround(zn,qr)._add(gi)._add(Kr),Ti._rotateAround(zn,qr)._add(gi)._add(Kr)}if(Mt){const qr=Math.sin(Mt),zn=Math.cos(Mt),Ci=[zn,-qr,qr,zn];Xr._matMult(Ci),Ei._matMult(Ci),$i._matMult(Ci),Ti._matMult(Ci)}const to=new M(0,0),no=new M(0,0);Ct.push({tl:Xr,tr:Ei,bl:$i,br:Ti,tex:bt,writingMode:We.writingMode,glyphOffset:vo,sectionIndex:Pt.sectionIndex,isSDF:Wt,pixelOffsetTL:to,pixelOffsetBR:no,minFontScaleX:0,minFontScaleY:0})}return Ct}(0,s,S,p,v,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ne=null;Re.kind==="source"?(Ne=[Qs*p.layout.get("text-size").evaluate(x,{})],Ne[0]>Al&&be(`${o.layerIds[0]}: Value for "text-size" is >= ${df}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ne=[Qs*fe.compositeTextSizes[0].evaluate(x,{},me),Qs*fe.compositeTextSizes[1].evaluate(x,{},me)],(Ne[0]>Al||Ne[1]>Al)&&be(`${o.layerIds[0]}: Value for "text-size" is >= ${df}. Reduce your "text-size".`)),o.addSymbols(o.text,Ae,Ne,S,v,x,F,n,P.lineStartIndex,P.lineLength,ae,me);for(const Je of W)Q[Je]=o.text.placedSymbolArray.length-1;return 4*Ae.length}function Rw(o){for(const n in o)return o[n];return null}function ZP(o,n,s,h){const p=o.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else p[n]=[];return p[n].push(h),!1}const jw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Py{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=jw[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new Py(S,x,v,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=jw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return ky(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,P=[0,v.length-1,0],F=[];for(;P.length;){const W=P.pop()||0,Q=P.pop()||0,ae=P.pop()||0;if(Q-ae<=S){for(let Re=ae;Re<=Q;Re++){const Ne=x[2*Re],Je=x[2*Re+1];Ne>=n&&Ne<=h&&Je>=s&&Je<=p&&F.push(v[Re])}continue}const fe=ae+Q>>1,me=x[2*fe],Ae=x[2*fe+1];me>=n&&me<=h&&Ae>=s&&Ae<=p&&F.push(v[fe]),(W===0?n<=me:s<=Ae)&&(P.push(ae),P.push(fe-1),P.push(1-W)),(W===0?h>=me:p>=Ae)&&(P.push(fe+1),P.push(Q),P.push(1-W))}return F}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,S=[0,p.length-1,0],P=[],F=h*h;for(;S.length;){const W=S.pop()||0,Q=S.pop()||0,ae=S.pop()||0;if(Q-ae<=x){for(let Re=ae;Re<=Q;Re++)Bw(v[2*Re],v[2*Re+1],n,s)<=F&&P.push(p[Re]);continue}const fe=ae+Q>>1,me=v[2*fe],Ae=v[2*fe+1];Bw(me,Ae,n,s)<=F&&P.push(p[fe]),(W===0?n-h<=me:s-h<=Ae)&&(S.push(ae),S.push(fe-1),S.push(1-W)),(W===0?n+h>=me:s+h>=Ae)&&(S.push(fe+1),S.push(Q),S.push(1-W))}return P}}function ky(o,n,s,h,p,v){if(p-h<=s)return;const x=h+p>>1;Dw(o,n,x,h,p,v),ky(o,n,s,h,x-1,1-v),ky(o,n,s,x+1,p,1-v)}function Dw(o,n,s,h,p,v){for(;p>h;){if(p-h>600){const F=p-h+1,W=s-h+1,Q=Math.log(F),ae=.5*Math.exp(2*Q/3),fe=.5*Math.sqrt(Q*ae*(F-ae)/F)*(W-F/2<0?-1:1);Dw(o,n,s,Math.max(h,Math.floor(s-W*ae/F+fe)),Math.min(p,Math.floor(s+(F-W)*ae/F+fe)),v)}const x=n[2*s+v];let S=h,P=p;for(mf(o,n,h,s),n[2*p+v]>x&&mf(o,n,h,p);S<P;){for(mf(o,n,S,P),S++,P--;n[2*S+v]<x;)S++;for(;n[2*P+v]>x;)P--}n[2*h+v]===x?mf(o,n,h,P):(P++,mf(o,n,P,p)),P<=s&&(h=P+1),s<=P&&(p=P-1)}}function mf(o,n,s,h){My(o,s,h),My(n,2*s,2*h),My(n,2*s+1,2*h+1)}function My(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Bw(o,n,s,h){const p=o-s,v=n-h;return p*p+v*v}var zy;l.bg=void 0,(zy=l.bg||(l.bg={})).create="create",zy.load="load",zy.fullLoad="fullLoad";let dp=null,gf=[];const Ly=1e3/60,Fy="loadTime",Oy="fullLoadTime",HP={mark(o){performance.mark(o)},frame(o){const n=o;dp!=null&&gf.push(n-dp),dp=n},clearMetrics(){dp=null,gf=[],performance.clearMeasures(Fy),performance.clearMeasures(Oy);for(const o in l.bg)performance.clearMarks(l.bg[o])},getPerformanceMetrics(){performance.measure(Fy,l.bg.create,l.bg.load),performance.measure(Oy,l.bg.create,l.bg.fullLoad);const o=performance.getEntriesByName(Fy)[0].duration,n=performance.getEntriesByName(Oy)[0].duration,s=gf.length,h=1/(gf.reduce((v,x)=>v+x,0)/s/1e3),p=gf.filter(v=>v>Ly).reduce((v,x)=>v+(x-Ly)/Ly,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};l.$=function(o,n,s){var h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae=s[0],Re=s[1],Ne=s[2];return n===o?(o[12]=n[0]*Ae+n[4]*Re+n[8]*Ne+n[12],o[13]=n[1]*Ae+n[5]*Re+n[9]*Ne+n[13],o[14]=n[2]*Ae+n[6]*Re+n[10]*Ne+n[14],o[15]=n[3]*Ae+n[7]*Re+n[11]*Ne+n[15]):(p=n[1],v=n[2],x=n[3],S=n[4],P=n[5],F=n[6],W=n[7],Q=n[8],ae=n[9],fe=n[10],me=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=x,o[4]=S,o[5]=P,o[6]=F,o[7]=W,o[8]=Q,o[9]=ae,o[10]=fe,o[11]=me,o[12]=h*Ae+S*Re+Q*Ne+n[12],o[13]=p*Ae+P*Re+ae*Ne+n[13],o[14]=v*Ae+F*Re+fe*Ne+n[14],o[15]=x*Ae+W*Re+me*Ne+n[15]),o},l.A=bc,l.B=wi,l.C=class{constructor(o,n,s){this.receive=h=>{const p=h.data,v=p.id;if(v&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else ne()||p.mustQueue?(this.tasks[v]=p,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,p)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),p=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(h,p)},this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new RP(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ne()?o:window}send(o,n,s,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=[],S={id:v,type:o,hasCallback:!!s,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Ks(n,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(bl(n.error)):s(null,bl(n.data)))}else{let s=!1;const h=[],p=n.hasCallback?(S,P)=>{s=!0,delete this.cancelCallbacks[o];const F={id:o,type:"<response>",sourceMapId:this.mapId,error:S?Ks(S):null,data:Ks(P,h)};this.target.postMessage(F,{transfer:h})}:S=>{s=!0};let v=null;const x=bl(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,p);else if("getWorkerSource"in this.parent){const S=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,S[0],x.source)[S[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=qt,l.E=gn,l.F=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},l.G=pw,l.H=mw,l.I=gy,l.J=$,l.K=U,l.L=Pl,l.M=Se,l.N=Fr,l.O=ko,l.P=M,l.Q=pr,l.R=Po,l.S=ur,l.T=$d,l.U=lp,l.V=class extends Aa{},l.W=Cy,l.X=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");Ut(o[h])||(s.crossOrigin="Anonymous"),p.src=o[h],s.appendChild(p)}return{cancel:()=>{}}},l.Y=je,l.Z=function(){var o=new bc(16);return bc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l._=b,l.a=ye,l.a$=class extends he{},l.a0=function(o,n,s){var h=s[0],p=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.a1=_x,l.a2=function(){return H++},l.a3=Fe,l.a4=Ac,l.a5=function(){Ji.isLoading()||Ji.isLoaded()||Vh()!=="deferred"||Ud()},l.a6=$r,l.a7=Lu,l.a8=lr,l.a9=ww,l.aA=Iu,l.aB=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=O(o[s],n[o[s].ref]));return o},l.aC=function(o){if(o.type==="custom")return new OP(o);switch(o.type){case"background":return new zP(o);case"circle":return new yA(o);case"fill":return new jA(o);case"fill-extrusion":return new JA(o);case"heatmap":return new _A(o);case"hillshade":return new wA(o);case"line":return new sP(o);case"raster":return new FP(o);case"symbol":return new ap(o)}},l.aD=ve,l.aE=function(o,n){if(!o)return[{command:Be.setStyle,args:[n]}];let s=[];try{if(!pe(o.version,n.version))return[{command:Be.setStyle,args:[n]}];pe(o.center,n.center)||s.push({command:Be.setCenter,args:[n.center]}),pe(o.zoom,n.zoom)||s.push({command:Be.setZoom,args:[n.zoom]}),pe(o.bearing,n.bearing)||s.push({command:Be.setBearing,args:[n.bearing]}),pe(o.pitch,n.pitch)||s.push({command:Be.setPitch,args:[n.pitch]}),pe(o.sprite,n.sprite)||s.push({command:Be.setSprite,args:[n.sprite]}),pe(o.glyphs,n.glyphs)||s.push({command:Be.setGlyphs,args:[n.glyphs]}),pe(o.transition,n.transition)||s.push({command:Be.setTransition,args:[n.transition]}),pe(o.light,n.light)||s.push({command:Be.setLight,args:[n.light]});const h={},p=[];(function(x,S,P,F){let W;for(W in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,W)&&(Object.prototype.hasOwnProperty.call(S,W)||lt(W,P,F));for(W in S)Object.prototype.hasOwnProperty.call(S,W)&&(Object.prototype.hasOwnProperty.call(x,W)?pe(x[W],S[W])||(x[W].type==="geojson"&&S[W].type==="geojson"&&L(x,S,W)?P.push({command:Be.setGeoJSONSourceData,args:[W,S[W].data]}):le(W,S,P,F)):et(W,S,P))})(o.sources,n.sources,p,h);const v=[];o.layers&&o.layers.forEach(x=>{h[x.source]?s.push({command:Be.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(p),function(x,S,P){S=S||[];const F=(x=x||[]).map(Ee),W=S.map(Ee),Q=x.reduce(Ge,{}),ae=S.reduce(Ge,{}),fe=F.slice(),me=Object.create(null);let Ae,Re,Ne,Je,We,Qe,rt;for(Ae=0,Re=0;Ae<F.length;Ae++)Ne=F[Ae],Object.prototype.hasOwnProperty.call(ae,Ne)?Re++:(P.push({command:Be.removeLayer,args:[Ne]}),fe.splice(fe.indexOf(Ne,Re),1));for(Ae=0,Re=0;Ae<W.length;Ae++)Ne=W[W.length-1-Ae],fe[fe.length-1-Ae]!==Ne&&(Object.prototype.hasOwnProperty.call(Q,Ne)?(P.push({command:Be.removeLayer,args:[Ne]}),fe.splice(fe.lastIndexOf(Ne,fe.length-Re),1)):Re++,Qe=fe[fe.length-Ae],P.push({command:Be.addLayer,args:[ae[Ne],Qe]}),fe.splice(fe.length-Ae,0,Ne),me[Ne]=!0);for(Ae=0;Ae<W.length;Ae++)if(Ne=W[Ae],Je=Q[Ne],We=ae[Ne],!me[Ne]&&!pe(Je,We))if(pe(Je.source,We.source)&&pe(Je["source-layer"],We["source-layer"])&&pe(Je.type,We.type)){for(rt in D(Je.layout,We.layout,P,Ne,null,Be.setLayoutProperty),D(Je.paint,We.paint,P,Ne,null,Be.setPaintProperty),pe(Je.filter,We.filter)||P.push({command:Be.setFilter,args:[Ne,We.filter]}),pe(Je.minzoom,We.minzoom)&&pe(Je.maxzoom,We.maxzoom)||P.push({command:Be.setLayerZoomRange,args:[Ne,We.minzoom,We.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?D(Je[rt],We[rt],P,Ne,rt.slice(6),Be.setPaintProperty):pe(Je[rt],We[rt])||P.push({command:Be.setLayerProperty,args:[Ne,rt,We[rt]]}));for(rt in We)Object.prototype.hasOwnProperty.call(We,rt)&&!Object.prototype.hasOwnProperty.call(Je,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?D(Je[rt],We[rt],P,Ne,rt.slice(6),Be.setPaintProperty):pe(Je[rt],We[rt])||P.push({command:Be.setLayerProperty,args:[Ne,rt,We[rt]]}))}else P.push({command:Be.removeLayer,args:[Ne]}),Qe=fe[fe.lastIndexOf(Ne)+1],P.push({command:Be.addLayer,args:[We,Qe]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:Be.setStyle,args:[n]}]}return s},l.aF=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.aG=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},l.aH=q,l.aI=ee,l.aJ=Au,l.aK=function(o){return o({pluginStatus:Ri,pluginURL:Ys}),Au.on("pluginStateChange",o),o},l.aL=class extends Ma{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.aM=xc,l.aN=class extends Ma{constructor(o,n){super(o,n),this.current=Xg}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.aO=Hd,l.aP=class extends Ma{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.aQ=class extends Ma{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.aR=Wd,l.aS=function(o,n,s,h,p,v,x){var S=1/(n-s),P=1/(h-p),F=1/(v-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(n+s)*S,o[13]=(p+h)*P,o[14]=(x+v)*F,o[15]=1,o},l.aT=Vn,l.aU=gA,l.aV=class extends f{},l.aW=cP,l.aX=class extends _{},l.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.aZ=Ex,l.a_=Et,l.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const x=p||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},l.ab=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},l.ac=function(o){if(ie==null){const n=o.navigator?o.navigator.userAgent:null;ie=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ie},l.ad=N,l.ae=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[0],x=n[1],S=n[2],P=n[3],F=n[4],W=n[5],Q=n[6],ae=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+F*h,o[1]=x*p+W*h,o[2]=S*p+Q*h,o[3]=P*p+ae*h,o[4]=F*p-v*h,o[5]=W*p-x*h,o[6]=Q*p-S*h,o[7]=ae*p-P*h,o},l.af=function(o){var n=new bc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.ag=Yd,l.ah=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,S=p?N(fi.interpolationFactor(p,n,v,x),0,1):0;o.kind==="camera"?h=wi.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},l.aj=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/Qs:o.kind==="composite"?wi.number(h/Qs,p/Qs,s):n},l.ak=xy,l.al=function(o,n,s,h){const p=n.y-o.y,v=n.x-o.x,x=h.y-s.y,S=h.x-s.x,P=x*v-S*p;if(P===0)return null;const F=(S*(o.y-s.y)-x*(o.x-s.x))/P;return new M(o.x+F*v,o.y+F*p)},l.am=Tw,l.an=dx,l.ao=Qg,l.ap=Zr,l.ar=_y,l.as=function(o,n){var s=n[0],h=n[1],p=n[2],v=n[3],x=n[4],S=n[5],P=n[6],F=n[7],W=n[8],Q=n[9],ae=n[10],fe=n[11],me=n[12],Ae=n[13],Re=n[14],Ne=n[15],Je=s*S-h*x,We=s*P-p*x,Qe=s*F-v*x,rt=h*P-p*S,gt=h*F-v*S,Ot=p*F-v*P,Vt=W*Ae-Q*me,Lt=W*Re-ae*me,Mt=W*Ne-fe*me,Ct=Q*Re-ae*Ae,Nt=Q*Ne-fe*Ae,Pt=ae*Ne-fe*Re,bt=Je*Pt-We*Nt+Qe*Ct+rt*Mt-gt*Lt+Ot*Vt;return bt?(o[0]=(S*Pt-P*Nt+F*Ct)*(bt=1/bt),o[1]=(p*Nt-h*Pt-v*Ct)*bt,o[2]=(Ae*Ot-Re*gt+Ne*rt)*bt,o[3]=(ae*gt-Q*Ot-fe*rt)*bt,o[4]=(P*Mt-x*Pt-F*Lt)*bt,o[5]=(s*Pt-p*Mt+v*Lt)*bt,o[6]=(Re*Qe-me*Ot-Ne*We)*bt,o[7]=(W*Ot-ae*Qe+fe*We)*bt,o[8]=(x*Nt-S*Mt+F*Vt)*bt,o[9]=(h*Mt-s*Nt-v*Vt)*bt,o[10]=(me*gt-Ae*Qe+Ne*Je)*bt,o[11]=(Q*Qe-W*gt-fe*Je)*bt,o[12]=(S*Lt-x*Ct-P*Vt)*bt,o[13]=(s*Ct-h*Lt+p*Vt)*bt,o[14]=(Ae*We-me*rt-Re*Je)*bt,o[15]=(W*rt-Q*We+ae*Je)*bt,o):null},l.at=Ay,l.au=vy,l.av=Py,l.aw=function(){const o={},n=se.$version;for(const s in se.$root){const h=se.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},l.ax=Be,l.ay=jd,l.az=vt,l.b=function(o,n){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=ii,l.b1=function(o,n){var s=o[0],h=o[1],p=o[2],v=o[3],x=o[4],S=o[5],P=o[6],F=o[7],W=o[8],Q=o[9],ae=o[10],fe=o[11],me=o[12],Ae=o[13],Re=o[14],Ne=o[15],Je=n[0],We=n[1],Qe=n[2],rt=n[3],gt=n[4],Ot=n[5],Vt=n[6],Lt=n[7],Mt=n[8],Ct=n[9],Nt=n[10],Pt=n[11],bt=n[12],tn=n[13],Wt=n[14],Cn=n[15];return Math.abs(s-Je)<=Di*Math.max(1,Math.abs(s),Math.abs(Je))&&Math.abs(h-We)<=Di*Math.max(1,Math.abs(h),Math.abs(We))&&Math.abs(p-Qe)<=Di*Math.max(1,Math.abs(p),Math.abs(Qe))&&Math.abs(v-rt)<=Di*Math.max(1,Math.abs(v),Math.abs(rt))&&Math.abs(x-gt)<=Di*Math.max(1,Math.abs(x),Math.abs(gt))&&Math.abs(S-Ot)<=Di*Math.max(1,Math.abs(S),Math.abs(Ot))&&Math.abs(P-Vt)<=Di*Math.max(1,Math.abs(P),Math.abs(Vt))&&Math.abs(F-Lt)<=Di*Math.max(1,Math.abs(F),Math.abs(Lt))&&Math.abs(W-Mt)<=Di*Math.max(1,Math.abs(W),Math.abs(Mt))&&Math.abs(Q-Ct)<=Di*Math.max(1,Math.abs(Q),Math.abs(Ct))&&Math.abs(ae-Nt)<=Di*Math.max(1,Math.abs(ae),Math.abs(Nt))&&Math.abs(fe-Pt)<=Di*Math.max(1,Math.abs(fe),Math.abs(Pt))&&Math.abs(me-bt)<=Di*Math.max(1,Math.abs(me),Math.abs(bt))&&Math.abs(Ae-tn)<=Di*Math.max(1,Math.abs(Ae),Math.abs(tn))&&Math.abs(Re-Wt)<=Di*Math.max(1,Math.abs(Re),Math.abs(Wt))&&Math.abs(Ne-Cn)<=Di*Math.max(1,Math.abs(Ne),Math.abs(Cn))},l.b2=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.b3=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},l.b4=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.b5=E,l.b6=vw,l.b7=gw,l.b8=function(o,n,s,h,p){var v,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},l.b9=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[4],x=n[5],S=n[6],P=n[7],F=n[8],W=n[9],Q=n[10],ae=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+F*h,o[5]=x*p+W*h,o[6]=S*p+Q*h,o[7]=P*p+ae*h,o[8]=F*p-v*h,o[9]=W*p-x*h,o[10]=Q*p-S*h,o[11]=ae*p-P*h,o},l.bA=Zx,l.bB=_s,l.bC=Ji,l.ba=re,l.bb=Z,l.bc=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.bd=class extends Mu{},l.be=Ey,l.bf=HP,l.bh=ct,l.bi=function(o,n,s=!1){if(Ri===Dh||Ri===Bh||Ri===Nh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ys=Ze.resolveURL(o),Ri=Dh,Uh=n,$h(),s||Ud()},l.bj=Vh,l.bk=function(o,n){const s={};for(let p=0;p<o.length;p++){const v=n&&n[o[p].id]||Sa(o[p]);n&&(n[o[p].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(o[p])}const h=[];for(const p in s)h.push(s[p]);return h},l.bl=Bt,l.bm=xw,l.bn=bw,l.bo=ew,l.bp=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Fr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new lr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new lr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new lr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:W}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new lr(F),o.canonical),h["text-size"].possiblyEvaluate(new lr(W),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:W}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new lr(F),o.canonical),h["icon-size"].possiblyEvaluate(new lr(W),o.canonical)]}const v=s.get("text-line-height")*Zr,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),P=s.get("text-size");for(const F of o.bucket.features){const W=s.get("text-font").evaluate(F,{},o.canonical).join(","),Q=P.evaluate(F,{},o.canonical),ae=p.layoutTextSize.evaluate(F,{},o.canonical),fe=p.layoutIconSize.evaluate(F,{},o.canonical),me={horizontal:{},vertical:void 0},Ae=F.text;let Re,Ne=[0,0];if(Ae){const Qe=Ae.toString(),rt=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*Zr,gt=Rh(Qe)?rt:0,Ot=s.get("text-anchor").evaluate(F,{},o.canonical),Vt=Fw(n,F,o.canonical);if(!Vt){const Pt=s.get("text-radial-offset").evaluate(F,{},o.canonical);Ne=Pt?Lw(Ot,[Pt*Zr,Iy]):s.get("text-offset").evaluate(F,{},o.canonical).map(bt=>bt*Zr)}let Lt=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const Mt=s.get("symbol-placement"),Ct=Mt==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*Zr:0,Nt=()=>{o.bucket.allowVerticalPlacement&&Oh(Qe)&&(me.vertical=ip(Ae,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ot,"left",gt,Ne,l.ai.vertical,!0,Mt,ae,Q))};if(!x&&Vt){const Pt=new Set;if(Lt==="auto")for(let tn=0;tn<Vt.values.length;tn+=2)Pt.add(Ay(Vt.values[tn]));else Pt.add(Lt);let bt=!1;for(const tn of Pt)if(!me.horizontal[tn])if(bt)me.horizontal[tn]=me.horizontal[0];else{const Wt=ip(Ae,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,"center",tn,gt,Ne,l.ai.horizontal,!1,Mt,ae,Q);Wt&&(me.horizontal[tn]=Wt,bt=Wt.positionedLines.length===1)}Nt()}else{Lt==="auto"&&(Lt=Ay(Ot));const Pt=ip(Ae,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ot,Lt,gt,Ne,l.ai.horizontal,!1,Mt,ae,Q);Pt&&(me.horizontal[Lt]=Pt),Nt(),Oh(Qe)&&x&&S&&(me.vertical=ip(Ae,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ot,Lt,gt,Ne,l.ai.vertical,!1,Mt,ae,Q))}}let Je=!1;if(F.icon&&F.icon.name){const Qe=o.imageMap[F.icon.name];Qe&&(Re=IP(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),Je=!!Qe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&be("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qe.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const We=Rw(me.horizontal)||me.vertical;o.bucket.iconsInText=!!We&&We.iconsInText,(We||Re)&&GP(o.bucket,F,me,Re,o.imageMap,p,ae,fe,Ne,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.bq=fy,l.br=uy,l.bs=hy,l.bt=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.bu=py,l.bv=Cl,l.bw=function(o,n,s,h,p){return b(this,void 0,void 0,function*(){if(U())try{return yield Se(o,n,s,h,p)}catch{}return function(v,x,S,P,F){const W=v.width,Q=v.height;$e&&Pe||($e=new OffscreenCanvas(W,Q),Pe=$e.getContext("2d",{willReadFrequently:!0})),$e.width=W,$e.height=Q,Pe.drawImage(v,0,0,W,Q);const ae=Pe.getImageData(x,S,P,F);return Pe.clearRect(0,0,W,Q),ae.data}(o,n,s,h,p)})},l.bx=_w,l.by=w,l.bz=A,l.c=nt,l.d=function(o,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=Te})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(h):Te},l.e=k,l.f=function(o,n){return St(k(o,{type:"json"}),n)},l.g=It,l.h=Ze,l.i=ne,l.j=on,l.k=yn,l.l=Gt,l.m=St,l.n=function(o){return new py(o).readFields(wP,[])},l.o=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((x,S)=>{n(x,(P,F)=>{P&&(v=P),p[S]=F,--h==0&&s(v,p)})})},l.p=Qx,l.q=nf,l.r=Cr,l.s=Ut,l.t=qo,l.u=Ft,l.v=se,l.w=be,l.x=Ca,l.y=tr,l.z=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}}}),d(["./shared"],function(l){class b{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,ce){for(const we of oe){this._layerConfigs[we.id]=we;const Ce=this._layers[we.id]=l.aC(we);Ce._featureFilter=l.a6(Ce.filter),this.keyCache[we.id]&&delete this.keyCache[we.id]}for(const we of ce)delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we];this.familiesBySource={};const _e=l.bk(Object.values(this._layerConfigs),this.keyCache);for(const we of _e){const Ce=we.map(ht=>this._layers[ht.id]),He=Ce[0];if(He.visibility==="none")continue;const Ve=He.source||"";let Oe=this.familiesBySource[Ve];Oe||(Oe=this.familiesBySource[Ve]={});const qe=He.sourceLayer||"_geojsonTileLayer";let ut=Oe[qe];ut||(ut=Oe[qe]=[]),ut.push(Ce)}}}class w{constructor(oe){const ce={},_e=[];for(const Ve in oe){const Oe=oe[Ve],qe=ce[Ve]={};for(const ut in Oe){const ht=Oe[+ut];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const mt={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};_e.push(mt),qe[ut]={rect:mt,metrics:ht.metrics}}}const{w:we,h:Ce}=l.p(_e),He=new l.q({width:we||1,height:Ce||1});for(const Ve in oe){const Oe=oe[Ve];for(const qe in Oe){const ut=Oe[+qe];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const ht=ce[Ve][qe].rect;l.q.copy(ut.bitmap,He,{x:0,y:0},{x:ht.x+1,y:ht.y+1},ut.bitmap)}}this.image=He,this.positions=ce}}l.bl("GlyphAtlas",w);class A{constructor(oe){this.tileID=new l.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,ce,_e,we,Ce){this.status="parsing",this.data=oe,this.collisionBoxArray=new l.a3;const He=new l.bm(Object.keys(oe.layers).sort()),Ve=new l.bn(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const Oe={},qe={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:_e},ut=ce.familiesBySource[this.source];for(const Fn in ut){const Mn=oe.layers[Fn];if(!Mn)continue;Mn.version===1&&l.w(`Vector tile source "${this.source}" layer "${Fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Jr=He.encode(Fn),qn=[];for(let wr=0;wr<Mn.length;wr++){const Br=Mn.feature(wr),ti=Ve.getId(Br,Fn);qn.push({feature:Br,id:ti,index:wr,sourceLayerIndex:Jr})}for(const wr of ut[Fn]){const Br=wr[0];Br.source!==this.source&&l.w(`layer.source = ${Br.source} does not equal this.source = ${this.source}`),Br.minzoom&&this.zoom<Math.floor(Br.minzoom)||Br.maxzoom&&this.zoom>=Br.maxzoom||Br.visibility!=="none"&&(C(wr,this.zoom,_e),(Oe[Br.id]=Br.createBucket({index:Ve.bucketLayerIDs.length,layers:wr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jr,sourceID:this.source})).populate(qn,qe,this.tileID.canonical),Ve.bucketLayerIDs.push(wr.map(ti=>ti.id)))}}let ht,mt,Jt,ln;const Dt=l.aH(qe.glyphDependencies,Fn=>Object.keys(Fn).map(Number));this.inFlightDependencies.forEach(Fn=>Fn==null?void 0:Fn.cancel()),this.inFlightDependencies=[];const Qt=++this.dependencySentinel;Object.keys(Dt).length?this.inFlightDependencies.push(we.send("getGlyphs",{uid:this.uid,stacks:Dt,source:this.source,tileID:this.tileID,type:"glyphs"},(Fn,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=Fn,mt=Mn,jn.call(this)))})):mt={};const hn=Object.keys(qe.iconDependencies);hn.length?this.inFlightDependencies.push(we.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"icons"},(Fn,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=Fn,Jt=Mn,jn.call(this)))})):Jt={};const Rn=Object.keys(qe.patternDependencies);function jn(){if(ht)return Ce(ht);if(mt&&Jt&&ln){const Fn=new w(mt),Mn=new l.bo(Jt,ln);for(const Jr in Oe){const qn=Oe[Jr];qn instanceof l.a4?(C(qn.layers,this.zoom,_e),l.bp({bucket:qn,glyphMap:mt,glyphPositions:Fn.positions,imageMap:Jt,imagePositions:Mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):qn.hasPattern&&(qn instanceof l.bq||qn instanceof l.br||qn instanceof l.bs)&&(C(qn.layers,this.zoom,_e),qn.addFeatures(qe,this.tileID.canonical,Mn.patternPositions))}this.status="done",Ce(null,{buckets:Object.values(Oe).filter(Jr=>!Jr.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fn.image,imageAtlas:Mn,glyphMap:this.returnDependencies?mt:null,iconMap:this.returnDependencies?Jt:null,glyphPositions:this.returnDependencies?Fn.positions:null})}}Rn.length?this.inFlightDependencies.push(we.send("getImages",{icons:Rn,source:this.source,tileID:this.tileID,type:"patterns"},(Fn,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=Fn,ln=Mn,jn.call(this)))})):ln={},jn.call(this)}}function C(ze,oe,ce){const _e=new l.a8(oe);for(const we of ze)we.recalculate(_e,ce)}function M(ze,oe){const ce=l.l(ze.request,(_e,we,Ce,He)=>{if(_e)oe(_e);else if(we)try{const Ve=new l.bv.VectorTile(new l.bu(we));oe(null,{vectorTile:Ve,rawData:we,cacheControl:Ce,expires:He})}catch(Ve){const Oe=new Uint8Array(we);let qe=`Unable to parse the tile at ${ze.request.url}, `;qe+=Oe[0]===31&&Oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ve.messge}`,oe(new Error(qe))}});return()=>{ce.cancel(),oe()}}class R{constructor(oe,ce,_e,we){this.actor=oe,this.layerIndex=ce,this.availableImages=_e,this.loadVectorData=we||M,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,ce){const _e=oe.uid;this.loading||(this.loading={});const we=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new l.bt(oe.request),Ce=this.loading[_e]=new A(oe);Ce.abort=this.loadVectorData(oe,(He,Ve)=>{if(delete this.loading[_e],He||!Ve)return Ce.status="done",this.loaded[_e]=Ce,ce(He);const Oe=Ve.rawData,qe={};Ve.expires&&(qe.expires=Ve.expires),Ve.cacheControl&&(qe.cacheControl=Ve.cacheControl);const ut={};if(we){const ht=we.finish();ht&&(ut.resourceTiming=JSON.parse(JSON.stringify(ht)))}Ce.vectorTile=Ve.vectorTile,Ce.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,(ht,mt)=>{if(delete this.fetching[_e],ht||!mt)return ce(ht);ce(null,l.e({rawTileData:Oe.slice(0)},mt,qe,ut))}),this.loaded=this.loaded||{},this.loaded[_e]=Ce,this.fetching[_e]={rawTileData:Oe,cacheControl:qe,resourceTiming:ut}})}reloadTile(oe,ce){const _e=this.loaded,we=oe.uid;if(_e&&_e[we]){const Ce=_e[we];Ce.showCollisionBoxes=oe.showCollisionBoxes,Ce.status==="parsing"?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,(He,Ve)=>{if(He||!Ve)return ce(He,Ve);let Oe;if(this.fetching[we]){const{rawTileData:qe,cacheControl:ut,resourceTiming:ht}=this.fetching[we];delete this.fetching[we],Oe=l.e({rawTileData:qe.slice(0)},Ve,ut,ht)}else Oe=Ve;ce(null,Oe)}):Ce.status==="done"&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ce):ce())}}abortTile(oe,ce){const _e=this.loading,we=oe.uid;_e&&_e[we]&&_e[we].abort&&(_e[we].abort(),delete _e[we]),ce()}removeTile(oe,ce){const _e=this.loaded,we=oe.uid;_e&&_e[we]&&delete _e[we],ce()}}class J{constructor(){this.loaded={}}loadTile(oe,ce){return l._(this,void 0,void 0,function*(){const{uid:_e,encoding:we,rawImageData:Ce,redFactor:He,greenFactor:Ve,blueFactor:Oe,baseShift:qe}=oe,ut=Ce.width+2,ht=Ce.height+2,mt=l.a(Ce)?new l.R({width:ut,height:ht},yield l.bw(Ce,-1,-1,ut,ht)):Ce,Jt=new l.bx(_e,mt,we,He,Ve,Oe,qe);this.loaded=this.loaded||{},this.loaded[_e]=Jt,ce(null,Jt)})}removeTile(oe){const ce=this.loaded,_e=oe.uid;ce&&ce[_e]&&delete ce[_e]}}function Y(ze,oe){if(ze.length!==0){de(ze[0],oe);for(var ce=1;ce<ze.length;ce++)de(ze[ce],!oe)}}function de(ze,oe){for(var ce=0,_e=0,we=0,Ce=ze.length,He=Ce-1;we<Ce;He=we++){var Ve=(ze[we][0]-ze[He][0])*(ze[He][1]+ze[we][1]),Oe=ce+Ve;_e+=Math.abs(ce)>=Math.abs(Ve)?ce-Oe+Ve:Ve-Oe+ce,ce=Oe}ce+_e>=0!=!!oe&&ze.reverse()}var G=l.by(function ze(oe,ce){var _e,we=oe&&oe.type;if(we==="FeatureCollection")for(_e=0;_e<oe.features.length;_e++)ze(oe.features[_e],ce);else if(we==="GeometryCollection")for(_e=0;_e<oe.geometries.length;_e++)ze(oe.geometries[_e],ce);else if(we==="Feature")ze(oe.geometry,ce);else if(we==="Polygon")Y(oe.coordinates,ce);else if(we==="MultiPolygon")for(_e=0;_e<oe.coordinates.length;_e++)Y(oe.coordinates[_e],ce);return oe});const $=l.bv.VectorTileFeature.prototype.toGeoJSON;var U={exports:{}},re=l.bz,Z=l.bv.VectorTileFeature,N=E;function E(ze,oe){this.options=oe||{},this.features=ze,this.length=ze.length}function k(ze,oe){this.id=typeof ze.id=="number"?ze.id:void 0,this.type=ze.type,this.rawGeometry=ze.type===1?[ze.geometry]:ze.geometry,this.properties=ze.tags,this.extent=oe||4096}E.prototype.feature=function(ze){return new k(this.features[ze],this.options.extent)},k.prototype.loadGeometry=function(){var ze=this.rawGeometry;this.geometry=[];for(var oe=0;oe<ze.length;oe++){for(var ce=ze[oe],_e=[],we=0;we<ce.length;we++)_e.push(new re(ce[we][0],ce[we][1]));this.geometry.push(_e)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ze=this.geometry,oe=1/0,ce=-1/0,_e=1/0,we=-1/0,Ce=0;Ce<ze.length;Ce++)for(var He=ze[Ce],Ve=0;Ve<He.length;Ve++){var Oe=He[Ve];oe=Math.min(oe,Oe.x),ce=Math.max(ce,Oe.x),_e=Math.min(_e,Oe.y),we=Math.max(we,Oe.y)}return[oe,_e,ce,we]},k.prototype.toGeoJSON=Z.prototype.toGeoJSON;var H=l.bA,q=N;function ee(ze){var oe=new H;return function(ce,_e){for(var we in ce.layers)_e.writeMessage(3,ve,ce.layers[we])}(ze,oe),oe.finish()}function ve(ze,oe){var ce;oe.writeVarintField(15,ze.version||1),oe.writeStringField(1,ze.name||""),oe.writeVarintField(5,ze.extent||4096);var _e={keys:[],values:[],keycache:{},valuecache:{}};for(ce=0;ce<ze.length;ce++)_e.feature=ze.feature(ce),oe.writeMessage(2,xe,_e);var we=_e.keys;for(ce=0;ce<we.length;ce++)oe.writeStringField(3,we[ce]);var Ce=_e.values;for(ce=0;ce<Ce.length;ce++)oe.writeMessage(4,ie,Ce[ce])}function xe(ze,oe){var ce=ze.feature;ce.id!==void 0&&oe.writeVarintField(1,ce.id),oe.writeMessage(2,be,ze),oe.writeVarintField(3,ce.type),oe.writeMessage(4,ne,ce)}function be(ze,oe){var ce=ze.feature,_e=ze.keys,we=ze.values,Ce=ze.keycache,He=ze.valuecache;for(var Ve in ce.properties){var Oe=ce.properties[Ve],qe=Ce[Ve];if(Oe!==null){qe===void 0&&(_e.push(Ve),Ce[Ve]=qe=_e.length-1),oe.writeVarint(qe);var ut=typeof Oe;ut!=="string"&&ut!=="boolean"&&ut!=="number"&&(Oe=JSON.stringify(Oe));var ht=ut+":"+Oe,mt=He[ht];mt===void 0&&(we.push(Oe),He[ht]=mt=we.length-1),oe.writeVarint(mt)}}}function te(ze,oe){return(oe<<3)+(7&ze)}function ue(ze){return ze<<1^ze>>31}function ne(ze,oe){for(var ce=ze.loadGeometry(),_e=ze.type,we=0,Ce=0,He=ce.length,Ve=0;Ve<He;Ve++){var Oe=ce[Ve],qe=1;_e===1&&(qe=Oe.length),oe.writeVarint(te(1,qe));for(var ut=_e===3?Oe.length-1:Oe.length,ht=0;ht<ut;ht++){ht===1&&_e!==1&&oe.writeVarint(te(2,ut-1));var mt=Oe[ht].x-we,Jt=Oe[ht].y-Ce;oe.writeVarint(ue(mt)),oe.writeVarint(ue(Jt)),we+=mt,Ce+=Jt}_e===3&&oe.writeVarint(te(7,1))}}function ie(ze,oe){var ce=typeof ze;ce==="string"?oe.writeStringField(1,ze):ce==="boolean"?oe.writeBooleanField(7,ze):ce==="number"&&(ze%1!=0?oe.writeDoubleField(3,ze):ze<0?oe.writeSVarintField(6,ze):oe.writeVarintField(5,ze))}U.exports=ee,U.exports.fromVectorTileJs=ee,U.exports.fromGeojsonVt=function(ze,oe){oe=oe||{};var ce={};for(var _e in ze)ce[_e]=new q(ze[_e].features,oe),ce[_e].name=_e,ce[_e].version=oe.version,ce[_e].extent=oe.extent;return ee({layers:ce})},U.exports.GeoJSONWrapper=q;var ye=l.by(U.exports);const Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},Se=Math.fround||($e=new Float32Array(1),ze=>($e[0]=+ze,$e[0]));var $e;const Pe=3,Le=5,Xe=6;class Ze{constructor(oe){this.options=Object.assign(Object.create(Te),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:ce,minZoom:_e,maxZoom:we}=this.options;ce&&console.time("total time");const Ce=`prepare ${oe.length} points`;ce&&console.time(Ce),this.points=oe;const He=[];for(let Oe=0;Oe<oe.length;Oe++){const qe=oe[Oe];if(!qe.geometry)continue;const[ut,ht]=qe.geometry.coordinates,mt=Se(vt(ut)),Jt=Se(It(ht));He.push(mt,Jt,1/0,Oe,-1,1),this.options.reduce&&He.push(0)}let Ve=this.trees[we+1]=this._createTree(He);ce&&console.timeEnd(Ce);for(let Oe=we;Oe>=_e;Oe--){const qe=+Date.now();Ve=this.trees[Oe]=this._createTree(this._cluster(Ve,Oe)),ce&&console.log("z%d: %d clusters in %dms",Oe,Ve.numItems,+Date.now()-qe)}return ce&&console.timeEnd("total time"),this}getClusters(oe,ce){let _e=((oe[0]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,oe[1]));let Ce=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)_e=-180,Ce=180;else if(_e>Ce){const ht=this.getClusters([_e,we,180,He],ce),mt=this.getClusters([-180,we,Ce,He],ce);return ht.concat(mt)}const Ve=this.trees[this._limitZoom(ce)],Oe=Ve.range(vt(_e),It(He),vt(Ce),It(we)),qe=Ve.data,ut=[];for(const ht of Oe){const mt=this.stride*ht;ut.push(qe[mt+Le]>1?nt(qe,mt,this.clusterProps):this.points[qe[mt+Pe]])}return ut}getChildren(oe){const ce=this._getOriginId(oe),_e=this._getOriginZoom(oe),we="No cluster with the specified id.",Ce=this.trees[_e];if(!Ce)throw new Error(we);const He=Ce.data;if(ce*this.stride>=He.length)throw new Error(we);const Ve=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),Oe=Ce.within(He[ce*this.stride],He[ce*this.stride+1],Ve),qe=[];for(const ut of Oe){const ht=ut*this.stride;He[ht+4]===oe&&qe.push(He[ht+Le]>1?nt(He,ht,this.clusterProps):this.points[He[ht+Pe]])}if(qe.length===0)throw new Error(we);return qe}getLeaves(oe,ce,_e){const we=[];return this._appendLeaves(we,oe,ce=ce||10,_e=_e||0,0),we}getTile(oe,ce,_e){const we=this.trees[this._limitZoom(oe)],Ce=Math.pow(2,oe),{extent:He,radius:Ve}=this.options,Oe=Ve/He,qe=(_e-Oe)/Ce,ut=(_e+1+Oe)/Ce,ht={features:[]};return this._addTileFeatures(we.range((ce-Oe)/Ce,qe,(ce+1+Oe)/Ce,ut),we.data,ce,_e,Ce,ht),ce===0&&this._addTileFeatures(we.range(1-Oe/Ce,qe,1,ut),we.data,Ce,_e,Ce,ht),ce===Ce-1&&this._addTileFeatures(we.range(0,qe,Oe/Ce,ut),we.data,-1,_e,Ce,ht),ht.features.length?ht:null}getClusterExpansionZoom(oe){let ce=this._getOriginZoom(oe)-1;for(;ce<=this.options.maxZoom;){const _e=this.getChildren(oe);if(ce++,_e.length!==1)break;oe=_e[0].properties.cluster_id}return ce}_appendLeaves(oe,ce,_e,we,Ce){const He=this.getChildren(ce);for(const Ve of He){const Oe=Ve.properties;if(Oe&&Oe.cluster?Ce+Oe.point_count<=we?Ce+=Oe.point_count:Ce=this._appendLeaves(oe,Oe.cluster_id,_e,we,Ce):Ce<we?Ce++:oe.push(Ve),oe.length===_e)break}return Ce}_createTree(oe){const ce=new l.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<oe.length;_e+=this.stride)ce.add(oe[_e],oe[_e+1]);return ce.finish(),ce.data=oe,ce}_addTileFeatures(oe,ce,_e,we,Ce,He){for(const Ve of oe){const Oe=Ve*this.stride,qe=ce[Oe+Le]>1;let ut,ht,mt;if(qe)ut=ct(ce,Oe,this.clusterProps),ht=ce[Oe],mt=ce[Oe+1];else{const Dt=this.points[ce[Oe+Pe]];ut=Dt.properties;const[Qt,hn]=Dt.geometry.coordinates;ht=vt(Qt),mt=It(hn)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(ht*Ce-_e)),Math.round(this.options.extent*(mt*Ce-we))]],tags:ut};let ln;ln=qe||this.options.generateId?ce[Oe+Pe]:this.points[ce[Oe+Pe]].id,ln!==void 0&&(Jt.id=ln),He.features.push(Jt)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,ce){const{radius:_e,extent:we,reduce:Ce,minPoints:He}=this.options,Ve=_e/(we*Math.pow(2,ce)),Oe=oe.data,qe=[],ut=this.stride;for(let ht=0;ht<Oe.length;ht+=ut){if(Oe[ht+2]<=ce)continue;Oe[ht+2]=ce;const mt=Oe[ht],Jt=Oe[ht+1],ln=oe.within(Oe[ht],Oe[ht+1],Ve),Dt=Oe[ht+Le];let Qt=Dt;for(const hn of ln){const Rn=hn*ut;Oe[Rn+2]>ce&&(Qt+=Oe[Rn+Le])}if(Qt>Dt&&Qt>=He){let hn,Rn=mt*Dt,jn=Jt*Dt,Fn=-1;const Mn=((ht/ut|0)<<5)+(ce+1)+this.points.length;for(const Jr of ln){const qn=Jr*ut;if(Oe[qn+2]<=ce)continue;Oe[qn+2]=ce;const wr=Oe[qn+Le];Rn+=Oe[qn]*wr,jn+=Oe[qn+1]*wr,Oe[qn+4]=Mn,Ce&&(hn||(hn=this._map(Oe,ht,!0),Fn=this.clusterProps.length,this.clusterProps.push(hn)),Ce(hn,this._map(Oe,qn)))}Oe[ht+4]=Mn,qe.push(Rn/Qt,jn/Qt,1/0,Mn,-1,Qt),Ce&&qe.push(Fn)}else{for(let hn=0;hn<ut;hn++)qe.push(Oe[ht+hn]);if(Qt>1)for(const hn of ln){const Rn=hn*ut;if(!(Oe[Rn+2]<=ce)){Oe[Rn+2]=ce;for(let jn=0;jn<ut;jn++)qe.push(Oe[Rn+jn])}}}}return qe}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,ce,_e){if(oe[ce+Le]>1){const He=this.clusterProps[oe[ce+Xe]];return _e?Object.assign({},He):He}const we=this.points[oe[ce+Pe]].properties,Ce=this.options.map(we);return _e&&Ce===we?Object.assign({},Ce):Ce}}function nt(ze,oe,ce){return{type:"Feature",id:ze[oe+Pe],properties:ct(ze,oe,ce),geometry:{type:"Point",coordinates:[(_e=ze[oe],360*(_e-.5)),ft(ze[oe+1])]}};var _e}function ct(ze,oe,ce){const _e=ze[oe+Le],we=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,Ce=ze[oe+Xe],He=Ce===-1?{}:Object.assign({},ce[Ce]);return Object.assign(He,{cluster:!0,cluster_id:ze[oe+Pe],point_count:_e,point_count_abbreviated:we})}function vt(ze){return ze/360+.5}function It(ze){const oe=Math.sin(ze*Math.PI/180),ce=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ce<0?0:ce>1?1:ce}function ft(ze){const oe=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function St(ze,oe,ce,_e){for(var we,Ce=_e,He=ce-oe>>1,Ve=ce-oe,Oe=ze[oe],qe=ze[oe+1],ut=ze[ce],ht=ze[ce+1],mt=oe+3;mt<ce;mt+=3){var Jt=Gt(ze[mt],ze[mt+1],Oe,qe,ut,ht);if(Jt>Ce)we=mt,Ce=Jt;else if(Jt===Ce){var ln=Math.abs(mt-He);ln<Ve&&(we=mt,Ve=ln)}}Ce>_e&&(we-oe>3&&St(ze,oe,we,_e),ze[we+2]=Ce,ce-we>3&&St(ze,we,ce,_e))}function Gt(ze,oe,ce,_e,we,Ce){var He=we-ce,Ve=Ce-_e;if(He!==0||Ve!==0){var Oe=((ze-ce)*He+(oe-_e)*Ve)/(He*He+Ve*Ve);Oe>1?(ce=we,_e=Ce):Oe>0&&(ce+=He*Oe,_e+=Ve*Oe)}return(He=ze-ce)*He+(Ve=oe-_e)*Ve}function Ut(ze,oe,ce,_e){var we={id:ze===void 0?null:ze,type:oe,geometry:ce,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ce){var He=Ce.geometry,Ve=Ce.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")un(Ce,He);else if(Ve==="Polygon"||Ve==="MultiLineString")for(var Oe=0;Oe<He.length;Oe++)un(Ce,He[Oe]);else if(Ve==="MultiPolygon")for(Oe=0;Oe<He.length;Oe++)for(var qe=0;qe<He[Oe].length;qe++)un(Ce,He[Oe][qe])}(we),we}function un(ze,oe){for(var ce=0;ce<oe.length;ce+=3)ze.minX=Math.min(ze.minX,oe[ce]),ze.minY=Math.min(ze.minY,oe[ce+1]),ze.maxX=Math.max(ze.maxX,oe[ce]),ze.maxY=Math.max(ze.maxY,oe[ce+1])}function xn(ze,oe,ce,_e){if(oe.geometry){var we=oe.geometry.coordinates,Ce=oe.geometry.type,He=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2),Ve=[],Oe=oe.id;if(ce.promoteId?Oe=oe.properties[ce.promoteId]:ce.generateId&&(Oe=_e||0),Ce==="Point")yn(we,Ve);else if(Ce==="MultiPoint")for(var qe=0;qe<we.length;qe++)yn(we[qe],Ve);else if(Ce==="LineString")on(we,Ve,He,!1);else if(Ce==="MultiLineString"){if(ce.lineMetrics){for(qe=0;qe<we.length;qe++)on(we[qe],Ve=[],He,!1),ze.push(Ut(Oe,"LineString",Ve,oe.properties));return}gn(we,Ve,He,!1)}else if(Ce==="Polygon")gn(we,Ve,He,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(qe=0;qe<oe.geometry.geometries.length;qe++)xn(ze,{id:Oe,geometry:oe.geometry.geometries[qe],properties:oe.properties},ce,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(qe=0;qe<we.length;qe++){var ut=[];gn(we[qe],ut,He,!0),Ve.push(ut)}}ze.push(Ut(Oe,Ce,Ve,oe.properties))}}function yn(ze,oe){oe.push(se(ze[0])),oe.push(j(ze[1])),oe.push(0)}function on(ze,oe,ce,_e){for(var we,Ce,He=0,Ve=0;Ve<ze.length;Ve++){var Oe=se(ze[Ve][0]),qe=j(ze[Ve][1]);oe.push(Oe),oe.push(qe),oe.push(0),Ve>0&&(He+=_e?(we*qe-Oe*Ce)/2:Math.sqrt(Math.pow(Oe-we,2)+Math.pow(qe-Ce,2))),we=Oe,Ce=qe}var ut=oe.length-3;oe[2]=1,St(oe,0,ut,ce),oe[ut+2]=1,oe.size=Math.abs(He),oe.start=0,oe.end=oe.size}function gn(ze,oe,ce,_e){for(var we=0;we<ze.length;we++){var Ce=[];on(ze[we],Ce,ce,_e),oe.push(Ce)}}function se(ze){return ze/360+.5}function j(ze){var oe=Math.sin(ze*Math.PI/180),ce=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ce<0?0:ce>1?1:ce}function O(ze,oe,ce,_e,we,Ce,He,Ve){if(_e/=oe,Ce>=(ce/=oe)&&He<_e)return ze;if(He<ce||Ce>=_e)return null;for(var Oe=[],qe=0;qe<ze.length;qe++){var ut=ze[qe],ht=ut.geometry,mt=ut.type,Jt=we===0?ut.minX:ut.minY,ln=we===0?ut.maxX:ut.maxY;if(Jt>=ce&&ln<_e)Oe.push(ut);else if(!(ln<ce||Jt>=_e)){var Dt=[];if(mt==="Point"||mt==="MultiPoint")pe(ht,Dt,ce,_e,we);else if(mt==="LineString")Be(ht,Dt,ce,_e,we,!1,Ve.lineMetrics);else if(mt==="MultiLineString")lt(ht,Dt,ce,_e,we,!1);else if(mt==="Polygon")lt(ht,Dt,ce,_e,we,!0);else if(mt==="MultiPolygon")for(var Qt=0;Qt<ht.length;Qt++){var hn=[];lt(ht[Qt],hn,ce,_e,we,!0),hn.length&&Dt.push(hn)}if(Dt.length){if(Ve.lineMetrics&&mt==="LineString"){for(Qt=0;Qt<Dt.length;Qt++)Oe.push(Ut(ut.id,mt,Dt[Qt],ut.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(Dt.length===1?(mt="LineString",Dt=Dt[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=Dt.length===3?"Point":"MultiPoint"),Oe.push(Ut(ut.id,mt,Dt,ut.tags))}}}return Oe.length?Oe:null}function pe(ze,oe,ce,_e,we){for(var Ce=0;Ce<ze.length;Ce+=3){var He=ze[Ce+we];He>=ce&&He<=_e&&(oe.push(ze[Ce]),oe.push(ze[Ce+1]),oe.push(ze[Ce+2]))}}function Be(ze,oe,ce,_e,we,Ce,He){for(var Ve,Oe,qe=et(ze),ut=we===0?L:D,ht=ze.start,mt=0;mt<ze.length-3;mt+=3){var Jt=ze[mt],ln=ze[mt+1],Dt=ze[mt+2],Qt=ze[mt+3],hn=ze[mt+4],Rn=we===0?Jt:ln,jn=we===0?Qt:hn,Fn=!1;He&&(Ve=Math.sqrt(Math.pow(Jt-Qt,2)+Math.pow(ln-hn,2))),Rn<ce?jn>ce&&(Oe=ut(qe,Jt,ln,Qt,hn,ce),He&&(qe.start=ht+Ve*Oe)):Rn>_e?jn<_e&&(Oe=ut(qe,Jt,ln,Qt,hn,_e),He&&(qe.start=ht+Ve*Oe)):le(qe,Jt,ln,Dt),jn<ce&&Rn>=ce&&(Oe=ut(qe,Jt,ln,Qt,hn,ce),Fn=!0),jn>_e&&Rn<=_e&&(Oe=ut(qe,Jt,ln,Qt,hn,_e),Fn=!0),!Ce&&Fn&&(He&&(qe.end=ht+Ve*Oe),oe.push(qe),qe=et(ze)),He&&(ht+=Ve)}var Mn=ze.length-3;Jt=ze[Mn],ln=ze[Mn+1],Dt=ze[Mn+2],(Rn=we===0?Jt:ln)>=ce&&Rn<=_e&&le(qe,Jt,ln,Dt),Mn=qe.length-3,Ce&&Mn>=3&&(qe[Mn]!==qe[0]||qe[Mn+1]!==qe[1])&&le(qe,qe[0],qe[1],qe[2]),qe.length&&oe.push(qe)}function et(ze){var oe=[];return oe.size=ze.size,oe.start=ze.start,oe.end=ze.end,oe}function lt(ze,oe,ce,_e,we,Ce){for(var He=0;He<ze.length;He++)Be(ze[He],oe,ce,_e,we,Ce,!1)}function le(ze,oe,ce,_e){ze.push(oe),ze.push(ce),ze.push(_e)}function L(ze,oe,ce,_e,we,Ce){var He=(Ce-oe)/(_e-oe);return ze.push(Ce),ze.push(ce+(we-ce)*He),ze.push(1),He}function D(ze,oe,ce,_e,we,Ce){var He=(Ce-ce)/(we-ce);return ze.push(oe+(_e-oe)*He),ze.push(Ce),ze.push(1),He}function Ee(ze,oe){for(var ce=[],_e=0;_e<ze.length;_e++){var we,Ce=ze[_e],He=Ce.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")we=Ge(Ce.geometry,oe);else if(He==="MultiLineString"||He==="Polygon"){we=[];for(var Ve=0;Ve<Ce.geometry.length;Ve++)we.push(Ge(Ce.geometry[Ve],oe))}else if(He==="MultiPolygon")for(we=[],Ve=0;Ve<Ce.geometry.length;Ve++){for(var Oe=[],qe=0;qe<Ce.geometry[Ve].length;qe++)Oe.push(Ge(Ce.geometry[Ve][qe],oe));we.push(Oe)}ce.push(Ut(Ce.id,He,we,Ce.tags))}return ce}function Ge(ze,oe){var ce=[];ce.size=ze.size,ze.start!==void 0&&(ce.start=ze.start,ce.end=ze.end);for(var _e=0;_e<ze.length;_e+=3)ce.push(ze[_e]+oe,ze[_e+1],ze[_e+2]);return ce}function je(ze,oe){if(ze.transformed)return ze;var ce,_e,we,Ce=1<<ze.z,He=ze.x,Ve=ze.y;for(ce=0;ce<ze.features.length;ce++){var Oe=ze.features[ce],qe=Oe.geometry,ut=Oe.type;if(Oe.geometry=[],ut===1)for(_e=0;_e<qe.length;_e+=2)Oe.geometry.push(at(qe[_e],qe[_e+1],oe,Ce,He,Ve));else for(_e=0;_e<qe.length;_e++){var ht=[];for(we=0;we<qe[_e].length;we+=2)ht.push(at(qe[_e][we],qe[_e][we+1],oe,Ce,He,Ve));Oe.geometry.push(ht)}}return ze.transformed=!0,ze}function at(ze,oe,ce,_e,we,Ce){return[Math.round(ce*(ze*_e-we)),Math.round(ce*(oe*_e-Ce))]}function jt(ze,oe,ce,_e,we){for(var Ce=oe===we.maxZoom?0:we.tolerance/((1<<oe)*we.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ce,y:_e,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<ze.length;Ve++){He.numFeatures++,Tn(He,ze[Ve],Ce,we);var Oe=ze[Ve].minX,qe=ze[Ve].minY,ut=ze[Ve].maxX,ht=ze[Ve].maxY;Oe<He.minX&&(He.minX=Oe),qe<He.minY&&(He.minY=qe),ut>He.maxX&&(He.maxX=ut),ht>He.maxY&&(He.maxY=ht)}return He}function Tn(ze,oe,ce,_e){var we=oe.geometry,Ce=oe.type,He=[];if(Ce==="Point"||Ce==="MultiPoint")for(var Ve=0;Ve<we.length;Ve+=3)He.push(we[Ve]),He.push(we[Ve+1]),ze.numPoints++,ze.numSimplified++;else if(Ce==="LineString")vn(He,we,ze,ce,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(Ve=0;Ve<we.length;Ve++)vn(He,we[Ve],ze,ce,Ce==="Polygon",Ve===0);else if(Ce==="MultiPolygon")for(var Oe=0;Oe<we.length;Oe++){var qe=we[Oe];for(Ve=0;Ve<qe.length;Ve++)vn(He,qe[Ve],ze,ce,!0,Ve===0)}if(He.length){var ut=oe.tags||null;if(Ce==="LineString"&&_e.lineMetrics){for(var ht in ut={},oe.tags)ut[ht]=oe.tags[ht];ut.mapbox_clip_start=we.start/we.size,ut.mapbox_clip_end=we.end/we.size}var mt={geometry:He,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:ut};oe.id!==null&&(mt.id=oe.id),ze.features.push(mt)}}function vn(ze,oe,ce,_e,we,Ce){var He=_e*_e;if(_e>0&&oe.size<(we?He:_e))ce.numPoints+=oe.length/3;else{for(var Ve=[],Oe=0;Oe<oe.length;Oe+=3)(_e===0||oe[Oe+2]>He)&&(ce.numSimplified++,Ve.push(oe[Oe]),Ve.push(oe[Oe+1])),ce.numPoints++;we&&function(qe,ut){for(var ht=0,mt=0,Jt=qe.length,ln=Jt-2;mt<Jt;ln=mt,mt+=2)ht+=(qe[mt]-qe[ln])*(qe[mt+1]+qe[ln+1]);if(ht>0===ut)for(mt=0,Jt=qe.length;mt<Jt/2;mt+=2){var Dt=qe[mt],Qt=qe[mt+1];qe[mt]=qe[Jt-2-mt],qe[mt+1]=qe[Jt-1-mt],qe[Jt-2-mt]=Dt,qe[Jt-1-mt]=Qt}}(Ve,Ce),ze.push(Ve)}}function _t(ze,oe){var ce=(oe=this.options=function(we,Ce){for(var He in Ce)we[He]=Ce[He];return we}(Object.create(this.options),oe)).debug;if(ce&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var _e=function(we,Ce){var He=[];if(we.type==="FeatureCollection")for(var Ve=0;Ve<we.features.length;Ve++)xn(He,we.features[Ve],Ce,Ve);else xn(He,we.type==="Feature"?we:{geometry:we},Ce);return He}(ze,oe);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=function(we,Ce){var He=Ce.buffer/Ce.extent,Ve=we,Oe=O(we,1,-1-He,He,0,-1,2,Ce),qe=O(we,1,1-He,2+He,0,-1,2,Ce);return(Oe||qe)&&(Ve=O(we,1,-He,1+He,0,-1,2,Ce)||[],Oe&&(Ve=Ee(Oe,1).concat(Ve)),qe&&(Ve=Ve.concat(Ee(qe,-1)))),Ve}(_e,oe),_e.length&&this.splitTile(_e,0,0,0),ce&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Rt(ze,oe,ce){return 32*((1<<ze)*ce+oe)+ze}function nn(ze,oe){return oe?ze.properties[oe]:ze.id}function xr(ze,oe){if(ze==null)return!0;if(ze.type==="Feature")return nn(ze,oe)!=null;if(ze.type==="FeatureCollection"){const ce=new Set;for(const _e of ze.features){const we=nn(_e,oe);if(we==null||ce.has(we))return!1;ce.add(we)}return!0}return!1}function ui(ze,oe){const ce=new Map;if(ze!=null)if(ze.type==="Feature")ce.set(nn(ze,oe),ze);else for(const _e of ze.features)ce.set(nn(_e,oe),_e);return ce}_t.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_t.prototype.splitTile=function(ze,oe,ce,_e,we,Ce,He){for(var Ve=[ze,oe,ce,_e],Oe=this.options,qe=Oe.debug;Ve.length;){_e=Ve.pop(),ce=Ve.pop(),oe=Ve.pop(),ze=Ve.pop();var ut=1<<oe,ht=Rt(oe,ce,_e),mt=this.tiles[ht];if(!mt&&(qe>1&&console.time("creation"),mt=this.tiles[ht]=jt(ze,oe,ce,_e,Oe),this.tileCoords.push({z:oe,x:ce,y:_e}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,ce,_e,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var Jt="z"+oe;this.stats[Jt]=(this.stats[Jt]||0)+1,this.total++}if(mt.source=ze,we){if(oe===Oe.maxZoom||oe===we)continue;var ln=1<<we-oe;if(ce!==Math.floor(Ce/ln)||_e!==Math.floor(He/ln))continue}else if(oe===Oe.indexMaxZoom||mt.numPoints<=Oe.indexMaxPoints)continue;if(mt.source=null,ze.length!==0){qe>1&&console.time("clipping");var Dt,Qt,hn,Rn,jn,Fn,Mn=.5*Oe.buffer/Oe.extent,Jr=.5-Mn,qn=.5+Mn,wr=1+Mn;Dt=Qt=hn=Rn=null,jn=O(ze,ut,ce-Mn,ce+qn,0,mt.minX,mt.maxX,Oe),Fn=O(ze,ut,ce+Jr,ce+wr,0,mt.minX,mt.maxX,Oe),ze=null,jn&&(Dt=O(jn,ut,_e-Mn,_e+qn,1,mt.minY,mt.maxY,Oe),Qt=O(jn,ut,_e+Jr,_e+wr,1,mt.minY,mt.maxY,Oe),jn=null),Fn&&(hn=O(Fn,ut,_e-Mn,_e+qn,1,mt.minY,mt.maxY,Oe),Rn=O(Fn,ut,_e+Jr,_e+wr,1,mt.minY,mt.maxY,Oe),Fn=null),qe>1&&console.timeEnd("clipping"),Ve.push(Dt||[],oe+1,2*ce,2*_e),Ve.push(Qt||[],oe+1,2*ce,2*_e+1),Ve.push(hn||[],oe+1,2*ce+1,2*_e),Ve.push(Rn||[],oe+1,2*ce+1,2*_e+1)}}},_t.prototype.getTile=function(ze,oe,ce){var _e=this.options,we=_e.extent,Ce=_e.debug;if(ze<0||ze>24)return null;var He=1<<ze,Ve=Rt(ze,oe=(oe%He+He)%He,ce);if(this.tiles[Ve])return je(this.tiles[Ve],we);Ce>1&&console.log("drilling down to z%d-%d-%d",ze,oe,ce);for(var Oe,qe=ze,ut=oe,ht=ce;!Oe&&qe>0;)qe--,ut=Math.floor(ut/2),ht=Math.floor(ht/2),Oe=this.tiles[Rt(qe,ut,ht)];return Oe&&Oe.source?(Ce>1&&console.log("found parent tile z%d-%d-%d",qe,ut,ht),Ce>1&&console.time("drilling down"),this.splitTile(Oe.source,qe,ut,ht,ze,oe,ce),Ce>1&&console.timeEnd("drilling down"),this.tiles[Ve]?je(this.tiles[Ve],we):null):null};class cn extends R{constructor(oe,ce,_e,we){super(oe,ce,_e),this._dataUpdateable=new Map,this.loadGeoJSON=(Ce,He)=>{const{promoteId:Ve}=Ce;if(Ce.request)return l.f(Ce.request,(Oe,qe,ut,ht)=>{this._dataUpdateable=xr(qe,Ve)?ui(qe,Ve):void 0,He(Oe,qe,ut,ht)});if(typeof Ce.data=="string")try{const Oe=JSON.parse(Ce.data);this._dataUpdateable=xr(Oe,Ve)?ui(Oe,Ve):void 0,He(null,Oe)}catch{He(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`))}else Ce.dataDiff?this._dataUpdateable?(function(Oe,qe,ut){var ht,mt,Jt,ln;if(qe.removeAll&&Oe.clear(),qe.remove)for(const Dt of qe.remove)Oe.delete(Dt);if(qe.add)for(const Dt of qe.add){const Qt=nn(Dt,ut);Qt!=null&&Oe.set(Qt,Dt)}if(qe.update)for(const Dt of qe.update){let Qt=Oe.get(Dt.id);if(Qt==null)continue;const hn=!Dt.removeAllProperties&&(((ht=Dt.removeProperties)===null||ht===void 0?void 0:ht.length)>0||((mt=Dt.addOrUpdateProperties)===null||mt===void 0?void 0:mt.length)>0);if((Dt.newGeometry||Dt.removeAllProperties||hn)&&(Qt=Object.assign({},Qt),Oe.set(Dt.id,Qt),hn&&(Qt.properties=Object.assign({},Qt.properties))),Dt.newGeometry&&(Qt.geometry=Dt.newGeometry),Dt.removeAllProperties)Qt.properties={};else if(((Jt=Dt.removeProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const Rn of Dt.removeProperties)Object.prototype.hasOwnProperty.call(Qt.properties,Rn)&&delete Qt.properties[Rn];if(((ln=Dt.addOrUpdateProperties)===null||ln===void 0?void 0:ln.length)>0)for(const{key:Rn,value:jn}of Dt.addOrUpdateProperties)Qt.properties[Rn]=jn}}(this._dataUpdateable,Ce.dataDiff,Ve),He(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):He(new Error(`Cannot update existing geojson data in ${Ce.source}`)):He(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,we&&(this.loadGeoJSON=we)}loadGeoJSONTile(oe,ce){const _e=oe.tileID.canonical;if(!this._geoJSONIndex)return ce(null,null);const we=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);if(!we)return ce(null,null);const Ce=new class{constructor(Ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=Ve.length,this._features=Ve}feature(Ve){return new class{constructor(Oe){this._feature=Oe,this.extent=l.N,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))}loadGeometry(){if(this._feature.type===1){const Oe=[];for(const qe of this._feature.geometry)Oe.push([new l.P(qe[0],qe[1])]);return Oe}{const Oe=[];for(const qe of this._feature.geometry){const ut=[];for(const ht of qe)ut.push(new l.P(ht[0],ht[1]));Oe.push(ut)}return Oe}}toGeoJSON(Oe,qe,ut){return $.call(this,Oe,qe,ut)}}(this._features[Ve])}}(we.features);let He=ye(Ce);He.byteOffset===0&&He.byteLength===He.buffer.byteLength||(He=new Uint8Array(He)),ce(null,{vectorTile:Ce,rawData:He.buffer})}loadData(oe,ce){var _e;(_e=this._pendingRequest)===null||_e===void 0||_e.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const we=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new l.bt(oe.request);this._pendingCallback=ce,this._pendingRequest=this.loadGeoJSON(oe,(Ce,He)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ce||!He)return ce(Ce);if(typeof He!="object")return ce(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{G(He,!0);try{if(oe.filter){const Oe=l.bB(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(ut=>`${ut.key}: ${ut.message}`).join(", "));He={type:"FeatureCollection",features:He.features.filter(ut=>Oe.value.evaluate({zoom:0},ut))}}this._geoJSONIndex=oe.cluster?new Ze(function({superclusterOptions:Oe,clusterProperties:qe}){if(!qe||!Oe)return Oe;const ut={},ht={},mt={accumulated:null,zoom:0},Jt={properties:null},ln=Object.keys(qe);for(const Dt of ln){const[Qt,hn]=qe[Dt],Rn=l.bB(hn),jn=l.bB(typeof Qt=="string"?[Qt,["accumulated"],["get",Dt]]:Qt);ut[Dt]=Rn.value,ht[Dt]=jn.value}return Oe.map=Dt=>{Jt.properties=Dt;const Qt={};for(const hn of ln)Qt[hn]=ut[hn].evaluate(mt,Jt);return Qt},Oe.reduce=(Dt,Qt)=>{Jt.properties=Qt;for(const hn of ln)mt.accumulated=Dt[hn],Dt[hn]=ht[hn].evaluate(mt,Jt)},Oe}(oe)).load(He.features):function(Oe,qe){return new _t(Oe,qe)}(He,oe.geojsonVtOptions)}catch(Oe){return ce(Oe)}this.loaded={};const Ve={};if(we){const Oe=we.finish();Oe&&(Ve.resourceTiming={},Ve.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Oe)))}ce(null,Ve)}})}reloadTile(oe,ce){const _e=this.loaded;return _e&&_e[oe.uid]?super.reloadTile(oe,ce):this.loadTile(oe,ce)}removeSource(oe,ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ce()}getClusterExpansionZoom(oe,ce){try{ce(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(_e){ce(_e)}}getClusterChildren(oe,ce){try{ce(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(_e){ce(_e)}}getClusterLeaves(oe,ce){try{ce(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(_e){ce(_e)}}}class er{constructor(oe){this.self=oe,this.actor=new l.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:R,geojson:cn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ce,_e)=>{if(this.workerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.workerSourceTypes[ce]=_e},this.self.registerRTLTextPlugin=ce=>{if(l.bC.isParsed())throw new Error("RTL text plugin already registered.");l.bC.applyArabicShaping=ce.applyArabicShaping,l.bC.processBidirectionalText=ce.processBidirectionalText,l.bC.processStyledBidirectionalText=ce.processStyledBidirectionalText}}setReferrer(oe,ce){this.referrer=ce}setImages(oe,ce,_e){this.availableImages[oe]=ce;for(const we in this.workerSources[oe]){const Ce=this.workerSources[oe][we];for(const He in Ce)Ce[He].availableImages=ce}_e()}setLayers(oe,ce,_e){this.getLayerIndex(oe).replace(ce),_e()}updateLayers(oe,ce,_e){this.getLayerIndex(oe).update(ce.layers,ce.removedIds),_e()}loadTile(oe,ce,_e){this.getWorkerSource(oe,ce.type,ce.source).loadTile(ce,_e)}loadDEMTile(oe,ce,_e){this.getDEMWorkerSource(oe,ce.source).loadTile(ce,_e)}reloadTile(oe,ce,_e){this.getWorkerSource(oe,ce.type,ce.source).reloadTile(ce,_e)}abortTile(oe,ce,_e){this.getWorkerSource(oe,ce.type,ce.source).abortTile(ce,_e)}removeTile(oe,ce,_e){this.getWorkerSource(oe,ce.type,ce.source).removeTile(ce,_e)}removeDEMTile(oe,ce){this.getDEMWorkerSource(oe,ce.source).removeTile(ce)}removeSource(oe,ce,_e){if(!this.workerSources[oe]||!this.workerSources[oe][ce.type]||!this.workerSources[oe][ce.type][ce.source])return;const we=this.workerSources[oe][ce.type][ce.source];delete this.workerSources[oe][ce.type][ce.source],we.removeSource!==void 0?we.removeSource(ce,_e):_e()}loadWorkerSource(oe,ce,_e){try{this.self.importScripts(ce.url),_e()}catch(we){_e(we.toString())}}syncRTLPluginState(oe,ce,_e){try{l.bC.setState(ce);const we=l.bC.getPluginURL();if(l.bC.isLoaded()&&!l.bC.isParsed()&&we!=null){this.self.importScripts(we);const Ce=l.bC.isParsed();_e(Ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${we}`),Ce)}}catch(we){_e(we.toString())}}getAvailableImages(oe){let ce=this.availableImages[oe];return ce||(ce=[]),ce}getLayerIndex(oe){let ce=this.layerIndexes[oe];return ce||(ce=this.layerIndexes[oe]=new b),ce}getWorkerSource(oe,ce,_e){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ce]||(this.workerSources[oe][ce]={}),this.workerSources[oe][ce][_e]||(this.workerSources[oe][ce][_e]=new this.workerSourceTypes[ce]({send:(we,Ce,He)=>{this.actor.send(we,Ce,He,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][ce][_e]}getDEMWorkerSource(oe,ce){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ce]||(this.demWorkerSources[oe][ce]=new J),this.demWorkerSources[oe][ce]}}return l.i()&&(self.worker=new er(self)),er}),d(["./shared"],function(l){var b="3.5.2";class w{static testProp(r){if(!w.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in w.docStyle)return r[u];return r[0]}static create(r,u,f){const m=window.document.createElement(r);return u!==void 0&&(m.className=u),f&&f.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,u){r.style[w.transformProp]=u}static addEventListener(r,u,f,m={}){r.addEventListener(u,f,"passive"in m?m:m.capture)}static removeEventListener(r,u,f,m={}){r.removeEventListener(u,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,u){const f=r.getBoundingClientRect();return new l.P(u.clientX-f.left-r.clientLeft,u.clientY-f.top-r.clientTop)}static touchPos(r,u){const f=r.getBoundingClientRect(),m=[];for(let _=0;_<u.length;_++)m.push(new l.P(u[_].clientX-f.left-r.clientLeft,u[_].clientY-f.top-r.clientTop));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const A={supported:!1,testSupport:function(y){!R&&M&&(J?Y(y):C=y)}};let C,M,R=!1,J=!1;function Y(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,M),y.isContextLost())return;A.supported=!0}catch{}y.deleteTexture(r),R=!0}var de,G;typeof document<"u"&&(M=document.createElement("img"),M.onload=function(){C&&Y(C),C=null,J=!0},M.onerror=function(){R=!0,C=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,u,f,m;y.resetRequestQueue=()=>{r=[],u=0,f=0,m={}},y.addThrottleControl=B=>{const X=f++;return m[X]=B,X},y.removeThrottleControl=B=>{delete m[B],I()},y.getImage=(B,X,K=!0)=>{A.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*");const he={requestParameters:B,supportImageRefresh:K,callback:X,cancelled:!1,completed:!1,cancel:()=>{he.completed||he.cancelled||(he.cancelled=!0,he.innerRequest&&(he.innerRequest.cancel(),u--),I())}};return r.push(he),I(),he};const _=B=>{const{requestParameters:X,supportImageRefresh:K,callback:he}=B;return l.e(X,{type:"image"}),(K!==!1||l.i()||l.g(X.url)||X.headers&&!Object.keys(X.headers).reduce((Me,ke)=>Me&&ke==="accept",!0)?l.m:z)(X,(Me,ke,Fe,Ie)=>{T(B,he,Me,ke,Fe,Ie)})},T=(B,X,K,he,Me,ke)=>{K?X(K):he instanceof HTMLImageElement||l.a(he)?X(null,he):he&&((Fe,Ie)=>{typeof createImageBitmap=="function"?l.b(Fe,Ie):l.d(Fe,Ie)})(he,(Fe,Ie)=>{Fe!=null?X(Fe):Ie!=null&&X(null,Ie,{cacheControl:Me,expires:ke})}),B.cancelled||(B.completed=!0,u--,I())},I=()=>{const B=(()=>{const X=Object.keys(m);let K=!1;if(X.length>0){for(const he of X)if(K=m[he](),K)break}return K})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let X=u;X<B&&r.length>0;X++){const K=r.shift();if(K.cancelled){X--;continue}const he=_(K);u++,K.innerRequest=he}},z=(B,X)=>{const K=new Image,he=B.url;let Me=!1;const ke=B.credentials;return ke&&ke==="include"?K.crossOrigin="use-credentials":(ke&&ke==="same-origin"||!l.s(he))&&(K.crossOrigin="anonymous"),K.fetchPriority="high",K.onload=()=>{X(null,K),K.onerror=K.onload=null},K.onerror=()=>{Me||X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),K.onerror=K.onload=null},K.src=he,{cancel:()=>{Me=!0,K.src=""}}}}(de||(de={})),de.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(G||(G={}));class ${constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,f){const m=function(_){const T=_.match(U);if(!T)throw new Error(`Unable to parse URL "${_}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(r);return m.path+=`${u}${f}`,function(_){const T=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${T}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const U=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function re(y){var r=new l.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var Z,N=function(y,r,u){return y[0]=r[0]-u[0],y[1]=r[1]-u[1],y[2]=r[2]-u[2],y};Z=new l.A(3),l.A!=Float32Array&&(Z[0]=0,Z[1]=0,Z[2]=0);var E=function(y){var r=y[0],u=y[1];return r*r+u*u};function k(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:f,url:m}of y){const _=`${f}${m}`;u.indexOf(_)===-1&&(u.push(_),r.push({id:f,url:m}))}}return r}function H(y,r,u,f,m){if(f)return void y(f);if(m!==Object.values(r).length||m!==Object.values(u).length)return;const _={};for(const T in r){_[T]={};const I=l.h.getImageCanvasContext(u[T]),z=r[T];for(const B in z){const{width:X,height:K,x:he,y:Me,sdf:ke,pixelRatio:Fe,stretchX:Ie,stretchY:Ke,content:tt}=z[B];_[T][B]={data:null,pixelRatio:Fe,sdf:ke,stretchX:Ie,stretchY:Ke,content:tt,spriteData:{width:X,height:K,x:he,y:Me,context:I}}}}y(null,_)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class q{constructor(r,u,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(u,m)}update(r,u,f){const{width:m,height:_}=r,T=!(this.size&&this.size[0]===m&&this.size[1]===_||f),{context:I}=this,{gl:z}=I;if(this.useMipmap=!!(u&&u.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!u||u.premultiply!==!1)),T)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,r):z.texImage2D(z.TEXTURE_2D,0,this.format,m,_,0,this.format,z.UNSIGNED_BYTE,r.data);else{const{x:B,y:X}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?z.texSubImage2D(z.TEXTURE_2D,0,B,X,z.RGBA,z.UNSIGNED_BYTE,r):z.texSubImage2D(z.TEXTURE_2D,0,B,X,m,_,z.RGBA,z.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(r,u,f){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||r),this.filter=r),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ee(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class ve extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new l.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let f=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,u){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||u<m[1])return!1;f=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const f=u.spriteData,m=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let f=!0;if(!this.isLoaded())for(const m of r)this.images[m]||(f=!1);this.isLoaded()||f?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const f={};for(const m of r){let _=this.getImage(m);_||(this.fire(new l.k("styleimagemissing",{id:m})),_=this.getImage(m)),_?f[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],f=this.getImage(r);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new l.I(m,f);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:u,h:f}=l.p(r),m=this.atlasImage;m.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],I=T.x+1,z=T.y+1,B=this.getImage(_).data,X=B.width,K=B.height;l.R.copy(B,m,{x:0,y:0},{x:I,y:z},{width:X,height:K}),l.R.copy(B,m,{x:0,y:K-1},{x:I,y:z-1},{width:X,height:1}),l.R.copy(B,m,{x:0,y:0},{x:I,y:z+K},{width:X,height:1}),l.R.copy(B,m,{x:X-1,y:0},{x:I-1,y:z},{width:1,height:K}),l.R.copy(B,m,{x:0,y:0},{x:I+X,y:z},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||l.w(`Image with ID: "${u}" was not found`),ee(f)&&this.updateImage(u,f)}}}const xe=1e20;function be(y,r,u,f,m,_,T,I,z){for(let B=r;B<r+f;B++)te(y,u*_+B,_,m,T,I,z);for(let B=u;B<u+m;B++)te(y,B*_+r,1,f,T,I,z)}function te(y,r,u,f,m,_,T){_[0]=0,T[0]=-xe,T[1]=xe,m[0]=y[r];for(let I=1,z=0,B=0;I<f;I++){m[I]=y[r+I*u];const X=I*I;do{const K=_[z];B=(m[I]-m[K]+X-K*K)/(I-K)/2}while(B<=T[z]&&--z>-1);z++,_[z]=I,T[z]=B,T[z+1]=xe}for(let I=0,z=0;I<f;I++){for(;T[z+1]<I;)z++;const B=_[z],X=I-B;y[r+I*u]=m[B]+X*X}}class ue{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const f=[];for(const m in r)for(const _ of r[m])f.push({stack:m,id:_});l.o(f,({stack:m,id:_},T)=>{let I=this.entries[m];I||(I=this.entries[m]={glyphs:{},requests:{},ranges:{}});let z=I.glyphs[_];if(z!==void 0)return void T(null,{stack:m,id:_,glyph:z});if(z=this._tinySDF(I,m,_),z)return I.glyphs[_]=z,void T(null,{stack:m,id:_,glyph:z});const B=Math.floor(_/256);if(256*B>65535)return void T(new Error("glyphs > 65535 not supported"));if(I.ranges[B])return void T(null,{stack:m,id:_,glyph:z});if(!this.url)return void T(new Error("glyphsUrl is not set"));let X=I.requests[B];X||(X=I.requests[B]=[],ue.loadGlyphRange(m,B,this.url,this.requestManager,(K,he)=>{if(he){for(const Me in he)this._doesCharSupportLocalGlyph(+Me)||(I.glyphs[+Me]=he[+Me]);I.ranges[B]=!0}for(const Me of X)Me(K,he);delete I.requests[B]})),X.push((K,he)=>{K?T(K):he&&T(null,{stack:m,id:_,glyph:he[_]||null})})},(m,_)=>{if(m)u(m);else if(_){const T={};for(const{stack:I,id:z,glyph:B}of _)(T[I]||(T[I]={}))[z]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics};u(null,T)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r))}_tinySDF(r,u,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let _=r.tinySDF;if(!_){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),_=r.tinySDF=new ue.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:I})}const T=_.draw(String.fromCharCode(f));return{id:f,bitmap:new l.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}ue.loadGlyphRange=function(y,r,u,f,m){const _=256*r,T=_+255,I=f.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${T}`),G.Glyphs);l.l(I,(z,B)=>{if(z)m(z);else if(B){const X={};for(const K of l.n(B))X[K.id]=K;m(null,X)}})},ue.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:u=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=u;const I=this.size=y+4*r,z=this._createCanvas(I),B=this.ctx=z.getContext("2d",{willReadFrequently:!0});B.font=`${T} ${_} ${y}px ${m}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(y),T=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),z=Math.min(this.size-this.buffer,T+Math.ceil(f)),B=I+2*this.buffer,X=z+2*this.buffer,K=Math.max(B*X,0),he=new Uint8ClampedArray(K),Me={data:he,width:B,height:X,glyphWidth:I,glyphHeight:z,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(I===0||z===0)return Me;const{ctx:ke,buffer:Fe,gridInner:Ie,gridOuter:Ke}=this;ke.clearRect(Fe,Fe,I,z),ke.fillText(y,Fe,Fe+T);const tt=ke.getImageData(Fe,Fe,I,z);Ke.fill(xe,0,K),Ie.fill(0,0,K);for(let De=0;De<z;De++)for(let Ye=0;Ye<I;Ye++){const ot=tt.data[4*(De*I+Ye)+3]/255;if(ot===0)continue;const st=(De+Fe)*B+Ye+Fe;if(ot===1)Ke[st]=0,Ie[st]=xe;else{const dt=.5-ot;Ke[st]=dt>0?dt*dt:0,Ie[st]=dt<0?dt*dt:0}}be(Ke,0,0,B,X,B,this.f,this.v,this.z),be(Ie,Fe,Fe,I,z,B,this.f,this.v,this.z);for(let De=0;De<K;De++){const Ye=Math.sqrt(Ke[De])-Math.sqrt(Ie[De]);he[De]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return Me}};class ne{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,u){return l.z(r.expression.evaluate(u))}interpolate(r,u,f){return{x:l.B.number(r.x,u.x,f),y:l.B.number(r.y,u.y,f),z:l.B.number(r.z,u.z,f)}}}let ie;class ye extends l.E{constructor(r){super(),ie=ie||new l.r({anchor:new l.D(l.v.light.anchor),position:new ne,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(ie),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.t,r,u))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f){return(!f||f.validate!==!1)&&l.x(this,r.call(l.y,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class Te{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const f=r.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,u)),this.dashEntry[f]}getDashRanges(r,u,f){const m=[];let _=r.length%2==1?-r[r.length-1]*f:0,T=r[0]*f,I=!0;m.push({left:_,right:T,isDash:I,zeroLength:r[0]===0});let z=r[0];for(let B=1;B<r.length;B++){I=!I;const X=r[B];_=z*f,z+=X,T=z*f,m.push({left:_,right:T,isDash:I,zeroLength:X===0})}return m}addRoundDash(r,u,f){const m=u/2;for(let _=-f;_<=f;_++){const T=this.width*(this.nextRow+f+_);let I=0,z=r[I];for(let B=0;B<this.width;B++){B/z.right>1&&(z=r[++I]);const X=Math.abs(B-z.left),K=Math.abs(B-z.right),he=Math.min(X,K);let Me;const ke=_/f*(m+1);if(z.isDash){const Fe=m-Math.abs(ke);Me=Math.sqrt(he*he+Fe*Fe)}else Me=m-Math.sqrt(he*he+ke*ke);this.data[T+B]=Math.max(0,Math.min(255,Me+128))}}}addRegularDash(r){for(let I=r.length-1;I>=0;--I){const z=r[I],B=r[I+1];z.zeroLength?r.splice(I,1):B&&B.isDash===z.isDash&&(B.left=z.left,r.splice(I,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const m=this.width*this.nextRow;let _=0,T=r[_];for(let I=0;I<this.width;I++){I/T.right>1&&(T=r[++_]);const z=Math.abs(I-T.left),B=Math.abs(I-T.right),X=Math.min(z,B);this.data[m+I]=Math.max(0,Math.min(255,(T.isDash?X:-X)+128))}}addDash(r,u){const f=u?7:0,m=2*f+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let I=0;I<r.length;I++)_+=r[I];if(_!==0){const I=this.width/_,z=this.getDashRanges(r,this.width,I);u?this.addRoundDash(z,I,f):this.addRegularDash(z)}const T={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=m,this.dirty=!0,T}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Se{constructor(r,u,f){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=f;const m=this.workerPool.acquire(f);for(let _=0;_<m.length;_++){const T=new l.C(m[_],u,f);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,f){l.o(this.actors,(m,_)=>{m.send(r,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function $e(y,r,u){const f=function(m,_){if(m)return u(m);if(_){const T=l.F(l.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(T.vectorLayers=_.vector_layers,T.vectorLayerIds=T.vectorLayers.map(I=>I.id)),u(null,T)}};return y.url?l.f(r.transformRequest(y.url,G.Source),f):l.h.frame(()=>f(null,y))}class Pe{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}extend(r){const u=this._sw,f=this._ne;let m,_;if(r instanceof l.L)m=r,_=r;else{if(!(r instanceof Pe))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Pe.convert(r)):this.extend(l.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.L.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return u||f?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new l.L(m.lng,m.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:f}=l.L.convert(r);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Pe?r:r&&new Pe(r)}static fromLngLat(r,u=0){const f=360*u/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Pe(new l.L(r.lng-m,r.lat-f),new l.L(r.lng+m,r.lat+f))}}class Le{constructor(r,u,f){this.bounds=Pe.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),f=Math.floor(l.G(this.bounds.getWest())*u),m=Math.floor(l.H(this.bounds.getNorth())*u),_=Math.ceil(l.G(this.bounds.getEast())*u),T=Math.ceil(l.H(this.bounds.getSouth())*u);return r.x>=f&&r.x<_&&r.y>=m&&r.y<T}}class Xe extends l.E{constructor(r,u,f,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=$e(this._options,this.map._requestManager,(_,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):T&&(l.e(this,T),T.bounds&&(this.tileBounds=new Le(T.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(f,G.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(T,I){return delete r.request,r.aborted?u(null):T&&T.status!==404?u(T):(I&&I.resourceTiming&&(r.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&r.setExpiryData(I),r.loadVectorData(I,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",m,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",m,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ze extends l.E{constructor(r,u,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=$e(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.j(r)):u&&(l.e(this,u),u.bounds&&(this.tileBounds=new Le(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=de.getImage(this.map._requestManager.transformRequest(f,G.Tile),(m,_,T)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(m)r.state="errored",u(m);else if(_){this.map._refreshExpiredTiles&&T&&r.setExpiryData(T);const I=this.map.painter.context,z=I.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new q(I,_,z.RGBA,{useMipmap:!0}),r.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class nt extends Ze{constructor(r,u,f,m){super(r,u,f,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(f,G.Tile);function _(T,I){T&&(r.state="errored",u(T)),I&&(r.dem=I,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=de.getImage(m,(T,I,z)=>l._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(T)r.state="errored",u(T);else if(I){this.map._refreshExpiredTiles&&r.setExpiryData(z);const B=l.a(I)&&l.J()?I:yield function(K){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const he=K.width+2,Me=K.height+2;try{return new l.R({width:he,height:Me},yield l.M(K,-1,-1,he,Me))}catch{}}return l.h.getImageData(K,1)})}(I),X={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:B,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",X,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const u=r.canonical,f=Math.pow(2,u.z),m=(u.x-1+f)%f,_=u.x===0?r.wrap-1:r.wrap,T=(u.x+1+f)%f,I=u.x+1===f?r.wrap+1:r.wrap,z={};return z[new l.O(r.overscaledZ,_,u.z,m,u.y).key]={backfilled:!1},z[new l.O(r.overscaledZ,I,u.z,T,u.y).key]={backfilled:!1},u.y>0&&(z[new l.O(r.overscaledZ,_,u.z,m,u.y-1).key]={backfilled:!1},z[new l.O(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},z[new l.O(r.overscaledZ,I,u.z,T,u.y-1).key]={backfilled:!1}),u.y+1<f&&(z[new l.O(r.overscaledZ,_,u.z,m,u.y+1).key]={backfilled:!1},z[new l.O(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},z[new l.O(r.overscaledZ,I,u.z,T,u.y+1).key]={backfilled:!1}),z}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class ct extends l.E{constructor(r,u,f,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,f,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:f},m),this}_updateWorkerData(r){const u=l.e({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),G.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_=m.resourceTiming[this.id].slice(0)),f)return void this.fire(new l.j(f));const T={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(T,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const f=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(f,m,(_,T)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):_?u(_):(r.loadVectorData(T,this.map.painter,f==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var vt=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class It extends l.E{constructor(r,u,f,m){super(),this.load=(_,T)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=de.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(I,z)=>{this._request=null,this._loaded=!0,I?this.fire(new l.j(I)):z&&(this.image=z,_&&(this.coordinates=_),T&&T(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(_,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let I=!1;for(const z in this.tiles){const B=this.tiles[z];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.U.fromLngLat);this.tileID=function(m){let _=1/0,T=1/0,I=-1/0,z=-1/0;for(const he of m)_=Math.min(_,he.x),T=Math.min(T,he.y),I=Math.max(I,he.x),z=Math.max(z,he.y);const B=Math.max(I-_,z-T),X=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),K=Math.pow(2,X);return new l.W(X,Math.floor((_+I)/2*K),Math.floor((T+z)/2*K))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.N,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.N),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}hasTransition(){return!1}}class ft extends It{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const T of _.urls)this.urls.push(this.map._requestManager.transformRequest(T,G.Source).url);l.X(this.urls,(T,I)=>{this._loaded=!0,T?this.fire(new l.j(T)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new q(_,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let I=!1;for(const z in this.tiles){const B=this.tiles[z];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class St extends It{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const T=this.map.painter.context,I=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(T,this.canvas,I.RGBA,{premultiply:!0});let z=!1;for(const B in this.tiles){const X=this.tiles[B];X.state!=="loaded"&&(X.state="loaded",X.texture=this.texture,z=!0)}z&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Gt={},Ut=y=>{switch(y){case"geojson":return ct;case"image":return It;case"raster":return Ze;case"raster-dem":return nt;case"vector":return Xe;case"video":return ft;case"canvas":return St}return Gt[y]};function un(y,r){const u=l.Z();return l.$(u,u,[1,1,0]),l.a0(u,u,[.5*y.width,.5*y.height,1]),l.a1(u,u,y.calculatePosMatrix(r.toUnwrapped()))}function xn(y,r,u,f,m,_){const T=function(K,he,Me){if(K)for(const ke of K){const Fe=he[ke];if(Fe&&Fe.source===Me&&Fe.type==="fill-extrusion")return!0}else for(const ke in he){const Fe=he[ke];if(Fe.source===Me&&Fe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,y.id),I=_.maxPitchScaleFactor(),z=y.tilesIn(f,I,T);z.sort(yn);const B=[];for(const K of z)B.push({wrappedTileID:K.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(r,u,y._state,K.queryGeometry,K.cameraQueryGeometry,K.scale,m,_,I,un(y.transform,K.tileID))});const X=function(K){const he={},Me={};for(const ke of K){const Fe=ke.queryResults,Ie=ke.wrappedTileID,Ke=Me[Ie]=Me[Ie]||{};for(const tt in Fe){const De=Fe[tt],Ye=Ke[tt]=Ke[tt]||{},ot=he[tt]=he[tt]||[];for(const st of De)Ye[st.featureIndex]||(Ye[st.featureIndex]=!0,ot.push(st))}}return he}(B);for(const K in X)X[K].forEach(he=>{const Me=he.feature,ke=y.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=ke});return X}function yn(y,r){const u=y.tileID,f=r.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class on{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const T={};if(!_)return T;for(const I of m){const z=I.layerIds.map(B=>_.getLayer(B)).filter(Boolean);if(z.length!==0){I.layers=z,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(B=>z.filter(X=>X.id===B)[0]));for(const B of z)T[B.id]=I}}return T}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,f,m,_,T,I,z,B,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:X,transform:z,params:I,queryPadding:this.queryPadding*B},r,u,f):{}}querySourceFeatures(r,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",T=m._geojsonTileLayer||m[_];if(!T)return;const I=l.a6(u&&u.filter),{z,x:B,y:X}=this.tileID.canonical,K={z,x:B,y:X};for(let he=0;he<T.length;he++){const Me=T.feature(he);if(I.needGeometry){const Ie=l.a7(Me,!0);if(!I.filter(new l.a8(this.tileID.overscaledZ),Ie,this.tileID.canonical))continue}else if(!I.filter(new l.a8(this.tileID.overscaledZ),Me))continue;const ke=f.getId(Me,_),Fe=new l.a9(Me,z,B,X,ke);Fe.tile=K,r.push(Fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const f=l.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const _=this.buckets[m],T=_.layers[0].sourceLayer||"_geojsonTileLayer",I=f[T],z=r[T];if(!I||!z||Object.keys(z).length===0)continue;_.update(z,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const B=u&&u.style&&u.style.getLayer(m);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.h.now()+r}setDependencies(r,u){const f={};for(const m of u)f[m]=!0;this.dependencies[r]=f}hasDependency(r,u){for(const f of r){const m=this.dependencies[f];if(m){for(const _ of u)if(m[_])return!0}}return!1}}class gn{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},f)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const f=r.wrapped().key,m=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][m];return this.data[f].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||u.push(m);for(const f of u)this.remove(f.value.tileID,f)}}class se{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,f){const m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},l.e(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])f[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,u,f){if(this.deletedStates[r]===null)return;const m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,u){const f=String(u),m=l.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][u];if(_===null)return{};for(const T in _)delete m[T]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const T in this.stateChanges[m])this.state[m][T]||(this.state[m][T]={}),l.e(this.state[m][T],this.stateChanges[m][T]),_[T]=this.state[m][T];f[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const T in this.state[m])_[T]={},this.state[m][T]={};else for(const T in this.deletedStates[m]){if(this.deletedStates[m][T]===null)this.state[m][T]={};else for(const I of Object.keys(this.deletedStates[m][T]))delete this.state[m][T][I];_[T]=this.state[m][T]}f[m]=f[m]||{},l.e(f[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,u)}}class j extends l.E{constructor(r,u,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,T,I)=>{const z=new(Ut(_.type))(m,_,T,I);if(z.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${z.id}`);return z})(r,u,f,this),this._tiles={},this._cache=new gn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new se,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(O).map(r=>r.key)}getRenderableIds(r){const u=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&u.push(this._tiles[f]);return r?u.sort((f,m)=>{const _=f.tileID,T=m.tileID,I=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),z=new l.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-T.overscaledZ||z.y-I.y||z.x-I.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(O).map(f=>f.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,r,u)))}_tileLoaded(r,u,f,m){if(m)return r.state="errored",void(m.status!==404?this._source.fire(new l.j(m,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.h.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const _=u[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const T=this.getTileByID(_);f(r,T),f(T,r)}}function f(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-m.tileID.canonical.x;const I=_.tileID.canonical.y-m.tileID.canonical.y,z=Math.pow(2,m.tileID.canonical.z),B=_.tileID.key;T===0&&I===0||Math.abs(I)>1||(Math.abs(T)>1&&(Math.abs(T+z)===1?T+=z:Math.abs(T-z)===1&&(T-=z)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,T,I),m.neighboringTiles&&m.neighboringTiles[B]&&(m.neighboringTiles[B].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,f,m){for(const _ in this._tiles){let T=this._tiles[_];if(m[_]||!T.hasData()||T.tileID.overscaledZ<=u||T.tileID.overscaledZ>f)continue;let I=T.tileID;for(;T&&T.tileID.overscaledZ>u+1;){const B=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[B.key],T&&T.hasData()&&(I=B)}let z=I;for(;z.overscaledZ>u;)if(z=z.scaledTo(z.overscaledZ-1),r[z.key]){m[I.key]=I;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=r.overscaledZ-1;f>=u;f--){const m=r.scaledTo(f),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const f={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(X=>new l.O(X.canonical.z,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(X=>this._source.hasTile(X)))):f=[];const m=r.coveringZoomLevel(this._source),_=Math.max(m-j.maxOverzooming,this._source.minzoom),T=Math.max(m+j.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const X={};for(const K of f)if(K.canonical.z>this._source.minzoom){const he=K.scaledTo(K.canonical.z-1);X[he.key]=he;const Me=K.scaledTo(Math.max(this._source.minzoom,Math.min(K.canonical.z,5)));X[Me.key]=Me}f=f.concat(Object.values(X))}const I=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(f,m);if(pe(this._source.type)){const X={},K={},he=Object.keys(z),Me=l.h.now();for(const ke of he){const Fe=z[ke],Ie=this._tiles[ke];if(!Ie||Ie.fadeEndTime!==0&&Ie.fadeEndTime<=Me)continue;const Ke=this.findLoadedParent(Fe,_);Ke&&(this._addTile(Ke.tileID),X[Ke.tileID.key]=Ke.tileID),K[ke]=Fe}this._retainLoadedChildren(K,m,T,z);for(const ke in X)z[ke]||(this._coveredTiles[ke]=!0,z[ke]=X[ke]);if(u){const ke={},Fe={};for(const Ie of f)this._tiles[Ie.key].hasData()?ke[Ie.key]=Ie:Fe[Ie.key]=Ie;for(const Ie in Fe){const Ke=Fe[Ie].children(this._source.maxzoom);this._tiles[Ke[0].key]&&this._tiles[Ke[1].key]&&this._tiles[Ke[2].key]&&this._tiles[Ke[3].key]&&(ke[Ke[0].key]=z[Ke[0].key]=Ke[0],ke[Ke[1].key]=z[Ke[1].key]=Ke[1],ke[Ke[2].key]=z[Ke[2].key]=Ke[2],ke[Ke[3].key]=z[Ke[3].key]=Ke[3],delete Fe[Ie])}for(const Ie in Fe){const Ke=this.findLoadedParent(Fe[Ie],this._source.minzoom);if(Ke){ke[Ke.tileID.key]=z[Ke.tileID.key]=Ke.tileID;for(const tt in ke)ke[tt].isChildOf(Ke.tileID)&&delete ke[tt]}}for(const Ie in this._tiles)ke[Ie]||(this._coveredTiles[Ie]=!0)}}for(const X in z)this._tiles[X].clearFadeHold();const B=l.ab(this._tiles,z);for(const X of B){const K=this._tiles[X];K.hasSymbolBuckets&&!K.holdingForFade()?K.setHoldDuration(this.map._fadeDuration):K.hasSymbolBuckets&&!K.symbolFadeFinished()||this._removeTile(X)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const f={},m={},_=Math.max(u-j.maxOverzooming,this._source.minzoom),T=Math.max(u+j.maxUnderzooming,this._source.minzoom),I={};for(const z of r){const B=this._addTile(z);f[z.key]=z,B.hasData()||u<this._source.maxzoom&&(I[z.key]=z)}this._retainLoadedChildren(I,u,T,f);for(const z of r){let B=this._tiles[z.key];if(B.hasData())continue;if(u+1>this._source.maxzoom){const K=z.children(this._source.maxzoom)[0],he=this.getTile(K);if(he&&he.hasData()){f[K.key]=K;continue}}else{const K=z.children(this._source.maxzoom);if(f[K[0].key]&&f[K[1].key]&&f[K[2].key]&&f[K[3].key])continue}let X=B.wasRequested();for(let K=z.overscaledZ-1;K>=_;--K){const he=z.scaledTo(K);if(m[he.key])break;if(m[he.key]=!0,B=this.getTile(he),!B&&X&&(B=this._addTile(he)),B){const Me=B.hasData();if((X||Me)&&(f[he.key]=he),X=B.wasRequested(),Me)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}u.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;m=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const f=u;return u||(u=new on(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,f||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=u.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,f){const m=[],_=this.transform;if(!_)return m;const T=f?_.getCameraQueryGeometry(r):r,I=r.map(ke=>_.pointCoordinate(ke,this.terrain)),z=T.map(ke=>_.pointCoordinate(ke,this.terrain)),B=this.getIds();let X=1/0,K=1/0,he=-1/0,Me=-1/0;for(const ke of z)X=Math.min(X,ke.x),K=Math.min(K,ke.y),he=Math.max(he,ke.x),Me=Math.max(Me,ke.y);for(let ke=0;ke<B.length;ke++){const Fe=this._tiles[B[ke]];if(Fe.holdingForFade())continue;const Ie=Fe.tileID,Ke=Math.pow(2,_.zoom-Fe.tileID.overscaledZ),tt=u*Fe.queryPadding*l.N/Fe.tileSize/Ke,De=[Ie.getTilePoint(new l.U(X,K)),Ie.getTilePoint(new l.U(he,Me))];if(De[0].x-tt<l.N&&De[0].y-tt<l.N&&De[1].x+tt>=0&&De[1].y+tt>=0){const Ye=I.map(st=>Ie.getTilePoint(st)),ot=z.map(st=>Ie.getTilePoint(st));m.push({tile:Fe,tileID:Ie,queryGeometry:Ye,cameraQueryGeometry:ot,scale:Ke})}}return m}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(pe(this._source.type)){const r=l.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,f){this._state.updateState(r=r||"_geojsonTileLayer",u,f)}removeFeatureState(r,u,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,f)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,f){const m=this._tiles[r];m&&m.setDependencies(u,f)}reloadTilesForDependencies(r,u){for(const f in this._tiles)this._tiles[f].hasDependency(r,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,u))}}function O(y,r){const u=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||f-u||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function pe(y){return y==="raster"||y==="image"||y==="video"}j.maxOverzooming=10,j.maxUnderzooming=3;const Be="mapboxgl_preloaded_worker_pool";class et{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<et.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Be]}numActive(){return Object.keys(this.active).length}}const lt=Math.floor(l.h.hardwareConcurrency/2);let le;function L(){return le||(le=new et),le}et.workerCount=l.ac(globalThis)?Math.max(Math.min(lt,3),1):1;class D{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ad(r,0,1);let u=1,f=this._distances[u];const m=r*this.paddedLength+this.padding;for(;f<m&&u<this._distances.length;)f=this._distances[++u];const _=u-1,T=this._distances[_],I=f-T,z=I>0?(m-T)/I:0;return this.points[_].mult(1-z).add(this.points[u].mult(z))}}function Ee(y,r){let u=!0;return y==="always"||y!=="never"&&r!=="never"||(u=!1),u}class Ge{constructor(r,u,f){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(u/f);for(let T=0;T<this.xCellCount*this.yCellCount;T++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,f,m,_){this._forEachCell(u,f,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,u,f,m){this._forEachCell(u-m,f-m,u+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,u,f,m,_,T){this.boxCells[_].push(T)}_insertCircleCell(r,u,f,m,_,T){this.circleCells[_].push(T)}_query(r,u,f,m,_,T,I){if(f<0||r>this.width||m<0||u>this.height)return[];const z=[];if(r<=0&&u<=0&&this.width<=f&&this.height<=m){if(_)return[{key:null,x1:r,y1:u,x2:f,y2:m}];for(let B=0;B<this.boxKeys.length;B++)z.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const X=this.circles[3*B],K=this.circles[3*B+1],he=this.circles[3*B+2];z.push({key:this.circleKeys[B],x1:X-he,y1:K-he,x2:X+he,y2:K+he})}}else this._forEachCell(r,u,f,m,this._queryCell,z,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},I);return z}query(r,u,f,m){return this._query(r,u,f,m,!1,null)}hitTest(r,u,f,m,_,T){return this._query(r,u,f,m,!0,_,T).length>0}hitTestCircle(r,u,f,m,_){const T=r-f,I=r+f,z=u-f,B=u+f;if(I<0||T>this.width||B<0||z>this.height)return!1;const X=[];return this._forEachCell(T,z,I,B,this._queryCellCircle,X,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:f},seenUids:{box:{},circle:{}}},_),X.length>0}_queryCell(r,u,f,m,_,T,I,z){const{seenUids:B,hitTest:X,overlapMode:K}=I,he=this.boxCells[_];if(he!==null){const ke=this.bboxes;for(const Fe of he)if(!B.box[Fe]){B.box[Fe]=!0;const Ie=4*Fe,Ke=this.boxKeys[Fe];if(r<=ke[Ie+2]&&u<=ke[Ie+3]&&f>=ke[Ie+0]&&m>=ke[Ie+1]&&(!z||z(Ke))&&(!X||!Ee(K,Ke.overlapMode))&&(T.push({key:Ke,x1:ke[Ie],y1:ke[Ie+1],x2:ke[Ie+2],y2:ke[Ie+3]}),X))return!0}}const Me=this.circleCells[_];if(Me!==null){const ke=this.circles;for(const Fe of Me)if(!B.circle[Fe]){B.circle[Fe]=!0;const Ie=3*Fe,Ke=this.circleKeys[Fe];if(this._circleAndRectCollide(ke[Ie],ke[Ie+1],ke[Ie+2],r,u,f,m)&&(!z||z(Ke))&&(!X||!Ee(K,Ke.overlapMode))){const tt=ke[Ie],De=ke[Ie+1],Ye=ke[Ie+2];if(T.push({key:Ke,x1:tt-Ye,y1:De-Ye,x2:tt+Ye,y2:De+Ye}),X)return!0}}}return!1}_queryCellCircle(r,u,f,m,_,T,I,z){const{circle:B,seenUids:X,overlapMode:K}=I,he=this.boxCells[_];if(he!==null){const ke=this.bboxes;for(const Fe of he)if(!X.box[Fe]){X.box[Fe]=!0;const Ie=4*Fe,Ke=this.boxKeys[Fe];if(this._circleAndRectCollide(B.x,B.y,B.radius,ke[Ie+0],ke[Ie+1],ke[Ie+2],ke[Ie+3])&&(!z||z(Ke))&&!Ee(K,Ke.overlapMode))return T.push(!0),!0}}const Me=this.circleCells[_];if(Me!==null){const ke=this.circles;for(const Fe of Me)if(!X.circle[Fe]){X.circle[Fe]=!0;const Ie=3*Fe,Ke=this.circleKeys[Fe];if(this._circlesCollide(ke[Ie],ke[Ie+1],ke[Ie+2],B.x,B.y,B.radius)&&(!z||z(Ke))&&!Ee(K,Ke.overlapMode))return T.push(!0),!0}}}_forEachCell(r,u,f,m,_,T,I,z){const B=this._convertToXCellCoord(r),X=this._convertToYCellCoord(u),K=this._convertToXCellCoord(f),he=this._convertToYCellCoord(m);for(let Me=B;Me<=K;Me++)for(let ke=X;ke<=he;ke++)if(_.call(this,r,u,f,m,this.xCellCount*ke+Me,T,I,z))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,f,m,_,T){const I=m-r,z=_-u,B=f+T;return B*B>I*I+z*z}_circleAndRectCollide(r,u,f,m,_,T,I){const z=(T-m)/2,B=Math.abs(r-(m+z));if(B>z+f)return!1;const X=(I-_)/2,K=Math.abs(u-(_+X));if(K>X+f)return!1;if(B<=z||K<=X)return!0;const he=B-z,Me=K-X;return he*he+Me*Me<=f*f}}function je(y,r,u,f,m){const _=l.Z();return r?(l.a0(_,_,[1/m,1/m,1]),u||l.ae(_,_,f.angle)):l.a1(_,f.labelPlaneMatrix,y),_}function at(y,r,u,f,m){if(r){const _=l.af(y);return l.a0(_,_,[m,m,1]),u||l.ae(_,_,-f.angle),_}return f.glCoordMatrix}function jt(y,r,u){let f;u?(f=[y.x,y.y,u(y.x,y.y),1],l.ag(f,f,r)):(f=[y.x,y.y,0,1],we(f,f,r));const m=f[3];return{point:new l.P(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function Tn(y,r){return .5+y/r*.5}function vn(y,r){const u=y[0]/y[3],f=y[1]/y[3];return u>=-r[0]&&u<=r[0]&&f>=-r[1]&&f<=r[1]}function _t(y,r,u,f,m,_,T,I,z,B){const X=f?y.textSizeData:y.iconSizeData,K=l.ah(X,u.transform.zoom),he=[256/u.width*2+1,256/u.height*2+1],Me=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Me.clear();const ke=y.lineVertexArray,Fe=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ie=u.transform.width/u.transform.height;let Ke=!1;for(let tt=0;tt<Fe.length;tt++){const De=Fe.get(tt);if(De.hidden||De.writingMode===l.ai.vertical&&!Ke){_e(De.numGlyphs,Me);continue}let Ye;if(Ke=!1,B?(Ye=[De.anchorX,De.anchorY,B(De.anchorX,De.anchorY),1],l.ag(Ye,Ye,r)):(Ye=[De.anchorX,De.anchorY,0,1],we(Ye,Ye,r)),!vn(Ye,he)){_e(De.numGlyphs,Me);continue}const ot=Tn(u.transform.cameraToCenterDistance,Ye[3]),st=l.aj(X,K,De),dt=T?st/ot:st*ot,wt=new l.P(De.anchorX,De.anchorY),xt=jt(wt,m,B).point,Et={projections:{},offsets:{}},$t=xr(De,dt,!1,I,r,m,_,y.glyphOffsetArray,ke,Me,xt,wt,Et,Ie,z,B);Ke=$t.useVertical,($t.notEnoughRoom||Ke||$t.needsFlipping&&xr(De,dt,!0,I,r,m,_,y.glyphOffsetArray,ke,Me,xt,wt,Et,Ie,z,B).notEnoughRoom)&&_e(De.numGlyphs,Me)}f?y.text.dynamicLayoutVertexBuffer.updateData(Me):y.icon.dynamicLayoutVertexBuffer.updateData(Me)}function Rt(y,r,u,f,m,_,T,I,z,B,X,K,he){const Me=I.glyphStartIndex+I.numGlyphs,ke=I.lineStartIndex,Fe=I.lineStartIndex+I.lineLength,Ie=r.getoffsetX(I.glyphStartIndex),Ke=r.getoffsetX(Me-1),tt=oe(y*Ie,u,f,m,_,T,I.segment,ke,Fe,z,B,X,K,he);if(!tt)return null;const De=oe(y*Ke,u,f,m,_,T,I.segment,ke,Fe,z,B,X,K,he);return De?{first:tt,last:De}:null}function nn(y,r,u,f){return y===l.ai.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*f?{useVertical:!0}:(y===l.ai.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function xr(y,r,u,f,m,_,T,I,z,B,X,K,he,Me,ke,Fe){const Ie=r/24,Ke=y.lineOffsetX*Ie,tt=y.lineOffsetY*Ie;let De;if(y.numGlyphs>1){const Ye=y.glyphStartIndex+y.numGlyphs,ot=y.lineStartIndex,st=y.lineStartIndex+y.lineLength,dt=Rt(Ie,I,Ke,tt,u,X,K,y,z,_,he,ke,Fe);if(!dt)return{notEnoughRoom:!0};const wt=jt(dt.first.point,T,Fe).point,xt=jt(dt.last.point,T,Fe).point;if(f&&!u){const Et=nn(y.writingMode,wt,xt,Me);if(Et)return Et}De=[dt.first];for(let Et=y.glyphStartIndex+1;Et<Ye-1;Et++)De.push(oe(Ie*I.getoffsetX(Et),Ke,tt,u,X,K,y.segment,ot,st,z,_,he,ke,Fe));De.push(dt.last)}else{if(f&&!u){const ot=jt(K,m,Fe).point,st=y.lineStartIndex+y.segment+1,dt=new l.P(z.getx(st),z.gety(st)),wt=jt(dt,m,Fe),xt=wt.signedDistanceFromCamera>0?wt.point:ui(K,dt,ot,1,m,Fe),Et=nn(y.writingMode,ot,xt,Me);if(Et)return Et}const Ye=oe(Ie*I.getoffsetX(y.glyphStartIndex),Ke,tt,u,X,K,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,z,_,he,ke,Fe);if(!Ye)return{notEnoughRoom:!0};De=[Ye]}for(const Ye of De)l.ak(B,Ye.point,Ye.angle);return{}}function ui(y,r,u,f,m,_){const T=jt(y.add(y.sub(r)._unit()),m,_).point,I=u.sub(T);return u.add(I._mult(f/I.mag()))}function cn(y,r){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:T,getElevation:I,previousVertex:z,direction:B,absOffsetX:X}=r;if(u.projections[y])return u.projections[y];const K=new l.P(f.getx(y),f.gety(y)),he=jt(K,m,I);if(he.signedDistanceFromCamera>0)return u.projections[y]=he.point,he.point;const Me=y-B;return ui(T===0?_:new l.P(f.getx(Me),f.gety(Me)),K,z,X-T+1,m,I)}function er(y,r,u){return y._unit()._perp()._mult(r*u)}function ze(y,r,u,f,m,_,T,I){const{projectionCache:z,direction:B}=I;if(z.offsets[y])return z.offsets[y];const X=u.add(r);if(y+B<f||y+B>=m)return z.offsets[y]=X,X;const K=cn(y+B,I),he=er(K.sub(u),T,B),Me=u.add(he),ke=K.add(he);return z.offsets[y]=l.al(_,X,Me,ke)||X,z.offsets[y]}function oe(y,r,u,f,m,_,T,I,z,B,X,K,he,Me){const ke=f?y-r:y+r;let Fe=ke>0?1:-1,Ie=0;f&&(Fe*=-1,Ie=Math.PI),Fe<0&&(Ie+=Math.PI);let Ke,tt,De=Fe>0?I+T:I+T+1,Ye=m,ot=m,st=0,dt=0;const wt=Math.abs(ke),xt=[];let Et;for(;st+dt<=wt;){if(De+=Fe,De<I||De>=z)return null;st+=dt,ot=Ye,tt=Ke;const kt={projectionCache:K,lineVertexArray:B,labelPlaneMatrix:X,tileAnchorPoint:_,distanceFromAnchor:st,getElevation:Me,previousVertex:ot,direction:Fe,absOffsetX:wt};if(Ye=cn(De,kt),u===0)xt.push(ot),Et=Ye.sub(ot);else{let an;const Ht=Ye.sub(ot);an=Ht.mag()===0?er(cn(De+Fe,kt).sub(Ye),u,Fe):er(Ht,u,Fe),tt||(tt=ot.add(an)),Ke=ze(De,an,Ye,I,z,tt,u,kt),xt.push(tt),Et=Ke.sub(tt)}dt=Et.mag()}const $t=Et._mult((wt-st)/dt)._add(tt||ot),Pn=Ie+Math.atan2(Ye.y-ot.y,Ye.x-ot.x);return xt.push($t),{point:$t,angle:he?Pn:0,path:xt}}const ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function _e(y,r){for(let u=0;u<y;u++){const f=r.length;r.resize(f+4),r.float32.set(ce,3*f)}}function we(y,r,u){const f=r[0],m=r[1];return y[0]=u[0]*f+u[4]*m+u[12],y[1]=u[1]*f+u[5]*m+u[13],y[3]=u[3]*f+u[7]*m+u[15],y}const Ce=100;class He{constructor(r,u=new Ge(r.width+200,r.height+200,25),f=new Ge(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ce,this.screenBottomBoundary=r.height+Ce,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,f,m,_,T){const I=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,T),z=f*I.perspectiveRatio,B=r.x1*z+I.point.x,X=r.y1*z+I.point.y,K=r.x2*z+I.point.x,he=r.y2*z+I.point.y;return!this.isInsideGrid(B,X,K,he)||u!=="always"&&this.grid.hitTest(B,X,K,he,u,_)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[B,X,K,he],offscreen:this.isOffscreen(B,X,K,he)}}placeCollisionCircles(r,u,f,m,_,T,I,z,B,X,K,he,Me,ke){const Fe=[],Ie=new l.P(u.anchorX,u.anchorY),Ke=jt(Ie,T,ke),tt=Tn(this.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),De=(X?_/tt:_*tt)/l.ap,Ye=jt(Ie,I,ke).point,ot=Rt(De,m,u.lineOffsetX*De,u.lineOffsetY*De,!1,Ye,Ie,u,f,I,{projections:{},offsets:{}},!1,ke);let st=!1,dt=!1,wt=!0;if(ot){const xt=.5*he*tt+Me,Et=new l.P(-100,-100),$t=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Pn=new D,kt=ot.first,an=ot.last;let Ht=[];for(let _n=kt.path.length-1;_n>=1;_n--)Ht.push(kt.path[_n]);for(let _n=1;_n<an.path.length;_n++)Ht.push(an.path[_n]);const Wn=2.5*xt;if(z){const _n=Ht.map(kn=>jt(kn,z,ke));Ht=_n.some(kn=>kn.signedDistanceFromCamera<=0)?[]:_n.map(kn=>kn.point)}let An=[];if(Ht.length>0){const _n=Ht[0].clone(),kn=Ht[0].clone();for(let br=1;br<Ht.length;br++)_n.x=Math.min(_n.x,Ht[br].x),_n.y=Math.min(_n.y,Ht[br].y),kn.x=Math.max(kn.x,Ht[br].x),kn.y=Math.max(kn.y,Ht[br].y);An=_n.x>=Et.x&&kn.x<=$t.x&&_n.y>=Et.y&&kn.y<=$t.y?[Ht]:kn.x<Et.x||_n.x>$t.x||kn.y<Et.y||_n.y>$t.y?[]:l.am([Ht],Et.x,Et.y,$t.x,$t.y)}for(const _n of An){Pn.reset(_n,.25*xt);let kn=0;kn=Pn.length<=.5*xt?1:Math.ceil(Pn.paddedLength/Wn)+1;for(let br=0;br<kn;br++){const nr=br/Math.max(kn-1,1),ii=Pn.lerp(nr),Vr=ii.x+Ce,Ir=ii.y+Ce;Fe.push(Vr,Ir,xt,0);const Qi=Vr-xt,ur=Ir-xt,Yo=Vr+xt,Jo=Ir+xt;if(wt=wt&&this.isOffscreen(Qi,ur,Yo,Jo),dt=dt||this.isInsideGrid(Qi,ur,Yo,Jo),r!=="always"&&this.grid.hitTestCircle(Vr,Ir,xt,r,K)&&(st=!0,!B))return{circles:[],offscreen:!1,collisionDetected:st}}}}return{circles:!B&&st||!dt||tt<this.perspectiveRatioCutoff?[]:Fe,offscreen:wt,collisionDetected:st}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,m=1/0,_=-1/0,T=-1/0;for(const X of r){const K=new l.P(X.x+Ce,X.y+Ce);f=Math.min(f,K.x),m=Math.min(m,K.y),_=Math.max(_,K.x),T=Math.max(T,K.y),u.push(K)}const I=this.grid.query(f,m,_,T).concat(this.ignoredGrid.query(f,m,_,T)),z={},B={};for(const X of I){const K=X.key;if(z[K.bucketInstanceId]===void 0&&(z[K.bucketInstanceId]={}),z[K.bucketInstanceId][K.featureIndex])continue;const he=[new l.P(X.x1,X.y1),new l.P(X.x2,X.y1),new l.P(X.x2,X.y2),new l.P(X.x1,X.y2)];l.an(u,he)&&(z[K.bucketInstanceId][K.featureIndex]=!0,B[K.bucketInstanceId]===void 0&&(B[K.bucketInstanceId]=[]),B[K.bucketInstanceId].push(K.featureIndex))}return B}insertCollisionBox(r,u,f,m,_,T){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,f,m,_,T){const I=f?this.ignoredGrid:this.grid,z={bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:u};for(let B=0;B<r.length;B+=4)I.insertCircle(z,r[B],r[B+1],r[B+2])}projectAndGetPerspectiveRatio(r,u,f,m){let _;return m?(_=[u,f,m(u,f),1],l.ag(_,_,r)):(_=[u,f,0,1],we(_,_,r)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+Ce,(-_[1]/_[3]+1)/2*this.transform.height+Ce),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,u,f,m){return f<Ce||r>=this.screenRightBoundary||m<Ce||u>this.screenBottomBoundary}isInsideGrid(r,u,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.ao([]);return l.$(r,r,[-100,-100,0]),r}}function Ve(y,r,u){return r*(l.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class Oe{constructor(r,u,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class qe{constructor(r,u,f,m,_){this.text=new Oe(r?r.text:null,u,f,_),this.icon=new Oe(r?r.icon:null,u,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ut{constructor(r,u,f){this.text=r,this.icon=u,this.skipFade=f}}class ht{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class mt{constructor(r,u,f,m,_){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=_}}class Jt{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[r]}}function ln(y,r,u,f,m){const{horizontalAlign:_,verticalAlign:T}=l.au(y);return new l.P(-(_-.5)*r+f[0]*m,-(T-.5)*u+f[1]*m)}function Dt(y,r,u,f,m,_){const{x1:T,x2:I,y1:z,y2:B,anchorPointX:X,anchorPointY:K}=y,he=new l.P(r,u);return f&&he._rotate(m?_:-_),{x1:T+he.x,y1:z+he.y,x2:I+he.x,y2:B+he.y,anchorPointX:X,anchorPointY:K}}class Qt{constructor(r,u,f,m,_){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new He(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Jt(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,f,m){const _=f.getBucket(u),T=f.latestFeatureIndex;if(!_||!T||u.id!==_.layerIds[0])return;const I=f.collisionBoxArray,z=_.layers[0].layout,B=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),X=f.tileSize/l.N,K=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),he=z.get("text-pitch-alignment")==="map",Me=z.get("text-rotation-alignment")==="map",ke=Ve(f,1,this.transform.zoom),Fe=je(K,he,Me,this.transform,ke);let Ie=null;if(he){const tt=at(K,he,Me,this.transform,ke);Ie=l.a1([],this.transform.labelPlaneMatrix,tt)}this.retainedQueryData[_.bucketInstanceId]=new mt(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,f.tileID);const Ke={bucket:_,layout:z,posMatrix:K,textLabelPlaneMatrix:Fe,labelToScreenMatrix:Ie,scale:B,textPixelRatio:X,holdingForFade:f.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const tt of _.sortKeyRanges){const{sortKey:De,symbolInstanceStart:Ye,symbolInstanceEnd:ot}=tt;r.push({sortKey:De,symbolInstanceStart:Ye,symbolInstanceEnd:ot,parameters:Ke})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(r,u,f,m,_,T,I,z,B,X,K,he,Me,ke,Fe,Ie){const Ke=l.aq[r.textAnchor],tt=[r.textOffset0,r.textOffset1],De=ln(Ke,f,m,tt,_),Ye=this.collisionIndex.placeCollisionBox(Dt(u,De.x,De.y,T,I,this.transform.angle),K,z,B,X.predicate,Ie);if((!Fe||this.collisionIndex.placeCollisionBox(Dt(Fe,De.x,De.y,T,I,this.transform.angle),K,z,B,X.predicate,Ie).box.length!==0)&&Ye.box.length>0){let ot;if(this.prevPlacement&&this.prevPlacement.variableOffsets[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID].text&&(ot=this.prevPlacement.variableOffsets[he.crossTileID].anchor),he.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[he.crossTileID]={textOffset:tt,width:f,height:m,anchor:Ke,textBoxScale:_,prevAnchor:ot},this.markUsedJustification(Me,Ke,he,ke),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,ke,he),this.placedOrientations[he.crossTileID]=ke),{shift:De,placedGlyphBoxes:Ye}}}placeLayerBucketPart(r,u,f){const{bucket:m,layout:_,posMatrix:T,textLabelPlaneMatrix:I,labelToScreenMatrix:z,textPixelRatio:B,holdingForFade:X,collisionBoxArray:K,partiallyEvaluatedTextSize:he,collisionGroup:Me}=r.parameters,ke=_.get("text-optional"),Fe=_.get("icon-optional"),Ie=l.ar(_,"text-overlap","text-allow-overlap"),Ke=Ie==="always",tt=l.ar(_,"icon-overlap","icon-allow-overlap"),De=tt==="always",Ye=_.get("text-rotation-alignment")==="map",ot=_.get("text-pitch-alignment")==="map",st=_.get("icon-text-fit")!=="none",dt=_.get("symbol-z-order")==="viewport-y",wt=Ke&&(De||!m.hasIconData()||Fe),xt=De&&(Ke||!m.hasTextData()||ke);!m.collisionArrays&&K&&m.deserializeCollisionBoxes(K);const Et=this.retainedQueryData[m.bucketInstanceId].tileID,$t=this.terrain?(kt,an)=>this.terrain.getElevation(Et,kt,an):null,Pn=(kt,an)=>{var Ht,Wn;if(u[kt.crossTileID])return;if(X)return void(this.placements[kt.crossTileID]=new ut(!1,!1,!1));let An=!1,_n=!1,kn=!0,br=null,nr={box:null,offscreen:null},ii={box:null,offscreen:null},Vr=null,Ir=null,Qi=null,ur=0,Yo=0,Jo=0;an.textFeatureIndex?ur=an.textFeatureIndex:kt.useRuntimeCollisionCircles&&(ur=kt.featureIndex),an.verticalTextFeatureIndex&&(Yo=an.verticalTextFeatureIndex);const Js=an.textBox;if(Js){const di=Sr=>{let Gr=l.ai.horizontal;if(m.allowVerticalPlacement&&!Sr&&this.prevPlacement){const ji=this.prevPlacement.placedOrientations[kt.crossTileID];ji&&(this.placedOrientations[kt.crossTileID]=ji,Gr=ji,this.markUsedOrientation(m,Gr,kt))}return Gr},oi=(Sr,Gr)=>{if(m.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&an.verticalTextBox){for(const ji of m.writingModes)if(ji===l.ai.vertical?(nr=Gr(),ii=nr):nr=Sr(),nr&&nr.box&&nr.box.length)break}else nr=Sr()},Si=kt.textAnchorOffsetStartIndex,ka=kt.textAnchorOffsetEndIndex;if(ka===Si){const Sr=(Gr,ji)=>{const Er=this.collisionIndex.placeCollisionBox(Gr,Ie,B,T,Me.predicate,$t);return Er&&Er.box&&Er.box.length&&(this.markUsedOrientation(m,ji,kt),this.placedOrientations[kt.crossTileID]=ji),Er};oi(()=>Sr(Js,l.ai.horizontal),()=>{const Gr=an.verticalTextBox;return m.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&Gr?Sr(Gr,l.ai.vertical):{box:null,offscreen:null}}),di(nr&&nr.box&&nr.box.length)}else{let Sr=l.aq[(Wn=(Ht=this.prevPlacement)===null||Ht===void 0?void 0:Ht.variableOffsets[kt.crossTileID])===null||Wn===void 0?void 0:Wn.anchor];const Gr=(Er,Ma,xc)=>{const Hd=Er.x2-Er.x1,Wd=Er.y2-Er.y1,Xg=kt.textBoxScale,Jh=st&&tt==="never"?Ma:null;let Qo={box:[],offscreen:!1},za=Ie==="never"?1:2,es="never";Sr&&za++;for(let yo=0;yo<za;yo++){for(let ts=Si;ts<ka;ts++){const Qh=m.textAnchorOffsets.get(ts);if(Sr&&Qh.textAnchor!==Sr)continue;const Ss=this.attemptAnchorPlacement(Qh,Er,Hd,Wd,Xg,Ye,ot,B,T,Me,es,kt,m,xc,Jh,$t);if(Ss&&(Qo=Ss.placedGlyphBoxes,Qo&&Qo.box&&Qo.box.length))return An=!0,br=Ss.shift,Qo}Sr?Sr=null:es=Ie}return Qo};oi(()=>Gr(Js,an.iconBox,l.ai.horizontal),()=>{const Er=an.verticalTextBox;return m.allowVerticalPlacement&&!(nr&&nr.box&&nr.box.length)&&kt.numVerticalGlyphVertices>0&&Er?Gr(Er,an.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),nr&&(An=nr.box,kn=nr.offscreen);const ji=di(nr&&nr.box);if(!An&&this.prevPlacement){const Er=this.prevPlacement.variableOffsets[kt.crossTileID];Er&&(this.variableOffsets[kt.crossTileID]=Er,this.markUsedJustification(m,Er.anchor,kt,ji))}}}if(Vr=nr,An=Vr&&Vr.box&&Vr.box.length>0,kn=Vr&&Vr.offscreen,kt.useRuntimeCollisionCircles){const di=m.text.placedSymbolArray.get(kt.centerJustifiedTextSymbolIndex),oi=l.aj(m.textSizeData,he,di),Si=_.get("text-padding");Ir=this.collisionIndex.placeCollisionCircles(Ie,di,m.lineVertexArray,m.glyphOffsetArray,oi,T,I,z,f,ot,Me.predicate,kt.collisionCircleDiameter,Si,$t),Ir.circles.length&&Ir.collisionDetected&&!f&&l.w("Collisions detected, but collision boxes are not shown"),An=Ke||Ir.circles.length>0&&!Ir.collisionDetected,kn=kn&&Ir.offscreen}if(an.iconFeatureIndex&&(Jo=an.iconFeatureIndex),an.iconBox){const di=oi=>{const Si=st&&br?Dt(oi,br.x,br.y,Ye,ot,this.transform.angle):oi;return this.collisionIndex.placeCollisionBox(Si,tt,B,T,Me.predicate,$t)};ii&&ii.box&&ii.box.length&&an.verticalIconBox?(Qi=di(an.verticalIconBox),_n=Qi.box.length>0):(Qi=di(an.iconBox),_n=Qi.box.length>0),kn=kn&&Qi.offscreen}const Pa=ke||kt.numHorizontalGlyphVertices===0&&kt.numVerticalGlyphVertices===0,Tl=Fe||kt.numIconVertices===0;if(Pa||Tl?Tl?Pa||(_n=_n&&An):An=_n&&An:_n=An=_n&&An,An&&Vr&&Vr.box&&this.collisionIndex.insertCollisionBox(Vr.box,Ie,_.get("text-ignore-placement"),m.bucketInstanceId,ii&&ii.box&&Yo?Yo:ur,Me.ID),_n&&Qi&&this.collisionIndex.insertCollisionBox(Qi.box,tt,_.get("icon-ignore-placement"),m.bucketInstanceId,Jo,Me.ID),Ir&&(An&&this.collisionIndex.insertCollisionCircles(Ir.circles,Ie,_.get("text-ignore-placement"),m.bucketInstanceId,ur,Me.ID),f)){const di=m.bucketInstanceId;let oi=this.collisionCircleArrays[di];oi===void 0&&(oi=this.collisionCircleArrays[di]=new ht);for(let Si=0;Si<Ir.circles.length;Si+=4)oi.circles.push(Ir.circles[Si+0]),oi.circles.push(Ir.circles[Si+1]),oi.circles.push(Ir.circles[Si+2]),oi.circles.push(Ir.collisionDetected?1:0)}if(kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kt.crossTileID]=new ut(An||wt,_n||xt,kn||m.justReloaded),u[kt.crossTileID]=!0};if(dt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kt=m.getSortedSymbolIndexes(this.transform.angle);for(let an=kt.length-1;an>=0;--an){const Ht=kt[an];Pn(m.symbolInstances.get(Ht),m.collisionArrays[Ht])}}else for(let kt=r.symbolInstanceStart;kt<r.symbolInstanceEnd;kt++)Pn(m.symbolInstances.get(kt),m.collisionArrays[kt]);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[m.bucketInstanceId];l.as(kt.invProjMatrix,T),kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,u,f,m){let _;_=m===l.ai.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.at(u)];const T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const I of T)I>=0&&(r.text.placedSymbolArray.get(I).crossTileID=_>=0&&I!==_?0:f.crossTileID)}markUsedOrientation(r,u,f){const m=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,_=u===l.ai.vertical?u:0,T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const I of T)r.text.placedSymbolArray.get(I).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(r):1,_=u?u.opacities:{},T=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const z in this.placements){const B=this.placements[z],X=_[z];X?(this.opacities[z]=new qe(X,m,B.text,B.icon),f=f||B.text!==X.text.placed||B.icon!==X.icon.placed):(this.opacities[z]=new qe(null,m,B.text,B.icon,B.skipFade),f=f||B.text||B.icon)}for(const z in _){const B=_[z];if(!this.opacities[z]){const X=new qe(B,m,!1,!1);X.isHidden()||(this.opacities[z]=X,f=f||B.text.placed||B.icon.placed)}}for(const z in T)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=T[z]);for(const z in I)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=I[z]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const f={};for(const m of u){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,m.collisionBoxArray)}}updateBucketOpacities(r,u,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],_=m.layout,T=new qe(null,0,!1,!1,!0),I=_.get("text-allow-overlap"),z=_.get("icon-allow-overlap"),B=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=_.get("text-rotation-alignment")==="map",K=_.get("text-pitch-alignment")==="map",he=_.get("icon-text-fit")!=="none",Me=new qe(null,0,I&&(z||!r.hasIconData()||_.get("icon-optional")),z&&(I||!r.hasTextData()||_.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const ke=(Fe,Ie,Ke)=>{for(let tt=0;tt<Ie/4;tt++)Fe.opacityVertexArray.emplaceBack(Ke);Fe.hasVisibleVertices=Fe.hasVisibleVertices||Ke!==ti};for(let Fe=0;Fe<r.symbolInstances.length;Fe++){const Ie=r.symbolInstances.get(Fe),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:tt,crossTileID:De}=Ie;let Ye=this.opacities[De];u[De]?Ye=T:Ye||(Ye=Me,this.opacities[De]=Ye),u[De]=!0;const ot=Ie.numIconVertices>0,st=this.placedOrientations[Ie.crossTileID],dt=st===l.ai.vertical,wt=st===l.ai.horizontal||st===l.ai.horizontalOnly;if(Ke>0||tt>0){const xt=Br(Ye.text);ke(r.text,Ke,dt?ti:xt),ke(r.text,tt,wt?ti:xt);const Et=Ye.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(r.text.placedSymbolArray.get(kt).hidden=Et||dt?1:0)}),Ie.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=Et||wt?1:0);const $t=this.variableOffsets[Ie.crossTileID];$t&&this.markUsedJustification(r,$t.anchor,Ie,st);const Pn=this.placedOrientations[Ie.crossTileID];Pn&&(this.markUsedJustification(r,"left",Ie,Pn),this.markUsedOrientation(r,Pn,Ie))}if(ot){const xt=Br(Ye.icon),Et=!(he&&Ie.verticalPlacedIconSymbolIndex&&dt);Ie.placedIconSymbolIndex>=0&&(ke(r.icon,Ie.numIconVertices,Et?xt:ti),r.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(ke(r.icon,Ie.numVerticalIconVertices,Et?ti:xt),r.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Fe];if(xt){let Et=new l.P(0,0);if(xt.textBox||xt.verticalTextBox){let Pn=!0;if(B){const kt=this.variableOffsets[De];kt?(Et=ln(kt.anchor,kt.width,kt.height,kt.textOffset,kt.textBoxScale),X&&Et._rotate(K?this.transform.angle:-this.transform.angle)):Pn=!1}xt.textBox&&hn(r.textCollisionBox.collisionVertexArray,Ye.text.placed,!Pn||dt,Et.x,Et.y),xt.verticalTextBox&&hn(r.textCollisionBox.collisionVertexArray,Ye.text.placed,!Pn||wt,Et.x,Et.y)}const $t=!!(!wt&&xt.verticalIconBox);xt.iconBox&&hn(r.iconCollisionBox.collisionVertexArray,Ye.icon.placed,$t,he?Et.x:0,he?Et.y:0),xt.verticalIconBox&&hn(r.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!$t,he?Et.x:0,he?Et.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Fe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Fe.invProjMatrix,r.placementViewportMatrix=Fe.viewportMatrix,r.collisionCircleArray=Fe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function hn(y,r,u,f,m){y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0)}const Rn=Math.pow(2,25),jn=Math.pow(2,24),Fn=Math.pow(2,17),Mn=Math.pow(2,16),Jr=Math.pow(2,9),qn=Math.pow(2,8),wr=Math.pow(2,1);function Br(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Rn+r*jn+u*Fn+r*Mn+u*Jr+r*qn+u*wr+r}const ti=0;class Us{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,f,m,_){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(T,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((I,z)=>I.sortKey-z.sortKey));this._currentPartIndex<T.length;)if(u.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class fs{constructor(r,u,f,m,_,T,I,z){this.placement=new Qt(r,u,T,I,z),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,u,f){const m=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-m>2;for(;this._currentPlacementIndex>=0;){const T=u[r[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=I)&&(!T.maxzoom||T.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Us(T)),this._inProgressLayer.continuePlacement(f[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const wn=512/l.N/2;class ds{constructor(r,u,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let _=0;_<u.length;_++){const T=u.get(_),I=T.key,z=m.get(I);z?z.push(T):m.set(I,[T])}for(const[_,T]of m){const I={positions:T.map(z=>({x:Math.floor(z.anchorX*wn),y:Math.floor(z.anchorY*wn)})),crossTileIDs:T.map(z=>z.crossTileID)};if(I.positions.length>128){const z=new l.av(I.positions.length,16,Uint16Array);for(const{x:B,y:X}of I.positions)z.add(B,X);z.finish(),delete I.positions,I.index=z}this._symbolsByKey[_]=I}}getScaledCoordinates(r,u){const{x:f,y:m,z:_}=this.tileID.canonical,{x:T,y:I,z}=u.canonical,B=wn/Math.pow(2,z-_),X=(I*l.N+r.anchorY)*B,K=m*l.N*wn;return{x:Math.floor((T*l.N+r.anchorX)*B-f*l.N*wn),y:Math.floor(X-K)}}findMatches(r,u,f){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<r.length;_++){const T=r.get(_);if(T.crossTileID)continue;const I=this._symbolsByKey[T.key];if(!I)continue;const z=this.getScaledCoordinates(T,u);if(I.index){const B=I.index.range(z.x-m,z.y-m,z.x+m,z.y+m).sort();for(const X of B){const K=I.crossTileIDs[X];if(!f[K]){f[K]=!0,T.crossTileID=K;break}}}else if(I.positions)for(let B=0;B<I.positions.length;B++){const X=I.positions[B],K=I.crossTileIDs[B];if(Math.abs(X.x-z.x)<=m&&Math.abs(X.y-z.y)<=m&&!f[K]){f[K]=!0,T.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Vn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class su{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const f in this.indexes){const m=this.indexes[f],_={};for(const T in m){const I=m[T];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),_[I.tileID.key]=I}this.indexes[f]=_}this.lng=r}addBucket(r,u,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>r.overscaledZ)for(const I in T){const z=T[I];z.tileID.isChildOf(r)&&z.findMatches(u.symbolInstances,r,m)}else{const I=T[r.scaledTo(Number(_)).key];I&&I.findMatches(u.symbolInstances,r,m)}}for(let _=0;_<u.symbolInstances.length;_++){const T=u.symbolInstances.get(_);T.crossTileID||(T.crossTileID=f.generate(),m[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ds(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const f of u.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(const f in this.indexes){const m=this.indexes[f];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[_]),delete m[_],u=!0)}return u}}class el{constructor(){this.layerIndexes={},this.crossTileIDs=new Vn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new su);let _=!1;const T={};m.handleWrapJump(f);for(const I of u){const z=I.getBucket(r);z&&r.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(I.tileID,z,this.crossTileIDs)&&(_=!0),T[z.bucketInstanceId]=!0)}return m.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(r){const u={};r.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const Qr=(y,r)=>l.x(y,r&&r.filter(u=>u.identifier!=="source.canvas")),xi=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),To=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),zi=l.aw();class Nr extends l.E{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Se(L(),this,r._getMapId()),this.imageManager=new ve,this.imageManager.setEventedParent(this),this.glyphManager=new ue(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Te(256,512),this.crossTileSymbolIndex=new el,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const f=this;this._rtlTextPluginCallback=Nr.registerForPluginStateChange(m=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(_,T)=>{if(l.aA(_),T&&T.every(I=>I))for(const I in f.sourceCaches){const z=f.sourceCaches[I].getSource().type;z!=="vector"&&z!=="geojson"||f.sourceCaches[I].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const _=this.sourceCaches[m.sourceId];if(!_)return;const T=_.getSource();if(T&&T.vectorLayerIds)for(const I in this._layers){const z=this._layers[I];z.source===T.id&&this._validateLayer(z)}})}loadURL(r,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(r,G.Style);this._request=l.f(m,(_,T)=>{this._request=null,_?this.fire(new l.j(_)):T&&this._load(T,u,f)})}loadJSON(r,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,f)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(zi,{validate:!1})}_load(r,u,f){var m;const _=u.transformStyle?u.transformStyle(f,r):r;if(!u.validate||!Qr(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const T in _.sources)this.addSource(T,_.sources[T],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new ye(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const r=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const f=l.aC(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(r,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,_,T,I){const z=k(m),B=z.length,X=T>1?"@2x":"",K={},he={},Me={};for(const{id:ke,url:Fe}of z){const Ie=_.transformRequest(_.normalizeSpriteURL(Fe,X,".json"),G.SpriteJSON),Ke=`${ke}_${Ie.url}`;K[Ke]=l.f(Ie,(Ye,ot)=>{delete K[Ke],he[ke]=ot,H(I,he,Me,Ye,B)});const tt=_.transformRequest(_.normalizeSpriteURL(Fe,X,".png"),G.SpriteImage),De=`${ke}_${tt.url}`;K[De]=de.getImage(tt,(Ye,ot)=>{delete K[De],Me[ke]=ot,H(I,he,Me,Ye,B)})}return{cancel(){for(const ke of Object.values(K))ke.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(m,_)=>{if(this._spriteRequest=null,m)this.fire(new l.j(m));else if(_)for(const T in _){this._spritesImagesIds[T]=[];const I=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(z=>!(z in _)):[];for(const z of I)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in _[T]){const B=T==="default"?z:`${T}:${z}`;this._spritesImagesIds[T].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,_[T][z],!1):this.imageManager.addImage(B,_[T][z]),u&&(this._changedImages[B]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const f=r.sourceLayer;if(!f)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const f=[];for(const m of r)u[m]&&f.push(u[m]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const T in this._updatedSources){const I=this._updatedSources[T];if(I==="reload")this._reloadSource(T);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];f[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in f){const _=this.sourceCaches[m];f[m]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const f=this.serialize();if(r=u.transformStyle?u.transformStyle(f,r):r,Qr(this,l.y(r)))return!1;(r=l.aD(r)).layers=l.aB(r.layers);const m=l.aE(f,r).filter(T=>!(T.command in To));if(m.length===0)return!1;const _=m.filter(T=>!(T.command in xi));if(_.length>0)throw new Error(`Unimplemented: ${_.map(T=>T.command).join(", ")}.`);for(const T of m)T.command!=="setTransition"&&this[T.command].apply(this,T.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,u){if(this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.y.source,`sources.${r}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[r]=new j(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new l.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new l.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(Qr(this,l.aF(r)))return;_=l.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=l.aD(r),r=l.e(r,{source:m})),this._validate(l.y.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;_=l.aC(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const T=u?this._order.indexOf(u):this._order.length;if(u&&T===-1)this.fire(new l.j(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(T,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const I=this._removedLayers[m];delete this._removedLayers[m],I.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new l.j(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===f||(u!=null&&(m.minzoom=u),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!l.aG(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.y.filter,`layers.${m.id}.filter`,u,null,f)||(m.filter=l.aD(u),this._updateLayer(m)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.aD(this.getLayer(r).filter)}setLayoutProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,m),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const f=this.getLayer(r);if(f)return f.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const f=r.source,m=r.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&m?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||m?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const _=m.getSource().type,T=_==="vector"?r.sourceLayer:void 0;_!=="vector"||T?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(T,r.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,f=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,m=this.stylesheet;return l.aI({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:u,terrain:f},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=T=>this._layers[T].type==="fill-extrusion",f={},m=[];for(let T=this._order.length-1;T>=0;T--){const I=this._order[T];if(u(I)){f[I]=T;for(const z of r){const B=z[I];if(B)for(const X of B)m.push(X)}}}m.sort((T,I)=>I.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const I=this._order[T];if(u(I))for(let z=m.length-1;z>=0;z--){const B=m[z].feature;if(f[B.layer.id]<T)break;_.push(B),m.pop()}else for(const z of r){const B=z[I];if(B)for(const X of B)_.push(X.feature)}}return _}queryRenderedFeatures(r,u,f){u&&u.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const z=this._layers[I];if(!z)return this.fire(new l.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];m[z.source]=!0}}const _=[];u.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const I in this.sourceCaches)u.layers&&!m[I]||_.push(xn(this.sourceCaches[I],this._layers,T,r,u,f));return this.placement&&_.push(function(I,z,B,X,K,he,Me){const ke={},Fe=he.queryRenderedSymbols(X),Ie=[];for(const Ke of Object.keys(Fe).map(Number))Ie.push(Me[Ke]);Ie.sort(yn);for(const Ke of Ie){const tt=Ke.featureIndex.lookupSymbolFeatures(Fe[Ke.bucketInstanceId],z,Ke.bucketIndex,Ke.sourceLayerIndex,K.filter,K.layers,K.availableImages,I);for(const De in tt){const Ye=ke[De]=ke[De]||[],ot=tt[De];ot.sort((st,dt)=>{const wt=Ke.featureSortOrder;if(wt){const xt=wt.indexOf(st.featureIndex);return wt.indexOf(dt.featureIndex)-xt}return dt.featureIndex-st.featureIndex});for(const st of ot)Ye.push(st)}}for(const Ke in ke)ke[Ke].forEach(tt=>{const De=tt.feature,Ye=B[I[Ke].source].getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=Ye});return ke}(this._layers,T,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,u){u&&u.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[r];return f?function(m,_){const T=m.getRenderableIds().map(B=>m.getTileByID(B)),I=[],z={};for(let B=0;B<T.length;B++){const X=T[B],K=X.tileID.canonical.key;z[K]||(z[K]=!0,X.querySourceFeatures(I,_))}return I}(f,u):[]}addSourceType(r,u,f){return Ut(r)?f(new Error(`A source type called "${r}" already exists.`)):(((m,_)=>{Gt[m]=_})(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const T in r)if(!l.aG(r[T],f[T])){m=!0;break}if(!m)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(_)}_validate(r,u,f,m,_={}){return(!_||_.validate!==!1)&&Qr(this,r.call(l.y,l.e({key:u,style:this.serialize(),value:f,styleSpec:l.v},m)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,f,m,_=!1){let T=!1,I=!1;const z={};for(const B of this._order){const X=this._layers[B];if(X.type!=="symbol")continue;if(!z[X.source]){const he=this.sourceCaches[X.source];z[X.source]=he.getRenderableIds(!0).map(Me=>he.getTileByID(Me)).sort((Me,ke)=>ke.tileID.overscaledZ-Me.tileID.overscaledZ||(Me.tileID.isLessThan(ke.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(X,z[X.source],r.center.lng);T=T||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),r.zoom))&&(this.pauseablePlacement=new fs(r,this.map.terrain,this._order,_,u,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),I=!0),T&&this.pauseablePlacement.placement.setStale()),I||T)for(const B of this._order){const X=this._layers[B];X.type==="symbol"&&this.placement.updateLayerOpacities(X,z[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,f){this.glyphManager.getGlyphs(u.stacks,f);const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,f){return l.m(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.y.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,f={},m){this._checkLoaded();const _=[{id:r,url:u}],T=[...k(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",T,null,f)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const u=k(this.stylesheet.sprite);if(u.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return k(this.stylesheet.sprite)}setSprite(r,u={},f){this._checkLoaded(),r&&this._validate(l.y.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}Nr.registerForPluginStateChange=l.aK;var tl=l.Q([{name:"a_pos",type:"Int16",components:2}]),$s="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const ir={prelude:bn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:bn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:bn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:bn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:bn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:bn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:bn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:bn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:bn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:bn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:bn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:bn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:bn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:bn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:bn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:bn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:bn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:bn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:bn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:bn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:bn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:bn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",$s),terrainDepth:bn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",$s),terrainCoords:bn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",$s)};function bn(y,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(m):m,I={};return{fragmentSource:y=y.replace(u,(z,B,X,K,he)=>(I[he]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${he}
varying ${X} ${K} ${he};
#else
uniform ${X} ${K} u_${he};
#endif
`:`
#ifdef HAS_UNIFORM_u_${he}
    ${X} ${K} ${he} = u_${he};
#endif
`)),vertexSource:r=r.replace(u,(z,B,X,K,he)=>{const Me=K==="float"?"vec2":"vec4",ke=he.match(/color/)?"color":Me;return I[he]?B==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${X} ${Me} a_${he};
varying ${X} ${K} ${he};
#else
uniform ${X} ${K} u_${he};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = a_${he};
#else
    ${X} ${K} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = unpack_mix_${ke}(a_${he}, u_${he}_t);
#else
    ${X} ${K} ${he} = u_${he};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${X} ${Me} a_${he};
#else
uniform ${X} ${K} u_${he};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${X} ${K} ${he} = a_${he};
#else
    ${X} ${K} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${X} ${K} ${he} = unpack_mix_${ke}(a_${he}, u_${he}_t);
#else
    ${X} ${K} ${he} = u_${he};
#endif
`}),staticAttributes:f,staticUniforms:T}}class ps{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,f,m,_,T,I,z,B){this.context=r;let X=this.boundPaintVertexBuffers.length!==m.length;for(let K=0;!X&&K<m.length;K++)this.boundPaintVertexBuffers[K]!==m[K]&&(X=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||X||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==B?this.freshBind(u,f,m,_,T,I,z,B):(r.bindVertexArray.set(this.vao),I&&I.bind(),_&&_.dynamicDraw&&_.bind(),z&&z.bind(),B&&B.bind())}freshBind(r,u,f,m,_,T,I,z){const B=r.numAttributes,X=this.context,K=X.gl;this.vao&&this.destroy(),this.vao=X.createVertexArray(),X.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=z,u.enableAttributes(K,r);for(const he of f)he.enableAttributes(K,r);T&&T.enableAttributes(K,r),I&&I.enableAttributes(K,r),z&&z.enableAttributes(K,r),u.bind(),u.setVertexAttribPointers(K,r,_);for(const he of f)he.bind(),he.setVertexAttribPointers(K,r,_);T&&(T.bind(),T.setVertexAttribPointers(K,r,_)),m&&m.bind(),I&&(I.bind(),I.setVertexAttribPointers(K,r,_)),z&&(z.bind(),z.setVertexAttribPointers(K,r,_)),X.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function hr(y){const r=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const f=y[u].split(" ");r.push(f.pop())}return r}class nl{constructor(r,u,f,m,_,T){const I=r.gl;this.program=I.createProgram();const z=hr(u.staticAttributes),B=f?f.getBinderAttributes():[],X=z.concat(B),K=ir.prelude.staticUniforms?hr(ir.prelude.staticUniforms):[],he=u.staticUniforms?hr(u.staticUniforms):[],Me=f?f.getBinderUniforms():[],ke=K.concat(he).concat(Me),Fe=[];for(const st of ke)Fe.indexOf(st)<0&&Fe.push(st);const Ie=f?f.defines():[];_&&Ie.push("#define OVERDRAW_INSPECTOR;"),T&&Ie.push("#define TERRAIN3D;");const Ke=Ie.concat(ir.prelude.fragmentSource,u.fragmentSource).join(`
`),tt=Ie.concat(ir.prelude.vertexSource,u.vertexSource).join(`
`),De=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(De,Ke),I.compileShader(De),!I.getShaderParameter(De,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(De)}`);I.attachShader(this.program,De);const Ye=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(Ye,tt),I.compileShader(Ye),!I.getShaderParameter(Ye,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(Ye)}`);I.attachShader(this.program,Ye),this.attributes={};const ot={};this.numAttributes=X.length;for(let st=0;st<this.numAttributes;st++)X[st]&&(I.bindAttribLocation(this.program,st,X[st]),this.attributes[X[st]]=st);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(Ye),I.deleteShader(De);for(let st=0;st<Fe.length;st++){const dt=Fe[st];if(dt&&!ot[dt]){const wt=I.getUniformLocation(this.program,dt);wt&&(ot[dt]=wt)}}this.fixedUniforms=m(r,ot),this.terrainUniforms=((st,dt)=>({u_depth:new l.aL(st,dt.u_depth),u_terrain:new l.aL(st,dt.u_terrain),u_terrain_dim:new l.aM(st,dt.u_terrain_dim),u_terrain_matrix:new l.aN(st,dt.u_terrain_matrix),u_terrain_unpack:new l.aO(st,dt.u_terrain_unpack),u_terrain_exaggeration:new l.aM(st,dt.u_terrain_exaggeration)}))(r,ot),this.binderUniforms=f?f.getUniforms(r,ot):[]}draw(r,u,f,m,_,T,I,z,B,X,K,he,Me,ke,Fe,Ie,Ke,tt){const De=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(T),z){r.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,z.depthTexture),r.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,z.texture);for(const ot in this.terrainUniforms)this.terrainUniforms[ot].set(z[ot])}for(const ot in this.fixedUniforms)this.fixedUniforms[ot].set(I[ot]);Fe&&Fe.setUniforms(r,this.binderUniforms,Me,{zoom:ke});let Ye=0;switch(u){case De.LINES:Ye=2;break;case De.TRIANGLES:Ye=3;break;case De.LINE_STRIP:Ye=1}for(const ot of he.get()){const st=ot.vaos||(ot.vaos={});(st[B]||(st[B]=new ps)).bind(r,this,X,Fe?Fe.getPaintVertexBuffers():[],K,ot.vertexOffset,Ie,Ke,tt),De.drawElements(u,ot.primitiveLength*Ye,De.UNSIGNED_SHORT,ot.primitiveOffset*Ye*2)}}}function Li(y,r,u){const f=1/Ve(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,T=_*(u.tileID.canonical.x+u.tileID.wrap*m),I=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[T>>16,I>>16],u_pixel_coord_lower:[65535&T,65535&I]}}const au=(y,r,u,f)=>{const m=r.style.light,_=m.properties.get("position"),T=[_.x,_.y,_.z],I=function(){var B=new l.A(9);return l.A!=Float32Array&&(B[1]=0,B[2]=0,B[3]=0,B[5]=0,B[6]=0,B[7]=0),B[0]=1,B[4]=1,B[8]=1,B}();m.properties.get("anchor")==="viewport"&&function(B,X){var K=Math.sin(X),he=Math.cos(X);B[0]=he,B[1]=K,B[2]=0,B[3]=-K,B[4]=he,B[5]=0,B[6]=0,B[7]=0,B[8]=1}(I,-r.transform.angle),function(B,X,K){var he=X[0],Me=X[1],ke=X[2];B[0]=he*K[0]+Me*K[3]+ke*K[6],B[1]=he*K[1]+Me*K[4]+ke*K[7],B[2]=he*K[2]+Me*K[5]+ke*K[8]}(T,T,I);const z=m.properties.get("color");return{u_matrix:y,u_lightpos:T,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+u,u_opacity:f}},qi=(y,r,u,f,m,_,T)=>l.e(au(y,r,u,f),Li(_,r,T),{u_height_factor:-Math.pow(2,m.overscaledZ)/T.tileSize/8}),sc=y=>({u_matrix:y}),lu=(y,r,u,f)=>l.e(sc(y),Li(u,r,f)),ci=(y,r)=>({u_matrix:y,u_world:r}),rl=(y,r,u,f,m)=>l.e(lu(y,r,u,f),{u_world:m}),Go=(y,r,u,f)=>{const m=y.transform;let _,T;if(f.paint.get("circle-pitch-alignment")==="map"){const I=Ve(u,1,m.zoom);_=!0,T=[I,I]}else _=!1,T=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:T}},uu=(y,r,u)=>{const f=Ve(u,1,r.zoom),m=Math.pow(2,r.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*m),r.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:_}},da=(y,r,u=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:u}),ac=y=>({u_matrix:y}),lc=(y,r,u,f)=>({u_matrix:y,u_extrude_scale:Ve(r,1,u),u_intensity:f});function pa(y,r){const u=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new l.U(0,f/u).toLngLat().lat,new l.U(0,(f+1)/u).toLngLat().lat]}const il=(y,r,u,f)=>{const m=y.transform;return{u_matrix:ol(y,r,u,f),u_ratio:1/Ve(r,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},ma=(y,r,u,f,m)=>l.e(il(y,r,u,m),{u_image:0,u_image_height:f}),Ph=(y,r,u,f,m)=>{const _=y.transform,T=uc(r,_);return{u_matrix:ol(y,r,u,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Ve(r,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[T,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},ms=(y,r,u,f,m,_)=>{const T=y.lineAtlas,I=uc(r,y.transform),z=u.layout.get("line-cap")==="round",B=T.getDash(f.from,z),X=T.getDash(f.to,z),K=B.width*m.fromScale,he=X.width*m.toScale;return l.e(il(y,r,u,_),{u_patternscale_a:[I/K,-B.height/2],u_patternscale_b:[I/he,-X.height/2],u_sdfgamma:T.width/(256*Math.min(K,he)*y.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:X.y,u_mix:m.t})};function uc(y,r){return 1/Ve(y,1,r.tileZoom)}function ol(y,r,u,f){return y.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const cc=(y,r,u,f,m)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:hc(m.paint.get("raster-hue-rotate"))};var _,T};function hc(y){y*=Math.PI/180;const r=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const sl=(y,r,u,f,m,_,T,I,z,B)=>{const X=m.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:X.width/X.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:T,u_coord_matrix:I,u_is_text:+z,u_pitch_with_map:+f,u_texsize:B,u_texture:0}},cu=(y,r,u,f,m,_,T,I,z,B,X)=>{const K=m.transform;return l.e(sl(y,r,u,f,m,_,T,I,z,B),{u_gamma_scale:f?Math.cos(K._pitch)*K.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+X})},gs=(y,r,u,f,m,_,T,I,z,B)=>l.e(cu(y,r,u,f,m,_,T,I,!0,z,!0),{u_texsize_icon:B,u_texture_icon:1}),al=(y,r,u)=>({u_matrix:y,u_opacity:r,u_color:u}),hi=(y,r,u,f,m,_)=>l.e(function(T,I,z,B){const X=z.imageManager.getPattern(T.from.toString()),K=z.imageManager.getPattern(T.to.toString()),{width:he,height:Me}=z.imageManager.getPixelSize(),ke=Math.pow(2,B.tileID.overscaledZ),Fe=B.tileSize*Math.pow(2,z.transform.tileZoom)/ke,Ie=Fe*(B.tileID.canonical.x+B.tileID.wrap*ke),Ke=Fe*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[he,Me],u_mix:I.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Ve(B,1,z.transform.tileZoom),u_pixel_coord_upper:[Ie>>16,Ke>>16],u_pixel_coord_lower:[65535&Ie,65535&Ke]}}(f,_,u,m),{u_matrix:y,u_opacity:r}),ll={fillExtrusion:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_lightpos:new l.aP(y,r.u_lightpos),u_lightintensity:new l.aM(y,r.u_lightintensity),u_lightcolor:new l.aP(y,r.u_lightcolor),u_vertical_gradient:new l.aM(y,r.u_vertical_gradient),u_opacity:new l.aM(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_lightpos:new l.aP(y,r.u_lightpos),u_lightintensity:new l.aM(y,r.u_lightintensity),u_lightcolor:new l.aP(y,r.u_lightcolor),u_vertical_gradient:new l.aM(y,r.u_vertical_gradient),u_height_factor:new l.aM(y,r.u_height_factor),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade),u_opacity:new l.aM(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,r.u_scale_with_map),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_extrude_scale:new l.aQ(y,r.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_matrix:new l.aN(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,r.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,r.u_extrude_scale),u_overscale_factor:new l.aM(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_inv_matrix:new l.aN(y,r.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new l.aR(y,r.u_color),u_matrix:new l.aN(y,r.u_matrix),u_overlay:new l.aL(y,r.u_overlay),u_overlay_scale:new l.aM(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new l.aM(y,r.u_extrude_scale),u_intensity:new l.aM(y,r.u_intensity),u_matrix:new l.aN(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world),u_image:new l.aL(y,r.u_image),u_color_ramp:new l.aL(y,r.u_color_ramp),u_opacity:new l.aM(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_latrange:new l.aQ(y,r.u_latrange),u_light:new l.aQ(y,r.u_light),u_shadow:new l.aR(y,r.u_shadow),u_highlight:new l.aR(y,r.u_highlight),u_accent:new l.aR(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_dimension:new l.aQ(y,r.u_dimension),u_zoom:new l.aM(y,r.u_zoom),u_unpack:new l.aO(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_image:new l.aL(y,r.u_image),u_image_height:new l.aM(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texsize:new l.aQ(y,r.u_texsize),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_image:new l.aL(y,r.u_image),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_patternscale_a:new l.aQ(y,r.u_patternscale_a),u_patternscale_b:new l.aQ(y,r.u_patternscale_b),u_sdfgamma:new l.aM(y,r.u_sdfgamma),u_image:new l.aL(y,r.u_image),u_tex_y_a:new l.aM(y,r.u_tex_y_a),u_tex_y_b:new l.aM(y,r.u_tex_y_b),u_mix:new l.aM(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_tl_parent:new l.aQ(y,r.u_tl_parent),u_scale_parent:new l.aM(y,r.u_scale_parent),u_buffer_scale:new l.aM(y,r.u_buffer_scale),u_fade_t:new l.aM(y,r.u_fade_t),u_opacity:new l.aM(y,r.u_opacity),u_image0:new l.aL(y,r.u_image0),u_image1:new l.aL(y,r.u_image1),u_brightness_low:new l.aM(y,r.u_brightness_low),u_brightness_high:new l.aM(y,r.u_brightness_high),u_saturation_factor:new l.aM(y,r.u_saturation_factor),u_contrast_factor:new l.aM(y,r.u_contrast_factor),u_spin_weights:new l.aP(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texture:new l.aL(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texture:new l.aL(y,r.u_texture),u_gamma_scale:new l.aM(y,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_is_halo:new l.aL(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texsize_icon:new l.aQ(y,r.u_texsize_icon),u_texture:new l.aL(y,r.u_texture),u_texture_icon:new l.aL(y,r.u_texture_icon),u_gamma_scale:new l.aM(y,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_is_halo:new l.aL(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_opacity:new l.aM(y,r.u_opacity),u_color:new l.aR(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_opacity:new l.aM(y,r.u_opacity),u_image:new l.aL(y,r.u_image),u_pattern_tl_a:new l.aQ(y,r.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,r.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,r.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,r.u_pattern_br_b),u_texsize:new l.aQ(y,r.u_texsize),u_mix:new l.aM(y,r.u_mix),u_pattern_size_a:new l.aQ(y,r.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,r.u_pattern_size_b),u_scale_a:new l.aM(y,r.u_scale_a),u_scale_b:new l.aM(y,r.u_scale_b),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texture:new l.aL(y,r.u_texture),u_ele_delta:new l.aM(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ele_delta:new l.aM(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texture:new l.aL(y,r.u_texture),u_terrain_coords_id:new l.aM(y,r.u_terrain_coords_id),u_ele_delta:new l.aM(y,r.u_ele_delta)})};class ul{constructor(r,u,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ga={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class cl{constructor(r,u,f,m){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let f=0;f<this.attributes.length;f++){const m=u.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,f){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],T=u.attributes[_.name];T!==void 0&&r.vertexAttribPointer(T,_.components,r[ga[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ys=new WeakMap;function Zo(y){var r;if(ys.has(y))return ys.get(y);{const u=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ys.set(y,u),u}}class In{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class hl extends In{getDefault(){return l.aT.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class wi extends In{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class fi extends In{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class hu extends In{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class fl extends In{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class dl extends In{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class fu extends In{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class pl extends In{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class ml extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class ya extends In{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class du extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class gl extends In{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class fc extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class dc extends In{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Vs extends In{getDefault(){return l.aT.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class kh extends In{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class pc extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class pu extends In{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Mh extends In{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class zh extends In{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Lh extends In{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class mu extends In{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class va extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class gu extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class yu extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Gs extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class mc extends In{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class _a extends In{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const f=this.gl;Zo(f)?f.bindVertexArray(r):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class vu extends In{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Fi extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class _u extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ur extends In{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Zs extends Ur{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class gc extends Ur{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class xu extends Ur{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Dn{constructor(r,u,f,m,_){this.context=r,this.width=u,this.height=f;const T=r.gl,I=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Zs(r,I),m)this.depthAttachment=_?new xu(r,I):new gc(r,I);else if(_)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Jn{constructor(r,u,f){this.blendFunction=r,this.blendColor=u,this.mask=f}}Jn.Replace=[1,0],Jn.disabled=new Jn(Jn.Replace,l.aT.transparent,[!1,!1,!1,!1]),Jn.unblended=new Jn(Jn.Replace,l.aT.transparent,[!0,!0,!0,!0]),Jn.alphaBlended=new Jn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class Fh{constructor(r){var u,f;if(this.gl=r,this.clearColor=new hl(this),this.clearDepth=new wi(this),this.clearStencil=new fi(this),this.colorMask=new hu(this),this.depthMask=new fl(this),this.stencilMask=new dl(this),this.stencilFunc=new fu(this),this.stencilOp=new pl(this),this.stencilTest=new ml(this),this.depthRange=new ya(this),this.depthTest=new du(this),this.depthFunc=new gl(this),this.blend=new fc(this),this.blendFunc=new dc(this),this.blendColor=new Vs(this),this.blendEquation=new kh(this),this.cullFace=new pc(this),this.cullFaceSide=new pu(this),this.frontFace=new Mh(this),this.program=new zh(this),this.activeTexture=new Lh(this),this.viewport=new mu(this),this.bindFramebuffer=new va(this),this.bindRenderbuffer=new gu(this),this.bindTexture=new yu(this),this.bindVertexBuffer=new Gs(this),this.bindElementBuffer=new mc(this),this.bindVertexArray=new _a(this),this.pixelStoreUnpack=new vu(this),this.pixelStoreUnpackPremultiplyAlpha=new Fi(this),this.pixelStoreUnpackFlipY=new _u(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Zo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new ul(this,r,u)}createVertexBuffer(r,u,f){return new cl(this,r,u,f)}createRenderbuffer(r,u,f){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(r,u,f,m){return new Dn(this,r,u,f,m)}clear({color:r,depth:u,stencil:f}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.aG(r.blendFunction,Jn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Zo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return Zo(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Sn{constructor(r,u,f){this.func=r,this.mask=u,this.range=f}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const vs=7680;class or{constructor(r,u,f,m,_,T){this.test=r,this.ref=u,this.mask=f,this.fail=m,this.depthFail=_,this.pass=T}}or.disabled=new or({func:519,mask:0},0,0,vs,vs,vs);class Hn{constructor(r,u,f){this.enable=r,this.mode=u,this.frontFace=f}}let Hs;function wu(y,r,u,f,m,_,T){const I=y.context,z=I.gl,B=y.useProgram("collisionBox"),X=[];let K=0,he=0;for(let De=0;De<f.length;De++){const Ye=f[De],ot=r.getTile(Ye),st=ot.getBucket(u);if(!st)continue;let dt=Ye.posMatrix;m[0]===0&&m[1]===0||(dt=y.translatePosMatrix(Ye.posMatrix,ot,m,_));const wt=T?st.textCollisionBox:st.iconCollisionBox,xt=st.collisionCircleArray;if(xt.length>0){const Et=l.Z(),$t=dt;l.aU(Et,st.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(Et,Et,st.placementViewportMatrix),X.push({circleArray:xt,circleOffset:he,transform:$t,invTransform:Et,coord:Ye}),K+=xt.length/4,he=K}wt&&B.draw(I,z.LINES,Sn.disabled,or.disabled,y.colorModeForRenderPass(),Hn.disabled,uu(dt,y.transform,ot),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ye),u.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,y.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!T||!X.length)return;const Me=y.useProgram("collisionCircle"),ke=new l.aV;ke.resize(4*K),ke._trim();let Fe=0;for(const De of X)for(let Ye=0;Ye<De.circleArray.length/4;Ye++){const ot=4*Ye,st=De.circleArray[ot+0],dt=De.circleArray[ot+1],wt=De.circleArray[ot+2],xt=De.circleArray[ot+3];ke.emplace(Fe++,st,dt,wt,xt,0),ke.emplace(Fe++,st,dt,wt,xt,1),ke.emplace(Fe++,st,dt,wt,xt,2),ke.emplace(Fe++,st,dt,wt,xt,3)}(!Hs||Hs.length<2*K)&&(Hs=function(De){const Ye=2*De,ot=new l.aX;ot.resize(Ye),ot._trim();for(let st=0;st<Ye;st++){const dt=6*st;ot.uint16[dt+0]=4*st+0,ot.uint16[dt+1]=4*st+1,ot.uint16[dt+2]=4*st+2,ot.uint16[dt+3]=4*st+2,ot.uint16[dt+4]=4*st+3,ot.uint16[dt+5]=4*st+0}return ot}(K));const Ie=I.createIndexBuffer(Hs,!0),Ke=I.createVertexBuffer(ke,l.aW.members,!0);for(const De of X){const Ye={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(tt=y.transform).cameraToCenterDistance,u_viewport_size:[tt.width,tt.height]};Me.draw(I,z.TRIANGLES,Sn.disabled,or.disabled,y.colorModeForRenderPass(),Hn.disabled,Ye,y.style.map.terrain&&y.style.map.terrain.getTerrainData(De.coord),u.id,Ke,Ie,l.S.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,y.transform.zoom,null,null,null)}var tt;Ke.destroy(),Ie.destroy()}Hn.disabled=new Hn(!1,1029,2305),Hn.backCCW=new Hn(!0,1029,2305);const bu=l.ao(new Float32Array(16));function yl(y,r,u,f,m,_){const{horizontalAlign:T,verticalAlign:I}=l.au(y);return new l.P((-(T-.5)*r/m+f[0])*_,(-(I-.5)*u/m+f[1])*_)}function _s(y,r,u,f,m,_,T,I,z,B,X){const K=y.text.placedSymbolArray,he=y.text.dynamicLayoutVertexArray,Me=y.icon.dynamicLayoutVertexArray,ke={};he.clear();for(let Fe=0;Fe<K.length;Fe++){const Ie=K.get(Fe),Ke=Ie.hidden||!Ie.crossTileID||y.allowVerticalPlacement&&!Ie.placedOrientation?null:f[Ie.crossTileID];if(Ke){const tt=new l.P(Ie.anchorX,Ie.anchorY),De=jt(tt,u?T:_,X),Ye=Tn(m.cameraToCenterDistance,De.signedDistanceFromCamera);let ot=l.aj(y.textSizeData,z,Ie)*Ye/l.ap;u&&(ot*=y.tilePixelRatio/I);const{width:st,height:dt,anchor:wt,textOffset:xt,textBoxScale:Et}=Ke,$t=yl(wt,st,dt,xt,Et,ot),Pn=u?jt(tt.add($t),_,X).point:De.point.add(r?$t.rotate(-m.angle):$t),kt=y.allowVerticalPlacement&&Ie.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let an=0;an<Ie.numGlyphs;an++)l.ak(he,Pn,kt);B&&Ie.associatedIconIndex>=0&&(ke[Ie.associatedIconIndex]={shiftedAnchor:Pn,angle:kt})}else _e(Ie.numGlyphs,he)}if(B){Me.clear();const Fe=y.icon.placedSymbolArray;for(let Ie=0;Ie<Fe.length;Ie++){const Ke=Fe.get(Ie);if(Ke.hidden)_e(Ke.numGlyphs,Me);else{const tt=ke[Ie];if(tt)for(let De=0;De<Ke.numGlyphs;De++)l.ak(Me,tt.shiftedAnchor,tt.angle);else _e(Ke.numGlyphs,Me)}}y.icon.dynamicLayoutVertexBuffer.updateData(Me)}y.text.dynamicLayoutVertexBuffer.updateData(he)}function Co(y,r,u){return u.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function vl(y,r,u,f,m,_,T,I,z,B,X,K){const he=y.context,Me=he.gl,ke=y.transform,Fe=I==="map",Ie=z==="map",Ke=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",tt=Fe&&!Ie&&!Ke,De=!u.layout.get("symbol-sort-key").isConstant();let Ye=!1;const ot=y.depthModeForSublayer(0,Sn.ReadOnly),st=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),dt=[];for(const wt of f){const xt=r.getTile(wt),Et=xt.getBucket(u);if(!Et)continue;const $t=m?Et.text:Et.icon;if(!$t||!$t.segments.get().length||!$t.hasVisibleVertices)continue;const Pn=$t.programConfigurations.get(u.id),kt=m||Et.sdfIcons,an=m?Et.textSizeData:Et.iconSizeData,Ht=Ie||ke.pitch!==0,Wn=y.useProgram(Co(kt,m,Et),Pn),An=l.ah(an,ke.zoom),_n=y.style.map.terrain&&y.style.map.terrain.getTerrainData(wt);let kn,br,nr,ii,Vr=[0,0],Ir=null;if(m)br=xt.glyphAtlasTexture,nr=Me.LINEAR,kn=xt.glyphAtlasTexture.size,Et.iconsInText&&(Vr=xt.imageAtlasTexture.size,Ir=xt.imageAtlasTexture,ii=Ht||y.options.rotating||y.options.zooming||an.kind==="composite"||an.kind==="camera"?Me.LINEAR:Me.NEAREST);else{const Sr=u.layout.get("icon-size").constantOr(0)!==1||Et.iconsNeedLinear;br=xt.imageAtlasTexture,nr=kt||y.options.rotating||y.options.zooming||Sr||Ht?Me.LINEAR:Me.NEAREST,kn=xt.imageAtlasTexture.size}const Qi=Ve(xt,1,y.transform.zoom),ur=je(wt.posMatrix,Ie,Fe,y.transform,Qi),Yo=at(wt.posMatrix,Ie,Fe,y.transform,Qi),Jo=st&&Et.hasTextData(),Js=u.layout.get("icon-text-fit")!=="none"&&Jo&&Et.hasIconData();if(Ke){const Sr=y.style.map.terrain?(ji,Er)=>y.style.map.terrain.getElevation(wt,ji,Er):null,Gr=u.layout.get("text-rotation-alignment")==="map";_t(Et,wt.posMatrix,y,m,ur,Yo,Ie,B,Gr,Sr)}const Pa=y.translatePosMatrix(wt.posMatrix,xt,_,T),Tl=Ke||m&&st||Js?bu:ur,di=y.translatePosMatrix(Yo,xt,_,T,!0),oi=kt&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Si;Si=kt?Et.iconsInText?gs(an.kind,An,tt,Ie,y,Pa,Tl,di,kn,Vr):cu(an.kind,An,tt,Ie,y,Pa,Tl,di,m,kn,!0):sl(an.kind,An,tt,Ie,y,Pa,Tl,di,m,kn);const ka={program:Wn,buffers:$t,uniformValues:Si,atlasTexture:br,atlasTextureIcon:Ir,atlasInterpolation:nr,atlasInterpolationIcon:ii,isSDF:kt,hasHalo:oi};if(De&&Et.canOverlap){Ye=!0;const Sr=$t.segments.get();for(const Gr of Sr)dt.push({segments:new l.S([Gr]),sortKey:Gr.sortKey,state:ka,terrainData:_n})}else dt.push({segments:$t.segments,sortKey:0,state:ka,terrainData:_n})}Ye&&dt.sort((wt,xt)=>wt.sortKey-xt.sortKey);for(const wt of dt){const xt=wt.state;if(he.activeTexture.set(Me.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Me.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(he.activeTexture.set(Me.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),xt.isSDF){const Et=xt.uniformValues;xt.hasHalo&&(Et.u_is_halo=1,_l(xt.buffers,wt.segments,u,y,xt.program,ot,X,K,Et,wt.terrainData)),Et.u_is_halo=0}_l(xt.buffers,wt.segments,u,y,xt.program,ot,X,K,xt.uniformValues,wt.terrainData)}}function _l(y,r,u,f,m,_,T,I,z,B){const X=f.context;m.draw(X,X.gl.TRIANGLES,_,T,I,Hn.disabled,z,B,u.id,y.layoutVertexBuffer,y.indexBuffer,r,u.paint,f.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Ho(y,r,u,f,m){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let T=_[u.to.toString()],I=_[u.from.toString()];if(!T||!I){const z=m.getPaintProperty(r);T=_[z],I=_[z]}T&&I&&y.setConstantPatternPositions(T,I)}function xa(y,r,u,f,m,_,T){const I=y.context.gl,z="fill-pattern",B=u.paint.get(z),X=B&&B.constantOr(1),K=u.getCrossfadeParameters();let he,Me,ke,Fe,Ie;T?(Me=X&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=I.LINES):(Me=X?"fillPattern":"fill",he=I.TRIANGLES);const Ke=B.constantOr(null);for(const tt of f){const De=r.getTile(tt);if(X&&!De.patternsLoaded())continue;const Ye=De.getBucket(u);if(!Ye)continue;const ot=Ye.programConfigurations.get(u.id),st=y.useProgram(Me,ot),dt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(tt);X&&(y.context.activeTexture.set(I.TEXTURE0),De.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ot.updatePaintBuffers(K)),Ho(ot,z,Ke,De,u);const wt=dt?tt:null,xt=y.translatePosMatrix(wt?wt.posMatrix:tt.posMatrix,De,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(T){Fe=Ye.indexBuffer2,Ie=Ye.segments2;const Et=[I.drawingBufferWidth,I.drawingBufferHeight];ke=Me==="fillOutlinePattern"&&X?rl(xt,y,K,De,Et):ci(xt,Et)}else Fe=Ye.indexBuffer,Ie=Ye.segments,ke=X?lu(xt,y,K,De):sc(xt);st.draw(y.context,he,m,y.stencilModeForClipping(tt),_,Hn.disabled,ke,dt,u.id,Ye.layoutVertexBuffer,Fe,Ie,u.paint,y.transform.zoom,ot)}}function mo(y,r,u,f,m,_,T){const I=y.context,z=I.gl,B="fill-extrusion-pattern",X=u.paint.get(B),K=X.constantOr(1),he=u.getCrossfadeParameters(),Me=u.paint.get("fill-extrusion-opacity"),ke=X.constantOr(null);for(const Fe of f){const Ie=r.getTile(Fe),Ke=Ie.getBucket(u);if(!Ke)continue;const tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Fe),De=Ke.programConfigurations.get(u.id),Ye=y.useProgram(K?"fillExtrusionPattern":"fillExtrusion",De);K&&(y.context.activeTexture.set(z.TEXTURE0),Ie.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),De.updatePaintBuffers(he)),Ho(De,B,ke,Ie,u);const ot=y.translatePosMatrix(Fe.posMatrix,Ie,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),st=u.paint.get("fill-extrusion-vertical-gradient"),dt=K?qi(ot,y,st,Me,Fe,he,Ie):au(ot,y,st,Me);Ye.draw(I,I.gl.TRIANGLES,m,_,T,Hn.backCCW,dt,tt,u.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,u.paint,y.transform.zoom,De,y.style.map.terrain&&Ke.centroidVertexBuffer)}}function Ws(y,r,u,f,m,_,T){const I=y.context,z=I.gl,B=u.fbo;if(!B)return;const X=y.useProgram("hillshade"),K=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,B.colorAttachment.get()),X.draw(I,z.TRIANGLES,m,_,T,Hn.disabled,((he,Me,ke,Fe)=>{const Ie=ke.paint.get("hillshade-shadow-color"),Ke=ke.paint.get("hillshade-highlight-color"),tt=ke.paint.get("hillshade-accent-color");let De=ke.paint.get("hillshade-illumination-direction")*(Math.PI/180);ke.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=he.transform.angle);const Ye=!he.options.moving;return{u_matrix:Fe?Fe.posMatrix:he.transform.calculatePosMatrix(Me.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:pa(0,Me.tileID),u_light:[ke.paint.get("hillshade-exaggeration"),De],u_shadow:Ie,u_highlight:Ke,u_accent:tt}})(y,u,f,K?r:null),K,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function $r(y,r,u,f,m,_){const T=y.context,I=T.gl,z=r.dem;if(z&&z.data){const B=z.dim,X=z.stride,K=z.getPixels();if(T.activeTexture.set(I.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(X),r.demTexture){const Me=r.demTexture;Me.update(K,{premultiply:!1}),Me.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else r.demTexture=new q(T,K,I.RGBA,{premultiply:!1}),r.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);T.activeTexture.set(I.TEXTURE0);let he=r.fbo;if(!he){const Me=new q(T,{width:B,height:B,data:null},I.RGBA);Me.bind(I.LINEAR,I.CLAMP_TO_EDGE),he=r.fbo=T.createFramebuffer(B,B,!0,!1),he.colorAttachment.set(Me.texture)}T.bindFramebuffer.set(he.framebuffer),T.viewport.set([0,0,B,B]),y.useProgram("hillshadePrepare").draw(T,I.TRIANGLES,f,m,_,Hn.disabled,((Me,ke)=>{const Fe=ke.stride,Ie=l.Z();return l.aS(Ie,0,l.N,-l.N,0,0,1),l.$(Ie,Ie,[0,-l.N,0]),{u_matrix:Ie,u_image:1,u_dimension:[Fe,Fe],u_zoom:Me.overscaledZ,u_unpack:ke.getUnpackVector()}})(r.tileID,z),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function xs(y,r,u,f,m,_){const T=f.paint.get("raster-fade-duration");if(!_&&T>0){const I=l.h.now(),z=(I-y.timeAdded)/T,B=r?(I-r.timeAdded)/T:-1,X=u.getSource(),K=m.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),he=!r||Math.abs(r.tileID.overscaledZ-K)>Math.abs(y.tileID.overscaledZ-K),Me=he&&y.refreshedUponExpiration?1:l.ad(he?z:1-B,0,1);return y.refreshedUponExpiration&&z>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Me}:{opacity:Me,mix:0}}return{opacity:1,mix:0}}const xl=new l.aT(1,0,0,1),Xs=new l.aT(0,1,0,1),Su=new l.aT(0,0,1,1),wa=new l.aT(1,0,1,1),ba=new l.aT(0,1,1,1);function ni(y,r,u,f){Sa(y,0,r+u/2,y.transform.width,u,f)}function Io(y,r,u,f){Sa(y,r-u/2,0,u,y.transform.height,f)}function Sa(y,r,u,f,m,_){const T=y.context,I=T.gl;I.enable(I.SCISSOR_TEST),I.scissor(r*y.pixelRatio,u*y.pixelRatio,f*y.pixelRatio,m*y.pixelRatio),T.clear({color:_}),I.disable(I.SCISSOR_TEST)}function Ea(y,r,u){const f=y.context,m=f.gl,_=u.posMatrix,T=y.useProgram("debug"),I=Sn.disabled,z=or.disabled,B=y.colorModeForRenderPass(),X="$debug",K=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);f.activeTexture.set(m.TEXTURE0);const he=r.getTileByID(u.key).latestRawTileData,Me=Math.floor((he&&he.byteLength||0)/1024),ke=r.getTile(u).tileSize,Fe=512/Math.min(ke,512)*(u.overscaledZ/y.transform.zoom)*.5;let Ie=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ie+=` => ${u.overscaledZ}`),function(Ke,tt){Ke.initDebugOverlayCanvas();const De=Ke.debugOverlayCanvas,Ye=Ke.context.gl,ot=Ke.debugOverlayCanvas.getContext("2d");ot.clearRect(0,0,De.width,De.height),ot.shadowColor="white",ot.shadowBlur=2,ot.lineWidth=1.5,ot.strokeStyle="white",ot.textBaseline="top",ot.font="bold 36px Open Sans, sans-serif",ot.fillText(tt,5,5),ot.strokeText(tt,5,5),Ke.debugOverlayTexture.update(De),Ke.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(y,`${Ie} ${Me}kB`),T.draw(f,m.TRIANGLES,I,z,Jn.alphaBlended,Hn.disabled,da(_,l.aT.transparent,Fe),null,X,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),T.draw(f,m.LINE_STRIP,I,z,B,Hn.disabled,da(_,l.aT.red),K,X,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Qn(y,r,u){const f=y.context,m=f.gl,_=y.colorModeForRenderPass(),T=new Sn(m.LEQUAL,Sn.ReadWrite,y.depthRangeFor3D),I=y.useProgram("terrain"),z=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const B of u){const X=y.renderToTexture.getTexture(B),K=r.getTerrainData(B.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,X.texture);const he={u_matrix:y.transform.calculatePosMatrix(B.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};I.draw(f,m.TRIANGLES,T,or.disabled,_,Hn.backCCW,he,K,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class Wo{constructor(r,u){this.context=new Fh(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=j.maxUnderzooming+j.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new el}resize(r,u,f){if(this.width=Math.floor(r*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,u=new l.a_;u.emplaceBack(0,0),u.emplaceBack(l.N,0),u.emplaceBack(0,l.N),u.emplaceBack(l.N,l.N),this.tileExtentBuffer=r.createVertexBuffer(u,tl.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const f=new l.a_;f.emplaceBack(0,0),f.emplaceBack(l.N,0),f.emplaceBack(0,l.N),f.emplaceBack(l.N,l.N),this.debugBuffer=r.createVertexBuffer(f,tl.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const m=new l.V;m.emplaceBack(0,0,0,0),m.emplaceBack(l.N,0,l.N,0),m.emplaceBack(0,l.N,0,l.N),m.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=r.createVertexBuffer(m,vt.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,tl.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const T=new l.a$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const I=new l.b0;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(I);const z=this.context.gl;this.stencilClearMode=new or({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.Z();l.aS(f,0,this.width,this.height,0,0,1),l.a0(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,Sn.disabled,this.stencilClearMode,Jn.disabled,Hn.disabled,ac(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(Jn.disabled),f.setDepthMode(Sn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of u){const I=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);_.draw(f,m.TRIANGLES,Sn.disabled,new or({func:m.ALWAYS,mask:0},I,255,m.KEEP,m.KEEP,m.REPLACE),Jn.disabled,Hn.disabled,ac(T.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new or({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new or({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,f=r.sort((T,I)=>I.overscaledZ-T.overscaledZ),m=f[f.length-1].overscaledZ,_=f[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let I=0;I<_;I++)T[I+m]=new or({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[T,f]}return[{[m]:or.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Jn([r.CONSTANT_COLOR,r.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jn.unblended:Jn.alphaBlended}depthModeForSublayer(r,u,f){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Sn(f||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,_={},T={},I={};for(const z in m){const B=m[z];B.used&&B.prepare(this.context),_[z]=B.getVisibleCoordinates(),T[z]=_[z].slice().reverse(),I[z]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<f.length;z++)if(this.style._layers[f[z]].is3D()){this.opaquePassCutoff=z;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const z=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||z.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(B,X){const K=B.context,he=K.gl,Me=Jn.unblended,ke=new Sn(he.LEQUAL,Sn.ReadWrite,[0,1]),Fe=X.getTerrainMesh(),Ie=X.sourceCache.getRenderableTiles(),Ke=B.useProgram("terrainDepth");K.bindFramebuffer.set(X.getFramebuffer("depth").framebuffer),K.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),K.clear({color:l.aT.transparent,depth:1});for(const tt of Ie){const De=X.getTerrainData(tt.tileID),Ye={u_matrix:B.transform.calculatePosMatrix(tt.tileID.toUnwrapped()),u_ele_delta:X.getMeshFrameDelta(B.transform.zoom)};Ke.draw(K,he.TRIANGLES,ke,or.disabled,Me,Hn.backCCW,Ye,De,"terrain",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}K.bindFramebuffer.set(null),K.viewport.set([0,0,B.width,B.height])}(this,this.style.map.terrain),function(B,X){const K=B.context,he=K.gl,Me=Jn.unblended,ke=new Sn(he.LEQUAL,Sn.ReadWrite,[0,1]),Fe=X.getTerrainMesh(),Ie=X.getCoordsTexture(),Ke=X.sourceCache.getRenderableTiles(),tt=B.useProgram("terrainCoords");K.bindFramebuffer.set(X.getFramebuffer("coords").framebuffer),K.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),K.clear({color:l.aT.transparent,depth:1}),X.coordsIndex=[];for(const De of Ke){const Ye=X.getTerrainData(De.tileID);K.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Ie.texture);const ot={u_matrix:B.transform.calculatePosMatrix(De.tileID.toUnwrapped()),u_terrain_coords_id:(255-X.coordsIndex.length)/255,u_texture:0,u_ele_delta:X.getMeshFrameDelta(B.transform.zoom)};tt.draw(K,he.TRIANGLES,ke,or.disabled,Me,Hn.backCCW,ot,Ye,"terrain",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments),X.coordsIndex.push(De.tileID.key)}K.bindFramebuffer.set(null),K.viewport.set([0,0,B.width,B.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const z of f){const B=this.style._layers[z];if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const X=T[B.source];(B.type==="custom"||X.length)&&this.renderLayer(this,m[B.source],B,X)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[f[this.currentLayer]],B=m[z.source],X=_[z.source];this._renderTileClippingMasks(z,X),this.renderLayer(this,B,z,X)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const z=this.style._layers[f[this.currentLayer]],B=m[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const X=(z.type==="symbol"?I:T)[z.source];this._renderTileClippingMasks(z,_[z.source]),this.renderLayer(this,B,z,X)}if(this.options.showTileBoundaries){const z=function(B,X){let K=null;const he=Object.values(B._layers).flatMap(Ie=>Ie.source&&!Ie.isHidden(X)?[B.sourceCaches[Ie.source]]:[]),Me=he.filter(Ie=>Ie.getSource().type==="vector"),ke=he.filter(Ie=>Ie.getSource().type!=="vector"),Fe=Ie=>{(!K||K.getSource().maxzoom<Ie.getSource().maxzoom)&&(K=Ie)};return Me.forEach(Ie=>Fe(Ie)),K||ke.forEach(Ie=>Fe(Ie)),K}(this.style,this.transform.zoom);z&&function(B,X,K){for(let he=0;he<K.length;he++)Ea(B,X,K[he])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const B=z.transform.padding;ni(z,z.transform.height-(B.top||0),3,xl),ni(z,B.bottom||0,3,Xs),Io(z,B.left||0,3,Su),Io(z,z.transform.width-(B.right||0),3,wa);const X=z.transform.centerPoint;(function(K,he,Me,ke){Sa(K,he-1,Me-10,2,20,ke),Sa(K,he-10,Me-1,20,2,ke)})(z,X.x,z.transform.height-X.y,ba)}(this),this.context.setDefault()}renderLayer(r,u,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,T,I,z,B){if(_.renderPass!=="translucent")return;const X=or.disabled,K=_.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(he,Me,ke,Fe,Ie,Ke,tt){const De=Me.transform,Ye=Ie==="map",ot=Ke==="map";for(const st of he){const dt=Fe.getTile(st),wt=dt.getBucket(ke);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const xt=l.ah(wt.textSizeData,De.zoom),Et=Ve(dt,1,Me.transform.zoom),$t=je(st.posMatrix,ot,Ye,Me.transform,Et),Pn=ke.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(xt){const kt=Math.pow(2,De.zoom-dt.tileID.overscaledZ);_s(wt,Ye,ot,tt,De,$t,st.posMatrix,kt,xt,Pn,Me.style.map.terrain?(an,Ht)=>Me.style.map.terrain.getElevation(st,an,Ht):null)}}}(z,_,I,T,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),B),I.paint.get("icon-opacity").constantOr(1)!==0&&vl(_,T,I,z,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),X,K),I.paint.get("text-opacity").constantOr(1)!==0&&vl(_,T,I,z,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),X,K),T.map.showCollisionBoxes&&(wu(_,T,I,z,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),wu(_,T,I,z,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(r,u,f,m,this.style.placement.variableOffsets);break;case"circle":(function(_,T,I,z){if(_.renderPass!=="translucent")return;const B=I.paint.get("circle-opacity"),X=I.paint.get("circle-stroke-width"),K=I.paint.get("circle-stroke-opacity"),he=!I.layout.get("circle-sort-key").isConstant();if(B.constantOr(1)===0&&(X.constantOr(1)===0||K.constantOr(1)===0))return;const Me=_.context,ke=Me.gl,Fe=_.depthModeForSublayer(0,Sn.ReadOnly),Ie=or.disabled,Ke=_.colorModeForRenderPass(),tt=[];for(let De=0;De<z.length;De++){const Ye=z[De],ot=T.getTile(Ye),st=ot.getBucket(I);if(!st)continue;const dt=st.programConfigurations.get(I.id),wt=_.useProgram("circle",dt),xt=st.layoutVertexBuffer,Et=st.indexBuffer,$t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ye),Pn={programConfiguration:dt,program:wt,layoutVertexBuffer:xt,indexBuffer:Et,uniformValues:Go(_,Ye,ot,I),terrainData:$t};if(he){const kt=st.segments.get();for(const an of kt)tt.push({segments:new l.S([an]),sortKey:an.sortKey,state:Pn})}else tt.push({segments:st.segments,sortKey:0,state:Pn})}he&&tt.sort((De,Ye)=>De.sortKey-Ye.sortKey);for(const De of tt){const{programConfiguration:Ye,program:ot,layoutVertexBuffer:st,indexBuffer:dt,uniformValues:wt,terrainData:xt}=De.state;ot.draw(Me,ke.TRIANGLES,Fe,Ie,Ke,Hn.disabled,wt,xt,I.id,st,dt,De.segments,I.paint,_.transform.zoom,Ye)}})(r,u,f,m);break;case"heatmap":(function(_,T,I,z){if(I.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const B=_.context,X=B.gl,K=or.disabled,he=new Jn([X.ONE,X.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(Me,ke,Fe){const Ie=Me.gl;Me.activeTexture.set(Ie.TEXTURE1),Me.viewport.set([0,0,ke.width/4,ke.height/4]);let Ke=Fe.heatmapFbo;if(Ke)Ie.bindTexture(Ie.TEXTURE_2D,Ke.colorAttachment.get()),Me.bindFramebuffer.set(Ke.framebuffer);else{const tt=Ie.createTexture();Ie.bindTexture(Ie.TEXTURE_2D,tt),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MIN_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MAG_FILTER,Ie.LINEAR),Ke=Fe.heatmapFbo=Me.createFramebuffer(ke.width/4,ke.height/4,!1,!1),function(De,Ye,ot,st){var dt,wt;const xt=De.gl,Et=(dt=De.HALF_FLOAT)!==null&&dt!==void 0?dt:xt.UNSIGNED_BYTE,$t=(wt=De.RGBA16F)!==null&&wt!==void 0?wt:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,$t,Ye.width/4,Ye.height/4,0,xt.RGBA,Et,null),st.colorAttachment.set(ot)}(Me,ke,tt,Ke)}})(B,_,I),B.clear({color:l.aT.transparent});for(let Me=0;Me<z.length;Me++){const ke=z[Me];if(T.hasRenderableParent(ke))continue;const Fe=T.getTile(ke),Ie=Fe.getBucket(I);if(!Ie)continue;const Ke=Ie.programConfigurations.get(I.id),tt=_.useProgram("heatmap",Ke),{zoom:De}=_.transform;tt.draw(B,X.TRIANGLES,Sn.disabled,K,he,Hn.disabled,lc(ke.posMatrix,Fe,De,I.paint.get("heatmap-intensity")),null,I.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,I.paint,_.transform.zoom,Ke)}B.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(B,X){const K=B.context,he=K.gl,Me=X.heatmapFbo;if(!Me)return;K.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Me.colorAttachment.get()),K.activeTexture.set(he.TEXTURE1);let ke=X.colorRampTexture;ke||(ke=X.colorRampTexture=new q(K,X.colorRamp,he.RGBA)),ke.bind(he.LINEAR,he.CLAMP_TO_EDGE),B.useProgram("heatmapTexture").draw(K,he.TRIANGLES,Sn.disabled,or.disabled,B.colorModeForRenderPass(),Hn.disabled,((Fe,Ie,Ke,tt)=>{const De=l.Z();l.aS(De,0,Fe.width,Fe.height,0,0,1);const Ye=Fe.context.gl;return{u_matrix:De,u_world:[Ye.drawingBufferWidth,Ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ie.paint.get("heatmap-opacity")}})(B,X),null,X.id,B.viewportBuffer,B.quadTriangleIndexBuffer,B.viewportSegments,X.paint,B.transform.zoom)}(_,I))})(r,u,f,m);break;case"line":(function(_,T,I,z){if(_.renderPass!=="translucent")return;const B=I.paint.get("line-opacity"),X=I.paint.get("line-width");if(B.constantOr(1)===0||X.constantOr(1)===0)return;const K=_.depthModeForSublayer(0,Sn.ReadOnly),he=_.colorModeForRenderPass(),Me=I.paint.get("line-dasharray"),ke=I.paint.get("line-pattern"),Fe=ke.constantOr(1),Ie=I.paint.get("line-gradient"),Ke=I.getCrossfadeParameters(),tt=Fe?"linePattern":Me?"lineSDF":Ie?"lineGradient":"line",De=_.context,Ye=De.gl;let ot=!0;for(const st of z){const dt=T.getTile(st);if(Fe&&!dt.patternsLoaded())continue;const wt=dt.getBucket(I);if(!wt)continue;const xt=wt.programConfigurations.get(I.id),Et=_.context.program.get(),$t=_.useProgram(tt,xt),Pn=ot||$t.program!==Et,kt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(st),an=ke.constantOr(null);if(an&&dt.imageAtlas){const An=dt.imageAtlas,_n=An.patternPositions[an.to.toString()],kn=An.patternPositions[an.from.toString()];_n&&kn&&xt.setConstantPatternPositions(_n,kn)}const Ht=kt?st:null,Wn=Fe?Ph(_,dt,I,Ke,Ht):Me?ms(_,dt,I,Me,Ke,Ht):Ie?ma(_,dt,I,wt.lineClipsArray.length,Ht):il(_,dt,I,Ht);if(Fe)De.activeTexture.set(Ye.TEXTURE0),dt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),xt.updatePaintBuffers(Ke);else if(Me&&(Pn||_.lineAtlas.dirty))De.activeTexture.set(Ye.TEXTURE0),_.lineAtlas.bind(De);else if(Ie){const An=wt.gradients[I.id];let _n=An.texture;if(I.gradientVersion!==An.version){let kn=256;if(I.stepInterpolant){const br=T.getSource().maxzoom,nr=st.canonical.z===br?Math.ceil(1<<_.transform.maxZoom-st.canonical.z):1;kn=l.ad(l.aY(wt.maxLineLength/l.N*1024*nr),256,De.maxTextureSize)}An.gradient=l.aZ({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:kn,image:An.gradient||void 0,clips:wt.lineClipsArray}),An.texture?An.texture.update(An.gradient):An.texture=new q(De,An.gradient,Ye.RGBA),An.version=I.gradientVersion,_n=An.texture}De.activeTexture.set(Ye.TEXTURE0),_n.bind(I.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}$t.draw(De,Ye.TRIANGLES,K,_.stencilModeForClipping(st),he,Hn.disabled,Wn,kt,I.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,I.paint,_.transform.zoom,xt,wt.layoutVertexBuffer2),ot=!1}})(r,u,f,m);break;case"fill":(function(_,T,I,z){const B=I.paint.get("fill-color"),X=I.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const K=_.colorModeForRenderPass(),he=I.paint.get("fill-pattern"),Me=_.opaquePassEnabledForLayer()&&!he.constantOr(1)&&B.constantOr(l.aT.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Me){const ke=_.depthModeForSublayer(1,_.renderPass==="opaque"?Sn.ReadWrite:Sn.ReadOnly);xa(_,T,I,z,ke,K,!1)}if(_.renderPass==="translucent"&&I.paint.get("fill-antialias")){const ke=_.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);xa(_,T,I,z,ke,K,!0)}})(r,u,f,m);break;case"fill-extrusion":(function(_,T,I,z){const B=I.paint.get("fill-extrusion-opacity");if(B!==0&&_.renderPass==="translucent"){const X=new Sn(_.context.gl.LEQUAL,Sn.ReadWrite,_.depthRangeFor3D);if(B!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))mo(_,T,I,z,X,or.disabled,Jn.disabled),mo(_,T,I,z,X,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const K=_.colorModeForRenderPass();mo(_,T,I,z,X,or.disabled,K)}}})(r,u,f,m);break;case"hillshade":(function(_,T,I,z){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const B=_.context,X=_.depthModeForSublayer(0,Sn.ReadOnly),K=_.colorModeForRenderPass(),[he,Me]=_.renderPass==="translucent"?_.stencilConfigForOverlap(z):[{},z];for(const ke of Me){const Fe=T.getTile(ke);Fe.needsHillshadePrepare!==void 0&&Fe.needsHillshadePrepare&&_.renderPass==="offscreen"?$r(_,Fe,I,X,or.disabled,K):_.renderPass==="translucent"&&Ws(_,ke,Fe,I,X,he[ke.overscaledZ],K)}B.viewport.set([0,0,_.width,_.height])})(r,u,f,m);break;case"raster":(function(_,T,I,z){if(_.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!z.length)return;const B=_.context,X=B.gl,K=T.getSource(),he=_.useProgram("raster"),Me=_.colorModeForRenderPass(),[ke,Fe]=K instanceof It?[{},z]:_.stencilConfigForOverlap(z),Ie=Fe[Fe.length-1].overscaledZ,Ke=!_.options.moving;for(const tt of Fe){const De=_.depthModeForSublayer(tt.overscaledZ-Ie,I.paint.get("raster-opacity")===1?Sn.ReadWrite:Sn.ReadOnly,X.LESS),Ye=T.getTile(tt);Ye.registerFadeDuration(I.paint.get("raster-fade-duration"));const ot=T.findLoadedParent(tt,0),st=xs(Ye,ot,T,I,_.transform,_.style.map.terrain);let dt,wt;const xt=I.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;B.activeTexture.set(X.TEXTURE0),Ye.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),B.activeTexture.set(X.TEXTURE1),ot?(ot.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),dt=Math.pow(2,ot.tileID.overscaledZ-Ye.tileID.overscaledZ),wt=[Ye.tileID.canonical.x*dt%1,Ye.tileID.canonical.y*dt%1]):Ye.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const Et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt),$t=Et?tt:null,Pn=$t?$t.posMatrix:_.transform.calculatePosMatrix(tt.toUnwrapped(),Ke),kt=cc(Pn,wt||[0,0],dt||1,st,I);K instanceof It?he.draw(B,X.TRIANGLES,De,or.disabled,Me,Hn.disabled,kt,Et,I.id,K.boundsBuffer,_.quadTriangleIndexBuffer,K.boundsSegments):he.draw(B,X.TRIANGLES,De,ke[tt.overscaledZ],Me,Hn.disabled,kt,Et,I.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,u,f,m);break;case"background":(function(_,T,I,z){const B=I.paint.get("background-color"),X=I.paint.get("background-opacity");if(X===0)return;const K=_.context,he=K.gl,Me=_.transform,ke=Me.tileSize,Fe=I.paint.get("background-pattern");if(_.isPatternMissing(Fe))return;const Ie=!Fe&&B.a===1&&X===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ie)return;const Ke=or.disabled,tt=_.depthModeForSublayer(0,Ie==="opaque"?Sn.ReadWrite:Sn.ReadOnly),De=_.colorModeForRenderPass(),Ye=_.useProgram(Fe?"backgroundPattern":"background"),ot=z||Me.coveringTiles({tileSize:ke,terrain:_.style.map.terrain});Fe&&(K.activeTexture.set(he.TEXTURE0),_.imageManager.bind(_.context));const st=I.getCrossfadeParameters();for(const dt of ot){const wt=z?dt.posMatrix:_.transform.calculatePosMatrix(dt.toUnwrapped()),xt=Fe?hi(wt,X,_,Fe,{tileID:dt,tileSize:ke},st):al(wt,X,B),Et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(dt);Ye.draw(K,he.TRIANGLES,tt,Ke,De,Hn.disabled,xt,Et,I.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(_,T,I){const z=_.context,B=I.implementation;if(_.renderPass==="offscreen"){const X=B.prerender;X&&(_.setCustomLayerDefaults(),z.setColorMode(_.colorModeForRenderPass()),X.call(B,z.gl,_.transform.customLayerMatrix()),z.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),z.setColorMode(_.colorModeForRenderPass()),z.setStencilMode(or.disabled);const X=B.renderingMode==="3d"?new Sn(_.context.gl.LEQUAL,Sn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Sn.ReadOnly);z.setDepthMode(X),B.render(z.gl,_.transform.customLayerMatrix()),z.setDirty(),_.setBaseState(),z.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,u,f,m,_){if(!f[0]&&!f[1])return r;const T=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(T){const B=Math.sin(T),X=Math.cos(T);f=[f[0]*X-f[1]*B,f[0]*B+f[1]*X]}const I=[_?f[0]:Ve(u,f[0],this.transform.zoom),_?f[1]:Ve(u,f[1],this.transform.zoom),0],z=new Float32Array(16);return l.$(z,r,I),z}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!u||!f}useProgram(r,u){this.cache=this.cache||{};const f=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new nl(this.context,ir[r],u,ll[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class ri{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,f){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const z=1/(I=l.ag([],I,r))[3]/u*m;return l.b3(I,I,[z,z,1/I[3],z])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const z=function(he,Me){var ke=Me[0],Fe=Me[1],Ie=Me[2],Ke=ke*ke+Fe*Fe+Ie*Ie;return Ke>0&&(Ke=1/Math.sqrt(Ke)),he[0]=Me[0]*Ke,he[1]=Me[1]*Ke,he[2]=Me[2]*Ke,he}([],function(he,Me,ke){var Fe=Me[0],Ie=Me[1],Ke=Me[2],tt=ke[0],De=ke[1],Ye=ke[2];return he[0]=Ie*Ye-Ke*De,he[1]=Ke*tt-Fe*Ye,he[2]=Fe*De-Ie*tt,he}([],N([],_[I[0]],_[I[1]]),N([],_[I[2]],_[I[1]]))),B=-((X=z)[0]*(K=_[I[1]])[0]+X[1]*K[1]+X[2]*K[2]);var X,K;return z.concat(B)});return new ri(_,T)}}class ws{constructor(r,u){this.min=r,this.max=u,this.center=function(f,m,_){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,_){return f[0]=m[0]+_[0],f[1]=m[1]+_[1],f[2]=m[2]+_[2],f}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],f=re(this.min),m=re(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],m[_]=u[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new ws(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const _=r.planes[m];let T=0;for(let I=0;I<u.length;I++)l.b4(_,u[I])>=0&&T++;if(T===0)return 0;T!==u.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let I=0;I<r.points.length;I++){const z=r.points[I][m]-this.min[m];_=Math.min(_,z),T=Math.max(T,z)}if(T<0||_>this.max[m]-this.min[m])return 0}return 1}}class qs{constructor(r=0,u=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=f,this.right=m}interpolate(r,u,f){return u.top!=null&&r.top!=null&&(this.top=l.B.number(r.top,u.top,f)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.B.number(r.bottom,u.bottom,f)),u.left!=null&&r.left!=null&&(this.left=l.B.number(r.left,u.left,f)),u.right!=null&&r.right!=null&&(this.right=l.B.number(r.right,u.right,f)),this}getCenter(r,u){const f=l.ad((this.left+r-this.right)/2,0,r),m=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new qs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ki{constructor(r,u,f,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new qs,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new Ki(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-l.b5(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new l.A(4);return l.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,_){var T=m[0],I=m[1],z=m[2],B=m[3],X=Math.sin(_),K=Math.cos(_);f[0]=T*K+z*X,f[1]=I*K+B*X,f[2]=T*-X+z*K,f[3]=I*-X+B*K}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=l.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,f){this._unmodified=!1,this._edgeInsets.interpolate(r,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new l.b6(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.P(0,0)),m=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),T=this.pointCoordinate(new l.P(0,this.height)),I=Math.floor(Math.min(f.x,m.x,_.x,T.x)),z=Math.floor(Math.max(f.x,m.x,_.x,T.x)),B=1;for(let X=I-B;X<=z+B;X++)X!==0&&u.push(new l.b6(X,r))}return u}coveringTiles(r){var u,f;let m=this.coveringZoomLevel(r);const _=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),I=l.U.fromLngLat(this.center),z=Math.pow(2,m),B=[z*T.x,z*T.y,0],X=[z*I.x,z*I.y,0],K=ri.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let he=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(he=m);const Me=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,ke=De=>({aabb:new ws([De*z,0,0],[(De+1)*z,z,0]),zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Fe=[],Ie=[],Ke=m,tt=r.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let De=1;De<=3;De++)Fe.push(ke(-De)),Fe.push(ke(De));for(Fe.push(ke(0));Fe.length>0;){const De=Fe.pop(),Ye=De.x,ot=De.y;let st=De.fullyVisible;if(!st){const $t=De.aabb.intersects(K);if($t===0)continue;st=$t===2}const dt=r.terrain?B:X,wt=De.aabb.distanceX(dt),xt=De.aabb.distanceY(dt),Et=Math.max(Math.abs(wt),Math.abs(xt));if(De.zoom===Ke||Et>Me+(1<<Ke-De.zoom)-2&&De.zoom>=he){const $t=Ke-De.zoom,Pn=B[0]-.5-(Ye<<$t),kt=B[1]-.5-(ot<<$t);Ie.push({tileID:new l.O(De.zoom===Ke?tt:De.zoom,De.wrap,De.zoom,Ye,ot),distanceSq:E([X[0]-.5-Ye,X[1]-.5-ot]),tileDistanceToCamera:Math.sqrt(Pn*Pn+kt*kt)})}else for(let $t=0;$t<4;$t++){const Pn=(Ye<<1)+$t%2,kt=(ot<<1)+($t>>1),an=De.zoom+1;let Ht=De.aabb.quadrant($t);if(r.terrain){const Wn=new l.O(an,De.wrap,an,Pn,kt),An=r.terrain.getMinMaxElevation(Wn),_n=(u=An.minElevation)!==null&&u!==void 0?u:this.elevation,kn=(f=An.maxElevation)!==null&&f!==void 0?f:this.elevation;Ht=new ws([Ht.min[0],Ht.min[1],_n],[Ht.max[0],Ht.max[1],kn])}Fe.push({aabb:Ht,zoom:an,x:Pn,y:kt,wrap:De.wrap,fullyVisible:st})}}return Ie.sort((De,Ye)=>De.distanceSq-Ye.distanceSq).map(De=>De.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=l.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(r.lng)*this.worldSize,l.H(u)*this.worldSize)}unproject(r){return new l.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),f=r.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const m=this.getCameraPosition(),_=l.U.fromLngLat(m.lngLat,m.altitude),T=l.U.fromLngLat(u,f),I=_.x-T.x,z=_.y-T.y,B=_.z-T.z,X=Math.sqrt(I*I+z*z+B*B),K=this.scaleZoom(this.cameraToCenterDistance/X/this.tileSize);this._elevation=f,this._center=u,this.zoom=K}setLocationAtPoint(r,u){const f=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),T=new l.U(_.x-(f.x-m.x),_.y-(f.y-m.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),u.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return l.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const he=u.pointCoordinate(r);if(he!=null)return he}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];l.ag(f,f,this.pixelMatrixInverse),l.ag(m,m,this.pixelMatrixInverse);const _=f[3],T=m[3],I=f[1]/_,z=m[1]/T,B=f[2]/_,X=m[2]/T,K=B===X?0:(0-B)/(X-B);return new l.U(l.B.number(f[0]/_,m[0]/T,K)/this.worldSize,l.B.number(I,z,K)/this.worldSize)}coordinatePoint(r,u=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.ag(m,m,f),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Pe().extend(this.pointLocation(new l.P(0,r))).extend(this.pointLocation(new l.P(this.width,r))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const f=r.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const _=r.canonical,T=this.worldSize/this.zoomScale(_.z),I=_.x+Math.pow(2,_.z)*r.wrap,z=l.ao(new Float64Array(16));return l.$(z,z,[I*T,_.y*T,0]),l.a0(z,z,[T/l.N,T/l.N,1]),l.a1(z,u?this.alignedProjMatrix:this.projMatrix,z),m[f]=new Float32Array(z),m[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,f,m,_=-90,T=90,I=-180,z=180;const B=this.size,X=this._unmodified;if(this.latRange){const Me=this.latRange;_=l.H(Me[1])*this.worldSize,T=l.H(Me[0])*this.worldSize,r=T-_<B.y?B.y/(T-_):0}if(this.lngRange){const Me=this.lngRange;I=l.b5(l.G(Me[0])*this.worldSize,0,this.worldSize),z=l.b5(l.G(Me[1])*this.worldSize,0,this.worldSize),z<I&&(z+=this.worldSize),u=z-I<B.x?B.x/(z-I):0}const K=this.point,he=Math.max(u||0,r||0);if(he)return this.center=this.unproject(new l.P(u?(z+I)/2:K.x,r?(T+_)/2:K.y)),this.zoom+=this.scaleZoom(he),this._unmodified=X,void(this._constraining=!1);if(this.latRange){const Me=K.y,ke=B.y/2;Me-ke<_&&(m=_+ke),Me+ke>T&&(m=T-ke)}if(this.lngRange){const Me=(I+z)/2,ke=l.b5(K.x,Me-this.worldSize/2,Me+this.worldSize/2),Fe=B.x/2;ke-Fe<I&&(f=I+Fe),ke+Fe>z&&(f=z-Fe)}f===void 0&&m===void 0||(this.center=this.unproject(new l.P(f!==void 0?f:K.x,m!==void 0?m:K.y)).wrap()),this._unmodified=X,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let m=l.ao(new Float64Array(16));l.a0(m,m,[this.width/2,-this.height/2,1]),l.$(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.ao(new Float64Array(16)),l.a0(m,m,[1,-1,1]),l.$(m,m,[-1,-1,0]),l.a0(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),I=_-T*this._pixelPerMeter/Math.cos(this._pitch),z=T<0?I:_,B=Math.PI/2+this._pitch,X=this._fov*(.5+r.y/this.height),K=Math.sin(X)*z/Math.sin(l.ad(Math.PI-B-X,.01,Math.PI-.01)),he=this.getHorizon(),Me=2*Math.atan(he/this.cameraToCenterDistance)*(.5+r.y/(2*he)),ke=Math.sin(Me)*z/Math.sin(l.ad(Math.PI-B-Me,.01,Math.PI-.01)),Fe=Math.min(K,ke),Ie=1.01*(Math.cos(Math.PI/2-this._pitch)*Fe+z),Ke=this.height/50;m=new Float64Array(16),l.b8(m,this._fov,this.width/this.height,Ke,Ie),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,l.a0(m,m,[1,-1,1]),l.$(m,m,[0,0,-this.cameraToCenterDistance]),l.b9(m,m,this._pitch),l.ae(m,m,this.angle),l.$(m,m,[-u,-f,0]),this.mercatorMatrix=l.a0([],m,[this.worldSize,this.worldSize,this.worldSize]),l.a0(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,m),l.$(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=l.as([],m),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,m);const tt=this.width%2/2,De=this.height%2/2,Ye=Math.cos(this.angle),ot=Math.sin(this.angle),st=u-Math.round(u)+Ye*tt+ot*De,dt=f-Math.round(f)+Ye*De+ot*tt,wt=new Float64Array(m);if(l.$(wt,wt,[st>.5?st-1:st,dt>.5?dt-1:dt,0]),this.alignedProjMatrix=wt,m=l.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let f=u.x,m=u.y,_=u.x,T=u.y;for(const I of r)f=Math.min(f,I.x),m=Math.min(m,I.y),_=Math.max(_,I.x),T=Math.max(T,I.y);return[new l.P(f,m),new l.P(_,m),new l.P(_,T),new l.P(f,T),new l.P(f,m)]}}}function Xo(y,r){let u,f=!1,m=null,_=null;const T=()=>{m=null,f&&(y.apply(_,u),m=setTimeout(T,r),f=!1)};return(...I)=>(f=!0,_=this,u=I,m||T(),m)}class Ta{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=Xo(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),T=Math.round(u.lng*_)/_,I=Math.round(u.lat*_)/_,z=this._map.getBearing(),B=this._map.getPitch();let X="";if(X+=r?`/${T}/${I}/${f}`:`${f}/${I}/${T}`,(z||B)&&(X+="/"+Math.round(10*z)/10),B&&(X+=`/${Math.round(B)}`),this._hashName){const K=this._hashName;let he=!1;const Me=window.location.hash.slice(1).split("&").map(ke=>{const Fe=ke.split("=")[0];return Fe===K?(he=!0,`${Fe}=${X}`):ke}).filter(ke=>ke);return he||Me.push(`${K}=${X}`),`#${Me.join("&")}`}return`#${X}`}}const bs={linearity:.3,easing:l.ba(0,0,.3,1)},wl=l.e({deceleration:2500,maxSpeed:1400},bs),Eu=l.e({deceleration:20,maxSpeed:1400},bs),Tu=l.e({deceleration:1e3,maxSpeed:360},bs),Cu=l.e({deceleration:1e3,maxSpeed:90},bs);class V{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=l.h.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const _=Ue(u.pan.mag(),f,l.e({},wl,r||{}));m.offset=u.pan.mult(_.amount/u.pan.mag()),m.center=this._map.transform.center,ge(m,_)}if(u.zoom){const _=Ue(u.zoom,f,Eu);m.zoom=this._map.transform.zoom+_.amount,ge(m,_)}if(u.bearing){const _=Ue(u.bearing,f,Tu);m.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),ge(m,_)}if(u.pitch){const _=Ue(u.pitch,f,Cu);m.pitch=this._map.transform.pitch+_.amount,ge(m,_)}if(m.zoom||m.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function ge(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Ue(y,r,u){const{maxSpeed:f,linearity:m,deceleration:_}=u,T=l.ad(y*m/(r/1e3),-f,f),I=Math.abs(T)/(_*m);return{easing:u.easing,duration:1e3*I,amount:T*(I/2)}}class it extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f,m={}){const _=w.mousePos(u.getCanvasContainer(),f),T=u.unproject(_);super(r,l.e({point:_,lngLat:T,originalEvent:f},m)),this._defaultPrevented=!1,this.target=u}}class zt extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){const m=r==="touchend"?f.changedTouches:f.touches,_=w.touchPos(u.getCanvasContainer(),m),T=_.map(z=>u.unproject(z)),I=_.reduce((z,B,X,K)=>z.add(B.div(K.length)),new l.P(0,0));super(r,{points:_,point:I,lngLats:T,lngLat:u.unproject(I),originalEvent:f}),this._defaultPrevented=!1}}class Tt extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Zt{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Tt(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new it(r.type,this._map,r))}mouseup(r){this._map.fire(new it(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new it(r.type,this._map,r))}dblclick(r){return this._firePreventable(new it(r.type,this._map,r))}mouseover(r){this._map.fire(new it(r.type,this._map,r))}mouseout(r){this._map.fire(new it(r.type,this._map,r))}touchstart(r){return this._firePreventable(new zt(r.type,this._map,r))}touchmove(r){this._map.fire(new zt(r.type,this._map,r))}touchend(r){this._map.fire(new zt(r.type,this._map,r))}touchcancel(r){this._map.fire(new zt(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xt{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new it(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new it("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new it(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.P.convert(r),this._map.terrain)}}class Gn{constructor(r,u){this._map=r,this._tr=new fn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,f.x),T=Math.max(m.x,f.x),I=Math.min(m.y,f.y),z=Math.max(m.y,f.y);w.setTransform(this._box,`translate(${_}px,${I}px)`),this._box.style.width=T-_+"px",this._box.style.height=z-I+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const f=this._startPos,m=u;if(this.reset(),w.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.k(r,{originalEvent:u}))}}function En(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const u={};for(let f=0;f<y.length;f++)u[y[f].identifier]=r[f];return u}class Nn{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const _=new l.P(0,0);for(const T of m)_._add(T);return _.div(m.length)}(u),this.touches=En(f,u)))}touchmove(r,u,f){if(this.aborted||!this.centroid)return;const m=En(f,u);for(const _ in this.touches){const T=m[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,u,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class sr{constructor(r){this.singleTap=new Nn(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,f){this.singleTap.touchstart(r,u,f)}touchmove(r,u,f){this.singleTap.touchmove(r,u,f)}touchend(r,u,f){const m=this.singleTap.touchend(r,u,f);if(m){const _=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(m)<30;if(_&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class ar{constructor(r){this._tr=new fn(r),this._zoomIn=new sr({numTouches:1,numTaps:2}),this._zoomOut=new sr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,f){this._zoomIn.touchstart(r,u,f),this._zoomOut.touchstart(r,u,f)}touchmove(r,u,f){this._zoomIn.touchmove(r,u,f),this._zoomOut.touchmove(r,u,f)}touchend(r,u,f){const m=this._zoomIn.touchend(r,u,f),_=this._zoomOut.touchend(r,u,f),T=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tr{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=u.length?u[0]:u;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const qo={0:1,2:2};class Yi{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=w.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,f){const m=qo[f];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class Ko{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Ca=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(r){r.preventDefault()}},Ao=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const f=new Yi({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new tr({clickTolerance:r,move:(m,_)=>({bearingDelta:(_.x-m.x)*u}),moveStateManager:f,enable:y,assignEvents:Ca})},Oi=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new Yi({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new tr({clickTolerance:r,move:(m,_)=>({pitchDelta:(_.y-m.y)*u}),moveStateManager:f,enable:y,assignEvents:Ca})};class Bt{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,f){return this._calculateTransform(r,u,f)}touchmove(r,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,f)}touchend(r,u,f){this._calculateTransform(r,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,f){f.length>0&&(this._active=!0);const m=En(f,u),_=new l.P(0,0),T=new l.P(0,0);let I=0;for(const B in m){const X=m[B],K=this._touches[B];K&&(_._add(X),T._add(X.sub(K)),I++,m[B]=X)}if(this._touches=m,I<this._minTouches||!T.mag())return;const z=T.div(I);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(I),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,T=Ks(f,u,m),I=Ks(f,u,_);if(!T||!I)return;const z=this._aroundCenter?null:T.add(I).div(2);return this._move([T,I],z,r)}touchend(r,u,f){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,T=Ks(f,u,m),I=Ks(f,u,_);T&&I||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ks(y,r,u){for(let f=0;f<y.length;f++)if(y[f].identifier===u)return r[f]}function bl(y,r){return Math.log(y/r)/Math.LN2}class jd extends yc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(bl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bl(this._distance,f),pinchAround:u}}}function Ft(y,r){return 180*y.angleWith(r)/Math.PI}class Oh extends yc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ft(this._vector,f),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,f=Ft(r,this._startVector);return Math.abs(f)<u}}function Rh(y){return Math.abs(y.y)>Math.abs(y.x)}class Zg extends yc{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,f){super.touchstart(r,u,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,Rh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=u.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const T=r.y>0==u.y>0;return Rh(r)&&Rh(u)&&T}}const jh={panStep:100,bearingStep:15,pitchStep:10};class Dd{constructor(r){this._tr=new fn(r);const u=jh;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,f=0,m=0,_=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:I=>{const z=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Bd,zoom:u?Math.round(z.zoom)+u*(r.shiftKey?2:1):z.zoom,bearing:z.bearing+f*this._bearingStep,pitch:z.pitch+m*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:z.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bd(y){return y*(2-y)}const Nd=4.000244140625;class Hg{constructor(r,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new fn(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=l.h.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%Nd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,r),f=this._tr;this._around=l.L.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Nd?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&z!==0&&(z=1/z);const B=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(B*z))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let _,T=!1;if(this._type==="wheel"&&f&&m){const I=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),z=m(I);_=l.B.number(f,u,z),I<1?this._frameId||(this._frameId=!0):T=!0}else _=u,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.bb;if(this._prevEase){const f=this._prevEase,m=(l.h.now()-f.start)/f.duration,_=f.easing(m+.01)-f.easing(m),T=.27/Math.sqrt(_*_+1e-4)*.01,I=Math.sqrt(.0729-T*T);u=l.ba(T,I,.25,1)}return this._prevEase={start:l.h.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Dh{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bh{constructor(r){this._tr=new fn(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nh{constructor(){this._tap=new sr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,f){if(!this._swipePoint)if(this._tapTime){const m=u[0],_=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(m)<30;_&&T?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,u,f)}touchmove(r,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=u[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,u,f)}touchend(r,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,u,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uh{constructor(r,u,f){this._el=r,this._mousePan=u,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ri{constructor(r,u,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ys{constructor(r,u,f,m){this._el=r,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Iu=y=>y.zoom||y.drag||y.pitch||y.rotate;class $h extends l.k{}function Au(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Vh{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=m.type==="renderFrame"?void 0:m,I={needsRenderFrame:!1},z={},B={},X=m.touches,K=X?this._getMapTouches(X):void 0,he=K?w.touchPos(this._el,K):w.mousePos(this._el,m);for(const{handlerName:Fe,handler:Ie,allowed:Ke}of this._handlers){if(!Ie.isEnabled())continue;let tt;this._blockedByActive(B,Ke,Fe)?Ie.reset():Ie[_||m.type]&&(tt=Ie[_||m.type](m,he,K),this.mergeHandlerResult(I,z,tt,Fe,T),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||Ie.isActive())&&(B[Fe]=Ie)}const Me={};for(const Fe in this._previousActiveHandlers)B[Fe]||(Me[Fe]=T);this._previousActiveHandlers=B,(Object.keys(Me).length||Au(I))&&(this._changes.push([I,z,Me]),this._triggerRenderFrame()),(Object.keys(B).length||Au(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ke}=I;ke&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ke(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new V(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,T]of this._listeners)w.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,u,f]of this._listeners)w.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Zt(u,r));const m=u.boxZoom=new Gn(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=new ar(u),T=new Bh(u);u.doubleClickZoom=new Dh(T,_),this._add("tapZoom",_),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const I=new Nh;this._add("tapDragZoom",I);const z=u.touchPitch=new Zg(u);this._add("touchPitch",z),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const B=Ao(r),X=Oi(r);u.dragRotate=new Ri(r,B,X),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const K=(({enable:Ke,clickTolerance:tt})=>{const De=new Yi({checkCorrectEvent:Ye=>w.mouseButton(Ye)===0&&!Ye.ctrlKey});return new tr({clickTolerance:tt,move:(Ye,ot)=>({around:ot,panDelta:ot.sub(Ye)}),activateOnStart:!0,moveStateManager:De,enable:Ke,assignEvents:Ca})})(r),he=new Bt(r,u);u.dragPan=new Uh(f,K,he),this._add("mousePan",K),this._add("touchPan",he,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const Me=new Oh,ke=new jd;u.touchZoomRotate=new Ys(f,ke,Me,I),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",ke,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const Fe=u.scrollZoom=new Hg(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Fe,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Ie=u.keyboard=new Dd(u);this._add("keyboard",Ie),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Xt(u))}_add(r,u,f){this._handlers.push({handlerName:r,handler:u,allowed:f}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Iu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,f){for(const m in r)if(m!==f&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const f of r)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(r,u,f,m,_){if(!f)return;l.e(r,f);const T={handlerName:m,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=T),f.panDelta!==void 0&&(u.drag=T),f.pitchDelta!==void 0&&(u.pitch=T),f.bearingDelta!==void 0&&(u.rotate=T)}_applyChanges(){const r={},u={},f={};for(const[m,_,T]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),l.e(u,_),l.e(f,T);this._updateMapTransform(r,u,f),this._changes=[]}_updateMapTransform(r,u,f){const m=this._map,_=m._getTransformForUpdate(),T=m.terrain;if(!(Au(r)||T&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:I,zoomDelta:z,bearingDelta:B,pitchDelta:X,around:K,pinchAround:he}=r;he!==void 0&&(K=he),m._stop(!0),K=K||m.transform.centerPoint;const Me=_.pointLocation(I?K.sub(I):K);B&&(_.bearing+=B),X&&(_.pitch+=X),z&&(_.zoom+=z),T?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(I)):_.setLocationAtPoint(Me,K):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(Me,K),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(Me,K),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,f,!0)}_fireEvents(r,u,f){const m=Iu(this._eventsInProgress),_=Iu(r),T={};for(const X in r){const{originalEvent:K}=r[X];this._eventsInProgress[X]||(T[`${X}start`]=K),this._eventsInProgress[X]=r[X]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const X in T)this._fireEvent(X,T[X]);_&&this._fireEvent("move",_.originalEvent);for(const X in r){const{originalEvent:K}=r[X];this._fireEvent(X,K)}const I={};let z;for(const X in this._eventsInProgress){const{handlerName:K,originalEvent:he}=this._eventsInProgress[X];this._handlersById[K].isActive()||(delete this._eventsInProgress[X],z=u[K]||he,I[`${X}end`]=z)}for(const X in I)this._fireEvent(X,I[X]);const B=Iu(this._eventsInProgress);if(f&&(m||_)&&!B){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;!X||!X.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:z})),K(this._map.getBearing())&&this._map.resetNorth()):(K(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.k(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new $h("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ud extends l.E{constructor(r,u){super(),this._renderFrameCallback=()=>{const f=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,f){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},u),f)}panTo(r,u,f){return this.easeTo(l.e({center:r},u),f)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,f){return this.easeTo(l.e({zoom:r},u),f)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,f){return this.easeTo(l.e({bearing:r},u),f)}resetNorth(r,u){return this.rotateTo(0,l.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Pe.convert(r);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,u)}_cameraForBoxAndBearing(r,u,f,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const ot=m.padding;m.padding={top:ot,bottom:ot,right:ot,left:ot}}m.padding=l.e(_,m.padding);const T=this.transform,I=T.padding,z=T.project(l.L.convert(r)),B=T.project(l.L.convert(u)),X=z.rotate(-f*Math.PI/180),K=B.rotate(-f*Math.PI/180),he=new l.P(Math.max(X.x,K.x),Math.max(X.y,K.y)),Me=new l.P(Math.min(X.x,K.x),Math.min(X.y,K.y)),ke=he.sub(Me),Fe=(T.width-(I.left+I.right+m.padding.left+m.padding.right))/ke.x,Ie=(T.height-(I.top+I.bottom+m.padding.top+m.padding.bottom))/ke.y;if(Ie<0||Fe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(T.scaleZoom(T.scale*Math.min(Fe,Ie)),m.maxZoom),tt=l.P.convert(m.offset),De=new l.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(f*Math.PI/180),Ye=tt.add(De).mult(T.scale/T.zoomScale(Ke));return{center:T.unproject(z.add(B).div(2).sub(Ye)),zoom:Ke,bearing:f}}fitBounds(r,u,f){return this._fitInternal(this.cameraForBounds(r,u),u,f)}fitScreenCoordinates(r,u,f,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(r)),this.transform.pointLocation(l.P.convert(u)),f,m),m,_)}_fitInternal(r,u,f){return r?(delete(u=l.e(r,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(r,u){this.stop();const f=this._getTransformForUpdate();let m=!1,_=!1,T=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=l.L.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(_=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(T=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),m&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),_&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),T&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(r,u,f,m=0){const _=l.U.fromLngLat(r,u),T=l.U.fromLngLat(f,m),I=T.x-_.x,z=T.y-_.y,B=T.z-_.z,X=Math.hypot(I,z,B);if(X===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(I,z),he=this.transform.scaleZoom(this.transform.cameraToCenterDistance/X/this.transform.tileSize),Me=180*Math.atan2(I,-z)/Math.PI;let ke=180*Math.acos(K/X)/Math.PI;return ke=B<0?90-ke:90+ke,{center:T.toLngLat(),zoom:he,pitch:ke,bearing:Me}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.bb},r)).animate===!1||!r.essential&&l.h.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),I=this.getPadding(),z="zoom"in r?+r.zoom:m,B="bearing"in r?this._normalizeBearing(r.bearing,_):_,X="pitch"in r?+r.pitch:T,K="padding"in r?r.padding:f.padding,he=l.P.convert(r.offset);let Me=f.centerPoint.add(he);const ke=f.pointLocation(Me),Fe=l.L.convert(r.center||ke);this._normalizeCenter(Fe);const Ie=f.project(ke),Ke=f.project(Fe).sub(Ie),tt=f.zoomScale(z-m);let De,Ye;r.around&&(De=l.L.convert(r.around),Ye=f.locationPoint(De));const ot={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||z!==m,this._rotating=this._rotating||_!==B,this._pitching=this._pitching||X!==T,this._padding=!f.isPaddingEqual(K),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,ot),this.terrain&&this._prepareElevation(Fe),this._ease(st=>{if(this._zooming&&(f.zoom=l.B.number(m,z,st)),this._rotating&&(f.bearing=l.B.number(_,B,st)),this._pitching&&(f.pitch=l.B.number(T,X,st)),this._padding&&(f.interpolatePadding(I,K,st),Me=f.centerPoint.add(he)),this.terrain&&!r.freezeElevation&&this._updateElevation(st),De)f.setLocationAtPoint(De,Ye);else{const dt=f.zoomScale(f.zoom-m),wt=z>m?Math.min(2,tt):Math.max(.5,tt),xt=Math.pow(wt,1-st),Et=f.unproject(Ie.add(Ke.mult(st*xt)).mult(dt));f.setLocationAtPoint(f.renderWorldCopies?Et.wrap():Et,Me)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},st=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,st)},r),this}_prepareEase(r,u,f={}){this._moving=!0,u||f.moving||this.fire(new l.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new l.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new l.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new l.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(u-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:f,zoom:m,pitch:_,bearing:T,elevation:I}=this.transformCameraUpdate(u);f&&(u.center=f),m!==void 0&&(u.zoom=m),_!==void 0&&(u.pitch=_),T!==void 0&&(u.bearing=T),I!==void 0&&(u.elevation=I),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new l.k("move",r)),this._zooming&&this.fire(new l.k("zoom",r)),this._rotating&&this.fire(new l.k("rotate",r)),this._pitching&&this.fire(new l.k("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.k("zoomend",r)),m&&this.fire(new l.k("rotateend",r)),_&&this.fire(new l.k("pitchend",r)),this.fire(new l.k("moveend",r))}flyTo(r,u){if(!r.essential&&l.h.prefersReducedMotion){const Ht=l.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ht,u)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},r);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),I=this.getPadding(),z="zoom"in r?l.ad(+r.zoom,f.minZoom,f.maxZoom):m,B="bearing"in r?this._normalizeBearing(r.bearing,_):_,X="pitch"in r?+r.pitch:T,K="padding"in r?r.padding:f.padding,he=f.zoomScale(z-m),Me=l.P.convert(r.offset);let ke=f.centerPoint.add(Me);const Fe=f.pointLocation(ke),Ie=l.L.convert(r.center||Fe);this._normalizeCenter(Ie);const Ke=f.project(Fe),tt=f.project(Ie).sub(Ke);let De=r.curve;const Ye=Math.max(f.width,f.height),ot=Ye/he,st=tt.mag();if("minZoom"in r){const Ht=l.ad(Math.min(r.minZoom,m,z),f.minZoom,f.maxZoom),Wn=Ye/f.zoomScale(Ht-m);De=Math.sqrt(Wn/st*2)}const dt=De*De;function wt(Ht){const Wn=(ot*ot-Ye*Ye+(Ht?-1:1)*dt*dt*st*st)/(2*(Ht?ot:Ye)*dt*st);return Math.log(Math.sqrt(Wn*Wn+1)-Wn)}function xt(Ht){return(Math.exp(Ht)-Math.exp(-Ht))/2}function Et(Ht){return(Math.exp(Ht)+Math.exp(-Ht))/2}const $t=wt(!1);let Pn=function(Ht){return Et($t)/Et($t+De*Ht)},kt=function(Ht){return Ye*((Et($t)*(xt(Wn=$t+De*Ht)/Et(Wn))-xt($t))/dt)/st;var Wn},an=(wt(!0)-$t)/De;if(Math.abs(st)<1e-6||!isFinite(an)){if(Math.abs(Ye-ot)<1e-6)return this.easeTo(r,u);const Ht=ot<Ye?-1:1;an=Math.abs(Math.log(ot/Ye))/De,kt=function(){return 0},Pn=function(Wn){return Math.exp(Ht*De*Wn)}}return r.duration="duration"in r?+r.duration:1e3*an/("screenSpeed"in r?+r.screenSpeed/De:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==B,this._pitching=X!==T,this._padding=!f.isPaddingEqual(K),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Ie),this._ease(Ht=>{const Wn=Ht*an,An=1/Pn(Wn);f.zoom=Ht===1?z:m+f.scaleZoom(An),this._rotating&&(f.bearing=l.B.number(_,B,Ht)),this._pitching&&(f.pitch=l.B.number(T,X,Ht)),this._padding&&(f.interpolatePadding(I,K,Ht),ke=f.centerPoint.add(Me)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ht);const _n=Ht===1?Ie:f.unproject(Ke.add(tt.mult(kt(Wn))).mult(An));f.setLocationAtPoint(f.renderWorldCopies?_n.wrap():_n,ke),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,u,f){f.animate===!1||f.duration===0?(r(1),u()):(this._easeStart=l.h.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=l.b5(r,-180,180);const f=Math.abs(r-u);return Math.abs(r-360-u)<f&&(r-=360),Math.abs(r+360-u)<f&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=r.lng-u.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class Ji{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const f=this._map._getUIString(`AttributionControl.${u}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const _=u[m];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let T=_+1;T<r.length;T++)if(r[T].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class lr{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Gh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var $d=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Vd extends l.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.aS(m.posMatrix,0,l.N,0,l.N,0,1),this._tiles[m.key]=new on(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const u in this._tiles){const f=this._tiles[u];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),u[f]=_}else if(m.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=m.canonical.z-r.canonical.z,I=m.canonical.x-(m.canonical.x>>T<<T),z=m.canonical.y-(m.canonical.y>>T<<T),B=l.N>>T;l.aS(_.posMatrix,0,B,0,B,0,1),l.$(_.posMatrix,_.posMatrix,[-I*B,-z*B,0]),u[f]=_}else if(r.canonical.isChildOf(m.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=r.canonical.z-m.canonical.z,I=r.canonical.x-(r.canonical.x>>T<<T),z=r.canonical.y-(r.canonical.y>>T<<T),B=l.N>>T;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[I*B,z*B,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**T,1/2**T,0]),u[f]=_}}return u}getSourceTile(r,u){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&u)for(;m>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class Gd{constructor(r,u,f){this.painter=r,this.sourceCache=new Vd(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,f,m=l.N){var _;if(!(u>=0&&u<m&&f>=0&&f<m))return 0;const T=this.getTerrainData(r),I=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!I)return 0;const z=function(ke,Fe,Ie){var Ke=Fe[0],tt=Fe[1];return ke[0]=Ie[0]*Ke+Ie[4]*tt+Ie[12],ke[1]=Ie[1]*Ke+Ie[5]*tt+Ie[13],ke}([],[u/m*l.N,f/m*l.N],T.u_terrain_matrix),B=[z[0]*I.dim,z[1]*I.dim],X=Math.floor(B[0]),K=Math.floor(B[1]),he=B[0]-X,Me=B[1]-K;return I.get(X,K)*(1-he)*(1-Me)+I.get(X+1,K)*he*(1-Me)+I.get(X,K+1)*(1-he)*Me+I.get(X+1,K+1)*he*Me}getElevationForLngLatZoom(r,u){const{tileID:f,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(f,m%l.N,_%l.N,l.N)}getElevation(r,u,f,m=l.N){return this.getDEMElevation(r,u,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new q(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>_<<_),I=r.canonical.y-(r.canonical.y>>_<<_),z=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(z,z,[T*l.N,I*l.N,0]),this._demMatrixCache[r.key]={matrix:z,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,f=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let I=0;I<this._coordsTextureSize;I++,T+=4)u[T+0]=255&I,u[T+1]=255&_,u[T+2]=I>>8<<4|_>>8,u[T+3]=0;const f=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new q(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){const u=new Uint8Array(4),f=this.painter.context,m=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),T=u[1]+((15&u[2])<<8),I=this.coordsIndex[255-u[3]],z=I&&this.sourceCache.getTileByID(I);if(!z)return null;const B=this._coordsTextureSize,X=(1<<z.tileID.canonical.z)*B;return new l.U((z.tileID.canonical.x*B+_)/X,(z.tileID.canonical.y*B+T)/X,this.getElevation(z.tileID,_,T,B))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new l.bd,f=new l.b0,m=this.meshSize,_=l.N/m,T=m*m;for(let K=0;K<=m;K++)for(let he=0;he<=m;he++)u.emplaceBack(he*_,K*_,0);for(let K=0;K<T;K+=m+1)for(let he=0;he<m;he++)f.emplaceBack(he+K,m+he+K+1,m+he+K+2),f.emplaceBack(he+K,m+he+K+2,he+K+1);const I=u.length,z=I+2*(m+1);for(const K of[0,1])for(let he=0;he<=m;he++)for(const Me of[0,1])u.emplaceBack(he*_,K*l.N,Me);for(let K=0;K<2*m;K+=2)f.emplaceBack(z+K,z+K+1,z+K+3),f.emplaceBack(z+K,z+K+3,z+K+2),f.emplaceBack(I+K,I+K+3,I+K+1),f.emplaceBack(I+K,I+K+2,I+K+3);const B=u.length,X=B+2*(m+1);for(const K of[0,1])for(let he=0;he<=m;he++)for(const Me of[0,1])u.emplaceBack(K*l.N,he*_,Me);for(let K=0;K<2*m;K+=2)f.emplaceBack(B+K,B+K+1,B+K+3),f.emplaceBack(B+K,B+K+3,B+K+2),f.emplaceBack(X+K,X+K+3,X+K+1),f.emplaceBack(X+K,X+K+2,X+K+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(u,$d.members),segments:l.S.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,u){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,u){const f=l.U.fromLngLat(r.wrap()),m=(1<<u)*l.N,_=f.x*m,T=f.y*m,I=Math.floor(_/l.N),z=Math.floor(T/l.N);return{tileID:new l.O(u,0,u,I,z),mercatorX:_,mercatorY:T}}}class Wg{constructor(r,u,f){this._context=r,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:r,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const bi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class _c{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Wg(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const _ of m){const T=this.terrain.sourceCache.getTerrainCoords(_);for(const I in T)this._coordsDescendingInv[f][I]||(this._coordsDescendingInv[f][I]=[]),this._coordsDescendingInv[f][I].push(T[I])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],_=m.source;if(bi[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const T in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][T]=this._coordsDescendingInv[_][T].map(I=>I.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][f.tileID.key];_&&_!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(bi[u]&&(this._prevType&&bi[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(bi[this._prevType]||bi[u]&&m){this._prevType=u;const _=this._stacks.length-1,T=this._stacks[_]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(Qn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[_]){const B=this.pool.getObjectForId(I.rtt[_].id);if(B.stamp===I.rtt[_].stamp){this.pool.useObject(B);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),I.rtt[_]={id:z.id,stamp:z.stamp},f.context.bindFramebuffer.set(z.fbo.framebuffer),f.context.clear({color:l.aT.transparent,stencil:0}),f.currentStencilSource=void 0;for(let B=0;B<T.length;B++){const X=f.style._layers[T[B]],K=X.source?this._coordsDescendingInv[X.source][I.tileID.key]:[I.tileID];f.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),f._renderTileClippingMasks(X,K),f.renderLayer(f,f.style.sourceCaches[X.source],X,K),X.source&&(I.rttCoords[X.source]=this._coordsDescendingInvStr[X.source][I.tileID.key])}}return Qn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),bi[u]}return!1}}const qt=b,sn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Pu=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Zh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Hh{constructor(r,u,f=!1){this.mousedown=T=>{this.startMouse(l.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),w.mousePos(this.element,T)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,w.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Ao({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:I,bearingDegreesPerPixelMoved:z=.8})=>{const B=new Ko;return new tr({clickTolerance:I,move:(X,K)=>({bearingDelta:(K.x-X.x)*z}),moveStateManager:B,enable:T,assignEvents:Pu})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=Oi({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:I,pitchDegreesPerPixelMoved:z=-.5})=>{const B=new Ko;return new tr({clickTolerance:I,move:(X,K)=>({pitchDelta:(K.y-X.y)*z}),moveStateManager:B,enable:T,assignEvents:Pu})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),w.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),w.disableDrag()}moveMouse(r,u){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(r,u){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Cr;function Wh(y,r,u){if(y=new l.L(y.lng,y.lat),r){const f=new l.L(y.lng-360,y.lat),m=new l.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(r);u.locationPoint(f).distSqr(r)<_?y=f:u.locationPoint(m).distSqr(r)<_&&(y=m)}for(;Math.abs(y.lng-u.center.lng)>180;){const f=u.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const go={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Zd(y,r,u){const f=y.classList;for(const m in go)f.remove(`maplibregl-${u}-anchor-${m}`);f.add(`maplibregl-${u}-anchor-${r}`)}class Ia extends l.E{constructor(r){if(super(),this._onKeyPress=u=>{const f=u.code,m=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!f)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Wh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${go[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),I=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*I?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const I=w.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ke of z){const tt=w.createNS("http://www.w3.org/2000/svg","ellipse");tt.setAttributeNS(null,"opacity","0.04"),tt.setAttributeNS(null,"cx","10.5"),tt.setAttributeNS(null,"cy","5.80029008"),tt.setAttributeNS(null,"rx",Ke.rx),tt.setAttributeNS(null,"ry",Ke.ry),I.appendChild(tt)}const B=w.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);const X=w.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(X);const K=w.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const he=w.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(he);const Me=w.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Me.setAttributeNS(null,"fill","#FFFFFF");const ke=w.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Fe=w.createNS("http://www.w3.org/2000/svg","circle");Fe.setAttributeNS(null,"fill","#000000"),Fe.setAttributeNS(null,"opacity","0.25"),Fe.setAttributeNS(null,"cx","5.5"),Fe.setAttributeNS(null,"cy","5.5"),Fe.setAttributeNS(null,"r","5.4999962");const Ie=w.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#FFFFFF"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962"),ke.appendChild(Fe),ke.appendChild(Ie),T.appendChild(I),T.appendChild(B),T.appendChild(K),T.appendChild(Me),T.appendChild(ke),u.appendChild(T),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Zd(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const gr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let pr=0,Sl=!1;const ku={maxWidth:100,unit:"metric"};function Mu(y,r,u){const f=u&&u.maxWidth||100,m=y._container.clientHeight/2,_=y.unproject([0,m]),T=y.unproject([f,m]),I=_.distanceTo(T);if(u&&u.unit==="imperial"){const z=3.2808*I;z>5280?Aa(r,f,z/5280,y._getUIString("ScaleControl.Miles")):Aa(r,f,z,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Aa(r,f,I/1852,y._getUIString("ScaleControl.NauticalMiles")):I>=1e3?Aa(r,f,I/1e3,y._getUIString("ScaleControl.Kilometers")):Aa(r,f,I,y._getUIString("ScaleControl.Meters"))}function Aa(y,r,u,f){const m=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let I=_/T;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(z){const B=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*B)/B}(I),T*I}(u);y.style.width=r*(m/u)+"px",y.innerHTML=`${m}&nbsp;${f}`}const Xh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},qh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function El(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-y),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const r=l.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return El(new l.P(0,0))}const Kh={extend:(y,...r)=>l.e(y,...r),run(y){y()},logToElement(y,r=!1,u="log"){const f=window.document.getElementById(u);f&&(r&&(f.innerHTML=""),f.innerHTML+=`<br>${y}`)}},Yh=b;class Un{static get version(){return Yh}static get workerCount(){return et.workerCount}static set workerCount(r){et.workerCount=r}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){l.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(r){l.c.WORKER_URL=r}static addProtocol(r,u){l.c.REGISTERED_PROTOCOLS[r]=u}static removeProtocol(r){delete l.c.REGISTERED_PROTOCOLS[r]}}return Un.Map=class extends Ud{constructor(y){if(l.bf.mark(l.bg.create),(y=l.e({},sn,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ki(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new vc,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Gh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=de.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const u=Xo(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{r?u(f):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Vh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Ta(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Ji({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new lr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new l.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new l.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new l.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,u,f)}resize(y){var r;const u=this._containerDimensions(),f=u[0],m=u[1],_=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,_),this.painter.resize(f,m,_),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const z=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,z),this.painter.resize(f,m,z)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const T=!this._moving;return T&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),T&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:u,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),_=y*m,T=r*m;return Math.min(_>u?u/_:1,T>f?f/T:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Pe.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,u){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:_=>{const T=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];T.length?f||(f=!0,u.call(this,new it(y,this,_.originalEvent,{features:T}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,u.call(this,new it(y,this,T.originalEvent)))},mouseout:T=>{f&&(f=!1,u.call(this,new it(y,this,T.originalEvent)))}}}}{const f=m=>{const _=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];_.length&&(m.features=_,u.call(this,m),delete m.features)};return{layer:r,listener:u,delegates:{[y]:f}}}}on(y,r,u){if(u===void 0)return super.on(y,r);const f=this._createDelegatedListener(y,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(y,r,u){if(u===void 0)return super.once(y,r);const f=this._createDelegatedListener(y,r,u);for(const m in f.delegates)this.once(m,f.delegates[m]);return this}off(y,r,u){return u===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const m=this._delegatedListeners[y];for(let _=0;_<m.length;_++){const T=m[_];if(T.layer===r&&T.listener===u){for(const I in T.delegates)this.off(I,T.delegates[I]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let u;const f=y instanceof l.P||Array.isArray(y),m=f?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:y)||{},m instanceof l.P||typeof m[0]=="number")u=[l.P.convert(m)];else{const _=l.P.convert(m[0]),T=l.P.convert(m[1]);u=[_,new l.P(T.x,_.y),T,new l.P(_.x,T.y),_]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Nr(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,u):this.style.loadJSON(y,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Nr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,G.Style);l.f(u,(f,m)=>{f?this.fire(new l.j(f)):m&&this._updateDiff(m,r)})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Gd(this.painter,r,y),this.painter.renderToTexture=new _c(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const u=y[r]._tiles;for(const f in u){const m=u[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(y,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,r,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,u={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:_,stretchY:T,content:I}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:B,data:X}=r,K=r;return this.style.addImage(y,{data:new l.R({width:z,height:B},new Uint8Array(X)),pixelRatio:f,stretchX:_,stretchY:T,content:I,sdf:m,version:0,userImage:K}),K.onAdd&&K.onAdd(this,y),this}}{const{width:z,height:B,data:X}=l.h.getImageData(r);this.style.addImage(y,{data:new l.R({width:z,height:B},X),pixelRatio:f,stretchX:_,stretchY:T,content:I,sdf:m,version:0})}}updateImage(y,r){const u=this.style.getImage(y);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||l.a(r)?l.h.getImageData(r):r,{width:m,height:_,data:T}=f;if(m===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||_!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(r instanceof HTMLImageElement||l.a(r));return u.data.replace(T,I),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,r){de.getImage(this._requestManager.transformRequest(y,G.Image),r)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}setLayerZoomRange(y,r,u){return this.style.setLayerZoomRange(y,r,u),this._update(!0)}setFilter(y,r,u={}){return this.style.setFilter(y,r,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,u,f={}){return this.style.setPaintProperty(y,r,u,f),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,u,f={}){return this.style.setLayoutProperty(y,r,u,f),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,u,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,u=>{u||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const m=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=w.create("div",`maplibregl-ctrl-${T} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,r,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:y},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Wo(u,this.transform),A.testSupport(u)}_onCooperativeGesture(y,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(m,_);const T=new l.a8(m,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=T.crossFadingFactor();I===1&&I===this._crossFadingFactor||(u=!0,this._crossFadingFactor=I),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bf.mark(l.bg.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,l.bf.mark(l.bg.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),de.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bf.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bf.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return qt}getCameraTargetElevation(){return this.transform.elevation}},Un.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);r.title=f,r.setAttribute("aria-label",f)},this.options=l.e({},Zh,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Hh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",r),u}},Un.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new l.L(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),_=l.e({bearing:m},this.options.fitBoundsOptions),T=Pe.fromLngLat(u,f);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new l.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Sl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ia({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ia({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},gr,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){Cr===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Cr=f.state!=="denied",r(Cr)}).catch(()=>{Cr=!!window.navigator.geolocation,r(Cr)}):(Cr=!!window.navigator.geolocation,r(Cr)):r(Cr)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pr=0,Sl=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),u=y.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),u=y.getNorthEast(),f=r.distanceTo(u),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pr--,Sl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pr++,pr>1?(y={maximumAge:6e5,timeout:0},Sl=!0):(y=this.options.positionOptions,Sl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Un.AttributionControl=Ji,Un.LogoControl=lr,Un.ScaleControl=class{constructor(y){this._onMove=()=>{Mu(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Mu(this._map,this._container,this.options)},this.options=l.e({},ku,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Un.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Un.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Un.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const u=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let f=this.options.anchor;const m=El(this.options.offset);if(!f){const T=this._container.offsetWidth,I=this._container.offsetHeight;let z;z=u.y+m.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<T/2?z.push("left"):u.x>this._map.transform.width-T/2&&z.push("right"),f=z.length===0?"bottom":z.join("-")}const _=u.add(m[f]).round();w.setTransform(this._container,`${go[f]} translate(${_.x}px,${_.y}px)`),Zd(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Xh),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=y;f=u.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(qh);y&&y.focus()}},Un.Marker=Ia,Un.Style=Nr,Un.LngLat=l.L,Un.LngLatBounds=Pe,Un.Point=l.P,Un.MercatorCoordinate=l.U,Un.Evented=l.E,Un.AJAXError=l.bh,Un.config=l.c,Un.CanvasSource=St,Un.GeoJSONSource=ct,Un.ImageSource=It,Un.RasterDEMTileSource=nt,Un.RasterTileSource=Ze,Un.VectorTileSource=Xe,Un.VideoSource=ft,Un.setRTLTextPlugin=l.bi,Un.getRTLTextPluginStatus=l.bj,Un.prewarm=function(){L().acquire(Be)},Un.clearPrewarmedResources=function(){const y=le;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Be),le=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Kh.extend(Un,{isSafari:l.ac,getPerformanceMetrics:l.bf.getPerformanceMetrics}),Un});var g=c;return g})})(nC);var iC=nC.exports;const oC=Sd(iC),k3=ik({__proto__:null,default:oC},[iC]);const M3="modulepreload",z3=function(e){return"/osm-address-editor-vite/"+e},Jb={},L3=function(t,i,a){if(!i||i.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=z3(d),d in Jb)return;Jb[d]=!0;const g=d.endsWith(".css"),l=g?'[rel="stylesheet"]':"";if(!!a)for(let A=c.length-1;A>=0;A--){const C=c[A];if(C.href===d&&(!g||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${l}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":M3,g||(w.as="script",w.crossOrigin=""),w.href=d,document.head.appendChild(w),g)return new Promise((A,C)=>{w.addEventListener("load",A),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t()).catch(d=>{const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d})},F3=yt.createContext(null);function O3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===d}function Ro(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Ro(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Ro(e[c],t[c]))return!1;return!0}return!1}function R3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function Qb(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Ro(i,a)||t.setProjection(i)}function e2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function t2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const j3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function n2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const d=t[a.ref];if(d){c=c||Object.assign({},a),delete c.ref;for(const g of j3)g in d&&(c[g]=d[g])}return c||a});return{...e,layers:i}}const r2={version:8,sources:{},layers:[]},i2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},c0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},o2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},D3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],B3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class vh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[o2[c.type]];d?d(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[i2[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[c0[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=vh.savedMaps.pop();if(!a)return null;const c=a.map,d=c.getContainer();for(i.className=d.className;d.childNodes.length>0;)i.appendChild(d.childNodes[0]);c._container=i;const g=c._resizeObserver;g&&(g.disconnect(),g.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=r2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||N3()||null,container:t,style:n2(a)},d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),i.gl){const A=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=A,i.gl)}const g=new this._MapClass(c);d.padding&&g.setPadding(d.padding),i.cursor&&(g.getCanvas().style.cursor=i.cursor),this._createShadowTransform(g);const l=g._render;g._render=A=>{this._inRender=!0,l.call(g,A),this._inRender=!1};const b=g._renderTaskQueue.run;g._renderTaskQueue.run=A=>{b.call(g._renderTaskQueue,A),this._onBeforeRepaint()},g.on("render",()=>this._onAfterRepaint());const w=g.fire;g.fire=this._fireEvent.bind(this,w),g.on("resize",()=>{this._renderTransform.resize(g.transform.width,g.transform.height)}),g.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Qb(g.transform,this._renderTransform)}),g.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const A in i2)g.on(A,this._onPointerEvent);for(const A in c0)g.on(A,this._onCameraEvent);for(const A in o2)g.on(A,this._onEvent);this._map=g}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),vh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=R3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:d,pitch:g,bearing:l}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const w=t2(c,{...e2(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&i){const A=this._deferredEvents;A.move=!0,A.zoom||(A.zoom=d!==c.zoom),A.rotate||(A.rotate=l!==c.bearing),A.pitch||(A.pitch=g!==c.pitch)}return b||t2(a.transform,t),w}_updateSettings(t,i){const a=this._map;let c=!1;for(const d of D3)if(d in t&&!Ro(t[d],i[d])){c=!0;const g=a[`set${d[0].toUpperCase()}${d.slice(1)}`];g==null||g.call(a,t[d])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=r2,styleDiffing:c=!0}=t,d={diff:c};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(n2(a),d),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Ro(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Ro(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Ro(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const d=this._map;let g=!1;for(const l of B3){const b=(a=t[l])!==null&&a!==void 0?a:!0,w=(c=i[l])!==null&&c!==void 0?c:!0;Ro(b,w)||(g=!0,b?d[l].enable(b):d[l].disable())}return g}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const d=t.type,g=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,d=c.transform,g=typeof i=="string"?i:i.type;return g==="move"&&this._updateViewState(this.props,!1),g in c0&&(typeof i=="object"&&(i.viewState=e2(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=d,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{Qb(this._renderTransform,i),t.transform=i}}}vh.savedMaps=[];function N3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const U3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function $3(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const d=t.project(a);return t.transform=c,d},unproject:a=>{const c=t.transform;t.transform=e.transform;const d=t.unproject(a);return t.transform=c,d},queryTerrainElevation:(a,c)=>{const d=t.transform;t.transform=e.transform;const g=t.queryTerrainElevation(a,c);return t.transform=d,g},queryRenderedFeatures:(a,c)=>{const d=t.transform;t.transform=e.transform;const g=t.queryRenderedFeatures(a,c);return t.transform=d,g}};for(const a of V3(t))!(a in i)&&!U3.includes(a)&&(i[a]=t[a].bind(t));return i}function V3(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const G3=typeof document<"u"?yt.useLayoutEffect:yt.useEffect,Z3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function H3(e,t){for(const a of Z3)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!1)}const Ch=yt.createContext(null);function W3(e,t,i){const a=yt.useContext(F3),[c,d]=yt.useState(null),g=yt.useRef(),{current:l}=yt.useRef({mapLib:null,map:null});yt.useEffect(()=>{const A=e.mapLib;let C=!0,M;return Promise.resolve(A||i).then(R=>{if(!C)return;if(!R)throw new Error("Invalid mapLib");const J="Map"in R?R:R.default;if(!J.Map)throw new Error("Invalid mapLib");if(H3(J,e),!J.supported||J.supported(e))e.reuseMaps&&(M=vh.reuse(e,g.current)),M||(M=new vh(J.Map,e,g.current)),l.map=$3(M),l.mapLib=J,d(M),a==null||a.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:J}=e;J?J({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{C=!1,M&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?M.recycle():M.destroy())}},[]),G3(()=>{c&&c.setProps(e)}),yt.useImperativeHandle(t,()=>l.map,[c]);const b=yt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return yt.createElement("div",{id:e.id,ref:g,style:b},c&&yt.createElement(Ch.Provider,{value:l},yt.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const X3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function rc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!X3.test(a)?i[a]=`${c}px`:i[a]=c}}function q3(e,t){const{map:i,mapLib:a}=yt.useContext(Ch),c=yt.useRef({props:e});c.current.props=e;const d=yt.useMemo(()=>{let Y=!1;yt.Children.forEach(e.children,$=>{$&&(Y=!0)});const de={...e,element:Y?document.createElement("div"):null},G=new a.Marker(de);return G.setLngLat([e.longitude,e.latitude]),G.getElement().addEventListener("click",$=>{var U,re;(re=(U=c.current.props).onClick)===null||re===void 0||re.call(U,{type:"click",target:G,originalEvent:$})}),G.on("dragstart",$=>{var U,re;const Z=$;Z.lngLat=d.getLngLat(),(re=(U=c.current.props).onDragStart)===null||re===void 0||re.call(U,Z)}),G.on("drag",$=>{var U,re;const Z=$;Z.lngLat=d.getLngLat(),(re=(U=c.current.props).onDrag)===null||re===void 0||re.call(U,Z)}),G.on("dragend",$=>{var U,re;const Z=$;Z.lngLat=d.getLngLat(),(re=(U=c.current.props).onDragEnd)===null||re===void 0||re.call(U,Z)}),G},[]);yt.useEffect(()=>(d.addTo(i.getMap()),()=>{d.remove()}),[]);const{longitude:g,latitude:l,offset:b,style:w,draggable:A=!1,popup:C=null,rotation:M=0,rotationAlignment:R="auto",pitchAlignment:J="auto"}=e;return yt.useEffect(()=>{rc(d.getElement(),w)},[w]),yt.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==g||d.getLngLat().lat!==l)&&d.setLngLat([g,l]),b&&!O3(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==A&&d.setDraggable(A),d.getRotation()!==M&&d.setRotation(M),d.getRotationAlignment()!==R&&d.setRotationAlignment(R),d.getPitchAlignment()!==J&&d.setPitchAlignment(J),d.getPopup()!==C&&d.setPopup(C),w1.createPortal(e.children,d.getElement())}const K3=yt.memo(yt.forwardRef(q3));function s2(e){return new Set(e?e.trim().split(/\s+/):[])}function Y3(e,t){const{map:i,mapLib:a}=yt.useContext(Ch),c=yt.useMemo(()=>document.createElement("div"),[]),d=yt.useRef({props:e});d.current.props=e;const g=yt.useMemo(()=>{const l={...e},b=new a.Popup(l);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var A,C;(C=(A=d.current.props).onOpen)===null||C===void 0||C.call(A,w)}),b},[]);if(yt.useEffect(()=>{const l=b=>{var w,A;(A=(w=d.current.props).onClose)===null||A===void 0||A.call(w,b)};return g.on("close",l),g.setDOMContent(c).addTo(i.getMap()),()=>{g.off("close",l),g.isOpen()&&g.remove()}},[]),yt.useEffect(()=>{rc(g.getElement(),e.style)},[e.style]),yt.useImperativeHandle(t,()=>g,[]),g.isOpen()&&((g.getLngLat().lng!==e.longitude||g.getLngLat().lat!==e.latitude)&&g.setLngLat([e.longitude,e.latitude]),e.offset&&!Ro(g.options.offset,e.offset)&&g.setOffset(e.offset),(g.options.anchor!==e.anchor||g.options.maxWidth!==e.maxWidth)&&(g.options.anchor=e.anchor,g.setMaxWidth(e.maxWidth)),g.options.className!==e.className)){const l=s2(g.options.className),b=s2(e.className);for(const w of l)b.has(w)||g.removeClassName(w);for(const w of b)l.has(w)||g.addClassName(w);g.options.className=e.className}return w1.createPortal(e.children,c)}yt.memo(yt.forwardRef(Y3));function Pd(e,t,i,a){const c=yt.useContext(Ch),d=yt.useMemo(()=>e(c),[]);return yt.useEffect(()=>{const g=a||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,g==null?void 0:g.position),l&&l(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function J3(e){const t=Pd(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return yt.useEffect(()=>{rc(t._container,e.style)},[e.style]),null}yt.memo(J3);function Q3(e){const t=Pd(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.useEffect(()=>{rc(t._controlContainer,e.style)},[e.style]),null}yt.memo(Q3);function e4(e,t){const i=yt.useRef({props:e}),a=Pd(({mapLib:c})=>{const d=new c.GeolocateControl(e),g=d._setupUI;return d._setupUI=l=>{d._container.hasChildNodes()||g(l)},d.on("geolocate",l=>{var b,w;(w=(b=i.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),d.on("error",l=>{var b,w;(w=(b=i.current.props).onError)===null||w===void 0||w.call(b,l)}),d.on("outofmaxbounds",l=>{var b,w;(w=(b=i.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationstart",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationend",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),d},{position:e.position});return i.current.props=e,yt.useImperativeHandle(t,()=>a,[]),yt.useEffect(()=>{rc(a._container,e.style)},[e.style]),null}const t4=yt.memo(yt.forwardRef(e4));function n4(e){const t=Pd(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return yt.useEffect(()=>{rc(t._container,e.style)},[e.style]),null}const r4=yt.memo(n4);function i4(e){const t=Pd(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),i=yt.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),yt.useEffect(()=>{rc(t._container,c)},[c]),null}yt.memo(i4);function Rm(e,t){if(!e)throw new Error(t)}function o4(e,t,i,a){if(Rm(i.id===a.id,"layer id changed"),Rm(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:d={},filter:g,minzoom:l,maxzoom:b,beforeId:w}=i;if(w!==a.beforeId&&e.moveLayer(t,w),c!==a.layout){const A=a.layout||{};for(const C in c)Ro(c[C],A[C])||e.setLayoutProperty(t,C,c[C]);for(const C in A)c.hasOwnProperty(C)||e.setLayoutProperty(t,C,void 0)}if(d!==a.paint){const A=a.paint||{};for(const C in d)Ro(d[C],A[C])||e.setPaintProperty(t,C,d[C]);for(const C in A)d.hasOwnProperty(C)||e.setPaintProperty(t,C,void 0)}Ro(g,a.filter)||e.setFilter(t,g),(l!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,l,b)}function s4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let a4=0;function l4(e){const t=yt.useContext(Ch).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-layer-${a4++}`,[]);if(yt.useEffect(()=>{if(t){const g=()=>a(l=>l+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{o4(t,c,e,i.current)}catch(g){console.warn(g)}else s4(t,c,e);return i.current=e,null}let u4=0;function c4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function h4(e,t,i){Rm(t.id===i.id,"source id changed"),Rm(t.type===i.type,"source type changed");let a="",c=0;for(const g in t)g!=="children"&&g!=="id"&&!Ro(i[g],t[g])&&(a=g,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function f4(e){const t=yt.useContext(Ch).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-source-${u4++}`,[]);yt.useEffect(()=>{if(t){const g=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",g),g(),()=>{var l;if(t.off("styledata",g),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?h4(d,e,i.current):d=c4(t,c,e),i.current=e,d&&yt.Children.map(e.children,g=>g&&yt.cloneElement(g,{source:c}))||null}const d4=L3(()=>Promise.resolve().then(()=>k3),void 0),p4=(()=>yt.forwardRef(function(t,i){return W3(t,i,d4)}))(),m4=K3,g4=r4,y4=t4,v4=l4,_4=f4;/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function a2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Kt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?a2(Object(i),!0).forEach(function(a){b4(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function x4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function w4(e,t,i){return t&&l2(e.prototype,t),i&&l2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function b4(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b1(e,t){return E4(e)||C4(e,t)||sC(e,t)||A4()}function Mg(e){return S4(e)||T4(e)||sC(e)||I4()}function S4(e){if(Array.isArray(e))return Ov(e)}function E4(e){if(Array.isArray(e))return e}function T4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function C4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,d=!1,g,l;try{for(i=i.call(e);!(c=(g=i.next()).done)&&(a.push(g.value),!(t&&a.length===t));c=!0);}catch(b){d=!0,l=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(d)throw l}}return a}}function sC(e,t){if(e){if(typeof e=="string")return Ov(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ov(e,t)}}function Ov(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function I4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u2=function(){},S1={},aC={},lC=null,uC={mark:u2,measure:u2};try{typeof window<"u"&&(S1=window),typeof document<"u"&&(aC=document),typeof MutationObserver<"u"&&(lC=MutationObserver),typeof performance<"u"&&(uC=performance)}catch{}var P4=S1.navigator||{},c2=P4.userAgent,h2=c2===void 0?"":c2,eu=S1,_r=aC,f2=lC,zp=uC;eu.document;var Qa=!!_r.documentElement&&!!_r.head&&typeof _r.addEventListener=="function"&&typeof _r.createElement=="function",cC=~h2.indexOf("MSIE")||~h2.indexOf("Trident/"),Xa="___FONT_AWESOME___",Rv=16,hC="fa",fC="svg-inline--fa",Yu="data-fa-i2svg",jv="data-fa-pseudo-element",k4="data-fa-pseudo-element-pending",E1="data-prefix",T1="data-icon",d2="fontawesome-i2svg",M4="async",z4=["HTML","HEAD","STYLE","SCRIPT"],dC=function(){try{return!0}catch{return!1}}(),C1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Dm={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},pC={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},L4={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},F4=/fa[srltdbk\-\ ]/,mC="fa-layers-text",O4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,R4={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},gC=[1,2,3,4,5,6,7,8,9,10],j4=gC.concat([11,12,13,14,15,16,17,18,19,20]),D4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Vu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},B4=[].concat(Mg(Object.keys(Dm)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Vu.GROUP,Vu.SWAP_OPACITY,Vu.PRIMARY,Vu.SECONDARY]).concat(gC.map(function(e){return"".concat(e,"x")})).concat(j4.map(function(e){return"w-".concat(e)})),yC=eu.FontAwesomeConfig||{};function N4(e){var t=_r.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function U4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(_r&&typeof _r.querySelector=="function"){var $4=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];$4.forEach(function(e){var t=b1(e,2),i=t[0],a=t[1],c=U4(N4(i));c!=null&&(yC[a]=c)})}var V4={familyPrefix:hC,styleDefault:"solid",replacementClass:fC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Xf=Kt(Kt({},V4),yC);Xf.autoReplaceSvg||(Xf.observeMutations=!1);var mn={};Object.keys(Xf).forEach(function(e){Object.defineProperty(mn,e,{enumerable:!0,set:function(i){Xf[e]=i,nm.forEach(function(a){return a(mn)})},get:function(){return Xf[e]}})});eu.FontAwesomeConfig=mn;var nm=[];function G4(e){return nm.push(e),function(){nm.splice(nm.indexOf(e),1)}}var Ll=Rv,aa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Z4(e){if(!(!e||!Qa)){var t=_r.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=_r.head.childNodes,a=null,c=i.length-1;c>-1;c--){var d=i[c],g=(d.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(g)>-1&&(a=d)}return _r.head.insertBefore(t,a),e}}var H4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function vd(){for(var e=12,t="";e-- >0;)t+=H4[Math.random()*62|0];return t}function Ih(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function I1(e){return e.classList?Ih(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function vC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function W4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(vC(e[i]),'" ')},"").trim()}function zg(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function A1(e){return e.size!==aa.size||e.x!==aa.x||e.y!==aa.y||e.rotate!==aa.rotate||e.flipX||e.flipY}function X4(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(t.x*32,", ").concat(t.y*32,") "),g="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(d," ").concat(g," ").concat(l)},w={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:w}}function q4(e){var t=e.transform,i=e.width,a=i===void 0?Rv:i,c=e.height,d=c===void 0?Rv:c,g=e.startCentered,l=g===void 0?!1:g,b="";return l&&cC?b+="translate(".concat(t.x/Ll-a/2,"em, ").concat(t.y/Ll-d/2,"em) "):l?b+="translate(calc(-50% + ".concat(t.x/Ll,"em), calc(-50% + ").concat(t.y/Ll,"em)) "):b+="translate(".concat(t.x/Ll,"em, ").concat(t.y/Ll,"em) "),b+="scale(".concat(t.size/Ll*(t.flipX?-1:1),", ").concat(t.size/Ll*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var K4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function _C(){var e=hC,t=fC,i=mn.familyPrefix,a=mn.replacementClass,c=K4;if(i!==e||a!==t){var d=new RegExp("\\.".concat(e,"\\-"),"g"),g=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");c=c.replace(d,".".concat(i,"-")).replace(g,"--".concat(i,"-")).replace(l,".".concat(a))}return c}var p2=!1;function h0(){mn.autoAddCss&&!p2&&(Z4(_C()),p2=!0)}var Y4={mixout:function(){return{dom:{css:_C,insertCss:h0}}},hooks:function(){return{beforeDOMElementCreation:function(){h0()},beforeI2svg:function(){h0()}}}},qa=eu||{};qa[Xa]||(qa[Xa]={});qa[Xa].styles||(qa[Xa].styles={});qa[Xa].hooks||(qa[Xa].hooks={});qa[Xa].shims||(qa[Xa].shims=[]);var Fs=qa[Xa],xC=[],J4=function e(){_r.removeEventListener("DOMContentLoaded",e),Bm=1,xC.map(function(t){return t()})},Bm=!1;Qa&&(Bm=(_r.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(_r.readyState),Bm||_r.addEventListener("DOMContentLoaded",J4));function Q4(e){Qa&&(Bm?setTimeout(e,0):xC.push(e))}function kd(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,d=c===void 0?[]:c;return typeof e=="string"?vC(e):"<".concat(t," ").concat(W4(a),">").concat(d.map(kd).join(""),"</").concat(t,">")}function m2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var e5=function(t,i){return function(a,c,d,g){return t.call(i,a,c,d,g)}},f0=function(t,i,a,c){var d=Object.keys(t),g=d.length,l=c!==void 0?e5(i,c):i,b,w,A;for(a===void 0?(b=1,A=t[d[0]]):(b=0,A=a);b<g;b++)w=d[b],A=l(A,t[w],w,t);return A};function t5(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var d=e.charCodeAt(i++);(d&64512)==56320?t.push(((c&1023)<<10)+(d&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function Dv(e){var t=t5(e);return t.length===1?t[0].toString(16):null}function n5(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function g2(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function Bv(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,d=g2(t);typeof Fs.hooks.addPack=="function"&&!c?Fs.hooks.addPack(e,g2(t)):Fs.styles[e]=Kt(Kt({},Fs.styles[e]||{}),d),e==="fas"&&Bv("fa",t)}var qf=Fs.styles,r5=Fs.shims,i5=Object.values(pC),P1=null,wC={},bC={},SC={},EC={},TC={},o5=Object.keys(C1);function s5(e){return~B4.indexOf(e)}function a5(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!s5(c)?c:null}var CC=function(){var t=function(d){return f0(qf,function(g,l,b){return g[b]=f0(l,d,{}),g},{})};wC=t(function(c,d,g){if(d[3]&&(c[d[3]]=g),d[2]){var l=d[2].filter(function(b){return typeof b=="number"});l.forEach(function(b){c[b.toString(16)]=g})}return c}),bC=t(function(c,d,g){if(c[g]=g,d[2]){var l=d[2].filter(function(b){return typeof b=="string"});l.forEach(function(b){c[b]=g})}return c}),TC=t(function(c,d,g){var l=d[2];return c[g]=g,l.forEach(function(b){c[b]=g}),c});var i="far"in qf||mn.autoFetchSvg,a=f0(r5,function(c,d){var g=d[0],l=d[1],b=d[2];return l==="far"&&!i&&(l="fas"),typeof g=="string"&&(c.names[g]={prefix:l,iconName:b}),typeof g=="number"&&(c.unicodes[g.toString(16)]={prefix:l,iconName:b}),c},{names:{},unicodes:{}});SC=a.names,EC=a.unicodes,P1=Lg(mn.styleDefault)};G4(function(e){P1=Lg(e.styleDefault)});CC();function k1(e,t){return(wC[e]||{})[t]}function l5(e,t){return(bC[e]||{})[t]}function Yc(e,t){return(TC[e]||{})[t]}function IC(e){return SC[e]||{prefix:null,iconName:null}}function u5(e){var t=EC[e],i=k1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function tu(){return P1}var M1=function(){return{prefix:null,iconName:null,rest:[]}};function Lg(e){var t=C1[e],i=Dm[e]||Dm[t],a=e in Fs.styles?e:null;return i||a||null}function Fg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,a=i===void 0?!1:i,c=null,d=e.reduce(function(g,l){var b=a5(mn.familyPrefix,l);if(qf[l]?(l=i5.includes(l)?L4[l]:l,c=l,g.prefix=l):o5.indexOf(l)>-1?(c=l,g.prefix=Lg(l)):b?g.iconName=b:l!==mn.replacementClass&&g.rest.push(l),!a&&g.prefix&&g.iconName){var w=c==="fa"?IC(g.iconName):{},A=Yc(g.prefix,g.iconName);w.prefix&&(c=null),g.iconName=w.iconName||A||g.iconName,g.prefix=w.prefix||g.prefix,g.prefix==="far"&&!qf.far&&qf.fas&&!mn.autoFetchSvg&&(g.prefix="fas")}return g},M1());return(d.prefix==="fa"||c==="fa")&&(d.prefix=tu()||"fas"),d}var c5=function(){function e(){x4(this,e),this.definitions={}}return w4(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];var g=c.reduce(this._pullDefinitions,{});Object.keys(g).forEach(function(l){i.definitions[l]=Kt(Kt({},i.definitions[l]||{}),g[l]),Bv(l,g[l]);var b=pC[l];b&&Bv(b,g[l]),CC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(d){var g=c[d],l=g.prefix,b=g.iconName,w=g.icon,A=w[2];i[l]||(i[l]={}),A.length>0&&A.forEach(function(C){typeof C=="string"&&(i[l][C]=w)}),i[l][b]=w}),i}}]),e}(),y2=[],Jc={},lh={},h5=Object.keys(lh);function f5(e,t){var i=t.mixoutsTo;return y2=e,Jc={},Object.keys(lh).forEach(function(a){h5.indexOf(a)===-1&&delete lh[a]}),y2.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(g){typeof c[g]=="function"&&(i[g]=c[g]),jm(c[g])==="object"&&Object.keys(c[g]).forEach(function(l){i[g]||(i[g]={}),i[g][l]=c[g][l]})}),a.hooks){var d=a.hooks();Object.keys(d).forEach(function(g){Jc[g]||(Jc[g]=[]),Jc[g].push(d[g])})}a.provides&&a.provides(lh)}),i}function Nv(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var d=Jc[e]||[];return d.forEach(function(g){t=g.apply(null,[t].concat(a))}),t}function Ju(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=Jc[e]||[];c.forEach(function(d){d.apply(null,i)})}function Ka(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return lh[e]?lh[e].apply(null,t):void 0}function Uv(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||tu();if(t)return t=Yc(i,t)||t,m2(AC.definitions,i,t)||m2(Fs.styles,i,t)}var AC=new c5,d5=function(){mn.autoReplaceSvg=!1,mn.observeMutations=!1,Ju("noAuto")},p5={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qa?(Ju("beforeI2svg",t),Ka("pseudoElements2svg",t),Ka("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;mn.autoReplaceSvg===!1&&(mn.autoReplaceSvg=!0),mn.observeMutations=!0,Q4(function(){g5({autoReplaceSvgRoot:i}),Ju("watch",t)})}},m5={icon:function(t){if(t===null)return null;if(jm(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Yc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=Lg(t[0]);return{prefix:a,iconName:Yc(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(mn.familyPrefix,"-"))>-1||t.match(F4))){var c=Fg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||tu(),iconName:Yc(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var d=tu();return{prefix:d,iconName:Yc(d,t)||t}}}},$o={noAuto:d5,config:mn,dom:p5,parse:m5,library:AC,findIconDefinition:Uv,toHtml:kd},g5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?_r:i;(Object.keys(Fs.styles).length>0||mn.autoFetchSvg)&&Qa&&mn.autoReplaceSvg&&$o.dom.i2svg({node:a})};function Og(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return kd(a)})}}),Object.defineProperty(e,"node",{get:function(){if(Qa){var a=_r.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function y5(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,d=e.styles,g=e.transform;if(A1(g)&&i.found&&!a.found){var l=i.width,b=i.height,w={x:l/b/2,y:.5};c.style=zg(Kt(Kt({},d),{},{"transform-origin":"".concat(w.x+g.x/16,"em ").concat(w.y+g.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function v5(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,d=e.symbol,g=d===!0?"".concat(t,"-").concat(mn.familyPrefix,"-").concat(i):d;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Kt(Kt({},c),{},{id:g}),children:a}]}]}function z1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,d=e.iconName,g=e.transform,l=e.symbol,b=e.title,w=e.maskId,A=e.titleId,C=e.extra,M=e.watchable,R=M===void 0?!1:M,J=a.found?a:i,Y=J.width,de=J.height,G=c==="fak",$=[mn.replacementClass,d?"".concat(mn.familyPrefix,"-").concat(d):""].filter(function(H){return C.classes.indexOf(H)===-1}).filter(function(H){return H!==""||!!H}).concat(C.classes).join(" "),U={children:[],attributes:Kt(Kt({},C.attributes),{},{"data-prefix":c,"data-icon":d,class:$,role:C.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Y," ").concat(de)})},re=G&&!~C.classes.indexOf("fa-fw")?{width:"".concat(Y/de*16*.0625,"em")}:{};R&&(U.attributes[Yu]=""),b&&(U.children.push({tag:"title",attributes:{id:U.attributes["aria-labelledby"]||"title-".concat(A||vd())},children:[b]}),delete U.attributes.title);var Z=Kt(Kt({},U),{},{prefix:c,iconName:d,main:i,mask:a,maskId:w,transform:g,symbol:l,styles:Kt(Kt({},re),C.styles)}),N=a.found&&i.found?Ka("generateAbstractMask",Z)||{children:[],attributes:{}}:Ka("generateAbstractIcon",Z)||{children:[],attributes:{}},E=N.children,k=N.attributes;return Z.children=E,Z.attributes=k,l?v5(Z):y5(Z)}function v2(e){var t=e.content,i=e.width,a=e.height,c=e.transform,d=e.title,g=e.extra,l=e.watchable,b=l===void 0?!1:l,w=Kt(Kt(Kt({},g.attributes),d?{title:d}:{}),{},{class:g.classes.join(" ")});b&&(w[Yu]="");var A=Kt({},g.styles);A1(c)&&(A.transform=q4({transform:c,startCentered:!0,width:i,height:a}),A["-webkit-transform"]=A.transform);var C=zg(A);C.length>0&&(w.style=C);var M=[];return M.push({tag:"span",attributes:w,children:[t]}),d&&M.push({tag:"span",attributes:{class:"sr-only"},children:[d]}),M}function _5(e){var t=e.content,i=e.title,a=e.extra,c=Kt(Kt(Kt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),d=zg(a.styles);d.length>0&&(c.style=d);var g=[];return g.push({tag:"span",attributes:c,children:[t]}),i&&g.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),g}var d0=Fs.styles;function $v(e){var t=e[0],i=e[1],a=e.slice(4),c=b1(a,1),d=c[0],g=null;return Array.isArray(d)?g={tag:"g",attributes:{class:"".concat(mn.familyPrefix,"-").concat(Vu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(mn.familyPrefix,"-").concat(Vu.SECONDARY),fill:"currentColor",d:d[0]}},{tag:"path",attributes:{class:"".concat(mn.familyPrefix,"-").concat(Vu.PRIMARY),fill:"currentColor",d:d[1]}}]}:g={tag:"path",attributes:{fill:"currentColor",d}},{found:!0,width:t,height:i,icon:g}}var x5={found:!1,width:512,height:512};function w5(e,t){!dC&&!mn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function Vv(e,t){var i=t;return t==="fa"&&mn.styleDefault!==null&&(t=tu()),new Promise(function(a,c){if(Ka("missingIconAbstract"),i==="fa"){var d=IC(e)||{};e=d.iconName||e,t=d.prefix||t}if(e&&t&&d0[t]&&d0[t][e]){var g=d0[t][e];return a($v(g))}w5(e,t),a(Kt(Kt({},x5),{},{icon:mn.showMissingIcons&&e?Ka("missingIconAbstract")||{}:{}}))})}var _2=function(){},Gv=mn.measurePerformance&&zp&&zp.mark&&zp.measure?zp:{mark:_2,measure:_2},Mf='FA "6.0.0"',b5=function(t){return Gv.mark("".concat(Mf," ").concat(t," begins")),function(){return PC(t)}},PC=function(t){Gv.mark("".concat(Mf," ").concat(t," ends")),Gv.measure("".concat(Mf," ").concat(t),"".concat(Mf," ").concat(t," begins"),"".concat(Mf," ").concat(t," ends"))},L1={begin:b5,end:PC},rm=function(){};function x2(e){var t=e.getAttribute?e.getAttribute(Yu):null;return typeof t=="string"}function S5(e){var t=e.getAttribute?e.getAttribute(E1):null,i=e.getAttribute?e.getAttribute(T1):null;return t&&i}function E5(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(mn.replacementClass)}function T5(){if(mn.autoReplaceSvg===!0)return im.replace;var e=im[mn.autoReplaceSvg];return e||im.replace}function C5(e){return _r.createElementNS("http://www.w3.org/2000/svg",e)}function I5(e){return _r.createElement(e)}function kC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?C5:I5:i;if(typeof e=="string")return _r.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(g){c.setAttribute(g,e.attributes[g])});var d=e.children||[];return d.forEach(function(g){c.appendChild(kC(g,{ceFn:a}))}),c}function A5(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var im={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(kC(c),i)}),i.getAttribute(Yu)===null&&mn.keepOriginalSource){var a=_r.createComment(A5(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~I1(i).indexOf(mn.replacementClass))return im.replace(t);var c=new RegExp("".concat(mn.familyPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var d=a[0].attributes.class.split(" ").reduce(function(l,b){return b===mn.replacementClass||b.match(c)?l.toSvg.push(b):l.toNode.push(b),l},{toNode:[],toSvg:[]});a[0].attributes.class=d.toSvg.join(" "),d.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",d.toNode.join(" "))}var g=a.map(function(l){return kd(l)}).join(`
`);i.setAttribute(Yu,""),i.innerHTML=g}};function w2(e){e()}function MC(e,t){var i=typeof t=="function"?t:rm;if(e.length===0)i();else{var a=w2;mn.mutateApproach===M4&&(a=eu.requestAnimationFrame||w2),a(function(){var c=T5(),d=L1.begin("mutate");e.map(c),d(),i()})}}var F1=!1;function zC(){F1=!0}function Zv(){F1=!1}var Nm=null;function b2(e){if(f2&&mn.observeMutations){var t=e.treeCallback,i=t===void 0?rm:t,a=e.nodeCallback,c=a===void 0?rm:a,d=e.pseudoElementsCallback,g=d===void 0?rm:d,l=e.observeMutationsRoot,b=l===void 0?_r:l;Nm=new f2(function(w){if(!F1){var A=tu();Ih(w).forEach(function(C){if(C.type==="childList"&&C.addedNodes.length>0&&!x2(C.addedNodes[0])&&(mn.searchPseudoElements&&g(C.target),i(C.target)),C.type==="attributes"&&C.target.parentNode&&mn.searchPseudoElements&&g(C.target.parentNode),C.type==="attributes"&&x2(C.target)&&~D4.indexOf(C.attributeName))if(C.attributeName==="class"&&S5(C.target)){var M=Fg(I1(C.target)),R=M.prefix,J=M.iconName;C.target.setAttribute(E1,R||A),J&&C.target.setAttribute(T1,J)}else E5(C.target)&&c(C.target)})}}),Qa&&Nm.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function P5(){Nm&&Nm.disconnect()}function k5(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var d=c.split(":"),g=d[0],l=d.slice(1);return g&&l.length>0&&(a[g]=l.join(":").trim()),a},{})),i}function M5(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=Fg(I1(e));return c.prefix||(c.prefix=tu()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||c.prefix&&a.length>0&&(c.iconName=l5(c.prefix,e.innerText)||k1(c.prefix,Dv(e.innerText))),c}function z5(e){var t=Ih(e.attributes).reduce(function(c,d){return c.name!=="class"&&c.name!=="style"&&(c[d.name]=d.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return mn.autoA11y&&(i?t["aria-labelledby"]="".concat(mn.replacementClass,"-title-").concat(a||vd()):(t["aria-hidden"]="true",t.focusable="false")),t}function L5(){return{iconName:null,title:null,titleId:null,prefix:null,transform:aa,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function S2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=M5(e),a=i.iconName,c=i.prefix,d=i.rest,g=z5(e),l=Nv("parseNodeAttributes",{},e),b=t.styleParser?k5(e):[];return Kt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:aa,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:d,styles:b,attributes:g}},l)}var F5=Fs.styles;function LC(e){var t=mn.autoReplaceSvg==="nest"?S2(e,{styleParser:!1}):S2(e);return~t.extra.classes.indexOf(mC)?Ka("generateLayersText",e,t):Ka("generateSvgReplacementMutation",e,t)}function E2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Qa)return Promise.resolve();var i=_r.documentElement.classList,a=function(C){return i.add("".concat(d2,"-").concat(C))},c=function(C){return i.remove("".concat(d2,"-").concat(C))},d=mn.autoFetchSvg?Object.keys(C1):Object.keys(F5),g=[".".concat(mC,":not([").concat(Yu,"])")].concat(d.map(function(A){return".".concat(A,":not([").concat(Yu,"])")})).join(", ");if(g.length===0)return Promise.resolve();var l=[];try{l=Ih(e.querySelectorAll(g))}catch{}if(l.length>0)a("pending"),c("complete");else return Promise.resolve();var b=L1.begin("onTree"),w=l.reduce(function(A,C){try{var M=LC(C);M&&A.push(M)}catch(R){dC||R.name==="MissingIcon"&&console.error(R)}return A},[]);return new Promise(function(A,C){Promise.all(w).then(function(M){MC(M,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),A()})}).catch(function(M){b(),C(M)})})}function O5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;LC(e).then(function(i){i&&MC([i],t)})}function R5(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:Uv(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:Uv(c||{})),e(a,Kt(Kt({},i),{},{mask:c}))}}var j5=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?aa:a,d=i.symbol,g=d===void 0?!1:d,l=i.mask,b=l===void 0?null:l,w=i.maskId,A=w===void 0?null:w,C=i.title,M=C===void 0?null:C,R=i.titleId,J=R===void 0?null:R,Y=i.classes,de=Y===void 0?[]:Y,G=i.attributes,$=G===void 0?{}:G,U=i.styles,re=U===void 0?{}:U;if(t){var Z=t.prefix,N=t.iconName,E=t.icon;return Og(Kt({type:"icon"},t),function(){return Ju("beforeDOMElementCreation",{iconDefinition:t,params:i}),mn.autoA11y&&(M?$["aria-labelledby"]="".concat(mn.replacementClass,"-title-").concat(J||vd()):($["aria-hidden"]="true",$.focusable="false")),z1({icons:{main:$v(E),mask:b?$v(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:Z,iconName:N,transform:Kt(Kt({},aa),c),symbol:g,title:M,maskId:A,titleId:J,extra:{attributes:$,styles:re,classes:de}})})}},D5={mixout:function(){return{icon:R5(j5)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=E2,i.nodeCallback=O5,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?_r:a,d=i.callback,g=d===void 0?function(){}:d;return E2(c,g)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,d=a.title,g=a.titleId,l=a.prefix,b=a.transform,w=a.symbol,A=a.mask,C=a.maskId,M=a.extra;return new Promise(function(R,J){Promise.all([Vv(c,l),A.iconName?Vv(A.iconName,A.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Y){var de=b1(Y,2),G=de[0],$=de[1];R([i,z1({icons:{main:G,mask:$},prefix:l,iconName:c,transform:b,symbol:w,maskId:C,title:d,titleId:g,extra:M,watchable:!0})])}).catch(J)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,d=i.main,g=i.transform,l=i.styles,b=zg(l);b.length>0&&(c.style=b);var w;return A1(g)&&(w=Ka("generateAbstractTransformGrouping",{main:d,transform:g,containerWidth:d.width,iconWidth:d.width})),a.push(w||d.icon),{children:a,attributes:c}}}},B5={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,d=c===void 0?[]:c;return Og({type:"layer"},function(){Ju("beforeDOMElementCreation",{assembler:i,params:a});var g=[];return i(function(l){Array.isArray(l)?l.map(function(b){g=g.concat(b.abstract)}):g=g.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(mn.familyPrefix,"-layers")].concat(Mg(d)).join(" ")},children:g}]})}}}},N5={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,d=c===void 0?null:c,g=a.classes,l=g===void 0?[]:g,b=a.attributes,w=b===void 0?{}:b,A=a.styles,C=A===void 0?{}:A;return Og({type:"counter",content:i},function(){return Ju("beforeDOMElementCreation",{content:i,params:a}),_5({content:i.toString(),title:d,extra:{attributes:w,styles:C,classes:["".concat(mn.familyPrefix,"-layers-counter")].concat(Mg(l))}})})}}}},U5={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,d=c===void 0?aa:c,g=a.title,l=g===void 0?null:g,b=a.classes,w=b===void 0?[]:b,A=a.attributes,C=A===void 0?{}:A,M=a.styles,R=M===void 0?{}:M;return Og({type:"text",content:i},function(){return Ju("beforeDOMElementCreation",{content:i,params:a}),v2({content:i,transform:Kt(Kt({},aa),d),title:l,extra:{attributes:C,styles:R,classes:["".concat(mn.familyPrefix,"-layers-text")].concat(Mg(w))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,d=a.transform,g=a.extra,l=null,b=null;if(cC){var w=parseInt(getComputedStyle(i).fontSize,10),A=i.getBoundingClientRect();l=A.width/w,b=A.height/w}return mn.autoA11y&&!c&&(g.attributes["aria-hidden"]="true"),Promise.resolve([i,v2({content:i.innerHTML,width:l,height:b,transform:d,title:c,extra:g,watchable:!0})])}}},$5=new RegExp('"',"ug"),T2=[1105920,1112319];function V5(e){var t=e.replace($5,""),i=n5(t,0),a=i>=T2[0]&&i<=T2[1],c=t.length===2?t[0]===t[1]:!1;return{value:Dv(c?t[0]:t),isSecondary:a||c}}function C2(e,t){var i="".concat(k4).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var d=Ih(e.children),g=d.filter(function(N){return N.getAttribute(jv)===t})[0],l=eu.getComputedStyle(e,t),b=l.getPropertyValue("font-family").match(O4),w=l.getPropertyValue("font-weight"),A=l.getPropertyValue("content");if(g&&!b)return e.removeChild(g),a();if(b&&A!=="none"&&A!==""){var C=l.getPropertyValue("content"),M=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Dm[b[2].toLowerCase()]:R4[w],R=V5(C),J=R.value,Y=R.isSecondary,de=b[0].startsWith("FontAwesome"),G=k1(M,J),$=G;if(de){var U=u5(J);U.iconName&&U.prefix&&(G=U.iconName,M=U.prefix)}if(G&&!Y&&(!g||g.getAttribute(E1)!==M||g.getAttribute(T1)!==$)){e.setAttribute(i,$),g&&e.removeChild(g);var re=L5(),Z=re.extra;Z.attributes[jv]=t,Vv(G,M).then(function(N){var E=z1(Kt(Kt({},re),{},{icons:{main:N,mask:M1()},prefix:M,iconName:$,extra:Z,watchable:!0})),k=_r.createElement("svg");t==="::before"?e.insertBefore(k,e.firstChild):e.appendChild(k),k.outerHTML=E.map(function(H){return kd(H)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function G5(e){return Promise.all([C2(e,"::before"),C2(e,"::after")])}function Z5(e){return e.parentNode!==document.head&&!~z4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(jv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function I2(e){if(Qa)return new Promise(function(t,i){var a=Ih(e.querySelectorAll("*")).filter(Z5).map(G5),c=L1.begin("searchPseudoElements");zC(),Promise.all(a).then(function(){c(),Zv(),t()}).catch(function(){c(),Zv(),i()})})}var H5={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=I2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?_r:a;mn.searchPseudoElements&&I2(c)}}},A2=!1,W5={mixout:function(){return{dom:{unwatch:function(){zC(),A2=!0}}}},hooks:function(){return{bootstrap:function(){b2(Nv("mutationObserverCallbacks",{}))},noAuto:function(){P5()},watch:function(i){var a=i.observeMutationsRoot;A2?Zv():b2(Nv("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},P2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var d=c.toLowerCase().split("-"),g=d[0],l=d.slice(1).join("-");if(g&&l==="h")return a.flipX=!0,a;if(g&&l==="v")return a.flipY=!0,a;if(l=parseFloat(l),isNaN(l))return a;switch(g){case"grow":a.size=a.size+l;break;case"shrink":a.size=a.size-l;break;case"left":a.x=a.x-l;break;case"right":a.x=a.x+l;break;case"up":a.y=a.y-l;break;case"down":a.y=a.y+l;break;case"rotate":a.rotate=a.rotate+l;break}return a},i)},X5={mixout:function(){return{parse:{transform:function(i){return P2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=P2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,d=i.containerWidth,g=i.iconWidth,l={transform:"translate(".concat(d/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),A="rotate(".concat(c.rotate," 0 0)"),C={transform:"".concat(b," ").concat(w," ").concat(A)},M={transform:"translate(".concat(g/2*-1," -256)")},R={outer:l,inner:C,path:M};return{tag:"g",attributes:Kt({},R.outer),children:[{tag:"g",attributes:Kt({},R.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Kt(Kt({},a.icon.attributes),R.path)}]}]}}}},p0={x:0,y:0,width:"100%",height:"100%"};function k2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function q5(e){return e.tag==="g"?e.children:[e]}var K5={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),d=c?Fg(c.split(" ").map(function(g){return g.trim()})):M1();return d.prefix||(d.prefix=tu()),i.mask=d,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,d=i.main,g=i.mask,l=i.maskId,b=i.transform,w=d.width,A=d.icon,C=g.width,M=g.icon,R=X4({transform:b,containerWidth:C,iconWidth:w}),J={tag:"rect",attributes:Kt(Kt({},p0),{},{fill:"white"})},Y=A.children?{children:A.children.map(k2)}:{},de={tag:"g",attributes:Kt({},R.inner),children:[k2(Kt({tag:A.tag,attributes:Kt(Kt({},A.attributes),R.path)},Y))]},G={tag:"g",attributes:Kt({},R.outer),children:[de]},$="mask-".concat(l||vd()),U="clip-".concat(l||vd()),re={tag:"mask",attributes:Kt(Kt({},p0),{},{id:$,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[J,G]},Z={tag:"defs",children:[{tag:"clipPath",attributes:{id:U},children:q5(M)},re]};return a.push(Z,{tag:"rect",attributes:Kt({fill:"currentColor","clip-path":"url(#".concat(U,")"),mask:"url(#".concat($,")")},p0)}),{children:a,attributes:c}}}},Y5={provides:function(t){var i=!1;eu.matchMedia&&(i=eu.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},d={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Kt(Kt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var g=Kt(Kt({},d),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Kt(Kt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||l.children.push({tag:"animate",attributes:Kt(Kt({},d),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Kt(Kt({},g),{},{values:"1;0;1;1;0;1;"})}),a.push(l),a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Kt(Kt({},g),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Kt(Kt({},g),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},J5={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),d=c===null?!1:c===""?!0:c;return i.symbol=d,i}}}},Q5=[Y4,D5,B5,N5,U5,H5,W5,X5,K5,Y5,J5];f5(Q5,{mixoutsTo:$o});$o.noAuto;$o.config;$o.library;$o.dom;var Hv=$o.parse;$o.findIconDefinition;$o.toHtml;var ez=$o.icon;$o.layer;$o.text;$o.counter;var FC={exports:{}},tz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nz=tz,rz=nz;function OC(){}function RC(){}RC.resetWarningCache=OC;var iz=function(){function e(a,c,d,g,l,b){if(b!==rz){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:RC,resetWarningCache:OC};return i.PropTypes=i,i};FC.exports=iz();var oz=FC.exports;const Xn=Sd(oz);function M2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Vl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?M2(Object(i),!0).forEach(function(a){Qc(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function Qc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function sz(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,d;for(d=0;d<a.length;d++)c=a[d],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function jC(e,t){if(e==null)return{};var i=sz(e,t),a,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)a=d[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Wv(e){return az(e)||lz(e)||uz(e)||cz()}function az(e){if(Array.isArray(e))return Xv(e)}function lz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uz(e,t){if(e){if(typeof e=="string")return Xv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xv(e,t)}}function Xv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function cz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hz(e){var t,i=e.beat,a=e.fade,c=e.flash,d=e.spin,g=e.spinPulse,l=e.spinReverse,b=e.pulse,w=e.fixedWidth,A=e.inverse,C=e.border,M=e.listItem,R=e.flip,J=e.size,Y=e.rotation,de=e.pull,G=(t={"fa-beat":i,"fa-fade":a,"fa-flash":c,"fa-spin":d,"fa-spin-reverse":l,"fa-spin-pulse":g,"fa-pulse":b,"fa-fw":w,"fa-inverse":A,"fa-border":C,"fa-li":M,"fa-flip-horizontal":R==="horizontal"||R==="both","fa-flip-vertical":R==="vertical"||R==="both"},Qc(t,"fa-".concat(J),typeof J<"u"&&J!==null),Qc(t,"fa-rotate-".concat(Y),typeof Y<"u"&&Y!==null&&Y!==0),Qc(t,"fa-pull-".concat(de),typeof de<"u"&&de!==null),Qc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(G).map(function($){return G[$]?$:null}).filter(function($){return $})}function fz(e){return e=e-0,e===e}function DC(e){return fz(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var dz=["style"];function pz(e){return e.charAt(0).toUpperCase()+e.slice(1)}function mz(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=DC(i.slice(0,a)),d=i.slice(a+1).trim();return c.startsWith("webkit")?t[pz(c)]=d:t[c]=d,t},{})}function BC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return BC(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,w){var A=t.attributes[w];switch(w){case"class":b.attrs.className=A,delete t.attributes.class;break;case"style":b.attrs.style=mz(A);break;default:w.indexOf("aria-")===0||w.indexOf("data-")===0?b.attrs[w.toLowerCase()]=A:b.attrs[DC(w)]=A}return b},{attrs:{}}),d=i.style,g=d===void 0?{}:d,l=jC(i,dz);return c.attrs.style=Vl(Vl({},c.attrs.style),g),e.apply(void 0,[t.tag,Vl(Vl({},c.attrs),l)].concat(Wv(a)))}var NC=!1;try{NC=!0}catch{}function gz(){if(!NC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function z2(e){if(e&&Um(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(Hv.icon)return Hv.icon(e);if(e===null)return null;if(e&&Um(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function m0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Qc({},e,t):{}}var yz=["forwardedRef"];function ca(e){var t=e.forwardedRef,i=jC(e,yz),a=i.icon,c=i.mask,d=i.symbol,g=i.className,l=i.title,b=i.titleId,w=z2(a),A=m0("classes",[].concat(Wv(hz(i)),Wv(g.split(" ")))),C=m0("transform",typeof i.transform=="string"?Hv.transform(i.transform):i.transform),M=m0("mask",z2(c)),R=ez(w,Vl(Vl(Vl(Vl({},A),C),M),{},{symbol:d,title:l,titleId:b}));if(!R)return gz("Could not find icon",w),null;var J=R.abstract,Y={ref:t};return Object.keys(i).forEach(function(de){ca.defaultProps.hasOwnProperty(de)||(Y[de]=i[de])}),vz(J[0],Y)}ca.displayName="FontAwesomeIcon";ca.propTypes={beat:Xn.bool,border:Xn.bool,className:Xn.string,fade:Xn.bool,flash:Xn.bool,mask:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),fixedWidth:Xn.bool,inverse:Xn.bool,flip:Xn.oneOf(["horizontal","vertical","both"]),icon:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),listItem:Xn.bool,pull:Xn.oneOf(["right","left"]),pulse:Xn.bool,rotation:Xn.oneOf([0,90,180,270]),size:Xn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Xn.bool,spinPulse:Xn.bool,spinReverse:Xn.bool,symbol:Xn.oneOfType([Xn.bool,Xn.string]),title:Xn.string,transform:Xn.oneOfType([Xn.string,Xn.object]),swapOpacity:Xn.bool};ca.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var vz=BC.bind(null,YS.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var _z={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},xz=_z,qv={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},wz={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function Lp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var UC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,d){function g(w,A){if(!c[w]){if(!a[w]){var C=typeof Lp=="function"&&Lp;if(!A&&C)return C(w,!0);if(l)return l(w,!0);var M=new Error("Cannot find module '"+w+"'");throw M.code="MODULE_NOT_FOUND",M}var R=c[w]={exports:{}};a[w][0].call(R.exports,function(J){var Y=a[w][1][J];return g(Y||J)},R,R.exports,i,a,c,d)}return c[w].exports}for(var l=typeof Lp=="function"&&Lp,b=0;b<d.length;b++)g(d[b]);return g}return i}()({1:[function(i,a,c){c.byteLength=M,c.toByteArray=J,c.fromByteArray=G;for(var d=[],g=[],l=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,A=b.length;w<A;++w)d[w]=b[w],g[b.charCodeAt(w)]=w;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63;function C($){var U=$.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var re=$.indexOf("=");re===-1&&(re=U);var Z=re===U?0:4-re%4;return[re,Z]}function M($){var U=C($),re=U[0],Z=U[1];return(re+Z)*3/4-Z}function R($,U,re){return(U+re)*3/4-re}function J($){var U,re=C($),Z=re[0],N=re[1],E=new l(R($,Z,N)),k=0,H=N>0?Z-4:Z,q;for(q=0;q<H;q+=4)U=g[$.charCodeAt(q)]<<18|g[$.charCodeAt(q+1)]<<12|g[$.charCodeAt(q+2)]<<6|g[$.charCodeAt(q+3)],E[k++]=U>>16&255,E[k++]=U>>8&255,E[k++]=U&255;return N===2&&(U=g[$.charCodeAt(q)]<<2|g[$.charCodeAt(q+1)]>>4,E[k++]=U&255),N===1&&(U=g[$.charCodeAt(q)]<<10|g[$.charCodeAt(q+1)]<<4|g[$.charCodeAt(q+2)]>>2,E[k++]=U>>8&255,E[k++]=U&255),E}function Y($){return d[$>>18&63]+d[$>>12&63]+d[$>>6&63]+d[$&63]}function de($,U,re){for(var Z,N=[],E=U;E<re;E+=3)Z=($[E]<<16&16711680)+($[E+1]<<8&65280)+($[E+2]&255),N.push(Y(Z));return N.join("")}function G($){for(var U,re=$.length,Z=re%3,N=[],E=16383,k=0,H=re-Z;k<H;k+=E)N.push(de($,k,k+E>H?H:k+E));return Z===1?(U=$[re-1],N.push(d[U>>2]+d[U<<4&63]+"==")):Z===2&&(U=($[re-2]<<8)+$[re-1],N.push(d[U>>10]+d[U>>4&63]+d[U<<2&63]+"=")),N.join("")}},{}],2:[function(i,a,c){(function(d){(function(){var g=i("base64-js"),l=i("ieee754");c.Buffer=C,c.SlowBuffer=Z,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,C.TYPED_ARRAY_SUPPORT=w(),!C.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var se=new Uint8Array(1);return se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},se.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}});function A(se){if(se>b)throw new RangeError('The value "'+se+'" is invalid for option "size"');var j=new Uint8Array(se);return j.__proto__=C.prototype,j}function C(se,j,O){if(typeof se=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Y(se)}return M(se,j,O)}typeof Symbol<"u"&&Symbol.species!=null&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),C.poolSize=8192;function M(se,j,O){if(typeof se=="string")return de(se,j);if(ArrayBuffer.isView(se))return G(se);if(se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(on(se,ArrayBuffer)||se&&on(se.buffer,ArrayBuffer))return $(se,j,O);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=se.valueOf&&se.valueOf();if(pe!=null&&pe!==se)return C.from(pe,j,O);var Be=U(se);if(Be)return Be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return C.from(se[Symbol.toPrimitive]("string"),j,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}C.from=function(se,j,O){return M(se,j,O)},C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array;function R(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function J(se,j,O){return R(se),se<=0?A(se):j!==void 0?typeof O=="string"?A(se).fill(j,O):A(se).fill(j):A(se)}C.alloc=function(se,j,O){return J(se,j,O)};function Y(se){return R(se),A(se<0?0:re(se)|0)}C.allocUnsafe=function(se){return Y(se)},C.allocUnsafeSlow=function(se){return Y(se)};function de(se,j){if((typeof j!="string"||j==="")&&(j="utf8"),!C.isEncoding(j))throw new TypeError("Unknown encoding: "+j);var O=N(se,j)|0,pe=A(O),Be=pe.write(se,j);return Be!==O&&(pe=pe.slice(0,Be)),pe}function G(se){for(var j=se.length<0?0:re(se.length)|0,O=A(j),pe=0;pe<j;pe+=1)O[pe]=se[pe]&255;return O}function $(se,j,O){if(j<0||se.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<j+(O||0))throw new RangeError('"length" is outside of buffer bounds');var pe;return j===void 0&&O===void 0?pe=new Uint8Array(se):O===void 0?pe=new Uint8Array(se,j):pe=new Uint8Array(se,j,O),pe.__proto__=C.prototype,pe}function U(se){if(C.isBuffer(se)){var j=re(se.length)|0,O=A(j);return O.length===0||se.copy(O,0,0,j),O}if(se.length!==void 0)return typeof se.length!="number"||gn(se.length)?A(0):G(se);if(se.type==="Buffer"&&Array.isArray(se.data))return G(se.data)}function re(se){if(se>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return se|0}function Z(se){return+se!=se&&(se=0),C.alloc(+se)}C.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==C.prototype},C.compare=function(j,O){if(on(j,Uint8Array)&&(j=C.from(j,j.offset,j.byteLength)),on(O,Uint8Array)&&(O=C.from(O,O.offset,O.byteLength)),!C.isBuffer(j)||!C.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===O)return 0;for(var pe=j.length,Be=O.length,et=0,lt=Math.min(pe,Be);et<lt;++et)if(j[et]!==O[et]){pe=j[et],Be=O[et];break}return pe<Be?-1:Be<pe?1:0},C.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(j,O){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return C.alloc(0);var pe;if(O===void 0)for(O=0,pe=0;pe<j.length;++pe)O+=j[pe].length;var Be=C.allocUnsafe(O),et=0;for(pe=0;pe<j.length;++pe){var lt=j[pe];if(on(lt,Uint8Array)&&(lt=C.from(lt)),!C.isBuffer(lt))throw new TypeError('"list" argument must be an Array of Buffers');lt.copy(Be,et),et+=lt.length}return Be};function N(se,j){if(C.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||on(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);var O=se.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&O===0)return 0;for(var Be=!1;;)switch(j){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Gt(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return xn(se).length;default:if(Be)return pe?-1:Gt(se).length;j=(""+j).toLowerCase(),Be=!0}}C.byteLength=N;function E(se,j,O){var pe=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,j>>>=0,O<=j))return"";for(se||(se="utf8");;)switch(se){case"hex":return Pe(this,j,O);case"utf8":case"utf-8":return ie(this,j,O);case"ascii":return Se(this,j,O);case"latin1":case"binary":return $e(this,j,O);case"base64":return ne(this,j,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,j,O);default:if(pe)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),pe=!0}}C.prototype._isBuffer=!0;function k(se,j,O){var pe=se[j];se[j]=se[O],se[O]=pe}C.prototype.swap16=function(){var j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<j;O+=2)k(this,O,O+1);return this},C.prototype.swap32=function(){var j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<j;O+=4)k(this,O,O+3),k(this,O+1,O+2);return this},C.prototype.swap64=function(){var j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<j;O+=8)k(this,O,O+7),k(this,O+1,O+6),k(this,O+2,O+5),k(this,O+3,O+4);return this},C.prototype.toString=function(){var j=this.length;return j===0?"":arguments.length===0?ie(this,0,j):E.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(j){if(!C.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:C.compare(this,j)===0},C.prototype.inspect=function(){var j="",O=c.INSPECT_MAX_BYTES;return j=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(j+=" ... "),"<Buffer "+j+">"},C.prototype.compare=function(j,O,pe,Be,et){if(on(j,Uint8Array)&&(j=C.from(j,j.offset,j.byteLength)),!C.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(O===void 0&&(O=0),pe===void 0&&(pe=j?j.length:0),Be===void 0&&(Be=0),et===void 0&&(et=this.length),O<0||pe>j.length||Be<0||et>this.length)throw new RangeError("out of range index");if(Be>=et&&O>=pe)return 0;if(Be>=et)return-1;if(O>=pe)return 1;if(O>>>=0,pe>>>=0,Be>>>=0,et>>>=0,this===j)return 0;for(var lt=et-Be,le=pe-O,L=Math.min(lt,le),D=this.slice(Be,et),Ee=j.slice(O,pe),Ge=0;Ge<L;++Ge)if(D[Ge]!==Ee[Ge]){lt=D[Ge],le=Ee[Ge];break}return lt<le?-1:le<lt?1:0};function H(se,j,O,pe,Be){if(se.length===0)return-1;if(typeof O=="string"?(pe=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,gn(O)&&(O=Be?0:se.length-1),O<0&&(O=se.length+O),O>=se.length){if(Be)return-1;O=se.length-1}else if(O<0)if(Be)O=0;else return-1;if(typeof j=="string"&&(j=C.from(j,pe)),C.isBuffer(j))return j.length===0?-1:q(se,j,O,pe,Be);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?Be?Uint8Array.prototype.indexOf.call(se,j,O):Uint8Array.prototype.lastIndexOf.call(se,j,O):q(se,[j],O,pe,Be);throw new TypeError("val must be string, number or Buffer")}function q(se,j,O,pe,Be){var et=1,lt=se.length,le=j.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(se.length<2||j.length<2)return-1;et=2,lt/=2,le/=2,O/=2}function L(at,jt){return et===1?at[jt]:at.readUInt16BE(jt*et)}var D;if(Be){var Ee=-1;for(D=O;D<lt;D++)if(L(se,D)===L(j,Ee===-1?0:D-Ee)){if(Ee===-1&&(Ee=D),D-Ee+1===le)return Ee*et}else Ee!==-1&&(D-=D-Ee),Ee=-1}else for(O+le>lt&&(O=lt-le),D=O;D>=0;D--){for(var Ge=!0,je=0;je<le;je++)if(L(se,D+je)!==L(j,je)){Ge=!1;break}if(Ge)return D}return-1}C.prototype.includes=function(j,O,pe){return this.indexOf(j,O,pe)!==-1},C.prototype.indexOf=function(j,O,pe){return H(this,j,O,pe,!0)},C.prototype.lastIndexOf=function(j,O,pe){return H(this,j,O,pe,!1)};function ee(se,j,O,pe){O=Number(O)||0;var Be=se.length-O;pe?(pe=Number(pe),pe>Be&&(pe=Be)):pe=Be;var et=j.length;pe>et/2&&(pe=et/2);for(var lt=0;lt<pe;++lt){var le=parseInt(j.substr(lt*2,2),16);if(gn(le))return lt;se[O+lt]=le}return lt}function ve(se,j,O,pe){return yn(Gt(j,se.length-O),se,O,pe)}function xe(se,j,O,pe){return yn(Ut(j),se,O,pe)}function be(se,j,O,pe){return xe(se,j,O,pe)}function te(se,j,O,pe){return yn(xn(j),se,O,pe)}function ue(se,j,O,pe){return yn(un(j,se.length-O),se,O,pe)}C.prototype.write=function(j,O,pe,Be){if(O===void 0)Be="utf8",pe=this.length,O=0;else if(pe===void 0&&typeof O=="string")Be=O,pe=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(pe)?(pe=pe>>>0,Be===void 0&&(Be="utf8")):(Be=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var et=this.length-O;if((pe===void 0||pe>et)&&(pe=et),j.length>0&&(pe<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");Be||(Be="utf8");for(var lt=!1;;)switch(Be){case"hex":return ee(this,j,O,pe);case"utf8":case"utf-8":return ve(this,j,O,pe);case"ascii":return xe(this,j,O,pe);case"latin1":case"binary":return be(this,j,O,pe);case"base64":return te(this,j,O,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,j,O,pe);default:if(lt)throw new TypeError("Unknown encoding: "+Be);Be=(""+Be).toLowerCase(),lt=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(se,j,O){return j===0&&O===se.length?g.fromByteArray(se):g.fromByteArray(se.slice(j,O))}function ie(se,j,O){O=Math.min(se.length,O);for(var pe=[],Be=j;Be<O;){var et=se[Be],lt=null,le=et>239?4:et>223?3:et>191?2:1;if(Be+le<=O){var L,D,Ee,Ge;switch(le){case 1:et<128&&(lt=et);break;case 2:L=se[Be+1],(L&192)===128&&(Ge=(et&31)<<6|L&63,Ge>127&&(lt=Ge));break;case 3:L=se[Be+1],D=se[Be+2],(L&192)===128&&(D&192)===128&&(Ge=(et&15)<<12|(L&63)<<6|D&63,Ge>2047&&(Ge<55296||Ge>57343)&&(lt=Ge));break;case 4:L=se[Be+1],D=se[Be+2],Ee=se[Be+3],(L&192)===128&&(D&192)===128&&(Ee&192)===128&&(Ge=(et&15)<<18|(L&63)<<12|(D&63)<<6|Ee&63,Ge>65535&&Ge<1114112&&(lt=Ge))}}lt===null?(lt=65533,le=1):lt>65535&&(lt-=65536,pe.push(lt>>>10&1023|55296),lt=56320|lt&1023),pe.push(lt),Be+=le}return Te(pe)}var ye=4096;function Te(se){var j=se.length;if(j<=ye)return String.fromCharCode.apply(String,se);for(var O="",pe=0;pe<j;)O+=String.fromCharCode.apply(String,se.slice(pe,pe+=ye));return O}function Se(se,j,O){var pe="";O=Math.min(se.length,O);for(var Be=j;Be<O;++Be)pe+=String.fromCharCode(se[Be]&127);return pe}function $e(se,j,O){var pe="";O=Math.min(se.length,O);for(var Be=j;Be<O;++Be)pe+=String.fromCharCode(se[Be]);return pe}function Pe(se,j,O){var pe=se.length;(!j||j<0)&&(j=0),(!O||O<0||O>pe)&&(O=pe);for(var Be="",et=j;et<O;++et)Be+=St(se[et]);return Be}function Le(se,j,O){for(var pe=se.slice(j,O),Be="",et=0;et<pe.length;et+=2)Be+=String.fromCharCode(pe[et]+pe[et+1]*256);return Be}C.prototype.slice=function(j,O){var pe=this.length;j=~~j,O=O===void 0?pe:~~O,j<0?(j+=pe,j<0&&(j=0)):j>pe&&(j=pe),O<0?(O+=pe,O<0&&(O=0)):O>pe&&(O=pe),O<j&&(O=j);var Be=this.subarray(j,O);return Be.__proto__=C.prototype,Be};function Xe(se,j,O){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+j>O)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUIntLE=function(j,O,pe){j=j>>>0,O=O>>>0,pe||Xe(j,O,this.length);for(var Be=this[j],et=1,lt=0;++lt<O&&(et*=256);)Be+=this[j+lt]*et;return Be},C.prototype.readUIntBE=function(j,O,pe){j=j>>>0,O=O>>>0,pe||Xe(j,O,this.length);for(var Be=this[j+--O],et=1;O>0&&(et*=256);)Be+=this[j+--O]*et;return Be},C.prototype.readUInt8=function(j,O){return j=j>>>0,O||Xe(j,1,this.length),this[j]},C.prototype.readUInt16LE=function(j,O){return j=j>>>0,O||Xe(j,2,this.length),this[j]|this[j+1]<<8},C.prototype.readUInt16BE=function(j,O){return j=j>>>0,O||Xe(j,2,this.length),this[j]<<8|this[j+1]},C.prototype.readUInt32LE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},C.prototype.readUInt32BE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},C.prototype.readIntLE=function(j,O,pe){j=j>>>0,O=O>>>0,pe||Xe(j,O,this.length);for(var Be=this[j],et=1,lt=0;++lt<O&&(et*=256);)Be+=this[j+lt]*et;return et*=128,Be>=et&&(Be-=Math.pow(2,8*O)),Be},C.prototype.readIntBE=function(j,O,pe){j=j>>>0,O=O>>>0,pe||Xe(j,O,this.length);for(var Be=O,et=1,lt=this[j+--Be];Be>0&&(et*=256);)lt+=this[j+--Be]*et;return et*=128,lt>=et&&(lt-=Math.pow(2,8*O)),lt},C.prototype.readInt8=function(j,O){return j=j>>>0,O||Xe(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},C.prototype.readInt16LE=function(j,O){j=j>>>0,O||Xe(j,2,this.length);var pe=this[j]|this[j+1]<<8;return pe&32768?pe|4294901760:pe},C.prototype.readInt16BE=function(j,O){j=j>>>0,O||Xe(j,2,this.length);var pe=this[j+1]|this[j]<<8;return pe&32768?pe|4294901760:pe},C.prototype.readInt32LE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},C.prototype.readInt32BE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},C.prototype.readFloatLE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),l.read(this,j,!0,23,4)},C.prototype.readFloatBE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),l.read(this,j,!1,23,4)},C.prototype.readDoubleLE=function(j,O){return j=j>>>0,O||Xe(j,8,this.length),l.read(this,j,!0,52,8)},C.prototype.readDoubleBE=function(j,O){return j=j>>>0,O||Xe(j,8,this.length),l.read(this,j,!1,52,8)};function Ze(se,j,O,pe,Be,et){if(!C.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>Be||j<et)throw new RangeError('"value" argument is out of bounds');if(O+pe>se.length)throw new RangeError("Index out of range")}C.prototype.writeUIntLE=function(j,O,pe,Be){if(j=+j,O=O>>>0,pe=pe>>>0,!Be){var et=Math.pow(2,8*pe)-1;Ze(this,j,O,pe,et,0)}var lt=1,le=0;for(this[O]=j&255;++le<pe&&(lt*=256);)this[O+le]=j/lt&255;return O+pe},C.prototype.writeUIntBE=function(j,O,pe,Be){if(j=+j,O=O>>>0,pe=pe>>>0,!Be){var et=Math.pow(2,8*pe)-1;Ze(this,j,O,pe,et,0)}var lt=pe-1,le=1;for(this[O+lt]=j&255;--lt>=0&&(le*=256);)this[O+lt]=j/le&255;return O+pe},C.prototype.writeUInt8=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,1,255,0),this[O]=j&255,O+1},C.prototype.writeUInt16LE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,2,65535,0),this[O]=j&255,this[O+1]=j>>>8,O+2},C.prototype.writeUInt16BE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,2,65535,0),this[O]=j>>>8,this[O+1]=j&255,O+2},C.prototype.writeUInt32LE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,4,4294967295,0),this[O+3]=j>>>24,this[O+2]=j>>>16,this[O+1]=j>>>8,this[O]=j&255,O+4},C.prototype.writeUInt32BE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,4,4294967295,0),this[O]=j>>>24,this[O+1]=j>>>16,this[O+2]=j>>>8,this[O+3]=j&255,O+4},C.prototype.writeIntLE=function(j,O,pe,Be){if(j=+j,O=O>>>0,!Be){var et=Math.pow(2,8*pe-1);Ze(this,j,O,pe,et-1,-et)}var lt=0,le=1,L=0;for(this[O]=j&255;++lt<pe&&(le*=256);)j<0&&L===0&&this[O+lt-1]!==0&&(L=1),this[O+lt]=(j/le>>0)-L&255;return O+pe},C.prototype.writeIntBE=function(j,O,pe,Be){if(j=+j,O=O>>>0,!Be){var et=Math.pow(2,8*pe-1);Ze(this,j,O,pe,et-1,-et)}var lt=pe-1,le=1,L=0;for(this[O+lt]=j&255;--lt>=0&&(le*=256);)j<0&&L===0&&this[O+lt+1]!==0&&(L=1),this[O+lt]=(j/le>>0)-L&255;return O+pe},C.prototype.writeInt8=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,1,127,-128),j<0&&(j=255+j+1),this[O]=j&255,O+1},C.prototype.writeInt16LE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,2,32767,-32768),this[O]=j&255,this[O+1]=j>>>8,O+2},C.prototype.writeInt16BE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,2,32767,-32768),this[O]=j>>>8,this[O+1]=j&255,O+2},C.prototype.writeInt32LE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,4,2147483647,-2147483648),this[O]=j&255,this[O+1]=j>>>8,this[O+2]=j>>>16,this[O+3]=j>>>24,O+4},C.prototype.writeInt32BE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[O]=j>>>24,this[O+1]=j>>>16,this[O+2]=j>>>8,this[O+3]=j&255,O+4};function nt(se,j,O,pe,Be,et){if(O+pe>se.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ct(se,j,O,pe,Be){return j=+j,O=O>>>0,Be||nt(se,j,O,4),l.write(se,j,O,pe,23,4),O+4}C.prototype.writeFloatLE=function(j,O,pe){return ct(this,j,O,!0,pe)},C.prototype.writeFloatBE=function(j,O,pe){return ct(this,j,O,!1,pe)};function vt(se,j,O,pe,Be){return j=+j,O=O>>>0,Be||nt(se,j,O,8),l.write(se,j,O,pe,52,8),O+8}C.prototype.writeDoubleLE=function(j,O,pe){return vt(this,j,O,!0,pe)},C.prototype.writeDoubleBE=function(j,O,pe){return vt(this,j,O,!1,pe)},C.prototype.copy=function(j,O,pe,Be){if(!C.isBuffer(j))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Be&&Be!==0&&(Be=this.length),O>=j.length&&(O=j.length),O||(O=0),Be>0&&Be<pe&&(Be=pe),Be===pe||j.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Be<0)throw new RangeError("sourceEnd out of bounds");Be>this.length&&(Be=this.length),j.length-O<Be-pe&&(Be=j.length-O+pe);var et=Be-pe;if(this===j&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,pe,Be);else if(this===j&&pe<O&&O<Be)for(var lt=et-1;lt>=0;--lt)j[lt+O]=this[lt+pe];else Uint8Array.prototype.set.call(j,this.subarray(pe,Be),O);return et},C.prototype.fill=function(j,O,pe,Be){if(typeof j=="string"){if(typeof O=="string"?(Be=O,O=0,pe=this.length):typeof pe=="string"&&(Be=pe,pe=this.length),Be!==void 0&&typeof Be!="string")throw new TypeError("encoding must be a string");if(typeof Be=="string"&&!C.isEncoding(Be))throw new TypeError("Unknown encoding: "+Be);if(j.length===1){var et=j.charCodeAt(0);(Be==="utf8"&&et<128||Be==="latin1")&&(j=et)}}else typeof j=="number"&&(j=j&255);if(O<0||this.length<O||this.length<pe)throw new RangeError("Out of range index");if(pe<=O)return this;O=O>>>0,pe=pe===void 0?this.length:pe>>>0,j||(j=0);var lt;if(typeof j=="number")for(lt=O;lt<pe;++lt)this[lt]=j;else{var le=C.isBuffer(j)?j:C.from(j,Be),L=le.length;if(L===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(lt=0;lt<pe-O;++lt)this[lt+O]=le[lt%L]}return this};var It=/[^+/0-9A-Za-z-_]/g;function ft(se){if(se=se.split("=")[0],se=se.trim().replace(It,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function St(se){return se<16?"0"+se.toString(16):se.toString(16)}function Gt(se,j){j=j||1/0;for(var O,pe=se.length,Be=null,et=[],lt=0;lt<pe;++lt){if(O=se.charCodeAt(lt),O>55295&&O<57344){if(!Be){if(O>56319){(j-=3)>-1&&et.push(239,191,189);continue}else if(lt+1===pe){(j-=3)>-1&&et.push(239,191,189);continue}Be=O;continue}if(O<56320){(j-=3)>-1&&et.push(239,191,189),Be=O;continue}O=(Be-55296<<10|O-56320)+65536}else Be&&(j-=3)>-1&&et.push(239,191,189);if(Be=null,O<128){if((j-=1)<0)break;et.push(O)}else if(O<2048){if((j-=2)<0)break;et.push(O>>6|192,O&63|128)}else if(O<65536){if((j-=3)<0)break;et.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((j-=4)<0)break;et.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return et}function Ut(se){for(var j=[],O=0;O<se.length;++O)j.push(se.charCodeAt(O)&255);return j}function un(se,j){for(var O,pe,Be,et=[],lt=0;lt<se.length&&!((j-=2)<0);++lt)O=se.charCodeAt(lt),pe=O>>8,Be=O%256,et.push(Be),et.push(pe);return et}function xn(se){return g.toByteArray(ft(se))}function yn(se,j,O,pe){for(var Be=0;Be<pe&&!(Be+O>=j.length||Be>=se.length);++Be)j[Be+O]=se[Be];return Be}function on(se,j){return se instanceof j||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===j.name}function gn(se){return se!==se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const d=i("./validator"),g=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");a.exports={XMLParser:g,XMLValidator:d,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",g=d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+d+"]["+g+"]*",b=new RegExp("^"+l+"$"),w=function(C,M){const R=[];let J=M.exec(C);for(;J;){const Y=[];Y.startIndex=M.lastIndex-J[0].length;const de=J.length;for(let G=0;G<de;G++)Y.push(J[G]);R.push(Y),J=M.exec(C)}return R},A=function(C){const M=b.exec(C);return!(M===null||typeof M>"u")};c.isExist=function(C){return typeof C<"u"},c.isEmptyObject=function(C){return Object.keys(C).length===0},c.merge=function(C,M,R){if(M){const J=Object.keys(M),Y=J.length;for(let de=0;de<Y;de++)R==="strict"?C[J[de]]=[M[J[de]]]:C[J[de]]=M[J[de]]}},c.getValue=function(C){return c.isExist(C)?C:""},c.isName=A,c.getAllMatches=w,c.nameRegexp=l},{}],5:[function(i,a,c){const d=i("./util"),g={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(N,E){E=Object.assign({},g,E);const k=[];let H=!1,q=!1;N[0]==="\uFEFF"&&(N=N.substr(1));for(let ee=0;ee<N.length;ee++)if(N[ee]==="<"&&N[ee+1]==="?"){if(ee+=2,ee=b(N,ee),ee.err)return ee}else if(N[ee]==="<"){let ve=ee;if(ee++,N[ee]==="!"){ee=w(N,ee);continue}else{let xe=!1;N[ee]==="/"&&(xe=!0,ee++);let be="";for(;ee<N.length&&N[ee]!==">"&&N[ee]!==" "&&N[ee]!=="	"&&N[ee]!==`
`&&N[ee]!=="\r";ee++)be+=N[ee];if(be=be.trim(),be[be.length-1]==="/"&&(be=be.substring(0,be.length-1),ee--),!U(be)){let ne;return be.trim().length===0?ne="Invalid space after '<'.":ne="Tag '"+be+"' is an invalid name.",G("InvalidTag",ne,re(N,ee))}const te=M(N,ee);if(te===!1)return G("InvalidAttr","Attributes for '"+be+"' have open quote.",re(N,ee));let ue=te.value;if(ee=te.index,ue[ue.length-1]==="/"){const ne=ee-ue.length;ue=ue.substring(0,ue.length-1);const ie=J(ue,E);if(ie===!0)H=!0;else return G(ie.err.code,ie.err.msg,re(N,ne+ie.err.line))}else if(xe)if(te.tagClosed){if(ue.trim().length>0)return G("InvalidTag","Closing tag '"+be+"' can't have attributes or invalid starting.",re(N,ve));{const ne=k.pop();if(be!==ne.tagName){let ie=re(N,ne.tagStartPos);return G("InvalidTag","Expected closing tag '"+ne.tagName+"' (opened in line "+ie.line+", col "+ie.col+") instead of closing tag '"+be+"'.",re(N,ve))}k.length==0&&(q=!0)}}else return G("InvalidTag","Closing tag '"+be+"' doesn't have proper closing.",re(N,ee));else{const ne=J(ue,E);if(ne!==!0)return G(ne.err.code,ne.err.msg,re(N,ee-ue.length+ne.err.line));if(q===!0)return G("InvalidXml","Multiple possible root nodes found.",re(N,ee));E.unpairedTags.indexOf(be)!==-1||k.push({tagName:be,tagStartPos:ve}),H=!0}for(ee++;ee<N.length;ee++)if(N[ee]==="<")if(N[ee+1]==="!"){ee++,ee=w(N,ee);continue}else if(N[ee+1]==="?"){if(ee=b(N,++ee),ee.err)return ee}else break;else if(N[ee]==="&"){const ne=de(N,ee);if(ne==-1)return G("InvalidChar","char '&' is not expected.",re(N,ee));ee=ne}else if(q===!0&&!l(N[ee]))return G("InvalidXml","Extra text at the end",re(N,ee));N[ee]==="<"&&ee--}}else{if(l(N[ee]))continue;return G("InvalidChar","char '"+N[ee]+"' is not expected.",re(N,ee))}if(H){if(k.length==1)return G("InvalidTag","Unclosed tag '"+k[0].tagName+"'.",re(N,k[0].tagStartPos));if(k.length>0)return G("InvalidXml","Invalid '"+JSON.stringify(k.map(ee=>ee.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return G("InvalidXml","Start tag expected.",1);return!0};function l(N){return N===" "||N==="	"||N===`
`||N==="\r"}function b(N,E){const k=E;for(;E<N.length;E++)if(N[E]=="?"||N[E]==" "){const H=N.substr(k,E-k);if(E>5&&H==="xml")return G("InvalidXml","XML declaration allowed only at the start of the document.",re(N,E));if(N[E]=="?"&&N[E+1]==">"){E++;break}else continue}return E}function w(N,E){if(N.length>E+5&&N[E+1]==="-"&&N[E+2]==="-"){for(E+=3;E<N.length;E++)if(N[E]==="-"&&N[E+1]==="-"&&N[E+2]===">"){E+=2;break}}else if(N.length>E+8&&N[E+1]==="D"&&N[E+2]==="O"&&N[E+3]==="C"&&N[E+4]==="T"&&N[E+5]==="Y"&&N[E+6]==="P"&&N[E+7]==="E"){let k=1;for(E+=8;E<N.length;E++)if(N[E]==="<")k++;else if(N[E]===">"&&(k--,k===0))break}else if(N.length>E+9&&N[E+1]==="["&&N[E+2]==="C"&&N[E+3]==="D"&&N[E+4]==="A"&&N[E+5]==="T"&&N[E+6]==="A"&&N[E+7]==="["){for(E+=8;E<N.length;E++)if(N[E]==="]"&&N[E+1]==="]"&&N[E+2]===">"){E+=2;break}}return E}const A='"',C="'";function M(N,E){let k="",H="",q=!1;for(;E<N.length;E++){if(N[E]===A||N[E]===C)H===""?H=N[E]:H!==N[E]||(H="");else if(N[E]===">"&&H===""){q=!0;break}k+=N[E]}return H!==""?!1:{value:k,index:E,tagClosed:q}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function J(N,E){const k=d.getAllMatches(N,R),H={};for(let q=0;q<k.length;q++){if(k[q][1].length===0)return G("InvalidAttr","Attribute '"+k[q][2]+"' has no space in starting.",Z(k[q]));if(k[q][3]!==void 0&&k[q][4]===void 0)return G("InvalidAttr","Attribute '"+k[q][2]+"' is without value.",Z(k[q]));if(k[q][3]===void 0&&!E.allowBooleanAttributes)return G("InvalidAttr","boolean attribute '"+k[q][2]+"' is not allowed.",Z(k[q]));const ee=k[q][2];if(!$(ee))return G("InvalidAttr","Attribute '"+ee+"' is an invalid name.",Z(k[q]));if(!H.hasOwnProperty(ee))H[ee]=1;else return G("InvalidAttr","Attribute '"+ee+"' is repeated.",Z(k[q]))}return!0}function Y(N,E){let k=/\d/;for(N[E]==="x"&&(E++,k=/[\da-fA-F]/);E<N.length;E++){if(N[E]===";")return E;if(!N[E].match(k))break}return-1}function de(N,E){if(E++,N[E]===";")return-1;if(N[E]==="#")return E++,Y(N,E);let k=0;for(;E<N.length;E++,k++)if(!(N[E].match(/\w/)&&k<20)){if(N[E]===";")break;return-1}return E}function G(N,E,k){return{err:{code:N,msg:E,line:k.line||k,col:k.col}}}function $(N){return d.isName(N)}function U(N){return d.isName(N)}function re(N,E){const k=N.substring(0,E).split(/\r?\n/);return{line:k.length,col:k[k.length-1].length+1}}function Z(N){return N.startIndex+N[1].length}},{"./util":4}],6:[function(i,a,c){const d=i("./orderedJs2Xml"),g={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(G,$){return $},attributeValueProcessor:function(G,$){return $},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function l(G){this.options=Object.assign({},g,G),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=de),this.processTextOrObjNode=w,this.options.format?(this.indentate=Y,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=J,this.buildObjNode=C):(this.buildTextNode=M,this.buildObjNode=A),this.buildTextValNode=M,this.buildObjectNode=A,this.replaceEntitiesValue=R,this.buildAttrPairStr=b}l.prototype.build=function(G){return this.options.preserveOrder?d(G,this.options):(Array.isArray(G)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(G={[this.options.arrayNodeName]:G}),this.j2x(G,0).val)},l.prototype.j2x=function(G,$){let U="",re="";for(let Z in G)if(!(typeof G[Z]>"u"))if(G[Z]===null)Z[0]==="?"?re+=this.indentate($)+"<"+Z+"?"+this.tagEndChar:re+=this.indentate($)+"<"+Z+"/"+this.tagEndChar;else if(G[Z]instanceof Date)re+=this.buildTextNode(G[Z],Z,"",$);else if(typeof G[Z]!="object"){const N=this.isAttribute(Z);if(N)U+=this.buildAttrPairStr(N,""+G[Z]);else if(Z===this.options.textNodeName){let E=this.options.tagValueProcessor(Z,""+G[Z]);re+=this.replaceEntitiesValue(E)}else re+=this.buildTextNode(G[Z],Z,"",$)}else if(Array.isArray(G[Z])){const N=G[Z].length;for(let E=0;E<N;E++){const k=G[Z][E];typeof k>"u"||(k===null?Z[0]==="?"?re+=this.indentate($)+"<"+Z+"?"+this.tagEndChar:re+=this.indentate($)+"<"+Z+"/"+this.tagEndChar:typeof k=="object"?re+=this.processTextOrObjNode(k,Z,$):re+=this.buildTextNode(k,Z,"",$))}}else if(this.options.attributesGroupName&&Z===this.options.attributesGroupName){const N=Object.keys(G[Z]),E=N.length;for(let k=0;k<E;k++)U+=this.buildAttrPairStr(N[k],""+G[Z][N[k]])}else re+=this.processTextOrObjNode(G[Z],Z,$);return{attrStr:U,val:re}};function b(G,$){return $=this.options.attributeValueProcessor(G,""+$),$=this.replaceEntitiesValue($),this.options.suppressBooleanAttributes&&$==="true"?" "+G:" "+G+'="'+$+'"'}function w(G,$,U){const re=this.j2x(G,U+1);return G[this.options.textNodeName]!==void 0&&Object.keys(G).length===1?this.buildTextNode(G[this.options.textNodeName],$,re.attrStr,U):this.buildObjNode(re.val,$,re.attrStr,U)}function A(G,$,U,re){let Z="</"+$+this.tagEndChar,N="";return $[0]==="?"&&(N="?",Z=""),U&&G.indexOf("<")===-1?this.indentate(re)+"<"+$+U+N+">"+G+Z:this.options.commentPropName!==!1&&$===this.options.commentPropName&&N.length===0?this.indentate(re)+`<!--${G}-->`+this.newLine:this.indentate(re)+"<"+$+U+N+this.tagEndChar+G+this.indentate(re)+Z}function C(G,$,U,re){return G!==""?this.buildObjectNode(G,$,U,re):$[0]==="?"?this.indentate(re)+"<"+$+U+"?"+this.tagEndChar:this.indentate(re)+"<"+$+U+"/"+this.tagEndChar}function M(G,$,U,re){if(this.options.cdataPropName!==!1&&$===this.options.cdataPropName)return this.indentate(re)+`<![CDATA[${G}]]>`+this.newLine;if(this.options.commentPropName!==!1&&$===this.options.commentPropName)return this.indentate(re)+`<!--${G}-->`+this.newLine;{let Z=this.options.tagValueProcessor($,G);return Z=this.replaceEntitiesValue(Z),Z===""&&this.options.unpairedTags.indexOf($)!==-1?this.options.suppressUnpairedNode?this.indentate(re)+"<"+$+this.tagEndChar:this.indentate(re)+"<"+$+"/"+this.tagEndChar:this.indentate(re)+"<"+$+U+">"+Z+"</"+$+this.tagEndChar}}function R(G){if(G&&G.length>0&&this.options.processEntities)for(let $=0;$<this.options.entities.length;$++){const U=this.options.entities[$];G=G.replace(U.regex,U.val)}return G}function J(G,$,U,re){return G===""&&this.options.unpairedTags.indexOf($)!==-1?this.options.suppressUnpairedNode?this.indentate(re)+"<"+$+this.tagEndChar:this.indentate(re)+"<"+$+"/"+this.tagEndChar:G!==""?this.buildTextValNode(G,$,U,re):$[0]==="?"?this.indentate(re)+"<"+$+U+"?"+this.tagEndChar:this.indentate(re)+"<"+$+U+"/"+this.tagEndChar}function Y(G){return this.options.indentBy.repeat(G)}function de(G){return G.startsWith(this.options.attributeNamePrefix)?G.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(i,a,c){const d=`
`;function g(M,R){return l(M,R,"",0)}function l(M,R,J,Y){let de="",G="";R.format&&R.indentBy.length>0&&(G=d+""+R.indentBy.repeat(Y));for(let $=0;$<M.length;$++){const U=M[$],re=b(U);let Z="";if(J.length===0?Z=re:Z=`${J}.${re}`,re===R.textNodeName){let H=U[re];A(Z,R)||(H=R.tagValueProcessor(re,H),H=C(H,R)),de+=G+H;continue}else if(re===R.cdataPropName){de+=G+`<![CDATA[${U[re][0][R.textNodeName]}]]>`;continue}else if(re===R.commentPropName){de+=G+`<!--${U[re][0][R.textNodeName]}-->`;continue}else if(re[0]==="?"){const H=w(U[":@"],R),q=re==="?xml"?"":G;let ee=U[re][0][R.textNodeName];ee=ee.length!==0?" "+ee:"",de+=q+`<${re}${ee}${H}?>`;continue}const N=w(U[":@"],R);let E=G+`<${re}${N}`,k=l(U[re],R,Z,Y+1);R.unpairedTags.indexOf(re)!==-1?R.suppressUnpairedNode?de+=E+">":de+=E+"/>":(!k||k.length===0)&&R.suppressEmptyNode?de+=E+"/>":de+=E+`>${k}${G}</${re}>`}return de}function b(M){const R=Object.keys(M);for(let J=0;J<R.length;J++){const Y=R[J];if(Y!==":@")return Y}}function w(M,R){let J="";if(M&&!R.ignoreAttributes)for(let Y in M){let de=R.attributeValueProcessor(Y,M[Y]);de=C(de,R),de===!0&&R.suppressBooleanAttributes?J+=` ${Y.substr(R.attributeNamePrefix.length)}`:J+=` ${Y.substr(R.attributeNamePrefix.length)}="${de}"`}return J}function A(M,R){M=M.substr(0,M.length-R.textNodeName.length-1);let J=M.substr(M.lastIndexOf(".")+1);for(let Y in R.stopNodes)if(R.stopNodes[Y]===M||R.stopNodes[Y]==="*."+J)return!0;return!1}function C(M,R){if(M&&M.length>0&&R.processEntities)for(let J=0;J<R.entities.length;J++){const Y=R.entities[J];M=M.replace(Y.regex,Y.val)}return M}a.exports=g},{}],8:[function(i,a,c){function d(b,w){const A={};if(b[w+3]==="O"&&b[w+4]==="C"&&b[w+5]==="T"&&b[w+6]==="Y"&&b[w+7]==="P"&&b[w+8]==="E"){w=w+9;let C=1,M=!1,R=!1,J=!1,Y="";for(;w<b.length;w++)if(b[w]==="<"){if(M&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="N"&&b[w+4]==="T"&&b[w+5]==="I"&&b[w+6]==="T"&&b[w+7]==="Y")w+=7,R=!0;else if(M&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="L"&&b[w+4]==="E"&&b[w+5]==="M"&&b[w+6]==="E"&&b[w+7]==="N"&&b[w+8]==="T")w+=8;else if(b[w+1]==="!"&&b[w+2]==="-"&&b[w+3]==="-")J=!0;else throw new Error("Invalid DOCTYPE");C++,Y=""}else if(b[w]===">"){if(J)if(b[w-1]==="-"&&b[w-2]==="-")J=!1;else throw new Error("Invalid XML comment in DOCTYPE");else R&&(l(Y,A),R=!1);if(C--,C===0)break}else b[w]==="["?M=!0:Y+=b[w];if(C!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:A,i:w}}const g=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(b,w){const A=g.exec(b);A&&(w[A[1]]={regx:RegExp(`&${A[1]};`,"g"),val:A[3]})}a.exports=d},{}],9:[function(i,a,c){const d={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,b){return b},attributeValueProcessor:function(l,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},g=function(l){return Object.assign({},d,l)};c.buildOptions=g,c.defaultOptions=d},{}],10:[function(i,a,c){const d=i("../util"),g=i("./xmlNode"),l=i("./DocTypeReader"),b=i("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,d.nameRegexp);class w{constructor(H){this.options=H,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=A,this.parseXml=Y,this.parseTextData=C,this.resolveNameSpace=M,this.buildAttributesMap=J,this.isItStopNode=$,this.replaceEntitiesValue=de,this.readStopNodeData=N,this.saveTextToParentTag=G}}function A(k){const H=Object.keys(k);for(let q=0;q<H.length;q++){const ee=H[q];this.lastEntities[ee]={regex:new RegExp("&"+ee+";","g"),val:k[ee]}}}function C(k,H,q,ee,ve,xe,be){if(k!==void 0&&(this.options.trimValues&&!ee&&(k=k.trim()),k.length>0)){be||(k=this.replaceEntitiesValue(k));const te=this.options.tagValueProcessor(H,k,q,ve,xe);return te==null?k:typeof te!=typeof k||te!==k?te:this.options.trimValues?E(k,this.options.parseTagValue,this.options.numberParseOptions):k.trim()===k?E(k,this.options.parseTagValue,this.options.numberParseOptions):k}}function M(k){if(this.options.removeNSPrefix){const H=k.split(":"),q=k.charAt(0)==="/"?"/":"";if(H[0]==="xmlns")return"";H.length===2&&(k=q+H[1])}return k}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function J(k,H){if(!this.options.ignoreAttributes&&typeof k=="string"){const q=d.getAllMatches(k,R),ee=q.length,ve={};for(let xe=0;xe<ee;xe++){const be=this.resolveNameSpace(q[xe][1]);let te=q[xe][4];const ue=this.options.attributeNamePrefix+be;if(be.length)if(te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const ne=this.options.attributeValueProcessor(be,te,H);ne==null?ve[ue]=te:typeof ne!=typeof te||ne!==te?ve[ue]=ne:ve[ue]=E(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ve[ue]=!0)}if(!Object.keys(ve).length)return;if(this.options.attributesGroupName){const xe={};return xe[this.options.attributesGroupName]=ve,xe}return ve}}const Y=function(k){k=k.replace(/\r\n?/g,`
`);const H=new g("!xml");let q=H,ee="",ve="";for(let xe=0;xe<k.length;xe++)if(k[xe]==="<")if(k[xe+1]==="/"){const te=re(k,">",xe,"Closing Tag is not closed.");let ue=k.substring(xe+2,te).trim();if(this.options.removeNSPrefix){const ne=ue.indexOf(":");ne!==-1&&(ue=ue.substr(ne+1))}q&&(ee=this.saveTextToParentTag(ee,q,ve)),ve=ve.substr(0,ve.lastIndexOf(".")),q=this.tagsNodeStack.pop(),ee="",xe=te}else if(k[xe+1]==="?"){let te=Z(k,xe,!1,"?>");if(!te)throw new Error("Pi Tag is not closed.");if(ee=this.saveTextToParentTag(ee,q,ve),!(this.options.ignoreDeclaration&&te.tagName==="?xml"||this.options.ignorePiTags)){const ue=new g(te.tagName);ue.add(this.options.textNodeName,""),te.tagName!==te.tagExp&&te.attrExpPresent&&(ue[":@"]=this.buildAttributesMap(te.tagExp,ve)),q.addChild(ue)}xe=te.closeIndex+1}else if(k.substr(xe+1,3)==="!--"){const te=re(k,"-->",xe+4,"Comment is not closed.");if(this.options.commentPropName){const ue=k.substring(xe+4,te-2);ee=this.saveTextToParentTag(ee,q,ve),q.add(this.options.commentPropName,[{[this.options.textNodeName]:ue}])}xe=te}else if(k.substr(xe+1,2)==="!D"){const te=l(k,xe);this.docTypeEntities=te.entities,xe=te.i}else if(k.substr(xe+1,2)==="!["){const te=re(k,"]]>",xe,"CDATA is not closed.")-2,ue=k.substring(xe+9,te);if(ee=this.saveTextToParentTag(ee,q,ve),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:ue}]);else{let ne=this.parseTextData(ue,q.tagname,ve,!0,!1,!0);ne||(ne=""),q.add(this.options.textNodeName,ne)}xe=te+2}else{let te=Z(k,xe,this.options.removeNSPrefix),ue=te.tagName,ne=te.tagExp,ie=te.attrExpPresent,ye=te.closeIndex;q&&ee&&q.tagname!=="!xml"&&(ee=this.saveTextToParentTag(ee,q,ve,!1)),ue!==H.tagname&&(ve+=ve?"."+ue:ue);const Te=q;if(Te&&this.options.unpairedTags.indexOf(Te.tagname)!==-1&&(q=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,ve,ue)){let Se="";if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1)xe=te.closeIndex;else if(this.options.unpairedTags.indexOf(ue)!==-1)xe=te.closeIndex;else{const Pe=this.readStopNodeData(k,ue,ye+1);if(!Pe)throw new Error(`Unexpected end of ${ue}`);xe=Pe.i,Se=Pe.tagContent}const $e=new g(ue);ue!==ne&&ie&&($e[":@"]=this.buildAttributesMap(ne,ve)),Se&&(Se=this.parseTextData(Se,ue,ve,!0,ie,!0,!0)),ve=ve.substr(0,ve.lastIndexOf(".")),$e.add(this.options.textNodeName,Se),q.addChild($e)}else{if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1){ue[ue.length-1]==="/"?(ue=ue.substr(0,ue.length-1),ne=ue):ne=ne.substr(0,ne.length-1);const Se=new g(ue);ue!==ne&&ie&&(Se[":@"]=this.buildAttributesMap(ne,ve)),ve=ve.substr(0,ve.lastIndexOf(".")),q.addChild(Se)}else{const Se=new g(ue);this.tagsNodeStack.push(q),ue!==ne&&ie&&(Se[":@"]=this.buildAttributesMap(ne,ve)),q.addChild(Se),q=Se}ee="",xe=ye}}else ee+=k[xe];return H.child},de=function(k){if(this.options.processEntities){for(let H in this.docTypeEntities){const q=this.docTypeEntities[H];k=k.replace(q.regx,q.val)}for(let H in this.lastEntities){const q=this.lastEntities[H];k=k.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let H in this.htmlEntities){const q=this.htmlEntities[H];k=k.replace(q.regex,q.val)}}return k};function G(k,H,q,ee){return k&&(ee===void 0&&(ee=Object.keys(H.child).length===0),k=this.parseTextData(k,H.tagname,q,!1,H[":@"]?Object.keys(H[":@"]).length!==0:!1,ee),k!==void 0&&k!==""&&H.add(this.options.textNodeName,k),k=""),k}function $(k,H,q){const ee="*."+q;for(const ve in k){const xe=k[ve];if(ee===xe||H===xe)return!0}return!1}function U(k,H,q=">"){let ee,ve="";for(let xe=H;xe<k.length;xe++){let be=k[xe];if(ee)be===ee&&(ee="");else if(be==='"'||be==="'")ee=be;else if(be===q[0])if(q[1]){if(k[xe+1]===q[1])return{data:ve,index:xe}}else return{data:ve,index:xe};else be==="	"&&(be=" ");ve+=be}}function re(k,H,q,ee){const ve=k.indexOf(H,q);if(ve===-1)throw new Error(ee);return ve+H.length-1}function Z(k,H,q,ee=">"){const ve=U(k,H+1,ee);if(!ve)return;let xe=ve.data;const be=ve.index,te=xe.search(/\s/);let ue=xe,ne=!0;if(te!==-1&&(ue=xe.substr(0,te).replace(/\s\s*$/,""),xe=xe.substr(te+1)),q){const ie=ue.indexOf(":");ie!==-1&&(ue=ue.substr(ie+1),ne=ue!==ve.data.substr(ie+1))}return{tagName:ue,tagExp:xe,closeIndex:be,attrExpPresent:ne}}function N(k,H,q){const ee=q;for(;q<k.length;q++)if(k[q]==="<"&&k[q+1]==="/"){const ve=re(k,">",q,`${H} is not closed`);if(k.substring(q+2,ve).trim()===H)return{tagContent:k.substring(ee,q),i:ve};q=ve}}function E(k,H,q){if(H&&typeof k=="string"){const ee=k.trim();return ee==="true"?!0:ee==="false"?!1:b(k,q)}else return d.isExist(k)?k:""}a.exports=w},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:d}=i("./OptionsBuilder"),g=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),b=i("../validator");class w{constructor(C){this.externalEntities={},this.options=d(C)}parse(C,M){if(typeof C!="string")if(C.toString)C=C.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(M){M===!0&&(M={});const Y=b.validate(C,M);if(Y!==!0)throw Error(`${Y.err.msg}:${Y.err.line}:${Y.err.col}`)}const R=new g(this.options);R.addExternalEntities(this.externalEntities);const J=R.parseXml(C);return this.options.preserveOrder||J===void 0?J:l(J,this.options)}addEntity(C,M){if(M.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(C.indexOf("&")!==-1||C.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[C]=M}}a.exports=w},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function d(A,C){return g(A,C)}function g(A,C,M){let R;const J={};for(let Y=0;Y<A.length;Y++){const de=A[Y],G=l(de);let $="";if(M===void 0?$=G:$=M+"."+G,G===C.textNodeName)R===void 0?R=de[G]:R+=""+de[G];else{if(G===void 0)continue;if(de[G]){let U=g(de[G],C,$);const re=w(U,C);de[":@"]?b(U,de[":@"],$,C):Object.keys(U).length===1&&U[C.textNodeName]!==void 0&&!C.alwaysCreateTextNode?U=U[C.textNodeName]:Object.keys(U).length===0&&(C.alwaysCreateTextNode?U[C.textNodeName]="":U=""),J[G]!==void 0?(Array.isArray(J[G])||(J[G]=[J[G]]),J[G].push(U)):C.isArray(G,$,re)?J[G]=[U]:J[G]=U}}}return typeof R=="string"?R.length>0&&(J[C.textNodeName]=R):R!==void 0&&(J[C.textNodeName]=R),J}function l(A){const C=Object.keys(A);for(let M=0;M<C.length;M++){const R=C[M];if(R!==":@")return R}}function b(A,C,M,R){if(C){const J=Object.keys(C),Y=J.length;for(let de=0;de<Y;de++){const G=J[de];R.isArray(G,M+"."+G,!0,!0)?A[G]=[C[G]]:A[G]=C[G]}}}function w(A,C){const M=Object.keys(A).length;return!!(M===0||M===1&&A[C.textNodeName])}c.prettify=d},{}],13:[function(i,a,c){class d{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,b){this.child.push({[l]:b})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,":@":l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=d},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,g,l,b,w){var A,C,M=w*8-b-1,R=(1<<M)-1,J=R>>1,Y=-7,de=l?w-1:0,G=l?-1:1,$=d[g+de];for(de+=G,A=$&(1<<-Y)-1,$>>=-Y,Y+=M;Y>0;A=A*256+d[g+de],de+=G,Y-=8);for(C=A&(1<<-Y)-1,A>>=-Y,Y+=b;Y>0;C=C*256+d[g+de],de+=G,Y-=8);if(A===0)A=1-J;else{if(A===R)return C?NaN:($?-1:1)*(1/0);C=C+Math.pow(2,b),A=A-J}return($?-1:1)*C*Math.pow(2,A-b)},c.write=function(d,g,l,b,w,A){var C,M,R,J=A*8-w-1,Y=(1<<J)-1,de=Y>>1,G=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=b?0:A-1,U=b?1:-1,re=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(M=isNaN(g)?1:0,C=Y):(C=Math.floor(Math.log(g)/Math.LN2),g*(R=Math.pow(2,-C))<1&&(C--,R*=2),C+de>=1?g+=G/R:g+=G*Math.pow(2,1-de),g*R>=2&&(C++,R/=2),C+de>=Y?(M=0,C=Y):C+de>=1?(M=(g*R-1)*Math.pow(2,w),C=C+de):(M=g*Math.pow(2,de-1)*Math.pow(2,w),C=0));w>=8;d[l+$]=M&255,$+=U,M/=256,w-=8);for(C=C<<w|M,J+=w;J>0;d[l+$]=C&255,$+=U,C/=256,J-=8);d[l+$-U]|=re*128}},{}],15:[function(i,a,c){const d=/^[-+]?0x[a-fA-F0-9]+$/,g=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(A,C={}){if(C=Object.assign({},l,C),!A||typeof A!="string")return A;let M=A.trim();if(C.skipLike!==void 0&&C.skipLike.test(M))return A;if(C.hex&&d.test(M))return Number.parseInt(M,16);{const R=g.exec(M);if(R){const J=R[1],Y=R[2];let de=w(R[3]);const G=R[4]||R[6];if(!C.leadingZeros&&Y.length>0&&J&&M[2]!==".")return A;if(!C.leadingZeros&&Y.length>0&&!J&&M[1]!==".")return A;{const $=Number(M),U=""+$;return U.search(/[eE]/)!==-1||G?C.eNotation?$:A:M.indexOf(".")!==-1?U==="0"&&de===""||U===de||J&&U==="-"+de?$:A:Y?de===U||J+de===U?$:A:M===U||M===J+U?$:A}}else return A}}function w(A){return A&&A.indexOf(".")!==-1&&(A=A.replace(/0+$/,""),A==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substr(0,A.length-1))),A}a.exports=b},{}],16:[function(i,a,c){(function(d){(function(){var g=this&&this.__awaiter||function(M,R,J,Y){function de(G){return G instanceof J?G:new J(function($){$(G)})}return new(J||(J=Promise))(function(G,$){function U(N){try{Z(Y.next(N))}catch(E){$(E)}}function re(N){try{Z(Y.throw(N))}catch(E){$(E)}}function Z(N){N.done?G(N.value):de(N.value).then(U,re)}Z((Y=Y.apply(M,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const l=i("../auth"),b=i("../config"),w=i("./_xml"),A=M=>typeof btoa>"u"?d.from(M,"binary").toString("base64"):btoa(M);function C(M,R,J){return g(this,void 0,void 0,function*(){const{apiUrl:Y,authHeader:de,basicAuth:G,userAgent:$}=(0,b.getConfig)(),U=G&&`Basic ${A(`${G.username}:${G.password}`)}`,re=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let Z=new URLSearchParams(R).toString();Z&&(Z=`?${Z}`);const N=yield fetch(`${Y}/api${M}${Z}`,Object.assign(Object.assign({},J),{headers:Object.assign({Authorization:de||U||re||"","User-Agent":$},J==null?void 0:J.headers)})),E=N.headers.get("Content-Type");if(E!=null&&E.startsWith("application/xml")){const k=yield N.text();return yield w.xmlParser.parse(k)}if(E!=null&&E.startsWith("application/json"))return N.json();if(N.ok)return yield N.text();throw new Error(`OSM API: ${yield N.text()}`)})}c.osmFetch=C}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const d=i("fast-xml-parser");c.xmlParser=new d.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:g=>g!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const d=i("fast-xml-parser"),g=new d.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(A){return g.build({osm:{changeset:{tag:Object.entries(A).map(([C,M])=>({$k:C,$v:M}))}}})}c.createChangesetMetaXml=l;const b=(A,C,M)=>C.reduce((R,J)=>{const Y={$id:J.id,$version:M?0:J.version,$changeset:A,tag:Object.entries(J.tags||{}).map(([de,G])=>({$k:de,$v:G}))};switch(J.type){case"node":{const de=Object.assign(Object.assign({},Y),{$lat:J.lat,$lon:J.lon});return Object.assign(Object.assign({},R),{node:[...R.node,de]})}case"way":{if(!J.nodes)throw new Error("Way has no nodes");const de=Object.assign(Object.assign({},Y),{nd:J.nodes.map(G=>({$ref:G}))});return Object.assign(Object.assign({},R),{way:[...R.way,de]})}case"relation":{if(!J.members)throw new Error("Relation has no members");const de=Object.assign(Object.assign({},Y),{member:J.members.map(G=>({$type:G.type,$ref:G.ref,$role:G.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,de]})}default:return R}},{node:[],way:[],relation:[]});function w(A,C,M){return g.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},M),{create:[b(A,C.create,!0)],modify:[b(A,C.modify)],delete:[Object.assign({"$if-unused":!0},b(A,C.delete))]})})}c.createOsmChangeXml=w},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const d=i("../_xml");function g(A){return{changeset:+A.$.changeset,id:+A.$.id,timestamp:A.$.timestamp,uid:+A.$.uid,user:A.$.user,version:+A.$.version,tags:A.tag?Object.fromEntries(A.tag.map(C=>[C.$.k,C.$.v])):void 0}}const l=A=>{const C=[];if(A.node){const M=A.node.map(R=>Object.assign(Object.assign({type:"node"},g(R)),{lat:+R.$.lat,lon:+R.$.lon}));C.push(...M)}if(A.way){const M=A.way.map(R=>{var J;return Object.assign(Object.assign({type:"way"},g(R)),{nodes:((J=R.nd)===null||J===void 0?void 0:J.map(Y=>+Y.$.ref))||[]})});C.push(...M)}if(A.relation){const M=A.relation.map(R=>{var J;return Object.assign(Object.assign({type:"relation"},g(R)),{members:((J=R.member)===null||J===void 0?void 0:J.map(Y=>({ref:+Y.$.ref,role:Y.$.role,type:Y.$.type})))||[]})});C.push(...M)}return C};function b(A){var C,M,R;return{create:((C=A.osmChange[0].create)===null||C===void 0?void 0:C.flatMap(l))||[],modify:((M=A.osmChange[0].modify)===null||M===void 0?void 0:M.flatMap(l))||[],delete:((R=A.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(l))||[]}}c.parseOsmChangeJson=b;function w(A){const C=d.xmlParser.parse(A);return b(C)}c.parseOsmChangeXml=w},{"../_xml":17}],20:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,C){function M(R){return R instanceof A?R:new A(function(J){J(R)})}return new(A||(A=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(U){J(U)}}function de($){try{G(C.throw($))}catch(U){J(U)}}function G($){$.done?R($.value):M($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const g=i("../_osmFetch");function l(b,w){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(w)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,C,M){function R(J){return J instanceof C?J:new C(function(Y){Y(J)})}return new(C||(C=Promise))(function(J,Y){function de(U){try{$(M.next(U))}catch(re){Y(re)}}function G(U){try{$(M.throw(U))}catch(re){Y(re)}}function $(U){U.done?J(U.value):R(U.value).then(de,G)}$((M=M.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const g=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function b(w){return d(this,void 0,void 0,function*(){const A=yield(0,g.osmFetch)(`/0.6/changeset/${w}/download`);return(0,l.parseOsmChangeJson)(A)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var d=this&&this.__awaiter||function(C,M,R,J){function Y(de){return de instanceof R?de:new R(function(G){G(de)})}return new(R||(R=Promise))(function(de,G){function $(Z){try{re(J.next(Z))}catch(N){G(N)}}function U(Z){try{re(J.throw(Z))}catch(N){G(N)}}function re(Z){Z.done?de(Z.value):Y(Z.value).then($,U)}re((J=J.apply(C,M||[])).next())})},g=this&&this.__rest||function(C,M){var R={};for(var J in C)Object.prototype.hasOwnProperty.call(C,J)&&M.indexOf(J)<0&&(R[J]=C[J]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,J=Object.getOwnPropertySymbols(C);Y<J.length;Y++)M.indexOf(J[Y])<0&&Object.prototype.propertyIsEnumerable.call(C,J[Y])&&(R[J[Y]]=C[J[Y]]);return R};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const l=i("../_osmFetch"),b=C=>{var M;return{id:+C.$.id,created_at:new Date(C.$.created_at),closed_at:new Date(C.$.closed_at),open:C.$.open==="true",comments_count:+C.$.comments_count,changes_count:+C.$.changes_count,min_lat:+C.$.min_lat,min_lon:+C.$.min_lon,max_lat:+C.$.max_lat,max_lon:+C.$.max_lon,uid:+C.$.uid,user:C.$.user,tags:Object.fromEntries(C.tag.map(R=>[R.$.k,R.$.v])),discussion:(M=C.discussion)===null||M===void 0?void 0:M[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function w(C){var M;return d(this,void 0,void 0,function*(){const{only:R}=C,J=g(C,["only"]);return((M=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),J))).osm[0].changeset)===null||M===void 0?void 0:M.map(b))||[]})}c.listChangesets=w;function A(C,M=!0){return d(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${C}`,{include_discussion:M})).osm[0].changeset.map(b)[0]})}c.getChangeset=A},{"../_osmFetch":16}],23:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(w,A,C,M){M===void 0&&(M=C);var R=Object.getOwnPropertyDescriptor(A,C);(!R||("get"in R?!A.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return A[C]}}),Object.defineProperty(w,M,R)}:function(w,A,C,M){M===void 0&&(M=C),w[M]=A[C]}),g=this&&this.__exportStar||function(w,A){for(var C in w)C!=="default"&&!Object.prototype.hasOwnProperty.call(A,C)&&d(A,w,C)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,g(i("./createChangesetComment"),c),g(i("./getChangesetDiff"),c),g(i("./getChangesets"),c),g(i("./uploadChangeset"),c);var l=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,C,M){function R(J){return J instanceof C?J:new C(function(Y){Y(J)})}return new(C||(C=Promise))(function(J,Y){function de(U){try{$(M.next(U))}catch(re){Y(re)}}function G(U){try{$(M.throw(U))}catch(re){Y(re)}}function $(U){U.done?J(U.value):R(U.value).then(de,G)}$((M=M.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const g=i("../_osmFetch"),l=i("./_createOsmChangeXml");function b(w,A){return d(this,void 0,void 0,function*(){const C=(0,l.createChangesetMetaXml)(w),M=+(yield(0,g.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:C,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,l.createOsmChangeXml)(M,A);return yield(0,g.osmFetch)(`/0.6/changeset/${M}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,g.osmFetch)(`/0.6/changeset/${M}/close`,void 0,{method:"PUT"}),+M})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,C){function M(R){return R instanceof A?R:new A(function(J){J(R)})}return new(A||(A=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(U){J(U)}}function de($){try{G(C.throw($))}catch(U){J(U)}}function G($){$.done?R($.value):M($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const g=i("./_osmFetch");function l(){return d(this,void 0,void 0,function*(){const b=yield(0,g.osmFetch)("/capabilities");return{limits:{maxArea:+b.osm[0].api[0].area[0].$.maximum,maxNoteArea:+b.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+b.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+b.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+b.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+b.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:b.osm[0].policy[0].imagery[0].blacklist.map(A=>A.$.regex)}}})}c.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,a,c){var d=this&&this.__awaiter||function(R,J,Y,de){function G($){return $ instanceof Y?$:new Y(function(U){U($)})}return new(Y||(Y=Promise))(function($,U){function re(E){try{N(de.next(E))}catch(k){U(k)}}function Z(E){try{N(de.throw(E))}catch(k){U(k)}}function N(E){E.done?$(E.value):G(E.value).then(re,Z)}N((de=de.apply(R,J||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const g=i("./_osmFetch");function l(R,J,Y){return d(this,void 0,void 0,function*(){const de=Y&&R!=="node"?"/full":"";return(yield(0,g.osmFetch)(`/0.6/${R}/${J}${de}.json`)).elements})}c.getFeature=l;function b(R,J){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${R}s.json?${R}s=${J.join(",")}`)).elements})}c.getFeatures=b;function w(R,J,Y){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${R}/${J}/${Y}.json`)).elements[0]})}c.getFeatureAtVersion=w;function A(R,J){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${R}/${J}/history.json`)).elements})}c.getFeatureHistory=A;function C(R){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}c.getWaysForNode=C;function M(R,J){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${R}/${J}/relations.json`)).elements})}c.getRelationsForElement=M},{"./_osmFetch":16}],27:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,C){function M(R){return R instanceof A?R:new A(function(J){J(R)})}return new(A||(A=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(U){J(U)}}function de($){try{G(C.throw($))}catch(U){J(U)}}function G($){$.done?R($.value):M($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const g=i("./_osmFetch");function l(b){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=l},{"./_osmFetch":16}],28:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,C){function M(R){return R instanceof A?R:new A(function(J){J(R)})}return new(A||(A=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(U){J(U)}}function de($){try{G(C.throw($))}catch(U){J(U)}}function G($){$.done?R($.value):M($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const g=i("./changesets");function l(b){return d(this,void 0,void 0,function*(){const w=yield(0,g.listChangesets)({display_name:b});if(!w.length)throw new Error("Could not get uid because the user has never edited the map");return w[0].uid})}c.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,C,M){function R(J){return J instanceof C?J:new C(function(Y){Y(J)})}return new(C||(C=Promise))(function(J,Y){function de(U){try{$(M.next(U))}catch(re){Y(re)}}function G(U){try{$(M.throw(U))}catch(re){Y(re)}}function $(U){U.done?J(U.value):R(U.value).then(de,G)}$((M=M.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const g=i("./_osmFetch");function l(w){return d(this,void 0,void 0,function*(){const A=yield(0,g.osmFetch)(`/0.6/user/${w==="me"?"details":w}.json`);return Object.assign(Object.assign({},A.user),{account_created:new Date(A.user.account_created)})})}c.getUser=l;function b(w){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/users",{users:w})).users.map(C=>Object.assign(Object.assign({},C),{account_created:new Date(C.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,C)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./changesets"),c),g(i("./notes"),c),g(i("./getCapabilities"),c),g(i("./getFeature"),c),g(i("./getMapData"),c),g(i("./getUIdFromDisplayName"),c),g(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var d=this&&this.__awaiter||function(M,R,J,Y){function de(G){return G instanceof J?G:new J(function($){$(G)})}return new(J||(J=Promise))(function(G,$){function U(N){try{Z(Y.next(N))}catch(E){$(E)}}function re(N){try{Z(Y.throw(N))}catch(E){$(E)}}function Z(N){N.done?G(N.value):de(N.value).then(U,re)}Z((Y=Y.apply(M,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const g=i("../_osmFetch"),l=M=>{const[R,J]=M.geometry.coordinates;return Object.assign(Object.assign({},M.properties),{location:{lat:J,lng:R}})};function b(M,R){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/notes${R?"/search":""}.json`,M)).features.map(l)})}function w(M){return b(M,!0)}c.getNotesForQuery=w;function A(M){return b({bbox:M},!1)}c.getNotesForArea=A;function C(M){return d(this,void 0,void 0,function*(){const R=yield(0,g.osmFetch)(`/0.6/notes/${M}.json`);return l(R)})}c.getNote=C},{"../_osmFetch":16}],32:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,C)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./getNotes"),c),g(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var d=this&&this.__awaiter||function(A,C,M,R){function J(Y){return Y instanceof M?Y:new M(function(de){de(Y)})}return new(M||(M=Promise))(function(Y,de){function G(re){try{U(R.next(re))}catch(Z){de(Z)}}function $(re){try{U(R.throw(re))}catch(Z){de(Z)}}function U(re){re.done?Y(re.value):J(re.value).then(G,$)}U((R=R.apply(A,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const g=i("../_osmFetch");function l(A,C,M){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)("/0.6/notes",{lat:A,lon:C,text:M})})}c.createNote=l;function b(A,C){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${A}/comment`,{text:C})})}c.commentOnNote=b;function w(A,C){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${A}/reopen`,{text:C})})}c.reopenNote=w},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function d(g){let l=!1;return new Promise((b,w)=>{const[A,C]=[600,550],M=Object.entries({width:A,height:C,left:window.screen.width/2-A/2,top:window.screen.height/2-C/2}).map(([Y,de])=>`${Y}=${de}`).join(","),R=window.open("about:blank","oauth_window",M);if(!R)throw new Error("Popup was blocked");R.location=g,window.authComplete=Y=>{b(Y),l=!0};const J=setInterval(()=>{R.closed&&(l||w(new Error("Cancelled")),clearInterval(J))},500)})}c.createPopup=d},{}],35:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,C){function M(R){return R instanceof A?R:new A(function(J){J(R)})}return new(A||(A=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(U){J(U)}}function de($){try{G(C.throw($))}catch(U){J(U)}}function G($){$.done?R($.value):M($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const g=i("./helpers");function l(b,{options:w,pkceVerifier:A,state:C}){return d(this,void 0,void 0,function*(){const M=new URL(b).searchParams,R=M.get("error_description"),J=M.get("code"),Y=M.get("state");if(R)throw new Error(R);if(!J)throw new Error("No code in OAuth response");if(!A||!C)throw new Error("No login in progress");if(C!==Y)throw new Error("State Mismatch");const de={grant_type:"authorization_code",code:J,redirect_uri:w.redirectUrl,client_id:w.clientId,code_verifier:A},G=`${(0,g.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(de).toString()}`,U=yield(yield fetch(G,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in U)throw new Error(U.error_description);const re={issuedAt:new Date(U.created_at*1e3).toISOString(),accessToken:U.access_token,scopes:U.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(re)),delete window.authComplete,re})}c.exchangeCode=l},{"./helpers":36}],36:[function(i,a,c){var d=this&&this.__awaiter||function(A,C,M,R){function J(Y){return Y instanceof M?Y:new M(function(de){de(Y)})}return new(M||(M=Promise))(function(Y,de){function G(re){try{U(R.next(re))}catch(Z){de(Z)}}function $(re){try{U(R.throw(re))}catch(Z){de(Z)}}function U(re){re.done?Y(re.value):J(re.value).then(G,$)}U((R=R.apply(A,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const g=i("../config");function l(A){return d(this,void 0,void 0,function*(){const C=new TextEncoder().encode(A),M=yield window.crypto.subtle.digest("SHA-256",C);return btoa(String.fromCharCode(...new Uint8Array(M))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=l;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(A=>`0${A.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function w(){let A=(0,g.getConfig)().apiUrl;return A==="https://api.openstreetmap.org"&&(A="https://www.openstreetmap.org"),A}c.getOAuthBaseUrl=w},{"../config":39}],37:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,C)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var d=this&&this.__awaiter||function(R,J,Y,de){function G($){return $ instanceof Y?$:new Y(function(U){U($)})}return new(Y||(Y=Promise))(function($,U){function re(E){try{N(de.next(E))}catch(k){U(k)}}function Z(E){try{N(de.throw(E))}catch(k){U(k)}}function N(E){E.done?$(E.value):G(E.value).then(re,Z)}N((de=de.apply(R,J||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const g=i("./createPopup"),l=i("./exchangeCode"),b=i("./helpers");function w(R){return d(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const J=(0,b.getRandomString)(),Y=(0,b.getRandomString)(),de=yield(0,b.sha256)(Y),G={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:J,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:de},$=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(G).toString()}`,U={state:J,pkceVerifier:Y,options:R};if(R.mode==="popup"){const re=yield(0,g.createPopup)($);return(0,l.exchangeCode)(re,U)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(U)),window.location.replace($);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=w,c.authReady=(()=>d(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const J=window.location.href,Y=localStorage.getItem("__osmAuthTemp");if(new URL(J).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(J),window.close();else if(Y)try{const de=JSON.parse(Y);yield(0,l.exchangeCode)(J,de),localStorage.removeItem("__osmAuthTemp")}catch(de){console.error("OSM Auth Error",de)}}}))();const A=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};c.getAuthToken=A;const C=()=>!!(0,c.getAuthToken)();c.isLoggedIn=C;function M(){localStorage.removeItem("__osmAuth")}c.logout=M},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const d={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},g=()=>d;c.getConfig=g;function l(b){Object.assign(d,b)}c.configure=l},{}],40:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,C)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),i("./polyfill"),g(i("./api"),c),g(i("./auth"),c),g(i("./config"),c),g(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./polyfill":41,"./types":45}],41:[function(i,a,c){if(typeof fetch>"u")try{i("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],42:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],43:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],44:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],45:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,C)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./changesets"),c),g(i("./features"),c),g(i("./general"),c),g(i("./notes"),c),g(i("./user"),c)},{"./changesets":42,"./features":43,"./general":44,"./notes":46,"./user":47}],46:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],47:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}]},{},[40])(40)})})(UC);var Os=UC.exports;const $C=()=>{const[e,t]=yt.useState(!1);yt.useEffect(()=>{t(Os.isLoggedIn())},[]);const i=yt.useCallback(()=>{(async()=>(await Os.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Os.isLoggedIn()),window.location.reload()))()},[]),a=yt.useCallback(()=>{(async()=>(Os.logout(),t(!1)))()},[]);return pt.jsx(pt.Fragment,{children:e?pt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):pt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},bz=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Os.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Os.getUser("me");a(c)})()},[e]),pt.jsx(pt.Fragment,{children:i?pt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):pt.jsx("img",{})})},Sz=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Os.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Os.getUser("me");a(c)})()},[e]),pt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[pt.jsxs("div",{children:[pt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?pt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):pt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),pt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[pt.jsx("div",{children:pt.jsx(bz,{})}),pt.jsx("div",{children:pt.jsx($C,{})})]})]})},VC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return pt.jsxs(pt.Fragment,{children:[pt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",pt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},Ez=({feature:e})=>pt.jsx(pt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return pt.jsxs("div",{className:t,children:[pt.jsx("span",{className:"underline",children:t})," = ",pt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function zf(e,t,i){return parseInt(e.substr(t,i),16)}function GC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function g0(e,t,i){return i=i<0?i+6:i>6?i-6:i,GC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function Tz(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],d=e[3],g=e[4]||"";t="#"+a+a+c+c+d+d+g+g}return(i==7||i>8)&&(t=e),t}}function Cz(e,t,i){let a;if(t==0){const c=GC(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,d=i*2-c;a=g0(d,c,e*6+2)+g0(d,c,e*6)+g0(d,c,e*6-2)}return"#"+a}function Cf(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,Cz(e,t,i)}const Iz=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},L2={V:"jdenticon_config",n:"config"};var Az={};function Pz(e,t){const i=typeof e=="object"&&e||Az[L2.n]||Iz[L2.V]||{},a=i.lightness||{},c=i.saturation||{},d="color"in c?c.color:c,g=c.grayscale,l=i.backColor,b=i.padding;function w(C,M){let R=a[C];return R&&R.length>1||(R=M),function(J){return J=R[0]+J*(R[1]-R[0]),J<0?0:J>1?1:J}}function A(C){const M=i.hues;let R;return M&&M.length>0&&(R=M[0|.999*C*M.length]),typeof R=="number"?(R/360%1+1)%1:C}return{W:A,o:typeof d=="number"?d:.5,D:typeof g=="number"?g:0,p:w("color",[.4,.8]),F:w("grayscale",[.3,.9]),G:Tz(l),X:typeof e=="number"?e:typeof b=="number"?b:t}}let Fp=class{constructor(t,i){this.x=t,this.y=i}};class ZC{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const d=this.q+this.H,g=this.t+this.H,l=this.Y;return l===1?new Fp(d-i-(c||0),this.t+t):l===2?new Fp(d-t-(a||0),g-i-(c||0)):l===3?new Fp(this.q+i,g-t-(a||0)):new Fp(this.q+t,this.t+i)}}const kz=new ZC(0,0,0,0);class Mz{constructor(t){this.J=t,this.u=kz}g(t,i){const a=i?-2:2,c=[];for(let d=i?t.length-2:0;d<t.length&&d>=0;d+=a)c.push(this.u.I(t[d],t[d+1]));this.J.g(c)}h(t,i,a,c){const d=this.u.I(t,i,a,a);this.J.h(d,a,c)}i(t,i,a,c,d){this.g([t,i,t+a,i,t+a,i+c,t,i+c],d)}j(t,i,a,c,d,g){const l=[t+a,i,t+a,i+c,t,i+c,t,i];l.splice((d||0)%4*2,2),this.g(l,g)}K(t,i,a,c,d){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],d)}}function zz(e,t,i,a){e=e%14;let c,d,g,l,b,w;e?e==1?(g=0|i*.5,l=0|i*.8,t.j(i-g,0,g,l,2)):e==2?(g=0|i/3,t.i(g,g,i-g,i-g)):e==3?(b=i*.1,w=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(w,w,i-b-w,i-b-w)):e==4?(d=0|i*.15,g=0|i*.5,t.h(i-g-d,i-g-d,g)):e==5?(b=i*.1,w=b*4,w>3&&(w=0|w),t.i(0,0,i,i),t.g([w,w,i-b,w,w+(i-w-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,w=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(w,w,i-w-b,i-w-b,!0)):e==10?(b=i*.12,w=b*3,t.i(0,0,i,i),t.h(w,w,i-b-w,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(d=i*.25,t.i(0,0,i,i),t.K(d,d,i-d,i-d,!0)):!a&&(d=i*.4,g=i*1.2,t.h(d,d,g)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function F2(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function Lz(e,t){return e=t.W(e),[Cf(e,t.D,t.F(0)),Cf(e,t.o,t.p(.5)),Cf(e,t.D,t.F(1)),Cf(e,t.o,t.p(1)),Cf(e,t.o,t.p(0))]}function Fz(e,t,i){const a=Pz(i,.08);a.G&&e.m(a.G);let c=e.k;const d=.5+c*a.X|0;c-=d*2;const g=new Mz(e),l=0|c/4,b=0|d+c/2-l*2,w=0|d+c/2-l*2;function A(de,G,$,U,re){const Z=zf(t,$,1);let N=U?zf(t,U,1):0;e.L(M[R[de]]);for(let E=0;E<re.length;E++)g.u=new ZC(b+re[E][0]*l,w+re[E][1]*l,l,N++%4),G(Z,g,l,E);e.M()}const C=zf(t,-7)/268435455,M=Lz(C,a),R=[];let J;function Y(de){if(de.indexOf(J)>=0){for(let G=0;G<de.length;G++)if(R.indexOf(de[G])>=0)return!0}}for(let de=0;de<3;de++)J=zf(t,8+de,1)%M.length,(Y([0,4])||Y([2,3]))&&(J=1),R.push(J);A(0,F2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),A(1,F2,4,5,[[0,0],[3,0],[3,3],[0,3]]),A(2,zz,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function Oz(e){var a=0,c=0,d=encodeURI(e)+"%80",g=[],l,b=[],w=1732584193,A=4023233417,C=~w,M=~A,R=3285377520,J=[w,A,C,M,R],Y=0,de="";function G($,U){return $<<U|$>>>32-U}for(;a<d.length;c++)g[c>>2]=g[c>>2]|(d[a]=="%"?parseInt(d.substring(a+1,a+=3),16):d.charCodeAt(a++))<<(3-(c&3))*8;for(l=((c+7>>6)+1)*16,g[l-1]=c*8-8;Y<l;Y+=16){for(a=0;a<80;a++)c=G(w,5)+R+(a<20?(A&C^~A&M)+1518500249:a<40?(A^C^M)+1859775393:a<60?(A&C^A&M^C&M)+2400959708:(A^C^M)+3395469782)+(b[a]=a<16?g[Y+a]|0:G(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),R=M,M=C,C=G(A,30),A=w,w=c;J[0]=w=J[0]+w|0,J[1]=A=J[1]+A|0,J[2]=C=J[2]+C|0,J[3]=M=J[3]+M|0,J[4]=R=J[4]+R|0}for(a=0;a<40;a++)de+=(J[a>>3]>>>(7-(a&7))*4&15).toString(16);return de}function Rz(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function jz(e){return Oz(e==null?"":""+e)}function zc(e){return(e*10+.5|0)/10}class Dz{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+zc(t[a].x)+" "+zc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,d=zc(i/2),g=zc(i),l="a"+d+","+d+" 0 1,"+c+" ";this.v+="M"+zc(t.x)+" "+zc(t.y+i/2)+l+g+",0"+l+-g+",0"}}class Bz{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?zf(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new Dz)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const Nz={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class Uz{constructor(t){this.k=t,this.C='<svg xmlns="'+Nz.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function $z(e,t,i){const a=new Uz(t);return Fz(new Bz(a),Rz(e)||jz(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const Vz=({feature:e,size:t})=>e.properties===null?null:pt.jsx(pt.Fragment,{children:e.properties.userIconHref.length>0?pt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):pt.jsx("span",{dangerouslySetInnerHTML:{__html:$z(e.properties.user||"noname",t)}})}),Gz=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?pt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Zz={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const Hz=({viewState:e})=>{const[t,i]=yt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),pt.jsx(pt.Fragment,{children:e&&t&&pt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[pt.jsx(ca,{icon:Zz,style:{padding:"0px 3px"}}),pt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var HC={};class Wi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const d=i[c],g=t+d,l=Math.abs(t)<Math.abs(d)?t-(g-d):d-(g-t);l&&(i[a++]=l),t=g}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,d,g=0;if(i>0){for(g=t[--i];i>0&&(a=g,c=t[--i],g=a+c,d=c-(g-a),!d););i>0&&(d<0&&t[i-1]<0||d>0&&t[i-1]>0)&&(c=d*2,a=g+c,c==a-g&&(g=a))}return g}}function*Wz(e){for(const t of e)yield*t}function WC(e){return Array.from(Wz(e))}function eh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,d=new Array(c);++a<c;)d[a]=e+a*i;return d}var dn=1e-6,_d=1e-12,On=Math.PI,Dr=On/2,$m=On/4,uo=On*2,dr=180/On,pn=On/180,$n=Math.abs,Ah=Math.atan,co=Math.atan2,rn=Math.cos,Op=Math.ceil,XC=Math.exp,Kv=Math.hypot,Vm=Math.log,y0=Math.pow,Yt=Math.sin,ls=Math.sign||function(e){return e>0?1:e<0?-1:0},_i=Math.sqrt,O1=Math.tan;function qC(e){return e>1?0:e<-1?On:Math.acos(e)}function ho(e){return e>1?Dr:e<-1?-Dr:Math.asin(e)}function O2(e){return(e=Yt(e/2))*e}function Mr(){}function Gm(e,t){e&&j2.hasOwnProperty(e.type)&&j2[e.type](e,t)}var R2={Feature:function(e,t){Gm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)Gm(i[a].geometry,t)}},j2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Yv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)Yv(i[a],t,0)},Polygon:function(e,t){D2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)D2(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)Gm(i[a],t)}};function Yv(e,t,i){var a=-1,c=e.length-i,d;for(t.lineStart();++a<c;)d=e[a],t.point(d[0],d[1],d[2]);t.lineEnd()}function D2(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)Yv(e[i],t,1);t.polygonEnd()}function zs(e,t){e&&R2.hasOwnProperty(e.type)?R2[e.type](e,t):Gm(e,t)}var Zm=new Wi,Hm=new Wi,KC,YC,Jv,Qv,e_,ha={point:Mr,lineStart:Mr,lineEnd:Mr,polygonStart:function(){Zm=new Wi,ha.lineStart=Xz,ha.lineEnd=qz},polygonEnd:function(){var e=+Zm;Hm.add(e<0?uo+e:e),this.lineStart=this.lineEnd=this.point=Mr},sphere:function(){Hm.add(uo)}};function Xz(){ha.point=Kz}function qz(){JC(KC,YC)}function Kz(e,t){ha.point=JC,KC=e,YC=t,e*=pn,t*=pn,Jv=e,Qv=rn(t=t/2+$m),e_=Yt(t)}function JC(e,t){e*=pn,t*=pn,t=t/2+$m;var i=e-Jv,a=i>=0?1:-1,c=a*i,d=rn(t),g=Yt(t),l=e_*g,b=Qv*d+l*rn(c),w=l*a*Yt(c);Zm.add(co(w,b)),Jv=e,Qv=d,e_=g}function Yz(e){return Hm=new Wi,zs(e,ha),Hm*2}function Wm(e){return[co(e[1],e[0]),ho(e[2])]}function Qu(e){var t=e[0],i=e[1],a=rn(i);return[a*rn(t),a*Yt(t),Yt(i)]}function Rp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _h(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function v0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function jp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Xm(e){var t=_i(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Pr,xo,Rr,Oo,Bu,QC,eI,uh,Kf,Rl,Ya,Na={point:t_,lineStart:B2,lineEnd:N2,polygonStart:function(){Na.point=nI,Na.lineStart=Jz,Na.lineEnd=Qz,Kf=new Wi,ha.polygonStart()},polygonEnd:function(){ha.polygonEnd(),Na.point=t_,Na.lineStart=B2,Na.lineEnd=N2,Zm<0?(Pr=-(Rr=180),xo=-(Oo=90)):Kf>dn?Oo=90:Kf<-dn&&(xo=-90),Ya[0]=Pr,Ya[1]=Rr},sphere:function(){Pr=-(Rr=180),xo=-(Oo=90)}};function t_(e,t){Rl.push(Ya=[Pr=e,Rr=e]),t<xo&&(xo=t),t>Oo&&(Oo=t)}function tI(e,t){var i=Qu([e*pn,t*pn]);if(uh){var a=_h(uh,i),c=[a[1],-a[0],0],d=_h(c,a);Xm(d),d=Wm(d);var g=e-Bu,l=g>0?1:-1,b=d[0]*dr*l,w,A=$n(g)>180;A^(l*Bu<b&&b<l*e)?(w=d[1]*dr,w>Oo&&(Oo=w)):(b=(b+360)%360-180,A^(l*Bu<b&&b<l*e)?(w=-d[1]*dr,w<xo&&(xo=w)):(t<xo&&(xo=t),t>Oo&&(Oo=t))),A?e<Bu?Fo(Pr,e)>Fo(Pr,Rr)&&(Rr=e):Fo(e,Rr)>Fo(Pr,Rr)&&(Pr=e):Rr>=Pr?(e<Pr&&(Pr=e),e>Rr&&(Rr=e)):e>Bu?Fo(Pr,e)>Fo(Pr,Rr)&&(Rr=e):Fo(e,Rr)>Fo(Pr,Rr)&&(Pr=e)}else Rl.push(Ya=[Pr=e,Rr=e]);t<xo&&(xo=t),t>Oo&&(Oo=t),uh=i,Bu=e}function B2(){Na.point=tI}function N2(){Ya[0]=Pr,Ya[1]=Rr,Na.point=t_,uh=null}function nI(e,t){if(uh){var i=e-Bu;Kf.add($n(i)>180?i+(i>0?360:-360):i)}else QC=e,eI=t;ha.point(e,t),tI(e,t)}function Jz(){ha.lineStart()}function Qz(){nI(QC,eI),ha.lineEnd(),$n(Kf)>dn&&(Pr=-(Rr=180)),Ya[0]=Pr,Ya[1]=Rr,uh=null}function Fo(e,t){return(t-=e)<0?t+360:t}function eL(e,t){return e[0]-t[0]}function U2(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function tL(e){var t,i,a,c,d,g,l;if(Oo=Rr=-(Pr=xo=1/0),Rl=[],zs(e,Na),i=Rl.length){for(Rl.sort(eL),t=1,a=Rl[0],d=[a];t<i;++t)c=Rl[t],U2(a,c[0])||U2(a,c[1])?(Fo(a[0],c[1])>Fo(a[0],a[1])&&(a[1]=c[1]),Fo(c[0],a[1])>Fo(a[0],a[1])&&(a[0]=c[0])):d.push(a=c);for(g=-1/0,i=d.length-1,t=0,a=d[i];t<=i;a=c,++t)c=d[t],(l=Fo(a[1],c[0]))>g&&(g=l,Pr=c[0],Rr=a[1])}return Rl=Ya=null,Pr===1/0||xo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pr,xo],[Rr,Oo]]}var Lf,qm,Km,Ym,Jm,Qm,eg,tg,n_,r_,i_,rI,iI,oo,so,ao,Rs={sphere:Mr,point:R1,lineStart:$2,lineEnd:V2,polygonStart:function(){Rs.lineStart=iL,Rs.lineEnd=oL},polygonEnd:function(){Rs.lineStart=$2,Rs.lineEnd=V2}};function R1(e,t){e*=pn,t*=pn;var i=rn(t);Md(i*rn(e),i*Yt(e),Yt(t))}function Md(e,t,i){++Lf,Km+=(e-Km)/Lf,Ym+=(t-Ym)/Lf,Jm+=(i-Jm)/Lf}function $2(){Rs.point=nL}function nL(e,t){e*=pn,t*=pn;var i=rn(t);oo=i*rn(e),so=i*Yt(e),ao=Yt(t),Rs.point=rL,Md(oo,so,ao)}function rL(e,t){e*=pn,t*=pn;var i=rn(t),a=i*rn(e),c=i*Yt(e),d=Yt(t),g=co(_i((g=so*d-ao*c)*g+(g=ao*a-oo*d)*g+(g=oo*c-so*a)*g),oo*a+so*c+ao*d);qm+=g,Qm+=g*(oo+(oo=a)),eg+=g*(so+(so=c)),tg+=g*(ao+(ao=d)),Md(oo,so,ao)}function V2(){Rs.point=R1}function iL(){Rs.point=sL}function oL(){oI(rI,iI),Rs.point=R1}function sL(e,t){rI=e,iI=t,e*=pn,t*=pn,Rs.point=oI;var i=rn(t);oo=i*rn(e),so=i*Yt(e),ao=Yt(t),Md(oo,so,ao)}function oI(e,t){e*=pn,t*=pn;var i=rn(t),a=i*rn(e),c=i*Yt(e),d=Yt(t),g=so*d-ao*c,l=ao*a-oo*d,b=oo*c-so*a,w=Kv(g,l,b),A=ho(w),C=w&&-A/w;n_.add(C*g),r_.add(C*l),i_.add(C*b),qm+=A,Qm+=A*(oo+(oo=a)),eg+=A*(so+(so=c)),tg+=A*(ao+(ao=d)),Md(oo,so,ao)}function aL(e){Lf=qm=Km=Ym=Jm=Qm=eg=tg=0,n_=new Wi,r_=new Wi,i_=new Wi,zs(e,Rs);var t=+n_,i=+r_,a=+i_,c=Kv(t,i,a);return c<_d&&(t=Qm,i=eg,a=tg,qm<dn&&(t=Km,i=Ym,a=Jm),c=Kv(t,i,a),c<_d)?[NaN,NaN]:[co(i,t)*dr,ho(a/c)*dr]}function Lc(e){return function(){return e}}function o_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function s_(e,t){return[$n(e)>On?e+Math.round(-e/uo)*uo:e,t]}s_.invert=s_;function j1(e,t,i){return(e%=uo)?t||i?o_(Z2(e),H2(t,i)):Z2(e):t||i?H2(t,i):s_}function G2(e){return function(t,i){return t+=e,[t>On?t-uo:t<-On?t+uo:t,i]}}function Z2(e){var t=G2(e);return t.invert=G2(-e),t}function H2(e,t){var i=rn(e),a=Yt(e),c=rn(t),d=Yt(t);function g(l,b){var w=rn(b),A=rn(l)*w,C=Yt(l)*w,M=Yt(b),R=M*i+A*a;return[co(C*c-R*d,A*i-M*a),ho(R*c+C*d)]}return g.invert=function(l,b){var w=rn(b),A=rn(l)*w,C=Yt(l)*w,M=Yt(b),R=M*c-C*d;return[co(C*c+M*d,A*i+R*a),ho(R*i-A*a)]},g}function sI(e){e=j1(e[0]*pn,e[1]*pn,e.length>2?e[2]*pn:0);function t(i){return i=e(i[0]*pn,i[1]*pn),i[0]*=dr,i[1]*=dr,i}return t.invert=function(i){return i=e.invert(i[0]*pn,i[1]*pn),i[0]*=dr,i[1]*=dr,i},t}function aI(e,t,i,a,c,d){if(i){var g=rn(t),l=Yt(t),b=a*i;c==null?(c=t+a*uo,d=t-b/2):(c=W2(g,c),d=W2(g,d),(a>0?c<d:c>d)&&(c+=a*uo));for(var w,A=c;a>0?A>d:A<d;A-=b)w=Wm([g,-l*rn(A),-l*Yt(A)]),e.point(w[0],w[1])}}function W2(e,t){t=Qu(t),t[0]-=e,Xm(t);var i=qC(-t[1]);return((-t[2]<0?-i:i)+uo-dn)%uo}function lL(){var e=Lc([0,0]),t=Lc(90),i=Lc(6),a,c,d={point:g};function g(b,w){a.push(b=c(b,w)),b[0]*=dr,b[1]*=dr}function l(){var b=e.apply(this,arguments),w=t.apply(this,arguments)*pn,A=i.apply(this,arguments)*pn;return a=[],c=j1(-b[0]*pn,-b[1]*pn,0).invert,aI(d,w,A,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return l.center=function(b){return arguments.length?(e=typeof b=="function"?b:Lc([+b[0],+b[1]]),l):e},l.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Lc(+b),l):t},l.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Lc(+b),l):i},l}function lI(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Mr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function om(e,t){return $n(e[0]-t[0])<dn&&$n(e[1]-t[1])<dn}function Dp(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function uI(e,t,i,a,c){var d=[],g=[],l,b;if(e.forEach(function(J){if(!((Y=J.length-1)<=0)){var Y,de=J[0],G=J[Y],$;if(om(de,G)){if(!de[2]&&!G[2]){for(c.lineStart(),l=0;l<Y;++l)c.point((de=J[l])[0],de[1]);c.lineEnd();return}G[0]+=2*dn}d.push($=new Dp(de,J,null,!0)),g.push($.o=new Dp(de,null,$,!1)),d.push($=new Dp(G,J,null,!1)),g.push($.o=new Dp(G,null,$,!0))}}),!!d.length){for(g.sort(t),X2(d),X2(g),l=0,b=g.length;l<b;++l)g[l].e=i=!i;for(var w=d[0],A,C;;){for(var M=w,R=!0;M.v;)if((M=M.n)===w)return;A=M.z,c.lineStart();do{if(M.v=M.o.v=!0,M.e){if(R)for(l=0,b=A.length;l<b;++l)c.point((C=A[l])[0],C[1]);else a(M.x,M.n.x,1,c);M=M.n}else{if(R)for(A=M.p.z,l=A.length-1;l>=0;--l)c.point((C=A[l])[0],C[1]);else a(M.x,M.p.x,-1,c);M=M.p}M=M.o,A=M.z,R=!R}while(!M.v);c.lineEnd()}}}function X2(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function _0(e){return $n(e[0])<=On?e[0]:ls(e[0])*(($n(e[0])+On)%uo-On)}function cI(e,t){var i=_0(t),a=t[1],c=Yt(a),d=[Yt(i),-rn(i),0],g=0,l=0,b=new Wi;c===1?a=Dr+dn:c===-1&&(a=-Dr-dn);for(var w=0,A=e.length;w<A;++w)if(M=(C=e[w]).length)for(var C,M,R=C[M-1],J=_0(R),Y=R[1]/2+$m,de=Yt(Y),G=rn(Y),$=0;$<M;++$,J=re,de=N,G=E,R=U){var U=C[$],re=_0(U),Z=U[1]/2+$m,N=Yt(Z),E=rn(Z),k=re-J,H=k>=0?1:-1,q=H*k,ee=q>On,ve=de*N;if(b.add(co(ve*H*Yt(q),G*E+ve*rn(q))),g+=ee?k+H*uo:k,ee^J>=i^re>=i){var xe=_h(Qu(R),Qu(U));Xm(xe);var be=_h(d,xe);Xm(be);var te=(ee^k>=0?-1:1)*ho(be[2]);(a>te||a===te&&(xe[0]||xe[1]))&&(l+=ee^k>=0?1:-1)}}return(g<-dn||g<dn&&b<-_d)^l&1}function hI(e,t,i,a){return function(c){var d=t(c),g=lI(),l=t(g),b=!1,w,A,C,M={point:R,lineStart:Y,lineEnd:de,polygonStart:function(){M.point=G,M.lineStart=$,M.lineEnd=U,A=[],w=[]},polygonEnd:function(){M.point=R,M.lineStart=Y,M.lineEnd=de,A=WC(A);var re=cI(w,a);A.length?(b||(c.polygonStart(),b=!0),uI(A,cL,re,i,c)):re&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),A=w=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function R(re,Z){e(re,Z)&&c.point(re,Z)}function J(re,Z){d.point(re,Z)}function Y(){M.point=J,d.lineStart()}function de(){M.point=R,d.lineEnd()}function G(re,Z){C.push([re,Z]),l.point(re,Z)}function $(){l.lineStart(),C=[]}function U(){G(C[0][0],C[0][1]),l.lineEnd();var re=l.clean(),Z=g.result(),N,E=Z.length,k,H,q;if(C.pop(),w.push(C),C=null,!!E){if(re&1){if(H=Z[0],(k=H.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),N=0;N<k;++N)c.point((q=H[N])[0],q[1]);c.lineEnd()}return}E>1&&re&2&&Z.push(Z.pop().concat(Z.shift())),A.push(Z.filter(uL))}}return M}}function uL(e){return e.length>1}function cL(e,t){return((e=e.x)[0]<0?e[1]-Dr-dn:Dr-e[1])-((t=t.x)[0]<0?t[1]-Dr-dn:Dr-t[1])}const a_=hI(function(){return!0},hL,dL,[-On,-Dr]);function hL(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(d,g){var l=d>0?On:-On,b=$n(d-t);$n(b-On)<dn?(e.point(t,i=(i+g)/2>0?Dr:-Dr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(d,i),c=0):a!==l&&b>=On&&($n(t-a)<dn&&(t-=a*dn),$n(d-l)<dn&&(d-=l*dn),i=fL(t,i,d,g),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),c=0),e.point(t=d,i=g),a=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function fL(e,t,i,a){var c,d,g=Yt(e-i);return $n(g)>dn?Ah((Yt(t)*(d=rn(a))*Yt(i)-Yt(a)*(c=rn(t))*Yt(e))/(c*d*g)):(t+a)/2}function dL(e,t,i,a){var c;if(e==null)c=i*Dr,a.point(-On,c),a.point(0,c),a.point(On,c),a.point(On,0),a.point(On,-c),a.point(0,-c),a.point(-On,-c),a.point(-On,0),a.point(-On,c);else if($n(e[0]-t[0])>dn){var d=e[0]<t[0]?On:-On;c=i*d/2,a.point(-d,c),a.point(0,c),a.point(d,c)}else a.point(t[0],t[1])}function fI(e){var t=rn(e),i=6*pn,a=t>0,c=$n(t)>dn;function d(A,C,M,R){aI(R,e,i,M,A,C)}function g(A,C){return rn(A)*rn(C)>t}function l(A){var C,M,R,J,Y;return{lineStart:function(){J=R=!1,Y=1},point:function(de,G){var $=[de,G],U,re=g(de,G),Z=a?re?0:w(de,G):re?w(de+(de<0?On:-On),G):0;if(!C&&(J=R=re)&&A.lineStart(),re!==R&&(U=b(C,$),(!U||om(C,U)||om($,U))&&($[2]=1)),re!==R)Y=0,re?(A.lineStart(),U=b($,C),A.point(U[0],U[1])):(U=b(C,$),A.point(U[0],U[1],2),A.lineEnd()),C=U;else if(c&&C&&a^re){var N;!(Z&M)&&(N=b($,C,!0))&&(Y=0,a?(A.lineStart(),A.point(N[0][0],N[0][1]),A.point(N[1][0],N[1][1]),A.lineEnd()):(A.point(N[1][0],N[1][1]),A.lineEnd(),A.lineStart(),A.point(N[0][0],N[0][1],3)))}re&&(!C||!om(C,$))&&A.point($[0],$[1]),C=$,R=re,M=Z},lineEnd:function(){R&&A.lineEnd(),C=null},clean:function(){return Y|(J&&R)<<1}}}function b(A,C,M){var R=Qu(A),J=Qu(C),Y=[1,0,0],de=_h(R,J),G=Rp(de,de),$=de[0],U=G-$*$;if(!U)return!M&&A;var re=t*G/U,Z=-t*$/U,N=_h(Y,de),E=jp(Y,re),k=jp(de,Z);v0(E,k);var H=N,q=Rp(E,H),ee=Rp(H,H),ve=q*q-ee*(Rp(E,E)-1);if(!(ve<0)){var xe=_i(ve),be=jp(H,(-q-xe)/ee);if(v0(be,E),be=Wm(be),!M)return be;var te=A[0],ue=C[0],ne=A[1],ie=C[1],ye;ue<te&&(ye=te,te=ue,ue=ye);var Te=ue-te,Se=$n(Te-On)<dn,$e=Se||Te<dn;if(!Se&&ie<ne&&(ye=ne,ne=ie,ie=ye),$e?Se?ne+ie>0^be[1]<($n(be[0]-te)<dn?ne:ie):ne<=be[1]&&be[1]<=ie:Te>On^(te<=be[0]&&be[0]<=ue)){var Pe=jp(H,(-q+xe)/ee);return v0(Pe,E),[be,Wm(Pe)]}}}function w(A,C){var M=a?e:On-e,R=0;return A<-M?R|=1:A>M&&(R|=2),C<-M?R|=4:C>M&&(R|=8),R}return hI(g,l,d,a?[0,-e]:[-On,e-On])}function pL(e,t,i,a,c,d){var g=e[0],l=e[1],b=t[0],w=t[1],A=0,C=1,M=b-g,R=w-l,J;if(J=i-g,!(!M&&J>0)){if(J/=M,M<0){if(J<A)return;J<C&&(C=J)}else if(M>0){if(J>C)return;J>A&&(A=J)}if(J=c-g,!(!M&&J<0)){if(J/=M,M<0){if(J>C)return;J>A&&(A=J)}else if(M>0){if(J<A)return;J<C&&(C=J)}if(J=a-l,!(!R&&J>0)){if(J/=R,R<0){if(J<A)return;J<C&&(C=J)}else if(R>0){if(J>C)return;J>A&&(A=J)}if(J=d-l,!(!R&&J<0)){if(J/=R,R<0){if(J>C)return;J>A&&(A=J)}else if(R>0){if(J<A)return;J<C&&(C=J)}return A>0&&(e[0]=g+A*M,e[1]=l+A*R),C<1&&(t[0]=g+C*M,t[1]=l+C*R),!0}}}}}var Ff=1e9,Bp=-Ff;function Rg(e,t,i,a){function c(w,A){return e<=w&&w<=i&&t<=A&&A<=a}function d(w,A,C,M){var R=0,J=0;if(w==null||(R=g(w,C))!==(J=g(A,C))||b(w,A)<0^C>0)do M.point(R===0||R===3?e:i,R>1?a:t);while((R=(R+C+4)%4)!==J);else M.point(A[0],A[1])}function g(w,A){return $n(w[0]-e)<dn?A>0?0:3:$n(w[0]-i)<dn?A>0?2:1:$n(w[1]-t)<dn?A>0?1:0:A>0?3:2}function l(w,A){return b(w.x,A.x)}function b(w,A){var C=g(w,1),M=g(A,1);return C!==M?C-M:C===0?A[1]-w[1]:C===1?w[0]-A[0]:C===2?w[1]-A[1]:A[0]-w[0]}return function(w){var A=w,C=lI(),M,R,J,Y,de,G,$,U,re,Z,N,E={point:k,lineStart:ve,lineEnd:xe,polygonStart:q,polygonEnd:ee};function k(te,ue){c(te,ue)&&A.point(te,ue)}function H(){for(var te=0,ue=0,ne=R.length;ue<ne;++ue)for(var ie=R[ue],ye=1,Te=ie.length,Se=ie[0],$e,Pe,Le=Se[0],Xe=Se[1];ye<Te;++ye)$e=Le,Pe=Xe,Se=ie[ye],Le=Se[0],Xe=Se[1],Pe<=a?Xe>a&&(Le-$e)*(a-Pe)>(Xe-Pe)*(e-$e)&&++te:Xe<=a&&(Le-$e)*(a-Pe)<(Xe-Pe)*(e-$e)&&--te;return te}function q(){A=C,M=[],R=[],N=!0}function ee(){var te=H(),ue=N&&te,ne=(M=WC(M)).length;(ue||ne)&&(w.polygonStart(),ue&&(w.lineStart(),d(null,null,1,w),w.lineEnd()),ne&&uI(M,l,te,d,w),w.polygonEnd()),A=w,M=R=J=null}function ve(){E.point=be,R&&R.push(J=[]),Z=!0,re=!1,$=U=NaN}function xe(){M&&(be(Y,de),G&&re&&C.rejoin(),M.push(C.result())),E.point=k,re&&A.lineEnd()}function be(te,ue){var ne=c(te,ue);if(R&&J.push([te,ue]),Z)Y=te,de=ue,G=ne,Z=!1,ne&&(A.lineStart(),A.point(te,ue));else if(ne&&re)A.point(te,ue);else{var ie=[$=Math.max(Bp,Math.min(Ff,$)),U=Math.max(Bp,Math.min(Ff,U))],ye=[te=Math.max(Bp,Math.min(Ff,te)),ue=Math.max(Bp,Math.min(Ff,ue))];pL(ie,ye,e,t,i,a)?(re||(A.lineStart(),A.point(ie[0],ie[1])),A.point(ye[0],ye[1]),ne||A.lineEnd(),N=!1):ne&&(A.lineStart(),A.point(te,ue),N=!1)}$=te,U=ue,re=ne}return E}}function mL(){var e=0,t=0,i=960,a=500,c,d,g;return g={stream:function(l){return c&&d===l?c:c=Rg(e,t,i,a)(d=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],a=+l[1][1],c=d=null,g):[[e,t],[i,a]]}}}var l_,u_,sm,am,xh={sphere:Mr,point:Mr,lineStart:gL,lineEnd:Mr,polygonStart:Mr,polygonEnd:Mr};function gL(){xh.point=vL,xh.lineEnd=yL}function yL(){xh.point=xh.lineEnd=Mr}function vL(e,t){e*=pn,t*=pn,u_=e,sm=Yt(t),am=rn(t),xh.point=_L}function _L(e,t){e*=pn,t*=pn;var i=Yt(t),a=rn(t),c=$n(e-u_),d=rn(c),g=Yt(c),l=a*g,b=am*i-sm*a*d,w=sm*i+am*a*d;l_.add(co(_i(l*l+b*b),w)),u_=e,sm=i,am=a}function dI(e){return l_=new Wi,zs(e,xh),+l_}var c_=[null,null],xL={type:"LineString",coordinates:c_};function ng(e,t){return c_[0]=e,c_[1]=t,dI(xL)}var q2={Feature:function(e,t){return rg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(rg(i[a].geometry,t))return!0;return!1}},K2={Sphere:function(){return!0},Point:function(e,t){return Y2(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(Y2(i[a],t))return!0;return!1},LineString:function(e,t){return J2(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(J2(i[a],t))return!0;return!1},Polygon:function(e,t){return Q2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(Q2(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(rg(i[a],t))return!0;return!1}};function rg(e,t){return e&&K2.hasOwnProperty(e.type)?K2[e.type](e,t):!1}function Y2(e,t){return ng(e,t)===0}function J2(e,t){for(var i,a,c,d=0,g=e.length;d<g;d++){if(a=ng(e[d],t),a===0||d>0&&(c=ng(e[d],e[d-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<_d*c))return!0;i=a}return!1}function Q2(e,t){return!!cI(e.map(wL),pI(t))}function wL(e){return e=e.map(pI),e.pop(),e}function pI(e){return[e[0]*pn,e[1]*pn]}function bL(e,t){return(e&&q2.hasOwnProperty(e.type)?q2[e.type]:rg)(e,t)}function eS(e,t,i){var a=eh(e,t-dn,i).concat(t);return function(c){return a.map(function(d){return[c,d]})}}function tS(e,t,i){var a=eh(e,t-dn,i).concat(t);return function(c){return a.map(function(d){return[d,c]})}}function mI(){var e,t,i,a,c,d,g,l,b=10,w=b,A=90,C=360,M,R,J,Y,de=2.5;function G(){return{type:"MultiLineString",coordinates:$()}}function $(){return eh(Op(a/A)*A,i,A).map(J).concat(eh(Op(l/C)*C,g,C).map(Y)).concat(eh(Op(t/b)*b,e,b).filter(function(U){return $n(U%A)>dn}).map(M)).concat(eh(Op(d/w)*w,c,w).filter(function(U){return $n(U%C)>dn}).map(R))}return G.lines=function(){return $().map(function(U){return{type:"LineString",coordinates:U}})},G.outline=function(){return{type:"Polygon",coordinates:[J(a).concat(Y(g).slice(1),J(i).reverse().slice(1),Y(l).reverse().slice(1))]}},G.extent=function(U){return arguments.length?G.extentMajor(U).extentMinor(U):G.extentMinor()},G.extentMajor=function(U){return arguments.length?(a=+U[0][0],i=+U[1][0],l=+U[0][1],g=+U[1][1],a>i&&(U=a,a=i,i=U),l>g&&(U=l,l=g,g=U),G.precision(de)):[[a,l],[i,g]]},G.extentMinor=function(U){return arguments.length?(t=+U[0][0],e=+U[1][0],d=+U[0][1],c=+U[1][1],t>e&&(U=t,t=e,e=U),d>c&&(U=d,d=c,c=U),G.precision(de)):[[t,d],[e,c]]},G.step=function(U){return arguments.length?G.stepMajor(U).stepMinor(U):G.stepMinor()},G.stepMajor=function(U){return arguments.length?(A=+U[0],C=+U[1],G):[A,C]},G.stepMinor=function(U){return arguments.length?(b=+U[0],w=+U[1],G):[b,w]},G.precision=function(U){return arguments.length?(de=+U,M=eS(d,c,90),R=tS(t,e,de),J=eS(l,g,90),Y=tS(a,i,de),G):de},G.extentMajor([[-180,-90+dn],[180,90-dn]]).extentMinor([[-180,-80-dn],[180,80+dn]])}function SL(){return mI()()}function EL(e,t){var i=e[0]*pn,a=e[1]*pn,c=t[0]*pn,d=t[1]*pn,g=rn(a),l=Yt(a),b=rn(d),w=Yt(d),A=g*rn(i),C=g*Yt(i),M=b*rn(c),R=b*Yt(c),J=2*ho(_i(O2(d-a)+g*b*O2(c-i))),Y=Yt(J),de=J?function(G){var $=Yt(G*=J)/Y,U=Yt(J-G)/Y,re=U*A+$*M,Z=U*C+$*R,N=U*l+$*w;return[co(Z,re)*dr,co(N,_i(re*re+Z*Z))*dr]}:function(){return[i*dr,a*dr]};return de.distance=J,de}const xd=e=>e;var x0=new Wi,h_=new Wi,gI,yI,f_,d_,Nl={point:Mr,lineStart:Mr,lineEnd:Mr,polygonStart:function(){Nl.lineStart=TL,Nl.lineEnd=IL},polygonEnd:function(){Nl.lineStart=Nl.lineEnd=Nl.point=Mr,x0.add($n(h_)),h_=new Wi},result:function(){var e=x0/2;return x0=new Wi,e}};function TL(){Nl.point=CL}function CL(e,t){Nl.point=vI,gI=f_=e,yI=d_=t}function vI(e,t){h_.add(d_*e-f_*t),f_=e,d_=t}function IL(){vI(gI,yI)}const nS=Nl;var wh=1/0,ig=wh,wd=-wh,og=wd,AL={point:PL,lineStart:Mr,lineEnd:Mr,polygonStart:Mr,polygonEnd:Mr,result:function(){var e=[[wh,ig],[wd,og]];return wd=og=-(ig=wh=1/0),e}};function PL(e,t){e<wh&&(wh=e),e>wd&&(wd=e),t<ig&&(ig=t),t>og&&(og=t)}const sg=AL;var p_=0,m_=0,Of=0,ag=0,lg=0,th=0,g_=0,y_=0,Rf=0,_I,xI,ia,oa,Ls={point:ec,lineStart:rS,lineEnd:iS,polygonStart:function(){Ls.lineStart=zL,Ls.lineEnd=LL},polygonEnd:function(){Ls.point=ec,Ls.lineStart=rS,Ls.lineEnd=iS},result:function(){var e=Rf?[g_/Rf,y_/Rf]:th?[ag/th,lg/th]:Of?[p_/Of,m_/Of]:[NaN,NaN];return p_=m_=Of=ag=lg=th=g_=y_=Rf=0,e}};function ec(e,t){p_+=e,m_+=t,++Of}function rS(){Ls.point=kL}function kL(e,t){Ls.point=ML,ec(ia=e,oa=t)}function ML(e,t){var i=e-ia,a=t-oa,c=_i(i*i+a*a);ag+=c*(ia+e)/2,lg+=c*(oa+t)/2,th+=c,ec(ia=e,oa=t)}function iS(){Ls.point=ec}function zL(){Ls.point=FL}function LL(){wI(_I,xI)}function FL(e,t){Ls.point=wI,ec(_I=ia=e,xI=oa=t)}function wI(e,t){var i=e-ia,a=t-oa,c=_i(i*i+a*a);ag+=c*(ia+e)/2,lg+=c*(oa+t)/2,th+=c,c=oa*e-ia*t,g_+=c*(ia+e),y_+=c*(oa+t),Rf+=c*3,ec(ia=e,oa=t)}const oS=Ls;function bI(e){this._context=e}bI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,uo);break}}},result:Mr};var v_=new Wi,w0,SI,EI,jf,Df,ug={point:Mr,lineStart:function(){ug.point=OL},lineEnd:function(){w0&&TI(SI,EI),ug.point=Mr},polygonStart:function(){w0=!0},polygonEnd:function(){w0=null},result:function(){var e=+v_;return v_=new Wi,e}};function OL(e,t){ug.point=TI,SI=jf=e,EI=Df=t}function TI(e,t){jf-=e,Df-=t,v_.add(_i(jf*jf+Df*Df)),jf=e,Df=t}const sS=ug;function CI(){this._string=[]}CI.prototype={_radius:4.5,_circle:aS(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=aS(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function aS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function RL(e,t){var i=4.5,a,c;function d(g){return g&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),zs(g,a(c))),c.result()}return d.area=function(g){return zs(g,a(nS)),nS.result()},d.measure=function(g){return zs(g,a(sS)),sS.result()},d.bounds=function(g){return zs(g,a(sg)),sg.result()},d.centroid=function(g){return zs(g,a(oS)),oS.result()},d.projection=function(g){return arguments.length?(a=g==null?(e=null,xd):(e=g).stream,d):e},d.context=function(g){return arguments.length?(c=g==null?(t=null,new CI):new bI(t=g),typeof i!="function"&&c.pointRadius(i),d):t},d.pointRadius=function(g){return arguments.length?(i=typeof g=="function"?g:(c.pointRadius(+g),+g),d):i},d.projection(e).context(t)}function jL(e){return{stream:zd(e)}}function zd(e){return function(t){var i=new __;for(var a in e)i[a]=e[a];return i.stream=t,i}}function __(){}__.prototype={constructor:__,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function D1(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),zs(i,e.stream(sg)),t(sg.result()),a!=null&&e.clipExtent(a),e}function jg(e,t,i){return D1(e,function(a){var c=t[1][0]-t[0][0],d=t[1][1]-t[0][1],g=Math.min(c/(a[1][0]-a[0][0]),d/(a[1][1]-a[0][1])),l=+t[0][0]+(c-g*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(d-g*(a[1][1]+a[0][1]))/2;e.scale(150*g).translate([l,b])},i)}function B1(e,t,i){return jg(e,[[0,0],t],i)}function N1(e,t,i){return D1(e,function(a){var c=+t,d=c/(a[1][0]-a[0][0]),g=(c-d*(a[1][0]+a[0][0]))/2,l=-d*a[0][1];e.scale(150*d).translate([g,l])},i)}function U1(e,t,i){return D1(e,function(a){var c=+t,d=c/(a[1][1]-a[0][1]),g=-d*a[0][0],l=(c-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([g,l])},i)}var lS=16,DL=rn(30*pn);function uS(e,t){return+t?NL(e,t):BL(e)}function BL(e){return zd({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function NL(e,t){function i(a,c,d,g,l,b,w,A,C,M,R,J,Y,de){var G=w-a,$=A-c,U=G*G+$*$;if(U>4*t&&Y--){var re=g+M,Z=l+R,N=b+J,E=_i(re*re+Z*Z+N*N),k=ho(N/=E),H=$n($n(N)-1)<dn||$n(d-C)<dn?(d+C)/2:co(Z,re),q=e(H,k),ee=q[0],ve=q[1],xe=ee-a,be=ve-c,te=$*xe-G*be;(te*te/U>t||$n((G*xe+$*be)/U-.5)>.3||g*M+l*R+b*J<DL)&&(i(a,c,d,g,l,b,ee,ve,H,re/=E,Z/=E,N,Y,de),de.point(ee,ve),i(ee,ve,H,re,Z,N,w,A,C,M,R,J,Y,de))}}return function(a){var c,d,g,l,b,w,A,C,M,R,J,Y,de={point:G,lineStart:$,lineEnd:re,polygonStart:function(){a.polygonStart(),de.lineStart=Z},polygonEnd:function(){a.polygonEnd(),de.lineStart=$}};function G(k,H){k=e(k,H),a.point(k[0],k[1])}function $(){C=NaN,de.point=U,a.lineStart()}function U(k,H){var q=Qu([k,H]),ee=e(k,H);i(C,M,A,R,J,Y,C=ee[0],M=ee[1],A=k,R=q[0],J=q[1],Y=q[2],lS,a),a.point(C,M)}function re(){de.point=G,a.lineEnd()}function Z(){$(),de.point=N,de.lineEnd=E}function N(k,H){U(c=k,H),d=C,g=M,l=R,b=J,w=Y,de.point=U}function E(){i(C,M,A,R,J,Y,d,g,c,l,b,w,lS,a),de.lineEnd=re,re()}return de}}var UL=zd({point:function(e,t){this.stream.point(e*pn,t*pn)}});function $L(e){return zd({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function VL(e,t,i,a,c){function d(g,l){return g*=a,l*=c,[t+e*g,i-e*l]}return d.invert=function(g,l){return[(g-t)/e*a,(i-l)/e*c]},d}function cS(e,t,i,a,c,d){if(!d)return VL(e,t,i,a,c);var g=rn(d),l=Yt(d),b=g*e,w=l*e,A=g/e,C=l/e,M=(l*i-g*t)/e,R=(l*t+g*i)/e;function J(Y,de){return Y*=a,de*=c,[b*Y-w*de+t,i-w*Y-b*de]}return J.invert=function(Y,de){return[a*(A*Y-C*de+M),c*(R-C*Y-A*de)]},J}function fa(e){return $1(function(){return e})()}function $1(e){var t,i=150,a=480,c=250,d=0,g=0,l=0,b=0,w=0,A,C=0,M=1,R=1,J=null,Y=a_,de=null,G,$,U,re=xd,Z=.5,N,E,k,H,q;function ee(te){return k(te[0]*pn,te[1]*pn)}function ve(te){return te=k.invert(te[0],te[1]),te&&[te[0]*dr,te[1]*dr]}ee.stream=function(te){return H&&q===te?H:H=UL($L(A)(Y(N(re(q=te)))))},ee.preclip=function(te){return arguments.length?(Y=te,J=void 0,be()):Y},ee.postclip=function(te){return arguments.length?(re=te,de=G=$=U=null,be()):re},ee.clipAngle=function(te){return arguments.length?(Y=+te?fI(J=te*pn):(J=null,a_),be()):J*dr},ee.clipExtent=function(te){return arguments.length?(re=te==null?(de=G=$=U=null,xd):Rg(de=+te[0][0],G=+te[0][1],$=+te[1][0],U=+te[1][1]),be()):de==null?null:[[de,G],[$,U]]},ee.scale=function(te){return arguments.length?(i=+te,xe()):i},ee.translate=function(te){return arguments.length?(a=+te[0],c=+te[1],xe()):[a,c]},ee.center=function(te){return arguments.length?(d=te[0]%360*pn,g=te[1]%360*pn,xe()):[d*dr,g*dr]},ee.rotate=function(te){return arguments.length?(l=te[0]%360*pn,b=te[1]%360*pn,w=te.length>2?te[2]%360*pn:0,xe()):[l*dr,b*dr,w*dr]},ee.angle=function(te){return arguments.length?(C=te%360*pn,xe()):C*dr},ee.reflectX=function(te){return arguments.length?(M=te?-1:1,xe()):M<0},ee.reflectY=function(te){return arguments.length?(R=te?-1:1,xe()):R<0},ee.precision=function(te){return arguments.length?(N=uS(E,Z=te*te),be()):_i(Z)},ee.fitExtent=function(te,ue){return jg(ee,te,ue)},ee.fitSize=function(te,ue){return B1(ee,te,ue)},ee.fitWidth=function(te,ue){return N1(ee,te,ue)},ee.fitHeight=function(te,ue){return U1(ee,te,ue)};function xe(){var te=cS(i,0,0,M,R,C).apply(null,t(d,g)),ue=cS(i,a-te[0],c-te[1],M,R,C);return A=j1(l,b,w),E=o_(t,ue),k=o_(A,E),N=uS(E,Z),be()}function be(){return H=q=null,ee}return function(){return t=e.apply(this,arguments),ee.invert=t.invert&&ve,xe()}}function V1(e){var t=0,i=On/3,a=$1(e),c=a(t,i);return c.parallels=function(d){return arguments.length?a(t=d[0]*pn,i=d[1]*pn):[t*dr,i*dr]},c}function GL(e){var t=rn(e);function i(a,c){return[a*t,Yt(c)/t]}return i.invert=function(a,c){return[a/t,ho(c*t)]},i}function II(e,t){var i=Yt(e),a=(i+Yt(t))/2;if($n(a)<dn)return GL(e);var c=1+i*(2*a-i),d=_i(c)/a;function g(l,b){var w=_i(c-2*a*Yt(b))/a;return[w*Yt(l*=a),d-w*rn(l)]}return g.invert=function(l,b){var w=d-b,A=co(l,$n(w))*ls(w);return w*a<0&&(A-=On*ls(l)*ls(w)),[A/a,ho((c-(l*l+w*w)*a*a)/(2*a))]},g}function cg(){return V1(II).scale(155.424).center([0,33.6442])}function AI(){return cg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ZL(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function HL(){var e,t,i=AI(),a,c=cg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d,g=cg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,b,w={point:function(M,R){b=[M,R]}};function A(M){var R=M[0],J=M[1];return b=null,a.point(R,J),b||(d.point(R,J),b)||(l.point(R,J),b)}A.invert=function(M){var R=i.scale(),J=i.translate(),Y=(M[0]-J[0])/R,de=(M[1]-J[1])/R;return(de>=.12&&de<.234&&Y>=-.425&&Y<-.214?c:de>=.166&&de<.234&&Y>=-.214&&Y<-.115?g:i).invert(M)},A.stream=function(M){return e&&t===M?e:e=ZL([i.stream(t=M),c.stream(M),g.stream(M)])},A.precision=function(M){return arguments.length?(i.precision(M),c.precision(M),g.precision(M),C()):i.precision()},A.scale=function(M){return arguments.length?(i.scale(M),c.scale(M*.35),g.scale(M),A.translate(i.translate())):i.scale()},A.translate=function(M){if(!arguments.length)return i.translate();var R=i.scale(),J=+M[0],Y=+M[1];return a=i.translate(M).clipExtent([[J-.455*R,Y-.238*R],[J+.455*R,Y+.238*R]]).stream(w),d=c.translate([J-.307*R,Y+.201*R]).clipExtent([[J-.425*R+dn,Y+.12*R+dn],[J-.214*R-dn,Y+.234*R-dn]]).stream(w),l=g.translate([J-.205*R,Y+.212*R]).clipExtent([[J-.214*R+dn,Y+.166*R+dn],[J-.115*R-dn,Y+.234*R-dn]]).stream(w),C()},A.fitExtent=function(M,R){return jg(A,M,R)},A.fitSize=function(M,R){return B1(A,M,R)},A.fitWidth=function(M,R){return N1(A,M,R)},A.fitHeight=function(M,R){return U1(A,M,R)};function C(){return e=t=null,A}return A.scale(1070)}function PI(e){return function(t,i){var a=rn(t),c=rn(i),d=e(a*c);return d===1/0?[2,0]:[d*c*Yt(t),d*Yt(i)]}}function Ld(e){return function(t,i){var a=_i(t*t+i*i),c=e(a),d=Yt(c),g=rn(c);return[co(t*d,a*g),ho(a&&i*d/a)]}}var G1=PI(function(e){return _i(2/(1+e))});G1.invert=Ld(function(e){return 2*ho(e/2)});function WL(){return fa(G1).scale(124.75).clipAngle(180-.001)}var Z1=PI(function(e){return(e=qC(e))&&e/Yt(e)});Z1.invert=Ld(function(e){return e});function XL(){return fa(Z1).scale(79.4188).clipAngle(180-.001)}function Fd(e,t){return[e,Vm(O1((Dr+t)/2))]}Fd.invert=function(e,t){return[e,2*Ah(XC(t))-Dr]};function qL(){return kI(Fd).scale(961/uo)}function kI(e){var t=fa(e),i=t.center,a=t.scale,c=t.translate,d=t.clipExtent,g=null,l,b,w;t.scale=function(C){return arguments.length?(a(C),A()):a()},t.translate=function(C){return arguments.length?(c(C),A()):c()},t.center=function(C){return arguments.length?(i(C),A()):i()},t.clipExtent=function(C){return arguments.length?(C==null?g=l=b=w=null:(g=+C[0][0],l=+C[0][1],b=+C[1][0],w=+C[1][1]),A()):g==null?null:[[g,l],[b,w]]};function A(){var C=On*a(),M=t(sI(t.rotate()).invert([0,0]));return d(g==null?[[M[0]-C,M[1]-C],[M[0]+C,M[1]+C]]:e===Fd?[[Math.max(M[0]-C,g),l],[Math.min(M[0]+C,b),w]]:[[g,Math.max(M[1]-C,l)],[b,Math.min(M[1]+C,w)]])}return A()}function Np(e){return O1((Dr+e)/2)}function MI(e,t){var i=rn(e),a=e===t?Yt(e):Vm(i/rn(t))/Vm(Np(t)/Np(e)),c=i*y0(Np(e),a)/a;if(!a)return Fd;function d(g,l){c>0?l<-Dr+dn&&(l=-Dr+dn):l>Dr-dn&&(l=Dr-dn);var b=c/y0(Np(l),a);return[b*Yt(a*g),c-b*rn(a*g)]}return d.invert=function(g,l){var b=c-l,w=ls(a)*_i(g*g+b*b),A=co(g,$n(b))*ls(b);return b*a<0&&(A-=On*ls(g)*ls(b)),[A/a,2*Ah(y0(c/w,1/a))-Dr]},d}function KL(){return V1(MI).scale(109.5).parallels([30,30])}function bd(e,t){return[e,t]}bd.invert=bd;function YL(){return fa(bd).scale(152.63)}function zI(e,t){var i=rn(e),a=e===t?Yt(e):(i-rn(t))/(t-e),c=i/a+e;if($n(a)<dn)return bd;function d(g,l){var b=c-l,w=a*g;return[b*Yt(w),c-b*rn(w)]}return d.invert=function(g,l){var b=c-l,w=co(g,$n(b))*ls(b);return b*a<0&&(w-=On*ls(g)*ls(b)),[w/a,c-ls(a)*_i(g*g+b*b)]},d}function JL(){return V1(zI).scale(131.154).center([0,13.9389])}var Yf=1.340264,Jf=-.081106,Qf=893e-6,ed=.003796,hg=_i(3)/2,QL=12;function H1(e,t){var i=ho(hg*Yt(t)),a=i*i,c=a*a*a;return[e*rn(i)/(hg*(Yf+3*Jf*a+c*(7*Qf+9*ed*a))),i*(Yf+Jf*a+c*(Qf+ed*a))]}H1.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,d=0,g,l,b;d<QL&&(l=i*(Yf+Jf*a+c*(Qf+ed*a))-t,b=Yf+3*Jf*a+c*(7*Qf+9*ed*a),i-=g=l/b,a=i*i,c=a*a*a,!($n(g)<_d));++d);return[hg*e*(Yf+3*Jf*a+c*(7*Qf+9*ed*a))/rn(i),ho(Yt(i)/hg)]};function eF(){return fa(H1).scale(177.158)}function W1(e,t){var i=rn(t),a=rn(e)*i;return[i*Yt(e)/a,Yt(t)/a]}W1.invert=Ld(Ah);function tF(){return fa(W1).scale(144.049).clipAngle(60)}function nF(){var e=1,t=0,i=0,a=1,c=1,d=0,g,l,b=null,w,A,C,M=1,R=1,J=zd({point:function(re,Z){var N=U([re,Z]);this.stream.point(N[0],N[1])}}),Y=xd,de,G;function $(){return M=e*a,R=e*c,de=G=null,U}function U(re){var Z=re[0]*M,N=re[1]*R;if(d){var E=N*g-Z*l;Z=Z*g+N*l,N=E}return[Z+t,N+i]}return U.invert=function(re){var Z=re[0]-t,N=re[1]-i;if(d){var E=N*g+Z*l;Z=Z*g-N*l,N=E}return[Z/M,N/R]},U.stream=function(re){return de&&G===re?de:de=J(Y(G=re))},U.postclip=function(re){return arguments.length?(Y=re,b=w=A=C=null,$()):Y},U.clipExtent=function(re){return arguments.length?(Y=re==null?(b=w=A=C=null,xd):Rg(b=+re[0][0],w=+re[0][1],A=+re[1][0],C=+re[1][1]),$()):b==null?null:[[b,w],[A,C]]},U.scale=function(re){return arguments.length?(e=+re,$()):e},U.translate=function(re){return arguments.length?(t=+re[0],i=+re[1],$()):[t,i]},U.angle=function(re){return arguments.length?(d=re%360*pn,l=Yt(d),g=rn(d),$()):d*dr},U.reflectX=function(re){return arguments.length?(a=re?-1:1,$()):a<0},U.reflectY=function(re){return arguments.length?(c=re?-1:1,$()):c<0},U.fitExtent=function(re,Z){return jg(U,re,Z)},U.fitSize=function(re,Z){return B1(U,re,Z)},U.fitWidth=function(re,Z){return N1(U,re,Z)},U.fitHeight=function(re,Z){return U1(U,re,Z)},U}function X1(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}X1.invert=function(e,t){var i=t,a=25,c;do{var d=i*i,g=d*d;i-=c=(i*(1.007226+d*(.015085+g*(-.044475+.028874*d-.005916*g)))-t)/(1.007226+d*(.015085*3+g*(-.044475*7+.028874*9*d-.005916*11*g)))}while($n(c)>dn&&--a>0);return[e/(.8707+(d=i*i)*(-.131979+d*(-.013791+d*d*d*(.003971-.001529*d)))),i]};function rF(){return fa(X1).scale(175.295)}function q1(e,t){return[rn(t)*Yt(e),Yt(t)]}q1.invert=Ld(ho);function iF(){return fa(q1).scale(249.5).clipAngle(90+dn)}function K1(e,t){var i=rn(t),a=1+rn(e)*i;return[i*Yt(e)/a,Yt(t)/a]}K1.invert=Ld(function(e){return 2*Ah(e)});function oF(){return fa(K1).scale(250).clipAngle(142)}function Y1(e,t){return[Vm(O1((Dr+t)/2)),-e]}Y1.invert=function(e,t){return[-t,2*Ah(XC(e))-Dr]};function sF(){var e=kI(Y1),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const aF=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:AI,geoAlbersUsa:HL,geoArea:Yz,geoAzimuthalEqualArea:WL,geoAzimuthalEqualAreaRaw:G1,geoAzimuthalEquidistant:XL,geoAzimuthalEquidistantRaw:Z1,geoBounds:tL,geoCentroid:aL,geoCircle:lL,geoClipAntimeridian:a_,geoClipCircle:fI,geoClipExtent:mL,geoClipRectangle:Rg,geoConicConformal:KL,geoConicConformalRaw:MI,geoConicEqualArea:cg,geoConicEqualAreaRaw:II,geoConicEquidistant:JL,geoConicEquidistantRaw:zI,geoContains:bL,geoDistance:ng,geoEqualEarth:eF,geoEqualEarthRaw:H1,geoEquirectangular:YL,geoEquirectangularRaw:bd,geoGnomonic:tF,geoGnomonicRaw:W1,geoGraticule:mI,geoGraticule10:SL,geoIdentity:nF,geoInterpolate:EL,geoLength:dI,geoMercator:qL,geoMercatorRaw:Fd,geoNaturalEarth1:rF,geoNaturalEarth1Raw:X1,geoOrthographic:iF,geoOrthographicRaw:q1,geoPath:RL,geoProjection:fa,geoProjectionMutator:$1,geoRotation:sI,geoStereographic:oF,geoStereographicRaw:K1,geoStream:zs,geoTransform:jL,geoTransverseMercator:sF,geoTransverseMercatorRaw:Y1},Symbol.toStringTag,{value:"Module"})),lF=C_(aF);var nu=2*Math.PI*6378137/2,uF=Math.PI/180;function LI(e){return e=e||256,2*Math.PI*6378137/e}function cF(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function x_(e,t,i){var a=FI(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function FI(e,t,i){var a=t,c=ox(e[0]),d=ix(e[1]),g=Math.sin(d*uF),l=Math.pow(2,a),b=l*(c/360+.5),w=l*(.5-.25*Math.log((1+g)/(1-g))/Math.PI);return ic([b,w,a],i)}function hF(e,t=6){var i=e[0],a=e[1],c=e[2],d=e[3],g=(i-c)/2+c,l=(a-d)/2+d;return t!=null&&(g=Number(g.toFixed(t)),l=Number(l.toFixed(t))),[g,l]}function fg(e,t,i={enable:!0,decimal:1}){e=Dg(e,t);var a=e[0],c=e[1],d=a*nu/180,g=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return g=g*nu/180,i.enable&&(d=Number(d.toFixed(i.decimal)),g=Number(g.toFixed(i.decimal))),[d,g]}function w_(e,t=6){var i=e[0],a=e[1],c=i/nu*180,d=a/nu*180;return d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),d=Number(d.toFixed(t))),[c,d]}function J1(e,t,i){var a=e[0],c=e[1],d=nx(t,i),g=(a+nu)/d,l=(c+nu)/d;return[g,l,t]}function OI(e,t,i){e=Dg(e,i);var a=fg(e),c=J1(a,t);return Q1(c)}function fF(e,t,i){if(e=Dg(e,i),t===0)return[0,0,0];var a=OI(e,t);return jI(a)}function dF(e,t){if(t===0)return[0,0,0];var i=J1(e,t);return Q1(i)}function b_(e,t,i=1){var a=e[0],c=e[1],d=e[2],g=nx(d,t),l=a*g-nu,b=c*g-nu;return i!=null&&(l=Number(l.toFixed(i)),b=Number(b.toFixed(i))),[l,b]}function Q1(e,t,i){t=t||256;var a=e[0],c=e[1],d=e[2];if(d===0)return[0,0,0];tx(d);var g=Math.ceil(a/t)-1,l=Math.ceil(c/t)-1;return g<0&&(g=0),l<0&&(l=0),[g,l,d]}function ex(e,t,i){ic(e,i),t=t||256;var a=e[0],c=e[1],d=e[2],g=b_([a*t,c*t,d]),l=b_([(a+1)*t,(c+1)*t,d]);return[g[0],g[1],l[0],l[1]]}function RI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var d=ex([i,a,c]),g=d[0],l=d[1],b=d[2],w=d[3],A=w_([g,l,c]),C=w_([b,w,c]);return[A[0],A[1],C[0],C[1]]}function pF(e){var t=Od(e);return ex(t)}function mF(e){var t=Od(e);return RI(t)}function jI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var d=i,g=Math.pow(2,c)-1-a;return[d,g,c]}function Od(e){var t=e[0],i=e[1],a=e[2],c=t,d=Math.pow(2,a)-i-1;return[c,d,a]}function gF(e){var t=Od(e);return DI(t)}function DI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var d="";return a=Math.pow(2,c)-1-a,rx(c,0,-1).map(function(g){var l=0,b=1<<g-1;i&b&&(l+=1),a&b&&(l+=2),d=d.concat(l)}),d}function yF(e){var t=BI(e);return Od(t)}function BI(e){var t=0,i=0,a=e.length;return rx(a,0,-1).map(function(c){var d=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=d;break;case 2:i+=d;break;case 3:t+=d,i+=d;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function vF(e){var t=fg([e[0],e[1]]),i=fg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function ic(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=tx(c),e=NI(e),e}function NI(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function tx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Dg(e,t){if(t===!1)return e;var i=ox(e[0]),a=ix(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function nx(e,t){return LI(t)/Math.pow(2,e)}function rx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),d=0;d<a;d++,e+=i)c[d]=e;return c}function _F(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(d){d[0]<t&&(t=d[0]),d[1]<i&&(i=d[1]),d[2]>a&&(a=d[2]),d[3]>c&&(c=d[3])}),[t,i,a,c]}}function xF(e){try{return ic(e),!0}catch{return!1}}function ix(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function ox(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function wF(e){var t=x_([e[0],e[1]],32),i=x_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=bF(a);if(c===0)return[0,0,0];var d=a[0]>>>32-c,g=a[1]>>>32-c;return[d,g,c]}function bF(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const SF=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:hF,bboxToMeters:vF,bboxToTile:wF,googleToBBox:mF,googleToBBoxMeters:pF,googleToQuadkey:gF,googleToTile:Od,hash:cF,initialResolution:LI,latitude:ix,lngLatToGoogle:fF,lngLatToMeters:fg,lngLatToTile:OI,longitude:ox,maxBBox:_F,metersToLngLat:w_,metersToPixels:J1,metersToTile:dF,pixelsToMeters:b_,pixelsToTile:Q1,pointToTile:x_,pointToTileFraction:FI,quadkeyToGoogle:BI,quadkeyToTile:yF,range:rx,resolution:nx,tileToBBox:RI,tileToBBoxMeters:ex,tileToGoogle:jI,tileToQuadkey:DI,validTile:xF,validateLngLat:Dg,validateTile:ic,validateZoom:tx,wrapTile:NI},Symbol.toStringTag,{value:"Module"})),EF=C_(SF);var Bg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Bg.read=function(e,t,i,a,c){var d,g,l=c*8-a-1,b=(1<<l)-1,w=b>>1,A=-7,C=i?c-1:0,M=i?-1:1,R=e[t+C];for(C+=M,d=R&(1<<-A)-1,R>>=-A,A+=l;A>0;d=d*256+e[t+C],C+=M,A-=8);for(g=d&(1<<-A)-1,d>>=-A,A+=a;A>0;g=g*256+e[t+C],C+=M,A-=8);if(d===0)d=1-w;else{if(d===b)return g?NaN:(R?-1:1)*(1/0);g=g+Math.pow(2,a),d=d-w}return(R?-1:1)*g*Math.pow(2,d-a)};Bg.write=function(e,t,i,a,c,d){var g,l,b,w=d*8-c-1,A=(1<<w)-1,C=A>>1,M=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=a?0:d-1,J=a?1:-1,Y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,g=A):(g=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-g))<1&&(g--,b*=2),g+C>=1?t+=M/b:t+=M*Math.pow(2,1-C),t*b>=2&&(g++,b/=2),g+C>=A?(l=0,g=A):g+C>=1?(l=(t*b-1)*Math.pow(2,c),g=g+C):(l=t*Math.pow(2,C-1)*Math.pow(2,c),g=0));c>=8;e[i+R]=l&255,R+=J,l/=256,c-=8);for(g=g<<c|l,w+=c;w>0;e[i+R]=g&255,R+=J,g/=256,w-=8);e[i+R-J]|=Y*128};var TF=Yn,Up=Bg;function Yn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Yn.Varint=0;Yn.Fixed64=1;Yn.Bytes=2;Yn.Fixed32=5;var S_=65536*65536,hS=1/S_,CF=12,UI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Yn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,d=this.pos;this.type=a&7,e(c,t,this),this.pos===d&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=$p(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=dS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=$p(this.buf,this.pos)+$p(this.buf,this.pos+4)*S_;return this.pos+=8,e},readSFixed64:function(){var e=$p(this.buf,this.pos)+dS(this.buf,this.pos+4)*S_;return this.pos+=8,e},readFloat:function(){var e=Up.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Up.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,IF(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=CF&&UI?UF(this.buf,t,e):NF(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Yn.Bytes)return e.push(this.readVarint(t));var i=ja(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSVarint());var t=ja(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Yn.Bytes)return e.push(this.readBoolean());var t=ja(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFloat());var t=ja(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Yn.Bytes)return e.push(this.readDouble());var t=ja(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFixed32());var t=ja(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSFixed32());var t=ja(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFixed64());var t=ja(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSFixed64());var t=ja(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Yn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Yn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Yn.Fixed32)this.pos+=4;else if(t===Yn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Oc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Oc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Oc(this.buf,e&-1,this.pos),Oc(this.buf,Math.floor(e*hS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Oc(this.buf,e&-1,this.pos),Oc(this.buf,Math.floor(e*hS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){AF(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=$F(this.buf,e,this.pos);var i=this.pos-t;i>=128&&fS(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Up.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Up.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&fS(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Yn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,MF,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,zF,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,OF,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,LF,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,FF,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,RF,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,jF,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,DF,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,BF,t)},writeBytesField:function(e,t){this.writeTag(e,Yn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Yn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Yn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Yn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function IF(e,t,i){var a=i.buf,c,d;if(d=a[i.pos++],c=(d&112)>>4,d<128||(d=a[i.pos++],c|=(d&127)<<3,d<128)||(d=a[i.pos++],c|=(d&127)<<10,d<128)||(d=a[i.pos++],c|=(d&127)<<17,d<128)||(d=a[i.pos++],c|=(d&127)<<24,d<128)||(d=a[i.pos++],c|=(d&1)<<31,d<128))return Fc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function ja(e){return e.type===Yn.Bytes?e.readVarint()+e.pos:e.pos+1}function Fc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function AF(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),PF(i,a,t),kF(a,t)}function PF(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function kF(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function fS(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function MF(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function zF(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function LF(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function FF(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function OF(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function RF(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function jF(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function DF(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function BF(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function $p(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Oc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function dS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function NF(e,t,i){for(var a="",c=t;c<i;){var d=e[c],g=null,l=d>239?4:d>223?3:d>191?2:1;if(c+l>i)break;var b,w,A;l===1?d<128&&(g=d):l===2?(b=e[c+1],(b&192)===128&&(g=(d&31)<<6|b&63,g<=127&&(g=null))):l===3?(b=e[c+1],w=e[c+2],(b&192)===128&&(w&192)===128&&(g=(d&15)<<12|(b&63)<<6|w&63,(g<=2047||g>=55296&&g<=57343)&&(g=null))):l===4&&(b=e[c+1],w=e[c+2],A=e[c+3],(b&192)===128&&(w&192)===128&&(A&192)===128&&(g=(d&15)<<18|(b&63)<<12|(w&63)<<6|A&63,(g<=65535||g>=1114112)&&(g=null))),g===null?(g=65533,l=1):g>65535&&(g-=65536,a+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023),a+=String.fromCharCode(g),c+=l}return a}function UF(e,t,i){return UI.decode(e.subarray(t,i))}function $F(e,t,i){for(var a=0,c,d;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(d)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,d=c;continue}else c=d-55296<<10|c-56320|65536,d=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):d=c;continue}else d&&(e[i++]=239,e[i++]=191,e[i++]=189,d=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var sx={exports:{}},$I=function(t,i){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(i,c)}},VF=$I,oc=Object.prototype.toString;function ax(e){return oc.call(e)==="[object Array]"}function E_(e){return typeof e>"u"}function GF(e){return e!==null&&!E_(e)&&e.constructor!==null&&!E_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function ZF(e){return oc.call(e)==="[object ArrayBuffer]"}function HF(e){return typeof FormData<"u"&&e instanceof FormData}function WF(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function XF(e){return typeof e=="string"}function qF(e){return typeof e=="number"}function VI(e){return e!==null&&typeof e=="object"}function lm(e){if(oc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function KF(e){return oc.call(e)==="[object Date]"}function YF(e){return oc.call(e)==="[object File]"}function JF(e){return oc.call(e)==="[object Blob]"}function GI(e){return oc.call(e)==="[object Function]"}function QF(e){return VI(e)&&GI(e.pipe)}function eO(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function tO(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function nO(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function lx(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),ax(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function T_(){var e={};function t(c,d){lm(e[d])&&lm(c)?e[d]=T_(e[d],c):lm(c)?e[d]=T_({},c):ax(c)?e[d]=c.slice():e[d]=c}for(var i=0,a=arguments.length;i<a;i++)lx(arguments[i],t);return e}function rO(e,t,i){return lx(t,function(c,d){i&&typeof c=="function"?e[d]=VF(c,i):e[d]=c}),e}function iO(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Vo={isArray:ax,isArrayBuffer:ZF,isBuffer:GF,isFormData:HF,isArrayBufferView:WF,isString:XF,isNumber:qF,isObject:VI,isPlainObject:lm,isUndefined:E_,isDate:KF,isFile:YF,isBlob:JF,isFunction:GI,isStream:QF,isURLSearchParams:eO,isStandardBrowserEnv:nO,forEach:lx,merge:T_,extend:rO,trim:tO,stripBOM:iO},Rc=Vo;function pS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ZI=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Rc.isURLSearchParams(i))c=i.toString();else{var d=[];Rc.forEach(i,function(b,w){b===null||typeof b>"u"||(Rc.isArray(b)?w=w+"[]":b=[b],Rc.forEach(b,function(C){Rc.isDate(C)?C=C.toISOString():Rc.isObject(C)&&(C=JSON.stringify(C)),d.push(pS(w)+"="+pS(C))}))}),c=d.join("&")}if(c){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},oO=Vo;function Ng(){this.handlers=[]}Ng.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Ng.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Ng.prototype.forEach=function(t){oO.forEach(this.handlers,function(a){a!==null&&t(a)})};var sO=Ng,aO=Vo,lO=function(t,i){aO.forEach(t,function(c,d){d!==i&&d.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[d])})},HI=function(t,i,a,c,d){return t.config=i,a&&(t.code=a),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},b0,mS;function WI(){if(mS)return b0;mS=1;var e=HI;return b0=function(i,a,c,d,g){var l=new Error(i);return e(l,a,c,d,g)},b0}var S0,gS;function uO(){if(gS)return S0;gS=1;var e=WI();return S0=function(i,a,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},S0}var E0,yS;function cO(){if(yS)return E0;yS=1;var e=Vo;return E0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,d,g,l,b){var w=[];w.push(a+"="+encodeURIComponent(c)),e.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),e.isString(g)&&w.push("path="+g),e.isString(l)&&w.push("domain="+l),b===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),E0}var T0,vS;function hO(){return vS||(vS=1,T0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),T0}var C0,_S;function fO(){return _S||(_S=1,C0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),C0}var I0,xS;function dO(){if(xS)return I0;xS=1;var e=hO(),t=fO();return I0=function(a,c){return a&&!e(c)?t(a,c):c},I0}var A0,wS;function pO(){if(wS)return A0;wS=1;var e=Vo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return A0=function(a){var c={},d,g,l;return a&&e.forEach(a.split(`
`),function(w){if(l=w.indexOf(":"),d=e.trim(w.substr(0,l)).toLowerCase(),g=e.trim(w.substr(l+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([g]):c[d]=c[d]?c[d]+", "+g:g}}),c},A0}var P0,bS;function mO(){if(bS)return P0;bS=1;var e=Vo;return P0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function d(g){var l=g;return i&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=d(window.location.href),function(l){var b=e.isString(l)?d(l):l;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),P0}var k0,SS;function ES(){if(SS)return k0;SS=1;var e=Vo,t=uO(),i=cO(),a=ZI,c=dO(),d=pO(),g=mO(),l=WI();return k0=function(w){return new Promise(function(C,M){var R=w.data,J=w.headers,Y=w.responseType;e.isFormData(R)&&delete J["Content-Type"];var de=new XMLHttpRequest;if(w.auth){var G=w.auth.username||"",$=w.auth.password?unescape(encodeURIComponent(w.auth.password)):"";J.Authorization="Basic "+btoa(G+":"+$)}var U=c(w.baseURL,w.url);de.open(w.method.toUpperCase(),a(U,w.params,w.paramsSerializer),!0),de.timeout=w.timeout;function re(){if(de){var N="getAllResponseHeaders"in de?d(de.getAllResponseHeaders()):null,E=!Y||Y==="text"||Y==="json"?de.responseText:de.response,k={data:E,status:de.status,statusText:de.statusText,headers:N,config:w,request:de};t(C,M,k),de=null}}if("onloadend"in de?de.onloadend=re:de.onreadystatechange=function(){!de||de.readyState!==4||de.status===0&&!(de.responseURL&&de.responseURL.indexOf("file:")===0)||setTimeout(re)},de.onabort=function(){de&&(M(l("Request aborted",w,"ECONNABORTED",de)),de=null)},de.onerror=function(){M(l("Network Error",w,null,de)),de=null},de.ontimeout=function(){var E="timeout of "+w.timeout+"ms exceeded";w.timeoutErrorMessage&&(E=w.timeoutErrorMessage),M(l(E,w,w.transitional&&w.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",de)),de=null},e.isStandardBrowserEnv()){var Z=(w.withCredentials||g(U))&&w.xsrfCookieName?i.read(w.xsrfCookieName):void 0;Z&&(J[w.xsrfHeaderName]=Z)}"setRequestHeader"in de&&e.forEach(J,function(E,k){typeof R>"u"&&k.toLowerCase()==="content-type"?delete J[k]:de.setRequestHeader(k,E)}),e.isUndefined(w.withCredentials)||(de.withCredentials=!!w.withCredentials),Y&&Y!=="json"&&(de.responseType=w.responseType),typeof w.onDownloadProgress=="function"&&de.addEventListener("progress",w.onDownloadProgress),typeof w.onUploadProgress=="function"&&de.upload&&de.upload.addEventListener("progress",w.onUploadProgress),w.cancelToken&&w.cancelToken.promise.then(function(E){de&&(de.abort(),M(E),de=null)}),R||(R=null),de.send(R)})},k0}var Pi=Vo,TS=lO,gO=HI,yO={"Content-Type":"application/x-www-form-urlencoded"};function CS(e,t){!Pi.isUndefined(e)&&Pi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function vO(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=ES()),e}function _O(e,t,i){if(Pi.isString(e))try{return(t||JSON.parse)(e),Pi.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var Ug={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:vO(),transformRequest:[function(t,i){return TS(i,"Accept"),TS(i,"Content-Type"),Pi.isFormData(t)||Pi.isArrayBuffer(t)||Pi.isBuffer(t)||Pi.isStream(t)||Pi.isFile(t)||Pi.isBlob(t)?t:Pi.isArrayBufferView(t)?t.buffer:Pi.isURLSearchParams(t)?(CS(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Pi.isObject(t)||i&&i["Content-Type"]==="application/json"?(CS(i,"application/json"),_O(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,d=!a&&this.responseType==="json";if(d||c&&Pi.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(d)throw g.name==="SyntaxError"?gO(g,this,"E_JSON_PARSE"):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Ug.headers={common:{Accept:"application/json, text/plain, */*"}};Pi.forEach(["delete","get","head"],function(t){Ug.headers[t]={}});Pi.forEach(["post","put","patch"],function(t){Ug.headers[t]=Pi.merge(yO)});var ux=Ug,xO=Vo,wO=ux,bO=function(t,i,a){var c=this||wO;return xO.forEach(a,function(g){t=g.call(c,t,i)}),t},M0,IS;function XI(){return IS||(IS=1,M0=function(t){return!!(t&&t.__CANCEL__)}),M0}var AS=Vo,z0=bO,SO=XI(),EO=ux;function L0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var TO=function(t){L0(t),t.headers=t.headers||{},t.data=z0.call(t,t.data,t.headers,t.transformRequest),t.headers=AS.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),AS.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||EO.adapter;return i(t).then(function(c){return L0(t),c.data=z0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return SO(c)||(L0(t),c&&c.response&&(c.response.data=z0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Zi=Vo,qI=function(t,i){i=i||{};var a={},c=["url","method","data"],d=["headers","auth","proxy","params"],g=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function b(M,R){return Zi.isPlainObject(M)&&Zi.isPlainObject(R)?Zi.merge(M,R):Zi.isPlainObject(R)?Zi.merge({},R):Zi.isArray(R)?R.slice():R}function w(M){Zi.isUndefined(i[M])?Zi.isUndefined(t[M])||(a[M]=b(void 0,t[M])):a[M]=b(t[M],i[M])}Zi.forEach(c,function(R){Zi.isUndefined(i[R])||(a[R]=b(void 0,i[R]))}),Zi.forEach(d,w),Zi.forEach(g,function(R){Zi.isUndefined(i[R])?Zi.isUndefined(t[R])||(a[R]=b(void 0,t[R])):a[R]=b(void 0,i[R])}),Zi.forEach(l,function(R){R in i?a[R]=b(t[R],i[R]):R in t&&(a[R]=b(void 0,t[R]))});var A=c.concat(d).concat(g).concat(l),C=Object.keys(t).concat(Object.keys(i)).filter(function(R){return A.indexOf(R)===-1});return Zi.forEach(C,w),a};const CO="axios",IO="0.21.4",AO="Promise based HTTP client for the browser and node.js",PO="index.js",kO={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},MO={type:"git",url:"https://github.com/axios/axios.git"},zO=["xhr","http","ajax","promise","node"],LO="Matt Zabriskie",FO="MIT",OO={url:"https://github.com/axios/axios/issues"},RO="https://axios-http.com",jO={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},DO={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},BO="dist/axios.min.js",NO="dist/axios.min.js",UO="./index.d.ts",$O={"follow-redirects":"^1.14.0"},VO=[{path:"./dist/axios.min.js",threshold:"5kB"}],GO={name:CO,version:IO,description:AO,main:PO,scripts:kO,repository:MO,keywords:zO,author:LO,license:FO,bugs:OO,homepage:RO,devDependencies:jO,browser:DO,jsdelivr:BO,unpkg:NO,typings:UO,dependencies:$O,bundlesize:VO};var KI=GO,cx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){cx[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var PS={},ZO=KI.version.split(".");function YI(e,t){for(var i=t?t.split("."):ZO,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}cx.transitional=function(t,i,a){var c=i&&YI(i);function d(g,l){return"[Axios v"+KI.version+"] Transitional option '"+g+"'"+l+(a?". "+a:"")}return function(g,l,b){if(t===!1)throw new Error(d(l," has been removed in "+i));return c&&!PS[l]&&(PS[l]=!0,console.warn(d(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(g,l,b):!0}};function HO(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var d=a[c],g=t[d];if(g){var l=e[d],b=l===void 0||g(l,d,e);if(b!==!0)throw new TypeError("option "+d+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+d)}}var WO={isOlderVersion:YI,assertOptions:HO,validators:cx},JI=Vo,XO=ZI,kS=sO,MS=TO,$g=qI,QI=WO,jc=QI.validators;function Rd(e){this.defaults=e,this.interceptors={request:new kS,response:new kS}}Rd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=$g(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&QI.assertOptions(i,{silentJSONParsing:jc.transitional(jc.boolean,"1.0.0"),forcedJSONParsing:jc.transitional(jc.boolean,"1.0.0"),clarifyTimeoutError:jc.transitional(jc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(t)===!1||(c=c&&M.synchronous,a.unshift(M.fulfilled,M.rejected))});var d=[];this.interceptors.response.forEach(function(M){d.push(M.fulfilled,M.rejected)});var g;if(!c){var l=[MS,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(d),g=Promise.resolve(t);l.length;)g=g.then(l.shift(),l.shift());return g}for(var b=t;a.length;){var w=a.shift(),A=a.shift();try{b=w(b)}catch(C){A(C);break}}try{g=MS(b)}catch(C){return Promise.reject(C)}for(;d.length;)g=g.then(d.shift(),d.shift());return g};Rd.prototype.getUri=function(t){return t=$g(this.defaults,t),XO(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};JI.forEach(["delete","get","head","options"],function(t){Rd.prototype[t]=function(i,a){return this.request($g(a||{},{method:t,url:i,data:(a||{}).data}))}});JI.forEach(["post","put","patch"],function(t){Rd.prototype[t]=function(i,a,c){return this.request($g(c||{},{method:t,url:i,data:a}))}});var qO=Rd,F0,zS;function eA(){if(zS)return F0;zS=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,F0=e,F0}var O0,LS;function KO(){if(LS)return O0;LS=1;var e=eA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(g){a=g});var c=this;i(function(g){c.reason||(c.reason=new e(g),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(g){a=g});return{token:c,cancel:a}},O0=t,O0}var R0,FS;function YO(){return FS||(FS=1,R0=function(t){return function(a){return t.apply(null,a)}}),R0}var j0,OS;function JO(){return OS||(OS=1,j0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),j0}var RS=Vo,QO=$I,um=qO,eR=qI,tR=ux;function tA(e){var t=new um(e),i=QO(um.prototype.request,t);return RS.extend(i,um.prototype,t),RS.extend(i,t),i}var Ns=tA(tR);Ns.Axios=um;Ns.create=function(t){return tA(eR(Ns.defaults,t))};Ns.Cancel=eA();Ns.CancelToken=KO();Ns.isCancel=XI();Ns.all=function(t){return Promise.all(t)};Ns.spread=YO();Ns.isAxiosError=JO();sx.exports=Ns;sx.exports.default=Ns;var nR=sx.exports,rR=nR;const iR={},oR=Object.freeze(Object.defineProperty({__proto__:null,default:iR},Symbol.toStringTag,{value:"Module"})),sR=C_(oR);var Vg={},aR=ch;function ch(e,t){this.x=e,this.y=t}ch.prototype={clone:function(){return new ch(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),d=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};ch.convert=function(e){return e instanceof ch?e:Array.isArray(e)?new ch(e[0],e[1]):e};var lR=aR,nA=bh;function bh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(uR,this,t)}function uR(e,t,i){e==1?t.id=i.readVarint():e==2?cR(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function cR(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}bh.types=["Unknown","Point","LineString","Polygon"];bh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,g=[],l;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),i===1&&(l&&g.push(l),l=[]),l.push(new lR(c,d));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&g.push(l),g};bh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,g=1/0,l=-1/0,b=1/0,w=-1/0;e.pos<t;){if(a<=0){var A=e.readVarint();i=A&7,a=A>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),c<g&&(g=c),c>l&&(l=c),d<b&&(b=d),d>w&&(w=d);else if(i!==7)throw new Error("unknown command "+i)}return[g,b,l,w]};bh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,d=this.extent*t,g=this.loadGeometry(),l=bh.types[this.type],b,w;function A(R){for(var J=0;J<R.length;J++){var Y=R[J],de=180-(Y.y+d)*360/a;R[J]=[(Y.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(de*Math.PI/180))-90]}}switch(this.type){case 1:var C=[];for(b=0;b<g.length;b++)C[b]=g[b][0];g=C,A(g);break;case 2:for(b=0;b<g.length;b++)A(g[b]);break;case 3:for(g=hR(g),b=0;b<g.length;b++)for(w=0;w<g[b].length;w++)A(g[b][w]);break}g.length===1?g=g[0]:l="Multi"+l;var M={type:"Feature",geometry:{type:l,coordinates:g},properties:this.properties};return"id"in this&&(M.id=this.id),M};function hR(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,d=0;d<t;d++){var g=fR(e[d]);g!==0&&(c===void 0&&(c=g<0),c===g<0?(a&&i.push(a),a=[e[d]]):a.push(e[d]))}return a&&i.push(a),i}function fR(e){for(var t=0,i=0,a=e.length,c=a-1,d,g;i<a;c=i++)d=e[i],g=e[c],t+=(g.x-d.x)*(d.y+g.y);return t}var dR=nA,rA=iA;function iA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(pR,this,t),this.length=this._features.length}function pR(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(mR(i))}function mR(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}iA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new dR(this._pbf,t,this.extent,this._keys,this._values)};var gR=rA,yR=vR;function vR(e,t){this.layers=e.readFields(_R,{},t)}function _R(e,t,i){if(e===3){var a=new gR(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}Vg.VectorTile=yR;Vg.VectorTileFeature=nA;Vg.VectorTileLayer=rA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=lF,i=EF,a=TF,c=rR,d=sR,g=Vg;function l($){return $&&typeof $=="object"&&"default"in $?$:{default:$}}var b=l(a),w=l(c),A=l(d),C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof jl<"u"?jl:typeof self<"u"?self:{};function M($){var U={exports:{}};return $(U,U.exports),U.exports}var R=M(function($,U){(function(Z,N){$.exports=N(w.default)})(C,function(re){return function(Z){var N={};function E(k){if(N[k])return N[k].exports;var H=N[k]={i:k,l:!1,exports:{}};return Z[k].call(H.exports,H,H.exports,E),H.l=!0,H.exports}return E.m=Z,E.c=N,E.d=function(k,H,q){E.o(k,H)||Object.defineProperty(k,H,{enumerable:!0,get:q})},E.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},E.t=function(k,H){if(H&1&&(k=E(k)),H&8||H&4&&typeof k=="object"&&k&&k.__esModule)return k;var q=Object.create(null);if(E.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:k}),H&2&&typeof k!="string")for(var ee in k)E.d(q,ee,(function(ve){return k[ve]}).bind(null,ee));return q},E.n=function(k){var H=k&&k.__esModule?function(){return k.default}:function(){return k};return E.d(H,"a",H),H},E.o=function(k,H){return Object.prototype.hasOwnProperty.call(k,H)},E.p="",E(E.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(Z,N,E){E.r(N),E.d(N,"CacheControl",function(){return Se}),E.d(N,"parse",function(){return $e}),E.d(N,"format",function(){return Pe}),E("./node_modules/core-js/modules/es6.array.from.js"),E("./node_modules/core-js/modules/es6.function.name.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/web.dom.iterable.js"),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.regexp.split.js"),E("./node_modules/core-js/modules/es6.number.is-finite.js");function k(Le,Xe){return xe(Le)||ve(Le,Xe)||q(Le,Xe)||H()}function H(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(Le,Xe){if(Le){if(typeof Le=="string")return ee(Le,Xe);var Ze=Object.prototype.toString.call(Le).slice(8,-1);if(Ze==="Object"&&Le.constructor&&(Ze=Le.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(Le);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return ee(Le,Xe)}}function ee(Le,Xe){(Xe==null||Xe>Le.length)&&(Xe=Le.length);for(var Ze=0,nt=new Array(Xe);Ze<Xe;Ze++)nt[Ze]=Le[Ze];return nt}function ve(Le,Xe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Le)))){var Ze=[],nt=!0,ct=!1,vt=void 0;try{for(var It=Le[Symbol.iterator](),ft;!(nt=(ft=It.next()).done)&&(Ze.push(ft.value),!(Xe&&Ze.length===Xe));nt=!0);}catch(St){ct=!0,vt=St}finally{try{!nt&&It.return!=null&&It.return()}finally{if(ct)throw vt}}return Ze}}function xe(Le){if(Array.isArray(Le))return Le}function be(Le,Xe){if(!(Le instanceof Xe))throw new TypeError("Cannot call a class as a function")}function te(Le,Xe){for(var Ze=0;Ze<Xe.length;Ze++){var nt=Xe[Ze];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(Le,nt.key,nt)}}function ue(Le,Xe,Ze){return Xe&&te(Le.prototype,Xe),Ze&&te(Le,Ze),Le}var ne=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ie={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function ye(Le){return Le===null}function Te(Le){if(!Le)return null;var Xe=parseInt(Le,10);return!Number.isFinite(Xe)||Xe<0?null:Xe}var Se=function(){function Le(){be(this,Le),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ue(Le,[{key:"parse",value:function(Ze){if(!Ze||Ze.length===0)return this;var nt={},ct=Ze.match(ne)||[];return Array.prototype.forEach.call(ct,function(vt){var It=vt.split("=",2),ft=k(It,1),St=ft[0],Gt=null;It.length>1&&(Gt=It[1].trim()),nt[St.toLowerCase()]=Gt}),this.maxAge=Te(nt[ie.maxAge]),this.sharedMaxAge=Te(nt[ie.sharedMaxAge]),this.maxStale=ye(nt[ie.maxStale]),this.maxStaleDuration=Te(nt[ie.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Te(nt[ie.minFresh]),this.immutable=ye(nt[ie.immutable]),this.mustRevalidate=ye(nt[ie.mustRevalidate]),this.noCache=ye(nt[ie.noCache]),this.noStore=ye(nt[ie.noStore]),this.noTransform=ye(nt[ie.noTransform]),this.onlyIfCached=ye(nt[ie.onlyIfCached]),this.private=ye(nt[ie.private]),this.proxyRevalidate=ye(nt[ie.proxyRevalidate]),this.public=ye(nt[ie.public]),this}},{key:"format",value:function(){var Ze=[];return this.maxAge&&Ze.push("".concat(ie.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ze.push("".concat(ie.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ze.push("".concat(ie.maxStale,"=").concat(this.maxStaleDuration)):Ze.push(ie.maxStale)),this.minFresh&&Ze.push("".concat(ie.minFresh,"=").concat(this.minFresh)),this.immutable&&Ze.push(ie.immutable),this.mustRevalidate&&Ze.push(ie.mustRevalidate),this.noCache&&Ze.push(ie.noCache),this.noStore&&Ze.push(ie.noStore),this.noTransform&&Ze.push(ie.noTransform),this.onlyIfCached&&Ze.push(ie.onlyIfCached),this.private&&Ze.push(ie.private),this.proxyRevalidate&&Ze.push(ie.proxyRevalidate),this.public&&Ze.push(ie.public),Ze.join(", ")}}]),Le}();function $e(Le){var Xe=new Se;return Xe.parse(Le)}function Pe(Le){return Le instanceof Se?Le.format():Se.prototype.format.call(Le)}N.default={CacheControl:Se,parse:$e,format:Pe}},"./node_modules/charenc/charenc.js":function(Z,N){var E={utf8:{stringToBytes:function(k){return E.bin.stringToBytes(unescape(encodeURIComponent(k)))},bytesToString:function(k){return decodeURIComponent(escape(E.bin.bytesToString(k)))}},bin:{stringToBytes:function(k){for(var H=[],q=0;q<k.length;q++)H.push(k.charCodeAt(q)&255);return H},bytesToString:function(k){for(var H=[],q=0;q<k.length;q++)H.push(String.fromCharCode(k[q]));return H.join("")}}};Z.exports=E},"./node_modules/core-js/modules/_a-function.js":function(Z,N){Z.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_wks.js")("unscopables"),H=Array.prototype;H[k]==null&&E("./node_modules/core-js/modules/_hide.js")(H,k,{}),Z.exports=function(q){H[k][q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_string-at.js")(!0);Z.exports=function(H,q,ee){return q+(ee?k(H,q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_is-object.js");Z.exports=function(H){if(!k(H))throw TypeError(H+" is not an object!");return H}},"./node_modules/core-js/modules/_array-includes.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_to-iobject.js"),H=E("./node_modules/core-js/modules/_to-length.js"),q=E("./node_modules/core-js/modules/_to-absolute-index.js");Z.exports=function(ee){return function(ve,xe,be){var te=k(ve),ue=H(te.length),ne=q(be,ue),ie;if(ee&&xe!=xe){for(;ue>ne;)if(ie=te[ne++],ie!=ie)return!0}else for(;ue>ne;ne++)if((ee||ne in te)&&te[ne]===xe)return ee||ne||0;return!ee&&-1}}},"./node_modules/core-js/modules/_bind.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_a-function.js"),H=E("./node_modules/core-js/modules/_is-object.js"),q=E("./node_modules/core-js/modules/_invoke.js"),ee=[].slice,ve={},xe=function(be,te,ue){if(!(te in ve)){for(var ne=[],ie=0;ie<te;ie++)ne[ie]="a["+ie+"]";ve[te]=Function("F,a","return new F("+ne.join(",")+")")}return ve[te](be,ue)};Z.exports=Function.bind||function(te){var ue=k(this),ne=ee.call(arguments,1),ie=function(){var ye=ne.concat(ee.call(arguments));return this instanceof ie?xe(ue,ye.length,ye):q(ue,ye,te)};return H(ue.prototype)&&(ie.prototype=ue.prototype),ie}},"./node_modules/core-js/modules/_classof.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_cof.js"),H=E("./node_modules/core-js/modules/_wks.js")("toStringTag"),q=k(function(){return arguments}())=="Arguments",ee=function(ve,xe){try{return ve[xe]}catch{}};Z.exports=function(ve){var xe,be,te;return ve===void 0?"Undefined":ve===null?"Null":typeof(be=ee(xe=Object(ve),H))=="string"?be:q?k(xe):(te=k(xe))=="Object"&&typeof xe.callee=="function"?"Arguments":te}},"./node_modules/core-js/modules/_cof.js":function(Z,N){var E={}.toString;Z.exports=function(k){return E.call(k).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(Z,N){var E=Z.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},"./node_modules/core-js/modules/_create-property.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-dp.js"),H=E("./node_modules/core-js/modules/_property-desc.js");Z.exports=function(q,ee,ve){ee in q?k.f(q,ee,H(0,ve)):q[ee]=ve}},"./node_modules/core-js/modules/_ctx.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_a-function.js");Z.exports=function(H,q,ee){if(k(H),q===void 0)return H;switch(ee){case 1:return function(ve){return H.call(q,ve)};case 2:return function(ve,xe){return H.call(q,ve,xe)};case 3:return function(ve,xe,be){return H.call(q,ve,xe,be)}}return function(){return H.apply(q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(Z,N){Z.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},"./node_modules/core-js/modules/_descriptors.js":function(Z,N,E){Z.exports=!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_is-object.js"),H=E("./node_modules/core-js/modules/_global.js").document,q=k(H)&&k(H.createElement);Z.exports=function(ee){return q?H.createElement(ee):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(Z,N){Z.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-keys.js"),H=E("./node_modules/core-js/modules/_object-gops.js"),q=E("./node_modules/core-js/modules/_object-pie.js");Z.exports=function(ee){var ve=k(ee),xe=H.f;if(xe)for(var be=xe(ee),te=q.f,ue=0,ne;be.length>ue;)te.call(ee,ne=be[ue++])&&ve.push(ne);return ve}},"./node_modules/core-js/modules/_export.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_global.js"),H=E("./node_modules/core-js/modules/_core.js"),q=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),ve=E("./node_modules/core-js/modules/_ctx.js"),xe="prototype",be=function(te,ue,ne){var ie=te&be.F,ye=te&be.G,Te=te&be.S,Se=te&be.P,$e=te&be.B,Pe=ye?k:Te?k[ue]||(k[ue]={}):(k[ue]||{})[xe],Le=ye?H:H[ue]||(H[ue]={}),Xe=Le[xe]||(Le[xe]={}),Ze,nt,ct,vt;ye&&(ne=ue);for(Ze in ne)nt=!ie&&Pe&&Pe[Ze]!==void 0,ct=(nt?Pe:ne)[Ze],vt=$e&&nt?ve(ct,k):Se&&typeof ct=="function"?ve(Function.call,ct):ct,Pe&&ee(Pe,Ze,ct,te&be.U),Le[Ze]!=ct&&q(Le,Ze,vt),Se&&Xe[Ze]!=ct&&(Xe[Ze]=ct)};k.core=H,be.F=1,be.G=2,be.S=4,be.P=8,be.B=16,be.W=32,be.U=64,be.R=128,Z.exports=be},"./node_modules/core-js/modules/_fails-is-regexp.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_wks.js")("match");Z.exports=function(H){var q=/./;try{"/./"[H](q)}catch{try{return q[k]=!1,!"/./"[H](q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(Z,N){Z.exports=function(E){try{return!!E()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(Z,N,E){E("./node_modules/core-js/modules/es6.regexp.exec.js");var k=E("./node_modules/core-js/modules/_redefine.js"),H=E("./node_modules/core-js/modules/_hide.js"),q=E("./node_modules/core-js/modules/_fails.js"),ee=E("./node_modules/core-js/modules/_defined.js"),ve=E("./node_modules/core-js/modules/_wks.js"),xe=E("./node_modules/core-js/modules/_regexp-exec.js"),be=ve("species"),te=!q(function(){var ne=/./;return ne.exec=function(){var ie=[];return ie.groups={a:"7"},ie},"".replace(ne,"$<a>")!=="7"}),ue=function(){var ne=/(?:)/,ie=ne.exec;ne.exec=function(){return ie.apply(this,arguments)};var ye="ab".split(ne);return ye.length===2&&ye[0]==="a"&&ye[1]==="b"}();Z.exports=function(ne,ie,ye){var Te=ve(ne),Se=!q(function(){var nt={};return nt[Te]=function(){return 7},""[ne](nt)!=7}),$e=Se?!q(function(){var nt=!1,ct=/a/;return ct.exec=function(){return nt=!0,null},ne==="split"&&(ct.constructor={},ct.constructor[be]=function(){return ct}),ct[Te](""),!nt}):void 0;if(!Se||!$e||ne==="replace"&&!te||ne==="split"&&!ue){var Pe=/./[Te],Le=ye(ee,Te,""[ne],function(ct,vt,It,ft,St){return vt.exec===xe?Se&&!St?{done:!0,value:Pe.call(vt,It,ft)}:{done:!0,value:ct.call(It,vt,ft)}:{done:!1}}),Xe=Le[0],Ze=Le[1];k(String.prototype,ne,Xe),H(RegExp.prototype,Te,ie==2?function(nt,ct){return Ze.call(nt,this,ct)}:function(nt){return Ze.call(nt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_an-object.js");Z.exports=function(){var H=k(this),q="";return H.global&&(q+="g"),H.ignoreCase&&(q+="i"),H.multiline&&(q+="m"),H.unicode&&(q+="u"),H.sticky&&(q+="y"),q}},"./node_modules/core-js/modules/_function-to-string.js":function(Z,N,E){Z.exports=E("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(Z,N){var E=Z.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},"./node_modules/core-js/modules/_has.js":function(Z,N){var E={}.hasOwnProperty;Z.exports=function(k,H){return E.call(k,H)}},"./node_modules/core-js/modules/_hide.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-dp.js"),H=E("./node_modules/core-js/modules/_property-desc.js");Z.exports=E("./node_modules/core-js/modules/_descriptors.js")?function(q,ee,ve){return k.f(q,ee,H(1,ve))}:function(q,ee,ve){return q[ee]=ve,q}},"./node_modules/core-js/modules/_html.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_global.js").document;Z.exports=k&&k.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(Z,N,E){Z.exports=!E("./node_modules/core-js/modules/_descriptors.js")&&!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(E("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(Z,N){Z.exports=function(E,k,H){var q=H===void 0;switch(k.length){case 0:return q?E():E.call(H);case 1:return q?E(k[0]):E.call(H,k[0]);case 2:return q?E(k[0],k[1]):E.call(H,k[0],k[1]);case 3:return q?E(k[0],k[1],k[2]):E.call(H,k[0],k[1],k[2]);case 4:return q?E(k[0],k[1],k[2],k[3]):E.call(H,k[0],k[1],k[2],k[3])}return E.apply(H,k)}},"./node_modules/core-js/modules/_iobject.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_cof.js");Z.exports=Object("z").propertyIsEnumerable(0)?Object:function(H){return k(H)=="String"?H.split(""):Object(H)}},"./node_modules/core-js/modules/_is-array-iter.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_iterators.js"),H=E("./node_modules/core-js/modules/_wks.js")("iterator"),q=Array.prototype;Z.exports=function(ee){return ee!==void 0&&(k.Array===ee||q[H]===ee)}},"./node_modules/core-js/modules/_is-array.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_cof.js");Z.exports=Array.isArray||function(q){return k(q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(Z,N){Z.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_is-object.js"),H=E("./node_modules/core-js/modules/_cof.js"),q=E("./node_modules/core-js/modules/_wks.js")("match");Z.exports=function(ee){var ve;return k(ee)&&((ve=ee[q])!==void 0?!!ve:H(ee)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_an-object.js");Z.exports=function(H,q,ee,ve){try{return ve?q(k(ee)[0],ee[1]):q(ee)}catch(be){var xe=H.return;throw xe!==void 0&&k(xe.call(H)),be}}},"./node_modules/core-js/modules/_iter-create.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-create.js"),H=E("./node_modules/core-js/modules/_property-desc.js"),q=E("./node_modules/core-js/modules/_set-to-string-tag.js"),ee={};E("./node_modules/core-js/modules/_hide.js")(ee,E("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),Z.exports=function(ve,xe,be){ve.prototype=k(ee,{next:H(1,be)}),q(ve,xe+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_library.js"),H=E("./node_modules/core-js/modules/_export.js"),q=E("./node_modules/core-js/modules/_redefine.js"),ee=E("./node_modules/core-js/modules/_hide.js"),ve=E("./node_modules/core-js/modules/_iterators.js"),xe=E("./node_modules/core-js/modules/_iter-create.js"),be=E("./node_modules/core-js/modules/_set-to-string-tag.js"),te=E("./node_modules/core-js/modules/_object-gpo.js"),ue=E("./node_modules/core-js/modules/_wks.js")("iterator"),ne=!([].keys&&"next"in[].keys()),ie="@@iterator",ye="keys",Te="values",Se=function(){return this};Z.exports=function($e,Pe,Le,Xe,Ze,nt,ct){xe(Le,Pe,Xe);var vt=function(j){if(!ne&&j in Gt)return Gt[j];switch(j){case ye:return function(){return new Le(this,j)};case Te:return function(){return new Le(this,j)}}return function(){return new Le(this,j)}},It=Pe+" Iterator",ft=Ze==Te,St=!1,Gt=$e.prototype,Ut=Gt[ue]||Gt[ie]||Ze&&Gt[Ze],un=Ut||vt(Ze),xn=Ze?ft?vt("entries"):un:void 0,yn=Pe=="Array"&&Gt.entries||Ut,on,gn,se;if(yn&&(se=te(yn.call(new $e)),se!==Object.prototype&&se.next&&(be(se,It,!0),!k&&typeof se[ue]!="function"&&ee(se,ue,Se))),ft&&Ut&&Ut.name!==Te&&(St=!0,un=function(){return Ut.call(this)}),(!k||ct)&&(ne||St||!Gt[ue])&&ee(Gt,ue,un),ve[Pe]=un,ve[It]=Se,Ze)if(on={values:ft?un:vt(Te),keys:nt?un:vt(ye),entries:xn},ct)for(gn in on)gn in Gt||q(Gt,gn,on[gn]);else H(H.P+H.F*(ne||St),Pe,on);return on}},"./node_modules/core-js/modules/_iter-detect.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_wks.js")("iterator"),H=!1;try{var q=[7][k]();q.return=function(){H=!0},Array.from(q,function(){throw 2})}catch{}Z.exports=function(ee,ve){if(!ve&&!H)return!1;var xe=!1;try{var be=[7],te=be[k]();te.next=function(){return{done:xe=!0}},be[k]=function(){return te},ee(be)}catch{}return xe}},"./node_modules/core-js/modules/_iter-step.js":function(Z,N){Z.exports=function(E,k){return{value:k,done:!!E}}},"./node_modules/core-js/modules/_iterators.js":function(Z,N){Z.exports={}},"./node_modules/core-js/modules/_library.js":function(Z,N){Z.exports=!1},"./node_modules/core-js/modules/_meta.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_uid.js")("meta"),H=E("./node_modules/core-js/modules/_is-object.js"),q=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_object-dp.js").f,ve=0,xe=Object.isExtensible||function(){return!0},be=!E("./node_modules/core-js/modules/_fails.js")(function(){return xe(Object.preventExtensions({}))}),te=function(Te){ee(Te,k,{value:{i:"O"+ ++ve,w:{}}})},ue=function(Te,Se){if(!H(Te))return typeof Te=="symbol"?Te:(typeof Te=="string"?"S":"P")+Te;if(!q(Te,k)){if(!xe(Te))return"F";if(!Se)return"E";te(Te)}return Te[k].i},ne=function(Te,Se){if(!q(Te,k)){if(!xe(Te))return!0;if(!Se)return!1;te(Te)}return Te[k].w},ie=function(Te){return be&&ye.NEED&&xe(Te)&&!q(Te,k)&&te(Te),Te},ye=Z.exports={KEY:k,NEED:!1,fastKey:ue,getWeak:ne,onFreeze:ie}},"./node_modules/core-js/modules/_object-create.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_an-object.js"),H=E("./node_modules/core-js/modules/_object-dps.js"),q=E("./node_modules/core-js/modules/_enum-bug-keys.js"),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},xe="prototype",be=function(){var te=E("./node_modules/core-js/modules/_dom-create.js")("iframe"),ue=q.length,ne="<",ie=">",ye;for(te.style.display="none",E("./node_modules/core-js/modules/_html.js").appendChild(te),te.src="javascript:",ye=te.contentWindow.document,ye.open(),ye.write(ne+"script"+ie+"document.F=Object"+ne+"/script"+ie),ye.close(),be=ye.F;ue--;)delete be[xe][q[ue]];return be()};Z.exports=Object.create||function(ue,ne){var ie;return ue!==null?(ve[xe]=k(ue),ie=new ve,ve[xe]=null,ie[ee]=ue):ie=be(),ne===void 0?ie:H(ie,ne)}},"./node_modules/core-js/modules/_object-dp.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_an-object.js"),H=E("./node_modules/core-js/modules/_ie8-dom-define.js"),q=E("./node_modules/core-js/modules/_to-primitive.js"),ee=Object.defineProperty;N.f=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(xe,be,te){if(k(xe),be=q(be,!0),k(te),H)try{return ee(xe,be,te)}catch{}if("get"in te||"set"in te)throw TypeError("Accessors not supported!");return"value"in te&&(xe[be]=te.value),xe}},"./node_modules/core-js/modules/_object-dps.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-dp.js"),H=E("./node_modules/core-js/modules/_an-object.js"),q=E("./node_modules/core-js/modules/_object-keys.js");Z.exports=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,xe){H(ve);for(var be=q(xe),te=be.length,ue=0,ne;te>ue;)k.f(ve,ne=be[ue++],xe[ne]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-pie.js"),H=E("./node_modules/core-js/modules/_property-desc.js"),q=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_to-primitive.js"),ve=E("./node_modules/core-js/modules/_has.js"),xe=E("./node_modules/core-js/modules/_ie8-dom-define.js"),be=Object.getOwnPropertyDescriptor;N.f=E("./node_modules/core-js/modules/_descriptors.js")?be:function(ue,ne){if(ue=q(ue),ne=ee(ne,!0),xe)try{return be(ue,ne)}catch{}if(ve(ue,ne))return H(!k.f.call(ue,ne),ue[ne])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_to-iobject.js"),H=E("./node_modules/core-js/modules/_object-gopn.js").f,q={}.toString,ee=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(xe){try{return H(xe)}catch{return ee.slice()}};Z.exports.f=function(be){return ee&&q.call(be)=="[object Window]"?ve(be):H(k(be))}},"./node_modules/core-js/modules/_object-gopn.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-keys-internal.js"),H=E("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");N.f=Object.getOwnPropertyNames||function(ee){return k(ee,H)}},"./node_modules/core-js/modules/_object-gops.js":function(Z,N){N.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_has.js"),H=E("./node_modules/core-js/modules/_to-object.js"),q=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ee=Object.prototype;Z.exports=Object.getPrototypeOf||function(ve){return ve=H(ve),k(ve,q)?ve[q]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?ee:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_has.js"),H=E("./node_modules/core-js/modules/_to-iobject.js"),q=E("./node_modules/core-js/modules/_array-includes.js")(!1),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");Z.exports=function(ve,xe){var be=H(ve),te=0,ue=[],ne;for(ne in be)ne!=ee&&k(be,ne)&&ue.push(ne);for(;xe.length>te;)k(be,ne=xe[te++])&&(~q(ue,ne)||ue.push(ne));return ue}},"./node_modules/core-js/modules/_object-keys.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-keys-internal.js"),H=E("./node_modules/core-js/modules/_enum-bug-keys.js");Z.exports=Object.keys||function(ee){return k(ee,H)}},"./node_modules/core-js/modules/_object-pie.js":function(Z,N){N.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-gopn.js"),H=E("./node_modules/core-js/modules/_object-gops.js"),q=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_global.js").Reflect;Z.exports=ee&&ee.ownKeys||function(xe){var be=k.f(q(xe)),te=H.f;return te?be.concat(te(xe)):be}},"./node_modules/core-js/modules/_property-desc.js":function(Z,N){Z.exports=function(E,k){return{enumerable:!(E&1),configurable:!(E&2),writable:!(E&4),value:k}}},"./node_modules/core-js/modules/_redefine.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_global.js"),H=E("./node_modules/core-js/modules/_hide.js"),q=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_uid.js")("src"),ve=E("./node_modules/core-js/modules/_function-to-string.js"),xe="toString",be=(""+ve).split(xe);E("./node_modules/core-js/modules/_core.js").inspectSource=function(te){return ve.call(te)},(Z.exports=function(te,ue,ne,ie){var ye=typeof ne=="function";ye&&(q(ne,"name")||H(ne,"name",ue)),te[ue]!==ne&&(ye&&(q(ne,ee)||H(ne,ee,te[ue]?""+te[ue]:be.join(String(ue)))),te===k?te[ue]=ne:ie?te[ue]?te[ue]=ne:H(te,ue,ne):(delete te[ue],H(te,ue,ne)))})(Function.prototype,xe,function(){return typeof this=="function"&&this[ee]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_classof.js"),H=RegExp.prototype.exec;Z.exports=function(q,ee){var ve=q.exec;if(typeof ve=="function"){var xe=ve.call(q,ee);if(typeof xe!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return xe}if(k(q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return H.call(q,ee)}},"./node_modules/core-js/modules/_regexp-exec.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_flags.js"),H=RegExp.prototype.exec,q=String.prototype.replace,ee=H,ve="lastIndex",xe=function(){var ue=/a/,ne=/b*/g;return H.call(ue,"a"),H.call(ne,"a"),ue[ve]!==0||ne[ve]!==0}(),be=/()??/.exec("")[1]!==void 0,te=xe||be;te&&(ee=function(ne){var ie=this,ye,Te,Se,$e;return be&&(Te=new RegExp("^"+ie.source+"$(?!\\s)",k.call(ie))),xe&&(ye=ie[ve]),Se=H.call(ie,ne),xe&&Se&&(ie[ve]=ie.global?Se.index+Se[0].length:ye),be&&Se&&Se.length>1&&q.call(Se[0],Te,function(){for($e=1;$e<arguments.length-2;$e++)arguments[$e]===void 0&&(Se[$e]=void 0)}),Se}),Z.exports=ee},"./node_modules/core-js/modules/_set-to-string-tag.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-dp.js").f,H=E("./node_modules/core-js/modules/_has.js"),q=E("./node_modules/core-js/modules/_wks.js")("toStringTag");Z.exports=function(ee,ve,xe){ee&&!H(ee=xe?ee:ee.prototype,q)&&k(ee,q,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_shared.js")("keys"),H=E("./node_modules/core-js/modules/_uid.js");Z.exports=function(q){return k[q]||(k[q]=H(q))}},"./node_modules/core-js/modules/_shared.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_core.js"),H=E("./node_modules/core-js/modules/_global.js"),q="__core-js_shared__",ee=H[q]||(H[q]={});(Z.exports=function(ve,xe){return ee[ve]||(ee[ve]=xe!==void 0?xe:{})})("versions",[]).push({version:k.version,mode:E("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_an-object.js"),H=E("./node_modules/core-js/modules/_a-function.js"),q=E("./node_modules/core-js/modules/_wks.js")("species");Z.exports=function(ee,ve){var xe=k(ee).constructor,be;return xe===void 0||(be=k(xe)[q])==null?ve:H(be)}},"./node_modules/core-js/modules/_string-at.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_to-integer.js"),H=E("./node_modules/core-js/modules/_defined.js");Z.exports=function(q){return function(ee,ve){var xe=String(H(ee)),be=k(ve),te=xe.length,ue,ne;return be<0||be>=te?q?"":void 0:(ue=xe.charCodeAt(be),ue<55296||ue>56319||be+1===te||(ne=xe.charCodeAt(be+1))<56320||ne>57343?q?xe.charAt(be):ue:q?xe.slice(be,be+2):(ue-55296<<10)+(ne-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_is-regexp.js"),H=E("./node_modules/core-js/modules/_defined.js");Z.exports=function(q,ee,ve){if(k(ee))throw TypeError("String#"+ve+" doesn't accept regex!");return String(H(q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_to-integer.js"),H=Math.max,q=Math.min;Z.exports=function(ee,ve){return ee=k(ee),ee<0?H(ee+ve,0):q(ee,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(Z,N){var E=Math.ceil,k=Math.floor;Z.exports=function(H){return isNaN(H=+H)?0:(H>0?k:E)(H)}},"./node_modules/core-js/modules/_to-iobject.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_iobject.js"),H=E("./node_modules/core-js/modules/_defined.js");Z.exports=function(q){return k(H(q))}},"./node_modules/core-js/modules/_to-length.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_to-integer.js"),H=Math.min;Z.exports=function(q){return q>0?H(k(q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_defined.js");Z.exports=function(H){return Object(k(H))}},"./node_modules/core-js/modules/_to-primitive.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_is-object.js");Z.exports=function(H,q){if(!k(H))return H;var ee,ve;if(q&&typeof(ee=H.toString)=="function"&&!k(ve=ee.call(H))||typeof(ee=H.valueOf)=="function"&&!k(ve=ee.call(H))||!q&&typeof(ee=H.toString)=="function"&&!k(ve=ee.call(H)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(Z,N){var E=0,k=Math.random();Z.exports=function(H){return"Symbol(".concat(H===void 0?"":H,")_",(++E+k).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_global.js"),H=E("./node_modules/core-js/modules/_core.js"),q=E("./node_modules/core-js/modules/_library.js"),ee=E("./node_modules/core-js/modules/_wks-ext.js"),ve=E("./node_modules/core-js/modules/_object-dp.js").f;Z.exports=function(xe){var be=H.Symbol||(H.Symbol=q?{}:k.Symbol||{});xe.charAt(0)!="_"&&!(xe in be)&&ve(be,xe,{value:ee.f(xe)})}},"./node_modules/core-js/modules/_wks-ext.js":function(Z,N,E){N.f=E("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_shared.js")("wks"),H=E("./node_modules/core-js/modules/_uid.js"),q=E("./node_modules/core-js/modules/_global.js").Symbol,ee=typeof q=="function",ve=Z.exports=function(xe){return k[xe]||(k[xe]=ee&&q[xe]||(ee?q:H)("Symbol."+xe))};ve.store=k},"./node_modules/core-js/modules/core.get-iterator-method.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_classof.js"),H=E("./node_modules/core-js/modules/_wks.js")("iterator"),q=E("./node_modules/core-js/modules/_iterators.js");Z.exports=E("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(ee){if(ee!=null)return ee[H]||ee["@@iterator"]||q[k(ee)]}},"./node_modules/core-js/modules/es6.array.from.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_ctx.js"),H=E("./node_modules/core-js/modules/_export.js"),q=E("./node_modules/core-js/modules/_to-object.js"),ee=E("./node_modules/core-js/modules/_iter-call.js"),ve=E("./node_modules/core-js/modules/_is-array-iter.js"),xe=E("./node_modules/core-js/modules/_to-length.js"),be=E("./node_modules/core-js/modules/_create-property.js"),te=E("./node_modules/core-js/modules/core.get-iterator-method.js");H(H.S+H.F*!E("./node_modules/core-js/modules/_iter-detect.js")(function(ue){Array.from(ue)}),"Array",{from:function(ne){var ie=q(ne),ye=typeof this=="function"?this:Array,Te=arguments.length,Se=Te>1?arguments[1]:void 0,$e=Se!==void 0,Pe=0,Le=te(ie),Xe,Ze,nt,ct;if($e&&(Se=k(Se,Te>2?arguments[2]:void 0,2)),Le!=null&&!(ye==Array&&ve(Le)))for(ct=Le.call(ie),Ze=new ye;!(nt=ct.next()).done;Pe++)be(Ze,Pe,$e?ee(ct,Se,[nt.value,Pe],!0):nt.value);else for(Xe=xe(ie.length),Ze=new ye(Xe);Xe>Pe;Pe++)be(Ze,Pe,$e?Se(ie[Pe],Pe):ie[Pe]);return Ze.length=Pe,Ze}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_add-to-unscopables.js"),H=E("./node_modules/core-js/modules/_iter-step.js"),q=E("./node_modules/core-js/modules/_iterators.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js");Z.exports=E("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,xe){this._t=ee(ve),this._i=0,this._k=xe},function(){var ve=this._t,xe=this._k,be=this._i++;return!ve||be>=ve.length?(this._t=void 0,H(1)):xe=="keys"?H(0,be):xe=="values"?H(0,ve[be]):H(0,[be,ve[be]])},"values"),q.Arguments=q.Array,k("keys"),k("values"),k("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_export.js");k(k.P,"Function",{bind:E("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_object-dp.js").f,H=Function.prototype,q=/^\s*function ([^ (]*)/,ee="name";ee in H||E("./node_modules/core-js/modules/_descriptors.js")&&k(H,ee,{configurable:!0,get:function(){try{return(""+this).match(q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_export.js"),H=E("./node_modules/core-js/modules/_global.js").isFinite;k(k.S,"Number",{isFinite:function(ee){return typeof ee=="number"&&H(ee)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_classof.js"),H={};H[E("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",H+""!="[object z]"&&E("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+k(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_regexp-exec.js");E("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:k!==/./.exec},{exec:k})},"./node_modules/core-js/modules/es6.regexp.split.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_is-regexp.js"),H=E("./node_modules/core-js/modules/_an-object.js"),q=E("./node_modules/core-js/modules/_species-constructor.js"),ee=E("./node_modules/core-js/modules/_advance-string-index.js"),ve=E("./node_modules/core-js/modules/_to-length.js"),xe=E("./node_modules/core-js/modules/_regexp-exec-abstract.js"),be=E("./node_modules/core-js/modules/_regexp-exec.js"),te=E("./node_modules/core-js/modules/_fails.js"),ue=Math.min,ne=[].push,ie="split",ye="length",Te="lastIndex",Se=4294967295,$e=!te(function(){});E("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Pe,Le,Xe,Ze){var nt;return"abbc"[ie](/(b)*/)[1]=="c"||"test"[ie](/(?:)/,-1)[ye]!=4||"ab"[ie](/(?:ab)*/)[ye]!=2||"."[ie](/(.?)(.?)/)[ye]!=4||"."[ie](/()()/)[ye]>1||""[ie](/.?/)[ye]?nt=function(ct,vt){var It=String(this);if(ct===void 0&&vt===0)return[];if(!k(ct))return Xe.call(It,ct,vt);for(var ft=[],St=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Gt=0,Ut=vt===void 0?Se:vt>>>0,un=new RegExp(ct.source,St+"g"),xn,yn,on;(xn=be.call(un,It))&&(yn=un[Te],!(yn>Gt&&(ft.push(It.slice(Gt,xn.index)),xn[ye]>1&&xn.index<It[ye]&&ne.apply(ft,xn.slice(1)),on=xn[0][ye],Gt=yn,ft[ye]>=Ut)));)un[Te]===xn.index&&un[Te]++;return Gt===It[ye]?(on||!un.test(""))&&ft.push(""):ft.push(It.slice(Gt)),ft[ye]>Ut?ft.slice(0,Ut):ft}:"0"[ie](void 0,0)[ye]?nt=function(ct,vt){return ct===void 0&&vt===0?[]:Xe.call(this,ct,vt)}:nt=Xe,[function(vt,It){var ft=Pe(this),St=vt==null?void 0:vt[Le];return St!==void 0?St.call(vt,ft,It):nt.call(String(ft),vt,It)},function(ct,vt){var It=Ze(nt,ct,this,vt,nt!==Xe);if(It.done)return It.value;var ft=H(ct),St=String(this),Gt=q(ft,RegExp),Ut=ft.unicode,un=(ft.ignoreCase?"i":"")+(ft.multiline?"m":"")+(ft.unicode?"u":"")+($e?"y":"g"),xn=new Gt($e?ft:"^(?:"+ft.source+")",un),yn=vt===void 0?Se:vt>>>0;if(yn===0)return[];if(St.length===0)return xe(xn,St)===null?[St]:[];for(var on=0,gn=0,se=[];gn<St.length;){xn.lastIndex=$e?gn:0;var j=xe(xn,$e?St:St.slice(gn)),O;if(j===null||(O=ue(ve(xn.lastIndex+($e?0:gn)),St.length))===on)gn=ee(St,gn,Ut);else{if(se.push(St.slice(on,gn)),se.length===yn)return se;for(var pe=1;pe<=j.length-1;pe++)if(se.push(j[pe]),se.length===yn)return se;gn=on=O}}return se.push(St.slice(on)),se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_export.js"),H=E("./node_modules/core-js/modules/_string-context.js"),q="includes";k(k.P+k.F*E("./node_modules/core-js/modules/_fails-is-regexp.js")(q),"String",{includes:function(ve){return!!~H(this,ve,q).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_global.js"),H=E("./node_modules/core-js/modules/_has.js"),q=E("./node_modules/core-js/modules/_descriptors.js"),ee=E("./node_modules/core-js/modules/_export.js"),ve=E("./node_modules/core-js/modules/_redefine.js"),xe=E("./node_modules/core-js/modules/_meta.js").KEY,be=E("./node_modules/core-js/modules/_fails.js"),te=E("./node_modules/core-js/modules/_shared.js"),ue=E("./node_modules/core-js/modules/_set-to-string-tag.js"),ne=E("./node_modules/core-js/modules/_uid.js"),ie=E("./node_modules/core-js/modules/_wks.js"),ye=E("./node_modules/core-js/modules/_wks-ext.js"),Te=E("./node_modules/core-js/modules/_wks-define.js"),Se=E("./node_modules/core-js/modules/_enum-keys.js"),$e=E("./node_modules/core-js/modules/_is-array.js"),Pe=E("./node_modules/core-js/modules/_an-object.js"),Le=E("./node_modules/core-js/modules/_is-object.js"),Xe=E("./node_modules/core-js/modules/_to-object.js"),Ze=E("./node_modules/core-js/modules/_to-iobject.js"),nt=E("./node_modules/core-js/modules/_to-primitive.js"),ct=E("./node_modules/core-js/modules/_property-desc.js"),vt=E("./node_modules/core-js/modules/_object-create.js"),It=E("./node_modules/core-js/modules/_object-gopn-ext.js"),ft=E("./node_modules/core-js/modules/_object-gopd.js"),St=E("./node_modules/core-js/modules/_object-gops.js"),Gt=E("./node_modules/core-js/modules/_object-dp.js"),Ut=E("./node_modules/core-js/modules/_object-keys.js"),un=ft.f,xn=Gt.f,yn=It.f,on=k.Symbol,gn=k.JSON,se=gn&&gn.stringify,j="prototype",O=ie("_hidden"),pe=ie("toPrimitive"),Be={}.propertyIsEnumerable,et=te("symbol-registry"),lt=te("symbols"),le=te("op-symbols"),L=Object[j],D=typeof on=="function"&&!!St.f,Ee=k.QObject,Ge=!Ee||!Ee[j]||!Ee[j].findChild,je=q&&be(function(){return vt(xn({},"a",{get:function(){return xn(this,"a",{value:7}).a}})).a!=7})?function(_e,we,Ce){var He=un(L,we);He&&delete L[we],xn(_e,we,Ce),He&&_e!==L&&xn(L,we,He)}:xn,at=function(_e){var we=lt[_e]=vt(on[j]);return we._k=_e,we},jt=D&&typeof on.iterator=="symbol"?function(_e){return typeof _e=="symbol"}:function(_e){return _e instanceof on},Tn=function(we,Ce,He){return we===L&&Tn(le,Ce,He),Pe(we),Ce=nt(Ce,!0),Pe(He),H(lt,Ce)?(He.enumerable?(H(we,O)&&we[O][Ce]&&(we[O][Ce]=!1),He=vt(He,{enumerable:ct(0,!1)})):(H(we,O)||xn(we,O,ct(1,{})),we[O][Ce]=!0),je(we,Ce,He)):xn(we,Ce,He)},vn=function(we,Ce){Pe(we);for(var He=Se(Ce=Ze(Ce)),Ve=0,Oe=He.length,qe;Oe>Ve;)Tn(we,qe=He[Ve++],Ce[qe]);return we},_t=function(we,Ce){return Ce===void 0?vt(we):vn(vt(we),Ce)},Rt=function(we){var Ce=Be.call(this,we=nt(we,!0));return this===L&&H(lt,we)&&!H(le,we)?!1:Ce||!H(this,we)||!H(lt,we)||H(this,O)&&this[O][we]?Ce:!0},nn=function(we,Ce){if(we=Ze(we),Ce=nt(Ce,!0),!(we===L&&H(lt,Ce)&&!H(le,Ce))){var He=un(we,Ce);return He&&H(lt,Ce)&&!(H(we,O)&&we[O][Ce])&&(He.enumerable=!0),He}},xr=function(we){for(var Ce=yn(Ze(we)),He=[],Ve=0,Oe;Ce.length>Ve;)!H(lt,Oe=Ce[Ve++])&&Oe!=O&&Oe!=xe&&He.push(Oe);return He},ui=function(we){for(var Ce=we===L,He=yn(Ce?le:Ze(we)),Ve=[],Oe=0,qe;He.length>Oe;)H(lt,qe=He[Oe++])&&(!Ce||H(L,qe))&&Ve.push(lt[qe]);return Ve};D||(on=function(){if(this instanceof on)throw TypeError("Symbol is not a constructor!");var we=ne(arguments.length>0?arguments[0]:void 0),Ce=function(He){this===L&&Ce.call(le,He),H(this,O)&&H(this[O],we)&&(this[O][we]=!1),je(this,we,ct(1,He))};return q&&Ge&&je(L,we,{configurable:!0,set:Ce}),at(we)},ve(on[j],"toString",function(){return this._k}),ft.f=nn,Gt.f=Tn,E("./node_modules/core-js/modules/_object-gopn.js").f=It.f=xr,E("./node_modules/core-js/modules/_object-pie.js").f=Rt,St.f=ui,q&&!E("./node_modules/core-js/modules/_library.js")&&ve(L,"propertyIsEnumerable",Rt,!0),ye.f=function(_e){return at(ie(_e))}),ee(ee.G+ee.W+ee.F*!D,{Symbol:on});for(var cn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),er=0;cn.length>er;)ie(cn[er++]);for(var ze=Ut(ie.store),oe=0;ze.length>oe;)Te(ze[oe++]);ee(ee.S+ee.F*!D,"Symbol",{for:function(_e){return H(et,_e+="")?et[_e]:et[_e]=on(_e)},keyFor:function(we){if(!jt(we))throw TypeError(we+" is not a symbol!");for(var Ce in et)if(et[Ce]===we)return Ce},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),ee(ee.S+ee.F*!D,"Object",{create:_t,defineProperty:Tn,defineProperties:vn,getOwnPropertyDescriptor:nn,getOwnPropertyNames:xr,getOwnPropertySymbols:ui});var ce=be(function(){St.f(1)});ee(ee.S+ee.F*ce,"Object",{getOwnPropertySymbols:function(we){return St.f(Xe(we))}}),gn&&ee(ee.S+ee.F*(!D||be(function(){var _e=on();return se([_e])!="[null]"||se({a:_e})!="{}"||se(Object(_e))!="{}"})),"JSON",{stringify:function(we){for(var Ce=[we],He=1,Ve,Oe;arguments.length>He;)Ce.push(arguments[He++]);if(Oe=Ve=Ce[1],!(!Le(Ve)&&we===void 0||jt(we)))return $e(Ve)||(Ve=function(qe,ut){if(typeof Oe=="function"&&(ut=Oe.call(this,qe,ut)),!jt(ut))return ut}),Ce[1]=Ve,se.apply(gn,Ce)}}),on[j][pe]||E("./node_modules/core-js/modules/_hide.js")(on[j],pe,on[j].valueOf),ue(on,"Symbol"),ue(Math,"Math",!0),ue(k.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_export.js"),H=E("./node_modules/core-js/modules/_array-includes.js")(!0);k(k.P,"Array",{includes:function(ee){return H(this,ee,arguments.length>1?arguments[1]:void 0)}}),E("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(Z,N,E){var k=E("./node_modules/core-js/modules/_export.js"),H=E("./node_modules/core-js/modules/_own-keys.js"),q=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_object-gopd.js"),ve=E("./node_modules/core-js/modules/_create-property.js");k(k.S,"Object",{getOwnPropertyDescriptors:function(be){for(var te=q(be),ue=ee.f,ne=H(te),ie={},ye=0,Te,Se;ne.length>ye;)Se=ue(te,Te=ne[ye++]),Se!==void 0&&ve(ie,Te,Se);return ie}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(Z,N,E){E("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(Z,N,E){for(var k=E("./node_modules/core-js/modules/es6.array.iterator.js"),H=E("./node_modules/core-js/modules/_object-keys.js"),q=E("./node_modules/core-js/modules/_redefine.js"),ee=E("./node_modules/core-js/modules/_global.js"),ve=E("./node_modules/core-js/modules/_hide.js"),xe=E("./node_modules/core-js/modules/_iterators.js"),be=E("./node_modules/core-js/modules/_wks.js"),te=be("iterator"),ue=be("toStringTag"),ne=xe.Array,ie={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ye=H(ie),Te=0;Te<ye.length;Te++){var Se=ye[Te],$e=ie[Se],Pe=ee[Se],Le=Pe&&Pe.prototype,Xe;if(Le&&(Le[te]||ve(Le,te,ne),Le[ue]||ve(Le,ue,Se),xe[Se]=ne,$e))for(Xe in k)Le[Xe]||q(Le,Xe,k[Xe],!0)}},"./node_modules/crypt/crypt.js":function(Z,N){(function(){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k={rotl:function(H,q){return H<<q|H>>>32-q},rotr:function(H,q){return H<<32-q|H>>>q},endian:function(H){if(H.constructor==Number)return k.rotl(H,8)&16711935|k.rotl(H,24)&4278255360;for(var q=0;q<H.length;q++)H[q]=k.endian(H[q]);return H},randomBytes:function(H){for(var q=[];H>0;H--)q.push(Math.floor(Math.random()*256));return q},bytesToWords:function(H){for(var q=[],ee=0,ve=0;ee<H.length;ee++,ve+=8)q[ve>>>5]|=H[ee]<<24-ve%32;return q},wordsToBytes:function(H){for(var q=[],ee=0;ee<H.length*32;ee+=8)q.push(H[ee>>>5]>>>24-ee%32&255);return q},bytesToHex:function(H){for(var q=[],ee=0;ee<H.length;ee++)q.push((H[ee]>>>4).toString(16)),q.push((H[ee]&15).toString(16));return q.join("")},hexToBytes:function(H){for(var q=[],ee=0;ee<H.length;ee+=2)q.push(parseInt(H.substr(ee,2),16));return q},bytesToBase64:function(H){for(var q=[],ee=0;ee<H.length;ee+=3)for(var ve=H[ee]<<16|H[ee+1]<<8|H[ee+2],xe=0;xe<4;xe++)ee*8+xe*6<=H.length*8?q.push(E.charAt(ve>>>6*(3-xe)&63)):q.push("=");return q.join("")},base64ToBytes:function(H){H=H.replace(/[^A-Z0-9+\/]/ig,"");for(var q=[],ee=0,ve=0;ee<H.length;ve=++ee%4)ve!=0&&q.push((E.indexOf(H.charAt(ee-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|E.indexOf(H.charAt(ee))>>>6-ve*2);return q}};Z.exports=k})()},"./node_modules/is-buffer/index.js":function(Z,N){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */Z.exports=function(H){return H!=null&&(E(H)||k(H)||!!H._isBuffer)};function E(H){return!!H.constructor&&typeof H.constructor.isBuffer=="function"&&H.constructor.isBuffer(H)}function k(H){return typeof H.readFloatLE=="function"&&typeof H.slice=="function"&&E(H.slice(0,0))}},"./node_modules/md5/md5.js":function(Z,N,E){(function(){var k=E("./node_modules/crypt/crypt.js"),H=E("./node_modules/charenc/charenc.js").utf8,q=E("./node_modules/is-buffer/index.js"),ee=E("./node_modules/charenc/charenc.js").bin,ve=function(xe,be){xe.constructor==String?be&&be.encoding==="binary"?xe=ee.stringToBytes(xe):xe=H.stringToBytes(xe):q(xe)?xe=Array.prototype.slice.call(xe,0):!Array.isArray(xe)&&xe.constructor!==Uint8Array&&(xe=xe.toString());for(var te=k.bytesToWords(xe),ue=xe.length*8,ne=1732584193,ie=-271733879,ye=-1732584194,Te=271733878,Se=0;Se<te.length;Se++)te[Se]=(te[Se]<<8|te[Se]>>>24)&16711935|(te[Se]<<24|te[Se]>>>8)&4278255360;te[ue>>>5]|=128<<ue%32,te[(ue+64>>>9<<4)+14]=ue;for(var $e=ve._ff,Pe=ve._gg,Le=ve._hh,Xe=ve._ii,Se=0;Se<te.length;Se+=16){var Ze=ne,nt=ie,ct=ye,vt=Te;ne=$e(ne,ie,ye,Te,te[Se+0],7,-680876936),Te=$e(Te,ne,ie,ye,te[Se+1],12,-389564586),ye=$e(ye,Te,ne,ie,te[Se+2],17,606105819),ie=$e(ie,ye,Te,ne,te[Se+3],22,-1044525330),ne=$e(ne,ie,ye,Te,te[Se+4],7,-176418897),Te=$e(Te,ne,ie,ye,te[Se+5],12,1200080426),ye=$e(ye,Te,ne,ie,te[Se+6],17,-1473231341),ie=$e(ie,ye,Te,ne,te[Se+7],22,-45705983),ne=$e(ne,ie,ye,Te,te[Se+8],7,1770035416),Te=$e(Te,ne,ie,ye,te[Se+9],12,-1958414417),ye=$e(ye,Te,ne,ie,te[Se+10],17,-42063),ie=$e(ie,ye,Te,ne,te[Se+11],22,-1990404162),ne=$e(ne,ie,ye,Te,te[Se+12],7,1804603682),Te=$e(Te,ne,ie,ye,te[Se+13],12,-40341101),ye=$e(ye,Te,ne,ie,te[Se+14],17,-1502002290),ie=$e(ie,ye,Te,ne,te[Se+15],22,1236535329),ne=Pe(ne,ie,ye,Te,te[Se+1],5,-165796510),Te=Pe(Te,ne,ie,ye,te[Se+6],9,-1069501632),ye=Pe(ye,Te,ne,ie,te[Se+11],14,643717713),ie=Pe(ie,ye,Te,ne,te[Se+0],20,-373897302),ne=Pe(ne,ie,ye,Te,te[Se+5],5,-701558691),Te=Pe(Te,ne,ie,ye,te[Se+10],9,38016083),ye=Pe(ye,Te,ne,ie,te[Se+15],14,-660478335),ie=Pe(ie,ye,Te,ne,te[Se+4],20,-405537848),ne=Pe(ne,ie,ye,Te,te[Se+9],5,568446438),Te=Pe(Te,ne,ie,ye,te[Se+14],9,-1019803690),ye=Pe(ye,Te,ne,ie,te[Se+3],14,-187363961),ie=Pe(ie,ye,Te,ne,te[Se+8],20,1163531501),ne=Pe(ne,ie,ye,Te,te[Se+13],5,-1444681467),Te=Pe(Te,ne,ie,ye,te[Se+2],9,-51403784),ye=Pe(ye,Te,ne,ie,te[Se+7],14,1735328473),ie=Pe(ie,ye,Te,ne,te[Se+12],20,-1926607734),ne=Le(ne,ie,ye,Te,te[Se+5],4,-378558),Te=Le(Te,ne,ie,ye,te[Se+8],11,-2022574463),ye=Le(ye,Te,ne,ie,te[Se+11],16,1839030562),ie=Le(ie,ye,Te,ne,te[Se+14],23,-35309556),ne=Le(ne,ie,ye,Te,te[Se+1],4,-1530992060),Te=Le(Te,ne,ie,ye,te[Se+4],11,1272893353),ye=Le(ye,Te,ne,ie,te[Se+7],16,-155497632),ie=Le(ie,ye,Te,ne,te[Se+10],23,-1094730640),ne=Le(ne,ie,ye,Te,te[Se+13],4,681279174),Te=Le(Te,ne,ie,ye,te[Se+0],11,-358537222),ye=Le(ye,Te,ne,ie,te[Se+3],16,-722521979),ie=Le(ie,ye,Te,ne,te[Se+6],23,76029189),ne=Le(ne,ie,ye,Te,te[Se+9],4,-640364487),Te=Le(Te,ne,ie,ye,te[Se+12],11,-421815835),ye=Le(ye,Te,ne,ie,te[Se+15],16,530742520),ie=Le(ie,ye,Te,ne,te[Se+2],23,-995338651),ne=Xe(ne,ie,ye,Te,te[Se+0],6,-198630844),Te=Xe(Te,ne,ie,ye,te[Se+7],10,1126891415),ye=Xe(ye,Te,ne,ie,te[Se+14],15,-1416354905),ie=Xe(ie,ye,Te,ne,te[Se+5],21,-57434055),ne=Xe(ne,ie,ye,Te,te[Se+12],6,1700485571),Te=Xe(Te,ne,ie,ye,te[Se+3],10,-1894986606),ye=Xe(ye,Te,ne,ie,te[Se+10],15,-1051523),ie=Xe(ie,ye,Te,ne,te[Se+1],21,-2054922799),ne=Xe(ne,ie,ye,Te,te[Se+8],6,1873313359),Te=Xe(Te,ne,ie,ye,te[Se+15],10,-30611744),ye=Xe(ye,Te,ne,ie,te[Se+6],15,-1560198380),ie=Xe(ie,ye,Te,ne,te[Se+13],21,1309151649),ne=Xe(ne,ie,ye,Te,te[Se+4],6,-145523070),Te=Xe(Te,ne,ie,ye,te[Se+11],10,-1120210379),ye=Xe(ye,Te,ne,ie,te[Se+2],15,718787259),ie=Xe(ie,ye,Te,ne,te[Se+9],21,-343485551),ne=ne+Ze>>>0,ie=ie+nt>>>0,ye=ye+ct>>>0,Te=Te+vt>>>0}return k.endian([ne,ie,ye,Te])};ve._ff=function(xe,be,te,ue,ne,ie,ye){var Te=xe+(be&te|~be&ue)+(ne>>>0)+ye;return(Te<<ie|Te>>>32-ie)+be},ve._gg=function(xe,be,te,ue,ne,ie,ye){var Te=xe+(be&ue|te&~ue)+(ne>>>0)+ye;return(Te<<ie|Te>>>32-ie)+be},ve._hh=function(xe,be,te,ue,ne,ie,ye){var Te=xe+(be^te^ue)+(ne>>>0)+ye;return(Te<<ie|Te>>>32-ie)+be},ve._ii=function(xe,be,te,ue,ne,ie,ye){var Te=xe+(te^(be|~ue))+(ne>>>0)+ye;return(Te<<ie|Te>>>32-ie)+be},ve._blocksize=16,ve._digestsize=16,Z.exports=function(xe,be){if(xe==null)throw new Error("Illegal argument "+xe);var te=k.wordsToBytes(ve(xe,be));return be&&be.asBytes?te:be&&be.asString?ee.bytesToString(te):k.bytesToHex(te)}})()},"./node_modules/regenerator-runtime/runtime.js":function(Z,N,E){var k=function(H){var q=Object.prototype,ee=q.hasOwnProperty,ve,xe=typeof Symbol=="function"?Symbol:{},be=xe.iterator||"@@iterator",te=xe.asyncIterator||"@@asyncIterator",ue=xe.toStringTag||"@@toStringTag";function ne(j,O,pe){return Object.defineProperty(j,O,{value:pe,enumerable:!0,configurable:!0,writable:!0}),j[O]}try{ne({},"")}catch{ne=function(O,pe,Be){return O[pe]=Be}}function ie(j,O,pe,Be){var et=O&&O.prototype instanceof Xe?O:Xe,lt=Object.create(et.prototype),le=new on(Be||[]);return lt._invoke=Ut(j,pe,le),lt}H.wrap=ie;function ye(j,O,pe){try{return{type:"normal",arg:j.call(O,pe)}}catch(Be){return{type:"throw",arg:Be}}}var Te="suspendedStart",Se="suspendedYield",$e="executing",Pe="completed",Le={};function Xe(){}function Ze(){}function nt(){}var ct={};ct[be]=function(){return this};var vt=Object.getPrototypeOf,It=vt&&vt(vt(gn([])));It&&It!==q&&ee.call(It,be)&&(ct=It);var ft=nt.prototype=Xe.prototype=Object.create(ct);Ze.prototype=ft.constructor=nt,nt.constructor=Ze,Ze.displayName=ne(nt,ue,"GeneratorFunction");function St(j){["next","throw","return"].forEach(function(O){ne(j,O,function(pe){return this._invoke(O,pe)})})}H.isGeneratorFunction=function(j){var O=typeof j=="function"&&j.constructor;return O?O===Ze||(O.displayName||O.name)==="GeneratorFunction":!1},H.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,nt):(j.__proto__=nt,ne(j,ue,"GeneratorFunction")),j.prototype=Object.create(ft),j},H.awrap=function(j){return{__await:j}};function Gt(j,O){function pe(lt,le,L,D){var Ee=ye(j[lt],j,le);if(Ee.type==="throw")D(Ee.arg);else{var Ge=Ee.arg,je=Ge.value;return je&&typeof je=="object"&&ee.call(je,"__await")?O.resolve(je.__await).then(function(at){pe("next",at,L,D)},function(at){pe("throw",at,L,D)}):O.resolve(je).then(function(at){Ge.value=at,L(Ge)},function(at){return pe("throw",at,L,D)})}}var Be;function et(lt,le){function L(){return new O(function(D,Ee){pe(lt,le,D,Ee)})}return Be=Be?Be.then(L,L):L()}this._invoke=et}St(Gt.prototype),Gt.prototype[te]=function(){return this},H.AsyncIterator=Gt,H.async=function(j,O,pe,Be,et){et===void 0&&(et=Promise);var lt=new Gt(ie(j,O,pe,Be),et);return H.isGeneratorFunction(O)?lt:lt.next().then(function(le){return le.done?le.value:lt.next()})};function Ut(j,O,pe){var Be=Te;return function(lt,le){if(Be===$e)throw new Error("Generator is already running");if(Be===Pe){if(lt==="throw")throw le;return se()}for(pe.method=lt,pe.arg=le;;){var L=pe.delegate;if(L){var D=un(L,pe);if(D){if(D===Le)continue;return D}}if(pe.method==="next")pe.sent=pe._sent=pe.arg;else if(pe.method==="throw"){if(Be===Te)throw Be=Pe,pe.arg;pe.dispatchException(pe.arg)}else pe.method==="return"&&pe.abrupt("return",pe.arg);Be=$e;var Ee=ye(j,O,pe);if(Ee.type==="normal"){if(Be=pe.done?Pe:Se,Ee.arg===Le)continue;return{value:Ee.arg,done:pe.done}}else Ee.type==="throw"&&(Be=Pe,pe.method="throw",pe.arg=Ee.arg)}}}function un(j,O){var pe=j.iterator[O.method];if(pe===ve){if(O.delegate=null,O.method==="throw"){if(j.iterator.return&&(O.method="return",O.arg=ve,un(j,O),O.method==="throw"))return Le;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return Le}var Be=ye(pe,j.iterator,O.arg);if(Be.type==="throw")return O.method="throw",O.arg=Be.arg,O.delegate=null,Le;var et=Be.arg;if(!et)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,Le;if(et.done)O[j.resultName]=et.value,O.next=j.nextLoc,O.method!=="return"&&(O.method="next",O.arg=ve);else return et;return O.delegate=null,Le}St(ft),ne(ft,ue,"Generator"),ft[be]=function(){return this},ft.toString=function(){return"[object Generator]"};function xn(j){var O={tryLoc:j[0]};1 in j&&(O.catchLoc=j[1]),2 in j&&(O.finallyLoc=j[2],O.afterLoc=j[3]),this.tryEntries.push(O)}function yn(j){var O=j.completion||{};O.type="normal",delete O.arg,j.completion=O}function on(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(xn,this),this.reset(!0)}H.keys=function(j){var O=[];for(var pe in j)O.push(pe);return O.reverse(),function Be(){for(;O.length;){var et=O.pop();if(et in j)return Be.value=et,Be.done=!1,Be}return Be.done=!0,Be}};function gn(j){if(j){var O=j[be];if(O)return O.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var pe=-1,Be=function et(){for(;++pe<j.length;)if(ee.call(j,pe))return et.value=j[pe],et.done=!1,et;return et.value=ve,et.done=!0,et};return Be.next=Be}}return{next:se}}H.values=gn;function se(){return{value:ve,done:!0}}return on.prototype={constructor:on,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(yn),!j)for(var O in this)O.charAt(0)==="t"&&ee.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=ve)},stop:function(){this.done=!0;var j=this.tryEntries[0],O=j.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var O=this;function pe(D,Ee){return lt.type="throw",lt.arg=j,O.next=D,Ee&&(O.method="next",O.arg=ve),!!Ee}for(var Be=this.tryEntries.length-1;Be>=0;--Be){var et=this.tryEntries[Be],lt=et.completion;if(et.tryLoc==="root")return pe("end");if(et.tryLoc<=this.prev){var le=ee.call(et,"catchLoc"),L=ee.call(et,"finallyLoc");if(le&&L){if(this.prev<et.catchLoc)return pe(et.catchLoc,!0);if(this.prev<et.finallyLoc)return pe(et.finallyLoc)}else if(le){if(this.prev<et.catchLoc)return pe(et.catchLoc,!0)}else if(L){if(this.prev<et.finallyLoc)return pe(et.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(j,O){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var Be=this.tryEntries[pe];if(Be.tryLoc<=this.prev&&ee.call(Be,"finallyLoc")&&this.prev<Be.finallyLoc){var et=Be;break}}et&&(j==="break"||j==="continue")&&et.tryLoc<=O&&O<=et.finallyLoc&&(et=null);var lt=et?et.completion:{};return lt.type=j,lt.arg=O,et?(this.method="next",this.next=et.finallyLoc,Le):this.complete(lt)},complete:function(j,O){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&O&&(this.next=O),Le},finish:function(j){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.finallyLoc===j)return this.complete(pe.completion,pe.afterLoc),yn(pe),Le}},catch:function(j){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.tryLoc===j){var Be=pe.completion;if(Be.type==="throw"){var et=Be.arg;yn(pe)}return et}}throw new Error("illegal catch attempt")},delegateYield:function(j,O,pe){return this.delegate={iterator:gn(j),resultName:O,nextLoc:pe},this.method==="next"&&(this.arg=ve),Le}},H}(Z.exports);try{regeneratorRuntime=k}catch{Function("r","regeneratorRuntime = r")(k)}},"./src/api.js":function(Z,N,E){E.r(N),E.d(N,"setup",function(){return $e}),E.d(N,"setupCache",function(){return Se}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var k=E("axios"),H=E.n(k),q=E("./src/request.js"),ee=E("./src/cache.js");E.d(N,"serializeQuery",function(){return ee.serializeQuery});var ve=E("./src/config.js"),xe=E("./src/utilities.js");function be(Pe,Le){if(Pe==null)return{};var Xe=te(Pe,Le),Ze,nt;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Pe);for(nt=0;nt<ct.length;nt++)Ze=ct[nt],!(Le.indexOf(Ze)>=0)&&Object.prototype.propertyIsEnumerable.call(Pe,Ze)&&(Xe[Ze]=Pe[Ze])}return Xe}function te(Pe,Le){if(Pe==null)return{};var Xe={},Ze=Object.keys(Pe),nt,ct;for(ct=0;ct<Ze.length;ct++)nt=Ze[ct],!(Le.indexOf(nt)>=0)&&(Xe[nt]=Pe[nt]);return Xe}function ue(Pe,Le){var Xe=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(Pe);Le&&(Ze=Ze.filter(function(nt){return Object.getOwnPropertyDescriptor(Pe,nt).enumerable})),Xe.push.apply(Xe,Ze)}return Xe}function ne(Pe){for(var Le=1;Le<arguments.length;Le++){var Xe=arguments[Le]!=null?arguments[Le]:{};Le%2?ue(Object(Xe),!0).forEach(function(Ze){ie(Pe,Ze,Xe[Ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(Xe)):ue(Object(Xe)).forEach(function(Ze){Object.defineProperty(Pe,Ze,Object.getOwnPropertyDescriptor(Xe,Ze))})}return Pe}function ie(Pe,Le,Xe){return Le in Pe?Object.defineProperty(Pe,Le,{value:Xe,enumerable:!0,configurable:!0,writable:!0}):Pe[Le]=Xe,Pe}function ye(Pe,Le,Xe,Ze,nt,ct,vt){try{var It=Pe[ct](vt),ft=It.value}catch(St){Xe(St);return}It.done?Le(ft):Promise.resolve(ft).then(Ze,nt)}function Te(Pe){return function(){var Le=this,Xe=arguments;return new Promise(function(Ze,nt){var ct=Pe.apply(Le,Xe);function vt(ft){ye(ct,Ze,nt,vt,It,"next",ft)}function It(ft){ye(ct,Ze,nt,vt,It,"throw",ft)}vt(void 0)})}}function Se(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Pe=Object(ve.makeConfig)(Pe);function Le(Ze){return Xe.apply(this,arguments)}function Xe(){return Xe=Te(regeneratorRuntime.mark(function Ze(nt){var ct,vt,It,ft,St;return regeneratorRuntime.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return ct=Object(ve.mergeRequestConfig)(Pe,nt),Ut.next=3,Object(q.default)(ct,nt);case 3:if(vt=Ut.sent,It=vt.next,Object(xe.isFunction)(It)){Ut.next=7;break}return Ut.abrupt("return",It);case 7:return Ut.prev=7,Ut.next=10,ct.adapter(nt);case 10:vt=Ut.sent,Ut.next=16;break;case 13:Ut.prev=13,Ut.t0=Ut.catch(7),ft=Ut.t0;case 16:if(!ft){Ut.next=31;break}if(St=Object(xe.isFunction)(ct.readOnError)?ct.readOnError(ft,nt):ct.readOnError,!St){Ut.next=30;break}return Ut.prev=19,ct.acceptStale=!0,Ut.next=23,Object(q.default)(ct,nt);case 23:return vt=Ut.sent,vt.next.request.stale=!0,Ut.abrupt("return",vt.next);case 28:Ut.prev=28,Ut.t1=Ut.catch(19);case 30:throw ft;case 31:return Ut.abrupt("return",It(vt));case 32:case"end":return Ut.stop()}},Ze,null,[[7,13],[19,28]])})),Xe.apply(this,arguments)}return{adapter:Le,config:Pe,store:Pe.store}}function $e(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=ne(ne(ne({},ve.defaults.axios),Pe),{},{cache:ne(ne({},ve.defaults.axios.cache),Pe.cache)}),Xe=Se(Le.cache);Le.cache;var Ze=be(Le,["cache"]),nt=H.a.create(ne(ne({},Ze),{},{adapter:Xe.adapter}));return nt.cache=Xe.store,nt}N.default={setup:$e,setupCache:Se,serializeQuery:ee.serializeQuery}},"./src/cache.js":function(Z,N,E){E.r(N),E.d(N,"read",function(){return ue}),E.d(N,"write",function(){return be}),E.d(N,"key",function(){return ie}),E.d(N,"invalidate",function(){return Se}),E.d(N,"serializeQuery",function(){return $e}),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var k=E("./src/utilities.js"),H=E("./node_modules/md5/md5.js"),q=E.n(H),ee=E("./src/serialize.js");function ve(Pe,Le,Xe,Ze,nt,ct,vt){try{var It=Pe[ct](vt),ft=It.value}catch(St){Xe(St);return}It.done?Le(ft):Promise.resolve(ft).then(Ze,nt)}function xe(Pe){return function(){var Le=this,Xe=arguments;return new Promise(function(Ze,nt){var ct=Pe.apply(Le,Xe);function vt(ft){ve(ct,Ze,nt,vt,It,"next",ft)}function It(ft){ve(ct,Ze,nt,vt,It,"throw",ft)}vt(void 0)})}}function be(Pe,Le,Xe){return te.apply(this,arguments)}function te(){return te=xe(regeneratorRuntime.mark(function Pe(Le,Xe,Ze){var nt;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,nt={expires:Le.expires,data:Object(ee.default)(Le,Xe,Ze)},vt.next=4,Le.store.setItem(Le.uuid,nt);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),Le.debug("Could not store response",vt.t0),!Le.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,Le.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),Le.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Pe,null,[[0,6],[10,15]])})),te.apply(this,arguments)}function ue(Pe,Le){return ne.apply(this,arguments)}function ne(){return ne=xe(regeneratorRuntime.mark(function Pe(Le,Xe){var Ze,nt,ct,vt,It,ft,St,Gt;return regeneratorRuntime.wrap(function(un){for(;;)switch(un.prev=un.next){case 0:return Ze=Le.uuid,nt=Le.ignoreCache,un.next=3,Le.store.getItem(Ze);case 3:if(ct=un.sent,!(nt||!ct||!ct.data)){un.next=10;break}throw Le.debug("cache-miss",Xe.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(It=ct.expires,ft=ct.data,St=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!St&&!Le.acceptStale&&It!==0&&It<Date.now())){un.next=18;break}throw Le.debug("cache-stale",Xe.url),Gt=new Error,Gt.reason="cache-stale",Gt.message="Entry is stale",Gt;case 18:return Le.debug(Le.acceptStale?"cache-hit-stale":"cache-hit",Xe.url),un.abrupt("return",ft);case 20:case"end":return un.stop()}},Pe)})),ne.apply(this,arguments)}function ie(Pe){if(Object(k.isFunction)(Pe.key))return Pe.key;var Le;return Object(k.isString)(Pe.key)?Le=function(Ze){var nt="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct="".concat(Pe.key,"/").concat(nt).concat($e(Ze));return Ze.data?ct+q()(Ze.data):ct}:Le=function(Ze){var nt="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct=nt+$e(Ze);return Ze.data?ct+q()(Ze.data):ct},Le}function ye(Pe,Le){return Te.apply(this,arguments)}function Te(){return Te=xe(regeneratorRuntime.mark(function Pe(Le,Xe){var Ze;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(Ze=Xe.method.toLowerCase(),!Le.exclude.methods.includes(Ze)){ct.next=4;break}return ct.next=4,Le.store.removeItem(Le.uuid);case 4:case"end":return ct.stop()}},Pe)})),Te.apply(this,arguments)}function Se(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(k.isFunction)(Pe.invalidate)?Pe.invalidate:ye}function $e(Pe){if(!Pe.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Pe.params);var Le=Pe.params,Xe=Pe.params instanceof URLSearchParams;return Xe||(Le=new URLSearchParams,Object.keys(Pe.params).forEach(function(Ze){return Le.append(Ze,Pe.params[Ze])})),"?".concat(Le.toString())}N.default={read:ue,write:be,key:ie,invalidate:Se,serializeQuery:$e}},"./src/config.js":function(Z,N,E){E.r(N),E.d(N,"defaults",function(){return ne}),E.d(N,"makeConfig",function(){return ye}),E.d(N,"mergeRequestConfig",function(){return Te}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var k=E("axios"),H=E.n(k),q=E("./src/memory.js"),ee=E("./src/cache.js");function ve(Se,$e){var Pe=Object.keys(Se);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(Se);$e&&(Le=Le.filter(function(Xe){return Object.getOwnPropertyDescriptor(Se,Xe).enumerable})),Pe.push.apply(Pe,Le)}return Pe}function xe(Se){for(var $e=1;$e<arguments.length;$e++){var Pe=arguments[$e]!=null?arguments[$e]:{};$e%2?ve(Object(Pe),!0).forEach(function(Le){be(Se,Le,Pe[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(Pe)):ve(Object(Pe)).forEach(function(Le){Object.defineProperty(Se,Le,Object.getOwnPropertyDescriptor(Pe,Le))})}return Se}function be(Se,$e,Pe){return $e in Se?Object.defineProperty(Se,$e,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):Se[$e]=Pe,Se}var te=function(){},ue=function(){for(var $e,Pe=arguments.length,Le=new Array(Pe),Xe=0;Xe<Pe;Xe++)Le[Xe]=arguments[Xe];return($e=console).log.apply($e,["[axios-cache-adapter]"].concat(Le))},ne={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:H.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ie=["limit","store","adapter","uuid","acceptStale"],ye=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=xe(xe(xe({},ne.cache),$e),{},{exclude:xe(xe({},ne.cache.exclude),$e.exclude)});return Pe.key=Object(ee.key)(Pe),Pe.invalidate=Object(ee.invalidate)(Pe),Pe.debug!==!1?Pe.debug=typeof Pe.debug=="function"?Pe.debug:ue:Pe.debug=te,Pe.store||(Pe.store=new q.default),Pe.debug("Global cache config",Pe),Pe},Te=function($e,Pe){var Le=Pe.cache||{};Le&&ie.forEach(function(Ze){return Le[Ze]?delete Le[Ze]:void 0});var Xe=xe(xe(xe({},$e),Le),{},{exclude:xe(xe({},$e.exclude),Le.exclude)});return Xe.debug===!0&&(Xe.debug=ue),Le.key&&(Xe.key=Object(ee.key)(Le)),Xe.uuid=Xe.key(Pe),$e.debug("Request config for ".concat(Pe.url),Xe),Xe};N.default={defaults:ne,makeConfig:ye,mergeRequestConfig:Te}},"./src/exclude.js":function(Z,N,E){E.r(N),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js");var k=E("./src/utilities.js");function H(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=arguments.length>1?arguments[1]:void 0,ve=q.exclude,xe=ve===void 0?{}:ve,be=q.debug,te=ee.method.toLowerCase();if(te==="head"||xe.methods.includes(te))return be("Excluding request by HTTP method ".concat(ee.url)),!0;if(typeof xe.filter=="function"&&xe.filter(ee))return be("Excluding request by filter ".concat(ee.url)),!0;var ue=/\?.*$/.test(ee.url)||Object(k.isObject)(ee.params)&&Object.keys(ee.params).length!==0||typeof URLSearchParams<"u"&&ee.params instanceof URLSearchParams;if(xe.query&&ue)return be("Excluding request by query ".concat(ee.url)),!0;var ne=xe.paths||[],ie=ne.some(function(ye){return ee.url.match(ye)});return ie?(be("Excluding request by url match ".concat(ee.url)),!0):!1}N.default=H},"./src/index.node.js":function(Z,N,E){E.r(N);var k=E("./src/api.js");E.d(N,"setup",function(){return k.setup}),E.d(N,"setupCache",function(){return k.setupCache}),E.d(N,"serializeQuery",function(){return k.serializeQuery});var H=E("./src/redis.js");E.d(N,"RedisStore",function(){return H.default});var q=E("./src/redis-default.js");E.d(N,"RedisDefaultStore",function(){return q.default}),N.default={setup:k.setup,setupCache:k.setupCache,serializeQuery:k.serializeQuery,RedisStore:H.default,RedisDefaultStore:q.default}},"./src/limit.js":function(Z,N,E){E.r(N),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function k(ve,xe,be,te,ue,ne,ie){try{var ye=ve[ne](ie),Te=ye.value}catch(Se){be(Se);return}ye.done?xe(Te):Promise.resolve(Te).then(te,ue)}function H(ve){return function(){var xe=this,be=arguments;return new Promise(function(te,ue){var ne=ve.apply(xe,be);function ie(Te){k(ne,te,ue,ie,ye,"next",Te)}function ye(Te){k(ne,te,ue,ie,ye,"throw",Te)}ie(void 0)})}}function q(ve){return ee.apply(this,arguments)}function ee(){return ee=H(regeneratorRuntime.mark(function ve(xe){var be,te;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,xe.store.length();case 2:if(be=ne.sent,!(be<xe.limit)){ne.next=5;break}return ne.abrupt("return");case 5:return xe.debug("Current store size: ".concat(be)),ne.next=8,xe.store.iterate(function(ie,ye){te||(te={value:ie,key:ye}),ie.expires<te.value.expires&&(te={value:ie,key:ye})});case 8:if(!te){ne.next=12;break}return xe.debug("Removing item: ".concat(te.key)),ne.next=12,xe.store.removeItem(te.key);case 12:case"end":return ne.stop()}},ve)})),ee.apply(this,arguments)}N.default=q},"./src/memory.js":function(Z,N,E){E.r(N),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var k=E("./src/utilities.js");function H(te,ue,ne,ie,ye,Te,Se){try{var $e=te[Te](Se),Pe=$e.value}catch(Le){ne(Le);return}$e.done?ue(Pe):Promise.resolve(Pe).then(ie,ye)}function q(te){return function(){var ue=this,ne=arguments;return new Promise(function(ie,ye){var Te=te.apply(ue,ne);function Se(Pe){H(Te,ie,ye,Se,$e,"next",Pe)}function $e(Pe){H(Te,ie,ye,Se,$e,"throw",Pe)}Se(void 0)})}}function ee(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function ve(te,ue){for(var ne=0;ne<ue.length;ne++){var ie=ue[ne];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}function xe(te,ue,ne){return ue&&ve(te.prototype,ue),ne&&ve(te,ne),te}var be=function(){function te(){ee(this,te),this.store={}}return xe(te,[{key:"getItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){var Te;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Te=this.store[ye]||null,$e.abrupt("return",JSON.parse(Te));case 2:case"end":return $e.stop()}},ie,this)}));function ne(ie){return ue.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye,Te){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return this.store[ye]=JSON.stringify(Te),$e.abrupt("return",Te);case 2:case"end":return $e.stop()}},ie,this)}));function ne(ie,ye){return ue.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:delete this.store[ye];case 1:case"end":return Se.stop()}},ie,this)}));function ne(ie){return ue.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ue=q(regeneratorRuntime.mark(function ie(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:this.store={};case 1:case"end":return Te.stop()}},ie,this)}));function ne(){return ue.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ue=q(regeneratorRuntime.mark(function ie(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Te.stop()}},ie,this)}));function ne(){return ue.apply(this,arguments)}return ne}()},{key:"iterate",value:function(ne){return Promise.all(Object(k.mapObject)(this.store,ne))}}]),te}();N.default=be},"./src/redis-default.js":function(Z,N,E){E.r(N),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var k=E("util");function H(te,ue,ne,ie,ye,Te,Se){try{var $e=te[Te](Se),Pe=$e.value}catch(Le){ne(Le);return}$e.done?ue(Pe):Promise.resolve(Pe).then(ie,ye)}function q(te){return function(){var ue=this,ne=arguments;return new Promise(function(ie,ye){var Te=te.apply(ue,ne);function Se(Pe){H(Te,ie,ye,Se,$e,"next",Pe)}function $e(Pe){H(Te,ie,ye,Se,$e,"throw",Pe)}Se(void 0)})}}function ee(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function ve(te,ue){for(var ne=0;ne<ue.length;ne++){var ie=ue[ne];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}function xe(te,ue,ne){return ue&&ve(te.prototype,ue),ne&&ve(te,ne),te}var be=function(){function te(ue){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ee(this,te);var ie=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ue.constructor.name!=="RedisClient")throw ie}catch{throw ie}this.client=ue,this.prefix=ne.prefix||"axios-cache",this.maxScanCount=ne.maxScanCount||1e3,this.getAsync=Object(k.promisify)(ue.get).bind(ue),this.psetexAsync=Object(k.promisify)(ue.psetex).bind(ue),this.delAsync=Object(k.promisify)(ue.del).bind(ue),this.scanAsync=Object(k.promisify)(ue.scan).bind(ue)}return xe(te,[{key:"calculateTTL",value:function(ne){var ie=Date.now();return ne.expires&&ne.expires>ie?ne.expires-ie:-1}},{key:"transformKey",value:function(ne){return this.prefix+"_"+ne}},{key:"getItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){var Te;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.getAsync(this.transformKey(ye));case 2:if($e.t0=$e.sent,$e.t0){$e.next=5;break}$e.t0=null;case 5:return Te=$e.t0,$e.abrupt("return",JSON.parse(Te));case 7:case"end":return $e.stop()}},ie,this)}));function ne(ie){return ue.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye,Te){var Se,$e;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(Se=this.transformKey(ye),$e=this.calculateTTL(Te),!($e>0)){Le.next=5;break}return Le.next=5,this.psetexAsync(Se,$e,JSON.stringify(Te));case 5:return Le.abrupt("return",Te);case 6:case"end":return Le.stop()}},ie,this)}));function ne(ie,ye){return ue.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,this.delAsync(this.transformKey(ye));case 2:case"end":return Se.stop()}},ie,this)}));function ne(ie){return ue.apply(this,arguments)}return ne}()},{key:"scan",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){var Te,Se;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:Te="0";case 1:return Pe.next=3,this.scanAsync(Te,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Se=Pe.sent,Te=Se[0],Pe.next=7,ye(Se[1]);case 7:if(Te!=="0"){Pe.next=1;break}case 8:case"end":return Pe.stop()}},ie,this)}));function ne(ie){return ue.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ue=q(regeneratorRuntime.mark(function ie(){var ye=this;return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,this.scan(function($e){return ye.delAsync($e)});case 2:case"end":return Se.stop()}},ie,this)}));function ne(){return ue.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ue=q(regeneratorRuntime.mark(function ie(){var ye;return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return ye=0,Se.next=3,this.scan(function($e){ye+=$e.length});case 3:return Se.abrupt("return",ye);case 4:case"end":return Se.stop()}},ie,this)}));function ne(){return ue.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){var Te=this,Se,$e;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return $e=function(){return $e=q(regeneratorRuntime.mark(function Ze(nt){var ct,vt;return regeneratorRuntime.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.next=2,this.getAsync(nt);case 2:if(ft.t0=ft.sent,ft.t0){ft.next=5;break}ft.t0=null;case 5:return ct=ft.t0,vt=JSON.parse(ct),ft.next=9,ye(vt,nt);case 9:return ft.abrupt("return",ft.sent);case 10:case"end":return ft.stop()}},Ze,this)})),$e.apply(this,arguments)},Se=function(Ze){return $e.apply(this,arguments)},Le.next=4,this.scan(function(Xe){return Promise.all(Xe.map(Se.bind(Te)))});case 4:return Le.abrupt("return",Promise.resolve([]));case 5:case"end":return Le.stop()}},ie,this)}));function ne(ie){return ue.apply(this,arguments)}return ne}()}]),te}();N.default=be},"./src/redis.js":function(Z,N,E){E.r(N),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var k=E("util"),H=E("./src/utilities.js");function q(ue,ne,ie,ye,Te,Se,$e){try{var Pe=ue[Se]($e),Le=Pe.value}catch(Xe){ie(Xe);return}Pe.done?ne(Le):Promise.resolve(Le).then(ye,Te)}function ee(ue){return function(){var ne=this,ie=arguments;return new Promise(function(ye,Te){var Se=ue.apply(ne,ie);function $e(Le){q(Se,ye,Te,$e,Pe,"next",Le)}function Pe(Le){q(Se,ye,Te,$e,Pe,"throw",Le)}$e(void 0)})}}function ve(ue,ne){if(!(ue instanceof ne))throw new TypeError("Cannot call a class as a function")}function xe(ue,ne){for(var ie=0;ie<ne.length;ie++){var ye=ne[ie];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ue,ye.key,ye)}}function be(ue,ne,ie){return ne&&xe(ue.prototype,ne),ie&&xe(ue,ie),ue}var te=function(){function ue(ne){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,ue);var ye=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ne.constructor.name!=="RedisClient")throw ye}catch{throw ye}this.client=ne,this.HASH_KEY=ie,this.hgetAsync=Object(k.promisify)(ne.hget).bind(ne),this.hsetAsync=Object(k.promisify)(ne.hset).bind(ne),this.hdelAsync=Object(k.promisify)(ne.hdel).bind(ne),this.delAsync=Object(k.promisify)(ne.del).bind(ne),this.hlenAsync=Object(k.promisify)(ne.hlen).bind(ne),this.hgetallAsync=Object(k.promisify)(ne.hgetall).bind(ne)}return be(ue,[{key:"getItem",value:function(){var ne=ee(regeneratorRuntime.mark(function ye(Te){var Se;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetAsync(this.HASH_KEY,Te);case 2:if(Pe.t0=Pe.sent,Pe.t0){Pe.next=5;break}Pe.t0=null;case 5:return Se=Pe.t0,Pe.abrupt("return",JSON.parse(Se));case 7:case"end":return Pe.stop()}},ye,this)}));function ie(ye){return ne.apply(this,arguments)}return ie}()},{key:"setItem",value:function(){var ne=ee(regeneratorRuntime.mark(function ye(Te,Se){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hsetAsync(this.HASH_KEY,Te,JSON.stringify(Se));case 2:return Pe.abrupt("return",Se);case 3:case"end":return Pe.stop()}},ye,this)}));function ie(ye,Te){return ne.apply(this,arguments)}return ie}()},{key:"removeItem",value:function(){var ne=ee(regeneratorRuntime.mark(function ye(Te){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.hdelAsync(this.HASH_KEY,Te);case 2:case"end":return $e.stop()}},ye,this)}));function ie(ye){return ne.apply(this,arguments)}return ie}()},{key:"clear",value:function(){var ne=ee(regeneratorRuntime.mark(function ye(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Se.stop()}},ye,this)}));function ie(){return ne.apply(this,arguments)}return ie}()},{key:"length",value:function(){var ne=ee(regeneratorRuntime.mark(function ye(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Se.stop()}},ye,this)}));function ie(){return ne.apply(this,arguments)}return ie}()},{key:"iterate",value:function(){var ne=ee(regeneratorRuntime.mark(function ye(Te){var Se;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Se=Pe.sent,Pe.abrupt("return",Promise.all(Object(H.mapObject)(Se,Te)));case 4:case"end":return Pe.stop()}},ye,this)}));function ie(ye){return ne.apply(this,arguments)}return ie}()}]),ue}();N.default=te},"./src/request.js":function(Z,N,E){E.r(N),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var k=E("./src/response.js"),H=E("./src/exclude.js"),q=E("./src/cache.js");function ee(te,ue,ne,ie,ye,Te,Se){try{var $e=te[Te](Se),Pe=$e.value}catch(Le){ne(Le);return}$e.done?ue(Pe):Promise.resolve(Pe).then(ie,ye)}function ve(te){return function(){var ue=this,ne=arguments;return new Promise(function(ie,ye){var Te=te.apply(ue,ne);function Se(Pe){ee(Te,ie,ye,Se,$e,"next",Pe)}function $e(Pe){ee(Te,ie,ye,Se,$e,"throw",Pe)}Se(void 0)})}}function xe(te,ue){return be.apply(this,arguments)}function be(){return be=ve(regeneratorRuntime.mark(function te(ue,ne){var ie,ye,Te;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Te=function(){return ue.excludeFromCache=!0,{config:ue,next:ie}},ue.debug("uuid",ue.uuid),ie=function(){for(var Le=arguments.length,Xe=new Array(Le),Ze=0;Ze<Le;Ze++)Xe[Ze]=arguments[Ze];return k.default.apply(void 0,[ue,ne].concat(Xe))},$e.next=5,ue.invalidate(ue,ne);case 5:if(!Object(H.default)(ue,ne)){$e.next=7;break}return $e.abrupt("return",Te());case 7:return $e.prev=7,$e.next=10,Object(q.read)(ue,ne);case 10:return ye=$e.sent,ye.config=ne,ye.request={fromCache:!0},$e.abrupt("return",{config:ue,next:ye});case 16:if($e.prev=16,$e.t0=$e.catch(7),!(ue.clearOnStale&&$e.t0.reason==="cache-stale")){$e.next=21;break}return $e.next=21,ue.store.removeItem(ue.uuid);case 21:return $e.abrupt("return",{config:ue,next:ie});case 22:case"end":return $e.stop()}},te,null,[[7,16]])})),be.apply(this,arguments)}N.default=xe},"./src/response.js":function(Z,N,E){E.r(N),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var k=E("./src/limit.js"),H=E("./src/cache.js"),q=E("./node_modules/cache-control-esm/index.js");function ee(te,ue,ne,ie,ye,Te,Se){try{var $e=te[Te](Se),Pe=$e.value}catch(Le){ne(Le);return}$e.done?ue(Pe):Promise.resolve(Pe).then(ie,ye)}function ve(te){return function(){var ue=this,ne=arguments;return new Promise(function(ie,ye){var Te=te.apply(ue,ne);function Se(Pe){ee(Te,ie,ye,Se,$e,"next",Pe)}function $e(Pe){ee(Te,ie,ye,Se,$e,"throw",Pe)}Se(void 0)})}}function xe(te,ue,ne){return be.apply(this,arguments)}function be(){return be=ve(regeneratorRuntime.mark(function te(ue,ne,ie){var ye,Te,Se,$e,Pe;return regeneratorRuntime.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(ye=ie.request,Te=ye===void 0?{}:ye,Se=ie.headers,$e=Se===void 0?{}:Se,!(["arraybuffer","blob"].indexOf(Te.responseType)>-1)){Xe.next=3;break}return Xe.abrupt("return",ie);case 3:if(Pe={},ue.readHeaders&&($e["cache-control"]?(Pe=Object(q.parse)($e["cache-control"]),(Pe.noCache||Pe.noStore)&&(ue.excludeFromCache=!0)):$e.expires?ue.expires=new Date($e.expires).getTime():ue.expires=new Date().getTime()),ue.excludeFromCache){Xe.next=15;break}if(Pe.maxAge||Pe.maxAge===0?ue.expires=Date.now()+Pe.maxAge*1e3:ue.readHeaders||(ue.expires=ue.maxAge===0?Date.now():Date.now()+ue.maxAge),!ue.limit){Xe.next=11;break}return ue.debug("Detected limit: ".concat(ue.limit)),Xe.next=11,Object(k.default)(ue);case 11:return Xe.next=13,Object(H.write)(ue,ne,ie);case 13:Xe.next=16;break;case 15:ie.request.excludedFromCache=!0;case 16:return Xe.abrupt("return",ie);case 17:case"end":return Xe.stop()}},te)})),be.apply(this,arguments)}N.default=xe},"./src/serialize.js":function(Z,N,E){E.r(N),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function k(ee,ve){if(ee==null)return{};var xe=H(ee,ve),be,te;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(ee);for(te=0;te<ue.length;te++)be=ue[te],!(ve.indexOf(be)>=0)&&Object.prototype.propertyIsEnumerable.call(ee,be)&&(xe[be]=ee[be])}return xe}function H(ee,ve){if(ee==null)return{};var xe={},be=Object.keys(ee),te,ue;for(ue=0;ue<be.length;ue++)te=be[ue],!(ve.indexOf(te)>=0)&&(xe[te]=ee[te]);return xe}function q(ee,ve,xe){if(xe.data)try{xe.data=JSON.parse(xe.data)}catch(te){ee.debug("Could not parse data as JSON",te)}xe.request,xe.config;var be=k(xe,["request","config"]);return be}N.default=q},"./src/utilities.js":function(Z,N,E){E.r(N),E.d(N,"isObject",function(){return H}),E.d(N,"getTag",function(){return q}),E.d(N,"isFunction",function(){return ee}),E.d(N,"isString",function(){return ve}),E.d(N,"mapObject",function(){return xe}),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function k(be){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(ue){return typeof ue}:k=function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},k(be)}function H(be){var te=k(be);return be!=null&&(te==="object"||te==="function")}function q(be){return be===null?be===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(be)}function ee(be){if(!H(be))return!1;var te=q(be);return te==="[object Function]"||te==="[object AsyncFunction]"||te==="[object GeneratorFunction]"||te==="[object Proxy]"}function ve(be){var te=k(be);return te==="string"||te==="object"&&be!=null&&!Array.isArray(be)&&q(be)==="[object String]"}function xe(be,te){return H(be)?Object.keys(be).map(function(ue){return te(be[ue],ue)}):[]}},axios:function(Z,N){Z.exports=re},util:function(Z,N){Z.exports=A.default}})})});const J={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},Y=R.setupCache({maxAge:60*60*24*1e3}),de=w.default.create({adapter:Y.adapter}),G=async($,U={})=>{const re={...J,...U},[Z,N]=i.lngLatToGoogle($,re.zoomBase),E=re.tileUrl.replace("{z}",String(re.zoomBase)).replace("{x}",String(Z)).replace("{y}",String(N)),k={code:"",prefecture:"",city:""};let H;try{const ve=await de.get(E,{responseType:"arraybuffer"});H=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const q=new g.VectorTile(new b.default(H));let ee=Object.keys(q.layers);return Array.isArray(ee)||(ee=[ee]),ee.forEach(ve=>{const xe=q.layers[ve];if(xe&&re.layer===xe.name)for(let be=0;be<xe.length;be++){const te=xe.feature(be).toGeoJSON(Z,N,re.zoomBase);ee.length>1&&(te.properties.vt_layer=ve);const ue={type:"FeatureCollection",features:[te]};t.geoContains(ue,$)&&(k.code=String(te.id).length===5?String(te.id):`0${String(te.id)}`,k.prefecture=te.properties.prefecture,k.city=te.properties.city)}}),k};e.openReverseGeocoder=G})(HC);const xR={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},wR={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},bR={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},SR={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},jS={JPN:bR,CHN:xR,DEU:wR,KOR:SR};function oA(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function ER(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!DS(e[0])||!DS(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return oA(a,t,i)}function TR(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var d=c[a];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<d[d.length-1].length;g++)if(d[d.length-1][g]!==d[0][g])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return oA(l,t,i)}function DS(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function sA(e,t,i){if(e!==null)for(var a,c,d,g,l,b,w,A=0,C=0,M,R=e.type,J=R==="FeatureCollection",Y=R==="Feature",de=J?e.features.length:1,G=0;G<de;G++){w=J?e.features[G].geometry:Y?e.geometry:e,M=w?w.type==="GeometryCollection":!1,l=M?w.geometries.length:1;for(var $=0;$<l;$++){var U=0,re=0;if(g=M?w.geometries[$]:w,g!==null){b=g.coordinates;var Z=g.type;switch(A=i&&(Z==="Polygon"||Z==="MultiPolygon")?1:0,Z){case null:break;case"Point":if(t(b,C,G,U,re)===!1)return!1;C++,U++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],C,G,U,re)===!1)return!1;C++,Z==="MultiPoint"&&U++}Z==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-A;c++){if(t(b[a][c],C,G,U,re)===!1)return!1;C++}Z==="MultiLineString"&&U++,Z==="Polygon"&&re++}Z==="Polygon"&&U++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(re=0,c=0;c<b[a].length;c++){for(d=0;d<b[a][c].length-A;d++){if(t(b[a][c][d],C,G,U,re)===!1)return!1;C++}re++}U++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(sA(g.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function CR(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function IR(e){return e.type==="Feature"?e.geometry:e}function AR(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=CR(e),c=IR(t),d=c.type,g=t.bbox,l=c.coordinates;if(g&&PR(a,g)===!1)return!1;d==="Polygon"&&(l=[l]);for(var b=!1,w=0;w<l.length&&!b;w++)if(BS(a,l[w][0],i.ignoreBoundary)){for(var A=!1,C=1;C<l[w].length&&!A;)BS(a,l[w][C],!i.ignoreBoundary)&&(A=!0),C++;A||(b=!0)}return b}function BS(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,d=t.length-1;c<t.length;d=c++){var g=t[c][0],l=t[c][1],b=t[d][0],w=t[d][1],A=e[1]*(g-b)+l*(b-e[0])+w*(e[0]-g)===0&&(g-e[0])*(b-e[0])<=0&&(l-e[1])*(w-e[1])<=0;if(A)return!i;var C=l>e[1]!=w>e[1]&&e[0]<(b-g)*(e[1]-l)/(w-l)+g;C&&(a=!a)}return a}function PR(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function kR(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return sA(e,function(d){i+=d[0],a+=d[1],c++},!0),ER([i/c,a/c],t.properties)}const MR=()=>{const[e,t]=yt.useState(!1);return{detectCountry:yt.useCallback(async(a,c)=>{t(!0);const g=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of g.features)if(AR([a,c],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},D0=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var l;const[c,d]=yt.useState((l=e.properties)==null?void 0:l[t.key]);yt.useEffect(()=>{var b;d((b=e.properties)==null?void 0:b[t.key])},[e]);const g=yt.useCallback(b=>{d(b.currentTarget.value),a&&a(b)},[]);return pt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[pt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:g}),pt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return pt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return pt.jsx("option",{value:b.tags.name},b.id)})})]})},zR=({feature:e,fields:t})=>e.properties?pt.jsxs(pt.Fragment,{children:[t.postcodeField&&pt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,LR=({placeholder:e,defaultValue:t})=>{const[i,a]=yt.useState(t);yt.useEffect(()=>{a(t)},[t]);const c=yt.useCallback(d=>{a(d.currentTarget.value)},[]);return pt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[pt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var dg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,d="Expected a function",g="__lodash_hash_undefined__",l=1,b=2,w=1/0,A=9007199254740991,C="[object Arguments]",M="[object Array]",R="[object Boolean]",J="[object Date]",Y="[object Error]",de="[object Function]",G="[object GeneratorFunction]",$="[object Map]",U="[object Number]",re="[object Object]",Z="[object Promise]",N="[object RegExp]",E="[object Set]",k="[object String]",H="[object Symbol]",q="[object WeakMap]",ee="[object ArrayBuffer]",ve="[object DataView]",xe="[object Float32Array]",be="[object Float64Array]",te="[object Int8Array]",ue="[object Int16Array]",ne="[object Int32Array]",ie="[object Uint8Array]",ye="[object Uint8ClampedArray]",Te="[object Uint16Array]",Se="[object Uint32Array]",$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Le=/^\./,Xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/[\\^$.*+?()[\]{}|]/g,nt=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,It=/^(?:0|[1-9]\d*)$/,ft={};ft[xe]=ft[be]=ft[te]=ft[ue]=ft[ne]=ft[ie]=ft[ye]=ft[Te]=ft[Se]=!0,ft[C]=ft[M]=ft[ee]=ft[R]=ft[ve]=ft[J]=ft[Y]=ft[de]=ft[$]=ft[U]=ft[re]=ft[N]=ft[E]=ft[k]=ft[q]=!1;var St={};St[C]=St[M]=St[ee]=St[ve]=St[R]=St[J]=St[xe]=St[be]=St[te]=St[ue]=St[ne]=St[$]=St[U]=St[re]=St[N]=St[E]=St[k]=St[H]=St[ie]=St[ye]=St[Te]=St[Se]=!0,St[Y]=St[de]=St[q]=!1;var Gt=typeof jl=="object"&&jl&&jl.Object===Object&&jl,Ut=typeof self=="object"&&self&&self.Object===Object&&self,un=Gt||Ut||Function("return this")(),xn=t&&!t.nodeType&&t,yn=xn&&!0&&e&&!e.nodeType&&e,on=yn&&yn.exports===xn,gn=on&&Gt.process,se=function(){try{return gn&&gn.binding("util")}catch{}}(),j=se&&se.isTypedArray;function O(V,ge){return V.set(ge[0],ge[1]),V}function pe(V,ge){return V.add(ge),V}function Be(V,ge,Ue){switch(Ue.length){case 0:return V.call(ge);case 1:return V.call(ge,Ue[0]);case 2:return V.call(ge,Ue[0],Ue[1]);case 3:return V.call(ge,Ue[0],Ue[1],Ue[2])}return V.apply(ge,Ue)}function et(V,ge){for(var Ue=-1,it=V?V.length:0;++Ue<it&&ge(V[Ue],Ue,V)!==!1;);return V}function lt(V,ge){for(var Ue=-1,it=ge.length,zt=V.length;++Ue<it;)V[zt+Ue]=ge[Ue];return V}function le(V,ge,Ue,it){var zt=-1,Tt=V?V.length:0;for(it&&Tt&&(Ue=V[++zt]);++zt<Tt;)Ue=ge(Ue,V[zt],zt,V);return Ue}function L(V,ge){for(var Ue=-1,it=V?V.length:0;++Ue<it;)if(ge(V[Ue],Ue,V))return!0;return!1}function D(V){return function(ge){return ge==null?i:ge[V]}}function Ee(V,ge){for(var Ue=-1,it=Array(V);++Ue<V;)it[Ue]=ge(Ue);return it}function Ge(V){return function(ge){return V(ge)}}function je(V,ge){return V==null?i:V[ge]}function at(V){var ge=!1;if(V!=null&&typeof V.toString!="function")try{ge=!!(V+"")}catch{}return ge}function jt(V){var ge=-1,Ue=Array(V.size);return V.forEach(function(it,zt){Ue[++ge]=[zt,it]}),Ue}function Tn(V,ge){return function(Ue){return V(ge(Ue))}}function vn(V){var ge=-1,Ue=Array(V.size);return V.forEach(function(it){Ue[++ge]=it}),Ue}var _t=Array.prototype,Rt=Function.prototype,nn=Object.prototype,xr=un["__core-js_shared__"],ui=function(){var V=/[^.]+$/.exec(xr&&xr.keys&&xr.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""}(),cn=Rt.toString,er=nn.hasOwnProperty,ze=cn.call(Object),oe=nn.toString,ce=RegExp("^"+cn.call(er).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=on?un.Buffer:i,we=un.Symbol,Ce=un.Uint8Array,He=Tn(Object.getPrototypeOf,Object),Ve=Object.create,Oe=nn.propertyIsEnumerable,qe=_t.splice,ut=Object.getOwnPropertySymbols,ht=_e?_e.isBuffer:i,mt=Tn(Object.keys,Object),Jt=Math.max,ln=Fi(un,"DataView"),Dt=Fi(un,"Map"),Qt=Fi(un,"Promise"),hn=Fi(un,"Set"),Rn=Fi(un,"WeakMap"),jn=Fi(Object,"create"),Fn=!Oe.call({valueOf:1},"valueOf"),Mn=Co(ln),Jr=Co(Dt),qn=Co(Qt),wr=Co(hn),Br=Co(Rn),ti=we?we.prototype:i,Us=ti?ti.valueOf:i,fs=ti?ti.toString:i;function wn(){}function ds(V){var ge=-1,Ue=V?V.length:0;for(this.clear();++ge<Ue;){var it=V[ge];this.set(it[0],it[1])}}function Vn(){this.__data__=jn?jn(null):{}}function su(V){return this.has(V)&&delete this.__data__[V]}function el(V){var ge=this.__data__;if(jn){var Ue=ge[V];return Ue===g?i:Ue}return er.call(ge,V)?ge[V]:i}function Qr(V){var ge=this.__data__;return jn?ge[V]!==i:er.call(ge,V)}function xi(V,ge){var Ue=this.__data__;return Ue[V]=jn&&ge===i?g:ge,this}ds.prototype.clear=Vn,ds.prototype.delete=su,ds.prototype.get=el,ds.prototype.has=Qr,ds.prototype.set=xi;function To(V){var ge=-1,Ue=V?V.length:0;for(this.clear();++ge<Ue;){var it=V[ge];this.set(it[0],it[1])}}function zi(){this.__data__=[]}function Nr(V){var ge=this.__data__,Ue=ma(ge,V);if(Ue<0)return!1;var it=ge.length-1;return Ue==it?ge.pop():qe.call(ge,Ue,1),!0}function tl(V){var ge=this.__data__,Ue=ma(ge,V);return Ue<0?i:ge[Ue][1]}function $s(V){return ma(this.__data__,V)>-1}function ir(V,ge){var Ue=this.__data__,it=ma(Ue,V);return it<0?Ue.push([V,ge]):Ue[it][1]=ge,this}To.prototype.clear=zi,To.prototype.delete=Nr,To.prototype.get=tl,To.prototype.has=$s,To.prototype.set=ir;function bn(V){var ge=-1,Ue=V?V.length:0;for(this.clear();++ge<Ue;){var it=V[ge];this.set(it[0],it[1])}}function ps(){this.__data__={hash:new ds,map:new(Dt||To),string:new ds}}function hr(V){return _a(this,V).delete(V)}function nl(V){return _a(this,V).get(V)}function Li(V){return _a(this,V).has(V)}function au(V,ge){return _a(this,V).set(V,ge),this}bn.prototype.clear=ps,bn.prototype.delete=hr,bn.prototype.get=nl,bn.prototype.has=Li,bn.prototype.set=au;function qi(V){var ge=-1,Ue=V?V.length:0;for(this.__data__=new bn;++ge<Ue;)this.add(V[ge])}function sc(V){return this.__data__.set(V,g),this}function lu(V){return this.__data__.has(V)}qi.prototype.add=qi.prototype.push=sc,qi.prototype.has=lu;function ci(V){this.__data__=new To(V)}function rl(){this.__data__=new To}function Go(V){return this.__data__.delete(V)}function uu(V){return this.__data__.get(V)}function da(V){return this.__data__.has(V)}function ac(V,ge){var Ue=this.__data__;if(Ue instanceof To){var it=Ue.__data__;if(!Dt||it.length<c-1)return it.push([V,ge]),this;Ue=this.__data__=new bn(it)}return Ue.set(V,ge),this}ci.prototype.clear=rl,ci.prototype.delete=Go,ci.prototype.get=uu,ci.prototype.has=da,ci.prototype.set=ac;function lc(V,ge){var Ue=$r(V)||Ws(V)?Ee(V.length,String):[],it=Ue.length,zt=!!it;for(var Tt in V)(ge||er.call(V,Tt))&&!(zt&&(Tt=="length"||Jn(Tt,it)))&&Ue.push(Tt);return Ue}function pa(V,ge,Ue){(Ue!==i&&!mo(V[ge],Ue)||typeof ge=="number"&&Ue===i&&!(ge in V))&&(V[ge]=Ue)}function il(V,ge,Ue){var it=V[ge];(!(er.call(V,ge)&&mo(it,Ue))||Ue===i&&!(ge in V))&&(V[ge]=Ue)}function ma(V,ge){for(var Ue=V.length;Ue--;)if(mo(V[Ue][0],ge))return Ue;return-1}function Ph(V,ge){return V&&pu(ge,Ki(ge),V)}function ms(V,ge,Ue,it,zt,Tt,Zt){var Xt;if(it&&(Xt=Tt?it(V,zt,Tt,Zt):it(V)),Xt!==i)return Xt;if(!ni(V))return V;var fn=$r(V);if(fn){if(Xt=gc(V),!ge)return pc(V,Xt)}else{var Gn=Ur(V),En=Gn==de||Gn==G;if(Xs(V))return ml(V,ge);if(Gn==re||Gn==C||En&&!Tt){if(at(V))return Tt?V:{};if(Xt=xu(En?{}:V),!ge)return Mh(V,Ph(Xt,V))}else{if(!St[Gn])return Tt?V:{};Xt=Dn(V,Gn,ms,ge)}}Zt||(Zt=new ci);var Nn=Zt.get(V);if(Nn)return Nn;if(Zt.set(V,Xt),!fn)var sr=Ue?Gs(V):Ki(V);return et(sr||V,function(ar,tr){sr&&(tr=ar,ar=V[tr]),il(Xt,tr,ms(ar,ge,Ue,it,tr,V,Zt))}),Xt}function uc(V){return ni(V)?Ve(V):{}}var ol=Lh(hc),cc=mu();function hc(V,ge){return V&&cc(V,ge,Ki)}function sl(V,ge){ge=Sn(ge,V)?[ge]:pl(ge);for(var Ue=0,it=ge.length;V!=null&&Ue<it;)V=V[_s(ge[Ue++])];return Ue&&Ue==it?V:i}function cu(V,ge,Ue){var it=ge(V);return $r(V)?it:lt(it,Ue(V))}function gs(V){return oe.call(V)}function al(V,ge){return V!=null&&ge in Object(V)}function hi(V,ge,Ue,it,zt){return V===ge?!0:V==null||ge==null||!ni(V)&&!Io(ge)?V!==V&&ge!==ge:ll(V,ge,hi,Ue,it,zt)}function ll(V,ge,Ue,it,zt,Tt){var Zt=$r(V),Xt=$r(ge),fn=M,Gn=M;Zt||(fn=Ur(V),fn=fn==C?re:fn),Xt||(Gn=Ur(ge),Gn=Gn==C?re:Gn);var En=fn==re&&!at(V),Nn=Gn==re&&!at(ge),sr=fn==Gn;if(sr&&!En)return Tt||(Tt=new ci),Zt||Qn(V)?va(V,ge,Ue,it,zt,Tt):gu(V,ge,fn,Ue,it,zt,Tt);if(!(zt&b)){var ar=En&&er.call(V,"__wrapped__"),tr=Nn&&er.call(ge,"__wrapped__");if(ar||tr){var qo=ar?V.value():V,Yi=tr?ge.value():ge;return Tt||(Tt=new ci),Ue(qo,Yi,it,zt,Tt)}}return sr?(Tt||(Tt=new ci),yu(V,ge,Ue,it,zt,Tt)):!1}function ul(V,ge,Ue,it){var zt=Ue.length,Tt=zt,Zt=!it;if(V==null)return!Tt;for(V=Object(V);zt--;){var Xt=Ue[zt];if(Zt&&Xt[2]?Xt[1]!==V[Xt[0]]:!(Xt[0]in V))return!1}for(;++zt<Tt;){Xt=Ue[zt];var fn=Xt[0],Gn=V[fn],En=Xt[1];if(Zt&&Xt[2]){if(Gn===i&&!(fn in V))return!1}else{var Nn=new ci;if(it)var sr=it(Gn,En,fn,V,ge,Nn);if(!(sr===i?hi(En,Gn,it,l|b,Nn):sr))return!1}}return!0}function ga(V){if(!ni(V)||or(V))return!1;var ge=wa(V)||at(V)?ce:vt;return ge.test(Co(V))}function cl(V){return Io(V)&&ba(V.length)&&!!ft[oe.call(V)]}function ys(V){return typeof V=="function"?V:V==null?bs:typeof V=="object"?$r(V)?wi(V[0],V[1]):hl(V):Eu(V)}function Zo(V){if(!Hn(V))return mt(V);var ge=[];for(var Ue in Object(V))er.call(V,Ue)&&Ue!="constructor"&&ge.push(Ue);return ge}function In(V){if(!ni(V))return bu(V);var ge=Hn(V),Ue=[];for(var it in V)it=="constructor"&&(ge||!er.call(V,it))||Ue.push(it);return Ue}function hl(V){var ge=vu(V);return ge.length==1&&ge[0][2]?wu(ge[0][0],ge[0][1]):function(Ue){return Ue===V||ul(Ue,V,ge)}}function wi(V,ge){return Sn(V)&&Hs(ge)?wu(_s(V),ge):function(Ue){var it=ws(Ue,V);return it===i&&it===ge?qs(Ue,V):hi(ge,it,i,l|b)}}function fi(V,ge,Ue,it,zt){if(V!==ge){if(!($r(ge)||Qn(ge)))var Tt=In(ge);et(Tt||ge,function(Zt,Xt){if(Tt&&(Xt=Zt,Zt=ge[Xt]),ni(Zt))zt||(zt=new ci),hu(V,ge,Xt,Ue,fi,it,zt);else{var fn=it?it(V[Xt],Zt,Xt+"",V,ge,zt):i;fn===i&&(fn=Zt),pa(V,Xt,fn)}})}}function hu(V,ge,Ue,it,zt,Tt,Zt){var Xt=V[Ue],fn=ge[Ue],Gn=Zt.get(fn);if(Gn){pa(V,Ue,Gn);return}var En=Tt?Tt(Xt,fn,Ue+"",V,ge,Zt):i,Nn=En===i;Nn&&(En=fn,$r(fn)||Qn(fn)?$r(Xt)?En=Xt:xl(Xt)?En=pc(Xt):(Nn=!1,En=ms(fn,!0)):Sa(fn)||Ws(fn)?Ws(Xt)?En=Wo(Xt):!ni(Xt)||it&&wa(Xt)?(Nn=!1,En=ms(fn,!0)):En=Xt:Nn=!1),Nn&&(Zt.set(fn,En),zt(En,fn,it,Tt,Zt),Zt.delete(fn)),pa(V,Ue,En)}function fl(V){return function(ge){return sl(ge,V)}}function dl(V,ge){return ge=Jt(ge===i?V.length-1:ge,0),function(){for(var Ue=arguments,it=-1,zt=Jt(Ue.length-ge,0),Tt=Array(zt);++it<zt;)Tt[it]=Ue[ge+it];it=-1;for(var Zt=Array(ge+1);++it<ge;)Zt[it]=Ue[it];return Zt[ge]=Tt,Be(V,this,Zt)}}function fu(V){if(typeof V=="string")return V;if(Ea(V))return fs?fs.call(V):"";var ge=V+"";return ge=="0"&&1/V==-w?"-0":ge}function pl(V){return $r(V)?V:yl(V)}function ml(V,ge){if(ge)return V.slice();var Ue=new V.constructor(V.length);return V.copy(Ue),Ue}function ya(V){var ge=new V.constructor(V.byteLength);return new Ce(ge).set(new Ce(V)),ge}function du(V,ge){var Ue=ge?ya(V.buffer):V.buffer;return new V.constructor(Ue,V.byteOffset,V.byteLength)}function gl(V,ge,Ue){var it=ge?Ue(jt(V),!0):jt(V);return le(it,O,new V.constructor)}function fc(V){var ge=new V.constructor(V.source,ct.exec(V));return ge.lastIndex=V.lastIndex,ge}function dc(V,ge,Ue){var it=ge?Ue(vn(V),!0):vn(V);return le(it,pe,new V.constructor)}function Vs(V){return Us?Object(Us.call(V)):{}}function kh(V,ge){var Ue=ge?ya(V.buffer):V.buffer;return new V.constructor(Ue,V.byteOffset,V.length)}function pc(V,ge){var Ue=-1,it=V.length;for(ge||(ge=Array(it));++Ue<it;)ge[Ue]=V[Ue];return ge}function pu(V,ge,Ue,it){Ue||(Ue={});for(var zt=-1,Tt=ge.length;++zt<Tt;){var Zt=ge[zt],Xt=it?it(Ue[Zt],V[Zt],Zt,Ue,V):i;il(Ue,Zt,Xt===i?V[Zt]:Xt)}return Ue}function Mh(V,ge){return pu(V,_u(V),ge)}function zh(V){return dl(function(ge,Ue){var it=-1,zt=Ue.length,Tt=zt>1?Ue[zt-1]:i,Zt=zt>2?Ue[2]:i;for(Tt=V.length>3&&typeof Tt=="function"?(zt--,Tt):i,Zt&&Fh(Ue[0],Ue[1],Zt)&&(Tt=zt<3?i:Tt,zt=1),ge=Object(ge);++it<zt;){var Xt=Ue[it];Xt&&V(ge,Xt,it,Tt)}return ge})}function Lh(V,ge){return function(Ue,it){if(Ue==null)return Ue;if(!xs(Ue))return V(Ue,it);for(var zt=Ue.length,Tt=ge?zt:-1,Zt=Object(Ue);(ge?Tt--:++Tt<zt)&&it(Zt[Tt],Tt,Zt)!==!1;);return Ue}}function mu(V){return function(ge,Ue,it){for(var zt=-1,Tt=Object(ge),Zt=it(ge),Xt=Zt.length;Xt--;){var fn=Zt[V?Xt:++zt];if(Ue(Tt[fn],fn,Tt)===!1)break}return ge}}function va(V,ge,Ue,it,zt,Tt){var Zt=zt&b,Xt=V.length,fn=ge.length;if(Xt!=fn&&!(Zt&&fn>Xt))return!1;var Gn=Tt.get(V);if(Gn&&Tt.get(ge))return Gn==ge;var En=-1,Nn=!0,sr=zt&l?new qi:i;for(Tt.set(V,ge),Tt.set(ge,V);++En<Xt;){var ar=V[En],tr=ge[En];if(it)var qo=Zt?it(tr,ar,En,ge,V,Tt):it(ar,tr,En,V,ge,Tt);if(qo!==i){if(qo)continue;Nn=!1;break}if(sr){if(!L(ge,function(Yi,Ko){if(!sr.has(Ko)&&(ar===Yi||Ue(ar,Yi,it,zt,Tt)))return sr.add(Ko)})){Nn=!1;break}}else if(!(ar===tr||Ue(ar,tr,it,zt,Tt))){Nn=!1;break}}return Tt.delete(V),Tt.delete(ge),Nn}function gu(V,ge,Ue,it,zt,Tt,Zt){switch(Ue){case ve:if(V.byteLength!=ge.byteLength||V.byteOffset!=ge.byteOffset)return!1;V=V.buffer,ge=ge.buffer;case ee:return!(V.byteLength!=ge.byteLength||!it(new Ce(V),new Ce(ge)));case R:case J:case U:return mo(+V,+ge);case Y:return V.name==ge.name&&V.message==ge.message;case N:case k:return V==ge+"";case $:var Xt=jt;case E:var fn=Tt&b;if(Xt||(Xt=vn),V.size!=ge.size&&!fn)return!1;var Gn=Zt.get(V);if(Gn)return Gn==ge;Tt|=l,Zt.set(V,ge);var En=va(Xt(V),Xt(ge),it,zt,Tt,Zt);return Zt.delete(V),En;case H:if(Us)return Us.call(V)==Us.call(ge)}return!1}function yu(V,ge,Ue,it,zt,Tt){var Zt=zt&b,Xt=Ki(V),fn=Xt.length,Gn=Ki(ge),En=Gn.length;if(fn!=En&&!Zt)return!1;for(var Nn=fn;Nn--;){var sr=Xt[Nn];if(!(Zt?sr in ge:er.call(ge,sr)))return!1}var ar=Tt.get(V);if(ar&&Tt.get(ge))return ar==ge;var tr=!0;Tt.set(V,ge),Tt.set(ge,V);for(var qo=Zt;++Nn<fn;){sr=Xt[Nn];var Yi=V[sr],Ko=ge[sr];if(it)var Ca=Zt?it(Ko,Yi,sr,ge,V,Tt):it(Yi,Ko,sr,V,ge,Tt);if(!(Ca===i?Yi===Ko||Ue(Yi,Ko,it,zt,Tt):Ca)){tr=!1;break}qo||(qo=sr=="constructor")}if(tr&&!qo){var Ao=V.constructor,Oi=ge.constructor;Ao!=Oi&&"constructor"in V&&"constructor"in ge&&!(typeof Ao=="function"&&Ao instanceof Ao&&typeof Oi=="function"&&Oi instanceof Oi)&&(tr=!1)}return Tt.delete(V),Tt.delete(ge),tr}function Gs(V){return cu(V,Ki,_u)}function mc(){var V=wn.iteratee||wl;return V=V===wl?ys:V,arguments.length?V(arguments[0],arguments[1]):V}function _a(V,ge){var Ue=V.__data__;return vs(ge)?Ue[typeof ge=="string"?"string":"hash"]:Ue.map}function vu(V){for(var ge=Ki(V),Ue=ge.length;Ue--;){var it=ge[Ue],zt=V[it];ge[Ue]=[it,zt,Hs(zt)]}return ge}function Fi(V,ge){var Ue=je(V,ge);return ga(Ue)?Ue:i}var _u=ut?Tn(ut,Object):Tu,Ur=gs;(ln&&Ur(new ln(new ArrayBuffer(1)))!=ve||Dt&&Ur(new Dt)!=$||Qt&&Ur(Qt.resolve())!=Z||hn&&Ur(new hn)!=E||Rn&&Ur(new Rn)!=q)&&(Ur=function(V){var ge=oe.call(V),Ue=ge==re?V.constructor:i,it=Ue?Co(Ue):i;if(it)switch(it){case Mn:return ve;case Jr:return $;case qn:return Z;case wr:return E;case Br:return q}return ge});function Zs(V,ge,Ue){ge=Sn(ge,V)?[ge]:pl(ge);for(var it,zt=-1,Zt=ge.length;++zt<Zt;){var Tt=_s(ge[zt]);if(!(it=V!=null&&Ue(V,Tt)))break;V=V[Tt]}if(it)return it;var Zt=V?V.length:0;return!!Zt&&ba(Zt)&&Jn(Tt,Zt)&&($r(V)||Ws(V))}function gc(V){var ge=V.length,Ue=V.constructor(ge);return ge&&typeof V[0]=="string"&&er.call(V,"index")&&(Ue.index=V.index,Ue.input=V.input),Ue}function xu(V){return typeof V.constructor=="function"&&!Hn(V)?uc(He(V)):{}}function Dn(V,ge,Ue,it){var zt=V.constructor;switch(ge){case ee:return ya(V);case R:case J:return new zt(+V);case ve:return du(V,it);case xe:case be:case te:case ue:case ne:case ie:case ye:case Te:case Se:return kh(V,it);case $:return gl(V,it,Ue);case U:case k:return new zt(V);case N:return fc(V);case E:return dc(V,it,Ue);case H:return Vs(V)}}function Jn(V,ge){return ge=ge??A,!!ge&&(typeof V=="number"||It.test(V))&&V>-1&&V%1==0&&V<ge}function Fh(V,ge,Ue){if(!ni(Ue))return!1;var it=typeof ge;return(it=="number"?xs(Ue)&&Jn(ge,Ue.length):it=="string"&&ge in Ue)?mo(Ue[ge],V):!1}function Sn(V,ge){if($r(V))return!1;var Ue=typeof V;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||V==null||Ea(V)?!0:Pe.test(V)||!$e.test(V)||ge!=null&&V in Object(ge)}function vs(V){var ge=typeof V;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?V!=="__proto__":V===null}function or(V){return!!ui&&ui in V}function Hn(V){var ge=V&&V.constructor,Ue=typeof ge=="function"&&ge.prototype||nn;return V===Ue}function Hs(V){return V===V&&!ni(V)}function wu(V,ge){return function(Ue){return Ue==null?!1:Ue[V]===ge&&(ge!==i||V in Object(Ue))}}function bu(V){var ge=[];if(V!=null)for(var Ue in Object(V))ge.push(Ue);return ge}var yl=Ho(function(V){V=ri(V);var ge=[];return Le.test(V)&&ge.push(""),V.replace(Xe,function(Ue,it,zt,Tt){ge.push(zt?Tt.replace(nt,"$1"):it||Ue)}),ge});function _s(V){if(typeof V=="string"||Ea(V))return V;var ge=V+"";return ge=="0"&&1/V==-w?"-0":ge}function Co(V){if(V!=null){try{return cn.call(V)}catch{}try{return V+""}catch{}}return""}function vl(V){for(var ge=-1,Ue=V?V.length:0,it=0,zt=[];++ge<Ue;){var Tt=V[ge];Tt&&(zt[it++]=Tt)}return zt}function _l(V,ge){var Ue=$r(V)?et:ol;return Ue(V,mc(ge,3))}function Ho(V,ge){if(typeof V!="function"||ge&&typeof ge!="function")throw new TypeError(d);var Ue=function(){var it=arguments,zt=ge?ge.apply(this,it):it[0],Tt=Ue.cache;if(Tt.has(zt))return Tt.get(zt);var Zt=V.apply(this,it);return Ue.cache=Tt.set(zt,Zt),Zt};return Ue.cache=new(Ho.Cache||bn),Ue}Ho.Cache=bn;function xa(V){return ms(V,!1,!0)}function mo(V,ge){return V===ge||V!==V&&ge!==ge}function Ws(V){return xl(V)&&er.call(V,"callee")&&(!Oe.call(V,"callee")||oe.call(V)==C)}var $r=Array.isArray;function xs(V){return V!=null&&ba(V.length)&&!wa(V)}function xl(V){return Io(V)&&xs(V)}var Xs=ht||Cu;function Su(V){if(xs(V)&&($r(V)||typeof V=="string"||typeof V.splice=="function"||Xs(V)||Ws(V)))return!V.length;var ge=Ur(V);if(ge==$||ge==E)return!V.size;if(Fn||Hn(V))return!mt(V).length;for(var Ue in V)if(er.call(V,Ue))return!1;return!0}function wa(V){var ge=ni(V)?oe.call(V):"";return ge==de||ge==G}function ba(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=A}function ni(V){var ge=typeof V;return!!V&&(ge=="object"||ge=="function")}function Io(V){return!!V&&typeof V=="object"}function Sa(V){if(!Io(V)||oe.call(V)!=re||at(V))return!1;var ge=He(V);if(ge===null)return!0;var Ue=er.call(ge,"constructor")&&ge.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&cn.call(Ue)==ze}function Ea(V){return typeof V=="symbol"||Io(V)&&oe.call(V)==H}var Qn=j?Ge(j):cl;function Wo(V){return pu(V,Xo(V))}function ri(V){return V==null?"":fu(V)}function ws(V,ge,Ue){var it=V==null?i:sl(V,ge);return it===i?Ue:it}function qs(V,ge){return V!=null&&Zs(V,ge,al)}function Ki(V){return xs(V)?lc(V):Zo(V)}function Xo(V){return xs(V)?lc(V,!0):In(V)}var Ta=zh(function(V,ge,Ue){fi(V,ge,Ue)});function bs(V){return V}function wl(V){return ys(typeof V=="function"?V:ms(V,!0))}function Eu(V){return Sn(V)?D(_s(V)):fl(V)}function Tu(){return[]}function Cu(){return!1}wn.compact=vl,wn.iteratee=wl,wn.keys=Ki,wn.keysIn=Xo,wn.memoize=Ho,wn.merge=Ta,wn.property=Eu,wn.toPlainObject=Wo,wn.clone=xa,wn.eq=mo,wn.forEach=_l,wn.get=ws,wn.hasIn=qs,wn.identity=bs,wn.isArguments=Ws,wn.isArray=$r,wn.isArrayLike=xs,wn.isArrayLikeObject=xl,wn.isBuffer=Xs,wn.isEmpty=Su,wn.isFunction=wa,wn.isLength=ba,wn.isObject=ni,wn.isObjectLike=Io,wn.isPlainObject=Sa,wn.isSymbol=Ea,wn.isTypedArray=Qn,wn.stubArray=Tu,wn.stubFalse=Cu,wn.toString=ri,wn.each=_l,wn.VERSION=a,yn&&((yn.exports=wn)._=wn,xn._=wn)}).call(jl)})(dg,dg.exports);var FR=dg.exports,OR=cm;function cm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)cm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)cm(e.geometries[a],t);else if(i==="Feature")cm(e.geometry,t);else if(i==="Polygon")NS(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)NS(e.coordinates[a],t);return e}function NS(e,t){if(e.length!==0){US(e[0],t);for(var i=1;i<e.length;i++)US(e[i],!t)}}function US(e,t){for(var i=0,a=0,c=0,d=e.length,g=d-1;c<d;g=c++){var l=(e[c][0]-e[g][0])*(e[g][1]+e[c][1]),b=i+l;a+=Math.abs(i)>=Math.abs(l)?i-b+l:l-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const RR=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var jR=RR,Ln=FR,Vp=OR,hm={};jR.forEach(function(e){if(e.polygon==="all")hm[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),hm[e.key]={},hm[e.key][t]=i}});function DR(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Ln.merge(e,t)}var pg={};pg=function(e,t,i){t=Ln.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:hm,deduplicator:DR},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=d(e):a=c(e),a;function c(b){var w=new Array,A=new Array,C=new Array;function M(Z){var N=Ln.clone(Z);N.lat=Z.center.lat,N.lon=Z.center.lon,N.__is_center_placeholder=!0,w.push(N)}function R(Z){var N=Ln.clone(Z);N.nodes=[];function E(k,H,q){var ee={type:"node",id:"_"+N.type+"/"+N.id+"bounds"+q,lat:k,lon:H};N.nodes.push(ee.id),w.push(ee)}E(N.bounds.minlat,N.bounds.minlon,1),E(N.bounds.maxlat,N.bounds.minlon,2),E(N.bounds.maxlat,N.bounds.maxlon,3),E(N.bounds.minlat,N.bounds.maxlon,4),N.nodes.push(N.nodes[0]),N.__is_bounds_placeholder=!0,A.push(N)}function J(Z){function N(E,k,H){var q={type:"node",id:H,lat:E,lon:k};w.push(q)}Ln.isArray(Z.nodes)||(Z.nodes=Z.geometry.map(function(E){return E!==null?"_anonymous@"+E.lat+"/"+E.lon:"_anonymous@unknown_location"})),Z.geometry.forEach(function(E,k){E&&N(E.lat,E.lon,Z.nodes[k])})}function Y(Z){function N(k,H,q){var ee={type:"node",id:q,lat:k,lon:H};w.push(ee)}function E(k,H){if(A.some(function(ve){return ve.type=="way"&&ve.id==H}))return;var q={type:"way",id:H,nodes:[]};function ee(ve,xe){var be={type:"node",id:"_anonymous@"+ve+"/"+xe,lat:ve,lon:xe};q.nodes.push(be.id),w.push(be)}k.forEach(function(ve){ve?ee(ve.lat,ve.lon):q.nodes.push(void 0)}),A.push(q)}Z.members.forEach(function(k,H){k.type=="node"?k.lat&&N(k.lat,k.lon,k.ref):k.type=="way"&&k.geometry&&(k.ref="_fullGeom"+k.ref,E(k.geometry,k.ref))})}for(var de=0;de<b.elements.length;de++)switch(b.elements[de].type){case"node":var G=b.elements[de];w.push(G);break;case"way":var $=Ln.clone(b.elements[de]);$.nodes=Ln.clone($.nodes),A.push($),$.center&&M($),$.geometry?J($):$.bounds&&R($);break;case"relation":var U=Ln.clone(b.elements[de]);U.members=Ln.clone(U.members),C.push(U);var re=U.members&&U.members.some(function(Z){return Z.type=="node"&&Z.lat||Z.type=="way"&&Z.geometry&&Z.geometry.length>0});U.center&&M(U),re?Y(U):U.bounds&&R(U);break}return g(w,A,C)}function d(b){var w=new Array,A=new Array,C=new Array;function M(U,re,Z){U.hasAttribute(Z)&&(re[Z]=U.getAttribute(Z))}function R(U,re){var Z=Ln.clone(U);M(re,Z,"lat"),M(re,Z,"lon"),Z.__is_center_placeholder=!0,w.push(Z)}function J(U,re){var Z=Ln.clone(U);Z.nodes=[];function N(E,k,H){var q={type:"node",id:"_"+Z.type+"/"+Z.id+"bounds"+H,lat:E,lon:k};Z.nodes.push(q.id),w.push(q)}N(re.getAttribute("minlat"),re.getAttribute("minlon"),1),N(re.getAttribute("maxlat"),re.getAttribute("minlon"),2),N(re.getAttribute("maxlat"),re.getAttribute("maxlon"),3),N(re.getAttribute("minlat"),re.getAttribute("maxlon"),4),Z.nodes.push(Z.nodes[0]),Z.__is_bounds_placeholder=!0,A.push(Z)}function Y(U,re){function Z(N,E,k){var H={type:"node",id:k,lat:N,lon:E};return w.push(H),H.id}Ln.isArray(U.nodes)||(U.nodes=[],Ln.each(re,function(N,E){U.nodes.push("_anonymous@"+N.getAttribute("lat")+"/"+N.getAttribute("lon"))})),Ln.each(re,function(N,E){N.getAttribute("lat")&&Z(N.getAttribute("lat"),N.getAttribute("lon"),U.nodes[E])})}function de(U,re){function Z(E,k,H){var q={type:"node",id:H,lat:E,lon:k};w.push(q)}function N(E,k){if(A.some(function(ee){return ee.type=="way"&&ee.id==k}))return;var H={type:"way",id:k,nodes:[]};function q(ee,ve){var xe={type:"node",id:"_anonymous@"+ee+"/"+ve,lat:ee,lon:ve};H.nodes.push(xe.id),w.push(xe)}Ln.each(E,function(ee){ee.getAttribute("lat")?q(ee.getAttribute("lat"),ee.getAttribute("lon")):H.nodes.push(void 0)}),A.push(H)}Ln.each(re,function(E,k){U.members[k].type=="node"?E.getAttribute("lat")&&Z(E.getAttribute("lat"),E.getAttribute("lon"),U.members[k].ref):U.members[k].type=="way"&&E.getElementsByTagName("nd").length>0&&(U.members[k].ref="_fullGeom"+U.members[k].ref,N(E.getElementsByTagName("nd"),U.members[k].ref))})}Ln.each(b.getElementsByTagName("node"),function(U,re){var Z={};Ln.each(U.getElementsByTagName("tag"),function(E){Z[E.getAttribute("k")]=E.getAttribute("v")});var N={type:"node"};M(U,N,"id"),M(U,N,"lat"),M(U,N,"lon"),M(U,N,"version"),M(U,N,"timestamp"),M(U,N,"changeset"),M(U,N,"uid"),M(U,N,"user"),Ln.isEmpty(Z)||(N.tags=Z),w.push(N)});var G,$;return Ln.each(b.getElementsByTagName("way"),function(U,re){var Z={},N=[];Ln.each(U.getElementsByTagName("tag"),function(H){Z[H.getAttribute("k")]=H.getAttribute("v")});var E=!1;Ln.each(U.getElementsByTagName("nd"),function(H,q){var ee;(ee=H.getAttribute("ref"))&&(N[q]=ee),!E&&H.getAttribute("lat")&&(E=!0)});var k={type:"way"};M(U,k,"id"),M(U,k,"version"),M(U,k,"timestamp"),M(U,k,"changeset"),M(U,k,"uid"),M(U,k,"user"),N.length>0&&(k.nodes=N),Ln.isEmpty(Z)||(k.tags=Z),(G=U.getElementsByTagName("center")[0])&&R(k,G),E?Y(k,U.getElementsByTagName("nd")):($=U.getElementsByTagName("bounds")[0])&&J(k,$),A.push(k)}),Ln.each(b.getElementsByTagName("relation"),function(U,re){var Z={},N=[];Ln.each(U.getElementsByTagName("tag"),function(H){Z[H.getAttribute("k")]=H.getAttribute("v")});var E=!1;Ln.each(U.getElementsByTagName("member"),function(H,q){N[q]={},M(H,N[q],"ref"),M(H,N[q],"role"),M(H,N[q],"type"),(!E&&N[q].type=="node"&&H.getAttribute("lat")||N[q].type=="way"&&H.getElementsByTagName("nd").length>0)&&(E=!0)});var k={type:"relation"};M(U,k,"id"),M(U,k,"version"),M(U,k,"timestamp"),M(U,k,"changeset"),M(U,k,"uid"),M(U,k,"user"),N.length>0&&(k.members=N),Ln.isEmpty(Z)||(k.tags=Z),(G=U.getElementsByTagName("center")[0])&&R(k,G),E?de(k,U.getElementsByTagName("member")):($=U.getElementsByTagName("bounds")[0])&&J(k,$),C.push(k)}),g(w,A,C)}function g(b,w,A){function C(Le,Xe){if(typeof Xe!="object"&&(Xe={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Le,Xe);for(var Ze in Le)if(t.uninterestingTags[Ze]!==!0&&!(Xe[Ze]===!0||Xe[Ze]===Le[Ze]))return!0;return!1}function M(Le){var Xe={timestamp:Le.timestamp,version:Le.version,changeset:Le.changeset,user:Le.user,uid:Le.uid};for(var Ze in Xe)Xe[Ze]===void 0&&delete Xe[Ze];return Xe}for(var R=new Object,J=new Object,Y=0;Y<b.length;Y++){var de=b[Y];R[de.id]!==void 0&&(de=t.deduplicator(de,R[de.id])),R[de.id]=de,typeof de.tags<"u"&&C(de.tags)&&(J[de.id]=!0)}for(var Y=0;Y<A.length;Y++)if(Ln.isArray(A[Y].members))for(var G=0;G<A[Y].members.length;G++)A[Y].members[G].type=="node"&&(J[A[Y].members[G].ref]=!0);for(var $=new Object,U=new Object,Y=0;Y<w.length;Y++){var re=w[Y];if($[re.id]&&(re=t.deduplicator(re,$[re.id])),$[re.id]=re,Ln.isArray(re.nodes))for(var G=0;G<re.nodes.length;G++)typeof re.nodes[G]!="object"&&(U[re.nodes[G]]=!0,re.nodes[G]=R[re.nodes[G]])}var Z=new Array;for(var N in R){var de=R[N];(!U[N]||J[N])&&Z.push(de)}for(var E=new Array,Y=0;Y<A.length;Y++){var k=A[Y];E[k.id]&&(k=t.deduplicator(k,E[k.id])),E[k.id]=k}var H={node:{},way:{},relation:{}};for(var N in E){var k=E[N];if(!Ln.isArray(k.members)){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"ignored because it has no members");continue}for(var G=0;G<k.members.length;G++){var q=k.members[G].type,ee=k.members[G].ref;if(typeof ee!="number"&&(ee=ee.replace("_fullGeom","")),!H[q]){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"member",q+"/"+ee,"ignored because it has an invalid type");continue}typeof H[q][ee]>"u"&&(H[q][ee]=[]),H[q][ee].push({role:k.members[G].role,rel:k.id,reltags:k.tags})}}var ve,xe=[];for(Y=0;Y<Z.length;Y++){if(typeof Z[Y].lon>"u"||typeof Z[Y].lat>"u"){t.verbose&&console.warn("POI",Z[Y].type+"/"+Z[Y].id,"ignored because it lacks coordinates");continue}var be={type:"Feature",id:Z[Y].type+"/"+Z[Y].id,properties:{type:Z[Y].type,id:Z[Y].id,tags:Z[Y].tags||{},relations:H.node[Z[Y].id]||[],meta:M(Z[Y])},geometry:{type:"Point",coordinates:[+Z[Y].lon,+Z[Y].lat]}};Z[Y].__is_center_placeholder&&(be.properties.geometry="center"),i?i(be):xe.push(be)}for(var te=[],ue=[],Y=0;Y<A.length;Y++)if(E[A[Y].id]===A[Y]){if(typeof A[Y].tags<"u"&&(A[Y].tags.type=="route"||A[Y].tags.type=="waterway")){let Xe=function(Ze){var nt=!1,ct;ct=Ze.members.filter(function(St){return St.type==="way"}),ct=ct.map(function(St){var Gt=$[St.ref];if(Gt===void 0||Gt.nodes===void 0){t.verbose&&console.warn("Route "+Ze.type+"/"+Ze.id,"tainted by a missing or incomplete  way",St.type+"/"+St.ref),nt=!0;return}return{id:St.ref,role:St.role,way:Gt,nodes:Gt.nodes.filter(function(Ut){return Ut!==void 0?!0:(nt=!0,t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"tainted by a way",St.type+"/"+St.ref,"with a missing node"),!1)})}}),ct=Ln.compact(ct);var vt;vt=B0(ct);var It=[];if(It=Ln.compact(vt.map(function(St){return Ln.compact(St.map(function(Gt){return[+Gt.lon,+Gt.lat]}))})),It.length==0)return t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"contains no coordinates"),!1;var ft={type:"Feature",id:Ze.type+"/"+Ze.id,properties:{type:Ze.type,id:Ze.id,tags:Ze.tags||{},relations:H[Ze.type][Ze.id]||[],meta:M(Ze)},geometry:{type:It.length===1?"LineString":"MultiLineString",coordinates:It.length===1?It[0]:It}};return nt&&(t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"is tainted"),ft.properties.tainted=!0),ft};var $e=Xe;if(!Ln.isArray(A[Y].members)){t.verbose&&console.warn("Route",A[Y].type+"/"+A[Y].id,"ignored because it has no members");continue}if(A[Y].members.forEach(function(Ze){$[Ze.ref]&&!C($[Ze.ref].tags)&&($[Ze.ref].is_skippablerelationmember=!0)}),be=Xe(A[Y]),be===!1){t.verbose&&console.warn("Route relation",A[Y].type+"/"+A[Y].id,"ignored because it has invalid geometry");continue}i?i(Vp(be)):ue.push(be)}if(typeof A[Y].tags<"u"&&(A[Y].tags.type=="multipolygon"||A[Y].tags.type=="boundary")){let Ze=function(nt,ct){var vt=!1,It=ie?"way":"relation",ft=typeof nt.id=="number"?nt.id:+nt.id.replace("_fullGeom",""),St;St=ct.members.filter(function(O){return O.type==="way"}),St=St.map(function(O){var pe=$[O.ref];if(pe===void 0||pe.nodes===void 0){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"tainted by a missing or incomplete way",O.type+"/"+O.ref),vt=!0;return}return{id:O.ref,role:O.role||"outer",way:pe,nodes:pe.nodes.filter(function(Be){return Be!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",It+"/"+ft,"tainted by a way",O.type+"/"+O.ref,"with a missing node"),!1)})}}),St=Ln.compact(St);var Gt,Ut;Gt=B0(St.filter(function(O){return O.role==="outer"})),Ut=B0(St.filter(function(O){return O.role==="inner"}));var un;function xn(O){var pe=function(L,D){for(var Ee=0;Ee<D.length;Ee++)if(et(D[Ee],L))return!0;return!1},Be=function(L){return L.map(function(D){return[+D.lat,+D.lon]})},et=function(L,D){for(var Ee=L[0],Ge=L[1],je=!1,at=0,jt=D.length-1;at<D.length;jt=at++){var Tn=D[at][0],vn=D[at][1],_t=D[jt][0],Rt=D[jt][1],nn=vn>Ge!=Rt>Ge&&Ee<(_t-Tn)*(Ge-vn)/(Rt-vn)+Tn;nn&&(je=!je)}return je},lt,le;for(O=Be(O),lt=0;lt<Gt.length;lt++)if(le=Be(Gt[lt]),pe(le,O))return lt}un=Gt.map(function(O){return[O]});for(var yn=0;yn<Ut.length;yn++){var on=xn(Ut[yn]);on!==void 0?un[on].push(Ut[yn]):t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains an inner ring with no containing outer")}var gn=[];if(gn=Ln.compact(un.map(function(O){var pe=Ln.compact(O.map(function(Be){if(Be.length<4){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains a ring with less than four nodes");return}return Ln.compact(Be.map(function(et){return[+et.lon,+et.lat]}))}));if(pe.length==0){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains an empty ring cluster");return}return pe})),gn.length==0)return t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains no coordinates"),!1;var se="MultiPolygon";gn.length===1&&(se="Polygon",gn=gn[0]);var j={type:"Feature",id:nt.type+"/"+ft,properties:{type:nt.type,id:ft,tags:nt.tags||{},relations:H[nt.type][nt.id]||[],meta:M(nt)},geometry:{type:se,coordinates:gn}};return vt&&(t.verbose&&console.warn("Multipolygon",It+"/"+ft,"is tainted"),j.properties.tainted=!0),j};var Pe=Ze;if(!Ln.isArray(A[Y].members)){t.verbose&&console.warn("Multipolygon",A[Y].type+"/"+A[Y].id,"ignored because it has no members");continue}for(var ne=0,G=0;G<A[Y].members.length;G++)A[Y].members[G].role=="outer"?ne++:t.verbose&&A[Y].members[G].role!="inner"&&console.warn("Multipolygon",A[Y].type+"/"+A[Y].id,"member",A[Y].members[G].type+"/"+A[Y].members[G].ref,'ignored because it has an invalid role: "'+A[Y].members[G].role+'"');if(A[Y].members.forEach(function(nt){$[nt.ref]&&(nt.role==="outer"&&!C($[nt.ref].tags,A[Y].tags)&&($[nt.ref].is_skippablerelationmember=!0),nt.role==="inner"&&!C($[nt.ref].tags)&&($[nt.ref].is_skippablerelationmember=!0))}),ne==0){t.verbose&&console.warn("Multipolygon relation",A[Y].type+"/"+A[Y].id,"ignored because it has no outer ways");continue}var ie=!1;ne==1&&!C(A[Y].tags,{type:!0})&&(ie=!0);var be=null;if(!ie)be=Ze(A[Y],A[Y]);else{var ye=A[Y].members.filter(function(nt){return nt.role==="outer"})[0];if(ye=$[ye.ref],ye===void 0){t.verbose&&console.warn("Multipolygon relation",A[Y].type+"/"+A[Y].id,"ignored because outer way",ye.type+"/"+ye.ref,"is missing");continue}ye.is_skippablerelationmember=!0,be=Ze(ye,A[Y])}if(be===!1){t.verbose&&console.warn("Multipolygon relation",A[Y].type+"/"+A[Y].id,"ignored because it has invalid geometry");continue}i?i(Vp(be)):ue.push(be)}}for(var Y=0;Y<w.length;Y++)if($[w[Y].id]===w[Y]){if(!Ln.isArray(w[Y].nodes)){t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"ignored because it has no nodes");continue}if(!w[Y].is_skippablerelationmember){typeof w[Y].id!="number"&&(w[Y].id=+w[Y].id.replace("_fullGeom","")),w[Y].tainted=!1,w[Y].hidden=!1;var Te=new Array;for(G=0;G<w[Y].nodes.length;G++)typeof w[Y].nodes[G]=="object"?Te.push([+w[Y].nodes[G].lon,+w[Y].nodes[G].lat]):(t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"is tainted by an invalid node"),w[Y].tainted=!0);if(Te.length<=1){t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"ignored because it contains too few nodes");continue}var Se="LineString";typeof w[Y].nodes[0]<"u"&&typeof w[Y].nodes[w[Y].nodes.length-1]<"u"&&w[Y].nodes[0].id===w[Y].nodes[w[Y].nodes.length-1].id&&(typeof w[Y].tags<"u"&&l(w[Y].tags)||w[Y].__is_bounds_placeholder)&&(Se="Polygon",Te=[Te]);var be={type:"Feature",id:w[Y].type+"/"+w[Y].id,properties:{type:w[Y].type,id:w[Y].id,tags:w[Y].tags||{},relations:H.way[w[Y].id]||[],meta:M(w[Y])},geometry:{type:Se,coordinates:Te}};w[Y].tainted&&(t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"is tainted"),be.properties.tainted=!0),w[Y].__is_bounds_placeholder&&(be.properties.geometry="bounds"),i?i(Vp(be)):Se=="LineString"?te.push(be):ue.push(be)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(ue),ve.features=ve.features.concat(te),ve.features=ve.features.concat(xe),t.flatProperties&&ve.features.forEach(function(Le){Le.properties=Ln.merge(Le.properties.meta,Le.properties.tags,{id:Le.properties.type+"/"+Le.properties.id})}),ve=Vp(ve),ve)}function l(b){var w=t.polygonFeatures;if(typeof w=="function")return w(b);if(b.area==="no")return!1;for(var A in b){var C=b[A],M=w[A];if(!(typeof M>"u")&&C!=="no"&&(M===!0||M.included_values&&M.included_values[C]===!0||M.excluded_values&&M.excluded_values[C]!==!0))return!0}return!1}};function B0(e){for(var t=function(C){return C[0]},i=function(C){return C[C.length-1]},a=function(C,M){return C!==void 0&&M!==void 0&&C.id===M.id},c=[],d,g,l,b,w,A;e.length;)for(d=e.pop().nodes.slice(),c.push(d);e.length&&!a(t(d),i(d));){for(g=t(d),l=i(d),b=0;b<e.length;b++)if(A=e[b].nodes,a(l,t(A))){w=d.push,A=A.slice(1);break}else if(a(l,i(A))){w=d.push,A=A.slice(0,-1).reverse();break}else if(a(g,i(A))){w=d.unshift,A=A.slice(0,-1);break}else if(a(g,t(A))){w=d.unshift,A=A.slice(1).reverse();break}else A=w=null;if(!A)break;e.splice(b,1),w.apply(d,A)}return c}pg.toGeojson=pg;var BR=pg;const NR=Sd(BR),N0={type:"FeatureCollection",features:[]},aA=()=>{const[e,t]=yt.useState(!1),i=yt.useCallback(async(g,l,b)=>{var Y,de;if(e||(console.log(b),b<16))return N0;t(!0);let w=300;b>17&&(w=200),b>18&&(w=100),b>19&&(w=50),console.log("overpass: loading...");let A="[out:json]";A+=`[timeout:25];
`,A+='nwr["building"]',A+=`(around:${w},${g},${l});
`,A+="out meta geom;",console.log(A);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(A)}`,{});if(C.status!==200)return t(!1),N0;const M=await C.json();console.log("overpass json elements: ",M.elements);const R=NR(M);console.log("overpass osmtogeojson raw: ",R);for await(const G of R.features){if(!G.properties)continue;G.id=G.properties.id.split("/")[1];const $=(Y=M.elements.filter(re=>G.id?typeof G.id=="number"?re.id===G.id:re.id===parseInt(G.id):!1))==null?void 0:Y[0];if($&&(G.properties.tags=$.tags,G.properties.nodes=$.nodes),G.geometry.type==="Polygon"){const re=TR(G.geometry.coordinates);var J=kR(re);G.properties.center=J.geometry.coordinates}G.geometry.type==="Point"&&(G.properties.center=G.geometry.coordinates);const U=G.properties.uid;if(U){let re=localStorage.getItem(U+"-icon");if(re===null){const Z=await Os.getUser(U);(de=Z.img)!=null&&de.href?(re=Z.img.href,localStorage.setItem(U+"-icon",Z.img.href)):localStorage.setItem(U+"-icon","")}G.properties.userIconHref=re||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[a,c]=yt.useState(!1),d=yt.useCallback(async g=>{console.log("overpass: loading...",g),c(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(b.status!==200){c(!1);return}const w=await b.json();console.log("overpass json parent elements: ",w.elements);const A=250,C=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${A});
      out;
      `;console.log(C);const M=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(M.status!==200){c(!1);return}const R=await M.json();console.log("overpass json child elements: ",R.elements);const J=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${A});
      out;
      `;console.log(J);const Y=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(J)}`,{});if(Y.status!==200){c(!1);return}const de=await Y.json();return console.log("overpass json neighbour elements: ",de.elements),c(!1),[...w.elements,...R.elements,...de.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:d,loadingOverpass:e,loadingOverpassAdmin:a}},UR=()=>pt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[pt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),pt.jsxs("datalist",{id:"source-list",children:[pt.jsx("option",{value:"survey"}),pt.jsx("option",{value:"local knowledge"}),pt.jsx("option",{value:"extrapolation"}),pt.jsx("option",{value:"estimation from existing data"})]})]}),U0={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},$R=({feature:e,onCancel:t,onSubmit:i})=>{var ve,xe,be,te;const{detectCountry:a,loadingCountry:c}=MR(),{fetchOverpassAdmin:d,loadingOverpassAdmin:g}=aA(),l=JSON.parse((ve=e.properties)==null?void 0:ve.center),[b,w]=yt.useState(void 0),[A,C]=yt.useState(),[M,R]=yt.useState(e),[J,Y]=yt.useState(!1),[de,G]=yt.useState(!1),[$,U]=yt.useState(!1),[re,Z]=yt.useState(),[N,E]=yt.useState();yt.useEffect(()=>{Y(Os.isLoggedIn())},[]),yt.useEffect(()=>{(async()=>{var ne,ie;const ue=await a(l[0],l[1]);if(w(ue),(ne=ue==null?void 0:ue.properties)!=null&&ne.ISO_A3&&jS[ue.properties.ISO_A3]){const ye=jS[ue.properties.ISO_A3];C(ye);const Te=ye.defaultComment+" "+((ie=e.properties)==null?void 0:ie.id);E(Te)}})()},[e]),yt.useEffect(()=>{console.log(M.properties)},[M]);const k=yt.useCallback(async()=>{const ue=await HC.openReverseGeocoder([l[0],l[1]]);R(ne=>{const ie={properties:{"addr:province":ue.prefecture,"addr:city":ue.city,...ne.properties}};return ne.properties=ie.properties,ne})},[]),H=yt.useCallback(async()=>{if(!M.properties)return;M.properties.nodes;const ue=await d(JSON.parse(M.properties.nodes));console.log("onOverpassReverseGeocode",ue),Z(ue)},[M]),q=yt.useCallback(async ue=>{var Pe,Le,Xe;U(!0),ue.preventDefault();const ne=new FormData(ue.currentTarget),ie=JSON.parse((Pe=e.properties)==null?void 0:Pe.tags);ne.forEach((Ze,nt)=>{typeof Ze=="string"&&Ze.length>0&&nt!=="comment"&&nt!=="source"&&(ie[nt]=Ze)});const ye={type:"way",id:e.id,version:(Le=e.properties)==null?void 0:Le.version,tags:ie,nodes:JSON.parse((Xe=e.properties)==null?void 0:Xe.nodes)};console.info(JSON.stringify(ye,null,2));const Te={create:[],modify:[ye],delete:[]},Se=ne.get("comment");Se&&(U0.comment=Se.toString());const $e=ne.get("source");$e&&(U0.source=$e.toString()),await Os.uploadChangeset(U0,Te),U(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),ee=yt.useCallback(()=>{G(!0)},[]);return M.properties?pt.jsxs("div",{children:[pt.jsxs("div",{children:["OSM:"," ",pt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+M.properties.id,target:"_blank",children:M.properties.id})," | ",pt.jsx(VC,{feature:M}),A&&pt.jsxs("span",{children:[" | ","Address:"," ",pt.jsx(zR,{feature:M,fields:A})]})]}),c?pt.jsx(ca,{icon:qv,spin:!0}):pt.jsx(pt.Fragment,{children:A?pt.jsxs("form",{onSubmit:q,children:[pt.jsx("div",{className:"flex flex-wrap",children:pt.jsx(D0,{feature:M,fieldOption:A.postcodeField,onChange:ee})}),pt.jsx("div",{className:"flex flex-wrap",children:A.mainFields.map(ue=>pt.jsx(D0,{feature:M,fieldOption:ue,onChange:ee,suggestList:re},ue.key))}),pt.jsx("div",{className:"flex flex-wrap",children:A.detailFields.map(ue=>pt.jsx(D0,{feature:M,fieldOption:ue,onChange:ee},ue.key))}),pt.jsxs("div",{className:"flex flex-wrap",children:[pt.jsx(UR,{}),pt.jsx(LR,{defaultValue:N})]}),pt.jsx("div",{className:"flex flex-wrap",children:pt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[pt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((xe=b==null?void 0:b.properties)==null?void 0:xe.ISO_A3)==="JPN"&&pt.jsx("button",{type:"button",onClick:k,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),pt.jsxs("button",{type:"button",disabled:g,onClick:H,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",g&&pt.jsx(ca,{icon:qv,spin:!0})]}),pt.jsx("button",{disabled:!J||$||!de,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!J&&pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),pt.jsx($C,{})]})]})})]}):pt.jsx("div",{className:"flex flex-wrap",children:pt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[pt.jsxs("div",{className:"py-2",children:[pt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(be=b==null?void 0:b.properties)==null?void 0:be.NAME," (ISO code:",(te=b==null?void 0:b.properties)==null?void 0:te.ISO_A3,") does not support yet."]}),pt.jsx("p",{children:pt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),pt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function VR(e,t){const[i,a]=yt.useState(e);return yt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const GR={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},ZR={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function HR(){const e=yt.useRef(null),[t,i]=yt.useState(),a=VR(t,2500),c=yt.useRef(null),[d,g]=yt.useState({type:"FeatureCollection",features:[]}),[l,b]=yt.useState("auto"),[w,A]=yt.useState(),[C,M]=yt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:J}=aA();yt.useEffect(()=>{setTimeout(()=>{var E;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(E=c.current)==null||E.trigger())},500)},[]);const Y=yt.useCallback(E=>{const k=E.target.getCenter(),H=E.target.getZoom();i({zoom:H,latitude:k.lat,longitude:k.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),de=yt.useCallback(E=>{i(E.viewState)},[]),G=yt.useCallback(E=>{i(E.viewState)},[]);yt.useEffect(()=>{(async()=>{if(!a)return;const E=a,k=await R(E.latitude,E.longitude,E.zoom);g(k)})()},[a]);const $=yt.useCallback(E=>{var ve;b("pointer");const{features:k,point:{x:H,y:q}}=E,ee=k&&k[0];ee?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:ee.id},{hover:!0}),A({feature:ee,x:H,y:q})):A(void 0)},[]),U=yt.useCallback(E=>{var k;b("auto"),(k=e.current)==null||k.querySourceFeatures("buildings-source").map(H=>{var q;(q=e.current)==null||q.setFeatureState({source:"buildings-source",id:H.id},{hover:!1})}),A(void 0)},[]),re=yt.useCallback(E=>{var H;Z();const k=E.features&&E.features[0];k&&((H=e.current)==null||H.setFeatureState({source:"buildings-source",id:k.id},{select:!0}),M([k]))},[]),Z=yt.useCallback(()=>{var E;(E=e.current)==null||E.querySourceFeatures("buildings-source").map(k=>{var H;(H=e.current)==null||H.setFeatureState({source:"buildings-source",id:k.id},{select:!1})}),M([])},[]),N=yt.useMemo(()=>{let E=25;return t&&(E=t.zoom<18?20:t.zoom<19?25:35),d.features.map((k,H)=>!k.properties||!k.properties.center?null:pt.jsx(m4,{style:{cursor:"pointer"},longitude:k.properties.center[0],latitude:k.properties.center[1],anchor:"center",children:pt.jsx(Vz,{feature:k,size:E})},`marker-${H}`))},[d,t]);return pt.jsxs("div",{children:[pt.jsx(Sz,{}),pt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:pt.jsx(Hz,{viewState:t})}),pt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[C.length>0&&pt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:pt.jsx("div",{style:{padding:"10px"},children:C.map(E=>pt.jsx($R,{feature:E,onCancel:Z,onSubmit:Z},E.id))})}),pt.jsxs(p4,{ref:e,...t,onMove:de,onMoveEnd:G,onLoad:Y,interactiveLayerIds:["buildings-layer-fill"],onClick:re,onMouseEnter:$,onMouseLeave:U,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:oC,style:{width:"100%",height:"100%"},mapStyle:GR,children:[pt.jsx(_4,{id:"buildings-source",type:"geojson",data:d,children:pt.jsx(v4,{...ZR})}),pt.jsx(g4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),pt.jsx(y4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),pt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?pt.jsx(ca,{size:"2x",icon:xz}):J?pt.jsx(ca,{size:"2x",icon:qv,spin:!0}):pt.jsx(ca,{size:"2x",icon:wz})}),N,w&&pt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:w.x+5,top:w.y+5},children:[pt.jsx(VC,{feature:w.feature}),pt.jsx("br",{}),pt.jsx(Gz,{feature:w.feature}),pt.jsx(Ez,{feature:w.feature})]})]})]})]})}var lA={},Gg={};Gg.byteLength=qR;Gg.toByteArray=YR;Gg.fromByteArray=ej;var sa=[],is=[],WR=typeof Uint8Array<"u"?Uint8Array:Array,$0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dc=0,XR=$0.length;Dc<XR;++Dc)sa[Dc]=$0[Dc],is[$0.charCodeAt(Dc)]=Dc;is["-".charCodeAt(0)]=62;is["_".charCodeAt(0)]=63;function uA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function qR(e){var t=uA(e),i=t[0],a=t[1];return(i+a)*3/4-a}function KR(e,t,i){return(t+i)*3/4-i}function YR(e){var t,i=uA(e),a=i[0],c=i[1],d=new WR(KR(e,a,c)),g=0,l=c>0?a-4:a,b;for(b=0;b<l;b+=4)t=is[e.charCodeAt(b)]<<18|is[e.charCodeAt(b+1)]<<12|is[e.charCodeAt(b+2)]<<6|is[e.charCodeAt(b+3)],d[g++]=t>>16&255,d[g++]=t>>8&255,d[g++]=t&255;return c===2&&(t=is[e.charCodeAt(b)]<<2|is[e.charCodeAt(b+1)]>>4,d[g++]=t&255),c===1&&(t=is[e.charCodeAt(b)]<<10|is[e.charCodeAt(b+1)]<<4|is[e.charCodeAt(b+2)]>>2,d[g++]=t>>8&255,d[g++]=t&255),d}function JR(e){return sa[e>>18&63]+sa[e>>12&63]+sa[e>>6&63]+sa[e&63]}function QR(e,t,i){for(var a,c=[],d=t;d<i;d+=3)a=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(JR(a));return c.join("")}function ej(e){for(var t,i=e.length,a=i%3,c=[],d=16383,g=0,l=i-a;g<l;g+=d)c.push(QR(e,g,g+d>l?l:g+d));return a===1?(t=e[i-1],c.push(sa[t>>2]+sa[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(sa[t>>10]+sa[t>>4&63]+sa[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Gg,i=Bg,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=$,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,l.TYPED_ARRAY_SUPPORT=d(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const le=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(le,L),le.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function g(le){if(le>c)throw new RangeError('The value "'+le+'" is invalid for option "size"');const L=new Uint8Array(le);return Object.setPrototypeOf(L,l.prototype),L}function l(le,L,D){if(typeof le=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(le)}return b(le,L,D)}l.poolSize=8192;function b(le,L,D){if(typeof le=="string")return M(le,L);if(ArrayBuffer.isView(le))return J(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(O(le,ArrayBuffer)||le&&O(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(le,SharedArrayBuffer)||le&&O(le.buffer,SharedArrayBuffer)))return Y(le,L,D);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=le.valueOf&&le.valueOf();if(Ee!=null&&Ee!==le)return l.from(Ee,L,D);const Ge=de(le);if(Ge)return Ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return l.from(le[Symbol.toPrimitive]("string"),L,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}l.from=function(le,L,D){return b(le,L,D)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function w(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function A(le,L,D){return w(le),le<=0?g(le):L!==void 0?typeof D=="string"?g(le).fill(L,D):g(le).fill(L):g(le)}l.alloc=function(le,L,D){return A(le,L,D)};function C(le){return w(le),g(le<0?0:G(le)|0)}l.allocUnsafe=function(le){return C(le)},l.allocUnsafeSlow=function(le){return C(le)};function M(le,L){if((typeof L!="string"||L==="")&&(L="utf8"),!l.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const D=U(le,L)|0;let Ee=g(D);const Ge=Ee.write(le,L);return Ge!==D&&(Ee=Ee.slice(0,Ge)),Ee}function R(le){const L=le.length<0?0:G(le.length)|0,D=g(L);for(let Ee=0;Ee<L;Ee+=1)D[Ee]=le[Ee]&255;return D}function J(le){if(O(le,Uint8Array)){const L=new Uint8Array(le);return Y(L.buffer,L.byteOffset,L.byteLength)}return R(le)}function Y(le,L,D){if(L<0||le.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<L+(D||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return L===void 0&&D===void 0?Ee=new Uint8Array(le):D===void 0?Ee=new Uint8Array(le,L):Ee=new Uint8Array(le,L,D),Object.setPrototypeOf(Ee,l.prototype),Ee}function de(le){if(l.isBuffer(le)){const L=G(le.length)|0,D=g(L);return D.length===0||le.copy(D,0,0,L),D}if(le.length!==void 0)return typeof le.length!="number"||pe(le.length)?g(0):R(le);if(le.type==="Buffer"&&Array.isArray(le.data))return R(le.data)}function G(le){if(le>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return le|0}function $(le){return+le!=le&&(le=0),l.alloc(+le)}l.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==l.prototype},l.compare=function(L,D){if(O(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),O(D,Uint8Array)&&(D=l.from(D,D.offset,D.byteLength)),!l.isBuffer(L)||!l.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===D)return 0;let Ee=L.length,Ge=D.length;for(let je=0,at=Math.min(Ee,Ge);je<at;++je)if(L[je]!==D[je]){Ee=L[je],Ge=D[je];break}return Ee<Ge?-1:Ge<Ee?1:0},l.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(L,D){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return l.alloc(0);let Ee;if(D===void 0)for(D=0,Ee=0;Ee<L.length;++Ee)D+=L[Ee].length;const Ge=l.allocUnsafe(D);let je=0;for(Ee=0;Ee<L.length;++Ee){let at=L[Ee];if(O(at,Uint8Array))je+at.length>Ge.length?(l.isBuffer(at)||(at=l.from(at)),at.copy(Ge,je)):Uint8Array.prototype.set.call(Ge,at,je);else if(l.isBuffer(at))at.copy(Ge,je);else throw new TypeError('"list" argument must be an Array of Buffers');je+=at.length}return Ge};function U(le,L){if(l.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||O(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const D=le.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&D===0)return 0;let Ge=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return yn(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return se(le).length;default:if(Ge)return Ee?-1:yn(le).length;L=(""+L).toLowerCase(),Ge=!0}}l.byteLength=U;function re(le,L,D){let Ee=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,L>>>=0,D<=L))return"";for(le||(le="utf8");;)switch(le){case"hex":return ye(this,L,D);case"utf8":case"utf-8":return be(this,L,D);case"ascii":return ne(this,L,D);case"latin1":case"binary":return ie(this,L,D);case"base64":return xe(this,L,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,L,D);default:if(Ee)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Ee=!0}}l.prototype._isBuffer=!0;function Z(le,L,D){const Ee=le[L];le[L]=le[D],le[D]=Ee}l.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<L;D+=2)Z(this,D,D+1);return this},l.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<L;D+=4)Z(this,D,D+3),Z(this,D+1,D+2);return this},l.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<L;D+=8)Z(this,D,D+7),Z(this,D+1,D+6),Z(this,D+2,D+5),Z(this,D+3,D+4);return this},l.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?be(this,0,L):re.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(L){if(!l.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:l.compare(this,L)===0},l.prototype.inspect=function(){let L="";const D=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(L+=" ... "),"<Buffer "+L+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(L,D,Ee,Ge,je){if(O(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),!l.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(D===void 0&&(D=0),Ee===void 0&&(Ee=L?L.length:0),Ge===void 0&&(Ge=0),je===void 0&&(je=this.length),D<0||Ee>L.length||Ge<0||je>this.length)throw new RangeError("out of range index");if(Ge>=je&&D>=Ee)return 0;if(Ge>=je)return-1;if(D>=Ee)return 1;if(D>>>=0,Ee>>>=0,Ge>>>=0,je>>>=0,this===L)return 0;let at=je-Ge,jt=Ee-D;const Tn=Math.min(at,jt),vn=this.slice(Ge,je),_t=L.slice(D,Ee);for(let Rt=0;Rt<Tn;++Rt)if(vn[Rt]!==_t[Rt]){at=vn[Rt],jt=_t[Rt];break}return at<jt?-1:jt<at?1:0};function N(le,L,D,Ee,Ge){if(le.length===0)return-1;if(typeof D=="string"?(Ee=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,pe(D)&&(D=Ge?0:le.length-1),D<0&&(D=le.length+D),D>=le.length){if(Ge)return-1;D=le.length-1}else if(D<0)if(Ge)D=0;else return-1;if(typeof L=="string"&&(L=l.from(L,Ee)),l.isBuffer(L))return L.length===0?-1:E(le,L,D,Ee,Ge);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?Ge?Uint8Array.prototype.indexOf.call(le,L,D):Uint8Array.prototype.lastIndexOf.call(le,L,D):E(le,[L],D,Ee,Ge);throw new TypeError("val must be string, number or Buffer")}function E(le,L,D,Ee,Ge){let je=1,at=le.length,jt=L.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(le.length<2||L.length<2)return-1;je=2,at/=2,jt/=2,D/=2}function Tn(_t,Rt){return je===1?_t[Rt]:_t.readUInt16BE(Rt*je)}let vn;if(Ge){let _t=-1;for(vn=D;vn<at;vn++)if(Tn(le,vn)===Tn(L,_t===-1?0:vn-_t)){if(_t===-1&&(_t=vn),vn-_t+1===jt)return _t*je}else _t!==-1&&(vn-=vn-_t),_t=-1}else for(D+jt>at&&(D=at-jt),vn=D;vn>=0;vn--){let _t=!0;for(let Rt=0;Rt<jt;Rt++)if(Tn(le,vn+Rt)!==Tn(L,Rt)){_t=!1;break}if(_t)return vn}return-1}l.prototype.includes=function(L,D,Ee){return this.indexOf(L,D,Ee)!==-1},l.prototype.indexOf=function(L,D,Ee){return N(this,L,D,Ee,!0)},l.prototype.lastIndexOf=function(L,D,Ee){return N(this,L,D,Ee,!1)};function k(le,L,D,Ee){D=Number(D)||0;const Ge=le.length-D;Ee?(Ee=Number(Ee),Ee>Ge&&(Ee=Ge)):Ee=Ge;const je=L.length;Ee>je/2&&(Ee=je/2);let at;for(at=0;at<Ee;++at){const jt=parseInt(L.substr(at*2,2),16);if(pe(jt))return at;le[D+at]=jt}return at}function H(le,L,D,Ee){return j(yn(L,le.length-D),le,D,Ee)}function q(le,L,D,Ee){return j(on(L),le,D,Ee)}function ee(le,L,D,Ee){return j(se(L),le,D,Ee)}function ve(le,L,D,Ee){return j(gn(L,le.length-D),le,D,Ee)}l.prototype.write=function(L,D,Ee,Ge){if(D===void 0)Ge="utf8",Ee=this.length,D=0;else if(Ee===void 0&&typeof D=="string")Ge=D,Ee=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(Ee)?(Ee=Ee>>>0,Ge===void 0&&(Ge="utf8")):(Ge=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const je=this.length-D;if((Ee===void 0||Ee>je)&&(Ee=je),L.length>0&&(Ee<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");let at=!1;for(;;)switch(Ge){case"hex":return k(this,L,D,Ee);case"utf8":case"utf-8":return H(this,L,D,Ee);case"ascii":case"latin1":case"binary":return q(this,L,D,Ee);case"base64":return ee(this,L,D,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,L,D,Ee);default:if(at)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),at=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xe(le,L,D){return L===0&&D===le.length?t.fromByteArray(le):t.fromByteArray(le.slice(L,D))}function be(le,L,D){D=Math.min(le.length,D);const Ee=[];let Ge=L;for(;Ge<D;){const je=le[Ge];let at=null,jt=je>239?4:je>223?3:je>191?2:1;if(Ge+jt<=D){let Tn,vn,_t,Rt;switch(jt){case 1:je<128&&(at=je);break;case 2:Tn=le[Ge+1],(Tn&192)===128&&(Rt=(je&31)<<6|Tn&63,Rt>127&&(at=Rt));break;case 3:Tn=le[Ge+1],vn=le[Ge+2],(Tn&192)===128&&(vn&192)===128&&(Rt=(je&15)<<12|(Tn&63)<<6|vn&63,Rt>2047&&(Rt<55296||Rt>57343)&&(at=Rt));break;case 4:Tn=le[Ge+1],vn=le[Ge+2],_t=le[Ge+3],(Tn&192)===128&&(vn&192)===128&&(_t&192)===128&&(Rt=(je&15)<<18|(Tn&63)<<12|(vn&63)<<6|_t&63,Rt>65535&&Rt<1114112&&(at=Rt))}}at===null?(at=65533,jt=1):at>65535&&(at-=65536,Ee.push(at>>>10&1023|55296),at=56320|at&1023),Ee.push(at),Ge+=jt}return ue(Ee)}const te=4096;function ue(le){const L=le.length;if(L<=te)return String.fromCharCode.apply(String,le);let D="",Ee=0;for(;Ee<L;)D+=String.fromCharCode.apply(String,le.slice(Ee,Ee+=te));return D}function ne(le,L,D){let Ee="";D=Math.min(le.length,D);for(let Ge=L;Ge<D;++Ge)Ee+=String.fromCharCode(le[Ge]&127);return Ee}function ie(le,L,D){let Ee="";D=Math.min(le.length,D);for(let Ge=L;Ge<D;++Ge)Ee+=String.fromCharCode(le[Ge]);return Ee}function ye(le,L,D){const Ee=le.length;(!L||L<0)&&(L=0),(!D||D<0||D>Ee)&&(D=Ee);let Ge="";for(let je=L;je<D;++je)Ge+=Be[le[je]];return Ge}function Te(le,L,D){const Ee=le.slice(L,D);let Ge="";for(let je=0;je<Ee.length-1;je+=2)Ge+=String.fromCharCode(Ee[je]+Ee[je+1]*256);return Ge}l.prototype.slice=function(L,D){const Ee=this.length;L=~~L,D=D===void 0?Ee:~~D,L<0?(L+=Ee,L<0&&(L=0)):L>Ee&&(L=Ee),D<0?(D+=Ee,D<0&&(D=0)):D>Ee&&(D=Ee),D<L&&(D=L);const Ge=this.subarray(L,D);return Object.setPrototypeOf(Ge,l.prototype),Ge};function Se(le,L,D){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+L>D)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(L,D,Ee){L=L>>>0,D=D>>>0,Ee||Se(L,D,this.length);let Ge=this[L],je=1,at=0;for(;++at<D&&(je*=256);)Ge+=this[L+at]*je;return Ge},l.prototype.readUintBE=l.prototype.readUIntBE=function(L,D,Ee){L=L>>>0,D=D>>>0,Ee||Se(L,D,this.length);let Ge=this[L+--D],je=1;for(;D>0&&(je*=256);)Ge+=this[L+--D]*je;return Ge},l.prototype.readUint8=l.prototype.readUInt8=function(L,D){return L=L>>>0,D||Se(L,1,this.length),this[L]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(L,D){return L=L>>>0,D||Se(L,2,this.length),this[L]|this[L+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(L,D){return L=L>>>0,D||Se(L,2,this.length),this[L]<<8|this[L+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(L,D){return L=L>>>0,D||Se(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(L,D){return L=L>>>0,D||Se(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},l.prototype.readBigUInt64LE=et(function(L){L=L>>>0,Gt(L,"offset");const D=this[L],Ee=this[L+7];(D===void 0||Ee===void 0)&&Ut(L,this.length-8);const Ge=D+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,je=this[++L]+this[++L]*2**8+this[++L]*2**16+Ee*2**24;return BigInt(Ge)+(BigInt(je)<<BigInt(32))}),l.prototype.readBigUInt64BE=et(function(L){L=L>>>0,Gt(L,"offset");const D=this[L],Ee=this[L+7];(D===void 0||Ee===void 0)&&Ut(L,this.length-8);const Ge=D*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],je=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+Ee;return(BigInt(Ge)<<BigInt(32))+BigInt(je)}),l.prototype.readIntLE=function(L,D,Ee){L=L>>>0,D=D>>>0,Ee||Se(L,D,this.length);let Ge=this[L],je=1,at=0;for(;++at<D&&(je*=256);)Ge+=this[L+at]*je;return je*=128,Ge>=je&&(Ge-=Math.pow(2,8*D)),Ge},l.prototype.readIntBE=function(L,D,Ee){L=L>>>0,D=D>>>0,Ee||Se(L,D,this.length);let Ge=D,je=1,at=this[L+--Ge];for(;Ge>0&&(je*=256);)at+=this[L+--Ge]*je;return je*=128,at>=je&&(at-=Math.pow(2,8*D)),at},l.prototype.readInt8=function(L,D){return L=L>>>0,D||Se(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},l.prototype.readInt16LE=function(L,D){L=L>>>0,D||Se(L,2,this.length);const Ee=this[L]|this[L+1]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt16BE=function(L,D){L=L>>>0,D||Se(L,2,this.length);const Ee=this[L+1]|this[L]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt32LE=function(L,D){return L=L>>>0,D||Se(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},l.prototype.readInt32BE=function(L,D){return L=L>>>0,D||Se(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},l.prototype.readBigInt64LE=et(function(L){L=L>>>0,Gt(L,"offset");const D=this[L],Ee=this[L+7];(D===void 0||Ee===void 0)&&Ut(L,this.length-8);const Ge=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(Ee<<24);return(BigInt(Ge)<<BigInt(32))+BigInt(D+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),l.prototype.readBigInt64BE=et(function(L){L=L>>>0,Gt(L,"offset");const D=this[L],Ee=this[L+7];(D===void 0||Ee===void 0)&&Ut(L,this.length-8);const Ge=(D<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(Ge)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+Ee)}),l.prototype.readFloatLE=function(L,D){return L=L>>>0,D||Se(L,4,this.length),i.read(this,L,!0,23,4)},l.prototype.readFloatBE=function(L,D){return L=L>>>0,D||Se(L,4,this.length),i.read(this,L,!1,23,4)},l.prototype.readDoubleLE=function(L,D){return L=L>>>0,D||Se(L,8,this.length),i.read(this,L,!0,52,8)},l.prototype.readDoubleBE=function(L,D){return L=L>>>0,D||Se(L,8,this.length),i.read(this,L,!1,52,8)};function $e(le,L,D,Ee,Ge,je){if(!l.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>Ge||L<je)throw new RangeError('"value" argument is out of bounds');if(D+Ee>le.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(L,D,Ee,Ge){if(L=+L,D=D>>>0,Ee=Ee>>>0,!Ge){const jt=Math.pow(2,8*Ee)-1;$e(this,L,D,Ee,jt,0)}let je=1,at=0;for(this[D]=L&255;++at<Ee&&(je*=256);)this[D+at]=L/je&255;return D+Ee},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(L,D,Ee,Ge){if(L=+L,D=D>>>0,Ee=Ee>>>0,!Ge){const jt=Math.pow(2,8*Ee)-1;$e(this,L,D,Ee,jt,0)}let je=Ee-1,at=1;for(this[D+je]=L&255;--je>=0&&(at*=256);)this[D+je]=L/at&255;return D+Ee},l.prototype.writeUint8=l.prototype.writeUInt8=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,1,255,0),this[D]=L&255,D+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,2,65535,0),this[D]=L&255,this[D+1]=L>>>8,D+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,2,65535,0),this[D]=L>>>8,this[D+1]=L&255,D+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,4,4294967295,0),this[D+3]=L>>>24,this[D+2]=L>>>16,this[D+1]=L>>>8,this[D]=L&255,D+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,4,4294967295,0),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=L&255,D+4};function Pe(le,L,D,Ee,Ge){St(L,Ee,Ge,le,D,7);let je=Number(L&BigInt(4294967295));le[D++]=je,je=je>>8,le[D++]=je,je=je>>8,le[D++]=je,je=je>>8,le[D++]=je;let at=Number(L>>BigInt(32)&BigInt(4294967295));return le[D++]=at,at=at>>8,le[D++]=at,at=at>>8,le[D++]=at,at=at>>8,le[D++]=at,D}function Le(le,L,D,Ee,Ge){St(L,Ee,Ge,le,D,7);let je=Number(L&BigInt(4294967295));le[D+7]=je,je=je>>8,le[D+6]=je,je=je>>8,le[D+5]=je,je=je>>8,le[D+4]=je;let at=Number(L>>BigInt(32)&BigInt(4294967295));return le[D+3]=at,at=at>>8,le[D+2]=at,at=at>>8,le[D+1]=at,at=at>>8,le[D]=at,D+8}l.prototype.writeBigUInt64LE=et(function(L,D=0){return Pe(this,L,D,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=et(function(L,D=0){return Le(this,L,D,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(L,D,Ee,Ge){if(L=+L,D=D>>>0,!Ge){const Tn=Math.pow(2,8*Ee-1);$e(this,L,D,Ee,Tn-1,-Tn)}let je=0,at=1,jt=0;for(this[D]=L&255;++je<Ee&&(at*=256);)L<0&&jt===0&&this[D+je-1]!==0&&(jt=1),this[D+je]=(L/at>>0)-jt&255;return D+Ee},l.prototype.writeIntBE=function(L,D,Ee,Ge){if(L=+L,D=D>>>0,!Ge){const Tn=Math.pow(2,8*Ee-1);$e(this,L,D,Ee,Tn-1,-Tn)}let je=Ee-1,at=1,jt=0;for(this[D+je]=L&255;--je>=0&&(at*=256);)L<0&&jt===0&&this[D+je+1]!==0&&(jt=1),this[D+je]=(L/at>>0)-jt&255;return D+Ee},l.prototype.writeInt8=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,1,127,-128),L<0&&(L=255+L+1),this[D]=L&255,D+1},l.prototype.writeInt16LE=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,2,32767,-32768),this[D]=L&255,this[D+1]=L>>>8,D+2},l.prototype.writeInt16BE=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,2,32767,-32768),this[D]=L>>>8,this[D+1]=L&255,D+2},l.prototype.writeInt32LE=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,4,2147483647,-2147483648),this[D]=L&255,this[D+1]=L>>>8,this[D+2]=L>>>16,this[D+3]=L>>>24,D+4},l.prototype.writeInt32BE=function(L,D,Ee){return L=+L,D=D>>>0,Ee||$e(this,L,D,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=L&255,D+4},l.prototype.writeBigInt64LE=et(function(L,D=0){return Pe(this,L,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=et(function(L,D=0){return Le(this,L,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xe(le,L,D,Ee,Ge,je){if(D+Ee>le.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function Ze(le,L,D,Ee,Ge){return L=+L,D=D>>>0,Ge||Xe(le,L,D,4),i.write(le,L,D,Ee,23,4),D+4}l.prototype.writeFloatLE=function(L,D,Ee){return Ze(this,L,D,!0,Ee)},l.prototype.writeFloatBE=function(L,D,Ee){return Ze(this,L,D,!1,Ee)};function nt(le,L,D,Ee,Ge){return L=+L,D=D>>>0,Ge||Xe(le,L,D,8),i.write(le,L,D,Ee,52,8),D+8}l.prototype.writeDoubleLE=function(L,D,Ee){return nt(this,L,D,!0,Ee)},l.prototype.writeDoubleBE=function(L,D,Ee){return nt(this,L,D,!1,Ee)},l.prototype.copy=function(L,D,Ee,Ge){if(!l.isBuffer(L))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Ge&&Ge!==0&&(Ge=this.length),D>=L.length&&(D=L.length),D||(D=0),Ge>0&&Ge<Ee&&(Ge=Ee),Ge===Ee||L.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),L.length-D<Ge-Ee&&(Ge=L.length-D+Ee);const je=Ge-Ee;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,Ee,Ge):Uint8Array.prototype.set.call(L,this.subarray(Ee,Ge),D),je},l.prototype.fill=function(L,D,Ee,Ge){if(typeof L=="string"){if(typeof D=="string"?(Ge=D,D=0,Ee=this.length):typeof Ee=="string"&&(Ge=Ee,Ee=this.length),Ge!==void 0&&typeof Ge!="string")throw new TypeError("encoding must be a string");if(typeof Ge=="string"&&!l.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(L.length===1){const at=L.charCodeAt(0);(Ge==="utf8"&&at<128||Ge==="latin1")&&(L=at)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(D<0||this.length<D||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=D)return this;D=D>>>0,Ee=Ee===void 0?this.length:Ee>>>0,L||(L=0);let je;if(typeof L=="number")for(je=D;je<Ee;++je)this[je]=L;else{const at=l.isBuffer(L)?L:l.from(L,Ge),jt=at.length;if(jt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(je=0;je<Ee-D;++je)this[je+D]=at[je%jt]}return this};const ct={};function vt(le,L,D){ct[le]=class extends D{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ge,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(le,L){return`The "${le}" argument must be of type number. Received type ${typeof L}`},TypeError),vt("ERR_OUT_OF_RANGE",function(le,L,D){let Ee=`The value of "${le}" is out of range.`,Ge=D;return Number.isInteger(D)&&Math.abs(D)>2**32?Ge=It(String(D)):typeof D=="bigint"&&(Ge=String(D),(D>BigInt(2)**BigInt(32)||D<-(BigInt(2)**BigInt(32)))&&(Ge=It(Ge)),Ge+="n"),Ee+=` It must be ${L}. Received ${Ge}`,Ee},RangeError);function It(le){let L="",D=le.length;const Ee=le[0]==="-"?1:0;for(;D>=Ee+4;D-=3)L=`_${le.slice(D-3,D)}${L}`;return`${le.slice(0,D)}${L}`}function ft(le,L,D){Gt(L,"offset"),(le[L]===void 0||le[L+D]===void 0)&&Ut(L,le.length-(D+1))}function St(le,L,D,Ee,Ge,je){if(le>D||le<L){const at=typeof L=="bigint"?"n":"";let jt;throw je>3?L===0||L===BigInt(0)?jt=`>= 0${at} and < 2${at} ** ${(je+1)*8}${at}`:jt=`>= -(2${at} ** ${(je+1)*8-1}${at}) and < 2 ** ${(je+1)*8-1}${at}`:jt=`>= ${L}${at} and <= ${D}${at}`,new ct.ERR_OUT_OF_RANGE("value",jt,le)}ft(Ee,Ge,je)}function Gt(le,L){if(typeof le!="number")throw new ct.ERR_INVALID_ARG_TYPE(L,"number",le)}function Ut(le,L,D){throw Math.floor(le)!==le?(Gt(le,D),new ct.ERR_OUT_OF_RANGE(D||"offset","an integer",le)):L<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE(D||"offset",`>= ${D?1:0} and <= ${L}`,le)}const un=/[^+/0-9A-Za-z-_]/g;function xn(le){if(le=le.split("=")[0],le=le.trim().replace(un,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function yn(le,L){L=L||1/0;let D;const Ee=le.length;let Ge=null;const je=[];for(let at=0;at<Ee;++at){if(D=le.charCodeAt(at),D>55295&&D<57344){if(!Ge){if(D>56319){(L-=3)>-1&&je.push(239,191,189);continue}else if(at+1===Ee){(L-=3)>-1&&je.push(239,191,189);continue}Ge=D;continue}if(D<56320){(L-=3)>-1&&je.push(239,191,189),Ge=D;continue}D=(Ge-55296<<10|D-56320)+65536}else Ge&&(L-=3)>-1&&je.push(239,191,189);if(Ge=null,D<128){if((L-=1)<0)break;je.push(D)}else if(D<2048){if((L-=2)<0)break;je.push(D>>6|192,D&63|128)}else if(D<65536){if((L-=3)<0)break;je.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((L-=4)<0)break;je.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return je}function on(le){const L=[];for(let D=0;D<le.length;++D)L.push(le.charCodeAt(D)&255);return L}function gn(le,L){let D,Ee,Ge;const je=[];for(let at=0;at<le.length&&!((L-=2)<0);++at)D=le.charCodeAt(at),Ee=D>>8,Ge=D%256,je.push(Ge),je.push(Ee);return je}function se(le){return t.toByteArray(xn(le))}function j(le,L,D,Ee){let Ge;for(Ge=0;Ge<Ee&&!(Ge+D>=L.length||Ge>=le.length);++Ge)L[Ge+D]=le[Ge];return Ge}function O(le,L){return le instanceof L||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===L.name}function pe(le){return le!==le}const Be=function(){const le="0123456789abcdef",L=new Array(256);for(let D=0;D<16;++D){const Ee=D*16;for(let Ge=0;Ge<16;++Ge)L[Ee+Ge]=le[D]+le[Ge]}return L}();function et(le){return typeof BigInt>"u"?lt:le}function lt(){throw new Error("BigInt not supported")}})(lA);window.Buffer=lA.Buffer;P3.render(pt.jsx(YS.StrictMode,{children:pt.jsx(HR,{})}),document.getElementById("root"));

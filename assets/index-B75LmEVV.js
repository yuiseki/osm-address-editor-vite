function Nk(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const m=Object.getOwnPropertyDescriptor(a,c);m&&Object.defineProperty(e,c,m.get?m:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const m of c)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(c){const m={};return c.integrity&&(m.integrity=c.integrity),c.referrerPolicy&&(m.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?m.credentials="include":c.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function a(c){if(c.ep)return;c.ep=!0;const m=i(c);fetch(c.href,m)}})();var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var AE={exports:{}},Zg={},PE={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=Symbol.for("react.element"),Uk=Symbol.for("react.portal"),$k=Symbol.for("react.fragment"),Vk=Symbol.for("react.strict_mode"),Gk=Symbol.for("react.profiler"),Hk=Symbol.for("react.provider"),Wk=Symbol.for("react.context"),Zk=Symbol.for("react.forward_ref"),qk=Symbol.for("react.suspense"),Xk=Symbol.for("react.memo"),Kk=Symbol.for("react.lazy"),Mb=Symbol.iterator;function Yk(e){return e===null||typeof e!="object"?null:(e=Mb&&e[Mb]||e["@@iterator"],typeof e=="function"?e:null)}var kE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ME=Object.assign,zE={};function Rh(e,t,i){this.props=e,this.context=t,this.refs=zE,this.updater=i||kE}Rh.prototype.isReactComponent={};Rh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function RE(){}RE.prototype=Rh.prototype;function a1(e,t,i){this.props=e,this.context=t,this.refs=zE,this.updater=i||kE}var l1=a1.prototype=new RE;l1.constructor=a1;ME(l1,Rh.prototype);l1.isPureReactComponent=!0;var zb=Array.isArray,FE=Object.prototype.hasOwnProperty,u1={current:null},OE={key:!0,ref:!0,__self:!0,__source:!0};function LE(e,t,i){var a,c={},m=null,f=null;if(t!=null)for(a in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(m=""+t.key),t)FE.call(t,a)&&!OE.hasOwnProperty(a)&&(c[a]=t[a]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var S=Array(u),C=0;C<u;C++)S[C]=arguments[C+2];c.children=S}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)c[a]===void 0&&(c[a]=u[a]);return{$$typeof:Gd,type:e,key:m,ref:f,props:c,_owner:u1.current}}function Jk(e,t){return{$$typeof:Gd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gd}function Qk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Rb=/\/+/g;function v0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qk(""+e.key):t.toString(36)}function Tm(e,t,i,a,c){var m=typeof e;(m==="undefined"||m==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(m){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Gd:case Uk:f=!0}}if(f)return f=e,c=c(f),e=a===""?"."+v0(f,0):a,zb(c)?(i="",e!=null&&(i=e.replace(Rb,"$&/")+"/"),Tm(c,t,i,"",function(C){return C})):c!=null&&(c1(c)&&(c=Jk(c,i+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(Rb,"$&/")+"/")+e)),t.push(c)),1;if(f=0,a=a===""?".":a+":",zb(e))for(var u=0;u<e.length;u++){m=e[u];var S=a+v0(m,u);f+=Tm(m,t,i,S,c)}else if(S=Yk(e),typeof S=="function")for(e=S.call(e),u=0;!(m=e.next()).done;)m=m.value,S=a+v0(m,u++),f+=Tm(m,t,i,S,c);else if(m==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function $p(e,t,i){if(e==null)return e;var a=[],c=0;return Tm(e,a,"","",function(m){return t.call(i,m,c++)}),a}function eM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var oo={current:null},Cm={transition:null},tM={ReactCurrentDispatcher:oo,ReactCurrentBatchConfig:Cm,ReactCurrentOwner:u1};jn.Children={map:$p,forEach:function(e,t,i){$p(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return $p(e,function(){t++}),t},toArray:function(e){return $p(e,function(t){return t})||[]},only:function(e){if(!c1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jn.Component=Rh;jn.Fragment=$k;jn.Profiler=Gk;jn.PureComponent=a1;jn.StrictMode=Vk;jn.Suspense=qk;jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tM;jn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=ME({},e.props),c=e.key,m=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(m=t.ref,f=u1.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(S in t)FE.call(t,S)&&!OE.hasOwnProperty(S)&&(a[S]=t[S]===void 0&&u!==void 0?u[S]:t[S])}var S=arguments.length-2;if(S===1)a.children=i;else if(1<S){u=Array(S);for(var C=0;C<S;C++)u[C]=arguments[C+2];a.children=u}return{$$typeof:Gd,type:e.type,key:c,ref:m,props:a,_owner:f}};jn.createContext=function(e){return e={$$typeof:Wk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Hk,_context:e},e.Consumer=e};jn.createElement=LE;jn.createFactory=function(e){var t=LE.bind(null,e);return t.type=e,t};jn.createRef=function(){return{current:null}};jn.forwardRef=function(e){return{$$typeof:Zk,render:e}};jn.isValidElement=c1;jn.lazy=function(e){return{$$typeof:Kk,_payload:{_status:-1,_result:e},_init:eM}};jn.memo=function(e,t){return{$$typeof:Xk,type:e,compare:t===void 0?null:t}};jn.startTransition=function(e){var t=Cm.transition;Cm.transition={};try{e()}finally{Cm.transition=t}};jn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jn.useCallback=function(e,t){return oo.current.useCallback(e,t)};jn.useContext=function(e){return oo.current.useContext(e)};jn.useDebugValue=function(){};jn.useDeferredValue=function(e){return oo.current.useDeferredValue(e)};jn.useEffect=function(e,t){return oo.current.useEffect(e,t)};jn.useId=function(){return oo.current.useId()};jn.useImperativeHandle=function(e,t,i){return oo.current.useImperativeHandle(e,t,i)};jn.useInsertionEffect=function(e,t){return oo.current.useInsertionEffect(e,t)};jn.useLayoutEffect=function(e,t){return oo.current.useLayoutEffect(e,t)};jn.useMemo=function(e,t){return oo.current.useMemo(e,t)};jn.useReducer=function(e,t,i){return oo.current.useReducer(e,t,i)};jn.useRef=function(e){return oo.current.useRef(e)};jn.useState=function(e){return oo.current.useState(e)};jn.useSyncExternalStore=function(e,t,i){return oo.current.useSyncExternalStore(e,t,i)};jn.useTransition=function(){return oo.current.useTransition()};jn.version="18.2.0";PE.exports=jn;var vt=PE.exports;const h1=Vd(vt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nM=vt,rM=Symbol.for("react.element"),iM=Symbol.for("react.fragment"),oM=Object.prototype.hasOwnProperty,sM=nM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aM={key:!0,ref:!0,__self:!0,__source:!0};function jE(e,t,i){var a,c={},m=null,f=null;i!==void 0&&(m=""+i),t.key!==void 0&&(m=""+t.key),t.ref!==void 0&&(f=t.ref);for(a in t)oM.call(t,a)&&!aM.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:rM,type:e,key:m,ref:f,props:c,_owner:sM.current}}Zg.Fragment=iM;Zg.jsx=jE;Zg.jsxs=jE;AE.exports=Zg;var yt=AE.exports,DE={exports:{}},Uo={},BE={exports:{}},NE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,fe){var we=te.length;te.push(fe);e:for(;0<we;){var Ee=we-1>>>1,Ne=te[Ee];if(0<c(Ne,fe))te[Ee]=fe,te[we]=Ne,we=Ee;else break e}}function i(te){return te.length===0?null:te[0]}function a(te){if(te.length===0)return null;var fe=te[0],we=te.pop();if(we!==fe){te[0]=we;e:for(var Ee=0,Ne=te.length,Ae=Ne>>>1;Ee<Ae;){var Re=2*(Ee+1)-1,Ze=te[Re],He=Re+1,rt=te[He];if(0>c(Ze,we))He<Ne&&0>c(rt,Ze)?(te[Ee]=rt,te[He]=we,Ee=He):(te[Ee]=Ze,te[Re]=we,Ee=Re);else if(He<Ne&&0>c(rt,we))te[Ee]=rt,te[He]=we,Ee=He;else break e}}return fe}function c(te,fe){var we=te.sortIndex-fe.sortIndex;return we!==0?we:te.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var f=Date,u=f.now();e.unstable_now=function(){return f.now()-u}}var S=[],C=[],P=1,b=null,T=3,F=!1,B=!1,O=!1,he=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(te){for(var fe=i(C);fe!==null;){if(fe.callback===null)a(C);else if(fe.startTime<=te)a(C),fe.sortIndex=fe.expirationTime,t(S,fe);else break;fe=i(C)}}function se(te){if(O=!1,$(te),!B)if(i(S)!==null)B=!0,ue(X);else{var fe=i(C);fe!==null&&Q(se,fe.startTime-te)}}function X(te,fe){B=!1,O&&(O=!1,Y(L),L=-1),F=!0;var we=T;try{for($(fe),b=i(S);b!==null&&(!(b.expirationTime>fe)||te&&!Z());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,T=b.priorityLevel;var Ne=Ee(b.expirationTime<=fe);fe=e.unstable_now(),typeof Ne=="function"?b.callback=Ne:b===i(S)&&a(S),$(fe)}else a(S);b=i(S)}if(b!==null)var Ae=!0;else{var Re=i(C);Re!==null&&Q(se,Re.startTime-fe),Ae=!1}return Ae}finally{b=null,T=we,F=!1}}var V=!1,E=null,L=-1,j=5,ee=-1;function Z(){return!(e.unstable_now()-ee<j)}function ve(){if(E!==null){var te=e.unstable_now();ee=te;var fe=!0;try{fe=E(!0,te)}finally{fe?_e():(V=!1,E=null)}}else V=!1}var _e;if(typeof q=="function")_e=function(){q(ve)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,oe=de.port2;de.port1.onmessage=ve,_e=function(){oe.postMessage(null)}}else _e=function(){he(ve,0)};function ue(te){E=te,V||(V=!0,_e())}function Q(te,fe){L=he(function(){te(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){B||F||(B=!0,ue(X))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return i(S)},e.unstable_next=function(te){switch(T){case 1:case 2:case 3:var fe=3;break;default:fe=T}var we=T;T=fe;try{return te()}finally{T=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var we=T;T=te;try{return fe()}finally{T=we}},e.unstable_scheduleCallback=function(te,fe,we){var Ee=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ee+we:Ee):we=Ee,te){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=we+Ne,te={id:P++,callback:fe,priorityLevel:te,startTime:we,expirationTime:Ne,sortIndex:-1},we>Ee?(te.sortIndex=we,t(C,te),i(S)===null&&te===i(C)&&(O?(Y(L),L=-1):O=!0,Q(se,we-Ee))):(te.sortIndex=Ne,t(S,te),B||F||(B=!0,ue(X))),te},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(te){var fe=T;return function(){var we=T;T=fe;try{return te.apply(this,arguments)}finally{T=we}}}})(NE);BE.exports=NE;var lM=BE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE=vt,No=lM;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $E=new Set,gd={};function nc(e,t){xh(e,t),xh(e+"Capture",t)}function xh(e,t){for(gd[e]=t,e=0;e<t.length;e++)$E.add(t[e])}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sv=Object.prototype.hasOwnProperty,uM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fb={},Ob={};function cM(e){return Sv.call(Ob,e)?!0:Sv.call(Fb,e)?!1:uM.test(e)?Ob[e]=!0:(Fb[e]=!0,!1)}function hM(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fM(e,t,i,a){if(t===null||typeof t>"u"||hM(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function so(e,t,i,a,c,m,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=f}var Ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ci[e]=new so(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ci[t]=new so(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ci[e]=new so(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ci[e]=new so(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ci[e]=new so(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ci[e]=new so(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ci[e]=new so(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ci[e]=new so(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ci[e]=new so(e,5,!1,e.toLowerCase(),null,!1,!1)});var f1=/[\-:]([a-z])/g;function d1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(f1,d1);Ci[t]=new so(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(f1,d1);Ci[t]=new so(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(f1,d1);Ci[t]=new so(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ci[e]=new so(e,1,!1,e.toLowerCase(),null,!1,!1)});Ci.xlinkHref=new so("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ci[e]=new so(e,1,!1,e.toLowerCase(),null,!0,!0)});function p1(e,t,i,a){var c=Ci.hasOwnProperty(t)?Ci[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fM(t,i,c,a)&&(i=null),a||c===null?cM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Ja=UE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vp=Symbol.for("react.element"),qc=Symbol.for("react.portal"),Xc=Symbol.for("react.fragment"),m1=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),VE=Symbol.for("react.provider"),GE=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),Tv=Symbol.for("react.suspense"),Cv=Symbol.for("react.suspense_list"),y1=Symbol.for("react.memo"),Fl=Symbol.for("react.lazy"),HE=Symbol.for("react.offscreen"),Lb=Symbol.iterator;function Rf(e){return e===null||typeof e!="object"?null:(e=Lb&&e[Lb]||e["@@iterator"],typeof e=="function"?e:null)}var Ar=Object.assign,_0;function $f(e){if(_0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);_0=t&&t[1]||""}return`
`+_0+e}var x0=!1;function w0(e,t){if(!e||x0)return"";x0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var c=C.stack.split(`
`),m=a.stack.split(`
`),f=c.length-1,u=m.length-1;1<=f&&0<=u&&c[f]!==m[u];)u--;for(;1<=f&&0<=u;f--,u--)if(c[f]!==m[u]){if(f!==1||u!==1)do if(f--,u--,0>u||c[f]!==m[u]){var S=`
`+c[f].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=f&&0<=u);break}}}finally{x0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?$f(e):""}function dM(e){switch(e.tag){case 5:return $f(e.type);case 16:return $f("Lazy");case 13:return $f("Suspense");case 19:return $f("SuspenseList");case 0:case 2:case 15:return e=w0(e.type,!1),e;case 11:return e=w0(e.type.render,!1),e;case 1:return e=w0(e.type,!0),e;default:return""}}function Iv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xc:return"Fragment";case qc:return"Portal";case Ev:return"Profiler";case m1:return"StrictMode";case Tv:return"Suspense";case Cv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case GE:return(e.displayName||"Context")+".Consumer";case VE:return(e._context.displayName||"Context")+".Provider";case g1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case y1:return t=e.displayName||null,t!==null?t:Iv(e.type)||"Memo";case Fl:t=e._payload,e=e._init;try{return Iv(e(t))}catch{}}return null}function pM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iv(t);case 8:return t===m1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mM(e){var t=WE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,m=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(f){a=""+f,m.call(this,f)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gp(e){e._valueTracker||(e._valueTracker=mM(e))}function ZE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=WE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Wm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Av(e,t){var i=t.checked;return Ar({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function jb(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=Yl(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qE(e,t){t=t.checked,t!=null&&p1(e,"checked",t,!1)}function Pv(e,t){qE(e,t);var i=Yl(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?kv(e,t.type,i):t.hasOwnProperty("defaultValue")&&kv(e,t.type,Yl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Db(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function kv(e,t,i){(t!=="number"||Wm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Vf=Array.isArray;function hh(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Yl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Mv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Ar({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(Vf(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Yl(i)}}function XE(e,t){var i=Yl(t.value),a=Yl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Nb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function KE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?KE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hp,YE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hp=Hp||document.createElement("div"),Hp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yd(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var ed={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gM=["Webkit","ms","Moz","O"];Object.keys(ed).forEach(function(e){gM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ed[t]=ed[e]})});function JE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||ed.hasOwnProperty(e)&&ed[e]?(""+t).trim():t+"px"}function QE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=JE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var yM=Ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rv(e,t){if(t){if(yM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function Fv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ov=null;function v1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lv=null,fh=null,dh=null;function Ub(e){if(e=Zd(e)){if(typeof Lv!="function")throw Error(At(280));var t=e.stateNode;t&&(t=Jg(t),Lv(e.stateNode,e.type,t))}}function eT(e){fh?dh?dh.push(e):dh=[e]:fh=e}function tT(){if(fh){var e=fh,t=dh;if(dh=fh=null,Ub(e),t)for(e=0;e<t.length;e++)Ub(t[e])}}function nT(e,t){return e(t)}function rT(){}var b0=!1;function iT(e,t,i){if(b0)return e(t,i);b0=!0;try{return nT(e,t,i)}finally{b0=!1,(fh!==null||dh!==null)&&(rT(),tT())}}function vd(e,t){var i=e.stateNode;if(i===null)return null;var a=Jg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var jv=!1;if(Ga)try{var Ff={};Object.defineProperty(Ff,"passive",{get:function(){jv=!0}}),window.addEventListener("test",Ff,Ff),window.removeEventListener("test",Ff,Ff)}catch{jv=!1}function vM(e,t,i,a,c,m,f,u,S){var C=Array.prototype.slice.call(arguments,3);try{t.apply(i,C)}catch(P){this.onError(P)}}var td=!1,Zm=null,qm=!1,Dv=null,_M={onError:function(e){td=!0,Zm=e}};function xM(e,t,i,a,c,m,f,u,S){td=!1,Zm=null,vM.apply(_M,arguments)}function wM(e,t,i,a,c,m,f,u,S){if(xM.apply(this,arguments),td){if(td){var C=Zm;td=!1,Zm=null}else throw Error(At(198));qm||(qm=!0,Dv=C)}}function rc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function oT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $b(e){if(rc(e)!==e)throw Error(At(188))}function bM(e){var t=e.alternate;if(!t){if(t=rc(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var m=c.alternate;if(m===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===m.child){for(m=c.child;m;){if(m===i)return $b(c),e;if(m===a)return $b(c),t;m=m.sibling}throw Error(At(188))}if(i.return!==a.return)i=c,a=m;else{for(var f=!1,u=c.child;u;){if(u===i){f=!0,i=c,a=m;break}if(u===a){f=!0,a=c,i=m;break}u=u.sibling}if(!f){for(u=m.child;u;){if(u===i){f=!0,i=m,a=c;break}if(u===a){f=!0,a=m,i=c;break}u=u.sibling}if(!f)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function sT(e){return e=bM(e),e!==null?aT(e):null}function aT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=aT(e);if(t!==null)return t;e=e.sibling}return null}var lT=No.unstable_scheduleCallback,Vb=No.unstable_cancelCallback,SM=No.unstable_shouldYield,EM=No.unstable_requestPaint,Hr=No.unstable_now,TM=No.unstable_getCurrentPriorityLevel,_1=No.unstable_ImmediatePriority,uT=No.unstable_UserBlockingPriority,Xm=No.unstable_NormalPriority,CM=No.unstable_LowPriority,cT=No.unstable_IdlePriority,qg=null,la=null;function IM(e){if(la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(qg,e,void 0,(e.current.flags&128)===128)}catch{}}var Ms=Math.clz32?Math.clz32:kM,AM=Math.log,PM=Math.LN2;function kM(e){return e>>>=0,e===0?32:31-(AM(e)/PM|0)|0}var Wp=64,Zp=4194304;function Gf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Km(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,m=e.pingedLanes,f=i&268435455;if(f!==0){var u=f&~c;u!==0?a=Gf(u):(m&=f,m!==0&&(a=Gf(m)))}else f=i&~c,f!==0?a=Gf(f):m!==0&&(a=Gf(m));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,m=t&-t,c>=m||c===16&&(m&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Ms(t),c=1<<i,a|=e[i],t&=~c;return a}function MM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,m=e.pendingLanes;0<m;){var f=31-Ms(m),u=1<<f,S=c[f];S===-1?(!(u&i)||u&a)&&(c[f]=MM(u,t)):S<=t&&(e.expiredLanes|=u),m&=~u}}function Bv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hT(){var e=Wp;return Wp<<=1,!(Wp&4194240)&&(Wp=64),e}function S0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Hd(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ms(t),e[t]=i}function RM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Ms(i),m=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~m}}function x1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Ms(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var Kn=0;function fT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dT,w1,pT,mT,gT,Nv=!1,qp=[],Vl=null,Gl=null,Hl=null,_d=new Map,xd=new Map,Dl=[],FM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gb(e,t){switch(e){case"focusin":case"focusout":Vl=null;break;case"dragenter":case"dragleave":Gl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":_d.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xd.delete(t.pointerId)}}function Of(e,t,i,a,c,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:m,targetContainers:[c]},t!==null&&(t=Zd(t),t!==null&&w1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function OM(e,t,i,a,c){switch(t){case"focusin":return Vl=Of(Vl,e,t,i,a,c),!0;case"dragenter":return Gl=Of(Gl,e,t,i,a,c),!0;case"mouseover":return Hl=Of(Hl,e,t,i,a,c),!0;case"pointerover":var m=c.pointerId;return _d.set(m,Of(_d.get(m)||null,e,t,i,a,c)),!0;case"gotpointercapture":return m=c.pointerId,xd.set(m,Of(xd.get(m)||null,e,t,i,a,c)),!0}return!1}function yT(e){var t=Nu(e.target);if(t!==null){var i=rc(t);if(i!==null){if(t=i.tag,t===13){if(t=oT(i),t!==null){e.blockedOn=t,gT(e.priority,function(){pT(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Im(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Uv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);Ov=a,i.target.dispatchEvent(a),Ov=null}else return t=Zd(i),t!==null&&w1(t),e.blockedOn=i,!1;t.shift()}return!0}function Hb(e,t,i){Im(e)&&i.delete(t)}function LM(){Nv=!1,Vl!==null&&Im(Vl)&&(Vl=null),Gl!==null&&Im(Gl)&&(Gl=null),Hl!==null&&Im(Hl)&&(Hl=null),_d.forEach(Hb),xd.forEach(Hb)}function Lf(e,t){e.blockedOn===t&&(e.blockedOn=null,Nv||(Nv=!0,No.unstable_scheduleCallback(No.unstable_NormalPriority,LM)))}function wd(e){function t(c){return Lf(c,e)}if(0<qp.length){Lf(qp[0],e);for(var i=1;i<qp.length;i++){var a=qp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Vl!==null&&Lf(Vl,e),Gl!==null&&Lf(Gl,e),Hl!==null&&Lf(Hl,e),_d.forEach(t),xd.forEach(t),i=0;i<Dl.length;i++)a=Dl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Dl.length&&(i=Dl[0],i.blockedOn===null);)yT(i),i.blockedOn===null&&Dl.shift()}var ph=Ja.ReactCurrentBatchConfig,Ym=!0;function jM(e,t,i,a){var c=Kn,m=ph.transition;ph.transition=null;try{Kn=1,b1(e,t,i,a)}finally{Kn=c,ph.transition=m}}function DM(e,t,i,a){var c=Kn,m=ph.transition;ph.transition=null;try{Kn=4,b1(e,t,i,a)}finally{Kn=c,ph.transition=m}}function b1(e,t,i,a){if(Ym){var c=Uv(e,t,i,a);if(c===null)R0(e,t,a,Jm,i),Gb(e,a);else if(OM(c,e,t,i,a))a.stopPropagation();else if(Gb(e,a),t&4&&-1<FM.indexOf(e)){for(;c!==null;){var m=Zd(c);if(m!==null&&dT(m),m=Uv(e,t,i,a),m===null&&R0(e,t,a,Jm,i),m===c)break;c=m}c!==null&&a.stopPropagation()}else R0(e,t,a,null,i)}}var Jm=null;function Uv(e,t,i,a){if(Jm=null,e=v1(a),e=Nu(e),e!==null)if(t=rc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=oT(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jm=e,null}function vT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TM()){case _1:return 1;case uT:return 4;case Xm:case CM:return 16;case cT:return 536870912;default:return 16}default:return 16}}var Nl=null,S1=null,Am=null;function _T(){if(Am)return Am;var e,t=S1,i=t.length,a,c="value"in Nl?Nl.value:Nl.textContent,m=c.length;for(e=0;e<i&&t[e]===c[e];e++);var f=i-e;for(a=1;a<=f&&t[i-a]===c[m-a];a++);return Am=c.slice(e,1<a?1-a:void 0)}function Pm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xp(){return!0}function Wb(){return!1}function $o(e){function t(i,a,c,m,f){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=m,this.target=f,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(m):m[u]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Xp:Wb,this.isPropagationStopped=Wb,this}return Ar(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xp)},persist:function(){},isPersistent:Xp}),t}var Fh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E1=$o(Fh),Wd=Ar({},Fh,{view:0,detail:0}),BM=$o(Wd),E0,T0,jf,Xg=Ar({},Wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jf&&(jf&&e.type==="mousemove"?(E0=e.screenX-jf.screenX,T0=e.screenY-jf.screenY):T0=E0=0,jf=e),E0)},movementY:function(e){return"movementY"in e?e.movementY:T0}}),Zb=$o(Xg),NM=Ar({},Xg,{dataTransfer:0}),UM=$o(NM),$M=Ar({},Wd,{relatedTarget:0}),C0=$o($M),VM=Ar({},Fh,{animationName:0,elapsedTime:0,pseudoElement:0}),GM=$o(VM),HM=Ar({},Fh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),WM=$o(HM),ZM=Ar({},Fh,{data:0}),qb=$o(ZM),qM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=KM[e])?!!t[e]:!1}function T1(){return YM}var JM=Ar({},Wd,{key:function(e){if(e.key){var t=qM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?XM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T1,charCode:function(e){return e.type==="keypress"?Pm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),QM=$o(JM),e3=Ar({},Xg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xb=$o(e3),t3=Ar({},Wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T1}),n3=$o(t3),r3=Ar({},Fh,{propertyName:0,elapsedTime:0,pseudoElement:0}),i3=$o(r3),o3=Ar({},Xg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),s3=$o(o3),a3=[9,13,27,32],C1=Ga&&"CompositionEvent"in window,nd=null;Ga&&"documentMode"in document&&(nd=document.documentMode);var l3=Ga&&"TextEvent"in window&&!nd,xT=Ga&&(!C1||nd&&8<nd&&11>=nd),Kb=" ",Yb=!1;function wT(e,t){switch(e){case"keyup":return a3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kc=!1;function u3(e,t){switch(e){case"compositionend":return bT(t);case"keypress":return t.which!==32?null:(Yb=!0,Kb);case"textInput":return e=t.data,e===Kb&&Yb?null:e;default:return null}}function c3(e,t){if(Kc)return e==="compositionend"||!C1&&wT(e,t)?(e=_T(),Am=S1=Nl=null,Kc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xT&&t.locale!=="ko"?null:t.data;default:return null}}var h3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h3[e.type]:t==="textarea"}function ST(e,t,i,a){eT(a),t=Qm(t,"onChange"),0<t.length&&(i=new E1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var rd=null,bd=null;function f3(e){FT(e,0)}function Kg(e){var t=Qc(e);if(ZE(t))return e}function d3(e,t){if(e==="change")return t}var ET=!1;if(Ga){var I0;if(Ga){var A0="oninput"in document;if(!A0){var Qb=document.createElement("div");Qb.setAttribute("oninput","return;"),A0=typeof Qb.oninput=="function"}I0=A0}else I0=!1;ET=I0&&(!document.documentMode||9<document.documentMode)}function e2(){rd&&(rd.detachEvent("onpropertychange",TT),bd=rd=null)}function TT(e){if(e.propertyName==="value"&&Kg(bd)){var t=[];ST(t,bd,e,v1(e)),iT(f3,t)}}function p3(e,t,i){e==="focusin"?(e2(),rd=t,bd=i,rd.attachEvent("onpropertychange",TT)):e==="focusout"&&e2()}function m3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kg(bd)}function g3(e,t){if(e==="click")return Kg(t)}function y3(e,t){if(e==="input"||e==="change")return Kg(t)}function v3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rs=typeof Object.is=="function"?Object.is:v3;function Sd(e,t){if(Rs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!Sv.call(t,c)||!Rs(e[c],t[c]))return!1}return!0}function t2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function n2(e,t){var i=t2(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=t2(i)}}function CT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?CT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IT(){for(var e=window,t=Wm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Wm(e.document)}return t}function I1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _3(e){var t=IT(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&CT(i.ownerDocument.documentElement,i)){if(a!==null&&I1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,m=Math.min(a.start,c);a=a.end===void 0?m:Math.min(a.end,c),!e.extend&&m>a&&(c=a,a=m,m=c),c=n2(i,m);var f=n2(i,a);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),m>a?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var x3=Ga&&"documentMode"in document&&11>=document.documentMode,Yc=null,$v=null,id=null,Vv=!1;function r2(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Vv||Yc==null||Yc!==Wm(a)||(a=Yc,"selectionStart"in a&&I1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),id&&Sd(id,a)||(id=a,a=Qm($v,"onSelect"),0<a.length&&(t=new E1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Yc)))}function Kp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Jc={animationend:Kp("Animation","AnimationEnd"),animationiteration:Kp("Animation","AnimationIteration"),animationstart:Kp("Animation","AnimationStart"),transitionend:Kp("Transition","TransitionEnd")},P0={},AT={};Ga&&(AT=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function Yg(e){if(P0[e])return P0[e];if(!Jc[e])return e;var t=Jc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in AT)return P0[e]=t[i];return e}var PT=Yg("animationend"),kT=Yg("animationiteration"),MT=Yg("animationstart"),zT=Yg("transitionend"),RT=new Map,i2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ru(e,t){RT.set(e,t),nc(t,[e])}for(var k0=0;k0<i2.length;k0++){var M0=i2[k0],w3=M0.toLowerCase(),b3=M0[0].toUpperCase()+M0.slice(1);ru(w3,"on"+b3)}ru(PT,"onAnimationEnd");ru(kT,"onAnimationIteration");ru(MT,"onAnimationStart");ru("dblclick","onDoubleClick");ru("focusin","onFocus");ru("focusout","onBlur");ru(zT,"onTransitionEnd");xh("onMouseEnter",["mouseout","mouseover"]);xh("onMouseLeave",["mouseout","mouseover"]);xh("onPointerEnter",["pointerout","pointerover"]);xh("onPointerLeave",["pointerout","pointerover"]);nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hf));function o2(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,wM(a,t,void 0,e),e.currentTarget=null}function FT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var m=void 0;if(t)for(var f=a.length-1;0<=f;f--){var u=a[f],S=u.instance,C=u.currentTarget;if(u=u.listener,S!==m&&c.isPropagationStopped())break e;o2(c,u,C),m=S}else for(f=0;f<a.length;f++){if(u=a[f],S=u.instance,C=u.currentTarget,u=u.listener,S!==m&&c.isPropagationStopped())break e;o2(c,u,C),m=S}}}if(qm)throw e=Dv,qm=!1,Dv=null,e}function cr(e,t){var i=t[qv];i===void 0&&(i=t[qv]=new Set);var a=e+"__bubble";i.has(a)||(OT(t,e,2,!1),i.add(a))}function z0(e,t,i){var a=0;t&&(a|=4),OT(i,e,a,t)}var Yp="_reactListening"+Math.random().toString(36).slice(2);function Ed(e){if(!e[Yp]){e[Yp]=!0,$E.forEach(function(i){i!=="selectionchange"&&(S3.has(i)||z0(i,!1,e),z0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yp]||(t[Yp]=!0,z0("selectionchange",!1,t))}}function OT(e,t,i,a){switch(vT(t)){case 1:var c=jM;break;case 4:c=DM;break;default:c=b1}i=c.bind(null,t,i,e),c=void 0,!jv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function R0(e,t,i,a,c){var m=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var u=a.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(f===4)for(f=a.return;f!==null;){var S=f.tag;if((S===3||S===4)&&(S=f.stateNode.containerInfo,S===c||S.nodeType===8&&S.parentNode===c))return;f=f.return}for(;u!==null;){if(f=Nu(u),f===null)return;if(S=f.tag,S===5||S===6){a=m=f;continue e}u=u.parentNode}}a=a.return}iT(function(){var C=m,P=v1(i),b=[];e:{var T=RT.get(e);if(T!==void 0){var F=E1,B=e;switch(e){case"keypress":if(Pm(i)===0)break e;case"keydown":case"keyup":F=QM;break;case"focusin":B="focus",F=C0;break;case"focusout":B="blur",F=C0;break;case"beforeblur":case"afterblur":F=C0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Zb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=UM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=n3;break;case PT:case kT:case MT:F=GM;break;case zT:F=i3;break;case"scroll":F=BM;break;case"wheel":F=s3;break;case"copy":case"cut":case"paste":F=WM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Xb}var O=(t&4)!==0,he=!O&&e==="scroll",Y=O?T!==null?T+"Capture":null:T;O=[];for(var q=C,$;q!==null;){$=q;var se=$.stateNode;if($.tag===5&&se!==null&&($=se,Y!==null&&(se=vd(q,Y),se!=null&&O.push(Td(q,se,$)))),he)break;q=q.return}0<O.length&&(T=new F(T,B,null,i,P),b.push({event:T,listeners:O}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",T&&i!==Ov&&(B=i.relatedTarget||i.fromElement)&&(Nu(B)||B[Ha]))break e;if((F||T)&&(T=P.window===P?P:(T=P.ownerDocument)?T.defaultView||T.parentWindow:window,F?(B=i.relatedTarget||i.toElement,F=C,B=B?Nu(B):null,B!==null&&(he=rc(B),B!==he||B.tag!==5&&B.tag!==6)&&(B=null)):(F=null,B=C),F!==B)){if(O=Zb,se="onMouseLeave",Y="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(O=Xb,se="onPointerLeave",Y="onPointerEnter",q="pointer"),he=F==null?T:Qc(F),$=B==null?T:Qc(B),T=new O(se,q+"leave",F,i,P),T.target=he,T.relatedTarget=$,se=null,Nu(P)===C&&(O=new O(Y,q+"enter",B,i,P),O.target=$,O.relatedTarget=he,se=O),he=se,F&&B)t:{for(O=F,Y=B,q=0,$=O;$;$=Nc($))q++;for($=0,se=Y;se;se=Nc(se))$++;for(;0<q-$;)O=Nc(O),q--;for(;0<$-q;)Y=Nc(Y),$--;for(;q--;){if(O===Y||Y!==null&&O===Y.alternate)break t;O=Nc(O),Y=Nc(Y)}O=null}else O=null;F!==null&&s2(b,T,F,O,!1),B!==null&&he!==null&&s2(b,he,B,O,!0)}}e:{if(T=C?Qc(C):window,F=T.nodeName&&T.nodeName.toLowerCase(),F==="select"||F==="input"&&T.type==="file")var X=d3;else if(Jb(T))if(ET)X=y3;else{X=m3;var V=p3}else(F=T.nodeName)&&F.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=g3);if(X&&(X=X(e,C))){ST(b,X,i,P);break e}V&&V(e,T,C),e==="focusout"&&(V=T._wrapperState)&&V.controlled&&T.type==="number"&&kv(T,"number",T.value)}switch(V=C?Qc(C):window,e){case"focusin":(Jb(V)||V.contentEditable==="true")&&(Yc=V,$v=C,id=null);break;case"focusout":id=$v=Yc=null;break;case"mousedown":Vv=!0;break;case"contextmenu":case"mouseup":case"dragend":Vv=!1,r2(b,i,P);break;case"selectionchange":if(x3)break;case"keydown":case"keyup":r2(b,i,P)}var E;if(C1)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Kc?wT(e,i)&&(L="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(L="onCompositionStart");L&&(xT&&i.locale!=="ko"&&(Kc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Kc&&(E=_T()):(Nl=P,S1="value"in Nl?Nl.value:Nl.textContent,Kc=!0)),V=Qm(C,L),0<V.length&&(L=new qb(L,e,null,i,P),b.push({event:L,listeners:V}),E?L.data=E:(E=bT(i),E!==null&&(L.data=E)))),(E=l3?u3(e,i):c3(e,i))&&(C=Qm(C,"onBeforeInput"),0<C.length&&(P=new qb("onBeforeInput","beforeinput",null,i,P),b.push({event:P,listeners:C}),P.data=E))}FT(b,t)})}function Td(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Qm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,m=c.stateNode;c.tag===5&&m!==null&&(c=m,m=vd(e,i),m!=null&&a.unshift(Td(e,m,c)),m=vd(e,t),m!=null&&a.push(Td(e,m,c))),e=e.return}return a}function Nc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function s2(e,t,i,a,c){for(var m=t._reactName,f=[];i!==null&&i!==a;){var u=i,S=u.alternate,C=u.stateNode;if(S!==null&&S===a)break;u.tag===5&&C!==null&&(u=C,c?(S=vd(i,m),S!=null&&f.unshift(Td(i,S,u))):c||(S=vd(i,m),S!=null&&f.push(Td(i,S,u)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var E3=/\r\n?/g,T3=/\u0000|\uFFFD/g;function a2(e){return(typeof e=="string"?e:""+e).replace(E3,`
`).replace(T3,"")}function Jp(e,t,i){if(t=a2(t),a2(e)!==t&&i)throw Error(At(425))}function eg(){}var Gv=null,Hv=null;function Wv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zv=typeof setTimeout=="function"?setTimeout:void 0,C3=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,I3=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(e){return l2.resolve(null).then(e).catch(A3)}:Zv;function A3(e){setTimeout(function(){throw e})}function F0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),wd(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);wd(t)}function Wl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function u2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Oh=Math.random().toString(36).slice(2),ra="__reactFiber$"+Oh,Cd="__reactProps$"+Oh,Ha="__reactContainer$"+Oh,qv="__reactEvents$"+Oh,P3="__reactListeners$"+Oh,k3="__reactHandles$"+Oh;function Nu(e){var t=e[ra];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ha]||i[ra]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=u2(e);e!==null;){if(i=e[ra])return i;e=u2(e)}return t}e=i,i=e.parentNode}return null}function Zd(e){return e=e[ra]||e[Ha],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function Jg(e){return e[Cd]||null}var Xv=[],eh=-1;function iu(e){return{current:e}}function fr(e){0>eh||(e.current=Xv[eh],Xv[eh]=null,eh--)}function sr(e,t){eh++,Xv[eh]=e.current,e.current=t}var Jl={},$i=iu(Jl),wo=iu(!1),Zu=Jl;function wh(e,t){var i=e.type.contextTypes;if(!i)return Jl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},m;for(m in i)c[m]=t[m];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function bo(e){return e=e.childContextTypes,e!=null}function tg(){fr(wo),fr($i)}function c2(e,t,i){if($i.current!==Jl)throw Error(At(168));sr($i,t),sr(wo,i)}function LT(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(At(108,pM(e)||"Unknown",c));return Ar({},i,a)}function ng(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jl,Zu=$i.current,sr($i,e),sr(wo,wo.current),!0}function h2(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=LT(e,t,Zu),a.__reactInternalMemoizedMergedChildContext=e,fr(wo),fr($i),sr($i,e)):fr(wo),sr(wo,i)}var Da=null,Qg=!1,O0=!1;function jT(e){Da===null?Da=[e]:Da.push(e)}function M3(e){Qg=!0,jT(e)}function ou(){if(!O0&&Da!==null){O0=!0;var e=0,t=Kn;try{var i=Da;for(Kn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Da=null,Qg=!1}catch(c){throw Da!==null&&(Da=Da.slice(e+1)),lT(_1,ou),c}finally{Kn=t,O0=!1}}return null}var th=[],nh=0,rg=null,ig=0,rs=[],is=0,qu=null,Ua=1,$a="";function ju(e,t){th[nh++]=ig,th[nh++]=rg,rg=e,ig=t}function DT(e,t,i){rs[is++]=Ua,rs[is++]=$a,rs[is++]=qu,qu=e;var a=Ua;e=$a;var c=32-Ms(a)-1;a&=~(1<<c),i+=1;var m=32-Ms(t)+c;if(30<m){var f=c-c%5;m=(a&(1<<f)-1).toString(32),a>>=f,c-=f,Ua=1<<32-Ms(t)+c|i<<c|a,$a=m+e}else Ua=1<<m|i<<c|a,$a=e}function A1(e){e.return!==null&&(ju(e,1),DT(e,1,0))}function P1(e){for(;e===rg;)rg=th[--nh],th[nh]=null,ig=th[--nh],th[nh]=null;for(;e===qu;)qu=rs[--is],rs[is]=null,$a=rs[--is],rs[is]=null,Ua=rs[--is],rs[is]=null}var Bo=null,Do=null,vr=!1,Cs=null;function BT(e,t){var i=ss(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function f2(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bo=e,Do=Wl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bo=e,Do=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=qu!==null?{id:Ua,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ss(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Bo=e,Do=null,!0):!1;default:return!1}}function Kv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yv(e){if(vr){var t=Do;if(t){var i=t;if(!f2(e,t)){if(Kv(e))throw Error(At(418));t=Wl(i.nextSibling);var a=Bo;t&&f2(e,t)?BT(a,i):(e.flags=e.flags&-4097|2,vr=!1,Bo=e)}}else{if(Kv(e))throw Error(At(418));e.flags=e.flags&-4097|2,vr=!1,Bo=e}}}function d2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bo=e}function Qp(e){if(e!==Bo)return!1;if(!vr)return d2(e),vr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wv(e.type,e.memoizedProps)),t&&(t=Do)){if(Kv(e))throw NT(),Error(At(418));for(;t;)BT(e,t),t=Wl(t.nextSibling)}if(d2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Do=Wl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Do=null}}else Do=Bo?Wl(e.stateNode.nextSibling):null;return!0}function NT(){for(var e=Do;e;)e=Wl(e.nextSibling)}function bh(){Do=Bo=null,vr=!1}function k1(e){Cs===null?Cs=[e]:Cs.push(e)}var z3=Ja.ReactCurrentBatchConfig;function Es(e,t){if(e&&e.defaultProps){t=Ar({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var og=iu(null),sg=null,rh=null,M1=null;function z1(){M1=rh=sg=null}function R1(e){var t=og.current;fr(og),e._currentValue=t}function Jv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function mh(e,t){sg=e,M1=rh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xo=!0),e.firstContext=null)}function us(e){var t=e._currentValue;if(M1!==e)if(e={context:e,memoizedValue:t,next:null},rh===null){if(sg===null)throw Error(At(308));rh=e,sg.dependencies={lanes:0,firstContext:e}}else rh=rh.next=e;return t}var Uu=null;function F1(e){Uu===null?Uu=[e]:Uu.push(e)}function UT(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,F1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Wa(e,a)}function Wa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Ol=!1;function O1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $T(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Va(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Nn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Wa(e,i)}return c=a.interleaved,c===null?(t.next=t,F1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Wa(e,i)}function km(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,x1(e,i)}}function p2(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var f={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};m===null?c=m=f:m=m.next=f,i=i.next}while(i!==null);m===null?c=m=t:m=m.next=t}else c=m=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:m,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ag(e,t,i,a){var c=e.updateQueue;Ol=!1;var m=c.firstBaseUpdate,f=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var S=u,C=S.next;S.next=null,f===null?m=C:f.next=C,f=S;var P=e.alternate;P!==null&&(P=P.updateQueue,u=P.lastBaseUpdate,u!==f&&(u===null?P.firstBaseUpdate=C:u.next=C,P.lastBaseUpdate=S))}if(m!==null){var b=c.baseState;f=0,P=C=S=null,u=m;do{var T=u.lane,F=u.eventTime;if((a&T)===T){P!==null&&(P=P.next={eventTime:F,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var B=e,O=u;switch(T=t,F=i,O.tag){case 1:if(B=O.payload,typeof B=="function"){b=B.call(F,b,T);break e}b=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=O.payload,T=typeof B=="function"?B.call(F,b,T):B,T==null)break e;b=Ar({},b,T);break e;case 2:Ol=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,T=c.effects,T===null?c.effects=[u]:T.push(u))}else F={eventTime:F,lane:T,tag:u.tag,payload:u.payload,callback:u.callback,next:null},P===null?(C=P=F,S=b):P=P.next=F,f|=T;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;T=u,u=T.next,T.next=null,c.lastBaseUpdate=T,c.shared.pending=null}}while(!0);if(P===null&&(S=b),c.baseState=S,c.firstBaseUpdate=C,c.lastBaseUpdate=P,t=c.shared.interleaved,t!==null){c=t;do f|=c.lane,c=c.next;while(c!==t)}else m===null&&(c.shared.lanes=0);Ku|=f,e.lanes=f,e.memoizedState=b}}function m2(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(At(191,c));c.call(a)}}}var VT=new UE.Component().refs;function Qv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Ar({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ey={isMounted:function(e){return(e=e._reactInternals)?rc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=to(),c=Xl(e),m=Va(a,c);m.payload=t,i!=null&&(m.callback=i),t=Zl(e,m,c),t!==null&&(zs(t,e,c,a),km(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=to(),c=Xl(e),m=Va(a,c);m.tag=1,m.payload=t,i!=null&&(m.callback=i),t=Zl(e,m,c),t!==null&&(zs(t,e,c,a),km(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=to(),a=Xl(e),c=Va(i,a);c.tag=2,t!=null&&(c.callback=t),t=Zl(e,c,a),t!==null&&(zs(t,e,a,i),km(t,e,a))}};function g2(e,t,i,a,c,m,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,m,f):t.prototype&&t.prototype.isPureReactComponent?!Sd(i,a)||!Sd(c,m):!0}function GT(e,t,i){var a=!1,c=Jl,m=t.contextType;return typeof m=="object"&&m!==null?m=us(m):(c=bo(t)?Zu:$i.current,a=t.contextTypes,m=(a=a!=null)?wh(e,c):Jl),t=new t(i,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ey,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=m),t}function y2(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&ey.enqueueReplaceState(t,t.state,null)}function e_(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=VT,O1(e);var m=t.contextType;typeof m=="object"&&m!==null?c.context=us(m):(m=bo(t)?Zu:$i.current,c.context=wh(e,m)),c.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(Qv(e,t,m,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&ey.enqueueReplaceState(c,c.state,null),ag(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Df(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var c=a,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(f){var u=c.refs;u===VT&&(u=c.refs={}),f===null?delete u[m]:u[m]=f},t._stringRef=m,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function em(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function v2(e){var t=e._init;return t(e._payload)}function HT(e){function t(Y,q){if(e){var $=Y.deletions;$===null?(Y.deletions=[q],Y.flags|=16):$.push(q)}}function i(Y,q){if(!e)return null;for(;q!==null;)t(Y,q),q=q.sibling;return null}function a(Y,q){for(Y=new Map;q!==null;)q.key!==null?Y.set(q.key,q):Y.set(q.index,q),q=q.sibling;return Y}function c(Y,q){return Y=Kl(Y,q),Y.index=0,Y.sibling=null,Y}function m(Y,q,$){return Y.index=$,e?($=Y.alternate,$!==null?($=$.index,$<q?(Y.flags|=2,q):$):(Y.flags|=2,q)):(Y.flags|=1048576,q)}function f(Y){return e&&Y.alternate===null&&(Y.flags|=2),Y}function u(Y,q,$,se){return q===null||q.tag!==6?(q=$0($,Y.mode,se),q.return=Y,q):(q=c(q,$),q.return=Y,q)}function S(Y,q,$,se){var X=$.type;return X===Xc?P(Y,q,$.props.children,se,$.key):q!==null&&(q.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Fl&&v2(X)===q.type)?(se=c(q,$.props),se.ref=Df(Y,q,$),se.return=Y,se):(se=Lm($.type,$.key,$.props,null,Y.mode,se),se.ref=Df(Y,q,$),se.return=Y,se)}function C(Y,q,$,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==$.containerInfo||q.stateNode.implementation!==$.implementation?(q=V0($,Y.mode,se),q.return=Y,q):(q=c(q,$.children||[]),q.return=Y,q)}function P(Y,q,$,se,X){return q===null||q.tag!==7?(q=Wu($,Y.mode,se,X),q.return=Y,q):(q=c(q,$),q.return=Y,q)}function b(Y,q,$){if(typeof q=="string"&&q!==""||typeof q=="number")return q=$0(""+q,Y.mode,$),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Vp:return $=Lm(q.type,q.key,q.props,null,Y.mode,$),$.ref=Df(Y,null,q),$.return=Y,$;case qc:return q=V0(q,Y.mode,$),q.return=Y,q;case Fl:var se=q._init;return b(Y,se(q._payload),$)}if(Vf(q)||Rf(q))return q=Wu(q,Y.mode,$,null),q.return=Y,q;em(Y,q)}return null}function T(Y,q,$,se){var X=q!==null?q.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return X!==null?null:u(Y,q,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Vp:return $.key===X?S(Y,q,$,se):null;case qc:return $.key===X?C(Y,q,$,se):null;case Fl:return X=$._init,T(Y,q,X($._payload),se)}if(Vf($)||Rf($))return X!==null?null:P(Y,q,$,se,null);em(Y,$)}return null}function F(Y,q,$,se,X){if(typeof se=="string"&&se!==""||typeof se=="number")return Y=Y.get($)||null,u(q,Y,""+se,X);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Vp:return Y=Y.get(se.key===null?$:se.key)||null,S(q,Y,se,X);case qc:return Y=Y.get(se.key===null?$:se.key)||null,C(q,Y,se,X);case Fl:var V=se._init;return F(Y,q,$,V(se._payload),X)}if(Vf(se)||Rf(se))return Y=Y.get($)||null,P(q,Y,se,X,null);em(q,se)}return null}function B(Y,q,$,se){for(var X=null,V=null,E=q,L=q=0,j=null;E!==null&&L<$.length;L++){E.index>L?(j=E,E=null):j=E.sibling;var ee=T(Y,E,$[L],se);if(ee===null){E===null&&(E=j);break}e&&E&&ee.alternate===null&&t(Y,E),q=m(ee,q,L),V===null?X=ee:V.sibling=ee,V=ee,E=j}if(L===$.length)return i(Y,E),vr&&ju(Y,L),X;if(E===null){for(;L<$.length;L++)E=b(Y,$[L],se),E!==null&&(q=m(E,q,L),V===null?X=E:V.sibling=E,V=E);return vr&&ju(Y,L),X}for(E=a(Y,E);L<$.length;L++)j=F(E,Y,L,$[L],se),j!==null&&(e&&j.alternate!==null&&E.delete(j.key===null?L:j.key),q=m(j,q,L),V===null?X=j:V.sibling=j,V=j);return e&&E.forEach(function(Z){return t(Y,Z)}),vr&&ju(Y,L),X}function O(Y,q,$,se){var X=Rf($);if(typeof X!="function")throw Error(At(150));if($=X.call($),$==null)throw Error(At(151));for(var V=X=null,E=q,L=q=0,j=null,ee=$.next();E!==null&&!ee.done;L++,ee=$.next()){E.index>L?(j=E,E=null):j=E.sibling;var Z=T(Y,E,ee.value,se);if(Z===null){E===null&&(E=j);break}e&&E&&Z.alternate===null&&t(Y,E),q=m(Z,q,L),V===null?X=Z:V.sibling=Z,V=Z,E=j}if(ee.done)return i(Y,E),vr&&ju(Y,L),X;if(E===null){for(;!ee.done;L++,ee=$.next())ee=b(Y,ee.value,se),ee!==null&&(q=m(ee,q,L),V===null?X=ee:V.sibling=ee,V=ee);return vr&&ju(Y,L),X}for(E=a(Y,E);!ee.done;L++,ee=$.next())ee=F(E,Y,L,ee.value,se),ee!==null&&(e&&ee.alternate!==null&&E.delete(ee.key===null?L:ee.key),q=m(ee,q,L),V===null?X=ee:V.sibling=ee,V=ee);return e&&E.forEach(function(ve){return t(Y,ve)}),vr&&ju(Y,L),X}function he(Y,q,$,se){if(typeof $=="object"&&$!==null&&$.type===Xc&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Vp:e:{for(var X=$.key,V=q;V!==null;){if(V.key===X){if(X=$.type,X===Xc){if(V.tag===7){i(Y,V.sibling),q=c(V,$.props.children),q.return=Y,Y=q;break e}}else if(V.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Fl&&v2(X)===V.type){i(Y,V.sibling),q=c(V,$.props),q.ref=Df(Y,V,$),q.return=Y,Y=q;break e}i(Y,V);break}else t(Y,V);V=V.sibling}$.type===Xc?(q=Wu($.props.children,Y.mode,se,$.key),q.return=Y,Y=q):(se=Lm($.type,$.key,$.props,null,Y.mode,se),se.ref=Df(Y,q,$),se.return=Y,Y=se)}return f(Y);case qc:e:{for(V=$.key;q!==null;){if(q.key===V)if(q.tag===4&&q.stateNode.containerInfo===$.containerInfo&&q.stateNode.implementation===$.implementation){i(Y,q.sibling),q=c(q,$.children||[]),q.return=Y,Y=q;break e}else{i(Y,q);break}else t(Y,q);q=q.sibling}q=V0($,Y.mode,se),q.return=Y,Y=q}return f(Y);case Fl:return V=$._init,he(Y,q,V($._payload),se)}if(Vf($))return B(Y,q,$,se);if(Rf($))return O(Y,q,$,se);em(Y,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,q!==null&&q.tag===6?(i(Y,q.sibling),q=c(q,$),q.return=Y,Y=q):(i(Y,q),q=$0($,Y.mode,se),q.return=Y,Y=q),f(Y)):i(Y,q)}return he}var Sh=HT(!0),WT=HT(!1),qd={},ua=iu(qd),Id=iu(qd),Ad=iu(qd);function $u(e){if(e===qd)throw Error(At(174));return e}function L1(e,t){switch(sr(Ad,t),sr(Id,e),sr(ua,qd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zv(t,e)}fr(ua),sr(ua,t)}function Eh(){fr(ua),fr(Id),fr(Ad)}function ZT(e){$u(Ad.current);var t=$u(ua.current),i=zv(t,e.type);t!==i&&(sr(Id,e),sr(ua,i))}function j1(e){Id.current===e&&(fr(ua),fr(Id))}var Tr=iu(0);function lg(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var L0=[];function D1(){for(var e=0;e<L0.length;e++)L0[e]._workInProgressVersionPrimary=null;L0.length=0}var Mm=Ja.ReactCurrentDispatcher,j0=Ja.ReactCurrentBatchConfig,Xu=0,Ir=null,ei=null,ui=null,ug=!1,od=!1,Pd=0,R3=0;function ji(){throw Error(At(321))}function B1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Rs(e[i],t[i]))return!1;return!0}function N1(e,t,i,a,c,m){if(Xu=m,Ir=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mm.current=e===null||e.memoizedState===null?j3:D3,e=i(a,c),od){m=0;do{if(od=!1,Pd=0,25<=m)throw Error(At(301));m+=1,ui=ei=null,t.updateQueue=null,Mm.current=B3,e=i(a,c)}while(od)}if(Mm.current=cg,t=ei!==null&&ei.next!==null,Xu=0,ui=ei=Ir=null,ug=!1,t)throw Error(At(300));return e}function U1(){var e=Pd!==0;return Pd=0,e}function na(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?Ir.memoizedState=ui=e:ui=ui.next=e,ui}function cs(){if(ei===null){var e=Ir.alternate;e=e!==null?e.memoizedState:null}else e=ei.next;var t=ui===null?Ir.memoizedState:ui.next;if(t!==null)ui=t,ei=e;else{if(e===null)throw Error(At(310));ei=e,e={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},ui===null?Ir.memoizedState=ui=e:ui=ui.next=e}return ui}function kd(e,t){return typeof t=="function"?t(e):t}function D0(e){var t=cs(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ei,c=a.baseQueue,m=i.pending;if(m!==null){if(c!==null){var f=c.next;c.next=m.next,m.next=f}a.baseQueue=c=m,i.pending=null}if(c!==null){m=c.next,a=a.baseState;var u=f=null,S=null,C=m;do{var P=C.lane;if((Xu&P)===P)S!==null&&(S=S.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var b={lane:P,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};S===null?(u=S=b,f=a):S=S.next=b,Ir.lanes|=P,Ku|=P}C=C.next}while(C!==null&&C!==m);S===null?f=a:S.next=u,Rs(a,t.memoizedState)||(xo=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=S,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do m=c.lane,Ir.lanes|=m,Ku|=m,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function B0(e){var t=cs(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,m=t.memoizedState;if(c!==null){i.pending=null;var f=c=c.next;do m=e(m,f.action),f=f.next;while(f!==c);Rs(m,t.memoizedState)||(xo=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),i.lastRenderedState=m}return[m,a]}function qT(){}function XT(e,t){var i=Ir,a=cs(),c=t(),m=!Rs(a.memoizedState,c);if(m&&(a.memoizedState=c,xo=!0),a=a.queue,$1(JT.bind(null,i,a,e),[e]),a.getSnapshot!==t||m||ui!==null&&ui.memoizedState.tag&1){if(i.flags|=2048,Md(9,YT.bind(null,i,a,c,t),void 0,null),ci===null)throw Error(At(349));Xu&30||KT(i,t,c)}return c}function KT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ir.updateQueue,t===null?(t={lastEffect:null,stores:null},Ir.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function YT(e,t,i,a){t.value=i,t.getSnapshot=a,QT(t)&&eC(e)}function JT(e,t,i){return i(function(){QT(t)&&eC(e)})}function QT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Rs(e,i)}catch{return!0}}function eC(e){var t=Wa(e,1);t!==null&&zs(t,e,1,-1)}function _2(e){var t=na();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kd,lastRenderedState:e},t.queue=e,e=e.dispatch=L3.bind(null,Ir,e),[t.memoizedState,e]}function Md(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Ir.updateQueue,t===null?(t={lastEffect:null,stores:null},Ir.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function tC(){return cs().memoizedState}function zm(e,t,i,a){var c=na();Ir.flags|=e,c.memoizedState=Md(1|t,i,void 0,a===void 0?null:a)}function ty(e,t,i,a){var c=cs();a=a===void 0?null:a;var m=void 0;if(ei!==null){var f=ei.memoizedState;if(m=f.destroy,a!==null&&B1(a,f.deps)){c.memoizedState=Md(t,i,m,a);return}}Ir.flags|=e,c.memoizedState=Md(1|t,i,m,a)}function x2(e,t){return zm(8390656,8,e,t)}function $1(e,t){return ty(2048,8,e,t)}function nC(e,t){return ty(4,2,e,t)}function rC(e,t){return ty(4,4,e,t)}function iC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oC(e,t,i){return i=i!=null?i.concat([e]):null,ty(4,4,iC.bind(null,t,e),i)}function V1(){}function sC(e,t){var i=cs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&B1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function aC(e,t){var i=cs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&B1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function lC(e,t,i){return Xu&21?(Rs(i,t)||(i=hT(),Ir.lanes|=i,Ku|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=i)}function F3(e,t){var i=Kn;Kn=i!==0&&4>i?i:4,e(!0);var a=j0.transition;j0.transition={};try{e(!1),t()}finally{Kn=i,j0.transition=a}}function uC(){return cs().memoizedState}function O3(e,t,i){var a=Xl(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},cC(e))hC(t,i);else if(i=UT(e,t,i,a),i!==null){var c=to();zs(i,e,a,c),fC(i,t,a)}}function L3(e,t,i){var a=Xl(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(cC(e))hC(t,c);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var f=t.lastRenderedState,u=m(f,i);if(c.hasEagerState=!0,c.eagerState=u,Rs(u,f)){var S=t.interleaved;S===null?(c.next=c,F1(t)):(c.next=S.next,S.next=c),t.interleaved=c;return}}catch{}finally{}i=UT(e,t,c,a),i!==null&&(c=to(),zs(i,e,a,c),fC(i,t,a))}}function cC(e){var t=e.alternate;return e===Ir||t!==null&&t===Ir}function hC(e,t){od=ug=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function fC(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,x1(e,i)}}var cg={readContext:us,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useInsertionEffect:ji,useLayoutEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useMutableSource:ji,useSyncExternalStore:ji,useId:ji,unstable_isNewReconciler:!1},j3={readContext:us,useCallback:function(e,t){return na().memoizedState=[e,t===void 0?null:t],e},useContext:us,useEffect:x2,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,zm(4194308,4,iC.bind(null,t,e),i)},useLayoutEffect:function(e,t){return zm(4194308,4,e,t)},useInsertionEffect:function(e,t){return zm(4,2,e,t)},useMemo:function(e,t){var i=na();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=na();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=O3.bind(null,Ir,e),[a.memoizedState,e]},useRef:function(e){var t=na();return e={current:e},t.memoizedState=e},useState:_2,useDebugValue:V1,useDeferredValue:function(e){return na().memoizedState=e},useTransition:function(){var e=_2(!1),t=e[0];return e=F3.bind(null,e[1]),na().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Ir,c=na();if(vr){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),ci===null)throw Error(At(349));Xu&30||KT(a,t,i)}c.memoizedState=i;var m={value:i,getSnapshot:t};return c.queue=m,x2(JT.bind(null,a,m,e),[e]),a.flags|=2048,Md(9,YT.bind(null,a,m,i,t),void 0,null),i},useId:function(){var e=na(),t=ci.identifierPrefix;if(vr){var i=$a,a=Ua;i=(a&~(1<<32-Ms(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Pd++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=R3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},D3={readContext:us,useCallback:sC,useContext:us,useEffect:$1,useImperativeHandle:oC,useInsertionEffect:nC,useLayoutEffect:rC,useMemo:aC,useReducer:D0,useRef:tC,useState:function(){return D0(kd)},useDebugValue:V1,useDeferredValue:function(e){var t=cs();return lC(t,ei.memoizedState,e)},useTransition:function(){var e=D0(kd)[0],t=cs().memoizedState;return[e,t]},useMutableSource:qT,useSyncExternalStore:XT,useId:uC,unstable_isNewReconciler:!1},B3={readContext:us,useCallback:sC,useContext:us,useEffect:$1,useImperativeHandle:oC,useInsertionEffect:nC,useLayoutEffect:rC,useMemo:aC,useReducer:B0,useRef:tC,useState:function(){return B0(kd)},useDebugValue:V1,useDeferredValue:function(e){var t=cs();return ei===null?t.memoizedState=e:lC(t,ei.memoizedState,e)},useTransition:function(){var e=B0(kd)[0],t=cs().memoizedState;return[e,t]},useMutableSource:qT,useSyncExternalStore:XT,useId:uC,unstable_isNewReconciler:!1};function Th(e,t){try{var i="",a=t;do i+=dM(a),a=a.return;while(a);var c=i}catch(m){c=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:c,digest:null}}function N0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function t_(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var N3=typeof WeakMap=="function"?WeakMap:Map;function dC(e,t,i){i=Va(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){fg||(fg=!0,h_=a),t_(e,t)},i}function pC(e,t,i){i=Va(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){t_(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(i.callback=function(){t_(e,t),typeof a!="function"&&(ql===null?ql=new Set([this]):ql.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),i}function w2(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new N3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=e4.bind(null,e,t,i),t.then(e,e))}function b2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function S2(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Va(-1,1),t.tag=2,Zl(i,t,1))),i.lanes|=1),e)}var U3=Ja.ReactCurrentOwner,xo=!1;function Yi(e,t,i,a){t.child=e===null?WT(t,null,i,a):Sh(t,e.child,i,a)}function E2(e,t,i,a,c){i=i.render;var m=t.ref;return mh(t,c),a=N1(e,t,i,a,m,c),i=U1(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Za(e,t,c)):(vr&&i&&A1(t),t.flags|=1,Yi(e,t,a,c),t.child)}function T2(e,t,i,a,c){if(e===null){var m=i.type;return typeof m=="function"&&!Y1(m)&&m.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=m,mC(e,t,m,a,c)):(e=Lm(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!(e.lanes&c)){var f=m.memoizedProps;if(i=i.compare,i=i!==null?i:Sd,i(f,a)&&e.ref===t.ref)return Za(e,t,c)}return t.flags|=1,e=Kl(m,a),e.ref=t.ref,e.return=t,t.child=e}function mC(e,t,i,a,c){if(e!==null){var m=e.memoizedProps;if(Sd(m,a)&&e.ref===t.ref)if(xo=!1,t.pendingProps=a=m,(e.lanes&c)!==0)e.flags&131072&&(xo=!0);else return t.lanes=e.lanes,Za(e,t,c)}return n_(e,t,i,a,c)}function gC(e,t,i){var a=t.pendingProps,c=a.children,m=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sr(oh,Fo),Fo|=i;else{if(!(i&1073741824))return e=m!==null?m.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sr(oh,Fo),Fo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=m!==null?m.baseLanes:i,sr(oh,Fo),Fo|=a}else m!==null?(a=m.baseLanes|i,t.memoizedState=null):a=i,sr(oh,Fo),Fo|=a;return Yi(e,t,c,i),t.child}function yC(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function n_(e,t,i,a,c){var m=bo(i)?Zu:$i.current;return m=wh(t,m),mh(t,c),i=N1(e,t,i,a,m,c),a=U1(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Za(e,t,c)):(vr&&a&&A1(t),t.flags|=1,Yi(e,t,i,c),t.child)}function C2(e,t,i,a,c){if(bo(i)){var m=!0;ng(t)}else m=!1;if(mh(t,c),t.stateNode===null)Rm(e,t),GT(t,i,a),e_(t,i,a,c),a=!0;else if(e===null){var f=t.stateNode,u=t.memoizedProps;f.props=u;var S=f.context,C=i.contextType;typeof C=="object"&&C!==null?C=us(C):(C=bo(i)?Zu:$i.current,C=wh(t,C));var P=i.getDerivedStateFromProps,b=typeof P=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==a||S!==C)&&y2(t,f,a,C),Ol=!1;var T=t.memoizedState;f.state=T,ag(t,a,f,c),S=t.memoizedState,u!==a||T!==S||wo.current||Ol?(typeof P=="function"&&(Qv(t,i,P,a),S=t.memoizedState),(u=Ol||g2(t,i,u,a,T,S,C))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),f.props=a,f.state=S,f.context=C,a=u):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,$T(e,t),u=t.memoizedProps,C=t.type===t.elementType?u:Es(t.type,u),f.props=C,b=t.pendingProps,T=f.context,S=i.contextType,typeof S=="object"&&S!==null?S=us(S):(S=bo(i)?Zu:$i.current,S=wh(t,S));var F=i.getDerivedStateFromProps;(P=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==b||T!==S)&&y2(t,f,a,S),Ol=!1,T=t.memoizedState,f.state=T,ag(t,a,f,c);var B=t.memoizedState;u!==b||T!==B||wo.current||Ol?(typeof F=="function"&&(Qv(t,i,F,a),B=t.memoizedState),(C=Ol||g2(t,i,C,a,T,B,S)||!1)?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,B,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,B,S)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=B),f.props=a,f.state=B,f.context=S,a=C):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return r_(e,t,i,a,m,c)}function r_(e,t,i,a,c,m){yC(e,t);var f=(t.flags&128)!==0;if(!a&&!f)return c&&h2(t,i,!1),Za(e,t,m);a=t.stateNode,U3.current=t;var u=f&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&f?(t.child=Sh(t,e.child,null,m),t.child=Sh(t,null,u,m)):Yi(e,t,u,m),t.memoizedState=a.state,c&&h2(t,i,!0),t.child}function vC(e){var t=e.stateNode;t.pendingContext?c2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&c2(e,t.context,!1),L1(e,t.containerInfo)}function I2(e,t,i,a,c){return bh(),k1(c),t.flags|=256,Yi(e,t,i,a),t.child}var i_={dehydrated:null,treeContext:null,retryLane:0};function o_(e){return{baseLanes:e,cachePool:null,transitions:null}}function _C(e,t,i){var a=t.pendingProps,c=Tr.current,m=!1,f=(t.flags&128)!==0,u;if((u=f)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),sr(Tr,c&1),e===null)return Yv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=a.children,e=a.fallback,m?(a=t.mode,m=t.child,f={mode:"hidden",children:f},!(a&1)&&m!==null?(m.childLanes=0,m.pendingProps=f):m=iy(f,a,0,null),e=Wu(e,a,i,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=o_(i),t.memoizedState=i_,e):G1(t,f));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return $3(e,t,f,a,u,c,i);if(m){m=a.fallback,f=t.mode,c=e.child,u=c.sibling;var S={mode:"hidden",children:a.children};return!(f&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=Kl(c,S),a.subtreeFlags=c.subtreeFlags&14680064),u!==null?m=Kl(u,m):(m=Wu(m,f,i,null),m.flags|=2),m.return=t,a.return=t,a.sibling=m,t.child=a,a=m,m=t.child,f=e.child.memoizedState,f=f===null?o_(i):{baseLanes:f.baseLanes|i,cachePool:null,transitions:f.transitions},m.memoizedState=f,m.childLanes=e.childLanes&~i,t.memoizedState=i_,a}return m=e.child,e=m.sibling,a=Kl(m,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function G1(e,t){return t=iy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tm(e,t,i,a){return a!==null&&k1(a),Sh(t,e.child,null,i),e=G1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $3(e,t,i,a,c,m,f){if(i)return t.flags&256?(t.flags&=-257,a=N0(Error(At(422))),tm(e,t,f,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=a.fallback,c=t.mode,a=iy({mode:"visible",children:a.children},c,0,null),m=Wu(m,c,f,null),m.flags|=2,a.return=t,m.return=t,a.sibling=m,t.child=a,t.mode&1&&Sh(t,e.child,null,f),t.child.memoizedState=o_(f),t.memoizedState=i_,m);if(!(t.mode&1))return tm(e,t,f,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var u=a.dgst;return a=u,m=Error(At(419)),a=N0(m,a,void 0),tm(e,t,f,a)}if(u=(f&e.childLanes)!==0,xo||u){if(a=ci,a!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|f)?0:c,c!==0&&c!==m.retryLane&&(m.retryLane=c,Wa(e,c),zs(a,e,c,-1))}return K1(),a=N0(Error(At(421))),tm(e,t,f,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=t4.bind(null,e),c._reactRetry=t,null):(e=m.treeContext,Do=Wl(c.nextSibling),Bo=t,vr=!0,Cs=null,e!==null&&(rs[is++]=Ua,rs[is++]=$a,rs[is++]=qu,Ua=e.id,$a=e.overflow,qu=t),t=G1(t,a.children),t.flags|=4096,t)}function A2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Jv(e.return,t,i)}function U0(e,t,i,a,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=a,m.tail=i,m.tailMode=c)}function xC(e,t,i){var a=t.pendingProps,c=a.revealOrder,m=a.tail;if(Yi(e,t,a.children,i),a=Tr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&A2(e,i,t);else if(e.tag===19)A2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(sr(Tr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&lg(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),U0(t,!1,c,i,m);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&lg(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}U0(t,!0,i,null,m);break;case"together":U0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Rm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Za(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ku|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=Kl(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Kl(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function V3(e,t,i){switch(t.tag){case 3:vC(t),bh();break;case 5:ZT(t);break;case 1:bo(t.type)&&ng(t);break;case 4:L1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;sr(og,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(sr(Tr,Tr.current&1),t.flags|=128,null):i&t.child.childLanes?_C(e,t,i):(sr(Tr,Tr.current&1),e=Za(e,t,i),e!==null?e.sibling:null);sr(Tr,Tr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return xC(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),sr(Tr,Tr.current),a)break;return null;case 22:case 23:return t.lanes=0,gC(e,t,i)}return Za(e,t,i)}var wC,s_,bC,SC;wC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};s_=function(){};bC=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,$u(ua.current);var m=null;switch(i){case"input":c=Av(e,c),a=Av(e,a),m=[];break;case"select":c=Ar({},c,{value:void 0}),a=Ar({},a,{value:void 0}),m=[];break;case"textarea":c=Mv(e,c),a=Mv(e,a),m=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=eg)}Rv(i,a);var f;i=null;for(C in c)if(!a.hasOwnProperty(C)&&c.hasOwnProperty(C)&&c[C]!=null)if(C==="style"){var u=c[C];for(f in u)u.hasOwnProperty(f)&&(i||(i={}),i[f]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(gd.hasOwnProperty(C)?m||(m=[]):(m=m||[]).push(C,null));for(C in a){var S=a[C];if(u=c!=null?c[C]:void 0,a.hasOwnProperty(C)&&S!==u&&(S!=null||u!=null))if(C==="style")if(u){for(f in u)!u.hasOwnProperty(f)||S&&S.hasOwnProperty(f)||(i||(i={}),i[f]="");for(f in S)S.hasOwnProperty(f)&&u[f]!==S[f]&&(i||(i={}),i[f]=S[f])}else i||(m||(m=[]),m.push(C,i)),i=S;else C==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,u=u?u.__html:void 0,S!=null&&u!==S&&(m=m||[]).push(C,S)):C==="children"?typeof S!="string"&&typeof S!="number"||(m=m||[]).push(C,""+S):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(gd.hasOwnProperty(C)?(S!=null&&C==="onScroll"&&cr("scroll",e),m||u===S||(m=[])):(m=m||[]).push(C,S))}i&&(m=m||[]).push("style",i);var C=m;(t.updateQueue=C)&&(t.flags|=4)}};SC=function(e,t,i,a){i!==a&&(t.flags|=4)};function Bf(e,t){if(!vr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Di(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function G3(e,t,i){var a=t.pendingProps;switch(P1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(t),null;case 1:return bo(t.type)&&tg(),Di(t),null;case 3:return a=t.stateNode,Eh(),fr(wo),fr($i),D1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Qp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cs!==null&&(p_(Cs),Cs=null))),s_(e,t),Di(t),null;case 5:j1(t);var c=$u(Ad.current);if(i=t.type,e!==null&&t.stateNode!=null)bC(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Di(t),null}if(e=$u(ua.current),Qp(t)){a=t.stateNode,i=t.type;var m=t.memoizedProps;switch(a[ra]=t,a[Cd]=m,e=(t.mode&1)!==0,i){case"dialog":cr("cancel",a),cr("close",a);break;case"iframe":case"object":case"embed":cr("load",a);break;case"video":case"audio":for(c=0;c<Hf.length;c++)cr(Hf[c],a);break;case"source":cr("error",a);break;case"img":case"image":case"link":cr("error",a),cr("load",a);break;case"details":cr("toggle",a);break;case"input":jb(a,m),cr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!m.multiple},cr("invalid",a);break;case"textarea":Bb(a,m),cr("invalid",a)}Rv(i,m),c=null;for(var f in m)if(m.hasOwnProperty(f)){var u=m[f];f==="children"?typeof u=="string"?a.textContent!==u&&(m.suppressHydrationWarning!==!0&&Jp(a.textContent,u,e),c=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(m.suppressHydrationWarning!==!0&&Jp(a.textContent,u,e),c=["children",""+u]):gd.hasOwnProperty(f)&&u!=null&&f==="onScroll"&&cr("scroll",a)}switch(i){case"input":Gp(a),Db(a,m,!0);break;case"textarea":Gp(a),Nb(a);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(a.onclick=eg)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=KE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=f.createElement(i,{is:a.is}):(e=f.createElement(i),i==="select"&&(f=e,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):e=f.createElementNS(e,i),e[ra]=t,e[Cd]=a,wC(e,t,!1,!1),t.stateNode=e;e:{switch(f=Fv(i,a),i){case"dialog":cr("cancel",e),cr("close",e),c=a;break;case"iframe":case"object":case"embed":cr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Hf.length;c++)cr(Hf[c],e);c=a;break;case"source":cr("error",e),c=a;break;case"img":case"image":case"link":cr("error",e),cr("load",e),c=a;break;case"details":cr("toggle",e),c=a;break;case"input":jb(e,a),c=Av(e,a),cr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Ar({},a,{value:void 0}),cr("invalid",e);break;case"textarea":Bb(e,a),c=Mv(e,a),cr("invalid",e);break;default:c=a}Rv(i,c),u=c;for(m in u)if(u.hasOwnProperty(m)){var S=u[m];m==="style"?QE(e,S):m==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&YE(e,S)):m==="children"?typeof S=="string"?(i!=="textarea"||S!=="")&&yd(e,S):typeof S=="number"&&yd(e,""+S):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(gd.hasOwnProperty(m)?S!=null&&m==="onScroll"&&cr("scroll",e):S!=null&&p1(e,m,S,f))}switch(i){case"input":Gp(e),Db(e,a,!1);break;case"textarea":Gp(e),Nb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Yl(a.value));break;case"select":e.multiple=!!a.multiple,m=a.value,m!=null?hh(e,!!a.multiple,m,!1):a.defaultValue!=null&&hh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=eg)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Di(t),null;case 6:if(e&&t.stateNode!=null)SC(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=$u(Ad.current),$u(ua.current),Qp(t)){if(a=t.stateNode,i=t.memoizedProps,a[ra]=t,(m=a.nodeValue!==i)&&(e=Bo,e!==null))switch(e.tag){case 3:Jp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jp(a.nodeValue,i,(e.mode&1)!==0)}m&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[ra]=t,t.stateNode=a}return Di(t),null;case 13:if(fr(Tr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vr&&Do!==null&&t.mode&1&&!(t.flags&128))NT(),bh(),t.flags|=98560,m=!1;else if(m=Qp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!m)throw Error(At(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(At(317));m[ra]=t}else bh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Di(t),m=!1}else Cs!==null&&(p_(Cs),Cs=null),m=!0;if(!m)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Tr.current&1?ti===0&&(ti=3):K1())),t.updateQueue!==null&&(t.flags|=4),Di(t),null);case 4:return Eh(),s_(e,t),e===null&&Ed(t.stateNode.containerInfo),Di(t),null;case 10:return R1(t.type._context),Di(t),null;case 17:return bo(t.type)&&tg(),Di(t),null;case 19:if(fr(Tr),m=t.memoizedState,m===null)return Di(t),null;if(a=(t.flags&128)!==0,f=m.rendering,f===null)if(a)Bf(m,!1);else{if(ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=lg(e),f!==null){for(t.flags|=128,Bf(m,!1),a=f.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)m=i,e=a,m.flags&=14680066,f=m.alternate,f===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=f.childLanes,m.lanes=f.lanes,m.child=f.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=f.memoizedProps,m.memoizedState=f.memoizedState,m.updateQueue=f.updateQueue,m.type=f.type,e=f.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return sr(Tr,Tr.current&1|2),t.child}e=e.sibling}m.tail!==null&&Hr()>Ch&&(t.flags|=128,a=!0,Bf(m,!1),t.lanes=4194304)}else{if(!a)if(e=lg(f),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Bf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!f.alternate&&!vr)return Di(t),null}else 2*Hr()-m.renderingStartTime>Ch&&i!==1073741824&&(t.flags|=128,a=!0,Bf(m,!1),t.lanes=4194304);m.isBackwards?(f.sibling=t.child,t.child=f):(i=m.last,i!==null?i.sibling=f:t.child=f,m.last=f)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=Hr(),t.sibling=null,i=Tr.current,sr(Tr,a?i&1|2:i&1),t):(Di(t),null);case 22:case 23:return X1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Fo&1073741824&&(Di(t),t.subtreeFlags&6&&(t.flags|=8192)):Di(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function H3(e,t){switch(P1(t),t.tag){case 1:return bo(t.type)&&tg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Eh(),fr(wo),fr($i),D1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return j1(t),null;case 13:if(fr(Tr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));bh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fr(Tr),null;case 4:return Eh(),null;case 10:return R1(t.type._context),null;case 22:case 23:return X1(),null;case 24:return null;default:return null}}var nm=!1,Ni=!1,W3=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function ih(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Or(e,t,a)}else i.current=null}function a_(e,t,i){try{i()}catch(a){Or(e,t,a)}}var P2=!1;function Z3(e,t){if(Gv=Ym,e=IT(),I1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,m=a.focusNode;a=a.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var f=0,u=-1,S=-1,C=0,P=0,b=e,T=null;t:for(;;){for(var F;b!==i||c!==0&&b.nodeType!==3||(u=f+c),b!==m||a!==0&&b.nodeType!==3||(S=f+a),b.nodeType===3&&(f+=b.nodeValue.length),(F=b.firstChild)!==null;)T=b,b=F;for(;;){if(b===e)break t;if(T===i&&++C===c&&(u=f),T===m&&++P===a&&(S=f),(F=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=F}i=u===-1||S===-1?null:{start:u,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(Hv={focusedElem:e,selectionRange:i},Ym=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){t=Qt;try{var B=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var O=B.memoizedProps,he=B.memoizedState,Y=t.stateNode,q=Y.getSnapshotBeforeUpdate(t.elementType===t.type?O:Es(t.type,O),he);Y.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(se){Or(t,t.return,se)}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}return B=P2,P2=!1,B}function sd(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var m=c.destroy;c.destroy=void 0,m!==void 0&&a_(t,i,m)}c=c.next}while(c!==a)}}function ny(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function l_(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function EC(e){var t=e.alternate;t!==null&&(e.alternate=null,EC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ra],delete t[Cd],delete t[qv],delete t[P3],delete t[k3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function TC(e){return e.tag===5||e.tag===3||e.tag===4}function k2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||TC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function u_(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=eg));else if(a!==4&&(e=e.child,e!==null))for(u_(e,t,i),e=e.sibling;e!==null;)u_(e,t,i),e=e.sibling}function c_(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(c_(e,t,i),e=e.sibling;e!==null;)c_(e,t,i),e=e.sibling}var Si=null,Ts=!1;function zl(e,t,i){for(i=i.child;i!==null;)CC(e,t,i),i=i.sibling}function CC(e,t,i){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(qg,i)}catch{}switch(i.tag){case 5:Ni||ih(i,t);case 6:var a=Si,c=Ts;Si=null,zl(e,t,i),Si=a,Ts=c,Si!==null&&(Ts?(e=Si,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Si.removeChild(i.stateNode));break;case 18:Si!==null&&(Ts?(e=Si,i=i.stateNode,e.nodeType===8?F0(e.parentNode,i):e.nodeType===1&&F0(e,i),wd(e)):F0(Si,i.stateNode));break;case 4:a=Si,c=Ts,Si=i.stateNode.containerInfo,Ts=!0,zl(e,t,i),Si=a,Ts=c;break;case 0:case 11:case 14:case 15:if(!Ni&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var m=c,f=m.destroy;m=m.tag,f!==void 0&&(m&2||m&4)&&a_(i,t,f),c=c.next}while(c!==a)}zl(e,t,i);break;case 1:if(!Ni&&(ih(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Or(i,t,u)}zl(e,t,i);break;case 21:zl(e,t,i);break;case 22:i.mode&1?(Ni=(a=Ni)||i.memoizedState!==null,zl(e,t,i),Ni=a):zl(e,t,i);break;default:zl(e,t,i)}}function M2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new W3),t.forEach(function(a){var c=n4.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Ss(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var m=e,f=t,u=f;e:for(;u!==null;){switch(u.tag){case 5:Si=u.stateNode,Ts=!1;break e;case 3:Si=u.stateNode.containerInfo,Ts=!0;break e;case 4:Si=u.stateNode.containerInfo,Ts=!0;break e}u=u.return}if(Si===null)throw Error(At(160));CC(m,f,c),Si=null,Ts=!1;var S=c.alternate;S!==null&&(S.return=null),c.return=null}catch(C){Or(c,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)IC(t,e),t=t.sibling}function IC(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ss(t,e),ta(e),a&4){try{sd(3,e,e.return),ny(3,e)}catch(O){Or(e,e.return,O)}try{sd(5,e,e.return)}catch(O){Or(e,e.return,O)}}break;case 1:Ss(t,e),ta(e),a&512&&i!==null&&ih(i,i.return);break;case 5:if(Ss(t,e),ta(e),a&512&&i!==null&&ih(i,i.return),e.flags&32){var c=e.stateNode;try{yd(c,"")}catch(O){Or(e,e.return,O)}}if(a&4&&(c=e.stateNode,c!=null)){var m=e.memoizedProps,f=i!==null?i.memoizedProps:m,u=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{u==="input"&&m.type==="radio"&&m.name!=null&&qE(c,m),Fv(u,f);var C=Fv(u,m);for(f=0;f<S.length;f+=2){var P=S[f],b=S[f+1];P==="style"?QE(c,b):P==="dangerouslySetInnerHTML"?YE(c,b):P==="children"?yd(c,b):p1(c,P,b,C)}switch(u){case"input":Pv(c,m);break;case"textarea":XE(c,m);break;case"select":var T=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!m.multiple;var F=m.value;F!=null?hh(c,!!m.multiple,F,!1):T!==!!m.multiple&&(m.defaultValue!=null?hh(c,!!m.multiple,m.defaultValue,!0):hh(c,!!m.multiple,m.multiple?[]:"",!1))}c[Cd]=m}catch(O){Or(e,e.return,O)}}break;case 6:if(Ss(t,e),ta(e),a&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,m=e.memoizedProps;try{c.nodeValue=m}catch(O){Or(e,e.return,O)}}break;case 3:if(Ss(t,e),ta(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{wd(t.containerInfo)}catch(O){Or(e,e.return,O)}break;case 4:Ss(t,e),ta(e);break;case 13:Ss(t,e),ta(e),c=e.child,c.flags&8192&&(m=c.memoizedState!==null,c.stateNode.isHidden=m,!m||c.alternate!==null&&c.alternate.memoizedState!==null||(Z1=Hr())),a&4&&M2(e);break;case 22:if(P=i!==null&&i.memoizedState!==null,e.mode&1?(Ni=(C=Ni)||P,Ss(t,e),Ni=C):Ss(t,e),ta(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!P&&e.mode&1)for(Qt=e,P=e.child;P!==null;){for(b=Qt=P;Qt!==null;){switch(T=Qt,F=T.child,T.tag){case 0:case 11:case 14:case 15:sd(4,T,T.return);break;case 1:ih(T,T.return);var B=T.stateNode;if(typeof B.componentWillUnmount=="function"){a=T,i=T.return;try{t=a,B.props=t.memoizedProps,B.state=t.memoizedState,B.componentWillUnmount()}catch(O){Or(a,i,O)}}break;case 5:ih(T,T.return);break;case 22:if(T.memoizedState!==null){R2(b);continue}}F!==null?(F.return=T,Qt=F):R2(b)}P=P.sibling}e:for(P=null,b=e;;){if(b.tag===5){if(P===null){P=b;try{c=b.stateNode,C?(m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(u=b.stateNode,S=b.memoizedProps.style,f=S!=null&&S.hasOwnProperty("display")?S.display:null,u.style.display=JE("display",f))}catch(O){Or(e,e.return,O)}}}else if(b.tag===6){if(P===null)try{b.stateNode.nodeValue=C?"":b.memoizedProps}catch(O){Or(e,e.return,O)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;P===b&&(P=null),b=b.return}P===b&&(P=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Ss(t,e),ta(e),a&4&&M2(e);break;case 21:break;default:Ss(t,e),ta(e)}}function ta(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(TC(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(yd(c,""),a.flags&=-33);var m=k2(e);c_(e,m,c);break;case 3:case 4:var f=a.stateNode.containerInfo,u=k2(e);u_(e,u,f);break;default:throw Error(At(161))}}catch(S){Or(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function q3(e,t,i){Qt=e,AC(e)}function AC(e,t,i){for(var a=(e.mode&1)!==0;Qt!==null;){var c=Qt,m=c.child;if(c.tag===22&&a){var f=c.memoizedState!==null||nm;if(!f){var u=c.alternate,S=u!==null&&u.memoizedState!==null||Ni;u=nm;var C=Ni;if(nm=f,(Ni=S)&&!C)for(Qt=c;Qt!==null;)f=Qt,S=f.child,f.tag===22&&f.memoizedState!==null?F2(c):S!==null?(S.return=f,Qt=S):F2(c);for(;m!==null;)Qt=m,AC(m),m=m.sibling;Qt=c,nm=u,Ni=C}z2(e)}else c.subtreeFlags&8772&&m!==null?(m.return=c,Qt=m):z2(e)}}function z2(e){for(;Qt!==null;){var t=Qt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ni||ny(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ni)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Es(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&m2(t,m,a);break;case 3:var f=t.updateQueue;if(f!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}m2(t,f,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&i.focus();break;case"img":S.src&&(i.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var P=C.memoizedState;if(P!==null){var b=P.dehydrated;b!==null&&wd(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Ni||t.flags&512&&l_(t)}catch(T){Or(t,t.return,T)}}if(t===e){Qt=null;break}if(i=t.sibling,i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function R2(e){for(;Qt!==null;){var t=Qt;if(t===e){Qt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function F2(e){for(;Qt!==null;){var t=Qt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{ny(4,t)}catch(S){Or(t,i,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(S){Or(t,c,S)}}var m=t.return;try{l_(t)}catch(S){Or(t,m,S)}break;case 5:var f=t.return;try{l_(t)}catch(S){Or(t,f,S)}}}catch(S){Or(t,t.return,S)}if(t===e){Qt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Qt=u;break}Qt=t.return}}var X3=Math.ceil,hg=Ja.ReactCurrentDispatcher,H1=Ja.ReactCurrentOwner,ls=Ja.ReactCurrentBatchConfig,Nn=0,ci=null,Yr=null,Ti=0,Fo=0,oh=iu(0),ti=0,zd=null,Ku=0,ry=0,W1=0,ad=null,vo=null,Z1=0,Ch=1/0,ja=null,fg=!1,h_=null,ql=null,rm=!1,Ul=null,dg=0,ld=0,f_=null,Fm=-1,Om=0;function to(){return Nn&6?Hr():Fm!==-1?Fm:Fm=Hr()}function Xl(e){return e.mode&1?Nn&2&&Ti!==0?Ti&-Ti:z3.transition!==null?(Om===0&&(Om=hT()),Om):(e=Kn,e!==0||(e=window.event,e=e===void 0?16:vT(e.type)),e):1}function zs(e,t,i,a){if(50<ld)throw ld=0,f_=null,Error(At(185));Hd(e,i,a),(!(Nn&2)||e!==ci)&&(e===ci&&(!(Nn&2)&&(ry|=i),ti===4&&Bl(e,Ti)),So(e,a),i===1&&Nn===0&&!(t.mode&1)&&(Ch=Hr()+500,Qg&&ou()))}function So(e,t){var i=e.callbackNode;zM(e,t);var a=Km(e,e===ci?Ti:0);if(a===0)i!==null&&Vb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Vb(i),t===1)e.tag===0?M3(O2.bind(null,e)):jT(O2.bind(null,e)),I3(function(){!(Nn&6)&&ou()}),i=null;else{switch(fT(a)){case 1:i=_1;break;case 4:i=uT;break;case 16:i=Xm;break;case 536870912:i=cT;break;default:i=Xm}i=LC(i,PC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function PC(e,t){if(Fm=-1,Om=0,Nn&6)throw Error(At(327));var i=e.callbackNode;if(gh()&&e.callbackNode!==i)return null;var a=Km(e,e===ci?Ti:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=pg(e,a);else{t=a;var c=Nn;Nn|=2;var m=MC();(ci!==e||Ti!==t)&&(ja=null,Ch=Hr()+500,Hu(e,t));do try{J3();break}catch(u){kC(e,u)}while(!0);z1(),hg.current=m,Nn=c,Yr!==null?t=0:(ci=null,Ti=0,t=ti)}if(t!==0){if(t===2&&(c=Bv(e),c!==0&&(a=c,t=d_(e,c))),t===1)throw i=zd,Hu(e,0),Bl(e,a),So(e,Hr()),i;if(t===6)Bl(e,a);else{if(c=e.current.alternate,!(a&30)&&!K3(c)&&(t=pg(e,a),t===2&&(m=Bv(e),m!==0&&(a=m,t=d_(e,m))),t===1))throw i=zd,Hu(e,0),Bl(e,a),So(e,Hr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:Du(e,vo,ja);break;case 3:if(Bl(e,a),(a&130023424)===a&&(t=Z1+500-Hr(),10<t)){if(Km(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){to(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Zv(Du.bind(null,e,vo,ja),t);break}Du(e,vo,ja);break;case 4:if(Bl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var f=31-Ms(a);m=1<<f,f=t[f],f>c&&(c=f),a&=~m}if(a=c,a=Hr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*X3(a/1960))-a,10<a){e.timeoutHandle=Zv(Du.bind(null,e,vo,ja),a);break}Du(e,vo,ja);break;case 5:Du(e,vo,ja);break;default:throw Error(At(329))}}}return So(e,Hr()),e.callbackNode===i?PC.bind(null,e):null}function d_(e,t){var i=ad;return e.current.memoizedState.isDehydrated&&(Hu(e,t).flags|=256),e=pg(e,t),e!==2&&(t=vo,vo=i,t!==null&&p_(t)),e}function p_(e){vo===null?vo=e:vo.push.apply(vo,e)}function K3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],m=c.getSnapshot;c=c.value;try{if(!Rs(m(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bl(e,t){for(t&=~W1,t&=~ry,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ms(t),a=1<<i;e[i]=-1,t&=~a}}function O2(e){if(Nn&6)throw Error(At(327));gh();var t=Km(e,0);if(!(t&1))return So(e,Hr()),null;var i=pg(e,t);if(e.tag!==0&&i===2){var a=Bv(e);a!==0&&(t=a,i=d_(e,a))}if(i===1)throw i=zd,Hu(e,0),Bl(e,t),So(e,Hr()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e,vo,ja),So(e,Hr()),null}function q1(e,t){var i=Nn;Nn|=1;try{return e(t)}finally{Nn=i,Nn===0&&(Ch=Hr()+500,Qg&&ou())}}function Yu(e){Ul!==null&&Ul.tag===0&&!(Nn&6)&&gh();var t=Nn;Nn|=1;var i=ls.transition,a=Kn;try{if(ls.transition=null,Kn=1,e)return e()}finally{Kn=a,ls.transition=i,Nn=t,!(Nn&6)&&ou()}}function X1(){Fo=oh.current,fr(oh)}function Hu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,C3(i)),Yr!==null)for(i=Yr.return;i!==null;){var a=i;switch(P1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&tg();break;case 3:Eh(),fr(wo),fr($i),D1();break;case 5:j1(a);break;case 4:Eh();break;case 13:fr(Tr);break;case 19:fr(Tr);break;case 10:R1(a.type._context);break;case 22:case 23:X1()}i=i.return}if(ci=e,Yr=e=Kl(e.current,null),Ti=Fo=t,ti=0,zd=null,W1=ry=Ku=0,vo=ad=null,Uu!==null){for(t=0;t<Uu.length;t++)if(i=Uu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,m=i.pending;if(m!==null){var f=m.next;m.next=c,a.next=f}i.pending=a}Uu=null}return e}function kC(e,t){do{var i=Yr;try{if(z1(),Mm.current=cg,ug){for(var a=Ir.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}ug=!1}if(Xu=0,ui=ei=Ir=null,od=!1,Pd=0,H1.current=null,i===null||i.return===null){ti=1,zd=t,Yr=null;break}e:{var m=e,f=i.return,u=i,S=t;if(t=Ti,u.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var C=S,P=u,b=P.tag;if(!(P.mode&1)&&(b===0||b===11||b===15)){var T=P.alternate;T?(P.updateQueue=T.updateQueue,P.memoizedState=T.memoizedState,P.lanes=T.lanes):(P.updateQueue=null,P.memoizedState=null)}var F=b2(f);if(F!==null){F.flags&=-257,S2(F,f,u,m,t),F.mode&1&&w2(m,C,t),t=F,S=C;var B=t.updateQueue;if(B===null){var O=new Set;O.add(S),t.updateQueue=O}else B.add(S);break e}else{if(!(t&1)){w2(m,C,t),K1();break e}S=Error(At(426))}}else if(vr&&u.mode&1){var he=b2(f);if(he!==null){!(he.flags&65536)&&(he.flags|=256),S2(he,f,u,m,t),k1(Th(S,u));break e}}m=S=Th(S,u),ti!==4&&(ti=2),ad===null?ad=[m]:ad.push(m),m=f;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var Y=dC(m,S,t);p2(m,Y);break e;case 1:u=S;var q=m.type,$=m.stateNode;if(!(m.flags&128)&&(typeof q.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(ql===null||!ql.has($)))){m.flags|=65536,t&=-t,m.lanes|=t;var se=pC(m,u,t);p2(m,se);break e}}m=m.return}while(m!==null)}RC(i)}catch(X){t=X,Yr===i&&i!==null&&(Yr=i=i.return);continue}break}while(!0)}function MC(){var e=hg.current;return hg.current=cg,e===null?cg:e}function K1(){(ti===0||ti===3||ti===2)&&(ti=4),ci===null||!(Ku&268435455)&&!(ry&268435455)||Bl(ci,Ti)}function pg(e,t){var i=Nn;Nn|=2;var a=MC();(ci!==e||Ti!==t)&&(ja=null,Hu(e,t));do try{Y3();break}catch(c){kC(e,c)}while(!0);if(z1(),Nn=i,hg.current=a,Yr!==null)throw Error(At(261));return ci=null,Ti=0,ti}function Y3(){for(;Yr!==null;)zC(Yr)}function J3(){for(;Yr!==null&&!SM();)zC(Yr)}function zC(e){var t=OC(e.alternate,e,Fo);e.memoizedProps=e.pendingProps,t===null?RC(e):Yr=t,H1.current=null}function RC(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=H3(i,t),i!==null){i.flags&=32767,Yr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ti=6,Yr=null;return}}else if(i=G3(i,t,Fo),i!==null){Yr=i;return}if(t=t.sibling,t!==null){Yr=t;return}Yr=t=e}while(t!==null);ti===0&&(ti=5)}function Du(e,t,i){var a=Kn,c=ls.transition;try{ls.transition=null,Kn=1,Q3(e,t,i,a)}finally{ls.transition=c,Kn=a}return null}function Q3(e,t,i,a){do gh();while(Ul!==null);if(Nn&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var m=i.lanes|i.childLanes;if(RM(e,m),e===ci&&(Yr=ci=null,Ti=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||rm||(rm=!0,LC(Xm,function(){return gh(),null})),m=(i.flags&15990)!==0,i.subtreeFlags&15990||m){m=ls.transition,ls.transition=null;var f=Kn;Kn=1;var u=Nn;Nn|=4,H1.current=null,Z3(e,i),IC(i,e),_3(Hv),Ym=!!Gv,Hv=Gv=null,e.current=i,q3(i),EM(),Nn=u,Kn=f,ls.transition=m}else e.current=i;if(rm&&(rm=!1,Ul=e,dg=c),m=e.pendingLanes,m===0&&(ql=null),IM(i.stateNode),So(e,Hr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(fg)throw fg=!1,e=h_,h_=null,e;return dg&1&&e.tag!==0&&gh(),m=e.pendingLanes,m&1?e===f_?ld++:(ld=0,f_=e):ld=0,ou(),null}function gh(){if(Ul!==null){var e=fT(dg),t=ls.transition,i=Kn;try{if(ls.transition=null,Kn=16>e?16:e,Ul===null)var a=!1;else{if(e=Ul,Ul=null,dg=0,Nn&6)throw Error(At(331));var c=Nn;for(Nn|=4,Qt=e.current;Qt!==null;){var m=Qt,f=m.child;if(Qt.flags&16){var u=m.deletions;if(u!==null){for(var S=0;S<u.length;S++){var C=u[S];for(Qt=C;Qt!==null;){var P=Qt;switch(P.tag){case 0:case 11:case 15:sd(8,P,m)}var b=P.child;if(b!==null)b.return=P,Qt=b;else for(;Qt!==null;){P=Qt;var T=P.sibling,F=P.return;if(EC(P),P===C){Qt=null;break}if(T!==null){T.return=F,Qt=T;break}Qt=F}}}var B=m.alternate;if(B!==null){var O=B.child;if(O!==null){B.child=null;do{var he=O.sibling;O.sibling=null,O=he}while(O!==null)}}Qt=m}}if(m.subtreeFlags&2064&&f!==null)f.return=m,Qt=f;else e:for(;Qt!==null;){if(m=Qt,m.flags&2048)switch(m.tag){case 0:case 11:case 15:sd(9,m,m.return)}var Y=m.sibling;if(Y!==null){Y.return=m.return,Qt=Y;break e}Qt=m.return}}var q=e.current;for(Qt=q;Qt!==null;){f=Qt;var $=f.child;if(f.subtreeFlags&2064&&$!==null)$.return=f,Qt=$;else e:for(f=q;Qt!==null;){if(u=Qt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ny(9,u)}}catch(X){Or(u,u.return,X)}if(u===f){Qt=null;break e}var se=u.sibling;if(se!==null){se.return=u.return,Qt=se;break e}Qt=u.return}}if(Nn=c,ou(),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(qg,e)}catch{}a=!0}return a}finally{Kn=i,ls.transition=t}}return!1}function L2(e,t,i){t=Th(i,t),t=dC(e,t,1),e=Zl(e,t,1),t=to(),e!==null&&(Hd(e,1,t),So(e,t))}function Or(e,t,i){if(e.tag===3)L2(e,e,i);else for(;t!==null;){if(t.tag===3){L2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ql===null||!ql.has(a))){e=Th(i,e),e=pC(t,e,1),t=Zl(t,e,1),e=to(),t!==null&&(Hd(t,1,e),So(t,e));break}}t=t.return}}function e4(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=to(),e.pingedLanes|=e.suspendedLanes&i,ci===e&&(Ti&i)===i&&(ti===4||ti===3&&(Ti&130023424)===Ti&&500>Hr()-Z1?Hu(e,0):W1|=i),So(e,t)}function FC(e,t){t===0&&(e.mode&1?(t=Zp,Zp<<=1,!(Zp&130023424)&&(Zp=4194304)):t=1);var i=to();e=Wa(e,t),e!==null&&(Hd(e,t,i),So(e,i))}function t4(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),FC(e,i)}function n4(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),FC(e,i)}var OC;OC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||wo.current)xo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return xo=!1,V3(e,t,i);xo=!!(e.flags&131072)}else xo=!1,vr&&t.flags&1048576&&DT(t,ig,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Rm(e,t),e=t.pendingProps;var c=wh(t,$i.current);mh(t,i),c=N1(null,t,a,e,c,i);var m=U1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bo(a)?(m=!0,ng(t)):m=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,O1(t),c.updater=ey,t.stateNode=c,c._reactInternals=t,e_(t,a,e,i),t=r_(null,t,a,!0,m,i)):(t.tag=0,vr&&m&&A1(t),Yi(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Rm(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=i4(a),e=Es(a,e),c){case 0:t=n_(null,t,a,e,i);break e;case 1:t=C2(null,t,a,e,i);break e;case 11:t=E2(null,t,a,e,i);break e;case 14:t=T2(null,t,a,Es(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Es(a,c),n_(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Es(a,c),C2(e,t,a,c,i);case 3:e:{if(vC(t),e===null)throw Error(At(387));a=t.pendingProps,m=t.memoizedState,c=m.element,$T(e,t),ag(t,a,null,i);var f=t.memoizedState;if(a=f.element,m.isDehydrated)if(m={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){c=Th(Error(At(423)),t),t=I2(e,t,a,i,c);break e}else if(a!==c){c=Th(Error(At(424)),t),t=I2(e,t,a,i,c);break e}else for(Do=Wl(t.stateNode.containerInfo.firstChild),Bo=t,vr=!0,Cs=null,i=WT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(bh(),a===c){t=Za(e,t,i);break e}Yi(e,t,a,i)}t=t.child}return t;case 5:return ZT(t),e===null&&Yv(t),a=t.type,c=t.pendingProps,m=e!==null?e.memoizedProps:null,f=c.children,Wv(a,c)?f=null:m!==null&&Wv(a,m)&&(t.flags|=32),yC(e,t),Yi(e,t,f,i),t.child;case 6:return e===null&&Yv(t),null;case 13:return _C(e,t,i);case 4:return L1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Sh(t,null,a,i):Yi(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Es(a,c),E2(e,t,a,c,i);case 7:return Yi(e,t,t.pendingProps,i),t.child;case 8:return Yi(e,t,t.pendingProps.children,i),t.child;case 12:return Yi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,m=t.memoizedProps,f=c.value,sr(og,a._currentValue),a._currentValue=f,m!==null)if(Rs(m.value,f)){if(m.children===c.children&&!wo.current){t=Za(e,t,i);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var u=m.dependencies;if(u!==null){f=m.child;for(var S=u.firstContext;S!==null;){if(S.context===a){if(m.tag===1){S=Va(-1,i&-i),S.tag=2;var C=m.updateQueue;if(C!==null){C=C.shared;var P=C.pending;P===null?S.next=S:(S.next=P.next,P.next=S),C.pending=S}}m.lanes|=i,S=m.alternate,S!==null&&(S.lanes|=i),Jv(m.return,i,t),u.lanes|=i;break}S=S.next}}else if(m.tag===10)f=m.type===t.type?null:m.child;else if(m.tag===18){if(f=m.return,f===null)throw Error(At(341));f.lanes|=i,u=f.alternate,u!==null&&(u.lanes|=i),Jv(f,i,t),f=m.sibling}else f=m.child;if(f!==null)f.return=m;else for(f=m;f!==null;){if(f===t){f=null;break}if(m=f.sibling,m!==null){m.return=f.return,f=m;break}f=f.return}m=f}Yi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,mh(t,i),c=us(c),a=a(c),t.flags|=1,Yi(e,t,a,i),t.child;case 14:return a=t.type,c=Es(a,t.pendingProps),c=Es(a.type,c),T2(e,t,a,c,i);case 15:return mC(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Es(a,c),Rm(e,t),t.tag=1,bo(a)?(e=!0,ng(t)):e=!1,mh(t,i),GT(t,a,c),e_(t,a,c,i),r_(null,t,a,!0,e,i);case 19:return xC(e,t,i);case 22:return gC(e,t,i)}throw Error(At(156,t.tag))};function LC(e,t){return lT(e,t)}function r4(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(e,t,i,a){return new r4(e,t,i,a)}function Y1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function i4(e){if(typeof e=="function")return Y1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===g1)return 11;if(e===y1)return 14}return 2}function Kl(e,t){var i=e.alternate;return i===null?(i=ss(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Lm(e,t,i,a,c,m){var f=2;if(a=e,typeof e=="function")Y1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Xc:return Wu(i.children,c,m,t);case m1:f=8,c|=8;break;case Ev:return e=ss(12,i,t,c|2),e.elementType=Ev,e.lanes=m,e;case Tv:return e=ss(13,i,t,c),e.elementType=Tv,e.lanes=m,e;case Cv:return e=ss(19,i,t,c),e.elementType=Cv,e.lanes=m,e;case HE:return iy(i,c,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case VE:f=10;break e;case GE:f=9;break e;case g1:f=11;break e;case y1:f=14;break e;case Fl:f=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=ss(f,i,t,c),t.elementType=e,t.type=a,t.lanes=m,t}function Wu(e,t,i,a){return e=ss(7,e,a,t),e.lanes=i,e}function iy(e,t,i,a){return e=ss(22,e,a,t),e.elementType=HE,e.lanes=i,e.stateNode={isHidden:!1},e}function $0(e,t,i){return e=ss(6,e,null,t),e.lanes=i,e}function V0(e,t,i){return t=ss(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function o4(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=S0(0),this.expirationTimes=S0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function J1(e,t,i,a,c,m,f,u,S){return e=new o4(e,t,i,u,S),t===1?(t=1,m===!0&&(t|=8)):t=0,m=ss(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},O1(m),e}function s4(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function jC(e){if(!e)return Jl;e=e._reactInternals;e:{if(rc(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(bo(i))return LT(e,i,t)}return t}function DC(e,t,i,a,c,m,f,u,S){return e=J1(i,a,!0,e,c,m,f,u,S),e.context=jC(null),i=e.current,a=to(),c=Xl(i),m=Va(a,c),m.callback=t??null,Zl(i,m,c),e.current.lanes=c,Hd(e,c,a),So(e,a),e}function oy(e,t,i,a){var c=t.current,m=to(),f=Xl(c);return i=jC(i),t.context===null?t.context=i:t.pendingContext=i,t=Va(m,f),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Zl(c,t,f),e!==null&&(zs(e,c,f,m),km(e,c,f)),f}function mg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function j2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Q1(e,t){j2(e,t),(e=e.alternate)&&j2(e,t)}function a4(){return null}var BC=typeof reportError=="function"?reportError:function(e){console.error(e)};function ex(e){this._internalRoot=e}sy.prototype.render=ex.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));oy(e,t,null,null)};sy.prototype.unmount=ex.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yu(function(){oy(null,e,null,null)}),t[Ha]=null}};function sy(e){this._internalRoot=e}sy.prototype.unstable_scheduleHydration=function(e){if(e){var t=mT();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Dl.length&&t!==0&&t<Dl[i].priority;i++);Dl.splice(i,0,e),i===0&&yT(e)}};function tx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ay(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function D2(){}function l4(e,t,i,a,c){if(c){if(typeof a=="function"){var m=a;a=function(){var C=mg(f);m.call(C)}}var f=DC(t,a,e,0,null,!1,!1,"",D2);return e._reactRootContainer=f,e[Ha]=f.current,Ed(e.nodeType===8?e.parentNode:e),Yu(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var u=a;a=function(){var C=mg(S);u.call(C)}}var S=J1(e,0,!1,null,null,!1,!1,"",D2);return e._reactRootContainer=S,e[Ha]=S.current,Ed(e.nodeType===8?e.parentNode:e),Yu(function(){oy(t,S,i,a)}),S}function ly(e,t,i,a,c){var m=i._reactRootContainer;if(m){var f=m;if(typeof c=="function"){var u=c;c=function(){var S=mg(f);u.call(S)}}oy(t,f,e,c)}else f=l4(i,t,e,c,a);return mg(f)}dT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Gf(t.pendingLanes);i!==0&&(x1(t,i|1),So(t,Hr()),!(Nn&6)&&(Ch=Hr()+500,ou()))}break;case 13:Yu(function(){var a=Wa(e,1);if(a!==null){var c=to();zs(a,e,1,c)}}),Q1(e,1)}};w1=function(e){if(e.tag===13){var t=Wa(e,134217728);if(t!==null){var i=to();zs(t,e,134217728,i)}Q1(e,134217728)}};pT=function(e){if(e.tag===13){var t=Xl(e),i=Wa(e,t);if(i!==null){var a=to();zs(i,e,t,a)}Q1(e,t)}};mT=function(){return Kn};gT=function(e,t){var i=Kn;try{return Kn=e,t()}finally{Kn=i}};Lv=function(e,t,i){switch(t){case"input":if(Pv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Jg(a);if(!c)throw Error(At(90));ZE(a),Pv(a,c)}}}break;case"textarea":XE(e,i);break;case"select":t=i.value,t!=null&&hh(e,!!i.multiple,t,!1)}};nT=q1;rT=Yu;var u4={usingClientEntryPoint:!1,Events:[Zd,Qc,Jg,eT,tT,q1]},Nf={findFiberByHostInstance:Nu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},c4={bundleType:Nf.bundleType,version:Nf.version,rendererPackageName:Nf.rendererPackageName,rendererConfig:Nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sT(e),e===null?null:e.stateNode},findFiberByHostInstance:Nf.findFiberByHostInstance||a4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{qg=im.inject(c4),la=im}catch{}}Uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u4;Uo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tx(t))throw Error(At(200));return s4(e,t,null,i)};Uo.createRoot=function(e,t){if(!tx(e))throw Error(At(299));var i=!1,a="",c=BC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=J1(e,1,!1,null,null,i,!1,a,c),e[Ha]=t.current,Ed(e.nodeType===8?e.parentNode:e),new ex(t)};Uo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=sT(t),e=e===null?null:e.stateNode,e};Uo.flushSync=function(e){return Yu(e)};Uo.hydrate=function(e,t,i){if(!ay(t))throw Error(At(200));return ly(null,e,t,!0,i)};Uo.hydrateRoot=function(e,t,i){if(!tx(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,c=!1,m="",f=BC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),t=DC(t,null,e,1,i??null,c,!1,m,f),e[Ha]=t.current,Ed(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new sy(t)};Uo.render=function(e,t,i){if(!ay(t))throw Error(At(200));return ly(null,e,t,!1,i)};Uo.unmountComponentAtNode=function(e){if(!ay(e))throw Error(At(40));return e._reactRootContainer?(Yu(function(){ly(null,null,e,!1,function(){e._reactRootContainer=null,e[Ha]=null})}),!0):!1};Uo.unstable_batchedUpdates=q1;Uo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!ay(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return ly(e,t,i,!1,a)};Uo.version="18.2.0-next-9e3b772b8-20220608";function NC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NC)}catch(e){console.error(e)}}NC(),DE.exports=Uo;var nx=DE.exports;const h4=Vd(nx);var UC={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.2.0/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})(jl,function(){var i={},a={};function c(f,u,S){if(a[f]=S,f==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",P={};return a.shared(P),a.index(i,P),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}c("shared",["exports"],function(f){function u(o,n,s,h){return new(s||(s=Promise))(function(p,v){function _(z){try{A(h.next(z))}catch(W){v(W)}}function w(z){try{A(h.throw(z))}catch(W){v(W)}}function A(z){var W;z.done?p(z.value):(W=z.value,W instanceof s?W:new s(function(K){K(W)})).then(_,w)}A((h=h.apply(o,n||[])).next())})}function S(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var C=P;function P(o,n){this.x=o,this.y=n}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(o){return o instanceof P?o:Array.isArray(o)?new P(o[0],o[1]):o};var b=S(C),T=F;function F(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}F.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var _=0,w=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?_=s:w=s,s=.5*(w-_)+_;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var B=S(T);let O,he;function Y(){return O==null&&(O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),O}function q(){if(he==null&&(he=!1,Y())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){he=!0;break}}}return he||!1}function $(o,n,s,h){const p=new B(o,n,s,h);return v=>p.solve(v)}const se=$(.25,.1,.25,1);function X(o,n,s){return Math.min(s,Math.max(n,o))}function V(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function E(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let L=1;function j(o,n,s){const h={};for(const p in o)h[p]=n.call(this,o[p],p,o);return h}function ee(o,n,s){const h={};for(const p in o)n.call(this,o[p],p,o)&&(h[p]=o[p]);return h}function Z(o){return Array.isArray(o)?o.map(Z):typeof o=="object"&&o?j(o,Z):o}const ve={};function _e(o){ve[o]||(typeof console<"u"&&console.warn(o),ve[o]=!0)}function de(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function oe(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let ue=null;function Q(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function fe(o,n,s,h,p){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const _=v==null?void 0:v.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const w=_.startsWith("BGR"),A=new Uint8ClampedArray(h*p*4);if(yield v.copyTo(A,function(z,W,K,ne,le){const me=4*Math.max(-W,0),Te=(Math.max(0,K)-K)*ne*4+me,Me=4*ne,Be=Math.max(0,W),Qe=Math.max(0,K);return{rect:{x:Be,y:Qe,width:Math.min(z.width,W+ne)-Be,height:Math.min(z.height,K+le)-Qe},layout:[{offset:Te,stride:Me}]}}(o,n,s,h,p)),w)for(let z=0;z<A.length;z+=4){const W=A[z];A[z]=A[z+2],A[z+2]=W}return A}finally{v.close()}})}let we,Ee;const Ne="AbortError";function Ae(){return new Error(Ne)}const Re={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ze(o){return Re.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const He="global-dispatcher";class rt extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const dt=()=>oe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,wt=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=Ze(o.url);if(h)return h(o,n);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:He},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(dt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return u(this,void 0,void 0,function*(){const v=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:dt(),signal:p.signal});h.type==="json"&&v.headers.set("Accept","application/json");const _=yield fetch(v);if(!_.ok){const z=yield _.blob();throw new rt(_.status,_.statusText,h.url,z)}let w;w=h.type==="arrayBuffer"||h.type==="image"?_.arrayBuffer():h.type==="json"?_.json():_.text();const A=yield w;if(p.signal.aborted)throw Ae();return{data:A,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}})}(o,n);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:He},n)}var s;return function(h,p){return new Promise((v,_)=>{const w=new XMLHttpRequest;w.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(w.responseType="arraybuffer");for(const A in h.headers)w.setRequestHeader(A,h.headers[A]);h.type==="json"&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials=h.credentials==="include",w.onerror=()=>{_(new Error(w.statusText))},w.onload=()=>{if(!p.signal.aborted)if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){let A=w.response;if(h.type==="json")try{A=JSON.parse(w.response)}catch(z){return void _(z)}v({data:A,cacheControl:w.getResponseHeader("Cache-Control"),expires:w.getResponseHeader("Expires")})}else{const A=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});_(new rt(w.status,w.statusText,h.url,A))}},p.signal.addEventListener("abort",()=>{w.abort(),_(Ae())}),w.send(h.body)})}(o,n)};function kt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function mt(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function St(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Vt{constructor(n,s={}){E(this,s),this.type=n}}class Lt extends Vt{constructor(n,s={}){super("error",E({error:n},s))}}class sn{on(n,s){return this._listeners=this._listeners||{},mt(n,s,this._listeners),this}off(n,s){return St(n,s,this._listeners),St(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},mt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Vt(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const w of p)w.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const w of v)St(h,w,this._oneTimeListeners),w.call(this,n);const _=this._eventedParent;_&&(E(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof Lt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var nt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const wn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function an(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return wn.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Ht(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!Ht(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!Ht(o[s],n[s]))return!1;return!0}return o===n}function be(o,n){o.push(n)}function N(o,n,s){be(s,{command:"addSource",args:[o,n[o]]})}function D(o,n,s){be(n,{command:"removeSource",args:[o]}),s[o]=!0}function xe(o,n,s,h){D(o,s,h),N(o,n,s)}function Xe(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Ht(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Ht(o[s][h],n[s][h]))return!1;return!0}function et(o,n,s,h,p,v){o=o||{},n=n||{};for(const _ in o)Object.prototype.hasOwnProperty.call(o,_)&&(Ht(o[_],n[_])||s.push({command:v,args:[h,_,n[_],p]}));for(const _ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(o,_)&&(Ht(o[_],n[_])||s.push({command:v,args:[h,_,n[_],p]}))}function ht(o){return o.id}function ae(o,n){return o[n.id]=n,o}class M{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function U(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class Se extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Ge{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new Ge(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const tt={kind:"null"},Ve={kind:"number"},Tt={kind:"string"},zt={kind:"boolean"},hn={kind:"color"},En={kind:"object"},Rt={kind:"value"},Dr={kind:"collator"},fi={kind:"formatted"},tr={kind:"padding"},ke={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function ce(o,n){return{kind:"array",itemType:o,N:n}}function ge(o){if(o.kind==="array"){const n=ge(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Oe=[tt,Ve,Tt,zt,hn,fi,En,ce(Rt),tr,ke,ie];function De(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!De(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of Oe)if(!De(s,n))return null}}return`Expected ${ge(o)} but found ${ge(n)} instead.`}function Fe(o,n){return n.some(s=>s.kind===o.kind)}function Ue(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Le(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const Je=.96422,ft=.82521,lt=4/29,ut=6/29,en=3*ut*ut,tn=ut*ut*ut,pn=Math.PI/180,ln=180/Math.PI;function bn(o){return(o%=360)<0&&(o+=360),o}function Dn([o,n,s,h]){let p,v;const _=nr((.2225045*(o=Un(o))+.7168786*(n=Un(n))+.0606169*(s=Un(s)))/1);o===n&&n===s?p=v=_:(p=nr((.4360747*o+.3850649*n+.1430804*s)/Je),v=nr((.0139322*o+.0971045*n+.7141733*s)/ft));const w=116*_-16;return[w<0?0:w,500*(p-_),200*(_-v),h]}function Un(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function nr(o){return o>tn?Math.pow(o,1/3):o/en+lt}function fn([o,n,s,h]){let p=(o+16)/116,v=isNaN(n)?p:p+n/500,_=isNaN(s)?p:p-s/200;return p=1*_r(p),v=Je*_r(v),_=ft*_r(_),[Yn(3.1338561*v-1.6168667*p-.4906146*_),Yn(-.9787684*v+1.9161415*p+.033454*_),Yn(.0719453*v-.2289914*p+1.4052427*_),h]}function Yn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function _r(o){return o>ut?o*o*o:en*(o-lt)}function Wr(o){return parseInt(o.padEnd(2,o),16)/255}function Ii(o,n){return rr(n?o/100:o,0,1)}function rr(o,n,s){return Math.min(Math.max(n,o),s)}function Os(o){return!o.some(Number.isNaN)}const el={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Rn{constructor(n,s,h,p=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof Rn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=el[h];if(p){const[_,w,A]=p;return[_/255,w/255,A/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const _=h.length<6?1:2;let w=1;return[Wr(h.slice(w,w+=_)),Wr(h.slice(w,w+=_)),Wr(h.slice(w,w+=_)),Wr(h.slice(w,w+_)||"ff")]}if(h.startsWith("rgb")){const _=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[w,A,z,W,K,ne,le,me,Te,Me,Be,Qe]=_,We=[W||" ",le||" ",Me].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const Ye=[z,ne,Te].join(""),pt=Ye==="%%%"?100:Ye===""?255:0;if(pt){const gt=[rr(+A/pt,0,1),rr(+K/pt,0,1),rr(+me/pt,0,1),Be?Ii(+Be,Qe):1];if(Os(gt))return gt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,w,A,z,W,K,ne,le,me]=v,Te=[A||" ",W||" ",ne].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Me=[+w,rr(+z,0,100),rr(+K,0,100),le?Ii(+le,me):1];if(Os(Me))return function([Be,Qe,We,Ye]){function pt(gt){const Dt=(gt+Be/30)%12,Wt=Qe*Math.min(We,1-We);return We-Wt*Math.max(-1,Math.min(Dt-3,9-Dt,1))}return Be=bn(Be),Qe/=100,We/=100,[pt(0),pt(8),pt(4),Ye]}(Me)}}}(n);return s?new Rn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,p,v]=Dn(n),_=Math.sqrt(h*h+p*p);return[Math.round(1e4*_)?bn(Math.atan2(p,h)*ln):NaN,_,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Dn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${p})`}}Rn.black=new Rn(0,0,0,1),Rn.white=new Rn(1,1,1,1),Rn.transparent=new Rn(0,0,0,0),Rn.red=new Rn(1,0,0,1);class tl{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class In{constructor(n,s,h,p,v){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class xr{constructor(n){this.sections=n}static fromString(n){return new xr([new In(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof xr?n:xr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class di{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof di)return n;if(typeof n=="number")return new di([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new di(n)}}toString(){return JSON.stringify(this.values)}}const ac=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Zr)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],p=n[s+1];if(typeof h!="string"||!ac.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Zr(n)}}toString(){return JSON.stringify(this.values)}}class Ai{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ai({name:n,available:!1}):null}}function lc(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Br(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Rn||o instanceof tl||o instanceof xr||o instanceof di||o instanceof Zr||o instanceof Ai)return!0;if(Array.isArray(o)){for(const n of o)if(!Br(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Br(o[n]))return!1;return!0}return!1}function pr(o){if(o===null)return tt;if(typeof o=="string")return Tt;if(typeof o=="boolean")return zt;if(typeof o=="number")return Ve;if(o instanceof Rn)return hn;if(o instanceof tl)return Dr;if(o instanceof xr)return fi;if(o instanceof di)return tr;if(o instanceof Zr)return ie;if(o instanceof Ai)return ke;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=pr(h);if(s){if(s===p)continue;s=Rt;break}s=p}return ce(s||Rt,n)}return En}function da(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Rn||o instanceof xr||o instanceof di||o instanceof Zr||o instanceof Ai?o.toString():JSON.stringify(o)}class hs{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Br(n[1]))return s.error("invalid value");const h=n[1];let p=pr(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new hs(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ir{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const fs={string:Tt,number:Ve,boolean:zt,object:En};class wr{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let w,A;if(n.length>2){const z=n[1];if(typeof z!="string"||!(z in fs)||z==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);w=fs[z],p++}else w=Rt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);A=n[2],p++}h=ce(w,A)}else{if(!fs[v])throw new Error(`Types doesn't contain name = ${v}`);h=fs[v]}const _=[];for(;p<n.length;p++){const w=s.parse(n[p],p,Rt);if(!w)return null;_.push(w)}return new wr(h,_)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!De(this.type,pr(h)))return h;if(s===this.args.length-1)throw new ir(`Expected value to be of type ${ge(this.type)}, but found ${ge(pr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const nl={"to-boolean":zt,"to-color":hn,"to-number":Ve,"to-string":Tt};class ao{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!nl[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=nl[h],v=[];for(let _=1;_<n.length;_++){const w=s.parse(n[_],_,Rt);if(!w)return null;v.push(w)}return new ao(p,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof Rn)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:lc(s[0],s[1],s[2],s[3]),!h))return new Rn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ir(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const p=di.parse(s);if(p)return p}throw new ir(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const p=Zr.parse(s);if(p)return p}throw new ir(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new ir(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return xr.fromString(da(this.args[0].evaluate(n)));case"resolvedImage":return Ai.fromString(da(this.args[0].evaluate(n)));default:return da(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const su=["Unknown","Point","LineString","Polygon"];class Ls{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?su[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Rn.parse(n)),s}}class On{constructor(n,s,h=[],p,v=new Ge,_=[]){this.registry=n,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=_,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,v={}){return s?this.concat(s,h,p)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(p,v,_){return _==="assert"?new wr(v,[p]):_==="coerce"?new ao(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let _=v.parse(n,this);if(!_)return null;if(this.expectedType){const w=this.expectedType,A=_.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||A.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string")if(w.kind!=="padding"||A.kind!=="value"&&A.kind!=="number"&&A.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||A.kind!=="value"&&A.kind!=="array"){if(this.checkSubtype(w,A))return null}else _=h(_,w,s.typeAnnotation||"coerce");else _=h(_,w,s.typeAnnotation||"coerce");else _=h(_,w,s.typeAnnotation||"coerce");else _=h(_,w,s.typeAnnotation||"assert")}if(!(_ instanceof hs)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const w=new Ls;try{_=new hs(_.type,_.evaluate(w))}catch(A){return this.error(A.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new On(this.registry,this._isConstant,p,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Se(h,n))}checkSubtype(n,s){const h=De(n,s);return h&&this.error(h),h}}class ds{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const _=n[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=s.parse(n[v+1],v+1);if(!w)return null;h.push([_,w])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new ds(h,p):null}outputDefined(){return this.result.outputDefined()}}class js{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new js(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class au{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Ve),p=s.parse(n[2],2,ce(s.expectedType||Rt));return h&&p?new au(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new ir(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new ir(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new ir(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class ri{constructor(n,s){this.type=zt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Rt),p=s.parse(n[2],2,Rt);return h&&p?Fe(h.type,[zt,Tt,Ve,tt,Rt])?new ri(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ge(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ue(s,["boolean","string","number","null"]))throw new ir(`Expected first argument to be of type boolean, string, number or null, but found ${ge(pr(s))} instead.`);if(!Ue(h,["string","array"]))throw new ir(`Expected second argument to be of type array or string, but found ${ge(pr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class pa{constructor(n,s,h){this.type=Ve,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Rt),p=s.parse(n[2],2,Rt);if(!h||!p)return null;if(!Fe(h.type,[zt,Tt,Ve,tt,Rt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ge(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Ve);return v?new pa(h,p,v):null}return new pa(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ue(s,["boolean","string","number","null"]))throw new ir(`Expected first argument to be of type boolean, string, number or null, but found ${ge(pr(s))} instead.`);if(!Ue(h,["string","array"]))throw new ir(`Expected second argument to be of type array or string, but found ${ge(pr(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class lu{constructor(n,s,h,p,v,_){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=_}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},_=[];for(let z=2;z<n.length-1;z+=2){let W=n[z];const K=n[z+1];Array.isArray(W)||(W=[W]);const ne=s.concat(z);if(W.length===0)return ne.error("Expected at least one branch label.");for(const me of W){if(typeof me!="number"&&typeof me!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return ne.error("Numeric branch labels must be integer values.");if(h){if(ne.checkSubtype(h,pr(me)))return null}else h=pr(me);if(v[String(me)]!==void 0)return ne.error("Branch labels must be unique.");v[String(me)]=_.length}const le=s.parse(K,z,p);if(!le)return null;p=p||le.type,_.push(le)}const w=s.parse(n[1],1,Rt);if(!w)return null;const A=s.parse(n[n.length-1],n.length-1,p);return A?w.type.kind!=="value"&&s.concat(1).checkSubtype(h,w.type)?null:new lu(h,p,w,v,_,A):null}evaluate(n){const s=this.input.evaluate(n);return(pr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class rl{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let _=1;_<n.length-1;_+=2){const w=s.parse(n[_],_,zt);if(!w)return null;const A=s.parse(n[_+1],_+1,h);if(!A)return null;p.push([w,A]),h=h||A.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new rl(h,p,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class ma{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Rt),p=s.parse(n[2],2,Ve);if(!h||!p)return null;if(!Fe(h.type,[ce(Rt),Tt,Rt]))return s.error(`Expected first argument to be of type array or string, but found ${ge(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Ve);return v?new ma(h.type,h,p,v):null}return new ma(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Ue(s,["string","array"]))throw new ir(`Expected first argument to be of type array or string, but found ${ge(pr(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function il(o,n){const s=o.length-1;let h,p,v=0,_=s,w=0;for(;v<=_;)if(w=Math.floor((v+_)/2),h=o[w],p=o[w+1],h<=n){if(w===s||n<p)return w;v=w+1}else{if(!(h>n))throw new ir("Input is not a number.");_=w-1}return 0}class Ds{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Ve);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<n.length;_+=2){const w=_===1?-1/0:n[_],A=n[_+1],z=_,W=_+1;if(typeof w!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(p.length&&p[p.length-1][0]>=w)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const K=s.parse(A,W,v);if(!K)return null;v=v||K.type,p.push([w,K])}return new Ds(v,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(n):h[il(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function uu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var uc=Bs;function Bs(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}Bs.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var _=0,w=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?_=s:w=s,s=.5*(w-_)+_;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var cc=uu(uc);function Pi(o,n,s){return o+s*(n-o)}function ol(o,n,s){return o.map((h,p)=>Pi(h,n[p],s))}const Jr={number:Pi,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[p,v,_,w]=ol(o.rgb,n.rgb,s);return new Rn(p,v,_,w,!1)}case"hcl":{const[p,v,_,w]=o.hcl,[A,z,W,K]=n.hcl;let ne,le;if(isNaN(p)||isNaN(A))isNaN(p)?isNaN(A)?ne=NaN:(ne=A,_!==1&&_!==0||(le=z)):(ne=p,W!==1&&W!==0||(le=v));else{let Qe=A-p;A>p&&Qe>180?Qe-=360:A<p&&p-A>180&&(Qe+=360),ne=p+s*Qe}const[me,Te,Me,Be]=function([Qe,We,Ye,pt]){return Qe=isNaN(Qe)?0:Qe*pn,fn([Ye,Math.cos(Qe)*We,Math.sin(Qe)*We,pt])}([ne,le??Pi(v,z,s),Pi(_,W,s),Pi(w,K,s)]);return new Rn(me,Te,Me,Be,!1)}case"lab":{const[p,v,_,w]=fn(ol(o.lab,n.lab,s));return new Rn(p,v,_,w,!1)}}},array:ol,padding:function(o,n,s){return new di(ol(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,p=n.values;if(h.length!==p.length)throw new ir(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let _=0;_<h.length;_+=2){if(h[_]!==p[_])throw new ir(`Cannot interpolate values containing mismatched anchors. from[${_}]: ${h[_]}, to[${_}]: ${p[_]}`);v.push(h[_]);const[w,A]=h[_+1],[z,W]=p[_+1];v.push([Pi(w,z,s),Pi(A,W,s)])}return new Zr(v)}};class pi{constructor(n,s,h,p,v){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[_,w]of v)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(n,s,h,p){let v=0;if(n.name==="exponential")v=cu(s,n.base,h,p);else if(n.name==="linear")v=cu(s,1,h,p);else if(n.name==="cubic-bezier"){const _=n.controlPoints;v=new cc(_[0],_[1],_[2],_[3]).solve(cu(s,1,h,p))}return v}static parse(n,s){let[h,p,v,..._]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const z=p[1];if(typeof z!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:z}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const z=p.slice(1);if(z.length!==4||z.some(W=>typeof W!="number"||W<0||W>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:z}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,Ve),!v)return null;const w=[];let A=null;h==="interpolate-hcl"||h==="interpolate-lab"?A=hn:s.expectedType&&s.expectedType.kind!=="value"&&(A=s.expectedType);for(let z=0;z<_.length;z+=2){const W=_[z],K=_[z+1],ne=z+3,le=z+4;if(typeof W!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(w.length&&w[w.length-1][0]>=W)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const me=s.parse(K,le,A);if(!me)return null;A=A||me.type,w.push([W,me])}return Le(A,Ve)||Le(A,hn)||Le(A,tr)||Le(A,ie)||Le(A,ce(Ve))?new pi(A,h,p,v,w):s.error(`Type ${ge(A)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(n);const _=il(s,p),w=pi.interpolationFactor(this.interpolation,p,s[_],s[_+1]),A=h[_].evaluate(n),z=h[_+1].evaluate(n);switch(this.operator){case"interpolate":return Jr[this.type.kind](A,z,w);case"interpolate-hcl":return Jr.color(A,z,w,"hcl");case"interpolate-lab":return Jr.color(A,z,w,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function cu(o,n,s,h){const p=h-s,v=o-s;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class ga{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const w of n.slice(1)){const A=s.parse(w,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!A)return null;h=h||A.type,v.push(A)}if(!h)throw new Error("No output type");const _=p&&v.some(w=>De(p,w.type));return new ga(_?Rt:h,v)}evaluate(n){let s,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof Ai&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function hu(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function fu(o,n,s,h){return h.compare(n,s)===0}function Ns(o,n,s){const h=o!=="=="&&o!=="!=";return class $C{constructor(v,_,w){this.type=zt,this.lhs=v,this.rhs=_,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const w=v[0];let A=_.parse(v[1],1,Rt);if(!A)return null;if(!hu(w,A.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${ge(A.type)}'.`);let z=_.parse(v[2],2,Rt);if(!z)return null;if(!hu(w,z.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${ge(z.type)}'.`);if(A.type.kind!==z.type.kind&&A.type.kind!=="value"&&z.type.kind!=="value")return _.error(`Cannot compare types '${ge(A.type)}' and '${ge(z.type)}'.`);h&&(A.type.kind==="value"&&z.type.kind!=="value"?A=new wr(z.type,[A]):A.type.kind!=="value"&&z.type.kind==="value"&&(z=new wr(A.type,[z])));let W=null;if(v.length===4){if(A.type.kind!=="string"&&z.type.kind!=="string"&&A.type.kind!=="value"&&z.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(W=_.parse(v[3],3,Dr),!W)return null}return new $C(A,z,W)}evaluate(v){const _=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const A=pr(_),z=pr(w);if(A.kind!==z.kind||A.kind!=="string"&&A.kind!=="number")throw new ir(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${A.kind}, ${z.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const A=pr(_),z=pr(w);if(A.kind!=="string"||z.kind!=="string")return n(v,_,w)}return this.collator?s(v,_,w,this.collator.evaluate(v)):n(v,_,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const du=Ns("==",function(o,n,s){return n===s},fu),hc=Ns("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!fu(0,n,s,h)}),fc=Ns("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Bh=Ns(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Nh=Ns("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),dc=Ns(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class sl{constructor(n,s,h){this.type=Dr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,zt);if(!p)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,zt);if(!v)return null;let _=null;return h.locale&&(_=s.parse(h.locale,1,Tt),!_)?null:new sl(p,v,_)}evaluate(n){return new tl(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class al{constructor(n,s,h,p,v){this.type=Tt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Ve);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,Tt),!v))return null;let _=null;if(p.currency&&(_=s.parse(p.currency,1,Tt),!_))return null;let w=null;if(p["min-fraction-digits"]&&(w=s.parse(p["min-fraction-digits"],1,Ve),!w))return null;let A=null;return p["max-fraction-digits"]&&(A=s.parse(p["max-fraction-digits"],1,Ve),!A)?null:new al(h,v,_,w,A)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class ll{constructor(n){this.type=fi,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let _=1;_<=n.length-1;++_){const w=n[_];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let A=null;if(w["font-scale"]&&(A=s.parse(w["font-scale"],1,Ve),!A))return null;let z=null;if(w["text-font"]&&(z=s.parse(w["text-font"],1,ce(Tt)),!z))return null;let W=null;if(w["text-color"]&&(W=s.parse(w["text-color"],1,hn),!W))return null;const K=p[p.length-1];K.scale=A,K.font=z,K.textColor=W}else{const A=s.parse(n[_],1,Rt);if(!A)return null;const z=A.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:A,scale:null,font:null,textColor:null})}}return new ll(p)}evaluate(n){return new xr(this.sections.map(s=>{const h=s.content.evaluate(n);return pr(h)===ke?new In("",h,null,null,null):new In(da(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class pu{constructor(n){this.type=ke,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Tt);return h?new pu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Ai.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Us{constructor(n){this.type=Ve,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${ge(h.type)} instead.`):new Us(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new ir(`Expected value to be of type string or array, but found ${ge(pr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const mi=8192;function Ln(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*mi),Math.round(h*p*mi)]}function mu(o,n){const s=Math.pow(2,n.z);return[(p=(o[0]/mi+n.x)/s,360*p-180),(h=(o[1]/mi+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function ya(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function $s(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Uh(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-s[0],_=o[1]-s[1];return h*_-v*p==0&&h*v<=0&&p*_<=0}function Vs(o,n,s,h){return(p=[h[0]-s[0],h[1]-s[1]])[0]*(v=[n[0]-o[0],n[1]-o[1]])[1]-p[1]*v[0]!=0&&!(!mc(o,n,s,h)||!mc(s,h,o,n));var p,v}function $h(o,n,s){for(const h of s)for(let p=0;p<h.length-1;++p)if(Vs(o,n,h[p],h[p+1]))return!0;return!1}function Gs(o,n,s=!1){let h=!1;for(const w of n)for(let A=0;A<w.length-1;A++){if(Uh(o,w[A],w[A+1]))return s;(v=w[A])[1]>(p=o)[1]!=(_=w[A+1])[1]>p[1]&&p[0]<(_[0]-v[0])*(p[1]-v[1])/(_[1]-v[1])+v[0]&&(h=!h)}var p,v,_;return h}function Vh(o,n){for(const s of n)if(Gs(o,s))return!0;return!1}function pc(o,n){for(const s of o)if(!Gs(s,n))return!1;for(let s=0;s<o.length-1;++s)if($h(o[s],o[s+1],n))return!1;return!0}function Gh(o,n){for(const s of n)if(pc(o,s))return!0;return!1}function mc(o,n,s,h){const p=h[0]-s[0],v=h[1]-s[1],_=(o[0]-s[0])*v-p*(o[1]-s[1]),w=(n[0]-s[0])*v-p*(n[1]-s[1]);return _>0&&w<0||_<0&&w>0}function ul(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let _=0;_<o[p].length;_++){const w=Ln(o[p][_],s);ya(n,w),v.push(w)}h.push(v)}return h}function cl(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=ul(o[p],n,s);h.push(v)}return h}function gc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let v=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;v===0&&(v=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=v}ya(n,o)}function yc(o,n,s,h){const p=Math.pow(2,h.z)*mi,v=[h.x*mi,h.y*mi],_=[];for(const w of o)for(const A of w){const z=[A.x+v[0],A.y+v[1]];gc(z,n,s,p),_.push(z)}return _}function vc(o,n,s,h){const p=Math.pow(2,h.z)*mi,v=[h.x*mi,h.y*mi],_=[];for(const A of o){const z=[];for(const W of A){const K=[W.x+v[0],W.y+v[1]];ya(n,K),z.push(K)}_.push(z)}if(n[2]-n[0]<=p/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const A of _)for(const z of A)gc(z,n,s,p)}var w;return _}class ps{constructor(n,s){this.type=zt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Br(n[1])){const h=n[1];if(h.type==="FeatureCollection"){const p=[];for(const v of h.features){const{type:_,coordinates:w}=v.geometry;_==="Polygon"&&p.push(w),_==="MultiPolygon"&&p.push(...w)}if(p.length)return new ps(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new ps(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ps(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(h.type==="Polygon"){const w=ul(h.coordinates,v,_),A=yc(s.geometry(),p,v,_);if(!$s(p,v))return!1;for(const z of A)if(!Gs(z,w))return!1}if(h.type==="MultiPolygon"){const w=cl(h.coordinates,v,_),A=yc(s.geometry(),p,v,_);if(!$s(p,v))return!1;for(const z of A)if(!Vh(z,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(h.type==="Polygon"){const w=ul(h.coordinates,v,_),A=vc(s.geometry(),p,v,_);if(!$s(p,v))return!1;for(const z of A)if(!pc(z,w))return!1}if(h.type==="MultiPolygon"){const w=cl(h.coordinates,v,_),A=vc(s.geometry(),p,v,_);if(!$s(p,v))return!1;for(const z of A)if(!Gh(z,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let gu=class{constructor(o=[],n=Hh){if(this.data=o,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:n,compare:s}=this,h=n[o];for(;o>0;){const p=o-1>>1,v=n[p];if(s(h,v)>=0)break;n[o]=v,o=p}n[o]=h}_down(o){const{data:n,compare:s}=this,h=this.length>>1,p=n[o];for(;o<h;){let v=1+(o<<1),_=n[v];const w=v+1;if(w<this.length&&s(n[w],_)<0&&(v=w,_=n[w]),s(_,p)>=0)break;n[o]=_,o=v}n[o]=p}};function Hh(o,n){return o<n?-1:o>n?1:0}function Wh(o,n,s,h,p){_c(o,n,s,h||o.length-1,p||hl)}function _c(o,n,s,h,p){for(;h>s;){if(h-s>600){var v=h-s+1,_=n-s+1,w=Math.log(v),A=.5*Math.exp(2*w/3),z=.5*Math.sqrt(w*A*(v-A)/v)*(_-v/2<0?-1:1);_c(o,n,Math.max(s,Math.floor(n-_*A/v+z)),Math.min(h,Math.floor(n+(v-_)*A/v+z)),p)}var W=o[n],K=s,ne=h;for(va(o,s,n),p(o[h],W)>0&&va(o,s,h);K<ne;){for(va(o,K,ne),K++,ne--;p(o[K],W)<0;)K++;for(;p(o[ne],W)>0;)ne--}p(o[s],W)===0?va(o,s,ne):va(o,++ne,h),ne<=n&&(s=ne+1),n<=ne&&(h=ne-1)}}function va(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function hl(o,n){return o<n?-1:o>n?1:0}function fl(o,n){if(o.length<=1)return[o];const s=[];let h,p;for(const v of o){const _=xc(v);_!==0&&(v.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(h&&s.push(h),h=[v]):h.push(v))}if(h&&s.push(h),n>1)for(let v=0;v<s.length;v++)s[v].length<=n||(Wh(s[v],n,1,s[v].length-1,Hs),s[v]=s[v].slice(0,n));return s}function Hs(o,n){return n.area-o.area}function xc(o){let n=0;for(let s,h,p=0,v=o.length,_=v-1;p<v;_=p++)s=o[p],h=o[_],n+=(h.x-s.x)*(s.y+h.y);return n}const Vi=1/298.257223563,wc=Vi*(2-Vi),bc=Math.PI/180;class yu{constructor(n){const s=6378.137*bc*1e3,h=Math.cos(n*bc),p=1/(1-wc*(1-h*h)),v=Math.sqrt(p);this.kx=s*v*h,this.ky=s*v*p*(1-wc)}distance(n,s){const h=this.wrap(n[0]-s[0])*this.kx,p=(n[1]-s[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(n,s){let h,p,v,_,w=1/0;for(let A=0;A<n.length-1;A++){let z=n[A][0],W=n[A][1],K=this.wrap(n[A+1][0]-z)*this.kx,ne=(n[A+1][1]-W)*this.ky,le=0;K===0&&ne===0||(le=(this.wrap(s[0]-z)*this.kx*K+(s[1]-W)*this.ky*ne)/(K*K+ne*ne),le>1?(z=n[A+1][0],W=n[A+1][1]):le>0&&(z+=K/this.kx*le,W+=ne/this.ky*le)),K=this.wrap(s[0]-z)*this.kx,ne=(s[1]-W)*this.ky;const me=K*K+ne*ne;me<w&&(w=me,h=z,p=W,v=A,_=le)}return{point:[h,p],index:v,t:Math.max(0,Math.min(1,_))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Sc(o,n){return n[0]-o[0]}function Ho(o){return o[1]-o[0]+1}function Eo(o,n){return o[1]>=o[0]&&o[1]<n}function Ws(o,n){if(o[0]>o[1])return[null,null];const s=Ho(o);if(n){if(s===2)return[o,null];const p=Math.floor(s/2);return[[o[0],o[0]+p],[o[0]+p,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function vu(o,n){if(!Eo(n,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)ya(s,o[h]);return s}function _u(o){const n=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)ya(n,h);return n}function Xn(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function dl(o,n,s){if(!Xn(o)||!Xn(n))return NaN;let h=0,p=0;return o[2]<n[0]&&(h=n[0]-o[2]),o[0]>n[2]&&(h=o[0]-n[2]),o[1]>n[3]&&(p=o[1]-n[3]),o[3]<n[1]&&(p=n[1]-o[3]),s.distance([0,0],[h,p])}function xn(o,n,s){const h=s.pointOnLine(n,o);return s.distance(o,h.point)}function _a(o,n,s,h,p){const v=Math.min(xn(o,[s,h],p),xn(n,[s,h],p)),_=Math.min(xn(s,[o,n],p),xn(h,[o,n],p));return Math.min(v,_)}function Jn(o,n,s,h,p){if(!Eo(n,o.length)||!Eo(h,s.length))return 1/0;let v=1/0;for(let _=n[0];_<n[1];++_){const w=o[_],A=o[_+1];for(let z=h[0];z<h[1];++z){const W=s[z],K=s[z+1];if(Vs(w,A,W,K))return 0;v=Math.min(v,_a(w,A,W,K,p))}}return v}function $n(o,n,s,h,p){if(!Eo(n,o.length)||!Eo(h,s.length))return NaN;let v=1/0;for(let _=n[0];_<=n[1];++_)for(let w=h[0];w<=h[1];++w)if(v=Math.min(v,p.distance(o[_],s[w])),v===0)return v;return v}function lo(o,n,s){if(Gs(o,n,!0))return 0;let h=1/0;for(const p of n){const v=p[0],_=p[p.length-1];if(v!==_&&(h=Math.min(h,xn(o,[_,v],s)),h===0))return h;const w=s.pointOnLine(p,o);if(h=Math.min(h,s.distance(o,w.point)),h===0)return h}return h}function Ec(o,n,s,h){if(!Eo(n,o.length))return NaN;for(let v=n[0];v<=n[1];++v)if(Gs(o[v],s,!0))return 0;let p=1/0;for(let v=n[0];v<n[1];++v){const _=o[v],w=o[v+1];for(const A of s)for(let z=0,W=A.length,K=W-1;z<W;K=z++){const ne=A[K],le=A[z];if(Vs(_,w,ne,le))return 0;p=Math.min(p,_a(_,w,ne,le,h))}}return p}function xu(o,n){for(const s of o)for(const h of s)if(Gs(h,n,!0))return!0;return!1}function pl(o,n,s,h=1/0){const p=_u(o),v=_u(n);if(h!==1/0&&dl(p,v,s)>=h)return h;if($s(p,v)){if(xu(o,n))return 0}else if(xu(n,o))return 0;let _=1/0;for(const w of o)for(let A=0,z=w.length,W=z-1;A<z;W=A++){const K=w[W],ne=w[A];for(const le of n)for(let me=0,Te=le.length,Me=Te-1;me<Te;Me=me++){const Be=le[Me],Qe=le[me];if(Vs(K,ne,Be,Qe))return 0;_=Math.min(_,_a(K,ne,Be,Qe,s))}}return _}function Tc(o,n,s,h,p,v){if(!v)return;const _=dl(vu(h,v),p,s);_<n&&o.push([_,v,[0,0]])}function To(o,n,s,h,p,v,_){if(!v||!_)return;const w=dl(vu(h,v),vu(p,_),s);w<n&&o.push([w,v,_])}function uo(o,n,s,h,p=1/0){let v=Math.min(h.distance(o[0],s[0][0]),p);if(v===0)return v;const _=new gu([[0,[0,o.length-1],[0,0]]],Sc),w=_u(s);for(;_.length>0;){const A=_.pop();if(A[0]>=v)continue;const z=A[1],W=n?50:100;if(Ho(z)<=W){if(!Eo(z,o.length))return NaN;if(n){const K=Ec(o,z,s,h);if(isNaN(K)||K===0)return K;v=Math.min(v,K)}else for(let K=z[0];K<=z[1];++K){const ne=lo(o[K],s,h);if(v=Math.min(v,ne),v===0)return 0}}else{const K=Ws(z,n);Tc(_,v,h,o,w,K[0]),Tc(_,v,h,o,w,K[1])}}return v}function br(o,n,s,h,p,v=1/0){let _=Math.min(v,p.distance(o[0],s[0]));if(_===0)return _;const w=new gu([[0,[0,o.length-1],[0,s.length-1]]],Sc);for(;w.length>0;){const A=w.pop();if(A[0]>=_)continue;const z=A[1],W=A[2],K=n?50:100,ne=h?50:100;if(Ho(z)<=K&&Ho(W)<=ne){if(!Eo(z,o.length)&&Eo(W,s.length))return NaN;let le;if(n&&h)le=Jn(o,z,s,W,p),_=Math.min(_,le);else if(n&&!h){const me=o.slice(z[0],z[1]+1);for(let Te=W[0];Te<=W[1];++Te)if(le=xn(s[Te],me,p),_=Math.min(_,le),_===0)return _}else if(!n&&h){const me=s.slice(W[0],W[1]+1);for(let Te=z[0];Te<=z[1];++Te)if(le=xn(o[Te],me,p),_=Math.min(_,le),_===0)return _}else le=$n(o,z,s,W,p),_=Math.min(_,le)}else{const le=Ws(z,n),me=Ws(W,h);To(w,_,p,o,s,le[0],me[0]),To(w,_,p,o,s,le[0],me[1]),To(w,_,p,o,s,le[1],me[0]),To(w,_,p,o,s,le[1],me[1])}}return _}function co(o){return o.type==="MultiPolygon"?o.coordinates.map(n=>({type:"Polygon",coordinates:n})):o.type==="MultiLineString"?o.coordinates.map(n=>({type:"LineString",coordinates:n})):o.type==="MultiPoint"?o.coordinates.map(n=>({type:"Point",coordinates:n})):[o]}class ho{constructor(n,s){this.type=Ve,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Br(n[1])){const h=n[1];if(h.type==="FeatureCollection")return new ho(h,h.features.map(p=>co(p.geometry)).flat());if(h.type==="Feature")return new ho(h,co(h.geometry));if("type"in h&&"coordinates"in h)return new ho(h,co(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=s.geometry(),v=p.flat().map(A=>mu([A.x,A.y],s.canonical));if(p.length===0)return NaN;const _=new yu(v[0][1]);let w=1/0;for(const A of h){switch(A.type){case"Point":w=Math.min(w,br(v,!1,[A.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,br(v,!1,A.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,uo(v,!1,A.coordinates,_,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=s.geometry(),v=p.flat().map(A=>mu([A.x,A.y],s.canonical));if(p.length===0)return NaN;const _=new yu(v[0][1]);let w=1/0;for(const A of h){switch(A.type){case"Point":w=Math.min(w,br(v,!0,[A.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,br(v,!0,A.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,uo(v,!0,A.coordinates,_,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,h){const p=s.geometry();if(p.length===0||p[0].length===0)return NaN;const v=fl(p,0).map(A=>A.map(z=>z.map(W=>mu([W.x,W.y],s.canonical)))),_=new yu(v[0][0][0][1]);let w=1/0;for(const A of h)for(const z of v){switch(A.type){case"Point":w=Math.min(w,uo([A.coordinates],!1,z,_,w));break;case"LineString":w=Math.min(w,uo(A.coordinates,!0,z,_,w));break;case"Polygon":w=Math.min(w,pl(z,A.coordinates,_,w))}if(w===0)return w}return w}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const fo={"==":du,"!=":hc,">":Bh,"<":fc,">=":dc,"<=":Nh,array:wr,at:au,boolean:wr,case:rl,coalesce:ga,collator:sl,format:ll,image:pu,in:ri,"index-of":pa,interpolate:pi,"interpolate-hcl":pi,"interpolate-lab":pi,length:Us,let:ds,literal:hs,match:lu,number:wr,"number-format":al,object:wr,slice:ma,step:Ds,string:wr,"to-boolean":ao,"to-color":ao,"to-number":ao,"to-string":ao,var:js,within:ps,distance:ho};class ki{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],p=ki.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=_.filter(([z])=>!Array.isArray(z)||z.length===n.length-1);let A=null;for(const[z,W]of w){A=new On(s.registry,ba,s.path,null,s.scope);const K=[];let ne=!1;for(let le=1;le<n.length;le++){const me=n[le],Te=Array.isArray(z)?z[le-1]:z.type,Me=A.parse(me,1+K.length,Te);if(!Me){ne=!0;break}K.push(Me)}if(!ne)if(Array.isArray(z)&&z.length!==K.length)A.error(`Expected ${z.length} arguments, but found ${K.length} instead.`);else{for(let le=0;le<K.length;le++){const me=Array.isArray(z)?z[le]:z.type,Te=K[le];A.concat(le+1).checkSubtype(me,Te.type)}if(A.errors.length===0)return new ki(h,v,W,K)}}if(w.length===1)s.errors.push(...A.errors);else{const z=(w.length?w:_).map(([K])=>{return ne=K,Array.isArray(ne)?`(${ne.map(ge).join(", ")})`:`(${ge(ne.type)}...)`;var ne}).join(" | "),W=[];for(let K=1;K<n.length;K++){const ne=s.parse(n[K],1+W.length);if(!ne)return null;W.push(ge(ne.type))}s.error(`Expected arguments of type ${z}, but found (${W.join(", ")}) instead.`)}return null}static register(n,s){ki.definitions=s;for(const h in s)n[h]=ki}}function xa(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,_=lc(n,s,h,v);if(_)throw new ir(_);return new Rn(n/255,s/255,h/255,v,!1)}function wa(o,n){return o in n}function gi(o,n){const s=n[o];return s===void 0?null:s}function Mi(o){return{type:o}}function ba(o){if(o instanceof js)return ba(o.boundExpression);if(o instanceof ki&&o.name==="error"||o instanceof sl||o instanceof ps||o instanceof ho)return!1;const n=o instanceof ao||o instanceof wr;let s=!0;return o.eachChild(h=>{s=n?s&&ba(h):s&&h instanceof hs}),!!s&&ms(o)&&Zs(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ms(o){if(o instanceof ki&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ps||o instanceof ho)return!1;let n=!0;return o.eachChild(s=>{n&&!ms(s)&&(n=!1)}),n}function Wo(o){if(o instanceof ki&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!Wo(s)&&(n=!1)}),n}function Zs(o,n){if(o instanceof ki&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!Zs(h,n)&&(s=!1)}),s}function ml(o){return{result:"success",value:o}}function po(o){return{result:"error",value:o}}function gs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function mo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function gl(o){return!!o.expression&&o.expression.interpolated}function Mn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Zo(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function qs(o){return o}function yl(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(gl(n)?"exponential":"interval");if(s||n.type==="padding"){const W=s?Rn.parse:di.parse;(o=U({},o)).stops&&(o.stops=o.stops.map(K=>[K[0],W(K[1])])),o.default=W(o.default?o.default:n.default)}if(o.colorSpace&&(_=o.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var _;let w,A,z;if(v==="exponential")w=ye;else if(v==="interval")w=G;else if(v==="categorical"){w=wu,A=Object.create(null);for(const W of o.stops)A[W[0]]=W[1];z=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=$e}if(h){const W={},K=[];for(let me=0;me<o.stops.length;me++){const Te=o.stops[me],Me=Te[0].zoom;W[Me]===void 0&&(W[Me]={zoom:Me,type:o.type,property:o.property,default:o.default,stops:[]},K.push(Me)),W[Me].stops.push([Te[0].value,Te[1]])}const ne=[];for(const me of K)ne.push([W[me].zoom,yl(W[me],n)]);const le={name:"linear"};return{kind:"composite",interpolationType:le,interpolationFactor:pi.interpolationFactor.bind(void 0,le),zoomStops:ne.map(me=>me[0]),evaluate:({zoom:me},Te)=>ye({stops:ne,base:o.base},n,me).evaluate(me,Te)}}if(p){const W=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:pi.interpolationFactor.bind(void 0,W),zoomStops:o.stops.map(K=>K[0]),evaluate:({zoom:K})=>w(o,n,K,A,z)}}return{kind:"source",evaluate(W,K){const ne=K&&K.properties?K.properties[o.property]:void 0;return ne===void 0?qo(o.default,n.default):w(o,n,ne,A,z)}}}function qo(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function wu(o,n,s,h,p){return qo(typeof s===p?h[s]:void 0,o.default,n.default)}function G(o,n,s){if(Mn(s)!=="number")return qo(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=il(o.stops.map(v=>v[0]),s);return o.stops[p][1]}function ye(o,n,s){const h=o.base!==void 0?o.base:1;if(Mn(s)!=="number")return qo(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=il(o.stops.map(W=>W[0]),s),_=function(W,K,ne,le){const me=le-ne,Te=W-ne;return me===0?0:K===1?Te/me:(Math.pow(K,Te)-1)/(Math.pow(K,me)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),w=o.stops[v][1],A=o.stops[v+1][1],z=Jr[n.type]||qs;return typeof w.evaluate=="function"?{evaluate(...W){const K=w.evaluate.apply(void 0,W),ne=A.evaluate.apply(void 0,W);if(K!==void 0&&ne!==void 0)return z(K,ne,_,o.colorSpace)}}:z(w,A,_,o.colorSpace)}function $e(o,n,s){switch(n.type){case"color":s=Rn.parse(s);break;case"formatted":s=xr.fromString(s.toString());break;case"resolvedImage":s=Ai.fromString(s.toString());break;case"padding":s=di.parse(s);break;default:Mn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return qo(s,o.default,n.default)}ki.register(fo,{error:[{kind:"error"},[Tt],(o,[n])=>{throw new ir(n.evaluate(o))}],typeof:[Tt,[Rt],(o,[n])=>ge(pr(n.evaluate(o)))],"to-rgba":[ce(Ve,4),[hn],(o,[n])=>{const[s,h,p,v]=n.evaluate(o).rgb;return[255*s,255*h,255*p,v]}],rgb:[hn,[Ve,Ve,Ve],xa],rgba:[hn,[Ve,Ve,Ve,Ve],xa],has:{type:zt,overloads:[[[Tt],(o,[n])=>wa(n.evaluate(o),o.properties())],[[Tt,En],(o,[n,s])=>wa(n.evaluate(o),s.evaluate(o))]]},get:{type:Rt,overloads:[[[Tt],(o,[n])=>gi(n.evaluate(o),o.properties())],[[Tt,En],(o,[n,s])=>gi(n.evaluate(o),s.evaluate(o))]]},"feature-state":[Rt,[Tt],(o,[n])=>gi(n.evaluate(o),o.featureState||{})],properties:[En,[],o=>o.properties()],"geometry-type":[Tt,[],o=>o.geometryType()],id:[Rt,[],o=>o.id()],zoom:[Ve,[],o=>o.globals.zoom],"heatmap-density":[Ve,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ve,[],o=>o.globals.lineProgress||0],accumulated:[Rt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ve,Mi(Ve),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[Ve,Mi(Ve),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:Ve,overloads:[[[Ve,Ve],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[Ve],(o,[n])=>-n.evaluate(o)]]},"/":[Ve,[Ve,Ve],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[Ve,[Ve,Ve],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[Ve,[],()=>Math.LN2],pi:[Ve,[],()=>Math.PI],e:[Ve,[],()=>Math.E],"^":[Ve,[Ve,Ve],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[Ve,[Ve],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Ve,[Ve],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Ve,[Ve],(o,[n])=>Math.log(n.evaluate(o))],log2:[Ve,[Ve],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Ve,[Ve],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Ve,[Ve],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Ve,[Ve],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Ve,[Ve],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Ve,[Ve],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Ve,[Ve],(o,[n])=>Math.atan(n.evaluate(o))],min:[Ve,Mi(Ve),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[Ve,Mi(Ve),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[Ve,[Ve],(o,[n])=>Math.abs(n.evaluate(o))],round:[Ve,[Ve],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ve,[Ve],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Ve,[Ve],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[zt,[Tt,Rt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[zt,[Rt],(o,[n])=>o.id()===n.value],"filter-type-==":[zt,[Tt],(o,[n])=>o.geometryType()===n.value],"filter-<":[zt,[Tt,Rt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[zt,[Rt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[zt,[Tt,Rt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[zt,[Rt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[zt,[Tt,Rt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[zt,[Rt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[zt,[Tt,Rt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[zt,[Rt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[zt,[Rt],(o,[n])=>n.value in o.properties()],"filter-has-id":[zt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[zt,[ce(Tt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[zt,[ce(Rt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[zt,[Tt,ce(Rt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[zt,[Tt,ce(Rt)],(o,[n,s])=>function(h,p,v,_){for(;v<=_;){const w=v+_>>1;if(p[w]===h)return!0;p[w]>h?_=w-1:v=w+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:zt,overloads:[[[zt,zt],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Mi(zt),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:zt,overloads:[[[zt,zt],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Mi(zt),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[zt,[zt],(o,[n])=>!n.evaluate(o)],"is-supported-script":[zt,[Tt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Tt,[Tt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Tt,[Tt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Tt,Mi(Rt),(o,n)=>n.map(s=>da(s.evaluate(o))).join("")],"resolved-locale":[Tt,[Dr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class at{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Ls,this._defaultValue=s?(h=s).type==="color"&&Zo(h.default)?new Rn(0,0,0,0):h.type==="color"?Rn.parse(h.default)||null:h.type==="padding"?di.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Zr.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,v,_){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,v,_){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new ir(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Mt(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in fo}function Ct(o,n){const s=new On(fo,ba,[],n?function(p){const v={color:hn,string:Tt,number:Ve,enum:Tt,boolean:zt,formatted:fi,padding:tr,resolvedImage:ke,variableAnchorOffsetCollection:ie};return p.type==="array"?ce(v[p.value]||Rt,p.length):v[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?ml(new at(h,n)):po(s.errors)}class Zt{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Wo(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,_)}evaluate(n,s,h,p,v,_){return this._styleExpression.evaluate(n,s,h,p,v,_)}}class qt{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Wo(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,_)}evaluate(n,s,h,p,v,_){return this._styleExpression.evaluate(n,s,h,p,v,_)}interpolationFactor(n,s,h){return this.interpolationType?pi.interpolationFactor(this.interpolationType,n,s,h):0}}function mn(o,n){const s=Ct(o,n);if(s.result==="error")return s;const h=s.value.expression,p=ms(h);if(!p&&!gs(n))return po([new Se("","data expressions not supported")]);const v=Zs(h,["zoom"]);if(!v&&!mo(n))return po([new Se("","zoom expressions not supported")]);const _=Pn(h);return _||v?_ instanceof Se?po([_]):_ instanceof pi&&!gl(n)?po([new Se("",'"interpolate" expressions cannot be used with this property')]):ml(_?new qt(p?"camera":"composite",s.value,_.labels,_ instanceof pi?_.interpolation:void 0):new Zt(p?"constant":"source",s.value)):po([new Se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Sn{constructor(n,s){this._parameters=n,this._specification=s,U(this,yl(this._parameters,this._specification))}static deserialize(n){return new Sn(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Pn(o){let n=null;if(o instanceof ds)n=Pn(o.result);else if(o instanceof ga){for(const s of o.args)if(n=Pn(s),n)break}else(o instanceof Ds||o instanceof pi)&&o.input instanceof ki&&o.input.name==="zoom"&&(n=o);return n instanceof Se||o.eachChild(s=>{const h=Pn(s);h instanceof Se?n=h:!n&&h?n=new Se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Se("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Zn(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Zn(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const ar={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Zn(o)||(o=ii(o));const n=Ct(o,ar);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:go(o)}}function lr(o,n){return o<n?-1:o>n?1:0}function go(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let n=1;n<o.length;n++)if(go(o[n]))return!0;return!1}function ii(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Co(o[1],o[2],"=="):n==="!="?Gi(Co(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Co(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(ii))):n==="all"?["all"].concat(o.slice(1).map(ii)):n==="none"?["all"].concat(o.slice(1).map(ii).map(Gi)):n==="in"?Sa(o[1],o.slice(2)):n==="!in"?Gi(Sa(o[1],o.slice(2))):n==="has"?Ea(o[1]):n!=="!has"||Gi(Ea(o[1]));var s}function Co(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Sa(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(lr)]]:["filter-in-small",o,["literal",n]]}}function Ea(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Gi(o){return["!",o]}function Zh(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${Zh(v)},`;return`${p}]`}const s=Object.keys(o).sort();let h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${Zh(o[s[p]])},`;return`${h}}`}function qh(o){let n="";for(const s of wn)n+=`/${Zh(o[s])}`;return n}function Xh(o){const n=o.value;return n?[new M(o.key,n,"constants have been deprecated as of v8")]:[]}function or(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Xs(o){if(Array.isArray(o))return o.map(Xs);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Xs(o[s]);return n}return or(o)}function Hi(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,_=o.styleSpec,w=o.validateSpec;let A=[];const z=Mn(s);if(z!=="object")return[new M(n,s,`object expected, ${z} found`)];for(const W in s){const K=W.split(".")[0],ne=h[K]||h["*"];let le;if(p[K])le=p[K];else if(h[K])le=w;else if(p["*"])le=p["*"];else{if(!h["*"]){A.push(new M(n,s[W],`unknown property "${W}"`));continue}le=w}A=A.concat(le({key:(n&&`${n}.`)+W,value:s[W],valueSpec:ne,style:v,styleSpec:_,object:s,objectKey:W,validateSpec:w},s))}for(const W in h)p[W]||h[W].required&&h[W].default===void 0&&s[W]===void 0&&A.push(new M(n,s,`missing required property "${W}"`));return A}function Kh(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,_=o.arrayElementValidator||o.validateSpec;if(Mn(n)!=="array")return[new M(v,n,`array expected, ${Mn(n)} found`)];if(s.length&&n.length!==s.length)return[new M(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new M(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let w={type:s.value,values:s.values};p.$version<7&&(w.function=s.function),Mn(s.value)==="object"&&(w=s.value);let A=[];for(let z=0;z<n.length;z++)A=A.concat(_({array:n,arrayIndex:z,value:n[z],valueSpec:w,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${v}[${z}]`}));return A}function bu(o){const n=o.key,s=o.value,h=o.valueSpec;let p=Mn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new M(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new M(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new M(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Su(o){const n=o.valueSpec,s=or(o.value.type);let h,p,v,_={};const w=s!=="categorical"&&o.value.property===void 0,A=!w,z=Mn(o.value.stops)==="array"&&Mn(o.value.stops[0])==="array"&&Mn(o.value.stops[0][0])==="object",W=Hi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(le){if(s==="identity")return[new M(le.key,le.value,'identity function may not have a "stops" property')];let me=[];const Te=le.value;return me=me.concat(Kh({key:le.key,value:Te,valueSpec:le.valueSpec,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,arrayElementValidator:K})),Mn(Te)==="array"&&Te.length===0&&me.push(new M(le.key,Te,"array must have at least one stop")),me},default:function(le){return le.validateSpec({key:le.key,value:le.value,valueSpec:n,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec})}}});return s==="identity"&&w&&W.push(new M(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||W.push(new M(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!gl(o.valueSpec)&&W.push(new M(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(A&&!gs(o.valueSpec)?W.push(new M(o.key,o.value,"property functions not supported")):w&&!mo(o.valueSpec)&&W.push(new M(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!z||o.value.property!==void 0||W.push(new M(o.key,o.value,'"property" property is required')),W;function K(le){let me=[];const Te=le.value,Me=le.key;if(Mn(Te)!=="array")return[new M(Me,Te,`array expected, ${Mn(Te)} found`)];if(Te.length!==2)return[new M(Me,Te,`array length 2 expected, length ${Te.length} found`)];if(z){if(Mn(Te[0])!=="object")return[new M(Me,Te,`object expected, ${Mn(Te[0])} found`)];if(Te[0].zoom===void 0)return[new M(Me,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new M(Me,Te,"object stop key must have value")];if(v&&v>or(Te[0].zoom))return[new M(Me,Te[0].zoom,"stop zoom values must appear in ascending order")];or(Te[0].zoom)!==v&&(v=or(Te[0].zoom),p=void 0,_={}),me=me.concat(Hi({key:`${Me}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,objectElementValidators:{zoom:bu,value:ne}}))}else me=me.concat(ne({key:`${Me}[0]`,value:Te[0],valueSpec:{},validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec},Te));return Mt(Xs(Te[1]))?me.concat([new M(`${Me}[1]`,Te[1],"expressions are not allowed in function stops.")]):me.concat(le.validateSpec({key:`${Me}[1]`,value:Te[1],valueSpec:n,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec}))}function ne(le,me){const Te=Mn(le.value),Me=or(le.value),Be=le.value!==null?le.value:me;if(h){if(Te!==h)return[new M(le.key,Be,`${Te} stop domain type must match previous stop domain type ${h}`)]}else h=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new M(le.key,Be,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&s!=="categorical"){let Qe=`number expected, ${Te} found`;return gs(n)&&s===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new M(le.key,Be,Qe)]}return s!=="categorical"||Te!=="number"||isFinite(Me)&&Math.floor(Me)===Me?s!=="categorical"&&Te==="number"&&p!==void 0&&Me<p?[new M(le.key,Be,"stop domain values must appear in ascending order")]:(p=Me,s==="categorical"&&Me in _?[new M(le.key,Be,"stop domain values must be unique")]:(_[Me]=!0,[])):[new M(le.key,Be,`integer expected, found ${Me}`)]}}function Ta(o){const n=(o.expressionContext==="property"?mn:Ct)(Xs(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new M(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new M(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Wo(s))return[new M(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Wo(s))return[new M(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Zs(s,["zoom","feature-state"]))return[new M(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ms(s))return[new M(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vl(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(or(s))===-1&&p.push(new M(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(or(s))===-1&&p.push(new M(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Cc(o){return Zn(Xs(o.value))?Ta(U({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Yh(o)}function Yh(o){const n=o.value,s=o.key;if(Mn(n)!=="array")return[new M(s,n,`array expected, ${Mn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new M(s,n,"filter array must have at least 1 element")];switch(v=v.concat(vl({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),or(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&or(n[1])==="$type"&&v.push(new M(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new M(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Mn(n[1]),p!=="string"&&v.push(new M(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let _=2;_<n.length;_++)p=Mn(n[_]),or(n[1])==="$type"?v=v.concat(vl({key:`${s}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new M(`${s}[${_}]`,n[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)v=v.concat(Yh({key:`${s}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Mn(n[1]),n.length!==2?v.push(new M(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new M(`${s}[1]`,n[1],`string expected, ${p} found`))}return v}function Ic(o,n){const s=o.key,h=o.validateSpec,p=o.style,v=o.styleSpec,_=o.value,w=o.objectKey,A=v[`${n}_${o.layerType}`];if(!A)return[];const z=w.match(/^(.*)-transition$/);if(n==="paint"&&z&&A[z[1]]&&A[z[1]].transition)return h({key:s,value:_,valueSpec:v.transition,style:p,styleSpec:v});const W=o.valueSpec||A[w];if(!W)return[new M(s,_,`unknown property "${w}"`)];let K;if(Mn(_)==="string"&&gs(W)&&!W.tokens&&(K=/^{([^}]+)}$/.exec(_)))return[new M(s,_,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(K[1])} }\`.`)];const ne=[];return o.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&ne.push(new M(s,_,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Zo(Xs(_))&&or(_.type)==="identity"&&ne.push(new M(s,_,'"text-font" does not support identity functions'))),ne.concat(h({key:o.key,value:_,valueSpec:W,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:w}))}function Jh(o){return Ic(o,"paint")}function op(o){return Ic(o,"layout")}function Qh(o){let n=[];const s=o.value,h=o.key,p=o.style,v=o.styleSpec;s.type||s.ref||n.push(new M(h,s,'either "type" or "ref" is required'));let _=or(s.type);const w=or(s.ref);if(s.id){const A=or(s.id);for(let z=0;z<o.arrayIndex;z++){const W=p.layers[z];or(W.id)===A&&n.push(new M(h,s.id,`duplicate layer id "${s.id}", previously used at line ${W.id.__line__}`))}}if("ref"in s){let A;["type","source","source-layer","filter","layout"].forEach(z=>{z in s&&n.push(new M(h,s[z],`"${z}" is prohibited for ref layers`))}),p.layers.forEach(z=>{or(z.id)===w&&(A=z)}),A?A.ref?n.push(new M(h,s.ref,"ref cannot reference another ref layer")):_=or(A.type):n.push(new M(h,s.ref,`ref layer "${w}" not found`))}else if(_!=="background")if(s.source){const A=p.sources&&p.sources[s.source],z=A&&or(A.type);A?z==="vector"&&_==="raster"?n.push(new M(h,s.source,`layer "${s.id}" requires a raster source`)):z!=="raster-dem"&&_==="hillshade"?n.push(new M(h,s.source,`layer "${s.id}" requires a raster-dem source`)):z==="raster"&&_!=="raster"?n.push(new M(h,s.source,`layer "${s.id}" requires a vector source`)):z!=="vector"||s["source-layer"]?z==="raster-dem"&&_!=="hillshade"?n.push(new M(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||z==="geojson"&&A.lineMetrics||n.push(new M(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new M(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new M(h,s.source,`source "${s.source}" not found`))}else n.push(new M(h,s,'missing required property "source"'));return n=n.concat(Hi({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Cc,layout:A=>Hi({layer:s,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":z=>op(U({layerType:_},z))}}),paint:A=>Hi({layer:s,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":z=>Jh(U({layerType:_},z))}})}})),n}function Ca(o){const n=o.value,s=o.key,h=Mn(n);return h!=="string"?[new M(s,n,`string expected, ${h} found`)]:[]}const ef={promoteId:function({key:o,value:n}){if(Mn(n)==="string")return Ca({key:o,value:n});{const s=[];for(const h in n)s.push(...Ca({key:`${o}.${h}`,value:n[h]}));return s}}};function tf(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style,v=o.validateSpec;if(!n.type)return[new M(s,n,'"type" is required')];const _=or(n.type);let w;switch(_){case"vector":case"raster":return w=Hi({key:s,value:n,valueSpec:h[`source_${_.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:ef,validateSpec:v}),w;case"raster-dem":return w=function(A){var z;const W=(z=A.sourceName)!==null&&z!==void 0?z:"",K=A.value,ne=A.styleSpec,le=ne.source_raster_dem,me=A.style;let Te=[];const Me=Mn(K);if(K===void 0)return Te;if(Me!=="object")return Te.push(new M("source_raster_dem",K,`object expected, ${Me} found`)),Te;const Be=or(K.encoding)==="custom",Qe=["redFactor","greenFactor","blueFactor","baseShift"],We=A.value.encoding?`"${A.value.encoding}"`:"Default";for(const Ye in K)!Be&&Qe.includes(Ye)?Te.push(new M(Ye,K[Ye],`In "${W}": "${Ye}" is only valid when "encoding" is set to "custom". ${We} encoding found`)):le[Ye]?Te=Te.concat(A.validateSpec({key:Ye,value:K[Ye],valueSpec:le[Ye],validateSpec:A.validateSpec,style:me,styleSpec:ne})):Te.push(new M(Ye,K[Ye],`unknown property "${Ye}"`));return Te}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:v}),w;case"geojson":if(w=Hi({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:ef}),n.cluster)for(const A in n.clusterProperties){const[z,W]=n.clusterProperties[A],K=typeof z=="string"?[z,["accumulated"],["get",A]]:z;w.push(...Ta({key:`${s}.${A}.map`,value:W,validateSpec:v,expressionContext:"cluster-map"})),w.push(...Ta({key:`${s}.${A}.reduce`,value:K,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return Hi({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return Hi({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new M(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vl({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:h})}}function nf(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let v=[];const _=Mn(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new M("light",n,`object expected, ${_} found`)]),v;for(const w in n){const A=w.match(/^(.*)-transition$/);v=v.concat(A&&h[A[1]]&&h[A[1]].transition?o.validateSpec({key:w,value:n[w],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new M(w,n[w],`unknown property "${w}"`)])}return v}function sp(o){const n=o.value,s=o.styleSpec,h=s.sky,p=o.style,v=Mn(n);if(n===void 0)return[];if(v!=="object")return[new M("sky",n,`object expected, ${v} found`)];let _=[];for(const w in n)_=_.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],style:p,styleSpec:s}):[new M(w,n[w],`unknown property "${w}"`)]);return _}function ap(o){const n=o.value,s=o.styleSpec,h=s.terrain,p=o.style;let v=[];const _=Mn(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new M("terrain",n,`object expected, ${_} found`)]),v;for(const w in n)v=v.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new M(w,n[w],`unknown property "${w}"`)]);return v}function rf(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const p=[],v=[];for(const _ in s)s[_].id&&p.includes(s[_].id)&&n.push(new M(h,s,`all the sprites' ids must be unique, but ${s[_].id} is duplicated`)),p.push(s[_].id),s[_].url&&v.includes(s[_].url)&&n.push(new M(h,s,`all the sprites' URLs must be unique, but ${s[_].url} is duplicated`)),v.push(s[_].url),n=n.concat(Hi({key:`${h}[${_}]`,value:s[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return Ca({key:h,value:s})}const of={"*":()=>[],array:Kh,boolean:function(o){const n=o.value,s=o.key,h=Mn(n);return h!=="boolean"?[new M(s,n,`boolean expected, ${h} found`)]:[]},number:bu,color:function(o){const n=o.key,s=o.value,h=Mn(s);return h!=="string"?[new M(n,s,`color expected, ${h} found`)]:Rn.parse(String(s))?[]:[new M(n,s,`color expected, "${s}" found`)]},constants:Xh,enum:vl,filter:Cc,function:Su,layer:Qh,object:Hi,source:tf,light:nf,sky:sp,terrain:ap,string:Ca,formatted:function(o){return Ca(o).length===0?[]:Ta(o)},resolvedImage:function(o){return Ca(o).length===0?[]:Ta(o)},padding:function(o){const n=o.key,s=o.value;if(Mn(s)==="array"){if(s.length<1||s.length>4)return[new M(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return p}return bu({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=Mn(s),p=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new M(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<s.length;_+=2)v=v.concat(vl({key:`${n}[${_}]`,value:s[_],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Kh({key:`${n}[${_+1}]`,value:s[_+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:rf};function _l(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=_l,s.expression&&Zo(or(n))?Su(o):s.expression&&Mt(Xs(n))?Ta(o):s.type&&of[s.type]?of[s.type](o):Hi(U({},o,{valueSpec:s.type?h[s.type]:s}))}function sf(o){const n=o.value,s=o.key,h=Ca(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new M(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new M(s,n,'"glyphs" url must include a "{range}" token'))),h}function zi(o,n=nt){let s=[];return s=s.concat(_l({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:_l,objectElementValidators:{glyphs:sf,"*":()=>[]}})),o.constants&&(s=s.concat(Xh({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:_l}))),Ac(s)}function Xo(o){return function(n){return o({...n,validateSpec:_l})}}function Ac(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function Ko(o){return function(...n){return Ac(o.apply(this,n))}}zi.source=Ko(Xo(tf)),zi.sprite=Ko(Xo(rf)),zi.glyphs=Ko(Xo(sf)),zi.light=Ko(Xo(nf)),zi.sky=Ko(Xo(sp)),zi.terrain=Ko(Xo(ap)),zi.layer=Ko(Xo(Qh)),zi.filter=Ko(Xo(Cc)),zi.paintProperty=Ko(Xo(Jh)),zi.layoutProperty=Ko(Xo(op));const Eu=zi,lp=Eu.light,up=Eu.paintProperty,cp=Eu.layoutProperty;function hp(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new Lt(new Error(h.message))),s=!0;return s}class Tu{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(s=_[1])+2*(h=_[2]);for(let A=0;A<this.d*this.d;A++){const z=_[3+A],W=_[3+A+1];p.push(z===W?null:_.subarray(z,W))}const w=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],w),this.bboxes=_.subarray(w),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,p,v){this._forEachCell(s,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,v,_){this.cells[v].push(_)}query(n,s,h,p,v){const _=this.min,w=this.max;if(n<=_&&s<=_&&w<=h&&w<=p&&!v)return Array.prototype.slice.call(this.keys);{const A=[];return this._forEachCell(n,s,h,p,this._queryCell,A,{},v),A}}_queryCell(n,s,h,p,v,_,w,A){const z=this.cells[v];if(z!==null){const W=this.keys,K=this.bboxes;for(let ne=0;ne<z.length;ne++){const le=z[ne];if(w[le]===void 0){const me=4*le;(A?A(K[me+0],K[me+1],K[me+2],K[me+3]):n<=K[me+2]&&s<=K[me+3]&&h>=K[me+0]&&p>=K[me+1])?(w[le]=!0,_.push(W[le])):w[le]=!1}}}}_forEachCell(n,s,h,p,v,_,w,A){const z=this._convertToCellCoord(n),W=this._convertToCellCoord(s),K=this._convertToCellCoord(h),ne=this._convertToCellCoord(p);for(let le=z;le<=K;le++)for(let me=W;me<=ne;me++){const Te=this.d*me+le;if((!A||A(this._convertFromCellCoord(le),this._convertFromCellCoord(me),this._convertFromCellCoord(le+1),this._convertFromCellCoord(me+1)))&&v.call(this,n,s,h,p,Te,_,w,A))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let _=0;_<n.length;_++){const w=n[_];p[3+_]=v,p.set(w,v),v+=w.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Tu(n.buffer)}}const Ks={};function Nt(o,n,s={}){if(Ks[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Ks[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Nt("Object",Object),Nt("TransferableGridIndex",Tu),Nt("Color",Rn),Nt("Error",Error),Nt("AJAXError",rt),Nt("ResolvedImage",Ai),Nt("StylePropertyFunction",Sn),Nt("StyleExpression",at,{omit:["_evaluator"]}),Nt("ZoomDependentExpression",qt),Nt("ZoomConstantExpression",Zt),Nt("CompoundExpression",ki,{omit:["_evaluate"]});for(const o in fo)fo[o]._classRegistryKey||Nt(`Expression_${o}`,fo[o]);function fp(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Yo(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(fp(o)||Q(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Yo(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!Ks[h])throw new Error(`${h} is not registered.`);const p=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Ks[h].omit.indexOf(v)>=0)continue;const _=o[v];p[v]=Ks[h].shallow.indexOf(v)>=0?_:Yo(_,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function Cu(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||fp(o)||Q(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Cu);if(typeof o=="object"){const n=o.$name||"Object";if(!Ks[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Ks[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=Ks[n].shallow.indexOf(p)>=0?v:Cu(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class dp{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const jt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function af(o){for(const n of o)if(lf(n.charCodeAt(0)))return!0;return!1}function pp(o){for(const n of o)if(!by(n.charCodeAt(0)))return!1;return!0}function by(o){return!(jt.Arabic(o)||jt["Arabic Supplement"](o)||jt["Arabic Extended-A"](o)||jt["Arabic Presentation Forms-A"](o)||jt["Arabic Presentation Forms-B"](o))}function lf(o){return!(o!==746&&o!==747&&(o<4352||!(jt["Bopomofo Extended"](o)||jt.Bopomofo(o)||jt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||jt["CJK Compatibility Ideographs"](o)||jt["CJK Compatibility"](o)||jt["CJK Radicals Supplement"](o)||jt["CJK Strokes"](o)||!(!jt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||jt["CJK Unified Ideographs Extension A"](o)||jt["CJK Unified Ideographs"](o)||jt["Enclosed CJK Letters and Months"](o)||jt["Hangul Compatibility Jamo"](o)||jt["Hangul Jamo Extended-A"](o)||jt["Hangul Jamo Extended-B"](o)||jt["Hangul Jamo"](o)||jt["Hangul Syllables"](o)||jt.Hiragana(o)||jt["Ideographic Description Characters"](o)||jt.Kanbun(o)||jt["Kangxi Radicals"](o)||jt["Katakana Phonetic Extensions"](o)||jt.Katakana(o)&&o!==12540||!(!jt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!jt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||jt["Unified Canadian Aboriginal Syllabics"](o)||jt["Unified Canadian Aboriginal Syllabics Extended"](o)||jt["Vertical Forms"](o)||jt["Yijing Hexagram Symbols"](o)||jt["Yi Syllables"](o)||jt["Yi Radicals"](o))))}function Ys(o){return!(lf(o)||function(n){return!!(jt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||jt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||jt["Letterlike Symbols"](n)||jt["Number Forms"](n)||jt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||jt["Control Pictures"](n)&&n!==9251||jt["Optical Character Recognition"](n)||jt["Enclosed Alphanumerics"](n)||jt["Geometric Shapes"](n)||jt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||jt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||jt["CJK Symbols and Punctuation"](n)||jt.Katakana(n)||jt["Private Use Area"](n)||jt["CJK Compatibility Forms"](n)||jt["Small Form Variants"](n)||jt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function uf(o){return o>=1424&&o<=2303||jt["Arabic Presentation Forms-A"](o)||jt["Arabic Presentation Forms-B"](o)}function cf(o,n){return!(!n&&uf(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||jt.Khmer(o))}function mp(o){for(const n of o)if(uf(n.charCodeAt(0)))return!0;return!1}const ys=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Qn{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new dp,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!cf(p.charCodeAt(0),h))return!1;return!0}(n,ys.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Ia{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(Zo(h))return new Sn(h,p);if(Mt(h)){const v=mn(h,p);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=h;return p.type==="color"&&typeof h=="string"?v=Rn.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Zr.parse(h)):v=di.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Aa{constructor(n){this.property=n,this.value=new Ia(n,void 0)}transitioned(n,s){return new hf(this.property,this.value,s,E({},n.transition,this.transition),n.now)}untransitioned(){return new hf(this.property,this.value,null,{},0)}}class gp{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Z(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Aa(this._values[n].property)),this._values[n].value=new Ia(this._values[n].property,s===null?void 0:Z(s))}getTransition(n){return Z(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Aa(this._values[n].property)),this._values[n].transition=Z(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new xl(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new xl(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class hf{constructor(n,s,h,p,v){this.property=n,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,s,h),_=this.prior;if(_){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return _.possiblyEvaluate(n,s,h);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,s,h),v,function(A){if(A<=0)return 0;if(A>=1)return 1;const z=A*A,W=z*A;return 4*(A<.5?W:3*(A-z)+W-.75)}(w))}}return v}}class xl{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new Iu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Sy{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Z(this._values[n].value)}setValue(n,s){this._values[n]=new Ia(this._values[n].property,s===null?void 0:Z(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new Iu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}}class Jo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class Iu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Xt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const p=Jr[this.specification.type];return p?p(n,s,h):n}}class y{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new Jo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Jo(this,{kind:"constant",value:void 0},n.parameters);const p=Jr[this.specification.type];if(p){const v=p(n.value.value,s.value.value,h);return new Jo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,p,v,_){return n.kind==="constant"?n.value:n.evaluate(s,h,p,v,_)}}class r extends y{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new Jo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p),_=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(_,_,_,s);return new Jo(this,{kind:"constant",value:w},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Jo(this,{kind:"constant",value:v},s)}return new Jo(this,n.expression,s)}evaluate(n,s,h,p,v,_){if(n.kind==="source"){const w=n.evaluate(s,h,p,v,_);return this._calculate(w,w,w,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class l{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new Qn(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Qn(Math.floor(s.zoom),s)),n.expression.evaluate(new Qn(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class d{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class g{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new Ia(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Aa(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}Nt("DataDrivenProperty",y),Nt("DataConstantProperty",Xt),Nt("CrossFadedDataDrivenProperty",r),Nt("CrossFadedProperty",l),Nt("ColorRampProperty",d);const x="-transition";class I extends sn{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Sy(s.layout)),s.paint)){this._transitionablePaint=new gp(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Iu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(cp,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(x)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(up,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(x))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const A=this._transitionablePaint._values[n].value;return A.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(n,w,A)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,v={}){return(!v||v.validate!==!1)&&hp(this,n.call(Eu,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Jo&&gs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const k={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class R{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class H{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function J(o,n=1){let s=0,h=0;return{members:o.map(p=>{const v=k[p.type].BYTES_PER_ELEMENT,_=s=re(s,Math.max(n,v)),w=p.components||1;return h=Math.max(h,v),s+=v*w,{name:p.name,type:p.type,components:w,offset:_}}),size:re(s,Math.max(h,n)),alignment:n}}function re(o,n){return Math.ceil(o/n)*n}class pe extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}pe.prototype.bytesPerElement=4,Nt("StructArrayLayout2i4",pe);class Ie extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,n}}Ie.prototype.bytesPerElement=6,Nt("StructArrayLayout3i6",Ie);class Pe extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const _=4*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=p,this.int16[_+3]=v,n}}Pe.prototype.bytesPerElement=8,Nt("StructArrayLayout4i8",Pe);class ze extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,p,v,_)}emplace(n,s,h,p,v,_,w){const A=6*n;return this.int16[A+0]=s,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=v,this.int16[A+4]=_,this.int16[A+5]=w,n}}ze.prototype.bytesPerElement=12,Nt("StructArrayLayout2i4i12",ze);class Ce extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,p,v,_)}emplace(n,s,h,p,v,_,w){const A=4*n,z=8*n;return this.int16[A+0]=s,this.int16[A+1]=h,this.uint8[z+4]=p,this.uint8[z+5]=v,this.uint8[z+6]=_,this.uint8[z+7]=w,n}}Ce.prototype.bytesPerElement=8,Nt("StructArrayLayout2i4ub8",Ce);class qe extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}qe.prototype.bytesPerElement=8,Nt("StructArrayLayout2f8",qe);class it extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,w,A,z,W){const K=this.length;return this.resize(K+1),this.emplace(K,n,s,h,p,v,_,w,A,z,W)}emplace(n,s,h,p,v,_,w,A,z,W,K){const ne=10*n;return this.uint16[ne+0]=s,this.uint16[ne+1]=h,this.uint16[ne+2]=p,this.uint16[ne+3]=v,this.uint16[ne+4]=_,this.uint16[ne+5]=w,this.uint16[ne+6]=A,this.uint16[ne+7]=z,this.uint16[ne+8]=W,this.uint16[ne+9]=K,n}}it.prototype.bytesPerElement=20,Nt("StructArrayLayout10ui20",it);class je extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,w,A,z,W,K,ne){const le=this.length;return this.resize(le+1),this.emplace(le,n,s,h,p,v,_,w,A,z,W,K,ne)}emplace(n,s,h,p,v,_,w,A,z,W,K,ne,le){const me=12*n;return this.int16[me+0]=s,this.int16[me+1]=h,this.int16[me+2]=p,this.int16[me+3]=v,this.uint16[me+4]=_,this.uint16[me+5]=w,this.uint16[me+6]=A,this.uint16[me+7]=z,this.int16[me+8]=W,this.int16[me+9]=K,this.int16[me+10]=ne,this.int16[me+11]=le,n}}je.prototype.bytesPerElement=24,Nt("StructArrayLayout4i4ui4i24",je);class Ke extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}Ke.prototype.bytesPerElement=12,Nt("StructArrayLayout3f12",Ke);class ot extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}ot.prototype.bytesPerElement=4,Nt("StructArrayLayout1ul4",ot);class st extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,w,A,z){const W=this.length;return this.resize(W+1),this.emplace(W,n,s,h,p,v,_,w,A,z)}emplace(n,s,h,p,v,_,w,A,z,W){const K=10*n,ne=5*n;return this.int16[K+0]=s,this.int16[K+1]=h,this.int16[K+2]=p,this.int16[K+3]=v,this.int16[K+4]=_,this.int16[K+5]=w,this.uint32[ne+3]=A,this.uint16[K+8]=z,this.uint16[K+9]=W,n}}st.prototype.bytesPerElement=20,Nt("StructArrayLayout6i1ul2ui20",st);class ct extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,p,v,_)}emplace(n,s,h,p,v,_,w){const A=6*n;return this.int16[A+0]=s,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=v,this.int16[A+4]=_,this.int16[A+5]=w,n}}ct.prototype.bytesPerElement=12,Nt("StructArrayLayout2i2i2i12",ct);class bt extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,p,v)}emplace(n,s,h,p,v,_){const w=4*n,A=8*n;return this.float32[w+0]=s,this.float32[w+1]=h,this.float32[w+2]=p,this.int16[A+6]=v,this.int16[A+7]=_,n}}bt.prototype.bytesPerElement=16,Nt("StructArrayLayout2f1f2i16",bt);class xt extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const _=12*n,w=3*n;return this.uint8[_+0]=s,this.uint8[_+1]=h,this.float32[w+1]=p,this.float32[w+2]=v,n}}xt.prototype.bytesPerElement=12,Nt("StructArrayLayout2ub2f12",xt);class Et extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}Et.prototype.bytesPerElement=6,Nt("StructArrayLayout3ui6",Et);class Bt extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,w,A,z,W,K,ne,le,me,Te,Me,Be){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,n,s,h,p,v,_,w,A,z,W,K,ne,le,me,Te,Me,Be)}emplace(n,s,h,p,v,_,w,A,z,W,K,ne,le,me,Te,Me,Be,Qe){const We=24*n,Ye=12*n,pt=48*n;return this.int16[We+0]=s,this.int16[We+1]=h,this.uint16[We+2]=p,this.uint16[We+3]=v,this.uint32[Ye+2]=_,this.uint32[Ye+3]=w,this.uint32[Ye+4]=A,this.uint16[We+10]=z,this.uint16[We+11]=W,this.uint16[We+12]=K,this.float32[Ye+7]=ne,this.float32[Ye+8]=le,this.uint8[pt+36]=me,this.uint8[pt+37]=Te,this.uint8[pt+38]=Me,this.uint32[Ye+10]=Be,this.int16[We+22]=Qe,n}}Bt.prototype.bytesPerElement=48,Nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bt);class gn extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,w,A,z,W,K,ne,le,me,Te,Me,Be,Qe,We,Ye,pt,gt,Dt,Wt,Ft,Pt,Ut,Kt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,n,s,h,p,v,_,w,A,z,W,K,ne,le,me,Te,Me,Be,Qe,We,Ye,pt,gt,Dt,Wt,Ft,Pt,Ut,Kt)}emplace(n,s,h,p,v,_,w,A,z,W,K,ne,le,me,Te,Me,Be,Qe,We,Ye,pt,gt,Dt,Wt,Ft,Pt,Ut,Kt,Ot){const _t=32*n,Gt=16*n;return this.int16[_t+0]=s,this.int16[_t+1]=h,this.int16[_t+2]=p,this.int16[_t+3]=v,this.int16[_t+4]=_,this.int16[_t+5]=w,this.int16[_t+6]=A,this.int16[_t+7]=z,this.uint16[_t+8]=W,this.uint16[_t+9]=K,this.uint16[_t+10]=ne,this.uint16[_t+11]=le,this.uint16[_t+12]=me,this.uint16[_t+13]=Te,this.uint16[_t+14]=Me,this.uint16[_t+15]=Be,this.uint16[_t+16]=Qe,this.uint16[_t+17]=We,this.uint16[_t+18]=Ye,this.uint16[_t+19]=pt,this.uint16[_t+20]=gt,this.uint16[_t+21]=Dt,this.uint16[_t+22]=Wt,this.uint32[Gt+12]=Ft,this.float32[Gt+13]=Pt,this.float32[Gt+14]=Ut,this.uint16[_t+30]=Kt,this.uint16[_t+31]=Ot,n}}gn.prototype.bytesPerElement=64,Nt("StructArrayLayout8i15ui1ul2f2ui64",gn);class It extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}It.prototype.bytesPerElement=4,Nt("StructArrayLayout1f4",It);class nn extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}nn.prototype.bytesPerElement=12,Nt("StructArrayLayout1ui2f12",nn);class yn extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}yn.prototype.bytesPerElement=8,Nt("StructArrayLayout1ul2ui8",yn);class An extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}An.prototype.bytesPerElement=4,Nt("StructArrayLayout2ui4",An);class un extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}un.prototype.bytesPerElement=2,Nt("StructArrayLayout1ui2",un);class vn extends H{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const _=4*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=p,this.float32[_+3]=v,n}}vn.prototype.bytesPerElement=16,Nt("StructArrayLayout4f16",vn);class Tn extends R{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}Tn.prototype.size=20;class mr extends st{get(n){return new Tn(this,n)}}Nt("CollisionBoxArray",mr);class qn extends R{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}qn.prototype.size=48;class Wi extends Bt{get(n){return new qn(this,n)}}Nt("PlacedSymbolArray",Wi);class qr extends R{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}qr.prototype.size=64;class gr extends gn{get(n){return new qr(this,n)}}Nt("SymbolInstanceArray",gr);class Ri extends It{getoffsetX(n){return this.float32[1*n+0]}}Nt("GlyphOffsetArray",Ri);class Io extends Ie{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Nt("SymbolLineVertexArray",Io);class Qo extends R{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Qo.prototype.size=12;class Js extends nn{get(n){return new Qo(this,n)}}Nt("TextAnchorOffsetArray",Js);class wl extends R{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}wl.prototype.size=8;class Pa extends yn{get(n){return new wl(this,n)}}Nt("FeatureIndexArray",Pa);class ka extends pe{}class yi extends pe{}class oi extends pe{}class vi extends ze{}class Au extends Ce{}class Nr extends qe{}class ur extends it{}class yo extends je{}class Ur extends Ke{}class Ey extends ot{}class yp extends ct{}class Ty extends xt{}class bl extends Et{}class ff extends An{}const Cy=J([{name:"a_pos",components:2,type:"Int16"}],4),{members:Sl}=Cy;class Xr{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let v=this.segments[this.segments.length-1];return n>Xr.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${Xr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Xr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new Xr([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function df(o,n){return 256*(o=X(Math.floor(o),0,255))+X(Math.floor(n),0,255)}Xr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Nt("SegmentVector",Xr);const Pu=J([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var El={exports:{}},pf={exports:{}};pf.exports=function(o,n){var s,h,p,v,_,w,A,z;for(h=o.length-(s=3&o.length),p=n,_=3432918353,w=461845907,z=0;z<h;)A=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24,++z,p=27492+(65535&(v=5*(65535&(p=(p^=A=(65535&(A=(A=(65535&A)*_+(((A>>>16)*_&65535)<<16)&4294967295)<<15|A>>>17))*w+(((A>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(A=0,s){case 3:A^=(255&o.charCodeAt(z+2))<<16;case 2:A^=(255&o.charCodeAt(z+1))<<8;case 1:p^=A=(65535&(A=(A=(65535&(A^=255&o.charCodeAt(z)))*_+(((A>>>16)*_&65535)<<16)&4294967295)<<15|A>>>17))*w+(((A>>>16)*w&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var mf=pf.exports,Wx={exports:{}};Wx.exports=function(o,n){for(var s,h=o.length,p=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var Zx=mf,ZA=Wx.exports;El.exports=Zx,El.exports.murmur3=Zx,El.exports.murmur2=ZA;var Iy=S(El.exports);class vp{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(qx(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=qx(n);let h=0,p=this.ids.length-1;for(;h<p;){const _=h+p>>1;this.ids[_]>=s?p=_:h=_+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Ay(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new vp;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function qx(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Iy(String(o))}function Ay(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let v=s-1,_=h+1;for(;;){do v++;while(o[v]<p);do _--;while(o[_]>p);if(v>=_)break;_p(o,v,_),_p(n,3*v,3*_),_p(n,3*v+1,3*_+1),_p(n,3*v+2,3*_+2)}_-s<h-_?(Ay(o,n,s,_),s=_+1):(Ay(o,n,_+1,h),h=_)}}function _p(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Nt("FeaturePositionMap",vp);class ku{constructor(n,s){this.gl=n.gl,this.location=s}}class xp extends ku{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Xx extends ku{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Kx extends ku{constructor(n,s){super(n,s),this.current=Rn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const qA=new Float32Array(16);function Py(o){return[df(255*o.r,255*o.g),df(255*o.b,255*o.a)]}class gf{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Kx(n,s):new xp(n,s)}}class Pc{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Xx(n,s):new xp(n,s)}}class Ma{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,v){const _=this.paintVertexArray.length,w=this.expression.evaluate(new Qn(0),s,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(_,n,w)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const p=Py(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vs{constructor(n,s,h,p,v,_){this.expression=n,this.uniformNames=s.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,s,h,p,v){const _=this.expression.evaluate(new Qn(this.zoom),s,{},p,[],v),w=this.expression.evaluate(new Qn(this.zoom+1),s,{},p,[],v),A=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(A,n,_,w)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),_=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,v,_)}_setPaintValue(n,s,h,p){if(this.type==="color"){const v=Py(h),_=Py(p);for(let w=n;w<s;w++)this.paintVertexArray.emplace(w,v[0],v[1],_[0],_[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=X(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new xp(n,s)}}class Tl{constructor(n,s,h,p,v,_){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:v,mid:_,max:w}=h,A=p[v],z=p[_],W=p[w];if(A&&z&&W)for(let K=n;K<s;K++)this.zoomInPaintVertexArray.emplace(K,z.tl[0],z.tl[1],z.br[0],z.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],z.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(K,z.tl[0],z.tl[1],z.br[0],z.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],z.pixelRatio,W.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Pu.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Pu.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Yx{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const _=n.paint.get(v);if(!(_ instanceof Jo&&gs(_.property.specification)))continue;const w=XA(v,n.type),A=_.value,z=_.property.specification.type,W=_.property.useIntegerZoom,K=_.property.specification["property-type"],ne=K==="cross-faded"||K==="cross-faded-data-driven";if(A.kind==="constant")this.binders[v]=ne?new Pc(A.value,w):new gf(A.value,w,z),p.push(`/u_${v}`);else if(A.kind==="source"||ne){const le=Jx(v,z,"source");this.binders[v]=ne?new Tl(A,z,W,s,le,n.id):new Ma(A,w,z,le),p.push(`/a_${v}`)}else{const le=Jx(v,z,"composite");this.binders[v]=new vs(A,w,z,W,s,le),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Ma||s instanceof vs?s.maxValue:0}populatePaintArrays(n,s,h,p,v){for(const _ in this.binders){const w=this.binders[_];(w instanceof Ma||w instanceof vs||w instanceof Tl)&&w.populatePaintArray(n,s,h,p,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof Pc&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,v){let _=!1;for(const w in n){const A=s.getPositions(w);for(const z of A){const W=h.feature(z.index);for(const K in this.binders){const ne=this.binders[K];if((ne instanceof Ma||ne instanceof vs||ne instanceof Tl)&&ne.expression.isStateDependent===!0){const le=p.paint.get(K);ne.expression=le.value,ne.updatePaintArray(z.start,z.end,W,n[w],v),_=!0}}}}return _}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof gf||h instanceof Pc)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ma||h instanceof vs)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof Tl)for(let p=0;p<Pu.members.length;p++)n.push(Pu.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof gf||h instanceof Pc||h instanceof vs)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof gf||v instanceof Pc||v instanceof vs){for(const _ of v.uniformNames)if(s[_]){const w=v.getBinding(n,s[_],_);h.push({name:_,property:p,binding:w})}}}return h}setUniforms(n,s,h,p){for(const{name:v,property:_,binding:w}of s)this.binders[_].setUniform(w,p,h.get(_),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Tl){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof Ma||h instanceof vs)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Ma||h instanceof vs||h instanceof Tl)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Ma||s instanceof vs||s instanceof Tl)&&s.destroy()}}}class Mu{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new Yx(p,s,h);this.needsUpload=!1,this._featureMap=new vp,this._bufferOffset=0}populatePaintArrays(n,s,h,p,v,_){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,s,p,v,_);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function XA(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Jx(o,n,s){const h={color:{source:qe,composite:vn},number:{source:It,composite:qe}},p=function(v){return{"line-pattern":{source:ur,composite:ur},"fill-pattern":{source:ur,composite:ur},"fill-extrusion-pattern":{source:ur,composite:ur}}[v]}(o);return p&&p[s]||h[n][s]}Nt("ConstantBinder",gf),Nt("CrossFadedConstantBinder",Pc),Nt("SourceExpressionBinder",Ma),Nt("CrossFadedCompositeBinder",Tl),Nt("CompositeExpressionBinder",vs),Nt("ProgramConfiguration",Yx,{omit:["_buffers"]}),Nt("ProgramConfigurationSet",Mu);const kr=8192,ky=Math.pow(2,14)-1,Qx=-ky-1;function zu(o){const n=kr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let v=0;v<p.length;v++){const _=p[v],w=Math.round(_.x*n),A=Math.round(_.y*n);_.x=X(w,Qx,ky),_.y=X(A,Qx,ky),(w<_.x||w>_.x+1||A<_.y||A>_.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ru(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?zu(o):[]}}function wp(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class My{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new yi,this.indexArray=new bl,this.segments=new Xr,this.programConfigurations=new Mu(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],v=[];let _=null,w=!1;p.type==="circle"&&(_=p.layout.get("circle-sort-key"),w=!_.isConstant());for(const{feature:A,id:z,index:W,sourceLayerIndex:K}of n){const ne=this.layers[0]._featureFilter.needGeometry,le=Ru(A,ne);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),le,h))continue;const me=w?_.evaluate(le,{},h):void 0,Te={id:z,properties:A.properties,type:A.type,sourceLayerIndex:K,index:W,geometry:ne?le.geometry:zu(A),patterns:{},sortKey:me};v.push(Te)}w&&v.sort((A,z)=>A.sortKey-z.sortKey);for(const A of v){const{geometry:z,index:W,sourceLayerIndex:K}=A,ne=n[W].feature;this.addFeature(A,z,W,h),s.featureIndex.insert(ne,z,W,K,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Sl),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const v of s)for(const _ of v){const w=_.x,A=_.y;if(w<0||w>=kr||A<0||A>=kr)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),W=z.vertexLength;wp(this.layoutVertexArray,w,A,-1,-1),wp(this.layoutVertexArray,w,A,1,-1),wp(this.layoutVertexArray,w,A,1,1),wp(this.layoutVertexArray,w,A,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function ew(o,n){for(let s=0;s<o.length;s++)if(kc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(kc(o,n[s]))return!0;return!!zy(o,n)}function KA(o,n,s){return!!kc(o,n)||!!Ry(n,o,s)}function tw(o,n){if(o.length===1)return rw(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(kc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(rw(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(zy(o,n[s]))return!0;return!1}function YA(o,n,s){if(o.length>1){if(zy(o,n))return!0;for(let h=0;h<n.length;h++)if(Ry(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Ry(o[h],n,s))return!0;return!1}function zy(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let v=0;v<n.length-1;v++)if(JA(h,p,n[v],n[v+1]))return!0}return!1}function JA(o,n,s,h){return de(o,s,h)!==de(n,s,h)&&de(o,n,s)!==de(o,n,h)}function Ry(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(nw(o,n[p-1],n[p])<h)return!0;return!1}function nw(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function rw(o,n){let s,h,p,v=!1;for(let _=0;_<o.length;_++){s=o[_];for(let w=0,A=s.length-1;w<s.length;A=w++)h=s[w],p=s[A],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function kc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],_=o[p];v.y>n.y!=_.y>n.y&&n.x<(_.x-v.x)*(n.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function QA(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=de(o,n,s[0]);return v!==de(o,n,s[1])||v!==de(o,n,s[2])||v!==de(o,n,s[3])}function yf(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function bp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Sp(o,n,s,h,p){if(!n[0]&&!n[1])return o;const v=b.convert(n)._mult(p);s==="viewport"&&v._rotate(-h);const _=[];for(let w=0;w<o.length;w++)_.push(o[w].sub(v));return _}let iw,ow;Nt("CircleBucket",My,{omit:["layers"]});var eP={get paint(){return ow=ow||new g({"circle-radius":new y(nt.paint_circle["circle-radius"]),"circle-color":new y(nt.paint_circle["circle-color"]),"circle-blur":new y(nt.paint_circle["circle-blur"]),"circle-opacity":new y(nt.paint_circle["circle-opacity"]),"circle-translate":new Xt(nt.paint_circle["circle-translate"]),"circle-translate-anchor":new Xt(nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xt(nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xt(nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new y(nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new y(nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new y(nt.paint_circle["circle-stroke-opacity"])})},get layout(){return iw=iw||new g({"circle-sort-key":new y(nt.layout_circle["circle-sort-key"])})}},Fi=1e-6,Mc=typeof Float32Array<"u"?Float32Array:Array;function Fy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function sw(o,n,s){var h=n[0],p=n[1],v=n[2],_=n[3],w=n[4],A=n[5],z=n[6],W=n[7],K=n[8],ne=n[9],le=n[10],me=n[11],Te=n[12],Me=n[13],Be=n[14],Qe=n[15],We=s[0],Ye=s[1],pt=s[2],gt=s[3];return o[0]=We*h+Ye*w+pt*K+gt*Te,o[1]=We*p+Ye*A+pt*ne+gt*Me,o[2]=We*v+Ye*z+pt*le+gt*Be,o[3]=We*_+Ye*W+pt*me+gt*Qe,o[4]=(We=s[4])*h+(Ye=s[5])*w+(pt=s[6])*K+(gt=s[7])*Te,o[5]=We*p+Ye*A+pt*ne+gt*Me,o[6]=We*v+Ye*z+pt*le+gt*Be,o[7]=We*_+Ye*W+pt*me+gt*Qe,o[8]=(We=s[8])*h+(Ye=s[9])*w+(pt=s[10])*K+(gt=s[11])*Te,o[9]=We*p+Ye*A+pt*ne+gt*Me,o[10]=We*v+Ye*z+pt*le+gt*Be,o[11]=We*_+Ye*W+pt*me+gt*Qe,o[12]=(We=s[12])*h+(Ye=s[13])*w+(pt=s[14])*K+(gt=s[15])*Te,o[13]=We*p+Ye*A+pt*ne+gt*Me,o[14]=We*v+Ye*z+pt*le+gt*Be,o[15]=We*_+Ye*W+pt*me+gt*Qe,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var vf,tP=sw;function Ep(o,n,s){var h=n[0],p=n[1],v=n[2],_=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*_,o[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*_,o[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*_,o[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*_,o}vf=new Mc(4),Mc!=Float32Array&&(vf[0]=0,vf[1]=0,vf[2]=0,vf[3]=0);class nP extends I{constructor(n){super(n,eP)}createBucket(n){return new My(n)}queryRadius(n){const s=n;return yf("circle-radius",this,s)+yf("circle-stroke-width",this,s)+bp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,p,v,_,w,A){const z=Sp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,w),W=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),K=this.paint.get("circle-pitch-alignment")==="map",ne=K?z:function(me,Te){return me.map(Me=>aw(Me,Te))}(z,A),le=K?W*w:W;for(const me of p)for(const Te of me){const Me=K?Te:aw(Te,A);let Be=le;const Qe=Ep([],[Te.x,Te.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=Qe[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=_.cameraToCenterDistance/Qe[3]),KA(ne,Me,Be))return!0}return!1}}function aw(o,n){const s=Ep([],[o.x,o.y,0,1],n);return new b(s[0]/s[3],s[1]/s[3])}class lw extends My{}let uw;Nt("HeatmapBucket",lw,{omit:["layers"]});var rP={get paint(){return uw=uw||new g({"heatmap-radius":new y(nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new y(nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xt(nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new d(nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xt(nt.paint_heatmap["heatmap-opacity"])})}};function Oy(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function cw(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=Oy({},{width:n,height:s},h);Ly(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function Ly(o,n,s,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,w=n.data;if(_===w)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<p.height;A++){const z=((s.y+A)*o.width+s.x)*v,W=((h.y+A)*n.width+h.x)*v;for(let K=0;K<p.width*v;K++)w[W+K]=_[z+K]}return n}class _f{constructor(n,s){Oy(this,n,1,s)}resize(n){cw(this,n,1)}clone(){return new _f({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){Ly(n,s,h,p,v,1)}}class Ao{constructor(n,s){Oy(this,n,4,s)}resize(n){cw(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ao({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){Ly(n,s,h,p,v,4)}}function hw(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new Ao({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(_,w,A)=>{n[o.evaluationKey]=A;const z=o.expression.evaluate(n);p.data[_+w+0]=Math.floor(255*z.r/z.a),p.data[_+w+1]=Math.floor(255*z.g/z.a),p.data[_+w+2]=Math.floor(255*z.b/z.a),p.data[_+w+3]=Math.floor(255*z.a)};if(o.clips)for(let _=0,w=0;_<h;++_,w+=4*s)for(let A=0,z=0;A<s;A++,z+=4){const W=A/(s-1),{start:K,end:ne}=o.clips[_];v(w,z,K*(1-W)+ne*W)}else for(let _=0,w=0;_<s;_++,w+=4)v(0,w,_/(s-1));return p}Nt("AlphaImage",_f),Nt("RGBAImage",Ao);class iP extends I{createBucket(n){return new lw(n)}constructor(n){super(n,rP),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let fw;var oP={get paint(){return fw=fw||new g({"hillshade-illumination-direction":new Xt(nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xt(nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xt(nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xt(nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xt(nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xt(nt.paint_hillshade["hillshade-accent-color"])})}};class sP extends I{constructor(n){super(n,oP)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const aP=J([{name:"a_pos",components:2,type:"Int16"}],4),{members:lP}=aP;var jy={exports:{}};function Tp(o,n,s){s=s||2;var h,p,v,_,w,A,z,W=n&&n.length,K=W?n[0]*s:o.length,ne=dw(o,0,K,s,!0),le=[];if(!ne||ne.next===ne.prev)return le;if(W&&(ne=function(Te,Me,Be,Qe){var We,Ye,pt,gt=[];for(We=0,Ye=Me.length;We<Ye;We++)(pt=dw(Te,Me[We]*Qe,We<Ye-1?Me[We+1]*Qe:Te.length,Qe,!1))===pt.next&&(pt.steiner=!0),gt.push(gP(pt));for(gt.sort(dP),We=0;We<gt.length;We++)Be=pP(gt[We],Be);return Be}(o,n,ne,s)),o.length>80*s){h=v=o[0],p=_=o[1];for(var me=s;me<K;me+=s)(w=o[me])<h&&(h=w),(A=o[me+1])<p&&(p=A),w>v&&(v=w),A>_&&(_=A);z=(z=Math.max(v-h,_-p))!==0?32767/z:0}return xf(ne,le,s,h,p,z,0),le}function dw(o,n,s,h,p){var v,_;if(p===Ny(o,n,s,h)>0)for(v=n;v<s;v+=h)_=gw(v,o[v],o[v+1],_);else for(v=s-h;v>=n;v-=h)_=gw(v,o[v],o[v+1],_);return _&&Cp(_,_.next)&&(bf(_),_=_.next),_}function Fu(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!Cp(h,h.next)&&Sr(h.prev,h,h.next)!==0)h=h.next;else{if(bf(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function xf(o,n,s,h,p,v,_){if(o){!_&&v&&function(W,K,ne,le){var me=W;do me.z===0&&(me.z=Dy(me.x,me.y,K,ne,le)),me.prevZ=me.prev,me.nextZ=me.next,me=me.next;while(me!==W);me.prevZ.nextZ=null,me.prevZ=null,function(Te){var Me,Be,Qe,We,Ye,pt,gt,Dt,Wt=1;do{for(Be=Te,Te=null,Ye=null,pt=0;Be;){for(pt++,Qe=Be,gt=0,Me=0;Me<Wt&&(gt++,Qe=Qe.nextZ);Me++);for(Dt=Wt;gt>0||Dt>0&&Qe;)gt!==0&&(Dt===0||!Qe||Be.z<=Qe.z)?(We=Be,Be=Be.nextZ,gt--):(We=Qe,Qe=Qe.nextZ,Dt--),Ye?Ye.nextZ=We:Te=We,We.prevZ=Ye,Ye=We;Be=Qe}Ye.nextZ=null,Wt*=2}while(pt>1)}(me)}(o,h,p,v);for(var w,A,z=o;o.prev!==o.next;)if(w=o.prev,A=o.next,v?cP(o,h,p,v):uP(o))n.push(w.i/s|0),n.push(o.i/s|0),n.push(A.i/s|0),bf(o),o=A.next,z=A.next;else if((o=A)===z){_?_===1?xf(o=hP(Fu(o),n,s),n,s,h,p,v,2):_===2&&fP(o,n,s,h,p,v):xf(Fu(o),n,s,h,p,v,1);break}}}function uP(o){var n=o.prev,s=o,h=o.next;if(Sr(n,s,h)>=0)return!1;for(var p=n.x,v=s.x,_=h.x,w=n.y,A=s.y,z=h.y,W=p<v?p<_?p:_:v<_?v:_,K=w<A?w<z?w:z:A<z?A:z,ne=p>v?p>_?p:_:v>_?v:_,le=w>A?w>z?w:z:A>z?A:z,me=h.next;me!==n;){if(me.x>=W&&me.x<=ne&&me.y>=K&&me.y<=le&&zc(p,w,v,A,_,z,me.x,me.y)&&Sr(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function cP(o,n,s,h){var p=o.prev,v=o,_=o.next;if(Sr(p,v,_)>=0)return!1;for(var w=p.x,A=v.x,z=_.x,W=p.y,K=v.y,ne=_.y,le=w<A?w<z?w:z:A<z?A:z,me=W<K?W<ne?W:ne:K<ne?K:ne,Te=w>A?w>z?w:z:A>z?A:z,Me=W>K?W>ne?W:ne:K>ne?K:ne,Be=Dy(le,me,n,s,h),Qe=Dy(Te,Me,n,s,h),We=o.prevZ,Ye=o.nextZ;We&&We.z>=Be&&Ye&&Ye.z<=Qe;){if(We.x>=le&&We.x<=Te&&We.y>=me&&We.y<=Me&&We!==p&&We!==_&&zc(w,W,A,K,z,ne,We.x,We.y)&&Sr(We.prev,We,We.next)>=0||(We=We.prevZ,Ye.x>=le&&Ye.x<=Te&&Ye.y>=me&&Ye.y<=Me&&Ye!==p&&Ye!==_&&zc(w,W,A,K,z,ne,Ye.x,Ye.y)&&Sr(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;We&&We.z>=Be;){if(We.x>=le&&We.x<=Te&&We.y>=me&&We.y<=Me&&We!==p&&We!==_&&zc(w,W,A,K,z,ne,We.x,We.y)&&Sr(We.prev,We,We.next)>=0)return!1;We=We.prevZ}for(;Ye&&Ye.z<=Qe;){if(Ye.x>=le&&Ye.x<=Te&&Ye.y>=me&&Ye.y<=Me&&Ye!==p&&Ye!==_&&zc(w,W,A,K,z,ne,Ye.x,Ye.y)&&Sr(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function hP(o,n,s){var h=o;do{var p=h.prev,v=h.next.next;!Cp(p,v)&&pw(p,h,h.next,v)&&wf(p,v)&&wf(v,p)&&(n.push(p.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),bf(h),bf(h.next),h=o=v),h=h.next}while(h!==o);return Fu(h)}function fP(o,n,s,h,p,v){var _=o;do{for(var w=_.next.next;w!==_.prev;){if(_.i!==w.i&&yP(_,w)){var A=mw(_,w);return _=Fu(_,_.next),A=Fu(A,A.next),xf(_,n,s,h,p,v,0),void xf(A,n,s,h,p,v,0)}w=w.next}_=_.next}while(_!==o)}function dP(o,n){return o.x-n.x}function pP(o,n){var s=function(p,v){var _,w=v,A=p.x,z=p.y,W=-1/0;do{if(z<=w.y&&z>=w.next.y&&w.next.y!==w.y){var K=w.x+(z-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(K<=A&&K>W&&(W=K,_=w.x<w.next.x?w:w.next,K===A))return _}w=w.next}while(w!==v);if(!_)return null;var ne,le=_,me=_.x,Te=_.y,Me=1/0;w=_;do A>=w.x&&w.x>=me&&A!==w.x&&zc(z<Te?A:W,z,me,Te,z<Te?W:A,z,w.x,w.y)&&(ne=Math.abs(z-w.y)/(A-w.x),wf(w,p)&&(ne<Me||ne===Me&&(w.x>_.x||w.x===_.x&&mP(_,w)))&&(_=w,Me=ne)),w=w.next;while(w!==le);return _}(o,n);if(!s)return n;var h=mw(s,o);return Fu(h,h.next),Fu(s,s.next)}function mP(o,n){return Sr(o.prev,o,n.prev)<0&&Sr(n.next,o,o.next)<0}function Dy(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function gP(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function zc(o,n,s,h,p,v,_,w){return(p-_)*(n-w)>=(o-_)*(v-w)&&(o-_)*(h-w)>=(s-_)*(n-w)&&(s-_)*(v-w)>=(p-_)*(h-w)}function yP(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&pw(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(wf(o,n)&&wf(n,o)&&function(s,h){var p=s,v=!1,_=(s.x+h.x)/2,w=(s.y+h.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&_<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(o,n)&&(Sr(o.prev,o,n.prev)||Sr(o,n.prev,n))||Cp(o,n)&&Sr(o.prev,o,o.next)>0&&Sr(n.prev,n,n.next)>0)}function Sr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Cp(o,n){return o.x===n.x&&o.y===n.y}function pw(o,n,s,h){var p=Ap(Sr(o,n,s)),v=Ap(Sr(o,n,h)),_=Ap(Sr(s,h,o)),w=Ap(Sr(s,h,n));return p!==v&&_!==w||!(p!==0||!Ip(o,s,n))||!(v!==0||!Ip(o,h,n))||!(_!==0||!Ip(s,o,h))||!(w!==0||!Ip(s,n,h))}function Ip(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Ap(o){return o>0?1:o<0?-1:0}function wf(o,n){return Sr(o.prev,o,o.next)<0?Sr(o,n,o.next)>=0&&Sr(o,o.prev,n)>=0:Sr(o,n,o.prev)<0||Sr(o,o.next,n)<0}function mw(o,n){var s=new By(o.i,o.x,o.y),h=new By(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function gw(o,n,s,h){var p=new By(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function bf(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function By(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ny(o,n,s,h){for(var p=0,v=n,_=s-h;v<s;v+=h)p+=(o[_]-o[v])*(o[v+1]+o[_+1]),_=v;return p}jy.exports=Tp,jy.exports.default=Tp,Tp.deviation=function(o,n,s,h){var p=n&&n.length,v=Math.abs(Ny(o,0,p?n[0]*s:o.length,s));if(p)for(var _=0,w=n.length;_<w;_++)v-=Math.abs(Ny(o,n[_]*s,_<w-1?n[_+1]*s:o.length,s));var A=0;for(_=0;_<h.length;_+=3){var z=h[_]*s,W=h[_+1]*s,K=h[_+2]*s;A+=Math.abs((o[z]-o[K])*(o[W+1]-o[z+1])-(o[z]-o[W])*(o[K+1]-o[z+1]))}return v===0&&A===0?0:Math.abs((A-v)/v)},Tp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var _=0;_<n;_++)s.vertices.push(o[p][v][_]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var yw=S(jy.exports);function Uy(o,n,s){const h=s.patternDependencies;let p=!1;for(const v of n){const _=v.paint.get(`${o}-pattern`);_.isConstant()||(p=!0);const w=_.constantOr(null);w&&(p=!0,h[w.to]=!0,h[w.from]=!0)}return p}function $y(o,n,s,h,p){const v=p.patternDependencies;for(const _ of n){const w=_.paint.get(`${o}-pattern`).value;if(w.kind!=="constant"){let A=w.evaluate({zoom:h-1},s,{},p.availableImages),z=w.evaluate({zoom:h},s,{},p.availableImages),W=w.evaluate({zoom:h+1},s,{},p.availableImages);A=A&&A.name?A.name:A,z=z&&z.name?z.name:z,W=W&&W.name?W.name:W,v[A]=!0,v[z]=!0,v[W]=!0,s.patterns[_.id]={min:A,mid:z,max:W}}}return s}class Vy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new oi,this.indexArray=new bl,this.indexArray2=new ff,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Xr,this.segments2=new Xr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Uy("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),_=[];for(const{feature:w,id:A,index:z,sourceLayerIndex:W}of n){const K=this.layers[0]._featureFilter.needGeometry,ne=Ru(w,K);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),ne,h))continue;const le=v?p.evaluate(ne,{},h,s.availableImages):void 0,me={id:A,properties:w.properties,type:w.type,sourceLayerIndex:W,index:z,geometry:K?ne.geometry:zu(w),patterns:{},sortKey:le};_.push(me)}v&&_.sort((w,A)=>w.sortKey-A.sortKey);for(const w of _){const{geometry:A,index:z,sourceLayerIndex:W}=w;if(this.hasPattern){const K=$y("fill",this.layers,w,this.zoom,s);this.patternFeatures.push(K)}else this.addFeature(w,A,z,h,{});s.featureIndex.insert(n[z].feature,A,z,W,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,lP),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,v){for(const _ of fl(s,500)){let w=0;for(const le of _)w+=le.length;const A=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),z=A.vertexLength,W=[],K=[];for(const le of _){if(le.length===0)continue;le!==_[0]&&K.push(W.length/2);const me=this.segments2.prepareSegment(le.length,this.layoutVertexArray,this.indexArray2),Te=me.vertexLength;this.layoutVertexArray.emplaceBack(le[0].x,le[0].y),this.indexArray2.emplaceBack(Te+le.length-1,Te),W.push(le[0].x),W.push(le[0].y);for(let Me=1;Me<le.length;Me++)this.layoutVertexArray.emplaceBack(le[Me].x,le[Me].y),this.indexArray2.emplaceBack(Te+Me-1,Te+Me),W.push(le[Me].x),W.push(le[Me].y);me.vertexLength+=le.length,me.primitiveLength+=le.length}const ne=yw(W,K);for(let le=0;le<ne.length;le+=3)this.indexArray.emplaceBack(z+ne[le],z+ne[le+1],z+ne[le+2]);A.vertexLength+=w,A.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}let vw,_w;Nt("FillBucket",Vy,{omit:["layers","patternFeatures"]});var vP={get paint(){return _w=_w||new g({"fill-antialias":new Xt(nt.paint_fill["fill-antialias"]),"fill-opacity":new y(nt.paint_fill["fill-opacity"]),"fill-color":new y(nt.paint_fill["fill-color"]),"fill-outline-color":new y(nt.paint_fill["fill-outline-color"]),"fill-translate":new Xt(nt.paint_fill["fill-translate"]),"fill-translate-anchor":new Xt(nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new r(nt.paint_fill["fill-pattern"])})},get layout(){return vw=vw||new g({"fill-sort-key":new y(nt.layout_fill["fill-sort-key"])})}};class _P extends I{constructor(n){super(n,vP)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Vy(n)}queryRadius(){return bp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,p,v,_,w){return tw(Sp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,w),p)}isTileClipped(){return!0}}const xP=J([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),wP=J([{name:"a_centroid",components:2,type:"Int16"}],4),{members:bP}=xP;var Cl={},SP=C,xw=Rc;function Rc(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(EP,this,n)}function EP(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var _=p._keys[h.readVarint()],w=p._values[h.readVarint()];p.properties[_]=w}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function TP(o){for(var n,s,h=0,p=0,v=o.length,_=v-1;p<v;_=p++)h+=((s=o[_]).x-(n=o[p]).x)*(n.y+s.y);return h}Rc.types=["Unknown","Point","LineString","Polygon"],Rc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,v=0,_=0,w=[];o.pos<s;){if(p<=0){var A=o.readVarint();h=7&A,p=A>>3}if(p--,h===1||h===2)v+=o.readSVarint(),_+=o.readSVarint(),h===1&&(n&&w.push(n),n=[]),n.push(new SP(v,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&w.push(n),w},Rc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,v=0,_=1/0,w=-1/0,A=1/0,z=-1/0;o.pos<n;){if(h<=0){var W=o.readVarint();s=7&W,h=W>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<_&&(_=p),p>w&&(w=p),(v+=o.readSVarint())<A&&(A=v),v>z&&(z=v);else if(s!==7)throw new Error("unknown command "+s)}return[_,A,w,z]},Rc.prototype.toGeoJSON=function(o,n,s){var h,p,v=this.extent*Math.pow(2,s),_=this.extent*o,w=this.extent*n,A=this.loadGeometry(),z=Rc.types[this.type];function W(le){for(var me=0;me<le.length;me++){var Te=le[me];le[me]=[360*(Te.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+w)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var K=[];for(h=0;h<A.length;h++)K[h]=A[h][0];W(A=K);break;case 2:for(h=0;h<A.length;h++)W(A[h]);break;case 3:for(A=function(le){var me=le.length;if(me<=1)return[le];for(var Te,Me,Be=[],Qe=0;Qe<me;Qe++){var We=TP(le[Qe]);We!==0&&(Me===void 0&&(Me=We<0),Me===We<0?(Te&&Be.push(Te),Te=[le[Qe]]):Te.push(le[Qe]))}return Te&&Be.push(Te),Be}(A),h=0;h<A.length;h++)for(p=0;p<A[h].length;p++)W(A[h][p])}A.length===1?A=A[0]:z="Multi"+z;var ne={type:"Feature",geometry:{type:z,coordinates:A},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var CP=xw,ww=bw;function bw(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(IP,this,n),this.length=this._features.length}function IP(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var _=h.readVarint()>>3;p=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return p}(s))}bw.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new CP(this._pbf,n,this.extent,this._keys,this._values)};var AP=ww;function PP(o,n,s){if(o===3){var h=new AP(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Cl.VectorTile=function(o,n){this.layers=o.readFields(PP,{},n)},Cl.VectorTileFeature=xw,Cl.VectorTileLayer=ww;const kP=Cl.VectorTileFeature.types,Gy=Math.pow(2,13);function Sf(o,n,s,h,p,v,_,w){o.emplaceBack(n,s,2*Math.floor(h*Gy)+_,p*Gy*2,v*Gy*2,Math.round(w))}class Hy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new vi,this.centroidVertexArray=new ka,this.indexArray=new bl,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Xr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Uy("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:_,sourceLayerIndex:w}of n){const A=this.layers[0]._featureFilter.needGeometry,z=Ru(p,A);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),z,h))continue;const W={id:v,sourceLayerIndex:w,index:_,geometry:A?z.geometry:zu(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push($y("fill-extrusion",this.layers,W,this.zoom,s)):this.addFeature(W,W.geometry,_,h,{}),s.featureIndex.insert(p,W.geometry,_,w,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,bP),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,wP.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,v){const _={x:0,y:0,vertexCount:0};for(const w of fl(s,500)){let A=0;for(const me of w)A+=me.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of w){if(me.length===0||zP(me))continue;let Te=0;for(let Me=0;Me<me.length;Me++){const Be=me[Me];if(Me>=1){const Qe=me[Me-1];if(!MP(Be,Qe)){z.vertexLength+4>Xr.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const We=Be.sub(Qe)._perp()._unit(),Ye=Qe.dist(Be);Te+Ye>32768&&(Te=0),Sf(this.layoutVertexArray,Be.x,Be.y,We.x,We.y,0,0,Te),Sf(this.layoutVertexArray,Be.x,Be.y,We.x,We.y,0,1,Te),_.x+=2*Be.x,_.y+=2*Be.y,_.vertexCount+=2,Te+=Ye,Sf(this.layoutVertexArray,Qe.x,Qe.y,We.x,We.y,0,0,Te),Sf(this.layoutVertexArray,Qe.x,Qe.y,We.x,We.y,0,1,Te),_.x+=2*Qe.x,_.y+=2*Qe.y,_.vertexCount+=2;const pt=z.vertexLength;this.indexArray.emplaceBack(pt,pt+2,pt+1),this.indexArray.emplaceBack(pt+1,pt+2,pt+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+A>Xr.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),kP[n.type]!=="Polygon")continue;const W=[],K=[],ne=z.vertexLength;for(const me of w)if(me.length!==0){me!==w[0]&&K.push(W.length/2);for(let Te=0;Te<me.length;Te++){const Me=me[Te];Sf(this.layoutVertexArray,Me.x,Me.y,0,0,1,1,0),_.x+=Me.x,_.y+=Me.y,_.vertexCount+=1,W.push(Me.x),W.push(Me.y)}}const le=yw(W,K);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack(ne+le[me],ne+le[me+2],ne+le[me+1]);z.primitiveLength+=le.length/3,z.vertexLength+=A}for(let w=0;w<_.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function MP(o,n){return o.x===n.x&&(o.x<0||o.x>kr)||o.y===n.y&&(o.y<0||o.y>kr)}function zP(o){return o.every(n=>n.x<0)||o.every(n=>n.x>kr)||o.every(n=>n.y<0)||o.every(n=>n.y>kr)}let Sw;Nt("FillExtrusionBucket",Hy,{omit:["layers","features"]});var RP={get paint(){return Sw=Sw||new g({"fill-extrusion-opacity":new Xt(nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new y(nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xt(nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xt(nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new r(nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new y(nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new y(nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xt(nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class FP extends I{constructor(n){super(n,RP)}createBucket(n){return new Hy(n)}queryRadius(){return bp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,p,v,_,w,A){const z=Sp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,w),W=this.paint.get("fill-extrusion-height").evaluate(s,h),K=this.paint.get("fill-extrusion-base").evaluate(s,h),ne=function(me,Te,Me,Be){const Qe=[];for(const We of me){const Ye=[We.x,We.y,0,1];Ep(Ye,Ye,Te),Qe.push(new b(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return Qe}(z,A),le=function(me,Te,Me,Be){const Qe=[],We=[],Ye=Be[8]*Te,pt=Be[9]*Te,gt=Be[10]*Te,Dt=Be[11]*Te,Wt=Be[8]*Me,Ft=Be[9]*Me,Pt=Be[10]*Me,Ut=Be[11]*Me;for(const Kt of me){const Ot=[],_t=[];for(const Gt of Kt){const $t=Gt.x,_n=Gt.y,Gn=Be[0]*$t+Be[4]*_n+Be[12],Hn=Be[1]*$t+Be[5]*_n+Be[13],Mr=Be[2]*$t+Be[6]*_n+Be[14],ko=Be[3]*$t+Be[7]*_n+Be[15],_i=Mr+gt,Vr=ko+Dt,Qr=Gn+Wt,xi=Hn+Ft,Oi=Mr+Pt,wi=ko+Ut,zr=new b((Gn+Ye)/Vr,(Hn+pt)/Vr);zr.z=_i/Vr,Ot.push(zr);const Kr=new b(Qr/wi,xi/wi);Kr.z=Oi/wi,_t.push(Kr)}Qe.push(Ot),We.push(_t)}return[Qe,We]}(p,K,W,A);return function(me,Te,Me){let Be=1/0;tw(Me,Te)&&(Be=Ew(Me,Te[0]));for(let Qe=0;Qe<Te.length;Qe++){const We=Te[Qe],Ye=me[Qe];for(let pt=0;pt<We.length-1;pt++){const gt=We[pt],Dt=[gt,We[pt+1],Ye[pt+1],Ye[pt],gt];ew(Me,Dt)&&(Be=Math.min(Be,Ew(Me,Dt)))}}return Be!==1/0&&Be}(le[0],le[1],ne)}}function Ef(o,n){return o.x*n.x+o.y*n.y}function Ew(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const v=n[s],_=o[0],w=p.sub(h),A=v.sub(h),z=_.sub(h),W=Ef(w,w),K=Ef(w,A),ne=Ef(A,A),le=Ef(z,w),me=Ef(z,A),Te=W*ne-K*K,Me=(ne*le-K*me)/Te,Be=(W*me-K*le)/Te,Qe=h.z*(1-Me-Be)+p.z*Me+v.z*Be;if(isFinite(Qe))return Qe}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const OP=J([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:LP}=OP,jP=J([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:DP}=jP,BP=Cl.VectorTileFeature.types,NP=Math.cos(Math.PI/180*37.5),Tw=Math.pow(2,14)/.5;class Wy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Au,this.layoutVertexArray2=new Nr,this.indexArray=new bl,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Xr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Uy("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),_=[];for(const{feature:w,id:A,index:z,sourceLayerIndex:W}of n){const K=this.layers[0]._featureFilter.needGeometry,ne=Ru(w,K);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),ne,h))continue;const le=v?p.evaluate(ne,{},h):void 0,me={id:A,properties:w.properties,type:w.type,sourceLayerIndex:W,index:z,geometry:K?ne.geometry:zu(w),patterns:{},sortKey:le};_.push(me)}v&&_.sort((w,A)=>w.sortKey-A.sortKey);for(const w of _){const{geometry:A,index:z,sourceLayerIndex:W}=w;if(this.hasPattern){const K=$y("line",this.layers,w,this.zoom,s);this.patternFeatures.push(K)}else this.addFeature(w,A,z,h,{});s.featureIndex.insert(n[z].feature,A,z,W,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,DP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,LP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,v){const _=this.layers[0].layout,w=_.get("line-join").evaluate(n,{}),A=_.get("line-cap"),z=_.get("line-miter-limit"),W=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const K of s)this.addLine(K,n,w,A,z,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,s,h,p,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<n.length-1;Be++)this.totalDistance+=n[Be].dist(n[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=BP[s.type]==="Polygon";let A=n.length;for(;A>=2&&n[A-1].equals(n[A-2]);)A--;let z=0;for(;z<A-1&&n[z].equals(n[z+1]);)z++;if(A<(w?3:2))return;h==="bevel"&&(v=1.05);const W=this.overscaling<=16?15*kr/(512*this.overscaling):0,K=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let ne,le,me,Te,Me;this.e1=this.e2=-1,w&&(ne=n[A-2],Me=n[z].sub(ne)._unit()._perp());for(let Be=z;Be<A;Be++){if(me=Be===A-1?w?n[z+1]:void 0:n[Be+1],me&&n[Be].equals(me))continue;Me&&(Te=Me),ne&&(le=ne),ne=n[Be],Me=me?me.sub(ne)._unit()._perp():Te,Te=Te||Me;let Qe=Te.add(Me);Qe.x===0&&Qe.y===0||Qe._unit();const We=Te.x*Me.x+Te.y*Me.y,Ye=Qe.x*Me.x+Qe.y*Me.y,pt=Ye!==0?1/Ye:1/0,gt=2*Math.sqrt(2-2*Ye),Dt=Ye<NP&&le&&me,Wt=Te.x*Me.y-Te.y*Me.x>0;if(Dt&&Be>z){const Ut=ne.dist(le);if(Ut>2*W){const Kt=ne.sub(ne.sub(le)._mult(W/Ut)._round());this.updateDistance(le,Kt),this.addCurrentVertex(Kt,Te,0,0,K),le=Kt}}const Ft=le&&me;let Pt=Ft?h:w?"butt":p;if(Ft&&Pt==="round"&&(pt<_?Pt="miter":pt<=2&&(Pt="fakeround")),Pt==="miter"&&pt>v&&(Pt="bevel"),Pt==="bevel"&&(pt>2&&(Pt="flipbevel"),pt<v&&(Pt="miter")),le&&this.updateDistance(le,ne),Pt==="miter")Qe._mult(pt),this.addCurrentVertex(ne,Qe,0,0,K);else if(Pt==="flipbevel"){if(pt>100)Qe=Me.mult(-1);else{const Ut=pt*Te.add(Me).mag()/Te.sub(Me).mag();Qe._perp()._mult(Ut*(Wt?-1:1))}this.addCurrentVertex(ne,Qe,0,0,K),this.addCurrentVertex(ne,Qe.mult(-1),0,0,K)}else if(Pt==="bevel"||Pt==="fakeround"){const Ut=-Math.sqrt(pt*pt-1),Kt=Wt?Ut:0,Ot=Wt?0:Ut;if(le&&this.addCurrentVertex(ne,Te,Kt,Ot,K),Pt==="fakeround"){const _t=Math.round(180*gt/Math.PI/20);for(let Gt=1;Gt<_t;Gt++){let $t=Gt/_t;if($t!==.5){const Gn=$t-.5;$t+=$t*Gn*($t-1)*((1.0904+We*(We*(3.55645-1.43519*We)-3.2452))*Gn*Gn+(.848013+We*(.215638*We-1.06021)))}const _n=Me.sub(Te)._mult($t)._add(Te)._unit()._mult(Wt?-1:1);this.addHalfVertex(ne,_n.x,_n.y,!1,Wt,0,K)}}me&&this.addCurrentVertex(ne,Me,-Kt,-Ot,K)}else if(Pt==="butt")this.addCurrentVertex(ne,Qe,0,0,K);else if(Pt==="square"){const Ut=le?1:-1;this.addCurrentVertex(ne,Qe,Ut,Ut,K)}else Pt==="round"&&(le&&(this.addCurrentVertex(ne,Te,0,0,K),this.addCurrentVertex(ne,Te,1,1,K,!0)),me&&(this.addCurrentVertex(ne,Me,-1,-1,K,!0),this.addCurrentVertex(ne,Me,0,0,K)));if(Dt&&Be<A-1){const Ut=ne.dist(me);if(Ut>2*W){const Kt=ne.add(me.sub(ne)._mult(W/Ut)._round());this.updateDistance(ne,Kt),this.addCurrentVertex(Kt,Me,0,0,K),ne=Kt}}}}addCurrentVertex(n,s,h,p,v,_=!1){const w=s.y*p-s.x,A=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,_,!1,h,v),this.addHalfVertex(n,w,A,_,!0,-p,v),this.distance>Tw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,v,_))}addHalfVertex({x:n,y:s},h,p,v,_,w,A){const z=.5*(this.lineClips?this.scaledDistance*(Tw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),A.primitiveLength++),_?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Cw,Iw;Nt("LineBucket",Wy,{omit:["layers","patternFeatures"]});var Aw={get paint(){return Iw=Iw||new g({"line-opacity":new y(nt.paint_line["line-opacity"]),"line-color":new y(nt.paint_line["line-color"]),"line-translate":new Xt(nt.paint_line["line-translate"]),"line-translate-anchor":new Xt(nt.paint_line["line-translate-anchor"]),"line-width":new y(nt.paint_line["line-width"]),"line-gap-width":new y(nt.paint_line["line-gap-width"]),"line-offset":new y(nt.paint_line["line-offset"]),"line-blur":new y(nt.paint_line["line-blur"]),"line-dasharray":new l(nt.paint_line["line-dasharray"]),"line-pattern":new r(nt.paint_line["line-pattern"]),"line-gradient":new d(nt.paint_line["line-gradient"])})},get layout(){return Cw=Cw||new g({"line-cap":new Xt(nt.layout_line["line-cap"]),"line-join":new y(nt.layout_line["line-join"]),"line-miter-limit":new Xt(nt.layout_line["line-miter-limit"]),"line-round-limit":new Xt(nt.layout_line["line-round-limit"]),"line-sort-key":new y(nt.layout_line["line-sort-key"])})}};class UP extends y{possiblyEvaluate(n,s){return s=new Qn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=E({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let Pp;class $P extends I{constructor(n){super(n,Aw),this.gradientVersion=0,Pp||(Pp=new UP(Aw.paint.properties["line-width"].specification),Pp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Ds,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Pp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Wy(n)}queryRadius(n){const s=n,h=Pw(yf("line-width",this,s),yf("line-gap-width",this,s)),p=yf("line-offset",this,s);return h/2+Math.abs(p)+bp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,p,v,_,w){const A=Sp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,w),z=w/2*Pw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),W=this.paint.get("line-offset").evaluate(s,h);return W&&(p=function(K,ne){const le=[];for(let me=0;me<K.length;me++){const Te=K[me],Me=[];for(let Be=0;Be<Te.length;Be++){const Qe=Te[Be-1],We=Te[Be],Ye=Te[Be+1],pt=Be===0?new b(0,0):We.sub(Qe)._unit()._perp(),gt=Be===Te.length-1?new b(0,0):Ye.sub(We)._unit()._perp(),Dt=pt._add(gt)._unit(),Wt=Dt.x*gt.x+Dt.y*gt.y;Wt!==0&&Dt._mult(1/Wt),Me.push(Dt._mult(ne)._add(We))}le.push(Me)}return le}(p,W*w)),function(K,ne,le){for(let me=0;me<ne.length;me++){const Te=ne[me];if(K.length>=3){for(let Me=0;Me<Te.length;Me++)if(kc(K,Te[Me]))return!0}if(YA(K,Te,le))return!0}return!1}(A,p,z)}isTileClipped(){return!0}}function Pw(o,n){return n>0?n+2*o:o}const VP=J([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),GP=J([{name:"a_projected_pos",components:3,type:"Float32"}],4);J([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const HP=J([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);J([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kw=J([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),WP=J([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ZP(o,n,s){return o.sections.forEach(h=>{h.text=function(p,v,_){const w=v.layout.get("text-transform").evaluate(_,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),ys.applyArabicShaping&&(p=ys.applyArabicShaping(p)),p}(h.text,n,s)}),o}J([{name:"triangle",components:3,type:"Uint16"}]),J([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),J([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),J([{type:"Float32",name:"offsetX"}]),J([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),J([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Tf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var $r=24,Mw=Vn,zw=function(o,n,s,h,p){var v,_,w=8*p-h-1,A=(1<<w)-1,z=A>>1,W=-7,K=s?p-1:0,ne=s?-1:1,le=o[n+K];for(K+=ne,v=le&(1<<-W)-1,le>>=-W,W+=w;W>0;v=256*v+o[n+K],K+=ne,W-=8);for(_=v&(1<<-W)-1,v>>=-W,W+=h;W>0;_=256*_+o[n+K],K+=ne,W-=8);if(v===0)v=1-z;else{if(v===A)return _?NaN:1/0*(le?-1:1);_+=Math.pow(2,h),v-=z}return(le?-1:1)*_*Math.pow(2,v-h)},Rw=function(o,n,s,h,p,v){var _,w,A,z=8*v-p-1,W=(1<<z)-1,K=W>>1,ne=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,le=h?0:v-1,me=h?1:-1,Te=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,_=W):(_=Math.floor(Math.log(n)/Math.LN2),n*(A=Math.pow(2,-_))<1&&(_--,A*=2),(n+=_+K>=1?ne/A:ne*Math.pow(2,1-K))*A>=2&&(_++,A/=2),_+K>=W?(w=0,_=W):_+K>=1?(w=(n*A-1)*Math.pow(2,p),_+=K):(w=n*Math.pow(2,K-1)*Math.pow(2,p),_=0));p>=8;o[s+le]=255&w,le+=me,w/=256,p-=8);for(_=_<<p|w,z+=p;z>0;o[s+le]=255&_,le+=me,_/=256,z-=8);o[s+le-me]|=128*Te};function Vn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Vn.Varint=0,Vn.Fixed64=1,Vn.Bytes=2,Vn.Fixed32=5;var Zy=4294967296,Fw=1/Zy,Ow=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function za(o){return o.type===Vn.Bytes?o.readVarint()+o.pos:o.pos+1}function Fc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Lw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function qP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function XP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function KP(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function YP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function JP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function QP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function ek(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function tk(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function nk(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function kp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Oc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function jw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Vn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=kp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=jw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=kp(this.buf,this.pos)+kp(this.buf,this.pos+4)*Zy;return this.pos+=8,o},readSFixed64:function(){var o=kp(this.buf,this.pos)+jw(this.buf,this.pos+4)*Zy;return this.pos+=8,o},readFloat:function(){var o=zw(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=zw(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,v,_){var w,A,z=_.buf;if(w=(112&(A=z[_.pos++]))>>4,A<128||(w|=(127&(A=z[_.pos++]))<<3,A<128)||(w|=(127&(A=z[_.pos++]))<<10,A<128)||(w|=(127&(A=z[_.pos++]))<<17,A<128)||(w|=(127&(A=z[_.pos++]))<<24,A<128)||(w|=(1&(A=z[_.pos++]))<<31,A<128))return Fc(p,w,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Ow?function(s,h,p){return Ow.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var v="",_=h;_<p;){var w,A,z,W=s[_],K=null,ne=W>239?4:W>223?3:W>191?2:1;if(_+ne>p)break;ne===1?W<128&&(K=W):ne===2?(192&(w=s[_+1]))==128&&(K=(31&W)<<6|63&w)<=127&&(K=null):ne===3?(A=s[_+2],(192&(w=s[_+1]))==128&&(192&A)==128&&((K=(15&W)<<12|(63&w)<<6|63&A)<=2047||K>=55296&&K<=57343)&&(K=null)):ne===4&&(A=s[_+2],z=s[_+3],(192&(w=s[_+1]))==128&&(192&A)==128&&(192&z)==128&&((K=(15&W)<<18|(63&w)<<12|(63&A)<<6|63&z)<=65535||K>=1114112)&&(K=null)),K===null?(K=65533,ne=1):K>65535&&(K-=65536,v+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),v+=String.fromCharCode(K),_+=ne}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Vn.Bytes)return o.push(this.readVarint(n));var s=za(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Vn.Bytes)return o.push(this.readSVarint());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Vn.Bytes)return o.push(this.readBoolean());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Vn.Bytes)return o.push(this.readFloat());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Vn.Bytes)return o.push(this.readDouble());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Vn.Bytes)return o.push(this.readFixed32());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Vn.Bytes)return o.push(this.readSFixed32());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Vn.Bytes)return o.push(this.readFixed64());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Vn.Bytes)return o.push(this.readSFixed64());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Vn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Vn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Vn.Fixed32)this.pos+=4;else{if(n!==Vn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Oc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Oc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Oc(this.buf,-1&o,this.pos),Oc(this.buf,Math.floor(o*Fw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Oc(this.buf,-1&o,this.pos),Oc(this.buf,Math.floor(o*Fw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,_,w){w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,w.buf[w.pos]=127&(v>>>=7)}(h,0,s),function(v,_){var w=(7&v)<<4;_.buf[_.pos++]|=w|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var _,w,A=0;A<p.length;A++){if((_=p.charCodeAt(A))>55295&&_<57344){if(!w){_>56319||A+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):w=_;continue}if(_<56320){h[v++]=239,h[v++]=191,h[v++]=189,w=_;continue}_=w-55296<<10|_-56320|65536,w=null}else w&&(h[v++]=239,h[v++]=191,h[v++]=189,w=null);_<128?h[v++]=_:(_<2048?h[v++]=_>>6|192:(_<65536?h[v++]=_>>12|224:(h[v++]=_>>18|240,h[v++]=_>>12&63|128),h[v++]=_>>6&63|128),h[v++]=63&_|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Lw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Rw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Rw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Lw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Vn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,qP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,XP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,JP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,KP,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,YP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,QP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,ek,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,tk,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,nk,n)},writeBytesField:function(o,n){this.writeTag(o,Vn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Vn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Vn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Vn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Vn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Vn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Vn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Vn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Vn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Vn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var qy=S(Mw);const Xy=3;function rk(o,n,s){o===1&&s.readMessage(ik,n)}function ik(o,n,s){if(o===3){const{id:h,bitmap:p,width:v,height:_,left:w,top:A,advance:z}=s.readMessage(ok,{});n.push({id:h,bitmap:new _f({width:v+2*Xy,height:_+2*Xy},p),metrics:{width:v,height:_,left:w,top:A,advance:z}})}}function ok(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Dw=Xy;function Bw(o){let n=0,s=0;for(const _ of o)n+=_.w*_.h,s=Math.max(s,_.w);o.sort((_,w)=>w.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,v=0;for(const _ of o)for(let w=h.length-1;w>=0;w--){const A=h[w];if(!(_.w>A.w||_.h>A.h)){if(_.x=A.x,_.y=A.y,v=Math.max(v,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===A.w&&_.h===A.h){const z=h.pop();w<h.length&&(h[w]=z)}else _.h===A.h?(A.x+=_.w,A.w-=_.w):_.w===A.w?(A.y+=_.h,A.h-=_.h):(h.push({x:A.x+_.w,y:A.y,w:A.w-_.w,h:_.h}),A.y+=_.h,A.h-=_.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}const Zi=1;class Ky{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:v,content:_,textFitWidth:w,textFitHeight:A}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=_,this.version=h,this.textFitWidth=w,this.textFitHeight=A}get tl(){return[this.paddedRect.x+Zi,this.paddedRect.y+Zi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Zi,this.paddedRect.y+this.paddedRect.h-Zi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Zi)/this.pixelRatio,(this.paddedRect.h-2*Zi)/this.pixelRatio]}}class Nw{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,p,v);const{w:_,h:w}=Bw(v),A=new Ao({width:_||1,height:w||1});for(const z in n){const W=n[z],K=h[z].paddedRect;Ao.copy(W.data,A,{x:0,y:0},{x:K.x+Zi,y:K.y+Zi},W.data)}for(const z in s){const W=s[z],K=p[z].paddedRect,ne=K.x+Zi,le=K.y+Zi,me=W.data.width,Te=W.data.height;Ao.copy(W.data,A,{x:0,y:0},{x:ne,y:le},W.data),Ao.copy(W.data,A,{x:0,y:Te-1},{x:ne,y:le-1},{width:me,height:1}),Ao.copy(W.data,A,{x:0,y:0},{x:ne,y:le+Te},{width:me,height:1}),Ao.copy(W.data,A,{x:me-1,y:0},{x:ne-1,y:le},{width:1,height:Te}),Ao.copy(W.data,A,{x:0,y:0},{x:ne+me,y:le},{width:1,height:Te})}this.image=A,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const v=n[p],_={x:0,y:0,w:v.data.width+2*Zi,h:v.data.height+2*Zi};h.push(_),s[p]=new Ky(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,v]=n.tl;h.update(s.data,void 0,{x:p,y:v})}}var Il;Nt("ImagePosition",Ky),Nt("ImageAtlas",Nw),f.ah=void 0,(Il=f.ah||(f.ah={}))[Il.none=0]="none",Il[Il.horizontal=1]="horizontal",Il[Il.vertical=2]="vertical",Il[Il.horizontalOnly=3]="horizontalOnly";const Cf=-17;class If{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new If;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new If;return s.imageName=n,s}}class Lc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Lc;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=p&&Ys(p)&&!Tf[n[h+1]]||v&&Ys(v)&&!Tf[n[h-1]]||!Tf[n[h]]?n[h]:Tf[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&zp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&zp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Lc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(If.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(If.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Mp(o,n,s,h,p,v,_,w,A,z,W,K,ne,le,me,Te){const Me=Lc.fromFeature(o,p);let Be;K===f.ah.vertical&&Me.verticalizePunctuation();const{processBidirectionalText:Qe,processStyledBidirectionalText:We}=ys;if(Qe&&Me.sections.length===1){Be=[];const gt=Qe(Me.toString(),Yy(Me,z,v,n,h,le,me));for(const Dt of gt){const Wt=new Lc;Wt.text=Dt,Wt.sections=Me.sections;for(let Ft=0;Ft<Dt.length;Ft++)Wt.sectionIndex.push(0);Be.push(Wt)}}else if(We){Be=[];const gt=We(Me.text,Me.sectionIndex,Yy(Me,z,v,n,h,le,me));for(const Dt of gt){const Wt=new Lc;Wt.text=Dt[0],Wt.sectionIndex=Dt[1],Wt.sections=Me.sections,Be.push(Wt)}}else Be=function(gt,Dt){const Wt=[],Ft=gt.text;let Pt=0;for(const Ut of Dt)Wt.push(gt.substring(Pt,Ut)),Pt=Ut;return Pt<Ft.length&&Wt.push(gt.substring(Pt,Ft.length)),Wt}(Me,Yy(Me,z,v,n,h,le,me));const Ye=[],pt={positionedLines:Ye,text:Me.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:K,iconsInText:!1,verticalizable:!1};return function(gt,Dt,Wt,Ft,Pt,Ut,Kt,Ot,_t,Gt,$t,_n){let Gn=0,Hn=Cf,Mr=0,ko=0;const _i=Ot==="right"?1:Ot==="left"?0:.5;let Vr=0;for(const zr of Pt){zr.trim();const Kr=zr.getMaxScale(),Li=(Kr-1)*$r,qi={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Vr]=qi;const ai=qi.positionedGlyphs;let Xi=0;if(!zr.length()){Hn+=Ut,++Vr;continue}for(let yr=0;yr<zr.length();yr++){const Cn=zr.getSection(yr),Rr=zr.getSectionIndex(yr),li=zr.getCharCode(yr);let Gr=0,es=null,_s=null,xs=null,Ra=$r;const ts=!(_t===f.ah.horizontal||!$t&&!lf(li)||$t&&(zp[li]||(Qr=li,jt.Arabic(Qr)||jt["Arabic Supplement"](Qr)||jt["Arabic Extended-A"](Qr)||jt["Arabic Presentation Forms-A"](Qr)||jt["Arabic Presentation Forms-B"](Qr))));if(Cn.imageName){const zo=Ft[Cn.imageName];if(!zo)continue;xs=Cn.imageName,gt.iconsInText=gt.iconsInText||!0,_s=zo.paddedRect;const Ki=zo.displaySize;Cn.scale=Cn.scale*$r/_n,es={width:Ki[0],height:Ki[1],left:Zi,top:-Dw,advance:ts?Ki[1]:Ki[0]},Gr=Li+($r-Ki[1]*Cn.scale),Ra=es.advance;const Fa=ts?Ki[0]*Cn.scale-$r*Kr:Ki[1]*Cn.scale-$r*Kr;Fa>0&&Fa>Xi&&(Xi=Fa)}else{const zo=Wt[Cn.fontStack],Ki=zo&&zo[li];if(Ki&&Ki.rect)_s=Ki.rect,es=Ki.metrics;else{const Fa=Dt[Cn.fontStack],zf=Fa&&Fa[li];if(!zf)continue;es=zf.metrics}Gr=(Kr-Cn.scale)*$r}ts?(gt.verticalizable=!0,ai.push({glyph:li,imageName:xs,x:Gn,y:Hn+Gr,vertical:ts,scale:Cn.scale,fontStack:Cn.fontStack,sectionIndex:Rr,metrics:es,rect:_s}),Gn+=Ra*Cn.scale+Gt):(ai.push({glyph:li,imageName:xs,x:Gn,y:Hn+Gr,vertical:ts,scale:Cn.scale,fontStack:Cn.fontStack,sectionIndex:Rr,metrics:es,rect:_s}),Gn+=es.advance*Cn.scale+Gt)}ai.length!==0&&(Mr=Math.max(Gn-Gt,Mr),lk(ai,0,ai.length-1,_i,Xi)),Gn=0;const Mo=Ut*Kr+Xi;qi.lineOffset=Math.max(Xi,Li),Hn+=Mo,ko=Math.max(Mo,ko),++Vr}var Qr;const xi=Hn-Cf,{horizontalAlign:Oi,verticalAlign:wi}=Jy(Kt);(function(zr,Kr,Li,qi,ai,Xi,Mo,yr,Cn){const Rr=(Kr-Li)*ai;let li=0;li=Xi!==Mo?-yr*qi-Cf:(-qi*Cn+.5)*Mo;for(const Gr of zr)for(const es of Gr.positionedGlyphs)es.x+=Rr,es.y+=li})(gt.positionedLines,_i,Oi,wi,Mr,ko,Ut,xi,Pt.length),gt.top+=-wi*xi,gt.bottom=gt.top+xi,gt.left+=-Oi*Mr,gt.right=gt.left+Mr}(pt,n,s,h,Be,_,w,A,K,z,ne,Te),!function(gt){for(const Dt of gt)if(Dt.positionedGlyphs.length!==0)return!1;return!0}(Ye)&&pt}const zp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},sk={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Uw(o,n,s,h,p,v){if(n.imageName){const _=h[n.imageName];return _?_.displaySize[0]*n.scale*$r/v+p:0}{const _=s[n.fontStack],w=_&&_[o];return w?w.metrics.advance*n.scale+p:0}}function $w(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function ak(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Vw(o,n,s,h,p,v){let _=null,w=$w(n,s,p,v);for(const A of h){const z=$w(n-A.x,s,p,v)+A.badness;z<=w&&(_=A,w=z)}return{index:o,x:n,priorBreak:_,badness:w}}function Gw(o){return o?Gw(o.priorBreak).concat(o.index):[]}function Yy(o,n,s,h,p,v,_){if(v!=="point")return[];if(!o)return[];const w=[],A=function(ne,le,me,Te,Me,Be){let Qe=0;for(let We=0;We<ne.length();We++){const Ye=ne.getSection(We);Qe+=Uw(ne.getCharCode(We),Ye,Te,Me,le,Be)}return Qe/Math.max(1,Math.ceil(Qe/me))}(o,n,s,h,p,_),z=o.text.indexOf("")>=0;let W=0;for(let ne=0;ne<o.length();ne++){const le=o.getSection(ne),me=o.getCharCode(ne);if(zp[me]||(W+=Uw(me,le,h,p,n,_)),ne<o.length()-1){const Te=!((K=me)<11904||!(jt["Bopomofo Extended"](K)||jt.Bopomofo(K)||jt["CJK Compatibility Forms"](K)||jt["CJK Compatibility Ideographs"](K)||jt["CJK Compatibility"](K)||jt["CJK Radicals Supplement"](K)||jt["CJK Strokes"](K)||jt["CJK Symbols and Punctuation"](K)||jt["CJK Unified Ideographs Extension A"](K)||jt["CJK Unified Ideographs"](K)||jt["Enclosed CJK Letters and Months"](K)||jt["Halfwidth and Fullwidth Forms"](K)||jt.Hiragana(K)||jt["Ideographic Description Characters"](K)||jt["Kangxi Radicals"](K)||jt["Katakana Phonetic Extensions"](K)||jt.Katakana(K)||jt["Vertical Forms"](K)||jt["Yi Radicals"](K)||jt["Yi Syllables"](K)));(sk[me]||Te||le.imageName)&&w.push(Vw(ne+1,W,A,w,ak(me,o.getCharCode(ne+1),Te&&z),!1))}}var K;return Gw(Vw(o.length(),W,A,w,0,!0))}function Jy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function lk(o,n,s,h,p){if(!h&&!p)return;const v=o[s],_=(o[s].x+v.metrics.advance*v.scale)*h;for(let w=n;w<=s;w++)o[w].x-=_,o[w].y+=p}function uk(o,n,s){const{horizontalAlign:h,verticalAlign:p}=Jy(s),v=n[0]-o.displaySize[0]*h,_=n[1]-o.displaySize[1]*p;return{image:o,top:_,bottom:_+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Hw(o){var n,s;let h=o.left,p=o.top,v=o.right-h,_=o.bottom-p;const w=(n=o.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",A=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",z=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(A==="proportional"){if(w==="stretchOnly"&&v/_<z||w==="proportional"){const W=Math.ceil(_*z);h*=W/v,v=W}}else if(w==="proportional"&&A==="stretchOnly"&&z!==0&&v/_>z){const W=Math.ceil(v/z);p*=W/_,_=W}return{x1:h,y1:p,x2:h+v,y2:p+_}}function Ww(o,n,s,h,p,v){const _=o.image;let w;if(_.content){const Me=_.content,Be=_.pixelRatio||1;w=[Me[0]/Be,Me[1]/Be,_.displaySize[0]-Me[2]/Be,_.displaySize[1]-Me[3]/Be]}const A=n.left*v,z=n.right*v;let W,K,ne,le;s==="width"||s==="both"?(le=p[0]+A-h[3],K=p[0]+z+h[1]):(le=p[0]+(A+z-_.displaySize[0])/2,K=le+_.displaySize[0]);const me=n.top*v,Te=n.bottom*v;return s==="height"||s==="both"?(W=p[1]+me-h[0],ne=p[1]+Te+h[2]):(W=p[1]+(me+Te-_.displaySize[1])/2,ne=W+_.displaySize[1]),{image:_,top:W,right:K,bottom:ne,left:le,collisionPadding:w}}const Af=255,Qs=128,Al=Af*Qs;function Zw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Qn(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let _=v;for(;_<h.length&&h[_]<o+1;)_++;_=Math.min(h.length-1,_);const w=h[v],A=h[_];return s.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:A,minSize:s.evaluate(new Qn(w)),maxSize:s.evaluate(new Qn(A)),interpolationType:p}}}function Qy(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}const ck=Cl.VectorTileFeature.types,hk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Rp(o,n,s,h,p,v,_,w,A,z,W,K,ne){const le=w?Math.min(Al,Math.round(w[0])):0,me=w?Math.min(Al,Math.round(w[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),v,_,(le<<1)+(A?1:0),me,16*z,16*W,256*K,256*ne)}function e0(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function fk(o){for(const n of o.sections)if(mp(n.text))return!0;return!1}class t0{constructor(n){this.layoutVertexArray=new yo,this.indexArray=new bl,this.programConfigurations=n,this.segments=new Xr,this.dynamicLayoutVertexArray=new Ur,this.opacityVertexArray=new Ey,this.hasVisibleVertices=!1,this.placedSymbolArray=new Wi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,VP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,GP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,hk,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Nt("SymbolBuffers",t0);class n0{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Xr,this.collisionVertexArray=new Ty}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,HP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Nt("CollisionBuffers",n0);class jc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Fy([]),this.placementViewportMatrix=Fy([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Zw(this.zoom,s["text-size"]),this.iconSizeData=Zw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Qy(h,"text-overlap","text-allow-overlap")!=="never"||Qy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>f.ah[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new t0(new Mu(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new t0(new Mu(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ri,this.lineVertexArray=new Io,this.symbolInstances=new gr,this.textAnchorOffsets=new Js}calculateGlyphDependencies(n,s,h,p,v){for(let _=0;_<n.length;_++)if(s[n.charCodeAt(_)]=!0,(h||p)&&v){const w=Tf[n.charAt(_)];w&&(s[w.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],v=p.layout,_=v.get("text-font"),w=v.get("text-field"),A=v.get("icon-image"),z=(w.value.kind!=="constant"||w.value.value instanceof xr&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),W=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,K=v.get("symbol-sort-key");if(this.features=[],!z&&!W)return;const ne=s.iconDependencies,le=s.glyphDependencies,me=s.availableImages,Te=new Qn(this.zoom);for(const{feature:Me,id:Be,index:Qe,sourceLayerIndex:We}of n){const Ye=p._featureFilter.needGeometry,pt=Ru(Me,Ye);if(!p._featureFilter.filter(Te,pt,h))continue;let gt,Dt;if(Ye||(pt.geometry=zu(Me)),z){const Ft=p.getValueAndResolveTokens("text-field",pt,h,me),Pt=xr.factory(Ft),Ut=this.hasRTLText=this.hasRTLText||fk(Pt);(!Ut||ys.getRTLTextPluginStatus()==="unavailable"||Ut&&ys.isParsed())&&(gt=ZP(Pt,p,pt))}if(W){const Ft=p.getValueAndResolveTokens("icon-image",pt,h,me);Dt=Ft instanceof Ai?Ft:Ai.fromString(Ft)}if(!gt&&!Dt)continue;const Wt=this.sortFeaturesByKey?K.evaluate(pt,{},h):void 0;if(this.features.push({id:Be,text:gt,icon:Dt,index:Qe,sourceLayerIndex:We,geometry:pt.geometry,properties:Me.properties,type:ck[Me.type],sortKey:Wt}),Dt&&(ne[Dt.name]=!0),gt){const Ft=_.evaluate(pt,{},h).join(","),Pt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.ah.vertical)>=0;for(const Ut of gt.sections)if(Ut.image)ne[Ut.image.name]=!0;else{const Kt=af(gt.toString()),Ot=Ut.fontStack||Ft,_t=le[Ot]=le[Ot]||{};this.calculateGlyphDependencies(Ut.text,_t,Pt,this.allowVerticalPlacement,Kt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Me){const Be={},Qe={},We=[];let Ye=0;function pt(Ft){We.push(Me[Ft]),Ye++}function gt(Ft,Pt,Ut){const Kt=Qe[Ft];return delete Qe[Ft],Qe[Pt]=Kt,We[Kt].geometry[0].pop(),We[Kt].geometry[0]=We[Kt].geometry[0].concat(Ut[0]),Kt}function Dt(Ft,Pt,Ut){const Kt=Be[Pt];return delete Be[Pt],Be[Ft]=Kt,We[Kt].geometry[0].shift(),We[Kt].geometry[0]=Ut[0].concat(We[Kt].geometry[0]),Kt}function Wt(Ft,Pt,Ut){const Kt=Ut?Pt[0][Pt[0].length-1]:Pt[0][0];return`${Ft}:${Kt.x}:${Kt.y}`}for(let Ft=0;Ft<Me.length;Ft++){const Pt=Me[Ft],Ut=Pt.geometry,Kt=Pt.text?Pt.text.toString():null;if(!Kt){pt(Ft);continue}const Ot=Wt(Kt,Ut),_t=Wt(Kt,Ut,!0);if(Ot in Qe&&_t in Be&&Qe[Ot]!==Be[_t]){const Gt=Dt(Ot,_t,Ut),$t=gt(Ot,_t,We[Gt].geometry);delete Be[Ot],delete Qe[_t],Qe[Wt(Kt,We[$t].geometry,!0)]=$t,We[Gt].geometry=null}else Ot in Qe?gt(Ot,_t,Ut):_t in Be?Dt(Ot,_t,Ut):(pt(Ft),Be[Ot]=Ye-1,Qe[_t]=Ye-1)}return We.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Me,Be)=>Me.sortKey-Be.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const _={};for(let w=n.segment+1;w<s.length;w++)_[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:p},w<s.length-1&&(p+=s[w+1].dist(s[w]));for(let w=n.segment||0;w>=0;w--)_[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=s[w-1].dist(s[w]));for(let w=0;w<s.length;w++){const A=_[w];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,v,_,w,A,z,W,K,ne){const le=n.indexArray,me=n.layoutVertexArray,Te=n.segments.prepareSegment(4*s.length,me,le,this.canOverlap?_.sortKey:void 0),Me=this.glyphOffsetArray.length,Be=Te.vertexLength,Qe=this.allowVerticalPlacement&&w===f.ah.vertical?Math.PI/2:0,We=_.text&&_.text.sections;for(let Ye=0;Ye<s.length;Ye++){const{tl:pt,tr:gt,bl:Dt,br:Wt,tex:Ft,pixelOffsetTL:Pt,pixelOffsetBR:Ut,minFontScaleX:Kt,minFontScaleY:Ot,glyphOffset:_t,isSDF:Gt,sectionIndex:$t}=s[Ye],_n=Te.vertexLength,Gn=_t[1];Rp(me,A.x,A.y,pt.x,Gn+pt.y,Ft.x,Ft.y,h,Gt,Pt.x,Pt.y,Kt,Ot),Rp(me,A.x,A.y,gt.x,Gn+gt.y,Ft.x+Ft.w,Ft.y,h,Gt,Ut.x,Pt.y,Kt,Ot),Rp(me,A.x,A.y,Dt.x,Gn+Dt.y,Ft.x,Ft.y+Ft.h,h,Gt,Pt.x,Ut.y,Kt,Ot),Rp(me,A.x,A.y,Wt.x,Gn+Wt.y,Ft.x+Ft.w,Ft.y+Ft.h,h,Gt,Ut.x,Ut.y,Kt,Ot),e0(n.dynamicLayoutVertexArray,A,Qe),le.emplaceBack(_n,_n+1,_n+2),le.emplaceBack(_n+1,_n+2,_n+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_t[0]),Ye!==s.length-1&&$t===s[Ye+1].sectionIndex||n.programConfigurations.populatePaintArrays(me.length,_,_.index,{},ne,We&&We[$t])}n.placedSymbolArray.emplaceBack(A.x,A.y,Me,this.glyphOffsetArray.length-Me,Be,z,W,A.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],w,0,!1,0,K)}_addCollisionDebugVertex(n,s,h,p,v,_){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,s,h,p,v,_,w){const A=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),z=A.vertexLength,W=v.layoutVertexArray,K=v.collisionVertexArray,ne=w.anchorX,le=w.anchorY;this._addCollisionDebugVertex(W,K,_,ne,le,new b(n,s)),this._addCollisionDebugVertex(W,K,_,ne,le,new b(h,s)),this._addCollisionDebugVertex(W,K,_,ne,le,new b(h,p)),this._addCollisionDebugVertex(W,K,_,ne,le,new b(n,p)),A.vertexLength+=4;const me=v.indexArray;me.emplaceBack(z,z+1),me.emplaceBack(z+1,z+2),me.emplaceBack(z+2,z+3),me.emplaceBack(z+3,z),A.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let v=n;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new n0(yp,kw.members,ff),this.iconCollisionBox=new n0(yp,kw.members,ff);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,v,_,w,A,z){const W={};for(let K=s;K<h;K++){const ne=n.get(K);W.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},W.textFeatureIndex=ne.featureIndex;break}for(let K=p;K<v;K++){const ne=n.get(K);W.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},W.verticalTextFeatureIndex=ne.featureIndex;break}for(let K=_;K<w;K++){const ne=n.get(K);W.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},W.iconFeatureIndex=ne.featureIndex;break}for(let K=A;K<z;K++){const ne=n.get(K);W.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},W.verticalIconFeatureIndex=ne.featureIndex;break}return W}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],v=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);const A=this.symbolInstances.get(w);p.push(0|Math.round(s*A.anchorX+h*A.anchorY)),v.push(A.featureIndex)}return _.sort((w,A)=>p[w]-p[A]||v[A]-v[w]),_}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,_)=>{p>=0&&_.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let qw,Xw;Nt("SymbolBucket",jc,{omit:["layers","collisionBoxArray","features","compareText"]}),jc.MAX_GLYPHS=65535,jc.addDynamicAttributes=e0;var r0={get paint(){return Xw=Xw||new g({"icon-opacity":new y(nt.paint_symbol["icon-opacity"]),"icon-color":new y(nt.paint_symbol["icon-color"]),"icon-halo-color":new y(nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new y(nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new y(nt.paint_symbol["icon-halo-blur"]),"icon-translate":new Xt(nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xt(nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new y(nt.paint_symbol["text-opacity"]),"text-color":new y(nt.paint_symbol["text-color"],{runtimeType:hn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new y(nt.paint_symbol["text-halo-color"]),"text-halo-width":new y(nt.paint_symbol["text-halo-width"]),"text-halo-blur":new y(nt.paint_symbol["text-halo-blur"]),"text-translate":new Xt(nt.paint_symbol["text-translate"]),"text-translate-anchor":new Xt(nt.paint_symbol["text-translate-anchor"])})},get layout(){return qw=qw||new g({"symbol-placement":new Xt(nt.layout_symbol["symbol-placement"]),"symbol-spacing":new Xt(nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xt(nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new y(nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xt(nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xt(nt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Xt(nt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Xt(nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xt(nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xt(nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new y(nt.layout_symbol["icon-size"]),"icon-text-fit":new Xt(nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xt(nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new y(nt.layout_symbol["icon-image"]),"icon-rotate":new y(nt.layout_symbol["icon-rotate"]),"icon-padding":new y(nt.layout_symbol["icon-padding"]),"icon-keep-upright":new Xt(nt.layout_symbol["icon-keep-upright"]),"icon-offset":new y(nt.layout_symbol["icon-offset"]),"icon-anchor":new y(nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xt(nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xt(nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xt(nt.layout_symbol["text-rotation-alignment"]),"text-field":new y(nt.layout_symbol["text-field"]),"text-font":new y(nt.layout_symbol["text-font"]),"text-size":new y(nt.layout_symbol["text-size"]),"text-max-width":new y(nt.layout_symbol["text-max-width"]),"text-line-height":new Xt(nt.layout_symbol["text-line-height"]),"text-letter-spacing":new y(nt.layout_symbol["text-letter-spacing"]),"text-justify":new y(nt.layout_symbol["text-justify"]),"text-radial-offset":new y(nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xt(nt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new y(nt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new y(nt.layout_symbol["text-anchor"]),"text-max-angle":new Xt(nt.layout_symbol["text-max-angle"]),"text-writing-mode":new Xt(nt.layout_symbol["text-writing-mode"]),"text-rotate":new y(nt.layout_symbol["text-rotate"]),"text-padding":new Xt(nt.layout_symbol["text-padding"]),"text-keep-upright":new Xt(nt.layout_symbol["text-keep-upright"]),"text-transform":new y(nt.layout_symbol["text-transform"]),"text-offset":new y(nt.layout_symbol["text-offset"]),"text-allow-overlap":new Xt(nt.layout_symbol["text-allow-overlap"]),"text-overlap":new Xt(nt.layout_symbol["text-overlap"]),"text-ignore-placement":new Xt(nt.layout_symbol["text-ignore-placement"]),"text-optional":new Xt(nt.layout_symbol["text-optional"])})}};class Kw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:tt,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Nt("FormatSectionOverride",Kw,{omit:["defaultValue"]});class Fp extends I{constructor(n){super(n,r0)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const v=this.layout.get(n).evaluate(s,{},h,p),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Mt(_.value)||!v?v:function(w,A){return A.replace(/{([^{}]+)}/g,(z,W)=>w&&W in w?String(w[W]):"")}(s.properties,v)}createBucket(n){return new jc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of r0.paint.overridableProperties){if(!Fp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Kw(s),p=new at(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Zt("source",p):new qt("composite",p,s.value.zoomStops),this.paint._values[n]=new Jo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Fp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=r0.paint.properties[s];let v=!1;const _=w=>{for(const A of w)if(p.overrides&&p.overrides.hasOverride(A))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof xr)_(h.value.value.sections);else if(h.value.kind==="source"){const w=z=>{v||(z instanceof hs&&pr(z.value)===fi?_(z.value.sections):z instanceof ll?_(z.sections):z.eachChild(w))},A=h.value;A._styleExpression&&w(A._styleExpression.expression)}return v}}let Yw;var dk={get paint(){return Yw=Yw||new g({"background-color":new Xt(nt.paint_background["background-color"]),"background-pattern":new l(nt.paint_background["background-pattern"]),"background-opacity":new Xt(nt.paint_background["background-opacity"])})}};class pk extends I{constructor(n){super(n,dk)}}let Jw;var mk={get paint(){return Jw=Jw||new g({"raster-opacity":new Xt(nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xt(nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xt(nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xt(nt.paint_raster["raster-brightness-max"]),"raster-saturation":new Xt(nt.paint_raster["raster-saturation"]),"raster-contrast":new Xt(nt.paint_raster["raster-contrast"]),"raster-resampling":new Xt(nt.paint_raster["raster-resampling"]),"raster-fade-duration":new Xt(nt.paint_raster["raster-fade-duration"])})}};class gk extends I{constructor(n){super(n,mk)}}class yk extends I{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class vk{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const i0=63710088e-1;class Pl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pl(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return i0*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Pl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Pl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Pl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Qw=2*Math.PI*i0;function eb(o){return Qw*Math.cos(o*Math.PI/180)}function tb(o){return(180+o)/360}function nb(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function rb(o,n){return o/eb(n)}function o0(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Op{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Pl.convert(n);return new Op(tb(h.lng),nb(h.lat),rb(s,h.lat))}toLngLat(){return new Pl(360*this.x-180,o0(this.y))}toAltitude(){return this.z*eb(o0(this.y))}meterInMercatorCoordinateUnits(){return 1/Qw*(n=o0(this.y),1/Math.cos(n*Math.PI/180));var n}}function ib(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class s0{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Pf(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(_=this.y,w=this.z,A=ib(256*(v=this.x),256*(_=Math.pow(2,w)-_-1),w),z=ib(256*(v+1),256*(_+1),w),A[0]+","+A[1]+","+z[0]+","+z[1]);var v,_,w,A,z;const W=function(K,ne,le){let me,Te="";for(let Me=K;Me>0;Me--)me=1<<Me-1,Te+=(ne&me?1:0)+(le&me?2:0);return Te}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new b((n.x*s-this.x)*kr,(n.y*s-this.y)*kr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ob{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Pf(n,s.z,s.z,s.x,s.y)}}class Po{constructor(n,s,h,p,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new s0(h,+p,+v),this.key=Pf(s,n,h,p,v)}clone(){return new Po(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Po(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Po(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Pf(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Pf(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Po(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Po(s,this.wrap,s,h,p),new Po(s,this.wrap,s,h+1,p),new Po(s,this.wrap,s,h,p+1),new Po(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Po(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Po(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ob(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Op(n.x-this.wrap,n.y))}}function Pf(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+h).toString(36)+s.toString(36)+n.toString(36)}Nt("CanonicalTileID",s0),Nt("OverscaledTileID",Po,{omit:["posMatrix"]});class sb{constructor(n,s,h,p=1,v=1,_=1,w=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const A=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=_,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<A;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(A,z)]=this.data[this._idx(A-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,A)]=this.data[this._idx(z,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<A;z++)for(let W=0;W<A;W++){const K=this.get(z,W);K>this.max&&(this.max=K),K<this.min&&(this.min=K)}}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,_=h*this.dim,w=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:_=w-1;break;case 1:w=_+1}const A=-s*this.dim,z=-h*this.dim;for(let W=_;W<w;W++)for(let K=p;K<v;K++)this.data[this._idx(K,W)]=n.data[this._idx(K+A,W+z)]}}Nt("DEMData",sb);class ab{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class lb{constructor(n,s,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class ub{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Tu(kr,16,0),this.grid3D=new Tu(kr,16,0),this.featureIndexArray=new Pa,this.promoteId=s}insert(n,s,h,p,v,_){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const A=_?this.grid3D:this.grid;for(let z=0;z<s.length;z++){const W=s[z],K=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<W.length;ne++){const le=W[ne];K[0]=Math.min(K[0],le.x),K[1]=Math.min(K[1],le.y),K[2]=Math.max(K[2],le.x),K[3]=Math.max(K[3],le.y)}K[0]<kr&&K[1]<kr&&K[2]>=0&&K[3]>=0&&A.insert(w,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Cl.VectorTile(new qy(this.rawTileData)).layers,this.sourceLayerCoder=new ab(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const v=n.params||{},_=kr/n.tileSize/n.scale,w=Pr(v.filter),A=n.queryGeometry,z=n.queryPadding*_,W=hb(A),K=this.grid.query(W.minX-z,W.minY-z,W.maxX+z,W.maxY+z),ne=hb(n.cameraQueryGeometry),le=this.grid3D.query(ne.minX-z,ne.minY-z,ne.maxX+z,ne.maxY+z,(Me,Be,Qe,We)=>function(Ye,pt,gt,Dt,Wt){for(const Pt of Ye)if(pt<=Pt.x&&gt<=Pt.y&&Dt>=Pt.x&&Wt>=Pt.y)return!0;const Ft=[new b(pt,gt),new b(pt,Wt),new b(Dt,Wt),new b(Dt,gt)];if(Ye.length>2){for(const Pt of Ft)if(kc(Ye,Pt))return!0}for(let Pt=0;Pt<Ye.length-1;Pt++)if(QA(Ye[Pt],Ye[Pt+1],Ft))return!0;return!1}(n.cameraQueryGeometry,Me-z,Be-z,Qe+z,We+z));for(const Me of le)K.push(Me);K.sort(_k);const me={};let Te;for(let Me=0;Me<K.length;Me++){const Be=K[Me];if(Be===Te)continue;Te=Be;const Qe=this.featureIndexArray.get(Be);let We=null;this.loadMatchingFeature(me,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,w,v.layers,v.availableImages,s,h,p,(Ye,pt,gt)=>(We||(We=zu(Ye)),pt.queryIntersectsFeature(A,Ye,gt,We,this.z,n.transform,_,n.pixelPosMatrix)))}return me}loadMatchingFeature(n,s,h,p,v,_,w,A,z,W,K){const ne=this.bucketLayerIDs[s];if(_&&!function(Me,Be){for(let Qe=0;Qe<Me.length;Qe++)if(Be.indexOf(Me[Qe])>=0)return!0;return!1}(_,ne))return;const le=this.sourceLayerCoder.decode(h),me=this.vtLayers[le].feature(p);if(v.needGeometry){const Me=Ru(me,!0);if(!v.filter(new Qn(this.tileID.overscaledZ),Me,this.tileID.canonical))return}else if(!v.filter(new Qn(this.tileID.overscaledZ),me))return;const Te=this.getId(me,le);for(let Me=0;Me<ne.length;Me++){const Be=ne[Me];if(_&&_.indexOf(Be)<0)continue;const Qe=A[Be];if(!Qe)continue;let We={};Te&&W&&(We=W.getState(Qe.sourceLayer||"_geojsonTileLayer",Te));const Ye=E({},z[Be]);Ye.paint=cb(Ye.paint,Qe.paint,me,We,w),Ye.layout=cb(Ye.layout,Qe.layout,me,We,w);const pt=!K||K(me,Qe,We);if(!pt)continue;const gt=new lb(me,this.z,this.x,this.y,Te);gt.layer=Ye;let Dt=n[Be];Dt===void 0&&(Dt=n[Be]=[]),Dt.push({featureIndex:p,feature:gt,intersectionZ:pt})}}lookupSymbolFeatures(n,s,h,p,v,_,w,A){const z={};this.loadVTLayers();const W=Pr(v);for(const K of n)this.loadMatchingFeature(z,h,p,K,W,_,w,A,s);return z}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function cb(o,n,s,h,p){return j(o,(v,_)=>{const w=n instanceof Iu?n.get(_):null;return w&&w.evaluate?w.evaluate(s,h,p):w})}function hb(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:s,maxX:h,maxY:p}}function _k(o,n){return n-o}function fb(o,n,s,h,p){const v=[];for(let _=0;_<o.length;_++){const w=o[_];let A;for(let z=0;z<w.length-1;z++){let W=w[z],K=w[z+1];W.x<n&&K.x<n||(W.x<n?W=new b(n,W.y+(n-W.x)/(K.x-W.x)*(K.y-W.y))._round():K.x<n&&(K=new b(n,W.y+(n-W.x)/(K.x-W.x)*(K.y-W.y))._round()),W.y<s&&K.y<s||(W.y<s?W=new b(W.x+(s-W.y)/(K.y-W.y)*(K.x-W.x),s)._round():K.y<s&&(K=new b(W.x+(s-W.y)/(K.y-W.y)*(K.x-W.x),s)._round()),W.x>=h&&K.x>=h||(W.x>=h?W=new b(h,W.y+(h-W.x)/(K.x-W.x)*(K.y-W.y))._round():K.x>=h&&(K=new b(h,W.y+(h-W.x)/(K.x-W.x)*(K.y-W.y))._round()),W.y>=p&&K.y>=p||(W.y>=p?W=new b(W.x+(p-W.y)/(K.y-W.y)*(K.x-W.x),p)._round():K.y>=p&&(K=new b(W.x+(p-W.y)/(K.y-W.y)*(K.x-W.x),p)._round()),A&&W.equals(A[A.length-1])||(A=[W],v.push(A)),A.push(K)))))}}return v}Nt("FeatureIndex",ub,{omit:["rawTileData","sourceLayerCoder"]});class kl extends b{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new kl(this.x,this.y,this.angle,this.segment)}}function db(o,n,s,h,p){if(n.segment===void 0||s===0)return!0;let v=n,_=n.segment+1,w=0;for(;w>-s/2;){if(_--,_<0)return!1;w-=o[_].dist(v),v=o[_]}w+=o[_].dist(o[_+1]),_++;const A=[];let z=0;for(;w<s/2;){const W=o[_],K=o[_+1];if(!K)return!1;let ne=o[_-1].angleTo(W)-W.angleTo(K);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:w,angleDelta:ne}),z+=ne;w-A[0].distance>h;)z-=A.shift().angleDelta;if(z>p)return!1;_++,w+=W.dist(K)}return!0}function pb(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function mb(o,n,s){return o?.6*n*s:0}function gb(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function xk(o,n,s,h,p,v){const _=mb(s,p,v),w=gb(s,h)*v;let A=0;const z=pb(o)/2;for(let W=0;W<o.length-1;W++){const K=o[W],ne=o[W+1],le=K.dist(ne);if(A+le>z){const me=(z-A)/le,Te=Jr.number(K.x,ne.x,me),Me=Jr.number(K.y,ne.y,me),Be=new kl(Te,Me,ne.angleTo(K),W);return Be._round(),!_||db(o,Be,w,_,n)?Be:void 0}A+=le}}function wk(o,n,s,h,p,v,_,w,A){const z=mb(h,v,_),W=gb(h,p),K=W*_,ne=o[0].x===0||o[0].x===A||o[0].y===0||o[0].y===A;return n-K<n/4&&(n=K+n/4),yb(o,ne?n/2*w%n:(W/2+2*v)*_*w%n,n,z,s,K,ne,!1,A)}function yb(o,n,s,h,p,v,_,w,A){const z=v/2,W=pb(o);let K=0,ne=n-s,le=[];for(let me=0;me<o.length-1;me++){const Te=o[me],Me=o[me+1],Be=Te.dist(Me),Qe=Me.angleTo(Te);for(;ne+s<K+Be;){ne+=s;const We=(ne-K)/Be,Ye=Jr.number(Te.x,Me.x,We),pt=Jr.number(Te.y,Me.y,We);if(Ye>=0&&Ye<A&&pt>=0&&pt<A&&ne-z>=0&&ne+z<=W){const gt=new kl(Ye,pt,Qe,me);gt._round(),h&&!db(o,gt,v,h,p)||le.push(gt)}}K+=Be}return w||le.length||_||(le=yb(o,K/2,s,h,p,v,_,!0,A)),le}Nt("Anchor",kl);const Dc=Zi;function vb(o,n,s,h){const p=[],v=o.image,_=v.pixelRatio,w=v.paddedRect.w-2*Dc,A=v.paddedRect.h-2*Dc;let z={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const W=v.stretchX||[[0,w]],K=v.stretchY||[[0,A]],ne=(_t,Gt)=>_t+Gt[1]-Gt[0],le=W.reduce(ne,0),me=K.reduce(ne,0),Te=w-le,Me=A-me;let Be=0,Qe=le,We=0,Ye=me,pt=0,gt=Te,Dt=0,Wt=Me;if(v.content&&h){const _t=v.content,Gt=_t[2]-_t[0],$t=_t[3]-_t[1];(v.textFitWidth||v.textFitHeight)&&(z=Hw(o)),Be=Lp(W,0,_t[0]),We=Lp(K,0,_t[1]),Qe=Lp(W,_t[0],_t[2]),Ye=Lp(K,_t[1],_t[3]),pt=_t[0]-Be,Dt=_t[1]-We,gt=Gt-Qe,Wt=$t-Ye}const Ft=z.x1,Pt=z.y1,Ut=z.x2-Ft,Kt=z.y2-Pt,Ot=(_t,Gt,$t,_n)=>{const Gn=jp(_t.stretch-Be,Qe,Ut,Ft),Hn=Dp(_t.fixed-pt,gt,_t.stretch,le),Mr=jp(Gt.stretch-We,Ye,Kt,Pt),ko=Dp(Gt.fixed-Dt,Wt,Gt.stretch,me),_i=jp($t.stretch-Be,Qe,Ut,Ft),Vr=Dp($t.fixed-pt,gt,$t.stretch,le),Qr=jp(_n.stretch-We,Ye,Kt,Pt),xi=Dp(_n.fixed-Dt,Wt,_n.stretch,me),Oi=new b(Gn,Mr),wi=new b(_i,Mr),zr=new b(_i,Qr),Kr=new b(Gn,Qr),Li=new b(Hn/_,ko/_),qi=new b(Vr/_,xi/_),ai=n*Math.PI/180;if(ai){const yr=Math.sin(ai),Cn=Math.cos(ai),Rr=[Cn,-yr,yr,Cn];Oi._matMult(Rr),wi._matMult(Rr),Kr._matMult(Rr),zr._matMult(Rr)}const Xi=_t.stretch+_t.fixed,Mo=Gt.stretch+Gt.fixed;return{tl:Oi,tr:wi,bl:Kr,br:zr,tex:{x:v.paddedRect.x+Dc+Xi,y:v.paddedRect.y+Dc+Mo,w:$t.stretch+$t.fixed-Xi,h:_n.stretch+_n.fixed-Mo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Li,pixelOffsetBR:qi,minFontScaleX:gt/_/Ut,minFontScaleY:Wt/_/Kt,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const _t=_b(W,Te,le),Gt=_b(K,Me,me);for(let $t=0;$t<_t.length-1;$t++){const _n=_t[$t],Gn=_t[$t+1];for(let Hn=0;Hn<Gt.length-1;Hn++)p.push(Ot(_n,Gt[Hn],Gn,Gt[Hn+1]))}}else p.push(Ot({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:A+1}));return p}function Lp(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function _b(o,n,s){const h=[{fixed:-Dc,stretch:0}];for(const[p,v]of o){const _=h[h.length-1];h.push({fixed:p-_.stretch,stretch:_.stretch}),h.push({fixed:p-_.stretch,stretch:_.stretch+(v-p)})}return h.push({fixed:n+Dc,stretch:s}),h}function jp(o,n,s,h){return o/n*s+h}function Dp(o,n,s,h){return o-n*s/h}class Bp{constructor(n,s,h,p,v,_,w,A,z,W){var K;if(this.boxStartIndex=n.length,z){let ne=_.top,le=_.bottom;const me=_.collisionPadding;me&&(ne-=me[1],le+=me[3]);let Te=le-ne;Te>0&&(Te=Math.max(10,Te),this.circleDiameter=Te)}else{const ne=!((K=_.image)===null||K===void 0)&&K.content&&(_.image.textFitWidth||_.image.textFitHeight)?Hw(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};ne.y1=ne.y1*w-A[0],ne.y2=ne.y2*w+A[2],ne.x1=ne.x1*w-A[3],ne.x2=ne.x2*w+A[1];const le=_.collisionPadding;if(le&&(ne.x1-=le[0]*w,ne.y1-=le[1]*w,ne.x2+=le[2]*w,ne.y2+=le[3]*w),W){const me=new b(ne.x1,ne.y1),Te=new b(ne.x2,ne.y1),Me=new b(ne.x1,ne.y2),Be=new b(ne.x2,ne.y2),Qe=W*Math.PI/180;me._rotate(Qe),Te._rotate(Qe),Me._rotate(Qe),Be._rotate(Qe),ne.x1=Math.min(me.x,Te.x,Me.x,Be.x),ne.x2=Math.max(me.x,Te.x,Me.x,Be.x),ne.y1=Math.min(me.y,Te.y,Me.y,Be.y),ne.y2=Math.max(me.y,Te.y,Me.y,Be.y)}n.emplaceBack(s.x,s.y,ne.x1,ne.y1,ne.x2,ne.y2,h,p,v)}this.boxEndIndex=n.length}}class bk{constructor(n=[],s=Sk){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const v=n-1>>1,_=s[v];if(h(p,_)>=0)break;s[n]=_,n=v}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,v=s[n];for(;n<p;){let _=1+(n<<1),w=s[_];const A=_+1;if(A<this.length&&h(s[A],w)<0&&(_=A,w=s[A]),h(w,v)>=0)break;s[n]=w,n=_}s[n]=v}}function Sk(o,n){return o<n?-1:o>n?1:0}function Ek(o,n=1,s=!1){let h=1/0,p=1/0,v=-1/0,_=-1/0;const w=o[0];for(let le=0;le<w.length;le++){const me=w[le];(!le||me.x<h)&&(h=me.x),(!le||me.y<p)&&(p=me.y),(!le||me.x>v)&&(v=me.x),(!le||me.y>_)&&(_=me.y)}const A=Math.min(v-h,_-p);let z=A/2;const W=new bk([],Tk);if(A===0)return new b(h,p);for(let le=h;le<v;le+=A)for(let me=p;me<_;me+=A)W.push(new Bc(le+z,me+z,z,o));let K=function(le){let me=0,Te=0,Me=0;const Be=le[0];for(let Qe=0,We=Be.length,Ye=We-1;Qe<We;Ye=Qe++){const pt=Be[Qe],gt=Be[Ye],Dt=pt.x*gt.y-gt.x*pt.y;Te+=(pt.x+gt.x)*Dt,Me+=(pt.y+gt.y)*Dt,me+=3*Dt}return new Bc(Te/me,Me/me,0,le)}(o),ne=W.length;for(;W.length;){const le=W.pop();(le.d>K.d||!K.d)&&(K=le,s&&console.log("found best %d after %d probes",Math.round(1e4*le.d)/1e4,ne)),le.max-K.d<=n||(z=le.h/2,W.push(new Bc(le.p.x-z,le.p.y-z,z,o)),W.push(new Bc(le.p.x+z,le.p.y-z,z,o)),W.push(new Bc(le.p.x-z,le.p.y+z,z,o)),W.push(new Bc(le.p.x+z,le.p.y+z,z,o)),ne+=4)}return s&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${K.d}`)),K.p}function Tk(o,n){return n.max-o.max}function Bc(o,n,s,h){this.p=new b(o,n),this.h=s,this.d=function(p,v){let _=!1,w=1/0;for(let A=0;A<v.length;A++){const z=v[A];for(let W=0,K=z.length,ne=K-1;W<K;ne=W++){const le=z[W],me=z[ne];le.y>p.y!=me.y>p.y&&p.x<(me.x-le.x)*(p.y-le.y)/(me.y-le.y)+le.x&&(_=!_),w=Math.min(w,nw(p,le,me))}}return(_?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var si;f.ap=void 0,(si=f.ap||(f.ap={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const Ml=7,a0=Number.POSITIVE_INFINITY;function xb(o,n){return n[1]!==a0?function(s,h,p){let v=0,_=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":_=p-Ml;break;case"bottom-right":case"bottom-left":case"bottom":_=-p+Ml}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,_]}(o,n[0],n[1]):function(s,h){let p=0,v=0;h<0&&(h=0);const _=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=_-Ml;break;case"bottom-right":case"bottom-left":v=-_+Ml;break;case"bottom":v=-h+Ml;break;case"top":v=h-Ml}switch(s){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function wb(o,n,s){var h;const p=o.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const w=v.values,A=[];for(let z=0;z<w.length;z+=2){const W=A[z]=w[z],K=w[z+1].map(ne=>ne*$r);W.startsWith("top")?K[1]-=Ml:W.startsWith("bottom")&&(K[1]+=Ml),A[z+1]=K}return new Zr(A)}const _=p.get("text-variable-anchor");if(_){let w;w=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},s)*$r,a0]:p.get("text-offset").evaluate(n,{},s).map(z=>z*$r);const A=[];for(const z of _)A.push(z,xb(z,w));return new Zr(A)}return null}function l0(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ck(o,n,s,h,p,v,_,w,A,z,W){let K=v.textMaxSize.evaluate(n,{});K===void 0&&(K=_);const ne=o.layers[0].layout,le=ne.get("icon-offset").evaluate(n,{},W),me=Sb(s.horizontal),Te=_/24,Me=o.tilePixelRatio*Te,Be=o.tilePixelRatio*K/24,Qe=o.tilePixelRatio*w,We=o.tilePixelRatio*ne.get("symbol-spacing"),Ye=ne.get("text-padding")*o.tilePixelRatio,pt=function(_t,Gt,$t,_n=1){const Gn=_t.get("icon-padding").evaluate(Gt,{},$t),Hn=Gn&&Gn.values;return[Hn[0]*_n,Hn[1]*_n,Hn[2]*_n,Hn[3]*_n]}(ne,n,W,o.tilePixelRatio),gt=ne.get("text-max-angle")/180*Math.PI,Dt=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",Wt=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",Ft=ne.get("symbol-placement"),Pt=We/2,Ut=ne.get("icon-text-fit");let Kt;h&&Ut!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Kt=Ww(h,s.vertical,Ut,ne.get("icon-text-fit-padding"),le,Te)),me&&(h=Ww(h,me,Ut,ne.get("icon-text-fit-padding"),le,Te)));const Ot=(_t,Gt)=>{Gt.x<0||Gt.x>=kr||Gt.y<0||Gt.y>=kr||function($t,_n,Gn,Hn,Mr,ko,_i,Vr,Qr,xi,Oi,wi,zr,Kr,Li,qi,ai,Xi,Mo,yr,Cn,Rr,li,Gr,es){const _s=$t.addToLineVertexArray(_n,Gn);let xs,Ra,ts,zo,Ki=0,Fa=0,zf=0,Ib=0,g0=-1,y0=-1;const Oa={};let Ab=Iy("");if($t.allowVerticalPlacement&&Hn.vertical){const bi=Vr.layout.get("text-rotate").evaluate(Cn,{},Gr)+90;ts=new Bp(Qr,_n,xi,Oi,wi,Hn.vertical,zr,Kr,Li,bi),_i&&(zo=new Bp(Qr,_n,xi,Oi,wi,_i,ai,Xi,Li,bi))}if(Mr){const bi=Vr.layout.get("icon-rotate").evaluate(Cn,{}),Ro=Vr.layout.get("icon-text-fit")!=="none",Ou=vb(Mr,bi,li,Ro),bs=_i?vb(_i,bi,li,Ro):void 0;Ra=new Bp(Qr,_n,xi,Oi,wi,Mr,ai,Xi,!1,bi),Ki=4*Ou.length;const Lu=$t.iconSizeData;let ea=null;Lu.kind==="source"?(ea=[Qs*Vr.layout.get("icon-size").evaluate(Cn,{})],ea[0]>Al&&_e(`${$t.layerIds[0]}: Value for "icon-size" is >= ${Af}. Reduce your "icon-size".`)):Lu.kind==="composite"&&(ea=[Qs*Rr.compositeIconSizes[0].evaluate(Cn,{},Gr),Qs*Rr.compositeIconSizes[1].evaluate(Cn,{},Gr)],(ea[0]>Al||ea[1]>Al)&&_e(`${$t.layerIds[0]}: Value for "icon-size" is >= ${Af}. Reduce your "icon-size".`)),$t.addSymbols($t.icon,Ou,ea,yr,Mo,Cn,f.ah.none,_n,_s.lineStartIndex,_s.lineLength,-1,Gr),g0=$t.icon.placedSymbolArray.length-1,bs&&(Fa=4*bs.length,$t.addSymbols($t.icon,bs,ea,yr,Mo,Cn,f.ah.vertical,_n,_s.lineStartIndex,_s.lineLength,-1,Gr),y0=$t.icon.placedSymbolArray.length-1)}const Pb=Object.keys(Hn.horizontal);for(const bi of Pb){const Ro=Hn.horizontal[bi];if(!xs){Ab=Iy(Ro.text);const bs=Vr.layout.get("text-rotate").evaluate(Cn,{},Gr);xs=new Bp(Qr,_n,xi,Oi,wi,Ro,zr,Kr,Li,bs)}const Ou=Ro.positionedLines.length===1;if(zf+=bb($t,_n,Ro,ko,Vr,Li,Cn,qi,_s,Hn.vertical?f.ah.horizontal:f.ah.horizontalOnly,Ou?Pb:[bi],Oa,g0,Rr,Gr),Ou)break}Hn.vertical&&(Ib+=bb($t,_n,Hn.vertical,ko,Vr,Li,Cn,qi,_s,f.ah.vertical,["vertical"],Oa,y0,Rr,Gr));const Pk=xs?xs.boxStartIndex:$t.collisionBoxArray.length,kk=xs?xs.boxEndIndex:$t.collisionBoxArray.length,Mk=ts?ts.boxStartIndex:$t.collisionBoxArray.length,zk=ts?ts.boxEndIndex:$t.collisionBoxArray.length,Rk=Ra?Ra.boxStartIndex:$t.collisionBoxArray.length,Fk=Ra?Ra.boxEndIndex:$t.collisionBoxArray.length,Ok=zo?zo.boxStartIndex:$t.collisionBoxArray.length,Lk=zo?zo.boxEndIndex:$t.collisionBoxArray.length;let ws=-1;const Up=(bi,Ro)=>bi&&bi.circleDiameter?Math.max(bi.circleDiameter,Ro):Ro;ws=Up(xs,ws),ws=Up(ts,ws),ws=Up(Ra,ws),ws=Up(zo,ws);const kb=ws>-1?1:0;kb&&(ws*=es/$r),$t.glyphOffsetArray.length>=jc.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cn.sortKey!==void 0&&$t.addToSortKeyRanges($t.symbolInstances.length,Cn.sortKey);const jk=wb(Vr,Cn,Gr),[Dk,Bk]=function(bi,Ro){const Ou=bi.length,bs=Ro==null?void 0:Ro.values;if((bs==null?void 0:bs.length)>0)for(let Lu=0;Lu<bs.length;Lu+=2){const ea=bs[Lu+1];bi.emplaceBack(f.ap[bs[Lu]],ea[0],ea[1])}return[Ou,bi.length]}($t.textAnchorOffsets,jk);$t.symbolInstances.emplaceBack(_n.x,_n.y,Oa.right>=0?Oa.right:-1,Oa.center>=0?Oa.center:-1,Oa.left>=0?Oa.left:-1,Oa.vertical||-1,g0,y0,Ab,Pk,kk,Mk,zk,Rk,Fk,Ok,Lk,xi,zf,Ib,Ki,Fa,kb,0,zr,ws,Dk,Bk)}(o,Gt,_t,s,h,p,Kt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Me,[Ye,Ye,Ye,Ye],Dt,A,Qe,pt,Wt,le,n,v,z,W,_)};if(Ft==="line")for(const _t of fb(n.geometry,0,0,kr,kr)){const Gt=wk(_t,We,gt,s.vertical||me,h,24,Be,o.overscaling,kr);for(const $t of Gt)me&&Ik(o,me.text,Pt,$t)||Ot(_t,$t)}else if(Ft==="line-center"){for(const _t of n.geometry)if(_t.length>1){const Gt=xk(_t,gt,s.vertical||me,h,24,Be);Gt&&Ot(_t,Gt)}}else if(n.type==="Polygon")for(const _t of fl(n.geometry,0)){const Gt=Ek(_t,16);Ot(_t[0],new kl(Gt.x,Gt.y,0))}else if(n.type==="LineString")for(const _t of n.geometry)Ot(_t,new kl(_t[0].x,_t[0].y,0));else if(n.type==="Point")for(const _t of n.geometry)for(const Gt of _t)Ot([Gt],new kl(Gt.x,Gt.y,0))}function bb(o,n,s,h,p,v,_,w,A,z,W,K,ne,le,me){const Te=function(Qe,We,Ye,pt,gt,Dt,Wt,Ft){const Pt=pt.layout.get("text-rotate").evaluate(Dt,{})*Math.PI/180,Ut=[];for(const Kt of We.positionedLines)for(const Ot of Kt.positionedGlyphs){if(!Ot.rect)continue;const _t=Ot.rect||{};let Gt=Dw+1,$t=!0,_n=1,Gn=0;const Hn=(gt||Ft)&&Ot.vertical,Mr=Ot.metrics.advance*Ot.scale/2;if(Ft&&We.verticalizable&&(Gn=Kt.lineOffset/2-(Ot.imageName?-($r-Ot.metrics.width*Ot.scale)/2:(Ot.scale-1)*$r)),Ot.imageName){const yr=Wt[Ot.imageName];$t=yr.sdf,_n=yr.pixelRatio,Gt=Zi/_n}const ko=gt?[Ot.x+Mr,Ot.y]:[0,0];let _i=gt?[0,0]:[Ot.x+Mr+Ye[0],Ot.y+Ye[1]-Gn],Vr=[0,0];Hn&&(Vr=_i,_i=[0,0]);const Qr=Ot.metrics.isDoubleResolution?2:1,xi=(Ot.metrics.left-Gt)*Ot.scale-Mr+_i[0],Oi=(-Ot.metrics.top-Gt)*Ot.scale+_i[1],wi=xi+_t.w/Qr*Ot.scale/_n,zr=Oi+_t.h/Qr*Ot.scale/_n,Kr=new b(xi,Oi),Li=new b(wi,Oi),qi=new b(xi,zr),ai=new b(wi,zr);if(Hn){const yr=new b(-Mr,Mr-Cf),Cn=-Math.PI/2,Rr=$r/2-Mr,li=new b(5-Cf-Rr,-(Ot.imageName?Rr:0)),Gr=new b(...Vr);Kr._rotateAround(Cn,yr)._add(li)._add(Gr),Li._rotateAround(Cn,yr)._add(li)._add(Gr),qi._rotateAround(Cn,yr)._add(li)._add(Gr),ai._rotateAround(Cn,yr)._add(li)._add(Gr)}if(Pt){const yr=Math.sin(Pt),Cn=Math.cos(Pt),Rr=[Cn,-yr,yr,Cn];Kr._matMult(Rr),Li._matMult(Rr),qi._matMult(Rr),ai._matMult(Rr)}const Xi=new b(0,0),Mo=new b(0,0);Ut.push({tl:Kr,tr:Li,bl:qi,br:ai,tex:_t,writingMode:We.writingMode,glyphOffset:ko,sectionIndex:Ot.sectionIndex,isSDF:$t,pixelOffsetTL:Xi,pixelOffsetBR:Mo,minFontScaleX:0,minFontScaleY:0})}return Ut}(0,s,w,p,v,_,h,o.allowVerticalPlacement),Me=o.textSizeData;let Be=null;Me.kind==="source"?(Be=[Qs*p.layout.get("text-size").evaluate(_,{})],Be[0]>Al&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Af}. Reduce your "text-size".`)):Me.kind==="composite"&&(Be=[Qs*le.compositeTextSizes[0].evaluate(_,{},me),Qs*le.compositeTextSizes[1].evaluate(_,{},me)],(Be[0]>Al||Be[1]>Al)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Af}. Reduce your "text-size".`)),o.addSymbols(o.text,Te,Be,w,v,_,z,n,A.lineStartIndex,A.lineLength,ne,me);for(const Qe of W)K[Qe]=o.text.placedSymbolArray.length-1;return 4*Te.length}function Sb(o){for(const n in o)return o[n];return null}function Ik(o,n,s,h){const p=o.compareText;if(n in p){const v=p[n];for(let _=v.length-1;_>=0;_--)if(h.dist(v[_])<s)return!0}else p[n]=[];return p[n].push(h),!1}const Eb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class u0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=Eb[15&h];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new u0(w,_,v,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=Eb.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+A,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+w+A),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+A,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return c0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:w}=this,A=[0,v.length-1,0],z=[];for(;A.length;){const W=A.pop()||0,K=A.pop()||0,ne=A.pop()||0;if(K-ne<=w){for(let Me=ne;Me<=K;Me++){const Be=_[2*Me],Qe=_[2*Me+1];Be>=n&&Be<=h&&Qe>=s&&Qe<=p&&z.push(v[Me])}continue}const le=ne+K>>1,me=_[2*le],Te=_[2*le+1];me>=n&&me<=h&&Te>=s&&Te<=p&&z.push(v[le]),(W===0?n<=me:s<=Te)&&(A.push(ne),A.push(le-1),A.push(1-W)),(W===0?h>=me:p>=Te)&&(A.push(le+1),A.push(K),A.push(1-W))}return z}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:_}=this,w=[0,p.length-1,0],A=[],z=h*h;for(;w.length;){const W=w.pop()||0,K=w.pop()||0,ne=w.pop()||0;if(K-ne<=_){for(let Me=ne;Me<=K;Me++)Cb(v[2*Me],v[2*Me+1],n,s)<=z&&A.push(p[Me]);continue}const le=ne+K>>1,me=v[2*le],Te=v[2*le+1];Cb(me,Te,n,s)<=z&&A.push(p[le]),(W===0?n-h<=me:s-h<=Te)&&(w.push(ne),w.push(le-1),w.push(1-W)),(W===0?n+h>=me:s+h>=Te)&&(w.push(le+1),w.push(K),w.push(1-W))}return A}}function c0(o,n,s,h,p,v){if(p-h<=s)return;const _=h+p>>1;Tb(o,n,_,h,p,v),c0(o,n,s,h,_-1,1-v),c0(o,n,s,_+1,p,1-v)}function Tb(o,n,s,h,p,v){for(;p>h;){if(p-h>600){const z=p-h+1,W=s-h+1,K=Math.log(z),ne=.5*Math.exp(2*K/3),le=.5*Math.sqrt(K*ne*(z-ne)/z)*(W-z/2<0?-1:1);Tb(o,n,s,Math.max(h,Math.floor(s-W*ne/z+le)),Math.min(p,Math.floor(s+(z-W)*ne/z+le)),v)}const _=n[2*s+v];let w=h,A=p;for(kf(o,n,h,s),n[2*p+v]>_&&kf(o,n,h,p);w<A;){for(kf(o,n,w,A),w++,A--;n[2*w+v]<_;)w++;for(;n[2*A+v]>_;)A--}n[2*h+v]===_?kf(o,n,h,A):(A++,kf(o,n,A,p)),A<=s&&(h=A+1),s<=A&&(p=A-1)}}function kf(o,n,s,h){h0(o,s,h),h0(n,2*s,2*h),h0(n,2*s+1,2*h+1)}function h0(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Cb(o,n,s,h){const p=o-s,v=n-h;return p*p+v*v}var f0;f.bd=void 0,(f0=f.bd||(f.bd={})).create="create",f0.load="load",f0.fullLoad="fullLoad";let Np=null,Mf=[];const d0=1e3/60,p0="loadTime",m0="fullLoadTime",Ak={mark(o){performance.mark(o)},frame(o){const n=o;Np!=null&&Mf.push(n-Np),Np=n},clearMetrics(){Np=null,Mf=[],performance.clearMeasures(p0),performance.clearMeasures(m0);for(const o in f.bd)performance.clearMarks(f.bd[o])},getPerformanceMetrics(){performance.measure(p0,f.bd.create,f.bd.load),performance.measure(m0,f.bd.create,f.bd.fullLoad);const o=performance.getEntriesByName(p0)[0].duration,n=performance.getEntriesByName(m0)[0].duration,s=Mf.length,h=1/(Mf.reduce((v,_)=>v+_,0)/s/1e3),p=Mf.filter(v=>v>d0).reduce((v,_)=>v+(_-d0)/d0,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};f.$=Xr,f.A=Mc,f.B=function(o){if(ue==null){const n=o.navigator?o.navigator.userAgent:null;ue=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ue},f.C=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new vk(()=>this.process()),this.subscription=function(s,h,p,v){return s.addEventListener(h,p,!1),{unsubscribe:()=>{s.removeEventListener(h,p,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=oe(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,h)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[p]={resolve:s,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[p];const w={id:p,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const v=[],_=Object.assign(Object.assign({},o),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Yo(o.data,v)});this.target.postMessage(_,{transfer:v})})}receive(o){const n=o.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(oe(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const p=this.resolveRejects[o];return delete this.resolveRejects[o],p?void(n.error?p.reject(Cu(n.error)):p.resolve(Cu(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Cu(n.data),h=new AbortController;this.abortControllers[o]=h;try{const p=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(o,null,p)}catch(p){this.completeTask(o,p)}})}completeTask(o,n,s){const h=[];delete this.abortControllers[o];const p={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Yo(n):null,data:Yo(s,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.D=Xt,f.E=sn,f.F=function(){var o=new Mc(16);return Mc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},f.G=He,f.H=function(o,n,s){var h,p,v,_,w,A,z,W,K,ne,le,me,Te=s[0],Me=s[1],Be=s[2];return n===o?(o[12]=n[0]*Te+n[4]*Me+n[8]*Be+n[12],o[13]=n[1]*Te+n[5]*Me+n[9]*Be+n[13],o[14]=n[2]*Te+n[6]*Me+n[10]*Be+n[14],o[15]=n[3]*Te+n[7]*Me+n[11]*Be+n[15]):(p=n[1],v=n[2],_=n[3],w=n[4],A=n[5],z=n[6],W=n[7],K=n[8],ne=n[9],le=n[10],me=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=_,o[4]=w,o[5]=A,o[6]=z,o[7]=W,o[8]=K,o[9]=ne,o[10]=le,o[11]=me,o[12]=h*Te+w*Me+K*Be+n[12],o[13]=p*Te+A*Me+ne*Be+n[13],o[14]=v*Te+z*Me+le*Be+n[14],o[15]=_*Te+W*Me+me*Be+n[15]),o},f.I=Ky,f.J=function(o,n,s){var h=s[0],p=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.K=sw,f.L=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},f.M=Pl,f.N=tb,f.O=nb,f.P=b,f.Q=Po,f.R=Ao,f.S=Y,f.T=gp,f.U=q,f.V=fe,f.W=kr,f.X=J,f.Y=Op,f.Z=class extends Pe{},f._=u,f.a=Re,f.a$=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},f.a0=s0,f.a1=M,f.a2=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const h of o){const p=window.document.createElement("source");kt(h)||(n.crossOrigin="Anonymous"),p.src=h,n.appendChild(p)}})},f.a3=function(){return L++},f.a4=mr,f.a5=jc,f.a6=Pr,f.a7=Ru,f.a8=Qn,f.a9=lb,f.aA=Z,f.aB=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!Ht(o.version,n.version))return[{command:"setStyle",args:[n]}];Ht(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),Ht(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),Ht(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),Ht(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),Ht(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),Ht(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),Ht(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),Ht(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),Ht(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),Ht(o.sky,n.sky)||s.push({command:"setSky",args:[n.sky]});const h={},p=[];(function(_,w,A,z){let W;for(W in w=w||{},_=_||{})Object.prototype.hasOwnProperty.call(_,W)&&(Object.prototype.hasOwnProperty.call(w,W)||D(W,A,z));for(W in w)Object.prototype.hasOwnProperty.call(w,W)&&(Object.prototype.hasOwnProperty.call(_,W)?Ht(_[W],w[W])||(_[W].type==="geojson"&&w[W].type==="geojson"&&Xe(_,w,W)?be(A,{command:"setGeoJSONSourceData",args:[W,w[W].data]}):xe(W,w,A,z)):N(W,w,A))})(o.sources,n.sources,p,h);const v=[];o.layers&&o.layers.forEach(_=>{"source"in _&&h[_.source]?s.push({command:"removeLayer",args:[_.id]}):v.push(_)}),s=s.concat(p),function(_,w,A){w=w||[];const z=(_=_||[]).map(ht),W=w.map(ht),K=_.reduce(ae,{}),ne=w.reduce(ae,{}),le=z.slice(),me=Object.create(null);let Te,Me,Be,Qe,We;for(let Ye=0,pt=0;Ye<z.length;Ye++)Te=z[Ye],Object.prototype.hasOwnProperty.call(ne,Te)?pt++:(be(A,{command:"removeLayer",args:[Te]}),le.splice(le.indexOf(Te,pt),1));for(let Ye=0,pt=0;Ye<W.length;Ye++)Te=W[W.length-1-Ye],le[le.length-1-Ye]!==Te&&(Object.prototype.hasOwnProperty.call(K,Te)?(be(A,{command:"removeLayer",args:[Te]}),le.splice(le.lastIndexOf(Te,le.length-pt),1)):pt++,Qe=le[le.length-Ye],be(A,{command:"addLayer",args:[ne[Te],Qe]}),le.splice(le.length-Ye,0,Te),me[Te]=!0);for(let Ye=0;Ye<W.length;Ye++)if(Te=W[Ye],Me=K[Te],Be=ne[Te],!me[Te]&&!Ht(Me,Be))if(Ht(Me.source,Be.source)&&Ht(Me["source-layer"],Be["source-layer"])&&Ht(Me.type,Be.type)){for(We in et(Me.layout,Be.layout,A,Te,null,"setLayoutProperty"),et(Me.paint,Be.paint,A,Te,null,"setPaintProperty"),Ht(Me.filter,Be.filter)||be(A,{command:"setFilter",args:[Te,Be.filter]}),Ht(Me.minzoom,Be.minzoom)&&Ht(Me.maxzoom,Be.maxzoom)||be(A,{command:"setLayerZoomRange",args:[Te,Be.minzoom,Be.maxzoom]}),Me)Object.prototype.hasOwnProperty.call(Me,We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?et(Me[We],Be[We],A,Te,We.slice(6),"setPaintProperty"):Ht(Me[We],Be[We])||be(A,{command:"setLayerProperty",args:[Te,We,Be[We]]}));for(We in Be)Object.prototype.hasOwnProperty.call(Be,We)&&!Object.prototype.hasOwnProperty.call(Me,We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?et(Me[We],Be[We],A,Te,We.slice(6),"setPaintProperty"):Ht(Me[We],Be[We])||be(A,{command:"setLayerProperty",args:[Te,We,Be[We]]}))}else be(A,{command:"removeLayer",args:[Te]}),Qe=le[le.lastIndexOf(Te)+1],be(A,{command:"addLayer",args:[Be,Qe]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},f.aC=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},f.aD=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},f.aE=j,f.aF=ee,f.aG=class extends ku{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},f.aH=xp,f.aI=class extends ku{constructor(o,n){super(o,n),this.current=qA}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},f.aJ=Xx,f.aK=class extends ku{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},f.aL=class extends ku{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},f.aM=Kx,f.aN=function(o,n,s,h,p,v,_){var w=1/(n-s),A=1/(h-p),z=1/(v-_);return o[0]=-2*w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*A,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*z,o[11]=0,o[12]=(n+s)*w,o[13]=(p+h)*A,o[14]=(_+v)*z,o[15]=1,o},f.aO=Rn,f.aP=tP,f.aQ=class extends bt{},f.aR=WP,f.aS=class extends Et{},f.aT=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},f.aU=hw,f.aV=ka,f.aW=class extends un{},f.aX=bl,f.aY=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},f.aZ=function(o,n){var s=o[0],h=o[1],p=o[2],v=o[3],_=o[4],w=o[5],A=o[6],z=o[7],W=o[8],K=o[9],ne=o[10],le=o[11],me=o[12],Te=o[13],Me=o[14],Be=o[15],Qe=n[0],We=n[1],Ye=n[2],pt=n[3],gt=n[4],Dt=n[5],Wt=n[6],Ft=n[7],Pt=n[8],Ut=n[9],Kt=n[10],Ot=n[11],_t=n[12],Gt=n[13],$t=n[14],_n=n[15];return Math.abs(s-Qe)<=Fi*Math.max(1,Math.abs(s),Math.abs(Qe))&&Math.abs(h-We)<=Fi*Math.max(1,Math.abs(h),Math.abs(We))&&Math.abs(p-Ye)<=Fi*Math.max(1,Math.abs(p),Math.abs(Ye))&&Math.abs(v-pt)<=Fi*Math.max(1,Math.abs(v),Math.abs(pt))&&Math.abs(_-gt)<=Fi*Math.max(1,Math.abs(_),Math.abs(gt))&&Math.abs(w-Dt)<=Fi*Math.max(1,Math.abs(w),Math.abs(Dt))&&Math.abs(A-Wt)<=Fi*Math.max(1,Math.abs(A),Math.abs(Wt))&&Math.abs(z-Ft)<=Fi*Math.max(1,Math.abs(z),Math.abs(Ft))&&Math.abs(W-Pt)<=Fi*Math.max(1,Math.abs(W),Math.abs(Pt))&&Math.abs(K-Ut)<=Fi*Math.max(1,Math.abs(K),Math.abs(Ut))&&Math.abs(ne-Kt)<=Fi*Math.max(1,Math.abs(ne),Math.abs(Kt))&&Math.abs(le-Ot)<=Fi*Math.max(1,Math.abs(le),Math.abs(Ot))&&Math.abs(me-_t)<=Fi*Math.max(1,Math.abs(me),Math.abs(_t))&&Math.abs(Te-Gt)<=Fi*Math.max(1,Math.abs(Te),Math.abs(Gt))&&Math.abs(Me-$t)<=Fi*Math.max(1,Math.abs(Me),Math.abs($t))&&Math.abs(Be-_n)<=Fi*Math.max(1,Math.abs(Be),Math.abs(_n))},f.a_=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const _=p||v;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},f.ab=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},f.ac=X,f.ad=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[0],_=n[1],w=n[2],A=n[3],z=n[4],W=n[5],K=n[6],ne=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+z*h,o[1]=_*p+W*h,o[2]=w*p+K*h,o[3]=A*p+ne*h,o[4]=z*p-v*h,o[5]=W*p-_*h,o[6]=K*p-w*h,o[7]=ne*p-A*h,o},f.ae=function(o){var n=new Mc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},f.af=Ep,f.ag=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:_}=o,w=p?X(pi.interpolationFactor(p,n,v,_),0,1):0;o.kind==="camera"?h=Jr.number(o.minSize,o.maxSize,w):s=w}return{uSizeT:s,uSize:h}},f.ai=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/Qs:o.kind==="composite"?Jr.number(h/Qs,p/Qs,s):n},f.aj=e0,f.ak=function(o,n,s,h){const p=n.y-o.y,v=n.x-o.x,_=h.y-s.y,w=h.x-s.x,A=_*v-w*p;if(A===0)return null;const z=(w*(o.y-s.y)-_*(o.x-s.x))/A;return new b(o.x+z*v,o.y+z*p)},f.al=fb,f.am=ew,f.an=Fy,f.ao=$r,f.aq=Qy,f.ar=function(o,n){var s=n[0],h=n[1],p=n[2],v=n[3],_=n[4],w=n[5],A=n[6],z=n[7],W=n[8],K=n[9],ne=n[10],le=n[11],me=n[12],Te=n[13],Me=n[14],Be=n[15],Qe=s*w-h*_,We=s*A-p*_,Ye=s*z-v*_,pt=h*A-p*w,gt=h*z-v*w,Dt=p*z-v*A,Wt=W*Te-K*me,Ft=W*Me-ne*me,Pt=W*Be-le*me,Ut=K*Me-ne*Te,Kt=K*Be-le*Te,Ot=ne*Be-le*Me,_t=Qe*Ot-We*Kt+Ye*Ut+pt*Pt-gt*Ft+Dt*Wt;return _t?(o[0]=(w*Ot-A*Kt+z*Ut)*(_t=1/_t),o[1]=(p*Kt-h*Ot-v*Ut)*_t,o[2]=(Te*Dt-Me*gt+Be*pt)*_t,o[3]=(ne*gt-K*Dt-le*pt)*_t,o[4]=(A*Pt-_*Ot-z*Ft)*_t,o[5]=(s*Ot-p*Pt+v*Ft)*_t,o[6]=(Me*Ye-me*Dt-Be*We)*_t,o[7]=(W*Dt-ne*Ye+le*We)*_t,o[8]=(_*Kt-w*Pt+z*Wt)*_t,o[9]=(h*Pt-s*Kt-v*Wt)*_t,o[10]=(me*gt-Te*Ye+Be*Qe)*_t,o[11]=(K*Ye-W*gt-le*Qe)*_t,o[12]=(w*Ft-_*Ut-A*Wt)*_t,o[13]=(s*Ut-h*Ft+p*Wt)*_t,o[14]=(Te*We-me*pt-Me*Qe)*_t,o[15]=(W*pt-K*We+ne*Qe)*_t,o):null},f.as=l0,f.at=Jy,f.au=u0,f.av=function(){const o={},n=nt.$version;for(const s in nt.$root){const h=nt.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},f.aw=dp,f.ax=dt,f.ay=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=an(o[s],n[o[s].ref]));return o},f.az=function(o){if(o.type==="custom")return new yk(o);switch(o.type){case"background":return new pk(o);case"circle":return new nP(o);case"fill":return new _P(o);case"fill-extrusion":return new FP(o);case"heatmap":return new iP(o);case"hillshade":return new sP(o);case"line":return new $P(o);case"raster":return new gk(o);case"symbol":return new Fp(o)}},f.b=Q,f.b0=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},f.b1=V,f.b2=ob,f.b3=rb,f.b4=function(o,n,s,h,p){var v,_=1/Math.tan(n/2);return o[0]=_/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},f.b5=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[4],_=n[5],w=n[6],A=n[7],z=n[8],W=n[9],K=n[10],ne=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+z*h,o[5]=_*p+W*h,o[6]=w*p+K*h,o[7]=A*p+ne*h,o[8]=z*p-v*h,o[9]=W*p-_*h,o[10]=K*p-w*h,o[11]=ne*p-A*h,o},f.b6=$,f.b7=se,f.b8=function(o){return o*Math.PI/180},f.b9=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},f.bA=ys,f.ba=class extends Ie{},f.bb=i0,f.bc=Ak,f.be=rt,f.bf=function(o,n){Re.REGISTERED_PROTOCOLS[o]=n},f.bg=function(o){delete Re.REGISTERED_PROTOCOLS[o]},f.bh=function(o,n){const s={};for(let p=0;p<o.length;p++){const v=n&&n[o[p].id]||qh(o[p]);n&&(n[o[p].id]=v);let _=s[v];_||(_=s[v]=[]),_.push(o[p])}const h=[];for(const p in s)h.push(s[p]);return h},f.bi=Nt,f.bj=ab,f.bk=ub,f.bl=Nw,f.bm=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=kr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new Qn(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Qn(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Qn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:W}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Qn(z),o.canonical),h["text-size"].possiblyEvaluate(new Qn(W),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:W}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Qn(z),o.canonical),h["icon-size"].possiblyEvaluate(new Qn(W),o.canonical)]}const v=s.get("text-line-height")*$r,_=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",w=s.get("text-keep-upright"),A=s.get("text-size");for(const z of o.bucket.features){const W=s.get("text-font").evaluate(z,{},o.canonical).join(","),K=A.evaluate(z,{},o.canonical),ne=p.layoutTextSize.evaluate(z,{},o.canonical),le=p.layoutIconSize.evaluate(z,{},o.canonical),me={horizontal:{},vertical:void 0},Te=z.text;let Me,Be=[0,0];if(Te){const Ye=Te.toString(),pt=s.get("text-letter-spacing").evaluate(z,{},o.canonical)*$r,gt=pp(Ye)?pt:0,Dt=s.get("text-anchor").evaluate(z,{},o.canonical),Wt=wb(n,z,o.canonical);if(!Wt){const Ot=s.get("text-radial-offset").evaluate(z,{},o.canonical);Be=Ot?xb(Dt,[Ot*$r,a0]):s.get("text-offset").evaluate(z,{},o.canonical).map(_t=>_t*$r)}let Ft=_?"center":s.get("text-justify").evaluate(z,{},o.canonical);const Pt=s.get("symbol-placement"),Ut=Pt==="point"?s.get("text-max-width").evaluate(z,{},o.canonical)*$r:0,Kt=()=>{o.bucket.allowVerticalPlacement&&af(Ye)&&(me.vertical=Mp(Te,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ut,v,Dt,"left",gt,Be,f.ah.vertical,!0,Pt,ne,K))};if(!_&&Wt){const Ot=new Set;if(Ft==="auto")for(let Gt=0;Gt<Wt.values.length;Gt+=2)Ot.add(l0(Wt.values[Gt]));else Ot.add(Ft);let _t=!1;for(const Gt of Ot)if(!me.horizontal[Gt])if(_t)me.horizontal[Gt]=me.horizontal[0];else{const $t=Mp(Te,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ut,v,"center",Gt,gt,Be,f.ah.horizontal,!1,Pt,ne,K);$t&&(me.horizontal[Gt]=$t,_t=$t.positionedLines.length===1)}Kt()}else{Ft==="auto"&&(Ft=l0(Dt));const Ot=Mp(Te,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ut,v,Dt,Ft,gt,Be,f.ah.horizontal,!1,Pt,ne,K);Ot&&(me.horizontal[Ft]=Ot),Kt(),af(Ye)&&_&&w&&(me.vertical=Mp(Te,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ut,v,Dt,Ft,gt,Be,f.ah.vertical,!1,Pt,ne,K))}}let Qe=!1;if(z.icon&&z.icon.name){const Ye=o.imageMap[z.icon.name];Ye&&(Me=uk(o.imagePositions[z.icon.name],s.get("icon-offset").evaluate(z,{},o.canonical),s.get("icon-anchor").evaluate(z,{},o.canonical)),Qe=!!Ye.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Qe:o.bucket.sdfIcons!==Qe&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const We=Sb(me.horizontal)||me.vertical;o.bucket.iconsInText=!!We&&We.iconsInText,(We||Me)&&Ck(o.bucket,z,me,Me,o.imageMap,p,ne,le,Be,Qe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},f.bn=Wy,f.bo=Vy,f.bp=Hy,f.bq=Cl,f.br=qy,f.bs=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},f.bt=function(o,n,s,h,p){return u(this,void 0,void 0,function*(){if(q())try{return yield fe(o,n,s,h,p)}catch{}return function(v,_,w,A,z){const W=v.width,K=v.height;we&&Ee||(we=new OffscreenCanvas(W,K),Ee=we.getContext("2d",{willReadFrequently:!0})),we.width=W,we.height=K,Ee.drawImage(v,0,0,W,K);const ne=Ee.getImageData(_,w,A,z);return Ee.clearRect(0,0,W,K),ne.data}(o,n,s,h,p)})},f.bu=sb,f.bv=S,f.bw=C,f.bx=Mw,f.by=Ct,f.bz=function(o){return o.message===Ne},f.c=Ae,f.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.e=E,f.f=o=>new Promise((n,s)=>{const h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=te})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(p):te}),f.g=Ze,f.h=(o,n)=>wt(E(o,{type:"json"}),n),f.i=oe,f.j=Lt,f.k=Vt,f.l=(o,n)=>wt(E(o,{type:"arrayBuffer"}),n),f.m=wt,f.n=function(o){return new qy(o).readFields(rk,[])},f.o=_f,f.p=Bw,f.q=g,f.r=lp,f.s=kt,f.t=hp,f.u=jt,f.v=nt,f.w=_e,f.x=Eu,f.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},f.z=Jr}),c("worker",["./shared"],function(f){class u{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,ce){for(const Oe of ie){this._layerConfigs[Oe.id]=Oe;const De=this._layers[Oe.id]=f.az(Oe);De._featureFilter=f.a6(De.filter),this.keyCache[Oe.id]&&delete this.keyCache[Oe.id]}for(const Oe of ce)delete this.keyCache[Oe],delete this._layerConfigs[Oe],delete this._layers[Oe];this.familiesBySource={};const ge=f.bh(Object.values(this._layerConfigs),this.keyCache);for(const Oe of ge){const De=Oe.map(lt=>this._layers[lt.id]),Fe=De[0];if(Fe.visibility==="none")continue;const Ue=Fe.source||"";let Le=this.familiesBySource[Ue];Le||(Le=this.familiesBySource[Ue]={});const Je=Fe.sourceLayer||"_geojsonTileLayer";let ft=Le[Je];ft||(ft=Le[Je]=[]),ft.push(De)}}}class S{constructor(ie){const ce={},ge=[];for(const Ue in ie){const Le=ie[Ue],Je=ce[Ue]={};for(const ft in Le){const lt=Le[+ft];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const ut={x:0,y:0,w:lt.bitmap.width+2,h:lt.bitmap.height+2};ge.push(ut),Je[ft]={rect:ut,metrics:lt.metrics}}}const{w:Oe,h:De}=f.p(ge),Fe=new f.o({width:Oe||1,height:De||1});for(const Ue in ie){const Le=ie[Ue];for(const Je in Le){const ft=Le[+Je];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const lt=ce[Ue][Je].rect;f.o.copy(ft.bitmap,Fe,{x:0,y:0},{x:lt.x+1,y:lt.y+1},ft.bitmap)}}this.image=Fe,this.positions=ce}}f.bi("GlyphAtlas",S);class C{constructor(ie){this.tileID=new f.Q(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,ce,ge,Oe){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new f.a4;const De=new f.bj(Object.keys(ie.layers).sort()),Fe=new f.bk(this.tileID,this.promoteId);Fe.bucketLayerIDs=[];const Ue={},Le={featureIndex:Fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge},Je=ce.familiesBySource[this.source];for(const fn in Je){const Yn=ie.layers[fn];if(!Yn)continue;Yn.version===1&&f.w(`Vector tile source "${this.source}" layer "${fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _r=De.encode(fn),Wr=[];for(let Ii=0;Ii<Yn.length;Ii++){const rr=Yn.feature(Ii),Os=Fe.getId(rr,fn);Wr.push({feature:rr,id:Os,index:Ii,sourceLayerIndex:_r})}for(const Ii of Je[fn]){const rr=Ii[0];rr.source!==this.source&&f.w(`layer.source = ${rr.source} does not equal this.source = ${this.source}`),rr.minzoom&&this.zoom<Math.floor(rr.minzoom)||rr.maxzoom&&this.zoom>=rr.maxzoom||rr.visibility!=="none"&&(P(Ii,this.zoom,ge),(Ue[rr.id]=rr.createBucket({index:Fe.bucketLayerIDs.length,layers:Ii,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_r,sourceID:this.source})).populate(Wr,Le,this.tileID.canonical),Fe.bucketLayerIDs.push(Ii.map(Os=>Os.id)))}}const ft=f.aE(Le.glyphDependencies,fn=>Object.keys(fn).map(Number));this.inFlightDependencies.forEach(fn=>fn==null?void 0:fn.abort()),this.inFlightDependencies=[];let lt=Promise.resolve({});if(Object.keys(ft).length){const fn=new AbortController;this.inFlightDependencies.push(fn),lt=Oe.sendAsync({type:"GG",data:{stacks:ft,source:this.source,tileID:this.tileID,type:"glyphs"}},fn)}const ut=Object.keys(Le.iconDependencies);let en=Promise.resolve({});if(ut.length){const fn=new AbortController;this.inFlightDependencies.push(fn),en=Oe.sendAsync({type:"GI",data:{icons:ut,source:this.source,tileID:this.tileID,type:"icons"}},fn)}const tn=Object.keys(Le.patternDependencies);let pn=Promise.resolve({});if(tn.length){const fn=new AbortController;this.inFlightDependencies.push(fn),pn=Oe.sendAsync({type:"GI",data:{icons:tn,source:this.source,tileID:this.tileID,type:"patterns"}},fn)}const[ln,bn,Dn]=yield Promise.all([lt,en,pn]),Un=new S(ln),nr=new f.bl(bn,Dn);for(const fn in Ue){const Yn=Ue[fn];Yn instanceof f.a5?(P(Yn.layers,this.zoom,ge),f.bm({bucket:Yn,glyphMap:ln,glyphPositions:Un.positions,imageMap:bn,imagePositions:nr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Yn.hasPattern&&(Yn instanceof f.bn||Yn instanceof f.bo||Yn instanceof f.bp)&&(P(Yn.layers,this.zoom,ge),Yn.addFeatures(Le,this.tileID.canonical,nr.patternPositions))}return this.status="done",{buckets:Object.values(Ue).filter(fn=>!fn.isEmpty()),featureIndex:Fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Un.image,imageAtlas:nr,glyphMap:this.returnDependencies?ln:null,iconMap:this.returnDependencies?bn:null,glyphPositions:this.returnDependencies?Un.positions:null}})}}function P(ke,ie,ce){const ge=new f.a8(ie);for(const Oe of ke)Oe.recalculate(ge,ce)}class b{constructor(ie,ce,ge){this.actor=ie,this.layerIndex=ce,this.availableImages=ge,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,ce){return f._(this,void 0,void 0,function*(){const ge=yield f.l(ie.request,ce);try{return{vectorTile:new f.bq.VectorTile(new f.br(ge.data)),rawData:ge.data,cacheControl:ge.cacheControl,expires:ge.expires}}catch(Oe){const De=new Uint8Array(ge.data);let Fe=`Unable to parse the tile at ${ie.request.url}, `;throw Fe+=De[0]===31&&De[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Oe.messge}`,new Error(Fe)}})}loadTile(ie){return f._(this,void 0,void 0,function*(){const ce=ie.uid,ge=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new f.bs(ie.request),Oe=new C(ie);this.loading[ce]=Oe;const De=new AbortController;Oe.abort=De;try{const Fe=yield this.loadVectorTile(ie,De);if(delete this.loading[ce],!Fe)return null;const Ue=Fe.rawData,Le={};Fe.expires&&(Le.expires=Fe.expires),Fe.cacheControl&&(Le.cacheControl=Fe.cacheControl);const Je={};if(ge){const lt=ge.finish();lt&&(Je.resourceTiming=JSON.parse(JSON.stringify(lt)))}Oe.vectorTile=Fe.vectorTile;const ft=Oe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ce]=Oe,this.fetching[ce]={rawTileData:Ue,cacheControl:Le,resourceTiming:Je};try{const lt=yield ft;return f.e({rawTileData:Ue.slice(0)},lt,Le,Je)}finally{delete this.fetching[ce]}}catch(Fe){throw delete this.loading[ce],Oe.status="done",this.loaded[ce]=Oe,Fe}})}reloadTile(ie){return f._(this,void 0,void 0,function*(){const ce=ie.uid;if(!this.loaded||!this.loaded[ce])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ge=this.loaded[ce];if(ge.showCollisionBoxes=ie.showCollisionBoxes,ge.status==="parsing"){const Oe=yield ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor);let De;if(this.fetching[ce]){const{rawTileData:Fe,cacheControl:Ue,resourceTiming:Le}=this.fetching[ce];delete this.fetching[ce],De=f.e({rawTileData:Fe.slice(0)},Oe,Ue,Le)}else De=Oe;return De}if(ge.status==="done"&&ge.vectorTile)return ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ie){return f._(this,void 0,void 0,function*(){const ce=this.loading,ge=ie.uid;ce&&ce[ge]&&ce[ge].abort&&(ce[ge].abort.abort(),delete ce[ge])})}removeTile(ie){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]})}}class T{constructor(){this.loaded={}}loadTile(ie){return f._(this,void 0,void 0,function*(){const{uid:ce,encoding:ge,rawImageData:Oe,redFactor:De,greenFactor:Fe,blueFactor:Ue,baseShift:Le}=ie,Je=Oe.width+2,ft=Oe.height+2,lt=f.b(Oe)?new f.R({width:Je,height:ft},yield f.bt(Oe,-1,-1,Je,ft)):Oe,ut=new f.bu(ce,lt,ge,De,Fe,Ue,Le);return this.loaded=this.loaded||{},this.loaded[ce]=ut,ut})}removeTile(ie){const ce=this.loaded,ge=ie.uid;ce&&ce[ge]&&delete ce[ge]}}function F(ke,ie){if(ke.length!==0){B(ke[0],ie);for(var ce=1;ce<ke.length;ce++)B(ke[ce],!ie)}}function B(ke,ie){for(var ce=0,ge=0,Oe=0,De=ke.length,Fe=De-1;Oe<De;Fe=Oe++){var Ue=(ke[Oe][0]-ke[Fe][0])*(ke[Fe][1]+ke[Oe][1]),Le=ce+Ue;ge+=Math.abs(ce)>=Math.abs(Ue)?ce-Le+Ue:Ue-Le+ce,ce=Le}ce+ge>=0!=!!ie&&ke.reverse()}var O=f.bv(function ke(ie,ce){var ge,Oe=ie&&ie.type;if(Oe==="FeatureCollection")for(ge=0;ge<ie.features.length;ge++)ke(ie.features[ge],ce);else if(Oe==="GeometryCollection")for(ge=0;ge<ie.geometries.length;ge++)ke(ie.geometries[ge],ce);else if(Oe==="Feature")ke(ie.geometry,ce);else if(Oe==="Polygon")F(ie.coordinates,ce);else if(Oe==="MultiPolygon")for(ge=0;ge<ie.coordinates.length;ge++)F(ie.coordinates[ge],ce);return ie});const he=f.bq.VectorTileFeature.prototype.toGeoJSON;var Y={exports:{}},q=f.bw,$=f.bq.VectorTileFeature,se=X;function X(ke,ie){this.options=ie||{},this.features=ke,this.length=ke.length}function V(ke,ie){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=ie||4096}X.prototype.feature=function(ke){return new V(this.features[ke],this.options.extent)},V.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var ie=0;ie<ke.length;ie++){for(var ce=ke[ie],ge=[],Oe=0;Oe<ce.length;Oe++)ge.push(new q(ce[Oe][0],ce[Oe][1]));this.geometry.push(ge)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,ie=1/0,ce=-1/0,ge=1/0,Oe=-1/0,De=0;De<ke.length;De++)for(var Fe=ke[De],Ue=0;Ue<Fe.length;Ue++){var Le=Fe[Ue];ie=Math.min(ie,Le.x),ce=Math.max(ce,Le.x),ge=Math.min(ge,Le.y),Oe=Math.max(Oe,Le.y)}return[ie,ge,ce,Oe]},V.prototype.toGeoJSON=$.prototype.toGeoJSON;var E=f.bx,L=se;function j(ke){var ie=new E;return function(ce,ge){for(var Oe in ce.layers)ge.writeMessage(3,ee,ce.layers[Oe])}(ke,ie),ie.finish()}function ee(ke,ie){var ce;ie.writeVarintField(15,ke.version||1),ie.writeStringField(1,ke.name||""),ie.writeVarintField(5,ke.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(ce=0;ce<ke.length;ce++)ge.feature=ke.feature(ce),ie.writeMessage(2,Z,ge);var Oe=ge.keys;for(ce=0;ce<Oe.length;ce++)ie.writeStringField(3,Oe[ce]);var De=ge.values;for(ce=0;ce<De.length;ce++)ie.writeMessage(4,ue,De[ce])}function Z(ke,ie){var ce=ke.feature;ce.id!==void 0&&ie.writeVarintField(1,ce.id),ie.writeMessage(2,ve,ke),ie.writeVarintField(3,ce.type),ie.writeMessage(4,oe,ce)}function ve(ke,ie){var ce=ke.feature,ge=ke.keys,Oe=ke.values,De=ke.keycache,Fe=ke.valuecache;for(var Ue in ce.properties){var Le=ce.properties[Ue],Je=De[Ue];if(Le!==null){Je===void 0&&(ge.push(Ue),De[Ue]=Je=ge.length-1),ie.writeVarint(Je);var ft=typeof Le;ft!=="string"&&ft!=="boolean"&&ft!=="number"&&(Le=JSON.stringify(Le));var lt=ft+":"+Le,ut=Fe[lt];ut===void 0&&(Oe.push(Le),Fe[lt]=ut=Oe.length-1),ie.writeVarint(ut)}}}function _e(ke,ie){return(ie<<3)+(7&ke)}function de(ke){return ke<<1^ke>>31}function oe(ke,ie){for(var ce=ke.loadGeometry(),ge=ke.type,Oe=0,De=0,Fe=ce.length,Ue=0;Ue<Fe;Ue++){var Le=ce[Ue],Je=1;ge===1&&(Je=Le.length),ie.writeVarint(_e(1,Je));for(var ft=ge===3?Le.length-1:Le.length,lt=0;lt<ft;lt++){lt===1&&ge!==1&&ie.writeVarint(_e(2,ft-1));var ut=Le[lt].x-Oe,en=Le[lt].y-De;ie.writeVarint(de(ut)),ie.writeVarint(de(en)),Oe+=ut,De+=en}ge===3&&ie.writeVarint(_e(7,1))}}function ue(ke,ie){var ce=typeof ke;ce==="string"?ie.writeStringField(1,ke):ce==="boolean"?ie.writeBooleanField(7,ke):ce==="number"&&(ke%1!=0?ie.writeDoubleField(3,ke):ke<0?ie.writeSVarintField(6,ke):ie.writeVarintField(5,ke))}Y.exports=j,Y.exports.fromVectorTileJs=j,Y.exports.fromGeojsonVt=function(ke,ie){ie=ie||{};var ce={};for(var ge in ke)ce[ge]=new L(ke[ge].features,ie),ce[ge].name=ge,ce[ge].version=ie.version,ce[ge].extent=ie.extent;return j({layers:ce})},Y.exports.GeoJSONWrapper=L;var Q=f.bv(Y.exports);const te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},fe=Math.fround||(we=new Float32Array(1),ke=>(we[0]=+ke,we[0]));var we;const Ee=3,Ne=5,Ae=6;class Re{constructor(ie){this.options=Object.assign(Object.create(te),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:ce,minZoom:ge,maxZoom:Oe}=this.options;ce&&console.time("total time");const De=`prepare ${ie.length} points`;ce&&console.time(De),this.points=ie;const Fe=[];for(let Le=0;Le<ie.length;Le++){const Je=ie[Le];if(!Je.geometry)continue;const[ft,lt]=Je.geometry.coordinates,ut=fe(rt(ft)),en=fe(dt(lt));Fe.push(ut,en,1/0,Le,-1,1),this.options.reduce&&Fe.push(0)}let Ue=this.trees[Oe+1]=this._createTree(Fe);ce&&console.timeEnd(De);for(let Le=Oe;Le>=ge;Le--){const Je=+Date.now();Ue=this.trees[Le]=this._createTree(this._cluster(Ue,Le)),ce&&console.log("z%d: %d clusters in %dms",Le,Ue.numItems,+Date.now()-Je)}return ce&&console.timeEnd("total time"),this}getClusters(ie,ce){let ge=((ie[0]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,ie[1]));let De=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)ge=-180,De=180;else if(ge>De){const lt=this.getClusters([ge,Oe,180,Fe],ce),ut=this.getClusters([-180,Oe,De,Fe],ce);return lt.concat(ut)}const Ue=this.trees[this._limitZoom(ce)],Le=Ue.range(rt(ge),dt(Fe),rt(De),dt(Oe)),Je=Ue.data,ft=[];for(const lt of Le){const ut=this.stride*lt;ft.push(Je[ut+Ne]>1?Ze(Je,ut,this.clusterProps):this.points[Je[ut+Ee]])}return ft}getChildren(ie){const ce=this._getOriginId(ie),ge=this._getOriginZoom(ie),Oe="No cluster with the specified id.",De=this.trees[ge];if(!De)throw new Error(Oe);const Fe=De.data;if(ce*this.stride>=Fe.length)throw new Error(Oe);const Ue=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Le=De.within(Fe[ce*this.stride],Fe[ce*this.stride+1],Ue),Je=[];for(const ft of Le){const lt=ft*this.stride;Fe[lt+4]===ie&&Je.push(Fe[lt+Ne]>1?Ze(Fe,lt,this.clusterProps):this.points[Fe[lt+Ee]])}if(Je.length===0)throw new Error(Oe);return Je}getLeaves(ie,ce,ge){const Oe=[];return this._appendLeaves(Oe,ie,ce=ce||10,ge=ge||0,0),Oe}getTile(ie,ce,ge){const Oe=this.trees[this._limitZoom(ie)],De=Math.pow(2,ie),{extent:Fe,radius:Ue}=this.options,Le=Ue/Fe,Je=(ge-Le)/De,ft=(ge+1+Le)/De,lt={features:[]};return this._addTileFeatures(Oe.range((ce-Le)/De,Je,(ce+1+Le)/De,ft),Oe.data,ce,ge,De,lt),ce===0&&this._addTileFeatures(Oe.range(1-Le/De,Je,1,ft),Oe.data,De,ge,De,lt),ce===De-1&&this._addTileFeatures(Oe.range(0,Je,Le/De,ft),Oe.data,-1,ge,De,lt),lt.features.length?lt:null}getClusterExpansionZoom(ie){let ce=this._getOriginZoom(ie)-1;for(;ce<=this.options.maxZoom;){const ge=this.getChildren(ie);if(ce++,ge.length!==1)break;ie=ge[0].properties.cluster_id}return ce}_appendLeaves(ie,ce,ge,Oe,De){const Fe=this.getChildren(ce);for(const Ue of Fe){const Le=Ue.properties;if(Le&&Le.cluster?De+Le.point_count<=Oe?De+=Le.point_count:De=this._appendLeaves(ie,Le.cluster_id,ge,Oe,De):De<Oe?De++:ie.push(Ue),ie.length===ge)break}return De}_createTree(ie){const ce=new f.au(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ge=0;ge<ie.length;ge+=this.stride)ce.add(ie[ge],ie[ge+1]);return ce.finish(),ce.data=ie,ce}_addTileFeatures(ie,ce,ge,Oe,De,Fe){for(const Ue of ie){const Le=Ue*this.stride,Je=ce[Le+Ne]>1;let ft,lt,ut;if(Je)ft=He(ce,Le,this.clusterProps),lt=ce[Le],ut=ce[Le+1];else{const pn=this.points[ce[Le+Ee]];ft=pn.properties;const[ln,bn]=pn.geometry.coordinates;lt=rt(ln),ut=dt(bn)}const en={type:1,geometry:[[Math.round(this.options.extent*(lt*De-ge)),Math.round(this.options.extent*(ut*De-Oe))]],tags:ft};let tn;tn=Je||this.options.generateId?ce[Le+Ee]:this.points[ce[Le+Ee]].id,tn!==void 0&&(en.id=tn),Fe.features.push(en)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,ce){const{radius:ge,extent:Oe,reduce:De,minPoints:Fe}=this.options,Ue=ge/(Oe*Math.pow(2,ce)),Le=ie.data,Je=[],ft=this.stride;for(let lt=0;lt<Le.length;lt+=ft){if(Le[lt+2]<=ce)continue;Le[lt+2]=ce;const ut=Le[lt],en=Le[lt+1],tn=ie.within(Le[lt],Le[lt+1],Ue),pn=Le[lt+Ne];let ln=pn;for(const bn of tn){const Dn=bn*ft;Le[Dn+2]>ce&&(ln+=Le[Dn+Ne])}if(ln>pn&&ln>=Fe){let bn,Dn=ut*pn,Un=en*pn,nr=-1;const fn=((lt/ft|0)<<5)+(ce+1)+this.points.length;for(const Yn of tn){const _r=Yn*ft;if(Le[_r+2]<=ce)continue;Le[_r+2]=ce;const Wr=Le[_r+Ne];Dn+=Le[_r]*Wr,Un+=Le[_r+1]*Wr,Le[_r+4]=fn,De&&(bn||(bn=this._map(Le,lt,!0),nr=this.clusterProps.length,this.clusterProps.push(bn)),De(bn,this._map(Le,_r)))}Le[lt+4]=fn,Je.push(Dn/ln,Un/ln,1/0,fn,-1,ln),De&&Je.push(nr)}else{for(let bn=0;bn<ft;bn++)Je.push(Le[lt+bn]);if(ln>1)for(const bn of tn){const Dn=bn*ft;if(!(Le[Dn+2]<=ce)){Le[Dn+2]=ce;for(let Un=0;Un<ft;Un++)Je.push(Le[Dn+Un])}}}}return Je}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,ce,ge){if(ie[ce+Ne]>1){const Fe=this.clusterProps[ie[ce+Ae]];return ge?Object.assign({},Fe):Fe}const Oe=this.points[ie[ce+Ee]].properties,De=this.options.map(Oe);return ge&&De===Oe?Object.assign({},De):De}}function Ze(ke,ie,ce){return{type:"Feature",id:ke[ie+Ee],properties:He(ke,ie,ce),geometry:{type:"Point",coordinates:[(ge=ke[ie],360*(ge-.5)),wt(ke[ie+1])]}};var ge}function He(ke,ie,ce){const ge=ke[ie+Ne],Oe=ge>=1e4?`${Math.round(ge/1e3)}k`:ge>=1e3?Math.round(ge/100)/10+"k":ge,De=ke[ie+Ae],Fe=De===-1?{}:Object.assign({},ce[De]);return Object.assign(Fe,{cluster:!0,cluster_id:ke[ie+Ee],point_count:ge,point_count_abbreviated:Oe})}function rt(ke){return ke/360+.5}function dt(ke){const ie=Math.sin(ke*Math.PI/180),ce=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ce<0?0:ce>1?1:ce}function wt(ke){const ie=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function kt(ke,ie,ce,ge){for(var Oe,De=ge,Fe=ce-ie>>1,Ue=ce-ie,Le=ke[ie],Je=ke[ie+1],ft=ke[ce],lt=ke[ce+1],ut=ie+3;ut<ce;ut+=3){var en=mt(ke[ut],ke[ut+1],Le,Je,ft,lt);if(en>De)Oe=ut,De=en;else if(en===De){var tn=Math.abs(ut-Fe);tn<Ue&&(Oe=ut,Ue=tn)}}De>ge&&(Oe-ie>3&&kt(ke,ie,Oe,ge),ke[Oe+2]=De,ce-Oe>3&&kt(ke,Oe,ce,ge))}function mt(ke,ie,ce,ge,Oe,De){var Fe=Oe-ce,Ue=De-ge;if(Fe!==0||Ue!==0){var Le=((ke-ce)*Fe+(ie-ge)*Ue)/(Fe*Fe+Ue*Ue);Le>1?(ce=Oe,ge=De):Le>0&&(ce+=Fe*Le,ge+=Ue*Le)}return(Fe=ke-ce)*Fe+(Ue=ie-ge)*Ue}function St(ke,ie,ce,ge){var Oe={id:ke===void 0?null:ke,type:ie,geometry:ce,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(De){var Fe=De.geometry,Ue=De.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")Vt(De,Fe);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var Le=0;Le<Fe.length;Le++)Vt(De,Fe[Le]);else if(Ue==="MultiPolygon")for(Le=0;Le<Fe.length;Le++)for(var Je=0;Je<Fe[Le].length;Je++)Vt(De,Fe[Le][Je])}(Oe),Oe}function Vt(ke,ie){for(var ce=0;ce<ie.length;ce+=3)ke.minX=Math.min(ke.minX,ie[ce]),ke.minY=Math.min(ke.minY,ie[ce+1]),ke.maxX=Math.max(ke.maxX,ie[ce]),ke.maxY=Math.max(ke.maxY,ie[ce+1])}function Lt(ke,ie,ce,ge){if(ie.geometry){var Oe=ie.geometry.coordinates,De=ie.geometry.type,Fe=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2),Ue=[],Le=ie.id;if(ce.promoteId?Le=ie.properties[ce.promoteId]:ce.generateId&&(Le=ge||0),De==="Point")sn(Oe,Ue);else if(De==="MultiPoint")for(var Je=0;Je<Oe.length;Je++)sn(Oe[Je],Ue);else if(De==="LineString")nt(Oe,Ue,Fe,!1);else if(De==="MultiLineString"){if(ce.lineMetrics){for(Je=0;Je<Oe.length;Je++)nt(Oe[Je],Ue=[],Fe,!1),ke.push(St(Le,"LineString",Ue,ie.properties));return}wn(Oe,Ue,Fe,!1)}else if(De==="Polygon")wn(Oe,Ue,Fe,!0);else{if(De!=="MultiPolygon"){if(De==="GeometryCollection"){for(Je=0;Je<ie.geometry.geometries.length;Je++)Lt(ke,{id:Le,geometry:ie.geometry.geometries[Je],properties:ie.properties},ce,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Je=0;Je<Oe.length;Je++){var ft=[];wn(Oe[Je],ft,Fe,!0),Ue.push(ft)}}ke.push(St(Le,De,Ue,ie.properties))}}function sn(ke,ie){ie.push(an(ke[0])),ie.push(Ht(ke[1])),ie.push(0)}function nt(ke,ie,ce,ge){for(var Oe,De,Fe=0,Ue=0;Ue<ke.length;Ue++){var Le=an(ke[Ue][0]),Je=Ht(ke[Ue][1]);ie.push(Le),ie.push(Je),ie.push(0),Ue>0&&(Fe+=ge?(Oe*Je-Le*De)/2:Math.sqrt(Math.pow(Le-Oe,2)+Math.pow(Je-De,2))),Oe=Le,De=Je}var ft=ie.length-3;ie[2]=1,kt(ie,0,ft,ce),ie[ft+2]=1,ie.size=Math.abs(Fe),ie.start=0,ie.end=ie.size}function wn(ke,ie,ce,ge){for(var Oe=0;Oe<ke.length;Oe++){var De=[];nt(ke[Oe],De,ce,ge),ie.push(De)}}function an(ke){return ke/360+.5}function Ht(ke){var ie=Math.sin(ke*Math.PI/180),ce=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ce<0?0:ce>1?1:ce}function be(ke,ie,ce,ge,Oe,De,Fe,Ue){if(ge/=ie,De>=(ce/=ie)&&Fe<ge)return ke;if(Fe<ce||De>=ge)return null;for(var Le=[],Je=0;Je<ke.length;Je++){var ft=ke[Je],lt=ft.geometry,ut=ft.type,en=Oe===0?ft.minX:ft.minY,tn=Oe===0?ft.maxX:ft.maxY;if(en>=ce&&tn<ge)Le.push(ft);else if(!(tn<ce||en>=ge)){var pn=[];if(ut==="Point"||ut==="MultiPoint")N(lt,pn,ce,ge,Oe);else if(ut==="LineString")D(lt,pn,ce,ge,Oe,!1,Ue.lineMetrics);else if(ut==="MultiLineString")Xe(lt,pn,ce,ge,Oe,!1);else if(ut==="Polygon")Xe(lt,pn,ce,ge,Oe,!0);else if(ut==="MultiPolygon")for(var ln=0;ln<lt.length;ln++){var bn=[];Xe(lt[ln],bn,ce,ge,Oe,!0),bn.length&&pn.push(bn)}if(pn.length){if(Ue.lineMetrics&&ut==="LineString"){for(ln=0;ln<pn.length;ln++)Le.push(St(ft.id,ut,pn[ln],ft.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(pn.length===1?(ut="LineString",pn=pn[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=pn.length===3?"Point":"MultiPoint"),Le.push(St(ft.id,ut,pn,ft.tags))}}}return Le.length?Le:null}function N(ke,ie,ce,ge,Oe){for(var De=0;De<ke.length;De+=3){var Fe=ke[De+Oe];Fe>=ce&&Fe<=ge&&(ie.push(ke[De]),ie.push(ke[De+1]),ie.push(ke[De+2]))}}function D(ke,ie,ce,ge,Oe,De,Fe){for(var Ue,Le,Je=xe(ke),ft=Oe===0?ht:ae,lt=ke.start,ut=0;ut<ke.length-3;ut+=3){var en=ke[ut],tn=ke[ut+1],pn=ke[ut+2],ln=ke[ut+3],bn=ke[ut+4],Dn=Oe===0?en:tn,Un=Oe===0?ln:bn,nr=!1;Fe&&(Ue=Math.sqrt(Math.pow(en-ln,2)+Math.pow(tn-bn,2))),Dn<ce?Un>ce&&(Le=ft(Je,en,tn,ln,bn,ce),Fe&&(Je.start=lt+Ue*Le)):Dn>ge?Un<ge&&(Le=ft(Je,en,tn,ln,bn,ge),Fe&&(Je.start=lt+Ue*Le)):et(Je,en,tn,pn),Un<ce&&Dn>=ce&&(Le=ft(Je,en,tn,ln,bn,ce),nr=!0),Un>ge&&Dn<=ge&&(Le=ft(Je,en,tn,ln,bn,ge),nr=!0),!De&&nr&&(Fe&&(Je.end=lt+Ue*Le),ie.push(Je),Je=xe(ke)),Fe&&(lt+=Ue)}var fn=ke.length-3;en=ke[fn],tn=ke[fn+1],pn=ke[fn+2],(Dn=Oe===0?en:tn)>=ce&&Dn<=ge&&et(Je,en,tn,pn),fn=Je.length-3,De&&fn>=3&&(Je[fn]!==Je[0]||Je[fn+1]!==Je[1])&&et(Je,Je[0],Je[1],Je[2]),Je.length&&ie.push(Je)}function xe(ke){var ie=[];return ie.size=ke.size,ie.start=ke.start,ie.end=ke.end,ie}function Xe(ke,ie,ce,ge,Oe,De){for(var Fe=0;Fe<ke.length;Fe++)D(ke[Fe],ie,ce,ge,Oe,De,!1)}function et(ke,ie,ce,ge){ke.push(ie),ke.push(ce),ke.push(ge)}function ht(ke,ie,ce,ge,Oe,De){var Fe=(De-ie)/(ge-ie);return ke.push(De),ke.push(ce+(Oe-ce)*Fe),ke.push(1),Fe}function ae(ke,ie,ce,ge,Oe,De){var Fe=(De-ce)/(Oe-ce);return ke.push(ie+(ge-ie)*Fe),ke.push(De),ke.push(1),Fe}function M(ke,ie){for(var ce=[],ge=0;ge<ke.length;ge++){var Oe,De=ke[ge],Fe=De.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")Oe=U(De.geometry,ie);else if(Fe==="MultiLineString"||Fe==="Polygon"){Oe=[];for(var Ue=0;Ue<De.geometry.length;Ue++)Oe.push(U(De.geometry[Ue],ie))}else if(Fe==="MultiPolygon")for(Oe=[],Ue=0;Ue<De.geometry.length;Ue++){for(var Le=[],Je=0;Je<De.geometry[Ue].length;Je++)Le.push(U(De.geometry[Ue][Je],ie));Oe.push(Le)}ce.push(St(De.id,Fe,Oe,De.tags))}return ce}function U(ke,ie){var ce=[];ce.size=ke.size,ke.start!==void 0&&(ce.start=ke.start,ce.end=ke.end);for(var ge=0;ge<ke.length;ge+=3)ce.push(ke[ge]+ie,ke[ge+1],ke[ge+2]);return ce}function Se(ke,ie){if(ke.transformed)return ke;var ce,ge,Oe,De=1<<ke.z,Fe=ke.x,Ue=ke.y;for(ce=0;ce<ke.features.length;ce++){var Le=ke.features[ce],Je=Le.geometry,ft=Le.type;if(Le.geometry=[],ft===1)for(ge=0;ge<Je.length;ge+=2)Le.geometry.push(Ge(Je[ge],Je[ge+1],ie,De,Fe,Ue));else for(ge=0;ge<Je.length;ge++){var lt=[];for(Oe=0;Oe<Je[ge].length;Oe+=2)lt.push(Ge(Je[ge][Oe],Je[ge][Oe+1],ie,De,Fe,Ue));Le.geometry.push(lt)}}return ke.transformed=!0,ke}function Ge(ke,ie,ce,ge,Oe,De){return[Math.round(ce*(ke*ge-Oe)),Math.round(ce*(ie*ge-De))]}function tt(ke,ie,ce,ge,Oe){for(var De=ie===Oe.maxZoom?0:Oe.tolerance/((1<<ie)*Oe.extent),Fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ce,y:ge,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<ke.length;Ue++){Fe.numFeatures++,Ve(Fe,ke[Ue],De,Oe);var Le=ke[Ue].minX,Je=ke[Ue].minY,ft=ke[Ue].maxX,lt=ke[Ue].maxY;Le<Fe.minX&&(Fe.minX=Le),Je<Fe.minY&&(Fe.minY=Je),ft>Fe.maxX&&(Fe.maxX=ft),lt>Fe.maxY&&(Fe.maxY=lt)}return Fe}function Ve(ke,ie,ce,ge){var Oe=ie.geometry,De=ie.type,Fe=[];if(De==="Point"||De==="MultiPoint")for(var Ue=0;Ue<Oe.length;Ue+=3)Fe.push(Oe[Ue]),Fe.push(Oe[Ue+1]),ke.numPoints++,ke.numSimplified++;else if(De==="LineString")Tt(Fe,Oe,ke,ce,!1,!1);else if(De==="MultiLineString"||De==="Polygon")for(Ue=0;Ue<Oe.length;Ue++)Tt(Fe,Oe[Ue],ke,ce,De==="Polygon",Ue===0);else if(De==="MultiPolygon")for(var Le=0;Le<Oe.length;Le++){var Je=Oe[Le];for(Ue=0;Ue<Je.length;Ue++)Tt(Fe,Je[Ue],ke,ce,!0,Ue===0)}if(Fe.length){var ft=ie.tags||null;if(De==="LineString"&&ge.lineMetrics){for(var lt in ft={},ie.tags)ft[lt]=ie.tags[lt];ft.mapbox_clip_start=Oe.start/Oe.size,ft.mapbox_clip_end=Oe.end/Oe.size}var ut={geometry:Fe,type:De==="Polygon"||De==="MultiPolygon"?3:De==="LineString"||De==="MultiLineString"?2:1,tags:ft};ie.id!==null&&(ut.id=ie.id),ke.features.push(ut)}}function Tt(ke,ie,ce,ge,Oe,De){var Fe=ge*ge;if(ge>0&&ie.size<(Oe?Fe:ge))ce.numPoints+=ie.length/3;else{for(var Ue=[],Le=0;Le<ie.length;Le+=3)(ge===0||ie[Le+2]>Fe)&&(ce.numSimplified++,Ue.push(ie[Le]),Ue.push(ie[Le+1])),ce.numPoints++;Oe&&function(Je,ft){for(var lt=0,ut=0,en=Je.length,tn=en-2;ut<en;tn=ut,ut+=2)lt+=(Je[ut]-Je[tn])*(Je[ut+1]+Je[tn+1]);if(lt>0===ft)for(ut=0,en=Je.length;ut<en/2;ut+=2){var pn=Je[ut],ln=Je[ut+1];Je[ut]=Je[en-2-ut],Je[ut+1]=Je[en-1-ut],Je[en-2-ut]=pn,Je[en-1-ut]=ln}}(Ue,De),ke.push(Ue)}}function zt(ke,ie){var ce=(ie=this.options=function(Oe,De){for(var Fe in De)Oe[Fe]=De[Fe];return Oe}(Object.create(this.options),ie)).debug;if(ce&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var ge=function(Oe,De){var Fe=[];if(Oe.type==="FeatureCollection")for(var Ue=0;Ue<Oe.features.length;Ue++)Lt(Fe,Oe.features[Ue],De,Ue);else Lt(Fe,Oe.type==="Feature"?Oe:{geometry:Oe},De);return Fe}(ke,ie);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ge=function(Oe,De){var Fe=De.buffer/De.extent,Ue=Oe,Le=be(Oe,1,-1-Fe,Fe,0,-1,2,De),Je=be(Oe,1,1-Fe,2+Fe,0,-1,2,De);return(Le||Je)&&(Ue=be(Oe,1,-Fe,1+Fe,0,-1,2,De)||[],Le&&(Ue=M(Le,1).concat(Ue)),Je&&(Ue=Ue.concat(M(Je,-1)))),Ue}(ge,ie),ge.length&&this.splitTile(ge,0,0,0),ce&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function hn(ke,ie,ce){return 32*((1<<ke)*ce+ie)+ke}function En(ke,ie){return ie?ke.properties[ie]:ke.id}function Rt(ke,ie){if(ke==null)return!0;if(ke.type==="Feature")return En(ke,ie)!=null;if(ke.type==="FeatureCollection"){const ce=new Set;for(const ge of ke.features){const Oe=En(ge,ie);if(Oe==null||ce.has(Oe))return!1;ce.add(Oe)}return!0}return!1}function Dr(ke,ie){const ce=new Map;if(ke!=null)if(ke.type==="Feature")ce.set(En(ke,ie),ke);else for(const ge of ke.features)ce.set(En(ge,ie),ge);return ce}zt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zt.prototype.splitTile=function(ke,ie,ce,ge,Oe,De,Fe){for(var Ue=[ke,ie,ce,ge],Le=this.options,Je=Le.debug;Ue.length;){ge=Ue.pop(),ce=Ue.pop(),ie=Ue.pop(),ke=Ue.pop();var ft=1<<ie,lt=hn(ie,ce,ge),ut=this.tiles[lt];if(!ut&&(Je>1&&console.time("creation"),ut=this.tiles[lt]=tt(ke,ie,ce,ge,Le),this.tileCoords.push({z:ie,x:ce,y:ge}),Je)){Je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,ce,ge,ut.numFeatures,ut.numPoints,ut.numSimplified),console.timeEnd("creation"));var en="z"+ie;this.stats[en]=(this.stats[en]||0)+1,this.total++}if(ut.source=ke,Oe){if(ie===Le.maxZoom||ie===Oe)continue;var tn=1<<Oe-ie;if(ce!==Math.floor(De/tn)||ge!==Math.floor(Fe/tn))continue}else if(ie===Le.indexMaxZoom||ut.numPoints<=Le.indexMaxPoints)continue;if(ut.source=null,ke.length!==0){Je>1&&console.time("clipping");var pn,ln,bn,Dn,Un,nr,fn=.5*Le.buffer/Le.extent,Yn=.5-fn,_r=.5+fn,Wr=1+fn;pn=ln=bn=Dn=null,Un=be(ke,ft,ce-fn,ce+_r,0,ut.minX,ut.maxX,Le),nr=be(ke,ft,ce+Yn,ce+Wr,0,ut.minX,ut.maxX,Le),ke=null,Un&&(pn=be(Un,ft,ge-fn,ge+_r,1,ut.minY,ut.maxY,Le),ln=be(Un,ft,ge+Yn,ge+Wr,1,ut.minY,ut.maxY,Le),Un=null),nr&&(bn=be(nr,ft,ge-fn,ge+_r,1,ut.minY,ut.maxY,Le),Dn=be(nr,ft,ge+Yn,ge+Wr,1,ut.minY,ut.maxY,Le),nr=null),Je>1&&console.timeEnd("clipping"),Ue.push(pn||[],ie+1,2*ce,2*ge),Ue.push(ln||[],ie+1,2*ce,2*ge+1),Ue.push(bn||[],ie+1,2*ce+1,2*ge),Ue.push(Dn||[],ie+1,2*ce+1,2*ge+1)}}},zt.prototype.getTile=function(ke,ie,ce){var ge=this.options,Oe=ge.extent,De=ge.debug;if(ke<0||ke>24)return null;var Fe=1<<ke,Ue=hn(ke,ie=(ie%Fe+Fe)%Fe,ce);if(this.tiles[Ue])return Se(this.tiles[Ue],Oe);De>1&&console.log("drilling down to z%d-%d-%d",ke,ie,ce);for(var Le,Je=ke,ft=ie,lt=ce;!Le&&Je>0;)Je--,ft=Math.floor(ft/2),lt=Math.floor(lt/2),Le=this.tiles[hn(Je,ft,lt)];return Le&&Le.source?(De>1&&console.log("found parent tile z%d-%d-%d",Je,ft,lt),De>1&&console.time("drilling down"),this.splitTile(Le.source,Je,ft,lt,ke,ie,ce),De>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Se(this.tiles[Ue],Oe):null):null};class fi extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,ce){return f._(this,void 0,void 0,function*(){const ge=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Oe=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!Oe)return null;const De=new class{constructor(Ue){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.W,this.length=Ue.length,this._features=Ue}feature(Ue){return new class{constructor(Le){this._feature=Le,this.extent=f.W,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const Je of this._feature.geometry)Le.push([new f.P(Je[0],Je[1])]);return Le}{const Le=[];for(const Je of this._feature.geometry){const ft=[];for(const lt of Je)ft.push(new f.P(lt[0],lt[1]));Le.push(ft)}return Le}}toGeoJSON(Le,Je,ft){return he.call(this,Le,Je,ft)}}(this._features[Ue])}}(Oe.features);let Fe=Q(De);return Fe.byteOffset===0&&Fe.byteLength===Fe.buffer.byteLength||(Fe=new Uint8Array(Fe)),{vectorTile:De,rawData:Fe.buffer}})}loadData(ie){return f._(this,void 0,void 0,function*(){var ce;(ce=this._pendingRequest)===null||ce===void 0||ce.abort();const ge=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new f.bs(ie.request);this._pendingRequest=new AbortController;try{let Oe=yield this.loadGeoJSON(ie,this._pendingRequest);if(delete this._pendingRequest,typeof Oe!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(O(Oe,!0),ie.filter){const Fe=f.by(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));Oe={type:"FeatureCollection",features:Oe.features.filter(Le=>Fe.value.evaluate({zoom:0},Le))}}this._geoJSONIndex=ie.cluster?new Re(function({superclusterOptions:Fe,clusterProperties:Ue}){if(!Ue||!Fe)return Fe;const Le={},Je={},ft={accumulated:null,zoom:0},lt={properties:null},ut=Object.keys(Ue);for(const en of ut){const[tn,pn]=Ue[en],ln=f.by(pn),bn=f.by(typeof tn=="string"?[tn,["accumulated"],["get",en]]:tn);Le[en]=ln.value,Je[en]=bn.value}return Fe.map=en=>{lt.properties=en;const tn={};for(const pn of ut)tn[pn]=Le[pn].evaluate(ft,lt);return tn},Fe.reduce=(en,tn)=>{lt.properties=tn;for(const pn of ut)ft.accumulated=en[pn],en[pn]=Je[pn].evaluate(ft,lt)},Fe}(ie)).load(Oe.features):function(Fe,Ue){return new zt(Fe,Ue)}(Oe,ie.geojsonVtOptions),this.loaded={};const De={};if(ge){const Fe=ge.finish();Fe&&(De.resourceTiming={},De.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Fe)))}return De}catch(Oe){if(delete this._pendingRequest,f.bz(Oe))return{abandoned:!0};throw Oe}})}reloadTile(ie){const ce=this.loaded;return ce&&ce[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadGeoJSON(ie,ce){return f._(this,void 0,void 0,function*(){const{promoteId:ge}=ie;if(ie.request){const Oe=yield f.h(ie.request,ce);return this._dataUpdateable=Rt(Oe.data,ge)?Dr(Oe.data,ge):void 0,Oe.data}if(typeof ie.data=="string")try{const Oe=JSON.parse(ie.data);return this._dataUpdateable=Rt(Oe,ge)?Dr(Oe,ge):void 0,Oe}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return function(Oe,De,Fe){var Ue,Le,Je,ft;if(De.removeAll&&Oe.clear(),De.remove)for(const lt of De.remove)Oe.delete(lt);if(De.add)for(const lt of De.add){const ut=En(lt,Fe);ut!=null&&Oe.set(ut,lt)}if(De.update)for(const lt of De.update){let ut=Oe.get(lt.id);if(ut==null)continue;const en=!lt.removeAllProperties&&(((Ue=lt.removeProperties)===null||Ue===void 0?void 0:Ue.length)>0||((Le=lt.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((lt.newGeometry||lt.removeAllProperties||en)&&(ut=Object.assign({},ut),Oe.set(lt.id,ut),en&&(ut.properties=Object.assign({},ut.properties))),lt.newGeometry&&(ut.geometry=lt.newGeometry),lt.removeAllProperties)ut.properties={};else if(((Je=lt.removeProperties)===null||Je===void 0?void 0:Je.length)>0)for(const tn of lt.removeProperties)Object.prototype.hasOwnProperty.call(ut.properties,tn)&&delete ut.properties[tn];if(((ft=lt.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:tn,value:pn}of lt.addOrUpdateProperties)ut.properties[tn]=pn}}(this._dataUpdateable,ie.dataDiff,ge),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ie){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class tr{constructor(ie){this.self=ie,this.actor=new f.C(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ce,ge)=>{if(this.externalWorkerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.externalWorkerSourceTypes[ce]=ge},this.self.addProtocol=f.bf,this.self.removeProtocol=f.bg,this.self.registerRTLTextPlugin=ce=>{if(f.bA.isParsed())throw new Error("RTL text plugin already registered.");f.bA.setMethods(ce)},this.actor.registerMessageHandler("LDT",(ce,ge)=>this._getDEMWorkerSource(ce,ge.source).loadTile(ge)),this.actor.registerMessageHandler("RDT",(ce,ge)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ce,ge.source).removeTile(ge)})),this.actor.registerMessageHandler("GCEZ",(ce,ge)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,ge.type,ge.source).getClusterExpansionZoom(ge)})),this.actor.registerMessageHandler("GCC",(ce,ge)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,ge.type,ge.source).getClusterChildren(ge)})),this.actor.registerMessageHandler("GCL",(ce,ge)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,ge.type,ge.source).getClusterLeaves(ge)})),this.actor.registerMessageHandler("LD",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).loadData(ge)),this.actor.registerMessageHandler("LT",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).loadTile(ge)),this.actor.registerMessageHandler("RT",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).reloadTile(ge)),this.actor.registerMessageHandler("AT",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).abortTile(ge)),this.actor.registerMessageHandler("RMT",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).removeTile(ge)),this.actor.registerMessageHandler("RS",(ce,ge)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[ce]||!this.workerSources[ce][ge.type]||!this.workerSources[ce][ge.type][ge.source])return;const Oe=this.workerSources[ce][ge.type][ge.source];delete this.workerSources[ce][ge.type][ge.source],Oe.removeSource!==void 0&&Oe.removeSource(ge)})),this.actor.registerMessageHandler("RM",ce=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[ce],delete this.availableImages[ce],delete this.workerSources[ce],delete this.demWorkerSources[ce]})),this.actor.registerMessageHandler("SR",(ce,ge)=>f._(this,void 0,void 0,function*(){this.referrer=ge})),this.actor.registerMessageHandler("SRPS",(ce,ge)=>this._syncRTLPluginState(ce,ge)),this.actor.registerMessageHandler("IS",(ce,ge)=>f._(this,void 0,void 0,function*(){this.self.importScripts(ge)})),this.actor.registerMessageHandler("SI",(ce,ge)=>this._setImages(ce,ge)),this.actor.registerMessageHandler("UL",(ce,ge)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(ce).update(ge.layers,ge.removedIds)})),this.actor.registerMessageHandler("SL",(ce,ge)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(ce).replace(ge)}))}_setImages(ie,ce){return f._(this,void 0,void 0,function*(){this.availableImages[ie]=ce;for(const ge in this.workerSources[ie]){const Oe=this.workerSources[ie][ge];for(const De in Oe)Oe[De].availableImages=ce}})}_syncRTLPluginState(ie,ce){return f._(this,void 0,void 0,function*(){if(f.bA.isParsed())return f.bA.getState();if(ce.pluginStatus!=="loading")return f.bA.setState(ce),ce;const ge=ce.pluginURL;if(this.self.importScripts(ge),f.bA.isParsed()){const Oe={pluginStatus:"loaded",pluginURL:ge};return f.bA.setState(Oe),Oe}throw f.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ge}`)})}_getAvailableImages(ie){let ce=this.availableImages[ie];return ce||(ce=[]),ce}_getLayerIndex(ie){let ce=this.layerIndexes[ie];return ce||(ce=this.layerIndexes[ie]=new u),ce}_getWorkerSource(ie,ce,ge){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][ce]||(this.workerSources[ie][ce]={}),!this.workerSources[ie][ce][ge]){const Oe={sendAsync:(De,Fe)=>(De.targetMapId=ie,this.actor.sendAsync(De,Fe))};switch(ce){case"vector":this.workerSources[ie][ce][ge]=new b(Oe,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][ce][ge]=new fi(Oe,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][ce][ge]=new this.externalWorkerSourceTypes[ce](Oe,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][ce][ge]}_getDEMWorkerSource(ie,ce){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][ce]||(this.demWorkerSources[ie][ce]=new T),this.demWorkerSources[ie][ce]}}return f.i(self)&&(self.worker=new tr(self)),tr}),c("index",["exports","./shared"],function(f,u){var S="4.2.0";let C,P;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((r,l)=>{const d=requestAnimationFrame(r);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),l(u.c())})}),getImageData(y,r=0){return this.getImageCanvasContext(y).getImageData(-r,-r,y.width+2*r,y.height+2*r)},getImageCanvasContext(y){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=y.width,r.height=y.height,l.drawImage(y,0,0,y.width,y.height),l},resolveURL:y=>(C||(C=document.createElement("a")),C.href=y,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(P==null&&(P=matchMedia("(prefers-reduced-motion: reduce)")),P.matches)}};class T{static testProp(r){if(!T.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in T.docStyle)return r[l];return r[0]}static create(r,l,d){const g=window.document.createElement(r);return l!==void 0&&(g.className=l),d&&d.appendChild(g),g}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(r,l){r.style[T.transformProp]=l}static addEventListener(r,l,d,g={}){r.addEventListener(l,d,"passive"in g?g:g.capture)}static removeEventListener(r,l,d,g={}){r.removeEventListener(l,d,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(r){const l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,d){const g=l.boundingClientRect;return new u.P((d.clientX-g.left)/l.x-r.clientLeft,(d.clientY-g.top)/l.y-r.clientTop)}static mousePos(r,l){const d=T.getScale(r);return T.getPoint(r,d,l)}static touchPos(r,l){const d=[],g=T.getScale(r);for(let x=0;x<l.length;x++)d.push(T.getPoint(r,g,l[x]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const F={supported:!1,testSupport:function(y){!he&&O&&(Y?q(y):B=y)}};let B,O,he=!1,Y=!1;function q(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,O),y.isContextLost())return;F.supported=!0}catch{}y.deleteTexture(r),he=!0}var $;typeof document<"u"&&(O=document.createElement("img"),O.onload=()=>{B&&q(B),B=null,Y=!0},O.onerror=()=>{he=!0,B=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,l,d,g;y.resetRequestQueue=()=>{r=[],l=0,d=0,g={}},y.addThrottleControl=R=>{const H=d++;return g[H]=R,H},y.removeThrottleControl=R=>{delete g[R],I()},y.getImage=(R,H,J=!0)=>new Promise((re,pe)=>{F.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),u.e(R,{type:"image"}),r.push({abortController:H,requestParameters:R,supportImageRefresh:J,state:"queued",onError:Ie=>{pe(Ie)},onSuccess:Ie=>{re(Ie)}}),I()});const x=R=>u._(this,void 0,void 0,function*(){R.state="running";const{requestParameters:H,supportImageRefresh:J,onError:re,onSuccess:pe,abortController:Ie}=R,Pe=J===!1&&!u.i(self)&&!u.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce((qe,it)=>qe&&it==="accept",!0));l++;const ze=Pe?k(H,Ie):u.m(H,Ie);try{const qe=yield ze;delete R.abortController,R.state="completed",qe.data instanceof HTMLImageElement||u.b(qe.data)?pe(qe):qe.data&&pe({data:yield(Ce=qe.data,typeof createImageBitmap=="function"?u.d(Ce):u.f(Ce)),cacheControl:qe.cacheControl,expires:qe.expires})}catch(qe){delete R.abortController,re(qe)}finally{l--,I()}var Ce}),I=()=>{const R=(()=>{for(const H of Object.keys(g))if(g[H]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=l;H<R&&r.length>0;H++){const J=r.shift();J.abortController.signal.aborted?H--:x(J)}},k=(R,H)=>new Promise((J,re)=>{const pe=new Image,Ie=R.url,Pe=R.credentials;Pe&&Pe==="include"?pe.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!u.s(Ie))&&(pe.crossOrigin="anonymous"),H.signal.addEventListener("abort",()=>{pe.src="",re(u.c())}),pe.fetchPriority="high",pe.onload=()=>{pe.onerror=pe.onload=null,J({data:pe})},pe.onerror=()=>{pe.onerror=pe.onload=null,H.signal.aborted||re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},pe.src=Ie})}($||($={})),$.resetRequestQueue();class se{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}normalizeSpriteURL(r,l,d){const g=function(x){const I=x.match(X);if(!I)throw new Error(`Unable to parse URL "${x}"`);return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}(r);return g.path+=`${l}${d}`,function(x){const I=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${I}`}(g)}setTransformRequest(r){this._transformRequestFn=r}}const X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function V(y){var r=new u.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var E,L=function(y,r,l){return y[0]=r[0]-l[0],y[1]=r[1]-l[1],y[2]=r[2]-l[2],y};E=new u.A(3),u.A!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0);var j=function(y){var r=y[0],l=y[1];return r*r+l*l};function ee(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const l=[];for(const{id:d,url:g}of y){const x=`${d}${g}`;l.indexOf(x)===-1&&(l.push(x),r.push({id:d,url:g}))}}return r}(function(){var y=new u.A(2);u.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Z{constructor(r,l,d,g){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(l,g)}update(r,l,d){const{width:g,height:x}=r,I=!(this.size&&this.size[0]===g&&this.size[1]===x||d),{context:k}=this,{gl:R}=k;if(this.useMipmap=!!(l&&l.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!l||l.premultiply!==!1)),I)this.size=[g,x],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,r):R.texImage2D(R.TEXTURE_2D,0,this.format,g,x,0,this.format,R.UNSIGNED_BYTE,r.data);else{const{x:H,y:J}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?R.texSubImage2D(R.TEXTURE_2D,0,H,J,R.RGBA,R.UNSIGNED_BYTE,r):R.texSubImage2D(R.TEXTURE_2D,0,H,J,g,x,R.RGBA,R.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)}bind(r,l,d){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),r!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,r),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||r),this.filter=r),l!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,l),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ve(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class _e extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,promiseResolve:d}of this.requestors)d(this._getImagesForIds(l));this.requestors=[]}}getImage(r){const l=this.images[r];if(l&&!l.data&&l.spriteData){const d=l.spriteData;l.data=new u.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let d=!0;const g=l.data||l.spriteData;return this._validateStretch(l.stretchX,g&&g.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,g&&g.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,l){if(!r)return!0;let d=0;for(const g of r){if(g[0]<d||g[1]<g[0]||l<g[1])return!1;d=g[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;const d=l.spriteData,g=d&&d.width||l.data.width,x=d&&d.height||l.data.height;return!(r[0]<0||g<r[0]||r[1]<0||x<r[1]||r[2]<0||g<r[2]||r[3]<0||x<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,d=!0){const g=this.getImage(r);if(d&&(g.data.width!==l.data.width||g.data.height!==l.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=g.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,d)=>{let g=!0;if(!this.isLoaded())for(const x of r)this.images[x]||(g=!1);this.isLoaded()||g?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){const l={};for(const d of r){let g=this.getImage(d);g||(this.fire(new u.k("styleimagemissing",{id:d})),g=this.getImage(d)),g?l[d]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:u.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],d=this.getImage(r);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const g={w:d.data.width+2,h:d.data.height+2,x:0,y:0},x=new u.I(g,d);this.patterns[r]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Z(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const x in this.patterns)r.push(this.patterns[x].bin);const{w:l,h:d}=u.p(r),g=this.atlasImage;g.resize({width:l||1,height:d||1});for(const x in this.patterns){const{bin:I}=this.patterns[x],k=I.x+1,R=I.y+1,H=this.getImage(x).data,J=H.width,re=H.height;u.R.copy(H,g,{x:0,y:0},{x:k,y:R},{width:J,height:re}),u.R.copy(H,g,{x:0,y:re-1},{x:k,y:R-1},{width:J,height:1}),u.R.copy(H,g,{x:0,y:0},{x:k,y:R+re},{width:J,height:1}),u.R.copy(H,g,{x:J-1,y:0},{x:k-1,y:R},{width:1,height:re}),u.R.copy(H,g,{x:0,y:0},{x:k+J,y:R},{width:1,height:re})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.getImage(l);d||u.w(`Image with ID: "${l}" was not found`),ve(d)&&this.updateImage(l,d)}}}const de=1e20;function oe(y,r,l,d,g,x,I,k,R){for(let H=r;H<r+d;H++)ue(y,l*x+H,x,g,I,k,R);for(let H=l;H<l+g;H++)ue(y,H*x+r,1,d,I,k,R)}function ue(y,r,l,d,g,x,I){x[0]=0,I[0]=-de,I[1]=de,g[0]=y[r];for(let k=1,R=0,H=0;k<d;k++){g[k]=y[r+k*l];const J=k*k;do{const re=x[R];H=(g[k]-g[re]+J-re*re)/(k-re)/2}while(H<=I[R]&&--R>-1);R++,x[R]=k,I[R]=H,I[R+1]=de}for(let k=0,R=0;k<d;k++){for(;I[R+1]<k;)R++;const H=x[R],J=k-H;y[r+k*l]=g[H]+J*J}}class Q{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const l=[];for(const x in r)for(const I of r[x])l.push(this._getAndCacheGlyphsPromise(x,I));const d=yield Promise.all(l),g={};for(const{stack:x,id:I,glyph:k}of d)g[x]||(g[x]={}),g[x][I]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return g})}_getAndCacheGlyphsPromise(r,l){return u._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let g=d.glyphs[l];if(g!==void 0)return{stack:r,id:l,glyph:g};if(g=this._tinySDF(d,r,l),g)return d.glyphs[l]=g,{stack:r,id:l,glyph:g};const x=Math.floor(l/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[x])return{stack:r,id:l,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[x]){const k=Q.loadGlyphRange(r,x,this.url,this.requestManager);d.requests[x]=k}const I=yield d.requests[x];for(const k in I)this._doesCharSupportLocalGlyph(+k)||(d.glyphs[+k]=I[+k]);return d.ranges[x]=!0,{stack:r,id:l,glyph:I[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,l,d){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(d))return;let x=r.tinySDF;if(!x){let k="400";/bold/i.test(l)?k="900":/medium/i.test(l)?k="500":/light/i.test(l)&&(k="200"),x=r.tinySDF=new Q.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:k})}const I=x.draw(String.fromCharCode(d));return{id:d,bitmap:new u.o({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}Q.loadGlyphRange=function(y,r,l,d){return u._(this,void 0,void 0,function*(){const g=256*r,x=g+255,I=d.transformRequest(l.replace("{fontstack}",y).replace("{range}",`${g}-${x}`),"Glyphs"),k=yield u.l(I,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${r}, ${g}-${x}`);const R={};for(const H of u.n(k.data))R[H.id]=H;return R})},Q.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:I="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=l;const k=this.size=y+4*r,R=this._createCanvas(k),H=this.ctx=R.getContext("2d",{willReadFrequently:!0});H.font=`${I} ${x} ${y}px ${g}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(y),I=Math.ceil(l),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),R=Math.min(this.size-this.buffer,I+Math.ceil(d)),H=k+2*this.buffer,J=R+2*this.buffer,re=Math.max(H*J,0),pe=new Uint8ClampedArray(re),Ie={data:pe,width:H,height:J,glyphWidth:k,glyphHeight:R,glyphTop:I,glyphLeft:0,glyphAdvance:r};if(k===0||R===0)return Ie;const{ctx:Pe,buffer:ze,gridInner:Ce,gridOuter:qe}=this;Pe.clearRect(ze,ze,k,R),Pe.fillText(y,ze,ze+I);const it=Pe.getImageData(ze,ze,k,R);qe.fill(de,0,re),Ce.fill(0,0,re);for(let je=0;je<R;je++)for(let Ke=0;Ke<k;Ke++){const ot=it.data[4*(je*k+Ke)+3]/255;if(ot===0)continue;const st=(je+ze)*H+Ke+ze;if(ot===1)qe[st]=0,Ce[st]=de;else{const ct=.5-ot;qe[st]=ct>0?ct*ct:0,Ce[st]=ct<0?ct*ct:0}}oe(qe,0,0,H,J,H,this.f,this.v,this.z),oe(Ce,ze,ze,k,R,H,this.f,this.v,this.z);for(let je=0;je<re;je++){const Ke=Math.sqrt(qe[je])-Math.sqrt(Ce[je]);pe[je]=Math.round(255-255*(Ke/this.radius+this.cutoff))}return Ie}};class te{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,l){return u.y(r.expression.evaluate(l))}interpolate(r,l,d){return{x:u.z.number(r.x,l.x,d),y:u.z.number(r.y,l.y,d),z:u.z.number(r.z,l.z,d)}}}let fe;class we extends u.E{constructor(r){super(),fe=fe||new u.q({anchor:new u.D(u.v.light.anchor),position:new te,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(fe),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(u.r,r,l))for(const d in r){const g=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d){return(!d||d.validate!==!1)&&u.t(this,r.call(u.x,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Ee{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const d=r.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,l)),this.dashEntry[d]}getDashRanges(r,l,d){const g=[];let x=r.length%2==1?-r[r.length-1]*d:0,I=r[0]*d,k=!0;g.push({left:x,right:I,isDash:k,zeroLength:r[0]===0});let R=r[0];for(let H=1;H<r.length;H++){k=!k;const J=r[H];x=R*d,R+=J,I=R*d,g.push({left:x,right:I,isDash:k,zeroLength:J===0})}return g}addRoundDash(r,l,d){const g=l/2;for(let x=-d;x<=d;x++){const I=this.width*(this.nextRow+d+x);let k=0,R=r[k];for(let H=0;H<this.width;H++){H/R.right>1&&(R=r[++k]);const J=Math.abs(H-R.left),re=Math.abs(H-R.right),pe=Math.min(J,re);let Ie;const Pe=x/d*(g+1);if(R.isDash){const ze=g-Math.abs(Pe);Ie=Math.sqrt(pe*pe+ze*ze)}else Ie=g-Math.sqrt(pe*pe+Pe*Pe);this.data[I+H]=Math.max(0,Math.min(255,Ie+128))}}}addRegularDash(r){for(let k=r.length-1;k>=0;--k){const R=r[k],H=r[k+1];R.zeroLength?r.splice(k,1):H&&H.isDash===R.isDash&&(H.left=R.left,r.splice(k,1))}const l=r[0],d=r[r.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const g=this.width*this.nextRow;let x=0,I=r[x];for(let k=0;k<this.width;k++){k/I.right>1&&(I=r[++x]);const R=Math.abs(k-I.left),H=Math.abs(k-I.right),J=Math.min(R,H);this.data[g+k]=Math.max(0,Math.min(255,(I.isDash?J:-J)+128))}}addDash(r,l){const d=l?7:0,g=2*d+1;if(this.nextRow+g>this.height)return u.w("LineAtlas out of space"),null;let x=0;for(let k=0;k<r.length;k++)x+=r[k];if(x!==0){const k=this.width/x,R=this.getDashRanges(r,this.width,k);l?this.addRoundDash(R,k,d):this.addRegularDash(R)}const I={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:x};return this.nextRow+=g,this.dirty=!0,I}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Ne="maplibre_preloaded_worker_pool";class Ae{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ae.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}const Re=Math.floor(b.hardwareConcurrency/2);let Ze,He;function rt(){return Ze||(Ze=new Ae),Ze}Ae.workerCount=u.B(globalThis)?Math.max(Math.min(Re,3),1):1;class dt{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;const d=this.workerPool.acquire(l);for(let g=0;g<d.length;g++){const x=new u.C(d[g],l);x.name=`Worker ${g}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){const d=[];for(const g of this.actors)d.push(g.sendAsync({type:r,data:l}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(const d of this.actors)d.registerMessageHandler(r,l)}}function wt(){return He||(He=new dt(rt(),u.G),He.registerMessageHandler("GR",(y,r,l)=>u.m(r,l))),He}function kt(y,r){const l=u.F();return u.H(l,l,[1,1,0]),u.J(l,l,[.5*y.width,.5*y.height,1]),u.K(l,l,y.calculatePosMatrix(r.toUnwrapped()))}function mt(y,r,l,d,g,x){const I=function(re,pe,Ie){if(re)for(const Pe of re){const ze=pe[Pe];if(ze&&ze.source===Ie&&ze.type==="fill-extrusion")return!0}else for(const Pe in pe){const ze=pe[Pe];if(ze.source===Ie&&ze.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,y.id),k=x.maxPitchScaleFactor(),R=y.tilesIn(d,k,I);R.sort(St);const H=[];for(const re of R)H.push({wrappedTileID:re.tileID.wrapped().key,queryResults:re.tile.queryRenderedFeatures(r,l,y._state,re.queryGeometry,re.cameraQueryGeometry,re.scale,g,x,k,kt(y.transform,re.tileID))});const J=function(re){const pe={},Ie={};for(const Pe of re){const ze=Pe.queryResults,Ce=Pe.wrappedTileID,qe=Ie[Ce]=Ie[Ce]||{};for(const it in ze){const je=ze[it],Ke=qe[it]=qe[it]||{},ot=pe[it]=pe[it]||[];for(const st of je)Ke[st.featureIndex]||(Ke[st.featureIndex]=!0,ot.push(st))}}return pe}(H);for(const re in J)J[re].forEach(pe=>{const Ie=pe.feature,Pe=y.getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=Pe});return J}function St(y,r){const l=y.tileID,d=r.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}function Vt(y,r,l){return u._(this,void 0,void 0,function*(){let d=y;if(y.url?d=(yield u.h(r.transformRequest(y.url,"Source"),l)).data:yield b.frameAsync(l),!d)return null;const g=u.L(u.e(d,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(g.vectorLayerIds=d.vector_layers.map(x=>x.id)),g})}class Lt{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}extend(r){const l=this._sw,d=this._ne;let g,x;if(r instanceof u.M)g=r,x=r;else{if(!(r instanceof Lt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Lt.convert(r)):this.extend(u.M.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.M.convert(r)):this;if(g=r._sw,x=r._ne,!g||!x)return this}return l||d?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),d.lng=Math.max(x.lng,d.lng),d.lat=Math.max(x.lat,d.lat)):(this._sw=new u.M(g.lng,g.lat),this._ne=new u.M(x.lng,x.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:d}=u.M.convert(r);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&g}static convert(r){return r instanceof Lt?r:r&&new Lt(r)}static fromLngLat(r,l=0){const d=360*l/40075017,g=d/Math.cos(Math.PI/180*r.lat);return new Lt(new u.M(r.lng-g,r.lat-d),new u.M(r.lng+g,r.lat+d))}}class sn{constructor(r,l,d){this.bounds=Lt.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),d=Math.floor(u.N(this.bounds.getWest())*l),g=Math.floor(u.O(this.bounds.getNorth())*l),x=Math.ceil(u.N(this.bounds.getEast())*l),I=Math.ceil(u.O(this.bounds.getSouth())*l);return r.x>=d&&r.x<x&&r.y>=g&&r.y<I}}class nt extends u.E{constructor(r,l,d,g){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(l,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Vt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new sn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((x,I)=>{r.reloadPromise={resolve:x,reject:I}})}else r.actor=this.dispatcher.getActor(),g="LT";r.abortController=new AbortController;try{const x=yield r.actor.sendAsync({type:g,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,x)}catch(x){if(delete r.abortController,r.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class wn extends u.E{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},l),u.e(this,u.L(l,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Vt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new sn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield $.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const g=this.map.painter.context,x=g.gl,I=d.data;r.texture=this.map.painter.getTileTexture(I.width),r.texture?r.texture.update(I,{useMipmap:!0}):(r.texture=new Z(g,I,x.RGBA,{useMipmap:!0}),r.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&x.texParameterf(x.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class an extends wn{constructor(r,l,d,g){super(r,l,d,g),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const g=yield $.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(g&&g.data){const x=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&r.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const I=u.b(x)&&u.S()?x:yield this.readImageNow(x),k={type:this.type,uid:r.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const R=yield r.actor.sendAsync({type:"LDT",data:k});r.dem=R,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(g){if(delete r.abortController,r.aborted)r.state="unloaded";else if(g)throw r.state="errored",g}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const l=r.width+2,d=r.height+2;try{return new u.R({width:l,height:d},yield u.V(r,-1,-1,l,d))}catch{}}return b.getImageData(r,1)})}_getNeighboringTiles(r){const l=r.canonical,d=Math.pow(2,l.z),g=(l.x-1+d)%d,x=l.x===0?r.wrap-1:r.wrap,I=(l.x+1+d)%d,k=l.x+1===d?r.wrap+1:r.wrap,R={};return R[new u.Q(r.overscaledZ,x,l.z,g,l.y).key]={backfilled:!1},R[new u.Q(r.overscaledZ,k,l.z,I,l.y).key]={backfilled:!1},l.y>0&&(R[new u.Q(r.overscaledZ,x,l.z,g,l.y-1).key]={backfilled:!1},R[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},R[new u.Q(r.overscaledZ,k,l.z,I,l.y-1).key]={backfilled:!1}),l.y+1<d&&(R[new u.Q(r.overscaledZ,x,l.z,g,l.y+1).key]={backfilled:!1},R[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},R[new u.Q(r.overscaledZ,k,l.z,I,l.y+1).key]={backfilled:!1}),R}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Ht extends u.E{constructor(r,l,d,g){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(g),this._data=l.data,this._options=u.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:u.W,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.W,radius:(l.clusterRadius||50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:d}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const l=u.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let g=null;d.resourceTiming&&d.resourceTiming[this.id]&&(g=d.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&u.e(x,{resourceTiming:g}),this.fire(new u.k("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const g=yield this.actor.sendAsync({type:l,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(g,this.map.painter,l==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var be=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class N extends u.E{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield $.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new u.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const l=r.map(u.Y.fromLngLat);this.tileID=function(g){let x=1/0,I=1/0,k=-1/0,R=-1/0;for(const pe of g)x=Math.min(x,pe.x),I=Math.min(I,pe.y),k=Math.max(k,pe.x),R=Math.max(R,pe.y);const H=Math.max(k-x,R-I),J=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),re=Math.pow(2,J);return new u.a0(J,Math.floor((x+k)/2*re),Math.floor((I+R)/2*re))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,u.W,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,u.W),this._boundsArray.emplaceBack(d[2].x,d[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Z(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class D extends N{constructor(r,l,d,g){super(r,l,d,g),this.roundZoom=!0,this.type="video",this.options=l}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield u.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new u.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new Z(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xe extends N{constructor(r,l,d,g){super(r,l,d,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(I=>typeof I!="number"))||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Z(l,this.canvas,d.RGBA,{premultiply:!0});let g=!1;for(const x in this.tiles){const I=this.tiles[x];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,g=!0)}g&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Xe={},et=y=>{switch(y){case"geojson":return Ht;case"image":return N;case"raster":return wn;case"raster-dem":return an;case"vector":return nt;case"video":return D;case"canvas":return xe}return Xe[y]},ht="RTLPluginLoaded";class ae extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=wt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(l,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(ht))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let M=null;function U(){return M||(M=new ae),M}class Se{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a3(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,x){const I={};if(!x)return I;for(const k of g){const R=k.layerIds.map(H=>x.getLayer(H)).filter(Boolean);if(R.length!==0){k.layers=R,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(H=>R.filter(J=>J.id===H)[0]));for(const H of R)I[H.id]=k}}return I}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof u.a5){if(this.hasSymbolBuckets=!0,!d)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof u.a5&&x.hasRTLText){this.hasRTLText=!0,U().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(g).queryRadius(x))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const g=this.buckets[d];g.uploadPending()&&g.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Z(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Z(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,g,x,I,k,R,H,J){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:I,tileSize:this.tileSize,pixelPosMatrix:J,transform:R,params:k,queryPadding:this.queryPadding*H},r,l,d):{}}querySourceFeatures(r,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const g=d.loadVTLayers(),x=l&&l.sourceLayer?l.sourceLayer:"",I=g._geojsonTileLayer||g[x];if(!I)return;const k=u.a6(l&&l.filter),{z:R,x:H,y:J}=this.tileID.canonical,re={z:R,x:H,y:J};for(let pe=0;pe<I.length;pe++){const Ie=I.feature(pe);if(k.needGeometry){const Ce=u.a7(Ie,!0);if(!k.filter(new u.a8(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!k.filter(new u.a8(this.tileID.overscaledZ),Ie))continue;const Pe=d.getId(Ie,x),ze=new u.a9(Ie,R,H,J,Pe);ze.tile=re,r.push(ze)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const d=u.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let g=!1;if(this.expirationTime>d)g=!1;else if(l)if(this.expirationTime<l)g=!0;else{const x=this.expirationTime-l;x?this.expirationTime=d+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const x=this.buckets[g],I=x.layers[0].sourceLayer||"_geojsonTileLayer",k=d[I],R=r[I];if(!k||!R||Object.keys(R).length===0)continue;x.update(R,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const H=l&&l.style&&l.style.getLayer(g);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=b.now()+r}setDependencies(r,l){const d={};for(const g of l)d[g]=!0;this.dependencies[r]=d}hasDependency(r,l){for(const d of r){const g=this.dependencies[d];if(g){for(const x of l)if(g[x])return!0}}return!1}}class Ge{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:l,timeout:void 0};if(d!==void 0&&(x.timeout=setTimeout(()=>{this.remove(r,x)},d)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const d=r.wrapped().key,g=l===void 0?0:this.data[d].indexOf(l),x=this.data[d][g];return this.data[d].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(x.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const d in this.data)for(const g of this.data[d])r(g.value)||l.push(g);for(const d of l)this.remove(d.value.tileID,d)}}class tt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){const g=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},u.e(this.stateChanges[r][g],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const x in this.state[r])x!==g&&(this.deletedStates[r][x]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const x in this.state[r][g])d[x]||(this.deletedStates[r][g][x]=null)}else for(const x in d)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][x]===null&&delete this.deletedStates[r][g][x]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;const g=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][d]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(d in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][d]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,l){const d=String(l),g=u.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const x=this.deletedStates[r][l];if(x===null)return{};for(const I in x)delete g[I]}return g}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const d={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const I in this.stateChanges[g])this.state[g][I]||(this.state[g][I]={}),u.e(this.state[g][I],this.stateChanges[g][I]),x[I]=this.state[g][I];d[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const I in this.state[g])x[I]={},this.state[g][I]={};else for(const I in this.deletedStates[g]){if(this.deletedStates[g][I]===null)this.state[g][I]={};else for(const k of Object.keys(this.deletedStates[g][I]))delete this.state[g][I][k];x[I]=this.state[g][I]}d[g]=d[g]||{},u.e(d[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const g in r)r[g].setFeatureState(d,l)}}class Ve extends u.E{constructor(r,l,d){super(),this.id=r,this.dispatcher=d,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,x,I,k)=>{const R=new(et(x.type))(g,x,I,k);if(R.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${R.id}`);return R})(r,l,d,this),this._tiles={},this._cache=new Ge(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new tt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,d){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,d)}catch(g){r.state="errored",g.status!==404?this._source.fire(new u.j(g,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Tt).map(r=>r.key)}getRenderableIds(r){const l=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&l.push(this._tiles[d]);return r?l.sort((d,g)=>{const x=d.tileID,I=g.tileID,k=new u.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),R=new u.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-I.overscaledZ||R.y-k.y||R.x-k.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(Tt).map(d=>d.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return u._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),yield this._loadTile(d,r,l))})}_tileLoaded(r,l,d){r.timeAdded=b.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let g=0;g<l.length;g++){const x=l[g];if(r.neighboringTiles&&r.neighboringTiles[x]){const I=this.getTileByID(x);d(r,I),d(I,r)}}function d(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let I=x.tileID.canonical.x-g.tileID.canonical.x;const k=x.tileID.canonical.y-g.tileID.canonical.y,R=Math.pow(2,g.tileID.canonical.z),H=x.tileID.key;I===0&&k===0||Math.abs(k)>1||(Math.abs(I)>1&&(Math.abs(I+R)===1?I+=R:Math.abs(I-R)===1&&(I-=R)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,I,k),g.neighboringTiles&&g.neighboringTiles[H]&&(g.neighboringTiles[H].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,g){for(const x in this._tiles){let I=this._tiles[x];if(g[x]||!I.hasData()||I.tileID.overscaledZ<=l||I.tileID.overscaledZ>d)continue;let k=I.tileID;for(;I&&I.tileID.overscaledZ>l+1;){const H=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[H.key],I&&I.hasData()&&(k=H)}let R=k;for(;R.overscaledZ>l;)if(R=R.scaledTo(R.overscaledZ-1),r[R.key]){g[k.key]=k;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){const g=r.scaledTo(d),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const d={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+l),d[x.tileID.key]=x}this._tiles=d;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(r,l){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new u.Q(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(J=>this._source.hasTile(J)))):d=[];const g=r.coveringZoomLevel(this._source),x=Math.max(g-Ve.maxOverzooming,this._source.minzoom),I=Math.max(g+Ve.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const J={};for(const re of d)if(re.canonical.z>this._source.minzoom){const pe=re.scaledTo(re.canonical.z-1);J[pe.key]=pe;const Ie=re.scaledTo(Math.max(this._source.minzoom,Math.min(re.canonical.z,5)));J[Ie.key]=Ie}d=d.concat(Object.values(J))}const k=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=this._updateRetainedTiles(d,g);if(zt(this._source.type)){const J={},re={},pe=Object.keys(R),Ie=b.now();for(const Pe of pe){const ze=R[Pe],Ce=this._tiles[Pe];if(!Ce||Ce.fadeEndTime!==0&&Ce.fadeEndTime<=Ie)continue;const qe=this.findLoadedParent(ze,x);qe&&(this._addTile(qe.tileID),J[qe.tileID.key]=qe.tileID),re[Pe]=ze}this._retainLoadedChildren(re,g,I,R);for(const Pe in J)R[Pe]||(this._coveredTiles[Pe]=!0,R[Pe]=J[Pe]);if(l){const Pe={},ze={};for(const Ce of d)this._tiles[Ce.key].hasData()?Pe[Ce.key]=Ce:ze[Ce.key]=Ce;for(const Ce in ze){const qe=ze[Ce].children(this._source.maxzoom);this._tiles[qe[0].key]&&this._tiles[qe[1].key]&&this._tiles[qe[2].key]&&this._tiles[qe[3].key]&&(Pe[qe[0].key]=R[qe[0].key]=qe[0],Pe[qe[1].key]=R[qe[1].key]=qe[1],Pe[qe[2].key]=R[qe[2].key]=qe[2],Pe[qe[3].key]=R[qe[3].key]=qe[3],delete ze[Ce])}for(const Ce in ze){const qe=this.findLoadedParent(ze[Ce],this._source.minzoom);if(qe){Pe[qe.tileID.key]=R[qe.tileID.key]=qe.tileID;for(const it in Pe)Pe[it].isChildOf(qe.tileID)&&delete Pe[it]}}for(const Ce in this._tiles)Pe[Ce]||(this._coveredTiles[Ce]=!0)}}for(const J in R)this._tiles[J].clearFadeHold();const H=u.ab(this._tiles,R);for(const J of H){const re=this._tiles[J];re.hasSymbolBuckets&&!re.holdingForFade()?re.setHoldDuration(this.map._fadeDuration):re.hasSymbolBuckets&&!re.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){var d;const g={},x={},I=Math.max(l-Ve.maxOverzooming,this._source.minzoom),k=Math.max(l+Ve.maxUnderzooming,this._source.minzoom),R={};for(const H of r){const J=this._addTile(H);g[H.key]=H,J.hasData()||l<this._source.maxzoom&&(R[H.key]=H)}this._retainLoadedChildren(R,l,k,g);for(const H of r){let J=this._tiles[H.key];if(J.hasData())continue;if(l+1>this._source.maxzoom){const pe=H.children(this._source.maxzoom)[0],Ie=this.getTile(pe);if(Ie&&Ie.hasData()){g[pe.key]=pe;continue}}else{const pe=H.children(this._source.maxzoom);if(g[pe[0].key]&&g[pe[1].key]&&g[pe[2].key]&&g[pe[3].key])continue}let re=J.wasRequested();for(let pe=H.overscaledZ-1;pe>=I;--pe){const Ie=H.scaledTo(pe);if(x[Ie.key])break;if(x[Ie.key]=!0,J=this.getTile(Ie),!J&&re&&(J=this._addTile(Ie)),J){const Pe=J.hasData();if((Pe||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||re)&&(g[Ie.key]=Ie),re=J.wasRequested(),Pe)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let d,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}l.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(x),d)break;g=x}for(const x of l)this._loadedParentTiles[x]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const d=l;return l||(l=new Se(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,d||this._source.fire(new u.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){const l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,d){const g=[],x=this.transform;if(!x)return g;const I=d?x.getCameraQueryGeometry(r):r,k=r.map(Pe=>x.pointCoordinate(Pe,this.terrain)),R=I.map(Pe=>x.pointCoordinate(Pe,this.terrain)),H=this.getIds();let J=1/0,re=1/0,pe=-1/0,Ie=-1/0;for(const Pe of R)J=Math.min(J,Pe.x),re=Math.min(re,Pe.y),pe=Math.max(pe,Pe.x),Ie=Math.max(Ie,Pe.y);for(let Pe=0;Pe<H.length;Pe++){const ze=this._tiles[H[Pe]];if(ze.holdingForFade())continue;const Ce=ze.tileID,qe=Math.pow(2,x.zoom-ze.tileID.overscaledZ),it=l*ze.queryPadding*u.W/ze.tileSize/qe,je=[Ce.getTilePoint(new u.Y(J,re)),Ce.getTilePoint(new u.Y(pe,Ie))];if(je[0].x-it<u.W&&je[0].y-it<u.W&&je[1].x+it>=0&&je[1].y+it>=0){const Ke=k.map(st=>Ce.getTilePoint(st)),ot=R.map(st=>Ce.getTilePoint(st));g.push({tile:ze,tileID:Ce,queryGeometry:Ke,cameraQueryGeometry:ot,scale:qe})}}return g}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(zt(this._source.type)){const r=b.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){const g=this._tiles[r];g&&g.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(const d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}}function Tt(y,r){const l=Math.abs(2*y.wrap)-+(y.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||d-l||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function zt(y){return y==="raster"||y==="image"||y==="video"}Ve.maxOverzooming=10,Ve.maxUnderzooming=3;class hn{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let l=1,d=this._distances[l];const g=r*this.paddedLength+this.padding;for(;d<g&&l<this._distances.length;)d=this._distances[++l];const x=l-1,I=this._distances[x],k=d-I,R=k>0?(g-I)/k:0;return this.points[x].mult(1-R).add(this.points[l].mult(R))}}function En(y,r){let l=!0;return y==="always"||y!=="never"&&r!=="never"||(l=!1),l}class Rt{constructor(r,l,d){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(l/d);for(let I=0;I<this.xCellCount*this.yCellCount;I++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,d,g,x){this._forEachCell(l,d,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(r,l,d,g){this._forEachCell(l-g,d-g,l+g,d+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(d),this.circles.push(g)}_insertBoxCell(r,l,d,g,x,I){this.boxCells[x].push(I)}_insertCircleCell(r,l,d,g,x,I){this.circleCells[x].push(I)}_query(r,l,d,g,x,I,k){if(d<0||r>this.width||g<0||l>this.height)return[];const R=[];if(r<=0&&l<=0&&this.width<=d&&this.height<=g){if(x)return[{key:null,x1:r,y1:l,x2:d,y2:g}];for(let H=0;H<this.boxKeys.length;H++)R.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const J=this.circles[3*H],re=this.circles[3*H+1],pe=this.circles[3*H+2];R.push({key:this.circleKeys[H],x1:J-pe,y1:re-pe,x2:J+pe,y2:re+pe})}}else this._forEachCell(r,l,d,g,this._queryCell,R,{hitTest:x,overlapMode:I,seenUids:{box:{},circle:{}}},k);return R}query(r,l,d,g){return this._query(r,l,d,g,!1,null)}hitTest(r,l,d,g,x,I){return this._query(r,l,d,g,!0,x,I).length>0}hitTestCircle(r,l,d,g,x){const I=r-d,k=r+d,R=l-d,H=l+d;if(k<0||I>this.width||H<0||R>this.height)return!1;const J=[];return this._forEachCell(I,R,k,H,this._queryCellCircle,J,{hitTest:!0,overlapMode:g,circle:{x:r,y:l,radius:d},seenUids:{box:{},circle:{}}},x),J.length>0}_queryCell(r,l,d,g,x,I,k,R){const{seenUids:H,hitTest:J,overlapMode:re}=k,pe=this.boxCells[x];if(pe!==null){const Pe=this.bboxes;for(const ze of pe)if(!H.box[ze]){H.box[ze]=!0;const Ce=4*ze,qe=this.boxKeys[ze];if(r<=Pe[Ce+2]&&l<=Pe[Ce+3]&&d>=Pe[Ce+0]&&g>=Pe[Ce+1]&&(!R||R(qe))&&(!J||!En(re,qe.overlapMode))&&(I.push({key:qe,x1:Pe[Ce],y1:Pe[Ce+1],x2:Pe[Ce+2],y2:Pe[Ce+3]}),J))return!0}}const Ie=this.circleCells[x];if(Ie!==null){const Pe=this.circles;for(const ze of Ie)if(!H.circle[ze]){H.circle[ze]=!0;const Ce=3*ze,qe=this.circleKeys[ze];if(this._circleAndRectCollide(Pe[Ce],Pe[Ce+1],Pe[Ce+2],r,l,d,g)&&(!R||R(qe))&&(!J||!En(re,qe.overlapMode))){const it=Pe[Ce],je=Pe[Ce+1],Ke=Pe[Ce+2];if(I.push({key:qe,x1:it-Ke,y1:je-Ke,x2:it+Ke,y2:je+Ke}),J)return!0}}}return!1}_queryCellCircle(r,l,d,g,x,I,k,R){const{circle:H,seenUids:J,overlapMode:re}=k,pe=this.boxCells[x];if(pe!==null){const Pe=this.bboxes;for(const ze of pe)if(!J.box[ze]){J.box[ze]=!0;const Ce=4*ze,qe=this.boxKeys[ze];if(this._circleAndRectCollide(H.x,H.y,H.radius,Pe[Ce+0],Pe[Ce+1],Pe[Ce+2],Pe[Ce+3])&&(!R||R(qe))&&!En(re,qe.overlapMode))return I.push(!0),!0}}const Ie=this.circleCells[x];if(Ie!==null){const Pe=this.circles;for(const ze of Ie)if(!J.circle[ze]){J.circle[ze]=!0;const Ce=3*ze,qe=this.circleKeys[ze];if(this._circlesCollide(Pe[Ce],Pe[Ce+1],Pe[Ce+2],H.x,H.y,H.radius)&&(!R||R(qe))&&!En(re,qe.overlapMode))return I.push(!0),!0}}}_forEachCell(r,l,d,g,x,I,k,R){const H=this._convertToXCellCoord(r),J=this._convertToYCellCoord(l),re=this._convertToXCellCoord(d),pe=this._convertToYCellCoord(g);for(let Ie=H;Ie<=re;Ie++)for(let Pe=J;Pe<=pe;Pe++)if(x.call(this,r,l,d,g,this.xCellCount*Pe+Ie,I,k,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,d,g,x,I){const k=g-r,R=x-l,H=d+I;return H*H>k*k+R*R}_circleAndRectCollide(r,l,d,g,x,I,k){const R=(I-g)/2,H=Math.abs(r-(g+R));if(H>R+d)return!1;const J=(k-x)/2,re=Math.abs(l-(x+J));if(re>J+d)return!1;if(H<=R||re<=J)return!0;const pe=H-R,Ie=re-J;return pe*pe+Ie*Ie<=d*d}}function Dr(y,r,l,d,g){const x=u.F();return r?(u.J(x,x,[1/g,1/g,1]),l||u.ad(x,x,d.angle)):u.K(x,d.labelPlaneMatrix,y),x}function fi(y,r,l,d,g){if(r){const x=u.ae(y);return u.J(x,x,[g,g,1]),l||u.ad(x,x,-d.angle),x}return d.glCoordMatrix}function tr(y,r,l){let d;l?(d=[y.x,y.y,l(y.x,y.y),1],u.af(d,d,r)):(d=[y.x,y.y,0,1],en(d,d,r));const g=d[3];return{point:new u.P(d[0]/g,d[1]/g),signedDistanceFromCamera:g}}function ke(y,r){return .5+y/r*.5}function ie(y,r){const l=y[0]/y[3],d=y[1]/y[3];return l>=-r[0]&&l<=r[0]&&d>=-r[1]&&d<=r[1]}function ce(y,r,l,d,g,x,I,k,R,H){const J=d?y.textSizeData:y.iconSizeData,re=u.ag(J,l.transform.zoom),pe=[256/l.width*2+1,256/l.height*2+1],Ie=d?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ie.clear();const Pe=y.lineVertexArray,ze=d?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ce=l.transform.width/l.transform.height;let qe=!1;for(let it=0;it<ze.length;it++){const je=ze.get(it);if(je.hidden||je.writingMode===u.ah.vertical&&!qe){ut(je.numGlyphs,Ie);continue}let Ke;if(qe=!1,H?(Ke=[je.anchorX,je.anchorY,H(je.anchorX,je.anchorY),1],u.af(Ke,Ke,r)):(Ke=[je.anchorX,je.anchorY,0,1],en(Ke,Ke,r)),!ie(Ke,pe)){ut(je.numGlyphs,Ie);continue}const ot=ke(l.transform.cameraToCenterDistance,Ke[3]),st=u.ai(J,re,je),ct=I?st/ot:st*ot,bt=new u.P(je.anchorX,je.anchorY),xt=tr(bt,g,H).point,Et={projections:{},offsets:{}},Bt=De(je,ct,!1,k,r,g,x,y.glyphOffsetArray,Pe,Ie,xt,bt,Et,Ce,R,H);qe=Bt.useVertical,(Bt.notEnoughRoom||qe||Bt.needsFlipping&&De(je,ct,!0,k,r,g,x,y.glyphOffsetArray,Pe,Ie,xt,bt,Et,Ce,R,H).notEnoughRoom)&&ut(je.numGlyphs,Ie)}d?y.text.dynamicLayoutVertexBuffer.updateData(Ie):y.icon.dynamicLayoutVertexBuffer.updateData(Ie)}function ge(y,r,l,d,g,x,I,k,R,H,J,re,pe){const Ie=k.glyphStartIndex+k.numGlyphs,Pe=k.lineStartIndex,ze=k.lineStartIndex+k.lineLength,Ce=r.getoffsetX(k.glyphStartIndex),qe=r.getoffsetX(Ie-1),it=ft(y*Ce,l,d,g,x,I,k.segment,Pe,ze,R,H,J,re,pe);if(!it)return null;const je=ft(y*qe,l,d,g,x,I,k.segment,Pe,ze,R,H,J,re,pe);return je?{first:it,last:je}:null}function Oe(y,r,l,d){return y===u.ah.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*d?{useVertical:!0}:(y===u.ah.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function De(y,r,l,d,g,x,I,k,R,H,J,re,pe,Ie,Pe,ze){const Ce=r/24,qe=y.lineOffsetX*Ce,it=y.lineOffsetY*Ce;let je;if(y.numGlyphs>1){const Ke=y.glyphStartIndex+y.numGlyphs,ot=y.lineStartIndex,st=y.lineStartIndex+y.lineLength,ct=ge(Ce,k,qe,it,l,J,re,y,R,x,pe,Pe,ze);if(!ct)return{notEnoughRoom:!0};const bt=tr(ct.first.point,I,ze).point,xt=tr(ct.last.point,I,ze).point;if(d&&!l){const Et=Oe(y.writingMode,bt,xt,Ie);if(Et)return Et}je=[ct.first];for(let Et=y.glyphStartIndex+1;Et<Ke-1;Et++)je.push(ft(Ce*k.getoffsetX(Et),qe,it,l,J,re,y.segment,ot,st,R,x,pe,Pe,ze));je.push(ct.last)}else{if(d&&!l){const ot=tr(re,g,ze).point,st=y.lineStartIndex+y.segment+1,ct=new u.P(R.getx(st),R.gety(st)),bt=tr(ct,g,ze),xt=bt.signedDistanceFromCamera>0?bt.point:Fe(re,ct,ot,1,g,ze),Et=Oe(y.writingMode,ot,xt,Ie);if(Et)return Et}const Ke=ft(Ce*k.getoffsetX(y.glyphStartIndex),qe,it,l,J,re,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,R,x,pe,Pe,ze);if(!Ke)return{notEnoughRoom:!0};je=[Ke]}for(const Ke of je)u.aj(H,Ke.point,Ke.angle);return{}}function Fe(y,r,l,d,g,x){const I=tr(y.add(y.sub(r)._unit()),g,x).point,k=l.sub(I);return l.add(k._mult(d/k.mag()))}function Ue(y,r){const{projectionCache:l,lineVertexArray:d,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:I,getElevation:k,previousVertex:R,direction:H,absOffsetX:J}=r;if(l.projections[y])return l.projections[y];const re=new u.P(d.getx(y),d.gety(y)),pe=tr(re,g,k);if(pe.signedDistanceFromCamera>0)return l.projections[y]=pe.point,pe.point;const Ie=y-H;return Fe(I===0?x:new u.P(d.getx(Ie),d.gety(Ie)),re,R,J-I+1,g,k)}function Le(y,r,l){return y._unit()._perp()._mult(r*l)}function Je(y,r,l,d,g,x,I,k){const{projectionCache:R,direction:H}=k;if(R.offsets[y])return R.offsets[y];const J=l.add(r);if(y+H<d||y+H>=g)return R.offsets[y]=J,J;const re=Ue(y+H,k),pe=Le(re.sub(l),I,H),Ie=l.add(pe),Pe=re.add(pe);return R.offsets[y]=u.ak(x,J,Ie,Pe)||J,R.offsets[y]}function ft(y,r,l,d,g,x,I,k,R,H,J,re,pe,Ie){const Pe=d?y-r:y+r;let ze=Pe>0?1:-1,Ce=0;d&&(ze*=-1,Ce=Math.PI),ze<0&&(Ce+=Math.PI);let qe,it,je=ze>0?k+I:k+I+1,Ke=g,ot=g,st=0,ct=0;const bt=Math.abs(Pe),xt=[];let Et;for(;st+ct<=bt;){if(je+=ze,je<k||je>=R)return null;st+=ct,ot=Ke,it=qe;const It={projectionCache:re,lineVertexArray:H,labelPlaneMatrix:J,tileAnchorPoint:x,distanceFromAnchor:st,getElevation:Ie,previousVertex:ot,direction:ze,absOffsetX:bt};if(Ke=Ue(je,It),l===0)xt.push(ot),Et=Ke.sub(ot);else{let nn;const yn=Ke.sub(ot);nn=yn.mag()===0?Le(Ue(je+ze,It).sub(Ke),l,ze):Le(yn,l,ze),it||(it=ot.add(nn)),qe=Je(je,nn,Ke,k,R,it,l,It),xt.push(it),Et=qe.sub(it)}ct=Et.mag()}const Bt=Et._mult((bt-st)/ct)._add(it||ot),gn=Ce+Math.atan2(Ke.y-ot.y,Ke.x-ot.x);return xt.push(Bt),{point:Bt,angle:pe?gn:0,path:xt}}const lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ut(y,r){for(let l=0;l<y;l++){const d=r.length;r.resize(d+4),r.float32.set(lt,3*d)}}function en(y,r,l){const d=r[0],g=r[1];return y[0]=l[0]*d+l[4]*g+l[12],y[1]=l[1]*d+l[5]*g+l[13],y[3]=l[3]*d+l[7]*g+l[15],y}const tn=100;class pn{constructor(r,l=new Rt(r.width+200,r.height+200,25),d=new Rt(r.width+200,r.height+200,25)){this.transform=r,this.grid=l,this.ignoredGrid=d,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+tn,this.screenBottomBoundary=r.height+tn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,d,g,x,I){const k=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY,I),R=d*k.perspectiveRatio,H=r.x1*R+k.point.x,J=r.y1*R+k.point.y,re=r.x2*R+k.point.x,pe=r.y2*R+k.point.y;return!this.isInsideGrid(H,J,re,pe)||l!=="always"&&this.grid.hitTest(H,J,re,pe,l,x)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[H,J,re,pe],offscreen:this.isOffscreen(H,J,re,pe)}}placeCollisionCircles(r,l,d,g,x,I,k,R,H,J,re,pe,Ie,Pe){const ze=[],Ce=new u.P(l.anchorX,l.anchorY),qe=tr(Ce,I,Pe),it=ke(this.transform.cameraToCenterDistance,qe.signedDistanceFromCamera),je=(J?x/it:x*it)/u.ao,Ke=tr(Ce,k,Pe).point,ot=ge(je,g,l.lineOffsetX*je,l.lineOffsetY*je,!1,Ke,Ce,l,d,k,{projections:{},offsets:{}},!1,Pe);let st=!1,ct=!1,bt=!0;if(ot){const xt=.5*pe*it+Ie,Et=new u.P(-100,-100),Bt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),gn=new hn,It=ot.first,nn=ot.last;let yn=[];for(let vn=It.path.length-1;vn>=1;vn--)yn.push(It.path[vn]);for(let vn=1;vn<nn.path.length;vn++)yn.push(nn.path[vn]);const An=2.5*xt;if(R){const vn=yn.map(Tn=>tr(Tn,R,Pe));yn=vn.some(Tn=>Tn.signedDistanceFromCamera<=0)?[]:vn.map(Tn=>Tn.point)}let un=[];if(yn.length>0){const vn=yn[0].clone(),Tn=yn[0].clone();for(let mr=1;mr<yn.length;mr++)vn.x=Math.min(vn.x,yn[mr].x),vn.y=Math.min(vn.y,yn[mr].y),Tn.x=Math.max(Tn.x,yn[mr].x),Tn.y=Math.max(Tn.y,yn[mr].y);un=vn.x>=Et.x&&Tn.x<=Bt.x&&vn.y>=Et.y&&Tn.y<=Bt.y?[yn]:Tn.x<Et.x||vn.x>Bt.x||Tn.y<Et.y||vn.y>Bt.y?[]:u.al([yn],Et.x,Et.y,Bt.x,Bt.y)}for(const vn of un){gn.reset(vn,.25*xt);let Tn=0;Tn=gn.length<=.5*xt?1:Math.ceil(gn.paddedLength/An)+1;for(let mr=0;mr<Tn;mr++){const qn=mr/Math.max(Tn-1,1),Wi=gn.lerp(qn),qr=Wi.x+tn,gr=Wi.y+tn;ze.push(qr,gr,xt,0);const Ri=qr-xt,Io=gr-xt,Qo=qr+xt,Js=gr+xt;if(bt=bt&&this.isOffscreen(Ri,Io,Qo,Js),ct=ct||this.isInsideGrid(Ri,Io,Qo,Js),r!=="always"&&this.grid.hitTestCircle(qr,gr,xt,r,re)&&(st=!0,!H))return{circles:[],offscreen:!1,collisionDetected:st}}}}return{circles:!H&&st||!ct||it<this.perspectiveRatioCutoff?[]:ze,offscreen:bt,collisionDetected:st}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,g=1/0,x=-1/0,I=-1/0;for(const J of r){const re=new u.P(J.x+tn,J.y+tn);d=Math.min(d,re.x),g=Math.min(g,re.y),x=Math.max(x,re.x),I=Math.max(I,re.y),l.push(re)}const k=this.grid.query(d,g,x,I).concat(this.ignoredGrid.query(d,g,x,I)),R={},H={};for(const J of k){const re=J.key;if(R[re.bucketInstanceId]===void 0&&(R[re.bucketInstanceId]={}),R[re.bucketInstanceId][re.featureIndex])continue;const pe=[new u.P(J.x1,J.y1),new u.P(J.x2,J.y1),new u.P(J.x2,J.y2),new u.P(J.x1,J.y2)];u.am(l,pe)&&(R[re.bucketInstanceId][re.featureIndex]=!0,H[re.bucketInstanceId]===void 0&&(H[re.bucketInstanceId]=[]),H[re.bucketInstanceId].push(re.featureIndex))}return H}insertCollisionBox(r,l,d,g,x,I){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:I,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,d,g,x,I){const k=d?this.ignoredGrid:this.grid,R={bucketInstanceId:g,featureIndex:x,collisionGroupID:I,overlapMode:l};for(let H=0;H<r.length;H+=4)k.insertCircle(R,r[H],r[H+1],r[H+2])}projectAndGetPerspectiveRatio(r,l,d,g){let x;return g?(x=[l,d,g(l,d),1],u.af(x,x,r)):(x=[l,d,0,1],en(x,x,r)),{point:new u.P((x[0]/x[3]+1)/2*this.transform.width+tn,(-x[1]/x[3]+1)/2*this.transform.height+tn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(r,l,d,g){return d<tn||r>=this.screenRightBoundary||g<tn||l>this.screenBottomBoundary}isInsideGrid(r,l,d,g){return d>=0&&r<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.H(r,r,[-100,-100,0]),r}}function ln(y,r,l){return r*(u.W/(y.tileSize*Math.pow(2,l-y.tileID.overscaledZ)))}class bn{constructor(r,l,d,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):g&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Dn{constructor(r,l,d,g,x){this.text=new bn(r?r.text:null,l,d,x),this.icon=new bn(r?r.icon:null,l,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Un{constructor(r,l,d){this.text=r,this.icon=l,this.skipFade=d}}class nr{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class fn{constructor(r,l,d,g,x){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=g,this.tileID=x}}class Yn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[r]}}function _r(y,r,l,d,g){const{horizontalAlign:x,verticalAlign:I}=u.at(y);return new u.P(-(x-.5)*r+d[0]*g,-(I-.5)*l+d[1]*g)}function Wr(y,r,l,d,g,x){const{x1:I,x2:k,y1:R,y2:H,anchorPointX:J,anchorPointY:re}=y,pe=new u.P(r,l);return d&&pe._rotate(g?x:-x),{x1:I+pe.x,y1:R+pe.y,x2:k+pe.x,y2:H+pe.y,anchorPointX:J,anchorPointY:re}}class Ii{constructor(r,l,d,g,x){this.transform=r.clone(),this.terrain=l,this.collisionIndex=new pn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Yn(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,l,d,g){const x=d.getBucket(l),I=d.latestFeatureIndex;if(!x||!I||l.id!==x.layerIds[0])return;const k=d.collisionBoxArray,R=x.layers[0].layout,H=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),J=d.tileSize/u.W,re=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),pe=R.get("text-pitch-alignment")==="map",Ie=R.get("text-rotation-alignment")==="map",Pe=ln(d,1,this.transform.zoom),ze=Dr(re,pe,Ie,this.transform,Pe);let Ce=null;if(pe){const it=fi(re,pe,Ie,this.transform,Pe);Ce=u.K([],this.transform.labelPlaneMatrix,it)}this.retainedQueryData[x.bucketInstanceId]=new fn(x.bucketInstanceId,I,x.sourceLayerIndex,x.index,d.tileID);const qe={bucket:x,layout:R,posMatrix:re,textLabelPlaneMatrix:ze,labelToScreenMatrix:Ce,scale:H,textPixelRatio:J,holdingForFade:d.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:u.ag(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const it of x.sortKeyRanges){const{sortKey:je,symbolInstanceStart:Ke,symbolInstanceEnd:ot}=it;r.push({sortKey:je,symbolInstanceStart:Ke,symbolInstanceEnd:ot,parameters:qe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:qe})}attemptAnchorPlacement(r,l,d,g,x,I,k,R,H,J,re,pe,Ie,Pe,ze,Ce){const qe=u.ap[r.textAnchor],it=[r.textOffset0,r.textOffset1],je=_r(qe,d,g,it,x),Ke=this.collisionIndex.placeCollisionBox(Wr(l,je.x,je.y,I,k,this.transform.angle),re,R,H,J.predicate,Ce);if((!ze||this.collisionIndex.placeCollisionBox(Wr(ze,je.x,je.y,I,k,this.transform.angle),re,R,H,J.predicate,Ce).box.length!==0)&&Ke.box.length>0){let ot;if(this.prevPlacement&&this.prevPlacement.variableOffsets[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID].text&&(ot=this.prevPlacement.variableOffsets[pe.crossTileID].anchor),pe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[pe.crossTileID]={textOffset:it,width:d,height:g,anchor:qe,textBoxScale:x,prevAnchor:ot},this.markUsedJustification(Ie,qe,pe,Pe),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Pe,pe),this.placedOrientations[pe.crossTileID]=Pe),{shift:je,placedGlyphBoxes:Ke}}}placeLayerBucketPart(r,l,d){const{bucket:g,layout:x,posMatrix:I,textLabelPlaneMatrix:k,labelToScreenMatrix:R,textPixelRatio:H,holdingForFade:J,collisionBoxArray:re,partiallyEvaluatedTextSize:pe,collisionGroup:Ie}=r.parameters,Pe=x.get("text-optional"),ze=x.get("icon-optional"),Ce=u.aq(x,"text-overlap","text-allow-overlap"),qe=Ce==="always",it=u.aq(x,"icon-overlap","icon-allow-overlap"),je=it==="always",Ke=x.get("text-rotation-alignment")==="map",ot=x.get("text-pitch-alignment")==="map",st=x.get("icon-text-fit")!=="none",ct=x.get("symbol-z-order")==="viewport-y",bt=qe&&(je||!g.hasIconData()||ze),xt=je&&(qe||!g.hasTextData()||Pe);!g.collisionArrays&&re&&g.deserializeCollisionBoxes(re);const Et=this.retainedQueryData[g.bucketInstanceId].tileID,Bt=this.terrain?(It,nn)=>this.terrain.getElevation(Et,It,nn):null,gn=(It,nn)=>{var yn,An;if(l[It.crossTileID])return;if(J)return void(this.placements[It.crossTileID]=new Un(!1,!1,!1));let un=!1,vn=!1,Tn=!0,mr=null,qn={box:null,offscreen:null},Wi={box:null,offscreen:null},qr=null,gr=null,Ri=null,Io=0,Qo=0,Js=0;nn.textFeatureIndex?Io=nn.textFeatureIndex:It.useRuntimeCollisionCircles&&(Io=It.featureIndex),nn.verticalTextFeatureIndex&&(Qo=nn.verticalTextFeatureIndex);const wl=nn.textBox;if(wl){const yi=Nr=>{let ur=u.ah.horizontal;if(g.allowVerticalPlacement&&!Nr&&this.prevPlacement){const yo=this.prevPlacement.placedOrientations[It.crossTileID];yo&&(this.placedOrientations[It.crossTileID]=yo,ur=yo,this.markUsedOrientation(g,ur,It))}return ur},oi=(Nr,ur)=>{if(g.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&nn.verticalTextBox){for(const yo of g.writingModes)if(yo===u.ah.vertical?(qn=ur(),Wi=qn):qn=Nr(),qn&&qn.box&&qn.box.length)break}else qn=Nr()},vi=It.textAnchorOffsetStartIndex,Au=It.textAnchorOffsetEndIndex;if(Au===vi){const Nr=(ur,yo)=>{const Ur=this.collisionIndex.placeCollisionBox(ur,Ce,H,I,Ie.predicate,Bt);return Ur&&Ur.box&&Ur.box.length&&(this.markUsedOrientation(g,yo,It),this.placedOrientations[It.crossTileID]=yo),Ur};oi(()=>Nr(wl,u.ah.horizontal),()=>{const ur=nn.verticalTextBox;return g.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&ur?Nr(ur,u.ah.vertical):{box:null,offscreen:null}}),yi(qn&&qn.box&&qn.box.length)}else{let Nr=u.ap[(An=(yn=this.prevPlacement)===null||yn===void 0?void 0:yn.variableOffsets[It.crossTileID])===null||An===void 0?void 0:An.anchor];const ur=(Ur,Ey,yp)=>{const Ty=Ur.x2-Ur.x1,bl=Ur.y2-Ur.y1,ff=It.textBoxScale,Cy=st&&it==="never"?Ey:null;let Sl={box:[],offscreen:!1},Xr=Ce==="never"?1:2,df="never";Nr&&Xr++;for(let Pu=0;Pu<Xr;Pu++){for(let El=vi;El<Au;El++){const pf=g.textAnchorOffsets.get(El);if(Nr&&pf.textAnchor!==Nr)continue;const mf=this.attemptAnchorPlacement(pf,Ur,Ty,bl,ff,Ke,ot,H,I,Ie,df,It,g,yp,Cy,Bt);if(mf&&(Sl=mf.placedGlyphBoxes,Sl&&Sl.box&&Sl.box.length))return un=!0,mr=mf.shift,Sl}Nr?Nr=null:df=Ce}return Sl};oi(()=>ur(wl,nn.iconBox,u.ah.horizontal),()=>{const Ur=nn.verticalTextBox;return g.allowVerticalPlacement&&!(qn&&qn.box&&qn.box.length)&&It.numVerticalGlyphVertices>0&&Ur?ur(Ur,nn.verticalIconBox,u.ah.vertical):{box:null,offscreen:null}}),qn&&(un=qn.box,Tn=qn.offscreen);const yo=yi(qn&&qn.box);if(!un&&this.prevPlacement){const Ur=this.prevPlacement.variableOffsets[It.crossTileID];Ur&&(this.variableOffsets[It.crossTileID]=Ur,this.markUsedJustification(g,Ur.anchor,It,yo))}}}if(qr=qn,un=qr&&qr.box&&qr.box.length>0,Tn=qr&&qr.offscreen,It.useRuntimeCollisionCircles){const yi=g.text.placedSymbolArray.get(It.centerJustifiedTextSymbolIndex),oi=u.ai(g.textSizeData,pe,yi),vi=x.get("text-padding");gr=this.collisionIndex.placeCollisionCircles(Ce,yi,g.lineVertexArray,g.glyphOffsetArray,oi,I,k,R,d,ot,Ie.predicate,It.collisionCircleDiameter,vi,Bt),gr.circles.length&&gr.collisionDetected&&!d&&u.w("Collisions detected, but collision boxes are not shown"),un=qe||gr.circles.length>0&&!gr.collisionDetected,Tn=Tn&&gr.offscreen}if(nn.iconFeatureIndex&&(Js=nn.iconFeatureIndex),nn.iconBox){const yi=oi=>{const vi=st&&mr?Wr(oi,mr.x,mr.y,Ke,ot,this.transform.angle):oi;return this.collisionIndex.placeCollisionBox(vi,it,H,I,Ie.predicate,Bt)};Wi&&Wi.box&&Wi.box.length&&nn.verticalIconBox?(Ri=yi(nn.verticalIconBox),vn=Ri.box.length>0):(Ri=yi(nn.iconBox),vn=Ri.box.length>0),Tn=Tn&&Ri.offscreen}const Pa=Pe||It.numHorizontalGlyphVertices===0&&It.numVerticalGlyphVertices===0,ka=ze||It.numIconVertices===0;if(Pa||ka?ka?Pa||(vn=vn&&un):un=vn&&un:vn=un=vn&&un,un&&qr&&qr.box&&this.collisionIndex.insertCollisionBox(qr.box,Ce,x.get("text-ignore-placement"),g.bucketInstanceId,Wi&&Wi.box&&Qo?Qo:Io,Ie.ID),vn&&Ri&&this.collisionIndex.insertCollisionBox(Ri.box,it,x.get("icon-ignore-placement"),g.bucketInstanceId,Js,Ie.ID),gr&&(un&&this.collisionIndex.insertCollisionCircles(gr.circles,Ce,x.get("text-ignore-placement"),g.bucketInstanceId,Io,Ie.ID),d)){const yi=g.bucketInstanceId;let oi=this.collisionCircleArrays[yi];oi===void 0&&(oi=this.collisionCircleArrays[yi]=new nr);for(let vi=0;vi<gr.circles.length;vi+=4)oi.circles.push(gr.circles[vi+0]),oi.circles.push(gr.circles[vi+1]),oi.circles.push(gr.circles[vi+2]),oi.circles.push(gr.collisionDetected?1:0)}if(It.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[It.crossTileID]=new Un(un||bt,vn||xt,Tn||g.justReloaded),l[It.crossTileID]=!0};if(ct){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const It=g.getSortedSymbolIndexes(this.transform.angle);for(let nn=It.length-1;nn>=0;--nn){const yn=It[nn];gn(g.symbolInstances.get(yn),g.collisionArrays[yn])}}else for(let It=r.symbolInstanceStart;It<r.symbolInstanceEnd;It++)gn(g.symbolInstances.get(It),g.collisionArrays[It]);if(d&&g.bucketInstanceId in this.collisionCircleArrays){const It=this.collisionCircleArrays[g.bucketInstanceId];u.ar(It.invProjMatrix,I),It.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(r,l,d,g){let x;x=g===u.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[u.as(l)];const I=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const k of I)k>=0&&(r.text.placedSymbolArray.get(k).crossTileID=x>=0&&k!==x?0:d.crossTileID)}markUsedOrientation(r,l,d){const g=l===u.ah.horizontal||l===u.ah.horizontalOnly?l:0,x=l===u.ah.vertical?l:0,I=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const k of I)r.text.placedSymbolArray.get(k).placedOrientation=g;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(r):1,x=l?l.opacities:{},I=l?l.variableOffsets:{},k=l?l.placedOrientations:{};for(const R in this.placements){const H=this.placements[R],J=x[R];J?(this.opacities[R]=new Dn(J,g,H.text,H.icon),d=d||H.text!==J.text.placed||H.icon!==J.icon.placed):(this.opacities[R]=new Dn(null,g,H.text,H.icon,H.skipFade),d=d||H.text||H.icon)}for(const R in x){const H=x[R];if(!this.opacities[R]){const J=new Dn(H,g,!1,!1);J.isHidden()||(this.opacities[R]=J,d=d||H.text.placed||H.icon.placed)}}for(const R in I)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=I[R]);for(const R in k)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=k[R]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const d={};for(const g of l){const x=g.getBucket(r);x&&g.latestFeatureIndex&&r.id===x.layerIds[0]&&this.updateBucketOpacities(x,d,g.collisionBoxArray)}}updateBucketOpacities(r,l,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const g=r.layers[0],x=g.layout,I=new Dn(null,0,!1,!1,!0),k=x.get("text-allow-overlap"),R=x.get("icon-allow-overlap"),H=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),J=x.get("text-rotation-alignment")==="map",re=x.get("text-pitch-alignment")==="map",pe=x.get("icon-text-fit")!=="none",Ie=new Dn(null,0,k&&(R||!r.hasIconData()||x.get("icon-optional")),R&&(k||!r.hasTextData()||x.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const Pe=(ze,Ce,qe)=>{for(let it=0;it<Ce/4;it++)ze.opacityVertexArray.emplaceBack(qe);ze.hasVisibleVertices=ze.hasVisibleVertices||qe!==Zr};for(let ze=0;ze<r.symbolInstances.length;ze++){const Ce=r.symbolInstances.get(ze),{numHorizontalGlyphVertices:qe,numVerticalGlyphVertices:it,crossTileID:je}=Ce;let Ke=this.opacities[je];l[je]?Ke=I:Ke||(Ke=Ie,this.opacities[je]=Ke),l[je]=!0;const ot=Ce.numIconVertices>0,st=this.placedOrientations[Ce.crossTileID],ct=st===u.ah.vertical,bt=st===u.ah.horizontal||st===u.ah.horizontalOnly;if(qe>0||it>0){const xt=ac(Ke.text);Pe(r.text,qe,ct?Zr:xt),Pe(r.text,it,bt?Zr:xt);const Et=Ke.text.isHidden();[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(It=>{It>=0&&(r.text.placedSymbolArray.get(It).hidden=Et||ct?1:0)}),Ce.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ce.verticalPlacedTextSymbolIndex).hidden=Et||bt?1:0);const Bt=this.variableOffsets[Ce.crossTileID];Bt&&this.markUsedJustification(r,Bt.anchor,Ce,st);const gn=this.placedOrientations[Ce.crossTileID];gn&&(this.markUsedJustification(r,"left",Ce,gn),this.markUsedOrientation(r,gn,Ce))}if(ot){const xt=ac(Ke.icon),Et=!(pe&&Ce.verticalPlacedIconSymbolIndex&&ct);Ce.placedIconSymbolIndex>=0&&(Pe(r.icon,Ce.numIconVertices,Et?xt:Zr),r.icon.placedSymbolArray.get(Ce.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Ce.verticalPlacedIconSymbolIndex>=0&&(Pe(r.icon,Ce.numVerticalIconVertices,Et?Zr:xt),r.icon.placedSymbolArray.get(Ce.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[ze];if(xt){let Et=new u.P(0,0);if(xt.textBox||xt.verticalTextBox){let gn=!0;if(H){const It=this.variableOffsets[je];It?(Et=_r(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale),J&&Et._rotate(re?this.transform.angle:-this.transform.angle)):gn=!1}xt.textBox&&rr(r.textCollisionBox.collisionVertexArray,Ke.text.placed,!gn||ct,Et.x,Et.y),xt.verticalTextBox&&rr(r.textCollisionBox.collisionVertexArray,Ke.text.placed,!gn||bt,Et.x,Et.y)}const Bt=!!(!bt&&xt.verticalIconBox);xt.iconBox&&rr(r.iconCollisionBox.collisionVertexArray,Ke.icon.placed,Bt,pe?Et.x:0,pe?Et.y:0),xt.verticalIconBox&&rr(r.iconCollisionBox.collisionVertexArray,Ke.icon.placed,!Bt,pe?Et.x:0,pe?Et.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const ze=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=ze.invProjMatrix,r.placementViewportMatrix=ze.viewportMatrix,r.collisionCircleArray=ze.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function rr(y,r,l,d,g){y.emplaceBack(r?1:0,l?1:0,d||0,g||0),y.emplaceBack(r?1:0,l?1:0,d||0,g||0),y.emplaceBack(r?1:0,l?1:0,d||0,g||0),y.emplaceBack(r?1:0,l?1:0,d||0,g||0)}const Os=Math.pow(2,25),el=Math.pow(2,24),Rn=Math.pow(2,17),tl=Math.pow(2,16),In=Math.pow(2,9),xr=Math.pow(2,8),di=Math.pow(2,1);function ac(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,l=Math.floor(127*y.opacity);return l*Os+r*el+l*Rn+r*tl+l*In+r*xr+l*di+r}const Zr=0;class Ai{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,d,g,x){const I=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(I,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((k,R)=>k.sortKey-R.sortKey));this._currentPartIndex<I.length;)if(l.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,x())return!0;return!1}}class lc{constructor(r,l,d,g,x,I,k,R){this.placement=new Ii(r,l,I,k,R),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(r,l,d){const g=b.now(),x=()=>!this._forceFullPlacement&&b.now()-g>2;for(;this._currentPlacementIndex>=0;){const I=l[r[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=k)&&(!I.maxzoom||I.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Ai(I)),this._inProgressLayer.continuePlacement(d[I.source],this.placement,this._showCollisionBoxes,I,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Br=512/u.W/2;class pr{constructor(r,l,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const g=new Map;for(let x=0;x<l.length;x++){const I=l.get(x),k=I.key,R=g.get(k);R?R.push(I):g.set(k,[I])}for(const[x,I]of g){const k={positions:I.map(R=>({x:Math.floor(R.anchorX*Br),y:Math.floor(R.anchorY*Br)})),crossTileIDs:I.map(R=>R.crossTileID)};if(k.positions.length>128){const R=new u.au(k.positions.length,16,Uint16Array);for(const{x:H,y:J}of k.positions)R.add(H,J);R.finish(),delete k.positions,k.index=R}this._symbolsByKey[x]=k}}getScaledCoordinates(r,l){const{x:d,y:g,z:x}=this.tileID.canonical,{x:I,y:k,z:R}=l.canonical,H=Br/Math.pow(2,R-x),J=(k*u.W+r.anchorY)*H,re=g*u.W*Br;return{x:Math.floor((I*u.W+r.anchorX)*H-d*u.W*Br),y:Math.floor(J-re)}}findMatches(r,l,d){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let x=0;x<r.length;x++){const I=r.get(x);if(I.crossTileID)continue;const k=this._symbolsByKey[I.key];if(!k)continue;const R=this.getScaledCoordinates(I,l);if(k.index){const H=k.index.range(R.x-g,R.y-g,R.x+g,R.y+g).sort();for(const J of H){const re=k.crossTileIDs[J];if(!d[re]){d[re]=!0,I.crossTileID=re;break}}}else if(k.positions)for(let H=0;H<k.positions.length;H++){const J=k.positions[H],re=k.crossTileIDs[H];if(Math.abs(J.x-R.x)<=g&&Math.abs(J.y-R.y)<=g&&!d[re]){d[re]=!0,I.crossTileID=re;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class da{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const d in this.indexes){const g=this.indexes[d],x={};for(const I in g){const k=g[I];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+l),x[k.tileID.key]=k}this.indexes[d]=x}this.lng=r}addBucket(r,l,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let x=0;x<l.symbolInstances.length;x++)l.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const x in this.indexes){const I=this.indexes[x];if(Number(x)>r.overscaledZ)for(const k in I){const R=I[k];R.tileID.isChildOf(r)&&R.findMatches(l.symbolInstances,r,g)}else{const k=I[r.scaledTo(Number(x)).key];k&&k.findMatches(l.symbolInstances,r,g)}}for(let x=0;x<l.symbolInstances.length;x++){const I=l.symbolInstances.get(x);I.crossTileID||(I.crossTileID=d.generate(),g[I.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new pr(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const d of l.getCrossTileIDsLists())for(const g of d)delete this.usedCrossTileIDs[r][g]}removeStaleBuckets(r){let l=!1;for(const d in this.indexes){const g=this.indexes[d];for(const x in g)r[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,g[x]),delete g[x],l=!0)}return l}}class ir{constructor(){this.layerIndexes={},this.crossTileIDs=new da,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,d){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new hs);let x=!1;const I={};g.handleWrapJump(d);for(const k of l){const R=k.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,R,this.crossTileIDs)&&(x=!0),I[R.bucketInstanceId]=!0)}return g.removeStaleBuckets(I)&&(x=!0),x}pruneUnusedLayers(r){const l={};r.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}const fs=(y,r)=>u.t(y,r&&r.filter(l=>l.identifier!=="source.canvas")),wr=u.av();class nl extends u.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const g=this.sourceCaches[d].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new dt(rt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,g)=>this.getGlyphs(d,g)),this.dispatcher.registerMessageHandler("GI",(d,g)=>this.getImages(d,g)),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new Q(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new ir,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ax()),U().on(ht,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const g=this.sourceCaches[d.sourceId];if(!g)return;const x=g.getSource();if(x&&x.vectorLayerIds)for(const I in this._layers){const k=this._layers[I];k.source===x.id&&this._validateLayer(k)}})}loadURL(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const g=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController,u.h(g,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,l,d)}).catch(x=>{this._loadStyleRequest=null,x&&this.fire(new u.j(x))})}loadJSON(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,d)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(wr,{validate:!1})}_load(r,l,d){var g;const x=l.transformStyle?l.transformStyle(d,r):r;if(!l.validate||!fs(this,u.x(x))){this._loaded=!0,this.stylesheet=x;for(const I in x.sources)this.addSource(I,x.sources[I],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new we(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of r){const d=u.az(l);d.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=d}}_loadSprite(r,l=!1,d=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,I,k,R){return u._(this,void 0,void 0,function*(){const H=ee(x),J=k>1?"@2x":"",re={},pe={};for(const{id:Ie,url:Pe}of H){const ze=I.transformRequest(I.normalizeSpriteURL(Pe,J,".json"),"SpriteJSON");re[Ie]=u.h(ze,R);const Ce=I.transformRequest(I.normalizeSpriteURL(Pe,J,".png"),"SpriteImage");pe[Ie]=$.getImage(Ce,R)}return yield Promise.all([...Object.values(re),...Object.values(pe)]),function(Ie,Pe){return u._(this,void 0,void 0,function*(){const ze={};for(const Ce in Ie){ze[Ce]={};const qe=b.getImageCanvasContext((yield Pe[Ce]).data),it=(yield Ie[Ce]).data;for(const je in it){const{width:Ke,height:ot,x:st,y:ct,sdf:bt,pixelRatio:xt,stretchX:Et,stretchY:Bt,content:gn,textFitWidth:It,textFitHeight:nn}=it[je];ze[Ce][je]={data:null,pixelRatio:xt,sdf:bt,stretchX:Et,stretchY:Bt,content:gn,textFitWidth:It,textFitHeight:nn,spriteData:{width:Ke,height:ot,x:st,y:ct,context:qe}}}}return ze})}(re,pe)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const I in x){this._spritesImagesIds[I]=[];const k=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(R=>!(R in x)):[];for(const R of k)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in x[I]){const H=I==="default"?R:`${I}:${R}`;this._spritesImagesIds[I].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,x[I][R],!1):this.imageManager.addImage(H,x[I][R]),l&&(this._changedImages[H]=!0)}}}).catch(x=>{this._spriteRequest=null,g=x,this.fire(new u.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),d&&d(g)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const d=r.sourceLayer;if(!d)return;const g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.j(new Error(`Source layer "${d}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const l=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l);const d=[];for(const g of r)l[g]&&d.push(l[g]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const l=Object.keys(this._layers);for(const d of l){const g=this._layers[d];g.type!=="custom"&&(r[d]=g.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(l){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const I in this._updatedSources){const k=this._updatedSources[I];if(k==="reload")this._reloadSource(I);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];d[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(r,this._availableImages),!x.isHidden(r.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in d){const x=this.sourceCaches[g];!!d[g]!=!!x.used&&x.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var d;this._checkLoaded();const g=this.serialize();if(r=l.transformStyle?l.transformStyle(g,r):r,((d=l.validate)===null||d===void 0||d)&&fs(this,u.x(r)))return!1;(r=u.aA(r)).layers=u.ay(r.layers);const x=u.aB(g,r),I=this._getOperationsToPerform(x);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const k of I.operations)k();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const l=[],d=[];for(const g of r)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":l.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":l.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":l.push(()=>{});break;default:d.push(g.command)}return{operations:l,unimplemented:d}}addImage(r,l){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.x.source,`sources.${r}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=this.sourceCaches[r]=new Ve(r,l,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,d={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new u.j(new Error(`Layer "${g}" already exists on this map.`)));let x;if(r.type==="custom"){if(fs(this,u.aC(r)))return;x=u.az(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(g,r.source),r=u.aA(r),r=u.e(r,{source:g})),this._validate(u.x.layer,`layers.${g}`,r,{arrayIndex:-1},d))return;x=u.az(r),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const I=l?this._order.indexOf(l):this._order.length;if(l&&I===-1)this.fire(new u.j(new Error(`Cannot add layer "${g}" before non-existing layer "${l}".`)));else{if(this._order.splice(I,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const d=this._order.indexOf(r);this._order.splice(d,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,d){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===l&&g.maxzoom===d||(l!=null&&(g.minzoom=l),d!=null&&(g.maxzoom=d),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,d={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!u.aD(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.x.filter,`layers.${g.id}.filter`,l,null,d)||(g.filter=u.aA(l),this._updateLayer(g)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aA(this.getLayer(r).filter)}setLayoutProperty(r,l,d,g={}){this._checkLoaded();const x=this.getLayer(r);x?u.aD(x.getLayoutProperty(l),d)||(x.setLayoutProperty(l,d,g),this._updateLayer(x)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const d=this.getLayer(r);if(d)return d.getLayoutProperty(l);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,d,g={}){this._checkLoaded();const x=this.getLayer(r);x?u.aD(x.getPaintProperty(l),d)||(x.setPaintProperty(l,d,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const d=r.source,g=r.sourceLayer,x=this.sourceCaches[d];if(x===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const I=x.getSource().type;I==="geojson"&&g?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||g?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,r.id,l)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const d=r.source,g=this.sourceCaches[d];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const x=g.getSource().type,I=x==="vector"?r.sourceLayer:void 0;x!=="vector"||I?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(I,r.id,l):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,d=r.sourceLayer,g=this.sourceCaches[l];if(g!==void 0)return g.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(d,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aE(this.sourceCaches,x=>x.serialize()),l=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,g=this.stylesheet;return u.aF({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:r,layers:l,terrain:d},x=>x!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=I=>this._layers[I].type==="fill-extrusion",d={},g=[];for(let I=this._order.length-1;I>=0;I--){const k=this._order[I];if(l(k)){d[k]=I;for(const R of r){const H=R[k];if(H)for(const J of H)g.push(J)}}}g.sort((I,k)=>k.intersectionZ-I.intersectionZ);const x=[];for(let I=this._order.length-1;I>=0;I--){const k=this._order[I];if(l(k))for(let R=g.length-1;R>=0;R--){const H=g[R].feature;if(d[H.layer.id]<I)break;x.push(H),g.pop()}else for(const R of r){const H=R[k];if(H)for(const J of H)x.push(J.feature)}}return x}queryRenderedFeatures(r,l,d){l&&l.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const k of l.layers){const R=this._layers[k];if(!R)return this.fire(new u.j(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[R.source]=!0}}const x=[];l.availableImages=this._availableImages;const I=this._serializedAllLayers();for(const k in this.sourceCaches)l.layers&&!g[k]||x.push(mt(this.sourceCaches[k],this._layers,I,r,l,d));return this.placement&&x.push(function(k,R,H,J,re,pe,Ie){const Pe={},ze=pe.queryRenderedSymbols(J),Ce=[];for(const qe of Object.keys(ze).map(Number))Ce.push(Ie[qe]);Ce.sort(St);for(const qe of Ce){const it=qe.featureIndex.lookupSymbolFeatures(ze[qe.bucketInstanceId],R,qe.bucketIndex,qe.sourceLayerIndex,re.filter,re.layers,re.availableImages,k);for(const je in it){const Ke=Pe[je]=Pe[je]||[],ot=it[je];ot.sort((st,ct)=>{const bt=qe.featureSortOrder;if(bt){const xt=bt.indexOf(st.featureIndex);return bt.indexOf(ct.featureIndex)-xt}return ct.featureIndex-st.featureIndex});for(const st of ot)Ke.push(st)}}for(const qe in Pe)Pe[qe].forEach(it=>{const je=it.feature,Ke=H[k[qe].source].getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=Ke});return Pe}(this._layers,I,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(r,l){l&&l.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[r];return d?function(g,x){const I=g.getRenderableIds().map(H=>g.getTileByID(H)),k=[],R={};for(let H=0;H<I.length;H++){const J=I[H],re=J.tileID.canonical.key;R[re]||(R[re]=!0,J.querySourceFeatures(k,x))}return k}(d,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const d=this.light.getLight();let g=!1;for(const I in r)if(!u.aD(r[I],d[I])){g=!0;break}if(!g)return;const x={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(x)}_validate(r,l,d,g,x={}){return(!x||x.validate!==!1)&&fs(this,r.call(u.x,u.e({key:l,style:this.serialize(),value:d,styleSpec:u.v},g)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),U().off(ht,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,d,g,x=!1){let I=!1,k=!1;const R={};for(const H of this._order){const J=this._layers[H];if(J.type!=="symbol")continue;if(!R[J.source]){const pe=this.sourceCaches[J.source];R[J.source]=pe.getRenderableIds(!0).map(Ie=>pe.getTileByID(Ie)).sort((Ie,Pe)=>Pe.tileID.overscaledZ-Ie.tileID.overscaledZ||(Ie.tileID.isLessThan(Pe.tileID)?-1:1))}const re=this.crossTileSymbolIndex.addLayer(J,R[J.source],r.center.lng);I=I||re}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),r.zoom))&&(this.pauseablePlacement=new lc(r,this.map.terrain,this._order,x,l,d,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),k=!0),I&&this.pauseablePlacement.placement.setStale()),k||I)for(const H of this._order){const J=this._layers[H];J.type==="symbol"&&this.placement.updateLayerOpacities(J,R[J.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[l.source];return g&&g.setDependencies(l.tileID.key,l.type,l.icons),d})}getGlyphs(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(l.stacks),g=this.sourceCaches[l.source];return g&&g.setDependencies(l.tileID.key,l.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(u.x.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,d={},g){this._checkLoaded();const x=[{id:r,url:l}],I=[...ee(this.stylesheet.sprite),...x];this._validate(u.x.sprite,"sprite",I,null,d)||(this.stylesheet.sprite=I,this._loadSprite(x,!0,g))}removeSprite(r){this._checkLoaded();const l=ee(this.stylesheet.sprite);if(l.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ee(this.stylesheet.sprite)}setSprite(r,l={},d){this._checkLoaded(),r&&this._validate(u.x.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var ao=u.X([{name:"a_pos",type:"Int16",components:2}]),su="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ls={prelude:On(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:On(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:On(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:On(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:On("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:On(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:On(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:On("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:On("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:On("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:On(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:On(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:On(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:On(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:On(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:On(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:On(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:On(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:On(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:On(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:On(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:On(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:On(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:On(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:On(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:On(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:On("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",su),terrainDepth:On("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",su),terrainCoords:On("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",su)};function On(y,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=x?x.concat(g):g,k={};return{fragmentSource:y=y.replace(l,(R,H,J,re,pe)=>(k[pe]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
varying ${J} ${re} ${pe};
#else
uniform ${J} ${re} u_${pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pe}
    ${J} ${re} ${pe} = u_${pe};
#endif
`)),vertexSource:r=r.replace(l,(R,H,J,re,pe)=>{const Ie=re==="float"?"vec2":"vec4",Pe=pe.match(/color/)?"color":Ie;return k[pe]?H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${J} ${Ie} a_${pe};
varying ${J} ${re} ${pe};
#else
uniform ${J} ${re} u_${pe};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${J} ${re} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Pe}(a_${pe}, u_${pe}_t);
#else
    ${J} ${re} ${pe} = u_${pe};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${J} ${Ie} a_${pe};
#else
uniform ${J} ${re} u_${pe};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${J} ${re} ${pe} = a_${pe};
#else
    ${J} ${re} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${J} ${re} ${pe} = unpack_mix_${Pe}(a_${pe}, u_${pe}_t);
#else
    ${J} ${re} ${pe} = u_${pe};
#endif
`}),staticAttributes:d,staticUniforms:I}}class ds{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,d,g,x,I,k,R,H){this.context=r;let J=this.boundPaintVertexBuffers.length!==g.length;for(let re=0;!J&&re<g.length;re++)this.boundPaintVertexBuffers[re]!==g[re]&&(J=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||J||this.boundIndexBuffer!==x||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==H?this.freshBind(l,d,g,x,I,k,R,H):(r.bindVertexArray.set(this.vao),k&&k.bind(),x&&x.dynamicDraw&&x.bind(),R&&R.bind(),H&&H.bind())}freshBind(r,l,d,g,x,I,k,R){const H=r.numAttributes,J=this.context,re=J.gl;this.vao&&this.destroy(),this.vao=J.createVertexArray(),J.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=R,l.enableAttributes(re,r);for(const pe of d)pe.enableAttributes(re,r);I&&I.enableAttributes(re,r),k&&k.enableAttributes(re,r),R&&R.enableAttributes(re,r),l.bind(),l.setVertexAttribPointers(re,r,x);for(const pe of d)pe.bind(),pe.setVertexAttribPointers(re,r,x);I&&(I.bind(),I.setVertexAttribPointers(re,r,x)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(re,r,x)),R&&(R.bind(),R.setVertexAttribPointers(re,r,x)),J.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function js(y){const r=[];for(let l=0;l<y.length;l++){if(y[l]===null)continue;const d=y[l].split(" ");r.push(d.pop())}return r}class au{constructor(r,l,d,g,x,I){const k=r.gl;this.program=k.createProgram();const R=js(l.staticAttributes),H=d?d.getBinderAttributes():[],J=R.concat(H),re=Ls.prelude.staticUniforms?js(Ls.prelude.staticUniforms):[],pe=l.staticUniforms?js(l.staticUniforms):[],Ie=d?d.getBinderUniforms():[],Pe=re.concat(pe).concat(Ie),ze=[];for(const st of Pe)ze.indexOf(st)<0&&ze.push(st);const Ce=d?d.defines():[];x&&Ce.push("#define OVERDRAW_INSPECTOR;"),I&&Ce.push("#define TERRAIN3D;");const qe=Ce.concat(Ls.prelude.fragmentSource,l.fragmentSource).join(`
`),it=Ce.concat(Ls.prelude.vertexSource,l.vertexSource).join(`
`),je=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(je,qe),k.compileShader(je),!k.getShaderParameter(je,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(je)}`);k.attachShader(this.program,je);const Ke=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(Ke,it),k.compileShader(Ke),!k.getShaderParameter(Ke,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(Ke)}`);k.attachShader(this.program,Ke),this.attributes={};const ot={};this.numAttributes=J.length;for(let st=0;st<this.numAttributes;st++)J[st]&&(k.bindAttribLocation(this.program,st,J[st]),this.attributes[J[st]]=st);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(Ke),k.deleteShader(je);for(let st=0;st<ze.length;st++){const ct=ze[st];if(ct&&!ot[ct]){const bt=k.getUniformLocation(this.program,ct);bt&&(ot[ct]=bt)}}this.fixedUniforms=g(r,ot),this.terrainUniforms=((st,ct)=>({u_depth:new u.aG(st,ct.u_depth),u_terrain:new u.aG(st,ct.u_terrain),u_terrain_dim:new u.aH(st,ct.u_terrain_dim),u_terrain_matrix:new u.aI(st,ct.u_terrain_matrix),u_terrain_unpack:new u.aJ(st,ct.u_terrain_unpack),u_terrain_exaggeration:new u.aH(st,ct.u_terrain_exaggeration)}))(r,ot),this.binderUniforms=d?d.getUniforms(r,ot):[]}draw(r,l,d,g,x,I,k,R,H,J,re,pe,Ie,Pe,ze,Ce,qe,it){const je=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(g),r.setColorMode(x),r.setCullFace(I),R){r.activeTexture.set(je.TEXTURE2),je.bindTexture(je.TEXTURE_2D,R.depthTexture),r.activeTexture.set(je.TEXTURE3),je.bindTexture(je.TEXTURE_2D,R.texture);for(const ot in this.terrainUniforms)this.terrainUniforms[ot].set(R[ot])}for(const ot in this.fixedUniforms)this.fixedUniforms[ot].set(k[ot]);ze&&ze.setUniforms(r,this.binderUniforms,Ie,{zoom:Pe});let Ke=0;switch(l){case je.LINES:Ke=2;break;case je.TRIANGLES:Ke=3;break;case je.LINE_STRIP:Ke=1}for(const ot of pe.get()){const st=ot.vaos||(ot.vaos={});(st[H]||(st[H]=new ds)).bind(r,this,J,ze?ze.getPaintVertexBuffers():[],re,ot.vertexOffset,Ce,qe,it),je.drawElements(l,ot.primitiveLength*Ke,je.UNSIGNED_SHORT,ot.primitiveOffset*Ke*2)}}}function ri(y,r,l){const d=1/ln(l,1,r.transform.tileZoom),g=Math.pow(2,l.tileID.overscaledZ),x=l.tileSize*Math.pow(2,r.transform.tileZoom)/g,I=x*(l.tileID.canonical.x+l.tileID.wrap*g),k=x*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[I>>16,k>>16],u_pixel_coord_lower:[65535&I,65535&k]}}const pa=(y,r,l,d)=>{const g=r.style.light,x=g.properties.get("position"),I=[x.x,x.y,x.z],k=function(){var H=new u.A(9);return u.A!=Float32Array&&(H[1]=0,H[2]=0,H[3]=0,H[5]=0,H[6]=0,H[7]=0),H[0]=1,H[4]=1,H[8]=1,H}();g.properties.get("anchor")==="viewport"&&function(H,J){var re=Math.sin(J),pe=Math.cos(J);H[0]=pe,H[1]=re,H[2]=0,H[3]=-re,H[4]=pe,H[5]=0,H[6]=0,H[7]=0,H[8]=1}(k,-r.transform.angle),function(H,J,re){var pe=J[0],Ie=J[1],Pe=J[2];H[0]=pe*re[0]+Ie*re[3]+Pe*re[6],H[1]=pe*re[1]+Ie*re[4]+Pe*re[7],H[2]=pe*re[2]+Ie*re[5]+Pe*re[8]}(I,I,k);const R=g.properties.get("color");return{u_matrix:y,u_lightpos:I,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+l,u_opacity:d}},lu=(y,r,l,d,g,x,I)=>u.e(pa(y,r,l,d),ri(x,r,I),{u_height_factor:-Math.pow(2,g.overscaledZ)/I.tileSize/8}),rl=y=>({u_matrix:y}),ma=(y,r,l,d)=>u.e(rl(y),ri(l,r,d)),il=(y,r)=>({u_matrix:y,u_world:r}),Ds=(y,r,l,d,g)=>u.e(ma(y,r,l,d),{u_world:g}),uu=(y,r,l,d)=>{const g=y.transform;let x,I;if(d.paint.get("circle-pitch-alignment")==="map"){const k=ln(l,1,g.zoom);x=!0,I=[k,k]}else x=!1,I=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:I}},uc=(y,r,l)=>{const d=ln(l,1,r.zoom),g=Math.pow(2,r.zoom-l.tileID.overscaledZ),x=l.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[r.pixelsToGLUnits[0]/(d*g),r.pixelsToGLUnits[1]/(d*g)],u_overscale_factor:x}},Bs=(y,r,l=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:l}),cc=y=>({u_matrix:y}),Pi=(y,r,l,d)=>({u_matrix:y,u_extrude_scale:ln(r,1,l),u_intensity:d});function ol(y,r){const l=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new u.Y(0,d/l).toLngLat().lat,new u.Y(0,(d+1)/l).toLngLat().lat]}const Jr=(y,r,l,d)=>{const g=y.transform;return{u_matrix:fu(y,r,l,d),u_ratio:1/ln(r,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},pi=(y,r,l,d,g)=>u.e(Jr(y,r,l,g),{u_image:0,u_image_height:d}),cu=(y,r,l,d,g)=>{const x=y.transform,I=hu(r,x);return{u_matrix:fu(y,r,l,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/ln(r,1,x.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[I,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},ga=(y,r,l,d,g,x)=>{const I=y.lineAtlas,k=hu(r,y.transform),R=l.layout.get("line-cap")==="round",H=I.getDash(d.from,R),J=I.getDash(d.to,R),re=H.width*g.fromScale,pe=J.width*g.toScale;return u.e(Jr(y,r,l,x),{u_patternscale_a:[k/re,-H.height/2],u_patternscale_b:[k/pe,-J.height/2],u_sdfgamma:I.width/(256*Math.min(re,pe)*y.pixelRatio)/2,u_image:0,u_tex_y_a:H.y,u_tex_y_b:J.y,u_mix:g.t})};function hu(y,r){return 1/ln(y,1,r.tileZoom)}function fu(y,r,l,d){return y.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Ns=(y,r,l,d,g)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(I=g.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:du(g.paint.get("raster-hue-rotate"))};var x,I};function du(y){y*=Math.PI/180;const r=Math.sin(y),l=Math.cos(y);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const hc=(y,r,l,d,g,x,I,k,R,H)=>{const J=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:J.width/J.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:I,u_coord_matrix:k,u_is_text:+R,u_pitch_with_map:+d,u_texsize:H,u_texture:0}},fc=(y,r,l,d,g,x,I,k,R,H,J)=>{const re=g.transform;return u.e(hc(y,r,l,d,g,x,I,k,R,H),{u_gamma_scale:d?Math.cos(re._pitch)*re.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+J})},Bh=(y,r,l,d,g,x,I,k,R,H)=>u.e(fc(y,r,l,d,g,x,I,k,!0,R,!0),{u_texsize_icon:H,u_texture_icon:1}),Nh=(y,r,l)=>({u_matrix:y,u_opacity:r,u_color:l}),dc=(y,r,l,d,g,x)=>u.e(function(I,k,R,H){const J=R.imageManager.getPattern(I.from.toString()),re=R.imageManager.getPattern(I.to.toString()),{width:pe,height:Ie}=R.imageManager.getPixelSize(),Pe=Math.pow(2,H.tileID.overscaledZ),ze=H.tileSize*Math.pow(2,R.transform.tileZoom)/Pe,Ce=ze*(H.tileID.canonical.x+H.tileID.wrap*Pe),qe=ze*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:re.tl,u_pattern_br_b:re.br,u_texsize:[pe,Ie],u_mix:k.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:re.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/ln(H,1,R.transform.tileZoom),u_pixel_coord_upper:[Ce>>16,qe>>16],u_pixel_coord_lower:[65535&Ce,65535&qe]}}(d,x,l,g),{u_matrix:y,u_opacity:r}),sl={fillExtrusion:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_lightpos:new u.aK(y,r.u_lightpos),u_lightintensity:new u.aH(y,r.u_lightintensity),u_lightcolor:new u.aK(y,r.u_lightcolor),u_vertical_gradient:new u.aH(y,r.u_vertical_gradient),u_opacity:new u.aH(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_lightpos:new u.aK(y,r.u_lightpos),u_lightintensity:new u.aH(y,r.u_lightintensity),u_lightcolor:new u.aK(y,r.u_lightcolor),u_vertical_gradient:new u.aH(y,r.u_vertical_gradient),u_height_factor:new u.aH(y,r.u_height_factor),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade),u_opacity:new u.aH(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_scale_with_map:new u.aG(y,r.u_scale_with_map),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_extrude_scale:new u.aL(y,r.u_extrude_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_matrix:new u.aI(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aH(y,r.u_pixels_to_tile_units),u_extrude_scale:new u.aL(y,r.u_extrude_scale),u_overscale_factor:new u.aH(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_inv_matrix:new u.aI(y,r.u_inv_matrix),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_viewport_size:new u.aL(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new u.aM(y,r.u_color),u_matrix:new u.aI(y,r.u_matrix),u_overlay:new u.aG(y,r.u_overlay),u_overlay_scale:new u.aH(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new u.aH(y,r.u_extrude_scale),u_intensity:new u.aH(y,r.u_intensity),u_matrix:new u.aI(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world),u_image:new u.aG(y,r.u_image),u_color_ramp:new u.aG(y,r.u_color_ramp),u_opacity:new u.aH(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_latrange:new u.aL(y,r.u_latrange),u_light:new u.aL(y,r.u_light),u_shadow:new u.aM(y,r.u_shadow),u_highlight:new u.aM(y,r.u_highlight),u_accent:new u.aM(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_dimension:new u.aL(y,r.u_dimension),u_zoom:new u.aH(y,r.u_zoom),u_unpack:new u.aJ(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_image:new u.aG(y,r.u_image),u_image_height:new u.aH(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texsize:new u.aL(y,r.u_texsize),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_image:new u.aG(y,r.u_image),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_patternscale_a:new u.aL(y,r.u_patternscale_a),u_patternscale_b:new u.aL(y,r.u_patternscale_b),u_sdfgamma:new u.aH(y,r.u_sdfgamma),u_image:new u.aG(y,r.u_image),u_tex_y_a:new u.aH(y,r.u_tex_y_a),u_tex_y_b:new u.aH(y,r.u_tex_y_b),u_mix:new u.aH(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_tl_parent:new u.aL(y,r.u_tl_parent),u_scale_parent:new u.aH(y,r.u_scale_parent),u_buffer_scale:new u.aH(y,r.u_buffer_scale),u_fade_t:new u.aH(y,r.u_fade_t),u_opacity:new u.aH(y,r.u_opacity),u_image0:new u.aG(y,r.u_image0),u_image1:new u.aG(y,r.u_image1),u_brightness_low:new u.aH(y,r.u_brightness_low),u_brightness_high:new u.aH(y,r.u_brightness_high),u_saturation_factor:new u.aH(y,r.u_saturation_factor),u_contrast_factor:new u.aH(y,r.u_contrast_factor),u_spin_weights:new u.aK(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texture:new u.aG(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texture:new u.aG(y,r.u_texture),u_gamma_scale:new u.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_is_halo:new u.aG(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texsize_icon:new u.aL(y,r.u_texsize_icon),u_texture:new u.aG(y,r.u_texture),u_texture_icon:new u.aG(y,r.u_texture_icon),u_gamma_scale:new u.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_is_halo:new u.aG(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_opacity:new u.aH(y,r.u_opacity),u_color:new u.aM(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_opacity:new u.aH(y,r.u_opacity),u_image:new u.aG(y,r.u_image),u_pattern_tl_a:new u.aL(y,r.u_pattern_tl_a),u_pattern_br_a:new u.aL(y,r.u_pattern_br_a),u_pattern_tl_b:new u.aL(y,r.u_pattern_tl_b),u_pattern_br_b:new u.aL(y,r.u_pattern_br_b),u_texsize:new u.aL(y,r.u_texsize),u_mix:new u.aH(y,r.u_mix),u_pattern_size_a:new u.aL(y,r.u_pattern_size_a),u_pattern_size_b:new u.aL(y,r.u_pattern_size_b),u_scale_a:new u.aH(y,r.u_scale_a),u_scale_b:new u.aH(y,r.u_scale_b),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aH(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texture:new u.aG(y,r.u_texture),u_ele_delta:new u.aH(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ele_delta:new u.aH(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texture:new u.aG(y,r.u_texture),u_terrain_coords_id:new u.aH(y,r.u_terrain_coords_id),u_ele_delta:new u.aH(y,r.u_ele_delta)})};class al{constructor(r,l,d){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ll={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class pu{constructor(r,l,d,g){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=r;const x=r.gl;this.buffer=x.createBuffer(),r.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let d=0;d<this.attributes.length;d++){const g=l.attributes[this.attributes[d].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,l,d){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],I=l.attributes[x.name];I!==void 0&&r.vertexAttribPointer(I,x.components,r[ll[x.type]],!1,this.itemSize,x.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Us=new WeakMap;function mi(y){var r;if(Us.has(y))return Us.get(y);{const l=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Us.set(y,l),l}}class Ln{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class mu extends Ln{getDefault(){return u.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ya extends Ln{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class $s extends Ln{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Uh extends Ln{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Vs extends Ln{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class $h extends Ln{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Gs extends Ln{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Vh extends Ln{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class pc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class Gh extends Ln{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class mc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class ul extends Ln{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class cl extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class gc extends Ln{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class yc extends Ln{getDefault(){return u.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class vc extends Ln{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ps extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class gu extends Ln{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Hh extends Ln{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Wh extends Ln{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class _c extends Ln{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class va extends Ln{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class hl extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class fl extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Hs extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class xc extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Vi extends Ln{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class wc extends Ln{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;const d=this.gl;mi(d)?d.bindVertexArray(r):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class bc extends Ln{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class yu extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Sc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ho extends Ln{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class Eo extends Ho{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ws extends Ho{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class vu extends Ho{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class _u{constructor(r,l,d,g,x){this.context=r,this.width=l,this.height=d;const I=r.gl,k=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new Eo(r,k),g)this.depthAttachment=x?new vu(r,k):new Ws(r,k);else if(x)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Xn{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}Xn.Replace=[1,0],Xn.disabled=new Xn(Xn.Replace,u.aO.transparent,[!1,!1,!1,!1]),Xn.unblended=new Xn(Xn.Replace,u.aO.transparent,[!0,!0,!0,!0]),Xn.alphaBlended=new Xn([1,771],u.aO.transparent,[!0,!0,!0,!0]);class dl{constructor(r){var l,d;if(this.gl=r,this.clearColor=new mu(this),this.clearDepth=new ya(this),this.clearStencil=new $s(this),this.colorMask=new Uh(this),this.depthMask=new Vs(this),this.stencilMask=new $h(this),this.stencilFunc=new Gs(this),this.stencilOp=new Vh(this),this.stencilTest=new pc(this),this.depthRange=new Gh(this),this.depthTest=new mc(this),this.depthFunc=new ul(this),this.blend=new cl(this),this.blendFunc=new gc(this),this.blendColor=new yc(this),this.blendEquation=new vc(this),this.cullFace=new ps(this),this.cullFaceSide=new gu(this),this.frontFace=new Hh(this),this.program=new Wh(this),this.activeTexture=new _c(this),this.viewport=new va(this),this.bindFramebuffer=new hl(this),this.bindRenderbuffer=new fl(this),this.bindTexture=new Hs(this),this.bindVertexBuffer=new xc(this),this.bindElementBuffer=new Vi(this),this.bindVertexArray=new wc(this),this.pixelStoreUnpack=new bc(this),this.pixelStoreUnpackPremultiplyAlpha=new yu(this),this.pixelStoreUnpackFlipY=new Sc(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),mi(r)){this.HALF_FLOAT=r.HALF_FLOAT;const g=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:g==null?void 0:g.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const g=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new al(this,r,l)}createVertexBuffer(r,l,d){return new pu(this,r,l,d)}createRenderbuffer(r,l,d){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,r,l,d),this.bindRenderbuffer.set(null),x}createFramebuffer(r,l,d,g){return new _u(this,r,l,d,g)}clear({color:r,depth:l,stencil:d}){const g=this.gl;let x=0;r&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),g.clear(x)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aD(r.blendFunction,Xn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return mi(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return mi(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class xn{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}xn.ReadOnly=!1,xn.ReadWrite=!0,xn.disabled=new xn(519,xn.ReadOnly,[0,1]);const _a=7680;class Jn{constructor(r,l,d,g,x,I){this.test=r,this.ref=l,this.mask=d,this.fail=g,this.depthFail=x,this.pass=I}}Jn.disabled=new Jn({func:519,mask:0},0,0,_a,_a,_a);class $n{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}let lo;function Ec(y,r,l,d,g,x,I){const k=y.context,R=k.gl,H=y.useProgram("collisionBox"),J=[];let re=0,pe=0;for(let je=0;je<d.length;je++){const Ke=d[je],ot=r.getTile(Ke),st=ot.getBucket(l);if(!st)continue;let ct=Ke.posMatrix;g[0]===0&&g[1]===0||(ct=y.translatePosMatrix(Ke.posMatrix,ot,g,x));const bt=I?st.textCollisionBox:st.iconCollisionBox,xt=st.collisionCircleArray;if(xt.length>0){const Et=u.F(),Bt=ct;u.aP(Et,st.placementInvProjMatrix,y.transform.glCoordMatrix),u.aP(Et,Et,st.placementViewportMatrix),J.push({circleArray:xt,circleOffset:pe,transform:Bt,invTransform:Et,coord:Ke}),re+=xt.length/4,pe=re}bt&&H.draw(k,R.LINES,xn.disabled,Jn.disabled,y.colorModeForRenderPass(),$n.disabled,uc(ct,y.transform,ot),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke),l.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,null,y.transform.zoom,null,null,bt.collisionVertexBuffer)}if(!I||!J.length)return;const Ie=y.useProgram("collisionCircle"),Pe=new u.aQ;Pe.resize(4*re),Pe._trim();let ze=0;for(const je of J)for(let Ke=0;Ke<je.circleArray.length/4;Ke++){const ot=4*Ke,st=je.circleArray[ot+0],ct=je.circleArray[ot+1],bt=je.circleArray[ot+2],xt=je.circleArray[ot+3];Pe.emplace(ze++,st,ct,bt,xt,0),Pe.emplace(ze++,st,ct,bt,xt,1),Pe.emplace(ze++,st,ct,bt,xt,2),Pe.emplace(ze++,st,ct,bt,xt,3)}(!lo||lo.length<2*re)&&(lo=function(je){const Ke=2*je,ot=new u.aS;ot.resize(Ke),ot._trim();for(let st=0;st<Ke;st++){const ct=6*st;ot.uint16[ct+0]=4*st+0,ot.uint16[ct+1]=4*st+1,ot.uint16[ct+2]=4*st+2,ot.uint16[ct+3]=4*st+2,ot.uint16[ct+4]=4*st+3,ot.uint16[ct+5]=4*st+0}return ot}(re));const Ce=k.createIndexBuffer(lo,!0),qe=k.createVertexBuffer(Pe,u.aR.members,!0);for(const je of J){const Ke={u_matrix:je.transform,u_inv_matrix:je.invTransform,u_camera_to_center_distance:(it=y.transform).cameraToCenterDistance,u_viewport_size:[it.width,it.height]};Ie.draw(k,R.TRIANGLES,xn.disabled,Jn.disabled,y.colorModeForRenderPass(),$n.disabled,Ke,y.style.map.terrain&&y.style.map.terrain.getTerrainData(je.coord),l.id,qe,Ce,u.$.simpleSegment(0,2*je.circleOffset,je.circleArray.length,je.circleArray.length/2),null,y.transform.zoom,null,null,null)}var it;qe.destroy(),Ce.destroy()}$n.disabled=new $n(!1,1029,2305),$n.backCCW=new $n(!0,1029,2305);const xu=u.an(new Float32Array(16));function pl(y,r,l,d,g,x){const{horizontalAlign:I,verticalAlign:k}=u.at(y);return new u.P((-(I-.5)*r/g+d[0])*x,(-(k-.5)*l/g+d[1])*x)}function Tc(y,r,l,d,g,x,I,k,R,H,J){const re=y.text.placedSymbolArray,pe=y.text.dynamicLayoutVertexArray,Ie=y.icon.dynamicLayoutVertexArray,Pe={};pe.clear();for(let ze=0;ze<re.length;ze++){const Ce=re.get(ze),qe=Ce.hidden||!Ce.crossTileID||y.allowVerticalPlacement&&!Ce.placedOrientation?null:d[Ce.crossTileID];if(qe){const it=new u.P(Ce.anchorX,Ce.anchorY),je=tr(it,l?I:x,J),Ke=ke(g.cameraToCenterDistance,je.signedDistanceFromCamera);let ot=u.ai(y.textSizeData,R,Ce)*Ke/u.ao;l&&(ot*=y.tilePixelRatio/k);const{width:st,height:ct,anchor:bt,textOffset:xt,textBoxScale:Et}=qe,Bt=pl(bt,st,ct,xt,Et,ot),gn=l?tr(it.add(Bt),x,J).point:je.point.add(r?Bt.rotate(-g.angle):Bt),It=y.allowVerticalPlacement&&Ce.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let nn=0;nn<Ce.numGlyphs;nn++)u.aj(pe,gn,It);H&&Ce.associatedIconIndex>=0&&(Pe[Ce.associatedIconIndex]={shiftedAnchor:gn,angle:It})}else ut(Ce.numGlyphs,pe)}if(H){Ie.clear();const ze=y.icon.placedSymbolArray;for(let Ce=0;Ce<ze.length;Ce++){const qe=ze.get(Ce);if(qe.hidden)ut(qe.numGlyphs,Ie);else{const it=Pe[Ce];if(it)for(let je=0;je<qe.numGlyphs;je++)u.aj(Ie,it.shiftedAnchor,it.angle);else ut(qe.numGlyphs,Ie)}}y.icon.dynamicLayoutVertexBuffer.updateData(Ie)}y.text.dynamicLayoutVertexBuffer.updateData(pe)}function To(y,r,l){return l.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function uo(y,r,l,d,g,x,I,k,R,H,J,re){const pe=y.context,Ie=pe.gl,Pe=y.transform,ze=k==="map",Ce=R==="map",qe=k!=="viewport"&&l.layout.get("symbol-placement")!=="point",it=ze&&!Ce&&!qe,je=!l.layout.get("symbol-sort-key").isConstant();let Ke=!1;const ot=y.depthModeForSublayer(0,xn.ReadOnly),st=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ct=[];for(const bt of d){const xt=r.getTile(bt),Et=xt.getBucket(l);if(!Et)continue;const Bt=g?Et.text:Et.icon;if(!Bt||!Bt.segments.get().length||!Bt.hasVisibleVertices)continue;const gn=Bt.programConfigurations.get(l.id),It=g||Et.sdfIcons,nn=g?Et.textSizeData:Et.iconSizeData,yn=Ce||Pe.pitch!==0,An=y.useProgram(To(It,g,Et),gn),un=u.ag(nn,Pe.zoom),vn=y.style.map.terrain&&y.style.map.terrain.getTerrainData(bt);let Tn,mr,qn,Wi,qr=[0,0],gr=null;if(g)mr=xt.glyphAtlasTexture,qn=Ie.LINEAR,Tn=xt.glyphAtlasTexture.size,Et.iconsInText&&(qr=xt.imageAtlasTexture.size,gr=xt.imageAtlasTexture,Wi=yn||y.options.rotating||y.options.zooming||nn.kind==="composite"||nn.kind==="camera"?Ie.LINEAR:Ie.NEAREST);else{const Nr=l.layout.get("icon-size").constantOr(0)!==1||Et.iconsNeedLinear;mr=xt.imageAtlasTexture,qn=It||y.options.rotating||y.options.zooming||Nr||yn?Ie.LINEAR:Ie.NEAREST,Tn=xt.imageAtlasTexture.size}const Ri=ln(xt,1,y.transform.zoom),Io=Dr(bt.posMatrix,Ce,ze,y.transform,Ri),Qo=fi(bt.posMatrix,Ce,ze,y.transform,Ri),Js=st&&Et.hasTextData(),wl=l.layout.get("icon-text-fit")!=="none"&&Js&&Et.hasIconData();if(qe){const Nr=y.style.map.terrain?(yo,Ur)=>y.style.map.terrain.getElevation(bt,yo,Ur):null,ur=l.layout.get("text-rotation-alignment")==="map";ce(Et,bt.posMatrix,y,g,Io,Qo,Ce,H,ur,Nr)}const Pa=y.translatePosMatrix(bt.posMatrix,xt,x,I),ka=qe||g&&st||wl?xu:Io,yi=y.translatePosMatrix(Qo,xt,x,I,!0),oi=It&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vi;vi=It?Et.iconsInText?Bh(nn.kind,un,it,Ce,y,Pa,ka,yi,Tn,qr):fc(nn.kind,un,it,Ce,y,Pa,ka,yi,g,Tn,!0):hc(nn.kind,un,it,Ce,y,Pa,ka,yi,g,Tn);const Au={program:An,buffers:Bt,uniformValues:vi,atlasTexture:mr,atlasTextureIcon:gr,atlasInterpolation:qn,atlasInterpolationIcon:Wi,isSDF:It,hasHalo:oi};if(je&&Et.canOverlap){Ke=!0;const Nr=Bt.segments.get();for(const ur of Nr)ct.push({segments:new u.$([ur]),sortKey:ur.sortKey,state:Au,terrainData:vn})}else ct.push({segments:Bt.segments,sortKey:0,state:Au,terrainData:vn})}Ke&&ct.sort((bt,xt)=>bt.sortKey-xt.sortKey);for(const bt of ct){const xt=bt.state;if(pe.activeTexture.set(Ie.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Ie.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(pe.activeTexture.set(Ie.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Ie.CLAMP_TO_EDGE)),xt.isSDF){const Et=xt.uniformValues;xt.hasHalo&&(Et.u_is_halo=1,br(xt.buffers,bt.segments,l,y,xt.program,ot,J,re,Et,bt.terrainData)),Et.u_is_halo=0}br(xt.buffers,bt.segments,l,y,xt.program,ot,J,re,xt.uniformValues,bt.terrainData)}}function br(y,r,l,d,g,x,I,k,R,H){const J=d.context;g.draw(J,J.gl.TRIANGLES,x,I,k,$n.disabled,R,H,l.id,y.layoutVertexBuffer,y.indexBuffer,r,l.paint,d.transform.zoom,y.programConfigurations.get(l.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function co(y,r,l,d,g){if(!l||!d||!d.imageAtlas)return;const x=d.imageAtlas.patternPositions;let I=x[l.to.toString()],k=x[l.from.toString()];if(!I&&k&&(I=k),!k&&I&&(k=I),!I||!k){const R=g.getPaintProperty(r);I=x[R],k=x[R]}I&&k&&y.setConstantPatternPositions(I,k)}function ho(y,r,l,d,g,x,I){const k=y.context.gl,R="fill-pattern",H=l.paint.get(R),J=H&&H.constantOr(1),re=l.getCrossfadeParameters();let pe,Ie,Pe,ze,Ce;I?(Ie=J&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=k.LINES):(Ie=J?"fillPattern":"fill",pe=k.TRIANGLES);const qe=H.constantOr(null);for(const it of d){const je=r.getTile(it);if(J&&!je.patternsLoaded())continue;const Ke=je.getBucket(l);if(!Ke)continue;const ot=Ke.programConfigurations.get(l.id),st=y.useProgram(Ie,ot),ct=y.style.map.terrain&&y.style.map.terrain.getTerrainData(it);J&&(y.context.activeTexture.set(k.TEXTURE0),je.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ot.updatePaintBuffers(re)),co(ot,R,qe,je,l);const bt=ct?it:null,xt=y.translatePosMatrix(bt?bt.posMatrix:it.posMatrix,je,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(I){ze=Ke.indexBuffer2,Ce=Ke.segments2;const Et=[k.drawingBufferWidth,k.drawingBufferHeight];Pe=Ie==="fillOutlinePattern"&&J?Ds(xt,y,re,je,Et):il(xt,Et)}else ze=Ke.indexBuffer,Ce=Ke.segments,Pe=J?ma(xt,y,re,je):rl(xt);st.draw(y.context,pe,g,y.stencilModeForClipping(it),x,$n.disabled,Pe,ct,l.id,Ke.layoutVertexBuffer,ze,Ce,l.paint,y.transform.zoom,ot)}}function fo(y,r,l,d,g,x,I){const k=y.context,R=k.gl,H="fill-extrusion-pattern",J=l.paint.get(H),re=J.constantOr(1),pe=l.getCrossfadeParameters(),Ie=l.paint.get("fill-extrusion-opacity"),Pe=J.constantOr(null);for(const ze of d){const Ce=r.getTile(ze),qe=Ce.getBucket(l);if(!qe)continue;const it=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ze),je=qe.programConfigurations.get(l.id),Ke=y.useProgram(re?"fillExtrusionPattern":"fillExtrusion",je);re&&(y.context.activeTexture.set(R.TEXTURE0),Ce.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),je.updatePaintBuffers(pe)),co(je,H,Pe,Ce,l);const ot=y.translatePosMatrix(ze.posMatrix,Ce,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),st=l.paint.get("fill-extrusion-vertical-gradient"),ct=re?lu(ot,y,st,Ie,ze,pe,Ce):pa(ot,y,st,Ie);Ke.draw(k,k.gl.TRIANGLES,g,x,I,$n.backCCW,ct,it,l.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,l.paint,y.transform.zoom,je,y.style.map.terrain&&qe.centroidVertexBuffer)}}function ki(y,r,l,d,g,x,I){const k=y.context,R=k.gl,H=l.fbo;if(!H)return;const J=y.useProgram("hillshade"),re=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);k.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,H.colorAttachment.get()),J.draw(k,R.TRIANGLES,g,x,I,$n.disabled,((pe,Ie,Pe,ze)=>{const Ce=Pe.paint.get("hillshade-shadow-color"),qe=Pe.paint.get("hillshade-highlight-color"),it=Pe.paint.get("hillshade-accent-color");let je=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=pe.transform.angle);const Ke=!pe.options.moving;return{u_matrix:ze?ze.posMatrix:pe.transform.calculatePosMatrix(Ie.tileID.toUnwrapped(),Ke),u_image:0,u_latrange:ol(0,Ie.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),je],u_shadow:Ce,u_highlight:qe,u_accent:it}})(y,l,d,re?r:null),re,d.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function xa(y,r,l,d,g,x){const I=y.context,k=I.gl,R=r.dem;if(R&&R.data){const H=R.dim,J=R.stride,re=R.getPixels();if(I.activeTexture.set(k.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(J),r.demTexture){const Ie=r.demTexture;Ie.update(re,{premultiply:!1}),Ie.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else r.demTexture=new Z(I,re,k.RGBA,{premultiply:!1}),r.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);I.activeTexture.set(k.TEXTURE0);let pe=r.fbo;if(!pe){const Ie=new Z(I,{width:H,height:H,data:null},k.RGBA);Ie.bind(k.LINEAR,k.CLAMP_TO_EDGE),pe=r.fbo=I.createFramebuffer(H,H,!0,!1),pe.colorAttachment.set(Ie.texture)}I.bindFramebuffer.set(pe.framebuffer),I.viewport.set([0,0,H,H]),y.useProgram("hillshadePrepare").draw(I,k.TRIANGLES,d,g,x,$n.disabled,((Ie,Pe)=>{const ze=Pe.stride,Ce=u.F();return u.aN(Ce,0,u.W,-u.W,0,0,1),u.H(Ce,Ce,[0,-u.W,0]),{u_matrix:Ce,u_image:1,u_dimension:[ze,ze],u_zoom:Ie.overscaledZ,u_unpack:Pe.getUnpackVector()}})(r.tileID,R),null,l.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function wa(y,r,l,d,g,x){const I=d.paint.get("raster-fade-duration");if(!x&&I>0){const k=b.now(),R=(k-y.timeAdded)/I,H=r?(k-r.timeAdded)/I:-1,J=l.getSource(),re=g.coveringZoomLevel({tileSize:J.tileSize,roundZoom:J.roundZoom}),pe=!r||Math.abs(r.tileID.overscaledZ-re)>Math.abs(y.tileID.overscaledZ-re),Ie=pe&&y.refreshedUponExpiration?1:u.ac(pe?R:1-H,0,1);return y.refreshedUponExpiration&&R>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Ie}:{opacity:Ie,mix:0}}return{opacity:1,mix:0}}const gi=new u.aO(1,0,0,1),Mi=new u.aO(0,1,0,1),ba=new u.aO(0,0,1,1),ms=new u.aO(1,0,1,1),Wo=new u.aO(0,1,1,1);function Zs(y,r,l,d){po(y,0,r+l/2,y.transform.width,l,d)}function ml(y,r,l,d){po(y,r-l/2,0,l,y.transform.height,d)}function po(y,r,l,d,g,x){const I=y.context,k=I.gl;k.enable(k.SCISSOR_TEST),k.scissor(r*y.pixelRatio,l*y.pixelRatio,d*y.pixelRatio,g*y.pixelRatio),I.clear({color:x}),k.disable(k.SCISSOR_TEST)}function gs(y,r,l){const d=y.context,g=d.gl,x=l.posMatrix,I=y.useProgram("debug"),k=xn.disabled,R=Jn.disabled,H=y.colorModeForRenderPass(),J="$debug",re=y.style.map.terrain&&y.style.map.terrain.getTerrainData(l);d.activeTexture.set(g.TEXTURE0);const pe=r.getTileByID(l.key).latestRawTileData,Ie=Math.floor((pe&&pe.byteLength||0)/1024),Pe=r.getTile(l).tileSize,ze=512/Math.min(Pe,512)*(l.overscaledZ/y.transform.zoom)*.5;let Ce=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Ce+=` => ${l.overscaledZ}`),function(qe,it){qe.initDebugOverlayCanvas();const je=qe.debugOverlayCanvas,Ke=qe.context.gl,ot=qe.debugOverlayCanvas.getContext("2d");ot.clearRect(0,0,je.width,je.height),ot.shadowColor="white",ot.shadowBlur=2,ot.lineWidth=1.5,ot.strokeStyle="white",ot.textBaseline="top",ot.font="bold 36px Open Sans, sans-serif",ot.fillText(it,5,5),ot.strokeText(it,5,5),qe.debugOverlayTexture.update(je),qe.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)}(y,`${Ce} ${Ie}kB`),I.draw(d,g.TRIANGLES,k,R,Xn.alphaBlended,$n.disabled,Bs(x,u.aO.transparent,ze),null,J,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),I.draw(d,g.LINE_STRIP,k,R,H,$n.disabled,Bs(x,u.aO.red),re,J,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function mo(y,r,l){const d=y.context,g=d.gl,x=y.colorModeForRenderPass(),I=new xn(g.LEQUAL,xn.ReadWrite,y.depthRangeFor3D),k=y.useProgram("terrain"),R=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,y.width,y.height]);for(const H of l){const J=y.renderToTexture.getTexture(H),re=r.getTerrainData(H.tileID);d.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,J.texture);const pe={u_matrix:y.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};k.draw(d,g.TRIANGLES,I,Jn.disabled,x,$n.backCCW,pe,re,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}}class gl{constructor(r,l){this.context=new dl(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ir}resize(r,l,d){if(this.width=Math.floor(r*d),this.height=Math.floor(l*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,l=new u.aV;l.emplaceBack(0,0),l.emplaceBack(u.W,0),l.emplaceBack(0,u.W),l.emplaceBack(u.W,u.W),this.tileExtentBuffer=r.createVertexBuffer(l,ao.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const d=new u.aV;d.emplaceBack(0,0),d.emplaceBack(u.W,0),d.emplaceBack(0,u.W),d.emplaceBack(u.W,u.W),this.debugBuffer=r.createVertexBuffer(d,ao.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const g=new u.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(u.W,0,u.W,0),g.emplaceBack(0,u.W,0,u.W),g.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=r.createVertexBuffer(g,be.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const x=new u.aV;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,ao.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const I=new u.aW;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(I);const k=new u.aX;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(k);const R=this.context.gl;this.stencilClearMode=new Jn({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=u.F();u.aN(d,0,this.width,this.height,0,0,1),u.J(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,xn.disabled,this.stencilClearMode,Xn.disabled,$n.disabled,cc(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const d=this.context,g=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(Xn.disabled),d.setDepthMode(xn.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of l){const k=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);x.draw(d,g.TRIANGLES,xn.disabled,new Jn({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),Xn.disabled,$n.disabled,cc(I.posMatrix),R,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new Jn({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new Jn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,d=r.sort((I,k)=>k.overscaledZ-I.overscaledZ),g=d[d.length-1].overscaledZ,x=d[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const I={};for(let k=0;k<x;k++)I[k+g]=new Jn({func:l.GEQUAL,mask:255},k+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=x,[I,d]}return[{[g]:Jn.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Xn([r.CONSTANT_COLOR,r.ONE],new u.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xn.unblended:Xn.alphaBlended}depthModeForSublayer(r,l,d){if(!this.opaquePassEnabledForLayer())return xn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new xn(d||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const d=this.style._order,g=this.style.sourceCaches,x={},I={},k={};for(const R in g){const H=g[R];H.used&&H.prepare(this.context),x[R]=H.getVisibleCoordinates(),I[R]=x[R].slice().reverse(),k[R]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<d.length;R++)if(this.style._layers[d[R]].is3D()){this.opaquePassCutoff=R;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const R of d){const H=this.style._layers[R];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const J=I[H.source];(H.type==="custom"||J.length)&&this.renderLayer(this,g[H.source],H,J)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.aO.black:u.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[d[this.currentLayer]],H=g[R.source],J=x[R.source];this._renderTileClippingMasks(R,J),this.renderLayer(this,H,R,J)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const R=this.style._layers[d[this.currentLayer]],H=g[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;const J=(R.type==="symbol"?k:I)[R.source];this._renderTileClippingMasks(R,x[R.source]),this.renderLayer(this,H,R,J)}if(this.options.showTileBoundaries){const R=function(H,J){let re=null;const pe=Object.values(H._layers).flatMap(Ce=>Ce.source&&!Ce.isHidden(J)?[H.sourceCaches[Ce.source]]:[]),Ie=pe.filter(Ce=>Ce.getSource().type==="vector"),Pe=pe.filter(Ce=>Ce.getSource().type!=="vector"),ze=Ce=>{(!re||re.getSource().maxzoom<Ce.getSource().maxzoom)&&(re=Ce)};return Ie.forEach(Ce=>ze(Ce)),re||Pe.forEach(Ce=>ze(Ce)),re}(this.style,this.transform.zoom);R&&function(H,J,re){for(let pe=0;pe<re.length;pe++)gs(H,J,re[pe])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const H=R.transform.padding;Zs(R,R.transform.height-(H.top||0),3,gi),Zs(R,H.bottom||0,3,Mi),ml(R,H.left||0,3,ba),ml(R,R.transform.width-(H.right||0),3,ms);const J=R.transform.centerPoint;(function(re,pe,Ie,Pe){po(re,pe-1,Ie-10,2,20,Pe),po(re,pe-10,Ie-1,20,2,Pe)})(R,J.x,R.transform.height-J.y,Wo)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,d=this.transform.projMatrix;let g=this.terrainFacilitator.dirty;g||(g=r?!u.aY(l,d):!u.aZ(l,d)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(u.a_(l,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,I){const k=x.context,R=k.gl,H=Xn.unblended,J=new xn(R.LEQUAL,xn.ReadWrite,[0,1]),re=I.getTerrainMesh(),pe=I.sourceCache.getRenderableTiles(),Ie=x.useProgram("terrainDepth");k.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),k.clear({color:u.aO.transparent,depth:1});for(const Pe of pe){const ze=I.getTerrainData(Pe.tileID),Ce={u_matrix:x.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_ele_delta:I.getMeshFrameDelta(x.transform.zoom)};Ie.draw(k,R.TRIANGLES,J,Jn.disabled,H,$n.backCCW,Ce,ze,"terrain",re.vertexBuffer,re.indexBuffer,re.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,I){const k=x.context,R=k.gl,H=Xn.unblended,J=new xn(R.LEQUAL,xn.ReadWrite,[0,1]),re=I.getTerrainMesh(),pe=I.getCoordsTexture(),Ie=I.sourceCache.getRenderableTiles(),Pe=x.useProgram("terrainCoords");k.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),k.clear({color:u.aO.transparent,depth:1}),I.coordsIndex=[];for(const ze of Ie){const Ce=I.getTerrainData(ze.tileID);k.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,pe.texture);const qe={u_matrix:x.transform.calculatePosMatrix(ze.tileID.toUnwrapped()),u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(x.transform.zoom)};Pe.draw(k,R.TRIANGLES,J,Jn.disabled,H,$n.backCCW,qe,Ce,"terrain",re.vertexBuffer,re.indexBuffer,re.segments),I.coordsIndex.push(ze.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(r,l,d,g){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(g||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(x,I,k,R,H){if(x.renderPass!=="translucent")return;const J=Jn.disabled,re=x.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pe,Ie,Pe,ze,Ce,qe,it){const je=Ie.transform,Ke=Ce==="map",ot=qe==="map";for(const st of pe){const ct=ze.getTile(st),bt=ct.getBucket(Pe);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const xt=u.ag(bt.textSizeData,je.zoom),Et=ln(ct,1,Ie.transform.zoom),Bt=Dr(st.posMatrix,ot,Ke,Ie.transform,Et),gn=Pe.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(xt){const It=Math.pow(2,je.zoom-ct.tileID.overscaledZ);Tc(bt,Ke,ot,it,je,Bt,st.posMatrix,It,xt,gn,Ie.style.map.terrain?(nn,yn)=>Ie.style.map.terrain.getElevation(st,nn,yn):null)}}}(R,x,k,I,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),H),k.paint.get("icon-opacity").constantOr(1)!==0&&uo(x,I,k,R,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),J,re),k.paint.get("text-opacity").constantOr(1)!==0&&uo(x,I,k,R,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),J,re),I.map.showCollisionBoxes&&(Ec(x,I,k,R,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),Ec(x,I,k,R,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))})(r,l,d,g,this.style.placement.variableOffsets);break;case"circle":(function(x,I,k,R){if(x.renderPass!=="translucent")return;const H=k.paint.get("circle-opacity"),J=k.paint.get("circle-stroke-width"),re=k.paint.get("circle-stroke-opacity"),pe=!k.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(J.constantOr(1)===0||re.constantOr(1)===0))return;const Ie=x.context,Pe=Ie.gl,ze=x.depthModeForSublayer(0,xn.ReadOnly),Ce=Jn.disabled,qe=x.colorModeForRenderPass(),it=[];for(let je=0;je<R.length;je++){const Ke=R[je],ot=I.getTile(Ke),st=ot.getBucket(k);if(!st)continue;const ct=st.programConfigurations.get(k.id),bt=x.useProgram("circle",ct),xt=st.layoutVertexBuffer,Et=st.indexBuffer,Bt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ke),gn={programConfiguration:ct,program:bt,layoutVertexBuffer:xt,indexBuffer:Et,uniformValues:uu(x,Ke,ot,k),terrainData:Bt};if(pe){const It=st.segments.get();for(const nn of It)it.push({segments:new u.$([nn]),sortKey:nn.sortKey,state:gn})}else it.push({segments:st.segments,sortKey:0,state:gn})}pe&&it.sort((je,Ke)=>je.sortKey-Ke.sortKey);for(const je of it){const{programConfiguration:Ke,program:ot,layoutVertexBuffer:st,indexBuffer:ct,uniformValues:bt,terrainData:xt}=je.state;ot.draw(Ie,Pe.TRIANGLES,ze,Ce,qe,$n.disabled,bt,xt,k.id,st,ct,je.segments,k.paint,x.transform.zoom,Ke)}})(r,l,d,g);break;case"heatmap":(function(x,I,k,R){if(k.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const H=x.context,J=H.gl,re=Jn.disabled,pe=new Xn([J.ONE,J.ONE],u.aO.transparent,[!0,!0,!0,!0]);(function(Ie,Pe,ze){const Ce=Ie.gl;Ie.activeTexture.set(Ce.TEXTURE1),Ie.viewport.set([0,0,Pe.width/4,Pe.height/4]);let qe=ze.heatmapFbo;if(qe)Ce.bindTexture(Ce.TEXTURE_2D,qe.colorAttachment.get()),Ie.bindFramebuffer.set(qe.framebuffer);else{const it=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,it),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),qe=ze.heatmapFbo=Ie.createFramebuffer(Pe.width/4,Pe.height/4,!1,!1),function(je,Ke,ot,st){var ct,bt;const xt=je.gl,Et=(ct=je.HALF_FLOAT)!==null&&ct!==void 0?ct:xt.UNSIGNED_BYTE,Bt=(bt=je.RGBA16F)!==null&&bt!==void 0?bt:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,Bt,Ke.width/4,Ke.height/4,0,xt.RGBA,Et,null),st.colorAttachment.set(ot)}(Ie,Pe,it,qe)}})(H,x,k),H.clear({color:u.aO.transparent});for(let Ie=0;Ie<R.length;Ie++){const Pe=R[Ie];if(I.hasRenderableParent(Pe))continue;const ze=I.getTile(Pe),Ce=ze.getBucket(k);if(!Ce)continue;const qe=Ce.programConfigurations.get(k.id),it=x.useProgram("heatmap",qe),{zoom:je}=x.transform;it.draw(H,J.TRIANGLES,xn.disabled,re,pe,$n.disabled,Pi(Pe.posMatrix,ze,je,k.paint.get("heatmap-intensity")),null,k.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,k.paint,x.transform.zoom,qe)}H.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(H,J){const re=H.context,pe=re.gl,Ie=J.heatmapFbo;if(!Ie)return;re.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,Ie.colorAttachment.get()),re.activeTexture.set(pe.TEXTURE1);let Pe=J.colorRampTexture;Pe||(Pe=J.colorRampTexture=new Z(re,J.colorRamp,pe.RGBA)),Pe.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(re,pe.TRIANGLES,xn.disabled,Jn.disabled,H.colorModeForRenderPass(),$n.disabled,((ze,Ce,qe,it)=>{const je=u.F();u.aN(je,0,ze.width,ze.height,0,0,1);const Ke=ze.context.gl;return{u_matrix:je,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}})(H,J),null,J.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,J.paint,H.transform.zoom)}(x,k))})(r,l,d,g);break;case"line":(function(x,I,k,R){if(x.renderPass!=="translucent")return;const H=k.paint.get("line-opacity"),J=k.paint.get("line-width");if(H.constantOr(1)===0||J.constantOr(1)===0)return;const re=x.depthModeForSublayer(0,xn.ReadOnly),pe=x.colorModeForRenderPass(),Ie=k.paint.get("line-dasharray"),Pe=k.paint.get("line-pattern"),ze=Pe.constantOr(1),Ce=k.paint.get("line-gradient"),qe=k.getCrossfadeParameters(),it=ze?"linePattern":Ie?"lineSDF":Ce?"lineGradient":"line",je=x.context,Ke=je.gl;let ot=!0;for(const st of R){const ct=I.getTile(st);if(ze&&!ct.patternsLoaded())continue;const bt=ct.getBucket(k);if(!bt)continue;const xt=bt.programConfigurations.get(k.id),Et=x.context.program.get(),Bt=x.useProgram(it,xt),gn=ot||Bt.program!==Et,It=x.style.map.terrain&&x.style.map.terrain.getTerrainData(st),nn=Pe.constantOr(null);if(nn&&ct.imageAtlas){const un=ct.imageAtlas,vn=un.patternPositions[nn.to.toString()],Tn=un.patternPositions[nn.from.toString()];vn&&Tn&&xt.setConstantPatternPositions(vn,Tn)}const yn=It?st:null,An=ze?cu(x,ct,k,qe,yn):Ie?ga(x,ct,k,Ie,qe,yn):Ce?pi(x,ct,k,bt.lineClipsArray.length,yn):Jr(x,ct,k,yn);if(ze)je.activeTexture.set(Ke.TEXTURE0),ct.imageAtlasTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),xt.updatePaintBuffers(qe);else if(Ie&&(gn||x.lineAtlas.dirty))je.activeTexture.set(Ke.TEXTURE0),x.lineAtlas.bind(je);else if(Ce){const un=bt.gradients[k.id];let vn=un.texture;if(k.gradientVersion!==un.version){let Tn=256;if(k.stepInterpolant){const mr=I.getSource().maxzoom,qn=st.canonical.z===mr?Math.ceil(1<<x.transform.maxZoom-st.canonical.z):1;Tn=u.ac(u.aT(bt.maxLineLength/u.W*1024*qn),256,je.maxTextureSize)}un.gradient=u.aU({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Tn,image:un.gradient||void 0,clips:bt.lineClipsArray}),un.texture?un.texture.update(un.gradient):un.texture=new Z(je,un.gradient,Ke.RGBA),un.version=k.gradientVersion,vn=un.texture}je.activeTexture.set(Ke.TEXTURE0),vn.bind(k.stepInterpolant?Ke.NEAREST:Ke.LINEAR,Ke.CLAMP_TO_EDGE)}Bt.draw(je,Ke.TRIANGLES,re,x.stencilModeForClipping(st),pe,$n.disabled,An,It,k.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,k.paint,x.transform.zoom,xt,bt.layoutVertexBuffer2),ot=!1}})(r,l,d,g);break;case"fill":(function(x,I,k,R){const H=k.paint.get("fill-color"),J=k.paint.get("fill-opacity");if(J.constantOr(1)===0)return;const re=x.colorModeForRenderPass(),pe=k.paint.get("fill-pattern"),Ie=x.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&H.constantOr(u.aO.transparent).a===1&&J.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===Ie){const Pe=x.depthModeForSublayer(1,x.renderPass==="opaque"?xn.ReadWrite:xn.ReadOnly);ho(x,I,k,R,Pe,re,!1)}if(x.renderPass==="translucent"&&k.paint.get("fill-antialias")){const Pe=x.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,xn.ReadOnly);ho(x,I,k,R,Pe,re,!0)}})(r,l,d,g);break;case"fill-extrusion":(function(x,I,k,R){const H=k.paint.get("fill-extrusion-opacity");if(H!==0&&x.renderPass==="translucent"){const J=new xn(x.context.gl.LEQUAL,xn.ReadWrite,x.depthRangeFor3D);if(H!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))fo(x,I,k,R,J,Jn.disabled,Xn.disabled),fo(x,I,k,R,J,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const re=x.colorModeForRenderPass();fo(x,I,k,R,J,Jn.disabled,re)}}})(r,l,d,g);break;case"hillshade":(function(x,I,k,R){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const H=x.context,J=x.depthModeForSublayer(0,xn.ReadOnly),re=x.colorModeForRenderPass(),[pe,Ie]=x.renderPass==="translucent"?x.stencilConfigForOverlap(R):[{},R];for(const Pe of Ie){const ze=I.getTile(Pe);ze.needsHillshadePrepare!==void 0&&ze.needsHillshadePrepare&&x.renderPass==="offscreen"?xa(x,ze,k,J,Jn.disabled,re):x.renderPass==="translucent"&&ki(x,Pe,ze,k,J,pe[Pe.overscaledZ],re)}H.viewport.set([0,0,x.width,x.height])})(r,l,d,g);break;case"raster":(function(x,I,k,R){if(x.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!R.length)return;const H=x.context,J=H.gl,re=I.getSource(),pe=x.useProgram("raster"),Ie=x.colorModeForRenderPass(),[Pe,ze]=re instanceof N?[{},R]:x.stencilConfigForOverlap(R),Ce=ze[ze.length-1].overscaledZ,qe=!x.options.moving;for(const it of ze){const je=x.depthModeForSublayer(it.overscaledZ-Ce,k.paint.get("raster-opacity")===1?xn.ReadWrite:xn.ReadOnly,J.LESS),Ke=I.getTile(it);Ke.registerFadeDuration(k.paint.get("raster-fade-duration"));const ot=I.findLoadedParent(it,0),st=wa(Ke,ot,I,k,x.transform,x.style.map.terrain);let ct,bt;const xt=k.paint.get("raster-resampling")==="nearest"?J.NEAREST:J.LINEAR;H.activeTexture.set(J.TEXTURE0),Ke.texture.bind(xt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(J.TEXTURE1),ot?(ot.texture.bind(xt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),ct=Math.pow(2,ot.tileID.overscaledZ-Ke.tileID.overscaledZ),bt=[Ke.tileID.canonical.x*ct%1,Ke.tileID.canonical.y*ct%1]):Ke.texture.bind(xt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST);const Et=x.style.map.terrain&&x.style.map.terrain.getTerrainData(it),Bt=Et?it:null,gn=Bt?Bt.posMatrix:x.transform.calculatePosMatrix(it.toUnwrapped(),qe),It=Ns(gn,bt||[0,0],ct||1,st,k);re instanceof N?pe.draw(H,J.TRIANGLES,je,Jn.disabled,Ie,$n.disabled,It,Et,k.id,re.boundsBuffer,x.quadTriangleIndexBuffer,re.boundsSegments):pe.draw(H,J.TRIANGLES,je,Pe[it.overscaledZ],Ie,$n.disabled,It,Et,k.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(r,l,d,g);break;case"background":(function(x,I,k,R){const H=k.paint.get("background-color"),J=k.paint.get("background-opacity");if(J===0)return;const re=x.context,pe=re.gl,Ie=x.transform,Pe=Ie.tileSize,ze=k.paint.get("background-pattern");if(x.isPatternMissing(ze))return;const Ce=!ze&&H.a===1&&J===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==Ce)return;const qe=Jn.disabled,it=x.depthModeForSublayer(0,Ce==="opaque"?xn.ReadWrite:xn.ReadOnly),je=x.colorModeForRenderPass(),Ke=x.useProgram(ze?"backgroundPattern":"background"),ot=R||Ie.coveringTiles({tileSize:Pe,terrain:x.style.map.terrain});ze&&(re.activeTexture.set(pe.TEXTURE0),x.imageManager.bind(x.context));const st=k.getCrossfadeParameters();for(const ct of ot){const bt=R?ct.posMatrix:x.transform.calculatePosMatrix(ct.toUnwrapped()),xt=ze?dc(bt,J,x,ze,{tileID:ct,tileSize:Pe},st):Nh(bt,J,H),Et=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ct);Ke.draw(re,pe.TRIANGLES,it,qe,je,$n.disabled,xt,Et,k.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(r,0,d,g);break;case"custom":(function(x,I,k){const R=x.context,H=k.implementation;if(x.renderPass==="offscreen"){const J=H.prerender;J&&(x.setCustomLayerDefaults(),R.setColorMode(x.colorModeForRenderPass()),J.call(H,R.gl,x.transform.customLayerMatrix()),R.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),R.setColorMode(x.colorModeForRenderPass()),R.setStencilMode(Jn.disabled);const J=H.renderingMode==="3d"?new xn(x.context.gl.LEQUAL,xn.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,xn.ReadOnly);R.setDepthMode(J),H.render(R.gl,x.transform.customLayerMatrix()),R.setDirty(),x.setBaseState(),R.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,l,d,g,x){if(!d[0]&&!d[1])return r;const I=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(I){const H=Math.sin(I),J=Math.cos(I);d=[d[0]*J-d[1]*H,d[0]*H+d[1]*J]}const k=[x?d[0]:ln(l,d[0],this.transform.zoom),x?d[1]:ln(l,d[1],this.transform.zoom),0],R=new Float32Array(16);return u.H(R,r,k),R}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!l||!d}useProgram(r,l){this.cache=this.cache||{};const d=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new au(this.context,Ls[r],l,sl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Z(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class Mn{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,d){const g=Math.pow(2,d),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const R=1/(k=u.af([],k,r))[3]/l*g;return u.a$(k,k,[R,R,1/k[3],R])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const R=function(pe,Ie){var Pe=Ie[0],ze=Ie[1],Ce=Ie[2],qe=Pe*Pe+ze*ze+Ce*Ce;return qe>0&&(qe=1/Math.sqrt(qe)),pe[0]=Ie[0]*qe,pe[1]=Ie[1]*qe,pe[2]=Ie[2]*qe,pe}([],function(pe,Ie,Pe){var ze=Ie[0],Ce=Ie[1],qe=Ie[2],it=Pe[0],je=Pe[1],Ke=Pe[2];return pe[0]=Ce*Ke-qe*je,pe[1]=qe*it-ze*Ke,pe[2]=ze*je-Ce*it,pe}([],L([],x[k[0]],x[k[1]]),L([],x[k[2]],x[k[1]]))),H=-((J=R)[0]*(re=x[k[1]])[0]+J[1]*re[1]+J[2]*re[2]);var J,re;return R.concat(H)});return new Mn(x,I)}}class Zo{constructor(r,l){this.min=r,this.max=l,this.center=function(d,g,x){return d[0]=.5*g[0],d[1]=.5*g[1],d[2]=.5*g[2],d}([],function(d,g,x){return d[0]=g[0]+x[0],d[1]=g[1]+x[1],d[2]=g[2]+x[2],d}([],this.min,this.max))}quadrant(r){const l=[r%2==0,r<2],d=V(this.min),g=V(this.max);for(let x=0;x<l.length;x++)d[x]=l[x]?this.min[x]:this.center[x],g[x]=l[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Zo(d,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let g=0;g<r.planes.length;g++){const x=r.planes[g];let I=0;for(let k=0;k<l.length;k++)u.b0(x,l[k])>=0&&I++;if(I===0)return 0;I!==l.length&&(d=!1)}if(d)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let k=0;k<r.points.length;k++){const R=r.points[k][g]-this.min[g];x=Math.min(x,R),I=Math.max(I,R)}if(I<0||x>this.max[g]-this.min[g])return 0}return 1}}class qs{constructor(r=0,l=0,d=0,g=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=d,this.right=g}interpolate(r,l,d){return l.top!=null&&r.top!=null&&(this.top=u.z.number(r.top,l.top,d)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.z.number(r.bottom,l.bottom,d)),l.left!=null&&r.left!=null&&(this.left=u.z.number(r.left,l.left,d)),l.right!=null&&r.right!=null&&(this.right=u.z.number(r.right,l.right,d)),this}getCenter(r,l){const d=u.ac((this.left+r-this.right)/2,0,r),g=u.ac((this.top+l-this.bottom)/2,0,l);return new u.P(d,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new qs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const yl=85.051129;class qo{constructor(r,l,d,g,x){this.tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new qs,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new qo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-u.b1(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var d=new u.A(4);return u.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,g,x){var I=g[0],k=g[1],R=g[2],H=g[3],J=Math.sin(x),re=Math.cos(x);d[0]=I*re+R*J,d[1]=k*re+H*J,d[2]=I*-J+R*re,d[3]=k*-J+H*re}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,d){this._unmodified=!1,this._edgeInsets.interpolate(r,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new u.b2(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new u.P(0,0)),g=this.pointCoordinate(new u.P(this.width,0)),x=this.pointCoordinate(new u.P(this.width,this.height)),I=this.pointCoordinate(new u.P(0,this.height)),k=Math.floor(Math.min(d.x,g.x,x.x,I.x)),R=Math.floor(Math.max(d.x,g.x,x.x,I.x)),H=1;for(let J=k-H;J<=R+H;J++)J!==0&&l.push(new u.b2(J,r))}return l}coveringTiles(r){var l,d;let g=this.coveringZoomLevel(r);const x=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const I=this.pointCoordinate(this.getCameraPoint()),k=u.Y.fromLngLat(this.center),R=Math.pow(2,g),H=[R*I.x,R*I.y,0],J=[R*k.x,R*k.y,0],re=Mn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let pe=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(pe=g);const Ie=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Pe=je=>({aabb:new Zo([je*R,0,0],[(je+1)*R,R,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),ze=[],Ce=[],qe=g,it=r.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let je=1;je<=3;je++)ze.push(Pe(-je)),ze.push(Pe(je));for(ze.push(Pe(0));ze.length>0;){const je=ze.pop(),Ke=je.x,ot=je.y;let st=je.fullyVisible;if(!st){const Bt=je.aabb.intersects(re);if(Bt===0)continue;st=Bt===2}const ct=r.terrain?H:J,bt=je.aabb.distanceX(ct),xt=je.aabb.distanceY(ct),Et=Math.max(Math.abs(bt),Math.abs(xt));if(je.zoom===qe||Et>Ie+(1<<qe-je.zoom)-2&&je.zoom>=pe){const Bt=qe-je.zoom,gn=H[0]-.5-(Ke<<Bt),It=H[1]-.5-(ot<<Bt);Ce.push({tileID:new u.Q(je.zoom===qe?it:je.zoom,je.wrap,je.zoom,Ke,ot),distanceSq:j([J[0]-.5-Ke,J[1]-.5-ot]),tileDistanceToCamera:Math.sqrt(gn*gn+It*It)})}else for(let Bt=0;Bt<4;Bt++){const gn=(Ke<<1)+Bt%2,It=(ot<<1)+(Bt>>1),nn=je.zoom+1;let yn=je.aabb.quadrant(Bt);if(r.terrain){const An=new u.Q(nn,je.wrap,nn,gn,It),un=r.terrain.getMinMaxElevation(An),vn=(l=un.minElevation)!==null&&l!==void 0?l:this.elevation,Tn=(d=un.maxElevation)!==null&&d!==void 0?d:this.elevation;yn=new Zo([yn.min[0],yn.min[1],vn],[yn.max[0],yn.max[1],Tn])}ze.push({aabb:yn,zoom:nn,x:gn,y:It,wrap:je.wrap,fullyVisible:st})}}return Ce.sort((je,Ke)=>je.distanceSq-Ke.distanceSq).map(je=>je.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=u.ac(r.lat,-85.051129,yl);return new u.P(u.N(r.lng)*this.worldSize,u.O(l)*this.worldSize)}unproject(r){return new u.Y(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,r),x=r.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-x))return;const I=d+l-x,k=Math.cos(this._pitch)*this.cameraToCenterDistance/I/u.b3(1,g.lat),R=this.scaleZoom(k/this.tileSize);this._elevation=x,this._center=g,this.zoom=R}setLocationAtPoint(r,l){const d=this.pointCoordinate(l),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(r),I=new u.Y(x.x-(d.x-g.x),x.y-(d.y-g.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return u.Y.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const pe=l.pointCoordinate(r);if(pe!=null)return pe}const d=[r.x,r.y,0,1],g=[r.x,r.y,1,1];u.af(d,d,this.pixelMatrixInverse),u.af(g,g,this.pixelMatrixInverse);const x=d[3],I=g[3],k=d[1]/x,R=g[1]/I,H=d[2]/x,J=g[2]/I,re=H===J?0:(0-H)/(J-H);return new u.Y(u.z.number(d[0]/x,g[0]/I,re)/this.worldSize,u.z.number(k,R,re)/this.worldSize)}coordinatePoint(r,l=0,d=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,l,1];return u.af(g,g,d),new u.P(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Lt().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Lt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,yl])}calculatePosMatrix(r,l=!1){const d=r.key,g=l?this._alignedPosMatrixCache:this._posMatrixCache;if(g[d])return g[d];const x=r.canonical,I=this.worldSize/this.zoomScale(x.z),k=x.x+Math.pow(2,x.z)*r.wrap,R=u.an(new Float64Array(16));return u.H(R,R,[k*I,x.y*I,0]),u.J(R,R,[I/u.W,I/u.W,1]),u.K(R,l?this.alignedProjMatrix:this.projMatrix,R),g[d]=new Float32Array(R),g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,l){l=u.ac(+l,this.minZoom,this.maxZoom);const d={center:new u.M(r.lng,r.lat),zoom:l};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const je=179.9999999999;g=[-je,je]}const x=this.tileSize*this.zoomScale(d.zoom);let I=0,k=x,R=0,H=x,J=0,re=0;const{x:pe,y:Ie}=this.size;if(this.latRange){const je=this.latRange;I=u.O(je[1])*x,k=u.O(je[0])*x,k-I<Ie&&(J=Ie/(k-I))}g&&(R=u.b1(u.N(g[0])*x,0,x),H=u.b1(u.N(g[1])*x,0,x),H<R&&(H+=x),H-R<pe&&(re=pe/(H-R)));const{x:Pe,y:ze}=this.project.call({worldSize:x},r);let Ce,qe;const it=Math.max(re||0,J||0);if(it){const je=new u.P(re?(H+R)/2:Pe,J?(k+I)/2:ze);return d.center=this.unproject.call({worldSize:x},je).wrap(),d.zoom+=this.scaleZoom(it),d}if(this.latRange){const je=Ie/2;ze-je<I&&(qe=I+je),ze+je>k&&(qe=k-je)}if(g){const je=(R+H)/2;let Ke=Pe;this._renderWorldCopies&&(Ke=u.b1(Pe,je-x/2,je+x/2));const ot=pe/2;Ke-ot<R&&(Ce=R+ot),Ke+ot>H&&(Ce=H-ot)}if(Ce!==void 0||qe!==void 0){const je=new u.P(Ce??Pe,qe??ze);d.center=this.unproject.call({worldSize:x},je).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:l,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=d,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b3(1,this.center.lat)*this.worldSize;let g=u.an(new Float64Array(16));u.J(g,g,[this.width/2,-this.height/2,1]),u.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.an(new Float64Array(16)),u.J(g,g,[1,-1,1]),u.H(g,g,[-1,-1,0]),u.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this.minElevationForCurrentTile),k=x-I*this._pixelPerMeter/Math.cos(this._pitch),R=I<0?k:x,H=Math.PI/2+this._pitch,J=this._fov*(.5+r.y/this.height),re=Math.sin(J)*R/Math.sin(u.ac(Math.PI-H-J,.01,Math.PI-.01)),pe=this.getHorizon(),Ie=2*Math.atan(pe/this.cameraToCenterDistance)*(.5+r.y/(2*pe)),Pe=Math.sin(Ie)*R/Math.sin(u.ac(Math.PI-H-Ie,.01,Math.PI-.01)),ze=Math.min(re,Pe),Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*ze+R),qe=this.height/50;g=new Float64Array(16),u.b4(g,this._fov,this.width/this.height,qe,Ce),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,u.J(g,g,[1,-1,1]),u.H(g,g,[0,0,-this.cameraToCenterDistance]),u.b5(g,g,this._pitch),u.ad(g,g,this.angle),u.H(g,g,[-l,-d,0]),this.mercatorMatrix=u.J([],g,[this.worldSize,this.worldSize,this.worldSize]),u.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,g),u.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=u.ar([],g),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,g);const it=this.width%2/2,je=this.height%2/2,Ke=Math.cos(this.angle),ot=Math.sin(this.angle),st=l-Math.round(l)+Ke*it+ot*je,ct=d-Math.round(d)+Ke*je+ot*it,bt=new Float64Array(g);if(u.H(bt,bt,[st>.5?st-1:st,ct>.5?ct-1:ct,0]),this.alignedProjMatrix=bt,g=u.ar(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let d=l.x,g=l.y,x=l.x,I=l.y;for(const k of r)d=Math.min(d,k.x),g=Math.min(g,k.y),x=Math.max(x,k.x),I=Math.max(I,k.y);return[new u.P(d,g),new u.P(x,g),new u.P(x,I),new u.P(d,I),new u.P(d,g)]}}lngLatToCameraDepth(r,l){const d=this.locationCoordinate(r),g=[d.x*this.worldSize,d.y*this.worldSize,l,1];return u.af(g,g,this.projMatrix),g[2]/g[3]}}function wu(y,r){let l,d=!1,g=null,x=null;const I=()=>{g=null,d&&(y.apply(x,l),g=setTimeout(I,r),d=!1)};return(...k)=>(d=!0,x=this,l=k,g||I(),g)}class G{constructor(r){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}},this._updateHash=wu(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,g=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),I=Math.round(l.lng*x)/x,k=Math.round(l.lat*x)/x,R=this._map.getBearing(),H=this._map.getPitch();let J="";if(J+=r?`/${I}/${k}/${d}`:`${d}/${k}/${I}`,(R||H)&&(J+="/"+Math.round(10*R)/10),H&&(J+=`/${Math.round(H)}`),this._hashName){const re=this._hashName;let pe=!1;const Ie=window.location.hash.slice(1).split("&").map(Pe=>{const ze=Pe.split("=")[0];return ze===re?(pe=!0,`${ze}=${J}`):Pe}).filter(Pe=>Pe);return pe||Ie.push(`${re}=${J}`),`#${Ie.join("&")}`}return`#${J}`}}const ye={linearity:.3,easing:u.b6(0,0,.3,1)},$e=u.e({deceleration:2500,maxSpeed:1400},ye),at=u.e({deceleration:20,maxSpeed:1400},ye),Mt=u.e({deceleration:1e3,maxSpeed:360},ye),Ct=u.e({deceleration:1e3,maxSpeed:90},ye);class Zt{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=b.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)l.zoom+=x.zoomDelta||0,l.bearing+=x.bearingDelta||0,l.pitch+=x.pitchDelta||0,x.panDelta&&l.pan._add(x.panDelta),x.around&&(l.around=x.around),x.pinchAround&&(l.pinchAround=x.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const x=mn(l.pan.mag(),d,u.e({},$e,r||{}));g.offset=l.pan.mult(x.amount/l.pan.mag()),g.center=this._map.transform.center,qt(g,x)}if(l.zoom){const x=mn(l.zoom,d,at);g.zoom=this._map.transform.zoom+x.amount,qt(g,x)}if(l.bearing){const x=mn(l.bearing,d,Mt);g.bearing=this._map.transform.bearing+u.ac(x.amount,-179,179),qt(g,x)}if(l.pitch){const x=mn(l.pitch,d,Ct);g.pitch=this._map.transform.pitch+x.amount,qt(g,x)}if(g.zoom||g.bearing){const x=l.pinchAround===void 0?l.around:l.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),u.e(g,{noMoveStart:!0})}}function qt(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function mn(y,r,l){const{maxSpeed:d,linearity:g,deceleration:x}=l,I=u.ac(y*g/(r/1e3),-d,d),k=Math.abs(I)/(x*g);return{easing:l.easing,duration:1e3*k,amount:I*(k/2)}}class Sn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d,g={}){const x=T.mousePos(l.getCanvas(),d),I=l.unproject(x);super(r,u.e({point:x,lngLat:I,originalEvent:d},g)),this._defaultPrevented=!1,this.target=l}}class Pn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){const g=r==="touchend"?d.changedTouches:d.touches,x=T.touchPos(l.getCanvasContainer(),g),I=x.map(R=>l.unproject(R)),k=x.reduce((R,H,J,re)=>R.add(H.div(re.length)),new u.P(0,0));super(r,{points:x,point:k,lngLats:I,lngLat:l.unproject(k),originalEvent:d}),this._defaultPrevented=!1}}class Zn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class ar{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Zn(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new Sn(r.type,this._map,r))}mouseup(r){this._map.fire(new Sn(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new Sn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Sn(r.type,this._map,r))}mouseover(r){this._map.fire(new Sn(r.type,this._map,r))}mouseout(r){this._map.fire(new Sn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Pn(r.type,this._map,r))}touchmove(r){this._map.fire(new Pn(r.type,this._map,r))}touchend(r){this._map.fire(new Pn(r.type,this._map,r))}touchcancel(r){this._map.fire(new Pn(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pr{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Sn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Sn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Sn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class lr{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class go{constructor(r,l){this._map=r,this._tr=new lr(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(T.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=d,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const x=Math.min(g.x,d.x),I=Math.max(g.x,d.x),k=Math.min(g.y,d.y),R=Math.max(g.y,d.y);T.setTransform(this._box,`translate(${x}px,${k}px)`),this._box.style.width=I-x+"px",this._box.style.height=R-k+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const d=this._startPos,g=l;if(this.reset(),T.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:x=>x.fitScreenCoordinates(d,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new u.k(r,{originalEvent:l}))}}function ii(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const l={};for(let d=0;d<y.length;d++)l[y[d].identifier]=r[d];return l}class Co{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(g){const x=new u.P(0,0);for(const I of g)x._add(I);return x.div(g.length)}(l),this.touches=ii(d,l)))}touchmove(r,l,d){if(this.aborted||!this.centroid)return;const g=ii(d,l);for(const x in this.touches){const I=g[x];(!I||I.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(r,l,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Sa{constructor(r){this.singleTap=new Co(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,d){this.singleTap.touchstart(r,l,d)}touchmove(r,l,d){this.singleTap.touchmove(r,l,d)}touchend(r,l,d){const g=this.singleTap.touchend(r,l,d);if(g){const x=r.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(g)<30;if(x&&I||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ea{constructor(r){this._tr=new lr(r),this._zoomIn=new Sa({numTouches:1,numTaps:2}),this._zoomOut=new Sa({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,d){this._zoomIn.touchstart(r,l,d),this._zoomOut.touchstart(r,l,d)}touchmove(r,l,d){this._zoomIn.touchmove(r,l,d),this._zoomOut.touchmove(r,l,d)}touchend(r,l,d){const g=this._zoomIn.touchend(r,l,d),x=this._zoomOut.touchend(r,l,d),I=this._tr;return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(g)},{originalEvent:r})}):x?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(x)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gi{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const g=l.length?l[0]:l;return!this._moved&&g.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(d,g))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&T.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Zh={0:1,2:2};class qh{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const l=T.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,d){const g=Zh[d];return l.buttons===void 0||(l.buttons&g)!==g}(r,this._eventButton)}isValidEndEvent(r){return T.mouseButton(r)===this._eventButton}}class Xh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const or=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=r=>{r.preventDefault()}},Xs=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{const d=new qh({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Gi({clickTolerance:r,move:(g,x)=>({bearingDelta:(x.x-g.x)*l}),moveStateManager:d,enable:y,assignEvents:or})},Hi=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{const d=new qh({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Gi({clickTolerance:r,move:(g,x)=>({pitchDelta:(x.y-g.y)*l}),moveStateManager:d,enable:y,assignEvents:or})};class Kh{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(r,l,d){return this._calculateTransform(r,l,d)}touchmove(r,l,d){if(this._active&&!(d.length<this.minTouchs()))return r.preventDefault(),this._calculateTransform(r,l,d)}touchend(r,l,d){this._calculateTransform(r,l,d),this._active&&d.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,d){d.length>0&&(this._active=!0);const g=ii(d,l),x=new u.P(0,0),I=new u.P(0,0);let k=0;for(const H in g){const J=g[H],re=this._touches[H];re&&(x._add(J),I._add(J.sub(re)),k++,g[H]=J)}if(this._touches=g,k<this.minTouchs()||!I.mag())return;const R=I.div(k);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(k),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,d){if(!this._firstTwoTouches)return;r.preventDefault();const[g,x]=this._firstTwoTouches,I=Su(d,l,g),k=Su(d,l,x);if(!I||!k)return;const R=this._aroundCenter?null:I.add(k).div(2);return this._move([I,k],R,r)}touchend(r,l,d){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,I=Su(d,l,g),k=Su(d,l,x);I&&k||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Su(y,r,l){for(let d=0;d<y.length;d++)if(y[d].identifier===l)return r[d]}function Ta(y,r){return Math.log(y/r)/Math.LN2}class vl extends bu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Ta(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ta(this._distance,d),pinchAround:l}}}function Cc(y,r){return 180*y.angleWith(r)/Math.PI}class Yh extends bu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,d){const g=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Cc(this._vector,g),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,d=Cc(r,this._startVector);return Math.abs(d)<l}}function Ic(y){return Math.abs(y.y)>Math.abs(y.x)}class Jh extends bu{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,d){super.touchstart(r,l,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Ic(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),x=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,d){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,x=l.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const I=r.y>0==l.y>0;return Ic(r)&&Ic(l)&&I}}const op={panStep:100,bearingStep:15,pitchStep:10};class Qh{constructor(r){this._tr=new lr(r);const l=op;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,d=0,g=0,x=0,I=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),x=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),x=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),I=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:k=>{const R=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Ca,zoom:l?Math.round(R.zoom)+l*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+d*this._bearingStep,pitch:R.pitch+g*this._pitchStep,offset:[-x*this._panStep,-I*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ca(y){return y*(2-y)}const ef=4.000244140625;class tf{constructor(r,l){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new lr(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!r[this._map.cooperativeGestures._bypassKey])return;let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=b.now(),g=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%ef==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=T.mousePos(this._map.getCanvas(),r),d=this._tr;this._around=l.y>d.transform.height/2-d.transform.getHorizon()?u.M.convert(this._aroundCenter?d.center:d.unproject(l)):u.M.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>ef?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&R!==0&&(R=1/R);const H=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(H*R))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,g=this._easing;let x,I=!1;if(this._type==="wheel"&&d&&g){const k=Math.min((b.now()-this._lastWheelEventTime)/200,1),R=g(k);x=u.z.number(d,l,R),k<1?this._frameId||(this._frameId=!0):I=!0}else x=l,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:x-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=u.b7;if(this._prevEase){const d=this._prevEase,g=(b.now()-d.start)/d.duration,x=d.easing(g+.01)-d.easing(g),I=.27/Math.sqrt(x*x+1e-4)*.01,k=Math.sqrt(.0729-I*I);l=u.b6(I,k,.25,1)}return this._prevEase={start:b.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class nf{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class sp{constructor(r){this._tr=new lr(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ap{constructor(){this._tap=new Sa({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,d){if(!this._swipePoint)if(this._tapTime){const g=l[0],x=r.timeStamp-this._tapTime<500,I=this._tapPoint.dist(g)<30;x&&I?d.length>0&&(this._swipePoint=g,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,l,d)}touchmove(r,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const g=l[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(r,l,d)}touchend(r,l,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const g=this._tap.touchend(r,l,d);g&&(this._tapTime=r.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rf{constructor(r,l,d){this._el=r,this._mousePan=l,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class of{constructor(r,l,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _l{constructor(r,l,d,g){this._el=r,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class sf{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=l,this._container.appendChild(g);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=d,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(r){this._onCooperativeGesture(r.touches.length===1)}wheel(r){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!r[this._bypassKey])}_onCooperativeGesture(r){this._enabled&&r&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const zi=y=>y.zoom||y.drag||y.pitch||y.rotate;class Xo extends u.k{}function Ac(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Ko{constructor(r,l){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=g.type==="renderFrame"?void 0:g,k={needsRenderFrame:!1},R={},H={},J=g.touches,re=J?this._getMapTouches(J):void 0,pe=re?T.touchPos(this._map.getCanvas(),re):T.mousePos(this._map.getCanvas(),g);for(const{handlerName:ze,handler:Ce,allowed:qe}of this._handlers){if(!Ce.isEnabled())continue;let it;this._blockedByActive(H,qe,ze)?Ce.reset():Ce[x||g.type]&&(it=Ce[x||g.type](g,pe,re),this.mergeHandlerResult(k,R,it,ze,I),it&&it.needsRenderFrame&&this._triggerRenderFrame()),(it||Ce.isActive())&&(H[ze]=Ce)}const Ie={};for(const ze in this._previousActiveHandlers)H[ze]||(Ie[ze]=I);this._previousActiveHandlers=H,(Object.keys(Ie).length||Ac(k))&&(this._changes.push([k,R,Ie]),this._triggerRenderFrame()),(Object.keys(H).length||Ac(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=k;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zt(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,I]of this._listeners)T.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[r,l,d]of this._listeners)T.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new ar(l,r));const g=l.boxZoom=new go(l,r);this._add("boxZoom",g),r.interactive&&r.boxZoom&&g.enable();const x=l.cooperativeGestures=new sf(l,r.cooperativeGestures);this._add("cooperativeGestures",x),r.cooperativeGestures&&x.enable();const I=new Ea(l),k=new sp(l);l.doubleClickZoom=new nf(k,I),this._add("tapZoom",I),this._add("clickZoom",k),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();const R=new ap;this._add("tapDragZoom",R);const H=l.touchPitch=new Jh(l);this._add("touchPitch",H),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);const J=Xs(r),re=Hi(r);l.dragRotate=new of(r,J,re),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",re,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();const pe=(({enable:it,clickTolerance:je})=>{const Ke=new qh({checkCorrectEvent:ot=>T.mouseButton(ot)===0&&!ot.ctrlKey});return new Gi({clickTolerance:je,move:(ot,st)=>({around:st,panDelta:st.sub(ot)}),activateOnStart:!0,moveStateManager:Ke,enable:it,assignEvents:or})})(r),Ie=new Kh(r,l);l.dragPan=new rf(d,pe,Ie),this._add("mousePan",pe),this._add("touchPan",Ie,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);const Pe=new Yh,ze=new vl;l.touchZoomRotate=new _l(d,ze,Pe,R),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",ze,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);const Ce=l.scrollZoom=new tf(l,()=>this._triggerRenderFrame());this._add("scrollZoom",Ce,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);const qe=l.keyboard=new Qh(l);this._add("keyboard",qe),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new Pr(l))}_add(r,l,d){this._handlers.push({handlerName:r,handler:l,allowed:d}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!zi(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,d){for(const g in r)if(g!==d&&(!l||l.indexOf(g)<0))return!0;return!1}_getMapTouches(r){const l=[];for(const d of r)this._el.contains(d.target)&&l.push(d);return l}mergeHandlerResult(r,l,d,g,x){if(!d)return;u.e(r,d);const I={handlerName:g,originalEvent:d.originalEvent||x};d.zoomDelta!==void 0&&(l.zoom=I),d.panDelta!==void 0&&(l.drag=I),d.pitchDelta!==void 0&&(l.pitch=I),d.bearingDelta!==void 0&&(l.rotate=I)}_applyChanges(){const r={},l={},d={};for(const[g,x,I]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),u.e(l,x),u.e(d,I);this._updateMapTransform(r,l,d),this._changes=[]}_updateMapTransform(r,l,d){const g=this._map,x=g._getTransformForUpdate(),I=g.terrain;if(!(Ac(r)||I&&this._terrainMovement))return this._fireEvents(l,d,!0);let{panDelta:k,zoomDelta:R,bearingDelta:H,pitchDelta:J,around:re,pinchAround:pe}=r;pe!==void 0&&(re=pe),g._stop(!0),re=re||g.transform.centerPoint;const Ie=x.pointLocation(k?re.sub(k):re);H&&(x.bearing+=H),J&&(x.pitch+=J),R&&(x.zoom+=R),I?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(k)):x.setLocationAtPoint(Ie,re):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(Ie,re),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(Ie,re),g._applyUpdatedTransform(x),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,d,!0)}_fireEvents(r,l,d){const g=zi(this._eventsInProgress),x=zi(r),I={};for(const J in r){const{originalEvent:re}=r[J];this._eventsInProgress[J]||(I[`${J}start`]=re),this._eventsInProgress[J]=r[J]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const J in I)this._fireEvent(J,I[J]);x&&this._fireEvent("move",x.originalEvent);for(const J in r){const{originalEvent:re}=r[J];this._fireEvent(J,re)}const k={};let R;for(const J in this._eventsInProgress){const{handlerName:re,originalEvent:pe}=this._eventsInProgress[J];this._handlersById[re].isActive()||(delete this._eventsInProgress[J],R=l[re]||pe,k[`${J}end`]=R)}for(const J in k)this._fireEvent(J,k[J]);const H=zi(this._eventsInProgress);if(d&&(g||x)&&!H){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),re=pe=>pe!==0&&-this._bearingSnap<pe&&pe<this._bearingSnap;!J||!J.essential&&b.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:R})),re(this._map.getBearing())&&this._map.resetNorth()):(re(J.bearing||this._map.getBearing())&&(J.bearing=0),J.freezeElevation=!0,this._map.easeTo(J,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new u.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Xo("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Eu extends u.E{constructor(r,l){super(),this._renderFrameCallback=()=>{const d=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,d){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},l),d)}panTo(r,l,d){return this.easeTo(u.e({center:r},l),d)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,d){return this.easeTo(u.e({zoom:r},l),d)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,d){return this.easeTo(u.e({bearing:r},l),d)}resetNorth(r,l){return this.rotateTo(0,u.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=Lt.convert(r);const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,l)}_cameraForBoxAndBearing(r,l,d,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=u.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Bt=g.padding;g.padding={top:Bt,bottom:Bt,right:Bt,left:Bt}}g.padding=u.e(x,g.padding);const I=this.transform,k=I.padding,R=new Lt(r,l),H=I.project(R.getNorthWest()),J=I.project(R.getNorthEast()),re=I.project(R.getSouthEast()),pe=I.project(R.getSouthWest()),Ie=u.b8(-d),Pe=H.rotate(Ie),ze=J.rotate(Ie),Ce=re.rotate(Ie),qe=pe.rotate(Ie),it=new u.P(Math.max(Pe.x,ze.x,qe.x,Ce.x),Math.max(Pe.y,ze.y,qe.y,Ce.y)),je=new u.P(Math.min(Pe.x,ze.x,qe.x,Ce.x),Math.min(Pe.y,ze.y,qe.y,Ce.y)),Ke=it.sub(je),ot=(I.width-(k.left+k.right+g.padding.left+g.padding.right))/Ke.x,st=(I.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/Ke.y;if(st<0||ot<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ct=Math.min(I.scaleZoom(I.scale*Math.min(ot,st)),g.maxZoom),bt=u.P.convert(g.offset),xt=new u.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(u.b8(d)),Et=bt.add(xt).mult(I.scale/I.zoomScale(ct));return{center:I.unproject(H.add(re).div(2).sub(Et)),zoom:ct,bearing:d}}fitBounds(r,l,d){return this._fitInternal(this.cameraForBounds(r,l),l,d)}fitScreenCoordinates(r,l,d,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(l)),d,g),g,x)}_fitInternal(r,l,d){return r?(delete(l=u.e(r,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(r,l){this.stop();const d=this._getTransformForUpdate();let g=!1,x=!1,I=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(g=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=u.M.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(x=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(I=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new u.k("movestart",l)).fire(new u.k("move",l)),g&&this.fire(new u.k("zoomstart",l)).fire(new u.k("zoom",l)).fire(new u.k("zoomend",l)),x&&this.fire(new u.k("rotatestart",l)).fire(new u.k("rotate",l)).fire(new u.k("rotateend",l)),I&&this.fire(new u.k("pitchstart",l)).fire(new u.k("pitch",l)).fire(new u.k("pitchend",l)),this.fire(new u.k("moveend",l))}calculateCameraOptionsFromTo(r,l,d,g=0){const x=u.Y.fromLngLat(r,l),I=u.Y.fromLngLat(d,g),k=I.x-x.x,R=I.y-x.y,H=I.z-x.z,J=Math.hypot(k,R,H);if(J===0)throw new Error("Can't calculate camera options with same From and To");const re=Math.hypot(k,R),pe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/J/this.transform.tileSize),Ie=180*Math.atan2(k,-R)/Math.PI;let Pe=180*Math.acos(re/J)/Math.PI;return Pe=H<0?90-Pe:90+Pe,{center:I.toLngLat(),zoom:pe,pitch:Pe,bearing:Ie}}easeTo(r,l){var d;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b7},r)).animate===!1||!r.essential&&b.prefersReducedMotion)&&(r.duration=0);const g=this._getTransformForUpdate(),x=this.getZoom(),I=this.getBearing(),k=this.getPitch(),R=this.getPadding(),H="bearing"in r?this._normalizeBearing(r.bearing,I):I,J="pitch"in r?+r.pitch:k,re="padding"in r?r.padding:g.padding,pe=u.P.convert(r.offset);let Ie=g.centerPoint.add(pe);const Pe=g.pointLocation(Ie),{center:ze,zoom:Ce}=g.getConstrained(u.M.convert(r.center||Pe),(d=r.zoom)!==null&&d!==void 0?d:x);this._normalizeCenter(ze);const qe=g.project(Pe),it=g.project(ze).sub(qe),je=g.zoomScale(Ce-x);let Ke,ot;r.around&&(Ke=u.M.convert(r.around),ot=g.locationPoint(Ke));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ce!==x,this._rotating=this._rotating||I!==H,this._pitching=this._pitching||J!==k,this._padding=!g.isPaddingEqual(re),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,st),this.terrain&&this._prepareElevation(ze),this._ease(ct=>{if(this._zooming&&(g.zoom=u.z.number(x,Ce,ct)),this._rotating&&(g.bearing=u.z.number(I,H,ct)),this._pitching&&(g.pitch=u.z.number(k,J,ct)),this._padding&&(g.interpolatePadding(R,re,ct),Ie=g.centerPoint.add(pe)),this.terrain&&!r.freezeElevation&&this._updateElevation(ct),Ke)g.setLocationAtPoint(Ke,ot);else{const bt=g.zoomScale(g.zoom-x),xt=Ce>x?Math.min(2,je):Math.max(.5,je),Et=Math.pow(xt,1-ct),Bt=g.unproject(qe.add(it.mult(ct*Et)).mult(bt));g.setLocationAtPoint(g.renderWorldCopies?Bt.wrap():Bt,Ie)}this._applyUpdatedTransform(g),this._fireMoveEvents(l)},ct=>{this.terrain&&this._finalizeElevation(),this._afterEase(l,ct)},r),this}_prepareEase(r,l,d={}){this._moving=!0,l||d.moving||this.fire(new u.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(l-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const l=r.clone(),{center:d,zoom:g,pitch:x,bearing:I,elevation:k}=this.transformCameraUpdate(l);d&&(l.center=d),g!==void 0&&(l.zoom=g),x!==void 0&&(l.pitch=x),I!==void 0&&(l.bearing=I),k!==void 0&&(l.elevation=k),this.transform.apply(l)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const d=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.k("zoomend",r)),g&&this.fire(new u.k("rotateend",r)),x&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,l){var d;if(!r.essential&&b.prefersReducedMotion){const An=u.L(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(An,l)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b7},r);const g=this._getTransformForUpdate(),x=this.getZoom(),I=this.getBearing(),k=this.getPitch(),R=this.getPadding(),H="bearing"in r?this._normalizeBearing(r.bearing,I):I,J="pitch"in r?+r.pitch:k,re="padding"in r?r.padding:g.padding,pe=u.P.convert(r.offset);let Ie=g.centerPoint.add(pe);const Pe=g.pointLocation(Ie),{center:ze,zoom:Ce}=g.getConstrained(u.M.convert(r.center||Pe),(d=r.zoom)!==null&&d!==void 0?d:x);this._normalizeCenter(ze);const qe=g.zoomScale(Ce-x),it=g.project(Pe),je=g.project(ze).sub(it);let Ke=r.curve;const ot=Math.max(g.width,g.height),st=ot/qe,ct=je.mag();if("minZoom"in r){const An=u.ac(Math.min(r.minZoom,x,Ce),g.minZoom,g.maxZoom),un=ot/g.zoomScale(An-x);Ke=Math.sqrt(un/ct*2)}const bt=Ke*Ke;function xt(An){const un=(st*st-ot*ot+(An?-1:1)*bt*bt*ct*ct)/(2*(An?st:ot)*bt*ct);return Math.log(Math.sqrt(un*un+1)-un)}function Et(An){return(Math.exp(An)-Math.exp(-An))/2}function Bt(An){return(Math.exp(An)+Math.exp(-An))/2}const gn=xt(!1);let It=function(An){return Bt(gn)/Bt(gn+Ke*An)},nn=function(An){return ot*((Bt(gn)*(Et(un=gn+Ke*An)/Bt(un))-Et(gn))/bt)/ct;var un},yn=(xt(!0)-gn)/Ke;if(Math.abs(ct)<1e-6||!isFinite(yn)){if(Math.abs(ot-st)<1e-6)return this.easeTo(r,l);const An=st<ot?-1:1;yn=Math.abs(Math.log(st/ot))/Ke,nn=()=>0,It=un=>Math.exp(An*Ke*un)}return r.duration="duration"in r?+r.duration:1e3*yn/("screenSpeed"in r?+r.screenSpeed/Ke:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=I!==H,this._pitching=J!==k,this._padding=!g.isPaddingEqual(re),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(ze),this._ease(An=>{const un=An*yn,vn=1/It(un);g.zoom=An===1?Ce:x+g.scaleZoom(vn),this._rotating&&(g.bearing=u.z.number(I,H,An)),this._pitching&&(g.pitch=u.z.number(k,J,An)),this._padding&&(g.interpolatePadding(R,re,An),Ie=g.centerPoint.add(pe)),this.terrain&&!r.freezeElevation&&this._updateElevation(An);const Tn=An===1?ze:g.unproject(it.add(je.mult(nn(un))).mult(vn));g.setLocationAtPoint(g.renderWorldCopies?Tn.wrap():Tn,Ie),this._applyUpdatedTransform(g),this._fireMoveEvents(l)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,l)}if(!r){const d=this.handlers;d&&d.stop(!1)}return this}_ease(r,l,d){d.animate===!1||d.duration===0?(r(1),l()):(this._easeStart=b.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=u.b1(r,-180,180);const d=Math.abs(r-l);return Math.abs(r-360-l)<d&&(r-=360),Math.abs(r+360-l)<d&&(r+=360),r}_normalizeCenter(r){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const d=r.lng-l.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const lp={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class up{constructor(r=lp){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const d=this._map._getUIString(`AttributionControl.${l}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style.sourceCaches;for(const g in l){const x=l[g];if(x.used||x.usedForTerrain){const I=x.getSource();I.attribution&&r.indexOf(I.attribution)<0&&r.push(I.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,x)=>g.length-x.length),r=r.filter((g,x)=>{for(let I=x+1;I<r.length;I++)if(r[I].indexOf(g)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class cp{constructor(r={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const l=T.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class hp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const g of d)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Tu=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class Ks extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];const d={};for(const g of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))d[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.aN(g.posMatrix,0,u.W,0,u.W,0,1),this._tiles[g.key]=new Se(g,this.tileSize));for(const g in this._tiles)d[g]||delete this._tiles[g]}freeRtt(r){for(const l in this._tiles){const d=this._tiles[l];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const d of this._renderableTilesKeys){const g=this._tiles[d].tileID;if(g.canonical.equals(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16),u.aN(x.posMatrix,0,u.W,0,u.W,0,1),l[d]=x}else if(g.canonical.isChildOf(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const I=g.canonical.z-r.canonical.z,k=g.canonical.x-(g.canonical.x>>I<<I),R=g.canonical.y-(g.canonical.y>>I<<I),H=u.W>>I;u.aN(x.posMatrix,0,H,0,H,0,1),u.H(x.posMatrix,x.posMatrix,[-k*H,-R*H,0]),l[d]=x}else if(r.canonical.isChildOf(g.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const I=r.canonical.z-g.canonical.z,k=r.canonical.x-(r.canonical.x>>I<<I),R=r.canonical.y-(r.canonical.y>>I<<I),H=u.W>>I;u.aN(x.posMatrix,0,u.W,0,u.W,0,1),u.H(x.posMatrix,x.posMatrix,[k*H,R*H,0]),u.J(x.posMatrix,x.posMatrix,[1/2**I,1/2**I,0]),l[d]=x}}return l}getSourceTile(r,l){const d=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>d.maxzoom&&(g=d.maxzoom),g<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!x||!x.dem)&&l)for(;g>=d.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(r.scaledTo(g--).key);return x}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class Nt{constructor(r,l,d){this.painter=r,this.sourceCache=new Ks(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,d,g=u.W){var x;if(!(l>=0&&l<g&&d>=0&&d<g))return 0;const I=this.getTerrainData(r),k=(x=I.tile)===null||x===void 0?void 0:x.dem;if(!k)return 0;const R=function(Pe,ze,Ce){var qe=ze[0],it=ze[1];return Pe[0]=Ce[0]*qe+Ce[4]*it+Ce[12],Pe[1]=Ce[1]*qe+Ce[5]*it+Ce[13],Pe}([],[l/g*u.W,d/g*u.W],I.u_terrain_matrix),H=[R[0]*k.dim,R[1]*k.dim],J=Math.floor(H[0]),re=Math.floor(H[1]),pe=H[0]-J,Ie=H[1]-re;return k.get(J,re)*(1-pe)*(1-Ie)+k.get(J+1,re)*pe*(1-Ie)+k.get(J,re+1)*(1-pe)*Ie+k.get(J+1,re+1)*pe*Ie}getElevationForLngLatZoom(r,l){const{tileID:d,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(d,g%u.W,x%u.W,u.W)}getElevation(r,l,d,g=u.W){return this.getDEMElevation(r,l,d,g)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.painter.context,x=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Z(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Z(g,new u.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const g=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new Z(g,l.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),l.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?x=r.canonical.z-g:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=r.canonical.x-(r.canonical.x>>x<<x),k=r.canonical.y-(r.canonical.y>>x<<x),R=u.b9(new Float64Array(16),[1/(u.W<<x),1/(u.W<<x),0]);u.H(R,R,[I*u.W,k*u.W,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){const l=this.painter,d=l.width/devicePixelRatio,g=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Z(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Z(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,g,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,I=0;x<this._coordsTextureSize;x++)for(let k=0;k<this._coordsTextureSize;k++,I+=4)l[I+0]=255&k,l[I+1]=255&x,l[I+2]=k>>8<<4|x>>8,l[I+3]=0;const d=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),g=new Z(r,d,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),d=this.painter.context,g=d.gl,x=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(x,k-I-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);const R=l[0]+(l[2]>>4<<8),H=l[1]+((15&l[2])<<8),J=this.coordsIndex[255-l[3]],re=J&&this.sourceCache.getTileByID(J);if(!re)return null;const pe=this._coordsTextureSize,Ie=(1<<re.tileID.canonical.z)*pe;return new u.Y((re.tileID.canonical.x*pe+R)/Ie+re.tileID.wrap,(re.tileID.canonical.y*pe+H)/Ie,this.getElevation(re.tileID,R,H,pe))}depthAtPoint(r){const l=new Uint8Array(4),d=this.painter.context,g=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,l=new u.ba,d=new u.aX,g=this.meshSize,x=u.W/g,I=g*g;for(let re=0;re<=g;re++)for(let pe=0;pe<=g;pe++)l.emplaceBack(pe*x,re*x,0);for(let re=0;re<I;re+=g+1)for(let pe=0;pe<g;pe++)d.emplaceBack(pe+re,g+pe+re+1,g+pe+re+2),d.emplaceBack(pe+re,g+pe+re+2,pe+re+1);const k=l.length,R=k+2*(g+1);for(const re of[0,1])for(let pe=0;pe<=g;pe++)for(const Ie of[0,1])l.emplaceBack(pe*x,re*u.W,Ie);for(let re=0;re<2*g;re+=2)d.emplaceBack(R+re,R+re+1,R+re+3),d.emplaceBack(R+re,R+re+3,R+re+2),d.emplaceBack(k+re,k+re+3,k+re+1),d.emplaceBack(k+re,k+re+2,k+re+3);const H=l.length,J=H+2*(g+1);for(const re of[0,1])for(let pe=0;pe<=g;pe++)for(const Ie of[0,1])l.emplaceBack(re*u.W,pe*x,Ie);for(let re=0;re<2*g;re+=2)d.emplaceBack(H+re,H+re+1,H+re+3),d.emplaceBack(H+re,H+re+3,H+re+2),d.emplaceBack(J+re,J+re+3,J+re+1),d.emplaceBack(J+re,J+re+2,J+re+3);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(l,Tu.members),segments:u.$.simpleSegment(0,0,l.length,d.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.bb/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var d;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(d=this.getMinMaxElevation(g).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,l){const d=u.Y.fromLngLat(r.wrap()),g=(1<<l)*u.W,x=d.x*g,I=d.y*g,k=Math.floor(x/u.W),R=Math.floor(I/u.W);return{tileID:new u.Q(l,0,l,k,R),mercatorX:x,mercatorY:I}}}class fp{constructor(r,l,d){this._context=r,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Z(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:r,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Yo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Cu{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new fp(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(l)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const g=r.sourceCaches[d].getVisibleCoordinates();for(const x of g){const I=this.terrain.sourceCache.getTerrainCoords(x);for(const k in I)this._coordsDescendingInv[d][k]||(this._coordsDescendingInv[d][k]=[]),this._coordsDescendingInv[d][k].push(I[k])}}this._coordsDescendingInvStr={};for(const d of r._order){const g=r._layers[d],x=g.source;if(Yo[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const I in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][I]=this._coordsDescendingInv[x][I].map(k=>k.key).sort().join()}}for(const d of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][d.tileID.key];x&&x!==d.rttCoords[g]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const l=r.type,d=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Yo[l]&&(this._prevType&&Yo[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!g))return!0;if(Yo[this._prevType]||Yo[l]&&g){this._prevType=l;const x=this._stacks.length-1,I=this._stacks[x]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(mo(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[x]){const H=this.pool.getObjectForId(k.rtt[x].id);if(H.stamp===k.rtt[x].stamp){this.pool.useObject(H);continue}}const R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),k.rtt[x]={id:R.id,stamp:R.stamp},d.context.bindFramebuffer.set(R.fbo.framebuffer),d.context.clear({color:u.aO.transparent,stencil:0}),d.currentStencilSource=void 0;for(let H=0;H<I.length;H++){const J=d.style._layers[I[H]],re=J.source?this._coordsDescendingInv[J.source][k.tileID.key]:[k.tileID];d.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),d._renderTileClippingMasks(J,re),d.renderLayer(d,d.style.sourceCaches[J.source],J,re),J.source&&(k.rttCoords[J.source]=this._coordsDescendingInvStr[J.source][k.tileID.key])}}return mo(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Yo[l]}return!1}}const dp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},jt=S,af={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:lp,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},pp=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},by={showCompass:!0,showZoom:!0,visualizePitch:!1};class lf{constructor(r,l,d=!1){this.mousedown=I=>{this.startMouse(u.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),T.mousePos(this.element,I)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,T.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=r.dragRotate._mouseRotate.getClickTolerance(),x=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=Xs({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:k,bearingDegreesPerPixelMoved:R=.8})=>{const H=new Xh;return new Gi({clickTolerance:k,move:(J,re)=>({bearingDelta:(re.x-J.x)*R}),moveStateManager:H,enable:I,assignEvents:pp})})({clickTolerance:g,enable:!0}),this.map=r,d&&(this.mousePitch=Hi({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:k,pitchDegreesPerPixelMoved:R=-.5})=>{const H=new Xh;return new Gi({clickTolerance:k,move:(J,re)=>({pitchDelta:(re.y-J.y)*R}),moveStateManager:H,enable:I,assignEvents:pp})})({clickTolerance:x,enable:!0})),T.addEventListener(l,"mousedown",this.mousedown),T.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),T.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),T.disableDrag()}moveMouse(r,l){const d=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(r,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(r,l)||{};x&&d.setPitch(d.getPitch()+x)}}moveTouch(r,l){const d=this.map,{bearingDelta:g}=this.touchRotate.dragMove(r,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(r,l)||{};x&&d.setPitch(d.getPitch()+x)}}off(){const r=this.element;T.removeEventListener(r,"mousedown",this.mousedown),T.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let Ys;function uf(y,r,l){const d=new u.M(y.lng,y.lat);if(y=new u.M(y.lng,y.lat),r){const g=new u.M(y.lng-360,y.lat),x=new u.M(y.lng+360,y.lat),I=l.locationPoint(y).distSqr(r);l.locationPoint(g).distSqr(r)<I?y=g:l.locationPoint(x).distSqr(r)<I&&(y=x)}for(;Math.abs(y.lng-l.center.lng)>180;){const g=l.locationPoint(y);if(g.x>=0&&g.y>=0&&g.x<=l.width&&g.y<=l.height)break;y.lng>l.center.lng?y.lng-=360:y.lng+=360}return y.lng!==d.lng&&l.locationPoint(y).y>l.height/2-l.getHorizon()?y:d}const cf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function mp(y,r,l){const d=y.classList;for(const g in cf)d.remove(`maplibregl-${l}-anchor-${g}`);d.add(`maplibregl-${l}-anchor-${r}`)}class ys extends u.E{constructor(r){if(super(),this._onKeyPress=l=>{const d=l.code,g=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=l=>{const d=l.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()},this._update=l=>{var d;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?uf(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${cf[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${x}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const l=T.createNS("http://www.w3.org/2000/svg","svg"),d=41,g=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${g}px`),l.setAttributeNS(null,"viewBox",`0 0 ${g} ${d}`);const x=T.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const I=T.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const k=T.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const qe of R){const it=T.createNS("http://www.w3.org/2000/svg","ellipse");it.setAttributeNS(null,"opacity","0.04"),it.setAttributeNS(null,"cx","10.5"),it.setAttributeNS(null,"cy","5.80029008"),it.setAttributeNS(null,"rx",qe.rx),it.setAttributeNS(null,"ry",qe.ry),k.appendChild(it)}const H=T.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const J=T.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(J);const re=T.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"fill","#000000");const pe=T.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),re.appendChild(pe);const Ie=T.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");const Pe=T.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ze=T.createNS("http://www.w3.org/2000/svg","circle");ze.setAttributeNS(null,"fill","#000000"),ze.setAttributeNS(null,"opacity","0.25"),ze.setAttributeNS(null,"cx","5.5"),ze.setAttributeNS(null,"cy","5.5"),ze.setAttributeNS(null,"r","5.4999962");const Ce=T.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(ze),Pe.appendChild(Ce),I.appendChild(k),I.appendChild(H),I.appendChild(re),I.appendChild(Ie),I.appendChild(Pe),l.appendChild(I),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(l),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),mp(this._element,this._anchor,"marker"),r&&r.className)for(const l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.M.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,d;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,x=g.terrain.depthAtPoint(this._pos),I=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,I)-x<.006)return void(this._element.style.opacity=this._opacity);const k=-this._offset.y/g.transform._pixelPerMeter,R=Math.sin(g.getPitch()*Math.PI/180)*k,H=g.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),J=g.transform.lngLatToCameraDepth(this._lngLat,I+R)-H>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&J&&this._popup.remove(),this._element.style.opacity=J?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const Qn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ia=0,Aa=!1;const gp={maxWidth:100,unit:"metric"};function hf(y,r,l){const d=l&&l.maxWidth||100,g=y._container.clientHeight/2,x=y.unproject([0,g]),I=y.unproject([d,g]),k=x.distanceTo(I);if(l&&l.unit==="imperial"){const R=3.2808*k;R>5280?xl(r,d,R/5280,y._getUIString("ScaleControl.Miles")):xl(r,d,R,y._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?xl(r,d,k/1852,y._getUIString("ScaleControl.NauticalMiles")):k>=1e3?xl(r,d,k/1e3,y._getUIString("ScaleControl.Kilometers")):xl(r,d,k,y._getUIString("ScaleControl.Meters"))}function xl(y,r,l,d){const g=function(x){const I=Math.pow(10,`${Math.floor(x)}`.length-1);let k=x/I;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(R){const H=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*H)/H}(k),I*k}(l);y.style.width=r*(g/l)+"px",y.innerHTML=`${g}&nbsp;${d}`}const Sy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Jo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Iu(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,y),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-y),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(y,0),right:new u.P(-y,0)}}if(y instanceof u.P||Array.isArray(y)){const r=u.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(y.center||[0,0]),top:u.P.convert(y.top||[0,0]),"top-left":u.P.convert(y["top-left"]||[0,0]),"top-right":u.P.convert(y["top-right"]||[0,0]),bottom:u.P.convert(y.bottom||[0,0]),"bottom-left":u.P.convert(y["bottom-left"]||[0,0]),"bottom-right":u.P.convert(y["bottom-right"]||[0,0]),left:u.P.convert(y.left||[0,0]),right:u.P.convert(y.right||[0,0])}}return Iu(new u.P(0,0))}const Xt=S;f.AJAXError=u.be,f.Evented=u.E,f.LngLat=u.M,f.MercatorCoordinate=u.Y,f.Point=u.P,f.addProtocol=u.bf,f.config=u.a,f.removeProtocol=u.bg,f.AttributionControl=up,f.BoxZoomHandler=go,f.CanvasSource=xe,f.CooperativeGesturesHandler=sf,f.DoubleClickZoomHandler=nf,f.DragPanHandler=rf,f.DragRotateHandler=of,f.EdgeInsets=qs,f.FullscreenControl=class extends u.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=Ht,f.GeolocateControl=class extends u.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const l=new u.M(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,g=this._map.getBearing(),x=u.e({bearing:g},this.options.fitBoundsOptions),I=Lt.fromLngLat(l,d);this._map.fitBounds(I,x,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const l=new u.M(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Aa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ys({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ys({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},Qn,y)}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(r=!1){if(Ys!==void 0&&!r)return Ys;if(window.navigator.permissions===void 0)return Ys=!!window.navigator.geolocation,Ys;try{Ys=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ys=!!window.navigator.geolocation}return Ys})}().then(r=>this._setupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ia=0,Aa=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),l=y.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),l=y.getNorthEast(),d=r.distanceTo(l),g=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ia--,Aa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ia++,Ia>1?(y={maximumAge:6e5,timeout:0},Aa=!0):(y=this.options.positionOptions,Aa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.Hash=G,f.ImageSource=N,f.KeyboardHandler=Qh,f.LngLatBounds=Lt,f.LogoControl=cp,f.Map=class extends Eu{constructor(y){if(u.bc.mark(u.bd.create),(y=u.e({},af,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new qo(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=r=>{r.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new hp,this._controls=[],this._mapId=u.a3(),this._locale=u.e({},dp,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new se(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const l=wu(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{r?l(d):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ko(this,y),this._hash=y.hash&&new G(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,u.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new up(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new cp,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new u.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new u.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new u.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=y.onAdd(this);this._controls.push(y);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,l,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,l,d)}resize(y){var r;const l=this._containerDimensions(),d=l[0],g=l[1],x=this._getClampedPixelRatio(d,g);if(this._resizeCanvas(d,g,x),this.painter.resize(d,g,x),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const R=this._getClampedPixelRatio(d,g);this._resizeCanvas(d,g,R),this.painter.resize(d,g,R)}this.transform.resize(d,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,g);const I=!this._moving;return I&&(this.stop(),this.fire(new u.k("movestart",y)).fire(new u.k("move",y))),this.fire(new u.k("resize",y)),I&&this.fire(new u.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:l,1:d}=this._maxCanvasSize,g=this.getPixelRatio(),x=y*g,I=r*g;return Math.min(x>l?l/x:1,I>d?d/I:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Lt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(u.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,l){if(y==="mouseenter"||y==="mouseover"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:x=>{const I=this.getLayer(r)?this.queryRenderedFeatures(x.point,{layers:[r]}):[];I.length?d||(d=!0,l.call(this,new Sn(y,this,x.originalEvent,{features:I}))):d=!1},mouseout:()=>{d=!1}}}}if(y==="mouseleave"||y==="mouseout"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:I=>{(this.getLayer(r)?this.queryRenderedFeatures(I.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,l.call(this,new Sn(y,this,I.originalEvent)))},mouseout:I=>{d&&(d=!1,l.call(this,new Sn(y,this,I.originalEvent)))}}}}{const d=g=>{const x=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];x.length&&(g.features=x,l.call(this,g),delete g.features)};return{layer:r,listener:l,delegates:{[y]:d}}}}on(y,r,l){if(l===void 0)return super.on(y,r);const d=this._createDelegatedListener(y,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(d);for(const g in d.delegates)this.on(g,d.delegates[g]);return this}once(y,r,l){if(l===void 0)return super.once(y,r);const d=this._createDelegatedListener(y,r,l);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(y,r,l){return l===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(d=>{const g=this._delegatedListeners[y];for(let x=0;x<g.length;x++){const I=g[x];if(I.layer===r&&I.listener===l){for(const k in I.delegates)this.off(k,I.delegates[k]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let l;const d=y instanceof u.P||Array.isArray(y),g=d?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:y)||{},g instanceof u.P||typeof g[0]=="number")l=[u.P.convert(g)];else{const x=u.P.convert(g[0]),I=u.P.convert(g[1]);l=[x,new u.P(I.x,x.y),I,new u.P(x.x,I.y),x]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new nl(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,l):this.style.loadJSON(y,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new nl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const l=this._requestManager.transformRequest(y,"Style");u.h(l,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new u.j(d))})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(l){u.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&r.reload();for(const l in this.style._layers){const d=this.style._layers[l];d.type==="hillshade"&&d.source===y.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Nt(this.painter,r,y),this.painter.renderToTexture=new Cu(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const l=y[r]._tiles;for(const d in l){const g=l[d];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,l={}){const{pixelRatio:d=1,sdf:g=!1,stretchX:x,stretchY:I,content:k,textFitWidth:R,textFitHeight:H}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:J,height:re,data:pe}=r,Ie=r;return this.style.addImage(y,{data:new u.R({width:J,height:re},new Uint8Array(pe)),pixelRatio:d,stretchX:x,stretchY:I,content:k,textFitWidth:R,textFitHeight:H,sdf:g,version:0,userImage:Ie}),Ie.onAdd&&Ie.onAdd(this,y),this}}{const{width:J,height:re,data:pe}=b.getImageData(r);this.style.addImage(y,{data:new u.R({width:J,height:re},pe),pixelRatio:d,stretchX:x,stretchY:I,content:k,textFitWidth:R,textFitHeight:H,sdf:g,version:0})}}updateImage(y,r){const l=this.style.getImage(y);if(!l)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||u.b(r)?b.getImageData(r):r,{width:g,height:x,data:I}=d;if(g===void 0||x===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==l.data.width||x!==l.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(r instanceof HTMLImageElement||u.b(r));return l.data.replace(I,k),this.style.updateImage(y,l),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return $.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,l){return this.style.setLayerZoomRange(y,r,l),this._update(!0)}setFilter(y,r,l={}){return this.style.setFilter(y,r,l),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,l,d={}){return this.style.setPaintProperty(y,r,l,d),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,l,d={}){return this.style.setLayoutProperty(y,r,l,d),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,l,d=>{d||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,l=>{l||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=T.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),d=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],d);const g=this._controlContainer=T.create("div","maplibregl-control-container",y),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{x[I]=T.create("div",`maplibregl-ctrl-${I} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,r,l){this._canvas.width=Math.floor(l*y),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:y},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const l=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!l){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new gl(l,this.transform),F.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=b.now();this.style.zoomHistory.update(g,x);const I=new u.a8(g,{now:x,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=I.crossFadingFactor();k===1&&k===this._crossFadingFactor||(l=!0,this._crossFadingFactor=k),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bc.mark(u.bd.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,u.bc.mark(u.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bc.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(y=>{u.bc.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return jt}getCameraTargetElevation(){return this.transform.elevation}},f.MapMouseEvent=Sn,f.MapTouchEvent=Pn,f.MapWheelEvent=Zn,f.Marker=ys,f.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),l=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{const d=this._map._getUIString(`NavigationControl.${l}`);r.title=d,r.setAttribute("aria-label",d)},this.options=u.e({},by,y),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const l=T.create("button",y,this._container);return l.type="button",l.addEventListener("click",r),l}},f.Popup=class extends u.E{constructor(y){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const k of this.options.className.split(" "))this._container.classList.add(k);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?uf(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const x=Iu(this.options.offset);if(!g){const k=this._container.offsetWidth,R=this._container.offsetHeight;let H;H=d.y+x.bottom.y<R?["top"]:d.y>this._map.transform.height-R?["bottom"]:[],d.x<k/2?H.push("left"):d.x>this._map.transform.width-k/2&&H.push("right"),g=H.length===0?"bottom":H.join("-")}let I=d.add(x[g]);this.options.subpixelPositioning||(I=I.round()),T.setTransform(this._container,`${cf[g]} translate(${I.x}px,${I.y}px)`),mp(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Sy),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=y;d=l.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Jo);y&&y.focus()}},f.RasterDEMTileSource=an,f.RasterTileSource=wn,f.ScaleControl=class{constructor(y){this._onMove=()=>{hf(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,hf(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},gp),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=tf,f.Style=nl,f.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Jh,f.TwoFingersTouchRotateHandler=Yh,f.TwoFingersTouchZoomHandler=vl,f.TwoFingersTouchZoomRotateHandler=_l,f.VectorTileSource=nt,f.VideoSource=D,f.addSourceType=(y,r)=>u._(void 0,void 0,void 0,function*(){if(et(y))throw new Error(`A source type called "${y}" already exists.`);((l,d)=>{Xe[l]=d})(y,r)}),f.clearPrewarmedResources=function(){const y=Ze;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Ne),Ze=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return U().getRTLTextPluginStatus()},f.getVersion=function(){return Xt},f.getWorkerCount=function(){return Ae.workerCount},f.getWorkerUrl=function(){return u.a.WORKER_URL},f.importScriptInWorkers=function(y){return wt().broadcast("IS",y)},f.prewarm=function(){rt().acquire(Ne)},f.setMaxParallelImageRequests=function(y){u.a.MAX_PARALLEL_IMAGE_REQUESTS=y},f.setRTLTextPlugin=function(y,r){return U().setRTLTextPlugin(y,r)},f.setWorkerCount=function(y){Ae.workerCount=y},f.setWorkerUrl=function(y){u.a.WORKER_URL=y}});var m=i;return m})})(UC);var VC=UC.exports;const GC=Vd(VC),f4=Nk({__proto__:null,default:GC},[VC]),d4="modulepreload",p4=function(e){return"/osm-address-editor-vite/"+e},B2={},m4=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const m=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),u=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));c=Promise.all(i.map(S=>{if(S=p4(S),S in B2)return;B2[S]=!0;const C=S.endsWith(".css"),P=C?'[rel="stylesheet"]':"";if(!!a)for(let F=m.length-1;F>=0;F--){const B=m[F];if(B.href===S&&(!C||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${P}`))return;const T=document.createElement("link");if(T.rel=C?"stylesheet":d4,C||(T.as="script",T.crossOrigin=""),T.href=S,u&&T.setAttribute("nonce",u),document.head.appendChild(T),C)return new Promise((F,B)=>{T.addEventListener("load",F),T.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${S}`)))})}))}return c.then(()=>t()).catch(m=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=m,window.dispatchEvent(f),!f.defaultPrevented)throw m})},g4=vt.createContext(null);function y4(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,m=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===m}function jo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!jo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!jo(e[c],t[c]))return!1;return!0}return!1}function v4(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function N2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();jo(i,a)||t.setProjection(i)}function U2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function $2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const _4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function V2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const m=t[a.ref];if(m){c=c||Object.assign({},a),delete c.ref;for(const f of _4)f in m&&(c[f]=m[f])}return c||a});return{...e,layers:i}}var G2={};const H2={version:8,sources:{},layers:[]},W2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},G0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Z2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},x4=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],w4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ih{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const m=this.props[Z2[c.type]];m?m(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const m=this.props[W2[c.type]];m&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),m(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const m=this.props[G0[c.type]];m&&m(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),m=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||m&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Ih.savedMaps.pop();if(!a)return null;const c=a.map,m=c.getContainer();for(i.className=m.className;m.childNodes.length>0;)i.appendChild(m.childNodes[0]);c._container=i;const f=c._resizeObserver;f&&(f.disconnect(),f.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=H2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||b4()||null,container:t,style:V2(a)},m=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[m.longitude||0,m.latitude||0],zoom:m.zoom||0,pitch:m.pitch||0,bearing:m.bearing||0}),i.gl){const P=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=P,i.gl)}const f=new this._MapClass(c);m.padding&&f.setPadding(m.padding),i.cursor&&(f.getCanvas().style.cursor=i.cursor),this._createShadowTransform(f);const u=f._render;f._render=P=>{this._inRender=!0,u.call(f,P),this._inRender=!1};const S=f._renderTaskQueue.run;f._renderTaskQueue.run=P=>{S.call(f._renderTaskQueue,P),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const C=f.fire;f.fire=this._fireEvent.bind(this,C),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),N2(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const P in W2)f.on(P,this._onPointerEvent);for(const P in G0)f.on(P,this._onCameraEvent);for(const P in Z2)f.on(P,this._onEvent);this._map=f}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Ih.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=v4(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:m,pitch:f,bearing:u}=c,S=a.isMoving();S&&(c.cameraElevationReference="sea");const C=$2(c,{...U2(a.transform),...t});if(S&&(c.cameraElevationReference="ground"),C&&i){const P=this._deferredEvents;P.move=!0,P.zoom||(P.zoom=m!==c.zoom),P.rotate||(P.rotate=u!==c.bearing),P.pitch||(P.pitch=f!==c.pitch)}return S||$2(a.transform,t),C}_updateSettings(t,i){const a=this._map;let c=!1;for(const m of x4)if(m in t&&!jo(t[m],i[m])){c=!0;const f=a[`set${m[0].toUpperCase()}${m.slice(1)}`];f==null||f.call(a,t[m])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=H2,styleDiffing:c=!0}=t,m={diff:c};return"localIdeographFontFamily"in t&&(m.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(V2(a),m),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!jo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!jo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!jo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const m=this._map;let f=!1;for(const u of w4){const S=(a=t[u])!==null&&a!==void 0?a:!0,C=(c=i[u])!==null&&c!==void 0?c:!0;jo(S,C)||(f=!0,S?m[u].enable(S):m[u].disable())}return f}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const m=t.type,f=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),S=u.length>0;!S&&f&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,S&&!f&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=m}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,m=c.transform,f=typeof i=="string"?i:i.type;return f==="move"&&this._updateViewState(this.props,!1),f in G0&&(typeof i=="object"&&(i.viewState=U2(m)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=m,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{N2(this._renderTransform,i),t.transform=i}}}Ih.savedMaps=[];function b4(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||G2.MapboxAccessToken}catch{}try{e=e||G2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const S4=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function E4(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const m=t.project(a);return t.transform=c,m},unproject:a=>{const c=t.transform;t.transform=e.transform;const m=t.unproject(a);return t.transform=c,m},queryTerrainElevation:(a,c)=>{const m=t.transform;t.transform=e.transform;const f=t.queryTerrainElevation(a,c);return t.transform=m,f},queryRenderedFeatures:(a,c)=>{const m=t.transform;t.transform=e.transform;const f=t.queryRenderedFeatures(a,c);return t.transform=m,f}};for(const a of T4(t))!(a in i)&&!S4.includes(a)&&(i[a]=t[a].bind(t));return i}function T4(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const C4=typeof document<"u"?vt.useLayoutEffect:vt.useEffect,I4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function A4(e,t){for(const a of I4)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Lh=vt.createContext(null);function P4(e,t,i){const a=vt.useContext(g4),[c,m]=vt.useState(null),f=vt.useRef(),{current:u}=vt.useRef({mapLib:null,map:null});vt.useEffect(()=>{const P=e.mapLib;let b=!0,T;return Promise.resolve(P||i).then(F=>{if(!b)return;if(!F)throw new Error("Invalid mapLib");const B="Map"in F?F:F.default;if(!B.Map)throw new Error("Invalid mapLib");if(A4(B,e),!B.supported||B.supported(e))e.reuseMaps&&(T=Ih.reuse(e,f.current)),T||(T=new Ih(B.Map,e,f.current)),u.map=E4(T),u.mapLib=B,m(T),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(F=>{const{onError:B}=e;B?B({type:"error",target:null,originalEvent:null,error:F}):console.error(F)}),()=>{b=!1,T&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),C4(()=>{c&&c.setProps(e)}),vt.useImperativeHandle(t,()=>u.map,[c]);const S=vt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),C={height:"100%"};return vt.createElement("div",{id:e.id,ref:f,style:S},c&&vt.createElement(Lh.Provider,{value:u},vt.createElement("div",{"mapboxgl-children":"",style:C},e.children)))}const k4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ic(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!k4.test(a)?i[a]=`${c}px`:i[a]=c}}function M4(e,t){const{map:i,mapLib:a}=vt.useContext(Lh),c=vt.useRef({props:e});c.current.props=e;const m=vt.useMemo(()=>{let O=!1;vt.Children.forEach(e.children,q=>{q&&(O=!0)});const he={...e,element:O?document.createElement("div"):null},Y=new a.Marker(he);return Y.setLngLat([e.longitude,e.latitude]),Y.getElement().addEventListener("click",q=>{var $,se;(se=($=c.current.props).onClick)===null||se===void 0||se.call($,{type:"click",target:Y,originalEvent:q})}),Y.on("dragstart",q=>{var $,se;const X=q;X.lngLat=m.getLngLat(),(se=($=c.current.props).onDragStart)===null||se===void 0||se.call($,X)}),Y.on("drag",q=>{var $,se;const X=q;X.lngLat=m.getLngLat(),(se=($=c.current.props).onDrag)===null||se===void 0||se.call($,X)}),Y.on("dragend",q=>{var $,se;const X=q;X.lngLat=m.getLngLat(),(se=($=c.current.props).onDragEnd)===null||se===void 0||se.call($,X)}),Y},[]);vt.useEffect(()=>(m.addTo(i.getMap()),()=>{m.remove()}),[]);const{longitude:f,latitude:u,offset:S,style:C,draggable:P=!1,popup:b=null,rotation:T=0,rotationAlignment:F="auto",pitchAlignment:B="auto"}=e;return vt.useEffect(()=>{ic(m.getElement(),C)},[C]),vt.useImperativeHandle(t,()=>m,[]),(m.getLngLat().lng!==f||m.getLngLat().lat!==u)&&m.setLngLat([f,u]),S&&!y4(m.getOffset(),S)&&m.setOffset(S),m.isDraggable()!==P&&m.setDraggable(P),m.getRotation()!==T&&m.setRotation(T),m.getRotationAlignment()!==F&&m.setRotationAlignment(F),m.getPitchAlignment()!==B&&m.setPitchAlignment(B),m.getPopup()!==b&&m.setPopup(b),nx.createPortal(e.children,m.getElement())}const z4=vt.memo(vt.forwardRef(M4));function q2(e){return new Set(e?e.trim().split(/\s+/):[])}function R4(e,t){const{map:i,mapLib:a}=vt.useContext(Lh),c=vt.useMemo(()=>document.createElement("div"),[]),m=vt.useRef({props:e});m.current.props=e;const f=vt.useMemo(()=>{const u={...e},S=new a.Popup(u);return S.setLngLat([e.longitude,e.latitude]),S.once("open",C=>{var P,b;(b=(P=m.current.props).onOpen)===null||b===void 0||b.call(P,C)}),S},[]);if(vt.useEffect(()=>{const u=S=>{var C,P;(P=(C=m.current.props).onClose)===null||P===void 0||P.call(C,S)};return f.on("close",u),f.setDOMContent(c).addTo(i.getMap()),()=>{f.off("close",u),f.isOpen()&&f.remove()}},[]),vt.useEffect(()=>{ic(f.getElement(),e.style)},[e.style]),vt.useImperativeHandle(t,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!jo(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const u=q2(f.options.className),S=q2(e.className);for(const C of u)S.has(C)||f.removeClassName(C);for(const C of S)u.has(C)||f.addClassName(C);f.options.className=e.className}return nx.createPortal(e.children,c)}vt.memo(vt.forwardRef(R4));function Xd(e,t,i,a){const c=vt.useContext(Lh),m=vt.useMemo(()=>e(c),[]);return vt.useEffect(()=>{const f=a||i||t,u=typeof t=="function"&&typeof i=="function"?t:null,S=typeof i=="function"?i:typeof t=="function"?t:null,{map:C}=c;return C.hasControl(m)||(C.addControl(m,f==null?void 0:f.position),u&&u(c)),()=>{S&&S(c),C.hasControl(m)&&C.removeControl(m)}},[]),m}function F4(e){const t=Xd(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return vt.useEffect(()=>{ic(t._container,e.style)},[e.style]),null}vt.memo(F4);function O4(e){const t=Xd(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return vt.useEffect(()=>{ic(t._controlContainer,e.style)},[e.style]),null}vt.memo(O4);function L4(e,t){const i=vt.useRef({props:e}),a=Xd(({mapLib:c})=>{const m=new c.GeolocateControl(e),f=m._setupUI;return m._setupUI=u=>{m._container.hasChildNodes()||f(u)},m.on("geolocate",u=>{var S,C;(C=(S=i.current.props).onGeolocate)===null||C===void 0||C.call(S,u)}),m.on("error",u=>{var S,C;(C=(S=i.current.props).onError)===null||C===void 0||C.call(S,u)}),m.on("outofmaxbounds",u=>{var S,C;(C=(S=i.current.props).onOutOfMaxBounds)===null||C===void 0||C.call(S,u)}),m.on("trackuserlocationstart",u=>{var S,C;(C=(S=i.current.props).onTrackUserLocationStart)===null||C===void 0||C.call(S,u)}),m.on("trackuserlocationend",u=>{var S,C;(C=(S=i.current.props).onTrackUserLocationEnd)===null||C===void 0||C.call(S,u)}),m},{position:e.position});return i.current.props=e,vt.useImperativeHandle(t,()=>a,[]),vt.useEffect(()=>{ic(a._container,e.style)},[e.style]),null}const j4=vt.memo(vt.forwardRef(L4));function D4(e){const t=Xd(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return vt.useEffect(()=>{ic(t._container,e.style)},[e.style]),null}const B4=vt.memo(D4);function N4(e){const t=Xd(({mapLib:m})=>new m.ScaleControl(e),{position:e.position}),i=vt.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),vt.useEffect(()=>{ic(t._container,c)},[c]),null}vt.memo(N4);function gg(e,t){if(!e)throw new Error(t)}function U4(e,t,i,a){if(gg(i.id===a.id,"layer id changed"),gg(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:m={},filter:f,minzoom:u,maxzoom:S,beforeId:C}=i;if(C!==a.beforeId&&e.moveLayer(t,C),c!==a.layout){const P=a.layout||{};for(const b in c)jo(c[b],P[b])||e.setLayoutProperty(t,b,c[b]);for(const b in P)c.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(m!==a.paint){const P=a.paint||{};for(const b in m)jo(m[b],P[b])||e.setPaintProperty(t,b,m[b]);for(const b in P)m.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}jo(f,a.filter)||e.setFilter(t,f),(u!==a.minzoom||S!==a.maxzoom)&&e.setLayerZoomRange(t,u,S)}function $4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let V4=0;function G4(e){const t=vt.useContext(Lh).map.getMap(),i=vt.useRef(e),[,a]=vt.useState(0),c=vt.useMemo(()=>e.id||`jsx-layer-${V4++}`,[]);if(vt.useEffect(()=>{if(t){const f=()=>a(u=>u+1);return t.on("styledata",f),f(),()=>{t.off("styledata",f),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{U4(t,c,e,i.current)}catch(f){console.warn(f)}else $4(t,c,e);return i.current=e,null}let H4=0;function W4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function Z4(e,t,i){gg(t.id===i.id,"source id changed"),gg(t.type===i.type,"source type changed");let a="",c=0;for(const f in t)f!=="children"&&f!=="id"&&!jo(i[f],t[f])&&(a=f,c++);if(!c)return;const m=t.type;if(m==="geojson")e.setData(t.data);else if(m==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function q4(e){const t=vt.useContext(Lh).map.getMap(),i=vt.useRef(e),[,a]=vt.useState(0),c=vt.useMemo(()=>e.id||`jsx-source-${H4++}`,[]);vt.useEffect(()=>{if(t){const f=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",f),f(),()=>{var u;if(t.off("styledata",f),t.style&&t.style._loaded&&t.getSource(c)){const S=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(S)for(const C of S)C.source===c&&t.removeLayer(C.id);t.removeSource(c)}}}},[t]);let m=t&&t.style&&t.getSource(c);return m?Z4(m,e,i.current):m=W4(t,c,e),i.current=e,m&&vt.Children.map(e.children,f=>f&&vt.cloneElement(f,{source:c}))||null}const X4=m4(()=>Promise.resolve().then(()=>f4),void 0),K4=vt.forwardRef(function(t,i){return P4(t,i,X4)}),Y4=z4,J4=B4,Q4=j4,ez=G4,tz=q4;function X2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Yt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?X2(Object(i),!0).forEach(function(a){ni(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):X2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}function nz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function rz(e,t,i){return t&&K2(e.prototype,t),i&&K2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ni(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function rx(e,t){return oz(e)||az(e,t)||HC(e,t)||uz()}function Kd(e){return iz(e)||sz(e)||HC(e)||lz()}function iz(e){if(Array.isArray(e))return m_(e)}function oz(e){if(Array.isArray(e))return e}function sz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function az(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,m=!1,f,u;try{for(i=i.call(e);!(c=(f=i.next()).done)&&(a.push(f.value),!(t&&a.length===t));c=!0);}catch(S){m=!0,u=S}finally{try{!c&&i.return!=null&&i.return()}finally{if(m)throw u}}return a}}function HC(e,t){if(e){if(typeof e=="string")return m_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m_(e,t)}}function m_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function lz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y2=function(){},ix={},WC={},ZC=null,qC={mark:Y2,measure:Y2};try{typeof window<"u"&&(ix=window),typeof document<"u"&&(WC=document),typeof MutationObserver<"u"&&(ZC=MutationObserver),typeof performance<"u"&&(qC=performance)}catch{}var cz=ix.navigator||{},J2=cz.userAgent,Q2=J2===void 0?"":J2,Ql=ix,dr=WC,eS=ZC,om=qC;Ql.document;var Qa=!!dr.documentElement&&!!dr.head&&typeof dr.addEventListener=="function"&&typeof dr.createElement=="function",XC=~Q2.indexOf("MSIE")||~Q2.indexOf("Trident/"),sm,am,lm,um,cm,qa="___FONT_AWESOME___",g_=16,KC="fa",YC="svg-inline--fa",Ju="data-fa-i2svg",y_="data-fa-pseudo-element",hz="data-fa-pseudo-element-pending",ox="data-prefix",sx="data-icon",tS="fontawesome-i2svg",fz="async",dz=["HTML","HEAD","STYLE","SCRIPT"],JC=function(){try{return!0}catch{return!1}}(),hr="classic",Lr="sharp",ax=[hr,Lr];function Yd(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[hr]}})}var Rd=Yd((sm={},ni(sm,hr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ni(sm,Lr,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),sm)),Fd=Yd((am={},ni(am,hr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ni(am,Lr,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),am)),Od=Yd((lm={},ni(lm,hr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ni(lm,Lr,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),lm)),pz=Yd((um={},ni(um,hr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ni(um,Lr,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),um)),mz=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,QC="fa-layers-text",gz=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,yz=Yd((cm={},ni(cm,hr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ni(cm,Lr,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),cm)),eI=[1,2,3,4,5,6,7,8,9,10],vz=eI.concat([11,12,13,14,15,16,17,18,19,20]),_z=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Vu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Ld=new Set;Object.keys(Fd[hr]).map(Ld.add.bind(Ld));Object.keys(Fd[Lr]).map(Ld.add.bind(Ld));var xz=[].concat(ax,Kd(Ld),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Vu.GROUP,Vu.SWAP_OPACITY,Vu.PRIMARY,Vu.SECONDARY]).concat(eI.map(function(e){return"".concat(e,"x")})).concat(vz.map(function(e){return"w-".concat(e)})),ud=Ql.FontAwesomeConfig||{};function wz(e){var t=dr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function bz(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(dr&&typeof dr.querySelector=="function"){var Sz=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];Sz.forEach(function(e){var t=rx(e,2),i=t[0],a=t[1],c=bz(wz(i));c!=null&&(ud[a]=c)})}var tI={styleDefault:"solid",familyDefault:"classic",cssPrefix:KC,replacementClass:YC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ud.familyPrefix&&(ud.cssPrefix=ud.familyPrefix);var Ah=Yt(Yt({},tI),ud);Ah.autoReplaceSvg||(Ah.observeMutations=!1);var rn={};Object.keys(tI).forEach(function(e){Object.defineProperty(rn,e,{enumerable:!0,set:function(i){Ah[e]=i,cd.forEach(function(a){return a(rn)})},get:function(){return Ah[e]}})});Object.defineProperty(rn,"familyPrefix",{enumerable:!0,set:function(t){Ah.cssPrefix=t,cd.forEach(function(i){return i(rn)})},get:function(){return Ah.cssPrefix}});Ql.FontAwesomeConfig=rn;var cd=[];function Ez(e){return cd.push(e),function(){cd.splice(cd.indexOf(e),1)}}var Rl=g_,aa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Tz(e){if(!(!e||!Qa)){var t=dr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=dr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var m=i[c],f=(m.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(f)>-1&&(a=m)}return dr.head.insertBefore(t,a),e}}var Cz="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function jd(){for(var e=12,t="";e-- >0;)t+=Cz[Math.random()*62|0];return t}function jh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function lx(e){return e.classList?jh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function nI(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Iz(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(nI(e[i]),'" ')},"").trim()}function uy(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function ux(e){return e.size!==aa.size||e.x!==aa.x||e.y!==aa.y||e.rotate!==aa.rotate||e.flipX||e.flipY}function Az(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},m="translate(".concat(t.x*32,", ").concat(t.y*32,") "),f="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),S={transform:"".concat(m," ").concat(f," ").concat(u)},C={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:S,path:C}}function Pz(e){var t=e.transform,i=e.width,a=i===void 0?g_:i,c=e.height,m=c===void 0?g_:c,f=e.startCentered,u=f===void 0?!1:f,S="";return u&&XC?S+="translate(".concat(t.x/Rl-a/2,"em, ").concat(t.y/Rl-m/2,"em) "):u?S+="translate(calc(-50% + ".concat(t.x/Rl,"em), calc(-50% + ").concat(t.y/Rl,"em)) "):S+="translate(".concat(t.x/Rl,"em, ").concat(t.y/Rl,"em) "),S+="scale(".concat(t.size/Rl*(t.flipX?-1:1),", ").concat(t.size/Rl*(t.flipY?-1:1),") "),S+="rotate(".concat(t.rotate,"deg) "),S}var kz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function rI(){var e=KC,t=YC,i=rn.cssPrefix,a=rn.replacementClass,c=kz;if(i!==e||a!==t){var m=new RegExp("\\.".concat(e,"\\-"),"g"),f=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");c=c.replace(m,".".concat(i,"-")).replace(f,"--".concat(i,"-")).replace(u,".".concat(a))}return c}var nS=!1;function H0(){rn.autoAddCss&&!nS&&(Tz(rI()),nS=!0)}var Mz={mixout:function(){return{dom:{css:rI,insertCss:H0}}},hooks:function(){return{beforeDOMElementCreation:function(){H0()},beforeI2svg:function(){H0()}}}},Xa=Ql||{};Xa[qa]||(Xa[qa]={});Xa[qa].styles||(Xa[qa].styles={});Xa[qa].hooks||(Xa[qa].hooks={});Xa[qa].shims||(Xa[qa].shims=[]);var As=Xa[qa],iI=[],zz=function e(){dr.removeEventListener("DOMContentLoaded",e),vg=1,iI.map(function(t){return t()})},vg=!1;Qa&&(vg=(dr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(dr.readyState),vg||dr.addEventListener("DOMContentLoaded",zz));function Rz(e){Qa&&(vg?setTimeout(e,0):iI.push(e))}function Jd(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,m=c===void 0?[]:c;return typeof e=="string"?nI(e):"<".concat(t," ").concat(Iz(a),">").concat(m.map(Jd).join(""),"</").concat(t,">")}function rS(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var Fz=function(t,i){return function(a,c,m,f){return t.call(i,a,c,m,f)}},W0=function(t,i,a,c){var m=Object.keys(t),f=m.length,u=c!==void 0?Fz(i,c):i,S,C,P;for(a===void 0?(S=1,P=t[m[0]]):(S=0,P=a);S<f;S++)C=m[S],P=u(P,t[C],C,t);return P};function Oz(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var m=e.charCodeAt(i++);(m&64512)==56320?t.push(((c&1023)<<10)+(m&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function v_(e){var t=Oz(e);return t.length===1?t[0].toString(16):null}function Lz(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function iS(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function __(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,m=iS(t);typeof As.hooks.addPack=="function"&&!c?As.hooks.addPack(e,iS(t)):As.styles[e]=Yt(Yt({},As.styles[e]||{}),m),e==="fas"&&__("fa",t)}var hm,fm,dm,sh=As.styles,jz=As.shims,Dz=(hm={},ni(hm,hr,Object.values(Od[hr])),ni(hm,Lr,Object.values(Od[Lr])),hm),cx=null,oI={},sI={},aI={},lI={},uI={},Bz=(fm={},ni(fm,hr,Object.keys(Rd[hr])),ni(fm,Lr,Object.keys(Rd[Lr])),fm);function Nz(e){return~xz.indexOf(e)}function Uz(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!Nz(c)?c:null}var cI=function(){var t=function(m){return W0(sh,function(f,u,S){return f[S]=W0(u,m,{}),f},{})};oI=t(function(c,m,f){if(m[3]&&(c[m[3]]=f),m[2]){var u=m[2].filter(function(S){return typeof S=="number"});u.forEach(function(S){c[S.toString(16)]=f})}return c}),sI=t(function(c,m,f){if(c[f]=f,m[2]){var u=m[2].filter(function(S){return typeof S=="string"});u.forEach(function(S){c[S]=f})}return c}),uI=t(function(c,m,f){var u=m[2];return c[f]=f,u.forEach(function(S){c[S]=f}),c});var i="far"in sh||rn.autoFetchSvg,a=W0(jz,function(c,m){var f=m[0],u=m[1],S=m[2];return u==="far"&&!i&&(u="fas"),typeof f=="string"&&(c.names[f]={prefix:u,iconName:S}),typeof f=="number"&&(c.unicodes[f.toString(16)]={prefix:u,iconName:S}),c},{names:{},unicodes:{}});aI=a.names,lI=a.unicodes,cx=cy(rn.styleDefault,{family:rn.familyDefault})};Ez(function(e){cx=cy(e.styleDefault,{family:rn.familyDefault})});cI();function hx(e,t){return(oI[e]||{})[t]}function $z(e,t){return(sI[e]||{})[t]}function Gu(e,t){return(uI[e]||{})[t]}function hI(e){return aI[e]||{prefix:null,iconName:null}}function Vz(e){var t=lI[e],i=hx("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function eu(){return cx}var fx=function(){return{prefix:null,iconName:null,rest:[]}};function cy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?hr:i,c=Rd[a][e],m=Fd[a][e]||Fd[a][c],f=e in As.styles?e:null;return m||f||null}var oS=(dm={},ni(dm,hr,Object.keys(Od[hr])),ni(dm,Lr,Object.keys(Od[Lr])),dm);function hy(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,c=a===void 0?!1:a,m=(t={},ni(t,hr,"".concat(rn.cssPrefix,"-").concat(hr)),ni(t,Lr,"".concat(rn.cssPrefix,"-").concat(Lr)),t),f=null,u=hr;(e.includes(m[hr])||e.some(function(C){return oS[hr].includes(C)}))&&(u=hr),(e.includes(m[Lr])||e.some(function(C){return oS[Lr].includes(C)}))&&(u=Lr);var S=e.reduce(function(C,P){var b=Uz(rn.cssPrefix,P);if(sh[P]?(P=Dz[u].includes(P)?pz[u][P]:P,f=P,C.prefix=P):Bz[u].indexOf(P)>-1?(f=P,C.prefix=cy(P,{family:u})):b?C.iconName=b:P!==rn.replacementClass&&P!==m[hr]&&P!==m[Lr]&&C.rest.push(P),!c&&C.prefix&&C.iconName){var T=f==="fa"?hI(C.iconName):{},F=Gu(C.prefix,C.iconName);T.prefix&&(f=null),C.iconName=T.iconName||F||C.iconName,C.prefix=T.prefix||C.prefix,C.prefix==="far"&&!sh.far&&sh.fas&&!rn.autoFetchSvg&&(C.prefix="fas")}return C},fx());return(e.includes("fa-brands")||e.includes("fab"))&&(S.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(S.prefix="fad"),!S.prefix&&u===Lr&&(sh.fass||rn.autoFetchSvg)&&(S.prefix="fass",S.iconName=Gu(S.prefix,S.iconName)||S.iconName),(S.prefix==="fa"||f==="fa")&&(S.prefix=eu()||"fas"),S}var Gz=function(){function e(){nz(this,e),this.definitions={}}return rz(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),m=0;m<a;m++)c[m]=arguments[m];var f=c.reduce(this._pullDefinitions,{});Object.keys(f).forEach(function(u){i.definitions[u]=Yt(Yt({},i.definitions[u]||{}),f[u]),__(u,f[u]);var S=Od[hr][u];S&&__(S,f[u]),cI()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(m){var f=c[m],u=f.prefix,S=f.iconName,C=f.icon,P=C[2];i[u]||(i[u]={}),P.length>0&&P.forEach(function(b){typeof b=="string"&&(i[u][b]=C)}),i[u][S]=C}),i}}]),e}(),sS=[],ah={},yh={},Hz=Object.keys(yh);function Wz(e,t){var i=t.mixoutsTo;return sS=e,ah={},Object.keys(yh).forEach(function(a){Hz.indexOf(a)===-1&&delete yh[a]}),sS.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(f){typeof c[f]=="function"&&(i[f]=c[f]),yg(c[f])==="object"&&Object.keys(c[f]).forEach(function(u){i[f]||(i[f]={}),i[f][u]=c[f][u]})}),a.hooks){var m=a.hooks();Object.keys(m).forEach(function(f){ah[f]||(ah[f]=[]),ah[f].push(m[f])})}a.provides&&a.provides(yh)}),i}function x_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var m=ah[e]||[];return m.forEach(function(f){t=f.apply(null,[t].concat(a))}),t}function Qu(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=ah[e]||[];c.forEach(function(m){m.apply(null,i)})}function Ka(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return yh[e]?yh[e].apply(null,t):void 0}function w_(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||eu();if(t)return t=Gu(i,t)||t,rS(fI.definitions,i,t)||rS(As.styles,i,t)}var fI=new Gz,Zz=function(){rn.autoReplaceSvg=!1,rn.observeMutations=!1,Qu("noAuto")},qz={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qa?(Qu("beforeI2svg",t),Ka("pseudoElements2svg",t),Ka("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;rn.autoReplaceSvg===!1&&(rn.autoReplaceSvg=!0),rn.observeMutations=!0,Rz(function(){Kz({autoReplaceSvgRoot:i}),Qu("watch",t)})}},Xz={icon:function(t){if(t===null)return null;if(yg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Gu(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=cy(t[0]);return{prefix:a,iconName:Gu(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(rn.cssPrefix,"-"))>-1||t.match(mz))){var c=hy(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||eu(),iconName:Gu(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var m=eu();return{prefix:m,iconName:Gu(m,t)||t}}}},Vo={noAuto:Zz,config:rn,dom:qz,parse:Xz,library:fI,findIconDefinition:w_,toHtml:Jd},Kz=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?dr:i;(Object.keys(As.styles).length>0||rn.autoFetchSvg)&&Qa&&rn.autoReplaceSvg&&Vo.dom.i2svg({node:a})};function fy(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return Jd(a)})}}),Object.defineProperty(e,"node",{get:function(){if(Qa){var a=dr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function Yz(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,m=e.styles,f=e.transform;if(ux(f)&&i.found&&!a.found){var u=i.width,S=i.height,C={x:u/S/2,y:.5};c.style=uy(Yt(Yt({},m),{},{"transform-origin":"".concat(C.x+f.x/16,"em ").concat(C.y+f.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function Jz(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,m=e.symbol,f=m===!0?"".concat(t,"-").concat(rn.cssPrefix,"-").concat(i):m;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Yt(Yt({},c),{},{id:f}),children:a}]}]}function dx(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,m=e.iconName,f=e.transform,u=e.symbol,S=e.title,C=e.maskId,P=e.titleId,b=e.extra,T=e.watchable,F=T===void 0?!1:T,B=a.found?a:i,O=B.width,he=B.height,Y=c==="fak",q=[rn.replacementClass,m?"".concat(rn.cssPrefix,"-").concat(m):""].filter(function(j){return b.classes.indexOf(j)===-1}).filter(function(j){return j!==""||!!j}).concat(b.classes).join(" "),$={children:[],attributes:Yt(Yt({},b.attributes),{},{"data-prefix":c,"data-icon":m,class:q,role:b.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(O," ").concat(he)})},se=Y&&!~b.classes.indexOf("fa-fw")?{width:"".concat(O/he*16*.0625,"em")}:{};F&&($.attributes[Ju]=""),S&&($.children.push({tag:"title",attributes:{id:$.attributes["aria-labelledby"]||"title-".concat(P||jd())},children:[S]}),delete $.attributes.title);var X=Yt(Yt({},$),{},{prefix:c,iconName:m,main:i,mask:a,maskId:C,transform:f,symbol:u,styles:Yt(Yt({},se),b.styles)}),V=a.found&&i.found?Ka("generateAbstractMask",X)||{children:[],attributes:{}}:Ka("generateAbstractIcon",X)||{children:[],attributes:{}},E=V.children,L=V.attributes;return X.children=E,X.attributes=L,u?Jz(X):Yz(X)}function aS(e){var t=e.content,i=e.width,a=e.height,c=e.transform,m=e.title,f=e.extra,u=e.watchable,S=u===void 0?!1:u,C=Yt(Yt(Yt({},f.attributes),m?{title:m}:{}),{},{class:f.classes.join(" ")});S&&(C[Ju]="");var P=Yt({},f.styles);ux(c)&&(P.transform=Pz({transform:c,startCentered:!0,width:i,height:a}),P["-webkit-transform"]=P.transform);var b=uy(P);b.length>0&&(C.style=b);var T=[];return T.push({tag:"span",attributes:C,children:[t]}),m&&T.push({tag:"span",attributes:{class:"sr-only"},children:[m]}),T}function Qz(e){var t=e.content,i=e.title,a=e.extra,c=Yt(Yt(Yt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),m=uy(a.styles);m.length>0&&(c.style=m);var f=[];return f.push({tag:"span",attributes:c,children:[t]}),i&&f.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),f}var Z0=As.styles;function b_(e){var t=e[0],i=e[1],a=e.slice(4),c=rx(a,1),m=c[0],f=null;return Array.isArray(m)?f={tag:"g",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Vu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Vu.SECONDARY),fill:"currentColor",d:m[0]}},{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Vu.PRIMARY),fill:"currentColor",d:m[1]}}]}:f={tag:"path",attributes:{fill:"currentColor",d:m}},{found:!0,width:t,height:i,icon:f}}var eR={found:!1,width:512,height:512};function tR(e,t){!JC&&!rn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function S_(e,t){var i=t;return t==="fa"&&rn.styleDefault!==null&&(t=eu()),new Promise(function(a,c){if(Ka("missingIconAbstract"),i==="fa"){var m=hI(e)||{};e=m.iconName||e,t=m.prefix||t}if(e&&t&&Z0[t]&&Z0[t][e]){var f=Z0[t][e];return a(b_(f))}tR(e,t),a(Yt(Yt({},eR),{},{icon:rn.showMissingIcons&&e?Ka("missingIconAbstract")||{}:{}}))})}var lS=function(){},E_=rn.measurePerformance&&om&&om.mark&&om.measure?om:{mark:lS,measure:lS},Wf='FA "6.5.2"',nR=function(t){return E_.mark("".concat(Wf," ").concat(t," begins")),function(){return dI(t)}},dI=function(t){E_.mark("".concat(Wf," ").concat(t," ends")),E_.measure("".concat(Wf," ").concat(t),"".concat(Wf," ").concat(t," begins"),"".concat(Wf," ").concat(t," ends"))},px={begin:nR,end:dI},jm=function(){};function uS(e){var t=e.getAttribute?e.getAttribute(Ju):null;return typeof t=="string"}function rR(e){var t=e.getAttribute?e.getAttribute(ox):null,i=e.getAttribute?e.getAttribute(sx):null;return t&&i}function iR(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(rn.replacementClass)}function oR(){if(rn.autoReplaceSvg===!0)return Dm.replace;var e=Dm[rn.autoReplaceSvg];return e||Dm.replace}function sR(e){return dr.createElementNS("http://www.w3.org/2000/svg",e)}function aR(e){return dr.createElement(e)}function pI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?sR:aR:i;if(typeof e=="string")return dr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(f){c.setAttribute(f,e.attributes[f])});var m=e.children||[];return m.forEach(function(f){c.appendChild(pI(f,{ceFn:a}))}),c}function lR(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Dm={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(pI(c),i)}),i.getAttribute(Ju)===null&&rn.keepOriginalSource){var a=dr.createComment(lR(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~lx(i).indexOf(rn.replacementClass))return Dm.replace(t);var c=new RegExp("".concat(rn.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var m=a[0].attributes.class.split(" ").reduce(function(u,S){return S===rn.replacementClass||S.match(c)?u.toSvg.push(S):u.toNode.push(S),u},{toNode:[],toSvg:[]});a[0].attributes.class=m.toSvg.join(" "),m.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",m.toNode.join(" "))}var f=a.map(function(u){return Jd(u)}).join(`
`);i.setAttribute(Ju,""),i.innerHTML=f}};function cS(e){e()}function mI(e,t){var i=typeof t=="function"?t:jm;if(e.length===0)i();else{var a=cS;rn.mutateApproach===fz&&(a=Ql.requestAnimationFrame||cS),a(function(){var c=oR(),m=px.begin("mutate");e.map(c),m(),i()})}}var mx=!1;function gI(){mx=!0}function T_(){mx=!1}var _g=null;function hS(e){if(eS&&rn.observeMutations){var t=e.treeCallback,i=t===void 0?jm:t,a=e.nodeCallback,c=a===void 0?jm:a,m=e.pseudoElementsCallback,f=m===void 0?jm:m,u=e.observeMutationsRoot,S=u===void 0?dr:u;_g=new eS(function(C){if(!mx){var P=eu();jh(C).forEach(function(b){if(b.type==="childList"&&b.addedNodes.length>0&&!uS(b.addedNodes[0])&&(rn.searchPseudoElements&&f(b.target),i(b.target)),b.type==="attributes"&&b.target.parentNode&&rn.searchPseudoElements&&f(b.target.parentNode),b.type==="attributes"&&uS(b.target)&&~_z.indexOf(b.attributeName))if(b.attributeName==="class"&&rR(b.target)){var T=hy(lx(b.target)),F=T.prefix,B=T.iconName;b.target.setAttribute(ox,F||P),B&&b.target.setAttribute(sx,B)}else iR(b.target)&&c(b.target)})}}),Qa&&_g.observe(S,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function uR(){_g&&_g.disconnect()}function cR(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var m=c.split(":"),f=m[0],u=m.slice(1);return f&&u.length>0&&(a[f]=u.join(":").trim()),a},{})),i}function hR(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=hy(lx(e));return c.prefix||(c.prefix=eu()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=$z(c.prefix,e.innerText)||hx(c.prefix,v_(e.innerText))),!c.iconName&&rn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function fR(e){var t=jh(e.attributes).reduce(function(c,m){return c.name!=="class"&&c.name!=="style"&&(c[m.name]=m.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return rn.autoA11y&&(i?t["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(a||jd()):(t["aria-hidden"]="true",t.focusable="false")),t}function dR(){return{iconName:null,title:null,titleId:null,prefix:null,transform:aa,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function fS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=hR(e),a=i.iconName,c=i.prefix,m=i.rest,f=fR(e),u=x_("parseNodeAttributes",{},e),S=t.styleParser?cR(e):[];return Yt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:aa,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:m,styles:S,attributes:f}},u)}var pR=As.styles;function yI(e){var t=rn.autoReplaceSvg==="nest"?fS(e,{styleParser:!1}):fS(e);return~t.extra.classes.indexOf(QC)?Ka("generateLayersText",e,t):Ka("generateSvgReplacementMutation",e,t)}var tu=new Set;ax.map(function(e){tu.add("fa-".concat(e))});Object.keys(Rd[hr]).map(tu.add.bind(tu));Object.keys(Rd[Lr]).map(tu.add.bind(tu));tu=Kd(tu);function dS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Qa)return Promise.resolve();var i=dr.documentElement.classList,a=function(b){return i.add("".concat(tS,"-").concat(b))},c=function(b){return i.remove("".concat(tS,"-").concat(b))},m=rn.autoFetchSvg?tu:ax.map(function(P){return"fa-".concat(P)}).concat(Object.keys(pR));m.includes("fa")||m.push("fa");var f=[".".concat(QC,":not([").concat(Ju,"])")].concat(m.map(function(P){return".".concat(P,":not([").concat(Ju,"])")})).join(", ");if(f.length===0)return Promise.resolve();var u=[];try{u=jh(e.querySelectorAll(f))}catch{}if(u.length>0)a("pending"),c("complete");else return Promise.resolve();var S=px.begin("onTree"),C=u.reduce(function(P,b){try{var T=yI(b);T&&P.push(T)}catch(F){JC||F.name==="MissingIcon"&&console.error(F)}return P},[]);return new Promise(function(P,b){Promise.all(C).then(function(T){mI(T,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),S(),P()})}).catch(function(T){S(),b(T)})})}function mR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;yI(e).then(function(i){i&&mI([i],t)})}function gR(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:w_(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:w_(c||{})),e(a,Yt(Yt({},i),{},{mask:c}))}}var yR=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?aa:a,m=i.symbol,f=m===void 0?!1:m,u=i.mask,S=u===void 0?null:u,C=i.maskId,P=C===void 0?null:C,b=i.title,T=b===void 0?null:b,F=i.titleId,B=F===void 0?null:F,O=i.classes,he=O===void 0?[]:O,Y=i.attributes,q=Y===void 0?{}:Y,$=i.styles,se=$===void 0?{}:$;if(t){var X=t.prefix,V=t.iconName,E=t.icon;return fy(Yt({type:"icon"},t),function(){return Qu("beforeDOMElementCreation",{iconDefinition:t,params:i}),rn.autoA11y&&(T?q["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(B||jd()):(q["aria-hidden"]="true",q.focusable="false")),dx({icons:{main:b_(E),mask:S?b_(S.icon):{found:!1,width:null,height:null,icon:{}}},prefix:X,iconName:V,transform:Yt(Yt({},aa),c),symbol:f,title:T,maskId:P,titleId:B,extra:{attributes:q,styles:se,classes:he}})})}},vR={mixout:function(){return{icon:gR(yR)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=dS,i.nodeCallback=mR,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?dr:a,m=i.callback,f=m===void 0?function(){}:m;return dS(c,f)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,m=a.title,f=a.titleId,u=a.prefix,S=a.transform,C=a.symbol,P=a.mask,b=a.maskId,T=a.extra;return new Promise(function(F,B){Promise.all([S_(c,u),P.iconName?S_(P.iconName,P.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(O){var he=rx(O,2),Y=he[0],q=he[1];F([i,dx({icons:{main:Y,mask:q},prefix:u,iconName:c,transform:S,symbol:C,maskId:b,title:m,titleId:f,extra:T,watchable:!0})])}).catch(B)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,m=i.main,f=i.transform,u=i.styles,S=uy(u);S.length>0&&(c.style=S);var C;return ux(f)&&(C=Ka("generateAbstractTransformGrouping",{main:m,transform:f,containerWidth:m.width,iconWidth:m.width})),a.push(C||m.icon),{children:a,attributes:c}}}},_R={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,m=c===void 0?[]:c;return fy({type:"layer"},function(){Qu("beforeDOMElementCreation",{assembler:i,params:a});var f=[];return i(function(u){Array.isArray(u)?u.map(function(S){f=f.concat(S.abstract)}):f=f.concat(u.abstract)}),[{tag:"span",attributes:{class:["".concat(rn.cssPrefix,"-layers")].concat(Kd(m)).join(" ")},children:f}]})}}}},xR={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,m=c===void 0?null:c,f=a.classes,u=f===void 0?[]:f,S=a.attributes,C=S===void 0?{}:S,P=a.styles,b=P===void 0?{}:P;return fy({type:"counter",content:i},function(){return Qu("beforeDOMElementCreation",{content:i,params:a}),Qz({content:i.toString(),title:m,extra:{attributes:C,styles:b,classes:["".concat(rn.cssPrefix,"-layers-counter")].concat(Kd(u))}})})}}}},wR={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,m=c===void 0?aa:c,f=a.title,u=f===void 0?null:f,S=a.classes,C=S===void 0?[]:S,P=a.attributes,b=P===void 0?{}:P,T=a.styles,F=T===void 0?{}:T;return fy({type:"text",content:i},function(){return Qu("beforeDOMElementCreation",{content:i,params:a}),aS({content:i,transform:Yt(Yt({},aa),m),title:u,extra:{attributes:b,styles:F,classes:["".concat(rn.cssPrefix,"-layers-text")].concat(Kd(C))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,m=a.transform,f=a.extra,u=null,S=null;if(XC){var C=parseInt(getComputedStyle(i).fontSize,10),P=i.getBoundingClientRect();u=P.width/C,S=P.height/C}return rn.autoA11y&&!c&&(f.attributes["aria-hidden"]="true"),Promise.resolve([i,aS({content:i.innerHTML,width:u,height:S,transform:m,title:c,extra:f,watchable:!0})])}}},bR=new RegExp('"',"ug"),pS=[1105920,1112319];function SR(e){var t=e.replace(bR,""),i=Lz(t,0),a=i>=pS[0]&&i<=pS[1],c=t.length===2?t[0]===t[1]:!1;return{value:v_(c?t[0]:t),isSecondary:a||c}}function mS(e,t){var i="".concat(hz).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var m=jh(e.children),f=m.filter(function(E){return E.getAttribute(y_)===t})[0],u=Ql.getComputedStyle(e,t),S=u.getPropertyValue("font-family").match(gz),C=u.getPropertyValue("font-weight"),P=u.getPropertyValue("content");if(f&&!S)return e.removeChild(f),a();if(S&&P!=="none"&&P!==""){var b=u.getPropertyValue("content"),T=~["Sharp"].indexOf(S[2])?Lr:hr,F=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(S[2])?Fd[T][S[2].toLowerCase()]:yz[T][C],B=SR(b),O=B.value,he=B.isSecondary,Y=S[0].startsWith("FontAwesome"),q=hx(F,O),$=q;if(Y){var se=Vz(O);se.iconName&&se.prefix&&(q=se.iconName,F=se.prefix)}if(q&&!he&&(!f||f.getAttribute(ox)!==F||f.getAttribute(sx)!==$)){e.setAttribute(i,$),f&&e.removeChild(f);var X=dR(),V=X.extra;V.attributes[y_]=t,S_(q,F).then(function(E){var L=dx(Yt(Yt({},X),{},{icons:{main:E,mask:fx()},prefix:F,iconName:$,extra:V,watchable:!0})),j=dr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(j,e.firstChild):e.appendChild(j),j.outerHTML=L.map(function(ee){return Jd(ee)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function ER(e){return Promise.all([mS(e,"::before"),mS(e,"::after")])}function TR(e){return e.parentNode!==document.head&&!~dz.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(y_)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function gS(e){if(Qa)return new Promise(function(t,i){var a=jh(e.querySelectorAll("*")).filter(TR).map(ER),c=px.begin("searchPseudoElements");gI(),Promise.all(a).then(function(){c(),T_(),t()}).catch(function(){c(),T_(),i()})})}var CR={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=gS,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?dr:a;rn.searchPseudoElements&&gS(c)}}},yS=!1,IR={mixout:function(){return{dom:{unwatch:function(){gI(),yS=!0}}}},hooks:function(){return{bootstrap:function(){hS(x_("mutationObserverCallbacks",{}))},noAuto:function(){uR()},watch:function(i){var a=i.observeMutationsRoot;yS?T_():hS(x_("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},vS=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var m=c.toLowerCase().split("-"),f=m[0],u=m.slice(1).join("-");if(f&&u==="h")return a.flipX=!0,a;if(f&&u==="v")return a.flipY=!0,a;if(u=parseFloat(u),isNaN(u))return a;switch(f){case"grow":a.size=a.size+u;break;case"shrink":a.size=a.size-u;break;case"left":a.x=a.x-u;break;case"right":a.x=a.x+u;break;case"up":a.y=a.y-u;break;case"down":a.y=a.y+u;break;case"rotate":a.rotate=a.rotate+u;break}return a},i)},AR={mixout:function(){return{parse:{transform:function(i){return vS(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=vS(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,m=i.containerWidth,f=i.iconWidth,u={transform:"translate(".concat(m/2," 256)")},S="translate(".concat(c.x*32,", ").concat(c.y*32,") "),C="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),P="rotate(".concat(c.rotate," 0 0)"),b={transform:"".concat(S," ").concat(C," ").concat(P)},T={transform:"translate(".concat(f/2*-1," -256)")},F={outer:u,inner:b,path:T};return{tag:"g",attributes:Yt({},F.outer),children:[{tag:"g",attributes:Yt({},F.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Yt(Yt({},a.icon.attributes),F.path)}]}]}}}},q0={x:0,y:0,width:"100%",height:"100%"};function _S(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function PR(e){return e.tag==="g"?e.children:[e]}var kR={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),m=c?hy(c.split(" ").map(function(f){return f.trim()})):fx();return m.prefix||(m.prefix=eu()),i.mask=m,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,m=i.main,f=i.mask,u=i.maskId,S=i.transform,C=m.width,P=m.icon,b=f.width,T=f.icon,F=Az({transform:S,containerWidth:b,iconWidth:C}),B={tag:"rect",attributes:Yt(Yt({},q0),{},{fill:"white"})},O=P.children?{children:P.children.map(_S)}:{},he={tag:"g",attributes:Yt({},F.inner),children:[_S(Yt({tag:P.tag,attributes:Yt(Yt({},P.attributes),F.path)},O))]},Y={tag:"g",attributes:Yt({},F.outer),children:[he]},q="mask-".concat(u||jd()),$="clip-".concat(u||jd()),se={tag:"mask",attributes:Yt(Yt({},q0),{},{id:q,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[B,Y]},X={tag:"defs",children:[{tag:"clipPath",attributes:{id:$},children:PR(T)},se]};return a.push(X,{tag:"rect",attributes:Yt({fill:"currentColor","clip-path":"url(#".concat($,")"),mask:"url(#".concat(q,")")},q0)}),{children:a,attributes:c}}}},MR={provides:function(t){var i=!1;Ql.matchMedia&&(i=Ql.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},m={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Yt(Yt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var f=Yt(Yt({},m),{},{attributeName:"opacity"}),u={tag:"circle",attributes:Yt(Yt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||u.children.push({tag:"animate",attributes:Yt(Yt({},m),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Yt(Yt({},f),{},{values:"1;0;1;1;0;1;"})}),a.push(u),a.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Yt(Yt({},f),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Yt(Yt({},f),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},zR={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),m=c===null?!1:c===""?!0:c;return i.symbol=m,i}}}},RR=[Mz,vR,_R,xR,wR,CR,IR,AR,kR,MR,zR];Wz(RR,{mixoutsTo:Vo});Vo.noAuto;Vo.config;Vo.library;Vo.dom;var C_=Vo.parse;Vo.findIconDefinition;Vo.toHtml;var FR=Vo.icon;Vo.layer;Vo.text;Vo.counter;var vI={exports:{}},OR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",LR=OR,jR=LR;function _I(){}function xI(){}xI.resetWarningCache=_I;var DR=function(){function e(a,c,m,f,u,S){if(S!==jR){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xI,resetWarningCache:_I};return i.PropTypes=i,i};vI.exports=DR();var BR=vI.exports;const Fn=Vd(BR);function xS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function $l(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?xS(Object(i),!0).forEach(function(a){lh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xS(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function lh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function NR(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,m;for(m=0;m<a.length;m++)c=a[m],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function UR(e,t){if(e==null)return{};var i=NR(e,t),a,c;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(c=0;c<m.length;c++)a=m[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function I_(e){return $R(e)||VR(e)||GR(e)||HR()}function $R(e){if(Array.isArray(e))return A_(e)}function VR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GR(e,t){if(e){if(typeof e=="string")return A_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return A_(e,t)}}function A_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function HR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WR(e){var t,i=e.beat,a=e.fade,c=e.beatFade,m=e.bounce,f=e.shake,u=e.flash,S=e.spin,C=e.spinPulse,P=e.spinReverse,b=e.pulse,T=e.fixedWidth,F=e.inverse,B=e.border,O=e.listItem,he=e.flip,Y=e.size,q=e.rotation,$=e.pull,se=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":m,"fa-shake":f,"fa-flash":u,"fa-spin":S,"fa-spin-reverse":P,"fa-spin-pulse":C,"fa-pulse":b,"fa-fw":T,"fa-inverse":F,"fa-border":B,"fa-li":O,"fa-flip":he===!0,"fa-flip-horizontal":he==="horizontal"||he==="both","fa-flip-vertical":he==="vertical"||he==="both"},lh(t,"fa-".concat(Y),typeof Y<"u"&&Y!==null),lh(t,"fa-rotate-".concat(q),typeof q<"u"&&q!==null&&q!==0),lh(t,"fa-pull-".concat($),typeof $<"u"&&$!==null),lh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(se).map(function(X){return se[X]?X:null}).filter(function(X){return X})}function ZR(e){return e=e-0,e===e}function wI(e){return ZR(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var qR=["style"];function XR(e){return e.charAt(0).toUpperCase()+e.slice(1)}function KR(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=wI(i.slice(0,a)),m=i.slice(a+1).trim();return c.startsWith("webkit")?t[XR(c)]=m:t[c]=m,t},{})}function bI(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(S){return bI(e,S)}),c=Object.keys(t.attributes||{}).reduce(function(S,C){var P=t.attributes[C];switch(C){case"class":S.attrs.className=P,delete t.attributes.class;break;case"style":S.attrs.style=KR(P);break;default:C.indexOf("aria-")===0||C.indexOf("data-")===0?S.attrs[C.toLowerCase()]=P:S.attrs[wI(C)]=P}return S},{attrs:{}}),m=i.style,f=m===void 0?{}:m,u=UR(i,qR);return c.attrs.style=$l($l({},c.attrs.style),f),e.apply(void 0,[t.tag,$l($l({},c.attrs),u)].concat(I_(a)))}var SI=!1;try{SI=!0}catch{}function YR(){if(!SI&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function wS(e){if(e&&xg(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(C_.icon)return C_.icon(e);if(e===null)return null;if(e&&xg(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function X0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?lh({},e,t):{}}var ca=h1.forwardRef(function(e,t){var i=e.icon,a=e.mask,c=e.symbol,m=e.className,f=e.title,u=e.titleId,S=e.maskId,C=wS(i),P=X0("classes",[].concat(I_(WR(e)),I_(m.split(" ")))),b=X0("transform",typeof e.transform=="string"?C_.transform(e.transform):e.transform),T=X0("mask",wS(a)),F=FR(C,$l($l($l($l({},P),b),T),{},{symbol:c,title:f,titleId:u,maskId:S}));if(!F)return YR("Could not find icon",C),null;var B=F.abstract,O={ref:t};return Object.keys(e).forEach(function(he){ca.defaultProps.hasOwnProperty(he)||(O[he]=e[he])}),JR(B[0],O)});ca.displayName="FontAwesomeIcon";ca.propTypes={beat:Fn.bool,border:Fn.bool,beatFade:Fn.bool,bounce:Fn.bool,className:Fn.string,fade:Fn.bool,flash:Fn.bool,mask:Fn.oneOfType([Fn.object,Fn.array,Fn.string]),maskId:Fn.string,fixedWidth:Fn.bool,inverse:Fn.bool,flip:Fn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Fn.oneOfType([Fn.object,Fn.array,Fn.string]),listItem:Fn.bool,pull:Fn.oneOf(["right","left"]),pulse:Fn.bool,rotation:Fn.oneOf([0,90,180,270]),shake:Fn.bool,size:Fn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Fn.bool,spinPulse:Fn.bool,spinReverse:Fn.bool,symbol:Fn.oneOfType([Fn.bool,Fn.string]),title:Fn.string,titleId:Fn.string,transform:Fn.oneOfType([Fn.string,Fn.object]),swapOpacity:Fn.bool};ca.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var JR=bI.bind(null,h1.createElement),QR={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},P_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},eF={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},tF=eF;function pm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var EI={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,m){function f(C,P){if(!c[C]){if(!a[C]){var b=typeof pm=="function"&&pm;if(!P&&b)return b(C,!0);if(u)return u(C,!0);var T=new Error("Cannot find module '"+C+"'");throw T.code="MODULE_NOT_FOUND",T}var F=c[C]={exports:{}};a[C][0].call(F.exports,function(B){var O=a[C][1][B];return f(O||B)},F,F.exports,i,a,c,m)}return c[C].exports}for(var u=typeof pm=="function"&&pm,S=0;S<m.length;S++)f(m[S]);return f}return i}()({1:[function(i,a,c){c.byteLength=T,c.toByteArray=B,c.fromByteArray=Y;for(var m=[],f=[],u=typeof Uint8Array<"u"?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,P=S.length;C<P;++C)m[C]=S[C],f[S.charCodeAt(C)]=C;f[45]=62,f[95]=63;function b(q){var $=q.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var se=q.indexOf("=");se===-1&&(se=$);var X=se===$?0:4-se%4;return[se,X]}function T(q){var $=b(q),se=$[0],X=$[1];return(se+X)*3/4-X}function F(q,$,se){return($+se)*3/4-se}function B(q){var $,se=b(q),X=se[0],V=se[1],E=new u(F(q,X,V)),L=0,j=V>0?X-4:X,ee;for(ee=0;ee<j;ee+=4)$=f[q.charCodeAt(ee)]<<18|f[q.charCodeAt(ee+1)]<<12|f[q.charCodeAt(ee+2)]<<6|f[q.charCodeAt(ee+3)],E[L++]=$>>16&255,E[L++]=$>>8&255,E[L++]=$&255;return V===2&&($=f[q.charCodeAt(ee)]<<2|f[q.charCodeAt(ee+1)]>>4,E[L++]=$&255),V===1&&($=f[q.charCodeAt(ee)]<<10|f[q.charCodeAt(ee+1)]<<4|f[q.charCodeAt(ee+2)]>>2,E[L++]=$>>8&255,E[L++]=$&255),E}function O(q){return m[q>>18&63]+m[q>>12&63]+m[q>>6&63]+m[q&63]}function he(q,$,se){for(var X,V=[],E=$;E<se;E+=3)X=(q[E]<<16&16711680)+(q[E+1]<<8&65280)+(q[E+2]&255),V.push(O(X));return V.join("")}function Y(q){for(var $,se=q.length,X=se%3,V=[],E=16383,L=0,j=se-X;L<j;L+=E)V.push(he(q,L,L+E>j?j:L+E));return X===1?($=q[se-1],V.push(m[$>>2]+m[$<<4&63]+"==")):X===2&&($=(q[se-2]<<8)+q[se-1],V.push(m[$>>10]+m[$>>4&63]+m[$<<2&63]+"=")),V.join("")}},{}],2:[function(i,a,c){(function(m){(function(){var f=i("base64-js"),u=i("ieee754");c.Buffer=b,c.SlowBuffer=X,c.INSPECT_MAX_BYTES=50;var S=2147483647;c.kMaxLength=S,b.TYPED_ARRAY_SUPPORT=C(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{var be=new Uint8Array(1);return be.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},be.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function P(be){if(be>S)throw new RangeError('The value "'+be+'" is invalid for option "size"');var N=new Uint8Array(be);return N.__proto__=b.prototype,N}function b(be,N,D){if(typeof be=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(be)}return T(be,N,D)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function T(be,N,D){if(typeof be=="string")return he(be,N);if(ArrayBuffer.isView(be))return Y(be);if(be==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(an(be,ArrayBuffer)||be&&an(be.buffer,ArrayBuffer))return q(be,N,D);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=be.valueOf&&be.valueOf();if(xe!=null&&xe!==be)return b.from(xe,N,D);var Xe=$(be);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return b.from(be[Symbol.toPrimitive]("string"),N,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}b.from=function(be,N,D){return T(be,N,D)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function F(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function B(be,N,D){return F(be),be<=0?P(be):N!==void 0?typeof D=="string"?P(be).fill(N,D):P(be).fill(N):P(be)}b.alloc=function(be,N,D){return B(be,N,D)};function O(be){return F(be),P(be<0?0:se(be)|0)}b.allocUnsafe=function(be){return O(be)},b.allocUnsafeSlow=function(be){return O(be)};function he(be,N){if((typeof N!="string"||N==="")&&(N="utf8"),!b.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var D=V(be,N)|0,xe=P(D),Xe=xe.write(be,N);return Xe!==D&&(xe=xe.slice(0,Xe)),xe}function Y(be){for(var N=be.length<0?0:se(be.length)|0,D=P(N),xe=0;xe<N;xe+=1)D[xe]=be[xe]&255;return D}function q(be,N,D){if(N<0||be.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<N+(D||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return N===void 0&&D===void 0?xe=new Uint8Array(be):D===void 0?xe=new Uint8Array(be,N):xe=new Uint8Array(be,N,D),xe.__proto__=b.prototype,xe}function $(be){if(b.isBuffer(be)){var N=se(be.length)|0,D=P(N);return D.length===0||be.copy(D,0,0,N),D}if(be.length!==void 0)return typeof be.length!="number"||Ht(be.length)?P(0):Y(be);if(be.type==="Buffer"&&Array.isArray(be.data))return Y(be.data)}function se(be){if(be>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return be|0}function X(be){return+be!=be&&(be=0),b.alloc(+be)}b.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==b.prototype},b.compare=function(N,D){if(an(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),an(D,Uint8Array)&&(D=b.from(D,D.offset,D.byteLength)),!b.isBuffer(N)||!b.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===D)return 0;for(var xe=N.length,Xe=D.length,et=0,ht=Math.min(xe,Xe);et<ht;++et)if(N[et]!==D[et]){xe=N[et],Xe=D[et];break}return xe<Xe?-1:Xe<xe?1:0},b.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(N,D){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return b.alloc(0);var xe;if(D===void 0)for(D=0,xe=0;xe<N.length;++xe)D+=N[xe].length;var Xe=b.allocUnsafe(D),et=0;for(xe=0;xe<N.length;++xe){var ht=N[xe];if(an(ht,Uint8Array)&&(ht=b.from(ht)),!b.isBuffer(ht))throw new TypeError('"list" argument must be an Array of Buffers');ht.copy(Xe,et),et+=ht.length}return Xe};function V(be,N){if(b.isBuffer(be))return be.length;if(ArrayBuffer.isView(be)||an(be,ArrayBuffer))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);var D=be.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&D===0)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Vt(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return nt(be).length;default:if(Xe)return xe?-1:Vt(be).length;N=(""+N).toLowerCase(),Xe=!0}}b.byteLength=V;function E(be,N,D){var xe=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,N>>>=0,D<=N))return"";for(be||(be="utf8");;)switch(be){case"hex":return Ae(this,N,D);case"utf8":case"utf-8":return te(this,N,D);case"ascii":return Ee(this,N,D);case"latin1":case"binary":return Ne(this,N,D);case"base64":return Q(this,N,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,N,D);default:if(xe)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),xe=!0}}b.prototype._isBuffer=!0;function L(be,N,D){var xe=be[N];be[N]=be[D],be[D]=xe}b.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<N;D+=2)L(this,D,D+1);return this},b.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<N;D+=4)L(this,D,D+3),L(this,D+1,D+2);return this},b.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<N;D+=8)L(this,D,D+7),L(this,D+1,D+6),L(this,D+2,D+5),L(this,D+3,D+4);return this},b.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?te(this,0,N):E.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(N){if(!b.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:b.compare(this,N)===0},b.prototype.inspect=function(){var N="",D=c.INSPECT_MAX_BYTES;return N=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(N+=" ... "),"<Buffer "+N+">"},b.prototype.compare=function(N,D,xe,Xe,et){if(an(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(D===void 0&&(D=0),xe===void 0&&(xe=N?N.length:0),Xe===void 0&&(Xe=0),et===void 0&&(et=this.length),D<0||xe>N.length||Xe<0||et>this.length)throw new RangeError("out of range index");if(Xe>=et&&D>=xe)return 0;if(Xe>=et)return-1;if(D>=xe)return 1;if(D>>>=0,xe>>>=0,Xe>>>=0,et>>>=0,this===N)return 0;for(var ht=et-Xe,ae=xe-D,M=Math.min(ht,ae),U=this.slice(Xe,et),Se=N.slice(D,xe),Ge=0;Ge<M;++Ge)if(U[Ge]!==Se[Ge]){ht=U[Ge],ae=Se[Ge];break}return ht<ae?-1:ae<ht?1:0};function j(be,N,D,xe,Xe){if(be.length===0)return-1;if(typeof D=="string"?(xe=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,Ht(D)&&(D=Xe?0:be.length-1),D<0&&(D=be.length+D),D>=be.length){if(Xe)return-1;D=be.length-1}else if(D<0)if(Xe)D=0;else return-1;if(typeof N=="string"&&(N=b.from(N,xe)),b.isBuffer(N))return N.length===0?-1:ee(be,N,D,xe,Xe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(be,N,D):Uint8Array.prototype.lastIndexOf.call(be,N,D):ee(be,[N],D,xe,Xe);throw new TypeError("val must be string, number or Buffer")}function ee(be,N,D,xe,Xe){var et=1,ht=be.length,ae=N.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(be.length<2||N.length<2)return-1;et=2,ht/=2,ae/=2,D/=2}function M(Ve,Tt){return et===1?Ve[Tt]:Ve.readUInt16BE(Tt*et)}var U;if(Xe){var Se=-1;for(U=D;U<ht;U++)if(M(be,U)===M(N,Se===-1?0:U-Se)){if(Se===-1&&(Se=U),U-Se+1===ae)return Se*et}else Se!==-1&&(U-=U-Se),Se=-1}else for(D+ae>ht&&(D=ht-ae),U=D;U>=0;U--){for(var Ge=!0,tt=0;tt<ae;tt++)if(M(be,U+tt)!==M(N,tt)){Ge=!1;break}if(Ge)return U}return-1}b.prototype.includes=function(N,D,xe){return this.indexOf(N,D,xe)!==-1},b.prototype.indexOf=function(N,D,xe){return j(this,N,D,xe,!0)},b.prototype.lastIndexOf=function(N,D,xe){return j(this,N,D,xe,!1)};function Z(be,N,D,xe){D=Number(D)||0;var Xe=be.length-D;xe?(xe=Number(xe),xe>Xe&&(xe=Xe)):xe=Xe;var et=N.length;xe>et/2&&(xe=et/2);for(var ht=0;ht<xe;++ht){var ae=parseInt(N.substr(ht*2,2),16);if(Ht(ae))return ht;be[D+ht]=ae}return ht}function ve(be,N,D,xe){return wn(Vt(N,be.length-D),be,D,xe)}function _e(be,N,D,xe){return wn(Lt(N),be,D,xe)}function de(be,N,D,xe){return _e(be,N,D,xe)}function oe(be,N,D,xe){return wn(nt(N),be,D,xe)}function ue(be,N,D,xe){return wn(sn(N,be.length-D),be,D,xe)}b.prototype.write=function(N,D,xe,Xe){if(D===void 0)Xe="utf8",xe=this.length,D=0;else if(xe===void 0&&typeof D=="string")Xe=D,xe=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(xe)?(xe=xe>>>0,Xe===void 0&&(Xe="utf8")):(Xe=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var et=this.length-D;if((xe===void 0||xe>et)&&(xe=et),N.length>0&&(xe<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ht=!1;;)switch(Xe){case"hex":return Z(this,N,D,xe);case"utf8":case"utf-8":return ve(this,N,D,xe);case"ascii":return _e(this,N,D,xe);case"latin1":case"binary":return de(this,N,D,xe);case"base64":return oe(this,N,D,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,N,D,xe);default:if(ht)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ht=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(be,N,D){return N===0&&D===be.length?f.fromByteArray(be):f.fromByteArray(be.slice(N,D))}function te(be,N,D){D=Math.min(be.length,D);for(var xe=[],Xe=N;Xe<D;){var et=be[Xe],ht=null,ae=et>239?4:et>223?3:et>191?2:1;if(Xe+ae<=D){var M,U,Se,Ge;switch(ae){case 1:et<128&&(ht=et);break;case 2:M=be[Xe+1],(M&192)===128&&(Ge=(et&31)<<6|M&63,Ge>127&&(ht=Ge));break;case 3:M=be[Xe+1],U=be[Xe+2],(M&192)===128&&(U&192)===128&&(Ge=(et&15)<<12|(M&63)<<6|U&63,Ge>2047&&(Ge<55296||Ge>57343)&&(ht=Ge));break;case 4:M=be[Xe+1],U=be[Xe+2],Se=be[Xe+3],(M&192)===128&&(U&192)===128&&(Se&192)===128&&(Ge=(et&15)<<18|(M&63)<<12|(U&63)<<6|Se&63,Ge>65535&&Ge<1114112&&(ht=Ge))}}ht===null?(ht=65533,ae=1):ht>65535&&(ht-=65536,xe.push(ht>>>10&1023|55296),ht=56320|ht&1023),xe.push(ht),Xe+=ae}return we(xe)}var fe=4096;function we(be){var N=be.length;if(N<=fe)return String.fromCharCode.apply(String,be);for(var D="",xe=0;xe<N;)D+=String.fromCharCode.apply(String,be.slice(xe,xe+=fe));return D}function Ee(be,N,D){var xe="";D=Math.min(be.length,D);for(var Xe=N;Xe<D;++Xe)xe+=String.fromCharCode(be[Xe]&127);return xe}function Ne(be,N,D){var xe="";D=Math.min(be.length,D);for(var Xe=N;Xe<D;++Xe)xe+=String.fromCharCode(be[Xe]);return xe}function Ae(be,N,D){var xe=be.length;(!N||N<0)&&(N=0),(!D||D<0||D>xe)&&(D=xe);for(var Xe="",et=N;et<D;++et)Xe+=St(be[et]);return Xe}function Re(be,N,D){for(var xe=be.slice(N,D),Xe="",et=0;et<xe.length;et+=2)Xe+=String.fromCharCode(xe[et]+xe[et+1]*256);return Xe}b.prototype.slice=function(N,D){var xe=this.length;N=~~N,D=D===void 0?xe:~~D,N<0?(N+=xe,N<0&&(N=0)):N>xe&&(N=xe),D<0?(D+=xe,D<0&&(D=0)):D>xe&&(D=xe),D<N&&(D=N);var Xe=this.subarray(N,D);return Xe.__proto__=b.prototype,Xe};function Ze(be,N,D){if(be%1!==0||be<0)throw new RangeError("offset is not uint");if(be+N>D)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||Ze(N,D,this.length);for(var Xe=this[N],et=1,ht=0;++ht<D&&(et*=256);)Xe+=this[N+ht]*et;return Xe},b.prototype.readUIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||Ze(N,D,this.length);for(var Xe=this[N+--D],et=1;D>0&&(et*=256);)Xe+=this[N+--D]*et;return Xe},b.prototype.readUInt8=function(N,D){return N=N>>>0,D||Ze(N,1,this.length),this[N]},b.prototype.readUInt16LE=function(N,D){return N=N>>>0,D||Ze(N,2,this.length),this[N]|this[N+1]<<8},b.prototype.readUInt16BE=function(N,D){return N=N>>>0,D||Ze(N,2,this.length),this[N]<<8|this[N+1]},b.prototype.readUInt32LE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},b.prototype.readUInt32BE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},b.prototype.readIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||Ze(N,D,this.length);for(var Xe=this[N],et=1,ht=0;++ht<D&&(et*=256);)Xe+=this[N+ht]*et;return et*=128,Xe>=et&&(Xe-=Math.pow(2,8*D)),Xe},b.prototype.readIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||Ze(N,D,this.length);for(var Xe=D,et=1,ht=this[N+--Xe];Xe>0&&(et*=256);)ht+=this[N+--Xe]*et;return et*=128,ht>=et&&(ht-=Math.pow(2,8*D)),ht},b.prototype.readInt8=function(N,D){return N=N>>>0,D||Ze(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},b.prototype.readInt16LE=function(N,D){N=N>>>0,D||Ze(N,2,this.length);var xe=this[N]|this[N+1]<<8;return xe&32768?xe|4294901760:xe},b.prototype.readInt16BE=function(N,D){N=N>>>0,D||Ze(N,2,this.length);var xe=this[N+1]|this[N]<<8;return xe&32768?xe|4294901760:xe},b.prototype.readInt32LE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},b.prototype.readInt32BE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},b.prototype.readFloatLE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),u.read(this,N,!0,23,4)},b.prototype.readFloatBE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),u.read(this,N,!1,23,4)},b.prototype.readDoubleLE=function(N,D){return N=N>>>0,D||Ze(N,8,this.length),u.read(this,N,!0,52,8)},b.prototype.readDoubleBE=function(N,D){return N=N>>>0,D||Ze(N,8,this.length),u.read(this,N,!1,52,8)};function He(be,N,D,xe,Xe,et){if(!b.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<et)throw new RangeError('"value" argument is out of bounds');if(D+xe>be.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,xe=xe>>>0,!Xe){var et=Math.pow(2,8*xe)-1;He(this,N,D,xe,et,0)}var ht=1,ae=0;for(this[D]=N&255;++ae<xe&&(ht*=256);)this[D+ae]=N/ht&255;return D+xe},b.prototype.writeUIntBE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,xe=xe>>>0,!Xe){var et=Math.pow(2,8*xe)-1;He(this,N,D,xe,et,0)}var ht=xe-1,ae=1;for(this[D+ht]=N&255;--ht>=0&&(ae*=256);)this[D+ht]=N/ae&255;return D+xe},b.prototype.writeUInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,255,0),this[D]=N&255,D+1},b.prototype.writeUInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeUInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeUInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D+3]=N>>>24,this[D+2]=N>>>16,this[D+1]=N>>>8,this[D]=N&255,D+4},b.prototype.writeUInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4},b.prototype.writeIntLE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,!Xe){var et=Math.pow(2,8*xe-1);He(this,N,D,xe,et-1,-et)}var ht=0,ae=1,M=0;for(this[D]=N&255;++ht<xe&&(ae*=256);)N<0&&M===0&&this[D+ht-1]!==0&&(M=1),this[D+ht]=(N/ae>>0)-M&255;return D+xe},b.prototype.writeIntBE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,!Xe){var et=Math.pow(2,8*xe-1);He(this,N,D,xe,et-1,-et)}var ht=xe-1,ae=1,M=0;for(this[D+ht]=N&255;--ht>=0&&(ae*=256);)N<0&&M===0&&this[D+ht+1]!==0&&(M=1),this[D+ht]=(N/ae>>0)-M&255;return D+xe},b.prototype.writeInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,127,-128),N<0&&(N=255+N+1),this[D]=N&255,D+1},b.prototype.writeInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),this[D]=N&255,this[D+1]=N>>>8,this[D+2]=N>>>16,this[D+3]=N>>>24,D+4},b.prototype.writeInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4};function rt(be,N,D,xe,Xe,et){if(D+xe>be.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function dt(be,N,D,xe,Xe){return N=+N,D=D>>>0,Xe||rt(be,N,D,4),u.write(be,N,D,xe,23,4),D+4}b.prototype.writeFloatLE=function(N,D,xe){return dt(this,N,D,!0,xe)},b.prototype.writeFloatBE=function(N,D,xe){return dt(this,N,D,!1,xe)};function wt(be,N,D,xe,Xe){return N=+N,D=D>>>0,Xe||rt(be,N,D,8),u.write(be,N,D,xe,52,8),D+8}b.prototype.writeDoubleLE=function(N,D,xe){return wt(this,N,D,!0,xe)},b.prototype.writeDoubleBE=function(N,D,xe){return wt(this,N,D,!1,xe)},b.prototype.copy=function(N,D,xe,Xe){if(!b.isBuffer(N))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!Xe&&Xe!==0&&(Xe=this.length),D>=N.length&&(D=N.length),D||(D=0),Xe>0&&Xe<xe&&(Xe=xe),Xe===xe||N.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-D<Xe-xe&&(Xe=N.length-D+xe);var et=Xe-xe;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,xe,Xe);else if(this===N&&xe<D&&D<Xe)for(var ht=et-1;ht>=0;--ht)N[ht+D]=this[ht+xe];else Uint8Array.prototype.set.call(N,this.subarray(xe,Xe),D);return et},b.prototype.fill=function(N,D,xe,Xe){if(typeof N=="string"){if(typeof D=="string"?(Xe=D,D=0,xe=this.length):typeof xe=="string"&&(Xe=xe,xe=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!b.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(N.length===1){var et=N.charCodeAt(0);(Xe==="utf8"&&et<128||Xe==="latin1")&&(N=et)}}else typeof N=="number"&&(N=N&255);if(D<0||this.length<D||this.length<xe)throw new RangeError("Out of range index");if(xe<=D)return this;D=D>>>0,xe=xe===void 0?this.length:xe>>>0,N||(N=0);var ht;if(typeof N=="number")for(ht=D;ht<xe;++ht)this[ht]=N;else{var ae=b.isBuffer(N)?N:b.from(N,Xe),M=ae.length;if(M===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ht=0;ht<xe-D;++ht)this[ht+D]=ae[ht%M]}return this};var kt=/[^+/0-9A-Za-z-_]/g;function mt(be){if(be=be.split("=")[0],be=be.trim().replace(kt,""),be.length<2)return"";for(;be.length%4!==0;)be=be+"=";return be}function St(be){return be<16?"0"+be.toString(16):be.toString(16)}function Vt(be,N){N=N||1/0;for(var D,xe=be.length,Xe=null,et=[],ht=0;ht<xe;++ht){if(D=be.charCodeAt(ht),D>55295&&D<57344){if(!Xe){if(D>56319){(N-=3)>-1&&et.push(239,191,189);continue}else if(ht+1===xe){(N-=3)>-1&&et.push(239,191,189);continue}Xe=D;continue}if(D<56320){(N-=3)>-1&&et.push(239,191,189),Xe=D;continue}D=(Xe-55296<<10|D-56320)+65536}else Xe&&(N-=3)>-1&&et.push(239,191,189);if(Xe=null,D<128){if((N-=1)<0)break;et.push(D)}else if(D<2048){if((N-=2)<0)break;et.push(D>>6|192,D&63|128)}else if(D<65536){if((N-=3)<0)break;et.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((N-=4)<0)break;et.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return et}function Lt(be){for(var N=[],D=0;D<be.length;++D)N.push(be.charCodeAt(D)&255);return N}function sn(be,N){for(var D,xe,Xe,et=[],ht=0;ht<be.length&&!((N-=2)<0);++ht)D=be.charCodeAt(ht),xe=D>>8,Xe=D%256,et.push(Xe),et.push(xe);return et}function nt(be){return f.toByteArray(mt(be))}function wn(be,N,D,xe){for(var Xe=0;Xe<xe&&!(Xe+D>=N.length||Xe>=be.length);++Xe)N[Xe+D]=be[Xe];return Xe}function an(be,N){return be instanceof N||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===N.name}function Ht(be){return be!==be}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const m=i("./validator"),f=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");a.exports={XMLParser:f,XMLValidator:m,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const m=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=m+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+m+"]["+f+"]*",S=new RegExp("^"+u+"$"),C=function(b,T){const F=[];let B=T.exec(b);for(;B;){const O=[];O.startIndex=T.lastIndex-B[0].length;const he=B.length;for(let Y=0;Y<he;Y++)O.push(B[Y]);F.push(O),B=T.exec(b)}return F},P=function(b){const T=S.exec(b);return!(T===null||typeof T>"u")};c.isExist=function(b){return typeof b<"u"},c.isEmptyObject=function(b){return Object.keys(b).length===0},c.merge=function(b,T,F){if(T){const B=Object.keys(T),O=B.length;for(let he=0;he<O;he++)F==="strict"?b[B[he]]=[T[B[he]]]:b[B[he]]=T[B[he]]}},c.getValue=function(b){return c.isExist(b)?b:""},c.isName=P,c.getAllMatches=C,c.nameRegexp=u},{}],5:[function(i,a,c){const m=i("./util"),f={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(V,E){E=Object.assign({},f,E);const L=[];let j=!1,ee=!1;V[0]==="\uFEFF"&&(V=V.substr(1));for(let Z=0;Z<V.length;Z++)if(V[Z]==="<"&&V[Z+1]==="?"){if(Z+=2,Z=S(V,Z),Z.err)return Z}else if(V[Z]==="<"){let ve=Z;if(Z++,V[Z]==="!"){Z=C(V,Z);continue}else{let _e=!1;V[Z]==="/"&&(_e=!0,Z++);let de="";for(;Z<V.length&&V[Z]!==">"&&V[Z]!==" "&&V[Z]!=="	"&&V[Z]!==`
`&&V[Z]!=="\r";Z++)de+=V[Z];if(de=de.trim(),de[de.length-1]==="/"&&(de=de.substring(0,de.length-1),Z--),!$(de)){let Q;return de.trim().length===0?Q="Invalid space after '<'.":Q="Tag '"+de+"' is an invalid name.",Y("InvalidTag",Q,se(V,Z))}const oe=T(V,Z);if(oe===!1)return Y("InvalidAttr","Attributes for '"+de+"' have open quote.",se(V,Z));let ue=oe.value;if(Z=oe.index,ue[ue.length-1]==="/"){const Q=Z-ue.length;ue=ue.substring(0,ue.length-1);const te=B(ue,E);if(te===!0)j=!0;else return Y(te.err.code,te.err.msg,se(V,Q+te.err.line))}else if(_e)if(oe.tagClosed){if(ue.trim().length>0)return Y("InvalidTag","Closing tag '"+de+"' can't have attributes or invalid starting.",se(V,ve));{const Q=L.pop();if(de!==Q.tagName){let te=se(V,Q.tagStartPos);return Y("InvalidTag","Expected closing tag '"+Q.tagName+"' (opened in line "+te.line+", col "+te.col+") instead of closing tag '"+de+"'.",se(V,ve))}L.length==0&&(ee=!0)}}else return Y("InvalidTag","Closing tag '"+de+"' doesn't have proper closing.",se(V,Z));else{const Q=B(ue,E);if(Q!==!0)return Y(Q.err.code,Q.err.msg,se(V,Z-ue.length+Q.err.line));if(ee===!0)return Y("InvalidXml","Multiple possible root nodes found.",se(V,Z));E.unpairedTags.indexOf(de)!==-1||L.push({tagName:de,tagStartPos:ve}),j=!0}for(Z++;Z<V.length;Z++)if(V[Z]==="<")if(V[Z+1]==="!"){Z++,Z=C(V,Z);continue}else if(V[Z+1]==="?"){if(Z=S(V,++Z),Z.err)return Z}else break;else if(V[Z]==="&"){const Q=he(V,Z);if(Q==-1)return Y("InvalidChar","char '&' is not expected.",se(V,Z));Z=Q}else if(ee===!0&&!u(V[Z]))return Y("InvalidXml","Extra text at the end",se(V,Z));V[Z]==="<"&&Z--}}else{if(u(V[Z]))continue;return Y("InvalidChar","char '"+V[Z]+"' is not expected.",se(V,Z))}if(j){if(L.length==1)return Y("InvalidTag","Unclosed tag '"+L[0].tagName+"'.",se(V,L[0].tagStartPos));if(L.length>0)return Y("InvalidXml","Invalid '"+JSON.stringify(L.map(Z=>Z.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Y("InvalidXml","Start tag expected.",1);return!0};function u(V){return V===" "||V==="	"||V===`
`||V==="\r"}function S(V,E){const L=E;for(;E<V.length;E++)if(V[E]=="?"||V[E]==" "){const j=V.substr(L,E-L);if(E>5&&j==="xml")return Y("InvalidXml","XML declaration allowed only at the start of the document.",se(V,E));if(V[E]=="?"&&V[E+1]==">"){E++;break}else continue}return E}function C(V,E){if(V.length>E+5&&V[E+1]==="-"&&V[E+2]==="-"){for(E+=3;E<V.length;E++)if(V[E]==="-"&&V[E+1]==="-"&&V[E+2]===">"){E+=2;break}}else if(V.length>E+8&&V[E+1]==="D"&&V[E+2]==="O"&&V[E+3]==="C"&&V[E+4]==="T"&&V[E+5]==="Y"&&V[E+6]==="P"&&V[E+7]==="E"){let L=1;for(E+=8;E<V.length;E++)if(V[E]==="<")L++;else if(V[E]===">"&&(L--,L===0))break}else if(V.length>E+9&&V[E+1]==="["&&V[E+2]==="C"&&V[E+3]==="D"&&V[E+4]==="A"&&V[E+5]==="T"&&V[E+6]==="A"&&V[E+7]==="["){for(E+=8;E<V.length;E++)if(V[E]==="]"&&V[E+1]==="]"&&V[E+2]===">"){E+=2;break}}return E}const P='"',b="'";function T(V,E){let L="",j="",ee=!1;for(;E<V.length;E++){if(V[E]===P||V[E]===b)j===""?j=V[E]:j!==V[E]||(j="");else if(V[E]===">"&&j===""){ee=!0;break}L+=V[E]}return j!==""?!1:{value:L,index:E,tagClosed:ee}}const F=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function B(V,E){const L=m.getAllMatches(V,F),j={};for(let ee=0;ee<L.length;ee++){if(L[ee][1].length===0)return Y("InvalidAttr","Attribute '"+L[ee][2]+"' has no space in starting.",X(L[ee]));if(L[ee][3]!==void 0&&L[ee][4]===void 0)return Y("InvalidAttr","Attribute '"+L[ee][2]+"' is without value.",X(L[ee]));if(L[ee][3]===void 0&&!E.allowBooleanAttributes)return Y("InvalidAttr","boolean attribute '"+L[ee][2]+"' is not allowed.",X(L[ee]));const Z=L[ee][2];if(!q(Z))return Y("InvalidAttr","Attribute '"+Z+"' is an invalid name.",X(L[ee]));if(!j.hasOwnProperty(Z))j[Z]=1;else return Y("InvalidAttr","Attribute '"+Z+"' is repeated.",X(L[ee]))}return!0}function O(V,E){let L=/\d/;for(V[E]==="x"&&(E++,L=/[\da-fA-F]/);E<V.length;E++){if(V[E]===";")return E;if(!V[E].match(L))break}return-1}function he(V,E){if(E++,V[E]===";")return-1;if(V[E]==="#")return E++,O(V,E);let L=0;for(;E<V.length;E++,L++)if(!(V[E].match(/\w/)&&L<20)){if(V[E]===";")break;return-1}return E}function Y(V,E,L){return{err:{code:V,msg:E,line:L.line||L,col:L.col}}}function q(V){return m.isName(V)}function $(V){return m.isName(V)}function se(V,E){const L=V.substring(0,E).split(/\r?\n/);return{line:L.length,col:L[L.length-1].length+1}}function X(V){return V.startIndex+V[1].length}},{"./util":4}],6:[function(i,a,c){const m=i("./orderedJs2Xml"),f={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,T){return T},attributeValueProcessor:function(b,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(b){this.options=Object.assign({},f,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=P),this.processTextOrObjNode=S,this.options.format?(this.indentate=C,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(b){return this.options.preserveOrder?m(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},u.prototype.j2x=function(b,T){let F="",B="";for(let O in b)if(Object.prototype.hasOwnProperty.call(b,O))if(typeof b[O]>"u")this.isAttribute(O)&&(B+="");else if(b[O]===null)this.isAttribute(O)?B+="":O[0]==="?"?B+=this.indentate(T)+"<"+O+"?"+this.tagEndChar:B+=this.indentate(T)+"<"+O+"/"+this.tagEndChar;else if(b[O]instanceof Date)B+=this.buildTextValNode(b[O],O,"",T);else if(typeof b[O]!="object"){const he=this.isAttribute(O);if(he)F+=this.buildAttrPairStr(he,""+b[O]);else if(O===this.options.textNodeName){let Y=this.options.tagValueProcessor(O,""+b[O]);B+=this.replaceEntitiesValue(Y)}else B+=this.buildTextValNode(b[O],O,"",T)}else if(Array.isArray(b[O])){const he=b[O].length;let Y="";for(let q=0;q<he;q++){const $=b[O][q];typeof $>"u"||($===null?O[0]==="?"?B+=this.indentate(T)+"<"+O+"?"+this.tagEndChar:B+=this.indentate(T)+"<"+O+"/"+this.tagEndChar:typeof $=="object"?this.options.oneListGroup?Y+=this.j2x($,T+1).val:Y+=this.processTextOrObjNode($,O,T):Y+=this.buildTextValNode($,O,"",T))}this.options.oneListGroup&&(Y=this.buildObjectNode(Y,O,"",T)),B+=Y}else if(this.options.attributesGroupName&&O===this.options.attributesGroupName){const he=Object.keys(b[O]),Y=he.length;for(let q=0;q<Y;q++)F+=this.buildAttrPairStr(he[q],""+b[O][he[q]])}else B+=this.processTextOrObjNode(b[O],O,T);return{attrStr:F,val:B}},u.prototype.buildAttrPairStr=function(b,T){return T=this.options.attributeValueProcessor(b,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+b:" "+b+'="'+T+'"'};function S(b,T,F){const B=this.j2x(b,F+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],T,B.attrStr,F):this.buildObjectNode(B.val,T,B.attrStr,F)}u.prototype.buildObjectNode=function(b,T,F,B){if(b==="")return T[0]==="?"?this.indentate(B)+"<"+T+F+"?"+this.tagEndChar:this.indentate(B)+"<"+T+F+this.closeTag(T)+this.tagEndChar;{let O="</"+T+this.tagEndChar,he="";return T[0]==="?"&&(he="?",O=""),(F||F==="")&&b.indexOf("<")===-1?this.indentate(B)+"<"+T+F+he+">"+b+O:this.options.commentPropName!==!1&&T===this.options.commentPropName&&he.length===0?this.indentate(B)+`<!--${b}-->`+this.newLine:this.indentate(B)+"<"+T+F+he+this.tagEndChar+b+this.indentate(B)+O}},u.prototype.closeTag=function(b){let T="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${b}`,T},u.prototype.buildTextValNode=function(b,T,F,B){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(B)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(B)+`<!--${b}-->`+this.newLine;if(T[0]==="?")return this.indentate(B)+"<"+T+F+"?"+this.tagEndChar;{let O=this.options.tagValueProcessor(T,b);return O=this.replaceEntitiesValue(O),O===""?this.indentate(B)+"<"+T+F+this.closeTag(T)+this.tagEndChar:this.indentate(B)+"<"+T+F+">"+O+"</"+T+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const F=this.options.entities[T];b=b.replace(F.regex,F.val)}return b};function C(b){return this.options.indentBy.repeat(b)}function P(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(i,a,c){const m=`
`;function f(T,F){let B="";return F.format&&F.indentBy.length>0&&(B=m),u(T,F,"",B)}function u(T,F,B,O){let he="",Y=!1;for(let q=0;q<T.length;q++){const $=T[q],se=S($);if(se===void 0)continue;let X="";if(B.length===0?X=se:X=`${B}.${se}`,se===F.textNodeName){let ee=$[se];P(X,F)||(ee=F.tagValueProcessor(se,ee),ee=b(ee,F)),Y&&(he+=O),he+=ee,Y=!1;continue}else if(se===F.cdataPropName){Y&&(he+=O),he+=`<![CDATA[${$[se][0][F.textNodeName]}]]>`,Y=!1;continue}else if(se===F.commentPropName){he+=O+`<!--${$[se][0][F.textNodeName]}-->`,Y=!0;continue}else if(se[0]==="?"){const ee=C($[":@"],F),Z=se==="?xml"?"":O;let ve=$[se][0][F.textNodeName];ve=ve.length!==0?" "+ve:"",he+=Z+`<${se}${ve}${ee}?>`,Y=!0;continue}let V=O;V!==""&&(V+=F.indentBy);const E=C($[":@"],F),L=O+`<${se}${E}`,j=u($[se],F,X,V);F.unpairedTags.indexOf(se)!==-1?F.suppressUnpairedNode?he+=L+">":he+=L+"/>":(!j||j.length===0)&&F.suppressEmptyNode?he+=L+"/>":j&&j.endsWith(">")?he+=L+`>${j}${O}</${se}>`:(he+=L+">",j&&O!==""&&(j.includes("/>")||j.includes("</"))?he+=O+F.indentBy+j+O:he+=j,he+=`</${se}>`),Y=!0}return he}function S(T){const F=Object.keys(T);for(let B=0;B<F.length;B++){const O=F[B];if(T.hasOwnProperty(O)&&O!==":@")return O}}function C(T,F){let B="";if(T&&!F.ignoreAttributes)for(let O in T){if(!T.hasOwnProperty(O))continue;let he=F.attributeValueProcessor(O,T[O]);he=b(he,F),he===!0&&F.suppressBooleanAttributes?B+=` ${O.substr(F.attributeNamePrefix.length)}`:B+=` ${O.substr(F.attributeNamePrefix.length)}="${he}"`}return B}function P(T,F){T=T.substr(0,T.length-F.textNodeName.length-1);let B=T.substr(T.lastIndexOf(".")+1);for(let O in F.stopNodes)if(F.stopNodes[O]===T||F.stopNodes[O]==="*."+B)return!0;return!1}function b(T,F){if(T&&T.length>0&&F.processEntities)for(let B=0;B<F.entities.length;B++){const O=F.entities[B];T=T.replace(O.regex,O.val)}return T}a.exports=f},{}],8:[function(i,a,c){const m=i("../util");function f(B,O){const he={};if(B[O+3]==="O"&&B[O+4]==="C"&&B[O+5]==="T"&&B[O+6]==="Y"&&B[O+7]==="P"&&B[O+8]==="E"){O=O+9;let Y=1,q=!1,$=!1,se="";for(;O<B.length;O++)if(B[O]==="<"&&!$){if(q&&C(B,O))O+=7,[entityName,val,O]=u(B,O+1),val.indexOf("&")===-1&&(he[F(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(q&&P(B,O))O+=8;else if(q&&b(B,O))O+=8;else if(q&&T(B,O))O+=9;else if(S)$=!0;else throw new Error("Invalid DOCTYPE");Y++,se=""}else if(B[O]===">"){if($?B[O-1]==="-"&&B[O-2]==="-"&&($=!1,Y--):Y--,Y===0)break}else B[O]==="["?q=!0:se+=B[O];if(Y!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:he,i:O}}function u(B,O){let he="";for(;O<B.length&&B[O]!=="'"&&B[O]!=='"';O++)he+=B[O];if(he=he.trim(),he.indexOf(" ")!==-1)throw new Error("External entites are not supported");const Y=B[O++];let q="";for(;O<B.length&&B[O]!==Y;O++)q+=B[O];return[he,q,O]}function S(B,O){return B[O+1]==="!"&&B[O+2]==="-"&&B[O+3]==="-"}function C(B,O){return B[O+1]==="!"&&B[O+2]==="E"&&B[O+3]==="N"&&B[O+4]==="T"&&B[O+5]==="I"&&B[O+6]==="T"&&B[O+7]==="Y"}function P(B,O){return B[O+1]==="!"&&B[O+2]==="E"&&B[O+3]==="L"&&B[O+4]==="E"&&B[O+5]==="M"&&B[O+6]==="E"&&B[O+7]==="N"&&B[O+8]==="T"}function b(B,O){return B[O+1]==="!"&&B[O+2]==="A"&&B[O+3]==="T"&&B[O+4]==="T"&&B[O+5]==="L"&&B[O+6]==="I"&&B[O+7]==="S"&&B[O+8]==="T"}function T(B,O){return B[O+1]==="!"&&B[O+2]==="N"&&B[O+3]==="O"&&B[O+4]==="T"&&B[O+5]==="A"&&B[O+6]==="T"&&B[O+7]==="I"&&B[O+8]==="O"&&B[O+9]==="N"}function F(B){if(m.isName(B))return B;throw new Error(`Invalid entity name ${B}`)}a.exports=f},{"../util":4}],9:[function(i,a,c){const m={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,S){return S},attributeValueProcessor:function(u,S){return S},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,S,C){return u}},f=function(u){return Object.assign({},m,u)};c.buildOptions=f,c.defaultOptions=m},{}],10:[function(i,a,c){const m=i("../util"),f=i("./xmlNode"),u=i("./DocTypeReader"),S=i("strnum");class C{constructor(ee){this.options=ee,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=P,this.parseXml=O,this.parseTextData=b,this.resolveNameSpace=T,this.buildAttributesMap=B,this.isItStopNode=$,this.replaceEntitiesValue=Y,this.readStopNodeData=E,this.saveTextToParentTag=q,this.addChild=he}}function P(j){const ee=Object.keys(j);for(let Z=0;Z<ee.length;Z++){const ve=ee[Z];this.lastEntities[ve]={regex:new RegExp("&"+ve+";","g"),val:j[ve]}}}function b(j,ee,Z,ve,_e,de,oe){if(j!==void 0&&(this.options.trimValues&&!ve&&(j=j.trim()),j.length>0)){oe||(j=this.replaceEntitiesValue(j));const ue=this.options.tagValueProcessor(ee,j,Z,_e,de);return ue==null?j:typeof ue!=typeof j||ue!==j?ue:this.options.trimValues?L(j,this.options.parseTagValue,this.options.numberParseOptions):j.trim()===j?L(j,this.options.parseTagValue,this.options.numberParseOptions):j}}function T(j){if(this.options.removeNSPrefix){const ee=j.split(":"),Z=j.charAt(0)==="/"?"/":"";if(ee[0]==="xmlns")return"";ee.length===2&&(j=Z+ee[1])}return j}const F=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function B(j,ee,Z){if(!this.options.ignoreAttributes&&typeof j=="string"){const ve=m.getAllMatches(j,F),_e=ve.length,de={};for(let oe=0;oe<_e;oe++){const ue=this.resolveNameSpace(ve[oe][1]);let Q=ve[oe][4],te=this.options.attributeNamePrefix+ue;if(ue.length)if(this.options.transformAttributeName&&(te=this.options.transformAttributeName(te)),te==="__proto__"&&(te="#__proto__"),Q!==void 0){this.options.trimValues&&(Q=Q.trim()),Q=this.replaceEntitiesValue(Q);const fe=this.options.attributeValueProcessor(ue,Q,ee);fe==null?de[te]=Q:typeof fe!=typeof Q||fe!==Q?de[te]=fe:de[te]=L(Q,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(de[te]=!0)}if(!Object.keys(de).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=de,oe}return de}}const O=function(j){j=j.replace(/\r\n?/g,`
`);const ee=new f("!xml");let Z=ee,ve="",_e="";for(let de=0;de<j.length;de++)if(j[de]==="<")if(j[de+1]==="/"){const ue=X(j,">",de,"Closing Tag is not closed.");let Q=j.substring(de+2,ue).trim();if(this.options.removeNSPrefix){const we=Q.indexOf(":");we!==-1&&(Q=Q.substr(we+1))}this.options.transformTagName&&(Q=this.options.transformTagName(Q)),Z&&(ve=this.saveTextToParentTag(ve,Z,_e));const te=_e.substring(_e.lastIndexOf(".")+1);if(Q&&this.options.unpairedTags.indexOf(Q)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${Q}>`);let fe=0;te&&this.options.unpairedTags.indexOf(te)!==-1?(fe=_e.lastIndexOf(".",_e.lastIndexOf(".")-1),this.tagsNodeStack.pop()):fe=_e.lastIndexOf("."),_e=_e.substring(0,fe),Z=this.tagsNodeStack.pop(),ve="",de=ue}else if(j[de+1]==="?"){let ue=V(j,de,!1,"?>");if(!ue)throw new Error("Pi Tag is not closed.");if(ve=this.saveTextToParentTag(ve,Z,_e),!(this.options.ignoreDeclaration&&ue.tagName==="?xml"||this.options.ignorePiTags)){const Q=new f(ue.tagName);Q.add(this.options.textNodeName,""),ue.tagName!==ue.tagExp&&ue.attrExpPresent&&(Q[":@"]=this.buildAttributesMap(ue.tagExp,_e,ue.tagName)),this.addChild(Z,Q,_e)}de=ue.closeIndex+1}else if(j.substr(de+1,3)==="!--"){const ue=X(j,"-->",de+4,"Comment is not closed.");if(this.options.commentPropName){const Q=j.substring(de+4,ue-2);ve=this.saveTextToParentTag(ve,Z,_e),Z.add(this.options.commentPropName,[{[this.options.textNodeName]:Q}])}de=ue}else if(j.substr(de+1,2)==="!D"){const ue=u(j,de);this.docTypeEntities=ue.entities,de=ue.i}else if(j.substr(de+1,2)==="!["){const ue=X(j,"]]>",de,"CDATA is not closed.")-2,Q=j.substring(de+9,ue);if(ve=this.saveTextToParentTag(ve,Z,_e),this.options.cdataPropName)Z.add(this.options.cdataPropName,[{[this.options.textNodeName]:Q}]);else{let te=this.parseTextData(Q,Z.tagname,_e,!0,!1,!0);te==null&&(te=""),Z.add(this.options.textNodeName,te)}de=ue+2}else{let ue=V(j,de,this.options.removeNSPrefix),Q=ue.tagName;const te=ue.rawTagName;let fe=ue.tagExp,we=ue.attrExpPresent,Ee=ue.closeIndex;this.options.transformTagName&&(Q=this.options.transformTagName(Q)),Z&&ve&&Z.tagname!=="!xml"&&(ve=this.saveTextToParentTag(ve,Z,_e,!1));const Ne=Z;if(Ne&&this.options.unpairedTags.indexOf(Ne.tagname)!==-1&&(Z=this.tagsNodeStack.pop(),_e=_e.substring(0,_e.lastIndexOf("."))),Q!==ee.tagname&&(_e+=_e?"."+Q:Q),this.isItStopNode(this.options.stopNodes,_e,Q)){let Ae="";if(fe.length>0&&fe.lastIndexOf("/")===fe.length-1)de=ue.closeIndex;else if(this.options.unpairedTags.indexOf(Q)!==-1)de=ue.closeIndex;else{const Ze=this.readStopNodeData(j,te,Ee+1);if(!Ze)throw new Error(`Unexpected end of ${te}`);de=Ze.i,Ae=Ze.tagContent}const Re=new f(Q);Q!==fe&&we&&(Re[":@"]=this.buildAttributesMap(fe,_e,Q)),Ae&&(Ae=this.parseTextData(Ae,Q,_e,!0,we,!0,!0)),_e=_e.substr(0,_e.lastIndexOf(".")),Re.add(this.options.textNodeName,Ae),this.addChild(Z,Re,_e)}else{if(fe.length>0&&fe.lastIndexOf("/")===fe.length-1){Q[Q.length-1]==="/"?(Q=Q.substr(0,Q.length-1),_e=_e.substr(0,_e.length-1),fe=Q):fe=fe.substr(0,fe.length-1),this.options.transformTagName&&(Q=this.options.transformTagName(Q));const Ae=new f(Q);Q!==fe&&we&&(Ae[":@"]=this.buildAttributesMap(fe,_e,Q)),this.addChild(Z,Ae,_e),_e=_e.substr(0,_e.lastIndexOf("."))}else{const Ae=new f(Q);this.tagsNodeStack.push(Z),Q!==fe&&we&&(Ae[":@"]=this.buildAttributesMap(fe,_e,Q)),this.addChild(Z,Ae,_e),Z=Ae}ve="",de=Ee}}else ve+=j[de];return ee.child};function he(j,ee,Z){const ve=this.options.updateTag(ee.tagname,Z,ee[":@"]);ve===!1||(typeof ve=="string"&&(ee.tagname=ve),j.addChild(ee))}const Y=function(j){if(this.options.processEntities){for(let ee in this.docTypeEntities){const Z=this.docTypeEntities[ee];j=j.replace(Z.regx,Z.val)}for(let ee in this.lastEntities){const Z=this.lastEntities[ee];j=j.replace(Z.regex,Z.val)}if(this.options.htmlEntities)for(let ee in this.htmlEntities){const Z=this.htmlEntities[ee];j=j.replace(Z.regex,Z.val)}j=j.replace(this.ampEntity.regex,this.ampEntity.val)}return j};function q(j,ee,Z,ve){return j&&(ve===void 0&&(ve=Object.keys(ee.child).length===0),j=this.parseTextData(j,ee.tagname,Z,!1,ee[":@"]?Object.keys(ee[":@"]).length!==0:!1,ve),j!==void 0&&j!==""&&ee.add(this.options.textNodeName,j),j=""),j}function $(j,ee,Z){const ve="*."+Z;for(const _e in j){const de=j[_e];if(ve===de||ee===de)return!0}return!1}function se(j,ee,Z=">"){let ve,_e="";for(let de=ee;de<j.length;de++){let oe=j[de];if(ve)oe===ve&&(ve="");else if(oe==='"'||oe==="'")ve=oe;else if(oe===Z[0])if(Z[1]){if(j[de+1]===Z[1])return{data:_e,index:de}}else return{data:_e,index:de};else oe==="	"&&(oe=" ");_e+=oe}}function X(j,ee,Z,ve){const _e=j.indexOf(ee,Z);if(_e===-1)throw new Error(ve);return _e+ee.length-1}function V(j,ee,Z,ve=">"){const _e=se(j,ee+1,ve);if(!_e)return;let de=_e.data;const oe=_e.index,ue=de.search(/\s/);let Q=de,te=!0;ue!==-1&&(Q=de.substring(0,ue),de=de.substring(ue+1).trimStart());const fe=Q;if(Z){const we=Q.indexOf(":");we!==-1&&(Q=Q.substr(we+1),te=Q!==_e.data.substr(we+1))}return{tagName:Q,tagExp:de,closeIndex:oe,attrExpPresent:te,rawTagName:fe}}function E(j,ee,Z){const ve=Z;let _e=1;for(;Z<j.length;Z++)if(j[Z]==="<")if(j[Z+1]==="/"){const de=X(j,">",Z,`${ee} is not closed`);if(j.substring(Z+2,de).trim()===ee&&(_e--,_e===0))return{tagContent:j.substring(ve,Z),i:de};Z=de}else if(j[Z+1]==="?")Z=X(j,"?>",Z+1,"StopNode is not closed.");else if(j.substr(Z+1,3)==="!--")Z=X(j,"-->",Z+3,"StopNode is not closed.");else if(j.substr(Z+1,2)==="![")Z=X(j,"]]>",Z,"StopNode is not closed.")-2;else{const de=V(j,Z,">");de&&((de&&de.tagName)===ee&&de.tagExp[de.tagExp.length-1]!=="/"&&_e++,Z=de.closeIndex)}}function L(j,ee,Z){if(ee&&typeof j=="string"){const ve=j.trim();return ve==="true"?!0:ve==="false"?!1:S(j,Z)}else return m.isExist(j)?j:""}a.exports=C},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:m}=i("./OptionsBuilder"),f=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),S=i("../validator");class C{constructor(b){this.externalEntities={},this.options=m(b)}parse(b,T){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const O=S.validate(b,T);if(O!==!0)throw Error(`${O.err.msg}:${O.err.line}:${O.err.col}`)}const F=new f(this.options);F.addExternalEntities(this.externalEntities);const B=F.parseXml(b);return this.options.preserveOrder||B===void 0?B:u(B,this.options)}addEntity(b,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(T==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=T}}a.exports=C},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function m(P,b){return f(P,b)}function f(P,b,T){let F;const B={};for(let O=0;O<P.length;O++){const he=P[O],Y=u(he);let q="";if(T===void 0?q=Y:q=T+"."+Y,Y===b.textNodeName)F===void 0?F=he[Y]:F+=""+he[Y];else{if(Y===void 0)continue;if(he[Y]){let $=f(he[Y],b,q);const se=C($,b);he[":@"]?S($,he[":@"],q,b):Object.keys($).length===1&&$[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?$=$[b.textNodeName]:Object.keys($).length===0&&(b.alwaysCreateTextNode?$[b.textNodeName]="":$=""),B[Y]!==void 0&&B.hasOwnProperty(Y)?(Array.isArray(B[Y])||(B[Y]=[B[Y]]),B[Y].push($)):b.isArray(Y,q,se)?B[Y]=[$]:B[Y]=$}}}return typeof F=="string"?F.length>0&&(B[b.textNodeName]=F):F!==void 0&&(B[b.textNodeName]=F),B}function u(P){const b=Object.keys(P);for(let T=0;T<b.length;T++){const F=b[T];if(F!==":@")return F}}function S(P,b,T,F){if(b){const B=Object.keys(b),O=B.length;for(let he=0;he<O;he++){const Y=B[he];F.isArray(Y,T+"."+Y,!0,!0)?P[Y]=[b[Y]]:P[Y]=b[Y]}}}function C(P,b){const{textNodeName:T}=b,F=Object.keys(P).length;return!!(F===0||F===1&&(P[T]||typeof P[T]=="boolean"||P[T]===0))}c.prettify=m},{}],13:[function(i,a,c){class m{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,S){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:S})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=m},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(m,f,u,S,C){var P,b,T=C*8-S-1,F=(1<<T)-1,B=F>>1,O=-7,he=u?C-1:0,Y=u?-1:1,q=m[f+he];for(he+=Y,P=q&(1<<-O)-1,q>>=-O,O+=T;O>0;P=P*256+m[f+he],he+=Y,O-=8);for(b=P&(1<<-O)-1,P>>=-O,O+=S;O>0;b=b*256+m[f+he],he+=Y,O-=8);if(P===0)P=1-B;else{if(P===F)return b?NaN:(q?-1:1)*(1/0);b=b+Math.pow(2,S),P=P-B}return(q?-1:1)*b*Math.pow(2,P-S)},c.write=function(m,f,u,S,C,P){var b,T,F,B=P*8-C-1,O=(1<<B)-1,he=O>>1,Y=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,q=S?0:P-1,$=S?1:-1,se=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(T=isNaN(f)?1:0,b=O):(b=Math.floor(Math.log(f)/Math.LN2),f*(F=Math.pow(2,-b))<1&&(b--,F*=2),b+he>=1?f+=Y/F:f+=Y*Math.pow(2,1-he),f*F>=2&&(b++,F/=2),b+he>=O?(T=0,b=O):b+he>=1?(T=(f*F-1)*Math.pow(2,C),b=b+he):(T=f*Math.pow(2,he-1)*Math.pow(2,C),b=0));C>=8;m[u+q]=T&255,q+=$,T/=256,C-=8);for(b=b<<C|T,B+=C;B>0;m[u+q]=b&255,q+=$,b/=256,B-=8);m[u+q-$]|=se*128}},{}],15:[function(i,a,c){const m=/^[-+]?0x[a-fA-F0-9]+$/,f=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function S(P,b={}){if(b=Object.assign({},u,b),!P||typeof P!="string")return P;let T=P.trim();if(b.skipLike!==void 0&&b.skipLike.test(T))return P;if(b.hex&&m.test(T))return Number.parseInt(T,16);{const F=f.exec(T);if(F){const B=F[1],O=F[2];let he=C(F[3]);const Y=F[4]||F[6];if(!b.leadingZeros&&O.length>0&&B&&T[2]!==".")return P;if(!b.leadingZeros&&O.length>0&&!B&&T[1]!==".")return P;{const q=Number(T),$=""+q;return $.search(/[eE]/)!==-1||Y?b.eNotation?q:P:T.indexOf(".")!==-1?$==="0"&&he===""||$===he||B&&$==="-"+he?q:P:O?he===$||B+he===$?q:P:T===$||T===B+$?q:P}}else return P}}function C(P){return P&&P.indexOf(".")!==-1&&(P=P.replace(/0+$/,""),P==="."?P="0":P[0]==="."?P="0"+P:P[P.length-1]==="."&&(P=P.substr(0,P.length-1))),P}a.exports=S},{}],16:[function(i,a,c){(function(m){(function(){var f=this&&this.__awaiter||function(T,F,B,O){function he(Y){return Y instanceof B?Y:new B(function(q){q(Y)})}return new(B||(B=Promise))(function(Y,q){function $(V){try{X(O.next(V))}catch(E){q(E)}}function se(V){try{X(O.throw(V))}catch(E){q(E)}}function X(V){V.done?Y(V.value):he(V.value).then($,se)}X((O=O.apply(T,F||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const u=i("../auth"),S=i("../config"),C=i("./_xml"),P=T=>typeof btoa>"u"?m.from(T,"binary").toString("base64"):btoa(T);function b(T,F,B){return f(this,void 0,void 0,function*(){const{apiUrl:O,authHeader:he,basicAuth:Y,userAgent:q}=(0,S.getConfig)(),$=Y&&`Basic ${P(`${Y.username}:${Y.password}`)}`,se=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let X=new URLSearchParams(F).toString();X&&(X=`?${X}`);const V=yield fetch(`${O}/api${T}${X}`,Object.assign(Object.assign({},B),{headers:Object.assign({Authorization:he||$||se||"","User-Agent":q},B==null?void 0:B.headers)})),E=V.headers.get("Content-Type");if(E!=null&&E.startsWith("application/xml")){const L=yield V.text();return yield C.xmlParser.parse(L)}if(E!=null&&E.startsWith("application/json"))return V.json();if(V.ok)return yield V.text();throw new Error(`OSM API: ${yield V.text()}`)})}c.osmFetch=b}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const m=i("fast-xml-parser");c.xmlParser=new m.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:f=>f!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const m=i("fast-xml-parser"),f=new m.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(P){return f.build({osm:{changeset:{tag:Object.entries(P).map(([b,T])=>({$k:b,$v:T}))}}})}c.createChangesetMetaXml=u;const S=(P,b,T)=>b.reduce((F,B)=>{const O={$id:B.id,$version:T?0:B.version,$changeset:P,tag:Object.entries(B.tags||{}).map(([he,Y])=>({$k:he,$v:Y}))};switch(B.type){case"node":{const he=Object.assign(Object.assign({},O),{$lat:B.lat,$lon:B.lon});return Object.assign(Object.assign({},F),{node:[...F.node,he]})}case"way":{if(!B.nodes)throw new Error("Way has no nodes");const he=Object.assign(Object.assign({},O),{nd:B.nodes.map(Y=>({$ref:Y}))});return Object.assign(Object.assign({},F),{way:[...F.way,he]})}case"relation":{if(!B.members)throw new Error("Relation has no members");const he=Object.assign(Object.assign({},O),{member:B.members.map(Y=>({$type:Y.type,$ref:Y.ref,$role:Y.role}))});return Object.assign(Object.assign({},F),{relation:[...F.relation,he]})}default:return F}},{node:[],way:[],relation:[]});function C(P,b,T){return f.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[S(P,b.create,!0)],modify:[S(P,b.modify)],delete:[Object.assign({"$if-unused":!0},S(P,b.delete))]})})}c.createOsmChangeXml=C},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const m=i("../_xml");function f(P){return{changeset:+P.$.changeset,id:+P.$.id,timestamp:P.$.timestamp,uid:+P.$.uid,user:P.$.user,version:+P.$.version,tags:P.tag?Object.fromEntries(P.tag.map(b=>[b.$.k,b.$.v])):void 0}}const u=P=>{const b=[];if(P.node){const T=P.node.map(F=>Object.assign(Object.assign({type:"node"},f(F)),{lat:+F.$.lat,lon:+F.$.lon}));b.push(...T)}if(P.way){const T=P.way.map(F=>{var B;return Object.assign(Object.assign({type:"way"},f(F)),{nodes:((B=F.nd)===null||B===void 0?void 0:B.map(O=>+O.$.ref))||[]})});b.push(...T)}if(P.relation){const T=P.relation.map(F=>{var B;return Object.assign(Object.assign({type:"relation"},f(F)),{members:((B=F.member)===null||B===void 0?void 0:B.map(O=>({ref:+O.$.ref,role:O.$.role,type:O.$.type})))||[]})});b.push(...T)}return b};function S(P){var b,T,F;return{create:((b=P.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(u))||[],modify:((T=P.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(u))||[],delete:((F=P.osmChange[0].delete)===null||F===void 0?void 0:F.flatMap(u))||[]}}c.parseOsmChangeJson=S;function C(P){const b=m.xmlParser.parse(P);return S(b)}c.parseOsmChangeXml=C},{"../_xml":17}],20:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,P,b){function T(F){return F instanceof P?F:new P(function(B){B(F)})}return new(P||(P=Promise))(function(F,B){function O(q){try{Y(b.next(q))}catch($){B($)}}function he(q){try{Y(b.throw(q))}catch($){B($)}}function Y(q){q.done?F(q.value):T(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const f=i("../_osmFetch");function u(S,C){return m(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/changeset/${S}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(C)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,a,c){var m=this&&this.__awaiter||function(C,P,b,T){function F(B){return B instanceof b?B:new b(function(O){O(B)})}return new(b||(b=Promise))(function(B,O){function he($){try{q(T.next($))}catch(se){O(se)}}function Y($){try{q(T.throw($))}catch(se){O(se)}}function q($){$.done?B($.value):F($.value).then(he,Y)}q((T=T.apply(C,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const f=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function S(C){return m(this,void 0,void 0,function*(){const P=yield(0,f.osmFetch)(`/0.6/changeset/${C}/download`);return(0,u.parseOsmChangeJson)(P)})}c.getChangesetDiff=S},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var m=this&&this.__awaiter||function(b,T,F,B){function O(he){return he instanceof F?he:new F(function(Y){Y(he)})}return new(F||(F=Promise))(function(he,Y){function q(X){try{se(B.next(X))}catch(V){Y(V)}}function $(X){try{se(B.throw(X))}catch(V){Y(V)}}function se(X){X.done?he(X.value):O(X.value).then(q,$)}se((B=B.apply(b,T||[])).next())})},f=this&&this.__rest||function(b,T){var F={};for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&T.indexOf(B)<0&&(F[B]=b[B]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,B=Object.getOwnPropertySymbols(b);O<B.length;O++)T.indexOf(B[O])<0&&Object.prototype.propertyIsEnumerable.call(b,B[O])&&(F[B[O]]=b[B[O]]);return F};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const u=i("../_osmFetch"),S=b=>{var T;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(F=>[F.$.k,F.$.v])),discussion:(T=b.discussion)===null||T===void 0?void 0:T[0].comment.map(F=>({date:new Date(F.$.date),user:F.$.user,uid:F.$.uid,text:F.text[0]}))}};function C(b){var T;return m(this,void 0,void 0,function*(){const{only:F}=b,B=f(b,["only"]);return((T=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},F&&{[F]:!0}),B))).osm[0].changeset)===null||T===void 0?void 0:T.map(S))||[]})}c.listChangesets=C;function P(b,T=!0){return m(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:T})).osm[0].changeset.map(S)[0]})}c.getChangeset=P},{"../_osmFetch":16}],23:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(C,P,b,T){T===void 0&&(T=b);var F=Object.getOwnPropertyDescriptor(P,b);(!F||("get"in F?!P.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return P[b]}}),Object.defineProperty(C,T,F)}:function(C,P,b,T){T===void 0&&(T=b),C[T]=P[b]}),f=this&&this.__exportStar||function(C,P){for(var b in C)b!=="default"&&!Object.prototype.hasOwnProperty.call(P,b)&&m(P,C,b)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,f(i("./createChangesetComment"),c),f(i("./getChangesetDiff"),c),f(i("./getChangesets"),c),f(i("./uploadChangeset"),c);var u=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var S=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return S.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var m=this&&this.__awaiter||function(C,P,b,T){function F(B){return B instanceof b?B:new b(function(O){O(B)})}return new(b||(b=Promise))(function(B,O){function he($){try{q(T.next($))}catch(se){O(se)}}function Y($){try{q(T.throw($))}catch(se){O(se)}}function q($){$.done?B($.value):F($.value).then(he,Y)}q((T=T.apply(C,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const f=i("../_osmFetch"),u=i("./_createOsmChangeXml");function S(C,P){return m(this,void 0,void 0,function*(){const b=(0,u.createChangesetMetaXml)(C),T=+(yield(0,f.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),F=(0,u.createOsmChangeXml)(T,P);return yield(0,f.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:F,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,f.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}c.uploadChangeset=S},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,P,b){function T(F){return F instanceof P?F:new P(function(B){B(F)})}return new(P||(P=Promise))(function(F,B){function O(q){try{Y(b.next(q))}catch($){B($)}}function he(q){try{Y(b.throw(q))}catch($){B($)}}function Y(q){q.done?F(q.value):T(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const f=i("./_osmFetch");function u(){var S;return m(this,void 0,void 0,function*(){const C=yield(0,f.osmFetch)("/capabilities");return{limits:{maxArea:+C.osm[0].api[0].area[0].$.maximum,maxNoteArea:+C.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+C.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+C.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+C.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+C.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((S=C.osm[0].policy[0].imagery[0].blacklist)===null||S===void 0?void 0:S.map(b=>b.$.regex))||[]}}})}c.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,a,c){var m=this&&this.__awaiter||function(F,B,O,he){function Y(q){return q instanceof O?q:new O(function($){$(q)})}return new(O||(O=Promise))(function(q,$){function se(E){try{V(he.next(E))}catch(L){$(L)}}function X(E){try{V(he.throw(E))}catch(L){$(L)}}function V(E){E.done?q(E.value):Y(E.value).then(se,X)}V((he=he.apply(F,B||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const f=i("./_osmFetch");function u(F,B,O){return m(this,void 0,void 0,function*(){const he=O&&F!=="node"?"/full":"";return(yield(0,f.osmFetch)(`/0.6/${F}/${B}${he}.json`)).elements})}c.getFeature=u;function S(F,B){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${F}s.json?${F}s=${B.join(",")}`)).elements})}c.getFeatures=S;function C(F,B,O){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${F}/${B}/${O}.json`)).elements[0]})}c.getFeatureAtVersion=C;function P(F,B){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${F}/${B}/history.json`)).elements})}c.getFeatureHistory=P;function b(F){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/node/${F}/ways.json`)).elements})}c.getWaysForNode=b;function T(F,B){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${F}/${B}/relations.json`)).elements})}c.getRelationsForElement=T},{"./_osmFetch":16}],27:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,P,b){function T(F){return F instanceof P?F:new P(function(B){B(F)})}return new(P||(P=Promise))(function(F,B){function O(q){try{Y(b.next(q))}catch($){B($)}}function he(q){try{Y(b.throw(q))}catch($){B($)}}function Y(q){q.done?F(q.value):T(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const f=i("./_osmFetch");function u(S){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)("/0.6/map.json",{bbox:S})).elements})}c.getMapData=u},{"./_osmFetch":16}],28:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,P,b){function T(F){return F instanceof P?F:new P(function(B){B(F)})}return new(P||(P=Promise))(function(F,B){function O(q){try{Y(b.next(q))}catch($){B($)}}function he(q){try{Y(b.throw(q))}catch($){B($)}}function Y(q){q.done?F(q.value):T(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const f=i("./changesets");function u(S){return m(this,void 0,void 0,function*(){const C=yield(0,f.listChangesets)({display_name:S});if(!C.length)throw new Error("Could not get uid because the user has never edited the map");return C[0].uid})}c.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,a,c){var m=this&&this.__awaiter||function(C,P,b,T){function F(B){return B instanceof b?B:new b(function(O){O(B)})}return new(b||(b=Promise))(function(B,O){function he($){try{q(T.next($))}catch(se){O(se)}}function Y($){try{q(T.throw($))}catch(se){O(se)}}function q($){$.done?B($.value):F($.value).then(he,Y)}q((T=T.apply(C,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const f=i("./_osmFetch");function u(C){return m(this,void 0,void 0,function*(){const P=yield(0,f.osmFetch)(`/0.6/user/${C==="me"?"details":C}.json`);return Object.assign(Object.assign({},P.user),{account_created:new Date(P.user.account_created)})})}c.getUser=u;function S(C){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)("/0.6/users",{users:C})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}c.getUsers=S},{"./_osmFetch":16}],30:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,P){P===void 0&&(P=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,P,b)}:function(u,S,C,P){P===void 0&&(P=C),u[P]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./changesets"),c),f(i("./notes"),c),f(i("./getCapabilities"),c),f(i("./getFeature"),c),f(i("./getMapData"),c),f(i("./getUIdFromDisplayName"),c),f(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var m=this&&this.__awaiter||function(T,F,B,O){function he(Y){return Y instanceof B?Y:new B(function(q){q(Y)})}return new(B||(B=Promise))(function(Y,q){function $(V){try{X(O.next(V))}catch(E){q(E)}}function se(V){try{X(O.throw(V))}catch(E){q(E)}}function X(V){V.done?Y(V.value):he(V.value).then($,se)}X((O=O.apply(T,F||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const f=i("../_osmFetch"),u=T=>{const[F,B]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:B,lng:F}})};function S(T,F){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/notes${F?"/search":""}.json`,T)).features.map(u)})}function C(T){return S(T,!0)}c.getNotesForQuery=C;function P(T){return S({bbox:T},!1)}c.getNotesForArea=P;function b(T){return m(this,void 0,void 0,function*(){const F=yield(0,f.osmFetch)(`/0.6/notes/${T}.json`);return u(F)})}c.getNote=b},{"../_osmFetch":16}],32:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,P){P===void 0&&(P=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,P,b)}:function(u,S,C,P){P===void 0&&(P=C),u[P]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./getNotes"),c),f(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var m=this&&this.__awaiter||function(P,b,T,F){function B(O){return O instanceof T?O:new T(function(he){he(O)})}return new(T||(T=Promise))(function(O,he){function Y(se){try{$(F.next(se))}catch(X){he(X)}}function q(se){try{$(F.throw(se))}catch(X){he(X)}}function $(se){se.done?O(se.value):B(se.value).then(Y,q)}$((F=F.apply(P,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const f=i("../_osmFetch");function u(P,b,T){return m(this,void 0,void 0,function*(){yield(0,f.osmFetch)("/0.6/notes",{lat:P,lon:b,text:T})})}c.createNote=u;function S(P,b){return m(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/notes/${P}/comment`,{text:b})})}c.commentOnNote=S;function C(P,b){return m(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/notes/${P}/reopen`,{text:b})})}c.reopenNote=C},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function m(f){let u=!1;return new Promise((S,C)=>{const[P,b]=[600,550],T=Object.entries({width:P,height:b,left:window.screen.width/2-P/2,top:window.screen.height/2-b/2}).map(([O,he])=>`${O}=${he}`).join(","),F=window.open("about:blank","oauth_window",T);if(!F)throw new Error("Popup was blocked");F.location=f,window.authComplete=O=>{S(O),u=!0};const B=setInterval(()=>{F.closed&&(u||C(new Error("Cancelled")),clearInterval(B))},500)})}c.createPopup=m},{}],35:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,P,b){function T(F){return F instanceof P?F:new P(function(B){B(F)})}return new(P||(P=Promise))(function(F,B){function O(q){try{Y(b.next(q))}catch($){B($)}}function he(q){try{Y(b.throw(q))}catch($){B($)}}function Y(q){q.done?F(q.value):T(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const f=i("./helpers");function u(S,{options:C,pkceVerifier:P,state:b}){return m(this,void 0,void 0,function*(){const T=new URL(S).searchParams,F=T.get("error_description"),B=T.get("code"),O=T.get("state");if(F)throw new Error(F);if(!B)throw new Error("No code in OAuth response");if(!P||!b)throw new Error("No login in progress");if(b!==O)throw new Error("State Mismatch");const he={grant_type:"authorization_code",code:B,redirect_uri:C.redirectUrl,client_id:C.clientId,code_verifier:P},Y=`${(0,f.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(he).toString()}`,$=yield(yield fetch(Y,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in $)throw new Error($.error_description);const se={issuedAt:new Date($.created_at*1e3).toISOString(),accessToken:$.access_token,scopes:$.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(se)),delete window.authComplete,se})}c.exchangeCode=u},{"./helpers":36}],36:[function(i,a,c){var m=this&&this.__awaiter||function(P,b,T,F){function B(O){return O instanceof T?O:new T(function(he){he(O)})}return new(T||(T=Promise))(function(O,he){function Y(se){try{$(F.next(se))}catch(X){he(X)}}function q(se){try{$(F.throw(se))}catch(X){he(X)}}function $(se){se.done?O(se.value):B(se.value).then(Y,q)}$((F=F.apply(P,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const f=i("../config");function u(P){return m(this,void 0,void 0,function*(){const b=new TextEncoder().encode(P),T=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(T))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=u;function S(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(P=>`0${P.toString(16)}`.slice(-2)).join("")}c.getRandomString=S;function C(){let P=(0,f.getConfig)().apiUrl;return P==="https://api.openstreetmap.org"&&(P="https://www.openstreetmap.org"),P}c.getOAuthBaseUrl=C},{"../config":39}],37:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,P){P===void 0&&(P=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,P,b)}:function(u,S,C,P){P===void 0&&(P=C),u[P]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var m=this&&this.__awaiter||function(F,B,O,he){function Y(q){return q instanceof O?q:new O(function($){$(q)})}return new(O||(O=Promise))(function(q,$){function se(E){try{V(he.next(E))}catch(L){$(L)}}function X(E){try{V(he.throw(E))}catch(L){$(L)}}function V(E){E.done?q(E.value):Y(E.value).then(se,X)}V((he=he.apply(F,B||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const f=i("./createPopup"),u=i("./exchangeCode"),S=i("./helpers");function C(F){return m(this,void 0,void 0,function*(){if(!F.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!F.clientId)throw new Error("You must include the 'clientId' option");if(!F.scopes)throw new Error("You must include the 'scopes' option");const B=(0,S.getRandomString)(),O=(0,S.getRandomString)(),he=yield(0,S.sha256)(O),Y={scope:F.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:B,redirect_uri:F.redirectUrl,client_id:F.clientId,code_challenge_method:"S256",code_challenge:he},q=`${(0,S.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(Y).toString()}`,$={state:B,pkceVerifier:O,options:F};if(F.mode==="popup"){const se=yield(0,f.createPopup)(q);return(0,u.exchangeCode)(se,$)}if(F.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify($)),window.location.replace(q);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=C,c.authReady=m(void 0,void 0,void 0,function*(){var F;if(typeof window>"u")return;const B=window.location.href,O=localStorage.getItem("__osmAuthTemp");if(new URL(B).searchParams.get("code")){if(!((F=window.opener)===null||F===void 0)&&F.authComplete)window.opener.authComplete(B),window.close();else if(O)try{const he=JSON.parse(O);yield(0,u.exchangeCode)(B,he),localStorage.removeItem("__osmAuthTemp")}catch(he){console.error("OSM Auth Error",he)}}});const P=()=>{try{const F=localStorage.getItem("__osmAuth");return F?JSON.parse(F).accessToken:void 0}catch{return}};c.getAuthToken=P;const b=()=>!!(0,c.getAuthToken)();c.isLoggedIn=b;function T(){localStorage.removeItem("__osmAuth")}c.logout=T},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const m={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},f=()=>m;c.getConfig=f;function u(S){Object.assign(m,S)}c.configure=u},{}],40:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,P){P===void 0&&(P=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,P,b)}:function(u,S,C,P){P===void 0&&(P=C),u[P]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./api"),c),f(i("./auth"),c),f(i("./config"),c),f(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,P){P===void 0&&(P=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,P,b)}:function(u,S,C,P){P===void 0&&(P=C),u[P]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./changesets"),c),f(i("./features"),c),f(i("./general"),c),f(i("./notes"),c),f(i("./osmPatch"),c),f(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(EI);var Ps=EI.exports;const TI=()=>{const[e,t]=vt.useState(!1);vt.useEffect(()=>{t(Ps.isLoggedIn())},[]);const i=vt.useCallback(()=>{(async()=>(await Ps.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Ps.isLoggedIn()),window.location.reload()))()},[]),a=vt.useCallback(()=>{(async()=>(Ps.logout(),t(!1)))()},[]);return yt.jsx(yt.Fragment,{children:e?yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},nF=()=>{const[e,t]=vt.useState(!1),[i,a]=vt.useState(void 0);return vt.useEffect(()=>{t(Ps.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const c=await Ps.getUser("me");a(c)})()},[e]),yt.jsx(yt.Fragment,{children:i?yt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):yt.jsx("img",{})})},rF=()=>{const[e,t]=vt.useState(!1),[i,a]=vt.useState(void 0);return vt.useEffect(()=>{t(Ps.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const c=await Ps.getUser("me");a(c)})()},[e]),yt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[yt.jsxs("div",{children:[yt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?yt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):yt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),yt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[yt.jsx("div",{children:yt.jsx(nF,{})}),yt.jsx("div",{children:yt.jsx(TI,{})})]})]})},CI=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return yt.jsxs(yt.Fragment,{children:[yt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",yt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},iF=({feature:e})=>yt.jsx(yt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return yt.jsxs("div",{className:t,children:[yt.jsx("span",{className:"underline",children:t})," = ",yt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Zf(e,t,i){return parseInt(e.substr(t,i),16)}function II(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function K0(e,t,i){return i=i<0?i+6:i>6?i-6:i,II(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function oF(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],m=e[3],f=e[4]||"";t="#"+a+a+c+c+m+m+f+f}return(i==7||i>8)&&(t=e),t}}function sF(e,t,i){let a;if(t==0){const c=II(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,m=i*2-c;a=K0(m,c,e*6+2)+K0(m,c,e*6)+K0(m,c,e*6-2)}return"#"+a}function Uf(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,sF(e,t,i)}const aF=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},bS={V:"jdenticon_config",n:"config"};var lF={};function uF(e,t){const i=typeof e=="object"&&e||lF[bS.n]||aF[bS.V]||{},a=i.lightness||{},c=i.saturation||{},m="color"in c?c.color:c,f=c.grayscale,u=i.backColor,S=i.padding;function C(b,T){let F=a[b];return F&&F.length>1||(F=T),function(B){return B=F[0]+B*(F[1]-F[0]),B<0?0:B>1?1:B}}function P(b){const T=i.hues;let F;return T&&T.length>0&&(F=T[0|.999*b*T.length]),typeof F=="number"?(F/360%1+1)%1:b}return{W:P,o:typeof m=="number"?m:.5,D:typeof f=="number"?f:0,p:C("color",[.4,.8]),F:C("grayscale",[.3,.9]),G:oF(u),X:typeof e=="number"?e:typeof S=="number"?S:t}}let mm=class{constructor(t,i){this.x=t,this.y=i}};class AI{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const m=this.q+this.H,f=this.t+this.H,u=this.Y;return u===1?new mm(m-i-(c||0),this.t+t):u===2?new mm(m-t-(a||0),f-i-(c||0)):u===3?new mm(this.q+i,f-t-(a||0)):new mm(this.q+t,this.t+i)}}const cF=new AI(0,0,0,0);class hF{constructor(t){this.J=t,this.u=cF}g(t,i){const a=i?-2:2,c=[];for(let m=i?t.length-2:0;m<t.length&&m>=0;m+=a)c.push(this.u.I(t[m],t[m+1]));this.J.g(c)}h(t,i,a,c){const m=this.u.I(t,i,a,a);this.J.h(m,a,c)}i(t,i,a,c,m){this.g([t,i,t+a,i,t+a,i+c,t,i+c],m)}j(t,i,a,c,m,f){const u=[t+a,i,t+a,i+c,t,i+c,t,i];u.splice((m||0)%4*2,2),this.g(u,f)}K(t,i,a,c,m){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],m)}}function fF(e,t,i,a){e=e%14;let c,m,f,u,S,C;e?e==1?(f=0|i*.5,u=0|i*.8,t.j(i-f,0,f,u,2)):e==2?(f=0|i/3,t.i(f,f,i-f,i-f)):e==3?(S=i*.1,C=i<6?1:i<8?2:0|i*.25,S=S>1?0|S:S>.5?1:S,t.i(C,C,i-S-C,i-S-C)):e==4?(m=0|i*.15,f=0|i*.5,t.h(i-f-m,i-f-m,f)):e==5?(S=i*.1,C=S*4,C>3&&(C=0|C),t.i(0,0,i,i),t.g([C,C,i-S,C,C+(i-C-S)/2,i-S],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(S=i*.14,C=i<4?1:i<6?2:0|i*.35,S=i<8?S:0|S,t.i(0,0,i,i),t.i(C,C,i-C-S,i-C-S,!0)):e==10?(S=i*.12,C=S*3,t.i(0,0,i,i),t.h(C,C,i-S-C,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(m=i*.25,t.i(0,0,i,i),t.K(m,m,i-m,i-m,!0)):!a&&(m=i*.4,f=i*1.2,t.h(m,m,f)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function SS(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function dF(e,t){return e=t.W(e),[Uf(e,t.D,t.F(0)),Uf(e,t.o,t.p(.5)),Uf(e,t.D,t.F(1)),Uf(e,t.o,t.p(1)),Uf(e,t.o,t.p(0))]}function pF(e,t,i){const a=uF(i,.08);a.G&&e.m(a.G);let c=e.k;const m=.5+c*a.X|0;c-=m*2;const f=new hF(e),u=0|c/4,S=0|m+c/2-u*2,C=0|m+c/2-u*2;function P(he,Y,q,$,se){const X=Zf(t,q,1);let V=$?Zf(t,$,1):0;e.L(T[F[he]]);for(let E=0;E<se.length;E++)f.u=new AI(S+se[E][0]*u,C+se[E][1]*u,u,V++%4),Y(X,f,u,E);e.M()}const b=Zf(t,-7)/268435455,T=dF(b,a),F=[];let B;function O(he){if(he.indexOf(B)>=0){for(let Y=0;Y<he.length;Y++)if(F.indexOf(he[Y])>=0)return!0}}for(let he=0;he<3;he++)B=Zf(t,8+he,1)%T.length,(O([0,4])||O([2,3]))&&(B=1),F.push(B);P(0,SS,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),P(1,SS,4,5,[[0,0],[3,0],[3,3],[0,3]]),P(2,fF,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function mF(e){var a=0,c=0,m=encodeURI(e)+"%80",f=[],u,S=[],C=1732584193,P=4023233417,b=~C,T=~P,F=3285377520,B=[C,P,b,T,F],O=0,he="";function Y(q,$){return q<<$|q>>>32-$}for(;a<m.length;c++)f[c>>2]=f[c>>2]|(m[a]=="%"?parseInt(m.substring(a+1,a+=3),16):m.charCodeAt(a++))<<(3-(c&3))*8;for(u=((c+7>>6)+1)*16,f[u-1]=c*8-8;O<u;O+=16){for(a=0;a<80;a++)c=Y(C,5)+F+(a<20?(P&b^~P&T)+1518500249:a<40?(P^b^T)+1859775393:a<60?(P&b^P&T^b&T)+2400959708:(P^b^T)+3395469782)+(S[a]=a<16?f[O+a]|0:Y(S[a-3]^S[a-8]^S[a-14]^S[a-16],1)),F=T,T=b,b=Y(P,30),P=C,C=c;B[0]=C=B[0]+C|0,B[1]=P=B[1]+P|0,B[2]=b=B[2]+b|0,B[3]=T=B[3]+T|0,B[4]=F=B[4]+F|0}for(a=0;a<40;a++)he+=(B[a>>3]>>>(7-(a&7))*4&15).toString(16);return he}function gF(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function yF(e){return mF(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function Uc(e){return(e*10+.5|0)/10}class vF{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Uc(t[a].x)+" "+Uc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,m=Uc(i/2),f=Uc(i),u="a"+m+","+m+" 0 1,"+c+" ";this.v+="M"+Uc(t.x)+" "+Uc(t.y+i/2)+u+f+",0"+u+-f+",0"}}class _F{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Zf(i[2],0)/255:1;this.O.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new vF)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.O.P(i,t[i].v)}}const xF={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class wF{constructor(t){this.k=t,this.C='<svg xmlns="'+xF.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}P(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function bF(e,t,i){const a=new wF(t);return pF(new _F(a),gF(e)||yF(e),i),a.toString()}const SF=({feature:e,size:t})=>e.properties===null?null:yt.jsx(yt.Fragment,{children:e.properties.userIconHref.length>0?yt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):yt.jsx("span",{dangerouslySetInnerHTML:{__html:bF(e.properties.user||"noname",t)}})}),EF=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?yt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var TF={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const CF=({viewState:e})=>{const[t,i]=vt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return vt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),yt.jsx(yt.Fragment,{children:e&&t&&yt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[yt.jsx(ca,{icon:TF,style:{padding:"0px 3px"}}),yt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var PI={};class Ui{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const m=i[c],f=t+m,u=Math.abs(t)<Math.abs(m)?t-(f-m):m-(f-t);u&&(i[a++]=u),t=f}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,m,f=0;if(i>0){for(f=t[--i];i>0&&(a=f,c=t[--i],f=a+c,m=c-(f-a),!m););i>0&&(m<0&&t[i-1]<0||m>0&&t[i-1]>0)&&(c=m*2,a=f+c,c==a-f&&(f=a))}return f}}function*IF(e){for(const t of e)yield*t}function kI(e){return Array.from(IF(e))}function uh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,m=new Array(c);++a<c;)m[a]=e+a*i;return m}var cn=1e-6,Dd=1e-12,zn=Math.PI,jr=zn/2,wg=zn/4,no=zn*2,er=180/zn,dn=zn/180,Bn=Math.abs,Dh=Math.atan,ro=Math.atan2,on=Math.cos,gm=Math.ceil,MI=Math.exp,k_=Math.hypot,bg=Math.log,Y0=Math.pow,Jt=Math.sin,as=Math.sign||function(e){return e>0?1:e<0?-1:0},hi=Math.sqrt,gx=Math.tan;function zI(e){return e>1?0:e<-1?zn:Math.acos(e)}function io(e){return e>1?jr:e<-1?-jr:Math.asin(e)}function ES(e){return(e=Jt(e/2))*e}function Cr(){}function Sg(e,t){e&&CS.hasOwnProperty(e.type)&&CS[e.type](e,t)}var TS={Feature:function(e,t){Sg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)Sg(i[a].geometry,t)}},CS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){M_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)M_(i[a],t,0)},Polygon:function(e,t){IS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)IS(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)Sg(i[a],t)}};function M_(e,t,i){var a=-1,c=e.length-i,m;for(t.lineStart();++a<c;)m=e[a],t.point(m[0],m[1],m[2]);t.lineEnd()}function IS(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)M_(e[i],t,1);t.polygonEnd()}function Is(e,t){e&&TS.hasOwnProperty(e.type)?TS[e.type](e,t):Sg(e,t)}var Eg=new Ui,Tg=new Ui,RI,FI,z_,R_,F_,ha={point:Cr,lineStart:Cr,lineEnd:Cr,polygonStart:function(){Eg=new Ui,ha.lineStart=AF,ha.lineEnd=PF},polygonEnd:function(){var e=+Eg;Tg.add(e<0?no+e:e),this.lineStart=this.lineEnd=this.point=Cr},sphere:function(){Tg.add(no)}};function AF(){ha.point=kF}function PF(){OI(RI,FI)}function kF(e,t){ha.point=OI,RI=e,FI=t,e*=dn,t*=dn,z_=e,R_=on(t=t/2+wg),F_=Jt(t)}function OI(e,t){e*=dn,t*=dn,t=t/2+wg;var i=e-z_,a=i>=0?1:-1,c=a*i,m=on(t),f=Jt(t),u=F_*f,S=R_*m+u*on(c),C=u*a*Jt(c);Eg.add(ro(C,S)),z_=e,R_=m,F_=f}function MF(e){return Tg=new Ui,Is(e,ha),Tg*2}function Cg(e){return[ro(e[1],e[0]),io(e[2])]}function ec(e){var t=e[0],i=e[1],a=on(i);return[a*on(t),a*Jt(t),Jt(i)]}function ym(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ph(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function J0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function vm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ig(e){var t=hi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Er,_o,Fr,Lo,Bu,LI,jI,vh,hd,Ll,Ya,Ba={point:O_,lineStart:AS,lineEnd:PS,polygonStart:function(){Ba.point=BI,Ba.lineStart=zF,Ba.lineEnd=RF,hd=new Ui,ha.polygonStart()},polygonEnd:function(){ha.polygonEnd(),Ba.point=O_,Ba.lineStart=AS,Ba.lineEnd=PS,Eg<0?(Er=-(Fr=180),_o=-(Lo=90)):hd>cn?Lo=90:hd<-cn&&(_o=-90),Ya[0]=Er,Ya[1]=Fr},sphere:function(){Er=-(Fr=180),_o=-(Lo=90)}};function O_(e,t){Ll.push(Ya=[Er=e,Fr=e]),t<_o&&(_o=t),t>Lo&&(Lo=t)}function DI(e,t){var i=ec([e*dn,t*dn]);if(vh){var a=Ph(vh,i),c=[a[1],-a[0],0],m=Ph(c,a);Ig(m),m=Cg(m);var f=e-Bu,u=f>0?1:-1,S=m[0]*er*u,C,P=Bn(f)>180;P^(u*Bu<S&&S<u*e)?(C=m[1]*er,C>Lo&&(Lo=C)):(S=(S+360)%360-180,P^(u*Bu<S&&S<u*e)?(C=-m[1]*er,C<_o&&(_o=C)):(t<_o&&(_o=t),t>Lo&&(Lo=t))),P?e<Bu?Oo(Er,e)>Oo(Er,Fr)&&(Fr=e):Oo(e,Fr)>Oo(Er,Fr)&&(Er=e):Fr>=Er?(e<Er&&(Er=e),e>Fr&&(Fr=e)):e>Bu?Oo(Er,e)>Oo(Er,Fr)&&(Fr=e):Oo(e,Fr)>Oo(Er,Fr)&&(Er=e)}else Ll.push(Ya=[Er=e,Fr=e]);t<_o&&(_o=t),t>Lo&&(Lo=t),vh=i,Bu=e}function AS(){Ba.point=DI}function PS(){Ya[0]=Er,Ya[1]=Fr,Ba.point=O_,vh=null}function BI(e,t){if(vh){var i=e-Bu;hd.add(Bn(i)>180?i+(i>0?360:-360):i)}else LI=e,jI=t;ha.point(e,t),DI(e,t)}function zF(){ha.lineStart()}function RF(){BI(LI,jI),ha.lineEnd(),Bn(hd)>cn&&(Er=-(Fr=180)),Ya[0]=Er,Ya[1]=Fr,vh=null}function Oo(e,t){return(t-=e)<0?t+360:t}function FF(e,t){return e[0]-t[0]}function kS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function OF(e){var t,i,a,c,m,f,u;if(Lo=Fr=-(Er=_o=1/0),Ll=[],Is(e,Ba),i=Ll.length){for(Ll.sort(FF),t=1,a=Ll[0],m=[a];t<i;++t)c=Ll[t],kS(a,c[0])||kS(a,c[1])?(Oo(a[0],c[1])>Oo(a[0],a[1])&&(a[1]=c[1]),Oo(c[0],a[1])>Oo(a[0],a[1])&&(a[0]=c[0])):m.push(a=c);for(f=-1/0,i=m.length-1,t=0,a=m[i];t<=i;a=c,++t)c=m[t],(u=Oo(a[1],c[0]))>f&&(f=u,Er=c[0],Fr=a[1])}return Ll=Ya=null,Er===1/0||_o===1/0?[[NaN,NaN],[NaN,NaN]]:[[Er,_o],[Fr,Lo]]}var qf,Ag,Pg,kg,Mg,zg,Rg,Fg,L_,j_,D_,NI,UI,Ji,Qi,eo,ks={sphere:Cr,point:yx,lineStart:MS,lineEnd:zS,polygonStart:function(){ks.lineStart=DF,ks.lineEnd=BF},polygonEnd:function(){ks.lineStart=MS,ks.lineEnd=zS}};function yx(e,t){e*=dn,t*=dn;var i=on(t);Qd(i*on(e),i*Jt(e),Jt(t))}function Qd(e,t,i){++qf,Pg+=(e-Pg)/qf,kg+=(t-kg)/qf,Mg+=(i-Mg)/qf}function MS(){ks.point=LF}function LF(e,t){e*=dn,t*=dn;var i=on(t);Ji=i*on(e),Qi=i*Jt(e),eo=Jt(t),ks.point=jF,Qd(Ji,Qi,eo)}function jF(e,t){e*=dn,t*=dn;var i=on(t),a=i*on(e),c=i*Jt(e),m=Jt(t),f=ro(hi((f=Qi*m-eo*c)*f+(f=eo*a-Ji*m)*f+(f=Ji*c-Qi*a)*f),Ji*a+Qi*c+eo*m);Ag+=f,zg+=f*(Ji+(Ji=a)),Rg+=f*(Qi+(Qi=c)),Fg+=f*(eo+(eo=m)),Qd(Ji,Qi,eo)}function zS(){ks.point=yx}function DF(){ks.point=NF}function BF(){$I(NI,UI),ks.point=yx}function NF(e,t){NI=e,UI=t,e*=dn,t*=dn,ks.point=$I;var i=on(t);Ji=i*on(e),Qi=i*Jt(e),eo=Jt(t),Qd(Ji,Qi,eo)}function $I(e,t){e*=dn,t*=dn;var i=on(t),a=i*on(e),c=i*Jt(e),m=Jt(t),f=Qi*m-eo*c,u=eo*a-Ji*m,S=Ji*c-Qi*a,C=k_(f,u,S),P=io(C),b=C&&-P/C;L_.add(b*f),j_.add(b*u),D_.add(b*S),Ag+=P,zg+=P*(Ji+(Ji=a)),Rg+=P*(Qi+(Qi=c)),Fg+=P*(eo+(eo=m)),Qd(Ji,Qi,eo)}function UF(e){qf=Ag=Pg=kg=Mg=zg=Rg=Fg=0,L_=new Ui,j_=new Ui,D_=new Ui,Is(e,ks);var t=+L_,i=+j_,a=+D_,c=k_(t,i,a);return c<Dd&&(t=zg,i=Rg,a=Fg,Ag<cn&&(t=Pg,i=kg,a=Mg),c=k_(t,i,a),c<Dd)?[NaN,NaN]:[ro(i,t)*er,io(a/c)*er]}function $c(e){return function(){return e}}function B_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function N_(e,t){return[Bn(e)>zn?e+Math.round(-e/no)*no:e,t]}N_.invert=N_;function vx(e,t,i){return(e%=no)?t||i?B_(FS(e),OS(t,i)):FS(e):t||i?OS(t,i):N_}function RS(e){return function(t,i){return t+=e,[t>zn?t-no:t<-zn?t+no:t,i]}}function FS(e){var t=RS(e);return t.invert=RS(-e),t}function OS(e,t){var i=on(e),a=Jt(e),c=on(t),m=Jt(t);function f(u,S){var C=on(S),P=on(u)*C,b=Jt(u)*C,T=Jt(S),F=T*i+P*a;return[ro(b*c-F*m,P*i-T*a),io(F*c+b*m)]}return f.invert=function(u,S){var C=on(S),P=on(u)*C,b=Jt(u)*C,T=Jt(S),F=T*c-b*m;return[ro(b*c+T*m,P*i+F*a),io(F*i-P*a)]},f}function VI(e){e=vx(e[0]*dn,e[1]*dn,e.length>2?e[2]*dn:0);function t(i){return i=e(i[0]*dn,i[1]*dn),i[0]*=er,i[1]*=er,i}return t.invert=function(i){return i=e.invert(i[0]*dn,i[1]*dn),i[0]*=er,i[1]*=er,i},t}function GI(e,t,i,a,c,m){if(i){var f=on(t),u=Jt(t),S=a*i;c==null?(c=t+a*no,m=t-S/2):(c=LS(f,c),m=LS(f,m),(a>0?c<m:c>m)&&(c+=a*no));for(var C,P=c;a>0?P>m:P<m;P-=S)C=Cg([f,-u*on(P),-u*Jt(P)]),e.point(C[0],C[1])}}function LS(e,t){t=ec(t),t[0]-=e,Ig(t);var i=zI(-t[1]);return((-t[2]<0?-i:i)+no-cn)%no}function $F(){var e=$c([0,0]),t=$c(90),i=$c(6),a,c,m={point:f};function f(S,C){a.push(S=c(S,C)),S[0]*=er,S[1]*=er}function u(){var S=e.apply(this,arguments),C=t.apply(this,arguments)*dn,P=i.apply(this,arguments)*dn;return a=[],c=vx(-S[0]*dn,-S[1]*dn,0).invert,GI(m,C,P,1),S={type:"Polygon",coordinates:[a]},a=c=null,S}return u.center=function(S){return arguments.length?(e=typeof S=="function"?S:$c([+S[0],+S[1]]),u):e},u.radius=function(S){return arguments.length?(t=typeof S=="function"?S:$c(+S),u):t},u.precision=function(S){return arguments.length?(i=typeof S=="function"?S:$c(+S),u):i},u}function HI(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Cr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Bm(e,t){return Bn(e[0]-t[0])<cn&&Bn(e[1]-t[1])<cn}function _m(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function WI(e,t,i,a,c){var m=[],f=[],u,S;if(e.forEach(function(B){if(!((O=B.length-1)<=0)){var O,he=B[0],Y=B[O],q;if(Bm(he,Y)){if(!he[2]&&!Y[2]){for(c.lineStart(),u=0;u<O;++u)c.point((he=B[u])[0],he[1]);c.lineEnd();return}Y[0]+=2*cn}m.push(q=new _m(he,B,null,!0)),f.push(q.o=new _m(he,null,q,!1)),m.push(q=new _m(Y,B,null,!1)),f.push(q.o=new _m(Y,null,q,!0))}}),!!m.length){for(f.sort(t),jS(m),jS(f),u=0,S=f.length;u<S;++u)f[u].e=i=!i;for(var C=m[0],P,b;;){for(var T=C,F=!0;T.v;)if((T=T.n)===C)return;P=T.z,c.lineStart();do{if(T.v=T.o.v=!0,T.e){if(F)for(u=0,S=P.length;u<S;++u)c.point((b=P[u])[0],b[1]);else a(T.x,T.n.x,1,c);T=T.n}else{if(F)for(P=T.p.z,u=P.length-1;u>=0;--u)c.point((b=P[u])[0],b[1]);else a(T.x,T.p.x,-1,c);T=T.p}T=T.o,P=T.z,F=!F}while(!T.v);c.lineEnd()}}}function jS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function Q0(e){return Bn(e[0])<=zn?e[0]:as(e[0])*((Bn(e[0])+zn)%no-zn)}function ZI(e,t){var i=Q0(t),a=t[1],c=Jt(a),m=[Jt(i),-on(i),0],f=0,u=0,S=new Ui;c===1?a=jr+cn:c===-1&&(a=-jr-cn);for(var C=0,P=e.length;C<P;++C)if(T=(b=e[C]).length)for(var b,T,F=b[T-1],B=Q0(F),O=F[1]/2+wg,he=Jt(O),Y=on(O),q=0;q<T;++q,B=se,he=V,Y=E,F=$){var $=b[q],se=Q0($),X=$[1]/2+wg,V=Jt(X),E=on(X),L=se-B,j=L>=0?1:-1,ee=j*L,Z=ee>zn,ve=he*V;if(S.add(ro(ve*j*Jt(ee),Y*E+ve*on(ee))),f+=Z?L+j*no:L,Z^B>=i^se>=i){var _e=Ph(ec(F),ec($));Ig(_e);var de=Ph(m,_e);Ig(de);var oe=(Z^L>=0?-1:1)*io(de[2]);(a>oe||a===oe&&(_e[0]||_e[1]))&&(u+=Z^L>=0?1:-1)}}return(f<-cn||f<cn&&S<-Dd)^u&1}function qI(e,t,i,a){return function(c){var m=t(c),f=HI(),u=t(f),S=!1,C,P,b,T={point:F,lineStart:O,lineEnd:he,polygonStart:function(){T.point=Y,T.lineStart=q,T.lineEnd=$,P=[],C=[]},polygonEnd:function(){T.point=F,T.lineStart=O,T.lineEnd=he,P=kI(P);var se=ZI(C,a);P.length?(S||(c.polygonStart(),S=!0),WI(P,GF,se,i,c)):se&&(S||(c.polygonStart(),S=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),S&&(c.polygonEnd(),S=!1),P=C=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function F(se,X){e(se,X)&&c.point(se,X)}function B(se,X){m.point(se,X)}function O(){T.point=B,m.lineStart()}function he(){T.point=F,m.lineEnd()}function Y(se,X){b.push([se,X]),u.point(se,X)}function q(){u.lineStart(),b=[]}function $(){Y(b[0][0],b[0][1]),u.lineEnd();var se=u.clean(),X=f.result(),V,E=X.length,L,j,ee;if(b.pop(),C.push(b),b=null,!!E){if(se&1){if(j=X[0],(L=j.length-1)>0){for(S||(c.polygonStart(),S=!0),c.lineStart(),V=0;V<L;++V)c.point((ee=j[V])[0],ee[1]);c.lineEnd()}return}E>1&&se&2&&X.push(X.pop().concat(X.shift())),P.push(X.filter(VF))}}return T}}function VF(e){return e.length>1}function GF(e,t){return((e=e.x)[0]<0?e[1]-jr-cn:jr-e[1])-((t=t.x)[0]<0?t[1]-jr-cn:jr-t[1])}const U_=qI(function(){return!0},HF,ZF,[-zn,-jr]);function HF(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(m,f){var u=m>0?zn:-zn,S=Bn(m-t);Bn(S-zn)<cn?(e.point(t,i=(i+f)/2>0?jr:-jr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(m,i),c=0):a!==u&&S>=zn&&(Bn(t-a)<cn&&(t-=a*cn),Bn(m-u)<cn&&(m-=u*cn),i=WF(t,i,m,f),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),c=0),e.point(t=m,i=f),a=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function WF(e,t,i,a){var c,m,f=Jt(e-i);return Bn(f)>cn?Dh((Jt(t)*(m=on(a))*Jt(i)-Jt(a)*(c=on(t))*Jt(e))/(c*m*f)):(t+a)/2}function ZF(e,t,i,a){var c;if(e==null)c=i*jr,a.point(-zn,c),a.point(0,c),a.point(zn,c),a.point(zn,0),a.point(zn,-c),a.point(0,-c),a.point(-zn,-c),a.point(-zn,0),a.point(-zn,c);else if(Bn(e[0]-t[0])>cn){var m=e[0]<t[0]?zn:-zn;c=i*m/2,a.point(-m,c),a.point(0,c),a.point(m,c)}else a.point(t[0],t[1])}function XI(e){var t=on(e),i=6*dn,a=t>0,c=Bn(t)>cn;function m(P,b,T,F){GI(F,e,i,T,P,b)}function f(P,b){return on(P)*on(b)>t}function u(P){var b,T,F,B,O;return{lineStart:function(){B=F=!1,O=1},point:function(he,Y){var q=[he,Y],$,se=f(he,Y),X=a?se?0:C(he,Y):se?C(he+(he<0?zn:-zn),Y):0;if(!b&&(B=F=se)&&P.lineStart(),se!==F&&($=S(b,q),(!$||Bm(b,$)||Bm(q,$))&&(q[2]=1)),se!==F)O=0,se?(P.lineStart(),$=S(q,b),P.point($[0],$[1])):($=S(b,q),P.point($[0],$[1],2),P.lineEnd()),b=$;else if(c&&b&&a^se){var V;!(X&T)&&(V=S(q,b,!0))&&(O=0,a?(P.lineStart(),P.point(V[0][0],V[0][1]),P.point(V[1][0],V[1][1]),P.lineEnd()):(P.point(V[1][0],V[1][1]),P.lineEnd(),P.lineStart(),P.point(V[0][0],V[0][1],3)))}se&&(!b||!Bm(b,q))&&P.point(q[0],q[1]),b=q,F=se,T=X},lineEnd:function(){F&&P.lineEnd(),b=null},clean:function(){return O|(B&&F)<<1}}}function S(P,b,T){var F=ec(P),B=ec(b),O=[1,0,0],he=Ph(F,B),Y=ym(he,he),q=he[0],$=Y-q*q;if(!$)return!T&&P;var se=t*Y/$,X=-t*q/$,V=Ph(O,he),E=vm(O,se),L=vm(he,X);J0(E,L);var j=V,ee=ym(E,j),Z=ym(j,j),ve=ee*ee-Z*(ym(E,E)-1);if(!(ve<0)){var _e=hi(ve),de=vm(j,(-ee-_e)/Z);if(J0(de,E),de=Cg(de),!T)return de;var oe=P[0],ue=b[0],Q=P[1],te=b[1],fe;ue<oe&&(fe=oe,oe=ue,ue=fe);var we=ue-oe,Ee=Bn(we-zn)<cn,Ne=Ee||we<cn;if(!Ee&&te<Q&&(fe=Q,Q=te,te=fe),Ne?Ee?Q+te>0^de[1]<(Bn(de[0]-oe)<cn?Q:te):Q<=de[1]&&de[1]<=te:we>zn^(oe<=de[0]&&de[0]<=ue)){var Ae=vm(j,(-ee+_e)/Z);return J0(Ae,E),[de,Cg(Ae)]}}}function C(P,b){var T=a?e:zn-e,F=0;return P<-T?F|=1:P>T&&(F|=2),b<-T?F|=4:b>T&&(F|=8),F}return qI(f,u,m,a?[0,-e]:[-zn,e-zn])}function qF(e,t,i,a,c,m){var f=e[0],u=e[1],S=t[0],C=t[1],P=0,b=1,T=S-f,F=C-u,B;if(B=i-f,!(!T&&B>0)){if(B/=T,T<0){if(B<P)return;B<b&&(b=B)}else if(T>0){if(B>b)return;B>P&&(P=B)}if(B=c-f,!(!T&&B<0)){if(B/=T,T<0){if(B>b)return;B>P&&(P=B)}else if(T>0){if(B<P)return;B<b&&(b=B)}if(B=a-u,!(!F&&B>0)){if(B/=F,F<0){if(B<P)return;B<b&&(b=B)}else if(F>0){if(B>b)return;B>P&&(P=B)}if(B=m-u,!(!F&&B<0)){if(B/=F,F<0){if(B>b)return;B>P&&(P=B)}else if(F>0){if(B<P)return;B<b&&(b=B)}return P>0&&(e[0]=f+P*T,e[1]=u+P*F),b<1&&(t[0]=f+b*T,t[1]=u+b*F),!0}}}}}var Xf=1e9,xm=-Xf;function dy(e,t,i,a){function c(C,P){return e<=C&&C<=i&&t<=P&&P<=a}function m(C,P,b,T){var F=0,B=0;if(C==null||(F=f(C,b))!==(B=f(P,b))||S(C,P)<0^b>0)do T.point(F===0||F===3?e:i,F>1?a:t);while((F=(F+b+4)%4)!==B);else T.point(P[0],P[1])}function f(C,P){return Bn(C[0]-e)<cn?P>0?0:3:Bn(C[0]-i)<cn?P>0?2:1:Bn(C[1]-t)<cn?P>0?1:0:P>0?3:2}function u(C,P){return S(C.x,P.x)}function S(C,P){var b=f(C,1),T=f(P,1);return b!==T?b-T:b===0?P[1]-C[1]:b===1?C[0]-P[0]:b===2?C[1]-P[1]:P[0]-C[0]}return function(C){var P=C,b=HI(),T,F,B,O,he,Y,q,$,se,X,V,E={point:L,lineStart:ve,lineEnd:_e,polygonStart:ee,polygonEnd:Z};function L(oe,ue){c(oe,ue)&&P.point(oe,ue)}function j(){for(var oe=0,ue=0,Q=F.length;ue<Q;++ue)for(var te=F[ue],fe=1,we=te.length,Ee=te[0],Ne,Ae,Re=Ee[0],Ze=Ee[1];fe<we;++fe)Ne=Re,Ae=Ze,Ee=te[fe],Re=Ee[0],Ze=Ee[1],Ae<=a?Ze>a&&(Re-Ne)*(a-Ae)>(Ze-Ae)*(e-Ne)&&++oe:Ze<=a&&(Re-Ne)*(a-Ae)<(Ze-Ae)*(e-Ne)&&--oe;return oe}function ee(){P=b,T=[],F=[],V=!0}function Z(){var oe=j(),ue=V&&oe,Q=(T=kI(T)).length;(ue||Q)&&(C.polygonStart(),ue&&(C.lineStart(),m(null,null,1,C),C.lineEnd()),Q&&WI(T,u,oe,m,C),C.polygonEnd()),P=C,T=F=B=null}function ve(){E.point=de,F&&F.push(B=[]),X=!0,se=!1,q=$=NaN}function _e(){T&&(de(O,he),Y&&se&&b.rejoin(),T.push(b.result())),E.point=L,se&&P.lineEnd()}function de(oe,ue){var Q=c(oe,ue);if(F&&B.push([oe,ue]),X)O=oe,he=ue,Y=Q,X=!1,Q&&(P.lineStart(),P.point(oe,ue));else if(Q&&se)P.point(oe,ue);else{var te=[q=Math.max(xm,Math.min(Xf,q)),$=Math.max(xm,Math.min(Xf,$))],fe=[oe=Math.max(xm,Math.min(Xf,oe)),ue=Math.max(xm,Math.min(Xf,ue))];qF(te,fe,e,t,i,a)?(se||(P.lineStart(),P.point(te[0],te[1])),P.point(fe[0],fe[1]),Q||P.lineEnd(),V=!1):Q&&(P.lineStart(),P.point(oe,ue),V=!1)}q=oe,$=ue,se=Q}return E}}function XF(){var e=0,t=0,i=960,a=500,c,m,f;return f={stream:function(u){return c&&m===u?c:c=dy(e,t,i,a)(m=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],a=+u[1][1],c=m=null,f):[[e,t],[i,a]]}}}var $_,V_,Nm,Um,kh={sphere:Cr,point:Cr,lineStart:KF,lineEnd:Cr,polygonStart:Cr,polygonEnd:Cr};function KF(){kh.point=JF,kh.lineEnd=YF}function YF(){kh.point=kh.lineEnd=Cr}function JF(e,t){e*=dn,t*=dn,V_=e,Nm=Jt(t),Um=on(t),kh.point=QF}function QF(e,t){e*=dn,t*=dn;var i=Jt(t),a=on(t),c=Bn(e-V_),m=on(c),f=Jt(c),u=a*f,S=Um*i-Nm*a*m,C=Nm*i+Um*a*m;$_.add(ro(hi(u*u+S*S),C)),V_=e,Nm=i,Um=a}function KI(e){return $_=new Ui,Is(e,kh),+$_}var G_=[null,null],eO={type:"LineString",coordinates:G_};function Og(e,t){return G_[0]=e,G_[1]=t,KI(eO)}var DS={Feature:function(e,t){return Lg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(Lg(i[a].geometry,t))return!0;return!1}},BS={Sphere:function(){return!0},Point:function(e,t){return NS(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(NS(i[a],t))return!0;return!1},LineString:function(e,t){return US(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(US(i[a],t))return!0;return!1},Polygon:function(e,t){return $S(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if($S(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(Lg(i[a],t))return!0;return!1}};function Lg(e,t){return e&&BS.hasOwnProperty(e.type)?BS[e.type](e,t):!1}function NS(e,t){return Og(e,t)===0}function US(e,t){for(var i,a,c,m=0,f=e.length;m<f;m++){if(a=Og(e[m],t),a===0||m>0&&(c=Og(e[m],e[m-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Dd*c))return!0;i=a}return!1}function $S(e,t){return!!ZI(e.map(tO),YI(t))}function tO(e){return e=e.map(YI),e.pop(),e}function YI(e){return[e[0]*dn,e[1]*dn]}function nO(e,t){return(e&&DS.hasOwnProperty(e.type)?DS[e.type]:Lg)(e,t)}function VS(e,t,i){var a=uh(e,t-cn,i).concat(t);return function(c){return a.map(function(m){return[c,m]})}}function GS(e,t,i){var a=uh(e,t-cn,i).concat(t);return function(c){return a.map(function(m){return[m,c]})}}function JI(){var e,t,i,a,c,m,f,u,S=10,C=S,P=90,b=360,T,F,B,O,he=2.5;function Y(){return{type:"MultiLineString",coordinates:q()}}function q(){return uh(gm(a/P)*P,i,P).map(B).concat(uh(gm(u/b)*b,f,b).map(O)).concat(uh(gm(t/S)*S,e,S).filter(function($){return Bn($%P)>cn}).map(T)).concat(uh(gm(m/C)*C,c,C).filter(function($){return Bn($%b)>cn}).map(F))}return Y.lines=function(){return q().map(function($){return{type:"LineString",coordinates:$}})},Y.outline=function(){return{type:"Polygon",coordinates:[B(a).concat(O(f).slice(1),B(i).reverse().slice(1),O(u).reverse().slice(1))]}},Y.extent=function($){return arguments.length?Y.extentMajor($).extentMinor($):Y.extentMinor()},Y.extentMajor=function($){return arguments.length?(a=+$[0][0],i=+$[1][0],u=+$[0][1],f=+$[1][1],a>i&&($=a,a=i,i=$),u>f&&($=u,u=f,f=$),Y.precision(he)):[[a,u],[i,f]]},Y.extentMinor=function($){return arguments.length?(t=+$[0][0],e=+$[1][0],m=+$[0][1],c=+$[1][1],t>e&&($=t,t=e,e=$),m>c&&($=m,m=c,c=$),Y.precision(he)):[[t,m],[e,c]]},Y.step=function($){return arguments.length?Y.stepMajor($).stepMinor($):Y.stepMinor()},Y.stepMajor=function($){return arguments.length?(P=+$[0],b=+$[1],Y):[P,b]},Y.stepMinor=function($){return arguments.length?(S=+$[0],C=+$[1],Y):[S,C]},Y.precision=function($){return arguments.length?(he=+$,T=VS(m,c,90),F=GS(t,e,he),B=VS(u,f,90),O=GS(a,i,he),Y):he},Y.extentMajor([[-180,-90+cn],[180,90-cn]]).extentMinor([[-180,-80-cn],[180,80+cn]])}function rO(){return JI()()}function iO(e,t){var i=e[0]*dn,a=e[1]*dn,c=t[0]*dn,m=t[1]*dn,f=on(a),u=Jt(a),S=on(m),C=Jt(m),P=f*on(i),b=f*Jt(i),T=S*on(c),F=S*Jt(c),B=2*io(hi(ES(m-a)+f*S*ES(c-i))),O=Jt(B),he=B?function(Y){var q=Jt(Y*=B)/O,$=Jt(B-Y)/O,se=$*P+q*T,X=$*b+q*F,V=$*u+q*C;return[ro(X,se)*er,ro(V,hi(se*se+X*X))*er]}:function(){return[i*er,a*er]};return he.distance=B,he}const Bd=e=>e;var ev=new Ui,H_=new Ui,QI,eA,W_,Z_,Na={point:Cr,lineStart:Cr,lineEnd:Cr,polygonStart:function(){Na.lineStart=oO,Na.lineEnd=aO},polygonEnd:function(){Na.lineStart=Na.lineEnd=Na.point=Cr,ev.add(Bn(H_)),H_=new Ui},result:function(){var e=ev/2;return ev=new Ui,e}};function oO(){Na.point=sO}function sO(e,t){Na.point=tA,QI=W_=e,eA=Z_=t}function tA(e,t){H_.add(Z_*e-W_*t),W_=e,Z_=t}function aO(){tA(QI,eA)}var Mh=1/0,jg=Mh,Nd=-Mh,Dg=Nd,Bg={point:lO,lineStart:Cr,lineEnd:Cr,polygonStart:Cr,polygonEnd:Cr,result:function(){var e=[[Mh,jg],[Nd,Dg]];return Nd=Dg=-(jg=Mh=1/0),e}};function lO(e,t){e<Mh&&(Mh=e),e>Nd&&(Nd=e),t<jg&&(jg=t),t>Dg&&(Dg=t)}var q_=0,X_=0,Kf=0,Ng=0,Ug=0,ch=0,K_=0,Y_=0,Yf=0,nA,rA,ia,oa,os={point:tc,lineStart:HS,lineEnd:WS,polygonStart:function(){os.lineStart=hO,os.lineEnd=fO},polygonEnd:function(){os.point=tc,os.lineStart=HS,os.lineEnd=WS},result:function(){var e=Yf?[K_/Yf,Y_/Yf]:ch?[Ng/ch,Ug/ch]:Kf?[q_/Kf,X_/Kf]:[NaN,NaN];return q_=X_=Kf=Ng=Ug=ch=K_=Y_=Yf=0,e}};function tc(e,t){q_+=e,X_+=t,++Kf}function HS(){os.point=uO}function uO(e,t){os.point=cO,tc(ia=e,oa=t)}function cO(e,t){var i=e-ia,a=t-oa,c=hi(i*i+a*a);Ng+=c*(ia+e)/2,Ug+=c*(oa+t)/2,ch+=c,tc(ia=e,oa=t)}function WS(){os.point=tc}function hO(){os.point=dO}function fO(){iA(nA,rA)}function dO(e,t){os.point=iA,tc(nA=ia=e,rA=oa=t)}function iA(e,t){var i=e-ia,a=t-oa,c=hi(i*i+a*a);Ng+=c*(ia+e)/2,Ug+=c*(oa+t)/2,ch+=c,c=oa*e-ia*t,K_+=c*(ia+e),Y_+=c*(oa+t),Yf+=c*3,tc(ia=e,oa=t)}function oA(e){this._context=e}oA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,no);break}}},result:Cr};var J_=new Ui,tv,sA,aA,Jf,Qf,Ud={point:Cr,lineStart:function(){Ud.point=pO},lineEnd:function(){tv&&lA(sA,aA),Ud.point=Cr},polygonStart:function(){tv=!0},polygonEnd:function(){tv=null},result:function(){var e=+J_;return J_=new Ui,e}};function pO(e,t){Ud.point=lA,sA=Jf=e,aA=Qf=t}function lA(e,t){Jf-=e,Qf-=t,J_.add(hi(Jf*Jf+Qf*Qf)),Jf=e,Qf=t}function uA(){this._string=[]}uA.prototype={_radius:4.5,_circle:ZS(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=ZS(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function ZS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function mO(e,t){var i=4.5,a,c;function m(f){return f&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Is(f,a(c))),c.result()}return m.area=function(f){return Is(f,a(Na)),Na.result()},m.measure=function(f){return Is(f,a(Ud)),Ud.result()},m.bounds=function(f){return Is(f,a(Bg)),Bg.result()},m.centroid=function(f){return Is(f,a(os)),os.result()},m.projection=function(f){return arguments.length?(a=f==null?(e=null,Bd):(e=f).stream,m):e},m.context=function(f){return arguments.length?(c=f==null?(t=null,new uA):new oA(t=f),typeof i!="function"&&c.pointRadius(i),m):t},m.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(c.pointRadius(+f),+f),m):i},m.projection(e).context(t)}function gO(e){return{stream:ep(e)}}function ep(e){return function(t){var i=new Q_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function Q_(){}Q_.prototype={constructor:Q_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _x(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Is(i,e.stream(Bg)),t(Bg.result()),a!=null&&e.clipExtent(a),e}function py(e,t,i){return _x(e,function(a){var c=t[1][0]-t[0][0],m=t[1][1]-t[0][1],f=Math.min(c/(a[1][0]-a[0][0]),m/(a[1][1]-a[0][1])),u=+t[0][0]+(c-f*(a[1][0]+a[0][0]))/2,S=+t[0][1]+(m-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([u,S])},i)}function xx(e,t,i){return py(e,[[0,0],t],i)}function wx(e,t,i){return _x(e,function(a){var c=+t,m=c/(a[1][0]-a[0][0]),f=(c-m*(a[1][0]+a[0][0]))/2,u=-m*a[0][1];e.scale(150*m).translate([f,u])},i)}function bx(e,t,i){return _x(e,function(a){var c=+t,m=c/(a[1][1]-a[0][1]),f=-m*a[0][0],u=(c-m*(a[1][1]+a[0][1]))/2;e.scale(150*m).translate([f,u])},i)}var qS=16,yO=on(30*dn);function XS(e,t){return+t?_O(e,t):vO(e)}function vO(e){return ep({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function _O(e,t){function i(a,c,m,f,u,S,C,P,b,T,F,B,O,he){var Y=C-a,q=P-c,$=Y*Y+q*q;if($>4*t&&O--){var se=f+T,X=u+F,V=S+B,E=hi(se*se+X*X+V*V),L=io(V/=E),j=Bn(Bn(V)-1)<cn||Bn(m-b)<cn?(m+b)/2:ro(X,se),ee=e(j,L),Z=ee[0],ve=ee[1],_e=Z-a,de=ve-c,oe=q*_e-Y*de;(oe*oe/$>t||Bn((Y*_e+q*de)/$-.5)>.3||f*T+u*F+S*B<yO)&&(i(a,c,m,f,u,S,Z,ve,j,se/=E,X/=E,V,O,he),he.point(Z,ve),i(Z,ve,j,se,X,V,C,P,b,T,F,B,O,he))}}return function(a){var c,m,f,u,S,C,P,b,T,F,B,O,he={point:Y,lineStart:q,lineEnd:se,polygonStart:function(){a.polygonStart(),he.lineStart=X},polygonEnd:function(){a.polygonEnd(),he.lineStart=q}};function Y(L,j){L=e(L,j),a.point(L[0],L[1])}function q(){b=NaN,he.point=$,a.lineStart()}function $(L,j){var ee=ec([L,j]),Z=e(L,j);i(b,T,P,F,B,O,b=Z[0],T=Z[1],P=L,F=ee[0],B=ee[1],O=ee[2],qS,a),a.point(b,T)}function se(){he.point=Y,a.lineEnd()}function X(){q(),he.point=V,he.lineEnd=E}function V(L,j){$(c=L,j),m=b,f=T,u=F,S=B,C=O,he.point=$}function E(){i(b,T,P,F,B,O,m,f,c,u,S,C,qS,a),he.lineEnd=se,se()}return he}}var xO=ep({point:function(e,t){this.stream.point(e*dn,t*dn)}});function wO(e){return ep({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function bO(e,t,i,a,c){function m(f,u){return f*=a,u*=c,[t+e*f,i-e*u]}return m.invert=function(f,u){return[(f-t)/e*a,(i-u)/e*c]},m}function KS(e,t,i,a,c,m){if(!m)return bO(e,t,i,a,c);var f=on(m),u=Jt(m),S=f*e,C=u*e,P=f/e,b=u/e,T=(u*i-f*t)/e,F=(u*t+f*i)/e;function B(O,he){return O*=a,he*=c,[S*O-C*he+t,i-C*O-S*he]}return B.invert=function(O,he){return[a*(P*O-b*he+T),c*(F-b*O-P*he)]},B}function fa(e){return Sx(function(){return e})()}function Sx(e){var t,i=150,a=480,c=250,m=0,f=0,u=0,S=0,C=0,P,b=0,T=1,F=1,B=null,O=U_,he=null,Y,q,$,se=Bd,X=.5,V,E,L,j,ee;function Z(oe){return L(oe[0]*dn,oe[1]*dn)}function ve(oe){return oe=L.invert(oe[0],oe[1]),oe&&[oe[0]*er,oe[1]*er]}Z.stream=function(oe){return j&&ee===oe?j:j=xO(wO(P)(O(V(se(ee=oe)))))},Z.preclip=function(oe){return arguments.length?(O=oe,B=void 0,de()):O},Z.postclip=function(oe){return arguments.length?(se=oe,he=Y=q=$=null,de()):se},Z.clipAngle=function(oe){return arguments.length?(O=+oe?XI(B=oe*dn):(B=null,U_),de()):B*er},Z.clipExtent=function(oe){return arguments.length?(se=oe==null?(he=Y=q=$=null,Bd):dy(he=+oe[0][0],Y=+oe[0][1],q=+oe[1][0],$=+oe[1][1]),de()):he==null?null:[[he,Y],[q,$]]},Z.scale=function(oe){return arguments.length?(i=+oe,_e()):i},Z.translate=function(oe){return arguments.length?(a=+oe[0],c=+oe[1],_e()):[a,c]},Z.center=function(oe){return arguments.length?(m=oe[0]%360*dn,f=oe[1]%360*dn,_e()):[m*er,f*er]},Z.rotate=function(oe){return arguments.length?(u=oe[0]%360*dn,S=oe[1]%360*dn,C=oe.length>2?oe[2]%360*dn:0,_e()):[u*er,S*er,C*er]},Z.angle=function(oe){return arguments.length?(b=oe%360*dn,_e()):b*er},Z.reflectX=function(oe){return arguments.length?(T=oe?-1:1,_e()):T<0},Z.reflectY=function(oe){return arguments.length?(F=oe?-1:1,_e()):F<0},Z.precision=function(oe){return arguments.length?(V=XS(E,X=oe*oe),de()):hi(X)},Z.fitExtent=function(oe,ue){return py(Z,oe,ue)},Z.fitSize=function(oe,ue){return xx(Z,oe,ue)},Z.fitWidth=function(oe,ue){return wx(Z,oe,ue)},Z.fitHeight=function(oe,ue){return bx(Z,oe,ue)};function _e(){var oe=KS(i,0,0,T,F,b).apply(null,t(m,f)),ue=KS(i,a-oe[0],c-oe[1],T,F,b);return P=vx(u,S,C),E=B_(t,ue),L=B_(P,E),V=XS(E,X),de()}function de(){return j=ee=null,Z}return function(){return t=e.apply(this,arguments),Z.invert=t.invert&&ve,_e()}}function Ex(e){var t=0,i=zn/3,a=Sx(e),c=a(t,i);return c.parallels=function(m){return arguments.length?a(t=m[0]*dn,i=m[1]*dn):[t*er,i*er]},c}function SO(e){var t=on(e);function i(a,c){return[a*t,Jt(c)/t]}return i.invert=function(a,c){return[a/t,io(c*t)]},i}function cA(e,t){var i=Jt(e),a=(i+Jt(t))/2;if(Bn(a)<cn)return SO(e);var c=1+i*(2*a-i),m=hi(c)/a;function f(u,S){var C=hi(c-2*a*Jt(S))/a;return[C*Jt(u*=a),m-C*on(u)]}return f.invert=function(u,S){var C=m-S,P=ro(u,Bn(C))*as(C);return C*a<0&&(P-=zn*as(u)*as(C)),[P/a,io((c-(u*u+C*C)*a*a)/(2*a))]},f}function $g(){return Ex(cA).scale(155.424).center([0,33.6442])}function hA(){return $g().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function EO(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function TO(){var e,t,i=hA(),a,c=$g().rotate([154,0]).center([-2,58.5]).parallels([55,65]),m,f=$g().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,S,C={point:function(T,F){S=[T,F]}};function P(T){var F=T[0],B=T[1];return S=null,a.point(F,B),S||(m.point(F,B),S)||(u.point(F,B),S)}P.invert=function(T){var F=i.scale(),B=i.translate(),O=(T[0]-B[0])/F,he=(T[1]-B[1])/F;return(he>=.12&&he<.234&&O>=-.425&&O<-.214?c:he>=.166&&he<.234&&O>=-.214&&O<-.115?f:i).invert(T)},P.stream=function(T){return e&&t===T?e:e=EO([i.stream(t=T),c.stream(T),f.stream(T)])},P.precision=function(T){return arguments.length?(i.precision(T),c.precision(T),f.precision(T),b()):i.precision()},P.scale=function(T){return arguments.length?(i.scale(T),c.scale(T*.35),f.scale(T),P.translate(i.translate())):i.scale()},P.translate=function(T){if(!arguments.length)return i.translate();var F=i.scale(),B=+T[0],O=+T[1];return a=i.translate(T).clipExtent([[B-.455*F,O-.238*F],[B+.455*F,O+.238*F]]).stream(C),m=c.translate([B-.307*F,O+.201*F]).clipExtent([[B-.425*F+cn,O+.12*F+cn],[B-.214*F-cn,O+.234*F-cn]]).stream(C),u=f.translate([B-.205*F,O+.212*F]).clipExtent([[B-.214*F+cn,O+.166*F+cn],[B-.115*F-cn,O+.234*F-cn]]).stream(C),b()},P.fitExtent=function(T,F){return py(P,T,F)},P.fitSize=function(T,F){return xx(P,T,F)},P.fitWidth=function(T,F){return wx(P,T,F)},P.fitHeight=function(T,F){return bx(P,T,F)};function b(){return e=t=null,P}return P.scale(1070)}function fA(e){return function(t,i){var a=on(t),c=on(i),m=e(a*c);return m===1/0?[2,0]:[m*c*Jt(t),m*Jt(i)]}}function tp(e){return function(t,i){var a=hi(t*t+i*i),c=e(a),m=Jt(c),f=on(c);return[ro(t*m,a*f),io(a&&i*m/a)]}}var Tx=fA(function(e){return hi(2/(1+e))});Tx.invert=tp(function(e){return 2*io(e/2)});function CO(){return fa(Tx).scale(124.75).clipAngle(180-.001)}var Cx=fA(function(e){return(e=zI(e))&&e/Jt(e)});Cx.invert=tp(function(e){return e});function IO(){return fa(Cx).scale(79.4188).clipAngle(180-.001)}function np(e,t){return[e,bg(gx((jr+t)/2))]}np.invert=function(e,t){return[e,2*Dh(MI(t))-jr]};function AO(){return dA(np).scale(961/no)}function dA(e){var t=fa(e),i=t.center,a=t.scale,c=t.translate,m=t.clipExtent,f=null,u,S,C;t.scale=function(b){return arguments.length?(a(b),P()):a()},t.translate=function(b){return arguments.length?(c(b),P()):c()},t.center=function(b){return arguments.length?(i(b),P()):i()},t.clipExtent=function(b){return arguments.length?(b==null?f=u=S=C=null:(f=+b[0][0],u=+b[0][1],S=+b[1][0],C=+b[1][1]),P()):f==null?null:[[f,u],[S,C]]};function P(){var b=zn*a(),T=t(VI(t.rotate()).invert([0,0]));return m(f==null?[[T[0]-b,T[1]-b],[T[0]+b,T[1]+b]]:e===np?[[Math.max(T[0]-b,f),u],[Math.min(T[0]+b,S),C]]:[[f,Math.max(T[1]-b,u)],[S,Math.min(T[1]+b,C)]])}return P()}function wm(e){return gx((jr+e)/2)}function pA(e,t){var i=on(e),a=e===t?Jt(e):bg(i/on(t))/bg(wm(t)/wm(e)),c=i*Y0(wm(e),a)/a;if(!a)return np;function m(f,u){c>0?u<-jr+cn&&(u=-jr+cn):u>jr-cn&&(u=jr-cn);var S=c/Y0(wm(u),a);return[S*Jt(a*f),c-S*on(a*f)]}return m.invert=function(f,u){var S=c-u,C=as(a)*hi(f*f+S*S),P=ro(f,Bn(S))*as(S);return S*a<0&&(P-=zn*as(f)*as(S)),[P/a,2*Dh(Y0(c/C,1/a))-jr]},m}function PO(){return Ex(pA).scale(109.5).parallels([30,30])}function $d(e,t){return[e,t]}$d.invert=$d;function kO(){return fa($d).scale(152.63)}function mA(e,t){var i=on(e),a=e===t?Jt(e):(i-on(t))/(t-e),c=i/a+e;if(Bn(a)<cn)return $d;function m(f,u){var S=c-u,C=a*f;return[S*Jt(C),c-S*on(C)]}return m.invert=function(f,u){var S=c-u,C=ro(f,Bn(S))*as(S);return S*a<0&&(C-=zn*as(f)*as(S)),[C/a,c-as(a)*hi(f*f+S*S)]},m}function MO(){return Ex(mA).scale(131.154).center([0,13.9389])}var fd=1.340264,dd=-.081106,pd=893e-6,md=.003796,Vg=hi(3)/2,zO=12;function Ix(e,t){var i=io(Vg*Jt(t)),a=i*i,c=a*a*a;return[e*on(i)/(Vg*(fd+3*dd*a+c*(7*pd+9*md*a))),i*(fd+dd*a+c*(pd+md*a))]}Ix.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,m=0,f,u,S;m<zO&&(u=i*(fd+dd*a+c*(pd+md*a))-t,S=fd+3*dd*a+c*(7*pd+9*md*a),i-=f=u/S,a=i*i,c=a*a*a,!(Bn(f)<Dd));++m);return[Vg*e*(fd+3*dd*a+c*(7*pd+9*md*a))/on(i),io(Jt(i)/Vg)]};function RO(){return fa(Ix).scale(177.158)}function Ax(e,t){var i=on(t),a=on(e)*i;return[i*Jt(e)/a,Jt(t)/a]}Ax.invert=tp(Dh);function FO(){return fa(Ax).scale(144.049).clipAngle(60)}function OO(){var e=1,t=0,i=0,a=1,c=1,m=0,f,u,S=null,C,P,b,T=1,F=1,B=ep({point:function(se,X){var V=$([se,X]);this.stream.point(V[0],V[1])}}),O=Bd,he,Y;function q(){return T=e*a,F=e*c,he=Y=null,$}function $(se){var X=se[0]*T,V=se[1]*F;if(m){var E=V*f-X*u;X=X*f+V*u,V=E}return[X+t,V+i]}return $.invert=function(se){var X=se[0]-t,V=se[1]-i;if(m){var E=V*f+X*u;X=X*f-V*u,V=E}return[X/T,V/F]},$.stream=function(se){return he&&Y===se?he:he=B(O(Y=se))},$.postclip=function(se){return arguments.length?(O=se,S=C=P=b=null,q()):O},$.clipExtent=function(se){return arguments.length?(O=se==null?(S=C=P=b=null,Bd):dy(S=+se[0][0],C=+se[0][1],P=+se[1][0],b=+se[1][1]),q()):S==null?null:[[S,C],[P,b]]},$.scale=function(se){return arguments.length?(e=+se,q()):e},$.translate=function(se){return arguments.length?(t=+se[0],i=+se[1],q()):[t,i]},$.angle=function(se){return arguments.length?(m=se%360*dn,u=Jt(m),f=on(m),q()):m*er},$.reflectX=function(se){return arguments.length?(a=se?-1:1,q()):a<0},$.reflectY=function(se){return arguments.length?(c=se?-1:1,q()):c<0},$.fitExtent=function(se,X){return py($,se,X)},$.fitSize=function(se,X){return xx($,se,X)},$.fitWidth=function(se,X){return wx($,se,X)},$.fitHeight=function(se,X){return bx($,se,X)},$}function Px(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}Px.invert=function(e,t){var i=t,a=25,c;do{var m=i*i,f=m*m;i-=c=(i*(1.007226+m*(.015085+f*(-.044475+.028874*m-.005916*f)))-t)/(1.007226+m*(.015085*3+f*(-.044475*7+.028874*9*m-.005916*11*f)))}while(Bn(c)>cn&&--a>0);return[e/(.8707+(m=i*i)*(-.131979+m*(-.013791+m*m*m*(.003971-.001529*m)))),i]};function LO(){return fa(Px).scale(175.295)}function kx(e,t){return[on(t)*Jt(e),Jt(t)]}kx.invert=tp(io);function jO(){return fa(kx).scale(249.5).clipAngle(90+cn)}function Mx(e,t){var i=on(t),a=1+on(e)*i;return[i*Jt(e)/a,Jt(t)/a]}Mx.invert=tp(function(e){return 2*Dh(e)});function DO(){return fa(Mx).scale(250).clipAngle(142)}function zx(e,t){return[bg(gx((jr+t)/2)),-e]}zx.invert=function(e,t){return[-t,2*Dh(MI(e))-jr]};function BO(){var e=dA(zx),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const NO=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:hA,geoAlbersUsa:TO,geoArea:MF,geoAzimuthalEqualArea:CO,geoAzimuthalEqualAreaRaw:Tx,geoAzimuthalEquidistant:IO,geoAzimuthalEquidistantRaw:Cx,geoBounds:OF,geoCentroid:UF,geoCircle:$F,geoClipAntimeridian:U_,geoClipCircle:XI,geoClipExtent:XF,geoClipRectangle:dy,geoConicConformal:PO,geoConicConformalRaw:pA,geoConicEqualArea:$g,geoConicEqualAreaRaw:cA,geoConicEquidistant:MO,geoConicEquidistantRaw:mA,geoContains:nO,geoDistance:Og,geoEqualEarth:RO,geoEqualEarthRaw:Ix,geoEquirectangular:kO,geoEquirectangularRaw:$d,geoGnomonic:FO,geoGnomonicRaw:Ax,geoGraticule:JI,geoGraticule10:rO,geoIdentity:OO,geoInterpolate:iO,geoLength:KI,geoMercator:AO,geoMercatorRaw:np,geoNaturalEarth1:LO,geoNaturalEarth1Raw:Px,geoOrthographic:jO,geoOrthographicRaw:kx,geoPath:mO,geoProjection:fa,geoProjectionMutator:Sx,geoRotation:VI,geoStereographic:DO,geoStereographicRaw:Mx,geoStream:Is,geoTransform:gO,geoTransverseMercator:BO,geoTransverseMercatorRaw:zx},Symbol.toStringTag,{value:"Module"})),UO=s1(NO);var nu=2*Math.PI*6378137/2,$O=Math.PI/180;function gA(e){return e=e||256,2*Math.PI*6378137/e}function VO(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function e1(e,t,i){var a=yA(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function yA(e,t,i){var a=t,c=Nx(e[0]),m=Bx(e[1]),f=Math.sin(m*$O),u=Math.pow(2,a),S=u*(c/360+.5),C=u*(.5-.25*Math.log((1+f)/(1-f))/Math.PI);return oc([S,C,a],i)}function GO(e,t=6){var i=e[0],a=e[1],c=e[2],m=e[3],f=(i-c)/2+c,u=(a-m)/2+m;return t!=null&&(f=Number(f.toFixed(t)),u=Number(u.toFixed(t))),[f,u]}function Gg(e,t,i={enable:!0,decimal:1}){e=my(e,t);var a=e[0],c=e[1],m=a*nu/180,f=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return f=f*nu/180,i.enable&&(m=Number(m.toFixed(i.decimal)),f=Number(f.toFixed(i.decimal))),[m,f]}function t1(e,t=6){var i=e[0],a=e[1],c=i/nu*180,m=a/nu*180;return m=180/Math.PI*(2*Math.atan(Math.exp(m*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),m=Number(m.toFixed(t))),[c,m]}function Rx(e,t,i){var a=e[0],c=e[1],m=jx(t,i),f=(a+nu)/m,u=(c+nu)/m;return[f,u,t]}function vA(e,t,i){e=my(e,i);var a=Gg(e),c=Rx(a,t);return Fx(c)}function HO(e,t,i){if(e=my(e,i),t===0)return[0,0,0];var a=vA(e,t);return xA(a)}function WO(e,t){if(t===0)return[0,0,0];var i=Rx(e,t);return Fx(i)}function n1(e,t,i=1){var a=e[0],c=e[1],m=e[2],f=jx(m,t),u=a*f-nu,S=c*f-nu;return i!=null&&(u=Number(u.toFixed(i)),S=Number(S.toFixed(i))),[u,S]}function Fx(e,t,i){t=t||256;var a=e[0],c=e[1],m=e[2];if(m===0)return[0,0,0];Lx(m);var f=Math.ceil(a/t)-1,u=Math.ceil(c/t)-1;return f<0&&(f=0),u<0&&(u=0),[f,u,m]}function Ox(e,t,i){oc(e,i),t=t||256;var a=e[0],c=e[1],m=e[2],f=n1([a*t,c*t,m]),u=n1([(a+1)*t,(c+1)*t,m]);return[f[0],f[1],u[0],u[1]]}function _A(e,t){oc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var m=Ox([i,a,c]),f=m[0],u=m[1],S=m[2],C=m[3],P=t1([f,u,c]),b=t1([S,C,c]);return[P[0],P[1],b[0],b[1]]}function ZO(e){var t=rp(e);return Ox(t)}function qO(e){var t=rp(e);return _A(t)}function xA(e,t){oc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var m=i,f=Math.pow(2,c)-1-a;return[m,f,c]}function rp(e){var t=e[0],i=e[1],a=e[2],c=t,m=Math.pow(2,a)-i-1;return[c,m,a]}function XO(e){var t=rp(e);return wA(t)}function wA(e,t){oc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var m="";return a=Math.pow(2,c)-1-a,Dx(c,0,-1).map(function(f){var u=0,S=1<<f-1;i&S&&(u+=1),a&S&&(u+=2),m=m.concat(u)}),m}function KO(e){var t=bA(e);return rp(t)}function bA(e){var t=0,i=0,a=e.length;return Dx(a,0,-1).map(function(c){var m=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=m;break;case 2:i+=m;break;case 3:t+=m,i+=m;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function YO(e){var t=Gg([e[0],e[1]]),i=Gg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function oc(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=Lx(c),e=SA(e),e}function SA(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function Lx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function my(e,t){if(t===!1)return e;var i=Nx(e[0]),a=Bx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function jx(e,t){return gA(t)/Math.pow(2,e)}function Dx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),m=0;m<a;m++,e+=i)c[m]=e;return c}function JO(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(m){m[0]<t&&(t=m[0]),m[1]<i&&(i=m[1]),m[2]>a&&(a=m[2]),m[3]>c&&(c=m[3])}),[t,i,a,c]}}function QO(e){try{return oc(e),!0}catch{return!1}}function Bx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Nx(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function eL(e){var t=e1([e[0],e[1]],32),i=e1([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=tL(a);if(c===0)return[0,0,0];var m=a[0]>>>32-c,f=a[1]>>>32-c;return[m,f,c]}function tL(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const nL=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:GO,bboxToMeters:YO,bboxToTile:eL,googleToBBox:qO,googleToBBoxMeters:ZO,googleToQuadkey:XO,googleToTile:rp,hash:VO,initialResolution:gA,latitude:Bx,lngLatToGoogle:HO,lngLatToMeters:Gg,lngLatToTile:vA,longitude:Nx,maxBBox:JO,metersToLngLat:t1,metersToPixels:Rx,metersToTile:WO,pixelsToMeters:n1,pixelsToTile:Fx,pointToTile:e1,pointToTileFraction:yA,quadkeyToGoogle:bA,quadkeyToTile:KO,range:Dx,resolution:jx,tileToBBox:_A,tileToBBoxMeters:Ox,tileToGoogle:xA,tileToQuadkey:wA,validTile:QO,validateLngLat:my,validateTile:oc,validateZoom:Lx,wrapTile:SA},Symbol.toStringTag,{value:"Module"})),rL=s1(nL);var gy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */gy.read=function(e,t,i,a,c){var m,f,u=c*8-a-1,S=(1<<u)-1,C=S>>1,P=-7,b=i?c-1:0,T=i?-1:1,F=e[t+b];for(b+=T,m=F&(1<<-P)-1,F>>=-P,P+=u;P>0;m=m*256+e[t+b],b+=T,P-=8);for(f=m&(1<<-P)-1,m>>=-P,P+=a;P>0;f=f*256+e[t+b],b+=T,P-=8);if(m===0)m=1-C;else{if(m===S)return f?NaN:(F?-1:1)*(1/0);f=f+Math.pow(2,a),m=m-C}return(F?-1:1)*f*Math.pow(2,m-a)};gy.write=function(e,t,i,a,c,m){var f,u,S,C=m*8-c-1,P=(1<<C)-1,b=P>>1,T=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=a?0:m-1,B=a?1:-1,O=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,f=P):(f=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-f))<1&&(f--,S*=2),f+b>=1?t+=T/S:t+=T*Math.pow(2,1-b),t*S>=2&&(f++,S/=2),f+b>=P?(u=0,f=P):f+b>=1?(u=(t*S-1)*Math.pow(2,c),f=f+b):(u=t*Math.pow(2,b-1)*Math.pow(2,c),f=0));c>=8;e[i+F]=u&255,F+=B,u/=256,c-=8);for(f=f<<c|u,C+=c;C>0;e[i+F]=f&255,F+=B,f/=256,C-=8);e[i+F-B]|=O*128};var iL=Wn,bm=gy;function Wn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Wn.Varint=0;Wn.Fixed64=1;Wn.Bytes=2;Wn.Fixed32=5;var r1=65536*65536,YS=1/r1,oL=12,EA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Wn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,m=this.pos;this.type=a&7,e(c,t,this),this.pos===m&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Sm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=QS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Sm(this.buf,this.pos)+Sm(this.buf,this.pos+4)*r1;return this.pos+=8,e},readSFixed64:function(){var e=Sm(this.buf,this.pos)+QS(this.buf,this.pos+4)*r1;return this.pos+=8,e},readFloat:function(){var e=bm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=bm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,sL(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=oL&&EA?xL(this.buf,t,e):_L(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Wn.Bytes)return e.push(this.readVarint(t));var i=La(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Wn.Bytes)return e.push(this.readSVarint());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Wn.Bytes)return e.push(this.readBoolean());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Wn.Bytes)return e.push(this.readFloat());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Wn.Bytes)return e.push(this.readDouble());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Wn.Bytes)return e.push(this.readFixed32());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Wn.Bytes)return e.push(this.readSFixed32());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Wn.Bytes)return e.push(this.readFixed64());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Wn.Bytes)return e.push(this.readSFixed64());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Wn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Wn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Wn.Fixed32)this.pos+=4;else if(t===Wn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Gc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Gc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Gc(this.buf,e&-1,this.pos),Gc(this.buf,Math.floor(e*YS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Gc(this.buf,e&-1,this.pos),Gc(this.buf,Math.floor(e*YS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){aL(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=wL(this.buf,e,this.pos);var i=this.pos-t;i>=128&&JS(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),bm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),bm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&JS(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Wn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,cL,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,hL,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,pL,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,fL,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,dL,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,mL,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,gL,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,yL,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,vL,t)},writeBytesField:function(e,t){this.writeTag(e,Wn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Wn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Wn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Wn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Wn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Wn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Wn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Wn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Wn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Wn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function sL(e,t,i){var a=i.buf,c,m;if(m=a[i.pos++],c=(m&112)>>4,m<128||(m=a[i.pos++],c|=(m&127)<<3,m<128)||(m=a[i.pos++],c|=(m&127)<<10,m<128)||(m=a[i.pos++],c|=(m&127)<<17,m<128)||(m=a[i.pos++],c|=(m&127)<<24,m<128)||(m=a[i.pos++],c|=(m&1)<<31,m<128))return Vc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function La(e){return e.type===Wn.Bytes?e.readVarint()+e.pos:e.pos+1}function Vc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function aL(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),lL(i,a,t),uL(a,t)}function lL(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function uL(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function JS(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function cL(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function hL(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function fL(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function dL(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function pL(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function mL(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function gL(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function yL(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function vL(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Sm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Gc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function QS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function _L(e,t,i){for(var a="",c=t;c<i;){var m=e[c],f=null,u=m>239?4:m>223?3:m>191?2:1;if(c+u>i)break;var S,C,P;u===1?m<128&&(f=m):u===2?(S=e[c+1],(S&192)===128&&(f=(m&31)<<6|S&63,f<=127&&(f=null))):u===3?(S=e[c+1],C=e[c+2],(S&192)===128&&(C&192)===128&&(f=(m&15)<<12|(S&63)<<6|C&63,(f<=2047||f>=55296&&f<=57343)&&(f=null))):u===4&&(S=e[c+1],C=e[c+2],P=e[c+3],(S&192)===128&&(C&192)===128&&(P&192)===128&&(f=(m&15)<<18|(S&63)<<12|(C&63)<<6|P&63,(f<=65535||f>=1114112)&&(f=null))),f===null?(f=65533,u=1):f>65535&&(f-=65536,a+=String.fromCharCode(f>>>10&1023|55296),f=56320|f&1023),a+=String.fromCharCode(f),c+=u}return a}function xL(e,t,i){return EA.decode(e.subarray(t,i))}function wL(e,t,i){for(var a=0,c,m;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(m)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,m=c;continue}else c=m-55296<<10|c-56320|65536,m=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):m=c;continue}else m&&(e[i++]=239,e[i++]=191,e[i++]=189,m=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Ux={exports:{}},TA=function(t,i){return function(){for(var c=new Array(arguments.length),m=0;m<c.length;m++)c[m]=arguments[m];return t.apply(i,c)}},bL=TA,sc=Object.prototype.toString;function $x(e){return sc.call(e)==="[object Array]"}function i1(e){return typeof e>"u"}function SL(e){return e!==null&&!i1(e)&&e.constructor!==null&&!i1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function EL(e){return sc.call(e)==="[object ArrayBuffer]"}function TL(e){return typeof FormData<"u"&&e instanceof FormData}function CL(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function IL(e){return typeof e=="string"}function AL(e){return typeof e=="number"}function CA(e){return e!==null&&typeof e=="object"}function $m(e){if(sc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function PL(e){return sc.call(e)==="[object Date]"}function kL(e){return sc.call(e)==="[object File]"}function ML(e){return sc.call(e)==="[object Blob]"}function IA(e){return sc.call(e)==="[object Function]"}function zL(e){return CA(e)&&IA(e.pipe)}function RL(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function FL(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function OL(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Vx(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),$x(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function o1(){var e={};function t(c,m){$m(e[m])&&$m(c)?e[m]=o1(e[m],c):$m(c)?e[m]=o1({},c):$x(c)?e[m]=c.slice():e[m]=c}for(var i=0,a=arguments.length;i<a;i++)Vx(arguments[i],t);return e}function LL(e,t,i){return Vx(t,function(c,m){i&&typeof c=="function"?e[m]=bL(c,i):e[m]=c}),e}function jL(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Go={isArray:$x,isArrayBuffer:EL,isBuffer:SL,isFormData:TL,isArrayBufferView:CL,isString:IL,isNumber:AL,isObject:CA,isPlainObject:$m,isUndefined:i1,isDate:PL,isFile:kL,isBlob:ML,isFunction:IA,isStream:zL,isURLSearchParams:RL,isStandardBrowserEnv:OL,forEach:Vx,merge:o1,extend:LL,trim:FL,stripBOM:jL},Hc=Go;function eE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var AA=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Hc.isURLSearchParams(i))c=i.toString();else{var m=[];Hc.forEach(i,function(S,C){S===null||typeof S>"u"||(Hc.isArray(S)?C=C+"[]":S=[S],Hc.forEach(S,function(b){Hc.isDate(b)?b=b.toISOString():Hc.isObject(b)&&(b=JSON.stringify(b)),m.push(eE(C)+"="+eE(b))}))}),c=m.join("&")}if(c){var f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},DL=Go;function yy(){this.handlers=[]}yy.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};yy.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};yy.prototype.forEach=function(t){DL.forEach(this.handlers,function(a){a!==null&&t(a)})};var BL=yy,NL=Go,UL=function(t,i){NL.forEach(t,function(c,m){m!==i&&m.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[m])})},PA=function(t,i,a,c,m){return t.config=i,a&&(t.code=a),t.request=c,t.response=m,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},nv,tE;function kA(){if(tE)return nv;tE=1;var e=PA;return nv=function(i,a,c,m,f){var u=new Error(i);return e(u,a,c,m,f)},nv}var rv,nE;function $L(){if(nE)return rv;nE=1;var e=kA();return rv=function(i,a,c){var m=c.config.validateStatus;!c.status||!m||m(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},rv}var iv,rE;function VL(){if(rE)return iv;rE=1;var e=Go;return iv=e.isStandardBrowserEnv()?function(){return{write:function(a,c,m,f,u,S){var C=[];C.push(a+"="+encodeURIComponent(c)),e.isNumber(m)&&C.push("expires="+new Date(m).toGMTString()),e.isString(f)&&C.push("path="+f),e.isString(u)&&C.push("domain="+u),S===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),iv}var ov,iE;function GL(){return iE||(iE=1,ov=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),ov}var sv,oE;function HL(){return oE||(oE=1,sv=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),sv}var av,sE;function WL(){if(sE)return av;sE=1;var e=GL(),t=HL();return av=function(a,c){return a&&!e(c)?t(a,c):c},av}var lv,aE;function ZL(){if(aE)return lv;aE=1;var e=Go,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return lv=function(a){var c={},m,f,u;return a&&e.forEach(a.split(`
`),function(C){if(u=C.indexOf(":"),m=e.trim(C.substr(0,u)).toLowerCase(),f=e.trim(C.substr(u+1)),m){if(c[m]&&t.indexOf(m)>=0)return;m==="set-cookie"?c[m]=(c[m]?c[m]:[]).concat([f]):c[m]=c[m]?c[m]+", "+f:f}}),c},lv}var uv,lE;function qL(){if(lE)return uv;lE=1;var e=Go;return uv=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function m(f){var u=f;return i&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=m(window.location.href),function(u){var S=e.isString(u)?m(u):u;return S.protocol===c.protocol&&S.host===c.host}}():function(){return function(){return!0}}(),uv}var cv,uE;function cE(){if(uE)return cv;uE=1;var e=Go,t=$L(),i=VL(),a=AA,c=WL(),m=ZL(),f=qL(),u=kA();return cv=function(C){return new Promise(function(b,T){var F=C.data,B=C.headers,O=C.responseType;e.isFormData(F)&&delete B["Content-Type"];var he=new XMLHttpRequest;if(C.auth){var Y=C.auth.username||"",q=C.auth.password?unescape(encodeURIComponent(C.auth.password)):"";B.Authorization="Basic "+btoa(Y+":"+q)}var $=c(C.baseURL,C.url);he.open(C.method.toUpperCase(),a($,C.params,C.paramsSerializer),!0),he.timeout=C.timeout;function se(){if(he){var V="getAllResponseHeaders"in he?m(he.getAllResponseHeaders()):null,E=!O||O==="text"||O==="json"?he.responseText:he.response,L={data:E,status:he.status,statusText:he.statusText,headers:V,config:C,request:he};t(b,T,L),he=null}}if("onloadend"in he?he.onloadend=se:he.onreadystatechange=function(){!he||he.readyState!==4||he.status===0&&!(he.responseURL&&he.responseURL.indexOf("file:")===0)||setTimeout(se)},he.onabort=function(){he&&(T(u("Request aborted",C,"ECONNABORTED",he)),he=null)},he.onerror=function(){T(u("Network Error",C,null,he)),he=null},he.ontimeout=function(){var E="timeout of "+C.timeout+"ms exceeded";C.timeoutErrorMessage&&(E=C.timeoutErrorMessage),T(u(E,C,C.transitional&&C.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",he)),he=null},e.isStandardBrowserEnv()){var X=(C.withCredentials||f($))&&C.xsrfCookieName?i.read(C.xsrfCookieName):void 0;X&&(B[C.xsrfHeaderName]=X)}"setRequestHeader"in he&&e.forEach(B,function(E,L){typeof F>"u"&&L.toLowerCase()==="content-type"?delete B[L]:he.setRequestHeader(L,E)}),e.isUndefined(C.withCredentials)||(he.withCredentials=!!C.withCredentials),O&&O!=="json"&&(he.responseType=C.responseType),typeof C.onDownloadProgress=="function"&&he.addEventListener("progress",C.onDownloadProgress),typeof C.onUploadProgress=="function"&&he.upload&&he.upload.addEventListener("progress",C.onUploadProgress),C.cancelToken&&C.cancelToken.promise.then(function(E){he&&(he.abort(),T(E),he=null)}),F||(F=null),he.send(F)})},cv}var Ei=Go,hE=UL,XL=PA,KL={"Content-Type":"application/x-www-form-urlencoded"};function fE(e,t){!Ei.isUndefined(e)&&Ei.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function YL(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=cE()),e}function JL(e,t,i){if(Ei.isString(e))try{return(t||JSON.parse)(e),Ei.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var vy={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:YL(),transformRequest:[function(t,i){return hE(i,"Accept"),hE(i,"Content-Type"),Ei.isFormData(t)||Ei.isArrayBuffer(t)||Ei.isBuffer(t)||Ei.isStream(t)||Ei.isFile(t)||Ei.isBlob(t)?t:Ei.isArrayBufferView(t)?t.buffer:Ei.isURLSearchParams(t)?(fE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ei.isObject(t)||i&&i["Content-Type"]==="application/json"?(fE(i,"application/json"),JL(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,m=!a&&this.responseType==="json";if(m||c&&Ei.isString(t)&&t.length)try{return JSON.parse(t)}catch(f){if(m)throw f.name==="SyntaxError"?XL(f,this,"E_JSON_PARSE"):f}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};vy.headers={common:{Accept:"application/json, text/plain, */*"}};Ei.forEach(["delete","get","head"],function(t){vy.headers[t]={}});Ei.forEach(["post","put","patch"],function(t){vy.headers[t]=Ei.merge(KL)});var Gx=vy,QL=Go,e5=Gx,t5=function(t,i,a){var c=this||e5;return QL.forEach(a,function(f){t=f.call(c,t,i)}),t},hv,dE;function MA(){return dE||(dE=1,hv=function(t){return!!(t&&t.__CANCEL__)}),hv}var pE=Go,fv=t5,n5=MA(),r5=Gx;function dv(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i5=function(t){dv(t),t.headers=t.headers||{},t.data=fv.call(t,t.data,t.headers,t.transformRequest),t.headers=pE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),pE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||r5.adapter;return i(t).then(function(c){return dv(t),c.data=fv.call(t,c.data,c.headers,t.transformResponse),c},function(c){return n5(c)||(dv(t),c&&c.response&&(c.response.data=fv.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Bi=Go,zA=function(t,i){i=i||{};var a={},c=["url","method","data"],m=["headers","auth","proxy","params"],f=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function S(T,F){return Bi.isPlainObject(T)&&Bi.isPlainObject(F)?Bi.merge(T,F):Bi.isPlainObject(F)?Bi.merge({},F):Bi.isArray(F)?F.slice():F}function C(T){Bi.isUndefined(i[T])?Bi.isUndefined(t[T])||(a[T]=S(void 0,t[T])):a[T]=S(t[T],i[T])}Bi.forEach(c,function(F){Bi.isUndefined(i[F])||(a[F]=S(void 0,i[F]))}),Bi.forEach(m,C),Bi.forEach(f,function(F){Bi.isUndefined(i[F])?Bi.isUndefined(t[F])||(a[F]=S(void 0,t[F])):a[F]=S(void 0,i[F])}),Bi.forEach(u,function(F){F in i?a[F]=S(t[F],i[F]):F in t&&(a[F]=S(void 0,t[F]))});var P=c.concat(m).concat(f).concat(u),b=Object.keys(t).concat(Object.keys(i)).filter(function(F){return P.indexOf(F)===-1});return Bi.forEach(b,C),a};const o5="axios",s5="0.21.4",a5="Promise based HTTP client for the browser and node.js",l5="index.js",u5={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},c5={type:"git",url:"https://github.com/axios/axios.git"},h5=["xhr","http","ajax","promise","node"],f5="Matt Zabriskie",d5="MIT",p5={url:"https://github.com/axios/axios/issues"},m5="https://axios-http.com",g5={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},y5={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},v5="dist/axios.min.js",_5="dist/axios.min.js",x5="./index.d.ts",w5={"follow-redirects":"^1.14.0"},b5=[{path:"./dist/axios.min.js",threshold:"5kB"}],S5={name:o5,version:s5,description:a5,main:l5,scripts:u5,repository:c5,keywords:h5,author:f5,license:d5,bugs:p5,homepage:m5,devDependencies:g5,browser:y5,jsdelivr:v5,unpkg:_5,typings:x5,dependencies:w5,bundlesize:b5};var RA=S5,Hx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Hx[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var mE={},E5=RA.version.split(".");function FA(e,t){for(var i=t?t.split("."):E5,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Hx.transitional=function(t,i,a){var c=i&&FA(i);function m(f,u){return"[Axios v"+RA.version+"] Transitional option '"+f+"'"+u+(a?". "+a:"")}return function(f,u,S){if(t===!1)throw new Error(m(u," has been removed in "+i));return c&&!mE[u]&&(mE[u]=!0,console.warn(m(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(f,u,S):!0}};function T5(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var m=a[c],f=t[m];if(f){var u=e[m],S=u===void 0||f(u,m,e);if(S!==!0)throw new TypeError("option "+m+" must be "+S);continue}if(i!==!0)throw Error("Unknown option "+m)}}var C5={isOlderVersion:FA,assertOptions:T5,validators:Hx},OA=Go,I5=AA,gE=BL,yE=i5,_y=zA,LA=C5,Wc=LA.validators;function ip(e){this.defaults=e,this.interceptors={request:new gE,response:new gE}}ip.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=_y(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&LA.assertOptions(i,{silentJSONParsing:Wc.transitional(Wc.boolean,"1.0.0"),forcedJSONParsing:Wc.transitional(Wc.boolean,"1.0.0"),clarifyTimeoutError:Wc.transitional(Wc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(c=c&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var m=[];this.interceptors.response.forEach(function(T){m.push(T.fulfilled,T.rejected)});var f;if(!c){var u=[yE,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(m),f=Promise.resolve(t);u.length;)f=f.then(u.shift(),u.shift());return f}for(var S=t;a.length;){var C=a.shift(),P=a.shift();try{S=C(S)}catch(b){P(b);break}}try{f=yE(S)}catch(b){return Promise.reject(b)}for(;m.length;)f=f.then(m.shift(),m.shift());return f};ip.prototype.getUri=function(t){return t=_y(this.defaults,t),I5(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};OA.forEach(["delete","get","head","options"],function(t){ip.prototype[t]=function(i,a){return this.request(_y(a||{},{method:t,url:i,data:(a||{}).data}))}});OA.forEach(["post","put","patch"],function(t){ip.prototype[t]=function(i,a,c){return this.request(_y(c||{},{method:t,url:i,data:a}))}});var A5=ip,pv,vE;function jA(){if(vE)return pv;vE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,pv=e,pv}var mv,_E;function P5(){if(_E)return mv;_E=1;var e=jA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(f){a=f});var c=this;i(function(f){c.reason||(c.reason=new e(f),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(f){a=f});return{token:c,cancel:a}},mv=t,mv}var gv,xE;function k5(){return xE||(xE=1,gv=function(t){return function(a){return t.apply(null,a)}}),gv}var yv,wE;function M5(){return wE||(wE=1,yv=function(t){return typeof t=="object"&&t.isAxiosError===!0}),yv}var bE=Go,z5=TA,Vm=A5,R5=zA,F5=Gx;function DA(e){var t=new Vm(e),i=z5(Vm.prototype.request,t);return bE.extend(i,Vm.prototype,t),bE.extend(i,t),i}var Fs=DA(F5);Fs.Axios=Vm;Fs.create=function(t){return DA(R5(Fs.defaults,t))};Fs.Cancel=jA();Fs.CancelToken=P5();Fs.isCancel=MA();Fs.all=function(t){return Promise.all(t)};Fs.spread=k5();Fs.isAxiosError=M5();Ux.exports=Fs;Ux.exports.default=Fs;var O5=Ux.exports,L5=O5;const j5={},D5=Object.freeze(Object.defineProperty({__proto__:null,default:j5},Symbol.toStringTag,{value:"Module"})),B5=s1(D5);var xy={},N5=_h;function _h(e,t){this.x=e,this.y=t}_h.prototype={clone:function(){return new _h(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),m=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};_h.convert=function(e){return e instanceof _h?e:Array.isArray(e)?new _h(e[0],e[1]):e};var U5=N5,BA=zh;function zh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields($5,this,t)}function $5(e,t,i){e==1?t.id=i.readVarint():e==2?V5(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function V5(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}zh.types=["Unknown","Point","LineString","Polygon"];zh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,m=0,f=[],u;e.pos<t;){if(a<=0){var S=e.readVarint();i=S&7,a=S>>3}if(a--,i===1||i===2)c+=e.readSVarint(),m+=e.readSVarint(),i===1&&(u&&f.push(u),u=[]),u.push(new U5(c,m));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&f.push(u),f};zh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,m=0,f=1/0,u=-1/0,S=1/0,C=-1/0;e.pos<t;){if(a<=0){var P=e.readVarint();i=P&7,a=P>>3}if(a--,i===1||i===2)c+=e.readSVarint(),m+=e.readSVarint(),c<f&&(f=c),c>u&&(u=c),m<S&&(S=m),m>C&&(C=m);else if(i!==7)throw new Error("unknown command "+i)}return[f,S,u,C]};zh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,m=this.extent*t,f=this.loadGeometry(),u=zh.types[this.type],S,C;function P(F){for(var B=0;B<F.length;B++){var O=F[B],he=180-(O.y+m)*360/a;F[B]=[(O.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(he*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(S=0;S<f.length;S++)b[S]=f[S][0];f=b,P(f);break;case 2:for(S=0;S<f.length;S++)P(f[S]);break;case 3:for(f=G5(f),S=0;S<f.length;S++)for(C=0;C<f[S].length;C++)P(f[S][C]);break}f.length===1?f=f[0]:u="Multi"+u;var T={type:"Feature",geometry:{type:u,coordinates:f},properties:this.properties};return"id"in this&&(T.id=this.id),T};function G5(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,m=0;m<t;m++){var f=H5(e[m]);f!==0&&(c===void 0&&(c=f<0),c===f<0?(a&&i.push(a),a=[e[m]]):a.push(e[m]))}return a&&i.push(a),i}function H5(e){for(var t=0,i=0,a=e.length,c=a-1,m,f;i<a;c=i++)m=e[i],f=e[c],t+=(f.x-m.x)*(m.y+f.y);return t}var W5=BA,NA=UA;function UA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Z5,this,t),this.length=this._features.length}function Z5(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(q5(i))}function q5(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}UA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new W5(this._pbf,t,this.extent,this._keys,this._values)};var X5=NA,K5=Y5;function Y5(e,t){this.layers=e.readFields(J5,{},t)}function J5(e,t,i){if(e===3){var a=new X5(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}xy.VectorTile=K5;xy.VectorTileFeature=BA;xy.VectorTileLayer=NA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=UO,i=rL,a=iL,c=L5,m=B5,f=xy;function u(q){return q&&typeof q=="object"&&"default"in q?q:{default:q}}var S=u(a),C=u(c),P=u(m),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof jl<"u"?jl:typeof self<"u"?self:{};function T(q){var $={exports:{}};return q($,$.exports),$.exports}var F=T(function(q,$){(function(X,V){q.exports=V(C.default)})(b,function(se){return function(X){var V={};function E(L){if(V[L])return V[L].exports;var j=V[L]={i:L,l:!1,exports:{}};return X[L].call(j.exports,j,j.exports,E),j.l=!0,j.exports}return E.m=X,E.c=V,E.d=function(L,j,ee){E.o(L,j)||Object.defineProperty(L,j,{enumerable:!0,get:ee})},E.r=function(L){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})},E.t=function(L,j){if(j&1&&(L=E(L)),j&8||j&4&&typeof L=="object"&&L&&L.__esModule)return L;var ee=Object.create(null);if(E.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:L}),j&2&&typeof L!="string")for(var Z in L)E.d(ee,Z,(function(ve){return L[ve]}).bind(null,Z));return ee},E.n=function(L){var j=L&&L.__esModule?function(){return L.default}:function(){return L};return E.d(j,"a",j),j},E.o=function(L,j){return Object.prototype.hasOwnProperty.call(L,j)},E.p="",E(E.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(X,V,E){E.r(V),E.d(V,"CacheControl",function(){return Ee}),E.d(V,"parse",function(){return Ne}),E.d(V,"format",function(){return Ae}),E("./node_modules/core-js/modules/es6.array.from.js"),E("./node_modules/core-js/modules/es6.function.name.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/web.dom.iterable.js"),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.regexp.split.js"),E("./node_modules/core-js/modules/es6.number.is-finite.js");function L(Re,Ze){return _e(Re)||ve(Re,Ze)||ee(Re,Ze)||j()}function j(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(Re,Ze){if(Re){if(typeof Re=="string")return Z(Re,Ze);var He=Object.prototype.toString.call(Re).slice(8,-1);if(He==="Object"&&Re.constructor&&(He=Re.constructor.name),He==="Map"||He==="Set")return Array.from(Re);if(He==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(He))return Z(Re,Ze)}}function Z(Re,Ze){(Ze==null||Ze>Re.length)&&(Ze=Re.length);for(var He=0,rt=new Array(Ze);He<Ze;He++)rt[He]=Re[He];return rt}function ve(Re,Ze){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Re)))){var He=[],rt=!0,dt=!1,wt=void 0;try{for(var kt=Re[Symbol.iterator](),mt;!(rt=(mt=kt.next()).done)&&(He.push(mt.value),!(Ze&&He.length===Ze));rt=!0);}catch(St){dt=!0,wt=St}finally{try{!rt&&kt.return!=null&&kt.return()}finally{if(dt)throw wt}}return He}}function _e(Re){if(Array.isArray(Re))return Re}function de(Re,Ze){if(!(Re instanceof Ze))throw new TypeError("Cannot call a class as a function")}function oe(Re,Ze){for(var He=0;He<Ze.length;He++){var rt=Ze[He];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(Re,rt.key,rt)}}function ue(Re,Ze,He){return Ze&&oe(Re.prototype,Ze),He&&oe(Re,He),Re}var Q=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,te={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function fe(Re){return Re===null}function we(Re){if(!Re)return null;var Ze=parseInt(Re,10);return!Number.isFinite(Ze)||Ze<0?null:Ze}var Ee=function(){function Re(){de(this,Re),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ue(Re,[{key:"parse",value:function(He){if(!He||He.length===0)return this;var rt={},dt=He.match(Q)||[];return Array.prototype.forEach.call(dt,function(wt){var kt=wt.split("=",2),mt=L(kt,1),St=mt[0],Vt=null;kt.length>1&&(Vt=kt[1].trim()),rt[St.toLowerCase()]=Vt}),this.maxAge=we(rt[te.maxAge]),this.sharedMaxAge=we(rt[te.sharedMaxAge]),this.maxStale=fe(rt[te.maxStale]),this.maxStaleDuration=we(rt[te.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=we(rt[te.minFresh]),this.immutable=fe(rt[te.immutable]),this.mustRevalidate=fe(rt[te.mustRevalidate]),this.noCache=fe(rt[te.noCache]),this.noStore=fe(rt[te.noStore]),this.noTransform=fe(rt[te.noTransform]),this.onlyIfCached=fe(rt[te.onlyIfCached]),this.private=fe(rt[te.private]),this.proxyRevalidate=fe(rt[te.proxyRevalidate]),this.public=fe(rt[te.public]),this}},{key:"format",value:function(){var He=[];return this.maxAge&&He.push("".concat(te.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&He.push("".concat(te.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?He.push("".concat(te.maxStale,"=").concat(this.maxStaleDuration)):He.push(te.maxStale)),this.minFresh&&He.push("".concat(te.minFresh,"=").concat(this.minFresh)),this.immutable&&He.push(te.immutable),this.mustRevalidate&&He.push(te.mustRevalidate),this.noCache&&He.push(te.noCache),this.noStore&&He.push(te.noStore),this.noTransform&&He.push(te.noTransform),this.onlyIfCached&&He.push(te.onlyIfCached),this.private&&He.push(te.private),this.proxyRevalidate&&He.push(te.proxyRevalidate),this.public&&He.push(te.public),He.join(", ")}}]),Re}();function Ne(Re){var Ze=new Ee;return Ze.parse(Re)}function Ae(Re){return Re instanceof Ee?Re.format():Ee.prototype.format.call(Re)}V.default={CacheControl:Ee,parse:Ne,format:Ae}},"./node_modules/charenc/charenc.js":function(X,V){var E={utf8:{stringToBytes:function(L){return E.bin.stringToBytes(unescape(encodeURIComponent(L)))},bytesToString:function(L){return decodeURIComponent(escape(E.bin.bytesToString(L)))}},bin:{stringToBytes:function(L){for(var j=[],ee=0;ee<L.length;ee++)j.push(L.charCodeAt(ee)&255);return j},bytesToString:function(L){for(var j=[],ee=0;ee<L.length;ee++)j.push(String.fromCharCode(L[ee]));return j.join("")}}};X.exports=E},"./node_modules/core-js/modules/_a-function.js":function(X,V){X.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_wks.js")("unscopables"),j=Array.prototype;j[L]==null&&E("./node_modules/core-js/modules/_hide.js")(j,L,{}),X.exports=function(ee){j[L][ee]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_string-at.js")(!0);X.exports=function(j,ee,Z){return ee+(Z?L(j,ee).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_is-object.js");X.exports=function(j){if(!L(j))throw TypeError(j+" is not an object!");return j}},"./node_modules/core-js/modules/_array-includes.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_to-iobject.js"),j=E("./node_modules/core-js/modules/_to-length.js"),ee=E("./node_modules/core-js/modules/_to-absolute-index.js");X.exports=function(Z){return function(ve,_e,de){var oe=L(ve),ue=j(oe.length),Q=ee(de,ue),te;if(Z&&_e!=_e){for(;ue>Q;)if(te=oe[Q++],te!=te)return!0}else for(;ue>Q;Q++)if((Z||Q in oe)&&oe[Q]===_e)return Z||Q||0;return!Z&&-1}}},"./node_modules/core-js/modules/_bind.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_a-function.js"),j=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_invoke.js"),Z=[].slice,ve={},_e=function(de,oe,ue){if(!(oe in ve)){for(var Q=[],te=0;te<oe;te++)Q[te]="a["+te+"]";ve[oe]=Function("F,a","return new F("+Q.join(",")+")")}return ve[oe](de,ue)};X.exports=Function.bind||function(oe){var ue=L(this),Q=Z.call(arguments,1),te=function(){var fe=Q.concat(Z.call(arguments));return this instanceof te?_e(ue,fe.length,fe):ee(ue,fe,oe)};return j(ue.prototype)&&(te.prototype=ue.prototype),te}},"./node_modules/core-js/modules/_classof.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_cof.js"),j=E("./node_modules/core-js/modules/_wks.js")("toStringTag"),ee=L(function(){return arguments}())=="Arguments",Z=function(ve,_e){try{return ve[_e]}catch{}};X.exports=function(ve){var _e,de,oe;return ve===void 0?"Undefined":ve===null?"Null":typeof(de=Z(_e=Object(ve),j))=="string"?de:ee?L(_e):(oe=L(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(X,V){var E={}.toString;X.exports=function(L){return E.call(L).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(X,V){var E=X.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},"./node_modules/core-js/modules/_create-property.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-dp.js"),j=E("./node_modules/core-js/modules/_property-desc.js");X.exports=function(ee,Z,ve){Z in ee?L.f(ee,Z,j(0,ve)):ee[Z]=ve}},"./node_modules/core-js/modules/_ctx.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_a-function.js");X.exports=function(j,ee,Z){if(L(j),ee===void 0)return j;switch(Z){case 1:return function(ve){return j.call(ee,ve)};case 2:return function(ve,_e){return j.call(ee,ve,_e)};case 3:return function(ve,_e,de){return j.call(ee,ve,_e,de)}}return function(){return j.apply(ee,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(X,V){X.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},"./node_modules/core-js/modules/_descriptors.js":function(X,V,E){X.exports=!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_is-object.js"),j=E("./node_modules/core-js/modules/_global.js").document,ee=L(j)&&L(j.createElement);X.exports=function(Z){return ee?j.createElement(Z):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(X,V){X.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-keys.js"),j=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_object-pie.js");X.exports=function(Z){var ve=L(Z),_e=j.f;if(_e)for(var de=_e(Z),oe=ee.f,ue=0,Q;de.length>ue;)oe.call(Z,Q=de[ue++])&&ve.push(Q);return ve}},"./node_modules/core-js/modules/_export.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_global.js"),j=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_hide.js"),Z=E("./node_modules/core-js/modules/_redefine.js"),ve=E("./node_modules/core-js/modules/_ctx.js"),_e="prototype",de=function(oe,ue,Q){var te=oe&de.F,fe=oe&de.G,we=oe&de.S,Ee=oe&de.P,Ne=oe&de.B,Ae=fe?L:we?L[ue]||(L[ue]={}):(L[ue]||{})[_e],Re=fe?j:j[ue]||(j[ue]={}),Ze=Re[_e]||(Re[_e]={}),He,rt,dt,wt;fe&&(Q=ue);for(He in Q)rt=!te&&Ae&&Ae[He]!==void 0,dt=(rt?Ae:Q)[He],wt=Ne&&rt?ve(dt,L):Ee&&typeof dt=="function"?ve(Function.call,dt):dt,Ae&&Z(Ae,He,dt,oe&de.U),Re[He]!=dt&&ee(Re,He,wt),Ee&&Ze[He]!=dt&&(Ze[He]=dt)};L.core=j,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128,X.exports=de},"./node_modules/core-js/modules/_fails-is-regexp.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(j){var ee=/./;try{"/./"[j](ee)}catch{try{return ee[L]=!1,!"/./"[j](ee)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(X,V){X.exports=function(E){try{return!!E()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(X,V,E){E("./node_modules/core-js/modules/es6.regexp.exec.js");var L=E("./node_modules/core-js/modules/_redefine.js"),j=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_fails.js"),Z=E("./node_modules/core-js/modules/_defined.js"),ve=E("./node_modules/core-js/modules/_wks.js"),_e=E("./node_modules/core-js/modules/_regexp-exec.js"),de=ve("species"),oe=!ee(function(){var Q=/./;return Q.exec=function(){var te=[];return te.groups={a:"7"},te},"".replace(Q,"$<a>")!=="7"}),ue=function(){var Q=/(?:)/,te=Q.exec;Q.exec=function(){return te.apply(this,arguments)};var fe="ab".split(Q);return fe.length===2&&fe[0]==="a"&&fe[1]==="b"}();X.exports=function(Q,te,fe){var we=ve(Q),Ee=!ee(function(){var rt={};return rt[we]=function(){return 7},""[Q](rt)!=7}),Ne=Ee?!ee(function(){var rt=!1,dt=/a/;return dt.exec=function(){return rt=!0,null},Q==="split"&&(dt.constructor={},dt.constructor[de]=function(){return dt}),dt[we](""),!rt}):void 0;if(!Ee||!Ne||Q==="replace"&&!oe||Q==="split"&&!ue){var Ae=/./[we],Re=fe(Z,we,""[Q],function(dt,wt,kt,mt,St){return wt.exec===_e?Ee&&!St?{done:!0,value:Ae.call(wt,kt,mt)}:{done:!0,value:dt.call(kt,wt,mt)}:{done:!1}}),Ze=Re[0],He=Re[1];L(String.prototype,Q,Ze),j(RegExp.prototype,we,te==2?function(rt,dt){return He.call(rt,this,dt)}:function(rt){return He.call(rt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_an-object.js");X.exports=function(){var j=L(this),ee="";return j.global&&(ee+="g"),j.ignoreCase&&(ee+="i"),j.multiline&&(ee+="m"),j.unicode&&(ee+="u"),j.sticky&&(ee+="y"),ee}},"./node_modules/core-js/modules/_function-to-string.js":function(X,V,E){X.exports=E("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(X,V){var E=X.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},"./node_modules/core-js/modules/_has.js":function(X,V){var E={}.hasOwnProperty;X.exports=function(L,j){return E.call(L,j)}},"./node_modules/core-js/modules/_hide.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-dp.js"),j=E("./node_modules/core-js/modules/_property-desc.js");X.exports=E("./node_modules/core-js/modules/_descriptors.js")?function(ee,Z,ve){return L.f(ee,Z,j(1,ve))}:function(ee,Z,ve){return ee[Z]=ve,ee}},"./node_modules/core-js/modules/_html.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_global.js").document;X.exports=L&&L.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(X,V,E){X.exports=!E("./node_modules/core-js/modules/_descriptors.js")&&!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(E("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(X,V){X.exports=function(E,L,j){var ee=j===void 0;switch(L.length){case 0:return ee?E():E.call(j);case 1:return ee?E(L[0]):E.call(j,L[0]);case 2:return ee?E(L[0],L[1]):E.call(j,L[0],L[1]);case 3:return ee?E(L[0],L[1],L[2]):E.call(j,L[0],L[1],L[2]);case 4:return ee?E(L[0],L[1],L[2],L[3]):E.call(j,L[0],L[1],L[2],L[3])}return E.apply(j,L)}},"./node_modules/core-js/modules/_iobject.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_cof.js");X.exports=Object("z").propertyIsEnumerable(0)?Object:function(j){return L(j)=="String"?j.split(""):Object(j)}},"./node_modules/core-js/modules/_is-array-iter.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_iterators.js"),j=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=Array.prototype;X.exports=function(Z){return Z!==void 0&&(L.Array===Z||ee[j]===Z)}},"./node_modules/core-js/modules/_is-array.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_cof.js");X.exports=Array.isArray||function(ee){return L(ee)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(X,V){X.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_is-object.js"),j=E("./node_modules/core-js/modules/_cof.js"),ee=E("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(Z){var ve;return L(Z)&&((ve=Z[ee])!==void 0?!!ve:j(Z)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_an-object.js");X.exports=function(j,ee,Z,ve){try{return ve?ee(L(Z)[0],Z[1]):ee(Z)}catch(de){var _e=j.return;throw _e!==void 0&&L(_e.call(j)),de}}},"./node_modules/core-js/modules/_iter-create.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-create.js"),j=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_set-to-string-tag.js"),Z={};E("./node_modules/core-js/modules/_hide.js")(Z,E("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),X.exports=function(ve,_e,de){ve.prototype=L(Z,{next:j(1,de)}),ee(ve,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_library.js"),j=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),Z=E("./node_modules/core-js/modules/_hide.js"),ve=E("./node_modules/core-js/modules/_iterators.js"),_e=E("./node_modules/core-js/modules/_iter-create.js"),de=E("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=E("./node_modules/core-js/modules/_object-gpo.js"),ue=E("./node_modules/core-js/modules/_wks.js")("iterator"),Q=!([].keys&&"next"in[].keys()),te="@@iterator",fe="keys",we="values",Ee=function(){return this};X.exports=function(Ne,Ae,Re,Ze,He,rt,dt){_e(Re,Ae,Ze);var wt=function(N){if(!Q&&N in Vt)return Vt[N];switch(N){case fe:return function(){return new Re(this,N)};case we:return function(){return new Re(this,N)}}return function(){return new Re(this,N)}},kt=Ae+" Iterator",mt=He==we,St=!1,Vt=Ne.prototype,Lt=Vt[ue]||Vt[te]||He&&Vt[He],sn=Lt||wt(He),nt=He?mt?wt("entries"):sn:void 0,wn=Ae=="Array"&&Vt.entries||Lt,an,Ht,be;if(wn&&(be=oe(wn.call(new Ne)),be!==Object.prototype&&be.next&&(de(be,kt,!0),!L&&typeof be[ue]!="function"&&Z(be,ue,Ee))),mt&&Lt&&Lt.name!==we&&(St=!0,sn=function(){return Lt.call(this)}),(!L||dt)&&(Q||St||!Vt[ue])&&Z(Vt,ue,sn),ve[Ae]=sn,ve[kt]=Ee,He)if(an={values:mt?sn:wt(we),keys:rt?sn:wt(fe),entries:nt},dt)for(Ht in an)Ht in Vt||ee(Vt,Ht,an[Ht]);else j(j.P+j.F*(Q||St),Ae,an);return an}},"./node_modules/core-js/modules/_iter-detect.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_wks.js")("iterator"),j=!1;try{var ee=[7][L]();ee.return=function(){j=!0},Array.from(ee,function(){throw 2})}catch{}X.exports=function(Z,ve){if(!ve&&!j)return!1;var _e=!1;try{var de=[7],oe=de[L]();oe.next=function(){return{done:_e=!0}},de[L]=function(){return oe},Z(de)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(X,V){X.exports=function(E,L){return{value:L,done:!!E}}},"./node_modules/core-js/modules/_iterators.js":function(X,V){X.exports={}},"./node_modules/core-js/modules/_library.js":function(X,V){X.exports=!1},"./node_modules/core-js/modules/_meta.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_uid.js")("meta"),j=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_has.js"),Z=E("./node_modules/core-js/modules/_object-dp.js").f,ve=0,_e=Object.isExtensible||function(){return!0},de=!E("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),oe=function(we){Z(we,L,{value:{i:"O"+ ++ve,w:{}}})},ue=function(we,Ee){if(!j(we))return typeof we=="symbol"?we:(typeof we=="string"?"S":"P")+we;if(!ee(we,L)){if(!_e(we))return"F";if(!Ee)return"E";oe(we)}return we[L].i},Q=function(we,Ee){if(!ee(we,L)){if(!_e(we))return!0;if(!Ee)return!1;oe(we)}return we[L].w},te=function(we){return de&&fe.NEED&&_e(we)&&!ee(we,L)&&oe(we),we},fe=X.exports={KEY:L,NEED:!1,fastKey:ue,getWeak:Q,onFreeze:te}},"./node_modules/core-js/modules/_object-create.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_an-object.js"),j=E("./node_modules/core-js/modules/_object-dps.js"),ee=E("./node_modules/core-js/modules/_enum-bug-keys.js"),Z=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},_e="prototype",de=function(){var oe=E("./node_modules/core-js/modules/_dom-create.js")("iframe"),ue=ee.length,Q="<",te=">",fe;for(oe.style.display="none",E("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",fe=oe.contentWindow.document,fe.open(),fe.write(Q+"script"+te+"document.F=Object"+Q+"/script"+te),fe.close(),de=fe.F;ue--;)delete de[_e][ee[ue]];return de()};X.exports=Object.create||function(ue,Q){var te;return ue!==null?(ve[_e]=L(ue),te=new ve,ve[_e]=null,te[Z]=ue):te=de(),Q===void 0?te:j(te,Q)}},"./node_modules/core-js/modules/_object-dp.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_an-object.js"),j=E("./node_modules/core-js/modules/_ie8-dom-define.js"),ee=E("./node_modules/core-js/modules/_to-primitive.js"),Z=Object.defineProperty;V.f=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,de,oe){if(L(_e),de=ee(de,!0),L(oe),j)try{return Z(_e,de,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(_e[de]=oe.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-dp.js"),j=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_object-keys.js");X.exports=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,_e){j(ve);for(var de=ee(_e),oe=de.length,ue=0,Q;oe>ue;)L.f(ve,Q=de[ue++],_e[Q]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-pie.js"),j=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),Z=E("./node_modules/core-js/modules/_to-primitive.js"),ve=E("./node_modules/core-js/modules/_has.js"),_e=E("./node_modules/core-js/modules/_ie8-dom-define.js"),de=Object.getOwnPropertyDescriptor;V.f=E("./node_modules/core-js/modules/_descriptors.js")?de:function(ue,Q){if(ue=ee(ue),Q=Z(Q,!0),_e)try{return de(ue,Q)}catch{}if(ve(ue,Q))return j(!L.f.call(ue,Q),ue[Q])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_to-iobject.js"),j=E("./node_modules/core-js/modules/_object-gopn.js").f,ee={}.toString,Z=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(_e){try{return j(_e)}catch{return Z.slice()}};X.exports.f=function(de){return Z&&ee.call(de)=="[object Window]"?ve(de):j(L(de))}},"./node_modules/core-js/modules/_object-gopn.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-keys-internal.js"),j=E("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");V.f=Object.getOwnPropertyNames||function(Z){return L(Z,j)}},"./node_modules/core-js/modules/_object-gops.js":function(X,V){V.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_has.js"),j=E("./node_modules/core-js/modules/_to-object.js"),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),Z=Object.prototype;X.exports=Object.getPrototypeOf||function(ve){return ve=j(ve),L(ve,ee)?ve[ee]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?Z:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_has.js"),j=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_array-includes.js")(!1),Z=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");X.exports=function(ve,_e){var de=j(ve),oe=0,ue=[],Q;for(Q in de)Q!=Z&&L(de,Q)&&ue.push(Q);for(;_e.length>oe;)L(de,Q=_e[oe++])&&(~ee(ue,Q)||ue.push(Q));return ue}},"./node_modules/core-js/modules/_object-keys.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-keys-internal.js"),j=E("./node_modules/core-js/modules/_enum-bug-keys.js");X.exports=Object.keys||function(Z){return L(Z,j)}},"./node_modules/core-js/modules/_object-pie.js":function(X,V){V.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-gopn.js"),j=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_an-object.js"),Z=E("./node_modules/core-js/modules/_global.js").Reflect;X.exports=Z&&Z.ownKeys||function(_e){var de=L.f(ee(_e)),oe=j.f;return oe?de.concat(oe(_e)):de}},"./node_modules/core-js/modules/_property-desc.js":function(X,V){X.exports=function(E,L){return{enumerable:!(E&1),configurable:!(E&2),writable:!(E&4),value:L}}},"./node_modules/core-js/modules/_redefine.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_global.js"),j=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_has.js"),Z=E("./node_modules/core-js/modules/_uid.js")("src"),ve=E("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",de=(""+ve).split(_e);E("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return ve.call(oe)},(X.exports=function(oe,ue,Q,te){var fe=typeof Q=="function";fe&&(ee(Q,"name")||j(Q,"name",ue)),oe[ue]!==Q&&(fe&&(ee(Q,Z)||j(Q,Z,oe[ue]?""+oe[ue]:de.join(String(ue)))),oe===L?oe[ue]=Q:te?oe[ue]?oe[ue]=Q:j(oe,ue,Q):(delete oe[ue],j(oe,ue,Q)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[Z]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_classof.js"),j=RegExp.prototype.exec;X.exports=function(ee,Z){var ve=ee.exec;if(typeof ve=="function"){var _e=ve.call(ee,Z);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(L(ee)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return j.call(ee,Z)}},"./node_modules/core-js/modules/_regexp-exec.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_flags.js"),j=RegExp.prototype.exec,ee=String.prototype.replace,Z=j,ve="lastIndex",_e=function(){var ue=/a/,Q=/b*/g;return j.call(ue,"a"),j.call(Q,"a"),ue[ve]!==0||Q[ve]!==0}(),de=/()??/.exec("")[1]!==void 0,oe=_e||de;oe&&(Z=function(Q){var te=this,fe,we,Ee,Ne;return de&&(we=new RegExp("^"+te.source+"$(?!\\s)",L.call(te))),_e&&(fe=te[ve]),Ee=j.call(te,Q),_e&&Ee&&(te[ve]=te.global?Ee.index+Ee[0].length:fe),de&&Ee&&Ee.length>1&&ee.call(Ee[0],we,function(){for(Ne=1;Ne<arguments.length-2;Ne++)arguments[Ne]===void 0&&(Ee[Ne]=void 0)}),Ee}),X.exports=Z},"./node_modules/core-js/modules/_set-to-string-tag.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-dp.js").f,j=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_wks.js")("toStringTag");X.exports=function(Z,ve,_e){Z&&!j(Z=_e?Z:Z.prototype,ee)&&L(Z,ee,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_shared.js")("keys"),j=E("./node_modules/core-js/modules/_uid.js");X.exports=function(ee){return L[ee]||(L[ee]=j(ee))}},"./node_modules/core-js/modules/_shared.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_core.js"),j=E("./node_modules/core-js/modules/_global.js"),ee="__core-js_shared__",Z=j[ee]||(j[ee]={});(X.exports=function(ve,_e){return Z[ve]||(Z[ve]=_e!==void 0?_e:{})})("versions",[]).push({version:L.version,mode:E("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_an-object.js"),j=E("./node_modules/core-js/modules/_a-function.js"),ee=E("./node_modules/core-js/modules/_wks.js")("species");X.exports=function(Z,ve){var _e=L(Z).constructor,de;return _e===void 0||(de=L(_e)[ee])==null?ve:j(de)}},"./node_modules/core-js/modules/_string-at.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_to-integer.js"),j=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee){return function(Z,ve){var _e=String(j(Z)),de=L(ve),oe=_e.length,ue,Q;return de<0||de>=oe?ee?"":void 0:(ue=_e.charCodeAt(de),ue<55296||ue>56319||de+1===oe||(Q=_e.charCodeAt(de+1))<56320||Q>57343?ee?_e.charAt(de):ue:ee?_e.slice(de,de+2):(ue-55296<<10)+(Q-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_is-regexp.js"),j=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee,Z,ve){if(L(Z))throw TypeError("String#"+ve+" doesn't accept regex!");return String(j(ee))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_to-integer.js"),j=Math.max,ee=Math.min;X.exports=function(Z,ve){return Z=L(Z),Z<0?j(Z+ve,0):ee(Z,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(X,V){var E=Math.ceil,L=Math.floor;X.exports=function(j){return isNaN(j=+j)?0:(j>0?L:E)(j)}},"./node_modules/core-js/modules/_to-iobject.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_iobject.js"),j=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee){return L(j(ee))}},"./node_modules/core-js/modules/_to-length.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_to-integer.js"),j=Math.min;X.exports=function(ee){return ee>0?j(L(ee),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_defined.js");X.exports=function(j){return Object(L(j))}},"./node_modules/core-js/modules/_to-primitive.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_is-object.js");X.exports=function(j,ee){if(!L(j))return j;var Z,ve;if(ee&&typeof(Z=j.toString)=="function"&&!L(ve=Z.call(j))||typeof(Z=j.valueOf)=="function"&&!L(ve=Z.call(j))||!ee&&typeof(Z=j.toString)=="function"&&!L(ve=Z.call(j)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(X,V){var E=0,L=Math.random();X.exports=function(j){return"Symbol(".concat(j===void 0?"":j,")_",(++E+L).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_global.js"),j=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_library.js"),Z=E("./node_modules/core-js/modules/_wks-ext.js"),ve=E("./node_modules/core-js/modules/_object-dp.js").f;X.exports=function(_e){var de=j.Symbol||(j.Symbol=ee?{}:L.Symbol||{});_e.charAt(0)!="_"&&!(_e in de)&&ve(de,_e,{value:Z.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(X,V,E){V.f=E("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_shared.js")("wks"),j=E("./node_modules/core-js/modules/_uid.js"),ee=E("./node_modules/core-js/modules/_global.js").Symbol,Z=typeof ee=="function",ve=X.exports=function(_e){return L[_e]||(L[_e]=Z&&ee[_e]||(Z?ee:j)("Symbol."+_e))};ve.store=L},"./node_modules/core-js/modules/core.get-iterator-method.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_classof.js"),j=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=E("./node_modules/core-js/modules/_iterators.js");X.exports=E("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(Z){if(Z!=null)return Z[j]||Z["@@iterator"]||ee[L(Z)]}},"./node_modules/core-js/modules/es6.array.from.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_ctx.js"),j=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_to-object.js"),Z=E("./node_modules/core-js/modules/_iter-call.js"),ve=E("./node_modules/core-js/modules/_is-array-iter.js"),_e=E("./node_modules/core-js/modules/_to-length.js"),de=E("./node_modules/core-js/modules/_create-property.js"),oe=E("./node_modules/core-js/modules/core.get-iterator-method.js");j(j.S+j.F*!E("./node_modules/core-js/modules/_iter-detect.js")(function(ue){Array.from(ue)}),"Array",{from:function(Q){var te=ee(Q),fe=typeof this=="function"?this:Array,we=arguments.length,Ee=we>1?arguments[1]:void 0,Ne=Ee!==void 0,Ae=0,Re=oe(te),Ze,He,rt,dt;if(Ne&&(Ee=L(Ee,we>2?arguments[2]:void 0,2)),Re!=null&&!(fe==Array&&ve(Re)))for(dt=Re.call(te),He=new fe;!(rt=dt.next()).done;Ae++)de(He,Ae,Ne?Z(dt,Ee,[rt.value,Ae],!0):rt.value);else for(Ze=_e(te.length),He=new fe(Ze);Ze>Ae;Ae++)de(He,Ae,Ne?Ee(te[Ae],Ae):te[Ae]);return He.length=Ae,He}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_add-to-unscopables.js"),j=E("./node_modules/core-js/modules/_iter-step.js"),ee=E("./node_modules/core-js/modules/_iterators.js"),Z=E("./node_modules/core-js/modules/_to-iobject.js");X.exports=E("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,_e){this._t=Z(ve),this._i=0,this._k=_e},function(){var ve=this._t,_e=this._k,de=this._i++;return!ve||de>=ve.length?(this._t=void 0,j(1)):_e=="keys"?j(0,de):_e=="values"?j(0,ve[de]):j(0,[de,ve[de]])},"values"),ee.Arguments=ee.Array,L("keys"),L("values"),L("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_export.js");L(L.P,"Function",{bind:E("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_object-dp.js").f,j=Function.prototype,ee=/^\s*function ([^ (]*)/,Z="name";Z in j||E("./node_modules/core-js/modules/_descriptors.js")&&L(j,Z,{configurable:!0,get:function(){try{return(""+this).match(ee)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_export.js"),j=E("./node_modules/core-js/modules/_global.js").isFinite;L(L.S,"Number",{isFinite:function(Z){return typeof Z=="number"&&j(Z)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_classof.js"),j={};j[E("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",j+""!="[object z]"&&E("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+L(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_regexp-exec.js");E("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:L!==/./.exec},{exec:L})},"./node_modules/core-js/modules/es6.regexp.split.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_is-regexp.js"),j=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_species-constructor.js"),Z=E("./node_modules/core-js/modules/_advance-string-index.js"),ve=E("./node_modules/core-js/modules/_to-length.js"),_e=E("./node_modules/core-js/modules/_regexp-exec-abstract.js"),de=E("./node_modules/core-js/modules/_regexp-exec.js"),oe=E("./node_modules/core-js/modules/_fails.js"),ue=Math.min,Q=[].push,te="split",fe="length",we="lastIndex",Ee=4294967295,Ne=!oe(function(){});E("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ae,Re,Ze,He){var rt;return"abbc"[te](/(b)*/)[1]=="c"||"test"[te](/(?:)/,-1)[fe]!=4||"ab"[te](/(?:ab)*/)[fe]!=2||"."[te](/(.?)(.?)/)[fe]!=4||"."[te](/()()/)[fe]>1||""[te](/.?/)[fe]?rt=function(dt,wt){var kt=String(this);if(dt===void 0&&wt===0)return[];if(!L(dt))return Ze.call(kt,dt,wt);for(var mt=[],St=(dt.ignoreCase?"i":"")+(dt.multiline?"m":"")+(dt.unicode?"u":"")+(dt.sticky?"y":""),Vt=0,Lt=wt===void 0?Ee:wt>>>0,sn=new RegExp(dt.source,St+"g"),nt,wn,an;(nt=de.call(sn,kt))&&(wn=sn[we],!(wn>Vt&&(mt.push(kt.slice(Vt,nt.index)),nt[fe]>1&&nt.index<kt[fe]&&Q.apply(mt,nt.slice(1)),an=nt[0][fe],Vt=wn,mt[fe]>=Lt)));)sn[we]===nt.index&&sn[we]++;return Vt===kt[fe]?(an||!sn.test(""))&&mt.push(""):mt.push(kt.slice(Vt)),mt[fe]>Lt?mt.slice(0,Lt):mt}:"0"[te](void 0,0)[fe]?rt=function(dt,wt){return dt===void 0&&wt===0?[]:Ze.call(this,dt,wt)}:rt=Ze,[function(wt,kt){var mt=Ae(this),St=wt==null?void 0:wt[Re];return St!==void 0?St.call(wt,mt,kt):rt.call(String(mt),wt,kt)},function(dt,wt){var kt=He(rt,dt,this,wt,rt!==Ze);if(kt.done)return kt.value;var mt=j(dt),St=String(this),Vt=ee(mt,RegExp),Lt=mt.unicode,sn=(mt.ignoreCase?"i":"")+(mt.multiline?"m":"")+(mt.unicode?"u":"")+(Ne?"y":"g"),nt=new Vt(Ne?mt:"^(?:"+mt.source+")",sn),wn=wt===void 0?Ee:wt>>>0;if(wn===0)return[];if(St.length===0)return _e(nt,St)===null?[St]:[];for(var an=0,Ht=0,be=[];Ht<St.length;){nt.lastIndex=Ne?Ht:0;var N=_e(nt,Ne?St:St.slice(Ht)),D;if(N===null||(D=ue(ve(nt.lastIndex+(Ne?0:Ht)),St.length))===an)Ht=Z(St,Ht,Lt);else{if(be.push(St.slice(an,Ht)),be.length===wn)return be;for(var xe=1;xe<=N.length-1;xe++)if(be.push(N[xe]),be.length===wn)return be;Ht=an=D}}return be.push(St.slice(an)),be}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_export.js"),j=E("./node_modules/core-js/modules/_string-context.js"),ee="includes";L(L.P+L.F*E("./node_modules/core-js/modules/_fails-is-regexp.js")(ee),"String",{includes:function(ve){return!!~j(this,ve,ee).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_global.js"),j=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_descriptors.js"),Z=E("./node_modules/core-js/modules/_export.js"),ve=E("./node_modules/core-js/modules/_redefine.js"),_e=E("./node_modules/core-js/modules/_meta.js").KEY,de=E("./node_modules/core-js/modules/_fails.js"),oe=E("./node_modules/core-js/modules/_shared.js"),ue=E("./node_modules/core-js/modules/_set-to-string-tag.js"),Q=E("./node_modules/core-js/modules/_uid.js"),te=E("./node_modules/core-js/modules/_wks.js"),fe=E("./node_modules/core-js/modules/_wks-ext.js"),we=E("./node_modules/core-js/modules/_wks-define.js"),Ee=E("./node_modules/core-js/modules/_enum-keys.js"),Ne=E("./node_modules/core-js/modules/_is-array.js"),Ae=E("./node_modules/core-js/modules/_an-object.js"),Re=E("./node_modules/core-js/modules/_is-object.js"),Ze=E("./node_modules/core-js/modules/_to-object.js"),He=E("./node_modules/core-js/modules/_to-iobject.js"),rt=E("./node_modules/core-js/modules/_to-primitive.js"),dt=E("./node_modules/core-js/modules/_property-desc.js"),wt=E("./node_modules/core-js/modules/_object-create.js"),kt=E("./node_modules/core-js/modules/_object-gopn-ext.js"),mt=E("./node_modules/core-js/modules/_object-gopd.js"),St=E("./node_modules/core-js/modules/_object-gops.js"),Vt=E("./node_modules/core-js/modules/_object-dp.js"),Lt=E("./node_modules/core-js/modules/_object-keys.js"),sn=mt.f,nt=Vt.f,wn=kt.f,an=L.Symbol,Ht=L.JSON,be=Ht&&Ht.stringify,N="prototype",D=te("_hidden"),xe=te("toPrimitive"),Xe={}.propertyIsEnumerable,et=oe("symbol-registry"),ht=oe("symbols"),ae=oe("op-symbols"),M=Object[N],U=typeof an=="function"&&!!St.f,Se=L.QObject,Ge=!Se||!Se[N]||!Se[N].findChild,tt=ee&&de(function(){return wt(nt({},"a",{get:function(){return nt(this,"a",{value:7}).a}})).a!=7})?function(De,Fe,Ue){var Le=sn(M,Fe);Le&&delete M[Fe],nt(De,Fe,Ue),Le&&De!==M&&nt(M,Fe,Le)}:nt,Ve=function(De){var Fe=ht[De]=wt(an[N]);return Fe._k=De,Fe},Tt=U&&typeof an.iterator=="symbol"?function(De){return typeof De=="symbol"}:function(De){return De instanceof an},zt=function(Fe,Ue,Le){return Fe===M&&zt(ae,Ue,Le),Ae(Fe),Ue=rt(Ue,!0),Ae(Le),j(ht,Ue)?(Le.enumerable?(j(Fe,D)&&Fe[D][Ue]&&(Fe[D][Ue]=!1),Le=wt(Le,{enumerable:dt(0,!1)})):(j(Fe,D)||nt(Fe,D,dt(1,{})),Fe[D][Ue]=!0),tt(Fe,Ue,Le)):nt(Fe,Ue,Le)},hn=function(Fe,Ue){Ae(Fe);for(var Le=Ee(Ue=He(Ue)),Je=0,ft=Le.length,lt;ft>Je;)zt(Fe,lt=Le[Je++],Ue[lt]);return Fe},En=function(Fe,Ue){return Ue===void 0?wt(Fe):hn(wt(Fe),Ue)},Rt=function(Fe){var Ue=Xe.call(this,Fe=rt(Fe,!0));return this===M&&j(ht,Fe)&&!j(ae,Fe)?!1:Ue||!j(this,Fe)||!j(ht,Fe)||j(this,D)&&this[D][Fe]?Ue:!0},Dr=function(Fe,Ue){if(Fe=He(Fe),Ue=rt(Ue,!0),!(Fe===M&&j(ht,Ue)&&!j(ae,Ue))){var Le=sn(Fe,Ue);return Le&&j(ht,Ue)&&!(j(Fe,D)&&Fe[D][Ue])&&(Le.enumerable=!0),Le}},fi=function(Fe){for(var Ue=wn(He(Fe)),Le=[],Je=0,ft;Ue.length>Je;)!j(ht,ft=Ue[Je++])&&ft!=D&&ft!=_e&&Le.push(ft);return Le},tr=function(Fe){for(var Ue=Fe===M,Le=wn(Ue?ae:He(Fe)),Je=[],ft=0,lt;Le.length>ft;)j(ht,lt=Le[ft++])&&(!Ue||j(M,lt))&&Je.push(ht[lt]);return Je};U||(an=function(){if(this instanceof an)throw TypeError("Symbol is not a constructor!");var Fe=Q(arguments.length>0?arguments[0]:void 0),Ue=function(Le){this===M&&Ue.call(ae,Le),j(this,D)&&j(this[D],Fe)&&(this[D][Fe]=!1),tt(this,Fe,dt(1,Le))};return ee&&Ge&&tt(M,Fe,{configurable:!0,set:Ue}),Ve(Fe)},ve(an[N],"toString",function(){return this._k}),mt.f=Dr,Vt.f=zt,E("./node_modules/core-js/modules/_object-gopn.js").f=kt.f=fi,E("./node_modules/core-js/modules/_object-pie.js").f=Rt,St.f=tr,ee&&!E("./node_modules/core-js/modules/_library.js")&&ve(M,"propertyIsEnumerable",Rt,!0),fe.f=function(De){return Ve(te(De))}),Z(Z.G+Z.W+Z.F*!U,{Symbol:an});for(var ke="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ke.length>ie;)te(ke[ie++]);for(var ce=Lt(te.store),ge=0;ce.length>ge;)we(ce[ge++]);Z(Z.S+Z.F*!U,"Symbol",{for:function(De){return j(et,De+="")?et[De]:et[De]=an(De)},keyFor:function(Fe){if(!Tt(Fe))throw TypeError(Fe+" is not a symbol!");for(var Ue in et)if(et[Ue]===Fe)return Ue},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),Z(Z.S+Z.F*!U,"Object",{create:En,defineProperty:zt,defineProperties:hn,getOwnPropertyDescriptor:Dr,getOwnPropertyNames:fi,getOwnPropertySymbols:tr});var Oe=de(function(){St.f(1)});Z(Z.S+Z.F*Oe,"Object",{getOwnPropertySymbols:function(Fe){return St.f(Ze(Fe))}}),Ht&&Z(Z.S+Z.F*(!U||de(function(){var De=an();return be([De])!="[null]"||be({a:De})!="{}"||be(Object(De))!="{}"})),"JSON",{stringify:function(Fe){for(var Ue=[Fe],Le=1,Je,ft;arguments.length>Le;)Ue.push(arguments[Le++]);if(ft=Je=Ue[1],!(!Re(Je)&&Fe===void 0||Tt(Fe)))return Ne(Je)||(Je=function(lt,ut){if(typeof ft=="function"&&(ut=ft.call(this,lt,ut)),!Tt(ut))return ut}),Ue[1]=Je,be.apply(Ht,Ue)}}),an[N][xe]||E("./node_modules/core-js/modules/_hide.js")(an[N],xe,an[N].valueOf),ue(an,"Symbol"),ue(Math,"Math",!0),ue(L.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_export.js"),j=E("./node_modules/core-js/modules/_array-includes.js")(!0);L(L.P,"Array",{includes:function(Z){return j(this,Z,arguments.length>1?arguments[1]:void 0)}}),E("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(X,V,E){var L=E("./node_modules/core-js/modules/_export.js"),j=E("./node_modules/core-js/modules/_own-keys.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),Z=E("./node_modules/core-js/modules/_object-gopd.js"),ve=E("./node_modules/core-js/modules/_create-property.js");L(L.S,"Object",{getOwnPropertyDescriptors:function(de){for(var oe=ee(de),ue=Z.f,Q=j(oe),te={},fe=0,we,Ee;Q.length>fe;)Ee=ue(oe,we=Q[fe++]),Ee!==void 0&&ve(te,we,Ee);return te}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(X,V,E){E("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(X,V,E){for(var L=E("./node_modules/core-js/modules/es6.array.iterator.js"),j=E("./node_modules/core-js/modules/_object-keys.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),Z=E("./node_modules/core-js/modules/_global.js"),ve=E("./node_modules/core-js/modules/_hide.js"),_e=E("./node_modules/core-js/modules/_iterators.js"),de=E("./node_modules/core-js/modules/_wks.js"),oe=de("iterator"),ue=de("toStringTag"),Q=_e.Array,te={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},fe=j(te),we=0;we<fe.length;we++){var Ee=fe[we],Ne=te[Ee],Ae=Z[Ee],Re=Ae&&Ae.prototype,Ze;if(Re&&(Re[oe]||ve(Re,oe,Q),Re[ue]||ve(Re,ue,Ee),_e[Ee]=Q,Ne))for(Ze in L)Re[Ze]||ee(Re,Ze,L[Ze],!0)}},"./node_modules/crypt/crypt.js":function(X,V){(function(){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L={rotl:function(j,ee){return j<<ee|j>>>32-ee},rotr:function(j,ee){return j<<32-ee|j>>>ee},endian:function(j){if(j.constructor==Number)return L.rotl(j,8)&16711935|L.rotl(j,24)&4278255360;for(var ee=0;ee<j.length;ee++)j[ee]=L.endian(j[ee]);return j},randomBytes:function(j){for(var ee=[];j>0;j--)ee.push(Math.floor(Math.random()*256));return ee},bytesToWords:function(j){for(var ee=[],Z=0,ve=0;Z<j.length;Z++,ve+=8)ee[ve>>>5]|=j[Z]<<24-ve%32;return ee},wordsToBytes:function(j){for(var ee=[],Z=0;Z<j.length*32;Z+=8)ee.push(j[Z>>>5]>>>24-Z%32&255);return ee},bytesToHex:function(j){for(var ee=[],Z=0;Z<j.length;Z++)ee.push((j[Z]>>>4).toString(16)),ee.push((j[Z]&15).toString(16));return ee.join("")},hexToBytes:function(j){for(var ee=[],Z=0;Z<j.length;Z+=2)ee.push(parseInt(j.substr(Z,2),16));return ee},bytesToBase64:function(j){for(var ee=[],Z=0;Z<j.length;Z+=3)for(var ve=j[Z]<<16|j[Z+1]<<8|j[Z+2],_e=0;_e<4;_e++)Z*8+_e*6<=j.length*8?ee.push(E.charAt(ve>>>6*(3-_e)&63)):ee.push("=");return ee.join("")},base64ToBytes:function(j){j=j.replace(/[^A-Z0-9+\/]/ig,"");for(var ee=[],Z=0,ve=0;Z<j.length;ve=++Z%4)ve!=0&&ee.push((E.indexOf(j.charAt(Z-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|E.indexOf(j.charAt(Z))>>>6-ve*2);return ee}};X.exports=L})()},"./node_modules/is-buffer/index.js":function(X,V){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */X.exports=function(j){return j!=null&&(E(j)||L(j)||!!j._isBuffer)};function E(j){return!!j.constructor&&typeof j.constructor.isBuffer=="function"&&j.constructor.isBuffer(j)}function L(j){return typeof j.readFloatLE=="function"&&typeof j.slice=="function"&&E(j.slice(0,0))}},"./node_modules/md5/md5.js":function(X,V,E){(function(){var L=E("./node_modules/crypt/crypt.js"),j=E("./node_modules/charenc/charenc.js").utf8,ee=E("./node_modules/is-buffer/index.js"),Z=E("./node_modules/charenc/charenc.js").bin,ve=function(_e,de){_e.constructor==String?de&&de.encoding==="binary"?_e=Z.stringToBytes(_e):_e=j.stringToBytes(_e):ee(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var oe=L.bytesToWords(_e),ue=_e.length*8,Q=1732584193,te=-271733879,fe=-1732584194,we=271733878,Ee=0;Ee<oe.length;Ee++)oe[Ee]=(oe[Ee]<<8|oe[Ee]>>>24)&16711935|(oe[Ee]<<24|oe[Ee]>>>8)&4278255360;oe[ue>>>5]|=128<<ue%32,oe[(ue+64>>>9<<4)+14]=ue;for(var Ne=ve._ff,Ae=ve._gg,Re=ve._hh,Ze=ve._ii,Ee=0;Ee<oe.length;Ee+=16){var He=Q,rt=te,dt=fe,wt=we;Q=Ne(Q,te,fe,we,oe[Ee+0],7,-680876936),we=Ne(we,Q,te,fe,oe[Ee+1],12,-389564586),fe=Ne(fe,we,Q,te,oe[Ee+2],17,606105819),te=Ne(te,fe,we,Q,oe[Ee+3],22,-1044525330),Q=Ne(Q,te,fe,we,oe[Ee+4],7,-176418897),we=Ne(we,Q,te,fe,oe[Ee+5],12,1200080426),fe=Ne(fe,we,Q,te,oe[Ee+6],17,-1473231341),te=Ne(te,fe,we,Q,oe[Ee+7],22,-45705983),Q=Ne(Q,te,fe,we,oe[Ee+8],7,1770035416),we=Ne(we,Q,te,fe,oe[Ee+9],12,-1958414417),fe=Ne(fe,we,Q,te,oe[Ee+10],17,-42063),te=Ne(te,fe,we,Q,oe[Ee+11],22,-1990404162),Q=Ne(Q,te,fe,we,oe[Ee+12],7,1804603682),we=Ne(we,Q,te,fe,oe[Ee+13],12,-40341101),fe=Ne(fe,we,Q,te,oe[Ee+14],17,-1502002290),te=Ne(te,fe,we,Q,oe[Ee+15],22,1236535329),Q=Ae(Q,te,fe,we,oe[Ee+1],5,-165796510),we=Ae(we,Q,te,fe,oe[Ee+6],9,-1069501632),fe=Ae(fe,we,Q,te,oe[Ee+11],14,643717713),te=Ae(te,fe,we,Q,oe[Ee+0],20,-373897302),Q=Ae(Q,te,fe,we,oe[Ee+5],5,-701558691),we=Ae(we,Q,te,fe,oe[Ee+10],9,38016083),fe=Ae(fe,we,Q,te,oe[Ee+15],14,-660478335),te=Ae(te,fe,we,Q,oe[Ee+4],20,-405537848),Q=Ae(Q,te,fe,we,oe[Ee+9],5,568446438),we=Ae(we,Q,te,fe,oe[Ee+14],9,-1019803690),fe=Ae(fe,we,Q,te,oe[Ee+3],14,-187363961),te=Ae(te,fe,we,Q,oe[Ee+8],20,1163531501),Q=Ae(Q,te,fe,we,oe[Ee+13],5,-1444681467),we=Ae(we,Q,te,fe,oe[Ee+2],9,-51403784),fe=Ae(fe,we,Q,te,oe[Ee+7],14,1735328473),te=Ae(te,fe,we,Q,oe[Ee+12],20,-1926607734),Q=Re(Q,te,fe,we,oe[Ee+5],4,-378558),we=Re(we,Q,te,fe,oe[Ee+8],11,-2022574463),fe=Re(fe,we,Q,te,oe[Ee+11],16,1839030562),te=Re(te,fe,we,Q,oe[Ee+14],23,-35309556),Q=Re(Q,te,fe,we,oe[Ee+1],4,-1530992060),we=Re(we,Q,te,fe,oe[Ee+4],11,1272893353),fe=Re(fe,we,Q,te,oe[Ee+7],16,-155497632),te=Re(te,fe,we,Q,oe[Ee+10],23,-1094730640),Q=Re(Q,te,fe,we,oe[Ee+13],4,681279174),we=Re(we,Q,te,fe,oe[Ee+0],11,-358537222),fe=Re(fe,we,Q,te,oe[Ee+3],16,-722521979),te=Re(te,fe,we,Q,oe[Ee+6],23,76029189),Q=Re(Q,te,fe,we,oe[Ee+9],4,-640364487),we=Re(we,Q,te,fe,oe[Ee+12],11,-421815835),fe=Re(fe,we,Q,te,oe[Ee+15],16,530742520),te=Re(te,fe,we,Q,oe[Ee+2],23,-995338651),Q=Ze(Q,te,fe,we,oe[Ee+0],6,-198630844),we=Ze(we,Q,te,fe,oe[Ee+7],10,1126891415),fe=Ze(fe,we,Q,te,oe[Ee+14],15,-1416354905),te=Ze(te,fe,we,Q,oe[Ee+5],21,-57434055),Q=Ze(Q,te,fe,we,oe[Ee+12],6,1700485571),we=Ze(we,Q,te,fe,oe[Ee+3],10,-1894986606),fe=Ze(fe,we,Q,te,oe[Ee+10],15,-1051523),te=Ze(te,fe,we,Q,oe[Ee+1],21,-2054922799),Q=Ze(Q,te,fe,we,oe[Ee+8],6,1873313359),we=Ze(we,Q,te,fe,oe[Ee+15],10,-30611744),fe=Ze(fe,we,Q,te,oe[Ee+6],15,-1560198380),te=Ze(te,fe,we,Q,oe[Ee+13],21,1309151649),Q=Ze(Q,te,fe,we,oe[Ee+4],6,-145523070),we=Ze(we,Q,te,fe,oe[Ee+11],10,-1120210379),fe=Ze(fe,we,Q,te,oe[Ee+2],15,718787259),te=Ze(te,fe,we,Q,oe[Ee+9],21,-343485551),Q=Q+He>>>0,te=te+rt>>>0,fe=fe+dt>>>0,we=we+wt>>>0}return L.endian([Q,te,fe,we])};ve._ff=function(_e,de,oe,ue,Q,te,fe){var we=_e+(de&oe|~de&ue)+(Q>>>0)+fe;return(we<<te|we>>>32-te)+de},ve._gg=function(_e,de,oe,ue,Q,te,fe){var we=_e+(de&ue|oe&~ue)+(Q>>>0)+fe;return(we<<te|we>>>32-te)+de},ve._hh=function(_e,de,oe,ue,Q,te,fe){var we=_e+(de^oe^ue)+(Q>>>0)+fe;return(we<<te|we>>>32-te)+de},ve._ii=function(_e,de,oe,ue,Q,te,fe){var we=_e+(oe^(de|~ue))+(Q>>>0)+fe;return(we<<te|we>>>32-te)+de},ve._blocksize=16,ve._digestsize=16,X.exports=function(_e,de){if(_e==null)throw new Error("Illegal argument "+_e);var oe=L.wordsToBytes(ve(_e,de));return de&&de.asBytes?oe:de&&de.asString?Z.bytesToString(oe):L.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(X,V,E){var L=function(j){var ee=Object.prototype,Z=ee.hasOwnProperty,ve,_e=typeof Symbol=="function"?Symbol:{},de=_e.iterator||"@@iterator",oe=_e.asyncIterator||"@@asyncIterator",ue=_e.toStringTag||"@@toStringTag";function Q(N,D,xe){return Object.defineProperty(N,D,{value:xe,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{Q({},"")}catch{Q=function(D,xe,Xe){return D[xe]=Xe}}function te(N,D,xe,Xe){var et=D&&D.prototype instanceof Ze?D:Ze,ht=Object.create(et.prototype),ae=new an(Xe||[]);return ht._invoke=Lt(N,xe,ae),ht}j.wrap=te;function fe(N,D,xe){try{return{type:"normal",arg:N.call(D,xe)}}catch(Xe){return{type:"throw",arg:Xe}}}var we="suspendedStart",Ee="suspendedYield",Ne="executing",Ae="completed",Re={};function Ze(){}function He(){}function rt(){}var dt={};dt[de]=function(){return this};var wt=Object.getPrototypeOf,kt=wt&&wt(wt(Ht([])));kt&&kt!==ee&&Z.call(kt,de)&&(dt=kt);var mt=rt.prototype=Ze.prototype=Object.create(dt);He.prototype=mt.constructor=rt,rt.constructor=He,He.displayName=Q(rt,ue,"GeneratorFunction");function St(N){["next","throw","return"].forEach(function(D){Q(N,D,function(xe){return this._invoke(D,xe)})})}j.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return D?D===He||(D.displayName||D.name)==="GeneratorFunction":!1},j.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,rt):(N.__proto__=rt,Q(N,ue,"GeneratorFunction")),N.prototype=Object.create(mt),N},j.awrap=function(N){return{__await:N}};function Vt(N,D){function xe(ht,ae,M,U){var Se=fe(N[ht],N,ae);if(Se.type==="throw")U(Se.arg);else{var Ge=Se.arg,tt=Ge.value;return tt&&typeof tt=="object"&&Z.call(tt,"__await")?D.resolve(tt.__await).then(function(Ve){xe("next",Ve,M,U)},function(Ve){xe("throw",Ve,M,U)}):D.resolve(tt).then(function(Ve){Ge.value=Ve,M(Ge)},function(Ve){return xe("throw",Ve,M,U)})}}var Xe;function et(ht,ae){function M(){return new D(function(U,Se){xe(ht,ae,U,Se)})}return Xe=Xe?Xe.then(M,M):M()}this._invoke=et}St(Vt.prototype),Vt.prototype[oe]=function(){return this},j.AsyncIterator=Vt,j.async=function(N,D,xe,Xe,et){et===void 0&&(et=Promise);var ht=new Vt(te(N,D,xe,Xe),et);return j.isGeneratorFunction(D)?ht:ht.next().then(function(ae){return ae.done?ae.value:ht.next()})};function Lt(N,D,xe){var Xe=we;return function(ht,ae){if(Xe===Ne)throw new Error("Generator is already running");if(Xe===Ae){if(ht==="throw")throw ae;return be()}for(xe.method=ht,xe.arg=ae;;){var M=xe.delegate;if(M){var U=sn(M,xe);if(U){if(U===Re)continue;return U}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(Xe===we)throw Xe=Ae,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);Xe=Ne;var Se=fe(N,D,xe);if(Se.type==="normal"){if(Xe=xe.done?Ae:Ee,Se.arg===Re)continue;return{value:Se.arg,done:xe.done}}else Se.type==="throw"&&(Xe=Ae,xe.method="throw",xe.arg=Se.arg)}}}function sn(N,D){var xe=N.iterator[D.method];if(xe===ve){if(D.delegate=null,D.method==="throw"){if(N.iterator.return&&(D.method="return",D.arg=ve,sn(N,D),D.method==="throw"))return Re;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return Re}var Xe=fe(xe,N.iterator,D.arg);if(Xe.type==="throw")return D.method="throw",D.arg=Xe.arg,D.delegate=null,Re;var et=Xe.arg;if(!et)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,Re;if(et.done)D[N.resultName]=et.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=ve);else return et;return D.delegate=null,Re}St(mt),Q(mt,ue,"Generator"),mt[de]=function(){return this},mt.toString=function(){return"[object Generator]"};function nt(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function wn(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function an(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(nt,this),this.reset(!0)}j.keys=function(N){var D=[];for(var xe in N)D.push(xe);return D.reverse(),function Xe(){for(;D.length;){var et=D.pop();if(et in N)return Xe.value=et,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function Ht(N){if(N){var D=N[de];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var xe=-1,Xe=function et(){for(;++xe<N.length;)if(Z.call(N,xe))return et.value=N[xe],et.done=!1,et;return et.value=ve,et.done=!0,et};return Xe.next=Xe}}return{next:be}}j.values=Ht;function be(){return{value:ve,done:!0}}return an.prototype={constructor:an,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(wn),!N)for(var D in this)D.charAt(0)==="t"&&Z.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=ve)},stop:function(){this.done=!0;var N=this.tryEntries[0],D=N.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var D=this;function xe(U,Se){return ht.type="throw",ht.arg=N,D.next=U,Se&&(D.method="next",D.arg=ve),!!Se}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var et=this.tryEntries[Xe],ht=et.completion;if(et.tryLoc==="root")return xe("end");if(et.tryLoc<=this.prev){var ae=Z.call(et,"catchLoc"),M=Z.call(et,"finallyLoc");if(ae&&M){if(this.prev<et.catchLoc)return xe(et.catchLoc,!0);if(this.prev<et.finallyLoc)return xe(et.finallyLoc)}else if(ae){if(this.prev<et.catchLoc)return xe(et.catchLoc,!0)}else if(M){if(this.prev<et.finallyLoc)return xe(et.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,D){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Xe=this.tryEntries[xe];if(Xe.tryLoc<=this.prev&&Z.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var et=Xe;break}}et&&(N==="break"||N==="continue")&&et.tryLoc<=D&&D<=et.finallyLoc&&(et=null);var ht=et?et.completion:{};return ht.type=N,ht.arg=D,et?(this.method="next",this.next=et.finallyLoc,Re):this.complete(ht)},complete:function(N,D){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&D&&(this.next=D),Re},finish:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.finallyLoc===N)return this.complete(xe.completion,xe.afterLoc),wn(xe),Re}},catch:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.tryLoc===N){var Xe=xe.completion;if(Xe.type==="throw"){var et=Xe.arg;wn(xe)}return et}}throw new Error("illegal catch attempt")},delegateYield:function(N,D,xe){return this.delegate={iterator:Ht(N),resultName:D,nextLoc:xe},this.method==="next"&&(this.arg=ve),Re}},j}(X.exports);try{regeneratorRuntime=L}catch{Function("r","regeneratorRuntime = r")(L)}},"./src/api.js":function(X,V,E){E.r(V),E.d(V,"setup",function(){return Ne}),E.d(V,"setupCache",function(){return Ee}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var L=E("axios"),j=E.n(L),ee=E("./src/request.js"),Z=E("./src/cache.js");E.d(V,"serializeQuery",function(){return Z.serializeQuery});var ve=E("./src/config.js"),_e=E("./src/utilities.js");function de(Ae,Re){if(Ae==null)return{};var Ze=oe(Ae,Re),He,rt;if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(Ae);for(rt=0;rt<dt.length;rt++)He=dt[rt],!(Re.indexOf(He)>=0)&&Object.prototype.propertyIsEnumerable.call(Ae,He)&&(Ze[He]=Ae[He])}return Ze}function oe(Ae,Re){if(Ae==null)return{};var Ze={},He=Object.keys(Ae),rt,dt;for(dt=0;dt<He.length;dt++)rt=He[dt],!(Re.indexOf(rt)>=0)&&(Ze[rt]=Ae[rt]);return Ze}function ue(Ae,Re){var Ze=Object.keys(Ae);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(Ae);Re&&(He=He.filter(function(rt){return Object.getOwnPropertyDescriptor(Ae,rt).enumerable})),Ze.push.apply(Ze,He)}return Ze}function Q(Ae){for(var Re=1;Re<arguments.length;Re++){var Ze=arguments[Re]!=null?arguments[Re]:{};Re%2?ue(Object(Ze),!0).forEach(function(He){te(Ae,He,Ze[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(Ze)):ue(Object(Ze)).forEach(function(He){Object.defineProperty(Ae,He,Object.getOwnPropertyDescriptor(Ze,He))})}return Ae}function te(Ae,Re,Ze){return Re in Ae?Object.defineProperty(Ae,Re,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):Ae[Re]=Ze,Ae}function fe(Ae,Re,Ze,He,rt,dt,wt){try{var kt=Ae[dt](wt),mt=kt.value}catch(St){Ze(St);return}kt.done?Re(mt):Promise.resolve(mt).then(He,rt)}function we(Ae){return function(){var Re=this,Ze=arguments;return new Promise(function(He,rt){var dt=Ae.apply(Re,Ze);function wt(mt){fe(dt,He,rt,wt,kt,"next",mt)}function kt(mt){fe(dt,He,rt,wt,kt,"throw",mt)}wt(void 0)})}}function Ee(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae=Object(ve.makeConfig)(Ae);function Re(He){return Ze.apply(this,arguments)}function Ze(){return Ze=we(regeneratorRuntime.mark(function He(rt){var dt,wt,kt,mt,St;return regeneratorRuntime.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return dt=Object(ve.mergeRequestConfig)(Ae,rt),Lt.next=3,Object(ee.default)(dt,rt);case 3:if(wt=Lt.sent,kt=wt.next,Object(_e.isFunction)(kt)){Lt.next=7;break}return Lt.abrupt("return",kt);case 7:return Lt.prev=7,Lt.next=10,dt.adapter(rt);case 10:wt=Lt.sent,Lt.next=16;break;case 13:Lt.prev=13,Lt.t0=Lt.catch(7),mt=Lt.t0;case 16:if(!mt){Lt.next=31;break}if(St=Object(_e.isFunction)(dt.readOnError)?dt.readOnError(mt,rt):dt.readOnError,!St){Lt.next=30;break}return Lt.prev=19,dt.acceptStale=!0,Lt.next=23,Object(ee.default)(dt,rt);case 23:return wt=Lt.sent,wt.next.request.stale=!0,Lt.abrupt("return",wt.next);case 28:Lt.prev=28,Lt.t1=Lt.catch(19);case 30:throw mt;case 31:return Lt.abrupt("return",kt(wt));case 32:case"end":return Lt.stop()}},He,null,[[7,13],[19,28]])})),Ze.apply(this,arguments)}return{adapter:Re,config:Ae,store:Ae.store}}function Ne(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Re=Q(Q(Q({},ve.defaults.axios),Ae),{},{cache:Q(Q({},ve.defaults.axios.cache),Ae.cache)}),Ze=Ee(Re.cache);Re.cache;var He=de(Re,["cache"]),rt=j.a.create(Q(Q({},He),{},{adapter:Ze.adapter}));return rt.cache=Ze.store,rt}V.default={setup:Ne,setupCache:Ee,serializeQuery:Z.serializeQuery}},"./src/cache.js":function(X,V,E){E.r(V),E.d(V,"read",function(){return ue}),E.d(V,"write",function(){return de}),E.d(V,"key",function(){return te}),E.d(V,"invalidate",function(){return Ee}),E.d(V,"serializeQuery",function(){return Ne}),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var L=E("./src/utilities.js"),j=E("./node_modules/md5/md5.js"),ee=E.n(j),Z=E("./src/serialize.js");function ve(Ae,Re,Ze,He,rt,dt,wt){try{var kt=Ae[dt](wt),mt=kt.value}catch(St){Ze(St);return}kt.done?Re(mt):Promise.resolve(mt).then(He,rt)}function _e(Ae){return function(){var Re=this,Ze=arguments;return new Promise(function(He,rt){var dt=Ae.apply(Re,Ze);function wt(mt){ve(dt,He,rt,wt,kt,"next",mt)}function kt(mt){ve(dt,He,rt,wt,kt,"throw",mt)}wt(void 0)})}}function de(Ae,Re,Ze){return oe.apply(this,arguments)}function oe(){return oe=_e(regeneratorRuntime.mark(function Ae(Re,Ze,He){var rt;return regeneratorRuntime.wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return wt.prev=0,rt={expires:Re.expires,data:Object(Z.default)(Re,Ze,He)},wt.next=4,Re.store.setItem(Re.uuid,rt);case 4:wt.next=19;break;case 6:if(wt.prev=6,wt.t0=wt.catch(0),Re.debug("Could not store response",wt.t0),!Re.clearOnError){wt.next=18;break}return wt.prev=10,wt.next=13,Re.store.clear();case 13:wt.next=18;break;case 15:wt.prev=15,wt.t1=wt.catch(10),Re.debug("Could not clear store",wt.t1);case 18:return wt.abrupt("return",!1);case 19:return wt.abrupt("return",!0);case 20:case"end":return wt.stop()}},Ae,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function ue(Ae,Re){return Q.apply(this,arguments)}function Q(){return Q=_e(regeneratorRuntime.mark(function Ae(Re,Ze){var He,rt,dt,wt,kt,mt,St,Vt;return regeneratorRuntime.wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return He=Re.uuid,rt=Re.ignoreCache,sn.next=3,Re.store.getItem(He);case 3:if(dt=sn.sent,!(rt||!dt||!dt.data)){sn.next=10;break}throw Re.debug("cache-miss",Ze.url),wt=new Error,wt.reason="cache-miss",wt.message="Entry not found from cache",wt;case 10:if(kt=dt.expires,mt=dt.data,St=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!St&&!Re.acceptStale&&kt!==0&&kt<Date.now())){sn.next=18;break}throw Re.debug("cache-stale",Ze.url),Vt=new Error,Vt.reason="cache-stale",Vt.message="Entry is stale",Vt;case 18:return Re.debug(Re.acceptStale?"cache-hit-stale":"cache-hit",Ze.url),sn.abrupt("return",mt);case 20:case"end":return sn.stop()}},Ae)})),Q.apply(this,arguments)}function te(Ae){if(Object(L.isFunction)(Ae.key))return Ae.key;var Re;return Object(L.isString)(Ae.key)?Re=function(He){var rt="".concat(He.baseURL?He.baseURL:"").concat(He.url),dt="".concat(Ae.key,"/").concat(rt).concat(Ne(He));return He.data?dt+ee()(He.data):dt}:Re=function(He){var rt="".concat(He.baseURL?He.baseURL:"").concat(He.url),dt=rt+Ne(He);return He.data?dt+ee()(He.data):dt},Re}function fe(Ae,Re){return we.apply(this,arguments)}function we(){return we=_e(regeneratorRuntime.mark(function Ae(Re,Ze){var He;return regeneratorRuntime.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(He=Ze.method.toLowerCase(),!Re.exclude.methods.includes(He)){dt.next=4;break}return dt.next=4,Re.store.removeItem(Re.uuid);case 4:case"end":return dt.stop()}},Ae)})),we.apply(this,arguments)}function Ee(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(L.isFunction)(Ae.invalidate)?Ae.invalidate:fe}function Ne(Ae){if(!Ae.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ae.params);var Re=Ae.params,Ze=Ae.params instanceof URLSearchParams;return Ze||(Re=new URLSearchParams,Object.keys(Ae.params).forEach(function(He){return Re.append(He,Ae.params[He])})),"?".concat(Re.toString())}V.default={read:ue,write:de,key:te,invalidate:Ee,serializeQuery:Ne}},"./src/config.js":function(X,V,E){E.r(V),E.d(V,"defaults",function(){return Q}),E.d(V,"makeConfig",function(){return fe}),E.d(V,"mergeRequestConfig",function(){return we}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var L=E("axios"),j=E.n(L),ee=E("./src/memory.js"),Z=E("./src/cache.js");function ve(Ee,Ne){var Ae=Object.keys(Ee);if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(Ee);Ne&&(Re=Re.filter(function(Ze){return Object.getOwnPropertyDescriptor(Ee,Ze).enumerable})),Ae.push.apply(Ae,Re)}return Ae}function _e(Ee){for(var Ne=1;Ne<arguments.length;Ne++){var Ae=arguments[Ne]!=null?arguments[Ne]:{};Ne%2?ve(Object(Ae),!0).forEach(function(Re){de(Ee,Re,Ae[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(Ae)):ve(Object(Ae)).forEach(function(Re){Object.defineProperty(Ee,Re,Object.getOwnPropertyDescriptor(Ae,Re))})}return Ee}function de(Ee,Ne,Ae){return Ne in Ee?Object.defineProperty(Ee,Ne,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):Ee[Ne]=Ae,Ee}var oe=function(){},ue=function(){for(var Ne,Ae=arguments.length,Re=new Array(Ae),Ze=0;Ze<Ae;Ze++)Re[Ze]=arguments[Ze];return(Ne=console).log.apply(Ne,["[axios-cache-adapter]"].concat(Re))},Q={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:j.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},te=["limit","store","adapter","uuid","acceptStale"],fe=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ae=_e(_e(_e({},Q.cache),Ne),{},{exclude:_e(_e({},Q.cache.exclude),Ne.exclude)});return Ae.key=Object(Z.key)(Ae),Ae.invalidate=Object(Z.invalidate)(Ae),Ae.debug!==!1?Ae.debug=typeof Ae.debug=="function"?Ae.debug:ue:Ae.debug=oe,Ae.store||(Ae.store=new ee.default),Ae.debug("Global cache config",Ae),Ae},we=function(Ne,Ae){var Re=Ae.cache||{};Re&&te.forEach(function(He){return Re[He]?delete Re[He]:void 0});var Ze=_e(_e(_e({},Ne),Re),{},{exclude:_e(_e({},Ne.exclude),Re.exclude)});return Ze.debug===!0&&(Ze.debug=ue),Re.key&&(Ze.key=Object(Z.key)(Re)),Ze.uuid=Ze.key(Ae),Ne.debug("Request config for ".concat(Ae.url),Ze),Ze};V.default={defaults:Q,makeConfig:fe,mergeRequestConfig:we}},"./src/exclude.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js");var L=E("./src/utilities.js");function j(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=arguments.length>1?arguments[1]:void 0,ve=ee.exclude,_e=ve===void 0?{}:ve,de=ee.debug,oe=Z.method.toLowerCase();if(oe==="head"||_e.methods.includes(oe))return de("Excluding request by HTTP method ".concat(Z.url)),!0;if(typeof _e.filter=="function"&&_e.filter(Z))return de("Excluding request by filter ".concat(Z.url)),!0;var ue=/\?.*$/.test(Z.url)||Object(L.isObject)(Z.params)&&Object.keys(Z.params).length!==0||typeof URLSearchParams<"u"&&Z.params instanceof URLSearchParams;if(_e.query&&ue)return de("Excluding request by query ".concat(Z.url)),!0;var Q=_e.paths||[],te=Q.some(function(fe){return Z.url.match(fe)});return te?(de("Excluding request by url match ".concat(Z.url)),!0):!1}V.default=j},"./src/index.node.js":function(X,V,E){E.r(V);var L=E("./src/api.js");E.d(V,"setup",function(){return L.setup}),E.d(V,"setupCache",function(){return L.setupCache}),E.d(V,"serializeQuery",function(){return L.serializeQuery});var j=E("./src/redis.js");E.d(V,"RedisStore",function(){return j.default});var ee=E("./src/redis-default.js");E.d(V,"RedisDefaultStore",function(){return ee.default}),V.default={setup:L.setup,setupCache:L.setupCache,serializeQuery:L.serializeQuery,RedisStore:j.default,RedisDefaultStore:ee.default}},"./src/limit.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function L(ve,_e,de,oe,ue,Q,te){try{var fe=ve[Q](te),we=fe.value}catch(Ee){de(Ee);return}fe.done?_e(we):Promise.resolve(we).then(oe,ue)}function j(ve){return function(){var _e=this,de=arguments;return new Promise(function(oe,ue){var Q=ve.apply(_e,de);function te(we){L(Q,oe,ue,te,fe,"next",we)}function fe(we){L(Q,oe,ue,te,fe,"throw",we)}te(void 0)})}}function ee(ve){return Z.apply(this,arguments)}function Z(){return Z=j(regeneratorRuntime.mark(function ve(_e){var de,oe;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,_e.store.length();case 2:if(de=Q.sent,!(de<_e.limit)){Q.next=5;break}return Q.abrupt("return");case 5:return _e.debug("Current store size: ".concat(de)),Q.next=8,_e.store.iterate(function(te,fe){oe||(oe={value:te,key:fe}),te.expires<oe.value.expires&&(oe={value:te,key:fe})});case 8:if(!oe){Q.next=12;break}return _e.debug("Removing item: ".concat(oe.key)),Q.next=12,_e.store.removeItem(oe.key);case 12:case"end":return Q.stop()}},ve)})),Z.apply(this,arguments)}V.default=ee},"./src/memory.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var L=E("./src/utilities.js");function j(oe,ue,Q,te,fe,we,Ee){try{var Ne=oe[we](Ee),Ae=Ne.value}catch(Re){Q(Re);return}Ne.done?ue(Ae):Promise.resolve(Ae).then(te,fe)}function ee(oe){return function(){var ue=this,Q=arguments;return new Promise(function(te,fe){var we=oe.apply(ue,Q);function Ee(Ae){j(we,te,fe,Ee,Ne,"next",Ae)}function Ne(Ae){j(we,te,fe,Ee,Ne,"throw",Ae)}Ee(void 0)})}}function Z(oe,ue){if(!(oe instanceof ue))throw new TypeError("Cannot call a class as a function")}function ve(oe,ue){for(var Q=0;Q<ue.length;Q++){var te=ue[Q];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}function _e(oe,ue,Q){return ue&&ve(oe.prototype,ue),Q&&ve(oe,Q),oe}var de=function(){function oe(){Z(this,oe),this.store={}}return _e(oe,[{key:"getItem",value:function(){var ue=ee(regeneratorRuntime.mark(function te(fe){var we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return we=this.store[fe]||null,Ne.abrupt("return",JSON.parse(we));case 2:case"end":return Ne.stop()}},te,this)}));function Q(te){return ue.apply(this,arguments)}return Q}()},{key:"setItem",value:function(){var ue=ee(regeneratorRuntime.mark(function te(fe,we){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return this.store[fe]=JSON.stringify(we),Ne.abrupt("return",we);case 2:case"end":return Ne.stop()}},te,this)}));function Q(te,fe){return ue.apply(this,arguments)}return Q}()},{key:"removeItem",value:function(){var ue=ee(regeneratorRuntime.mark(function te(fe){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:delete this.store[fe];case 1:case"end":return Ee.stop()}},te,this)}));function Q(te){return ue.apply(this,arguments)}return Q}()},{key:"clear",value:function(){var ue=ee(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:this.store={};case 1:case"end":return we.stop()}},te,this)}));function Q(){return ue.apply(this,arguments)}return Q}()},{key:"length",value:function(){var ue=ee(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",Object.keys(this.store).length);case 1:case"end":return we.stop()}},te,this)}));function Q(){return ue.apply(this,arguments)}return Q}()},{key:"iterate",value:function(Q){return Promise.all(Object(L.mapObject)(this.store,Q))}}]),oe}();V.default=de},"./src/redis-default.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var L=E("util");function j(oe,ue,Q,te,fe,we,Ee){try{var Ne=oe[we](Ee),Ae=Ne.value}catch(Re){Q(Re);return}Ne.done?ue(Ae):Promise.resolve(Ae).then(te,fe)}function ee(oe){return function(){var ue=this,Q=arguments;return new Promise(function(te,fe){var we=oe.apply(ue,Q);function Ee(Ae){j(we,te,fe,Ee,Ne,"next",Ae)}function Ne(Ae){j(we,te,fe,Ee,Ne,"throw",Ae)}Ee(void 0)})}}function Z(oe,ue){if(!(oe instanceof ue))throw new TypeError("Cannot call a class as a function")}function ve(oe,ue){for(var Q=0;Q<ue.length;Q++){var te=ue[Q];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}function _e(oe,ue,Q){return ue&&ve(oe.prototype,ue),Q&&ve(oe,Q),oe}var de=function(){function oe(ue){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Z(this,oe);var te=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ue.constructor.name!=="RedisClient")throw te}catch{throw te}this.client=ue,this.prefix=Q.prefix||"axios-cache",this.maxScanCount=Q.maxScanCount||1e3,this.getAsync=Object(L.promisify)(ue.get).bind(ue),this.psetexAsync=Object(L.promisify)(ue.psetex).bind(ue),this.delAsync=Object(L.promisify)(ue.del).bind(ue),this.scanAsync=Object(L.promisify)(ue.scan).bind(ue)}return _e(oe,[{key:"calculateTTL",value:function(Q){var te=Date.now();return Q.expires&&Q.expires>te?Q.expires-te:-1}},{key:"transformKey",value:function(Q){return this.prefix+"_"+Q}},{key:"getItem",value:function(){var ue=ee(regeneratorRuntime.mark(function te(fe){var we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.getAsync(this.transformKey(fe));case 2:if(Ne.t0=Ne.sent,Ne.t0){Ne.next=5;break}Ne.t0=null;case 5:return we=Ne.t0,Ne.abrupt("return",JSON.parse(we));case 7:case"end":return Ne.stop()}},te,this)}));function Q(te){return ue.apply(this,arguments)}return Q}()},{key:"setItem",value:function(){var ue=ee(regeneratorRuntime.mark(function te(fe,we){var Ee,Ne;return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(Ee=this.transformKey(fe),Ne=this.calculateTTL(we),!(Ne>0)){Re.next=5;break}return Re.next=5,this.psetexAsync(Ee,Ne,JSON.stringify(we));case 5:return Re.abrupt("return",we);case 6:case"end":return Re.stop()}},te,this)}));function Q(te,fe){return ue.apply(this,arguments)}return Q}()},{key:"removeItem",value:function(){var ue=ee(regeneratorRuntime.mark(function te(fe){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.delAsync(this.transformKey(fe));case 2:case"end":return Ee.stop()}},te,this)}));function Q(te){return ue.apply(this,arguments)}return Q}()},{key:"scan",value:function(){var ue=ee(regeneratorRuntime.mark(function te(fe){var we,Ee;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:we="0";case 1:return Ae.next=3,this.scanAsync(we,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Ee=Ae.sent,we=Ee[0],Ae.next=7,fe(Ee[1]);case 7:if(we!=="0"){Ae.next=1;break}case 8:case"end":return Ae.stop()}},te,this)}));function Q(te){return ue.apply(this,arguments)}return Q}()},{key:"clear",value:function(){var ue=ee(regeneratorRuntime.mark(function te(){var fe=this;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.scan(function(Ne){return fe.delAsync(Ne)});case 2:case"end":return Ee.stop()}},te,this)}));function Q(){return ue.apply(this,arguments)}return Q}()},{key:"length",value:function(){var ue=ee(regeneratorRuntime.mark(function te(){var fe;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return fe=0,Ee.next=3,this.scan(function(Ne){fe+=Ne.length});case 3:return Ee.abrupt("return",fe);case 4:case"end":return Ee.stop()}},te,this)}));function Q(){return ue.apply(this,arguments)}return Q}()},{key:"iterate",value:function(){var ue=ee(regeneratorRuntime.mark(function te(fe){var we=this,Ee,Ne;return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Ne=function(){return Ne=ee(regeneratorRuntime.mark(function He(rt){var dt,wt;return regeneratorRuntime.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,this.getAsync(rt);case 2:if(mt.t0=mt.sent,mt.t0){mt.next=5;break}mt.t0=null;case 5:return dt=mt.t0,wt=JSON.parse(dt),mt.next=9,fe(wt,rt);case 9:return mt.abrupt("return",mt.sent);case 10:case"end":return mt.stop()}},He,this)})),Ne.apply(this,arguments)},Ee=function(He){return Ne.apply(this,arguments)},Re.next=4,this.scan(function(Ze){return Promise.all(Ze.map(Ee.bind(we)))});case 4:return Re.abrupt("return",Promise.resolve([]));case 5:case"end":return Re.stop()}},te,this)}));function Q(te){return ue.apply(this,arguments)}return Q}()}]),oe}();V.default=de},"./src/redis.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var L=E("util"),j=E("./src/utilities.js");function ee(ue,Q,te,fe,we,Ee,Ne){try{var Ae=ue[Ee](Ne),Re=Ae.value}catch(Ze){te(Ze);return}Ae.done?Q(Re):Promise.resolve(Re).then(fe,we)}function Z(ue){return function(){var Q=this,te=arguments;return new Promise(function(fe,we){var Ee=ue.apply(Q,te);function Ne(Re){ee(Ee,fe,we,Ne,Ae,"next",Re)}function Ae(Re){ee(Ee,fe,we,Ne,Ae,"throw",Re)}Ne(void 0)})}}function ve(ue,Q){if(!(ue instanceof Q))throw new TypeError("Cannot call a class as a function")}function _e(ue,Q){for(var te=0;te<Q.length;te++){var fe=Q[te];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(ue,fe.key,fe)}}function de(ue,Q,te){return Q&&_e(ue.prototype,Q),te&&_e(ue,te),ue}var oe=function(){function ue(Q){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,ue);var fe=new TypeError("First parameter must be a valid RedisClient instance.");try{if(Q.constructor.name!=="RedisClient")throw fe}catch{throw fe}this.client=Q,this.HASH_KEY=te,this.hgetAsync=Object(L.promisify)(Q.hget).bind(Q),this.hsetAsync=Object(L.promisify)(Q.hset).bind(Q),this.hdelAsync=Object(L.promisify)(Q.hdel).bind(Q),this.delAsync=Object(L.promisify)(Q.del).bind(Q),this.hlenAsync=Object(L.promisify)(Q.hlen).bind(Q),this.hgetallAsync=Object(L.promisify)(Q.hgetall).bind(Q)}return de(ue,[{key:"getItem",value:function(){var Q=Z(regeneratorRuntime.mark(function fe(we){var Ee;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetAsync(this.HASH_KEY,we);case 2:if(Ae.t0=Ae.sent,Ae.t0){Ae.next=5;break}Ae.t0=null;case 5:return Ee=Ae.t0,Ae.abrupt("return",JSON.parse(Ee));case 7:case"end":return Ae.stop()}},fe,this)}));function te(fe){return Q.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var Q=Z(regeneratorRuntime.mark(function fe(we,Ee){return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hsetAsync(this.HASH_KEY,we,JSON.stringify(Ee));case 2:return Ae.abrupt("return",Ee);case 3:case"end":return Ae.stop()}},fe,this)}));function te(fe,we){return Q.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var Q=Z(regeneratorRuntime.mark(function fe(we){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.hdelAsync(this.HASH_KEY,we);case 2:case"end":return Ne.stop()}},fe,this)}));function te(fe){return Q.apply(this,arguments)}return te}()},{key:"clear",value:function(){var Q=Z(regeneratorRuntime.mark(function fe(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Ee.stop()}},fe,this)}));function te(){return Q.apply(this,arguments)}return te}()},{key:"length",value:function(){var Q=Z(regeneratorRuntime.mark(function fe(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Ee.stop()}},fe,this)}));function te(){return Q.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var Q=Z(regeneratorRuntime.mark(function fe(we){var Ee;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Ee=Ae.sent,Ae.abrupt("return",Promise.all(Object(j.mapObject)(Ee,we)));case 4:case"end":return Ae.stop()}},fe,this)}));function te(fe){return Q.apply(this,arguments)}return te}()}]),ue}();V.default=oe},"./src/request.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var L=E("./src/response.js"),j=E("./src/exclude.js"),ee=E("./src/cache.js");function Z(oe,ue,Q,te,fe,we,Ee){try{var Ne=oe[we](Ee),Ae=Ne.value}catch(Re){Q(Re);return}Ne.done?ue(Ae):Promise.resolve(Ae).then(te,fe)}function ve(oe){return function(){var ue=this,Q=arguments;return new Promise(function(te,fe){var we=oe.apply(ue,Q);function Ee(Ae){Z(we,te,fe,Ee,Ne,"next",Ae)}function Ne(Ae){Z(we,te,fe,Ee,Ne,"throw",Ae)}Ee(void 0)})}}function _e(oe,ue){return de.apply(this,arguments)}function de(){return de=ve(regeneratorRuntime.mark(function oe(ue,Q){var te,fe,we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return we=function(){return ue.excludeFromCache=!0,{config:ue,next:te}},ue.debug("uuid",ue.uuid),te=function(){for(var Re=arguments.length,Ze=new Array(Re),He=0;He<Re;He++)Ze[He]=arguments[He];return L.default.apply(void 0,[ue,Q].concat(Ze))},Ne.next=5,ue.invalidate(ue,Q);case 5:if(!Object(j.default)(ue,Q)){Ne.next=7;break}return Ne.abrupt("return",we());case 7:return Ne.prev=7,Ne.next=10,Object(ee.read)(ue,Q);case 10:return fe=Ne.sent,fe.config=Q,fe.request={fromCache:!0},Ne.abrupt("return",{config:ue,next:fe});case 16:if(Ne.prev=16,Ne.t0=Ne.catch(7),!(ue.clearOnStale&&Ne.t0.reason==="cache-stale")){Ne.next=21;break}return Ne.next=21,ue.store.removeItem(ue.uuid);case 21:return Ne.abrupt("return",{config:ue,next:te});case 22:case"end":return Ne.stop()}},oe,null,[[7,16]])})),de.apply(this,arguments)}V.default=_e},"./src/response.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var L=E("./src/limit.js"),j=E("./src/cache.js"),ee=E("./node_modules/cache-control-esm/index.js");function Z(oe,ue,Q,te,fe,we,Ee){try{var Ne=oe[we](Ee),Ae=Ne.value}catch(Re){Q(Re);return}Ne.done?ue(Ae):Promise.resolve(Ae).then(te,fe)}function ve(oe){return function(){var ue=this,Q=arguments;return new Promise(function(te,fe){var we=oe.apply(ue,Q);function Ee(Ae){Z(we,te,fe,Ee,Ne,"next",Ae)}function Ne(Ae){Z(we,te,fe,Ee,Ne,"throw",Ae)}Ee(void 0)})}}function _e(oe,ue,Q){return de.apply(this,arguments)}function de(){return de=ve(regeneratorRuntime.mark(function oe(ue,Q,te){var fe,we,Ee,Ne,Ae;return regeneratorRuntime.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(fe=te.request,we=fe===void 0?{}:fe,Ee=te.headers,Ne=Ee===void 0?{}:Ee,!(["arraybuffer","blob"].indexOf(we.responseType)>-1)){Ze.next=3;break}return Ze.abrupt("return",te);case 3:if(Ae={},ue.readHeaders&&(Ne["cache-control"]?(Ae=Object(ee.parse)(Ne["cache-control"]),(Ae.noCache||Ae.noStore)&&(ue.excludeFromCache=!0)):Ne.expires?ue.expires=new Date(Ne.expires).getTime():ue.expires=new Date().getTime()),ue.excludeFromCache){Ze.next=15;break}if(Ae.maxAge||Ae.maxAge===0?ue.expires=Date.now()+Ae.maxAge*1e3:ue.readHeaders||(ue.expires=ue.maxAge===0?Date.now():Date.now()+ue.maxAge),!ue.limit){Ze.next=11;break}return ue.debug("Detected limit: ".concat(ue.limit)),Ze.next=11,Object(L.default)(ue);case 11:return Ze.next=13,Object(j.write)(ue,Q,te);case 13:Ze.next=16;break;case 15:te.request.excludedFromCache=!0;case 16:return Ze.abrupt("return",te);case 17:case"end":return Ze.stop()}},oe)})),de.apply(this,arguments)}V.default=_e},"./src/serialize.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function L(Z,ve){if(Z==null)return{};var _e=j(Z,ve),de,oe;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(Z);for(oe=0;oe<ue.length;oe++)de=ue[oe],!(ve.indexOf(de)>=0)&&Object.prototype.propertyIsEnumerable.call(Z,de)&&(_e[de]=Z[de])}return _e}function j(Z,ve){if(Z==null)return{};var _e={},de=Object.keys(Z),oe,ue;for(ue=0;ue<de.length;ue++)oe=de[ue],!(ve.indexOf(oe)>=0)&&(_e[oe]=Z[oe]);return _e}function ee(Z,ve,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(oe){Z.debug("Could not parse data as JSON",oe)}_e.request,_e.config;var de=L(_e,["request","config"]);return de}V.default=ee},"./src/utilities.js":function(X,V,E){E.r(V),E.d(V,"isObject",function(){return j}),E.d(V,"getTag",function(){return ee}),E.d(V,"isFunction",function(){return Z}),E.d(V,"isString",function(){return ve}),E.d(V,"mapObject",function(){return _e}),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function L(de){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(ue){return typeof ue}:L=function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},L(de)}function j(de){var oe=L(de);return de!=null&&(oe==="object"||oe==="function")}function ee(de){return de===null?de===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(de)}function Z(de){if(!j(de))return!1;var oe=ee(de);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function ve(de){var oe=L(de);return oe==="string"||oe==="object"&&de!=null&&!Array.isArray(de)&&ee(de)==="[object String]"}function _e(de,oe){return j(de)?Object.keys(de).map(function(ue){return oe(de[ue],ue)}):[]}},axios:function(X,V){X.exports=se},util:function(X,V){X.exports=P.default}})})});const B={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},O=F.setupCache({maxAge:60*60*24*1e3}),he=C.default.create({adapter:O.adapter}),Y=async(q,$={})=>{const se={...B,...$},[X,V]=i.lngLatToGoogle(q,se.zoomBase),E=se.tileUrl.replace("{z}",String(se.zoomBase)).replace("{x}",String(X)).replace("{y}",String(V)),L={code:"",prefecture:"",city:""};let j;try{const ve=await he.get(E,{responseType:"arraybuffer"});j=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const ee=new f.VectorTile(new S.default(j));let Z=Object.keys(ee.layers);return Array.isArray(Z)||(Z=[Z]),Z.forEach(ve=>{const _e=ee.layers[ve];if(_e&&se.layer===_e.name)for(let de=0;de<_e.length;de++){const oe=_e.feature(de).toGeoJSON(X,V,se.zoomBase);Z.length>1&&(oe.properties.vt_layer=ve);const ue={type:"FeatureCollection",features:[oe]};t.geoContains(ue,q)&&(L.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,L.prefecture=oe.properties.prefecture,L.city=oe.properties.city)}}),L};e.openReverseGeocoder=Y})(PI);const Q5={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},ej={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},tj={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},nj={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},SE={JPN:tj,CHN:Q5,DEU:ej,KOR:nj};function $A(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function rj(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!EE(e[0])||!EE(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return $A(a,t,i)}function ij(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var m=c[a];if(m.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<m[m.length-1].length;f++)if(m[m.length-1][f]!==m[0][f])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return $A(u,t,i)}function EE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function VA(e,t,i){if(e!==null)for(var a,c,m,f,u,S,C,P=0,b=0,T,F=e.type,B=F==="FeatureCollection",O=F==="Feature",he=B?e.features.length:1,Y=0;Y<he;Y++){C=B?e.features[Y].geometry:O?e.geometry:e,T=C?C.type==="GeometryCollection":!1,u=T?C.geometries.length:1;for(var q=0;q<u;q++){var $=0,se=0;if(f=T?C.geometries[q]:C,f!==null){S=f.coordinates;var X=f.type;switch(P=i&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(S,b,Y,$,se)===!1)return!1;b++,$++;break;case"LineString":case"MultiPoint":for(a=0;a<S.length;a++){if(t(S[a],b,Y,$,se)===!1)return!1;b++,X==="MultiPoint"&&$++}X==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(a=0;a<S.length;a++){for(c=0;c<S[a].length-P;c++){if(t(S[a][c],b,Y,$,se)===!1)return!1;b++}X==="MultiLineString"&&$++,X==="Polygon"&&se++}X==="Polygon"&&$++;break;case"MultiPolygon":for(a=0;a<S.length;a++){for(se=0,c=0;c<S[a].length;c++){for(m=0;m<S[a][c].length-P;m++){if(t(S[a][c][m],b,Y,$,se)===!1)return!1;b++}se++}$++}break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(VA(f.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function oj(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function sj(e){return e.type==="Feature"?e.geometry:e}function aj(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=oj(e),c=sj(t),m=c.type,f=t.bbox,u=c.coordinates;if(f&&lj(a,f)===!1)return!1;m==="Polygon"&&(u=[u]);for(var S=!1,C=0;C<u.length&&!S;C++)if(TE(a,u[C][0],i.ignoreBoundary)){for(var P=!1,b=1;b<u[C].length&&!P;)TE(a,u[C][b],!i.ignoreBoundary)&&(P=!0),b++;P||(S=!0)}return S}function TE(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,m=t.length-1;c<t.length;m=c++){var f=t[c][0],u=t[c][1],S=t[m][0],C=t[m][1],P=e[1]*(f-S)+u*(S-e[0])+C*(e[0]-f)===0&&(f-e[0])*(S-e[0])<=0&&(u-e[1])*(C-e[1])<=0;if(P)return!i;var b=u>e[1]!=C>e[1]&&e[0]<(S-f)*(e[1]-u)/(C-u)+f;b&&(a=!a)}return a}function lj(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function uj(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return VA(e,function(m){i+=m[0],a+=m[1],c++},!0),rj([i/c,a/c],t.properties)}const cj=()=>{const[e,t]=vt.useState(!1);return{detectCountry:vt.useCallback(async(a,c)=>{t(!0);const f=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of f.features)if(aj([a,c],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},vv=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var u;const[c,m]=vt.useState((u=e.properties)==null?void 0:u[t.key]);vt.useEffect(()=>{var S;m((S=e.properties)==null?void 0:S[t.key])},[e]);const f=vt.useCallback(S=>{m(S.currentTarget.value),a&&a(S)},[]);return yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:f}),yt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(S=>{if(parseInt(S.tags.admin_level)===t.adminLevel)return yt.jsx("option",{value:S.tags.name},S.id);if(S.type==="node"&&t.adminLevel===9)return yt.jsx("option",{value:S.tags.name},S.id)})})]})},hj=({feature:e,fields:t})=>e.properties?yt.jsxs(yt.Fragment,{children:[t.postcodeField&&yt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,fj=({placeholder:e,defaultValue:t})=>{const[i,a]=vt.useState(t);vt.useEffect(()=>{a(t)},[t]);const c=vt.useCallback(m=>{a(m.currentTarget.value)},[]);return yt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Hg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Hg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,m="Expected a function",f="__lodash_hash_undefined__",u=1,S=2,C=1/0,P=9007199254740991,b="[object Arguments]",T="[object Array]",F="[object Boolean]",B="[object Date]",O="[object Error]",he="[object Function]",Y="[object GeneratorFunction]",q="[object Map]",$="[object Number]",se="[object Object]",X="[object Promise]",V="[object RegExp]",E="[object Set]",L="[object String]",j="[object Symbol]",ee="[object WeakMap]",Z="[object ArrayBuffer]",ve="[object DataView]",_e="[object Float32Array]",de="[object Float64Array]",oe="[object Int8Array]",ue="[object Int16Array]",Q="[object Int32Array]",te="[object Uint8Array]",fe="[object Uint8ClampedArray]",we="[object Uint16Array]",Ee="[object Uint32Array]",Ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Re=/^\./,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/[\\^$.*+?()[\]{}|]/g,rt=/\\(\\)?/g,dt=/\w*$/,wt=/^\[object .+?Constructor\]$/,kt=/^(?:0|[1-9]\d*)$/,mt={};mt[_e]=mt[de]=mt[oe]=mt[ue]=mt[Q]=mt[te]=mt[fe]=mt[we]=mt[Ee]=!0,mt[b]=mt[T]=mt[Z]=mt[F]=mt[ve]=mt[B]=mt[O]=mt[he]=mt[q]=mt[$]=mt[se]=mt[V]=mt[E]=mt[L]=mt[ee]=!1;var St={};St[b]=St[T]=St[Z]=St[ve]=St[F]=St[B]=St[_e]=St[de]=St[oe]=St[ue]=St[Q]=St[q]=St[$]=St[se]=St[V]=St[E]=St[L]=St[j]=St[te]=St[fe]=St[we]=St[Ee]=!0,St[O]=St[he]=St[ee]=!1;var Vt=typeof jl=="object"&&jl&&jl.Object===Object&&jl,Lt=typeof self=="object"&&self&&self.Object===Object&&self,sn=Vt||Lt||Function("return this")(),nt=t&&!t.nodeType&&t,wn=nt&&!0&&e&&!e.nodeType&&e,an=wn&&wn.exports===nt,Ht=an&&Vt.process,be=function(){try{return Ht&&Ht.binding("util")}catch{}}(),N=be&&be.isTypedArray;function D(G,ye){return G.set(ye[0],ye[1]),G}function xe(G,ye){return G.add(ye),G}function Xe(G,ye,$e){switch($e.length){case 0:return G.call(ye);case 1:return G.call(ye,$e[0]);case 2:return G.call(ye,$e[0],$e[1]);case 3:return G.call(ye,$e[0],$e[1],$e[2])}return G.apply(ye,$e)}function et(G,ye){for(var $e=-1,at=G?G.length:0;++$e<at&&ye(G[$e],$e,G)!==!1;);return G}function ht(G,ye){for(var $e=-1,at=ye.length,Mt=G.length;++$e<at;)G[Mt+$e]=ye[$e];return G}function ae(G,ye,$e,at){var Mt=-1,Ct=G?G.length:0;for(at&&Ct&&($e=G[++Mt]);++Mt<Ct;)$e=ye($e,G[Mt],Mt,G);return $e}function M(G,ye){for(var $e=-1,at=G?G.length:0;++$e<at;)if(ye(G[$e],$e,G))return!0;return!1}function U(G){return function(ye){return ye==null?i:ye[G]}}function Se(G,ye){for(var $e=-1,at=Array(G);++$e<G;)at[$e]=ye($e);return at}function Ge(G){return function(ye){return G(ye)}}function tt(G,ye){return G==null?i:G[ye]}function Ve(G){var ye=!1;if(G!=null&&typeof G.toString!="function")try{ye=!!(G+"")}catch{}return ye}function Tt(G){var ye=-1,$e=Array(G.size);return G.forEach(function(at,Mt){$e[++ye]=[Mt,at]}),$e}function zt(G,ye){return function($e){return G(ye($e))}}function hn(G){var ye=-1,$e=Array(G.size);return G.forEach(function(at){$e[++ye]=at}),$e}var En=Array.prototype,Rt=Function.prototype,Dr=Object.prototype,fi=sn["__core-js_shared__"],tr=function(){var G=/[^.]+$/.exec(fi&&fi.keys&&fi.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),ke=Rt.toString,ie=Dr.hasOwnProperty,ce=ke.call(Object),ge=Dr.toString,Oe=RegExp("^"+ke.call(ie).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),De=an?sn.Buffer:i,Fe=sn.Symbol,Ue=sn.Uint8Array,Le=zt(Object.getPrototypeOf,Object),Je=Object.create,ft=Dr.propertyIsEnumerable,lt=En.splice,ut=Object.getOwnPropertySymbols,en=De?De.isBuffer:i,tn=zt(Object.keys,Object),pn=Math.max,ln=Hs(sn,"DataView"),bn=Hs(sn,"Map"),Dn=Hs(sn,"Promise"),Un=Hs(sn,"Set"),nr=Hs(sn,"WeakMap"),fn=Hs(Object,"create"),Yn=!ft.call({valueOf:1},"valueOf"),_r=lo(ln),Wr=lo(bn),Ii=lo(Dn),rr=lo(Un),Os=lo(nr),el=Fe?Fe.prototype:i,Rn=el?el.valueOf:i,tl=el?el.toString:i;function In(){}function xr(G){var ye=-1,$e=G?G.length:0;for(this.clear();++ye<$e;){var at=G[ye];this.set(at[0],at[1])}}function di(){this.__data__=fn?fn(null):{}}function ac(G){return this.has(G)&&delete this.__data__[G]}function Zr(G){var ye=this.__data__;if(fn){var $e=ye[G];return $e===f?i:$e}return ie.call(ye,G)?ye[G]:i}function Ai(G){var ye=this.__data__;return fn?ye[G]!==i:ie.call(ye,G)}function lc(G,ye){var $e=this.__data__;return $e[G]=fn&&ye===i?f:ye,this}xr.prototype.clear=di,xr.prototype.delete=ac,xr.prototype.get=Zr,xr.prototype.has=Ai,xr.prototype.set=lc;function Br(G){var ye=-1,$e=G?G.length:0;for(this.clear();++ye<$e;){var at=G[ye];this.set(at[0],at[1])}}function pr(){this.__data__=[]}function da(G){var ye=this.__data__,$e=Bs(ye,G);if($e<0)return!1;var at=ye.length-1;return $e==at?ye.pop():lt.call(ye,$e,1),!0}function hs(G){var ye=this.__data__,$e=Bs(ye,G);return $e<0?i:ye[$e][1]}function ir(G){return Bs(this.__data__,G)>-1}function fs(G,ye){var $e=this.__data__,at=Bs($e,G);return at<0?$e.push([G,ye]):$e[at][1]=ye,this}Br.prototype.clear=pr,Br.prototype.delete=da,Br.prototype.get=hs,Br.prototype.has=ir,Br.prototype.set=fs;function wr(G){var ye=-1,$e=G?G.length:0;for(this.clear();++ye<$e;){var at=G[ye];this.set(at[0],at[1])}}function nl(){this.__data__={hash:new xr,map:new(bn||Br),string:new xr}}function ao(G){return hl(this,G).delete(G)}function su(G){return hl(this,G).get(G)}function Ls(G){return hl(this,G).has(G)}function On(G,ye){return hl(this,G).set(G,ye),this}wr.prototype.clear=nl,wr.prototype.delete=ao,wr.prototype.get=su,wr.prototype.has=Ls,wr.prototype.set=On;function ds(G){var ye=-1,$e=G?G.length:0;for(this.__data__=new wr;++ye<$e;)this.add(G[ye])}function js(G){return this.__data__.set(G,f),this}function au(G){return this.__data__.has(G)}ds.prototype.add=ds.prototype.push=js,ds.prototype.has=au;function ri(G){this.__data__=new Br(G)}function pa(){this.__data__=new Br}function lu(G){return this.__data__.delete(G)}function rl(G){return this.__data__.get(G)}function ma(G){return this.__data__.has(G)}function il(G,ye){var $e=this.__data__;if($e instanceof Br){var at=$e.__data__;if(!bn||at.length<c-1)return at.push([G,ye]),this;$e=this.__data__=new wr(at)}return $e.set(G,ye),this}ri.prototype.clear=pa,ri.prototype.delete=lu,ri.prototype.get=rl,ri.prototype.has=ma,ri.prototype.set=il;function Ds(G,ye){var $e=br(G)||uo(G)?Se(G.length,String):[],at=$e.length,Mt=!!at;for(var Ct in G)(ye||ie.call(G,Ct))&&!(Mt&&(Ct=="length"||Ho(Ct,at)))&&$e.push(Ct);return $e}function uu(G,ye,$e){($e!==i&&!To(G[ye],$e)||typeof ye=="number"&&$e===i&&!(ye in G))&&(G[ye]=$e)}function uc(G,ye,$e){var at=G[ye];(!(ie.call(G,ye)&&To(at,$e))||$e===i&&!(ye in G))&&(G[ye]=$e)}function Bs(G,ye){for(var $e=G.length;$e--;)if(To(G[$e][0],ye))return $e;return-1}function cc(G,ye){return G&&cl(ye,mo(ye),G)}function Pi(G,ye,$e,at,Mt,Ct,Zt){var qt;if(at&&(qt=Ct?at(G,Mt,Ct,Zt):at(G)),qt!==i)return qt;if(!gi(G))return G;var mn=br(G);if(mn){if(qt=bc(G),!ye)return ul(G,qt)}else{var Sn=Vi(G),Pn=Sn==he||Sn==Y;if(fo(G))return Uh(G,ye);if(Sn==se||Sn==b||Pn&&!Ct){if(Ve(G))return Ct?G:{};if(qt=yu(Pn?{}:G),!ye)return gc(G,cc(qt,G))}else{if(!St[Sn])return Ct?G:{};qt=Sc(G,Sn,Pi,ye)}}Zt||(Zt=new ri);var Zn=Zt.get(G);if(Zn)return Zn;if(Zt.set(G,qt),!mn)var ar=$e?_c(G):mo(G);return et(ar||G,function(Pr,lr){ar&&(lr=Pr,Pr=G[lr]),uc(qt,lr,Pi(Pr,ye,$e,at,lr,G,Zt))}),qt}function ol(G){return gi(G)?Je(G):{}}var Jr=vc(cu),pi=ps();function cu(G,ye){return G&&pi(G,ye,mo)}function ga(G,ye){ye=Ws(ye,G)?[ye]:$s(ye);for(var $e=0,at=ye.length;G!=null&&$e<at;)G=G[$n(ye[$e++])];return $e&&$e==at?G:i}function hu(G,ye,$e){var at=ye(G);return br(G)?at:ht(at,$e(G))}function fu(G){return ge.call(G)}function Ns(G,ye){return G!=null&&ye in Object(G)}function du(G,ye,$e,at,Mt){return G===ye?!0:G==null||ye==null||!gi(G)&&!Mi(ye)?G!==G&&ye!==ye:hc(G,ye,du,$e,at,Mt)}function hc(G,ye,$e,at,Mt,Ct){var Zt=br(G),qt=br(ye),mn=T,Sn=T;Zt||(mn=Vi(G),mn=mn==b?se:mn),qt||(Sn=Vi(ye),Sn=Sn==b?se:Sn);var Pn=mn==se&&!Ve(G),Zn=Sn==se&&!Ve(ye),ar=mn==Sn;if(ar&&!Pn)return Ct||(Ct=new ri),Zt||Wo(G)?gu(G,ye,$e,at,Mt,Ct):Hh(G,ye,mn,$e,at,Mt,Ct);if(!(Mt&S)){var Pr=Pn&&ie.call(G,"__wrapped__"),lr=Zn&&ie.call(ye,"__wrapped__");if(Pr||lr){var go=Pr?G.value():G,ii=lr?ye.value():ye;return Ct||(Ct=new ri),$e(go,ii,at,Mt,Ct)}}return ar?(Ct||(Ct=new ri),Wh(G,ye,$e,at,Mt,Ct)):!1}function fc(G,ye,$e,at){var Mt=$e.length,Ct=Mt,Zt=!at;if(G==null)return!Ct;for(G=Object(G);Mt--;){var qt=$e[Mt];if(Zt&&qt[2]?qt[1]!==G[qt[0]]:!(qt[0]in G))return!1}for(;++Mt<Ct;){qt=$e[Mt];var mn=qt[0],Sn=G[mn],Pn=qt[1];if(Zt&&qt[2]){if(Sn===i&&!(mn in G))return!1}else{var Zn=new ri;if(at)var ar=at(Sn,Pn,mn,G,ye,Zn);if(!(ar===i?du(Pn,Sn,at,u|S,Zn):ar))return!1}}return!0}function Bh(G){if(!gi(G)||_u(G))return!1;var ye=xa(G)||Ve(G)?Oe:wt;return ye.test(lo(G))}function Nh(G){return Mi(G)&&wa(G.length)&&!!mt[ge.call(G)]}function dc(G){return typeof G=="function"?G:G==null?Zo:typeof G=="object"?br(G)?pu(G[0],G[1]):ll(G):yl(G)}function sl(G){if(!Xn(G))return tn(G);var ye=[];for(var $e in Object(G))ie.call(G,$e)&&$e!="constructor"&&ye.push($e);return ye}function al(G){if(!gi(G))return _a(G);var ye=Xn(G),$e=[];for(var at in G)at=="constructor"&&(ye||!ie.call(G,at))||$e.push(at);return $e}function ll(G){var ye=fl(G);return ye.length==1&&ye[0][2]?xn(ye[0][0],ye[0][1]):function($e){return $e===G||fc($e,G,ye)}}function pu(G,ye){return Ws(G)&&dl(ye)?xn($n(G),ye):function($e){var at=po($e,G);return at===i&&at===ye?gs($e,G):du(ye,at,i,u|S)}}function Us(G,ye,$e,at,Mt){if(G!==ye){if(!(br(ye)||Wo(ye)))var Ct=al(ye);et(Ct||ye,function(Zt,qt){if(Ct&&(qt=Zt,Zt=ye[qt]),gi(Zt))Mt||(Mt=new ri),mi(G,ye,qt,$e,Us,at,Mt);else{var mn=at?at(G[qt],Zt,qt+"",G,ye,Mt):i;mn===i&&(mn=Zt),uu(G,qt,mn)}})}}function mi(G,ye,$e,at,Mt,Ct,Zt){var qt=G[$e],mn=ye[$e],Sn=Zt.get(mn);if(Sn){uu(G,$e,Sn);return}var Pn=Ct?Ct(qt,mn,$e+"",G,ye,Zt):i,Zn=Pn===i;Zn&&(Pn=mn,br(mn)||Wo(mn)?br(qt)?Pn=qt:ho(qt)?Pn=ul(qt):(Zn=!1,Pn=Pi(mn,!0)):ba(mn)||uo(mn)?uo(qt)?Pn=Zs(qt):!gi(qt)||at&&xa(qt)?(Zn=!1,Pn=Pi(mn,!0)):Pn=qt:Zn=!1),Zn&&(Zt.set(mn,Pn),Mt(Pn,mn,at,Ct,Zt),Zt.delete(mn)),uu(G,$e,Pn)}function Ln(G){return function(ye){return ga(ye,G)}}function mu(G,ye){return ye=pn(ye===i?G.length-1:ye,0),function(){for(var $e=arguments,at=-1,Mt=pn($e.length-ye,0),Ct=Array(Mt);++at<Mt;)Ct[at]=$e[ye+at];at=-1;for(var Zt=Array(ye+1);++at<ye;)Zt[at]=$e[at];return Zt[ye]=Ct,Xe(G,this,Zt)}}function ya(G){if(typeof G=="string")return G;if(ms(G))return tl?tl.call(G):"";var ye=G+"";return ye=="0"&&1/G==-C?"-0":ye}function $s(G){return br(G)?G:Jn(G)}function Uh(G,ye){if(ye)return G.slice();var $e=new G.constructor(G.length);return G.copy($e),$e}function Vs(G){var ye=new G.constructor(G.byteLength);return new Ue(ye).set(new Ue(G)),ye}function $h(G,ye){var $e=ye?Vs(G.buffer):G.buffer;return new G.constructor($e,G.byteOffset,G.byteLength)}function Gs(G,ye,$e){var at=ye?$e(Tt(G),!0):Tt(G);return ae(at,D,new G.constructor)}function Vh(G){var ye=new G.constructor(G.source,dt.exec(G));return ye.lastIndex=G.lastIndex,ye}function pc(G,ye,$e){var at=ye?$e(hn(G),!0):hn(G);return ae(at,xe,new G.constructor)}function Gh(G){return Rn?Object(Rn.call(G)):{}}function mc(G,ye){var $e=ye?Vs(G.buffer):G.buffer;return new G.constructor($e,G.byteOffset,G.length)}function ul(G,ye){var $e=-1,at=G.length;for(ye||(ye=Array(at));++$e<at;)ye[$e]=G[$e];return ye}function cl(G,ye,$e,at){$e||($e={});for(var Mt=-1,Ct=ye.length;++Mt<Ct;){var Zt=ye[Mt],qt=at?at($e[Zt],G[Zt],Zt,$e,G):i;uc($e,Zt,qt===i?G[Zt]:qt)}return $e}function gc(G,ye){return cl(G,xc(G),ye)}function yc(G){return mu(function(ye,$e){var at=-1,Mt=$e.length,Ct=Mt>1?$e[Mt-1]:i,Zt=Mt>2?$e[2]:i;for(Ct=G.length>3&&typeof Ct=="function"?(Mt--,Ct):i,Zt&&Eo($e[0],$e[1],Zt)&&(Ct=Mt<3?i:Ct,Mt=1),ye=Object(ye);++at<Mt;){var qt=$e[at];qt&&G(ye,qt,at,Ct)}return ye})}function vc(G,ye){return function($e,at){if($e==null)return $e;if(!co($e))return G($e,at);for(var Mt=$e.length,Ct=ye?Mt:-1,Zt=Object($e);(ye?Ct--:++Ct<Mt)&&at(Zt[Ct],Ct,Zt)!==!1;);return $e}}function ps(G){return function(ye,$e,at){for(var Mt=-1,Ct=Object(ye),Zt=at(ye),qt=Zt.length;qt--;){var mn=Zt[G?qt:++Mt];if($e(Ct[mn],mn,Ct)===!1)break}return ye}}function gu(G,ye,$e,at,Mt,Ct){var Zt=Mt&S,qt=G.length,mn=ye.length;if(qt!=mn&&!(Zt&&mn>qt))return!1;var Sn=Ct.get(G);if(Sn&&Ct.get(ye))return Sn==ye;var Pn=-1,Zn=!0,ar=Mt&u?new ds:i;for(Ct.set(G,ye),Ct.set(ye,G);++Pn<qt;){var Pr=G[Pn],lr=ye[Pn];if(at)var go=Zt?at(lr,Pr,Pn,ye,G,Ct):at(Pr,lr,Pn,G,ye,Ct);if(go!==i){if(go)continue;Zn=!1;break}if(ar){if(!M(ye,function(ii,Co){if(!ar.has(Co)&&(Pr===ii||$e(Pr,ii,at,Mt,Ct)))return ar.add(Co)})){Zn=!1;break}}else if(!(Pr===lr||$e(Pr,lr,at,Mt,Ct))){Zn=!1;break}}return Ct.delete(G),Ct.delete(ye),Zn}function Hh(G,ye,$e,at,Mt,Ct,Zt){switch($e){case ve:if(G.byteLength!=ye.byteLength||G.byteOffset!=ye.byteOffset)return!1;G=G.buffer,ye=ye.buffer;case Z:return!(G.byteLength!=ye.byteLength||!at(new Ue(G),new Ue(ye)));case F:case B:case $:return To(+G,+ye);case O:return G.name==ye.name&&G.message==ye.message;case V:case L:return G==ye+"";case q:var qt=Tt;case E:var mn=Ct&S;if(qt||(qt=hn),G.size!=ye.size&&!mn)return!1;var Sn=Zt.get(G);if(Sn)return Sn==ye;Ct|=u,Zt.set(G,ye);var Pn=gu(qt(G),qt(ye),at,Mt,Ct,Zt);return Zt.delete(G),Pn;case j:if(Rn)return Rn.call(G)==Rn.call(ye)}return!1}function Wh(G,ye,$e,at,Mt,Ct){var Zt=Mt&S,qt=mo(G),mn=qt.length,Sn=mo(ye),Pn=Sn.length;if(mn!=Pn&&!Zt)return!1;for(var Zn=mn;Zn--;){var ar=qt[Zn];if(!(Zt?ar in ye:ie.call(ye,ar)))return!1}var Pr=Ct.get(G);if(Pr&&Ct.get(ye))return Pr==ye;var lr=!0;Ct.set(G,ye),Ct.set(ye,G);for(var go=Zt;++Zn<mn;){ar=qt[Zn];var ii=G[ar],Co=ye[ar];if(at)var Sa=Zt?at(Co,ii,ar,ye,G,Ct):at(ii,Co,ar,G,ye,Ct);if(!(Sa===i?ii===Co||$e(ii,Co,at,Mt,Ct):Sa)){lr=!1;break}go||(go=ar=="constructor")}if(lr&&!go){var Ea=G.constructor,Gi=ye.constructor;Ea!=Gi&&"constructor"in G&&"constructor"in ye&&!(typeof Ea=="function"&&Ea instanceof Ea&&typeof Gi=="function"&&Gi instanceof Gi)&&(lr=!1)}return Ct.delete(G),Ct.delete(ye),lr}function _c(G){return hu(G,mo,xc)}function va(){var G=In.iteratee||qs;return G=G===qs?dc:G,arguments.length?G(arguments[0],arguments[1]):G}function hl(G,ye){var $e=G.__data__;return vu(ye)?$e[typeof ye=="string"?"string":"hash"]:$e.map}function fl(G){for(var ye=mo(G),$e=ye.length;$e--;){var at=ye[$e],Mt=G[at];ye[$e]=[at,Mt,dl(Mt)]}return ye}function Hs(G,ye){var $e=tt(G,ye);return Bh($e)?$e:i}var xc=ut?zt(ut,Object):qo,Vi=fu;(ln&&Vi(new ln(new ArrayBuffer(1)))!=ve||bn&&Vi(new bn)!=q||Dn&&Vi(Dn.resolve())!=X||Un&&Vi(new Un)!=E||nr&&Vi(new nr)!=ee)&&(Vi=function(G){var ye=ge.call(G),$e=ye==se?G.constructor:i,at=$e?lo($e):i;if(at)switch(at){case _r:return ve;case Wr:return q;case Ii:return X;case rr:return E;case Os:return ee}return ye});function wc(G,ye,$e){ye=Ws(ye,G)?[ye]:$s(ye);for(var at,Mt=-1,Zt=ye.length;++Mt<Zt;){var Ct=$n(ye[Mt]);if(!(at=G!=null&&$e(G,Ct)))break;G=G[Ct]}if(at)return at;var Zt=G?G.length:0;return!!Zt&&wa(Zt)&&Ho(Ct,Zt)&&(br(G)||uo(G))}function bc(G){var ye=G.length,$e=G.constructor(ye);return ye&&typeof G[0]=="string"&&ie.call(G,"index")&&($e.index=G.index,$e.input=G.input),$e}function yu(G){return typeof G.constructor=="function"&&!Xn(G)?ol(Le(G)):{}}function Sc(G,ye,$e,at){var Mt=G.constructor;switch(ye){case Z:return Vs(G);case F:case B:return new Mt(+G);case ve:return $h(G,at);case _e:case de:case oe:case ue:case Q:case te:case fe:case we:case Ee:return mc(G,at);case q:return Gs(G,at,$e);case $:case L:return new Mt(G);case V:return Vh(G);case E:return pc(G,at,$e);case j:return Gh(G)}}function Ho(G,ye){return ye=ye??P,!!ye&&(typeof G=="number"||kt.test(G))&&G>-1&&G%1==0&&G<ye}function Eo(G,ye,$e){if(!gi($e))return!1;var at=typeof ye;return(at=="number"?co($e)&&Ho(ye,$e.length):at=="string"&&ye in $e)?To($e[ye],G):!1}function Ws(G,ye){if(br(G))return!1;var $e=typeof G;return $e=="number"||$e=="symbol"||$e=="boolean"||G==null||ms(G)?!0:Ae.test(G)||!Ne.test(G)||ye!=null&&G in Object(ye)}function vu(G){var ye=typeof G;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?G!=="__proto__":G===null}function _u(G){return!!tr&&tr in G}function Xn(G){var ye=G&&G.constructor,$e=typeof ye=="function"&&ye.prototype||Dr;return G===$e}function dl(G){return G===G&&!gi(G)}function xn(G,ye){return function($e){return $e==null?!1:$e[G]===ye&&(ye!==i||G in Object($e))}}function _a(G){var ye=[];if(G!=null)for(var $e in Object(G))ye.push($e);return ye}var Jn=pl(function(G){G=ml(G);var ye=[];return Re.test(G)&&ye.push(""),G.replace(Ze,function($e,at,Mt,Ct){ye.push(Mt?Ct.replace(rt,"$1"):at||$e)}),ye});function $n(G){if(typeof G=="string"||ms(G))return G;var ye=G+"";return ye=="0"&&1/G==-C?"-0":ye}function lo(G){if(G!=null){try{return ke.call(G)}catch{}try{return G+""}catch{}}return""}function Ec(G){for(var ye=-1,$e=G?G.length:0,at=0,Mt=[];++ye<$e;){var Ct=G[ye];Ct&&(Mt[at++]=Ct)}return Mt}function xu(G,ye){var $e=br(G)?et:Jr;return $e(G,va(ye,3))}function pl(G,ye){if(typeof G!="function"||ye&&typeof ye!="function")throw new TypeError(m);var $e=function(){var at=arguments,Mt=ye?ye.apply(this,at):at[0],Ct=$e.cache;if(Ct.has(Mt))return Ct.get(Mt);var Zt=G.apply(this,at);return $e.cache=Ct.set(Mt,Zt),Zt};return $e.cache=new(pl.Cache||wr),$e}pl.Cache=wr;function Tc(G){return Pi(G,!1,!0)}function To(G,ye){return G===ye||G!==G&&ye!==ye}function uo(G){return ho(G)&&ie.call(G,"callee")&&(!ft.call(G,"callee")||ge.call(G)==b)}var br=Array.isArray;function co(G){return G!=null&&wa(G.length)&&!xa(G)}function ho(G){return Mi(G)&&co(G)}var fo=en||wu;function ki(G){if(co(G)&&(br(G)||typeof G=="string"||typeof G.splice=="function"||fo(G)||uo(G)))return!G.length;var ye=Vi(G);if(ye==q||ye==E)return!G.size;if(Yn||Xn(G))return!tn(G).length;for(var $e in G)if(ie.call(G,$e))return!1;return!0}function xa(G){var ye=gi(G)?ge.call(G):"";return ye==he||ye==Y}function wa(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=P}function gi(G){var ye=typeof G;return!!G&&(ye=="object"||ye=="function")}function Mi(G){return!!G&&typeof G=="object"}function ba(G){if(!Mi(G)||ge.call(G)!=se||Ve(G))return!1;var ye=Le(G);if(ye===null)return!0;var $e=ie.call(ye,"constructor")&&ye.constructor;return typeof $e=="function"&&$e instanceof $e&&ke.call($e)==ce}function ms(G){return typeof G=="symbol"||Mi(G)&&ge.call(G)==j}var Wo=N?Ge(N):Nh;function Zs(G){return cl(G,gl(G))}function ml(G){return G==null?"":ya(G)}function po(G,ye,$e){var at=G==null?i:ga(G,ye);return at===i?$e:at}function gs(G,ye){return G!=null&&wc(G,ye,Ns)}function mo(G){return co(G)?Ds(G):sl(G)}function gl(G){return co(G)?Ds(G,!0):al(G)}var Mn=yc(function(G,ye,$e){Us(G,ye,$e)});function Zo(G){return G}function qs(G){return dc(typeof G=="function"?G:Pi(G,!0))}function yl(G){return Ws(G)?U($n(G)):Ln(G)}function qo(){return[]}function wu(){return!1}In.compact=Ec,In.iteratee=qs,In.keys=mo,In.keysIn=gl,In.memoize=pl,In.merge=Mn,In.property=yl,In.toPlainObject=Zs,In.clone=Tc,In.eq=To,In.forEach=xu,In.get=po,In.hasIn=gs,In.identity=Zo,In.isArguments=uo,In.isArray=br,In.isArrayLike=co,In.isArrayLikeObject=ho,In.isBuffer=fo,In.isEmpty=ki,In.isFunction=xa,In.isLength=wa,In.isObject=gi,In.isObjectLike=Mi,In.isPlainObject=ba,In.isSymbol=ms,In.isTypedArray=Wo,In.stubArray=qo,In.stubFalse=wu,In.toString=ml,In.each=xu,In.VERSION=a,wn&&((wn.exports=In)._=In,nt._=In)}).call(jl)})(Hg,Hg.exports);var dj=Hg.exports,pj=Gm;function Gm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Gm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Gm(e.geometries[a],t);else if(i==="Feature")Gm(e.geometry,t);else if(i==="Polygon")CE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)CE(e.coordinates[a],t);return e}function CE(e,t){if(e.length!==0){IE(e[0],t);for(var i=1;i<e.length;i++)IE(e[i],!t)}}function IE(e,t){for(var i=0,a=0,c=0,m=e.length,f=m-1;c<m;f=c++){var u=(e[c][0]-e[f][0])*(e[f][1]+e[c][1]),S=i+u;a+=Math.abs(i)>=Math.abs(u)?i-S+u:u-S+i,i=S}i+a>=0!=!!t&&e.reverse()}const mj=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var gj=mj,kn=dj,Em=pj,Hm={};gj.forEach(function(e){if(e.polygon==="all")Hm[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),Hm[e.key]={},Hm[e.key][t]=i}});function yj(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:kn.merge(e,t)}var Wg={};Wg=function(e,t,i){t=kn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Hm,deduplicator:yj},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=m(e):a=c(e),a;function c(S){var C=new Array,P=new Array,b=new Array;function T(X){var V=kn.clone(X);V.lat=X.center.lat,V.lon=X.center.lon,V.__is_center_placeholder=!0,C.push(V)}function F(X){var V=kn.clone(X);V.nodes=[];function E(L,j,ee){var Z={type:"node",id:"_"+V.type+"/"+V.id+"bounds"+ee,lat:L,lon:j};V.nodes.push(Z.id),C.push(Z)}E(V.bounds.minlat,V.bounds.minlon,1),E(V.bounds.maxlat,V.bounds.minlon,2),E(V.bounds.maxlat,V.bounds.maxlon,3),E(V.bounds.minlat,V.bounds.maxlon,4),V.nodes.push(V.nodes[0]),V.__is_bounds_placeholder=!0,P.push(V)}function B(X){function V(E,L,j){var ee={type:"node",id:j,lat:E,lon:L};C.push(ee)}kn.isArray(X.nodes)||(X.nodes=X.geometry.map(function(E){return E!==null?"_anonymous@"+E.lat+"/"+E.lon:"_anonymous@unknown_location"})),X.geometry.forEach(function(E,L){E&&V(E.lat,E.lon,X.nodes[L])})}function O(X){function V(L,j,ee){var Z={type:"node",id:ee,lat:L,lon:j};C.push(Z)}function E(L,j){if(P.some(function(ve){return ve.type=="way"&&ve.id==j}))return;var ee={type:"way",id:j,nodes:[]};function Z(ve,_e){var de={type:"node",id:"_anonymous@"+ve+"/"+_e,lat:ve,lon:_e};ee.nodes.push(de.id),C.push(de)}L.forEach(function(ve){ve?Z(ve.lat,ve.lon):ee.nodes.push(void 0)}),P.push(ee)}X.members.forEach(function(L,j){L.type=="node"?L.lat&&V(L.lat,L.lon,L.ref):L.type=="way"&&L.geometry&&(L.ref="_fullGeom"+L.ref,E(L.geometry,L.ref))})}for(var he=0;he<S.elements.length;he++)switch(S.elements[he].type){case"node":var Y=S.elements[he];C.push(Y);break;case"way":var q=kn.clone(S.elements[he]);q.nodes=kn.clone(q.nodes),P.push(q),q.center&&T(q),q.geometry?B(q):q.bounds&&F(q);break;case"relation":var $=kn.clone(S.elements[he]);$.members=kn.clone($.members),b.push($);var se=$.members&&$.members.some(function(X){return X.type=="node"&&X.lat||X.type=="way"&&X.geometry&&X.geometry.length>0});$.center&&T($),se?O($):$.bounds&&F($);break}return f(C,P,b)}function m(S){var C=new Array,P=new Array,b=new Array;function T($,se,X){$.hasAttribute(X)&&(se[X]=$.getAttribute(X))}function F($,se){var X=kn.clone($);T(se,X,"lat"),T(se,X,"lon"),X.__is_center_placeholder=!0,C.push(X)}function B($,se){var X=kn.clone($);X.nodes=[];function V(E,L,j){var ee={type:"node",id:"_"+X.type+"/"+X.id+"bounds"+j,lat:E,lon:L};X.nodes.push(ee.id),C.push(ee)}V(se.getAttribute("minlat"),se.getAttribute("minlon"),1),V(se.getAttribute("maxlat"),se.getAttribute("minlon"),2),V(se.getAttribute("maxlat"),se.getAttribute("maxlon"),3),V(se.getAttribute("minlat"),se.getAttribute("maxlon"),4),X.nodes.push(X.nodes[0]),X.__is_bounds_placeholder=!0,P.push(X)}function O($,se){function X(V,E,L){var j={type:"node",id:L,lat:V,lon:E};return C.push(j),j.id}kn.isArray($.nodes)||($.nodes=[],kn.each(se,function(V,E){$.nodes.push("_anonymous@"+V.getAttribute("lat")+"/"+V.getAttribute("lon"))})),kn.each(se,function(V,E){V.getAttribute("lat")&&X(V.getAttribute("lat"),V.getAttribute("lon"),$.nodes[E])})}function he($,se){function X(E,L,j){var ee={type:"node",id:j,lat:E,lon:L};C.push(ee)}function V(E,L){if(P.some(function(Z){return Z.type=="way"&&Z.id==L}))return;var j={type:"way",id:L,nodes:[]};function ee(Z,ve){var _e={type:"node",id:"_anonymous@"+Z+"/"+ve,lat:Z,lon:ve};j.nodes.push(_e.id),C.push(_e)}kn.each(E,function(Z){Z.getAttribute("lat")?ee(Z.getAttribute("lat"),Z.getAttribute("lon")):j.nodes.push(void 0)}),P.push(j)}kn.each(se,function(E,L){$.members[L].type=="node"?E.getAttribute("lat")&&X(E.getAttribute("lat"),E.getAttribute("lon"),$.members[L].ref):$.members[L].type=="way"&&E.getElementsByTagName("nd").length>0&&($.members[L].ref="_fullGeom"+$.members[L].ref,V(E.getElementsByTagName("nd"),$.members[L].ref))})}kn.each(S.getElementsByTagName("node"),function($,se){var X={};kn.each($.getElementsByTagName("tag"),function(E){X[E.getAttribute("k")]=E.getAttribute("v")});var V={type:"node"};T($,V,"id"),T($,V,"lat"),T($,V,"lon"),T($,V,"version"),T($,V,"timestamp"),T($,V,"changeset"),T($,V,"uid"),T($,V,"user"),kn.isEmpty(X)||(V.tags=X),C.push(V)});var Y,q;return kn.each(S.getElementsByTagName("way"),function($,se){var X={},V=[];kn.each($.getElementsByTagName("tag"),function(j){X[j.getAttribute("k")]=j.getAttribute("v")});var E=!1;kn.each($.getElementsByTagName("nd"),function(j,ee){var Z;(Z=j.getAttribute("ref"))&&(V[ee]=Z),!E&&j.getAttribute("lat")&&(E=!0)});var L={type:"way"};T($,L,"id"),T($,L,"version"),T($,L,"timestamp"),T($,L,"changeset"),T($,L,"uid"),T($,L,"user"),V.length>0&&(L.nodes=V),kn.isEmpty(X)||(L.tags=X),(Y=$.getElementsByTagName("center")[0])&&F(L,Y),E?O(L,$.getElementsByTagName("nd")):(q=$.getElementsByTagName("bounds")[0])&&B(L,q),P.push(L)}),kn.each(S.getElementsByTagName("relation"),function($,se){var X={},V=[];kn.each($.getElementsByTagName("tag"),function(j){X[j.getAttribute("k")]=j.getAttribute("v")});var E=!1;kn.each($.getElementsByTagName("member"),function(j,ee){V[ee]={},T(j,V[ee],"ref"),T(j,V[ee],"role"),T(j,V[ee],"type"),(!E&&V[ee].type=="node"&&j.getAttribute("lat")||V[ee].type=="way"&&j.getElementsByTagName("nd").length>0)&&(E=!0)});var L={type:"relation"};T($,L,"id"),T($,L,"version"),T($,L,"timestamp"),T($,L,"changeset"),T($,L,"uid"),T($,L,"user"),V.length>0&&(L.members=V),kn.isEmpty(X)||(L.tags=X),(Y=$.getElementsByTagName("center")[0])&&F(L,Y),E?he(L,$.getElementsByTagName("member")):(q=$.getElementsByTagName("bounds")[0])&&B(L,q),b.push(L)}),f(C,P,b)}function f(S,C,P){function b(Re,Ze){if(typeof Ze!="object"&&(Ze={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Re,Ze);for(var He in Re)if(t.uninterestingTags[He]!==!0&&!(Ze[He]===!0||Ze[He]===Re[He]))return!0;return!1}function T(Re){var Ze={timestamp:Re.timestamp,version:Re.version,changeset:Re.changeset,user:Re.user,uid:Re.uid};for(var He in Ze)Ze[He]===void 0&&delete Ze[He];return Ze}for(var F=new Object,B=new Object,O=0;O<S.length;O++){var he=S[O];F[he.id]!==void 0&&(he=t.deduplicator(he,F[he.id])),F[he.id]=he,typeof he.tags<"u"&&b(he.tags)&&(B[he.id]=!0)}for(var O=0;O<P.length;O++)if(kn.isArray(P[O].members))for(var Y=0;Y<P[O].members.length;Y++)P[O].members[Y].type=="node"&&(B[P[O].members[Y].ref]=!0);for(var q=new Object,$=new Object,O=0;O<C.length;O++){var se=C[O];if(q[se.id]&&(se=t.deduplicator(se,q[se.id])),q[se.id]=se,kn.isArray(se.nodes))for(var Y=0;Y<se.nodes.length;Y++)typeof se.nodes[Y]!="object"&&($[se.nodes[Y]]=!0,se.nodes[Y]=F[se.nodes[Y]])}var X=new Array;for(var V in F){var he=F[V];(!$[V]||B[V])&&X.push(he)}for(var E=new Array,O=0;O<P.length;O++){var L=P[O];E[L.id]&&(L=t.deduplicator(L,E[L.id])),E[L.id]=L}var j={node:{},way:{},relation:{}};for(var V in E){var L=E[V];if(!kn.isArray(L.members)){t.verbose&&console.warn("Relation",L.type+"/"+L.id,"ignored because it has no members");continue}for(var Y=0;Y<L.members.length;Y++){var ee=L.members[Y].type,Z=L.members[Y].ref;if(typeof Z!="number"&&(Z=Z.replace("_fullGeom","")),!j[ee]){t.verbose&&console.warn("Relation",L.type+"/"+L.id,"member",ee+"/"+Z,"ignored because it has an invalid type");continue}typeof j[ee][Z]>"u"&&(j[ee][Z]=[]),j[ee][Z].push({role:L.members[Y].role,rel:L.id,reltags:L.tags})}}var ve,_e=[];for(O=0;O<X.length;O++){if(typeof X[O].lon>"u"||typeof X[O].lat>"u"){t.verbose&&console.warn("POI",X[O].type+"/"+X[O].id,"ignored because it lacks coordinates");continue}var de={type:"Feature",id:X[O].type+"/"+X[O].id,properties:{type:X[O].type,id:X[O].id,tags:X[O].tags||{},relations:j.node[X[O].id]||[],meta:T(X[O])},geometry:{type:"Point",coordinates:[+X[O].lon,+X[O].lat]}};X[O].__is_center_placeholder&&(de.properties.geometry="center"),i?i(de):_e.push(de)}for(var oe=[],ue=[],O=0;O<P.length;O++)if(E[P[O].id]===P[O]){if(typeof P[O].tags<"u"&&(P[O].tags.type=="route"||P[O].tags.type=="waterway")){let Ze=function(He){var rt=!1,dt;dt=He.members.filter(function(St){return St.type==="way"}),dt=dt.map(function(St){var Vt=q[St.ref];if(Vt===void 0||Vt.nodes===void 0){t.verbose&&console.warn("Route "+He.type+"/"+He.id,"tainted by a missing or incomplete  way",St.type+"/"+St.ref),rt=!0;return}return{id:St.ref,role:St.role,way:Vt,nodes:Vt.nodes.filter(function(Lt){return Lt!==void 0?!0:(rt=!0,t.verbose&&console.warn("Route",He.type+"/"+He.id,"tainted by a way",St.type+"/"+St.ref,"with a missing node"),!1)})}}),dt=kn.compact(dt);var wt;wt=_v(dt);var kt=[];if(kt=kn.compact(wt.map(function(St){return kn.compact(St.map(function(Vt){return[+Vt.lon,+Vt.lat]}))})),kt.length==0)return t.verbose&&console.warn("Route",He.type+"/"+He.id,"contains no coordinates"),!1;var mt={type:"Feature",id:He.type+"/"+He.id,properties:{type:He.type,id:He.id,tags:He.tags||{},relations:j[He.type][He.id]||[],meta:T(He)},geometry:{type:kt.length===1?"LineString":"MultiLineString",coordinates:kt.length===1?kt[0]:kt}};return rt&&(t.verbose&&console.warn("Route",He.type+"/"+He.id,"is tainted"),mt.properties.tainted=!0),mt};var Ne=Ze;if(!kn.isArray(P[O].members)){t.verbose&&console.warn("Route",P[O].type+"/"+P[O].id,"ignored because it has no members");continue}if(P[O].members.forEach(function(He){q[He.ref]&&!b(q[He.ref].tags)&&(q[He.ref].is_skippablerelationmember=!0)}),de=Ze(P[O]),de===!1){t.verbose&&console.warn("Route relation",P[O].type+"/"+P[O].id,"ignored because it has invalid geometry");continue}i?i(Em(de)):ue.push(de)}if(typeof P[O].tags<"u"&&(P[O].tags.type=="multipolygon"||P[O].tags.type=="boundary")){let He=function(rt,dt){var wt=!1,kt=te?"way":"relation",mt=typeof rt.id=="number"?rt.id:+rt.id.replace("_fullGeom",""),St;St=dt.members.filter(function(D){return D.type==="way"}),St=St.map(function(D){var xe=q[D.ref];if(xe===void 0||xe.nodes===void 0){t.verbose&&console.warn("Multipolygon",kt+"/"+mt,"tainted by a missing or incomplete way",D.type+"/"+D.ref),wt=!0;return}return{id:D.ref,role:D.role||"outer",way:xe,nodes:xe.nodes.filter(function(Xe){return Xe!==void 0?!0:(wt=!0,t.verbose&&console.warn("Multipolygon",kt+"/"+mt,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),St=kn.compact(St);var Vt,Lt;Vt=_v(St.filter(function(D){return D.role==="outer"})),Lt=_v(St.filter(function(D){return D.role==="inner"}));var sn;function nt(D){var xe=function(M,U){for(var Se=0;Se<U.length;Se++)if(et(U[Se],M))return!0;return!1},Xe=function(M){return M.map(function(U){return[+U.lat,+U.lon]})},et=function(M,U){for(var Se=M[0],Ge=M[1],tt=!1,Ve=0,Tt=U.length-1;Ve<U.length;Tt=Ve++){var zt=U[Ve][0],hn=U[Ve][1],En=U[Tt][0],Rt=U[Tt][1],Dr=hn>Ge!=Rt>Ge&&Se<(En-zt)*(Ge-hn)/(Rt-hn)+zt;Dr&&(tt=!tt)}return tt},ht,ae;for(D=Xe(D),ht=0;ht<Vt.length;ht++)if(ae=Xe(Vt[ht]),xe(ae,D))return ht}sn=Vt.map(function(D){return[D]});for(var wn=0;wn<Lt.length;wn++){var an=nt(Lt[wn]);an!==void 0?sn[an].push(Lt[wn]):t.verbose&&console.warn("Multipolygon",kt+"/"+mt,"contains an inner ring with no containing outer")}var Ht=[];if(Ht=kn.compact(sn.map(function(D){var xe=kn.compact(D.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",kt+"/"+mt,"contains a ring with less than four nodes");return}return kn.compact(Xe.map(function(et){return[+et.lon,+et.lat]}))}));if(xe.length==0){t.verbose&&console.warn("Multipolygon",kt+"/"+mt,"contains an empty ring cluster");return}return xe})),Ht.length==0)return t.verbose&&console.warn("Multipolygon",kt+"/"+mt,"contains no coordinates"),!1;var be="MultiPolygon";Ht.length===1&&(be="Polygon",Ht=Ht[0]);var N={type:"Feature",id:rt.type+"/"+mt,properties:{type:rt.type,id:mt,tags:rt.tags||{},relations:j[rt.type][rt.id]||[],meta:T(rt)},geometry:{type:be,coordinates:Ht}};return wt&&(t.verbose&&console.warn("Multipolygon",kt+"/"+mt,"is tainted"),N.properties.tainted=!0),N};var Ae=He;if(!kn.isArray(P[O].members)){t.verbose&&console.warn("Multipolygon",P[O].type+"/"+P[O].id,"ignored because it has no members");continue}for(var Q=0,Y=0;Y<P[O].members.length;Y++)P[O].members[Y].role=="outer"?Q++:t.verbose&&P[O].members[Y].role!="inner"&&console.warn("Multipolygon",P[O].type+"/"+P[O].id,"member",P[O].members[Y].type+"/"+P[O].members[Y].ref,'ignored because it has an invalid role: "'+P[O].members[Y].role+'"');if(P[O].members.forEach(function(rt){q[rt.ref]&&(rt.role==="outer"&&!b(q[rt.ref].tags,P[O].tags)&&(q[rt.ref].is_skippablerelationmember=!0),rt.role==="inner"&&!b(q[rt.ref].tags)&&(q[rt.ref].is_skippablerelationmember=!0))}),Q==0){t.verbose&&console.warn("Multipolygon relation",P[O].type+"/"+P[O].id,"ignored because it has no outer ways");continue}var te=!1;Q==1&&!b(P[O].tags,{type:!0})&&(te=!0);var de=null;if(!te)de=He(P[O],P[O]);else{var fe=P[O].members.filter(function(rt){return rt.role==="outer"})[0];if(fe=q[fe.ref],fe===void 0){t.verbose&&console.warn("Multipolygon relation",P[O].type+"/"+P[O].id,"ignored because outer way",fe.type+"/"+fe.ref,"is missing");continue}fe.is_skippablerelationmember=!0,de=He(fe,P[O])}if(de===!1){t.verbose&&console.warn("Multipolygon relation",P[O].type+"/"+P[O].id,"ignored because it has invalid geometry");continue}i?i(Em(de)):ue.push(de)}}for(var O=0;O<C.length;O++)if(q[C[O].id]===C[O]){if(!kn.isArray(C[O].nodes)){t.verbose&&console.warn("Way",C[O].type+"/"+C[O].id,"ignored because it has no nodes");continue}if(!C[O].is_skippablerelationmember){typeof C[O].id!="number"&&(C[O].id=+C[O].id.replace("_fullGeom","")),C[O].tainted=!1,C[O].hidden=!1;var we=new Array;for(Y=0;Y<C[O].nodes.length;Y++)typeof C[O].nodes[Y]=="object"?we.push([+C[O].nodes[Y].lon,+C[O].nodes[Y].lat]):(t.verbose&&console.warn("Way",C[O].type+"/"+C[O].id,"is tainted by an invalid node"),C[O].tainted=!0);if(we.length<=1){t.verbose&&console.warn("Way",C[O].type+"/"+C[O].id,"ignored because it contains too few nodes");continue}var Ee="LineString";typeof C[O].nodes[0]<"u"&&typeof C[O].nodes[C[O].nodes.length-1]<"u"&&C[O].nodes[0].id===C[O].nodes[C[O].nodes.length-1].id&&(typeof C[O].tags<"u"&&u(C[O].tags)||C[O].__is_bounds_placeholder)&&(Ee="Polygon",we=[we]);var de={type:"Feature",id:C[O].type+"/"+C[O].id,properties:{type:C[O].type,id:C[O].id,tags:C[O].tags||{},relations:j.way[C[O].id]||[],meta:T(C[O])},geometry:{type:Ee,coordinates:we}};C[O].tainted&&(t.verbose&&console.warn("Way",C[O].type+"/"+C[O].id,"is tainted"),de.properties.tainted=!0),C[O].__is_bounds_placeholder&&(de.properties.geometry="bounds"),i?i(Em(de)):Ee=="LineString"?oe.push(de):ue.push(de)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(ue),ve.features=ve.features.concat(oe),ve.features=ve.features.concat(_e),t.flatProperties&&ve.features.forEach(function(Re){Re.properties=kn.merge(Re.properties.meta,Re.properties.tags,{id:Re.properties.type+"/"+Re.properties.id})}),ve=Em(ve),ve)}function u(S){var C=t.polygonFeatures;if(typeof C=="function")return C(S);if(S.area==="no")return!1;for(var P in S){var b=S[P],T=C[P];if(!(typeof T>"u")&&b!=="no"&&(T===!0||T.included_values&&T.included_values[b]===!0||T.excluded_values&&T.excluded_values[b]!==!0))return!0}return!1}};function _v(e){for(var t=function(b){return b[0]},i=function(b){return b[b.length-1]},a=function(b,T){return b!==void 0&&T!==void 0&&b.id===T.id},c=[],m,f,u,S,C,P;e.length;)for(m=e.pop().nodes.slice(),c.push(m);e.length&&!a(t(m),i(m));){for(f=t(m),u=i(m),S=0;S<e.length;S++)if(P=e[S].nodes,a(u,t(P))){C=m.push,P=P.slice(1);break}else if(a(u,i(P))){C=m.push,P=P.slice(0,-1).reverse();break}else if(a(f,i(P))){C=m.unshift,P=P.slice(0,-1);break}else if(a(f,t(P))){C=m.unshift,P=P.slice(1).reverse();break}else P=C=null;if(!P)break;e.splice(S,1),C.apply(m,P)}return c}Wg.toGeojson=Wg;var vj=Wg;const _j=Vd(vj),xv={type:"FeatureCollection",features:[]},GA=()=>{const[e,t]=vt.useState(!1),i=vt.useCallback(async(f,u,S)=>{var O,he;if(e||(console.log(S),S<16))return xv;t(!0);let C=300;S>17&&(C=200),S>18&&(C=100),S>19&&(C=50),console.log("overpass: loading...");let P="[out:json]";P+=`[timeout:25];
`,P+='nwr["building"]',P+=`(around:${C},${f},${u});
`,P+="out meta geom;",console.log(P);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(P)}`,{});if(b.status!==200)return t(!1),xv;const T=await b.json();console.log("overpass json elements: ",T.elements);const F=_j(T);console.log("overpass osmtogeojson raw: ",F);for await(const Y of F.features){if(!Y.properties)continue;Y.id=Y.properties.id.split("/")[1];const q=(O=T.elements.filter(se=>Y.id?typeof Y.id=="number"?se.id===Y.id:se.id===parseInt(Y.id):!1))==null?void 0:O[0];if(q&&(Y.properties.tags=q.tags,Y.properties.nodes=q.nodes),Y.geometry.type==="Polygon"){const se=ij(Y.geometry.coordinates);var B=uj(se);Y.properties.center=B.geometry.coordinates}Y.geometry.type==="Point"&&(Y.properties.center=Y.geometry.coordinates);const $=Y.properties.uid;if($){let se=localStorage.getItem($+"-icon");if(se===null){const X=await Ps.getUser($);(he=X.img)!=null&&he.href?(se=X.img.href,localStorage.setItem($+"-icon",X.img.href)):localStorage.setItem($+"-icon","")}Y.properties.userIconHref=se||""}}return console.log("overpass osmtogeojson converted: ",F),console.log("overpass: loaded."),t(!1),F},[]),[a,c]=vt.useState(!1),m=vt.useCallback(async f=>{console.log("overpass: loading...",f),c(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const S=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(S.status!==200){c(!1);return}const C=await S.json();console.log("overpass json parent elements: ",C.elements);const P=250,b=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${P});
      out;
      `;console.log(b);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(T.status!==200){c(!1);return}const F=await T.json();console.log("overpass json child elements: ",F.elements);const B=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${P});
      out;
      `;console.log(B);const O=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(B)}`,{});if(O.status!==200){c(!1);return}const he=await O.json();return console.log("overpass json neighbour elements: ",he.elements),c(!1),[...C.elements,...F.elements,...he.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:m,loadingOverpass:e,loadingOverpassAdmin:a}},xj=()=>yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),yt.jsxs("datalist",{id:"source-list",children:[yt.jsx("option",{value:"survey"}),yt.jsx("option",{value:"local knowledge"}),yt.jsx("option",{value:"extrapolation"}),yt.jsx("option",{value:"estimation from existing data"})]})]}),wv={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},wj=({feature:e,onCancel:t,onSubmit:i})=>{var ve,_e,de,oe;const{detectCountry:a,loadingCountry:c}=cj(),{fetchOverpassAdmin:m,loadingOverpassAdmin:f}=GA(),u=JSON.parse((ve=e.properties)==null?void 0:ve.center),[S,C]=vt.useState(void 0),[P,b]=vt.useState(),[T,F]=vt.useState(e),[B,O]=vt.useState(!1),[he,Y]=vt.useState(!1),[q,$]=vt.useState(!1),[se,X]=vt.useState(),[V,E]=vt.useState();vt.useEffect(()=>{O(Ps.isLoggedIn())},[]),vt.useEffect(()=>{(async()=>{var Q,te;const ue=await a(u[0],u[1]);if(C(ue),(Q=ue==null?void 0:ue.properties)!=null&&Q.ISO_A3&&SE[ue.properties.ISO_A3]){const fe=SE[ue.properties.ISO_A3];b(fe);const we=fe.defaultComment+" "+((te=e.properties)==null?void 0:te.id);E(we)}})()},[e]),vt.useEffect(()=>{console.log(T.properties)},[T]);const L=vt.useCallback(async()=>{const ue=await PI.openReverseGeocoder([u[0],u[1]]);F(Q=>{const te={properties:{"addr:province":ue.prefecture,"addr:city":ue.city,...Q.properties}};return Q.properties=te.properties,Q})},[]),j=vt.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const ue=await m(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",ue),X(ue)},[T]),ee=vt.useCallback(async ue=>{var Ae,Re,Ze;$(!0),ue.preventDefault();const Q=new FormData(ue.currentTarget),te=JSON.parse((Ae=e.properties)==null?void 0:Ae.tags);Q.forEach((He,rt)=>{typeof He=="string"&&He.length>0&&rt!=="comment"&&rt!=="source"&&(te[rt]=He)});const fe={type:"way",id:e.id,version:(Re=e.properties)==null?void 0:Re.version,tags:te,nodes:JSON.parse((Ze=e.properties)==null?void 0:Ze.nodes)};console.info(JSON.stringify(fe,null,2));const we={create:[],modify:[fe],delete:[]},Ee=Q.get("comment");Ee&&(wv.comment=Ee.toString());const Ne=Q.get("source");Ne&&(wv.source=Ne.toString()),await Ps.uploadChangeset(wv,we),$(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),Z=vt.useCallback(()=>{Y(!0)},[]);return T.properties?yt.jsxs("div",{children:[yt.jsxs("div",{children:["OSM:"," ",yt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",yt.jsx(CI,{feature:T}),P&&yt.jsxs("span",{children:[" | ","Address:"," ",yt.jsx(hj,{feature:T,fields:P})]})]}),c?yt.jsx(ca,{icon:P_,spin:!0}):yt.jsx(yt.Fragment,{children:P?yt.jsxs("form",{onSubmit:ee,children:[yt.jsx("div",{className:"flex flex-wrap",children:yt.jsx(vv,{feature:T,fieldOption:P.postcodeField,onChange:Z})}),yt.jsx("div",{className:"flex flex-wrap",children:P.mainFields.map(ue=>yt.jsx(vv,{feature:T,fieldOption:ue,onChange:Z,suggestList:se},ue.key))}),yt.jsx("div",{className:"flex flex-wrap",children:P.detailFields.map(ue=>yt.jsx(vv,{feature:T,fieldOption:ue,onChange:Z},ue.key))}),yt.jsxs("div",{className:"flex flex-wrap",children:[yt.jsx(xj,{}),yt.jsx(fj,{defaultValue:V})]}),yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=S==null?void 0:S.properties)==null?void 0:_e.ISO_A3)==="JPN"&&yt.jsx("button",{type:"button",onClick:L,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),yt.jsxs("button",{type:"button",disabled:f,onClick:j,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",f&&yt.jsx(ca,{icon:P_,spin:!0})]}),yt.jsx("button",{disabled:!B||q||!he,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!B&&yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),yt.jsx(TI,{})]})]})})]}):yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[yt.jsxs("div",{className:"py-2",children:[yt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(de=S==null?void 0:S.properties)==null?void 0:de.NAME," (ISO code:",(oe=S==null?void 0:S.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),yt.jsx("p",{children:yt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function bj(e,t){const[i,a]=vt.useState(e);return vt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const Sj={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},Ej={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function Tj(){const e=vt.useRef(null),[t,i]=vt.useState(),a=bj(t,2500),c=vt.useRef(null),[m,f]=vt.useState({type:"FeatureCollection",features:[]}),[u,S]=vt.useState("auto"),[C,P]=vt.useState(),[b,T]=vt.useState([]),{fetchOverpassBuildings:F,loadingOverpass:B}=GA();vt.useEffect(()=>{setTimeout(()=>{var E;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(E=c.current)==null||E.trigger())},500)},[]);const O=vt.useCallback(E=>{const L=E.target.getCenter(),j=E.target.getZoom();i({zoom:j,latitude:L.lat,longitude:L.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),he=vt.useCallback(E=>{i(E.viewState)},[]),Y=vt.useCallback(E=>{i(E.viewState)},[]);vt.useEffect(()=>{(async()=>{if(!a)return;const E=a,L=await F(E.latitude,E.longitude,E.zoom);f(L)})()},[a]);const q=vt.useCallback(E=>{var ve;S("pointer");const{features:L,point:{x:j,y:ee}}=E,Z=L&&L[0];Z?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:Z.id},{hover:!0}),P({feature:Z,x:j,y:ee})):P(void 0)},[]),$=vt.useCallback(E=>{var L;S("auto"),(L=e.current)==null||L.querySourceFeatures("buildings-source").map(j=>{var ee;(ee=e.current)==null||ee.setFeatureState({source:"buildings-source",id:j.id},{hover:!1})}),P(void 0)},[]),se=vt.useCallback(E=>{var j;X();const L=E.features&&E.features[0];L&&((j=e.current)==null||j.setFeatureState({source:"buildings-source",id:L.id},{select:!0}),T([L]))},[]),X=vt.useCallback(()=>{var E;(E=e.current)==null||E.querySourceFeatures("buildings-source").map(L=>{var j;(j=e.current)==null||j.setFeatureState({source:"buildings-source",id:L.id},{select:!1})}),T([])},[]),V=vt.useMemo(()=>{let E=25;return t&&(E=t.zoom<18?20:t.zoom<19?25:35),m.features.map((L,j)=>!L.properties||!L.properties.center?null:yt.jsx(Y4,{style:{cursor:"pointer"},longitude:L.properties.center[0],latitude:L.properties.center[1],anchor:"center",children:yt.jsx(SF,{feature:L,size:E})},`marker-${j}`))},[m,t]);return yt.jsxs("div",{children:[yt.jsx(rF,{}),yt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:yt.jsx(CF,{viewState:t})}),yt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&yt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:yt.jsx("div",{style:{padding:"10px"},children:b.map(E=>yt.jsx(wj,{feature:E,onCancel:X,onSubmit:X},E.id))})}),yt.jsxs(K4,{ref:e,...t,onMove:he,onMoveEnd:Y,onLoad:O,interactiveLayerIds:["buildings-layer-fill"],onClick:se,onMouseEnter:q,onMouseLeave:$,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:GC,style:{width:"100%",height:"100%"},mapStyle:Sj,children:[yt.jsx(tz,{id:"buildings-source",type:"geojson",data:m,children:yt.jsx(ez,{...Ej})}),yt.jsx(J4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),yt.jsx(Q4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),yt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?yt.jsx(ca,{size:"2x",icon:tF}):B?yt.jsx(ca,{size:"2x",icon:P_,spin:!0}):yt.jsx(ca,{size:"2x",icon:QR})}),V,C&&yt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:C.x+5,top:C.y+5},children:[yt.jsx(CI,{feature:C.feature}),yt.jsx("br",{}),yt.jsx(EF,{feature:C.feature}),yt.jsx(iF,{feature:C.feature})]})]})]})]})}var HA={},wy={};wy.byteLength=Aj;wy.toByteArray=kj;wy.fromByteArray=Rj;var sa=[],ns=[],Cj=typeof Uint8Array<"u"?Uint8Array:Array,bv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Zc=0,Ij=bv.length;Zc<Ij;++Zc)sa[Zc]=bv[Zc],ns[bv.charCodeAt(Zc)]=Zc;ns[45]=62;ns[95]=63;function WA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function Aj(e){var t=WA(e),i=t[0],a=t[1];return(i+a)*3/4-a}function Pj(e,t,i){return(t+i)*3/4-i}function kj(e){var t,i=WA(e),a=i[0],c=i[1],m=new Cj(Pj(e,a,c)),f=0,u=c>0?a-4:a,S;for(S=0;S<u;S+=4)t=ns[e.charCodeAt(S)]<<18|ns[e.charCodeAt(S+1)]<<12|ns[e.charCodeAt(S+2)]<<6|ns[e.charCodeAt(S+3)],m[f++]=t>>16&255,m[f++]=t>>8&255,m[f++]=t&255;return c===2&&(t=ns[e.charCodeAt(S)]<<2|ns[e.charCodeAt(S+1)]>>4,m[f++]=t&255),c===1&&(t=ns[e.charCodeAt(S)]<<10|ns[e.charCodeAt(S+1)]<<4|ns[e.charCodeAt(S+2)]>>2,m[f++]=t>>8&255,m[f++]=t&255),m}function Mj(e){return sa[e>>18&63]+sa[e>>12&63]+sa[e>>6&63]+sa[e&63]}function zj(e,t,i){for(var a,c=[],m=t;m<i;m+=3)a=(e[m]<<16&16711680)+(e[m+1]<<8&65280)+(e[m+2]&255),c.push(Mj(a));return c.join("")}function Rj(e){for(var t,i=e.length,a=i%3,c=[],m=16383,f=0,u=i-a;f<u;f+=m)c.push(zj(e,f,f+m>u?u:f+m));return a===1?(t=e[i-1],c.push(sa[t>>2]+sa[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(sa[t>>10]+sa[t>>4&63]+sa[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=wy,i=gy,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=q,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,u.TYPED_ARRAY_SUPPORT=m(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const ae=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(ae,M),ae.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function f(ae){if(ae>c)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const M=new Uint8Array(ae);return Object.setPrototypeOf(M,u.prototype),M}function u(ae,M,U){if(typeof ae=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ae)}return S(ae,M,U)}u.poolSize=8192;function S(ae,M,U){if(typeof ae=="string")return T(ae,M);if(ArrayBuffer.isView(ae))return B(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(D(ae,ArrayBuffer)||ae&&D(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(ae,SharedArrayBuffer)||ae&&D(ae.buffer,SharedArrayBuffer)))return O(ae,M,U);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Se=ae.valueOf&&ae.valueOf();if(Se!=null&&Se!==ae)return u.from(Se,M,U);const Ge=he(ae);if(Ge)return Ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return u.from(ae[Symbol.toPrimitive]("string"),M,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}u.from=function(ae,M,U){return S(ae,M,U)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function C(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function P(ae,M,U){return C(ae),ae<=0?f(ae):M!==void 0?typeof U=="string"?f(ae).fill(M,U):f(ae).fill(M):f(ae)}u.alloc=function(ae,M,U){return P(ae,M,U)};function b(ae){return C(ae),f(ae<0?0:Y(ae)|0)}u.allocUnsafe=function(ae){return b(ae)},u.allocUnsafeSlow=function(ae){return b(ae)};function T(ae,M){if((typeof M!="string"||M==="")&&(M="utf8"),!u.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const U=$(ae,M)|0;let Se=f(U);const Ge=Se.write(ae,M);return Ge!==U&&(Se=Se.slice(0,Ge)),Se}function F(ae){const M=ae.length<0?0:Y(ae.length)|0,U=f(M);for(let Se=0;Se<M;Se+=1)U[Se]=ae[Se]&255;return U}function B(ae){if(D(ae,Uint8Array)){const M=new Uint8Array(ae);return O(M.buffer,M.byteOffset,M.byteLength)}return F(ae)}function O(ae,M,U){if(M<0||ae.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<M+(U||0))throw new RangeError('"length" is outside of buffer bounds');let Se;return M===void 0&&U===void 0?Se=new Uint8Array(ae):U===void 0?Se=new Uint8Array(ae,M):Se=new Uint8Array(ae,M,U),Object.setPrototypeOf(Se,u.prototype),Se}function he(ae){if(u.isBuffer(ae)){const M=Y(ae.length)|0,U=f(M);return U.length===0||ae.copy(U,0,0,M),U}if(ae.length!==void 0)return typeof ae.length!="number"||xe(ae.length)?f(0):F(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return F(ae.data)}function Y(ae){if(ae>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ae|0}function q(ae){return+ae!=ae&&(ae=0),u.alloc(+ae)}u.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==u.prototype},u.compare=function(M,U){if(D(M,Uint8Array)&&(M=u.from(M,M.offset,M.byteLength)),D(U,Uint8Array)&&(U=u.from(U,U.offset,U.byteLength)),!u.isBuffer(M)||!u.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===U)return 0;let Se=M.length,Ge=U.length;for(let tt=0,Ve=Math.min(Se,Ge);tt<Ve;++tt)if(M[tt]!==U[tt]){Se=M[tt],Ge=U[tt];break}return Se<Ge?-1:Ge<Se?1:0},u.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(M,U){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return u.alloc(0);let Se;if(U===void 0)for(U=0,Se=0;Se<M.length;++Se)U+=M[Se].length;const Ge=u.allocUnsafe(U);let tt=0;for(Se=0;Se<M.length;++Se){let Ve=M[Se];if(D(Ve,Uint8Array))tt+Ve.length>Ge.length?(u.isBuffer(Ve)||(Ve=u.from(Ve)),Ve.copy(Ge,tt)):Uint8Array.prototype.set.call(Ge,Ve,tt);else if(u.isBuffer(Ve))Ve.copy(Ge,tt);else throw new TypeError('"list" argument must be an Array of Buffers');tt+=Ve.length}return Ge};function $(ae,M){if(u.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||D(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const U=ae.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&U===0)return 0;let Ge=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return wn(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return be(ae).length;default:if(Ge)return Se?-1:wn(ae).length;M=(""+M).toLowerCase(),Ge=!0}}u.byteLength=$;function se(ae,M,U){let Se=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,M>>>=0,U<=M))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return fe(this,M,U);case"utf8":case"utf-8":return de(this,M,U);case"ascii":return Q(this,M,U);case"latin1":case"binary":return te(this,M,U);case"base64":return _e(this,M,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,M,U);default:if(Se)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Se=!0}}u.prototype._isBuffer=!0;function X(ae,M,U){const Se=ae[M];ae[M]=ae[U],ae[U]=Se}u.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<M;U+=2)X(this,U,U+1);return this},u.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<M;U+=4)X(this,U,U+3),X(this,U+1,U+2);return this},u.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<M;U+=8)X(this,U,U+7),X(this,U+1,U+6),X(this,U+2,U+5),X(this,U+3,U+4);return this},u.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?de(this,0,M):se.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(M){if(!u.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:u.compare(this,M)===0},u.prototype.inspect=function(){let M="";const U=e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(M+=" ... "),"<Buffer "+M+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(M,U,Se,Ge,tt){if(D(M,Uint8Array)&&(M=u.from(M,M.offset,M.byteLength)),!u.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(U===void 0&&(U=0),Se===void 0&&(Se=M?M.length:0),Ge===void 0&&(Ge=0),tt===void 0&&(tt=this.length),U<0||Se>M.length||Ge<0||tt>this.length)throw new RangeError("out of range index");if(Ge>=tt&&U>=Se)return 0;if(Ge>=tt)return-1;if(U>=Se)return 1;if(U>>>=0,Se>>>=0,Ge>>>=0,tt>>>=0,this===M)return 0;let Ve=tt-Ge,Tt=Se-U;const zt=Math.min(Ve,Tt),hn=this.slice(Ge,tt),En=M.slice(U,Se);for(let Rt=0;Rt<zt;++Rt)if(hn[Rt]!==En[Rt]){Ve=hn[Rt],Tt=En[Rt];break}return Ve<Tt?-1:Tt<Ve?1:0};function V(ae,M,U,Se,Ge){if(ae.length===0)return-1;if(typeof U=="string"?(Se=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,xe(U)&&(U=Ge?0:ae.length-1),U<0&&(U=ae.length+U),U>=ae.length){if(Ge)return-1;U=ae.length-1}else if(U<0)if(Ge)U=0;else return-1;if(typeof M=="string"&&(M=u.from(M,Se)),u.isBuffer(M))return M.length===0?-1:E(ae,M,U,Se,Ge);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?Ge?Uint8Array.prototype.indexOf.call(ae,M,U):Uint8Array.prototype.lastIndexOf.call(ae,M,U):E(ae,[M],U,Se,Ge);throw new TypeError("val must be string, number or Buffer")}function E(ae,M,U,Se,Ge){let tt=1,Ve=ae.length,Tt=M.length;if(Se!==void 0&&(Se=String(Se).toLowerCase(),Se==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(ae.length<2||M.length<2)return-1;tt=2,Ve/=2,Tt/=2,U/=2}function zt(En,Rt){return tt===1?En[Rt]:En.readUInt16BE(Rt*tt)}let hn;if(Ge){let En=-1;for(hn=U;hn<Ve;hn++)if(zt(ae,hn)===zt(M,En===-1?0:hn-En)){if(En===-1&&(En=hn),hn-En+1===Tt)return En*tt}else En!==-1&&(hn-=hn-En),En=-1}else for(U+Tt>Ve&&(U=Ve-Tt),hn=U;hn>=0;hn--){let En=!0;for(let Rt=0;Rt<Tt;Rt++)if(zt(ae,hn+Rt)!==zt(M,Rt)){En=!1;break}if(En)return hn}return-1}u.prototype.includes=function(M,U,Se){return this.indexOf(M,U,Se)!==-1},u.prototype.indexOf=function(M,U,Se){return V(this,M,U,Se,!0)},u.prototype.lastIndexOf=function(M,U,Se){return V(this,M,U,Se,!1)};function L(ae,M,U,Se){U=Number(U)||0;const Ge=ae.length-U;Se?(Se=Number(Se),Se>Ge&&(Se=Ge)):Se=Ge;const tt=M.length;Se>tt/2&&(Se=tt/2);let Ve;for(Ve=0;Ve<Se;++Ve){const Tt=parseInt(M.substr(Ve*2,2),16);if(xe(Tt))return Ve;ae[U+Ve]=Tt}return Ve}function j(ae,M,U,Se){return N(wn(M,ae.length-U),ae,U,Se)}function ee(ae,M,U,Se){return N(an(M),ae,U,Se)}function Z(ae,M,U,Se){return N(be(M),ae,U,Se)}function ve(ae,M,U,Se){return N(Ht(M,ae.length-U),ae,U,Se)}u.prototype.write=function(M,U,Se,Ge){if(U===void 0)Ge="utf8",Se=this.length,U=0;else if(Se===void 0&&typeof U=="string")Ge=U,Se=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(Se)?(Se=Se>>>0,Ge===void 0&&(Ge="utf8")):(Ge=Se,Se=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const tt=this.length-U;if((Se===void 0||Se>tt)&&(Se=tt),M.length>0&&(Se<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");let Ve=!1;for(;;)switch(Ge){case"hex":return L(this,M,U,Se);case"utf8":case"utf-8":return j(this,M,U,Se);case"ascii":case"latin1":case"binary":return ee(this,M,U,Se);case"base64":return Z(this,M,U,Se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,M,U,Se);default:if(Ve)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),Ve=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(ae,M,U){return M===0&&U===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(M,U))}function de(ae,M,U){U=Math.min(ae.length,U);const Se=[];let Ge=M;for(;Ge<U;){const tt=ae[Ge];let Ve=null,Tt=tt>239?4:tt>223?3:tt>191?2:1;if(Ge+Tt<=U){let zt,hn,En,Rt;switch(Tt){case 1:tt<128&&(Ve=tt);break;case 2:zt=ae[Ge+1],(zt&192)===128&&(Rt=(tt&31)<<6|zt&63,Rt>127&&(Ve=Rt));break;case 3:zt=ae[Ge+1],hn=ae[Ge+2],(zt&192)===128&&(hn&192)===128&&(Rt=(tt&15)<<12|(zt&63)<<6|hn&63,Rt>2047&&(Rt<55296||Rt>57343)&&(Ve=Rt));break;case 4:zt=ae[Ge+1],hn=ae[Ge+2],En=ae[Ge+3],(zt&192)===128&&(hn&192)===128&&(En&192)===128&&(Rt=(tt&15)<<18|(zt&63)<<12|(hn&63)<<6|En&63,Rt>65535&&Rt<1114112&&(Ve=Rt))}}Ve===null?(Ve=65533,Tt=1):Ve>65535&&(Ve-=65536,Se.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),Se.push(Ve),Ge+=Tt}return ue(Se)}const oe=4096;function ue(ae){const M=ae.length;if(M<=oe)return String.fromCharCode.apply(String,ae);let U="",Se=0;for(;Se<M;)U+=String.fromCharCode.apply(String,ae.slice(Se,Se+=oe));return U}function Q(ae,M,U){let Se="";U=Math.min(ae.length,U);for(let Ge=M;Ge<U;++Ge)Se+=String.fromCharCode(ae[Ge]&127);return Se}function te(ae,M,U){let Se="";U=Math.min(ae.length,U);for(let Ge=M;Ge<U;++Ge)Se+=String.fromCharCode(ae[Ge]);return Se}function fe(ae,M,U){const Se=ae.length;(!M||M<0)&&(M=0),(!U||U<0||U>Se)&&(U=Se);let Ge="";for(let tt=M;tt<U;++tt)Ge+=Xe[ae[tt]];return Ge}function we(ae,M,U){const Se=ae.slice(M,U);let Ge="";for(let tt=0;tt<Se.length-1;tt+=2)Ge+=String.fromCharCode(Se[tt]+Se[tt+1]*256);return Ge}u.prototype.slice=function(M,U){const Se=this.length;M=~~M,U=U===void 0?Se:~~U,M<0?(M+=Se,M<0&&(M=0)):M>Se&&(M=Se),U<0?(U+=Se,U<0&&(U=0)):U>Se&&(U=Se),U<M&&(U=M);const Ge=this.subarray(M,U);return Object.setPrototypeOf(Ge,u.prototype),Ge};function Ee(ae,M,U){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+M>U)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(M,U,Se){M=M>>>0,U=U>>>0,Se||Ee(M,U,this.length);let Ge=this[M],tt=1,Ve=0;for(;++Ve<U&&(tt*=256);)Ge+=this[M+Ve]*tt;return Ge},u.prototype.readUintBE=u.prototype.readUIntBE=function(M,U,Se){M=M>>>0,U=U>>>0,Se||Ee(M,U,this.length);let Ge=this[M+--U],tt=1;for(;U>0&&(tt*=256);)Ge+=this[M+--U]*tt;return Ge},u.prototype.readUint8=u.prototype.readUInt8=function(M,U){return M=M>>>0,U||Ee(M,1,this.length),this[M]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(M,U){return M=M>>>0,U||Ee(M,2,this.length),this[M]|this[M+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(M,U){return M=M>>>0,U||Ee(M,2,this.length),this[M]<<8|this[M+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(M,U){return M=M>>>0,U||Ee(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(M,U){return M=M>>>0,U||Ee(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},u.prototype.readBigUInt64LE=et(function(M){M=M>>>0,Vt(M,"offset");const U=this[M],Se=this[M+7];(U===void 0||Se===void 0)&&Lt(M,this.length-8);const Ge=U+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,tt=this[++M]+this[++M]*2**8+this[++M]*2**16+Se*2**24;return BigInt(Ge)+(BigInt(tt)<<BigInt(32))}),u.prototype.readBigUInt64BE=et(function(M){M=M>>>0,Vt(M,"offset");const U=this[M],Se=this[M+7];(U===void 0||Se===void 0)&&Lt(M,this.length-8);const Ge=U*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],tt=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+Se;return(BigInt(Ge)<<BigInt(32))+BigInt(tt)}),u.prototype.readIntLE=function(M,U,Se){M=M>>>0,U=U>>>0,Se||Ee(M,U,this.length);let Ge=this[M],tt=1,Ve=0;for(;++Ve<U&&(tt*=256);)Ge+=this[M+Ve]*tt;return tt*=128,Ge>=tt&&(Ge-=Math.pow(2,8*U)),Ge},u.prototype.readIntBE=function(M,U,Se){M=M>>>0,U=U>>>0,Se||Ee(M,U,this.length);let Ge=U,tt=1,Ve=this[M+--Ge];for(;Ge>0&&(tt*=256);)Ve+=this[M+--Ge]*tt;return tt*=128,Ve>=tt&&(Ve-=Math.pow(2,8*U)),Ve},u.prototype.readInt8=function(M,U){return M=M>>>0,U||Ee(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},u.prototype.readInt16LE=function(M,U){M=M>>>0,U||Ee(M,2,this.length);const Se=this[M]|this[M+1]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt16BE=function(M,U){M=M>>>0,U||Ee(M,2,this.length);const Se=this[M+1]|this[M]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt32LE=function(M,U){return M=M>>>0,U||Ee(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},u.prototype.readInt32BE=function(M,U){return M=M>>>0,U||Ee(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},u.prototype.readBigInt64LE=et(function(M){M=M>>>0,Vt(M,"offset");const U=this[M],Se=this[M+7];(U===void 0||Se===void 0)&&Lt(M,this.length-8);const Ge=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+(Se<<24);return(BigInt(Ge)<<BigInt(32))+BigInt(U+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24)}),u.prototype.readBigInt64BE=et(function(M){M=M>>>0,Vt(M,"offset");const U=this[M],Se=this[M+7];(U===void 0||Se===void 0)&&Lt(M,this.length-8);const Ge=(U<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(Ge)<<BigInt(32))+BigInt(this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+Se)}),u.prototype.readFloatLE=function(M,U){return M=M>>>0,U||Ee(M,4,this.length),i.read(this,M,!0,23,4)},u.prototype.readFloatBE=function(M,U){return M=M>>>0,U||Ee(M,4,this.length),i.read(this,M,!1,23,4)},u.prototype.readDoubleLE=function(M,U){return M=M>>>0,U||Ee(M,8,this.length),i.read(this,M,!0,52,8)},u.prototype.readDoubleBE=function(M,U){return M=M>>>0,U||Ee(M,8,this.length),i.read(this,M,!1,52,8)};function Ne(ae,M,U,Se,Ge,tt){if(!u.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>Ge||M<tt)throw new RangeError('"value" argument is out of bounds');if(U+Se>ae.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(M,U,Se,Ge){if(M=+M,U=U>>>0,Se=Se>>>0,!Ge){const Tt=Math.pow(2,8*Se)-1;Ne(this,M,U,Se,Tt,0)}let tt=1,Ve=0;for(this[U]=M&255;++Ve<Se&&(tt*=256);)this[U+Ve]=M/tt&255;return U+Se},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(M,U,Se,Ge){if(M=+M,U=U>>>0,Se=Se>>>0,!Ge){const Tt=Math.pow(2,8*Se)-1;Ne(this,M,U,Se,Tt,0)}let tt=Se-1,Ve=1;for(this[U+tt]=M&255;--tt>=0&&(Ve*=256);)this[U+tt]=M/Ve&255;return U+Se},u.prototype.writeUint8=u.prototype.writeUInt8=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,1,255,0),this[U]=M&255,U+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,2,65535,0),this[U]=M&255,this[U+1]=M>>>8,U+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,2,65535,0),this[U]=M>>>8,this[U+1]=M&255,U+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,4,4294967295,0),this[U+3]=M>>>24,this[U+2]=M>>>16,this[U+1]=M>>>8,this[U]=M&255,U+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,4,4294967295,0),this[U]=M>>>24,this[U+1]=M>>>16,this[U+2]=M>>>8,this[U+3]=M&255,U+4};function Ae(ae,M,U,Se,Ge){St(M,Se,Ge,ae,U,7);let tt=Number(M&BigInt(4294967295));ae[U++]=tt,tt=tt>>8,ae[U++]=tt,tt=tt>>8,ae[U++]=tt,tt=tt>>8,ae[U++]=tt;let Ve=Number(M>>BigInt(32)&BigInt(4294967295));return ae[U++]=Ve,Ve=Ve>>8,ae[U++]=Ve,Ve=Ve>>8,ae[U++]=Ve,Ve=Ve>>8,ae[U++]=Ve,U}function Re(ae,M,U,Se,Ge){St(M,Se,Ge,ae,U,7);let tt=Number(M&BigInt(4294967295));ae[U+7]=tt,tt=tt>>8,ae[U+6]=tt,tt=tt>>8,ae[U+5]=tt,tt=tt>>8,ae[U+4]=tt;let Ve=Number(M>>BigInt(32)&BigInt(4294967295));return ae[U+3]=Ve,Ve=Ve>>8,ae[U+2]=Ve,Ve=Ve>>8,ae[U+1]=Ve,Ve=Ve>>8,ae[U]=Ve,U+8}u.prototype.writeBigUInt64LE=et(function(M,U=0){return Ae(this,M,U,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=et(function(M,U=0){return Re(this,M,U,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(M,U,Se,Ge){if(M=+M,U=U>>>0,!Ge){const zt=Math.pow(2,8*Se-1);Ne(this,M,U,Se,zt-1,-zt)}let tt=0,Ve=1,Tt=0;for(this[U]=M&255;++tt<Se&&(Ve*=256);)M<0&&Tt===0&&this[U+tt-1]!==0&&(Tt=1),this[U+tt]=(M/Ve>>0)-Tt&255;return U+Se},u.prototype.writeIntBE=function(M,U,Se,Ge){if(M=+M,U=U>>>0,!Ge){const zt=Math.pow(2,8*Se-1);Ne(this,M,U,Se,zt-1,-zt)}let tt=Se-1,Ve=1,Tt=0;for(this[U+tt]=M&255;--tt>=0&&(Ve*=256);)M<0&&Tt===0&&this[U+tt+1]!==0&&(Tt=1),this[U+tt]=(M/Ve>>0)-Tt&255;return U+Se},u.prototype.writeInt8=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,1,127,-128),M<0&&(M=255+M+1),this[U]=M&255,U+1},u.prototype.writeInt16LE=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,2,32767,-32768),this[U]=M&255,this[U+1]=M>>>8,U+2},u.prototype.writeInt16BE=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,2,32767,-32768),this[U]=M>>>8,this[U+1]=M&255,U+2},u.prototype.writeInt32LE=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,4,2147483647,-2147483648),this[U]=M&255,this[U+1]=M>>>8,this[U+2]=M>>>16,this[U+3]=M>>>24,U+4},u.prototype.writeInt32BE=function(M,U,Se){return M=+M,U=U>>>0,Se||Ne(this,M,U,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[U]=M>>>24,this[U+1]=M>>>16,this[U+2]=M>>>8,this[U+3]=M&255,U+4},u.prototype.writeBigInt64LE=et(function(M,U=0){return Ae(this,M,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=et(function(M,U=0){return Re(this,M,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ze(ae,M,U,Se,Ge,tt){if(U+Se>ae.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function He(ae,M,U,Se,Ge){return M=+M,U=U>>>0,Ge||Ze(ae,M,U,4),i.write(ae,M,U,Se,23,4),U+4}u.prototype.writeFloatLE=function(M,U,Se){return He(this,M,U,!0,Se)},u.prototype.writeFloatBE=function(M,U,Se){return He(this,M,U,!1,Se)};function rt(ae,M,U,Se,Ge){return M=+M,U=U>>>0,Ge||Ze(ae,M,U,8),i.write(ae,M,U,Se,52,8),U+8}u.prototype.writeDoubleLE=function(M,U,Se){return rt(this,M,U,!0,Se)},u.prototype.writeDoubleBE=function(M,U,Se){return rt(this,M,U,!1,Se)},u.prototype.copy=function(M,U,Se,Ge){if(!u.isBuffer(M))throw new TypeError("argument should be a Buffer");if(Se||(Se=0),!Ge&&Ge!==0&&(Ge=this.length),U>=M.length&&(U=M.length),U||(U=0),Ge>0&&Ge<Se&&(Ge=Se),Ge===Se||M.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(Se<0||Se>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),M.length-U<Ge-Se&&(Ge=M.length-U+Se);const tt=Ge-Se;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,Se,Ge):Uint8Array.prototype.set.call(M,this.subarray(Se,Ge),U),tt},u.prototype.fill=function(M,U,Se,Ge){if(typeof M=="string"){if(typeof U=="string"?(Ge=U,U=0,Se=this.length):typeof Se=="string"&&(Ge=Se,Se=this.length),Ge!==void 0&&typeof Ge!="string")throw new TypeError("encoding must be a string");if(typeof Ge=="string"&&!u.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(M.length===1){const Ve=M.charCodeAt(0);(Ge==="utf8"&&Ve<128||Ge==="latin1")&&(M=Ve)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(U<0||this.length<U||this.length<Se)throw new RangeError("Out of range index");if(Se<=U)return this;U=U>>>0,Se=Se===void 0?this.length:Se>>>0,M||(M=0);let tt;if(typeof M=="number")for(tt=U;tt<Se;++tt)this[tt]=M;else{const Ve=u.isBuffer(M)?M:u.from(M,Ge),Tt=Ve.length;if(Tt===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(tt=0;tt<Se-U;++tt)this[tt+U]=Ve[tt%Tt]}return this};const dt={};function wt(ae,M,U){dt[ae]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ge,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}wt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),wt("ERR_INVALID_ARG_TYPE",function(ae,M){return`The "${ae}" argument must be of type number. Received type ${typeof M}`},TypeError),wt("ERR_OUT_OF_RANGE",function(ae,M,U){let Se=`The value of "${ae}" is out of range.`,Ge=U;return Number.isInteger(U)&&Math.abs(U)>2**32?Ge=kt(String(U)):typeof U=="bigint"&&(Ge=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(Ge=kt(Ge)),Ge+="n"),Se+=` It must be ${M}. Received ${Ge}`,Se},RangeError);function kt(ae){let M="",U=ae.length;const Se=ae[0]==="-"?1:0;for(;U>=Se+4;U-=3)M=`_${ae.slice(U-3,U)}${M}`;return`${ae.slice(0,U)}${M}`}function mt(ae,M,U){Vt(M,"offset"),(ae[M]===void 0||ae[M+U]===void 0)&&Lt(M,ae.length-(U+1))}function St(ae,M,U,Se,Ge,tt){if(ae>U||ae<M){const Ve=typeof M=="bigint"?"n":"";let Tt;throw tt>3?M===0||M===BigInt(0)?Tt=`>= 0${Ve} and < 2${Ve} ** ${(tt+1)*8}${Ve}`:Tt=`>= -(2${Ve} ** ${(tt+1)*8-1}${Ve}) and < 2 ** ${(tt+1)*8-1}${Ve}`:Tt=`>= ${M}${Ve} and <= ${U}${Ve}`,new dt.ERR_OUT_OF_RANGE("value",Tt,ae)}mt(Se,Ge,tt)}function Vt(ae,M){if(typeof ae!="number")throw new dt.ERR_INVALID_ARG_TYPE(M,"number",ae)}function Lt(ae,M,U){throw Math.floor(ae)!==ae?(Vt(ae,U),new dt.ERR_OUT_OF_RANGE(U||"offset","an integer",ae)):M<0?new dt.ERR_BUFFER_OUT_OF_BOUNDS:new dt.ERR_OUT_OF_RANGE(U||"offset",`>= ${U?1:0} and <= ${M}`,ae)}const sn=/[^+/0-9A-Za-z-_]/g;function nt(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(sn,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function wn(ae,M){M=M||1/0;let U;const Se=ae.length;let Ge=null;const tt=[];for(let Ve=0;Ve<Se;++Ve){if(U=ae.charCodeAt(Ve),U>55295&&U<57344){if(!Ge){if(U>56319){(M-=3)>-1&&tt.push(239,191,189);continue}else if(Ve+1===Se){(M-=3)>-1&&tt.push(239,191,189);continue}Ge=U;continue}if(U<56320){(M-=3)>-1&&tt.push(239,191,189),Ge=U;continue}U=(Ge-55296<<10|U-56320)+65536}else Ge&&(M-=3)>-1&&tt.push(239,191,189);if(Ge=null,U<128){if((M-=1)<0)break;tt.push(U)}else if(U<2048){if((M-=2)<0)break;tt.push(U>>6|192,U&63|128)}else if(U<65536){if((M-=3)<0)break;tt.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((M-=4)<0)break;tt.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return tt}function an(ae){const M=[];for(let U=0;U<ae.length;++U)M.push(ae.charCodeAt(U)&255);return M}function Ht(ae,M){let U,Se,Ge;const tt=[];for(let Ve=0;Ve<ae.length&&!((M-=2)<0);++Ve)U=ae.charCodeAt(Ve),Se=U>>8,Ge=U%256,tt.push(Ge),tt.push(Se);return tt}function be(ae){return t.toByteArray(nt(ae))}function N(ae,M,U,Se){let Ge;for(Ge=0;Ge<Se&&!(Ge+U>=M.length||Ge>=ae.length);++Ge)M[Ge+U]=ae[Ge];return Ge}function D(ae,M){return ae instanceof M||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===M.name}function xe(ae){return ae!==ae}const Xe=function(){const ae="0123456789abcdef",M=new Array(256);for(let U=0;U<16;++U){const Se=U*16;for(let Ge=0;Ge<16;++Ge)M[Se+Ge]=ae[U]+ae[Ge]}return M}();function et(ae){return typeof BigInt>"u"?ht:ae}function ht(){throw new Error("BigInt not supported")}})(HA);window.Buffer=HA.Buffer;h4.render(yt.jsx(h1.StrictMode,{children:yt.jsx(Tj,{})}),document.getElementById("root"));

function US(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(s){if(s!=="default"&&!(s in e)){var u=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(e,s,u.get?u:{enumerable:!0,get:function(){return r[s]}})}})}),Object.freeze(e)}const $S=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function r(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerpolicy&&(f.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?f.credentials="include":u.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(u){if(u.ep)return;u.ep=!0;const f=r(u);fetch(u.href,f)}};$S();var pl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Vy(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),t}function $d(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gt={exports:{}},Un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td=Symbol.for("react.element"),VS=Symbol.for("react.portal"),GS=Symbol.for("react.fragment"),HS=Symbol.for("react.strict_mode"),WS=Symbol.for("react.profiler"),ZS=Symbol.for("react.provider"),XS=Symbol.for("react.context"),KS=Symbol.for("react.forward_ref"),YS=Symbol.for("react.suspense"),qS=Symbol.for("react.memo"),JS=Symbol.for("react.lazy"),Y_=Symbol.iterator;function QS(e){return e===null||typeof e!="object"?null:(e=Y_&&e[Y_]||e["@@iterator"],typeof e=="function"?e:null)}var Ow={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rw=Object.assign,Fw={};function dh(e,t,r){this.props=e,this.context=t,this.refs=Fw,this.updater=r||Ow}dh.prototype.isReactComponent={};dh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bw(){}Bw.prototype=dh.prototype;function Gy(e,t,r){this.props=e,this.context=t,this.refs=Fw,this.updater=r||Ow}var Hy=Gy.prototype=new Bw;Hy.constructor=Gy;Rw(Hy,dh.prototype);Hy.isPureReactComponent=!0;var q_=Array.isArray,jw=Object.prototype.hasOwnProperty,Wy={current:null},Dw={key:!0,ref:!0,__self:!0,__source:!0};function Nw(e,t,r){var s,u={},f=null,g=null;if(t!=null)for(s in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(f=""+t.key),t)jw.call(t,s)&&!Dw.hasOwnProperty(s)&&(u[s]=t[s]);var l=arguments.length-2;if(l===1)u.children=r;else if(1<l){for(var _=Array(l),C=0;C<l;C++)_[C]=arguments[C+2];u.children=_}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)u[s]===void 0&&(u[s]=l[s]);return{$$typeof:td,type:e,key:f,ref:g,props:u,_owner:Wy.current}}function e8(e,t){return{$$typeof:td,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zy(e){return typeof e=="object"&&e!==null&&e.$$typeof===td}function t8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var J_=/\/+/g;function fg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?t8(""+e.key):t.toString(36)}function xp(e,t,r,s,u){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case td:case VS:g=!0}}if(g)return g=e,u=u(g),e=s===""?"."+fg(g,0):s,q_(u)?(r="",e!=null&&(r=e.replace(J_,"$&/")+"/"),xp(u,t,r,"",function(C){return C})):u!=null&&(Zy(u)&&(u=e8(u,r+(!u.key||g&&g.key===u.key?"":(""+u.key).replace(J_,"$&/")+"/")+e)),t.push(u)),1;if(g=0,s=s===""?".":s+":",q_(e))for(var l=0;l<e.length;l++){f=e[l];var _=s+fg(f,l);g+=xp(f,t,r,_,u)}else if(_=QS(e),typeof _=="function")for(e=_.call(e),l=0;!(f=e.next()).done;)f=f.value,_=s+fg(f,l++),g+=xp(f,t,r,_,u);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Vd(e,t,r){if(e==null)return e;var s=[],u=0;return xp(e,s,"","",function(f){return t.call(r,f,u++)}),s}function n8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var to={current:null},_p={transition:null},r8={ReactCurrentDispatcher:to,ReactCurrentBatchConfig:_p,ReactCurrentOwner:Wy};Un.Children={map:Vd,forEach:function(e,t,r){Vd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Vd(e,function(){t++}),t},toArray:function(e){return Vd(e,function(t){return t})||[]},only:function(e){if(!Zy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Un.Component=dh;Un.Fragment=GS;Un.Profiler=WS;Un.PureComponent=Gy;Un.StrictMode=HS;Un.Suspense=YS;Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r8;Un.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Rw({},e.props),u=e.key,f=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,g=Wy.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(_ in t)jw.call(t,_)&&!Dw.hasOwnProperty(_)&&(s[_]=t[_]===void 0&&l!==void 0?l[_]:t[_])}var _=arguments.length-2;if(_===1)s.children=r;else if(1<_){l=Array(_);for(var C=0;C<_;C++)l[C]=arguments[C+2];s.children=l}return{$$typeof:td,type:e.type,key:u,ref:f,props:s,_owner:g}};Un.createContext=function(e){return e={$$typeof:XS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZS,_context:e},e.Consumer=e};Un.createElement=Nw;Un.createFactory=function(e){var t=Nw.bind(null,e);return t.type=e,t};Un.createRef=function(){return{current:null}};Un.forwardRef=function(e){return{$$typeof:KS,render:e}};Un.isValidElement=Zy;Un.lazy=function(e){return{$$typeof:JS,_payload:{_status:-1,_result:e},_init:n8}};Un.memo=function(e,t){return{$$typeof:qS,type:e,compare:t===void 0?null:t}};Un.startTransition=function(e){var t=_p.transition;_p.transition={};try{e()}finally{_p.transition=t}};Un.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Un.useCallback=function(e,t){return to.current.useCallback(e,t)};Un.useContext=function(e){return to.current.useContext(e)};Un.useDebugValue=function(){};Un.useDeferredValue=function(e){return to.current.useDeferredValue(e)};Un.useEffect=function(e,t){return to.current.useEffect(e,t)};Un.useId=function(){return to.current.useId()};Un.useImperativeHandle=function(e,t,r){return to.current.useImperativeHandle(e,t,r)};Un.useInsertionEffect=function(e,t){return to.current.useInsertionEffect(e,t)};Un.useLayoutEffect=function(e,t){return to.current.useLayoutEffect(e,t)};Un.useMemo=function(e,t){return to.current.useMemo(e,t)};Un.useReducer=function(e,t,r){return to.current.useReducer(e,t,r)};Un.useRef=function(e){return to.current.useRef(e)};Un.useState=function(e){return to.current.useState(e)};Un.useSyncExternalStore=function(e,t,r){return to.current.useSyncExternalStore(e,t,r)};Un.useTransition=function(){return to.current.useTransition()};Un.version="18.2.0";gt.exports=Un;var Uw=gt.exports,Gm={exports:{}},Ao={},$w={exports:{}},Vw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,he){var xe=te.length;te.push(he);e:for(;0<xe;){var _e=xe-1>>>1,Be=te[_e];if(0<u(Be,he))te[_e]=he,te[xe]=Be,xe=_e;else break e}}function r(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var he=te[0],xe=te.pop();if(xe!==he){te[0]=xe;e:for(var _e=0,Be=te.length,Ie=Be>>>1;_e<Ie;){var Pe=2*(_e+1)-1,$e=te[Pe],Ne=Pe+1,qe=te[Ne];if(0>u($e,xe))Ne<Be&&0>u(qe,$e)?(te[_e]=qe,te[Ne]=xe,_e=Ne):(te[_e]=$e,te[Pe]=xe,_e=Pe);else if(Ne<Be&&0>u(qe,xe))te[_e]=qe,te[Ne]=xe,_e=Ne;else break e}}return he}function u(te,he){var xe=te.sortIndex-he.sortIndex;return xe!==0?xe:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,l=g.now();e.unstable_now=function(){return g.now()-l}}var _=[],C=[],S=1,E=null,T=3,F=!1,X=!1,Z=!1,ue=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(te){for(var he=r(C);he!==null;){if(he.callback===null)s(C);else if(he.startTime<=te)s(C),he.sortIndex=he.expirationTime,t(_,he);else break;he=r(C)}}function ae(te){if(Z=!1,B(te),!X)if(r(_)!==null)X=!0,ie(G);else{var he=r(C);he!==null&&ne(ae,he.startTime-te)}}function G(te,he){X=!1,Z&&(Z=!1,H(k),k=-1),F=!0;var xe=T;try{for(B(he),E=r(_);E!==null&&(!(E.expirationTime>he)||te&&!Y());){var _e=E.callback;if(typeof _e=="function"){E.callback=null,T=E.priorityLevel;var Be=_e(E.expirationTime<=he);he=e.unstable_now(),typeof Be=="function"?E.callback=Be:E===r(_)&&s(_),B(he)}else s(_);E=r(_)}if(E!==null)var Ie=!0;else{var Pe=r(C);Pe!==null&&ne(ae,Pe.startTime-he),Ie=!1}return Ie}finally{E=null,T=xe,F=!1}}var j=!1,w=null,k=-1,U=5,K=-1;function Y(){return!(e.unstable_now()-K<U)}function de(){if(w!==null){var te=e.unstable_now();K=te;var he=!0;try{he=w(!0,te)}finally{he?ve():(j=!1,w=null)}}else j=!1}var ve;if(typeof V=="function")ve=function(){V(de)};else if(typeof MessageChannel!="undefined"){var be=new MessageChannel,ee=be.port2;be.port1.onmessage=de,ve=function(){ee.postMessage(null)}}else ve=function(){ue(de,0)};function ie(te){w=te,j||(j=!0,ve())}function ne(te,he){k=ue(function(){te(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){X||F||(X=!0,ie(G))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(te){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var xe=T;T=he;try{return te()}finally{T=xe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var xe=T;T=te;try{return he()}finally{T=xe}},e.unstable_scheduleCallback=function(te,he,xe){var _e=e.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?_e+xe:_e):xe=_e,te){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=xe+Be,te={id:S++,callback:he,priorityLevel:te,startTime:xe,expirationTime:Be,sortIndex:-1},xe>_e?(te.sortIndex=xe,t(C,te),r(_)===null&&te===r(C)&&(Z?(H(k),k=-1):Z=!0,ne(ae,xe-_e))):(te.sortIndex=Be,t(_,te),X||F||(X=!0,ie(G))),te},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(te){var he=T;return function(){var xe=T;T=he;try{return te.apply(this,arguments)}finally{T=xe}}}})(Vw);$w.exports=Vw;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw=gt.exports,To=$w.exports;function Tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hw=new Set,Lf={};function Bu(e,t){th(e,t),th(e+"Capture",t)}function th(e,t){for(Lf[e]=t,e=0;e<t.length;e++)Hw.add(t[e])}var Ms=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),o1=Object.prototype.hasOwnProperty,i8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q_={},e2={};function o8(e){return o1.call(e2,e)?!0:o1.call(Q_,e)?!1:i8.test(e)?e2[e]=!0:(Q_[e]=!0,!1)}function a8(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function s8(e,t,r,s){if(t===null||typeof t=="undefined"||a8(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function no(e,t,r,s,u,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var _i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_i[e]=new no(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_i[t]=new no(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_i[e]=new no(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_i[e]=new no(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_i[e]=new no(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_i[e]=new no(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_i[e]=new no(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_i[e]=new no(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_i[e]=new no(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xy=/[\-:]([a-z])/g;function Ky(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xy,Ky);_i[t]=new no(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xy,Ky);_i[t]=new no(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xy,Ky);_i[t]=new no(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_i[e]=new no(e,1,!1,e.toLowerCase(),null,!1,!1)});_i.xlinkHref=new no("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_i[e]=new no(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yy(e,t,r,s){var u=_i.hasOwnProperty(t)?_i[t]:null;(u!==null?u.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(s8(t,r,u,s)&&(r=null),s||u===null?o8(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,s=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Ds=Gw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gd=Symbol.for("react.element"),Pc=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),qy=Symbol.for("react.strict_mode"),a1=Symbol.for("react.profiler"),Ww=Symbol.for("react.provider"),Zw=Symbol.for("react.context"),Jy=Symbol.for("react.forward_ref"),s1=Symbol.for("react.suspense"),l1=Symbol.for("react.suspense_list"),Qy=Symbol.for("react.memo"),hl=Symbol.for("react.lazy"),Xw=Symbol.for("react.offscreen"),t2=Symbol.iterator;function Kh(e){return e===null||typeof e!="object"?null:(e=t2&&e[t2]||e["@@iterator"],typeof e=="function"?e:null)}var Rr=Object.assign,dg;function of(e){if(dg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);dg=t&&t[1]||""}return`
`+dg+e}var pg=!1;function mg(e,t){if(!e||pg)return"";pg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var s=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){s=C}e.call(t.prototype)}else{try{throw Error()}catch(C){s=C}e()}}catch(C){if(C&&s&&typeof C.stack=="string"){for(var u=C.stack.split(`
`),f=s.stack.split(`
`),g=u.length-1,l=f.length-1;1<=g&&0<=l&&u[g]!==f[l];)l--;for(;1<=g&&0<=l;g--,l--)if(u[g]!==f[l]){if(g!==1||l!==1)do if(g--,l--,0>l||u[g]!==f[l]){var _=`
`+u[g].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=g&&0<=l);break}}}finally{pg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?of(e):""}function l8(e){switch(e.tag){case 5:return of(e.type);case 16:return of("Lazy");case 13:return of("Suspense");case 19:return of("SuspenseList");case 0:case 2:case 15:return e=mg(e.type,!1),e;case 11:return e=mg(e.type.render,!1),e;case 1:return e=mg(e.type,!0),e;default:return""}}function u1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kc:return"Fragment";case Pc:return"Portal";case a1:return"Profiler";case qy:return"StrictMode";case s1:return"Suspense";case l1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zw:return(e.displayName||"Context")+".Consumer";case Ww:return(e._context.displayName||"Context")+".Provider";case Jy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qy:return t=e.displayName||null,t!==null?t:u1(e.type)||"Memo";case hl:t=e._payload,e=e._init;try{return u1(e(t))}catch{}}return null}function u8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return u1(t);case 8:return t===qy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function c8(e){var t=Kw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){s=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(g){s=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hd(e){e._valueTracker||(e._valueTracker=c8(e))}function Yw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Kw(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Up(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function c1(e,t){var r=t.checked;return Rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function n2(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Pl(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qw(e,t){t=t.checked,t!=null&&Yy(e,"checked",t,!1)}function h1(e,t){qw(e,t);var r=Pl(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?f1(e,t.type,r):t.hasOwnProperty("defaultValue")&&f1(e,t.type,Pl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function r2(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function f1(e,t,r){(t!=="number"||Up(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var af=Array.isArray;function Wc(e,t,r,s){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Pl(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function d1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Tt(91));return Rr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function i2(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Tt(92));if(af(r)){if(1<r.length)throw Error(Tt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Pl(r)}}function Jw(e,t){var r=Pl(t.value),s=Pl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function o2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wd,e5=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,s,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wd=Wd||document.createElement("div"),Wd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Of(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var yf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h8=["Webkit","ms","Moz","O"];Object.keys(yf).forEach(function(e){h8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yf[t]=yf[e]})});function t5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||yf.hasOwnProperty(e)&&yf[e]?(""+t).trim():t+"px"}function n5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,u=t5(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,u):e[r]=u}}var f8=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function m1(e,t){if(t){if(f8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Tt(62))}}function g1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y1=null;function ev(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var v1=null,Zc=null,Xc=null;function a2(e){if(e=id(e)){if(typeof v1!="function")throw Error(Tt(280));var t=e.stateNode;t&&(t=Km(t),v1(e.stateNode,e.type,t))}}function r5(e){Zc?Xc?Xc.push(e):Xc=[e]:Zc=e}function i5(){if(Zc){var e=Zc,t=Xc;if(Xc=Zc=null,a2(e),t)for(e=0;e<t.length;e++)a2(t[e])}}function o5(e,t){return e(t)}function a5(){}var gg=!1;function s5(e,t,r){if(gg)return e(t,r);gg=!0;try{return o5(e,t,r)}finally{gg=!1,(Zc!==null||Xc!==null)&&(a5(),i5())}}function Rf(e,t){var r=e.stateNode;if(r===null)return null;var s=Km(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Tt(231,t,typeof r));return r}var x1=!1;if(Ms)try{var Yh={};Object.defineProperty(Yh,"passive",{get:function(){x1=!0}}),window.addEventListener("test",Yh,Yh),window.removeEventListener("test",Yh,Yh)}catch{x1=!1}function d8(e,t,r,s,u,f,g,l,_){var C=Array.prototype.slice.call(arguments,3);try{t.apply(r,C)}catch(S){this.onError(S)}}var vf=!1,$p=null,Vp=!1,_1=null,p8={onError:function(e){vf=!0,$p=e}};function m8(e,t,r,s,u,f,g,l,_){vf=!1,$p=null,d8.apply(p8,arguments)}function g8(e,t,r,s,u,f,g,l,_){if(m8.apply(this,arguments),vf){if(vf){var C=$p;vf=!1,$p=null}else throw Error(Tt(198));Vp||(Vp=!0,_1=C)}}function ju(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function l5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function s2(e){if(ju(e)!==e)throw Error(Tt(188))}function y8(e){var t=e.alternate;if(!t){if(t=ju(e),t===null)throw Error(Tt(188));return t!==e?null:e}for(var r=e,s=t;;){var u=r.return;if(u===null)break;var f=u.alternate;if(f===null){if(s=u.return,s!==null){r=s;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===r)return s2(u),e;if(f===s)return s2(u),t;f=f.sibling}throw Error(Tt(188))}if(r.return!==s.return)r=u,s=f;else{for(var g=!1,l=u.child;l;){if(l===r){g=!0,r=u,s=f;break}if(l===s){g=!0,s=u,r=f;break}l=l.sibling}if(!g){for(l=f.child;l;){if(l===r){g=!0,r=f,s=u;break}if(l===s){g=!0,s=f,r=u;break}l=l.sibling}if(!g)throw Error(Tt(189))}}if(r.alternate!==s)throw Error(Tt(190))}if(r.tag!==3)throw Error(Tt(188));return r.stateNode.current===r?e:t}function u5(e){return e=y8(e),e!==null?c5(e):null}function c5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=c5(e);if(t!==null)return t;e=e.sibling}return null}var h5=To.unstable_scheduleCallback,l2=To.unstable_cancelCallback,v8=To.unstable_shouldYield,x8=To.unstable_requestPaint,Kr=To.unstable_now,_8=To.unstable_getCurrentPriorityLevel,tv=To.unstable_ImmediatePriority,f5=To.unstable_UserBlockingPriority,Gp=To.unstable_NormalPriority,b8=To.unstable_LowPriority,d5=To.unstable_IdlePriority,Hm=null,qa=null;function w8(e){if(qa&&typeof qa.onCommitFiberRoot=="function")try{qa.onCommitFiberRoot(Hm,e,void 0,(e.current.flags&128)===128)}catch{}}var Sa=Math.clz32?Math.clz32:C8,E8=Math.log,S8=Math.LN2;function C8(e){return e>>>=0,e===0?32:31-(E8(e)/S8|0)|0}var Zd=64,Xd=4194304;function sf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hp(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,u=e.suspendedLanes,f=e.pingedLanes,g=r&268435455;if(g!==0){var l=g&~u;l!==0?s=sf(l):(f&=g,f!==0&&(s=sf(f)))}else g=r&~u,g!==0?s=sf(g):f!==0&&(s=sf(f));if(s===0)return 0;if(t!==0&&t!==s&&(t&u)===0&&(u=s&-s,f=t&-t,u>=f||u===16&&(f&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Sa(t),u=1<<r,s|=e[r],t&=~u;return s}function T8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A8(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Sa(f),l=1<<g,_=u[g];_===-1?((l&r)===0||(l&s)!==0)&&(u[g]=T8(l,t)):_<=t&&(e.expiredLanes|=l),f&=~l}}function b1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function p5(){var e=Zd;return Zd<<=1,(Zd&4194240)===0&&(Zd=64),e}function yg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function nd(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sa(t),e[t]=r}function I8(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var u=31-Sa(r),f=1<<u;t[u]=0,s[u]=-1,e[u]=-1,r&=~f}}function nv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Sa(r),u=1<<s;u&t|e[s]&t&&(e[s]|=t),r&=~u}}var tr=0;function m5(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var g5,rv,y5,v5,x5,w1=!1,Kd=[],bl=null,wl=null,El=null,Ff=new Map,Bf=new Map,ml=[],P8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u2(e,t){switch(e){case"focusin":case"focusout":bl=null;break;case"dragenter":case"dragleave":wl=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":Ff.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bf.delete(t.pointerId)}}function qh(e,t,r,s,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:f,targetContainers:[u]},t!==null&&(t=id(t),t!==null&&rv(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function k8(e,t,r,s,u){switch(t){case"focusin":return bl=qh(bl,e,t,r,s,u),!0;case"dragenter":return wl=qh(wl,e,t,r,s,u),!0;case"mouseover":return El=qh(El,e,t,r,s,u),!0;case"pointerover":var f=u.pointerId;return Ff.set(f,qh(Ff.get(f)||null,e,t,r,s,u)),!0;case"gotpointercapture":return f=u.pointerId,Bf.set(f,qh(Bf.get(f)||null,e,t,r,s,u)),!0}return!1}function _5(e){var t=wu(e.target);if(t!==null){var r=ju(t);if(r!==null){if(t=r.tag,t===13){if(t=l5(r),t!==null){e.blockedOn=t,x5(e.priority,function(){y5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=E1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);y1=s,r.target.dispatchEvent(s),y1=null}else return t=id(r),t!==null&&rv(t),e.blockedOn=r,!1;t.shift()}return!0}function c2(e,t,r){bp(e)&&r.delete(t)}function M8(){w1=!1,bl!==null&&bp(bl)&&(bl=null),wl!==null&&bp(wl)&&(wl=null),El!==null&&bp(El)&&(El=null),Ff.forEach(c2),Bf.forEach(c2)}function Jh(e,t){e.blockedOn===t&&(e.blockedOn=null,w1||(w1=!0,To.unstable_scheduleCallback(To.unstable_NormalPriority,M8)))}function jf(e){function t(u){return Jh(u,e)}if(0<Kd.length){Jh(Kd[0],e);for(var r=1;r<Kd.length;r++){var s=Kd[r];s.blockedOn===e&&(s.blockedOn=null)}}for(bl!==null&&Jh(bl,e),wl!==null&&Jh(wl,e),El!==null&&Jh(El,e),Ff.forEach(t),Bf.forEach(t),r=0;r<ml.length;r++)s=ml[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<ml.length&&(r=ml[0],r.blockedOn===null);)_5(r),r.blockedOn===null&&ml.shift()}var Kc=Ds.ReactCurrentBatchConfig,Wp=!0;function z8(e,t,r,s){var u=tr,f=Kc.transition;Kc.transition=null;try{tr=1,iv(e,t,r,s)}finally{tr=u,Kc.transition=f}}function L8(e,t,r,s){var u=tr,f=Kc.transition;Kc.transition=null;try{tr=4,iv(e,t,r,s)}finally{tr=u,Kc.transition=f}}function iv(e,t,r,s){if(Wp){var u=E1(e,t,r,s);if(u===null)Ag(e,t,s,Zp,r),u2(e,s);else if(k8(u,e,t,r,s))s.stopPropagation();else if(u2(e,s),t&4&&-1<P8.indexOf(e)){for(;u!==null;){var f=id(u);if(f!==null&&g5(f),f=E1(e,t,r,s),f===null&&Ag(e,t,s,Zp,r),f===u)break;u=f}u!==null&&s.stopPropagation()}else Ag(e,t,s,null,r)}}var Zp=null;function E1(e,t,r,s){if(Zp=null,e=ev(s),e=wu(e),e!==null)if(t=ju(e),t===null)e=null;else if(r=t.tag,r===13){if(e=l5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zp=e,null}function b5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_8()){case tv:return 1;case f5:return 4;case Gp:case b8:return 16;case d5:return 536870912;default:return 16}default:return 16}}var vl=null,ov=null,wp=null;function w5(){if(wp)return wp;var e,t=ov,r=t.length,s,u="value"in vl?vl.value:vl.textContent,f=u.length;for(e=0;e<r&&t[e]===u[e];e++);var g=r-e;for(s=1;s<=g&&t[r-s]===u[f-s];s++);return wp=u.slice(e,1<s?1-s:void 0)}function Ep(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Yd(){return!0}function h2(){return!1}function Io(e){function t(r,s,u,f,g){this._reactName=r,this._targetInst=u,this.type=s,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Yd:h2,this.isPropagationStopped=h2,this}return Rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Yd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Yd)},persist:function(){},isPersistent:Yd}),t}var ph={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},av=Io(ph),rd=Rr({},ph,{view:0,detail:0}),O8=Io(rd),vg,xg,Qh,Wm=Rr({},rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qh&&(Qh&&e.type==="mousemove"?(vg=e.screenX-Qh.screenX,xg=e.screenY-Qh.screenY):xg=vg=0,Qh=e),vg)},movementY:function(e){return"movementY"in e?e.movementY:xg}}),f2=Io(Wm),R8=Rr({},Wm,{dataTransfer:0}),F8=Io(R8),B8=Rr({},rd,{relatedTarget:0}),_g=Io(B8),j8=Rr({},ph,{animationName:0,elapsedTime:0,pseudoElement:0}),D8=Io(j8),N8=Rr({},ph,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),U8=Io(N8),$8=Rr({},ph,{data:0}),d2=Io($8),V8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=H8[e])?!!t[e]:!1}function sv(){return W8}var Z8=Rr({},rd,{key:function(e){if(e.key){var t=V8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ep(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?G8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sv,charCode:function(e){return e.type==="keypress"?Ep(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ep(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),X8=Io(Z8),K8=Rr({},Wm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p2=Io(K8),Y8=Rr({},rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sv}),q8=Io(Y8),J8=Rr({},ph,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q8=Io(J8),e7=Rr({},Wm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),t7=Io(e7),n7=[9,13,27,32],lv=Ms&&"CompositionEvent"in window,xf=null;Ms&&"documentMode"in document&&(xf=document.documentMode);var r7=Ms&&"TextEvent"in window&&!xf,E5=Ms&&(!lv||xf&&8<xf&&11>=xf),m2=String.fromCharCode(32),g2=!1;function S5(e,t){switch(e){case"keyup":return n7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mc=!1;function i7(e,t){switch(e){case"compositionend":return C5(t);case"keypress":return t.which!==32?null:(g2=!0,m2);case"textInput":return e=t.data,e===m2&&g2?null:e;default:return null}}function o7(e,t){if(Mc)return e==="compositionend"||!lv&&S5(e,t)?(e=w5(),wp=ov=vl=null,Mc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return E5&&t.locale!=="ko"?null:t.data;default:return null}}var a7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!a7[e.type]:t==="textarea"}function T5(e,t,r,s){r5(s),t=Xp(t,"onChange"),0<t.length&&(r=new av("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var _f=null,Df=null;function s7(e){B5(e,0)}function Zm(e){var t=Oc(e);if(Yw(t))return e}function l7(e,t){if(e==="change")return t}var A5=!1;if(Ms){var bg;if(Ms){var wg="oninput"in document;if(!wg){var v2=document.createElement("div");v2.setAttribute("oninput","return;"),wg=typeof v2.oninput=="function"}bg=wg}else bg=!1;A5=bg&&(!document.documentMode||9<document.documentMode)}function x2(){_f&&(_f.detachEvent("onpropertychange",I5),Df=_f=null)}function I5(e){if(e.propertyName==="value"&&Zm(Df)){var t=[];T5(t,Df,e,ev(e)),s5(s7,t)}}function u7(e,t,r){e==="focusin"?(x2(),_f=t,Df=r,_f.attachEvent("onpropertychange",I5)):e==="focusout"&&x2()}function c7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zm(Df)}function h7(e,t){if(e==="click")return Zm(t)}function f7(e,t){if(e==="input"||e==="change")return Zm(t)}function d7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Aa=typeof Object.is=="function"?Object.is:d7;function Nf(e,t){if(Aa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var u=r[s];if(!o1.call(t,u)||!Aa(e[u],t[u]))return!1}return!0}function _2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function b2(e,t){var r=_2(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_2(r)}}function P5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?P5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function k5(){for(var e=window,t=Up();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Up(e.document)}return t}function uv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function p7(e){var t=k5(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&P5(r.ownerDocument.documentElement,r)){if(s!==null&&uv(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=r.textContent.length,f=Math.min(s.start,u);s=s.end===void 0?f:Math.min(s.end,u),!e.extend&&f>s&&(u=s,s=f,f=u),u=b2(r,f);var g=b2(r,s);u&&g&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),f>s?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var m7=Ms&&"documentMode"in document&&11>=document.documentMode,zc=null,S1=null,bf=null,C1=!1;function w2(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;C1||zc==null||zc!==Up(s)||(s=zc,"selectionStart"in s&&uv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),bf&&Nf(bf,s)||(bf=s,s=Xp(S1,"onSelect"),0<s.length&&(t=new av("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=zc)))}function qd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Lc={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},Eg={},M5={};Ms&&(M5=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function Xm(e){if(Eg[e])return Eg[e];if(!Lc[e])return e;var t=Lc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in M5)return Eg[e]=t[r];return e}var z5=Xm("animationend"),L5=Xm("animationiteration"),O5=Xm("animationstart"),R5=Xm("transitionend"),F5=new Map,E2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ol(e,t){F5.set(e,t),Bu(t,[e])}for(var Sg=0;Sg<E2.length;Sg++){var Cg=E2[Sg],g7=Cg.toLowerCase(),y7=Cg[0].toUpperCase()+Cg.slice(1);Ol(g7,"on"+y7)}Ol(z5,"onAnimationEnd");Ol(L5,"onAnimationIteration");Ol(O5,"onAnimationStart");Ol("dblclick","onDoubleClick");Ol("focusin","onFocus");Ol("focusout","onBlur");Ol(R5,"onTransitionEnd");th("onMouseEnter",["mouseout","mouseover"]);th("onMouseLeave",["mouseout","mouseover"]);th("onPointerEnter",["pointerout","pointerover"]);th("onPointerLeave",["pointerout","pointerover"]);Bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v7=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function S2(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,g8(s,t,void 0,e),e.currentTarget=null}function B5(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],u=s.event;s=s.listeners;e:{var f=void 0;if(t)for(var g=s.length-1;0<=g;g--){var l=s[g],_=l.instance,C=l.currentTarget;if(l=l.listener,_!==f&&u.isPropagationStopped())break e;S2(u,l,C),f=_}else for(g=0;g<s.length;g++){if(l=s[g],_=l.instance,C=l.currentTarget,l=l.listener,_!==f&&u.isPropagationStopped())break e;S2(u,l,C),f=_}}}if(Vp)throw e=_1,Vp=!1,_1=null,e}function Er(e,t){var r=t[k1];r===void 0&&(r=t[k1]=new Set);var s=e+"__bubble";r.has(s)||(j5(t,e,2,!1),r.add(s))}function Tg(e,t,r){var s=0;t&&(s|=4),j5(r,e,s,t)}var Jd="_reactListening"+Math.random().toString(36).slice(2);function Uf(e){if(!e[Jd]){e[Jd]=!0,Hw.forEach(function(r){r!=="selectionchange"&&(v7.has(r)||Tg(r,!1,e),Tg(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jd]||(t[Jd]=!0,Tg("selectionchange",!1,t))}}function j5(e,t,r,s){switch(b5(t)){case 1:var u=z8;break;case 4:u=L8;break;default:u=iv}r=u.bind(null,t,r,e),u=void 0,!x1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function Ag(e,t,r,s,u){var f=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var l=s.stateNode.containerInfo;if(l===u||l.nodeType===8&&l.parentNode===u)break;if(g===4)for(g=s.return;g!==null;){var _=g.tag;if((_===3||_===4)&&(_=g.stateNode.containerInfo,_===u||_.nodeType===8&&_.parentNode===u))return;g=g.return}for(;l!==null;){if(g=wu(l),g===null)return;if(_=g.tag,_===5||_===6){s=f=g;continue e}l=l.parentNode}}s=s.return}s5(function(){var C=f,S=ev(r),E=[];e:{var T=F5.get(e);if(T!==void 0){var F=av,X=e;switch(e){case"keypress":if(Ep(r)===0)break e;case"keydown":case"keyup":F=X8;break;case"focusin":X="focus",F=_g;break;case"focusout":X="blur",F=_g;break;case"beforeblur":case"afterblur":F=_g;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=f2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=F8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=q8;break;case z5:case L5:case O5:F=D8;break;case R5:F=Q8;break;case"scroll":F=O8;break;case"wheel":F=t7;break;case"copy":case"cut":case"paste":F=U8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=p2}var Z=(t&4)!==0,ue=!Z&&e==="scroll",H=Z?T!==null?T+"Capture":null:T;Z=[];for(var V=C,B;V!==null;){B=V;var ae=B.stateNode;if(B.tag===5&&ae!==null&&(B=ae,H!==null&&(ae=Rf(V,H),ae!=null&&Z.push($f(V,ae,B)))),ue)break;V=V.return}0<Z.length&&(T=new F(T,X,null,r,S),E.push({event:T,listeners:Z}))}}if((t&7)===0){e:{if(T=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",T&&r!==y1&&(X=r.relatedTarget||r.fromElement)&&(wu(X)||X[zs]))break e;if((F||T)&&(T=S.window===S?S:(T=S.ownerDocument)?T.defaultView||T.parentWindow:window,F?(X=r.relatedTarget||r.toElement,F=C,X=X?wu(X):null,X!==null&&(ue=ju(X),X!==ue||X.tag!==5&&X.tag!==6)&&(X=null)):(F=null,X=C),F!==X)){if(Z=f2,ae="onMouseLeave",H="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Z=p2,ae="onPointerLeave",H="onPointerEnter",V="pointer"),ue=F==null?T:Oc(F),B=X==null?T:Oc(X),T=new Z(ae,V+"leave",F,r,S),T.target=ue,T.relatedTarget=B,ae=null,wu(S)===C&&(Z=new Z(H,V+"enter",X,r,S),Z.target=B,Z.relatedTarget=ue,ae=Z),ue=ae,F&&X)t:{for(Z=F,H=X,V=0,B=Z;B;B=bc(B))V++;for(B=0,ae=H;ae;ae=bc(ae))B++;for(;0<V-B;)Z=bc(Z),V--;for(;0<B-V;)H=bc(H),B--;for(;V--;){if(Z===H||H!==null&&Z===H.alternate)break t;Z=bc(Z),H=bc(H)}Z=null}else Z=null;F!==null&&C2(E,T,F,Z,!1),X!==null&&ue!==null&&C2(E,ue,X,Z,!0)}}e:{if(T=C?Oc(C):window,F=T.nodeName&&T.nodeName.toLowerCase(),F==="select"||F==="input"&&T.type==="file")var G=l7;else if(y2(T))if(A5)G=f7;else{G=c7;var j=u7}else(F=T.nodeName)&&F.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(G=h7);if(G&&(G=G(e,C))){T5(E,G,r,S);break e}j&&j(e,T,C),e==="focusout"&&(j=T._wrapperState)&&j.controlled&&T.type==="number"&&f1(T,"number",T.value)}switch(j=C?Oc(C):window,e){case"focusin":(y2(j)||j.contentEditable==="true")&&(zc=j,S1=C,bf=null);break;case"focusout":bf=S1=zc=null;break;case"mousedown":C1=!0;break;case"contextmenu":case"mouseup":case"dragend":C1=!1,w2(E,r,S);break;case"selectionchange":if(m7)break;case"keydown":case"keyup":w2(E,r,S)}var w;if(lv)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Mc?S5(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(E5&&r.locale!=="ko"&&(Mc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Mc&&(w=w5()):(vl=S,ov="value"in vl?vl.value:vl.textContent,Mc=!0)),j=Xp(C,k),0<j.length&&(k=new d2(k,e,null,r,S),E.push({event:k,listeners:j}),w?k.data=w:(w=C5(r),w!==null&&(k.data=w)))),(w=r7?i7(e,r):o7(e,r))&&(C=Xp(C,"onBeforeInput"),0<C.length&&(S=new d2("onBeforeInput","beforeinput",null,r,S),E.push({event:S,listeners:C}),S.data=w))}B5(E,t)})}function $f(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xp(e,t){for(var r=t+"Capture",s=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=Rf(e,r),f!=null&&s.unshift($f(e,f,u)),f=Rf(e,t),f!=null&&s.push($f(e,f,u))),e=e.return}return s}function bc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function C2(e,t,r,s,u){for(var f=t._reactName,g=[];r!==null&&r!==s;){var l=r,_=l.alternate,C=l.stateNode;if(_!==null&&_===s)break;l.tag===5&&C!==null&&(l=C,u?(_=Rf(r,f),_!=null&&g.unshift($f(r,_,l))):u||(_=Rf(r,f),_!=null&&g.push($f(r,_,l)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var x7=/\r\n?/g,_7=/\u0000|\uFFFD/g;function T2(e){return(typeof e=="string"?e:""+e).replace(x7,`
`).replace(_7,"")}function Qd(e,t,r){if(t=T2(t),T2(e)!==t&&r)throw Error(Tt(425))}function Kp(){}var T1=null,A1=null;function I1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var P1=typeof setTimeout=="function"?setTimeout:void 0,b7=typeof clearTimeout=="function"?clearTimeout:void 0,A2=typeof Promise=="function"?Promise:void 0,w7=typeof queueMicrotask=="function"?queueMicrotask:typeof A2!="undefined"?function(e){return A2.resolve(null).then(e).catch(E7)}:P1;function E7(e){setTimeout(function(){throw e})}function Ig(e,t){var r=t,s=0;do{var u=r.nextSibling;if(e.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(s===0){e.removeChild(u),jf(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=u}while(r);jf(t)}function Sl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function I2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var mh=Math.random().toString(36).slice(2),Wa="__reactFiber$"+mh,Vf="__reactProps$"+mh,zs="__reactContainer$"+mh,k1="__reactEvents$"+mh,S7="__reactListeners$"+mh,C7="__reactHandles$"+mh;function wu(e){var t=e[Wa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zs]||r[Wa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=I2(e);e!==null;){if(r=e[Wa])return r;e=I2(e)}return t}e=r,r=e.parentNode}return null}function id(e){return e=e[Wa]||e[zs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Tt(33))}function Km(e){return e[Vf]||null}var M1=[],Rc=-1;function Rl(e){return{current:e}}function Sr(e){0>Rc||(e.current=M1[Rc],M1[Rc]=null,Rc--)}function vr(e,t){Rc++,M1[Rc]=e.current,e.current=t}var kl={},Li=Rl(kl),uo=Rl(!1),Iu=kl;function nh(e,t){var r=e.type.contextTypes;if(!r)return kl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in r)u[f]=t[f];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function co(e){return e=e.childContextTypes,e!=null}function Yp(){Sr(uo),Sr(Li)}function P2(e,t,r){if(Li.current!==kl)throw Error(Tt(168));vr(Li,t),vr(uo,r)}function D5(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var u in s)if(!(u in t))throw Error(Tt(108,u8(e)||"Unknown",u));return Rr({},r,s)}function qp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kl,Iu=Li.current,vr(Li,e),vr(uo,uo.current),!0}function k2(e,t,r){var s=e.stateNode;if(!s)throw Error(Tt(169));r?(e=D5(e,t,Iu),s.__reactInternalMemoizedMergedChildContext=e,Sr(uo),Sr(Li),vr(Li,e)):Sr(uo),vr(uo,r)}var Ts=null,Ym=!1,Pg=!1;function N5(e){Ts===null?Ts=[e]:Ts.push(e)}function T7(e){Ym=!0,N5(e)}function Fl(){if(!Pg&&Ts!==null){Pg=!0;var e=0,t=tr;try{var r=Ts;for(tr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Ts=null,Ym=!1}catch(u){throw Ts!==null&&(Ts=Ts.slice(e+1)),h5(tv,Fl),u}finally{tr=t,Pg=!1}}return null}var Fc=[],Bc=0,Jp=null,Qp=0,Go=[],Ho=0,Pu=null,Is=1,Ps="";function xu(e,t){Fc[Bc++]=Qp,Fc[Bc++]=Jp,Jp=e,Qp=t}function U5(e,t,r){Go[Ho++]=Is,Go[Ho++]=Ps,Go[Ho++]=Pu,Pu=e;var s=Is;e=Ps;var u=32-Sa(s)-1;s&=~(1<<u),r+=1;var f=32-Sa(t)+u;if(30<f){var g=u-u%5;f=(s&(1<<g)-1).toString(32),s>>=g,u-=g,Is=1<<32-Sa(t)+u|r<<u|s,Ps=f+e}else Is=1<<f|r<<u|s,Ps=e}function cv(e){e.return!==null&&(xu(e,1),U5(e,1,0))}function hv(e){for(;e===Jp;)Jp=Fc[--Bc],Fc[Bc]=null,Qp=Fc[--Bc],Fc[Bc]=null;for(;e===Pu;)Pu=Go[--Ho],Go[Ho]=null,Ps=Go[--Ho],Go[Ho]=null,Is=Go[--Ho],Go[Ho]=null}var Co=null,So=null,Ar=!1,xa=null;function $5(e,t){var r=Zo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function M2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Co=e,So=Sl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Co=e,So=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pu!==null?{id:Is,overflow:Ps}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Zo(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Co=e,So=null,!0):!1;default:return!1}}function z1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function L1(e){if(Ar){var t=So;if(t){var r=t;if(!M2(e,t)){if(z1(e))throw Error(Tt(418));t=Sl(r.nextSibling);var s=Co;t&&M2(e,t)?$5(s,r):(e.flags=e.flags&-4097|2,Ar=!1,Co=e)}}else{if(z1(e))throw Error(Tt(418));e.flags=e.flags&-4097|2,Ar=!1,Co=e}}}function z2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Co=e}function ep(e){if(e!==Co)return!1;if(!Ar)return z2(e),Ar=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!I1(e.type,e.memoizedProps)),t&&(t=So)){if(z1(e))throw V5(),Error(Tt(418));for(;t;)$5(e,t),t=Sl(t.nextSibling)}if(z2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){So=Sl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}So=null}}else So=Co?Sl(e.stateNode.nextSibling):null;return!0}function V5(){for(var e=So;e;)e=Sl(e.nextSibling)}function rh(){So=Co=null,Ar=!1}function fv(e){xa===null?xa=[e]:xa.push(e)}var A7=Ds.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){t=Rr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var em=Rl(null),tm=null,jc=null,dv=null;function pv(){dv=jc=tm=null}function mv(e){var t=em.current;Sr(em),e._currentValue=t}function O1(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Yc(e,t){tm=e,dv=jc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(lo=!0),e.firstContext=null)}function qo(e){var t=e._currentValue;if(dv!==e)if(e={context:e,memoizedValue:t,next:null},jc===null){if(tm===null)throw Error(Tt(308));jc=e,tm.dependencies={lanes:0,firstContext:e}}else jc=jc.next=e;return t}var Eu=null;function gv(e){Eu===null?Eu=[e]:Eu.push(e)}function G5(e,t,r,s){var u=t.interleaved;return u===null?(r.next=r,gv(t)):(r.next=u.next,u.next=r),t.interleaved=r,Ls(e,s)}function Ls(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fl=!1;function yv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H5(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cl(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Wn&2)!==0){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,Ls(e,r)}return u=s.interleaved,u===null?(t.next=t,gv(s)):(t.next=u.next,u.next=t),s.interleaved=t,Ls(e,r)}function Sp(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,nv(e,r)}}function L2(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var u=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?u=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?u=f=t:f=f.next=t}else u=f=t;r={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function nm(e,t,r,s){var u=e.updateQueue;fl=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,l=u.shared.pending;if(l!==null){u.shared.pending=null;var _=l,C=_.next;_.next=null,g===null?f=C:g.next=C,g=_;var S=e.alternate;S!==null&&(S=S.updateQueue,l=S.lastBaseUpdate,l!==g&&(l===null?S.firstBaseUpdate=C:l.next=C,S.lastBaseUpdate=_))}if(f!==null){var E=u.baseState;g=0,S=C=_=null,l=f;do{var T=l.lane,F=l.eventTime;if((s&T)===T){S!==null&&(S=S.next={eventTime:F,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var X=e,Z=l;switch(T=t,F=r,Z.tag){case 1:if(X=Z.payload,typeof X=="function"){E=X.call(F,E,T);break e}E=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=Z.payload,T=typeof X=="function"?X.call(F,E,T):X,T==null)break e;E=Rr({},E,T);break e;case 2:fl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,T=u.effects,T===null?u.effects=[l]:T.push(l))}else F={eventTime:F,lane:T,tag:l.tag,payload:l.payload,callback:l.callback,next:null},S===null?(C=S=F,_=E):S=S.next=F,g|=T;if(l=l.next,l===null){if(l=u.shared.pending,l===null)break;T=l,l=T.next,T.next=null,u.lastBaseUpdate=T,u.shared.pending=null}}while(1);if(S===null&&(_=E),u.baseState=_,u.firstBaseUpdate=C,u.lastBaseUpdate=S,t=u.shared.interleaved,t!==null){u=t;do g|=u.lane,u=u.next;while(u!==t)}else f===null&&(u.shared.lanes=0);Mu|=g,e.lanes=g,e.memoizedState=E}}function O2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],u=s.callback;if(u!==null){if(s.callback=null,s=r,typeof u!="function")throw Error(Tt(191,u));u.call(s)}}}var W5=new Gw.Component().refs;function R1(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Rr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var qm={isMounted:function(e){return(e=e._reactInternals)?ju(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=qi(),u=Al(e),f=ks(s,u);f.payload=t,r!=null&&(f.callback=r),t=Cl(e,f,u),t!==null&&(Ca(t,e,u,s),Sp(t,e,u))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=qi(),u=Al(e),f=ks(s,u);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Cl(e,f,u),t!==null&&(Ca(t,e,u,s),Sp(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=qi(),s=Al(e),u=ks(r,s);u.tag=2,t!=null&&(u.callback=t),t=Cl(e,u,s),t!==null&&(Ca(t,e,s,r),Sp(t,e,s))}};function R2(e,t,r,s,u,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,f,g):t.prototype&&t.prototype.isPureReactComponent?!Nf(r,s)||!Nf(u,f):!0}function Z5(e,t,r){var s=!1,u=kl,f=t.contextType;return typeof f=="object"&&f!==null?f=qo(f):(u=co(t)?Iu:Li.current,s=t.contextTypes,f=(s=s!=null)?nh(e,u):kl),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qm,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),t}function F2(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&qm.enqueueReplaceState(t,t.state,null)}function F1(e,t,r,s){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs=W5,yv(e);var f=t.contextType;typeof f=="object"&&f!==null?u.context=qo(f):(f=co(t)?Iu:Li.current,u.context=nh(e,f)),u.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(R1(e,t,f,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&qm.enqueueReplaceState(u,u.state,null),nm(e,r,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function ef(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Tt(309));var s=r.stateNode}if(!s)throw Error(Tt(147,e));var u=s,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var l=u.refs;l===W5&&(l=u.refs={}),g===null?delete l[f]:l[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(Tt(284));if(!r._owner)throw Error(Tt(290,e))}return e}function tp(e,t){throw e=Object.prototype.toString.call(t),Error(Tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function B2(e){var t=e._init;return t(e._payload)}function X5(e){function t(H,V){if(e){var B=H.deletions;B===null?(H.deletions=[V],H.flags|=16):B.push(V)}}function r(H,V){if(!e)return null;for(;V!==null;)t(H,V),V=V.sibling;return null}function s(H,V){for(H=new Map;V!==null;)V.key!==null?H.set(V.key,V):H.set(V.index,V),V=V.sibling;return H}function u(H,V){return H=Il(H,V),H.index=0,H.sibling=null,H}function f(H,V,B){return H.index=B,e?(B=H.alternate,B!==null?(B=B.index,B<V?(H.flags|=2,V):B):(H.flags|=2,V)):(H.flags|=1048576,V)}function g(H){return e&&H.alternate===null&&(H.flags|=2),H}function l(H,V,B,ae){return V===null||V.tag!==6?(V=Fg(B,H.mode,ae),V.return=H,V):(V=u(V,B),V.return=H,V)}function _(H,V,B,ae){var G=B.type;return G===kc?S(H,V,B.props.children,ae,B.key):V!==null&&(V.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===hl&&B2(G)===V.type)?(ae=u(V,B.props),ae.ref=ef(H,V,B),ae.return=H,ae):(ae=kp(B.type,B.key,B.props,null,H.mode,ae),ae.ref=ef(H,V,B),ae.return=H,ae)}function C(H,V,B,ae){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Bg(B,H.mode,ae),V.return=H,V):(V=u(V,B.children||[]),V.return=H,V)}function S(H,V,B,ae,G){return V===null||V.tag!==7?(V=Au(B,H.mode,ae,G),V.return=H,V):(V=u(V,B),V.return=H,V)}function E(H,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Fg(""+V,H.mode,B),V.return=H,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Gd:return B=kp(V.type,V.key,V.props,null,H.mode,B),B.ref=ef(H,null,V),B.return=H,B;case Pc:return V=Bg(V,H.mode,B),V.return=H,V;case hl:var ae=V._init;return E(H,ae(V._payload),B)}if(af(V)||Kh(V))return V=Au(V,H.mode,B,null),V.return=H,V;tp(H,V)}return null}function T(H,V,B,ae){var G=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return G!==null?null:l(H,V,""+B,ae);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Gd:return B.key===G?_(H,V,B,ae):null;case Pc:return B.key===G?C(H,V,B,ae):null;case hl:return G=B._init,T(H,V,G(B._payload),ae)}if(af(B)||Kh(B))return G!==null?null:S(H,V,B,ae,null);tp(H,B)}return null}function F(H,V,B,ae,G){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return H=H.get(B)||null,l(V,H,""+ae,G);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Gd:return H=H.get(ae.key===null?B:ae.key)||null,_(V,H,ae,G);case Pc:return H=H.get(ae.key===null?B:ae.key)||null,C(V,H,ae,G);case hl:var j=ae._init;return F(H,V,B,j(ae._payload),G)}if(af(ae)||Kh(ae))return H=H.get(B)||null,S(V,H,ae,G,null);tp(V,ae)}return null}function X(H,V,B,ae){for(var G=null,j=null,w=V,k=V=0,U=null;w!==null&&k<B.length;k++){w.index>k?(U=w,w=null):U=w.sibling;var K=T(H,w,B[k],ae);if(K===null){w===null&&(w=U);break}e&&w&&K.alternate===null&&t(H,w),V=f(K,V,k),j===null?G=K:j.sibling=K,j=K,w=U}if(k===B.length)return r(H,w),Ar&&xu(H,k),G;if(w===null){for(;k<B.length;k++)w=E(H,B[k],ae),w!==null&&(V=f(w,V,k),j===null?G=w:j.sibling=w,j=w);return Ar&&xu(H,k),G}for(w=s(H,w);k<B.length;k++)U=F(w,H,k,B[k],ae),U!==null&&(e&&U.alternate!==null&&w.delete(U.key===null?k:U.key),V=f(U,V,k),j===null?G=U:j.sibling=U,j=U);return e&&w.forEach(function(Y){return t(H,Y)}),Ar&&xu(H,k),G}function Z(H,V,B,ae){var G=Kh(B);if(typeof G!="function")throw Error(Tt(150));if(B=G.call(B),B==null)throw Error(Tt(151));for(var j=G=null,w=V,k=V=0,U=null,K=B.next();w!==null&&!K.done;k++,K=B.next()){w.index>k?(U=w,w=null):U=w.sibling;var Y=T(H,w,K.value,ae);if(Y===null){w===null&&(w=U);break}e&&w&&Y.alternate===null&&t(H,w),V=f(Y,V,k),j===null?G=Y:j.sibling=Y,j=Y,w=U}if(K.done)return r(H,w),Ar&&xu(H,k),G;if(w===null){for(;!K.done;k++,K=B.next())K=E(H,K.value,ae),K!==null&&(V=f(K,V,k),j===null?G=K:j.sibling=K,j=K);return Ar&&xu(H,k),G}for(w=s(H,w);!K.done;k++,K=B.next())K=F(w,H,k,K.value,ae),K!==null&&(e&&K.alternate!==null&&w.delete(K.key===null?k:K.key),V=f(K,V,k),j===null?G=K:j.sibling=K,j=K);return e&&w.forEach(function(de){return t(H,de)}),Ar&&xu(H,k),G}function ue(H,V,B,ae){if(typeof B=="object"&&B!==null&&B.type===kc&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Gd:e:{for(var G=B.key,j=V;j!==null;){if(j.key===G){if(G=B.type,G===kc){if(j.tag===7){r(H,j.sibling),V=u(j,B.props.children),V.return=H,H=V;break e}}else if(j.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===hl&&B2(G)===j.type){r(H,j.sibling),V=u(j,B.props),V.ref=ef(H,j,B),V.return=H,H=V;break e}r(H,j);break}else t(H,j);j=j.sibling}B.type===kc?(V=Au(B.props.children,H.mode,ae,B.key),V.return=H,H=V):(ae=kp(B.type,B.key,B.props,null,H.mode,ae),ae.ref=ef(H,V,B),ae.return=H,H=ae)}return g(H);case Pc:e:{for(j=B.key;V!==null;){if(V.key===j)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){r(H,V.sibling),V=u(V,B.children||[]),V.return=H,H=V;break e}else{r(H,V);break}else t(H,V);V=V.sibling}V=Bg(B,H.mode,ae),V.return=H,H=V}return g(H);case hl:return j=B._init,ue(H,V,j(B._payload),ae)}if(af(B))return X(H,V,B,ae);if(Kh(B))return Z(H,V,B,ae);tp(H,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(r(H,V.sibling),V=u(V,B),V.return=H,H=V):(r(H,V),V=Fg(B,H.mode,ae),V.return=H,H=V),g(H)):r(H,V)}return ue}var ih=X5(!0),K5=X5(!1),od={},Ja=Rl(od),Gf=Rl(od),Hf=Rl(od);function Su(e){if(e===od)throw Error(Tt(174));return e}function vv(e,t){switch(vr(Hf,t),vr(Gf,e),vr(Ja,od),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:p1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=p1(t,e)}Sr(Ja),vr(Ja,t)}function oh(){Sr(Ja),Sr(Gf),Sr(Hf)}function Y5(e){Su(Hf.current);var t=Su(Ja.current),r=p1(t,e.type);t!==r&&(vr(Gf,e),vr(Ja,r))}function xv(e){Gf.current===e&&(Sr(Ja),Sr(Gf))}var zr=Rl(0);function rm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kg=[];function _v(){for(var e=0;e<kg.length;e++)kg[e]._workInProgressVersionPrimary=null;kg.length=0}var Cp=Ds.ReactCurrentDispatcher,Mg=Ds.ReactCurrentBatchConfig,ku=0,Or=null,ni=null,li=null,im=!1,wf=!1,Wf=0,I7=0;function Ii(){throw Error(Tt(321))}function bv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Aa(e[r],t[r]))return!1;return!0}function wv(e,t,r,s,u,f){if(ku=f,Or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cp.current=e===null||e.memoizedState===null?z7:L7,e=r(s,u),wf){f=0;do{if(wf=!1,Wf=0,25<=f)throw Error(Tt(301));f+=1,li=ni=null,t.updateQueue=null,Cp.current=O7,e=r(s,u)}while(wf)}if(Cp.current=om,t=ni!==null&&ni.next!==null,ku=0,li=ni=Or=null,im=!1,t)throw Error(Tt(300));return e}function Ev(){var e=Wf!==0;return Wf=0,e}function Ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Or.memoizedState=li=e:li=li.next=e,li}function Jo(){if(ni===null){var e=Or.alternate;e=e!==null?e.memoizedState:null}else e=ni.next;var t=li===null?Or.memoizedState:li.next;if(t!==null)li=t,ni=e;else{if(e===null)throw Error(Tt(310));ni=e,e={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},li===null?Or.memoizedState=li=e:li=li.next=e}return li}function Zf(e,t){return typeof t=="function"?t(e):t}function zg(e){var t=Jo(),r=t.queue;if(r===null)throw Error(Tt(311));r.lastRenderedReducer=e;var s=ni,u=s.baseQueue,f=r.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}s.baseQueue=u=f,r.pending=null}if(u!==null){f=u.next,s=s.baseState;var l=g=null,_=null,C=f;do{var S=C.lane;if((ku&S)===S)_!==null&&(_=_.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),s=C.hasEagerState?C.eagerState:e(s,C.action);else{var E={lane:S,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};_===null?(l=_=E,g=s):_=_.next=E,Or.lanes|=S,Mu|=S}C=C.next}while(C!==null&&C!==f);_===null?g=s:_.next=l,Aa(s,t.memoizedState)||(lo=!0),t.memoizedState=s,t.baseState=g,t.baseQueue=_,r.lastRenderedState=s}if(e=r.interleaved,e!==null){u=e;do f=u.lane,Or.lanes|=f,Mu|=f,u=u.next;while(u!==e)}else u===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Lg(e){var t=Jo(),r=t.queue;if(r===null)throw Error(Tt(311));r.lastRenderedReducer=e;var s=r.dispatch,u=r.pending,f=t.memoizedState;if(u!==null){r.pending=null;var g=u=u.next;do f=e(f,g.action),g=g.next;while(g!==u);Aa(f,t.memoizedState)||(lo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,s]}function q5(){}function J5(e,t){var r=Or,s=Jo(),u=t(),f=!Aa(s.memoizedState,u);if(f&&(s.memoizedState=u,lo=!0),s=s.queue,Sv(t3.bind(null,r,s,e),[e]),s.getSnapshot!==t||f||li!==null&&li.memoizedState.tag&1){if(r.flags|=2048,Xf(9,e3.bind(null,r,s,u,t),void 0,null),ui===null)throw Error(Tt(349));(ku&30)!==0||Q5(r,t,u)}return u}function Q5(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Or.updateQueue,t===null?(t={lastEffect:null,stores:null},Or.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function e3(e,t,r,s){t.value=r,t.getSnapshot=s,n3(t)&&r3(e)}function t3(e,t,r){return r(function(){n3(t)&&r3(e)})}function n3(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Aa(e,r)}catch{return!0}}function r3(e){var t=Ls(e,1);t!==null&&Ca(t,e,1,-1)}function j2(e){var t=Ha();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zf,lastRenderedState:e},t.queue=e,e=e.dispatch=M7.bind(null,Or,e),[t.memoizedState,e]}function Xf(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Or.updateQueue,t===null?(t={lastEffect:null,stores:null},Or.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function i3(){return Jo().memoizedState}function Tp(e,t,r,s){var u=Ha();Or.flags|=e,u.memoizedState=Xf(1|t,r,void 0,s===void 0?null:s)}function Jm(e,t,r,s){var u=Jo();s=s===void 0?null:s;var f=void 0;if(ni!==null){var g=ni.memoizedState;if(f=g.destroy,s!==null&&bv(s,g.deps)){u.memoizedState=Xf(t,r,f,s);return}}Or.flags|=e,u.memoizedState=Xf(1|t,r,f,s)}function D2(e,t){return Tp(8390656,8,e,t)}function Sv(e,t){return Jm(2048,8,e,t)}function o3(e,t){return Jm(4,2,e,t)}function a3(e,t){return Jm(4,4,e,t)}function s3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function l3(e,t,r){return r=r!=null?r.concat([e]):null,Jm(4,4,s3.bind(null,t,e),r)}function Cv(){}function u3(e,t){var r=Jo();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&bv(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function c3(e,t){var r=Jo();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&bv(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function h3(e,t,r){return(ku&21)===0?(e.baseState&&(e.baseState=!1,lo=!0),e.memoizedState=r):(Aa(r,t)||(r=p5(),Or.lanes|=r,Mu|=r,e.baseState=!0),t)}function P7(e,t){var r=tr;tr=r!==0&&4>r?r:4,e(!0);var s=Mg.transition;Mg.transition={};try{e(!1),t()}finally{tr=r,Mg.transition=s}}function f3(){return Jo().memoizedState}function k7(e,t,r){var s=Al(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},d3(e))p3(t,r);else if(r=G5(e,t,r,s),r!==null){var u=qi();Ca(r,e,s,u),m3(r,t,s)}}function M7(e,t,r){var s=Al(e),u={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(d3(e))p3(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,l=f(g,r);if(u.hasEagerState=!0,u.eagerState=l,Aa(l,g)){var _=t.interleaved;_===null?(u.next=u,gv(t)):(u.next=_.next,_.next=u),t.interleaved=u;return}}catch{}finally{}r=G5(e,t,u,s),r!==null&&(u=qi(),Ca(r,e,s,u),m3(r,t,s))}}function d3(e){var t=e.alternate;return e===Or||t!==null&&t===Or}function p3(e,t){wf=im=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function m3(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,nv(e,r)}}var om={readContext:qo,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useInsertionEffect:Ii,useLayoutEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useMutableSource:Ii,useSyncExternalStore:Ii,useId:Ii,unstable_isNewReconciler:!1},z7={readContext:qo,useCallback:function(e,t){return Ha().memoizedState=[e,t===void 0?null:t],e},useContext:qo,useEffect:D2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Tp(4194308,4,s3.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Tp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tp(4,2,e,t)},useMemo:function(e,t){var r=Ha();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Ha();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=k7.bind(null,Or,e),[s.memoizedState,e]},useRef:function(e){var t=Ha();return e={current:e},t.memoizedState=e},useState:j2,useDebugValue:Cv,useDeferredValue:function(e){return Ha().memoizedState=e},useTransition:function(){var e=j2(!1),t=e[0];return e=P7.bind(null,e[1]),Ha().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Or,u=Ha();if(Ar){if(r===void 0)throw Error(Tt(407));r=r()}else{if(r=t(),ui===null)throw Error(Tt(349));(ku&30)!==0||Q5(s,t,r)}u.memoizedState=r;var f={value:r,getSnapshot:t};return u.queue=f,D2(t3.bind(null,s,f,e),[e]),s.flags|=2048,Xf(9,e3.bind(null,s,f,r,t),void 0,null),r},useId:function(){var e=Ha(),t=ui.identifierPrefix;if(Ar){var r=Ps,s=Is;r=(s&~(1<<32-Sa(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Wf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=I7++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},L7={readContext:qo,useCallback:u3,useContext:qo,useEffect:Sv,useImperativeHandle:l3,useInsertionEffect:o3,useLayoutEffect:a3,useMemo:c3,useReducer:zg,useRef:i3,useState:function(){return zg(Zf)},useDebugValue:Cv,useDeferredValue:function(e){var t=Jo();return h3(t,ni.memoizedState,e)},useTransition:function(){var e=zg(Zf)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:q5,useSyncExternalStore:J5,useId:f3,unstable_isNewReconciler:!1},O7={readContext:qo,useCallback:u3,useContext:qo,useEffect:Sv,useImperativeHandle:l3,useInsertionEffect:o3,useLayoutEffect:a3,useMemo:c3,useReducer:Lg,useRef:i3,useState:function(){return Lg(Zf)},useDebugValue:Cv,useDeferredValue:function(e){var t=Jo();return ni===null?t.memoizedState=e:h3(t,ni.memoizedState,e)},useTransition:function(){var e=Lg(Zf)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:q5,useSyncExternalStore:J5,useId:f3,unstable_isNewReconciler:!1};function ah(e,t){try{var r="",s=t;do r+=l8(s),s=s.return;while(s);var u=r}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:u,digest:null}}function Og(e,t,r){return{value:e,source:null,stack:r!=null?r:null,digest:t!=null?t:null}}function B1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var R7=typeof WeakMap=="function"?WeakMap:Map;function g3(e,t,r){r=ks(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){sm||(sm=!0,Z1=s),B1(e,t)},r}function y3(e,t,r){r=ks(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=t.value;r.payload=function(){return s(u)},r.callback=function(){B1(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){B1(e,t),typeof s!="function"&&(Tl===null?Tl=new Set([this]):Tl.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function N2(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new R7;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(r)||(u.add(r),e=K7.bind(null,e,t,r),t.then(e,e))}function U2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $2(e,t,r,s,u){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ks(-1,1),t.tag=2,Cl(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var F7=Ds.ReactCurrentOwner,lo=!1;function Zi(e,t,r,s){t.child=e===null?K5(t,null,r,s):ih(t,e.child,r,s)}function V2(e,t,r,s,u){r=r.render;var f=t.ref;return Yc(t,u),s=wv(e,t,r,s,f,u),r=Ev(),e!==null&&!lo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Os(e,t,u)):(Ar&&r&&cv(t),t.flags|=1,Zi(e,t,s,u),t.child)}function G2(e,t,r,s,u){if(e===null){var f=r.type;return typeof f=="function"&&!Lv(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,v3(e,t,f,s,u)):(e=kp(r.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&u)===0){var g=f.memoizedProps;if(r=r.compare,r=r!==null?r:Nf,r(g,s)&&e.ref===t.ref)return Os(e,t,u)}return t.flags|=1,e=Il(f,s),e.ref=t.ref,e.return=t,t.child=e}function v3(e,t,r,s,u){if(e!==null){var f=e.memoizedProps;if(Nf(f,s)&&e.ref===t.ref)if(lo=!1,t.pendingProps=s=f,(e.lanes&u)!==0)(e.flags&131072)!==0&&(lo=!0);else return t.lanes=e.lanes,Os(e,t,u)}return j1(e,t,r,s,u)}function x3(e,t,r){var s=t.pendingProps,u=s.children,f=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vr(Nc,bo),bo|=r;else{if((r&1073741824)===0)return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vr(Nc,bo),bo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=f!==null?f.baseLanes:r,vr(Nc,bo),bo|=s}else f!==null?(s=f.baseLanes|r,t.memoizedState=null):s=r,vr(Nc,bo),bo|=s;return Zi(e,t,u,r),t.child}function _3(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function j1(e,t,r,s,u){var f=co(r)?Iu:Li.current;return f=nh(t,f),Yc(t,u),r=wv(e,t,r,s,f,u),s=Ev(),e!==null&&!lo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Os(e,t,u)):(Ar&&s&&cv(t),t.flags|=1,Zi(e,t,r,u),t.child)}function H2(e,t,r,s,u){if(co(r)){var f=!0;qp(t)}else f=!1;if(Yc(t,u),t.stateNode===null)Ap(e,t),Z5(t,r,s),F1(t,r,s,u),s=!0;else if(e===null){var g=t.stateNode,l=t.memoizedProps;g.props=l;var _=g.context,C=r.contextType;typeof C=="object"&&C!==null?C=qo(C):(C=co(r)?Iu:Li.current,C=nh(t,C));var S=r.getDerivedStateFromProps,E=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function";E||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==s||_!==C)&&F2(t,g,s,C),fl=!1;var T=t.memoizedState;g.state=T,nm(t,s,g,u),_=t.memoizedState,l!==s||T!==_||uo.current||fl?(typeof S=="function"&&(R1(t,r,S,s),_=t.memoizedState),(l=fl||R2(t,r,l,s,T,_,C))?(E||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=_),g.props=s,g.state=_,g.context=C,s=l):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{g=t.stateNode,H5(e,t),l=t.memoizedProps,C=t.type===t.elementType?l:ya(t.type,l),g.props=C,E=t.pendingProps,T=g.context,_=r.contextType,typeof _=="object"&&_!==null?_=qo(_):(_=co(r)?Iu:Li.current,_=nh(t,_));var F=r.getDerivedStateFromProps;(S=typeof F=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==E||T!==_)&&F2(t,g,s,_),fl=!1,T=t.memoizedState,g.state=T,nm(t,s,g,u);var X=t.memoizedState;l!==E||T!==X||uo.current||fl?(typeof F=="function"&&(R1(t,r,F,s),X=t.memoizedState),(C=fl||R2(t,r,C,s,T,X,_)||!1)?(S||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(s,X,_),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(s,X,_)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=X),g.props=s,g.state=X,g.context=_,s=C):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),s=!1)}return D1(e,t,r,s,f,u)}function D1(e,t,r,s,u,f){_3(e,t);var g=(t.flags&128)!==0;if(!s&&!g)return u&&k2(t,r,!1),Os(e,t,f);s=t.stateNode,F7.current=t;var l=g&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&g?(t.child=ih(t,e.child,null,f),t.child=ih(t,null,l,f)):Zi(e,t,l,f),t.memoizedState=s.state,u&&k2(t,r,!0),t.child}function b3(e){var t=e.stateNode;t.pendingContext?P2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&P2(e,t.context,!1),vv(e,t.containerInfo)}function W2(e,t,r,s,u){return rh(),fv(u),t.flags|=256,Zi(e,t,r,s),t.child}var N1={dehydrated:null,treeContext:null,retryLane:0};function U1(e){return{baseLanes:e,cachePool:null,transitions:null}}function w3(e,t,r){var s=t.pendingProps,u=zr.current,f=!1,g=(t.flags&128)!==0,l;if((l=g)||(l=e!==null&&e.memoizedState===null?!1:(u&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),vr(zr,u&1),e===null)return L1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=s.children,e=s.fallback,f?(s=t.mode,f=t.child,g={mode:"hidden",children:g},(s&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=t0(g,s,0,null),e=Au(e,s,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=U1(r),t.memoizedState=N1,e):Tv(t,g));if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null))return B7(e,t,g,s,l,u,r);if(f){f=s.fallback,g=t.mode,u=e.child,l=u.sibling;var _={mode:"hidden",children:s.children};return(g&1)===0&&t.child!==u?(s=t.child,s.childLanes=0,s.pendingProps=_,t.deletions=null):(s=Il(u,_),s.subtreeFlags=u.subtreeFlags&14680064),l!==null?f=Il(l,f):(f=Au(f,g,r,null),f.flags|=2),f.return=t,s.return=t,s.sibling=f,t.child=s,s=f,f=t.child,g=e.child.memoizedState,g=g===null?U1(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~r,t.memoizedState=N1,s}return f=e.child,e=f.sibling,s=Il(f,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Tv(e,t){return t=t0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function np(e,t,r,s){return s!==null&&fv(s),ih(t,e.child,null,r),e=Tv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function B7(e,t,r,s,u,f,g){if(r)return t.flags&256?(t.flags&=-257,s=Og(Error(Tt(422))),np(e,t,g,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=s.fallback,u=t.mode,s=t0({mode:"visible",children:s.children},u,0,null),f=Au(f,u,g,null),f.flags|=2,s.return=t,f.return=t,s.sibling=f,t.child=s,(t.mode&1)!==0&&ih(t,e.child,null,g),t.child.memoizedState=U1(g),t.memoizedState=N1,f);if((t.mode&1)===0)return np(e,t,g,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var l=s.dgst;return s=l,f=Error(Tt(419)),s=Og(f,s,void 0),np(e,t,g,s)}if(l=(g&e.childLanes)!==0,lo||l){if(s=ui,s!==null){switch(g&-g){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(s.suspendedLanes|g))!==0?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,Ls(e,u),Ca(s,e,u,-1))}return zv(),s=Og(Error(Tt(421))),np(e,t,g,s)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=Y7.bind(null,e),u._reactRetry=t,null):(e=f.treeContext,So=Sl(u.nextSibling),Co=t,Ar=!0,xa=null,e!==null&&(Go[Ho++]=Is,Go[Ho++]=Ps,Go[Ho++]=Pu,Is=e.id,Ps=e.overflow,Pu=t),t=Tv(t,s.children),t.flags|=4096,t)}function Z2(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),O1(e.return,t,r)}function Rg(e,t,r,s,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=r,f.tailMode=u)}function E3(e,t,r){var s=t.pendingProps,u=s.revealOrder,f=s.tail;if(Zi(e,t,s.children,r),s=zr.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Z2(e,r,t);else if(e.tag===19)Z2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(vr(zr,s),(t.mode&1)===0)t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&rm(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),Rg(t,!1,u,r,f);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&rm(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}Rg(t,!0,r,null,f);break;case"together":Rg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ap(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Os(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mu|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Tt(153));if(t.child!==null){for(e=t.child,r=Il(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Il(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function j7(e,t,r){switch(t.tag){case 3:b3(t),rh();break;case 5:Y5(t);break;case 1:co(t.type)&&qp(t);break;case 4:vv(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,u=t.memoizedProps.value;vr(em,s._currentValue),s._currentValue=u;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(vr(zr,zr.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?w3(e,t,r):(vr(zr,zr.current&1),e=Os(e,t,r),e!==null?e.sibling:null);vr(zr,zr.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return E3(e,t,r);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),vr(zr,zr.current),s)break;return null;case 22:case 23:return t.lanes=0,x3(e,t,r)}return Os(e,t,r)}var S3,$1,C3,T3;S3=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};$1=function(){};C3=function(e,t,r,s){var u=e.memoizedProps;if(u!==s){e=t.stateNode,Su(Ja.current);var f=null;switch(r){case"input":u=c1(e,u),s=c1(e,s),f=[];break;case"select":u=Rr({},u,{value:void 0}),s=Rr({},s,{value:void 0}),f=[];break;case"textarea":u=d1(e,u),s=d1(e,s),f=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Kp)}m1(r,s);var g;r=null;for(C in u)if(!s.hasOwnProperty(C)&&u.hasOwnProperty(C)&&u[C]!=null)if(C==="style"){var l=u[C];for(g in l)l.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(Lf.hasOwnProperty(C)?f||(f=[]):(f=f||[]).push(C,null));for(C in s){var _=s[C];if(l=u!=null?u[C]:void 0,s.hasOwnProperty(C)&&_!==l&&(_!=null||l!=null))if(C==="style")if(l){for(g in l)!l.hasOwnProperty(g)||_&&_.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in _)_.hasOwnProperty(g)&&l[g]!==_[g]&&(r||(r={}),r[g]=_[g])}else r||(f||(f=[]),f.push(C,r)),r=_;else C==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,l=l?l.__html:void 0,_!=null&&l!==_&&(f=f||[]).push(C,_)):C==="children"?typeof _!="string"&&typeof _!="number"||(f=f||[]).push(C,""+_):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(Lf.hasOwnProperty(C)?(_!=null&&C==="onScroll"&&Er("scroll",e),f||l===_||(f=[])):(f=f||[]).push(C,_))}r&&(f=f||[]).push("style",r);var C=f;(t.updateQueue=C)&&(t.flags|=4)}};T3=function(e,t,r,s){r!==s&&(t.flags|=4)};function tf(e,t){if(!Ar)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Pi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var u=e.child;u!==null;)r|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)r|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function D7(e,t,r){var s=t.pendingProps;switch(hv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(t),null;case 1:return co(t.type)&&Yp(),Pi(t),null;case 3:return s=t.stateNode,oh(),Sr(uo),Sr(Li),_v(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ep(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,xa!==null&&(Y1(xa),xa=null))),$1(e,t),Pi(t),null;case 5:xv(t);var u=Su(Hf.current);if(r=t.type,e!==null&&t.stateNode!=null)C3(e,t,r,s,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Tt(166));return Pi(t),null}if(e=Su(Ja.current),ep(t)){s=t.stateNode,r=t.type;var f=t.memoizedProps;switch(s[Wa]=t,s[Vf]=f,e=(t.mode&1)!==0,r){case"dialog":Er("cancel",s),Er("close",s);break;case"iframe":case"object":case"embed":Er("load",s);break;case"video":case"audio":for(u=0;u<lf.length;u++)Er(lf[u],s);break;case"source":Er("error",s);break;case"img":case"image":case"link":Er("error",s),Er("load",s);break;case"details":Er("toggle",s);break;case"input":n2(s,f),Er("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!f.multiple},Er("invalid",s);break;case"textarea":i2(s,f),Er("invalid",s)}m1(r,f),u=null;for(var g in f)if(f.hasOwnProperty(g)){var l=f[g];g==="children"?typeof l=="string"?s.textContent!==l&&(f.suppressHydrationWarning!==!0&&Qd(s.textContent,l,e),u=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&Qd(s.textContent,l,e),u=["children",""+l]):Lf.hasOwnProperty(g)&&l!=null&&g==="onScroll"&&Er("scroll",s)}switch(r){case"input":Hd(s),r2(s,f,!0);break;case"textarea":Hd(s),o2(s);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(s.onclick=Kp)}s=u,t.updateQueue=s,s!==null&&(t.flags|=4)}else{g=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qw(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=g.createElement(r,{is:s.is}):(e=g.createElement(r),r==="select"&&(g=e,s.multiple?g.multiple=!0:s.size&&(g.size=s.size))):e=g.createElementNS(e,r),e[Wa]=t,e[Vf]=s,S3(e,t,!1,!1),t.stateNode=e;e:{switch(g=g1(r,s),r){case"dialog":Er("cancel",e),Er("close",e),u=s;break;case"iframe":case"object":case"embed":Er("load",e),u=s;break;case"video":case"audio":for(u=0;u<lf.length;u++)Er(lf[u],e);u=s;break;case"source":Er("error",e),u=s;break;case"img":case"image":case"link":Er("error",e),Er("load",e),u=s;break;case"details":Er("toggle",e),u=s;break;case"input":n2(e,s),u=c1(e,s),Er("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=Rr({},s,{value:void 0}),Er("invalid",e);break;case"textarea":i2(e,s),u=d1(e,s),Er("invalid",e);break;default:u=s}m1(r,u),l=u;for(f in l)if(l.hasOwnProperty(f)){var _=l[f];f==="style"?n5(e,_):f==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&e5(e,_)):f==="children"?typeof _=="string"?(r!=="textarea"||_!=="")&&Of(e,_):typeof _=="number"&&Of(e,""+_):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Lf.hasOwnProperty(f)?_!=null&&f==="onScroll"&&Er("scroll",e):_!=null&&Yy(e,f,_,g))}switch(r){case"input":Hd(e),r2(e,s,!1);break;case"textarea":Hd(e),o2(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Pl(s.value));break;case"select":e.multiple=!!s.multiple,f=s.value,f!=null?Wc(e,!!s.multiple,f,!1):s.defaultValue!=null&&Wc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Kp)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pi(t),null;case 6:if(e&&t.stateNode!=null)T3(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Tt(166));if(r=Su(Hf.current),Su(Ja.current),ep(t)){if(s=t.stateNode,r=t.memoizedProps,s[Wa]=t,(f=s.nodeValue!==r)&&(e=Co,e!==null))switch(e.tag){case 3:Qd(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qd(s.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Wa]=t,t.stateNode=s}return Pi(t),null;case 13:if(Sr(zr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ar&&So!==null&&(t.mode&1)!==0&&(t.flags&128)===0)V5(),rh(),t.flags|=98560,f=!1;else if(f=ep(t),s!==null&&s.dehydrated!==null){if(e===null){if(!f)throw Error(Tt(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Tt(317));f[Wa]=t}else rh(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Pi(t),f=!1}else xa!==null&&(Y1(xa),xa=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(zr.current&1)!==0?ri===0&&(ri=3):zv())),t.updateQueue!==null&&(t.flags|=4),Pi(t),null);case 4:return oh(),$1(e,t),e===null&&Uf(t.stateNode.containerInfo),Pi(t),null;case 10:return mv(t.type._context),Pi(t),null;case 17:return co(t.type)&&Yp(),Pi(t),null;case 19:if(Sr(zr),f=t.memoizedState,f===null)return Pi(t),null;if(s=(t.flags&128)!==0,g=f.rendering,g===null)if(s)tf(f,!1);else{if(ri!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=rm(e),g!==null){for(t.flags|=128,tf(f,!1),s=g.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)f=r,e=s,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return vr(zr,zr.current&1|2),t.child}e=e.sibling}f.tail!==null&&Kr()>sh&&(t.flags|=128,s=!0,tf(f,!1),t.lanes=4194304)}else{if(!s)if(e=rm(g),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),tf(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ar)return Pi(t),null}else 2*Kr()-f.renderingStartTime>sh&&r!==1073741824&&(t.flags|=128,s=!0,tf(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(r=f.last,r!==null?r.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Kr(),t.sibling=null,r=zr.current,vr(zr,s?r&1|2:r&1),t):(Pi(t),null);case 22:case 23:return Mv(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(bo&1073741824)!==0&&(Pi(t),t.subtreeFlags&6&&(t.flags|=8192)):Pi(t),null;case 24:return null;case 25:return null}throw Error(Tt(156,t.tag))}function N7(e,t){switch(hv(t),t.tag){case 1:return co(t.type)&&Yp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oh(),Sr(uo),Sr(Li),_v(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return xv(t),null;case 13:if(Sr(zr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Tt(340));rh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sr(zr),null;case 4:return oh(),null;case 10:return mv(t.type._context),null;case 22:case 23:return Mv(),null;case 24:return null;default:return null}}var rp=!1,Mi=!1,U7=typeof WeakSet=="function"?WeakSet:Set,en=null;function Dc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ur(e,t,s)}else r.current=null}function V1(e,t,r){try{r()}catch(s){Ur(e,t,s)}}var X2=!1;function $7(e,t){if(T1=Wp,e=k5(),uv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var u=s.anchorOffset,f=s.focusNode;s=s.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var g=0,l=-1,_=-1,C=0,S=0,E=e,T=null;t:for(;;){for(var F;E!==r||u!==0&&E.nodeType!==3||(l=g+u),E!==f||s!==0&&E.nodeType!==3||(_=g+s),E.nodeType===3&&(g+=E.nodeValue.length),(F=E.firstChild)!==null;)T=E,E=F;for(;;){if(E===e)break t;if(T===r&&++C===u&&(l=g),T===f&&++S===s&&(_=g),(F=E.nextSibling)!==null)break;E=T,T=E.parentNode}E=F}r=l===-1||_===-1?null:{start:l,end:_}}else r=null}r=r||{start:0,end:0}}else r=null;for(A1={focusedElem:e,selectionRange:r},Wp=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var X=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var Z=X.memoizedProps,ue=X.memoizedState,H=t.stateNode,V=H.getSnapshotBeforeUpdate(t.elementType===t.type?Z:ya(t.type,Z),ue);H.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Tt(163))}}catch(ae){Ur(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return X=X2,X2=!1,X}function Ef(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&V1(t,r,f)}u=u.next}while(u!==s)}}function Qm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function G1(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function A3(e){var t=e.alternate;t!==null&&(e.alternate=null,A3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wa],delete t[Vf],delete t[k1],delete t[S7],delete t[C7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function I3(e){return e.tag===5||e.tag===3||e.tag===4}function K2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||I3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function H1(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Kp));else if(s!==4&&(e=e.child,e!==null))for(H1(e,t,r),e=e.sibling;e!==null;)H1(e,t,r),e=e.sibling}function W1(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(W1(e,t,r),e=e.sibling;e!==null;)W1(e,t,r),e=e.sibling}var yi=null,va=!1;function ul(e,t,r){for(r=r.child;r!==null;)P3(e,t,r),r=r.sibling}function P3(e,t,r){if(qa&&typeof qa.onCommitFiberUnmount=="function")try{qa.onCommitFiberUnmount(Hm,r)}catch{}switch(r.tag){case 5:Mi||Dc(r,t);case 6:var s=yi,u=va;yi=null,ul(e,t,r),yi=s,va=u,yi!==null&&(va?(e=yi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):yi.removeChild(r.stateNode));break;case 18:yi!==null&&(va?(e=yi,r=r.stateNode,e.nodeType===8?Ig(e.parentNode,r):e.nodeType===1&&Ig(e,r),jf(e)):Ig(yi,r.stateNode));break;case 4:s=yi,u=va,yi=r.stateNode.containerInfo,va=!0,ul(e,t,r),yi=s,va=u;break;case 0:case 11:case 14:case 15:if(!Mi&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var f=u,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&V1(r,t,g),u=u.next}while(u!==s)}ul(e,t,r);break;case 1:if(!Mi&&(Dc(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Ur(r,t,l)}ul(e,t,r);break;case 21:ul(e,t,r);break;case 22:r.mode&1?(Mi=(s=Mi)||r.memoizedState!==null,ul(e,t,r),Mi=s):ul(e,t,r);break;default:ul(e,t,r)}}function Y2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new U7),t.forEach(function(s){var u=q7.bind(null,e,s);r.has(s)||(r.add(s),s.then(u,u))})}}function ga(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var u=r[s];try{var f=e,g=t,l=g;e:for(;l!==null;){switch(l.tag){case 5:yi=l.stateNode,va=!1;break e;case 3:yi=l.stateNode.containerInfo,va=!0;break e;case 4:yi=l.stateNode.containerInfo,va=!0;break e}l=l.return}if(yi===null)throw Error(Tt(160));P3(f,g,u),yi=null,va=!1;var _=u.alternate;_!==null&&(_.return=null),u.return=null}catch(C){Ur(u,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)k3(t,e),t=t.sibling}function k3(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ga(t,e),Ga(e),s&4){try{Ef(3,e,e.return),Qm(3,e)}catch(Z){Ur(e,e.return,Z)}try{Ef(5,e,e.return)}catch(Z){Ur(e,e.return,Z)}}break;case 1:ga(t,e),Ga(e),s&512&&r!==null&&Dc(r,r.return);break;case 5:if(ga(t,e),Ga(e),s&512&&r!==null&&Dc(r,r.return),e.flags&32){var u=e.stateNode;try{Of(u,"")}catch(Z){Ur(e,e.return,Z)}}if(s&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,g=r!==null?r.memoizedProps:f,l=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&qw(u,f),g1(l,g);var C=g1(l,f);for(g=0;g<_.length;g+=2){var S=_[g],E=_[g+1];S==="style"?n5(u,E):S==="dangerouslySetInnerHTML"?e5(u,E):S==="children"?Of(u,E):Yy(u,S,E,C)}switch(l){case"input":h1(u,f);break;case"textarea":Jw(u,f);break;case"select":var T=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var F=f.value;F!=null?Wc(u,!!f.multiple,F,!1):T!==!!f.multiple&&(f.defaultValue!=null?Wc(u,!!f.multiple,f.defaultValue,!0):Wc(u,!!f.multiple,f.multiple?[]:"",!1))}u[Vf]=f}catch(Z){Ur(e,e.return,Z)}}break;case 6:if(ga(t,e),Ga(e),s&4){if(e.stateNode===null)throw Error(Tt(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(Z){Ur(e,e.return,Z)}}break;case 3:if(ga(t,e),Ga(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{jf(t.containerInfo)}catch(Z){Ur(e,e.return,Z)}break;case 4:ga(t,e),Ga(e);break;case 13:ga(t,e),Ga(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(Pv=Kr())),s&4&&Y2(e);break;case 22:if(S=r!==null&&r.memoizedState!==null,e.mode&1?(Mi=(C=Mi)||S,ga(t,e),Mi=C):ga(t,e),Ga(e),s&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!S&&(e.mode&1)!==0)for(en=e,S=e.child;S!==null;){for(E=en=S;en!==null;){switch(T=en,F=T.child,T.tag){case 0:case 11:case 14:case 15:Ef(4,T,T.return);break;case 1:Dc(T,T.return);var X=T.stateNode;if(typeof X.componentWillUnmount=="function"){s=T,r=T.return;try{t=s,X.props=t.memoizedProps,X.state=t.memoizedState,X.componentWillUnmount()}catch(Z){Ur(s,r,Z)}}break;case 5:Dc(T,T.return);break;case 22:if(T.memoizedState!==null){J2(E);continue}}F!==null?(F.return=T,en=F):J2(E)}S=S.sibling}e:for(S=null,E=e;;){if(E.tag===5){if(S===null){S=E;try{u=E.stateNode,C?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=E.stateNode,_=E.memoizedProps.style,g=_!=null&&_.hasOwnProperty("display")?_.display:null,l.style.display=t5("display",g))}catch(Z){Ur(e,e.return,Z)}}}else if(E.tag===6){if(S===null)try{E.stateNode.nodeValue=C?"":E.memoizedProps}catch(Z){Ur(e,e.return,Z)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;S===E&&(S=null),E=E.return}S===E&&(S=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ga(t,e),Ga(e),s&4&&Y2(e);break;case 21:break;default:ga(t,e),Ga(e)}}function Ga(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(I3(r)){var s=r;break e}r=r.return}throw Error(Tt(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&(Of(u,""),s.flags&=-33);var f=K2(e);W1(e,f,u);break;case 3:case 4:var g=s.stateNode.containerInfo,l=K2(e);H1(e,l,g);break;default:throw Error(Tt(161))}}catch(_){Ur(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function V7(e,t,r){en=e,M3(e)}function M3(e,t,r){for(var s=(e.mode&1)!==0;en!==null;){var u=en,f=u.child;if(u.tag===22&&s){var g=u.memoizedState!==null||rp;if(!g){var l=u.alternate,_=l!==null&&l.memoizedState!==null||Mi;l=rp;var C=Mi;if(rp=g,(Mi=_)&&!C)for(en=u;en!==null;)g=en,_=g.child,g.tag===22&&g.memoizedState!==null?Q2(u):_!==null?(_.return=g,en=_):Q2(u);for(;f!==null;)en=f,M3(f),f=f.sibling;en=u,rp=l,Mi=C}q2(e)}else(u.subtreeFlags&8772)!==0&&f!==null?(f.return=u,en=f):q2(e)}}function q2(e){for(;en!==null;){var t=en;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Mi||Qm(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Mi)if(r===null)s.componentDidMount();else{var u=t.elementType===t.type?r.memoizedProps:ya(t.type,r.memoizedProps);s.componentDidUpdate(u,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&O2(t,f,s);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}O2(t,g,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&r.focus();break;case"img":_.src&&(r.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var S=C.memoizedState;if(S!==null){var E=S.dehydrated;E!==null&&jf(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Tt(163))}Mi||t.flags&512&&G1(t)}catch(T){Ur(t,t.return,T)}}if(t===e){en=null;break}if(r=t.sibling,r!==null){r.return=t.return,en=r;break}en=t.return}}function J2(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var r=t.sibling;if(r!==null){r.return=t.return,en=r;break}en=t.return}}function Q2(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Qm(4,t)}catch(_){Ur(t,r,_)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var u=t.return;try{s.componentDidMount()}catch(_){Ur(t,u,_)}}var f=t.return;try{G1(t)}catch(_){Ur(t,f,_)}break;case 5:var g=t.return;try{G1(t)}catch(_){Ur(t,g,_)}}}catch(_){Ur(t,t.return,_)}if(t===e){en=null;break}var l=t.sibling;if(l!==null){l.return=t.return,en=l;break}en=t.return}}var G7=Math.ceil,am=Ds.ReactCurrentDispatcher,Av=Ds.ReactCurrentOwner,Yo=Ds.ReactCurrentBatchConfig,Wn=0,ui=null,Jr=null,xi=0,bo=0,Nc=Rl(0),ri=0,Kf=null,Mu=0,e0=0,Iv=0,Sf=null,ao=null,Pv=0,sh=1/0,Cs=null,sm=!1,Z1=null,Tl=null,ip=!1,xl=null,lm=0,Cf=0,X1=null,Ip=-1,Pp=0;function qi(){return(Wn&6)!==0?Kr():Ip!==-1?Ip:Ip=Kr()}function Al(e){return(e.mode&1)===0?1:(Wn&2)!==0&&xi!==0?xi&-xi:A7.transition!==null?(Pp===0&&(Pp=p5()),Pp):(e=tr,e!==0||(e=window.event,e=e===void 0?16:b5(e.type)),e)}function Ca(e,t,r,s){if(50<Cf)throw Cf=0,X1=null,Error(Tt(185));nd(e,r,s),((Wn&2)===0||e!==ui)&&(e===ui&&((Wn&2)===0&&(e0|=r),ri===4&&gl(e,xi)),ho(e,s),r===1&&Wn===0&&(t.mode&1)===0&&(sh=Kr()+500,Ym&&Fl()))}function ho(e,t){var r=e.callbackNode;A8(e,t);var s=Hp(e,e===ui?xi:0);if(s===0)r!==null&&l2(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&l2(r),t===1)e.tag===0?T7(eb.bind(null,e)):N5(eb.bind(null,e)),w7(function(){(Wn&6)===0&&Fl()}),r=null;else{switch(m5(s)){case 1:r=tv;break;case 4:r=f5;break;case 16:r=Gp;break;case 536870912:r=d5;break;default:r=Gp}r=D3(r,z3.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function z3(e,t){if(Ip=-1,Pp=0,(Wn&6)!==0)throw Error(Tt(327));var r=e.callbackNode;if(qc()&&e.callbackNode!==r)return null;var s=Hp(e,e===ui?xi:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=um(e,s);else{t=s;var u=Wn;Wn|=2;var f=O3();(ui!==e||xi!==t)&&(Cs=null,sh=Kr()+500,Tu(e,t));do try{Z7();break}catch(l){L3(e,l)}while(1);pv(),am.current=f,Wn=u,Jr!==null?t=0:(ui=null,xi=0,t=ri)}if(t!==0){if(t===2&&(u=b1(e),u!==0&&(s=u,t=K1(e,u))),t===1)throw r=Kf,Tu(e,0),gl(e,s),ho(e,Kr()),r;if(t===6)gl(e,s);else{if(u=e.current.alternate,(s&30)===0&&!H7(u)&&(t=um(e,s),t===2&&(f=b1(e),f!==0&&(s=f,t=K1(e,f))),t===1))throw r=Kf,Tu(e,0),gl(e,s),ho(e,Kr()),r;switch(e.finishedWork=u,e.finishedLanes=s,t){case 0:case 1:throw Error(Tt(345));case 2:_u(e,ao,Cs);break;case 3:if(gl(e,s),(s&130023424)===s&&(t=Pv+500-Kr(),10<t)){if(Hp(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){qi(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=P1(_u.bind(null,e,ao,Cs),t);break}_u(e,ao,Cs);break;case 4:if(gl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,u=-1;0<s;){var g=31-Sa(s);f=1<<g,g=t[g],g>u&&(u=g),s&=~f}if(s=u,s=Kr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*G7(s/1960))-s,10<s){e.timeoutHandle=P1(_u.bind(null,e,ao,Cs),s);break}_u(e,ao,Cs);break;case 5:_u(e,ao,Cs);break;default:throw Error(Tt(329))}}}return ho(e,Kr()),e.callbackNode===r?z3.bind(null,e):null}function K1(e,t){var r=Sf;return e.current.memoizedState.isDehydrated&&(Tu(e,t).flags|=256),e=um(e,t),e!==2&&(t=ao,ao=r,t!==null&&Y1(t)),e}function Y1(e){ao===null?ao=e:ao.push.apply(ao,e)}function H7(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var u=r[s],f=u.getSnapshot;u=u.value;try{if(!Aa(f(),u))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gl(e,t){for(t&=~Iv,t&=~e0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Sa(t),s=1<<r;e[r]=-1,t&=~s}}function eb(e){if((Wn&6)!==0)throw Error(Tt(327));qc();var t=Hp(e,0);if((t&1)===0)return ho(e,Kr()),null;var r=um(e,t);if(e.tag!==0&&r===2){var s=b1(e);s!==0&&(t=s,r=K1(e,s))}if(r===1)throw r=Kf,Tu(e,0),gl(e,t),ho(e,Kr()),r;if(r===6)throw Error(Tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,ao,Cs),ho(e,Kr()),null}function kv(e,t){var r=Wn;Wn|=1;try{return e(t)}finally{Wn=r,Wn===0&&(sh=Kr()+500,Ym&&Fl())}}function zu(e){xl!==null&&xl.tag===0&&(Wn&6)===0&&qc();var t=Wn;Wn|=1;var r=Yo.transition,s=tr;try{if(Yo.transition=null,tr=1,e)return e()}finally{tr=s,Yo.transition=r,Wn=t,(Wn&6)===0&&Fl()}}function Mv(){bo=Nc.current,Sr(Nc)}function Tu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,b7(r)),Jr!==null)for(r=Jr.return;r!==null;){var s=r;switch(hv(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Yp();break;case 3:oh(),Sr(uo),Sr(Li),_v();break;case 5:xv(s);break;case 4:oh();break;case 13:Sr(zr);break;case 19:Sr(zr);break;case 10:mv(s.type._context);break;case 22:case 23:Mv()}r=r.return}if(ui=e,Jr=e=Il(e.current,null),xi=bo=t,ri=0,Kf=null,Iv=e0=Mu=0,ao=Sf=null,Eu!==null){for(t=0;t<Eu.length;t++)if(r=Eu[t],s=r.interleaved,s!==null){r.interleaved=null;var u=s.next,f=r.pending;if(f!==null){var g=f.next;f.next=u,s.next=g}r.pending=s}Eu=null}return e}function L3(e,t){do{var r=Jr;try{if(pv(),Cp.current=om,im){for(var s=Or.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}im=!1}if(ku=0,li=ni=Or=null,wf=!1,Wf=0,Av.current=null,r===null||r.return===null){ri=1,Kf=t,Jr=null;break}e:{var f=e,g=r.return,l=r,_=t;if(t=xi,l.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var C=_,S=l,E=S.tag;if((S.mode&1)===0&&(E===0||E===11||E===15)){var T=S.alternate;T?(S.updateQueue=T.updateQueue,S.memoizedState=T.memoizedState,S.lanes=T.lanes):(S.updateQueue=null,S.memoizedState=null)}var F=U2(g);if(F!==null){F.flags&=-257,$2(F,g,l,f,t),F.mode&1&&N2(f,C,t),t=F,_=C;var X=t.updateQueue;if(X===null){var Z=new Set;Z.add(_),t.updateQueue=Z}else X.add(_);break e}else{if((t&1)===0){N2(f,C,t),zv();break e}_=Error(Tt(426))}}else if(Ar&&l.mode&1){var ue=U2(g);if(ue!==null){(ue.flags&65536)===0&&(ue.flags|=256),$2(ue,g,l,f,t),fv(ah(_,l));break e}}f=_=ah(_,l),ri!==4&&(ri=2),Sf===null?Sf=[f]:Sf.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var H=g3(f,_,t);L2(f,H);break e;case 1:l=_;var V=f.type,B=f.stateNode;if((f.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Tl===null||!Tl.has(B)))){f.flags|=65536,t&=-t,f.lanes|=t;var ae=y3(f,l,t);L2(f,ae);break e}}f=f.return}while(f!==null)}F3(r)}catch(G){t=G,Jr===r&&r!==null&&(Jr=r=r.return);continue}break}while(1)}function O3(){var e=am.current;return am.current=om,e===null?om:e}function zv(){(ri===0||ri===3||ri===2)&&(ri=4),ui===null||(Mu&268435455)===0&&(e0&268435455)===0||gl(ui,xi)}function um(e,t){var r=Wn;Wn|=2;var s=O3();(ui!==e||xi!==t)&&(Cs=null,Tu(e,t));do try{W7();break}catch(u){L3(e,u)}while(1);if(pv(),Wn=r,am.current=s,Jr!==null)throw Error(Tt(261));return ui=null,xi=0,ri}function W7(){for(;Jr!==null;)R3(Jr)}function Z7(){for(;Jr!==null&&!v8();)R3(Jr)}function R3(e){var t=j3(e.alternate,e,bo);e.memoizedProps=e.pendingProps,t===null?F3(e):Jr=t,Av.current=null}function F3(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=D7(r,t,bo),r!==null){Jr=r;return}}else{if(r=N7(r,t),r!==null){r.flags&=32767,Jr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ri=6,Jr=null;return}}if(t=t.sibling,t!==null){Jr=t;return}Jr=t=e}while(t!==null);ri===0&&(ri=5)}function _u(e,t,r){var s=tr,u=Yo.transition;try{Yo.transition=null,tr=1,X7(e,t,r,s)}finally{Yo.transition=u,tr=s}return null}function X7(e,t,r,s){do qc();while(xl!==null);if((Wn&6)!==0)throw Error(Tt(327));r=e.finishedWork;var u=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Tt(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(I8(e,f),e===ui&&(Jr=ui=null,xi=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||ip||(ip=!0,D3(Gp,function(){return qc(),null})),f=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||f){f=Yo.transition,Yo.transition=null;var g=tr;tr=1;var l=Wn;Wn|=4,Av.current=null,$7(e,r),k3(r,e),p7(A1),Wp=!!T1,A1=T1=null,e.current=r,V7(r),x8(),Wn=l,tr=g,Yo.transition=f}else e.current=r;if(ip&&(ip=!1,xl=e,lm=u),f=e.pendingLanes,f===0&&(Tl=null),w8(r.stateNode),ho(e,Kr()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)u=t[r],s(u.value,{componentStack:u.stack,digest:u.digest});if(sm)throw sm=!1,e=Z1,Z1=null,e;return(lm&1)!==0&&e.tag!==0&&qc(),f=e.pendingLanes,(f&1)!==0?e===X1?Cf++:(Cf=0,X1=e):Cf=0,Fl(),null}function qc(){if(xl!==null){var e=m5(lm),t=Yo.transition,r=tr;try{if(Yo.transition=null,tr=16>e?16:e,xl===null)var s=!1;else{if(e=xl,xl=null,lm=0,(Wn&6)!==0)throw Error(Tt(331));var u=Wn;for(Wn|=4,en=e.current;en!==null;){var f=en,g=f.child;if((en.flags&16)!==0){var l=f.deletions;if(l!==null){for(var _=0;_<l.length;_++){var C=l[_];for(en=C;en!==null;){var S=en;switch(S.tag){case 0:case 11:case 15:Ef(8,S,f)}var E=S.child;if(E!==null)E.return=S,en=E;else for(;en!==null;){S=en;var T=S.sibling,F=S.return;if(A3(S),S===C){en=null;break}if(T!==null){T.return=F,en=T;break}en=F}}}var X=f.alternate;if(X!==null){var Z=X.child;if(Z!==null){X.child=null;do{var ue=Z.sibling;Z.sibling=null,Z=ue}while(Z!==null)}}en=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,en=g;else e:for(;en!==null;){if(f=en,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Ef(9,f,f.return)}var H=f.sibling;if(H!==null){H.return=f.return,en=H;break e}en=f.return}}var V=e.current;for(en=V;en!==null;){g=en;var B=g.child;if((g.subtreeFlags&2064)!==0&&B!==null)B.return=g,en=B;else e:for(g=V;en!==null;){if(l=en,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:Qm(9,l)}}catch(G){Ur(l,l.return,G)}if(l===g){en=null;break e}var ae=l.sibling;if(ae!==null){ae.return=l.return,en=ae;break e}en=l.return}}if(Wn=u,Fl(),qa&&typeof qa.onPostCommitFiberRoot=="function")try{qa.onPostCommitFiberRoot(Hm,e)}catch{}s=!0}return s}finally{tr=r,Yo.transition=t}}return!1}function tb(e,t,r){t=ah(r,t),t=g3(e,t,1),e=Cl(e,t,1),t=qi(),e!==null&&(nd(e,1,t),ho(e,t))}function Ur(e,t,r){if(e.tag===3)tb(e,e,r);else for(;t!==null;){if(t.tag===3){tb(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Tl===null||!Tl.has(s))){e=ah(r,e),e=y3(t,e,1),t=Cl(t,e,1),e=qi(),t!==null&&(nd(t,1,e),ho(t,e));break}}t=t.return}}function K7(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=qi(),e.pingedLanes|=e.suspendedLanes&r,ui===e&&(xi&r)===r&&(ri===4||ri===3&&(xi&130023424)===xi&&500>Kr()-Pv?Tu(e,0):Iv|=r),ho(e,t)}function B3(e,t){t===0&&((e.mode&1)===0?t=1:(t=Xd,Xd<<=1,(Xd&130023424)===0&&(Xd=4194304)));var r=qi();e=Ls(e,t),e!==null&&(nd(e,t,r),ho(e,r))}function Y7(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),B3(e,r)}function q7(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(r=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Tt(314))}s!==null&&s.delete(t),B3(e,r)}var j3;j3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||uo.current)lo=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return lo=!1,j7(e,t,r);lo=(e.flags&131072)!==0}else lo=!1,Ar&&(t.flags&1048576)!==0&&U5(t,Qp,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ap(e,t),e=t.pendingProps;var u=nh(t,Li.current);Yc(t,r),u=wv(null,t,s,e,u,r);var f=Ev();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,co(s)?(f=!0,qp(t)):f=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,yv(t),u.updater=qm,t.stateNode=u,u._reactInternals=t,F1(t,s,e,r),t=D1(null,t,s,!0,f,r)):(t.tag=0,Ar&&f&&cv(t),Zi(null,t,u,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ap(e,t),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=Q7(s),e=ya(s,e),u){case 0:t=j1(null,t,s,e,r);break e;case 1:t=H2(null,t,s,e,r);break e;case 11:t=V2(null,t,s,e,r);break e;case 14:t=G2(null,t,s,ya(s.type,e),r);break e}throw Error(Tt(306,s,""))}return t;case 0:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:ya(s,u),j1(e,t,s,u,r);case 1:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:ya(s,u),H2(e,t,s,u,r);case 3:e:{if(b3(t),e===null)throw Error(Tt(387));s=t.pendingProps,f=t.memoizedState,u=f.element,H5(e,t),nm(t,s,null,r);var g=t.memoizedState;if(s=g.element,f.isDehydrated)if(f={element:s,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){u=ah(Error(Tt(423)),t),t=W2(e,t,s,r,u);break e}else if(s!==u){u=ah(Error(Tt(424)),t),t=W2(e,t,s,r,u);break e}else for(So=Sl(t.stateNode.containerInfo.firstChild),Co=t,Ar=!0,xa=null,r=K5(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rh(),s===u){t=Os(e,t,r);break e}Zi(e,t,s,r)}t=t.child}return t;case 5:return Y5(t),e===null&&L1(t),s=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,g=u.children,I1(s,u)?g=null:f!==null&&I1(s,f)&&(t.flags|=32),_3(e,t),Zi(e,t,g,r),t.child;case 6:return e===null&&L1(t),null;case 13:return w3(e,t,r);case 4:return vv(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ih(t,null,s,r):Zi(e,t,s,r),t.child;case 11:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:ya(s,u),V2(e,t,s,u,r);case 7:return Zi(e,t,t.pendingProps,r),t.child;case 8:return Zi(e,t,t.pendingProps.children,r),t.child;case 12:return Zi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,u=t.pendingProps,f=t.memoizedProps,g=u.value,vr(em,s._currentValue),s._currentValue=g,f!==null)if(Aa(f.value,g)){if(f.children===u.children&&!uo.current){t=Os(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){g=f.child;for(var _=l.firstContext;_!==null;){if(_.context===s){if(f.tag===1){_=ks(-1,r&-r),_.tag=2;var C=f.updateQueue;if(C!==null){C=C.shared;var S=C.pending;S===null?_.next=_:(_.next=S.next,S.next=_),C.pending=_}}f.lanes|=r,_=f.alternate,_!==null&&(_.lanes|=r),O1(f.return,r,t),l.lanes|=r;break}_=_.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(Tt(341));g.lanes|=r,l=g.alternate,l!==null&&(l.lanes|=r),O1(g,r,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}Zi(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps.children,Yc(t,r),u=qo(u),s=s(u),t.flags|=1,Zi(e,t,s,r),t.child;case 14:return s=t.type,u=ya(s,t.pendingProps),u=ya(s.type,u),G2(e,t,s,u,r);case 15:return v3(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:ya(s,u),Ap(e,t),t.tag=1,co(s)?(e=!0,qp(t)):e=!1,Yc(t,r),Z5(t,s,u),F1(t,s,u,r),D1(null,t,s,!0,e,r);case 19:return E3(e,t,r);case 22:return x3(e,t,r)}throw Error(Tt(156,t.tag))};function D3(e,t){return h5(e,t)}function J7(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zo(e,t,r,s){return new J7(e,t,r,s)}function Lv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Q7(e){if(typeof e=="function")return Lv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Jy)return 11;if(e===Qy)return 14}return 2}function Il(e,t){var r=e.alternate;return r===null?(r=Zo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function kp(e,t,r,s,u,f){var g=2;if(s=e,typeof e=="function")Lv(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case kc:return Au(r.children,u,f,t);case qy:g=8,u|=8;break;case a1:return e=Zo(12,r,t,u|2),e.elementType=a1,e.lanes=f,e;case s1:return e=Zo(13,r,t,u),e.elementType=s1,e.lanes=f,e;case l1:return e=Zo(19,r,t,u),e.elementType=l1,e.lanes=f,e;case Xw:return t0(r,u,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ww:g=10;break e;case Zw:g=9;break e;case Jy:g=11;break e;case Qy:g=14;break e;case hl:g=16,s=null;break e}throw Error(Tt(130,e==null?e:typeof e,""))}return t=Zo(g,r,t,u),t.elementType=e,t.type=s,t.lanes=f,t}function Au(e,t,r,s){return e=Zo(7,e,s,t),e.lanes=r,e}function t0(e,t,r,s){return e=Zo(22,e,s,t),e.elementType=Xw,e.lanes=r,e.stateNode={isHidden:!1},e}function Fg(e,t,r){return e=Zo(6,e,null,t),e.lanes=r,e}function Bg(e,t,r){return t=Zo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eC(e,t,r,s,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yg(0),this.expirationTimes=yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yg(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Ov(e,t,r,s,u,f,g,l,_){return e=new eC(e,t,r,l,_),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Zo(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yv(f),e}function tC(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function N3(e){if(!e)return kl;e=e._reactInternals;e:{if(ju(e)!==e||e.tag!==1)throw Error(Tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(co(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Tt(171))}if(e.tag===1){var r=e.type;if(co(r))return D5(e,r,t)}return t}function U3(e,t,r,s,u,f,g,l,_){return e=Ov(r,s,!0,e,u,f,g,l,_),e.context=N3(null),r=e.current,s=qi(),u=Al(r),f=ks(s,u),f.callback=t!=null?t:null,Cl(r,f,u),e.current.lanes=u,nd(e,u,s),ho(e,s),e}function n0(e,t,r,s){var u=t.current,f=qi(),g=Al(u);return r=N3(r),t.context===null?t.context=r:t.pendingContext=r,t=ks(f,g),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Cl(u,t,g),e!==null&&(Ca(e,u,g,f),Sp(e,u,g)),g}function cm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Rv(e,t){nb(e,t),(e=e.alternate)&&nb(e,t)}function nC(){return null}var $3=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fv(e){this._internalRoot=e}r0.prototype.render=Fv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Tt(409));n0(e,t,null,null)};r0.prototype.unmount=Fv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zu(function(){n0(null,e,null,null)}),t[zs]=null}};function r0(e){this._internalRoot=e}r0.prototype.unstable_scheduleHydration=function(e){if(e){var t=v5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ml.length&&t!==0&&t<ml[r].priority;r++);ml.splice(r,0,e),r===0&&_5(e)}};function Bv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function i0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rb(){}function rC(e,t,r,s,u){if(u){if(typeof s=="function"){var f=s;s=function(){var C=cm(g);f.call(C)}}var g=U3(t,s,e,0,null,!1,!1,"",rb);return e._reactRootContainer=g,e[zs]=g.current,Uf(e.nodeType===8?e.parentNode:e),zu(),g}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var l=s;s=function(){var C=cm(_);l.call(C)}}var _=Ov(e,0,!1,null,null,!1,!1,"",rb);return e._reactRootContainer=_,e[zs]=_.current,Uf(e.nodeType===8?e.parentNode:e),zu(function(){n0(t,_,r,s)}),_}function o0(e,t,r,s,u){var f=r._reactRootContainer;if(f){var g=f;if(typeof u=="function"){var l=u;u=function(){var _=cm(g);l.call(_)}}n0(t,g,e,u)}else g=rC(r,t,e,u,s);return cm(g)}g5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=sf(t.pendingLanes);r!==0&&(nv(t,r|1),ho(t,Kr()),(Wn&6)===0&&(sh=Kr()+500,Fl()))}break;case 13:zu(function(){var s=Ls(e,1);if(s!==null){var u=qi();Ca(s,e,1,u)}}),Rv(e,1)}};rv=function(e){if(e.tag===13){var t=Ls(e,134217728);if(t!==null){var r=qi();Ca(t,e,134217728,r)}Rv(e,134217728)}};y5=function(e){if(e.tag===13){var t=Al(e),r=Ls(e,t);if(r!==null){var s=qi();Ca(r,e,t,s)}Rv(e,t)}};v5=function(){return tr};x5=function(e,t){var r=tr;try{return tr=e,t()}finally{tr=r}};v1=function(e,t,r){switch(t){case"input":if(h1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var u=Km(s);if(!u)throw Error(Tt(90));Yw(s),h1(s,u)}}}break;case"textarea":Jw(e,r);break;case"select":t=r.value,t!=null&&Wc(e,!!r.multiple,t,!1)}};o5=kv;a5=zu;var iC={usingClientEntryPoint:!1,Events:[id,Oc,Km,r5,i5,kv]},nf={findFiberByHostInstance:wu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},oC={bundleType:nf.bundleType,version:nf.version,rendererPackageName:nf.rendererPackageName,rendererConfig:nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=u5(e),e===null?null:e.stateNode},findFiberByHostInstance:nf.findFiberByHostInstance||nC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var op=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!op.isDisabled&&op.supportsFiber)try{Hm=op.inject(oC),qa=op}catch{}}Ao.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iC;Ao.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bv(t))throw Error(Tt(200));return tC(e,t,null,r)};Ao.createRoot=function(e,t){if(!Bv(e))throw Error(Tt(299));var r=!1,s="",u=$3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Ov(e,1,!1,null,null,r,!1,s,u),e[zs]=t.current,Uf(e.nodeType===8?e.parentNode:e),new Fv(t)};Ao.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Tt(188)):(e=Object.keys(e).join(","),Error(Tt(268,e)));return e=u5(t),e=e===null?null:e.stateNode,e};Ao.flushSync=function(e){return zu(e)};Ao.hydrate=function(e,t,r){if(!i0(t))throw Error(Tt(200));return o0(null,e,t,!0,r)};Ao.hydrateRoot=function(e,t,r){if(!Bv(e))throw Error(Tt(405));var s=r!=null&&r.hydratedSources||null,u=!1,f="",g=$3;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=U3(t,null,e,1,r!=null?r:null,u,!1,f,g),e[zs]=t.current,Uf(e),s)for(e=0;e<s.length;e++)r=s[e],u=r._getVersion,u=u(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,u]:t.mutableSourceEagerHydrationData.push(r,u);return new r0(t)};Ao.render=function(e,t,r){if(!i0(t))throw Error(Tt(200));return o0(null,e,t,!1,r)};Ao.unmountComponentAtNode=function(e){if(!i0(e))throw Error(Tt(40));return e._reactRootContainer?(zu(function(){o0(null,null,e,!1,function(){e._reactRootContainer=null,e[zs]=null})}),!0):!1};Ao.unstable_batchedUpdates=kv;Ao.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!i0(r))throw Error(Tt(200));if(e==null||e._reactInternals===void 0)throw Error(Tt(38));return o0(e,t,r,!1,s)};Ao.version="18.2.0-next-9e3b772b8-20220608";function V3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V3)}catch(e){console.error(e)}}V3(),Gm.exports=Ao;var aC=Gm.exports;var jv={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(pl,function(){var r,s,u;function f(l,_){if(!r)r=_;else if(!s)s=_;else{var C="var sharedChunk = {}; ("+r+")(sharedChunk); ("+s+")(sharedChunk);",S={};r(S),u=_(S),typeof window!="undefined"&&(u.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}f(["exports"],function(l){var _=C;function C(o,n,a,h){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=a,this.p2y=h}function S(o,n,a,h){const p=new _(o,n,a,h);return function(v){return p.solve(v)}}C.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,h=0;h<8;h++){var p=this.sampleCurveX(a)-o;if(Math.abs(p)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=p/v}var x=0,I=1;for(a=o,h=0;h<20&&(p=this.sampleCurveX(a),!(Math.abs(p-o)<n));h++)o>p?x=a:I=a,a=.5*(I-x)+x;return a},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};const E=S(.25,.1,.25,1);function T(o,n,a){return Math.min(a,Math.max(n,o))}function F(o,n,a){const h=a-n,p=((o-n)%h+h)%h+n;return p===n?a:p}function X(o,...n){for(const a of n)for(const h in a)o[h]=a[h];return o}let Z=1;function ue(o,n){o.forEach(a=>{n[a]&&(n[a]=n[a].bind(n))})}function H(o,n,a){const h={};for(const p in o)h[p]=n.call(a||this,o[p],p,o);return h}function V(o,n,a){const h={};for(const p in o)n.call(a||this,o[p],p,o)&&(h[p]=o[p]);return h}function B(o){return Array.isArray(o)?o.map(B):typeof o=="object"&&o?H(o,B):o}const ae={};function G(o){ae[o]||(typeof console!="undefined"&&console.warn(o),ae[o]=!0)}function j(o,n,a){return(a.y-o.y)*(n.x-o.x)>(n.y-o.y)*(a.x-o.x)}function w(o){let n=0;for(let a,h,p=0,v=o.length,x=v-1;p<v;x=p++)a=o[p],h=o[x],n+=(h.x-a.x)*(a.y+h.y);return n}function k(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function U(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,p,v)=>{const x=p||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n}let K,Y,de=null;function ve(o){if(de==null){const n=o.navigator?o.navigator.userAgent:null;de=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return de}function be(o){return typeof ImageBitmap!="undefined"&&o instanceof ImageBitmap}const ee={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){const a=window.document.createElement("canvas"),h=a.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return a.width=o.width,a.height=o.height,h.drawImage(o,0,0,o.width,o.height),h.getImageData(-n,-n,o.width+2*n,o.height+2*n)},resolveURL:o=>(K||(K=document.createElement("a")),K.href=o,K.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Y==null&&(Y=matchMedia("(prefers-reduced-motion: reduce)")),Y.matches)}};var ie=ne;function ne(o,n){this.x=o,this.y=n}ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,a=o.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),a=Math.sin(o),h=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=h,this},_rotateAround:function(o,n){var a=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ne.convert=function(o){return o instanceof ne?o:Array.isArray(o)?new ne(o[0],o[1]):o};const te={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},he="mapbox-tiles";let xe,_e,Be=500,Ie=50;function Pe(){typeof caches=="undefined"||xe||(xe=caches.open(he))}let $e=1/0;const Ne={supported:!1,testSupport:function(o){!yt&&st&&(Pt?ht(o):qe=o)}};let qe,st,yt=!1,Pt=!1;function ht(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,st),o.isContextLost())return;Ne.supported=!0}catch{}o.deleteTexture(n),yt=!0}typeof document!="undefined"&&(st=document.createElement("img"),st.onload=function(){qe&&ht(qe),qe=null,Pt=!0},st.onerror=function(){yt=!0,qe=null},st.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Et);class Nt extends Error{constructor(n,a,h,p){super(`AJAXError: ${a} (${n}): ${h}`),this.status=n,this.statusText=a,this.url=h,this.body=p}}const Bt=k()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function cn(o,n){const a=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:Bt(),signal:a.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),((x,I,M)=>{if(v)return;const $=Date.now();fetch(h).then(Q=>Q.ok?((re,le,me)=>{(o.type==="arrayBuffer"?re.arrayBuffer():o.type==="json"?re.json():re.text()).then(ye=>{v||(le&&me&&function(Oe,Fe,Ze){if(Pe(),!xe)return;const nt={status:Fe.status,statusText:Fe.statusText,headers:new Headers};Fe.headers.forEach((lt,vt)=>nt.headers.set(vt,lt));const et=U(Fe.headers.get("Cache-Control")||"");et["no-store"]||(et["max-age"]&&nt.headers.set("Expires",new Date(Ze+1e3*et["max-age"]).toUTCString()),new Date(nt.headers.get("Expires")).getTime()-Ze<42e4||function(lt,vt){if(_e===void 0)try{new Response(new ReadableStream),_e=!0}catch{_e=!1}_e?vt(lt.body):lt.blob().then(vt)}(Fe,lt=>{const vt=new Response(lt,nt);Pe(),xe&&xe.then(dt=>dt.put(function(jt){const tn=jt.indexOf("?");return tn<0?jt:jt.slice(0,tn)}(Oe.url),vt)).catch(dt=>G(dt.message))}))}(h,le,me),p=!0,n(null,ye,re.headers.get("Cache-Control"),re.headers.get("Expires")))}).catch(ye=>{v||n(new Error(ye.message))})})(Q,null,$):Q.blob().then(re=>n(new Nt(Q.status,Q.statusText,o.url,re)))).catch(Q=>{Q.code!==20&&n(new Error(Q.message))})})(),{cancel:()=>{v=!0,p||a.abort()}}}const Tn=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!k()){const h=o.url.substring(0,o.url.indexOf("://"));return(te.REGISTERED_PROTOCOLS[h]||cn)(o,n)}}if(!(/^file:/.test(a=o.url)||/^file:/.test(Bt())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return cn(o,n);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var a;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(I){return p(I)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new Nt(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},wn=function(o,n){return Tn(X(o,{type:"arrayBuffer"}),n)};function on(o){const n=window.document.createElement("a");return n.href=o,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const En="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ee,R;Ee=[],R=0;const O=function(o,n){if(Ne.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),R>=te.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Ee.push(v),v}R++;let a=!1;const h=()=>{if(!a)for(a=!0,R--;Ee.length&&R<te.MAX_PARALLEL_IMAGE_REQUESTS;){const v=Ee.shift(),{requestParameters:x,callback:I,cancelled:M}=v;M||(v.cancel=O(x,I).cancel)}},p=wn(o,(v,x,I,M)=>{h(),v?n(v):x&&function($,Q,re,le){typeof createImageBitmap=="function"?function(me,ye){const Oe=new Blob([new Uint8Array(me)],{type:"image/png"});createImageBitmap(Oe).then(Fe=>{ye(null,Fe)}).catch(Fe=>{ye(new Error(`Could not load image because of ${Fe.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}($,Q):function(me,ye,Oe,Fe){const Ze=new Image;Ze.onload=()=>{ye(null,Ze),URL.revokeObjectURL(Ze.src),Ze.onload=null,window.requestAnimationFrame(()=>{Ze.src=En})},Ze.onerror=()=>ye(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const nt=new Blob([new Uint8Array(me)],{type:"image/png"});Ze.cacheControl=Oe,Ze.expires=Fe,Ze.src=me.byteLength?URL.createObjectURL(nt):En}($,Q,re,le)}(x,n,I,M)});return{cancel:()=>{p.cancel(),h()}}};function pe(o,n,a){a[o]&&a[o].indexOf(n)!==-1||(a[o]=a[o]||[],a[o].push(n))}function ze(o,n,a){if(a&&a[o]){const h=a[o].indexOf(n);h!==-1&&a[o].splice(h,1)}}class Ye{constructor(n,a={}){X(this,a),this.type=n}}class ot extends Ye{constructor(n,a={}){super("error",X({error:n},a))}}class se{on(n,a){return this._listeners=this._listeners||{},pe(n,a,this._listeners),this}off(n,a){return ze(n,a,this._listeners),ze(n,a,this._oneTimeListeners),this}once(n,a){return this._oneTimeListeners=this._oneTimeListeners||{},pe(n,a,this._oneTimeListeners),this}fire(n,a){typeof n=="string"&&(n=new Ye(n,a||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const I of p)I.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const I of v)ze(h,I,this._oneTimeListeners),I.call(this,n);const x=this._eventedParent;x&&(X(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof ot&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var A={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class z{constructor(n,a,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function we(o){const n=o.value;return n?[new z(o.key,n,"constants have been deprecated as of v8")]:[]}function je(o,...n){for(const a of n)for(const h in a)o[h]=a[h];return o}function Xe(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Qe(o){if(Array.isArray(o))return o.map(Qe);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const a in o)n[a]=Qe(o[a]);return n}return Xe(o)}class Ht extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class Sn{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[h,p]of a)this.bindings[h]=p}concat(n){return new Sn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const fn={kind:"null"},ft={kind:"number"},Mt={kind:"string"},un={kind:"boolean"},Ir={kind:"color"},Qr={kind:"object"},hn={kind:"value"},rr={kind:"collator"},bi={kind:"formatted"},xr={kind:"resolvedImage"};function Vr(o,n){return{kind:"array",itemType:o,N:n}}function Wt(o){if(o.kind==="array"){const n=Wt(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Gt=[fn,ft,Mt,un,Ir,bi,Qr,Vr(hn),xr];function Zt(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Zt(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const a of Gt)if(!Zt(a,n))return null}}return`Expected ${Wt(o)} but found ${Wt(n)} instead.`}function An(o,n){return n.some(a=>a.kind===o.kind)}function zn(o,n){return n.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}var ir,Gr={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function hi(o){return(o=Math.round(o))<0?0:o>255?255:o}function Pa(o){return hi(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function Te(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function W(o,n,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(n-o)*a*6:2*a<1?n:3*a<2?o+(n-o)*(2/3-a)*6:o}try{ir={}.parseCSSColor=function(o){var n,a=o.replace(/ /g,"").toLowerCase();if(a in Gr)return Gr[a].slice();if(a[0]==="#")return a.length===4?(n=parseInt(a.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:a.length===7&&(n=parseInt(a.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var h=a.indexOf("("),p=a.indexOf(")");if(h!==-1&&p+1===a.length){var v=a.substr(0,h),x=a.substr(h+1,p-(h+1)).split(","),I=1;switch(v){case"rgba":if(x.length!==4)return null;I=Te(x.pop());case"rgb":return x.length!==3?null:[Pa(x[0]),Pa(x[1]),Pa(x[2]),I];case"hsla":if(x.length!==4)return null;I=Te(x.pop());case"hsl":if(x.length!==3)return null;var M=(parseFloat(x[0])%360+360)%360/360,$=Te(x[1]),Q=Te(x[2]),re=Q<=.5?Q*($+1):Q+$-Q*$,le=2*Q-re;return[hi(255*W(le,re,M+1/3)),hi(255*W(le,re,M)),hi(255*W(le,re,M-1/3)),I];default:return null}}return null}}catch{}class J{constructor(n,a,h,p=1){this.r=n,this.g=a,this.b=h,this.a=p}static parse(n){if(!n)return;if(n instanceof J)return n;if(typeof n!="string")return;const a=ir(n);return a?new J(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[n,a,h,p]=this.toArray();return`rgba(${Math.round(n)},${Math.round(a)},${Math.round(h)},${p})`}toArray(){const{r:n,g:a,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*n/p,255*a/p,255*h/p,p]}}J.black=new J(0,0,0,1),J.white=new J(1,1,1,1),J.transparent=new J(0,0,0,0),J.red=new J(1,0,0,1);class ge{constructor(n,a,h){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ae{constructor(n,a,h,p,v){this.text=n,this.image=a,this.scale=h,this.fontStack=p,this.textColor=v}}class ke{constructor(n){this.sections=n}static fromString(n){return new ke([new Ae(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ke?n:ke.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const a of this.sections){if(a.image){n.push(["image",a.image.name]);continue}n.push(a.text);const h={};a.fontStack&&(h["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(h["font-scale"]=a.scale),a.textColor&&(h["text-color"]=["rgba"].concat(a.textColor.toArray())),n.push(h)}return n}}class Ge{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ge({name:n,available:!1}):null}serialize(){return["image",this.name]}}function De(o,n,a,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,a,h]:[o,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ue(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof J||o instanceof ge||o instanceof ke||o instanceof Ge)return!0;if(Array.isArray(o)){for(const n of o)if(!Ue(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Ue(o[n]))return!1;return!0}return!1}function He(o){if(o===null)return fn;if(typeof o=="string")return Mt;if(typeof o=="boolean")return un;if(typeof o=="number")return ft;if(o instanceof J)return Ir;if(o instanceof ge)return rr;if(o instanceof ke)return bi;if(o instanceof Ge)return xr;if(Array.isArray(o)){const n=o.length;let a;for(const h of o){const p=He(h);if(a){if(a===p)continue;a=hn;break}a=p}return Vr(a||hn,n)}return Qr}function at(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof J||o instanceof ke||o instanceof Ge?o.toString():JSON.stringify(o)}class pt{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ue(n[1]))return a.error("invalid value");const h=n[1];let p=He(h);const v=a.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new pt(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof J?["rgba"].concat(this.value.toArray()):this.value instanceof ke?this.value.serialize():this.value}}class it{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Vt={string:Mt,number:ft,boolean:un,object:Qr};class It{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let I,M;if(n.length>2){const $=n[1];if(typeof $!="string"||!($ in Vt)||$==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);I=Vt[$],p++}else I=hn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);M=n[2],p++}h=Vr(I,M)}else h=Vt[v];const x=[];for(;p<n.length;p++){const I=a.parse(n[p],p,hn);if(!I)return null;x.push(I)}return new It(h,x)}evaluate(n){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(n);if(!Zt(this.type,He(h)))return h;if(a===this.args.length-1)throw new it(`Expected value to be of type ${Wt(this.type)}, but found ${Wt(He(h))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,a=[n.kind];if(n.kind==="array"){const h=n.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){a.push(h.kind);const p=n.N;(typeof p=="number"||this.args.length>1)&&a.push(p)}}return a.concat(this.args.map(h=>h.serialize()))}}class Ut{constructor(n){this.type=bi,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const I=n[x];if(v&&typeof I=="object"&&!Array.isArray(I)){v=!1;let M=null;if(I["font-scale"]&&(M=a.parse(I["font-scale"],1,ft),!M))return null;let $=null;if(I["text-font"]&&($=a.parse(I["text-font"],1,Vr(Mt)),!$))return null;let Q=null;if(I["text-color"]&&(Q=a.parse(I["text-color"],1,Ir),!Q))return null;const re=p[p.length-1];re.scale=M,re.font=$,re.textColor=Q}else{const M=a.parse(n[x],1,hn);if(!M)return null;const $=M.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:M,scale:null,font:null,textColor:null})}}return new Ut(p)}evaluate(n){return new ke(this.sections.map(a=>{const h=a.content.evaluate(n);return He(h)===xr?new Ae("",h,null,null,null):new Ae(at(h),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const a of this.sections){n.push(a.content.serialize());const h={};a.scale&&(h["font-scale"]=a.scale.serialize()),a.font&&(h["text-font"]=a.font.serialize()),a.textColor&&(h["text-color"]=a.textColor.serialize()),n.push(h)}return n}}class rn{constructor(n){this.type=xr,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const h=a.parse(n[1],1,Mt);return h?new rn(h):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),h=Ge.fromString(a);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(a)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const $t={"to-boolean":un,"to-color":Ir,"to-number":ft,"to-string":Mt};class xn{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[0];if((h==="to-boolean"||h==="to-string")&&n.length!==2)return a.error("Expected one argument.");const p=$t[h],v=[];for(let x=1;x<n.length;x++){const I=a.parse(n[x],x,hn);if(!I)return null;v.push(I)}return new xn(p,v)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let a,h;for(const p of this.args){if(a=p.evaluate(n),h=null,a instanceof J)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:De(a[0],a[1],a[2],a[3]),!h))return new J(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new it(h||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const h of this.args){if(a=h.evaluate(n),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new it(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?ke.fromString(at(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Ge.fromString(at(this.args[0].evaluate(n))):at(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ut([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new rn(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(a=>{n.push(a.serialize())}),n}}const Cn=["Unknown","Point","LineString","Polygon"];class _n{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Cn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=J.parse(n)),a}}class bn{constructor(n,a,h,p){this.name=n,this.type=a,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,a){const h=n[0],p=bn.definitions[h];if(!p)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,I=x.filter(([$])=>!Array.isArray($)||$.length===n.length-1);let M=null;for(const[$,Q]of I){M=new Vs(a.registry,a.path,null,a.scope);const re=[];let le=!1;for(let me=1;me<n.length;me++){const ye=n[me],Oe=Array.isArray($)?$[me-1]:$.type,Fe=M.parse(ye,1+re.length,Oe);if(!Fe){le=!0;break}re.push(Fe)}if(!le)if(Array.isArray($)&&$.length!==re.length)M.error(`Expected ${$.length} arguments, but found ${re.length} instead.`);else{for(let me=0;me<re.length;me++){const ye=Array.isArray($)?$[me]:$.type,Oe=re[me];M.concat(me+1).checkSubtype(ye,Oe.type)}if(M.errors.length===0)return new bn(h,v,Q,re)}}if(I.length===1)a.errors.push(...M.errors);else{const $=(I.length?I:x).map(([re])=>{return le=re,Array.isArray(le)?`(${le.map(Wt).join(", ")})`:`(${Wt(le.type)}...)`;var le}).join(" | "),Q=[];for(let re=1;re<n.length;re++){const le=a.parse(n[re],1+Q.length);if(!le)return null;Q.push(Wt(le.type))}a.error(`Expected arguments of type ${$}, but found (${Q.join(", ")}) instead.`)}return null}static register(n,a){bn.definitions=a;for(const h in a)n[h]=bn}}class nr{constructor(n,a,h){this.type=rr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const p=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,un);if(!p)return null;const v=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,un);if(!v)return null;let x=null;return h.locale&&(x=a.parse(h.locale,1,Mt),!x)?null:new nr(p,v,x)}evaluate(n){return new ge(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const dr=8192;function Jn(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Mo(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function ro(o,n){const a=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(a*p*dr),Math.round(h*p*dr)]}function Bl(o,n,a){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-a[0],x=o[1]-a[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function ns(o,n){let a=!1;for(let x=0,I=n.length;x<I;x++){const M=n[x];for(let $=0,Q=M.length;$<Q-1;$++){if(Bl(o,M[$],M[$+1]))return!1;(p=M[$])[1]>(h=o)[1]!=(v=M[$+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(a=!a)}}var h,p,v;return a}function Qn(o,n){for(let a=0;a<n.length;a++)if(ns(o,n[a]))return!0;return!1}function io(o,n,a,h){const p=h[0]-a[0],v=h[1]-a[1],x=(o[0]-a[0])*v-p*(o[1]-a[1]),I=(n[0]-a[0])*v-p*(n[1]-a[1]);return x>0&&I<0||x<0&&I>0}function $u(o,n,a){for(const $ of a)for(let Q=0;Q<$.length-1;++Q)if((I=[(x=$[Q+1])[0]-(v=$[Q])[0],x[1]-v[1]])[0]*(M=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-I[1]*M[0]!=0&&io(h,p,v,x)&&io(v,x,h,p))return!0;var h,p,v,x,I,M;return!1}function Vu(o,n){for(let a=0;a<o.length;++a)if(!ns(o[a],n))return!1;for(let a=0;a<o.length-1;++a)if($u(o[a],o[a+1],n))return!1;return!0}function Gu(o,n){for(let a=0;a<n.length;a++)if(Vu(o,n[a]))return!0;return!1}function Us(o,n,a){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const I=ro(o[p][x],a);Jn(n,I),v.push(I)}h.push(v)}return h}function Hu(o,n,a){const h=[];for(let p=0;p<o.length;p++){const v=Us(o[p],n,a);h.push(v)}return h}function ka(o,n,a,h){if(o[0]<a[0]||o[0]>a[2]){const p=.5*h;let v=o[0]-a[0]>p?-h:a[0]-o[0]>p?h:0;v===0&&(v=o[0]-a[2]>p?-h:a[2]-o[0]>p?h:0),o[0]+=v}Jn(n,o)}function jl(o,n,a,h){const p=Math.pow(2,h.z)*dr,v=[h.x*dr,h.y*dr],x=[];for(const I of o)for(const M of I){const $=[M.x+v[0],M.y+v[1]];ka($,n,a,p),x.push($)}return x}function Wu(o,n,a,h){const p=Math.pow(2,h.z)*dr,v=[h.x*dr,h.y*dr],x=[];for(const M of o){const $=[];for(const Q of M){const re=[Q.x+v[0],Q.y+v[1]];Jn(n,re),$.push(re)}x.push($)}if(n[2]-n[0]<=p/2){(I=n)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const M of x)for(const $ of M)ka($,n,a,p)}var I;return x}class Hr{constructor(n,a){this.type=un,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ue(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Hr(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Hr(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Hr(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const I=Us(h.coordinates,v,x),M=jl(a.geometry(),p,v,x);if(!Mo(p,v))return!1;for(const $ of M)if(!ns($,I))return!1}if(h.type==="MultiPolygon"){const I=Hu(h.coordinates,v,x),M=jl(a.geometry(),p,v,x);if(!Mo(p,v))return!1;for(const $ of M)if(!Qn($,I))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const I=Us(h.coordinates,v,x),M=Wu(a.geometry(),p,v,x);if(!Mo(p,v))return!1;for(const $ of M)if(!Vu($,I))return!1}if(h.type==="MultiPolygon"){const I=Hu(h.coordinates,v,x),M=Wu(a.geometry(),p,v,x);if(!Mo(p,v))return!1;for(const $ of M)if(!Gu($,I))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function $s(o){if(o instanceof bn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Hr)return!1;let n=!0;return o.eachChild(a=>{n&&!$s(a)&&(n=!1)}),n}function rs(o){if(o instanceof bn&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(a=>{n&&!rs(a)&&(n=!1)}),n}function is(o,n){if(o instanceof bn&&n.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(h=>{a&&!is(h,n)&&(a=!1)}),a}class os{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=n[1];return a.scope.has(h)?new os(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Vs{constructor(n,a=[],h,p=new Sn,v=[]){this.registry=n,this.path=a,this.key=a.map(x=>`[${x}]`).join(""),this.scope=p,this.errors=v,this.expectedType=h}parse(n,a,h,p,v={}){return a?this.concat(a,h,p)._parse(n,v):this._parse(n,v)}_parse(n,a){function h(p,v,x){return x==="assert"?new It(v,[p]):x==="coerce"?new xn(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const I=this.expectedType,M=x.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||M.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string"){if(this.checkSubtype(I,M))return null}else x=h(x,I,a.typeAnnotation||"coerce");else x=h(x,I,a.typeAnnotation||"assert")}if(!(x instanceof pt)&&x.type.kind!=="resolvedImage"&&Gs(x)){const I=new _n;try{x=new pt(x.type,x.evaluate(I))}catch(M){return this.error(M.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Vs(this.registry,p,a||null,v,this.errors)}error(n,...a){const h=`${this.key}${a.map(p=>`[${p}]`).join("")}`;this.errors.push(new Ht(h,n))}checkSubtype(n,a){const h=Zt(n,a);return h&&this.error(h),h}}function Gs(o){if(o instanceof os)return Gs(o.boundExpression);if(o instanceof bn&&o.name==="error"||o instanceof nr||o instanceof Hr)return!1;const n=o instanceof xn||o instanceof It;let a=!0;return o.eachChild(h=>{a=n?a&&Gs(h):a&&h instanceof pt}),!!a&&$s(o)&&is(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function zo(o,n){const a=o.length-1;let h,p,v=0,x=a,I=0;for(;v<=x;)if(I=Math.floor((v+x)/2),h=o[I],p=o[I+1],h<=n){if(I===a||n<p)return I;v=I+1}else{if(!(h>n))throw new it("Input is not a number.");x=I-1}return 0}class Ma{constructor(n,a,h){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(n[1],1,ft);if(!h)return null;const p=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<n.length;x+=2){const I=x===1?-1/0:n[x],M=n[x+1],$=x,Q=x+1;if(typeof I!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(p.length&&p[p.length-1][0]>=I)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const re=a.parse(M,Q,v);if(!re)return null;v=v||re.type,p.push([I,re])}return new Ma(v,h,p)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=a[0])return h[0].evaluate(n);const v=a.length;return p>=a[v-1]?h[v-1].evaluate(n):h[zo(a,p)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n}}function or(o,n,a){return o*(1-a)+n*a}var Hs=Object.freeze({__proto__:null,number:or,color:function(o,n,a){return new J(or(o.r,n.r,a),or(o.g,n.g,a),or(o.b,n.b,a),or(o.a,n.a,a))},array:function(o,n,a){return o.map((h,p)=>or(h,n[p],a))}});const Lo=.95047,Dl=1.08883,Zu=4/29,Nl=6/29,Ul=3*Nl*Nl,$l=Math.PI/180,xh=180/Math.PI;function Vl(o){return o>.008856451679035631?Math.pow(o,1/3):o/Ul+Zu}function Gl(o){return o>Nl?o*o*o:Ul*(o-Zu)}function as(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function Hl(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Xu(o){const n=Hl(o.r),a=Hl(o.g),h=Hl(o.b),p=Vl((.4124564*n+.3575761*a+.1804375*h)/Lo),v=Vl((.2126729*n+.7151522*a+.072175*h)/1);return{l:116*v-16,a:500*(p-v),b:200*(v-Vl((.0193339*n+.119192*a+.9503041*h)/Dl)),alpha:o.a}}function Ku(o){let n=(o.l+16)/116,a=isNaN(o.a)?n:n+o.a/500,h=isNaN(o.b)?n:n-o.b/200;return n=1*Gl(n),a=Lo*Gl(a),h=Dl*Gl(h),new J(as(3.2404542*a-1.5371385*n-.4985314*h),as(-.969266*a+1.8760108*n+.041556*h),as(.0556434*a-.2040259*n+1.0572252*h),o.alpha)}function Bn(o,n,a){const h=n-o;return o+a*(h>180||h<-180?h-360*Math.round(h/360):h)}const za={forward:Xu,reverse:Ku,interpolate:function(o,n,a){return{l:or(o.l,n.l,a),a:or(o.a,n.a,a),b:or(o.b,n.b,a),alpha:or(o.alpha,n.alpha,a)}}},ss={forward:function(o){const{l:n,a,b:h}=Xu(o),p=Math.atan2(h,a)*xh;return{h:p<0?p+360:p,c:Math.sqrt(a*a+h*h),l:n,alpha:o.a}},reverse:function(o){const n=o.h*$l,a=o.c;return Ku({l:o.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:o.alpha})},interpolate:function(o,n,a){return{h:Bn(o.h,n.h,a),c:or(o.c,n.c,a),l:or(o.l,n.l,a),alpha:or(o.alpha,n.alpha,a)}}};var Wl=Object.freeze({__proto__:null,lab:za,hcl:ss});class fi{constructor(n,a,h,p,v){this.type=n,this.operator=a,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,I]of v)this.labels.push(x),this.outputs.push(I)}static interpolationFactor(n,a,h,p){let v=0;if(n.name==="exponential")v=Zl(a,n.base,h,p);else if(n.name==="linear")v=Zl(a,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new _(x[0],x[1],x[2],x[3]).solve(Zl(a,1,h,p))}return v}static parse(n,a){let[h,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const $=p[1];if(typeof $!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:$}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const $=p.slice(1);if($.length!==4||$.some(Q=>typeof Q!="number"||Q<0||Q>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:$}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,ft),!v)return null;const I=[];let M=null;h==="interpolate-hcl"||h==="interpolate-lab"?M=Ir:a.expectedType&&a.expectedType.kind!=="value"&&(M=a.expectedType);for(let $=0;$<x.length;$+=2){const Q=x[$],re=x[$+1],le=$+3,me=$+4;if(typeof Q!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if(I.length&&I[I.length-1][0]>=Q)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',le);const ye=a.parse(re,me,M);if(!ye)return null;M=M||ye.type,I.push([Q,ye])}return M.kind==="number"||M.kind==="color"||M.kind==="array"&&M.itemType.kind==="number"&&typeof M.N=="number"?new fi(M,h,p,v,I):a.error(`Type ${Wt(M)} is not interpolatable.`)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=a[0])return h[0].evaluate(n);const v=a.length;if(p>=a[v-1])return h[v-1].evaluate(n);const x=zo(a,p),I=fi.interpolationFactor(this.interpolation,p,a[x],a[x+1]),M=h[x].evaluate(n),$=h[x+1].evaluate(n);return this.operator==="interpolate"?Hs[this.type.kind.toLowerCase()](M,$,I):this.operator==="interpolate-hcl"?ss.reverse(ss.interpolate(ss.forward(M),ss.forward($),I)):za.reverse(za.interpolate(za.forward(M),za.forward($),I))}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,n,this.input.serialize()];for(let h=0;h<this.labels.length;h++)a.push(this.labels[h],this.outputs[h].serialize());return a}}function Zl(o,n,a,h){const p=h-a,v=o-a;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class ls{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let h=null;const p=a.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const I of n.slice(1)){const M=a.parse(I,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!M)return null;h=h||M.type,v.push(M)}const x=p&&v.some(I=>Zt(p,I.type));return new ls(x?hn:h,v)}evaluate(n){let a,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof Ge&&!h.available&&(a||(a=h.name),h=null,p===this.args.length&&(h=a)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(a=>{n.push(a.serialize())}),n}}class Ws{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const I=a.parse(n[v+1],v+1);if(!I)return null;h.push([x,I])}const p=a.parse(n[n.length-1],n.length-1,a.expectedType,h);return p?new Ws(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[a,h]of this.bindings)n.push(a,h.serialize());return n.push(this.result.serialize()),n}}class Xl{constructor(n,a,h){this.type=n,this.index=a,this.input=h}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,ft),p=a.parse(n[2],2,Vr(a.expectedType||hn));return h&&p?new Xl(p.type.itemType,h,p):null}evaluate(n){const a=this.index.evaluate(n),h=this.input.evaluate(n);if(a<0)throw new it(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new it(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new it(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Kl{constructor(n,a){this.type=un,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),p=a.parse(n[2],2,hn);return h&&p?An(h.type,[un,Mt,ft,fn,hn])?new Kl(h,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(h.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!zn(a,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(He(a))} instead.`);if(!zn(h,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${Wt(He(h))} instead.`);return h.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Zs{constructor(n,a,h){this.type=ft,this.needle=n,this.haystack=a,this.fromIndex=h}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),p=a.parse(n[2],2,hn);if(!h||!p)return null;if(!An(h.type,[un,Mt,ft,fn,hn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,ft);return v?new Zs(h,p,v):null}return new Zs(h,p)}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!zn(a,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(He(a))} instead.`);if(!zn(h,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${Wt(He(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(a,p)}return h.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Xs{constructor(n,a,h,p,v,x){this.inputType=n,this.type=a,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let h,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const v={},x=[];for(let $=2;$<n.length-1;$+=2){let Q=n[$];const re=n[$+1];Array.isArray(Q)||(Q=[Q]);const le=a.concat($);if(Q.length===0)return le.error("Expected at least one branch label.");for(const ye of Q){if(typeof ye!="number"&&typeof ye!="string")return le.error("Branch labels must be numbers or strings.");if(typeof ye=="number"&&Math.abs(ye)>Number.MAX_SAFE_INTEGER)return le.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ye=="number"&&Math.floor(ye)!==ye)return le.error("Numeric branch labels must be integer values.");if(h){if(le.checkSubtype(h,He(ye)))return null}else h=He(ye);if(v[String(ye)]!==void 0)return le.error("Branch labels must be unique.");v[String(ye)]=x.length}const me=a.parse(re,$,p);if(!me)return null;p=p||me.type,x.push(me)}const I=a.parse(n[1],1,hn);if(!I)return null;const M=a.parse(n[n.length-1],n.length-1,p);return M?I.type.kind!=="value"&&a.concat(1).checkSubtype(h,I.type)?null:new Xs(h,p,I,v,x,M):null}evaluate(n){const a=this.input.evaluate(n);return(He(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),h=[],p={};for(const x of a){const I=p[this.cases[x]];I===void 0?(p[this.cases[x]]=h.length,h.push([this.cases[x],[x]])):h[I][1].push(x)}const v=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,I]of h)n.push(I.length===1?v(I[0]):I.map(v)),n.push(this.outputs[x].serialize());return n.push(this.otherwise.serialize()),n}}class Yl{constructor(n,a,h){this.type=n,this.branches=a,this.otherwise=h}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const I=a.parse(n[x],x,un);if(!I)return null;const M=a.parse(n[x+1],x+1,h);if(!M)return null;p.push([I,M]),h=h||M.type}const v=a.parse(n[n.length-1],n.length-1,h);return v?new Yl(h,p,v):null}evaluate(n){for(const[a,h]of this.branches)if(a.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,h]of this.branches)n(a),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(a=>{n.push(a.serialize())}),n}}class La{constructor(n,a,h,p){this.type=n,this.input=a,this.beginIndex=h,this.endIndex=p}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),p=a.parse(n[2],2,ft);if(!h||!p)return null;if(!An(h.type,[Vr(hn),Mt,hn]))return a.error(`Expected first argument to be of type array or string, but found ${Wt(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,ft);return v?new La(h.type,h,p,v):null}return new La(h.type,h,p)}evaluate(n){const a=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!zn(a,["string","array"]))throw new it(`Expected first argument to be of type array or string, but found ${Wt(He(a))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return a.slice(h,p)}return a.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Yu(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function qu(o,n,a,h){return h.compare(n,a)===0}function Oa(o,n,a){const h=o!=="=="&&o!=="!=";return class G3{constructor(v,x,I){this.type=un,this.lhs=v,this.rhs=x,this.collator=I,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const I=v[0];let M=x.parse(v[1],1,hn);if(!M)return null;if(!Yu(I,M.type))return x.concat(1).error(`"${I}" comparisons are not supported for type '${Wt(M.type)}'.`);let $=x.parse(v[2],2,hn);if(!$)return null;if(!Yu(I,$.type))return x.concat(2).error(`"${I}" comparisons are not supported for type '${Wt($.type)}'.`);if(M.type.kind!==$.type.kind&&M.type.kind!=="value"&&$.type.kind!=="value")return x.error(`Cannot compare types '${Wt(M.type)}' and '${Wt($.type)}'.`);h&&(M.type.kind==="value"&&$.type.kind!=="value"?M=new It($.type,[M]):M.type.kind!=="value"&&$.type.kind==="value"&&($=new It(M.type,[$])));let Q=null;if(v.length===4){if(M.type.kind!=="string"&&$.type.kind!=="string"&&M.type.kind!=="value"&&$.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(Q=x.parse(v[3],3,rr),!Q)return null}return new G3(M,$,Q)}evaluate(v){const x=this.lhs.evaluate(v),I=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const M=He(x),$=He(I);if(M.kind!==$.kind||M.kind!=="string"&&M.kind!=="number")throw new it(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${M.kind}, ${$.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const M=He(x),$=He(I);if(M.kind!=="string"||$.kind!=="string")return n(v,x,I)}return this.collator?a(v,x,I,this.collator.evaluate(v)):n(v,x,I)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[o];return this.eachChild(x=>{v.push(x.serialize())}),v}}}const _h=Oa("==",function(o,n,a){return n===a},qu),bh=Oa("!=",function(o,n,a){return n!==a},function(o,n,a,h){return!qu(0,n,a,h)}),wh=Oa("<",function(o,n,a){return n<a},function(o,n,a,h){return h.compare(n,a)<0}),Ju=Oa(">",function(o,n,a){return n>a},function(o,n,a,h){return h.compare(n,a)>0}),ql=Oa("<=",function(o,n,a){return n<=a},function(o,n,a,h){return h.compare(n,a)<=0}),Eh=Oa(">=",function(o,n,a){return n>=a},function(o,n,a,h){return h.compare(n,a)>=0});class Jl{constructor(n,a,h,p,v){this.type=Mt,this.number=n,this.locale=a,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const h=a.parse(n[1],1,ft);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=a.parse(p.locale,1,Mt),!v))return null;let x=null;if(p.currency&&(x=a.parse(p.currency,1,Mt),!x))return null;let I=null;if(p["min-fraction-digits"]&&(I=a.parse(p["min-fraction-digits"],1,ft),!I))return null;let M=null;return p["max-fraction-digits"]&&(M=a.parse(p["max-fraction-digits"],1,ft),!M)?null:new Jl(h,v,x,I,M)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Ql{constructor(n){this.type=ft,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=a.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Wt(h.type)} instead.`):new Ql(h):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new it(`Expected value to be of type string or array, but found ${Wt(He(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(a=>{n.push(a.serialize())}),n}}const Ra={"==":_h,"!=":bh,">":Ju,"<":wh,">=":Eh,"<=":ql,array:It,at:Xl,boolean:It,case:Yl,coalesce:ls,collator:nr,format:Ut,image:rn,in:Kl,"index-of":Zs,interpolate:fi,"interpolate-hcl":fi,"interpolate-lab":fi,length:Ql,let:Ws,literal:pt,match:Xs,number:It,"number-format":Jl,object:It,slice:La,step:Ma,string:It,"to-boolean":xn,"to-color":xn,"to-number":xn,"to-string":xn,var:os,within:Hr};function eu(o,[n,a,h,p]){n=n.evaluate(o),a=a.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=De(n,a,h,v);if(x)throw new it(x);return new J(n/255*v,a/255*v,h/255*v,v)}function Qu(o,n){return o in n}function tu(o,n){const a=n[o];return a===void 0?null:a}function Qo(o){return{type:o}}function ec(o){return{result:"success",value:o}}function fo(o){return{result:"error",value:o}}function ea(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function ta(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ks(o){return!!o.expression&&o.expression.interpolated}function kn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function pr(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Sh(o){return o}function jn(o,n){const a=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(Ks(n)?"exponential":"interval");if(a&&((o=je({},o)).stops&&(o.stops=o.stops.map($=>[$[0],J.parse($[1])])),o.default=J.parse(o.default?o.default:n.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!Wl[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let x,I,M;if(v==="exponential")x=Oo;else if(v==="interval")x=mr;else if(v==="categorical"){x=ar,I=Object.create(null);for(const $ of o.stops)I[$[0]]=$[1];M=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=tc}if(h){const $={},Q=[];for(let me=0;me<o.stops.length;me++){const ye=o.stops[me],Oe=ye[0].zoom;$[Oe]===void 0&&($[Oe]={zoom:Oe,type:o.type,property:o.property,default:o.default,stops:[]},Q.push(Oe)),$[Oe].stops.push([ye[0].value,ye[1]])}const re=[];for(const me of Q)re.push([$[me].zoom,jn($[me],n)]);const le={name:"linear"};return{kind:"composite",interpolationType:le,interpolationFactor:fi.interpolationFactor.bind(void 0,le),zoomStops:re.map(me=>me[0]),evaluate:({zoom:me},ye)=>Oo({stops:re,base:o.base},n,me).evaluate(me,ye)}}if(p){const $=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:fi.interpolationFactor.bind(void 0,$),zoomStops:o.stops.map(Q=>Q[0]),evaluate:({zoom:Q})=>x(o,n,Q,I,M)}}return{kind:"source",evaluate($,Q){const re=Q&&Q.properties?Q.properties[o.property]:void 0;return re===void 0?na(o.default,n.default):x(o,n,re,I,M)}}}function na(o,n,a){return o!==void 0?o:n!==void 0?n:a!==void 0?a:void 0}function ar(o,n,a,h,p){return na(typeof a===p?h[a]:void 0,o.default,n.default)}function mr(o,n,a){if(kn(a)!=="number")return na(o.default,n.default);const h=o.stops.length;if(h===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[h-1][0])return o.stops[h-1][1];const p=zo(o.stops.map(v=>v[0]),a);return o.stops[p][1]}function Oo(o,n,a){const h=o.base!==void 0?o.base:1;if(kn(a)!=="number")return na(o.default,n.default);const p=o.stops.length;if(p===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const v=zo(o.stops.map(Q=>Q[0]),a),x=function(Q,re,le,me){const ye=me-le,Oe=Q-le;return ye===0?0:re===1?Oe/ye:(Math.pow(re,Oe)-1)/(Math.pow(re,ye)-1)}(a,h,o.stops[v][0],o.stops[v+1][0]),I=o.stops[v][1],M=o.stops[v+1][1];let $=Hs[n.type]||Sh;if(o.colorSpace&&o.colorSpace!=="rgb"){const Q=Wl[o.colorSpace];$=(re,le)=>Q.reverse(Q.interpolate(Q.forward(re),Q.forward(le),x))}return typeof I.evaluate=="function"?{evaluate(...Q){const re=I.evaluate.apply(void 0,Q),le=M.evaluate.apply(void 0,Q);if(re!==void 0&&le!==void 0)return $(re,le,x)}}:$(I,M,x)}function tc(o,n,a){return n.type==="color"?a=J.parse(a):n.type==="formatted"?a=ke.fromString(a.toString()):n.type==="resolvedImage"?a=Ge.fromString(a.toString()):kn(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0),na(a,o.default,n.default)}bn.register(Ra,{error:[{kind:"error"},[Mt],(o,[n])=>{throw new it(n.evaluate(o))}],typeof:[Mt,[hn],(o,[n])=>Wt(He(n.evaluate(o)))],"to-rgba":[Vr(ft,4),[Ir],(o,[n])=>n.evaluate(o).toArray()],rgb:[Ir,[ft,ft,ft],eu],rgba:[Ir,[ft,ft,ft,ft],eu],has:{type:un,overloads:[[[Mt],(o,[n])=>Qu(n.evaluate(o),o.properties())],[[Mt,Qr],(o,[n,a])=>Qu(n.evaluate(o),a.evaluate(o))]]},get:{type:hn,overloads:[[[Mt],(o,[n])=>tu(n.evaluate(o),o.properties())],[[Mt,Qr],(o,[n,a])=>tu(n.evaluate(o),a.evaluate(o))]]},"feature-state":[hn,[Mt],(o,[n])=>tu(n.evaluate(o),o.featureState||{})],properties:[Qr,[],o=>o.properties()],"geometry-type":[Mt,[],o=>o.geometryType()],id:[hn,[],o=>o.id()],zoom:[ft,[],o=>o.globals.zoom],"heatmap-density":[ft,[],o=>o.globals.heatmapDensity||0],"line-progress":[ft,[],o=>o.globals.lineProgress||0],accumulated:[hn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[ft,Qo(ft),(o,n)=>{let a=0;for(const h of n)a+=h.evaluate(o);return a}],"*":[ft,Qo(ft),(o,n)=>{let a=1;for(const h of n)a*=h.evaluate(o);return a}],"-":{type:ft,overloads:[[[ft,ft],(o,[n,a])=>n.evaluate(o)-a.evaluate(o)],[[ft],(o,[n])=>-n.evaluate(o)]]},"/":[ft,[ft,ft],(o,[n,a])=>n.evaluate(o)/a.evaluate(o)],"%":[ft,[ft,ft],(o,[n,a])=>n.evaluate(o)%a.evaluate(o)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(o,[n,a])=>Math.pow(n.evaluate(o),a.evaluate(o))],sqrt:[ft,[ft],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))],log2:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[ft,[ft],(o,[n])=>Math.sin(n.evaluate(o))],cos:[ft,[ft],(o,[n])=>Math.cos(n.evaluate(o))],tan:[ft,[ft],(o,[n])=>Math.tan(n.evaluate(o))],asin:[ft,[ft],(o,[n])=>Math.asin(n.evaluate(o))],acos:[ft,[ft],(o,[n])=>Math.acos(n.evaluate(o))],atan:[ft,[ft],(o,[n])=>Math.atan(n.evaluate(o))],min:[ft,Qo(ft),(o,n)=>Math.min(...n.map(a=>a.evaluate(o)))],max:[ft,Qo(ft),(o,n)=>Math.max(...n.map(a=>a.evaluate(o)))],abs:[ft,[ft],(o,[n])=>Math.abs(n.evaluate(o))],round:[ft,[ft],(o,[n])=>{const a=n.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[ft,[ft],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[ft,[ft],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[un,[Mt,hn],(o,[n,a])=>o.properties()[n.value]===a.value],"filter-id-==":[un,[hn],(o,[n])=>o.id()===n.value],"filter-type-==":[un,[Mt],(o,[n])=>o.geometryType()===n.value],"filter-<":[un,[Mt,hn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h<p}],"filter-id-<":[un,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a<h}],"filter->":[un,[Mt,hn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h>p}],"filter-id->":[un,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a>h}],"filter-<=":[un,[Mt,hn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[un,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a<=h}],"filter->=":[un,[Mt,hn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[un,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a>=h}],"filter-has":[un,[hn],(o,[n])=>n.value in o.properties()],"filter-has-id":[un,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[un,[Vr(Mt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[un,[Vr(hn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[un,[Mt,Vr(hn)],(o,[n,a])=>a.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[un,[Mt,Vr(hn)],(o,[n,a])=>function(h,p,v,x){for(;v<=x;){const I=v+x>>1;if(p[I]===h)return!0;p[I]>h?x=I-1:v=I+1}return!1}(o.properties()[n.value],a.value,0,a.value.length-1)],all:{type:un,overloads:[[[un,un],(o,[n,a])=>n.evaluate(o)&&a.evaluate(o)],[Qo(un),(o,n)=>{for(const a of n)if(!a.evaluate(o))return!1;return!0}]]},any:{type:un,overloads:[[[un,un],(o,[n,a])=>n.evaluate(o)||a.evaluate(o)],[Qo(un),(o,n)=>{for(const a of n)if(a.evaluate(o))return!0;return!1}]]},"!":[un,[un],(o,[n])=>!n.evaluate(o)],"is-supported-script":[un,[Mt],(o,[n])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(n.evaluate(o))}],upcase:[Mt,[Mt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Mt,[Mt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Mt,Qo(hn),(o,n)=>n.map(a=>at(a.evaluate(o))).join("")],"resolved-locale":[Mt,[rr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class nu{constructor(n,a){this.expression=n,this._warningHistory={},this._evaluator=new _n,this._defaultValue=a?function(h){return h.type==="color"&&pr(h.default)?new J(0,0,0,0):h.type==="color"?J.parse(h.default)||null:h.default===void 0?null:h.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,h,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,a,h,p,v,x){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new it(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console!="undefined"&&console.warn(I.message)),this._defaultValue}}}function ra(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ra}function us(o,n){const a=new Vs(Ra,[],n?function(p){const v={color:Ir,string:Mt,number:ft,enum:Mt,boolean:un,formatted:bi,resolvedImage:xr};return p.type==="array"?Vr(v[p.value]||hn,p.length):v[p.type]}(n):void 0),h=a.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?ec(new nu(h,n)):fo(a.errors)}class Ys{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!rs(a.expression)}evaluateWithoutErrorHandling(n,a,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,p,v,x)}evaluate(n,a,h,p,v,x){return this._styleExpression.evaluate(n,a,h,p,v,x)}}class qs{constructor(n,a,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!rs(a.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,a,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,p,v,x)}evaluate(n,a,h,p,v,x){return this._styleExpression.evaluate(n,a,h,p,v,x)}interpolationFactor(n,a,h){return this.interpolationType?fi.interpolationFactor(this.interpolationType,n,a,h):0}}function ru(o,n){const a=us(o,n);if(a.result==="error")return a;const h=a.value.expression,p=$s(h);if(!p&&!ea(n))return fo([new Ht("","data expressions not supported")]);const v=is(h,["zoom"]);if(!v&&!ta(n))return fo([new Ht("","zoom expressions not supported")]);const x=wi(h);return x||v?x instanceof Ht?fo([x]):x instanceof fi&&!Ks(n)?fo([new Ht("",'"interpolate" expressions cannot be used with this property')]):ec(x?new qs(p?"camera":"composite",a.value,x.labels,x instanceof fi?x.interpolation:void 0):new Ys(p?"constant":"source",a.value)):fo([new Ht("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ro{constructor(n,a){this._parameters=n,this._specification=a,je(this,jn(this._parameters,this._specification))}static deserialize(n){return new Ro(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function wi(o){let n=null;if(o instanceof Ws)n=wi(o.result);else if(o instanceof ls){for(const a of o.args)if(n=wi(a),n)break}else(o instanceof Ma||o instanceof fi)&&o.input instanceof bn&&o.input.name==="zoom"&&(n=o);return n instanceof Ht||o.eachChild(a=>{const h=wi(a);h instanceof Ht?n=h:!n&&h?n=new Ht("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Ht("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Oi(o){const n=o.key,a=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec;let I=[];const M=kn(a);if(M!=="object")return[new z(n,a,`object expected, ${M} found`)];for(const $ in a){const Q=$.split(".")[0],re=h[Q]||h["*"];let le;if(p[Q])le=p[Q];else if(h[Q])le=sr;else if(p["*"])le=p["*"];else{if(!h["*"]){I.push(new z(n,a[$],`unknown property "${$}"`));continue}le=sr}I=I.concat(le({key:(n&&`${n}.`)+$,value:a[$],valueSpec:re,style:v,styleSpec:x,object:a,objectKey:$},a))}for(const $ in h)p[$]||h[$].required&&h[$].default===void 0&&a[$]===void 0&&I.push(new z(n,a,`missing required property "${$}"`));return I}function iu(o){const n=o.value,a=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||sr;if(kn(n)!=="array")return[new z(v,n,`array expected, ${kn(n)} found`)];if(a.length&&n.length!==a.length)return[new z(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new z(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let I={type:a.value,values:a.values};p.$version<7&&(I.function=a.function),kn(a.value)==="object"&&(I=a.value);let M=[];for(let $=0;$<n.length;$++)M=M.concat(x({array:n,arrayIndex:$,value:n[$],valueSpec:I,style:h,styleSpec:p,key:`${v}[${$}]`}));return M}function cs(o){const n=o.key,a=o.value,h=o.valueSpec;let p=kn(a);return p==="number"&&a!=a&&(p="NaN"),p!=="number"?[new z(n,a,`number expected, ${p} found`)]:"minimum"in h&&a<h.minimum?[new z(n,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new z(n,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function nc(o){const n=o.valueSpec,a=Xe(o.value.type);let h,p,v,x={};const I=a!=="categorical"&&o.value.property===void 0,M=!I,$=kn(o.value.stops)==="array"&&kn(o.value.stops[0])==="array"&&kn(o.value.stops[0][0])==="object",Q=Oi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(a==="identity")return[new z(me.key,me.value,'identity function may not have a "stops" property')];let ye=[];const Oe=me.value;return ye=ye.concat(iu({key:me.key,value:Oe,valueSpec:me.valueSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),kn(Oe)==="array"&&Oe.length===0&&ye.push(new z(me.key,Oe,"array must have at least one stop")),ye},default:function(me){return sr({key:me.key,value:me.value,valueSpec:n,style:me.style,styleSpec:me.styleSpec})}}});return a==="identity"&&I&&Q.push(new z(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||Q.push(new z(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!Ks(o.valueSpec)&&Q.push(new z(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(M&&!ea(o.valueSpec)?Q.push(new z(o.key,o.value,"property functions not supported")):I&&!ta(o.valueSpec)&&Q.push(new z(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!$||o.value.property!==void 0||Q.push(new z(o.key,o.value,'"property" property is required')),Q;function re(me){let ye=[];const Oe=me.value,Fe=me.key;if(kn(Oe)!=="array")return[new z(Fe,Oe,`array expected, ${kn(Oe)} found`)];if(Oe.length!==2)return[new z(Fe,Oe,`array length 2 expected, length ${Oe.length} found`)];if($){if(kn(Oe[0])!=="object")return[new z(Fe,Oe,`object expected, ${kn(Oe[0])} found`)];if(Oe[0].zoom===void 0)return[new z(Fe,Oe,"object stop key must have zoom")];if(Oe[0].value===void 0)return[new z(Fe,Oe,"object stop key must have value")];if(v&&v>Xe(Oe[0].zoom))return[new z(Fe,Oe[0].zoom,"stop zoom values must appear in ascending order")];Xe(Oe[0].zoom)!==v&&(v=Xe(Oe[0].zoom),p=void 0,x={}),ye=ye.concat(Oi({key:`${Fe}[0]`,value:Oe[0],valueSpec:{zoom:{}},style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:cs,value:le}}))}else ye=ye.concat(le({key:`${Fe}[0]`,value:Oe[0],valueSpec:{},style:me.style,styleSpec:me.styleSpec},Oe));return ra(Qe(Oe[1]))?ye.concat([new z(`${Fe}[1]`,Oe[1],"expressions are not allowed in function stops.")]):ye.concat(sr({key:`${Fe}[1]`,value:Oe[1],valueSpec:n,style:me.style,styleSpec:me.styleSpec}))}function le(me,ye){const Oe=kn(me.value),Fe=Xe(me.value),Ze=me.value!==null?me.value:ye;if(h){if(Oe!==h)return[new z(me.key,Ze,`${Oe} stop domain type must match previous stop domain type ${h}`)]}else h=Oe;if(Oe!=="number"&&Oe!=="string"&&Oe!=="boolean")return[new z(me.key,Ze,"stop domain value must be a number, string, or boolean")];if(Oe!=="number"&&a!=="categorical"){let nt=`number expected, ${Oe} found`;return ea(n)&&a===void 0&&(nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(me.key,Ze,nt)]}return a!=="categorical"||Oe!=="number"||isFinite(Fe)&&Math.floor(Fe)===Fe?a!=="categorical"&&Oe==="number"&&p!==void 0&&Fe<p?[new z(me.key,Ze,"stop domain values must appear in ascending order")]:(p=Fe,a==="categorical"&&Fe in x?[new z(me.key,Ze,"stop domain values must be unique")]:(x[Fe]=!0,[])):[new z(me.key,Ze,`integer expected, found ${Fe}`)]}}function Ri(o){const n=(o.expressionContext==="property"?ru:us)(Qe(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new z(`${o.key}${h.key}`,o.value,h.message));const a=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new z(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!rs(a))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!rs(a))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!is(a,["zoom","feature-state"]))return[new z(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!$s(a))return[new z(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function po(o){const n=o.key,a=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Xe(a))===-1&&p.push(new z(n,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(Xe(a))===-1&&p.push(new z(n,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function Wr(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Wr(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const ia={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fa(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Wr(o)||(o=oa(o));const n=us(o,ia);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,p)=>n.value.evaluate(a,h,{},p),needGeometry:hs(o)}}function Js(o,n){return o<n?-1:o>n?1:0}function hs(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(hs(o[n]))return!0;return!1}function oa(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?aa(o[1],o[2],"=="):n==="!="?sa(aa(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?aa(o[1],o[2],n):n==="any"?(a=o.slice(1),["any"].concat(a.map(oa))):n==="all"?["all"].concat(o.slice(1).map(oa)):n==="none"?["all"].concat(o.slice(1).map(oa).map(sa)):n==="in"?Ei(o[1],o.slice(2)):n==="!in"?sa(Ei(o[1],o.slice(2))):n==="has"?mo(o[1]):n==="!has"?sa(mo(o[1])):n!=="within"||o;var a}function aa(o,n,a){switch(o){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,o,n]}}function Ei(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Js)]]:["filter-in-small",o,["literal",n]]}}function mo(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function sa(o){return["!",o]}function Fo(o){return Wr(Qe(o.value))?Ri(je({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):la(o)}function la(o){const n=o.value,a=o.key;if(kn(n)!=="array")return[new z(a,n,`array expected, ${kn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new z(a,n,"filter array must have at least 1 element")];switch(v=v.concat(po({key:`${a}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Xe(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Xe(n[1])==="$type"&&v.push(new z(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new z(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=kn(n[1]),p!=="string"&&v.push(new z(`${a}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=kn(n[x]),Xe(n[1])==="$type"?v=v.concat(po({key:`${a}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new z(`${a}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(la({key:`${a}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=kn(n[1]),n.length!==2?v.push(new z(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new z(`${a}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=kn(n[1]),n.length!==2?v.push(new z(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new z(`${a}[1]`,n[1],`object expected, ${p} found`))}return v}function ou(o,n){const a=o.key,h=o.style,p=o.styleSpec,v=o.value,x=o.objectKey,I=p[`${n}_${o.layerType}`];if(!I)return[];const M=x.match(/^(.*)-transition$/);if(n==="paint"&&M&&I[M[1]]&&I[M[1]].transition)return sr({key:a,value:v,valueSpec:p.transition,style:h,styleSpec:p});const $=o.valueSpec||I[x];if(!$)return[new z(a,v,`unknown property "${x}"`)];let Q;if(kn(v)==="string"&&ea($)&&!$.tokens&&(Q=/^{([^}]+)}$/.exec(v)))return[new z(a,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Q[1])} }\`.`)];const re=[];return o.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&re.push(new z(a,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&pr(Qe(v))&&Xe(v.type)==="identity"&&re.push(new z(a,v,'"text-font" does not support identity functions'))),re.concat(sr({key:o.key,value:v,valueSpec:$,style:h,styleSpec:p,expressionContext:"property",propertyType:n,propertyKey:x}))}function Ba(o){return ou(o,"paint")}function au(o){return ou(o,"layout")}function su(o){let n=[];const a=o.value,h=o.key,p=o.style,v=o.styleSpec;a.type||a.ref||n.push(new z(h,a,'either "type" or "ref" is required'));let x=Xe(a.type);const I=Xe(a.ref);if(a.id){const M=Xe(a.id);for(let $=0;$<o.arrayIndex;$++){const Q=p.layers[$];Xe(Q.id)===M&&n.push(new z(h,a.id,`duplicate layer id "${a.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in a){let M;["type","source","source-layer","filter","layout"].forEach($=>{$ in a&&n.push(new z(h,a[$],`"${$}" is prohibited for ref layers`))}),p.layers.forEach($=>{Xe($.id)===I&&(M=$)}),M?M.ref?n.push(new z(h,a.ref,"ref cannot reference another ref layer")):x=Xe(M.type):n.push(new z(h,a.ref,`ref layer "${I}" not found`))}else if(x!=="background")if(a.source){const M=p.sources&&p.sources[a.source],$=M&&Xe(M.type);M?$==="vector"&&x==="raster"?n.push(new z(h,a.source,`layer "${a.id}" requires a raster source`)):$==="raster"&&x!=="raster"?n.push(new z(h,a.source,`layer "${a.id}" requires a vector source`)):$!=="vector"||a["source-layer"]?$==="raster-dem"&&x!=="hillshade"?n.push(new z(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||$==="geojson"&&M.lineMetrics||n.push(new z(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new z(h,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new z(h,a.source,`source "${a.source}" not found`))}else n.push(new z(h,a,'missing required property "source"'));return n=n.concat(Oi({key:h,value:a,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>sr({key:`${h}.type`,value:a.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:Fo,layout:M=>Oi({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":$=>au(je({layerType:x},$))}}),paint:M=>Oi({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":$=>Ba(je({layerType:x},$))}})}})),n}function di(o){const n=o.value,a=o.key,h=kn(n);return h!=="string"?[new z(a,n,`string expected, ${h} found`)]:[]}const lu={promoteId:function({key:o,value:n}){if(kn(n)==="string")return di({key:o,value:n});{const a=[];for(const h in n)a.push(...di({key:`${o}.${h}`,value:n[h]}));return a}}};function rc(o){const n=o.value,a=o.key,h=o.styleSpec,p=o.style;if(!n.type)return[new z(a,n,'"type" is required')];const v=Xe(n.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=Oi({key:a,value:n,valueSpec:h[`source_${v.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:lu}),x;case"geojson":if(x=Oi({key:a,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:lu}),n.cluster)for(const I in n.clusterProperties){const[M,$]=n.clusterProperties[I],Q=typeof M=="string"?[M,["accumulated"],["get",I]]:M;x.push(...Ri({key:`${a}.${I}.map`,value:$,expressionContext:"cluster-map"})),x.push(...Ri({key:`${a}.${I}.reduce`,value:Q,expressionContext:"cluster-reduce"}))}return x;case"video":return Oi({key:a,value:n,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return Oi({key:a,value:n,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new z(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return po({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:h})}}function ja(o){const n=o.value,a=o.styleSpec,h=a.light,p=o.style;let v=[];const x=kn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new z("light",n,`object expected, ${x} found`)]),v;for(const I in n){const M=I.match(/^(.*)-transition$/);v=v.concat(M&&h[M[1]]&&h[M[1]].transition?sr({key:I,value:n[I],valueSpec:a.transition,style:p,styleSpec:a}):h[I]?sr({key:I,value:n[I],valueSpec:h[I],style:p,styleSpec:a}):[new z(I,n[I],`unknown property "${I}"`)])}return v}const ua={"*":()=>[],array:iu,boolean:function(o){const n=o.value,a=o.key,h=kn(n);return h!=="boolean"?[new z(a,n,`boolean expected, ${h} found`)]:[]},number:cs,color:function(o){const n=o.key,a=o.value,h=kn(a);return h!=="string"?[new z(n,a,`color expected, ${h} found`)]:ir(a)===null?[new z(n,a,`color expected, "${a}" found`)]:[]},constants:we,enum:po,filter:Fo,function:nc,layer:su,object:Oi,source:rc,light:ja,string:di,formatted:function(o){return di(o).length===0?[]:Ri(o)},resolvedImage:function(o){return di(o).length===0?[]:Ri(o)}};function sr(o){const n=o.value,a=o.valueSpec,h=o.styleSpec;return a.expression&&pr(Xe(n))?nc(o):a.expression&&ra(Qe(n))?Ri(o):a.type&&ua[a.type]?ua[a.type](o):Oi(je({},o,{valueSpec:a.type?h[a.type]:a}))}function fs(o){const n=o.value,a=o.key,h=di(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new z(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new z(a,n,'"glyphs" url must include a "{range}" token'))),h}function Bo(o,n=A){let a=[];return a=a.concat(sr({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:fs,"*":()=>[]}})),o.constants&&(a=a.concat(we({key:"constants",value:o.constants,style:o,styleSpec:n}))),N(a)}function N(o){return[].concat(o).sort((n,a)=>n.line-a.line)}function fe(o){return function(...n){return N(o.apply(this,n))}}Bo.source=fe(rc),Bo.light=fe(ja),Bo.layer=fe(su),Bo.filter=fe(Fo),Bo.paintProperty=fe(Ba),Bo.layoutProperty=fe(au);const Le=Bo,tt=Le.light,kt=Le.paintProperty,Ct=Le.layoutProperty;function Xt(o,n){let a=!1;if(n&&n.length)for(const h of n)o.fire(new ot(new Error(h.message))),a=!0;return a}class Kt{constructor(n,a,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(a=x[1])+2*(h=x[2]);for(let M=0;M<this.d*this.d;M++){const $=x[3+M],Q=x[3+M+1];p.push($===Q?null:x.subarray($,Q))}const I=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],I),this.bboxes=x.subarray(I),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=h,this.scale=a/n,this.uid=0;const v=h/a*n;this.min=-v,this.max=n+v}insert(n,a,h,p,v){this._forEachCell(a,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,h,p,v,x){this.cells[v].push(x)}query(n,a,h,p,v){const x=this.min,I=this.max;if(n<=x&&a<=x&&I<=h&&I<=p&&!v)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(n,a,h,p,this._queryCell,M,{},v),M}}_queryCell(n,a,h,p,v,x,I,M){const $=this.cells[v];if($!==null){const Q=this.keys,re=this.bboxes;for(let le=0;le<$.length;le++){const me=$[le];if(I[me]===void 0){const ye=4*me;(M?M(re[ye+0],re[ye+1],re[ye+2],re[ye+3]):n<=re[ye+2]&&a<=re[ye+3]&&h>=re[ye+0]&&p>=re[ye+1])?(I[me]=!0,x.push(Q[me])):I[me]=!1}}}}_forEachCell(n,a,h,p,v,x,I,M){const $=this._convertToCellCoord(n),Q=this._convertToCellCoord(a),re=this._convertToCellCoord(h),le=this._convertToCellCoord(p);for(let me=$;me<=re;me++)for(let ye=Q;ye<=le;ye++){const Oe=this.d*ye+me;if((!M||M(this._convertFromCellCoord(me),this._convertFromCellCoord(ye),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ye+1)))&&v.call(this,n,a,h,p,Oe,x,I,M))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(a+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=a;for(let x=0;x<n.length;x++){const I=n[x];p[3+x]=v,p.set(I,v),v+=I.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,a){const h=n.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(n){return new Kt(n.buffer)}}const dn={};function _t(o,n,a={}){Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),dn[o]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}_t("Object",Object),_t("TransferableGridIndex",Kt),_t("Color",J),_t("Error",Error),_t("AJAXError",Nt),_t("ResolvedImage",Ge),_t("StylePropertyFunction",Ro),_t("StyleExpression",nu,{omit:["_evaluator"]}),_t("ZoomDependentExpression",qs),_t("ZoomConstantExpression",Ys),_t("CompoundExpression",bn,{omit:["_evaluate"]});for(const o in Ra)Ra[o]._classRegistryKey||_t(`Expression_${o}`,Ra[o]);function Dn(o){return o&&typeof ArrayBuffer!="undefined"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Zn(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Dn(o)||be(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return n&&n.push(a.buffer),a}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const h of o)a.push(Zn(h,n));return a}if(typeof o=="object"){const a=o.constructor,h=a._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");const p=a.serialize?a.serialize(o,n):{};if(!a.serialize){for(const v in o){if(!o.hasOwnProperty(v)||dn[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=dn[h].shallow.indexOf(v)>=0?x:Zn(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function er(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Dn(o)||be(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(er);if(typeof o=="object"){const n=o.$name||"Object";if(!dn[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=dn[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(o);const h=Object.create(a.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=dn[n].shallow.indexOf(p)>=0?v:er(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Pr{constructor(){this.first=!0}update(n,a){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const bt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Fi(o){for(const n of o)if(Qs(n.charCodeAt(0)))return!0;return!1}function go(o){for(const n of o)if(!jo(n.charCodeAt(0)))return!1;return!0}function jo(o){return!(bt.Arabic(o)||bt["Arabic Supplement"](o)||bt["Arabic Extended-A"](o)||bt["Arabic Presentation Forms-A"](o)||bt["Arabic Presentation Forms-B"](o))}function Qs(o){return!(o!==746&&o!==747&&(o<4352||!(bt["Bopomofo Extended"](o)||bt.Bopomofo(o)||bt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||bt["CJK Compatibility Ideographs"](o)||bt["CJK Compatibility"](o)||bt["CJK Radicals Supplement"](o)||bt["CJK Strokes"](o)||!(!bt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||bt["CJK Unified Ideographs Extension A"](o)||bt["CJK Unified Ideographs"](o)||bt["Enclosed CJK Letters and Months"](o)||bt["Hangul Compatibility Jamo"](o)||bt["Hangul Jamo Extended-A"](o)||bt["Hangul Jamo Extended-B"](o)||bt["Hangul Jamo"](o)||bt["Hangul Syllables"](o)||bt.Hiragana(o)||bt["Ideographic Description Characters"](o)||bt.Kanbun(o)||bt["Kangxi Radicals"](o)||bt["Katakana Phonetic Extensions"](o)||bt.Katakana(o)&&o!==12540||!(!bt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!bt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||bt["Unified Canadian Aboriginal Syllabics"](o)||bt["Unified Canadian Aboriginal Syllabics Extended"](o)||bt["Vertical Forms"](o)||bt["Yijing Hexagram Symbols"](o)||bt["Yi Syllables"](o)||bt["Yi Radicals"](o))))}function ca(o){return!(Qs(o)||function(n){return!!(bt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||bt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||bt["Letterlike Symbols"](n)||bt["Number Forms"](n)||bt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||bt["Control Pictures"](n)&&n!==9251||bt["Optical Character Recognition"](n)||bt["Enclosed Alphanumerics"](n)||bt["Geometric Shapes"](n)||bt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||bt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||bt["CJK Symbols and Punctuation"](n)||bt.Katakana(n)||bt["Private Use Area"](n)||bt["CJK Compatibility Forms"](n)||bt["Small Form Variants"](n)||bt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function ds(o){return o>=1424&&o<=2303||bt["Arabic Presentation Forms-A"](o)||bt["Arabic Presentation Forms-B"](o)}function w0(o,n){return!(!n&&ds(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||bt.Khmer(o))}function E0(o){for(const n of o)if(ds(n.charCodeAt(0)))return!0;return!1}const Ch="deferred",ic="loading",Th="loaded";let Ah=null,Si="unavailable",Da=null;const pd=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Si="error"),Ah&&Ah(o)};function Ih(){Ph.fire(new Ye("pluginStateChange",{pluginStatus:Si,pluginURL:Da}))}const Ph=new se,el=function(){return Si},md=function(){if(Si!==Ch||!Da)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Si=ic,Ih(),Da&&wn({url:Da},o=>{o?pd(o):(Si=Th,Ih())})},Ci={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Si===Th||Ci.applyArabicShaping!=null,isLoading:()=>Si===ic,setState(o){Si=o.pluginStatus,Da=o.pluginURL},isParsed:()=>Ci.applyArabicShaping!=null&&Ci.processBidirectionalText!=null&&Ci.processStyledBidirectionalText!=null,getPluginURL:()=>Da};class lr{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pr,this.transition={})}isSupportedScript(n){return function(a,h){for(const p of a)if(!w0(p.charCodeAt(0),h))return!1;return!0}(n,Ci.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class oc{constructor(n,a){this.property=n,this.value=a,this.expression=function(h,p){if(pr(h))return new Ro(h,p);if(ra(h)){const v=ru(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return typeof h=="string"&&p.type==="color"&&(v=J.parse(h)),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,h){return this.property.possiblyEvaluate(this,n,a,h)}}class kh{constructor(n){this.property=n,this.value=new oc(n,void 0)}transitioned(n,a){return new gd(this.property,this.value,a,X({},n.transition,this.transition),n.now)}untransitioned(){return new gd(this.property,this.value,null,{},0)}}class Mh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return B(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new kh(this._values[n].property)),this._values[n].value=new oc(this._values[n].property,a===null?void 0:B(a))}getTransition(n){return B(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new kh(this._values[n].property)),this._values[n].transition=B(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h);const p=this.getTransition(a);p!==void 0&&(n[`${a}-transition`]=p)}return n}transitioned(n,a){const h=new yd(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,a._values[p]);return h}untransitioned(){const n=new yd(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class gd{constructor(n,a,h,p,v){this.property=n,this.value=a,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,a,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,a,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,a,h);{const I=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,a,h),v,function(M){if(M<=0)return 0;if(M>=1)return 1;const $=M*M,Q=$*M;return 4*(M<.5?Q:3*(M-$)+Q-.75)}(I))}}return v}}class yd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,h){const p=new ac(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,a,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class S0{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return B(this._values[n].value)}setValue(n,a){this._values[n]=new oc(this._values[n].property,a===null?void 0:B(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h)}return n}possiblyEvaluate(n,a,h){const p=new ac(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,a,h);return p}}class Do{constructor(n,a,h){this.property=n,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,h,p){return this.property.evaluate(this.value,this.parameters,n,a,h,p)}}class ac{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,a){return n.expression.evaluate(a)}interpolate(n,a,h){const p=Hs[this.specification.type];return p?p(n,a,h):n}}class ln{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,h,p){return new Do(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},h,p)}:n.expression,a)}interpolate(n,a,h){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Do(this,{kind:"constant",value:void 0},n.parameters);const p=Hs[this.specification.type];return p?new Do(this,{kind:"constant",value:p(n.value.value,a.value.value,h)},n.parameters):n}evaluate(n,a,h,p,v,x){return n.kind==="constant"?n.value:n.evaluate(a,h,p,v,x)}}class tl extends ln{possiblyEvaluate(n,a,h,p){if(n.value===void 0)return new Do(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,I=this._calculate(x,x,x,a);return new Do(this,{kind:"constant",value:I},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Do(this,{kind:"constant",value:v},a)}return new Do(this,n.expression,a)}evaluate(n,a,h,p,v,x){if(n.kind==="source"){const I=n.evaluate(a,h,p,v,x);return this._calculate(I,I,I,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},h,p),n.evaluate({zoom:Math.floor(a.zoom)},h,p),n.evaluate({zoom:Math.floor(a.zoom)+1},h,p),a):n.value}_calculate(n,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class sc{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,p);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new lr(Math.floor(a.zoom-1),a)),n.expression.evaluate(new lr(Math.floor(a.zoom),a)),n.expression.evaluate(new lr(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class uu{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,p){return!!n.expression.evaluate(a,null,{},h,p)}interpolate(){return!1}}class Ti{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const h=n[a];h.specification.overridable&&this.overridableProperties.push(a);const p=this.defaultPropertyValues[a]=new oc(h,void 0),v=this.defaultTransitionablePropertyValues[a]=new kh(h);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=p.possiblyEvaluate({})}}}_t("DataDrivenProperty",ln),_t("DataConstantProperty",qt),_t("CrossFadedDataDrivenProperty",tl),_t("CrossFadedProperty",sc),_t("ColorRampProperty",uu);const ha="-transition";class Bi extends se{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new S0(a.layout)),a.paint)){this._transitionablePaint=new Mh(a.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ac(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,h={}){a!=null&&this._validate(Ct,`layers.${this.id}.layout.${n}`,n,a,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(ha)?this._transitionablePaint.getTransition(n.slice(0,-ha.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,h={}){if(a!=null&&this._validate(kt,`layers.${this.id}.paint.${n}`,n,a,h))return!1;if(n.endsWith(ha))return this._transitionablePaint.setTransition(n.slice(0,-ha.length),a||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),I=p.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const M=this._transitionablePaint._values[n].value;return M.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,I,M)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),V(n,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(n,a,h,p,v={}){return(!v||v.validate!==!1)&&Xt(this,n.call(Le,{key:a,layerType:this.type,objectKey:h,value:p,styleSpec:A,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Do&&ea(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const cu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class lc{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _r{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function br(o,n=1){let a=0,h=0;return{members:o.map(p=>{const v=cu[p.type].BYTES_PER_ELEMENT,x=a=vd(a,Math.max(n,v)),I=p.components||1;return h=Math.max(h,v),a+=v*I,{name:p.name,type:p.type,components:I,offset:x}}),size:vd(a,Math.max(h,n)),alignment:n}}function vd(o,n){return Math.ceil(o/n)*n}class hu extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.int16[p+0]=a,this.int16[p+1]=h,n}}hu.prototype.bytesPerElement=4,_t("StructArrayLayout2i4",hu);class uc extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const x=4*n;return this.int16[x+0]=a,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,n}}uc.prototype.bytesPerElement=8,_t("StructArrayLayout4i8",uc);class fu extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x){const I=this.length;return this.resize(I+1),this.emplace(I,n,a,h,p,v,x)}emplace(n,a,h,p,v,x,I){const M=6*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.int16[M+2]=p,this.int16[M+3]=v,this.int16[M+4]=x,this.int16[M+5]=I,n}}fu.prototype.bytesPerElement=12,_t("StructArrayLayout2i4i12",fu);class m extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x){const I=this.length;return this.resize(I+1),this.emplace(I,n,a,h,p,v,x)}emplace(n,a,h,p,v,x,I){const M=4*n,$=8*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.uint8[$+4]=p,this.uint8[$+5]=v,this.uint8[$+6]=x,this.uint8[$+7]=I,n}}m.prototype.bytesPerElement=8,_t("StructArrayLayout2i4ub8",m);class i extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.float32[p+0]=a,this.float32[p+1]=h,n}}i.prototype.bytesPerElement=8,_t("StructArrayLayout2f8",i);class c extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,I,M,$,Q){const re=this.length;return this.resize(re+1),this.emplace(re,n,a,h,p,v,x,I,M,$,Q)}emplace(n,a,h,p,v,x,I,M,$,Q,re){const le=10*n;return this.uint16[le+0]=a,this.uint16[le+1]=h,this.uint16[le+2]=p,this.uint16[le+3]=v,this.uint16[le+4]=x,this.uint16[le+5]=I,this.uint16[le+6]=M,this.uint16[le+7]=$,this.uint16[le+8]=Q,this.uint16[le+9]=re,n}}c.prototype.bytesPerElement=20,_t("StructArrayLayout10ui20",c);class d extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,I,M,$,Q,re,le){const me=this.length;return this.resize(me+1),this.emplace(me,n,a,h,p,v,x,I,M,$,Q,re,le)}emplace(n,a,h,p,v,x,I,M,$,Q,re,le,me){const ye=12*n;return this.int16[ye+0]=a,this.int16[ye+1]=h,this.int16[ye+2]=p,this.int16[ye+3]=v,this.uint16[ye+4]=x,this.uint16[ye+5]=I,this.uint16[ye+6]=M,this.uint16[ye+7]=$,this.int16[ye+8]=Q,this.int16[ye+9]=re,this.int16[ye+10]=le,this.int16[ye+11]=me,n}}d.prototype.bytesPerElement=24,_t("StructArrayLayout4i4ui4i24",d);class y extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=h,this.float32[v+2]=p,n}}y.prototype.bytesPerElement=12,_t("StructArrayLayout3f12",y);class b extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}b.prototype.bytesPerElement=4,_t("StructArrayLayout1ul4",b);class P extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,I,M,$){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,a,h,p,v,x,I,M,$)}emplace(n,a,h,p,v,x,I,M,$,Q){const re=10*n,le=5*n;return this.int16[re+0]=a,this.int16[re+1]=h,this.int16[re+2]=p,this.int16[re+3]=v,this.int16[re+4]=x,this.int16[re+5]=I,this.uint32[le+3]=M,this.uint16[re+8]=$,this.uint16[re+9]=Q,n}}P.prototype.bytesPerElement=20,_t("StructArrayLayout6i1ul2ui20",P);class L extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x){const I=this.length;return this.resize(I+1),this.emplace(I,n,a,h,p,v,x)}emplace(n,a,h,p,v,x,I){const M=6*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.int16[M+2]=p,this.int16[M+3]=v,this.int16[M+4]=x,this.int16[M+5]=I,n}}L.prototype.bytesPerElement=12,_t("StructArrayLayout2i2i2i12",L);class D extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,h,p,v)}emplace(n,a,h,p,v,x){const I=4*n,M=8*n;return this.float32[I+0]=a,this.float32[I+1]=h,this.float32[I+2]=p,this.int16[M+6]=v,this.int16[M+7]=x,n}}D.prototype.bytesPerElement=16,_t("StructArrayLayout2f1f2i16",D);class q extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const x=12*n,I=3*n;return this.uint8[x+0]=a,this.uint8[x+1]=h,this.float32[I+1]=p,this.float32[I+2]=v,n}}q.prototype.bytesPerElement=12,_t("StructArrayLayout2ub2f12",q);class oe extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}oe.prototype.bytesPerElement=6,_t("StructArrayLayout3ui6",oe);class ce extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,I,M,$,Q,re,le,me,ye,Oe,Fe,Ze){const nt=this.length;return this.resize(nt+1),this.emplace(nt,n,a,h,p,v,x,I,M,$,Q,re,le,me,ye,Oe,Fe,Ze)}emplace(n,a,h,p,v,x,I,M,$,Q,re,le,me,ye,Oe,Fe,Ze,nt){const et=24*n,lt=12*n,vt=48*n;return this.int16[et+0]=a,this.int16[et+1]=h,this.uint16[et+2]=p,this.uint16[et+3]=v,this.uint32[lt+2]=x,this.uint32[lt+3]=I,this.uint32[lt+4]=M,this.uint16[et+10]=$,this.uint16[et+11]=Q,this.uint16[et+12]=re,this.float32[lt+7]=le,this.float32[lt+8]=me,this.uint8[vt+36]=ye,this.uint8[vt+37]=Oe,this.uint8[vt+38]=Fe,this.uint32[lt+10]=Ze,this.int16[et+22]=nt,n}}ce.prototype.bytesPerElement=48,_t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ce);class Se extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,I,M,$,Q,re,le,me,ye,Oe,Fe,Ze,nt,et,lt,vt,dt,jt,tn,zt,Lt,At,Dt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,n,a,h,p,v,x,I,M,$,Q,re,le,me,ye,Oe,Fe,Ze,nt,et,lt,vt,dt,jt,tn,zt,Lt,At,Dt)}emplace(n,a,h,p,v,x,I,M,$,Q,re,le,me,ye,Oe,Fe,Ze,nt,et,lt,vt,dt,jt,tn,zt,Lt,At,Dt,Ot){const wt=34*n,sn=17*n;return this.int16[wt+0]=a,this.int16[wt+1]=h,this.int16[wt+2]=p,this.int16[wt+3]=v,this.int16[wt+4]=x,this.int16[wt+5]=I,this.int16[wt+6]=M,this.int16[wt+7]=$,this.uint16[wt+8]=Q,this.uint16[wt+9]=re,this.uint16[wt+10]=le,this.uint16[wt+11]=me,this.uint16[wt+12]=ye,this.uint16[wt+13]=Oe,this.uint16[wt+14]=Fe,this.uint16[wt+15]=Ze,this.uint16[wt+16]=nt,this.uint16[wt+17]=et,this.uint16[wt+18]=lt,this.uint16[wt+19]=vt,this.uint16[wt+20]=dt,this.uint16[wt+21]=jt,this.uint16[wt+22]=tn,this.uint32[sn+12]=zt,this.float32[sn+13]=Lt,this.float32[sn+14]=At,this.float32[sn+15]=Dt,this.float32[sn+16]=Ot,n}}Se.prototype.bytesPerElement=68,_t("StructArrayLayout8i15ui1ul4f68",Se);class Me extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}Me.prototype.bytesPerElement=4,_t("StructArrayLayout1f4",Me);class Ce extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=h,this.int16[v+2]=p,n}}Ce.prototype.bytesPerElement=6,_t("StructArrayLayout3i6",Ce);class Re extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=4*n;return this.uint32[2*n+0]=a,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}Re.prototype.bytesPerElement=8,_t("StructArrayLayout1ul2ui8",Re);class Ve extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.uint16[p+0]=a,this.uint16[p+1]=h,n}}Ve.prototype.bytesPerElement=4,_t("StructArrayLayout2ui4",Ve);class We extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}We.prototype.bytesPerElement=2,_t("StructArrayLayout1ui2",We);class Je extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const x=4*n;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,n}}Je.prototype.bytesPerElement=16,_t("StructArrayLayout4f16",Je);class Ke extends lc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ie(this.anchorPointX,this.anchorPointY)}}Ke.prototype.size=20;class ct extends P{get(n){return new Ke(this,n)}}_t("CollisionBoxArray",ct);class rt extends lc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}rt.prototype.size=48;class ut extends ce{get(n){return new rt(this,n)}}_t("PlacedSymbolArray",ut);class xt extends lc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}xt.prototype.size=68;class St extends Se{get(n){return new xt(this,n)}}_t("SymbolInstanceArray",St);class mt extends Me{getoffsetX(n){return this.float32[1*n+0]}}_t("GlyphOffsetArray",mt);class Yt extends Ce{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}_t("SymbolLineVertexArray",Yt);class Ft extends lc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ft.prototype.size=8;class pn extends Re{get(n){return new Ft(this,n)}}_t("FeatureIndexArray",pn);class $n extends hu{}class In extends hu{}class Pn extends fu{}class wr extends m{}class vn extends i{}class Ln extends c{}class gr extends d{}class ei extends y{}class ji extends b{}class Di extends L{}class yo extends q{}class Ni extends oe{}class vo extends Ve{}const Na=br([{name:"a_pos",components:2,type:"Int16"}],4),{members:ps}=Na;class Kn{constructor(n=[]){this.segments=n}prepareSegment(n,a,h,p){let v=this.segments[this.segments.length-1];return n>Kn.MAX_VERTEX_ARRAY_LENGTH&&G(`Max vertices per segment is ${Kn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Kn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,h,p){return new Kn([{vertexOffset:n,primitiveOffset:a,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Zr(o,n){return 256*(o=T(Math.floor(o),0,255))+T(Math.floor(n),0,255)}Kn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_t("SegmentVector",Kn);const Nn=br([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Fr={exports:{}},Ui={exports:{}};Ui.exports=function(o,n){var a,h,p,v,x,I,M,$;for(h=o.length-(a=3&o.length),p=n,x=3432918353,I=461845907,$=0;$<h;)M=255&o.charCodeAt($)|(255&o.charCodeAt(++$))<<8|(255&o.charCodeAt(++$))<<16|(255&o.charCodeAt(++$))<<24,++$,p=27492+(65535&(v=5*(65535&(p=(p^=M=(65535&(M=(M=(65535&M)*x+(((M>>>16)*x&65535)<<16)&4294967295)<<15|M>>>17))*I+(((M>>>16)*I&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(M=0,a){case 3:M^=(255&o.charCodeAt($+2))<<16;case 2:M^=(255&o.charCodeAt($+1))<<8;case 1:p^=M=(65535&(M=(M=(65535&(M^=255&o.charCodeAt($)))*x+(((M>>>16)*x&65535)<<16)&4294967295)<<15|M>>>17))*I+(((M>>>16)*I&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var ur={exports:{}};ur.exports=function(o,n){for(var a,h=o.length,p=n^h,v=0;h>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var ms=Ui.exports,gs=ur.exports;Fr.exports=ms,Fr.exports.murmur3=ms,Fr.exports.murmur2=gs;var nl=Fr.exports;class cc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,h,p){this.ids.push(xd(n)),this.positions.push(a,h,p)}getPositions(n){const a=xd(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=a?p=x:h=x+1}const v=[];for(;this.ids[h]===a;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,a){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return zh(h,p,0,h.length-1),a&&a.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const a=new cc;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function xd(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:nl(String(o))}function zh(o,n,a,h){for(;a<h;){const p=o[a+h>>1];let v=a-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;Ua(o,v,x),Ua(n,3*v,3*x),Ua(n,3*v+1,3*x+1),Ua(n,3*v+2,3*x+2)}x-a<h-x?(zh(o,n,a,x),a=x+1):(zh(o,n,x+1,h),h=x)}}function Ua(o,n,a){const h=o[n];o[n]=o[a],o[a]=h}_t("FeaturePositionMap",cc);class ys{constructor(n,a){this.gl=n.gl,this.location=a}}class vs extends ys{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class hc extends ys{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class kx extends ys{constructor(n,a){super(n,a),this.current=J.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Q6=new Float32Array(16);function C0(o){return[Zr(255*o.r,255*o.g),Zr(255*o.b,255*o.a)]}class Lh{constructor(n,a,h){this.value=n,this.uniformNames=a.map(p=>`u_${p}`),this.type=h}setUniform(n,a,h){n.set(h.constantOr(this.value))}getBinding(n,a,h){return this.type==="color"?new kx(n,a):new vs(n,a)}}class fc{constructor(n,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,a,h){return h.substr(0,9)==="u_pattern"?new hc(n,a):new vs(n,a)}}class xs{constructor(n,a,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,a,h,p,v){const x=this.paintVertexArray.length,I=this.expression.evaluate(new lr(0),a,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,I)}updatePaintArray(n,a,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,a,v)}_setPaintValue(n,a,h){if(this.type==="color"){const p=C0(h);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<a;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fa{constructor(n,a,h,p,v,x){this.expression=n,this.uniformNames=a.map(I=>`u_${I}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(I=>({name:`a_${I}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,a,h,p,v){const x=this.expression.evaluate(new lr(this.zoom),a,{},p,[],v),I=this.expression.evaluate(new lr(this.zoom+1),a,{},p,[],v),M=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(M,n,x,I)}updatePaintArray(n,a,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,a,v,x)}_setPaintValue(n,a,h,p){if(this.type==="color"){const v=C0(h),x=C0(p);for(let I=n;I<a;I++)this.paintVertexArray.emplace(I,v[0],v[1],x[0],x[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,p=T(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,a,h){return new vs(n,a)}}class rl{constructor(n,a,h,p,v,x){this.expression=n,this.type=a,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,a,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(n,a,h,p,v){this._setPaintValues(n,a,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,a,h,p){if(!p||!h)return;const{min:v,mid:x,max:I}=h,M=p[v],$=p[x],Q=p[I];if(M&&$&&Q)for(let re=n;re<a;re++)this.zoomInPaintVertexArray.emplace(re,$.tl[0],$.tl[1],$.br[0],$.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],$.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,$.tl[0],$.tl[1],$.br[0],$.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],$.pixelRatio,Q.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Nn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Nn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Mx{constructor(n,a,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Do&&ea(x.property.specification)))continue;const I=eE(v,n.type),M=x.value,$=x.property.specification.type,Q=x.property.useIntegerZoom,re=x.property.specification["property-type"],le=re==="cross-faded"||re==="cross-faded-data-driven";if(M.kind==="constant")this.binders[v]=le?new fc(M.value,I):new Lh(M.value,I,$),p.push(`/u_${v}`);else if(M.kind==="source"||le){const me=zx(v,$,"source");this.binders[v]=le?new rl(M,$,Q,a,me,n.id):new xs(M,I,$,me),p.push(`/a_${v}`)}else{const me=zx(v,$,"composite");this.binders[v]=new fa(M,I,$,Q,a,me),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof xs||a instanceof fa?a.maxValue:0}populatePaintArrays(n,a,h,p,v){for(const x in this.binders){const I=this.binders[x];(I instanceof xs||I instanceof fa||I instanceof rl)&&I.populatePaintArray(n,a,h,p,v)}}setConstantPatternPositions(n,a){for(const h in this.binders){const p=this.binders[h];p instanceof fc&&p.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,h,p,v){let x=!1;for(const I in n){const M=a.getPositions(I);for(const $ of M){const Q=h.feature($.index);for(const re in this.binders){const le=this.binders[re];if((le instanceof xs||le instanceof fa||le instanceof rl)&&le.expression.isStateDependent===!0){const me=p.paint.get(re);le.expression=me.value,le.updatePaintArray($.start,$.end,Q,n[I],v),x=!0}}}}return x}defines(){const n=[];for(const a in this.binders){const h=this.binders[a];(h instanceof Lh||h instanceof fc)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof xs||h instanceof fa)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof rl)for(let p=0;p<Nn.members.length;p++)n.push(Nn.members[p].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof Lh||h instanceof fc||h instanceof fa)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Lh||v instanceof fc||v instanceof fa){for(const x of v.uniformNames)if(a[x]){const I=v.getBinding(n,a[x],x);h.push({name:x,property:p,binding:I})}}}return h}setUniforms(n,a,h,p){for(const{name:v,property:x,binding:I}of a)this.binders[x].setUniform(I,p,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(n&&h instanceof rl){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof xs||h instanceof fa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const a in this.binders){const h=this.binders[a];(h instanceof xs||h instanceof fa||h instanceof rl)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof xs||a instanceof fa||a instanceof rl)&&a.destroy()}}}class du{constructor(n,a,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new Mx(p,a,h);this.needsUpload=!1,this._featureMap=new cc,this._bufferOffset=0}populatePaintArrays(n,a,h,p,v,x){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(n,a,p,v,x);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function eE(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function zx(o,n,a){const h={color:{source:i,composite:Je},number:{source:Me,composite:i}},p=function(v){return{"line-pattern":{source:Ln,composite:Ln},"fill-pattern":{source:Ln,composite:Ln},"fill-extrusion-pattern":{source:Ln,composite:Ln}}[v]}(o);return p&&p[a]||h[n][a]}_t("ConstantBinder",Lh),_t("CrossFadedConstantBinder",fc),_t("SourceExpressionBinder",xs),_t("CrossFadedCompositeBinder",rl),_t("CompositeExpressionBinder",fa),_t("ProgramConfiguration",Mx,{omit:["_buffers"]}),_t("ProgramConfigurationSet",du);var Xr=8192;const T0=Math.pow(2,14)-1,Lx=-T0-1;function pu(o){const n=Xr/o.extent,a=o.loadGeometry();for(let h=0;h<a.length;h++){const p=a[h];for(let v=0;v<p.length;v++){const x=p[v],I=Math.round(x.x*n),M=Math.round(x.y*n);x.x=T(I,Lx,T0),x.y=T(M,Lx,T0),(I<x.x||I>x.x+1||M<x.y||M>x.y+1)&&G("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function mu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?pu(o):[]}}function _d(o,n,a,h,p){o.emplaceBack(2*n+(h+1)/2,2*a+(p+1)/2)}class A0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new $n,this.indexArray=new Ni,this.segments=new Kn,this.programConfigurations=new du(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){const p=this.layers[0],v=[];let x=null,I=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),I=!x.isConstant());for(const{feature:M,id:$,index:Q,sourceLayerIndex:re}of n){const le=this.layers[0]._featureFilter.needGeometry,me=mu(M,le);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),me,h))continue;const ye=I?x.evaluate(me,{},h):void 0,Oe={id:$,properties:M.properties,type:M.type,sourceLayerIndex:re,index:Q,geometry:le?me.geometry:pu(M),patterns:{},sortKey:ye};v.push(Oe)}I&&v.sort((M,$)=>M.sortKey-$.sortKey);for(const M of v){const{geometry:$,index:Q,sourceLayerIndex:re}=M,le=n[Q].feature;this.addFeature(M,$,Q,h),a.featureIndex.insert(le,$,Q,re,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ps),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,p){for(const v of a)for(const x of v){const I=x.x,M=x.y;if(I<0||I>=Xr||M<0||M>=Xr)continue;const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),Q=$.vertexLength;_d(this.layoutVertexArray,I,M,-1,-1),_d(this.layoutVertexArray,I,M,1,-1),_d(this.layoutVertexArray,I,M,1,1),_d(this.layoutVertexArray,I,M,-1,1),this.indexArray.emplaceBack(Q,Q+1,Q+2),this.indexArray.emplaceBack(Q,Q+3,Q+2),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function Ox(o,n){for(let a=0;a<o.length;a++)if(dc(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(dc(o,n[a]))return!0;return!!I0(o,n)}function tE(o,n,a){return!!dc(o,n)||!!P0(n,o,a)}function Rx(o,n){if(o.length===1)return Bx(n,o[0]);for(let a=0;a<n.length;a++){const h=n[a];for(let p=0;p<h.length;p++)if(dc(o,h[p]))return!0}for(let a=0;a<o.length;a++)if(Bx(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(I0(o,n[a]))return!0;return!1}function nE(o,n,a){if(o.length>1){if(I0(o,n))return!0;for(let h=0;h<n.length;h++)if(P0(n[h],o,a))return!0}for(let h=0;h<o.length;h++)if(P0(o[h],n,a))return!0;return!1}function I0(o,n){if(o.length===0||n.length===0)return!1;for(let a=0;a<o.length-1;a++){const h=o[a],p=o[a+1];for(let v=0;v<n.length-1;v++)if(rE(h,p,n[v],n[v+1]))return!0}return!1}function rE(o,n,a,h){return j(o,a,h)!==j(n,a,h)&&j(o,n,a)!==j(o,n,h)}function P0(o,n,a){const h=a*a;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(Fx(o,n[p-1],n[p])<h)return!0;return!1}function Fx(o,n,a){const h=n.distSqr(a);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(a.x-n.x)+(o.y-n.y)*(a.y-n.y))/h;return o.distSqr(p<0?n:p>1?a:a.sub(n)._mult(p)._add(n))}function Bx(o,n){let a,h,p,v=!1;for(let x=0;x<o.length;x++){a=o[x];for(let I=0,M=a.length-1;I<a.length;M=I++)h=a[I],p=a[M],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function dc(o,n){let a=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function iE(o,n,a){const h=a[0],p=a[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=j(o,n,a[0]);return v!==j(o,n,a[1])||v!==j(o,n,a[2])||v!==j(o,n,a[3])}function Oh(o,n,a){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:a.programConfigurations.get(n.id).getMaxValue(o)}function bd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function wd(o,n,a,h,p){if(!n[0]&&!n[1])return o;const v=ie.convert(n)._mult(p);a==="viewport"&&v._rotate(-h);const x=[];for(let I=0;I<o.length;I++)x.push(o[I].sub(v));return x}_t("CircleBucket",A0,{omit:["layers"]});const oE=new Ti({"circle-sort-key":new ln(A.layout_circle["circle-sort-key"])});var aE={paint:new Ti({"circle-radius":new ln(A.paint_circle["circle-radius"]),"circle-color":new ln(A.paint_circle["circle-color"]),"circle-blur":new ln(A.paint_circle["circle-blur"]),"circle-opacity":new ln(A.paint_circle["circle-opacity"]),"circle-translate":new qt(A.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(A.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(A.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(A.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ln(A.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ln(A.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ln(A.paint_circle["circle-stroke-opacity"])}),layout:oE},gu=typeof Float32Array!="undefined"?Float32Array:Array;function k0(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function jx(o,n,a){var h=n[0],p=n[1],v=n[2],x=n[3],I=n[4],M=n[5],$=n[6],Q=n[7],re=n[8],le=n[9],me=n[10],ye=n[11],Oe=n[12],Fe=n[13],Ze=n[14],nt=n[15],et=a[0],lt=a[1],vt=a[2],dt=a[3];return o[0]=et*h+lt*I+vt*re+dt*Oe,o[1]=et*p+lt*M+vt*le+dt*Fe,o[2]=et*v+lt*$+vt*me+dt*Ze,o[3]=et*x+lt*Q+vt*ye+dt*nt,o[4]=(et=a[4])*h+(lt=a[5])*I+(vt=a[6])*re+(dt=a[7])*Oe,o[5]=et*p+lt*M+vt*le+dt*Fe,o[6]=et*v+lt*$+vt*me+dt*Ze,o[7]=et*x+lt*Q+vt*ye+dt*nt,o[8]=(et=a[8])*h+(lt=a[9])*I+(vt=a[10])*re+(dt=a[11])*Oe,o[9]=et*p+lt*M+vt*le+dt*Fe,o[10]=et*v+lt*$+vt*me+dt*Ze,o[11]=et*x+lt*Q+vt*ye+dt*nt,o[12]=(et=a[12])*h+(lt=a[13])*I+(vt=a[14])*re+(dt=a[15])*Oe,o[13]=et*p+lt*M+vt*le+dt*Fe,o[14]=et*v+lt*$+vt*me+dt*Ze,o[15]=et*x+lt*Q+vt*ye+dt*nt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var sE=jx;function M0(){var o=new gu(4);return gu!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0),o}function Ed(o,n,a,h){var p=new gu(4);return p[0]=o,p[1]=n,p[2]=a,p[3]=h,p}function Sd(o,n,a){var h=n[0],p=n[1],v=n[2],x=n[3];return o[0]=a[0]*h+a[4]*p+a[8]*v+a[12]*x,o[1]=a[1]*h+a[5]*p+a[9]*v+a[13]*x,o[2]=a[2]*h+a[6]*p+a[10]*v+a[14]*x,o[3]=a[3]*h+a[7]*p+a[11]*v+a[15]*x,o}function Dx(o,n){const a=Sd(M0(),Ed(o.x,o.y,0,1),n);return new ie(a[0]/a[3],a[1]/a[3])}M0();class Nx extends A0{}_t("HeatmapBucket",Nx,{omit:["layers"]});var lE={paint:new Ti({"heatmap-radius":new ln(A.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ln(A.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(A.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uu(A.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(A.paint_heatmap["heatmap-opacity"])})};function z0(o,{width:n,height:a},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*a*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*a*h}`)}else p=new Uint8Array(n*a*h);return o.width=n,o.height=a,o.data=p,o}function Ux(o,{width:n,height:a},h){if(n===o.width&&a===o.height)return;const p=z0({},{width:n,height:a},h);L0(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,a)},h),o.width=n,o.height=a,o.data=p.data}function L0(o,n,a,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||a.x>o.width-p.width||a.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,I=n.data;for(let M=0;M<p.height;M++){const $=((a.y+M)*o.width+a.x)*v,Q=((h.y+M)*n.width+h.x)*v;for(let re=0;re<p.width*v;re++)I[Q+re]=x[$+re]}return n}class Rh{constructor(n,a){z0(this,n,1,a)}resize(n){Ux(this,n,1)}clone(){return new Rh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,p,v){L0(n,a,h,p,v,1)}}class xo{constructor(n,a){z0(this,n,4,a)}resize(n){Ux(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new xo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,p,v){L0(n,a,h,p,v,4)}}function $x(o){const n={},a=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new xo({width:a,height:h}),v=(x,I,M)=>{n[o.evaluationKey]=M;const $=o.expression.evaluate(n);p.data[x+I+0]=Math.floor(255*$.r/$.a),p.data[x+I+1]=Math.floor(255*$.g/$.a),p.data[x+I+2]=Math.floor(255*$.b/$.a),p.data[x+I+3]=Math.floor(255*$.a)};if(o.clips)for(let x=0,I=0;x<h;++x,I+=4*a)for(let M=0,$=0;M<a;M++,$+=4){const Q=M/(a-1),{start:re,end:le}=o.clips[x];v(I,$,re*(1-Q)+le*Q)}else for(let x=0,I=0;x<a;x++,I+=4)v(0,I,x/(a-1));return p}_t("AlphaImage",Rh),_t("RGBAImage",xo);var uE={paint:new Ti({"hillshade-illumination-direction":new qt(A.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(A.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(A.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(A.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(A.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(A.paint_hillshade["hillshade-accent-color"])})};const cE=br([{name:"a_pos",components:2,type:"Int16"}],4),{members:hE}=cE;var O0={exports:{}};function Cd(o,n,a){a=a||2;var h,p,v,x,I,M,$,Q=n&&n.length,re=Q?n[0]*a:o.length,le=Vx(o,0,re,a,!0),me=[];if(!le||le.next===le.prev)return me;if(Q&&(le=function(Oe,Fe,Ze,nt){var et,lt,vt,dt=[];for(et=0,lt=Fe.length;et<lt;et++)(vt=Vx(Oe,Fe[et]*nt,et<lt-1?Fe[et+1]*nt:Oe.length,nt,!1))===vt.next&&(vt.steiner=!0),dt.push(xE(vt));for(dt.sort(gE),et=0;et<dt.length;et++)Ze=il(Ze=yE(dt[et],Ze),Ze.next);return Ze}(o,n,le,a)),o.length>80*a){h=v=o[0],p=x=o[1];for(var ye=a;ye<re;ye+=a)(I=o[ye])<h&&(h=I),(M=o[ye+1])<p&&(p=M),I>v&&(v=I),M>x&&(x=M);$=($=Math.max(v-h,x-p))!==0?1/$:0}return Fh(le,me,a,h,p,$),me}function Vx(o,n,a,h,p){var v,x;if(p===B0(o,n,a,h)>0)for(v=n;v<a;v+=h)x=Wx(v,o[v],o[v+1],x);else for(v=a-h;v>=n;v-=h)x=Wx(v,o[v],o[v+1],x);return x&&Td(x,x.next)&&(jh(x),x=x.next),x}function il(o,n){if(!o)return o;n||(n=o);var a,h=o;do if(a=!1,h.steiner||!Td(h,h.next)&&kr(h.prev,h,h.next)!==0)h=h.next;else{if(jh(h),(h=n=h.prev)===h.next)break;a=!0}while(a||h!==n);return n}function Fh(o,n,a,h,p,v,x){if(o){!x&&v&&function(Q,re,le,me){var ye=Q;do ye.z===null&&(ye.z=R0(ye.x,ye.y,re,le,me)),ye.prevZ=ye.prev,ye.nextZ=ye.next,ye=ye.next;while(ye!==Q);ye.prevZ.nextZ=null,ye.prevZ=null,function(Oe){var Fe,Ze,nt,et,lt,vt,dt,jt,tn=1;do{for(Ze=Oe,Oe=null,lt=null,vt=0;Ze;){for(vt++,nt=Ze,dt=0,Fe=0;Fe<tn&&(dt++,nt=nt.nextZ);Fe++);for(jt=tn;dt>0||jt>0&&nt;)dt!==0&&(jt===0||!nt||Ze.z<=nt.z)?(et=Ze,Ze=Ze.nextZ,dt--):(et=nt,nt=nt.nextZ,jt--),lt?lt.nextZ=et:Oe=et,et.prevZ=lt,lt=et;Ze=nt}lt.nextZ=null,tn*=2}while(vt>1)}(ye)}(o,h,p,v);for(var I,M,$=o;o.prev!==o.next;)if(I=o.prev,M=o.next,v?dE(o,h,p,v):fE(o))n.push(I.i/a),n.push(o.i/a),n.push(M.i/a),jh(o),o=M.next,$=M.next;else if((o=M)===$){x?x===1?Fh(o=pE(il(o),n,a),n,a,h,p,v,2):x===2&&mE(o,n,a,h,p,v):Fh(il(o),n,a,h,p,v,1);break}}}function fE(o){var n=o.prev,a=o,h=o.next;if(kr(n,a,h)>=0)return!1;for(var p=o.next.next;p!==o.prev;){if(pc(n.x,n.y,a.x,a.y,h.x,h.y,p.x,p.y)&&kr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function dE(o,n,a,h){var p=o.prev,v=o,x=o.next;if(kr(p,v,x)>=0)return!1;for(var I=p.x>v.x?p.x>x.x?p.x:x.x:v.x>x.x?v.x:x.x,M=p.y>v.y?p.y>x.y?p.y:x.y:v.y>x.y?v.y:x.y,$=R0(p.x<v.x?p.x<x.x?p.x:x.x:v.x<x.x?v.x:x.x,p.y<v.y?p.y<x.y?p.y:x.y:v.y<x.y?v.y:x.y,n,a,h),Q=R0(I,M,n,a,h),re=o.prevZ,le=o.nextZ;re&&re.z>=$&&le&&le.z<=Q;){if(re!==o.prev&&re!==o.next&&pc(p.x,p.y,v.x,v.y,x.x,x.y,re.x,re.y)&&kr(re.prev,re,re.next)>=0||(re=re.prevZ,le!==o.prev&&le!==o.next&&pc(p.x,p.y,v.x,v.y,x.x,x.y,le.x,le.y)&&kr(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;re&&re.z>=$;){if(re!==o.prev&&re!==o.next&&pc(p.x,p.y,v.x,v.y,x.x,x.y,re.x,re.y)&&kr(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;le&&le.z<=Q;){if(le!==o.prev&&le!==o.next&&pc(p.x,p.y,v.x,v.y,x.x,x.y,le.x,le.y)&&kr(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function pE(o,n,a){var h=o;do{var p=h.prev,v=h.next.next;!Td(p,v)&&Gx(p,h,h.next,v)&&Bh(p,v)&&Bh(v,p)&&(n.push(p.i/a),n.push(h.i/a),n.push(v.i/a),jh(h),jh(h.next),h=o=v),h=h.next}while(h!==o);return il(h)}function mE(o,n,a,h,p,v){var x=o;do{for(var I=x.next.next;I!==x.prev;){if(x.i!==I.i&&_E(x,I)){var M=Hx(x,I);return x=il(x,x.next),M=il(M,M.next),Fh(x,n,a,h,p,v),void Fh(M,n,a,h,p,v)}I=I.next}x=x.next}while(x!==o)}function gE(o,n){return o.x-n.x}function yE(o,n){var a=function(v,x){var I,M=x,$=v.x,Q=v.y,re=-1/0;do{if(Q<=M.y&&Q>=M.next.y&&M.next.y!==M.y){var le=M.x+(Q-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(le<=$&&le>re){if(re=le,le===$){if(Q===M.y)return M;if(Q===M.next.y)return M.next}I=M.x<M.next.x?M:M.next}}M=M.next}while(M!==x);if(!I)return null;if($===re)return I;var me,ye=I,Oe=I.x,Fe=I.y,Ze=1/0;M=I;do $>=M.x&&M.x>=Oe&&$!==M.x&&pc(Q<Fe?$:re,Q,Oe,Fe,Q<Fe?re:$,Q,M.x,M.y)&&(me=Math.abs(Q-M.y)/($-M.x),Bh(M,v)&&(me<Ze||me===Ze&&(M.x>I.x||M.x===I.x&&vE(I,M)))&&(I=M,Ze=me)),M=M.next;while(M!==ye);return I}(o,n);if(!a)return n;var h=Hx(a,o),p=il(a,a.next);return il(h,h.next),n===a?p:n}function vE(o,n){return kr(o.prev,o,n.prev)<0&&kr(n.next,o,o.next)<0}function R0(o,n,a,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-a)*p)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-h)*p)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function xE(o){var n=o,a=o;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==o);return a}function pc(o,n,a,h,p,v,x,I){return(p-x)*(n-I)-(o-x)*(v-I)>=0&&(o-x)*(h-I)-(a-x)*(n-I)>=0&&(a-x)*(v-I)-(p-x)*(h-I)>=0}function _E(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(a,h){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==h.i&&p.next.i!==h.i&&Gx(p,p.next,a,h))return!0;p=p.next}while(p!==a);return!1}(o,n)&&(Bh(o,n)&&Bh(n,o)&&function(a,h){var p=a,v=!1,x=(a.x+h.x)/2,I=(a.y+h.y)/2;do p.y>I!=p.next.y>I&&p.next.y!==p.y&&x<(p.next.x-p.x)*(I-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==a);return v}(o,n)&&(kr(o.prev,o,n.prev)||kr(o,n.prev,n))||Td(o,n)&&kr(o.prev,o,o.next)>0&&kr(n.prev,n,n.next)>0)}function kr(o,n,a){return(n.y-o.y)*(a.x-n.x)-(n.x-o.x)*(a.y-n.y)}function Td(o,n){return o.x===n.x&&o.y===n.y}function Gx(o,n,a,h){var p=Id(kr(o,n,a)),v=Id(kr(o,n,h)),x=Id(kr(a,h,o)),I=Id(kr(a,h,n));return p!==v&&x!==I||!(p!==0||!Ad(o,a,n))||!(v!==0||!Ad(o,h,n))||!(x!==0||!Ad(a,o,h))||!(I!==0||!Ad(a,n,h))}function Ad(o,n,a){return n.x<=Math.max(o.x,a.x)&&n.x>=Math.min(o.x,a.x)&&n.y<=Math.max(o.y,a.y)&&n.y>=Math.min(o.y,a.y)}function Id(o){return o>0?1:o<0?-1:0}function Bh(o,n){return kr(o.prev,o,o.next)<0?kr(o,n,o.next)>=0&&kr(o,o.prev,n)>=0:kr(o,n,o.prev)<0||kr(o,o.next,n)<0}function Hx(o,n){var a=new F0(o.i,o.x,o.y),h=new F0(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,a.next=p,p.prev=a,h.next=a,a.prev=h,v.next=h,h.prev=v,h}function Wx(o,n,a,h){var p=new F0(o,n,a);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function jh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function F0(o,n,a){this.i=o,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B0(o,n,a,h){for(var p=0,v=n,x=a-h;v<a;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}O0.exports=Cd,O0.exports.default=Cd,Cd.deviation=function(o,n,a,h){var p=n&&n.length,v=Math.abs(B0(o,0,p?n[0]*a:o.length,a));if(p)for(var x=0,I=n.length;x<I;x++)v-=Math.abs(B0(o,n[x]*a,x<I-1?n[x+1]*a:o.length,a));var M=0;for(x=0;x<h.length;x+=3){var $=h[x]*a,Q=h[x+1]*a,re=h[x+2]*a;M+=Math.abs((o[$]-o[re])*(o[Q+1]-o[$+1])-(o[$]-o[Q])*(o[re+1]-o[$+1]))}return v===0&&M===0?0:Math.abs((M-v)/v)},Cd.flatten=function(o){for(var n=o[0][0].length,a={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<n;x++)a.vertices.push(o[p][v][x]);p>0&&a.holes.push(h+=o[p-1].length)}return a};var Zx=O0.exports;function bE(o,n,a,h,p){Xx(o,n,a||0,h||o.length-1,p||wE)}function Xx(o,n,a,h,p){for(;h>a;){if(h-a>600){var v=h-a+1,x=n-a+1,I=Math.log(v),M=.5*Math.exp(2*I/3),$=.5*Math.sqrt(I*M*(v-M)/v)*(x-v/2<0?-1:1);Xx(o,n,Math.max(a,Math.floor(n-x*M/v+$)),Math.min(h,Math.floor(n+(v-x)*M/v+$)),p)}var Q=o[n],re=a,le=h;for(Dh(o,a,n),p(o[h],Q)>0&&Dh(o,a,h);re<le;){for(Dh(o,re,le),re++,le--;p(o[re],Q)<0;)re++;for(;p(o[le],Q)>0;)le--}p(o[a],Q)===0?Dh(o,a,le):Dh(o,++le,h),le<=n&&(a=le+1),n<=le&&(h=le-1)}}function Dh(o,n,a){var h=o[n];o[n]=o[a],o[a]=h}function wE(o,n){return o<n?-1:o>n?1:0}function j0(o,n){const a=o.length;if(a<=1)return[o];const h=[];let p,v;for(let x=0;x<a;x++){const I=w(o[x]);I!==0&&(o[x].area=Math.abs(I),v===void 0&&(v=I<0),v===I<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(bE(h[x],n,1,h[x].length-1,EE),h[x]=h[x].slice(0,n));return h}function EE(o,n){return n.area-o.area}function D0(o,n,a){const h=a.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const I=x.constantOr(null);I&&(p=!0,h[I.to]=!0,h[I.from]=!0)}return p}function N0(o,n,a,h,p){const v=p.patternDependencies;for(const x of n){const I=x.paint.get(`${o}-pattern`).value;if(I.kind!=="constant"){let M=I.evaluate({zoom:h-1},a,{},p.availableImages),$=I.evaluate({zoom:h},a,{},p.availableImages),Q=I.evaluate({zoom:h+1},a,{},p.availableImages);M=M&&M.name?M.name:M,$=$&&$.name?$.name:$,Q=Q&&Q.name?Q.name:Q,v[M]=!0,v[$]=!0,v[Q]=!0,a.patterns[x.id]={min:M,mid:$,max:Q}}}return a}class U0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new In,this.indexArray=new Ni,this.indexArray2=new vo,this.programConfigurations=new du(n.layers,n.zoom),this.segments=new Kn,this.segments2=new Kn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=D0("fill",this.layers,a);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:I,id:M,index:$,sourceLayerIndex:Q}of n){const re=this.layers[0]._featureFilter.needGeometry,le=mu(I,re);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),le,h))continue;const me=v?p.evaluate(le,{},h,a.availableImages):void 0,ye={id:M,properties:I.properties,type:I.type,sourceLayerIndex:Q,index:$,geometry:re?le.geometry:pu(I),patterns:{},sortKey:me};x.push(ye)}v&&x.sort((I,M)=>I.sortKey-M.sortKey);for(const I of x){const{geometry:M,index:$,sourceLayerIndex:Q}=I;if(this.hasPattern){const re=N0("fill",this.layers,I,this.zoom,a);this.patternFeatures.push(re)}else this.addFeature(I,M,$,h,{});a.featureIndex.insert(n[$].feature,M,$,Q,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,hE),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,h,p,v){for(const x of j0(a,500)){let I=0;for(const me of x)I+=me.length;const M=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),$=M.vertexLength,Q=[],re=[];for(const me of x){if(me.length===0)continue;me!==x[0]&&re.push(Q.length/2);const ye=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Oe=ye.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Oe+me.length-1,Oe),Q.push(me[0].x),Q.push(me[0].y);for(let Fe=1;Fe<me.length;Fe++)this.layoutVertexArray.emplaceBack(me[Fe].x,me[Fe].y),this.indexArray2.emplaceBack(Oe+Fe-1,Oe+Fe),Q.push(me[Fe].x),Q.push(me[Fe].y);ye.vertexLength+=me.length,ye.primitiveLength+=me.length}const le=Zx(Q,re);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack($+le[me],$+le[me+1],$+le[me+2]);M.vertexLength+=I,M.primitiveLength+=le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}_t("FillBucket",U0,{omit:["layers","patternFeatures"]});const SE=new Ti({"fill-sort-key":new ln(A.layout_fill["fill-sort-key"])});var CE={paint:new Ti({"fill-antialias":new qt(A.paint_fill["fill-antialias"]),"fill-opacity":new ln(A.paint_fill["fill-opacity"]),"fill-color":new ln(A.paint_fill["fill-color"]),"fill-outline-color":new ln(A.paint_fill["fill-outline-color"]),"fill-translate":new qt(A.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(A.paint_fill["fill-translate-anchor"]),"fill-pattern":new tl(A.paint_fill["fill-pattern"])}),layout:SE};const TE=br([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:AE}=TE;var ol={},IE=ie,Kx=mc;function mc(o,n,a,h,p){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(PE,this,n)}function PE(o,n,a){o==1?n.id=a.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],I=p._values[h.readVarint()];p.properties[x]=I}}(a,n):o==3?n.type=a.readVarint():o==4&&(n._geometry=a.pos)}function kE(o){for(var n,a,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((a=o[x]).x-(n=o[p]).x)*(n.y+a.y);return h}mc.types=["Unknown","Point","LineString","Polygon"],mc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,a=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,I=[];o.pos<a;){if(p<=0){var M=o.readVarint();h=7&M,p=M>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&I.push(n),n=[]),n.push(new IE(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&I.push(n),I},mc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,a=1,h=0,p=0,v=0,x=1/0,I=-1/0,M=1/0,$=-1/0;o.pos<n;){if(h<=0){var Q=o.readVarint();a=7&Q,h=Q>>3}if(h--,a===1||a===2)(p+=o.readSVarint())<x&&(x=p),p>I&&(I=p),(v+=o.readSVarint())<M&&(M=v),v>$&&($=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,M,I,$]},mc.prototype.toGeoJSON=function(o,n,a){var h,p,v=this.extent*Math.pow(2,a),x=this.extent*o,I=this.extent*n,M=this.loadGeometry(),$=mc.types[this.type];function Q(me){for(var ye=0;ye<me.length;ye++){var Oe=me[ye];me[ye]=[360*(Oe.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Oe.y+I)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(h=0;h<M.length;h++)re[h]=M[h][0];Q(M=re);break;case 2:for(h=0;h<M.length;h++)Q(M[h]);break;case 3:for(M=function(me){var ye=me.length;if(ye<=1)return[me];for(var Oe,Fe,Ze=[],nt=0;nt<ye;nt++){var et=kE(me[nt]);et!==0&&(Fe===void 0&&(Fe=et<0),Fe===et<0?(Oe&&Ze.push(Oe),Oe=[me[nt]]):Oe.push(me[nt]))}return Oe&&Ze.push(Oe),Ze}(M),h=0;h<M.length;h++)for(p=0;p<M[h].length;p++)Q(M[h][p])}M.length===1?M=M[0]:$="Multi"+$;var le={type:"Feature",geometry:{type:$,coordinates:M},properties:this.properties};return"id"in this&&(le.id=this.id),le};var ME=Kx,Yx=qx;function qx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(zE,this,n),this.length=this._features.length}function zE(o,n,a){o===15?n.version=a.readVarint():o===1?n.name=a.readString():o===5?n.extent=a.readVarint():o===2?n._features.push(a.pos):o===3?n._keys.push(a.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(a))}qx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new ME(this._pbf,n,this.extent,this._keys,this._values)};var LE=Yx;function OE(o,n,a){if(o===3){var h=new LE(a,a.readVarint()+a.pos);h.length&&(n[h.name]=h)}}ol.VectorTile=function(o,n){this.layers=o.readFields(OE,{},n)},ol.VectorTileFeature=Kx,ol.VectorTileLayer=Yx;const RE=ol.VectorTileFeature.types,$0=Math.pow(2,13);function Nh(o,n,a,h,p,v,x,I){o.emplaceBack(n,a,2*Math.floor(h*$0)+x,p*$0*2,v*$0*2,Math.round(I))}class V0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Pn,this.indexArray=new Ni,this.programConfigurations=new du(n.layers,n.zoom),this.segments=new Kn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.features=[],this.hasPattern=D0("fill-extrusion",this.layers,a);for(const{feature:p,id:v,index:x,sourceLayerIndex:I}of n){const M=this.layers[0]._featureFilter.needGeometry,$=mu(p,M);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),$,h))continue;const Q={id:v,sourceLayerIndex:I,index:x,geometry:M?$.geometry:pu(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(N0("fill-extrusion",this.layers,Q,this.zoom,a)):this.addFeature(Q,Q.geometry,x,h,{}),a.featureIndex.insert(p,Q.geometry,x,I,this.index,!0)}}addFeatures(n,a,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,a,h)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,AE),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,p,v){for(const x of j0(a,500)){let I=0;for(const me of x)I+=me.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of x){if(me.length===0||BE(me))continue;let ye=0;for(let Oe=0;Oe<me.length;Oe++){const Fe=me[Oe];if(Oe>=1){const Ze=me[Oe-1];if(!FE(Fe,Ze)){M.vertexLength+4>Kn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const nt=Fe.sub(Ze)._perp()._unit(),et=Ze.dist(Fe);ye+et>32768&&(ye=0),Nh(this.layoutVertexArray,Fe.x,Fe.y,nt.x,nt.y,0,0,ye),Nh(this.layoutVertexArray,Fe.x,Fe.y,nt.x,nt.y,0,1,ye),ye+=et,Nh(this.layoutVertexArray,Ze.x,Ze.y,nt.x,nt.y,0,0,ye),Nh(this.layoutVertexArray,Ze.x,Ze.y,nt.x,nt.y,0,1,ye);const lt=M.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+I>Kn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),RE[n.type]!=="Polygon")continue;const $=[],Q=[],re=M.vertexLength;for(const me of x)if(me.length!==0){me!==x[0]&&Q.push($.length/2);for(let ye=0;ye<me.length;ye++){const Oe=me[ye];Nh(this.layoutVertexArray,Oe.x,Oe.y,0,0,1,1,0),$.push(Oe.x),$.push(Oe.y)}}const le=Zx($,Q);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack(re+le[me],re+le[me+2],re+le[me+1]);M.primitiveLength+=le.length/3,M.vertexLength+=I}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function FE(o,n){return o.x===n.x&&(o.x<0||o.x>Xr)||o.y===n.y&&(o.y<0||o.y>Xr)}function BE(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Xr)||o.every(n=>n.y<0)||o.every(n=>n.y>Xr)}_t("FillExtrusionBucket",V0,{omit:["layers","features"]});var jE={paint:new Ti({"fill-extrusion-opacity":new qt(A["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ln(A["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(A["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(A["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tl(A["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ln(A["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ln(A["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(A["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Uh(o,n){return o.x*n.x+o.y*n.y}function Jx(o,n){if(o.length===1){let a=0;const h=n[a++];let p;for(;!p||h.equals(p);)if(p=n[a++],!p)return 1/0;for(;a<n.length;a++){const v=n[a],x=o[0],I=p.sub(h),M=v.sub(h),$=x.sub(h),Q=Uh(I,I),re=Uh(I,M),le=Uh(M,M),me=Uh($,I),ye=Uh($,M),Oe=Q*le-re*re,Fe=(le*me-re*ye)/Oe,Ze=(Q*ye-re*me)/Oe,nt=h.z*(1-Fe-Ze)+p.z*Fe+v.z*Ze;if(isFinite(nt))return nt}return 1/0}{let a=1/0;for(const h of n)a=Math.min(a,h.z);return a}}const DE=br([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:NE}=DE,UE=br([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$E}=UE,VE=ol.VectorTileFeature.types,GE=Math.cos(Math.PI/180*37.5),Qx=Math.pow(2,14)/.5;class G0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new wr,this.layoutVertexArray2=new vn,this.indexArray=new Ni,this.programConfigurations=new du(n.layers,n.zoom),this.segments=new Kn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=D0("line",this.layers,a);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:I,id:M,index:$,sourceLayerIndex:Q}of n){const re=this.layers[0]._featureFilter.needGeometry,le=mu(I,re);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),le,h))continue;const me=v?p.evaluate(le,{},h):void 0,ye={id:M,properties:I.properties,type:I.type,sourceLayerIndex:Q,index:$,geometry:re?le.geometry:pu(I),patterns:{},sortKey:me};x.push(ye)}v&&x.sort((I,M)=>I.sortKey-M.sortKey);for(const I of x){const{geometry:M,index:$,sourceLayerIndex:Q}=I;if(this.hasPattern){const re=N0("line",this.layers,I,this.zoom,a);this.patternFeatures.push(re)}else this.addFeature(I,M,$,h,{});a.featureIndex.insert(n[$].feature,M,$,Q,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,$E)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,NE),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,h,p,v){const x=this.layers[0].layout,I=x.get("line-join").evaluate(n,{}),M=x.get("line-cap"),$=x.get("line-miter-limit"),Q=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const re of a)this.addLine(re,n,I,M,$,Q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,a,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ze=0;Ze<n.length-1;Ze++)this.totalDistance+=n[Ze].dist(n[Ze+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=VE[a.type]==="Polygon";let M=n.length;for(;M>=2&&n[M-1].equals(n[M-2]);)M--;let $=0;for(;$<M-1&&n[$].equals(n[$+1]);)$++;if(M<(I?3:2))return;h==="bevel"&&(v=1.05);const Q=this.overscaling<=16?122880/(512*this.overscaling):0,re=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let le,me,ye,Oe,Fe;this.e1=this.e2=-1,I&&(le=n[M-2],Fe=n[$].sub(le)._unit()._perp());for(let Ze=$;Ze<M;Ze++){if(ye=Ze===M-1?I?n[$+1]:void 0:n[Ze+1],ye&&n[Ze].equals(ye))continue;Fe&&(Oe=Fe),le&&(me=le),le=n[Ze],Fe=ye?ye.sub(le)._unit()._perp():Oe,Oe=Oe||Fe;let nt=Oe.add(Fe);nt.x===0&&nt.y===0||nt._unit();const et=Oe.x*Fe.x+Oe.y*Fe.y,lt=nt.x*Fe.x+nt.y*Fe.y,vt=lt!==0?1/lt:1/0,dt=2*Math.sqrt(2-2*lt),jt=lt<GE&&me&&ye,tn=Oe.x*Fe.y-Oe.y*Fe.x>0;if(jt&&Ze>$){const At=le.dist(me);if(At>2*Q){const Dt=le.sub(le.sub(me)._mult(Q/At)._round());this.updateDistance(me,Dt),this.addCurrentVertex(Dt,Oe,0,0,re),me=Dt}}const zt=me&&ye;let Lt=zt?h:I?"butt":p;if(zt&&Lt==="round"&&(vt<x?Lt="miter":vt<=2&&(Lt="fakeround")),Lt==="miter"&&vt>v&&(Lt="bevel"),Lt==="bevel"&&(vt>2&&(Lt="flipbevel"),vt<v&&(Lt="miter")),me&&this.updateDistance(me,le),Lt==="miter")nt._mult(vt),this.addCurrentVertex(le,nt,0,0,re);else if(Lt==="flipbevel"){if(vt>100)nt=Fe.mult(-1);else{const At=vt*Oe.add(Fe).mag()/Oe.sub(Fe).mag();nt._perp()._mult(At*(tn?-1:1))}this.addCurrentVertex(le,nt,0,0,re),this.addCurrentVertex(le,nt.mult(-1),0,0,re)}else if(Lt==="bevel"||Lt==="fakeround"){const At=-Math.sqrt(vt*vt-1),Dt=tn?At:0,Ot=tn?0:At;if(me&&this.addCurrentVertex(le,Oe,Dt,Ot,re),Lt==="fakeround"){const wt=Math.round(180*dt/Math.PI/20);for(let sn=1;sn<wt;sn++){let nn=sn/wt;if(nn!==.5){const Gn=nn-.5;nn+=nn*Gn*(nn-1)*((1.0904+et*(et*(3.55645-1.43519*et)-3.2452))*Gn*Gn+(.848013+et*(.215638*et-1.06021)))}const Rn=Fe.sub(Oe)._mult(nn)._add(Oe)._unit()._mult(tn?-1:1);this.addHalfVertex(le,Rn.x,Rn.y,!1,tn,0,re)}}ye&&this.addCurrentVertex(le,Fe,-Dt,-Ot,re)}else if(Lt==="butt")this.addCurrentVertex(le,nt,0,0,re);else if(Lt==="square"){const At=me?1:-1;this.addCurrentVertex(le,nt,At,At,re)}else Lt==="round"&&(me&&(this.addCurrentVertex(le,Oe,0,0,re),this.addCurrentVertex(le,Oe,1,1,re,!0)),ye&&(this.addCurrentVertex(le,Fe,-1,-1,re,!0),this.addCurrentVertex(le,Fe,0,0,re)));if(jt&&Ze<M-1){const At=le.dist(ye);if(At>2*Q){const Dt=le.add(ye.sub(le)._mult(Q/At)._round());this.updateDistance(le,Dt),this.addCurrentVertex(Dt,Fe,0,0,re),le=Dt}}}}addCurrentVertex(n,a,h,p,v,x=!1){const I=a.y*p-a.x,M=-a.y-a.x*p;this.addHalfVertex(n,a.x+a.y*h,a.y-a.x*h,x,!1,h,v),this.addHalfVertex(n,I,M,x,!0,-p,v),this.distance>Qx/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,a,h,p,v,x))}addHalfVertex({x:n,y:a},h,p,v,x,I,M){const $=.5*(this.lineClips?this.scaledDistance*(Qx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(I===0?0:I<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Q=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Q),M.primitiveLength++),x?this.e2=Q:this.e1=Q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}_t("LineBucket",G0,{omit:["layers","patternFeatures"]});const HE=new Ti({"line-cap":new qt(A.layout_line["line-cap"]),"line-join":new ln(A.layout_line["line-join"]),"line-miter-limit":new qt(A.layout_line["line-miter-limit"]),"line-round-limit":new qt(A.layout_line["line-round-limit"]),"line-sort-key":new ln(A.layout_line["line-sort-key"])});var e_={paint:new Ti({"line-opacity":new ln(A.paint_line["line-opacity"]),"line-color":new ln(A.paint_line["line-color"]),"line-translate":new qt(A.paint_line["line-translate"]),"line-translate-anchor":new qt(A.paint_line["line-translate-anchor"]),"line-width":new ln(A.paint_line["line-width"]),"line-gap-width":new ln(A.paint_line["line-gap-width"]),"line-offset":new ln(A.paint_line["line-offset"]),"line-blur":new ln(A.paint_line["line-blur"]),"line-dasharray":new sc(A.paint_line["line-dasharray"]),"line-pattern":new tl(A.paint_line["line-pattern"]),"line-gradient":new uu(A.paint_line["line-gradient"])}),layout:HE};const t_=new class extends ln{possiblyEvaluate(o,n){return n=new lr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,a,h){return n=X({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,a,h)}}(e_.paint.properties["line-width"].specification);function n_(o,n){return n>0?n+2*o:o}t_.useIntegerZoom=!0;const WE=br([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ZE=br([{name:"a_projected_pos",components:3,type:"Float32"}],4);br([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const XE=br([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);br([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const r_=br([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),KE=br([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function YE(o,n,a){return o.sections.forEach(h=>{h.text=function(p,v,x){const I=v.layout.get("text-transform").evaluate(x,{});return I==="uppercase"?p=p.toLocaleUpperCase():I==="lowercase"&&(p=p.toLocaleLowerCase()),Ci.applyArabicShaping&&(p=Ci.applyArabicShaping(p)),p}(h.text,n,a)}),o}br([{name:"triangle",components:3,type:"Uint16"}]),br([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),br([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),br([{type:"Float32",name:"offsetX"}]),br([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const $h={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var ti=24,H0=Yn,i_=function(o,n,a,h,p){var v,x,I=8*p-h-1,M=(1<<I)-1,$=M>>1,Q=-7,re=a?p-1:0,le=a?-1:1,me=o[n+re];for(re+=le,v=me&(1<<-Q)-1,me>>=-Q,Q+=I;Q>0;v=256*v+o[n+re],re+=le,Q-=8);for(x=v&(1<<-Q)-1,v>>=-Q,Q+=h;Q>0;x=256*x+o[n+re],re+=le,Q-=8);if(v===0)v=1-$;else{if(v===M)return x?NaN:1/0*(me?-1:1);x+=Math.pow(2,h),v-=$}return(me?-1:1)*x*Math.pow(2,v-h)},o_=function(o,n,a,h,p,v){var x,I,M,$=8*v-p-1,Q=(1<<$)-1,re=Q>>1,le=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=h?0:v-1,ye=h?1:-1,Oe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(I=isNaN(n)?1:0,x=Q):(x=Math.floor(Math.log(n)/Math.LN2),n*(M=Math.pow(2,-x))<1&&(x--,M*=2),(n+=x+re>=1?le/M:le*Math.pow(2,1-re))*M>=2&&(x++,M/=2),x+re>=Q?(I=0,x=Q):x+re>=1?(I=(n*M-1)*Math.pow(2,p),x+=re):(I=n*Math.pow(2,re-1)*Math.pow(2,p),x=0));p>=8;o[a+me]=255&I,me+=ye,I/=256,p-=8);for(x=x<<p|I,$+=p;$>0;o[a+me]=255&x,me+=ye,x/=256,$-=8);o[a+me-ye]|=128*Oe};function Yn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Yn.Varint=0,Yn.Fixed64=1,Yn.Bytes=2,Yn.Fixed32=5;var al,W0=4294967296,a_=1/W0,s_=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function _s(o){return o.type===Yn.Bytes?o.readVarint()+o.pos:o.pos+1}function gc(o,n,a){return a?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function l_(o,n,a){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(h);for(var p=a.pos-1;p>=o;p--)a.buf[p+h]=a.buf[p]}function qE(o,n){for(var a=0;a<o.length;a++)n.writeVarint(o[a])}function JE(o,n){for(var a=0;a<o.length;a++)n.writeSVarint(o[a])}function QE(o,n){for(var a=0;a<o.length;a++)n.writeFloat(o[a])}function eS(o,n){for(var a=0;a<o.length;a++)n.writeDouble(o[a])}function tS(o,n){for(var a=0;a<o.length;a++)n.writeBoolean(o[a])}function nS(o,n){for(var a=0;a<o.length;a++)n.writeFixed32(o[a])}function rS(o,n){for(var a=0;a<o.length;a++)n.writeSFixed32(o[a])}function iS(o,n){for(var a=0;a<o.length;a++)n.writeFixed64(o[a])}function oS(o,n){for(var a=0;a<o.length;a++)n.writeSFixed64(o[a])}function Pd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function yc(o,n,a){o[a]=n,o[a+1]=n>>>8,o[a+2]=n>>>16,o[a+3]=n>>>24}function u_(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function aS(o,n,a){o===1&&a.readMessage(sS,n)}function sS(o,n,a){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:I,top:M,advance:$}=a.readMessage(lS,{});n.push({id:h,bitmap:new Rh({width:v+6,height:x+6},p),metrics:{width:v,height:x,left:I,top:M,advance:$}})}}function lS(o,n,a){o===1?n.id=a.readVarint():o===2?n.bitmap=a.readBytes():o===3?n.width=a.readVarint():o===4?n.height=a.readVarint():o===5?n.left=a.readSVarint():o===6?n.top=a.readSVarint():o===7&&(n.advance=a.readVarint())}function c_(o){let n=0,a=0;for(const x of o)n+=x.w*x.h,a=Math.max(a,x.w);o.sort((x,I)=>I.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let p=0,v=0;for(const x of o)for(let I=h.length-1;I>=0;I--){const M=h[I];if(!(x.w>M.w||x.h>M.h)){if(x.x=M.x,x.y=M.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===M.w&&x.h===M.h){const $=h.pop();I<h.length&&(h[I]=$)}else x.h===M.h?(M.x+=x.w,M.w-=x.w):x.w===M.w?(M.y+=x.h,M.h-=x.h):(h.push({x:M.x+x.w,y:M.y,w:M.w-x.w,h:x.h}),M.y+=x.h,M.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}Yn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Pd(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=u_(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Pd(this.buf,this.pos)+Pd(this.buf,this.pos+4)*W0;return this.pos+=8,o},readSFixed64:function(){var o=Pd(this.buf,this.pos)+u_(this.buf,this.pos+4)*W0;return this.pos+=8,o},readFloat:function(){var o=i_(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=i_(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,a,h=this.buf;return n=127&(a=h[this.pos++]),a<128?n:(n|=(127&(a=h[this.pos++]))<<7,a<128?n:(n|=(127&(a=h[this.pos++]))<<14,a<128?n:(n|=(127&(a=h[this.pos++]))<<21,a<128?n:function(p,v,x){var I,M,$=x.buf;if(I=(112&(M=$[x.pos++]))>>4,M<128||(I|=(127&(M=$[x.pos++]))<<3,M<128)||(I|=(127&(M=$[x.pos++]))<<10,M<128)||(I|=(127&(M=$[x.pos++]))<<17,M<128)||(I|=(127&(M=$[x.pos++]))<<24,M<128)||(I|=(1&(M=$[x.pos++]))<<31,M<128))return gc(p,I,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&s_?function(a,h,p){return s_.decode(a.subarray(h,p))}(this.buf,n,o):function(a,h,p){for(var v="",x=h;x<p;){var I,M,$,Q=a[x],re=null,le=Q>239?4:Q>223?3:Q>191?2:1;if(x+le>p)break;le===1?Q<128&&(re=Q):le===2?(192&(I=a[x+1]))==128&&(re=(31&Q)<<6|63&I)<=127&&(re=null):le===3?(M=a[x+2],(192&(I=a[x+1]))==128&&(192&M)==128&&((re=(15&Q)<<12|(63&I)<<6|63&M)<=2047||re>=55296&&re<=57343)&&(re=null)):le===4&&(M=a[x+2],$=a[x+3],(192&(I=a[x+1]))==128&&(192&M)==128&&(192&$)==128&&((re=(15&Q)<<18|(63&I)<<12|(63&M)<<6|63&$)<=65535||re>=1114112)&&(re=null)),re===null?(re=65533,le=1):re>65535&&(re-=65536,v+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),v+=String.fromCharCode(re),x+=le}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Yn.Bytes)return o.push(this.readVarint(n));var a=_s(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Yn.Bytes)return o.push(this.readSVarint());var n=_s(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Yn.Bytes)return o.push(this.readBoolean());var n=_s(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Yn.Bytes)return o.push(this.readFloat());var n=_s(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Yn.Bytes)return o.push(this.readDouble());var n=_s(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Yn.Bytes)return o.push(this.readFixed32());var n=_s(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Yn.Bytes)return o.push(this.readSFixed32());var n=_s(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Yn.Bytes)return o.push(this.readFixed64());var n=_s(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Yn.Bytes)return o.push(this.readSFixed64());var n=_s(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Yn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Yn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Yn.Fixed32)this.pos+=4;else{if(n!==Yn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),yc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),yc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),yc(this.buf,-1&o,this.pos),yc(this.buf,Math.floor(o*a_),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),yc(this.buf,-1&o,this.pos),yc(this.buf,Math.floor(o*a_),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,a){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,I){I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,I.buf[I.pos]=127&(v>>>=7)}(h,0,a),function(v,x){var I=(7&v)<<4;x.buf[x.pos++]|=I|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var x,I,M=0;M<p.length;M++){if((x=p.charCodeAt(M))>55295&&x<57344){if(!I){x>56319||M+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):I=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,I=x;continue}x=I-55296<<10|x-56320|65536,I=null}else I&&(h[v++]=239,h[v++]=191,h[v++]=189,I=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var a=this.pos-n;a>=128&&l_(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),o_(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),o_(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,n){this.pos++;var a=this.pos;o(n,this);var h=this.pos-a;h>=128&&l_(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,a){this.writeTag(o,Yn.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,qE,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,JE,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,tS,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,QE,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,eS,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,nS,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,rS,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,iS,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,oS,n)},writeBytesField:function(o,n){this.writeTag(o,Yn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Yn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Yn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Yn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Yn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Yn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Yn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Yn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Yn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Yn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,Boolean(n))}};class Z0{constructor(n,{pixelRatio:a,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class h_{constructor(n,a){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(a,p,v);const{w:x,h:I}=c_(v),M=new xo({width:x||1,height:I||1});for(const $ in n){const Q=n[$],re=h[$].paddedRect;xo.copy(Q.data,M,{x:0,y:0},{x:re.x+1,y:re.y+1},Q.data)}for(const $ in a){const Q=a[$],re=p[$].paddedRect,le=re.x+1,me=re.y+1,ye=Q.data.width,Oe=Q.data.height;xo.copy(Q.data,M,{x:0,y:0},{x:le,y:me},Q.data),xo.copy(Q.data,M,{x:0,y:Oe-1},{x:le,y:me-1},{width:ye,height:1}),xo.copy(Q.data,M,{x:0,y:0},{x:le,y:me+Oe},{width:ye,height:1}),xo.copy(Q.data,M,{x:ye-1,y:0},{x:le-1,y:me},{width:1,height:Oe}),xo.copy(Q.data,M,{x:0,y:0},{x:le+ye,y:me},{width:1,height:Oe})}this.image=M,this.iconPositions=h,this.patternPositions=p}addImages(n,a,h){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(x),a[p]=new Z0(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),a)}patchUpdatedImage(n,a,h){if(!n||!a||n.version===a.version)return;n.version=a.version;const[p,v]=n.tl;h.update(a.data,void 0,{x:p,y:v})}}_t("ImagePosition",Z0),_t("ImageAtlas",h_),l.WritingMode=void 0,(al=l.WritingMode||(l.WritingMode={}))[al.none=0]="none",al[al.horizontal=1]="horizontal",al[al.vertical=2]="vertical",al[al.horizontalOnly=3]="horizontalOnly";const kd=-17;class Vh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const h=new Vh;return h.scale=n||1,h.fontStack=a,h}static forImage(n){const a=new Vh;return a.imageName=n,a}}class vc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const h=new vc;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,a)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;a+=p&&ca(p)&&!$h[n[h+1]]||v&&ca(v)&&!$h[n[h-1]]||!$h[n[h]]?n[h]:$h[n[h]]}return a}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&zd[this.text.charCodeAt(h)];h++)n++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&zd[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const h=new vc;return h.text=this.text.substring(n,a),h.sectionIndex=this.sectionIndex.slice(n,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Vh.forText(n.scale,n.fontStack||a));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void G("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Vh.forImage(a)),this.sectionIndex.push(this.sections.length-1)):G("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Md(o,n,a,h,p,v,x,I,M,$,Q,re,le,me,ye,Oe){const Fe=vc.fromFeature(o,p);let Ze;re===l.WritingMode.vertical&&Fe.verticalizePunctuation();const{processBidirectionalText:nt,processStyledBidirectionalText:et}=Ci;if(nt&&Fe.sections.length===1){Ze=[];const dt=nt(Fe.toString(),X0(Fe,$,v,n,h,me,ye));for(const jt of dt){const tn=new vc;tn.text=jt,tn.sections=Fe.sections;for(let zt=0;zt<jt.length;zt++)tn.sectionIndex.push(0);Ze.push(tn)}}else if(et){Ze=[];const dt=et(Fe.text,Fe.sectionIndex,X0(Fe,$,v,n,h,me,ye));for(const jt of dt){const tn=new vc;tn.text=jt[0],tn.sectionIndex=jt[1],tn.sections=Fe.sections,Ze.push(tn)}}else Ze=function(dt,jt){const tn=[],zt=dt.text;let Lt=0;for(const At of jt)tn.push(dt.substring(Lt,At)),Lt=At;return Lt<zt.length&&tn.push(dt.substring(Lt,zt.length)),tn}(Fe,X0(Fe,$,v,n,h,me,ye));const lt=[],vt={positionedLines:lt,text:Fe.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(dt,jt,tn,zt,Lt,At,Dt,Ot,wt,sn,nn,Rn){let Gn=0,cr=kd,hr=0,ii=0;const Br=Ot==="right"?1:Ot==="left"?0:.5;let jr=0;for(const Dr of Lt){Dr.trim();const ai=Dr.getMaxScale(),mi=(ai-1)*ti,Ai={positionedGlyphs:[],lineOffset:0};dt.positionedLines[jr]=Ai;const Vi=Ai.positionedGlyphs;let Gi=0;if(!Dr.length()){cr+=At,++jr;continue}for(let qr=0;qr<Dr.length();qr++){const Mn=Dr.getSection(qr),oo=Dr.getSectionIndex(qr),si=Dr.getCharCode(qr);let gi=0,Uo=null,da=null,pa=null,bs=ti;const $o=!(wt===l.WritingMode.horizontal||!nn&&!Qs(si)||nn&&(zd[si]||(Yr=si,bt.Arabic(Yr)||bt["Arabic Supplement"](Yr)||bt["Arabic Extended-A"](Yr)||bt["Arabic Presentation Forms-A"](Yr)||bt["Arabic Presentation Forms-B"](Yr))));if(Mn.imageName){const _o=zt[Mn.imageName];if(!_o)continue;pa=Mn.imageName,dt.iconsInText=dt.iconsInText||!0,da=_o.paddedRect;const Hi=_o.displaySize;Mn.scale=Mn.scale*ti/Rn,Uo={width:Hi[0],height:Hi[1],left:1,top:-3,advance:$o?Hi[1]:Hi[0]},gi=mi+(ti-Hi[1]*Mn.scale),bs=Uo.advance;const ws=$o?Hi[0]*Mn.scale-ti*ai:Hi[1]*Mn.scale-ti*ai;ws>0&&ws>Gi&&(Gi=ws)}else{const _o=tn[Mn.fontStack],Hi=_o&&_o[si];if(Hi&&Hi.rect)da=Hi.rect,Uo=Hi.metrics;else{const ws=jt[Mn.fontStack],Wh=ws&&ws[si];if(!Wh)continue;Uo=Wh.metrics}gi=(ai-Mn.scale)*ti}$o?(dt.verticalizable=!0,Vi.push({glyph:si,imageName:pa,x:Gn,y:cr+gi,vertical:$o,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:oo,metrics:Uo,rect:da}),Gn+=bs*Mn.scale+sn):(Vi.push({glyph:si,imageName:pa,x:Gn,y:cr+gi,vertical:$o,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:oo,metrics:Uo,rect:da}),Gn+=Uo.advance*Mn.scale+sn)}Vi.length!==0&&(hr=Math.max(Gn-sn,hr),hS(Vi,0,Vi.length-1,Br,Gi)),Gn=0;const yr=At*ai+Gi;Ai.lineOffset=Math.max(Gi,mi),cr+=yr,ii=Math.max(yr,ii),++jr}var Yr;const oi=cr-kd,{horizontalAlign:pi,verticalAlign:$i}=K0(Dt);(function(Dr,ai,mi,Ai,Vi,Gi,yr,qr,Mn){const oo=(ai-mi)*Vi;let si=0;si=Gi!==yr?-qr*Ai-kd:(-Ai*Mn+.5)*yr;for(const gi of Dr)for(const Uo of gi.positionedGlyphs)Uo.x+=oo,Uo.y+=si})(dt.positionedLines,Br,pi,$i,hr,ii,At,oi,Lt.length),dt.top+=-$i*oi,dt.bottom=dt.top+oi,dt.left+=-pi*hr,dt.right=dt.left+hr}(vt,n,a,h,Ze,x,I,M,re,$,le,Oe),!function(dt){for(const jt of dt)if(jt.positionedGlyphs.length!==0)return!1;return!0}(lt)&&vt}const zd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},uS={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function f_(o,n,a,h,p,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*ti/v+p:0}{const x=a[n.fontStack],I=x&&x[o];return I?I.metrics.advance*n.scale+p:0}}function d_(o,n,a,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(a)*a}function cS(o,n,a){let h=0;return o===10&&(h-=1e4),a&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function p_(o,n,a,h,p,v){let x=null,I=d_(n,a,p,v);for(const M of h){const $=d_(n-M.x,a,p,v)+M.badness;$<=I&&(x=M,I=$)}return{index:o,x:n,priorBreak:x,badness:I}}function m_(o){return o?m_(o.priorBreak).concat(o.index):[]}function X0(o,n,a,h,p,v,x){if(v!=="point")return[];if(!o)return[];const I=[],M=function(le,me,ye,Oe,Fe,Ze){let nt=0;for(let et=0;et<le.length();et++){const lt=le.getSection(et);nt+=f_(le.getCharCode(et),lt,Oe,Fe,me,Ze)}return nt/Math.max(1,Math.ceil(nt/ye))}(o,n,a,h,p,x),$=o.text.indexOf("\u200B")>=0;let Q=0;for(let le=0;le<o.length();le++){const me=o.getSection(le),ye=o.getCharCode(le);if(zd[ye]||(Q+=f_(ye,me,h,p,n,x)),le<o.length()-1){const Oe=!((re=ye)<11904||!(bt["Bopomofo Extended"](re)||bt.Bopomofo(re)||bt["CJK Compatibility Forms"](re)||bt["CJK Compatibility Ideographs"](re)||bt["CJK Compatibility"](re)||bt["CJK Radicals Supplement"](re)||bt["CJK Strokes"](re)||bt["CJK Symbols and Punctuation"](re)||bt["CJK Unified Ideographs Extension A"](re)||bt["CJK Unified Ideographs"](re)||bt["Enclosed CJK Letters and Months"](re)||bt["Halfwidth and Fullwidth Forms"](re)||bt.Hiragana(re)||bt["Ideographic Description Characters"](re)||bt["Kangxi Radicals"](re)||bt["Katakana Phonetic Extensions"](re)||bt.Katakana(re)||bt["Vertical Forms"](re)||bt["Yi Radicals"](re)||bt["Yi Syllables"](re)));(uS[ye]||Oe||me.imageName)&&I.push(p_(le+1,Q,M,I,cS(ye,o.getCharCode(le+1),Oe&&$),!1))}}var re;return m_(p_(o.length(),Q,M,I,0,!0))}function K0(o){let n=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function hS(o,n,a,h,p){if(!h&&!p)return;const v=o[a],x=(o[a].x+v.metrics.advance*v.scale)*h;for(let I=n;I<=a;I++)o[I].x-=x,o[I].y+=p}function fS(o,n,a){const{horizontalAlign:h,verticalAlign:p}=K0(a),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function g_(o,n,a,h,p,v){const x=o.image;let I;if(x.content){const Fe=x.content,Ze=x.pixelRatio||1;I=[Fe[0]/Ze,Fe[1]/Ze,x.displaySize[0]-Fe[2]/Ze,x.displaySize[1]-Fe[3]/Ze]}const M=n.left*v,$=n.right*v;let Q,re,le,me;a==="width"||a==="both"?(me=p[0]+M-h[3],re=p[0]+$+h[1]):(me=p[0]+(M+$-x.displaySize[0])/2,re=me+x.displaySize[0]);const ye=n.top*v,Oe=n.bottom*v;return a==="height"||a==="both"?(Q=p[1]+ye-h[0],le=p[1]+Oe+h[2]):(Q=p[1]+(ye+Oe-x.displaySize[1])/2,le=Q+x.displaySize[1]),{image:x,top:Q,right:re,bottom:le,left:me,collisionPadding:I}}const $a=128;function Y0(o,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new lr(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=a;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const I=h[v],M=h[x];return a.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:M,interpolationType:p}:{kind:"camera",minZoom:I,maxZoom:M,minSize:a.evaluate(new lr(I)),maxSize:a.evaluate(new lr(M)),interpolationType:p}}}function y_(o,{uSize:n,uSizeT:a},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/$a:o.kind==="composite"?or(h/$a,p/$a,a):n}function v_(o,n){let a=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,I=p?T(fi.interpolationFactor(p,n,v,x),0,1):0;o.kind==="camera"?h=or(o.minSize,o.maxSize,I):a=I}return{uSizeT:a,uSize:h}}var dS=Object.freeze({__proto__:null,getSizeData:Y0,evaluateSizeForFeature:y_,evaluateSizeForZoom:v_,SIZE_PACK_FACTOR:$a});class sl extends ie{constructor(n,a,h,p){super(n,a),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new sl(this.x,this.y,this.angle,this.segment)}}function x_(o,n,a,h,p){if(n.segment===void 0)return!0;let v=n,x=n.segment+1,I=0;for(;I>-a/2;){if(x--,x<0)return!1;I-=o[x].dist(v),v=o[x]}I+=o[x].dist(o[x+1]),x++;const M=[];let $=0;for(;I<a/2;){const Q=o[x],re=o[x+1];if(!re)return!1;let le=o[x-1].angleTo(Q)-Q.angleTo(re);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:I,angleDelta:le}),$+=le;I-M[0].distance>h;)$-=M.shift().angleDelta;if($>p)return!1;x++,I+=Q.dist(re)}return!0}function __(o){let n=0;for(let a=0;a<o.length-1;a++)n+=o[a].dist(o[a+1]);return n}function b_(o,n,a){return o?.6*n*a:0}function w_(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function pS(o,n,a,h,p,v){const x=b_(a,p,v),I=w_(a,h)*v;let M=0;const $=__(o)/2;for(let Q=0;Q<o.length-1;Q++){const re=o[Q],le=o[Q+1],me=re.dist(le);if(M+me>$){const ye=($-M)/me,Oe=or(re.x,le.x,ye),Fe=or(re.y,le.y,ye),Ze=new sl(Oe,Fe,le.angleTo(re),Q);return Ze._round(),!x||x_(o,Ze,I,x,n)?Ze:void 0}M+=me}}function mS(o,n,a,h,p,v,x,I,M){const $=b_(h,v,x),Q=w_(h,p),re=Q*x,le=o[0].x===0||o[0].x===M||o[0].y===0||o[0].y===M;return n-re<n/4&&(n=re+n/4),E_(o,le?n/2*I%n:(Q/2+2*v)*x*I%n,n,$,a,re,le,!1,M)}function E_(o,n,a,h,p,v,x,I,M){const $=v/2,Q=__(o);let re=0,le=n-a,me=[];for(let ye=0;ye<o.length-1;ye++){const Oe=o[ye],Fe=o[ye+1],Ze=Oe.dist(Fe),nt=Fe.angleTo(Oe);for(;le+a<re+Ze;){le+=a;const et=(le-re)/Ze,lt=or(Oe.x,Fe.x,et),vt=or(Oe.y,Fe.y,et);if(lt>=0&&lt<M&&vt>=0&&vt<M&&le-$>=0&&le+$<=Q){const dt=new sl(lt,vt,nt,ye);dt._round(),h&&!x_(o,dt,v,h,p)||me.push(dt)}}re+=Ze}return I||me.length||x||(me=E_(o,re/2,a,h,p,v,x,!0,M)),me}function S_(o,n,a,h,p){const v=[];for(let x=0;x<o.length;x++){const I=o[x];let M;for(let $=0;$<I.length-1;$++){let Q=I[$],re=I[$+1];Q.x<n&&re.x<n||(Q.x<n?Q=new ie(n,Q.y+(n-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round():re.x<n&&(re=new ie(n,Q.y+(n-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round()),Q.y<a&&re.y<a||(Q.y<a?Q=new ie(Q.x+(a-Q.y)/(re.y-Q.y)*(re.x-Q.x),a)._round():re.y<a&&(re=new ie(Q.x+(a-Q.y)/(re.y-Q.y)*(re.x-Q.x),a)._round()),Q.x>=h&&re.x>=h||(Q.x>=h?Q=new ie(h,Q.y+(h-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round():re.x>=h&&(re=new ie(h,Q.y+(h-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round()),Q.y>=p&&re.y>=p||(Q.y>=p?Q=new ie(Q.x+(p-Q.y)/(re.y-Q.y)*(re.x-Q.x),p)._round():re.y>=p&&(re=new ie(Q.x+(p-Q.y)/(re.y-Q.y)*(re.x-Q.x),p)._round()),M&&Q.equals(M[M.length-1])||(M=[Q],v.push(M)),M.push(re)))))}}return v}function C_(o,n,a,h){const p=[],v=o.image,x=v.pixelRatio,I=v.paddedRect.w-2,M=v.paddedRect.h-2,$=o.right-o.left,Q=o.bottom-o.top,re=v.stretchX||[[0,I]],le=v.stretchY||[[0,M]],me=(At,Dt)=>At+Dt[1]-Dt[0],ye=re.reduce(me,0),Oe=le.reduce(me,0),Fe=I-ye,Ze=M-Oe;let nt=0,et=ye,lt=0,vt=Oe,dt=0,jt=Fe,tn=0,zt=Ze;if(v.content&&h){const At=v.content;nt=Ld(re,0,At[0]),lt=Ld(le,0,At[1]),et=Ld(re,At[0],At[2]),vt=Ld(le,At[1],At[3]),dt=At[0]-nt,tn=At[1]-lt,jt=At[2]-At[0]-et,zt=At[3]-At[1]-vt}const Lt=(At,Dt,Ot,wt)=>{const sn=Od(At.stretch-nt,et,$,o.left),nn=Rd(At.fixed-dt,jt,At.stretch,ye),Rn=Od(Dt.stretch-lt,vt,Q,o.top),Gn=Rd(Dt.fixed-tn,zt,Dt.stretch,Oe),cr=Od(Ot.stretch-nt,et,$,o.left),hr=Rd(Ot.fixed-dt,jt,Ot.stretch,ye),ii=Od(wt.stretch-lt,vt,Q,o.top),Br=Rd(wt.fixed-tn,zt,wt.stretch,Oe),jr=new ie(sn,Rn),Yr=new ie(cr,Rn),oi=new ie(cr,ii),pi=new ie(sn,ii),$i=new ie(nn/x,Gn/x),Dr=new ie(hr/x,Br/x),ai=n*Math.PI/180;if(ai){const Vi=Math.sin(ai),Gi=Math.cos(ai),yr=[Gi,-Vi,Vi,Gi];jr._matMult(yr),Yr._matMult(yr),pi._matMult(yr),oi._matMult(yr)}const mi=At.stretch+At.fixed,Ai=Dt.stretch+Dt.fixed;return{tl:jr,tr:Yr,bl:pi,br:oi,tex:{x:v.paddedRect.x+1+mi,y:v.paddedRect.y+1+Ai,w:Ot.stretch+Ot.fixed-mi,h:wt.stretch+wt.fixed-Ai},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$i,pixelOffsetBR:Dr,minFontScaleX:jt/x/$,minFontScaleY:zt/x/Q,isSDF:a}};if(h&&(v.stretchX||v.stretchY)){const At=T_(re,Fe,ye),Dt=T_(le,Ze,Oe);for(let Ot=0;Ot<At.length-1;Ot++){const wt=At[Ot],sn=At[Ot+1];for(let nn=0;nn<Dt.length-1;nn++)p.push(Lt(wt,Dt[nn],sn,Dt[nn+1]))}}else p.push(Lt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:M+1}));return p}function Ld(o,n,a){let h=0;for(const p of o)h+=Math.max(n,Math.min(a,p[1]))-Math.max(n,Math.min(a,p[0]));return h}function T_(o,n,a){const h=[{fixed:-1,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:n+1,stretch:a}),h}function Od(o,n,a,h){return o/n*a+h}function Rd(o,n,a,h){return o-n*a/h}_t("Anchor",sl);class Fd{constructor(n,a,h,p,v,x,I,M,$,Q){if(this.boxStartIndex=n.length,$){let re=x.top,le=x.bottom;const me=x.collisionPadding;me&&(re-=me[1],le+=me[3]);let ye=le-re;ye>0&&(ye=Math.max(10,ye),this.circleDiameter=ye)}else{let re=x.top*I-M,le=x.bottom*I+M,me=x.left*I-M,ye=x.right*I+M;const Oe=x.collisionPadding;if(Oe&&(me-=Oe[0]*I,re-=Oe[1]*I,ye+=Oe[2]*I,le+=Oe[3]*I),Q){const Fe=new ie(me,re),Ze=new ie(ye,re),nt=new ie(me,le),et=new ie(ye,le),lt=Q*Math.PI/180;Fe._rotate(lt),Ze._rotate(lt),nt._rotate(lt),et._rotate(lt),me=Math.min(Fe.x,Ze.x,nt.x,et.x),ye=Math.max(Fe.x,Ze.x,nt.x,et.x),re=Math.min(Fe.y,Ze.y,nt.y,et.y),le=Math.max(Fe.y,Ze.y,nt.y,et.y)}n.emplaceBack(a.x,a.y,me,re,ye,le,h,p,v)}this.boxEndIndex=n.length}}class gS{constructor(n=[],a=yS){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:h}=this,p=a[n];for(;n>0;){const v=n-1>>1,x=a[v];if(h(p,x)>=0)break;a[n]=x,n=v}a[n]=p}_down(n){const{data:a,compare:h}=this,p=this.length>>1,v=a[n];for(;n<p;){let x=1+(n<<1),I=a[x];const M=x+1;if(M<this.length&&h(a[M],I)<0&&(x=M,I=a[M]),h(I,v)>=0)break;a[n]=I,n=x}a[n]=v}}function yS(o,n){return o<n?-1:o>n?1:0}function vS(o,n=1,a=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const I=o[0];for(let me=0;me<I.length;me++){const ye=I[me];(!me||ye.x<h)&&(h=ye.x),(!me||ye.y<p)&&(p=ye.y),(!me||ye.x>v)&&(v=ye.x),(!me||ye.y>x)&&(x=ye.y)}const M=Math.min(v-h,x-p);let $=M/2;const Q=new gS([],xS);if(M===0)return new ie(h,p);for(let me=h;me<v;me+=M)for(let ye=p;ye<x;ye+=M)Q.push(new xc(me+$,ye+$,$,o));let re=function(me){let ye=0,Oe=0,Fe=0;const Ze=me[0];for(let nt=0,et=Ze.length,lt=et-1;nt<et;lt=nt++){const vt=Ze[nt],dt=Ze[lt],jt=vt.x*dt.y-dt.x*vt.y;Oe+=(vt.x+dt.x)*jt,Fe+=(vt.y+dt.y)*jt,ye+=3*jt}return new xc(Oe/ye,Fe/ye,0,me)}(o),le=Q.length;for(;Q.length;){const me=Q.pop();(me.d>re.d||!re.d)&&(re=me,a&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,le)),me.max-re.d<=n||($=me.h/2,Q.push(new xc(me.p.x-$,me.p.y-$,$,o)),Q.push(new xc(me.p.x+$,me.p.y-$,$,o)),Q.push(new xc(me.p.x-$,me.p.y+$,$,o)),Q.push(new xc(me.p.x+$,me.p.y+$,$,o)),le+=4)}return a&&(console.log(`num probes: ${le}`),console.log(`best distance: ${re.d}`)),re.p}function xS(o,n){return n.max-o.max}function xc(o,n,a,h){this.p=new ie(o,n),this.h=a,this.d=function(p,v){let x=!1,I=1/0;for(let M=0;M<v.length;M++){const $=v[M];for(let Q=0,re=$.length,le=re-1;Q<re;le=Q++){const me=$[Q],ye=$[le];me.y>p.y!=ye.y>p.y&&p.x<(ye.x-me.x)*(p.y-me.y)/(ye.y-me.y)+me.x&&(x=!x),I=Math.min(I,Fx(p,me,ye))}}return(x?1:-1)*Math.sqrt(I)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const q0=Number.POSITIVE_INFINITY;function A_(o,n){return n[1]!==q0?function(a,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),a){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(a){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(a,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.sqrt(2);switch(a){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-h;break;case"top":v=h-7}switch(a){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function J0(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _S(o,n,a,h,p,v,x,I,M,$,Q){let re=v.textMaxSize.evaluate(n,{});re===void 0&&(re=x);const le=o.layers[0].layout,me=le.get("icon-offset").evaluate(n,{},Q),ye=P_(a.horizontal),Oe=x/24,Fe=o.tilePixelRatio*Oe,Ze=o.tilePixelRatio*re/24,nt=o.tilePixelRatio*I,et=o.tilePixelRatio*le.get("symbol-spacing"),lt=le.get("text-padding")*o.tilePixelRatio,vt=le.get("icon-padding")*o.tilePixelRatio,dt=le.get("text-max-angle")/180*Math.PI,jt=le.get("text-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",tn=le.get("icon-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",zt=le.get("symbol-placement"),Lt=et/2,At=le.get("icon-text-fit");let Dt;h&&At!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(Dt=g_(h,a.vertical,At,le.get("icon-text-fit-padding"),me,Oe)),ye&&(h=g_(h,ye,At,le.get("icon-text-fit-padding"),me,Oe)));const Ot=(wt,sn)=>{sn.x<0||sn.x>=Xr||sn.y<0||sn.y>=Xr||function(nn,Rn,Gn,cr,hr,ii,Br,jr,Yr,oi,pi,$i,Dr,ai,mi,Ai,Vi,Gi,yr,qr,Mn,oo,si,gi,Uo){const da=nn.addToLineVertexArray(Rn,Gn);let pa,bs,$o,_o,Hi=0,ws=0,Wh=0,H_=0,lg=-1,ug=-1;const Es={};let W_=nl(""),cg=0,hg=0;if(jr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[cg,hg]=jr.layout.get("text-offset").evaluate(Mn,{},gi).map(Wi=>Wi*ti):(cg=jr.layout.get("text-radial-offset").evaluate(Mn,{},gi)*ti,hg=q0),nn.allowVerticalPlacement&&cr.vertical){const Wi=jr.layout.get("text-rotate").evaluate(Mn,{},gi)+90;$o=new Fd(Yr,Rn,oi,pi,$i,cr.vertical,Dr,ai,mi,Wi),Br&&(_o=new Fd(Yr,Rn,oi,pi,$i,Br,Vi,Gi,mi,Wi))}if(hr){const Wi=jr.layout.get("icon-rotate").evaluate(Mn,{}),Va=jr.layout.get("icon-text-fit")!=="none",Zh=C_(hr,Wi,si,Va),Xh=Br?C_(Br,Wi,si,Va):void 0;bs=new Fd(Yr,Rn,oi,pi,$i,hr,Vi,Gi,!1,Wi),Hi=4*Zh.length;const K_=nn.iconSizeData;let vu=null;K_.kind==="source"?(vu=[$a*jr.layout.get("icon-size").evaluate(Mn,{})],vu[0]>ll&&G(`${nn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):K_.kind==="composite"&&(vu=[$a*oo.compositeIconSizes[0].evaluate(Mn,{},gi),$a*oo.compositeIconSizes[1].evaluate(Mn,{},gi)],(vu[0]>ll||vu[1]>ll)&&G(`${nn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),nn.addSymbols(nn.icon,Zh,vu,qr,yr,Mn,l.WritingMode.none,Rn,da.lineStartIndex,da.lineLength,-1,gi),lg=nn.icon.placedSymbolArray.length-1,Xh&&(ws=4*Xh.length,nn.addSymbols(nn.icon,Xh,vu,qr,yr,Mn,l.WritingMode.vertical,Rn,da.lineStartIndex,da.lineLength,-1,gi),ug=nn.icon.placedSymbolArray.length-1)}const Z_=Object.keys(cr.horizontal);for(const Wi of Z_){const Va=cr.horizontal[Wi];if(!pa){W_=nl(Va.text);const Xh=jr.layout.get("text-rotate").evaluate(Mn,{},gi);pa=new Fd(Yr,Rn,oi,pi,$i,Va,Dr,ai,mi,Xh)}const Zh=Va.positionedLines.length===1;if(Wh+=I_(nn,Rn,Va,ii,jr,mi,Mn,Ai,da,cr.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Zh?Z_:[Wi],Es,lg,oo,gi),Zh)break}cr.vertical&&(H_+=I_(nn,Rn,cr.vertical,ii,jr,mi,Mn,Ai,da,l.WritingMode.vertical,["vertical"],Es,ug,oo,gi));const LS=pa?pa.boxStartIndex:nn.collisionBoxArray.length,OS=pa?pa.boxEndIndex:nn.collisionBoxArray.length,RS=$o?$o.boxStartIndex:nn.collisionBoxArray.length,FS=$o?$o.boxEndIndex:nn.collisionBoxArray.length,BS=bs?bs.boxStartIndex:nn.collisionBoxArray.length,jS=bs?bs.boxEndIndex:nn.collisionBoxArray.length,DS=_o?_o.boxStartIndex:nn.collisionBoxArray.length,NS=_o?_o.boxEndIndex:nn.collisionBoxArray.length;let ma=-1;const Ud=(Wi,Va)=>Wi&&Wi.circleDiameter?Math.max(Wi.circleDiameter,Va):Va;ma=Ud(pa,ma),ma=Ud($o,ma),ma=Ud(bs,ma),ma=Ud(_o,ma);const X_=ma>-1?1:0;X_&&(ma*=Uo/ti),nn.glyphOffsetArray.length>=_c.MAX_GLYPHS&&G("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mn.sortKey!==void 0&&nn.addToSortKeyRanges(nn.symbolInstances.length,Mn.sortKey),nn.symbolInstances.emplaceBack(Rn.x,Rn.y,Es.right>=0?Es.right:-1,Es.center>=0?Es.center:-1,Es.left>=0?Es.left:-1,Es.vertical||-1,lg,ug,W_,LS,OS,RS,FS,BS,jS,DS,NS,oi,Wh,H_,Hi,ws,X_,0,Dr,cg,hg,ma)}(o,sn,wt,a,h,p,Dt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Fe,lt,jt,M,nt,vt,tn,me,n,v,$,Q,x)};if(zt==="line")for(const wt of S_(n.geometry,0,0,Xr,Xr)){const sn=mS(wt,et,dt,a.vertical||ye,h,24,Ze,o.overscaling,Xr);for(const nn of sn){const Rn=ye;Rn&&bS(o,Rn.text,Lt,nn)||Ot(wt,nn)}}else if(zt==="line-center"){for(const wt of n.geometry)if(wt.length>1){const sn=pS(wt,dt,a.vertical||ye,h,24,Ze);sn&&Ot(wt,sn)}}else if(n.type==="Polygon")for(const wt of j0(n.geometry,0)){const sn=vS(wt,16);Ot(wt[0],new sl(sn.x,sn.y,0))}else if(n.type==="LineString")for(const wt of n.geometry)Ot(wt,new sl(wt[0].x,wt[0].y,0));else if(n.type==="Point")for(const wt of n.geometry)for(const sn of wt)Ot([sn],new sl(sn.x,sn.y,0))}const ll=32640;function I_(o,n,a,h,p,v,x,I,M,$,Q,re,le,me,ye){const Oe=function(nt,et,lt,vt,dt,jt,tn,zt){const Lt=vt.layout.get("text-rotate").evaluate(jt,{})*Math.PI/180,At=[];for(const Dt of et.positionedLines)for(const Ot of Dt.positionedGlyphs){if(!Ot.rect)continue;const wt=Ot.rect||{};let sn=4,nn=!0,Rn=1,Gn=0;const cr=(dt||zt)&&Ot.vertical,hr=Ot.metrics.advance*Ot.scale/2;if(zt&&et.verticalizable){const yr=(Ot.scale-1)*ti,qr=(ti-Ot.metrics.width*Ot.scale)/2;Gn=Dt.lineOffset/2-(Ot.imageName?-qr:yr)}if(Ot.imageName){const yr=tn[Ot.imageName];nn=yr.sdf,Rn=yr.pixelRatio,sn=1/Rn}const ii=dt?[Ot.x+hr,Ot.y]:[0,0];let Br=dt?[0,0]:[Ot.x+hr+lt[0],Ot.y+lt[1]-Gn],jr=[0,0];cr&&(jr=Br,Br=[0,0]);const Yr=(Ot.metrics.left-sn)*Ot.scale-hr+Br[0],oi=(-Ot.metrics.top-sn)*Ot.scale+Br[1],pi=Yr+wt.w*Ot.scale/Rn,$i=oi+wt.h*Ot.scale/Rn,Dr=new ie(Yr,oi),ai=new ie(pi,oi),mi=new ie(Yr,$i),Ai=new ie(pi,$i);if(cr){const yr=new ie(-hr,hr-kd),qr=-Math.PI/2,Mn=12-hr,oo=new ie(22-Mn,-(Ot.imageName?Mn:0)),si=new ie(...jr);Dr._rotateAround(qr,yr)._add(oo)._add(si),ai._rotateAround(qr,yr)._add(oo)._add(si),mi._rotateAround(qr,yr)._add(oo)._add(si),Ai._rotateAround(qr,yr)._add(oo)._add(si)}if(Lt){const yr=Math.sin(Lt),qr=Math.cos(Lt),Mn=[qr,-yr,yr,qr];Dr._matMult(Mn),ai._matMult(Mn),mi._matMult(Mn),Ai._matMult(Mn)}const Vi=new ie(0,0),Gi=new ie(0,0);At.push({tl:Dr,tr:ai,bl:mi,br:Ai,tex:wt,writingMode:et.writingMode,glyphOffset:ii,sectionIndex:Ot.sectionIndex,isSDF:nn,pixelOffsetTL:Vi,pixelOffsetBR:Gi,minFontScaleX:0,minFontScaleY:0})}return At}(0,a,I,p,v,x,h,o.allowVerticalPlacement),Fe=o.textSizeData;let Ze=null;Fe.kind==="source"?(Ze=[$a*p.layout.get("text-size").evaluate(x,{})],Ze[0]>ll&&G(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Fe.kind==="composite"&&(Ze=[$a*me.compositeTextSizes[0].evaluate(x,{},ye),$a*me.compositeTextSizes[1].evaluate(x,{},ye)],(Ze[0]>ll||Ze[1]>ll)&&G(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Oe,Ze,I,v,x,$,n,M.lineStartIndex,M.lineLength,le,ye);for(const nt of Q)re[nt]=o.text.placedSymbolArray.length-1;return 4*Oe.length}function P_(o){for(const n in o)return o[n];return null}function bS(o,n,a,h){const p=o.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<a)return!0}else p[n]=[];return p[n].push(h),!1}const wS=ol.VectorTileFeature.types,ES=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bd(o,n,a,h,p,v,x,I,M,$,Q,re,le){const me=I?Math.min(ll,Math.round(I[0])):0,ye=I?Math.min(ll,Math.round(I[1])):0;o.emplaceBack(n,a,Math.round(32*h),Math.round(32*p),v,x,(me<<1)+(M?1:0),ye,16*$,16*Q,256*re,256*le)}function Q0(o,n,a){o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a)}function SS(o){for(const n of o.sections)if(E0(n.text))return!0;return!1}class eg{constructor(n){this.layoutVertexArray=new gr,this.indexArray=new Ni,this.programConfigurations=n,this.segments=new Kn,this.dynamicLayoutVertexArray=new ei,this.opacityVertexArray=new ji,this.placedSymbolArray=new ut}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,WE.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,ZE.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,ES,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}_t("SymbolBuffers",eg);class tg{constructor(n,a,h){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new h,this.segments=new Kn,this.collisionVertexArray=new yo}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,XE.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}_t("CollisionBuffers",tg);class _c{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=k0([]),this.placementViewportMatrix=k0([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Y0(this.zoom,a["text-size"]),this.iconSizeData=Y0(this.zoom,a["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=rg(h,"text-overlap","text-allow-overlap")!=="never"||rg(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new eg(new du(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new eg(new du(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new mt,this.lineVertexArray=new Yt,this.symbolInstances=new St}calculateGlyphDependencies(n,a,h,p,v){for(let x=0;x<n.length;x++)if(a[n.charCodeAt(x)]=!0,(h||p)&&v){const I=$h[n.charAt(x)];I&&(a[I.charCodeAt(0)]=!0)}}populate(n,a,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),I=v.get("text-field"),M=v.get("icon-image"),$=(I.value.kind!=="constant"||I.value.value instanceof ke&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),Q=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,re=v.get("symbol-sort-key");if(this.features=[],!$&&!Q)return;const le=a.iconDependencies,me=a.glyphDependencies,ye=a.availableImages,Oe=new lr(this.zoom);for(const{feature:Fe,id:Ze,index:nt,sourceLayerIndex:et}of n){const lt=p._featureFilter.needGeometry,vt=mu(Fe,lt);if(!p._featureFilter.filter(Oe,vt,h))continue;let dt,jt;if(lt||(vt.geometry=pu(Fe)),$){const zt=p.getValueAndResolveTokens("text-field",vt,h,ye),Lt=ke.factory(zt);SS(Lt)&&(this.hasRTLText=!0),(!this.hasRTLText||el()==="unavailable"||this.hasRTLText&&Ci.isParsed())&&(dt=YE(Lt,p,vt))}if(Q){const zt=p.getValueAndResolveTokens("icon-image",vt,h,ye);jt=zt instanceof Ge?zt:Ge.fromString(zt)}if(!dt&&!jt)continue;const tn=this.sortFeaturesByKey?re.evaluate(vt,{},h):void 0;if(this.features.push({id:Ze,text:dt,icon:jt,index:nt,sourceLayerIndex:et,geometry:vt.geometry,properties:Fe.properties,type:wS[Fe.type],sortKey:tn}),jt&&(le[jt.name]=!0),dt){const zt=x.evaluate(vt,{},h).join(","),Lt=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const At of dt.sections)if(At.image)le[At.image.name]=!0;else{const Dt=Fi(dt.toString()),Ot=At.fontStack||zt,wt=me[Ot]=me[Ot]||{};this.calculateGlyphDependencies(At.text,wt,Lt,this.allowVerticalPlacement,Dt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Fe){const Ze={},nt={},et=[];let lt=0;function vt(zt){et.push(Fe[zt]),lt++}function dt(zt,Lt,At){const Dt=nt[zt];return delete nt[zt],nt[Lt]=Dt,et[Dt].geometry[0].pop(),et[Dt].geometry[0]=et[Dt].geometry[0].concat(At[0]),Dt}function jt(zt,Lt,At){const Dt=Ze[Lt];return delete Ze[Lt],Ze[zt]=Dt,et[Dt].geometry[0].shift(),et[Dt].geometry[0]=At[0].concat(et[Dt].geometry[0]),Dt}function tn(zt,Lt,At){const Dt=At?Lt[0][Lt[0].length-1]:Lt[0][0];return`${zt}:${Dt.x}:${Dt.y}`}for(let zt=0;zt<Fe.length;zt++){const Lt=Fe[zt],At=Lt.geometry,Dt=Lt.text?Lt.text.toString():null;if(!Dt){vt(zt);continue}const Ot=tn(Dt,At),wt=tn(Dt,At,!0);if(Ot in nt&&wt in Ze&&nt[Ot]!==Ze[wt]){const sn=jt(Ot,wt,At),nn=dt(Ot,wt,et[sn].geometry);delete Ze[Ot],delete nt[wt],nt[tn(Dt,et[nn].geometry,!0)]=nn,et[sn].geometry=null}else Ot in nt?dt(Ot,wt,At):wt in Ze?jt(Ot,wt,At):(vt(zt),Ze[Ot]=lt-1,nt[wt]=lt-1)}return et.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Fe,Ze)=>Fe.sortKey-Ze.sortKey)}update(n,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(a[n.segment+1]),v=n.dist(a[n.segment]);const x={};for(let I=n.segment+1;I<a.length;I++)x[I]={x:a[I].x,y:a[I].y,tileUnitDistanceFromAnchor:p},I<a.length-1&&(p+=a[I+1].dist(a[I]));for(let I=n.segment||0;I>=0;I--)x[I]={x:a[I].x,y:a[I].y,tileUnitDistanceFromAnchor:v},I>0&&(v+=a[I-1].dist(a[I]));for(let I=0;I<a.length;I++){const M=x[I];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,a,h,p,v,x,I,M,$,Q,re,le){const me=n.indexArray,ye=n.layoutVertexArray,Oe=n.segments.prepareSegment(4*a.length,ye,me,this.canOverlap?x.sortKey:void 0),Fe=this.glyphOffsetArray.length,Ze=Oe.vertexLength,nt=this.allowVerticalPlacement&&I===l.WritingMode.vertical?Math.PI/2:0,et=x.text&&x.text.sections;for(let lt=0;lt<a.length;lt++){const{tl:vt,tr:dt,bl:jt,br:tn,tex:zt,pixelOffsetTL:Lt,pixelOffsetBR:At,minFontScaleX:Dt,minFontScaleY:Ot,glyphOffset:wt,isSDF:sn,sectionIndex:nn}=a[lt],Rn=Oe.vertexLength,Gn=wt[1];Bd(ye,M.x,M.y,vt.x,Gn+vt.y,zt.x,zt.y,h,sn,Lt.x,Lt.y,Dt,Ot),Bd(ye,M.x,M.y,dt.x,Gn+dt.y,zt.x+zt.w,zt.y,h,sn,At.x,Lt.y,Dt,Ot),Bd(ye,M.x,M.y,jt.x,Gn+jt.y,zt.x,zt.y+zt.h,h,sn,Lt.x,At.y,Dt,Ot),Bd(ye,M.x,M.y,tn.x,Gn+tn.y,zt.x+zt.w,zt.y+zt.h,h,sn,At.x,At.y,Dt,Ot),Q0(n.dynamicLayoutVertexArray,M,nt),me.emplaceBack(Rn,Rn+1,Rn+2),me.emplaceBack(Rn+1,Rn+2,Rn+3),Oe.vertexLength+=4,Oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),lt!==a.length-1&&nn===a[lt+1].sectionIndex||n.programConfigurations.populatePaintArrays(ye.length,x,x.index,{},le,et&&et[nn])}n.placedSymbolArray.emplaceBack(M.x,M.y,Fe,this.glyphOffsetArray.length-Fe,Ze,$,Q,M.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],I,0,!1,0,re)}_addCollisionDebugVertex(n,a,h,p,v,x){return a.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,a,h,p,v,x,I){const M=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),$=M.vertexLength,Q=v.layoutVertexArray,re=v.collisionVertexArray,le=I.anchorX,me=I.anchorY;this._addCollisionDebugVertex(Q,re,x,le,me,new ie(n,a)),this._addCollisionDebugVertex(Q,re,x,le,me,new ie(h,a)),this._addCollisionDebugVertex(Q,re,x,le,me,new ie(h,p)),this._addCollisionDebugVertex(Q,re,x,le,me,new ie(n,p)),M.vertexLength+=4;const ye=v.indexArray;ye.emplaceBack($,$+1),ye.emplaceBack($+1,$+2),ye.emplaceBack($+2,$+3),ye.emplaceBack($+3,$),M.primitiveLength+=4}addDebugCollisionBoxes(n,a,h,p){for(let v=n;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new tg(Di,r_.members,vo),this.iconCollisionBox=new tg(Di,r_.members,vo);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,h,p,v,x,I,M,$){const Q={};for(let re=a;re<h;re++){const le=n.get(re);Q.textBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},Q.textFeatureIndex=le.featureIndex;break}for(let re=p;re<v;re++){const le=n.get(re);Q.verticalTextBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},Q.verticalTextFeatureIndex=le.featureIndex;break}for(let re=x;re<I;re++){const le=n.get(re);Q.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},Q.iconFeatureIndex=le.featureIndex;break}for(let re=M;re<$;re++){const le=n.get(re);Q.verticalIconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},Q.verticalIconFeatureIndex=le.featureIndex;break}return Q}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const h=n.placedSymbolArray.get(a),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),h=Math.cos(n),p=[],v=[],x=[];for(let I=0;I<this.symbolInstances.length;++I){x.push(I);const M=this.symbolInstances.get(I);p.push(0|Math.round(a*M.anchorX+h*M.anchorY)),v.push(M.featureIndex)}return x.sort((I,M)=>p[I]-p[M]||v[M]-v[I]),x}addToSortKeyRanges(n,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}_t("SymbolBucket",_c,{omit:["layers","collisionBoxArray","features","compareText"]}),_c.MAX_GLYPHS=65535,_c.addDynamicAttributes=Q0;const CS=new Ti({"symbol-placement":new qt(A.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(A.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(A.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ln(A.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(A.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(A.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(A.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(A.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(A.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(A.layout_symbol["icon-rotation-alignment"]),"icon-size":new ln(A.layout_symbol["icon-size"]),"icon-text-fit":new qt(A.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(A.layout_symbol["icon-text-fit-padding"]),"icon-image":new ln(A.layout_symbol["icon-image"]),"icon-rotate":new ln(A.layout_symbol["icon-rotate"]),"icon-padding":new qt(A.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(A.layout_symbol["icon-keep-upright"]),"icon-offset":new ln(A.layout_symbol["icon-offset"]),"icon-anchor":new ln(A.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(A.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(A.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(A.layout_symbol["text-rotation-alignment"]),"text-field":new ln(A.layout_symbol["text-field"]),"text-font":new ln(A.layout_symbol["text-font"]),"text-size":new ln(A.layout_symbol["text-size"]),"text-max-width":new ln(A.layout_symbol["text-max-width"]),"text-line-height":new qt(A.layout_symbol["text-line-height"]),"text-letter-spacing":new ln(A.layout_symbol["text-letter-spacing"]),"text-justify":new ln(A.layout_symbol["text-justify"]),"text-radial-offset":new ln(A.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(A.layout_symbol["text-variable-anchor"]),"text-anchor":new ln(A.layout_symbol["text-anchor"]),"text-max-angle":new qt(A.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(A.layout_symbol["text-writing-mode"]),"text-rotate":new ln(A.layout_symbol["text-rotate"]),"text-padding":new qt(A.layout_symbol["text-padding"]),"text-keep-upright":new qt(A.layout_symbol["text-keep-upright"]),"text-transform":new ln(A.layout_symbol["text-transform"]),"text-offset":new ln(A.layout_symbol["text-offset"]),"text-allow-overlap":new qt(A.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(A.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(A.layout_symbol["text-ignore-placement"]),"text-optional":new qt(A.layout_symbol["text-optional"])});var ng={paint:new Ti({"icon-opacity":new ln(A.paint_symbol["icon-opacity"]),"icon-color":new ln(A.paint_symbol["icon-color"]),"icon-halo-color":new ln(A.paint_symbol["icon-halo-color"]),"icon-halo-width":new ln(A.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ln(A.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(A.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(A.paint_symbol["icon-translate-anchor"]),"text-opacity":new ln(A.paint_symbol["text-opacity"]),"text-color":new ln(A.paint_symbol["text-color"],{runtimeType:Ir,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ln(A.paint_symbol["text-halo-color"]),"text-halo-width":new ln(A.paint_symbol["text-halo-width"]),"text-halo-blur":new ln(A.paint_symbol["text-halo-blur"]),"text-translate":new qt(A.paint_symbol["text-translate"]),"text-translate-anchor":new qt(A.paint_symbol["text-translate-anchor"])}),layout:CS};class k_{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:fn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_t("FormatSectionOverride",k_,{omit:["defaultValue"]});class jd extends Bi{constructor(n){super(n,ng)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,h,p){const v=this.layout.get(n).evaluate(a,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||ra(x.value)||!v?v:function(I,M){return M.replace(/{([^{}]+)}/g,($,Q)=>Q in I?String(I[Q]):"")}(a.properties,v)}createBucket(n){return new _c(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of ng.paint.overridableProperties){if(!jd.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),h=new k_(a),p=new nu(h,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new Ys("source",p):new qs("composite",p,a.value.zoomStops,a.value._interpolationType),this.paint._values[n]=new Do(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&jd.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const h=n.get("text-field"),p=ng.paint.properties[a];let v=!1;const x=I=>{for(const M of I)if(p.overrides&&p.overrides.hasOverride(M))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ke)x(h.value.value.sections);else if(h.value.kind==="source"){const I=$=>{v||($ instanceof pt&&He($.value)===bi?x($.value.sections):$ instanceof Ut?x($.sections):$.eachChild(I))},M=h.value;M._styleExpression&&I(M._styleExpression.expression)}return v}}function rg(o,n,a){let h="never";const p=o.get(n);return p?h=p:o.get(a)&&(h="always"),h}var TS={paint:new Ti({"background-color":new qt(A.paint_background["background-color"]),"background-pattern":new sc(A.paint_background["background-pattern"]),"background-opacity":new qt(A.paint_background["background-opacity"])})},AS={paint:new Ti({"raster-opacity":new qt(A.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(A.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(A.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(A.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(A.paint_raster["raster-saturation"]),"raster-contrast":new qt(A.paint_raster["raster-contrast"]),"raster-resampling":new qt(A.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(A.paint_raster["raster-fade-duration"])})};class IS extends Bi{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const PS={circle:class extends Bi{constructor(o){super(o,aE)}createBucket(o){return new A0(o)}queryRadius(o){const n=o;return Oh("circle-radius",this,n)+Oh("circle-stroke-width",this,n)+bd(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,a,h,p,v,x,I){const M=wd(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,x),$=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a),Q=this.paint.get("circle-pitch-alignment")==="map",re=Q?M:function(me,ye){return me.map(Oe=>Dx(Oe,ye))}(M,I),le=Q?$*x:$;for(const me of h)for(const ye of me){const Oe=Q?ye:Dx(ye,I);let Fe=le;const Ze=Sd(M0(),Ed(ye.x,ye.y,0,1),I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Fe*=Ze[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Fe*=v.cameraToCenterDistance/Ze[3]),tE(re,Oe,Fe))return!0}return!1}},heatmap:class extends Bi{constructor(o){super(o,lE),this._updateColorRamp()}createBucket(o){return new Nx(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$x({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Bi{constructor(o){super(o,uE)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Bi{constructor(o){super(o,CE)}recalculate(o,n){super.recalculate(o,n);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new U0(o)}queryRadius(){return bd(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,a,h,p,v,x){return Rx(wd(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,x),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Bi{constructor(o){super(o,jE)}createBucket(o){return new V0(o)}queryRadius(){return bd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,a,h,p,v,x,I){const M=wd(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,x),$=this.paint.get("fill-extrusion-height").evaluate(n,a),Q=this.paint.get("fill-extrusion-base").evaluate(n,a),re=function(me,ye,Oe,Fe){const Ze=[];for(const nt of me){const et=Ed(nt.x,nt.y,0,1);Sd(et,et,ye),Ze.push(new ie(et[0]/et[3],et[1]/et[3]))}return Ze}(M,I),le=function(me,ye,Oe,Fe){const Ze=[],nt=[],et=Fe[8]*ye,lt=Fe[9]*ye,vt=Fe[10]*ye,dt=Fe[11]*ye,jt=Fe[8]*Oe,tn=Fe[9]*Oe,zt=Fe[10]*Oe,Lt=Fe[11]*Oe;for(const At of me){const Dt=[],Ot=[];for(const wt of At){const sn=wt.x,nn=wt.y,Rn=Fe[0]*sn+Fe[4]*nn+Fe[12],Gn=Fe[1]*sn+Fe[5]*nn+Fe[13],cr=Fe[2]*sn+Fe[6]*nn+Fe[14],hr=Fe[3]*sn+Fe[7]*nn+Fe[15],ii=cr+vt,Br=hr+dt,jr=Rn+jt,Yr=Gn+tn,oi=cr+zt,pi=hr+Lt,$i=new ie((Rn+et)/Br,(Gn+lt)/Br);$i.z=ii/Br,Dt.push($i);const Dr=new ie(jr/pi,Yr/pi);Dr.z=oi/pi,Ot.push(Dr)}Ze.push(Dt),nt.push(Ot)}return[Ze,nt]}(h,Q,$,I);return function(me,ye,Oe){let Fe=1/0;Rx(Oe,ye)&&(Fe=Jx(Oe,ye[0]));for(let Ze=0;Ze<ye.length;Ze++){const nt=ye[Ze],et=me[Ze];for(let lt=0;lt<nt.length-1;lt++){const vt=nt[lt],dt=[vt,nt[lt+1],et[lt+1],et[lt],vt];Ox(Oe,dt)&&(Fe=Math.min(Fe,Jx(Oe,dt)))}}return Fe!==1/0&&Fe}(le[0],le[1],re)}},line:class extends Bi{constructor(o){super(o,e_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ma,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=t_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new G0(o)}queryRadius(o){const n=o,a=n_(Oh("line-width",this,n),Oh("line-gap-width",this,n)),h=Oh("line-offset",this,n);return a/2+Math.abs(h)+bd(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,a,h,p,v,x){const I=wd(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,x),M=x/2*n_(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),$=this.paint.get("line-offset").evaluate(n,a);return $&&(h=function(Q,re){const le=[],me=new ie(0,0);for(let ye=0;ye<Q.length;ye++){const Oe=Q[ye],Fe=[];for(let Ze=0;Ze<Oe.length;Ze++){const nt=Oe[Ze-1],et=Oe[Ze],lt=Oe[Ze+1],vt=Ze===0?me:et.sub(nt)._unit()._perp(),dt=Ze===Oe.length-1?me:lt.sub(et)._unit()._perp(),jt=vt._add(dt)._unit();jt._mult(1/(jt.x*dt.x+jt.y*dt.y)),Fe.push(jt._mult(re)._add(et))}le.push(Fe)}return le}(h,$*x)),function(Q,re,le){for(let me=0;me<re.length;me++){const ye=re[me];if(Q.length>=3){for(let Oe=0;Oe<ye.length;Oe++)if(dc(Q,ye[Oe]))return!0}if(nE(Q,ye,le))return!0}return!1}(I,h,M)}isTileClipped(){return!0}},symbol:jd,background:class extends Bi{constructor(o){super(o,TS)}},raster:class extends Bi{constructor(o){super(o,AS)}}};class kS{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const M_=63710088e-1;class Tr{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Tr(F(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,h=this.lat*a,p=n.lat*a,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*a);return M_*Math.acos(Math.min(v,1))}toBounds(n=0){const a=360*n/40075017,h=a/Math.cos(Math.PI/180*this.lat);return new yu(new Tr(this.lng-h,this.lat-a),new Tr(this.lng+h,this.lat+a))}static convert(n){if(n instanceof Tr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Tr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Tr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class yu{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Tr?new Tr(n.lng,n.lat):Tr.convert(n),this}setSouthWest(n){return this._sw=n instanceof Tr?new Tr(n.lng,n.lat):Tr.convert(n),this}extend(n){const a=this._sw,h=this._ne;let p,v;if(n instanceof Tr)p=n,v=n;else{if(!(n instanceof yu))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(yu.convert(n)):this.extend(Tr.convert(n)):this;if(p=n._sw,v=n._ne,!p||!v)return this}return a||h?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),h.lng=Math.max(v.lng,h.lng),h.lat=Math.max(v.lat,h.lat)):(this._sw=new Tr(p.lng,p.lat),this._ne=new Tr(v.lng,v.lat)),this}getCenter(){return new Tr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Tr(this.getWest(),this.getNorth())}getSouthEast(){return new Tr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:h}=Tr.convert(n);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(n){return n instanceof yu?n:n&&new yu(n)}}const z_=2*Math.PI*M_;function L_(o){return z_*Math.cos(o*Math.PI/180)}function O_(o){return(180+o)/360}function R_(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function F_(o,n){return o/L_(n)}function ig(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Dd{constructor(n,a,h=0){this.x=+n,this.y=+a,this.z=+h}static fromLngLat(n,a=0){const h=Tr.convert(n);return new Dd(O_(h.lng),R_(h.lat),F_(a,h.lat))}toLngLat(){return new Tr(360*this.x-180,ig(this.y))}toAltitude(){return this.z*L_(ig(this.y))}meterInMercatorCoordinateUnits(){return 1/z_*(n=ig(this.y),1/Math.cos(n*Math.PI/180));var n}}function B_(o,n,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class og{constructor(n,a,h){this.z=n,this.x=a,this.y=h,this.key=Gh(0,n,n,a,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,h){const p=(x=this.y,I=this.z,M=B_(256*(v=this.x),256*(x=Math.pow(2,I)-x-1),I),$=B_(256*(v+1),256*(x+1),I),M[0]+","+M[1]+","+$[0]+","+$[1]);var v,x,I,M,$;const Q=function(re,le,me){let ye,Oe="";for(let Fe=re;Fe>0;Fe--)ye=1<<Fe-1,Oe+=(le&ye?1:0)+(me&ye?2:0);return Oe}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,Q).replace(/{bbox-epsg-3857}/g,p)}getTilePoint(n){const a=Math.pow(2,this.z);return new ie((n.x*a-this.x)*Xr,(n.y*a-this.y)*Xr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class j_{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Gh(n,a.z,a.z,a.x,a.y)}}class No{constructor(n,a,h,p,v){this.overscaledZ=n,this.wrap=a,this.canonical=new og(h,+p,+v),this.key=Gh(a,n,h,p,v)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const a=this.canonical.z-n;return n>this.canonical.z?new No(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new No(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){const h=this.canonical.z-n;return n>this.canonical.z?Gh(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Gh(this.wrap*+a,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new No(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new No(a,this.wrap,a,h,p),new No(a,this.wrap,a,h+1,p),new No(a,this.wrap,a,h,p+1),new No(a,this.wrap,a,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new No(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new No(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new j_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Dd(n.x-this.wrap,n.y))}}function Gh(o,n,a,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<a;return(v*v*o+v*p+h).toString(36)+a.toString(36)+n.toString(36)}_t("CanonicalTileID",og),_t("OverscaledTileID",No,{omit:["posMatrix"]});class D_{constructor(n,a,h){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void G(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const p=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=h||"mapbox";for(let v=0;v<p;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(p,v)]=this.data[this._idx(p-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,p)]=this.data[this._idx(v,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]}get(n,a){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[p],h[p+1],h[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}_unpackMapbox(n,a,h){return(256*n*256+256*a+h)/10-1e4}_unpackTerrarium(n,a,h){return 256*n+a+h/256-32768}getPixels(){return new xo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,v=a*this.dim+this.dim,x=h*this.dim,I=h*this.dim+this.dim;switch(a){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=I-1;break;case 1:I=x+1}const M=-a*this.dim,$=-h*this.dim;for(let Q=x;Q<I;Q++)for(let re=p;re<v;re++)this.data[this._idx(re,Q)]=n.data[this._idx(re+M,Q+$)]}}_t("DEMData",D_);class N_{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const h=n[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}class U_{constructor(n,a,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n=function(a,h){var p={};for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&h.indexOf(v)<0&&(p[v]=a[v]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(v=Object.getOwnPropertySymbols(a);x<v.length;x++)h.indexOf(v[x])<0&&Object.prototype.propertyIsEnumerable.call(a,v[x])&&(p[v[x]]=a[v[x]])}return p}(this,["_geometry","_vectorTileFeature"]);return n.geometry=this.geometry,n}}class $_{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Kt(Xr,16,0),this.grid3D=new Kt(Xr,16,0),this.featureIndexArray=new pn,this.promoteId=a}insert(n,a,h,p,v,x){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const M=x?this.grid3D:this.grid;for(let $=0;$<a.length;$++){const Q=a[$],re=[1/0,1/0,-1/0,-1/0];for(let le=0;le<Q.length;le++){const me=Q[le];re[0]=Math.min(re[0],me.x),re[1]=Math.min(re[1],me.y),re[2]=Math.max(re[2],me.x),re[3]=Math.max(re[3],me.y)}re[0]<Xr&&re[1]<Xr&&re[2]>=0&&re[3]>=0&&M.insert(I,re[0],re[1],re[2],re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ol.VectorTile(new H0(this.rawTileData)).layers,this.sourceLayerCoder=new N_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,h,p){this.loadVTLayers();const v=n.params||{},x=Xr/n.tileSize/n.scale,I=Fa(v.filter),M=n.queryGeometry,$=n.queryPadding*x,Q=G_(M),re=this.grid.query(Q.minX-$,Q.minY-$,Q.maxX+$,Q.maxY+$),le=G_(n.cameraQueryGeometry),me=this.grid3D.query(le.minX-$,le.minY-$,le.maxX+$,le.maxY+$,(Fe,Ze,nt,et)=>function(lt,vt,dt,jt,tn){for(const Lt of lt)if(vt<=Lt.x&&dt<=Lt.y&&jt>=Lt.x&&tn>=Lt.y)return!0;const zt=[new ie(vt,dt),new ie(vt,tn),new ie(jt,tn),new ie(jt,dt)];if(lt.length>2){for(const Lt of zt)if(dc(lt,Lt))return!0}for(let Lt=0;Lt<lt.length-1;Lt++)if(iE(lt[Lt],lt[Lt+1],zt))return!0;return!1}(n.cameraQueryGeometry,Fe-$,Ze-$,nt+$,et+$));for(const Fe of me)re.push(Fe);re.sort(MS);const ye={};let Oe;for(let Fe=0;Fe<re.length;Fe++){const Ze=re[Fe];if(Ze===Oe)continue;Oe=Ze;const nt=this.featureIndexArray.get(Ze);let et=null;this.loadMatchingFeature(ye,nt.bucketIndex,nt.sourceLayerIndex,nt.featureIndex,I,v.layers,v.availableImages,a,h,p,(lt,vt,dt)=>(et||(et=pu(lt)),vt.queryIntersectsFeature(M,lt,dt,et,this.z,n.transform,x,n.pixelPosMatrix)))}return ye}loadMatchingFeature(n,a,h,p,v,x,I,M,$,Q,re){const le=this.bucketLayerIDs[a];if(x&&!function(Fe,Ze){for(let nt=0;nt<Fe.length;nt++)if(Ze.indexOf(Fe[nt])>=0)return!0;return!1}(x,le))return;const me=this.sourceLayerCoder.decode(h),ye=this.vtLayers[me].feature(p);if(v.needGeometry){const Fe=mu(ye,!0);if(!v.filter(new lr(this.tileID.overscaledZ),Fe,this.tileID.canonical))return}else if(!v.filter(new lr(this.tileID.overscaledZ),ye))return;const Oe=this.getId(ye,me);for(let Fe=0;Fe<le.length;Fe++){const Ze=le[Fe];if(x&&x.indexOf(Ze)<0)continue;const nt=M[Ze];if(!nt)continue;let et={};Oe&&Q&&(et=Q.getState(nt.sourceLayer||"_geojsonTileLayer",Oe));const lt=X({},$[Ze]);lt.paint=V_(lt.paint,nt.paint,ye,et,I),lt.layout=V_(lt.layout,nt.layout,ye,et,I);const vt=!re||re(ye,nt,et);if(!vt)continue;const dt=new U_(ye,this.z,this.x,this.y,Oe);dt.layer=lt;let jt=n[Ze];jt===void 0&&(jt=n[Ze]=[]),jt.push({featureIndex:p,feature:dt,intersectionZ:vt})}}lookupSymbolFeatures(n,a,h,p,v,x,I,M){const $={};this.loadVTLayers();const Q=Fa(v);for(const re of n)this.loadMatchingFeature($,h,p,re,Q,x,I,M,a);return $}hasLayer(n){for(const a of this.bucketLayerIDs)for(const h of a)if(n===h)return!0;return!1}getId(n,a){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function V_(o,n,a,h,p){return H(o,(v,x)=>{const I=n instanceof ac?n.get(x):null;return I&&I.evaluate?I.evaluate(a,h,p):I})}function G_(o){let n=1/0,a=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),a=Math.min(a,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:a,maxX:h,maxY:p}}function MS(o,n){return n-o}var ag;_t("FeatureIndex",$_,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(ag=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",ag.load="load",ag.fullLoad="fullLoad";let Nd=null,Hh=[];const sg=1e3/30,zS={mark(o){performance.mark(o)},frame(o){const n=o;Nd!=null&&Hh.push(n-Nd),Nd=n},clearMetrics(){Nd=null,Hh=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,a=Hh.length,h=1/(Hh.reduce((v,x)=>v+x,0)/a/1e3),p=Hh.filter(v=>v>sg).reduce((v,x)=>v+(x-sg)/sg,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(a+p)*100}}};l.AJAXError=Nt,l.ARRAY_TYPE=gu,l.Actor=class{constructor(o,n,a){this.target=o,this.parent=n,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ue(["receive","process"],this),this.invoker=new kS(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=k()?o:window}send(o,n,a,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const x=ve(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!a,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Zn(n,x)},x),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(o){const n=o.data,a=n.id;if(a&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[a];const h=this.cancelCallbacks[a];delete this.cancelCallbacks[a],h&&h()}else k()||n.mustQueue?(this.tasks[a]=n,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(n.error?a(er(n.error)):a(null,er(n.data)))}else{let a=!1;const h=ve(this.globalScope)?void 0:[],p=n.hasCallback?(I,M)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:I?Zn(I):null,data:Zn(M,h)},h)}:I=>{a=!0};let v=null;const x=er(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,p);else if(this.parent.getWorkerSource){const I=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,I[0],x.source)[I[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Rh,l.CanonicalTileID=og,l.CollisionBoxArray=ct,l.CollisionCircleLayoutArray=class extends D{},l.Color=J,l.DEMData=D_,l.DataConstantProperty=qt,l.DictionaryCoder=N_,l.EXTENT=Xr,l.ErrorEvent=ot,l.EvaluationParameters=lr,l.Event=Ye,l.Evented=se,l.FeatureIndex=$_,l.FillBucket=U0,l.FillExtrusionBucket=V0,l.GeoJSONFeature=U_,l.ImageAtlas=h_,l.ImagePosition=Z0,l.LineBucket=G0,l.LineStripIndexArray=class extends We{},l.LngLat=Tr,l.LngLatBounds=yu,l.MercatorCoordinate=Dd,l.ONE_EM=ti,l.OverscaledTileID=No,l.PerformanceUtils=zS,l.PosArray=class extends hu{},l.Properties=Ti,l.QuadTriangleArray=class extends oe{},l.RGBAImage=xo,l.RasterBoundsArray=class extends uc{},l.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.ResourceType=Et,l.SegmentVector=Kn,l.SymbolBucket=_c,l.Transitionable=Mh,l.TriangleIndexArray=Ni,l.Uniform1f=vs,l.Uniform1i=class extends ys{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends ys{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.Uniform3f=class extends ys{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.Uniform4f=hc,l.UniformColor=kx,l.UniformMatrix4f=class extends ys{constructor(o,n){super(o,n),this.current=Q6}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.UnwrappedTileID=j_,l.ValidationError=z,l.ZoomHistory=Pr,l.addDynamicAttributes=Q0,l.asyncAll=function(o,n,a){if(!o.length)return a(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((x,I)=>{n(x,(M,$)=>{M&&(v=M),p[I]=$,--h==0&&a(v,p)})})},l.bezier=S,l.bindAll=ue,l.cacheEntryPossiblyAdded=function(o){$e++,$e>Ie&&(o.getActor().send("enforceCacheSizeLimit",Be),$e=0)},l.clamp=T,l.clearTileCache=function(o){const n=caches.delete(he);o&&n.catch(o).then(()=>o())},l.clipLine=S_,l.clone=function(o){var n=new gu(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.clone$1=B,l.collisionCircleLayout=KE,l.config=te,l.create=function(){var o=new gu(16);return gu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l.createExpression=us,l.createFilter=Fa,l.createLayout=br,l.createStyleLayer=function(o){return o.type==="custom"?new IS(o):new PS[o.type](o)},l.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.ease=E,l.emitValidationErrors=Xt,l.enforceCacheSizeLimit=function(o){Pe(),xe&&xe.then(n=>{n.keys().then(a=>{for(let h=0;h<a.length-o;h++)n.delete(a[h])})})},l.evaluateSizeForFeature=y_,l.evaluateSizeForZoom=v_,l.evaluateVariableOffset=A_,l.evented=Ph,l.exported=ee,l.exported$1=Ne,l.extend=X,l.filterObject=V,l.fromValues=Ed,l.getAnchorAlignment=K0,l.getAnchorJustification=J0,l.getArrayBuffer=wn,l.getImage=O,l.getJSON=function(o,n){return Tn(X(o,{type:"json"}),n)},l.getOverlapMode=rg,l.getRTLTextPluginStatus=el,l.getReferrer=Bt,l.getVideo=function(o,n){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");on(o[h])||(a.crossOrigin="Anonymous"),p.src=o[h],a.appendChild(p)}return{cancel:()=>{}}},l.identity=k0,l.invert=function(o,n){var a=n[0],h=n[1],p=n[2],v=n[3],x=n[4],I=n[5],M=n[6],$=n[7],Q=n[8],re=n[9],le=n[10],me=n[11],ye=n[12],Oe=n[13],Fe=n[14],Ze=n[15],nt=a*I-h*x,et=a*M-p*x,lt=a*$-v*x,vt=h*M-p*I,dt=h*$-v*I,jt=p*$-v*M,tn=Q*Oe-re*ye,zt=Q*Fe-le*ye,Lt=Q*Ze-me*ye,At=re*Fe-le*Oe,Dt=re*Ze-me*Oe,Ot=le*Ze-me*Fe,wt=nt*Ot-et*Dt+lt*At+vt*Lt-dt*zt+jt*tn;return wt?(o[0]=(I*Ot-M*Dt+$*At)*(wt=1/wt),o[1]=(p*Dt-h*Ot-v*At)*wt,o[2]=(Oe*jt-Fe*dt+Ze*vt)*wt,o[3]=(le*dt-re*jt-me*vt)*wt,o[4]=(M*Lt-x*Ot-$*zt)*wt,o[5]=(a*Ot-p*Lt+v*zt)*wt,o[6]=(Fe*lt-ye*jt-Ze*et)*wt,o[7]=(Q*jt-le*lt+me*et)*wt,o[8]=(x*Dt-I*Lt+$*tn)*wt,o[9]=(h*Lt-a*Dt-v*tn)*wt,o[10]=(ye*dt-Oe*lt+Ze*nt)*wt,o[11]=(re*lt-Q*dt-me*nt)*wt,o[12]=(I*zt-x*At-M*tn)*wt,o[13]=(a*At-h*zt+p*tn)*wt,o[14]=(Oe*et-ye*vt-Fe*nt)*wt,o[15]=(Q*vt-re*et+le*nt)*wt,o):null},l.isImageBitmap=be,l.isSafari=ve,l.keysDifference=function(o,n){const a=[];for(const h in o)h in n||a.push(h);return a},l.lazyLoadRTLTextPlugin=function(){Ci.isLoading()||Ci.isLoaded()||el()!=="deferred"||md()},l.makeRequest=Tn,l.mapObject=H,l.mercatorXfromLng=O_,l.mercatorYfromLat=R_,l.mercatorZfromAltitude=F_,l.mul=sE,l.multiply=jx,l.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.number=or,l.ortho=function(o,n,a,h,p,v,x){var I=1/(n-a),M=1/(h-p),$=1/(v-x);return o[0]=-2*I,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*$,o[11]=0,o[12]=(n+a)*I,o[13]=(p+h)*M,o[14]=(x+v)*$,o[15]=1,o},l.parseCacheControl=U,l.parseGlyphPBF=function(o){return new H0(o).readFields(aS,[])},l.pbf=H0,l.performSymbolLayout=function(o,n,a,h,p,v,x){o.createArrays(),o.tilePixelRatio=Xr/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const I=o.layers[0].layout,M=o.layers[0]._unevaluatedLayout._values,$={layoutIconSize:M["icon-size"].possiblyEvaluate(new lr(o.zoom+1),x),layoutTextSize:M["text-size"].possiblyEvaluate(new lr(o.zoom+1),x),textMaxSize:M["text-size"].possiblyEvaluate(new lr(18))};if(o.textSizeData.kind==="composite"){const{minZoom:ye,maxZoom:Oe}=o.textSizeData;$.compositeTextSizes=[M["text-size"].possiblyEvaluate(new lr(ye),x),M["text-size"].possiblyEvaluate(new lr(Oe),x)]}if(o.iconSizeData.kind==="composite"){const{minZoom:ye,maxZoom:Oe}=o.iconSizeData;$.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new lr(ye),x),M["icon-size"].possiblyEvaluate(new lr(Oe),x)]}const Q=I.get("text-line-height")*ti,re=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",le=I.get("text-keep-upright"),me=I.get("text-size");for(const ye of o.features){const Oe=I.get("text-font").evaluate(ye,{},x).join(","),Fe=me.evaluate(ye,{},x),Ze=$.layoutTextSize.evaluate(ye,{},x),nt=$.layoutIconSize.evaluate(ye,{},x),et={horizontal:{},vertical:void 0},lt=ye.text;let vt,dt=[0,0];if(lt){const zt=lt.toString(),Lt=I.get("text-letter-spacing").evaluate(ye,{},x)*ti,At=go(zt)?Lt:0,Dt=I.get("text-anchor").evaluate(ye,{},x),Ot=I.get("text-variable-anchor");if(!Ot){const Gn=I.get("text-radial-offset").evaluate(ye,{},x);dt=Gn?A_(Dt,[Gn*ti,q0]):I.get("text-offset").evaluate(ye,{},x).map(cr=>cr*ti)}let wt=re?"center":I.get("text-justify").evaluate(ye,{},x);const sn=I.get("symbol-placement"),nn=sn==="point"?I.get("text-max-width").evaluate(ye,{},x)*ti:0,Rn=()=>{o.allowVerticalPlacement&&Fi(zt)&&(et.vertical=Md(lt,n,a,p,Oe,nn,Q,Dt,"left",At,dt,l.WritingMode.vertical,!0,sn,Ze,Fe))};if(!re&&Ot){const Gn=wt==="auto"?Ot.map(hr=>J0(hr)):[wt];let cr=!1;for(let hr=0;hr<Gn.length;hr++){const ii=Gn[hr];if(!et.horizontal[ii])if(cr)et.horizontal[ii]=et.horizontal[0];else{const Br=Md(lt,n,a,p,Oe,nn,Q,"center",ii,At,dt,l.WritingMode.horizontal,!1,sn,Ze,Fe);Br&&(et.horizontal[ii]=Br,cr=Br.positionedLines.length===1)}}Rn()}else{wt==="auto"&&(wt=J0(Dt));const Gn=Md(lt,n,a,p,Oe,nn,Q,Dt,wt,At,dt,l.WritingMode.horizontal,!1,sn,Ze,Fe);Gn&&(et.horizontal[wt]=Gn),Rn(),Fi(zt)&&re&&le&&(et.vertical=Md(lt,n,a,p,Oe,nn,Q,Dt,wt,At,dt,l.WritingMode.vertical,!1,sn,Ze,Fe))}}let jt=!1;if(ye.icon&&ye.icon.name){const zt=h[ye.icon.name];zt&&(vt=fS(p[ye.icon.name],I.get("icon-offset").evaluate(ye,{},x),I.get("icon-anchor").evaluate(ye,{},x)),jt=!!zt.sdf,o.sdfIcons===void 0?o.sdfIcons=jt:o.sdfIcons!==jt&&G("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zt.pixelRatio!==o.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const tn=P_(et.horizontal)||et.vertical;o.iconsInText=!!tn&&tn.iconsInText,(tn||vt)&&_S(o,ye,et,vt,h,$,Ze,nt,dt,jt,x)}v&&o.generateCollisionDebugBuffers()},l.perspective=function(o,n,a,h,p){var v,x=1/Math.tan(n/2);return o[0]=x/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},l.pick=function(o,n){const a={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(a[p]=o[p])}return a},l.plugin=Ci,l.pointGeometry=ie,l.polygonIntersectsPolygon=Ox,l.potpack=c_,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=_t,l.registerForPluginStateChange=function(o){return o({pluginStatus:Si,pluginURL:Da}),Ph.on("pluginStateChange",o),o},l.renderColorRamp=$x,l.rotateX=function(o,n,a){var h=Math.sin(a),p=Math.cos(a),v=n[4],x=n[5],I=n[6],M=n[7],$=n[8],Q=n[9],re=n[10],le=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+$*h,o[5]=x*p+Q*h,o[6]=I*p+re*h,o[7]=M*p+le*h,o[8]=$*p-v*h,o[9]=Q*p-x*h,o[10]=re*p-I*h,o[11]=le*p-M*h,o},l.rotateZ=function(o,n,a){var h=Math.sin(a),p=Math.cos(a),v=n[0],x=n[1],I=n[2],M=n[3],$=n[4],Q=n[5],re=n[6],le=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+$*h,o[1]=x*p+Q*h,o[2]=I*p+re*h,o[3]=M*p+le*h,o[4]=$*p-v*h,o[5]=Q*p-x*h,o[6]=re*p-I*h,o[7]=le*p-M*h,o},l.scale=function(o,n,a){var h=a[0],p=a[1],v=a[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.scale$1=function(o,n,a){return o[0]=n[0]*a,o[1]=n[1]*a,o[2]=n[2]*a,o[3]=n[3]*a,o},l.setCacheLimits=function(o,n){Be=o,Ie=n},l.setRTLTextPlugin=function(o,n,a=!1){if(Si===Ch||Si===ic||Si===Th)throw new Error("setRTLTextPlugin cannot be called multiple times.");Da=ee.resolveURL(o),Si=Ch,Ah=n,Ih(),a||md()},l.spec=A,l.sphericalToCartesian=function([o,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(a),y:o*Math.sin(n)*Math.sin(a),z:o*Math.cos(a)}},l.symbolSize=dS,l.toEvaluationFeature=mu,l.transformMat4=Sd,l.translate=function(o,n,a){var h,p,v,x,I,M,$,Q,re,le,me,ye,Oe=a[0],Fe=a[1],Ze=a[2];return n===o?(o[12]=n[0]*Oe+n[4]*Fe+n[8]*Ze+n[12],o[13]=n[1]*Oe+n[5]*Fe+n[9]*Ze+n[13],o[14]=n[2]*Oe+n[6]*Fe+n[10]*Ze+n[14],o[15]=n[3]*Oe+n[7]*Fe+n[11]*Ze+n[15]):(p=n[1],v=n[2],x=n[3],I=n[4],M=n[5],$=n[6],Q=n[7],re=n[8],le=n[9],me=n[10],ye=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=x,o[4]=I,o[5]=M,o[6]=$,o[7]=Q,o[8]=re,o[9]=le,o[10]=me,o[11]=ye,o[12]=h*Oe+I*Fe+re*Ze+n[12],o[13]=p*Oe+M*Fe+le*Ze+n[13],o[14]=v*Oe+$*Fe+me*Ze+n[14],o[15]=x*Oe+Q*Fe+ye*Ze+n[15]),o},l.triggerPluginCompletionEvent=pd,l.unicodeBlockLookup=bt,l.uniqueId=function(){return Z++},l.validateCustomStyleLayer=function(o){const n=[],a=o.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateLight=tt,l.validateStyle=Le,l.vectorTile=ol,l.warnOnce=G,l.wrap=F}),f(["./shared"],function(l){function _(Te){const W=typeof Te;if(W==="number"||W==="boolean"||W==="string"||Te==null)return JSON.stringify(Te);if(Array.isArray(Te)){let Ae="[";for(const ke of Te)Ae+=`${_(ke)},`;return`${Ae}]`}const J=Object.keys(Te).sort();let ge="{";for(let Ae=0;Ae<J.length;Ae++)ge+=`${JSON.stringify(J[Ae])}:${_(Te[J[Ae]])},`;return`${ge}}`}function C(Te){let W="";for(const J of l.refProperties)W+=`/${_(Te[J])}`;return W}class S{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,J){for(const Ae of W){this._layerConfigs[Ae.id]=Ae;const ke=this._layers[Ae.id]=l.createStyleLayer(Ae);ke._featureFilter=l.createFilter(ke.filter),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of J)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const ge=function(Ae,ke){const Ge={};for(let Ue=0;Ue<Ae.length;Ue++){const He=ke&&ke[Ae[Ue].id]||C(Ae[Ue]);ke&&(ke[Ae[Ue].id]=He);let at=Ge[He];at||(at=Ge[He]=[]),at.push(Ae[Ue])}const De=[];for(const Ue in Ge)De.push(Ge[Ue]);return De}(Object.values(this._layerConfigs),this.keyCache);for(const Ae of ge){const ke=Ae.map(pt=>this._layers[pt.id]),Ge=ke[0];if(Ge.visibility==="none")continue;const De=Ge.source||"";let Ue=this.familiesBySource[De];Ue||(Ue=this.familiesBySource[De]={});const He=Ge.sourceLayer||"_geojsonTileLayer";let at=Ue[He];at||(at=Ue[He]=[]),at.push(ke)}}}class E{constructor(W){const J={},ge=[];for(const De in W){const Ue=W[De],He=J[De]={};for(const at in Ue){const pt=Ue[+at];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const it={x:0,y:0,w:pt.bitmap.width+2,h:pt.bitmap.height+2};ge.push(it),He[at]={rect:it,metrics:pt.metrics}}}const{w:Ae,h:ke}=l.potpack(ge),Ge=new l.AlphaImage({width:Ae||1,height:ke||1});for(const De in W){const Ue=W[De];for(const He in Ue){const at=Ue[+He];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const pt=J[De][He].rect;l.AlphaImage.copy(at.bitmap,Ge,{x:0,y:0},{x:pt.x+1,y:pt.y+1},at.bitmap)}}this.image=Ge,this.positions=J}}l.register("GlyphAtlas",E);class T{constructor(W){this.tileID=new l.OverscaledTileID(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId}parse(W,J,ge,Ae,ke){this.status="parsing",this.data=W,this.collisionBoxArray=new l.CollisionBoxArray;const Ge=new l.DictionaryCoder(Object.keys(W.layers).sort()),De=new l.FeatureIndex(this.tileID,this.promoteId);De.bucketLayerIDs=[];const Ue={},He={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge},at=J.familiesBySource[this.source];for(const Cn in at){const _n=W.layers[Cn];if(!_n)continue;_n.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Cn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const bn=Ge.encode(Cn),nr=[];for(let dr=0;dr<_n.length;dr++){const Jn=_n.feature(dr),Mo=De.getId(Jn,Cn);nr.push({feature:Jn,id:Mo,index:dr,sourceLayerIndex:bn})}for(const dr of at[Cn]){const Jn=dr[0];Jn.minzoom&&this.zoom<Math.floor(Jn.minzoom)||Jn.maxzoom&&this.zoom>=Jn.maxzoom||Jn.visibility!=="none"&&(F(dr,this.zoom,ge),(Ue[Jn.id]=Jn.createBucket({index:De.bucketLayerIDs.length,layers:dr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bn,sourceID:this.source})).populate(nr,He,this.tileID.canonical),De.bucketLayerIDs.push(dr.map(Mo=>Mo.id)))}}let pt,it,Vt,It;const Ut=l.mapObject(He.glyphDependencies,Cn=>Object.keys(Cn).map(Number));Object.keys(Ut).length?Ae.send("getGlyphs",{uid:this.uid,stacks:Ut},(Cn,_n)=>{pt||(pt=Cn,it=_n,xn.call(this))}):it={};const rn=Object.keys(He.iconDependencies);rn.length?Ae.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"icons"},(Cn,_n)=>{pt||(pt=Cn,Vt=_n,xn.call(this))}):Vt={};const $t=Object.keys(He.patternDependencies);function xn(){if(pt)return ke(pt);if(it&&Vt&&It){const Cn=new E(it),_n=new l.ImageAtlas(Vt,It);for(const bn in Ue){const nr=Ue[bn];nr instanceof l.SymbolBucket?(F(nr.layers,this.zoom,ge),l.performSymbolLayout(nr,it,Cn.positions,Vt,_n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):nr.hasPattern&&(nr instanceof l.LineBucket||nr instanceof l.FillBucket||nr instanceof l.FillExtrusionBucket)&&(F(nr.layers,this.zoom,ge),nr.addFeatures(He,this.tileID.canonical,_n.patternPositions))}this.status="done",ke(null,{buckets:Object.values(Ue).filter(bn=>!bn.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cn.image,imageAtlas:_n,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?Vt:null,glyphPositions:this.returnDependencies?Cn.positions:null})}}$t.length?Ae.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"},(Cn,_n)=>{pt||(pt=Cn,It=_n,xn.call(this))}):It={},xn.call(this)}}function F(Te,W,J){const ge=new l.EvaluationParameters(W);for(const Ae of Te)Ae.recalculate(ge,J)}function X(Te,W){const J=l.getArrayBuffer(Te.request,(ge,Ae,ke,Ge)=>{ge?W(ge):Ae&&W(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(Ae)),rawData:Ae,cacheControl:ke,expires:Ge})});return()=>{J.cancel(),W()}}class Z{constructor(W,J,ge,Ae){this.actor=W,this.layerIndex=J,this.availableImages=ge,this.loadVectorData=Ae||X,this.loading={},this.loaded={}}loadTile(W,J){const ge=W.uid;this.loading||(this.loading={});const Ae=!!(W&&W.request&&W.request.collectResourceTiming)&&new l.RequestPerformance(W.request),ke=this.loading[ge]=new T(W);ke.abort=this.loadVectorData(W,(Ge,De)=>{if(delete this.loading[ge],Ge||!De)return ke.status="done",this.loaded[ge]=ke,J(Ge);const Ue=De.rawData,He={};De.expires&&(He.expires=De.expires),De.cacheControl&&(He.cacheControl=De.cacheControl);const at={};if(Ae){const pt=Ae.finish();pt&&(at.resourceTiming=JSON.parse(JSON.stringify(pt)))}ke.vectorTile=De.vectorTile,ke.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,(pt,it)=>{if(pt||!it)return J(pt);J(null,l.extend({rawTileData:Ue.slice(0)},it,He,at))}),this.loaded=this.loaded||{},this.loaded[ge]=ke})}reloadTile(W,J){const ge=this.loaded,Ae=W.uid,ke=this;if(ge&&ge[Ae]){const Ge=ge[Ae];Ge.showCollisionBoxes=W.showCollisionBoxes;const De=(Ue,He)=>{const at=Ge.reloadCallback;at&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,ke.layerIndex,this.availableImages,ke.actor,at)),J(Ue,He)};Ge.status==="parsing"?Ge.reloadCallback=De:Ge.status==="done"&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,De):De())}}abortTile(W,J){const ge=this.loading,Ae=W.uid;ge&&ge[Ae]&&ge[Ae].abort&&(ge[Ae].abort(),delete ge[Ae]),J()}removeTile(W,J){const ge=this.loaded,Ae=W.uid;ge&&ge[Ae]&&delete ge[Ae],J()}}class ue{constructor(){this.loaded={}}loadTile(W,J){const{uid:ge,encoding:Ae,rawImageData:ke}=W,Ge=l.isImageBitmap(ke)?this.getImageData(ke):ke,De=new l.DEMData(ge,Ge,Ae);this.loaded=this.loaded||{},this.loaded[ge]=De,J(null,De)}getImageData(W){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const J=this.offscreenCanvasContext.getImageData(-1,-1,W.width+2,W.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:J.width,height:J.height},J.data)}removeTile(W){const J=this.loaded,ge=W.uid;J&&J[ge]&&delete J[ge]}}var H=function Te(W,J){var ge,Ae=W&&W.type;if(Ae==="FeatureCollection")for(ge=0;ge<W.features.length;ge++)Te(W.features[ge],J);else if(Ae==="GeometryCollection")for(ge=0;ge<W.geometries.length;ge++)Te(W.geometries[ge],J);else if(Ae==="Feature")Te(W.geometry,J);else if(Ae==="Polygon")V(W.coordinates,J);else if(Ae==="MultiPolygon")for(ge=0;ge<W.coordinates.length;ge++)V(W.coordinates[ge],J);return W};function V(Te,W){if(Te.length!==0){B(Te[0],W);for(var J=1;J<Te.length;J++)B(Te[J],!W)}}function B(Te,W){for(var J=0,ge=0,Ae=0,ke=Te.length,Ge=ke-1;Ae<ke;Ge=Ae++){var De=(Te[Ae][0]-Te[Ge][0])*(Te[Ge][1]+Te[Ae][1]),Ue=J+De;ge+=Math.abs(J)>=Math.abs(De)?J-Ue+De:De-Ue+J,J=Ue}J+ge>=0!=!!W&&Te.reverse()}const ae=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class G{constructor(W){this._feature=W,this.extent=l.EXTENT,this.type=W.type,this.properties=W.tags,"id"in W&&!isNaN(W.id)&&(this.id=parseInt(W.id,10))}loadGeometry(){if(this._feature.type===1){const W=[];for(const J of this._feature.geometry)W.push([new l.pointGeometry(J[0],J[1])]);return W}{const W=[];for(const J of this._feature.geometry){const ge=[];for(const Ae of J)ge.push(new l.pointGeometry(Ae[0],Ae[1]));W.push(ge)}return W}}toGeoJSON(W,J,ge){return ae.call(this,W,J,ge)}}class j{constructor(W){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=W.length,this._features=W}feature(W){return new G(this._features[W])}}var w={exports:{}},k=l.pointGeometry,U=l.vectorTile.VectorTileFeature,K=Y;function Y(Te,W){this.options=W||{},this.features=Te,this.length=Te.length}function de(Te,W){this.id=typeof Te.id=="number"?Te.id:void 0,this.type=Te.type,this.rawGeometry=Te.type===1?[Te.geometry]:Te.geometry,this.properties=Te.tags,this.extent=W||4096}Y.prototype.feature=function(Te){return new de(this.features[Te],this.options.extent)},de.prototype.loadGeometry=function(){var Te=this.rawGeometry;this.geometry=[];for(var W=0;W<Te.length;W++){for(var J=Te[W],ge=[],Ae=0;Ae<J.length;Ae++)ge.push(new k(J[Ae][0],J[Ae][1]));this.geometry.push(ge)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Te=this.geometry,W=1/0,J=-1/0,ge=1/0,Ae=-1/0,ke=0;ke<Te.length;ke++)for(var Ge=Te[ke],De=0;De<Ge.length;De++){var Ue=Ge[De];W=Math.min(W,Ue.x),J=Math.max(J,Ue.x),ge=Math.min(ge,Ue.y),Ae=Math.max(Ae,Ue.y)}return[W,ge,J,Ae]},de.prototype.toGeoJSON=U.prototype.toGeoJSON;var ve=l.pbf,be=K;function ee(Te){var W=new ve;return function(J,ge){for(var Ae in J.layers)ge.writeMessage(3,ie,J.layers[Ae])}(Te,W),W.finish()}function ie(Te,W){var J;W.writeVarintField(15,Te.version||1),W.writeStringField(1,Te.name||""),W.writeVarintField(5,Te.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<Te.length;J++)ge.feature=Te.feature(J),W.writeMessage(2,ne,ge);var Ae=ge.keys;for(J=0;J<Ae.length;J++)W.writeStringField(3,Ae[J]);var ke=ge.values;for(J=0;J<ke.length;J++)W.writeMessage(4,Be,ke[J])}function ne(Te,W){var J=Te.feature;J.id!==void 0&&W.writeVarintField(1,J.id),W.writeMessage(2,te,Te),W.writeVarintField(3,J.type),W.writeMessage(4,_e,J)}function te(Te,W){var J=Te.feature,ge=Te.keys,Ae=Te.values,ke=Te.keycache,Ge=Te.valuecache;for(var De in J.properties){var Ue=J.properties[De],He=ke[De];if(Ue!==null){He===void 0&&(ge.push(De),ke[De]=He=ge.length-1),W.writeVarint(He);var at=typeof Ue;at!=="string"&&at!=="boolean"&&at!=="number"&&(Ue=JSON.stringify(Ue));var pt=at+":"+Ue,it=Ge[pt];it===void 0&&(Ae.push(Ue),Ge[pt]=it=Ae.length-1),W.writeVarint(it)}}}function he(Te,W){return(W<<3)+(7&Te)}function xe(Te){return Te<<1^Te>>31}function _e(Te,W){for(var J=Te.loadGeometry(),ge=Te.type,Ae=0,ke=0,Ge=J.length,De=0;De<Ge;De++){var Ue=J[De],He=1;ge===1&&(He=Ue.length),W.writeVarint(he(1,He));for(var at=ge===3?Ue.length-1:Ue.length,pt=0;pt<at;pt++){pt===1&&ge!==1&&W.writeVarint(he(2,at-1));var it=Ue[pt].x-Ae,Vt=Ue[pt].y-ke;W.writeVarint(xe(it)),W.writeVarint(xe(Vt)),Ae+=it,ke+=Vt}ge===3&&W.writeVarint(he(7,1))}}function Be(Te,W){var J=typeof Te;J==="string"?W.writeStringField(1,Te):J==="boolean"?W.writeBooleanField(7,Te):J==="number"&&(Te%1!=0?W.writeDoubleField(3,Te):Te<0?W.writeSVarintField(6,Te):W.writeVarintField(5,Te))}w.exports=ee,w.exports.fromVectorTileJs=ee,w.exports.fromGeojsonVt=function(Te,W){W=W||{};var J={};for(var ge in Te)J[ge]=new be(Te[ge].features,W),J[ge].name=ge,J[ge].version=W.version,J[ge].extent=W.extent;return ee({layers:J})},w.exports.GeoJSONWrapper=be;var Ie=w.exports;function Pe(Te,W,J,ge,Ae,ke){if(Ae-ge<=J)return;const Ge=ge+Ae>>1;$e(Te,W,Ge,ge,Ae,ke%2),Pe(Te,W,J,ge,Ge-1,ke+1),Pe(Te,W,J,Ge+1,Ae,ke+1)}function $e(Te,W,J,ge,Ae,ke){for(;Ae>ge;){if(Ae-ge>600){const He=Ae-ge+1,at=J-ge+1,pt=Math.log(He),it=.5*Math.exp(2*pt/3),Vt=.5*Math.sqrt(pt*it*(He-it)/He)*(at-He/2<0?-1:1);$e(Te,W,J,Math.max(ge,Math.floor(J-at*it/He+Vt)),Math.min(Ae,Math.floor(J+(He-at)*it/He+Vt)),ke)}const Ge=W[2*J+ke];let De=ge,Ue=Ae;for(Ne(Te,W,ge,J),W[2*Ae+ke]>Ge&&Ne(Te,W,ge,Ae);De<Ue;){for(Ne(Te,W,De,Ue),De++,Ue--;W[2*De+ke]<Ge;)De++;for(;W[2*Ue+ke]>Ge;)Ue--}W[2*ge+ke]===Ge?Ne(Te,W,ge,Ue):(Ue++,Ne(Te,W,Ue,Ae)),Ue<=J&&(ge=Ue+1),J<=Ue&&(Ae=Ue-1)}}function Ne(Te,W,J,ge){qe(Te,J,ge),qe(W,2*J,2*ge),qe(W,2*J+1,2*ge+1)}function qe(Te,W,J){const ge=Te[W];Te[W]=Te[J],Te[J]=ge}function st(Te,W,J,ge){const Ae=Te-J,ke=W-ge;return Ae*Ae+ke*ke}const yt=Te=>Te[0],Pt=Te=>Te[1];class ht{constructor(W,J=yt,ge=Pt,Ae=64,ke=Float64Array){this.nodeSize=Ae,this.points=W;const Ge=W.length<65536?Uint16Array:Uint32Array,De=this.ids=new Ge(W.length),Ue=this.coords=new ke(2*W.length);for(let He=0;He<W.length;He++)De[He]=He,Ue[2*He]=J(W[He]),Ue[2*He+1]=ge(W[He]);Pe(De,Ue,Ae,0,De.length-1,0)}range(W,J,ge,Ae){return function(ke,Ge,De,Ue,He,at,pt){const it=[0,ke.length-1,0],Vt=[];let It,Ut;for(;it.length;){const rn=it.pop(),$t=it.pop(),xn=it.pop();if($t-xn<=pt){for(let bn=xn;bn<=$t;bn++)It=Ge[2*bn],Ut=Ge[2*bn+1],It>=De&&It<=He&&Ut>=Ue&&Ut<=at&&Vt.push(ke[bn]);continue}const Cn=Math.floor((xn+$t)/2);It=Ge[2*Cn],Ut=Ge[2*Cn+1],It>=De&&It<=He&&Ut>=Ue&&Ut<=at&&Vt.push(ke[Cn]);const _n=(rn+1)%2;(rn===0?De<=It:Ue<=Ut)&&(it.push(xn),it.push(Cn-1),it.push(_n)),(rn===0?He>=It:at>=Ut)&&(it.push(Cn+1),it.push($t),it.push(_n))}return Vt}(this.ids,this.coords,W,J,ge,Ae,this.nodeSize)}within(W,J,ge){return function(Ae,ke,Ge,De,Ue,He){const at=[0,Ae.length-1,0],pt=[],it=Ue*Ue;for(;at.length;){const Vt=at.pop(),It=at.pop(),Ut=at.pop();if(It-Ut<=He){for(let _n=Ut;_n<=It;_n++)st(ke[2*_n],ke[2*_n+1],Ge,De)<=it&&pt.push(Ae[_n]);continue}const rn=Math.floor((Ut+It)/2),$t=ke[2*rn],xn=ke[2*rn+1];st($t,xn,Ge,De)<=it&&pt.push(Ae[rn]);const Cn=(Vt+1)%2;(Vt===0?Ge-Ue<=$t:De-Ue<=xn)&&(at.push(Ut),at.push(rn-1),at.push(Cn)),(Vt===0?Ge+Ue>=$t:De+Ue>=xn)&&(at.push(rn+1),at.push(It),at.push(Cn))}return pt}(this.ids,this.coords,W,J,ge,this.nodeSize)}}const Et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Te=>Te},Nt=Math.fround||(Bt=new Float32Array(1),Te=>(Bt[0]=+Te,Bt[0]));var Bt;class cn{constructor(W){this.options=pe(Object.create(Et),W),this.trees=new Array(this.options.maxZoom+1)}load(W){const{log:J,minZoom:ge,maxZoom:Ae,nodeSize:ke}=this.options;J&&console.time("total time");const Ge=`prepare ${W.length} points`;J&&console.time(Ge),this.points=W;let De=[];for(let Ue=0;Ue<W.length;Ue++)W[Ue].geometry&&De.push(wn(W[Ue],Ue));this.trees[Ae+1]=new ht(De,ze,Ye,ke,Float32Array),J&&console.timeEnd(Ge);for(let Ue=Ae;Ue>=ge;Ue--){const He=+Date.now();De=this._cluster(De,Ue),this.trees[Ue]=new ht(De,ze,Ye,ke,Float32Array),J&&console.log("z%d: %d clusters in %dms",Ue,De.length,+Date.now()-He)}return J&&console.timeEnd("total time"),this}getClusters(W,J){let ge=((W[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,W[1]));let ke=W[2]===180?180:((W[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)ge=-180,ke=180;else if(ge>ke){const at=this.getClusters([ge,Ae,180,Ge],J),pt=this.getClusters([-180,Ae,ke,Ge],J);return at.concat(pt)}const De=this.trees[this._limitZoom(J)],Ue=De.range(Ee(ge),R(Ge),Ee(ke),R(Ae)),He=[];for(const at of Ue){const pt=De.points[at];He.push(pt.numPoints?on(pt):this.points[pt.index])}return He}getChildren(W){const J=this._getOriginId(W),ge=this._getOriginZoom(W),Ae="No cluster with the specified id.",ke=this.trees[ge];if(!ke)throw new Error(Ae);const Ge=ke.points[J];if(!Ge)throw new Error(Ae);const De=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Ue=ke.within(Ge.x,Ge.y,De),He=[];for(const at of Ue){const pt=ke.points[at];pt.parentId===W&&He.push(pt.numPoints?on(pt):this.points[pt.index])}if(He.length===0)throw new Error(Ae);return He}getLeaves(W,J,ge){const Ae=[];return this._appendLeaves(Ae,W,J=J||10,ge=ge||0,0),Ae}getTile(W,J,ge){const Ae=this.trees[this._limitZoom(W)],ke=Math.pow(2,W),{extent:Ge,radius:De}=this.options,Ue=De/Ge,He=(ge-Ue)/ke,at=(ge+1+Ue)/ke,pt={features:[]};return this._addTileFeatures(Ae.range((J-Ue)/ke,He,(J+1+Ue)/ke,at),Ae.points,J,ge,ke,pt),J===0&&this._addTileFeatures(Ae.range(1-Ue/ke,He,1,at),Ae.points,ke,ge,ke,pt),J===ke-1&&this._addTileFeatures(Ae.range(0,He,Ue/ke,at),Ae.points,-1,ge,ke,pt),pt.features.length?pt:null}getClusterExpansionZoom(W){let J=this._getOriginZoom(W)-1;for(;J<=this.options.maxZoom;){const ge=this.getChildren(W);if(J++,ge.length!==1)break;W=ge[0].properties.cluster_id}return J}_appendLeaves(W,J,ge,Ae,ke){const Ge=this.getChildren(J);for(const De of Ge){const Ue=De.properties;if(Ue&&Ue.cluster?ke+Ue.point_count<=Ae?ke+=Ue.point_count:ke=this._appendLeaves(W,Ue.cluster_id,ge,Ae,ke):ke<Ae?ke++:W.push(De),W.length===ge)break}return ke}_addTileFeatures(W,J,ge,Ae,ke,Ge){for(const De of W){const Ue=J[De],He=Ue.numPoints;let at,pt,it;if(He)at=En(Ue),pt=Ue.x,it=Ue.y;else{const Ut=this.points[Ue.index];at=Ut.properties,pt=Ee(Ut.geometry.coordinates[0]),it=R(Ut.geometry.coordinates[1])}const Vt={type:1,geometry:[[Math.round(this.options.extent*(pt*ke-ge)),Math.round(this.options.extent*(it*ke-Ae))]],tags:at};let It;He?It=Ue.id:this.options.generateId?It=Ue.index:this.points[Ue.index].id&&(It=this.points[Ue.index].id),It!==void 0&&(Vt.id=It),Ge.features.push(Vt)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(+W,this.options.maxZoom+1))}_cluster(W,J){const ge=[],{radius:Ae,extent:ke,reduce:Ge,minPoints:De}=this.options,Ue=Ae/(ke*Math.pow(2,J));for(let He=0;He<W.length;He++){const at=W[He];if(at.zoom<=J)continue;at.zoom=J;const pt=this.trees[J+1],it=pt.within(at.x,at.y,Ue),Vt=at.numPoints||1;let It=Vt;for(const Ut of it){const rn=pt.points[Ut];rn.zoom>J&&(It+=rn.numPoints||1)}if(It>Vt&&It>=De){let Ut=at.x*Vt,rn=at.y*Vt,$t=Ge&&Vt>1?this._map(at,!0):null;const xn=(He<<5)+(J+1)+this.points.length;for(const Cn of it){const _n=pt.points[Cn];if(_n.zoom<=J)continue;_n.zoom=J;const bn=_n.numPoints||1;Ut+=_n.x*bn,rn+=_n.y*bn,_n.parentId=xn,Ge&&($t||($t=this._map(at,!0)),Ge($t,this._map(_n)))}at.parentId=xn,ge.push(Tn(Ut/It,rn/It,xn,It,$t))}else if(ge.push(at),It>1)for(const Ut of it){const rn=pt.points[Ut];rn.zoom<=J||(rn.zoom=J,ge.push(rn))}}return ge}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,J){if(W.numPoints)return J?pe({},W.properties):W.properties;const ge=this.points[W.index].properties,Ae=this.options.map(ge);return J&&Ae===ge?pe({},Ae):Ae}}function Tn(Te,W,J,ge,Ae){return{x:Nt(Te),y:Nt(W),zoom:1/0,id:J,parentId:-1,numPoints:ge,properties:Ae}}function wn(Te,W){const[J,ge]=Te.geometry.coordinates;return{x:Nt(Ee(J)),y:Nt(R(ge)),zoom:1/0,index:W,parentId:-1}}function on(Te){return{type:"Feature",id:Te.id,properties:En(Te),geometry:{type:"Point",coordinates:[(W=Te.x,360*(W-.5)),O(Te.y)]}};var W}function En(Te){const W=Te.numPoints,J=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W;return pe(pe({},Te.properties),{cluster:!0,cluster_id:Te.id,point_count:W,point_count_abbreviated:J})}function Ee(Te){return Te/360+.5}function R(Te){const W=Math.sin(Te*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function O(Te){const W=(180-360*Te)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function pe(Te,W){for(const J in W)Te[J]=W[J];return Te}function ze(Te){return Te.x}function Ye(Te){return Te.y}function ot(Te,W,J,ge){for(var Ae,ke=ge,Ge=J-W>>1,De=J-W,Ue=Te[W],He=Te[W+1],at=Te[J],pt=Te[J+1],it=W+3;it<J;it+=3){var Vt=se(Te[it],Te[it+1],Ue,He,at,pt);if(Vt>ke)Ae=it,ke=Vt;else if(Vt===ke){var It=Math.abs(it-Ge);It<De&&(Ae=it,De=It)}}ke>ge&&(Ae-W>3&&ot(Te,W,Ae,ge),Te[Ae+2]=ke,J-Ae>3&&ot(Te,Ae,J,ge))}function se(Te,W,J,ge,Ae,ke){var Ge=Ae-J,De=ke-ge;if(Ge!==0||De!==0){var Ue=((Te-J)*Ge+(W-ge)*De)/(Ge*Ge+De*De);Ue>1?(J=Ae,ge=ke):Ue>0&&(J+=Ge*Ue,ge+=De*Ue)}return(Ge=Te-J)*Ge+(De=W-ge)*De}function A(Te,W,J,ge){var Ae={id:Te===void 0?null:Te,type:W,geometry:J,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var Ge=ke.geometry,De=ke.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")z(ke,Ge);else if(De==="Polygon"||De==="MultiLineString")for(var Ue=0;Ue<Ge.length;Ue++)z(ke,Ge[Ue]);else if(De==="MultiPolygon")for(Ue=0;Ue<Ge.length;Ue++)for(var He=0;He<Ge[Ue].length;He++)z(ke,Ge[Ue][He])}(Ae),Ae}function z(Te,W){for(var J=0;J<W.length;J+=3)Te.minX=Math.min(Te.minX,W[J]),Te.minY=Math.min(Te.minY,W[J+1]),Te.maxX=Math.max(Te.maxX,W[J]),Te.maxY=Math.max(Te.maxY,W[J+1])}function we(Te,W,J,ge){if(W.geometry){var Ae=W.geometry.coordinates,ke=W.geometry.type,Ge=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),De=[],Ue=W.id;if(J.promoteId?Ue=W.properties[J.promoteId]:J.generateId&&(Ue=ge||0),ke==="Point")je(Ae,De);else if(ke==="MultiPoint")for(var He=0;He<Ae.length;He++)je(Ae[He],De);else if(ke==="LineString")Xe(Ae,De,Ge,!1);else if(ke==="MultiLineString"){if(J.lineMetrics){for(He=0;He<Ae.length;He++)Xe(Ae[He],De=[],Ge,!1),Te.push(A(Ue,"LineString",De,W.properties));return}Qe(Ae,De,Ge,!1)}else if(ke==="Polygon")Qe(Ae,De,Ge,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(He=0;He<W.geometry.geometries.length;He++)we(Te,{id:Ue,geometry:W.geometry.geometries[He],properties:W.properties},J,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(He=0;He<Ae.length;He++){var at=[];Qe(Ae[He],at,Ge,!0),De.push(at)}}Te.push(A(Ue,ke,De,W.properties))}}function je(Te,W){W.push(Ht(Te[0])),W.push(Sn(Te[1])),W.push(0)}function Xe(Te,W,J,ge){for(var Ae,ke,Ge=0,De=0;De<Te.length;De++){var Ue=Ht(Te[De][0]),He=Sn(Te[De][1]);W.push(Ue),W.push(He),W.push(0),De>0&&(Ge+=ge?(Ae*He-Ue*ke)/2:Math.sqrt(Math.pow(Ue-Ae,2)+Math.pow(He-ke,2))),Ae=Ue,ke=He}var at=W.length-3;W[2]=1,ot(W,0,at,J),W[at+2]=1,W.size=Math.abs(Ge),W.start=0,W.end=W.size}function Qe(Te,W,J,ge){for(var Ae=0;Ae<Te.length;Ae++){var ke=[];Xe(Te[Ae],ke,J,ge),W.push(ke)}}function Ht(Te){return Te/360+.5}function Sn(Te){var W=Math.sin(Te*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function fn(Te,W,J,ge,Ae,ke,Ge,De){if(ge/=W,ke>=(J/=W)&&Ge<ge)return Te;if(Ge<J||ke>=ge)return null;for(var Ue=[],He=0;He<Te.length;He++){var at=Te[He],pt=at.geometry,it=at.type,Vt=Ae===0?at.minX:at.minY,It=Ae===0?at.maxX:at.maxY;if(Vt>=J&&It<ge)Ue.push(at);else if(!(It<J||Vt>=ge)){var Ut=[];if(it==="Point"||it==="MultiPoint")ft(pt,Ut,J,ge,Ae);else if(it==="LineString")Mt(pt,Ut,J,ge,Ae,!1,De.lineMetrics);else if(it==="MultiLineString")Ir(pt,Ut,J,ge,Ae,!1);else if(it==="Polygon")Ir(pt,Ut,J,ge,Ae,!0);else if(it==="MultiPolygon")for(var rn=0;rn<pt.length;rn++){var $t=[];Ir(pt[rn],$t,J,ge,Ae,!0),$t.length&&Ut.push($t)}if(Ut.length){if(De.lineMetrics&&it==="LineString"){for(rn=0;rn<Ut.length;rn++)Ue.push(A(at.id,it,Ut[rn],at.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(Ut.length===1?(it="LineString",Ut=Ut[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=Ut.length===3?"Point":"MultiPoint"),Ue.push(A(at.id,it,Ut,at.tags))}}}return Ue.length?Ue:null}function ft(Te,W,J,ge,Ae){for(var ke=0;ke<Te.length;ke+=3){var Ge=Te[ke+Ae];Ge>=J&&Ge<=ge&&(W.push(Te[ke]),W.push(Te[ke+1]),W.push(Te[ke+2]))}}function Mt(Te,W,J,ge,Ae,ke,Ge){for(var De,Ue,He=un(Te),at=Ae===0?hn:rr,pt=Te.start,it=0;it<Te.length-3;it+=3){var Vt=Te[it],It=Te[it+1],Ut=Te[it+2],rn=Te[it+3],$t=Te[it+4],xn=Ae===0?Vt:It,Cn=Ae===0?rn:$t,_n=!1;Ge&&(De=Math.sqrt(Math.pow(Vt-rn,2)+Math.pow(It-$t,2))),xn<J?Cn>J&&(Ue=at(He,Vt,It,rn,$t,J),Ge&&(He.start=pt+De*Ue)):xn>ge?Cn<ge&&(Ue=at(He,Vt,It,rn,$t,ge),Ge&&(He.start=pt+De*Ue)):Qr(He,Vt,It,Ut),Cn<J&&xn>=J&&(Ue=at(He,Vt,It,rn,$t,J),_n=!0),Cn>ge&&xn<=ge&&(Ue=at(He,Vt,It,rn,$t,ge),_n=!0),!ke&&_n&&(Ge&&(He.end=pt+De*Ue),W.push(He),He=un(Te)),Ge&&(pt+=De)}var bn=Te.length-3;Vt=Te[bn],It=Te[bn+1],Ut=Te[bn+2],(xn=Ae===0?Vt:It)>=J&&xn<=ge&&Qr(He,Vt,It,Ut),bn=He.length-3,ke&&bn>=3&&(He[bn]!==He[0]||He[bn+1]!==He[1])&&Qr(He,He[0],He[1],He[2]),He.length&&W.push(He)}function un(Te){var W=[];return W.size=Te.size,W.start=Te.start,W.end=Te.end,W}function Ir(Te,W,J,ge,Ae,ke){for(var Ge=0;Ge<Te.length;Ge++)Mt(Te[Ge],W,J,ge,Ae,ke,!1)}function Qr(Te,W,J,ge){Te.push(W),Te.push(J),Te.push(ge)}function hn(Te,W,J,ge,Ae,ke){var Ge=(ke-W)/(ge-W);return Te.push(ke),Te.push(J+(Ae-J)*Ge),Te.push(1),Ge}function rr(Te,W,J,ge,Ae,ke){var Ge=(ke-J)/(Ae-J);return Te.push(W+(ge-W)*Ge),Te.push(ke),Te.push(1),Ge}function bi(Te,W){for(var J=[],ge=0;ge<Te.length;ge++){var Ae,ke=Te[ge],Ge=ke.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")Ae=xr(ke.geometry,W);else if(Ge==="MultiLineString"||Ge==="Polygon"){Ae=[];for(var De=0;De<ke.geometry.length;De++)Ae.push(xr(ke.geometry[De],W))}else if(Ge==="MultiPolygon")for(Ae=[],De=0;De<ke.geometry.length;De++){for(var Ue=[],He=0;He<ke.geometry[De].length;He++)Ue.push(xr(ke.geometry[De][He],W));Ae.push(Ue)}J.push(A(ke.id,Ge,Ae,ke.tags))}return J}function xr(Te,W){var J=[];J.size=Te.size,Te.start!==void 0&&(J.start=Te.start,J.end=Te.end);for(var ge=0;ge<Te.length;ge+=3)J.push(Te[ge]+W,Te[ge+1],Te[ge+2]);return J}function Vr(Te,W){if(Te.transformed)return Te;var J,ge,Ae,ke=1<<Te.z,Ge=Te.x,De=Te.y;for(J=0;J<Te.features.length;J++){var Ue=Te.features[J],He=Ue.geometry,at=Ue.type;if(Ue.geometry=[],at===1)for(ge=0;ge<He.length;ge+=2)Ue.geometry.push(Wt(He[ge],He[ge+1],W,ke,Ge,De));else for(ge=0;ge<He.length;ge++){var pt=[];for(Ae=0;Ae<He[ge].length;Ae+=2)pt.push(Wt(He[ge][Ae],He[ge][Ae+1],W,ke,Ge,De));Ue.geometry.push(pt)}}return Te.transformed=!0,Te}function Wt(Te,W,J,ge,Ae,ke){return[Math.round(J*(Te*ge-Ae)),Math.round(J*(W*ge-ke))]}function Gt(Te,W,J,ge,Ae){for(var ke=W===Ae.maxZoom?0:Ae.tolerance/((1<<W)*Ae.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:ge,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<Te.length;De++){Ge.numFeatures++,Zt(Ge,Te[De],ke,Ae);var Ue=Te[De].minX,He=Te[De].minY,at=Te[De].maxX,pt=Te[De].maxY;Ue<Ge.minX&&(Ge.minX=Ue),He<Ge.minY&&(Ge.minY=He),at>Ge.maxX&&(Ge.maxX=at),pt>Ge.maxY&&(Ge.maxY=pt)}return Ge}function Zt(Te,W,J,ge){var Ae=W.geometry,ke=W.type,Ge=[];if(ke==="Point"||ke==="MultiPoint")for(var De=0;De<Ae.length;De+=3)Ge.push(Ae[De]),Ge.push(Ae[De+1]),Te.numPoints++,Te.numSimplified++;else if(ke==="LineString")An(Ge,Ae,Te,J,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(De=0;De<Ae.length;De++)An(Ge,Ae[De],Te,J,ke==="Polygon",De===0);else if(ke==="MultiPolygon")for(var Ue=0;Ue<Ae.length;Ue++){var He=Ae[Ue];for(De=0;De<He.length;De++)An(Ge,He[De],Te,J,!0,De===0)}if(Ge.length){var at=W.tags||null;if(ke==="LineString"&&ge.lineMetrics){for(var pt in at={},W.tags)at[pt]=W.tags[pt];at.mapbox_clip_start=Ae.start/Ae.size,at.mapbox_clip_end=Ae.end/Ae.size}var it={geometry:Ge,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:at};W.id!==null&&(it.id=W.id),Te.features.push(it)}}function An(Te,W,J,ge,Ae,ke){var Ge=ge*ge;if(ge>0&&W.size<(Ae?Ge:ge))J.numPoints+=W.length/3;else{for(var De=[],Ue=0;Ue<W.length;Ue+=3)(ge===0||W[Ue+2]>Ge)&&(J.numSimplified++,De.push(W[Ue]),De.push(W[Ue+1])),J.numPoints++;Ae&&function(He,at){for(var pt=0,it=0,Vt=He.length,It=Vt-2;it<Vt;It=it,it+=2)pt+=(He[it]-He[It])*(He[it+1]+He[It+1]);if(pt>0===at)for(it=0,Vt=He.length;it<Vt/2;it+=2){var Ut=He[it],rn=He[it+1];He[it]=He[Vt-2-it],He[it+1]=He[Vt-1-it],He[Vt-2-it]=Ut,He[Vt-1-it]=rn}}(De,ke),Te.push(De)}}function zn(Te,W){var J=(W=this.options=function(Ae,ke){for(var Ge in ke)Ae[Ge]=ke[Ge];return Ae}(Object.create(this.options),W)).debug;if(J&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var ge=function(Ae,ke){var Ge=[];if(Ae.type==="FeatureCollection")for(var De=0;De<Ae.features.length;De++)we(Ge,Ae.features[De],ke,De);else we(Ge,Ae.type==="Feature"?Ae:{geometry:Ae},ke);return Ge}(Te,W);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ge=function(Ae,ke){var Ge=ke.buffer/ke.extent,De=Ae,Ue=fn(Ae,1,-1-Ge,Ge,0,-1,2,ke),He=fn(Ae,1,1-Ge,2+Ge,0,-1,2,ke);return(Ue||He)&&(De=fn(Ae,1,-Ge,1+Ge,0,-1,2,ke)||[],Ue&&(De=bi(Ue,1).concat(De)),He&&(De=De.concat(bi(He,-1)))),De}(ge,W),ge.length&&this.splitTile(ge,0,0,0),J&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ir(Te,W,J){return 32*((1<<Te)*J+W)+Te}function Gr(Te,W){const J=Te.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const ge=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ge)return W(null,null);const Ae=new j(ge.features);let ke=Ie(Ae);ke.byteOffset===0&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),W(null,{vectorTile:Ae,rawData:ke.buffer})}zn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zn.prototype.splitTile=function(Te,W,J,ge,Ae,ke,Ge){for(var De=[Te,W,J,ge],Ue=this.options,He=Ue.debug;De.length;){ge=De.pop(),J=De.pop(),W=De.pop(),Te=De.pop();var at=1<<W,pt=ir(W,J,ge),it=this.tiles[pt];if(!it&&(He>1&&console.time("creation"),it=this.tiles[pt]=Gt(Te,W,J,ge,Ue),this.tileCoords.push({z:W,x:J,y:ge}),He)){He>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,J,ge,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));var Vt="z"+W;this.stats[Vt]=(this.stats[Vt]||0)+1,this.total++}if(it.source=Te,Ae){if(W===Ue.maxZoom||W===Ae)continue;var It=1<<Ae-W;if(J!==Math.floor(ke/It)||ge!==Math.floor(Ge/It))continue}else if(W===Ue.indexMaxZoom||it.numPoints<=Ue.indexMaxPoints)continue;if(it.source=null,Te.length!==0){He>1&&console.time("clipping");var Ut,rn,$t,xn,Cn,_n,bn=.5*Ue.buffer/Ue.extent,nr=.5-bn,dr=.5+bn,Jn=1+bn;Ut=rn=$t=xn=null,Cn=fn(Te,at,J-bn,J+dr,0,it.minX,it.maxX,Ue),_n=fn(Te,at,J+nr,J+Jn,0,it.minX,it.maxX,Ue),Te=null,Cn&&(Ut=fn(Cn,at,ge-bn,ge+dr,1,it.minY,it.maxY,Ue),rn=fn(Cn,at,ge+nr,ge+Jn,1,it.minY,it.maxY,Ue),Cn=null),_n&&($t=fn(_n,at,ge-bn,ge+dr,1,it.minY,it.maxY,Ue),xn=fn(_n,at,ge+nr,ge+Jn,1,it.minY,it.maxY,Ue),_n=null),He>1&&console.timeEnd("clipping"),De.push(Ut||[],W+1,2*J,2*ge),De.push(rn||[],W+1,2*J,2*ge+1),De.push($t||[],W+1,2*J+1,2*ge),De.push(xn||[],W+1,2*J+1,2*ge+1)}}},zn.prototype.getTile=function(Te,W,J){var ge=this.options,Ae=ge.extent,ke=ge.debug;if(Te<0||Te>24)return null;var Ge=1<<Te,De=ir(Te,W=(W%Ge+Ge)%Ge,J);if(this.tiles[De])return Vr(this.tiles[De],Ae);ke>1&&console.log("drilling down to z%d-%d-%d",Te,W,J);for(var Ue,He=Te,at=W,pt=J;!Ue&&He>0;)He--,at=Math.floor(at/2),pt=Math.floor(pt/2),Ue=this.tiles[ir(He,at,pt)];return Ue&&Ue.source?(ke>1&&console.log("found parent tile z%d-%d-%d",He,at,pt),ke>1&&console.time("drilling down"),this.splitTile(Ue.source,He,at,pt,Te,W,J),ke>1&&console.timeEnd("drilling down"),this.tiles[De]?Vr(this.tiles[De],Ae):null):null};class hi extends Z{constructor(W,J,ge,Ae){super(W,J,ge,Gr),Ae&&(this.loadGeoJSON=Ae)}loadData(W,J){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=J,this._pendingLoadDataParams=W,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const W=this._pendingCallback,J=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const ge=!!(J&&J.request&&J.request.collectResourceTiming)&&new l.RequestPerformance(J.request);this.loadGeoJSON(J,(Ae,ke)=>{if(Ae||!ke)return W(Ae);if(typeof ke!="object")return W(new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`));{H(ke,!0);try{if(J.filter){const De=l.createExpression(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(De.result==="error")throw new Error(De.value.map(He=>`${He.key}: ${He.message}`).join(", "));const Ue=ke.features.filter(He=>De.value.evaluate({zoom:0},He));ke={type:"FeatureCollection",features:Ue}}this._geoJSONIndex=J.cluster?new cn(function({superclusterOptions:De,clusterProperties:Ue}){if(!Ue||!De)return De;const He={},at={},pt={accumulated:null,zoom:0},it={properties:null},Vt=Object.keys(Ue);for(const It of Vt){const[Ut,rn]=Ue[It],$t=l.createExpression(rn),xn=l.createExpression(typeof Ut=="string"?[Ut,["accumulated"],["get",It]]:Ut);He[It]=$t.value,at[It]=xn.value}return De.map=It=>{it.properties=It;const Ut={};for(const rn of Vt)Ut[rn]=He[rn].evaluate(pt,it);return Ut},De.reduce=(It,Ut)=>{it.properties=Ut;for(const rn of Vt)pt.accumulated=It[rn],It[rn]=at[rn].evaluate(pt,it)},De}(J)).load(ke.features):function(De,Ue){return new zn(De,Ue)}(ke,J.geojsonVtOptions)}catch(De){return W(De)}this.loaded={};const Ge={};if(ge){const De=ge.finish();De&&(Ge.resourceTiming={},Ge.resourceTiming[J.source]=JSON.parse(JSON.stringify(De)))}W(null,Ge)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(W,J){const ge=this.loaded;return ge&&ge[W.uid]?super.reloadTile(W,J):this.loadTile(W,J)}loadGeoJSON(W,J){if(W.request)l.getJSON(W.request,J);else{if(typeof W.data!="string")return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));try{return J(null,JSON.parse(W.data))}catch{return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`))}}}removeSource(W,J){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),J()}getClusterExpansionZoom(W,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(ge){J(ge)}}getClusterChildren(W,J){try{J(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(ge){J(ge)}}getClusterLeaves(W,J){try{J(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(ge){J(ge)}}}class Pa{constructor(W){this.self=W,this.actor=new l.Actor(W,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Z,geojson:hi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,ge)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=ge},this.self.registerRTLTextPlugin=J=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=J.applyArabicShaping,l.plugin.processBidirectionalText=J.processBidirectionalText,l.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}}setReferrer(W,J){this.referrer=J}setImages(W,J,ge){this.availableImages[W]=J;for(const Ae in this.workerSources[W]){const ke=this.workerSources[W][Ae];for(const Ge in ke)ke[Ge].availableImages=J}ge()}setLayers(W,J,ge){this.getLayerIndex(W).replace(J),ge()}updateLayers(W,J,ge){this.getLayerIndex(W).update(J.layers,J.removedIds),ge()}loadTile(W,J,ge){this.getWorkerSource(W,J.type,J.source).loadTile(J,ge)}loadDEMTile(W,J,ge){this.getDEMWorkerSource(W,J.source).loadTile(J,ge)}reloadTile(W,J,ge){this.getWorkerSource(W,J.type,J.source).reloadTile(J,ge)}abortTile(W,J,ge){this.getWorkerSource(W,J.type,J.source).abortTile(J,ge)}removeTile(W,J,ge){this.getWorkerSource(W,J.type,J.source).removeTile(J,ge)}removeDEMTile(W,J){this.getDEMWorkerSource(W,J.source).removeTile(J)}removeSource(W,J,ge){if(!this.workerSources[W]||!this.workerSources[W][J.type]||!this.workerSources[W][J.type][J.source])return;const Ae=this.workerSources[W][J.type][J.source];delete this.workerSources[W][J.type][J.source],Ae.removeSource!==void 0?Ae.removeSource(J,ge):ge()}loadWorkerSource(W,J,ge){try{this.self.importScripts(J.url),ge()}catch(Ae){ge(Ae.toString())}}syncRTLPluginState(W,J,ge){try{l.plugin.setState(J);const Ae=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Ae!=null){this.self.importScripts(Ae);const ke=l.plugin.isParsed();ge(ke?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ae}`),ke)}}catch(Ae){ge(Ae.toString())}}getAvailableImages(W){let J=this.availableImages[W];return J||(J=[]),J}getLayerIndex(W){let J=this.layerIndexes[W];return J||(J=this.layerIndexes[W]=new S),J}getWorkerSource(W,J,ge){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][J]||(this.workerSources[W][J]={}),!this.workerSources[W][J][ge]){const Ae={send:(ke,Ge,De)=>{this.actor.send(ke,Ge,De,W)}};this.workerSources[W][J][ge]=new this.workerSourceTypes[J](Ae,this.getLayerIndex(W),this.getAvailableImages(W))}return this.workerSources[W][J][ge]}getDEMWorkerSource(W,J){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][J]||(this.demWorkerSources[W][J]=new ue),this.demWorkerSources[W][J]}enforceCacheSizeLimit(W,J){l.enforceCacheSizeLimit(J)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Pa(self)),Pa}),f(["./shared"],function(l){var _=C;function C(m){return!function(i){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var d,y,b=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(b);try{y=new Worker(P),d=!0}catch{d=!1}return y&&y.terminate(),URL.revokeObjectURL(P),d}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var d=document.createElement("canvas");d.width=d.height=1;var y=d.getContext("2d");if(!y)return!1;var b=y.getImageData(0,0,1,1);return b&&b.width===d.width}()?(S[c=i&&i.failIfMajorPerformanceCaveat]===void 0&&(S[c]=function(d){var y,b=function(P){var L=document.createElement("canvas"),D=Object.create(C.webGLContextAttributes);return D.failIfMajorPerformanceCaveat=P,L.getContext("webgl",D)||L.getContext("experimental-webgl",D)}(d);if(!b)return!1;try{y=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!y||b.isContextLost())&&(b.shaderSource(y,"void main() {}"),b.compileShader(y),b.getShaderParameter(y,b.COMPILE_STATUS)===!0)}(c)),S[c]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var c}(m)}var S={};function E(m,i){if(Array.isArray(m)){if(!Array.isArray(i)||m.length!==i.length)return!1;for(let c=0;c<m.length;c++)if(!E(m[c],i[c]))return!1;return!0}if(typeof m=="object"&&m!==null&&i!==null){if(typeof i!="object"||Object.keys(m).length!==Object.keys(i).length)return!1;for(const c in m)if(!E(m[c],i[c]))return!1;return!0}return m===i}C.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class T{static testProp(i){if(!T.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in T.docStyle)return i[c];return i[0]}static create(i,c,d){const y=window.document.createElement(i);return c!==void 0&&(y.className=c),d&&d.appendChild(y),y}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(i,c){i.style[T.transformProp]=c}static addEventListener(i,c,d,y={}){i.addEventListener(c,d,"passive"in y?y:y.capture)}static removeEventListener(i,c,d,y={}){i.removeEventListener(c,d,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static mousePos(i,c){const d=i.getBoundingClientRect();return new l.pointGeometry(c.clientX-d.left-i.clientLeft,c.clientY-d.top-i.clientTop)}static touchPos(i,c){const d=i.getBoundingClientRect(),y=[];for(let b=0;b<c.length;b++)y.push(new l.pointGeometry(c[b].clientX-d.left-i.clientLeft,c[b].clientY-d.top-i.clientTop));return y}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}T.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);class F{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,d){const y=function(b){const P=b.match(X);if(!P)throw new Error(`Unable to parse URL "${b}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(i);return y.path+=`${c}${d}`,function(b){const P=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${P}`}(y)}setTransformRequest(i){this._transformRequestFn=i}}const X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Z(m){var i=new l.ARRAY_TYPE(3);return i[0]=m[0],i[1]=m[1],i[2]=m[2],i}function ue(m,i,c){var d=new l.ARRAY_TYPE(3);return d[0]=m,d[1]=i,d[2]=c,d}var H,V=function(m,i,c){return m[0]=i[0]-c[0],m[1]=i[1]-c[1],m[2]=i[2]-c[2],m};H=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0);var B=function(m){var i=m[0],c=m[1];return i*i+c*c};(function(){var m=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(m[0]=0,m[1]=0)})();class ae{constructor(i,c,d,y){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(c,y)}update(i,c,d){const{width:y,height:b}=i,P=!(this.size&&this.size[0]===y&&this.size[1]===b||d),{context:L}=this,{gl:D}=L;if(this.useMipmap=Boolean(c&&c.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!c||c.premultiply!==!1)),P)this.size=[y,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.isImageBitmap(i)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,i):D.texImage2D(D.TEXTURE_2D,0,this.format,y,b,0,this.format,D.UNSIGNED_BYTE,i.data);else{const{x:q,y:oe}=d||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.isImageBitmap(i)?D.texSubImage2D(D.TEXTURE_2D,0,q,oe,D.RGBA,D.UNSIGNED_BYTE,i):D.texSubImage2D(D.TEXTURE_2D,0,q,oe,y,b,D.RGBA,D.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D)}bind(i,c,d){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||i),this.filter=i),c!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function G(m){const{userImage:i}=m;return!!(i&&i.render&&i.render())&&(m.data.replace(new Uint8Array(i.data.buffer)),!0)}class j extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:d}of this.requestors)this._notify(c,d);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,c){this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let d=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),d=!1),d}_validateStretch(i,c){if(!i)return!0;let d=0;for(const y of i){if(y[0]<d||y[1]<y[0]||c<y[1])return!1;d=y[1]}return!0}_validateContent(i,c){return!(i&&(i.length!==4||i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,c){c.version=this.images[i].version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let d=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(d=!1);this.isLoaded()||d?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const d={};for(const y of i){this.images[y]||this.fire(new l.Event("styleimagemissing",{id:y}));const b=this.images[y];b?d[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:Boolean(b.userImage&&b.userImage.render)}:l.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,d)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],d=this.getImage(i);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{const y={w:d.data.width+2,h:d.data.height+2,x:0,y:0},b=new l.ImagePosition(y,d);this.patterns[i]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ae(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:c,h:d}=l.potpack(i),y=this.atlasImage;y.resize({width:c||1,height:d||1});for(const b in this.patterns){const{bin:P}=this.patterns[b],L=P.x+1,D=P.y+1,q=this.images[b].data,oe=q.width,ce=q.height;l.RGBAImage.copy(q,y,{x:0,y:0},{x:L,y:D},{width:oe,height:ce}),l.RGBAImage.copy(q,y,{x:0,y:ce-1},{x:L,y:D-1},{width:oe,height:1}),l.RGBAImage.copy(q,y,{x:0,y:0},{x:L,y:D+ce},{width:oe,height:1}),l.RGBAImage.copy(q,y,{x:oe-1,y:0},{x:L-1,y:D},{width:1,height:ce}),l.RGBAImage.copy(q,y,{x:0,y:0},{x:L+oe,y:D},{width:1,height:ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const d=this.images[c];G(d)&&this.updateImage(c,d)}}}const w=1e20;function k(m,i,c,d,y,b,P,L,D){for(let q=i;q<i+d;q++)U(m,c*b+q,b,y,P,L,D);for(let q=c;q<c+y;q++)U(m,q*b+i,1,d,P,L,D)}function U(m,i,c,d,y,b,P){b[0]=0,P[0]=-w,P[1]=w,y[0]=m[i];for(let L=1,D=0,q=0;L<d;L++){y[L]=m[i+L*c];const oe=L*L;do{const ce=b[D];q=(y[L]-y[ce]+oe-ce*ce)/(L-ce)/2}while(q<=P[D]&&--D>-1);D++,b[D]=L,P[D]=q,P[D+1]=w}for(let L=0,D=0;L<d;L++){for(;P[D+1]<L;)D++;const q=b[D],oe=L-q;m[i+L*c]=y[q]+oe*oe}}class K{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const d=[];for(const y in i)for(const b of i[y])d.push({stack:y,id:b});l.asyncAll(d,({stack:y,id:b},P)=>{let L=this.entries[y];L||(L=this.entries[y]={glyphs:{},requests:{},ranges:{}});let D=L.glyphs[b];if(D!==void 0)return void P(null,{stack:y,id:b,glyph:D});if(D=this._tinySDF(L,y,b),D)return L.glyphs[b]=D,void P(null,{stack:y,id:b,glyph:D});const q=Math.floor(b/256);if(256*q>65535)return void P(new Error("glyphs > 65535 not supported"));if(L.ranges[q])return void P(null,{stack:y,id:b,glyph:D});let oe=L.requests[q];oe||(oe=L.requests[q]=[],K.loadGlyphRange(y,q,this.url,this.requestManager,(ce,Se)=>{if(Se){for(const Me in Se)this._doesCharSupportLocalGlyph(+Me)||(L.glyphs[+Me]=Se[+Me]);L.ranges[q]=!0}for(const Me of oe)Me(ce,Se);delete L.requests[q]})),oe.push((ce,Se)=>{ce?P(ce):Se&&P(null,{stack:y,id:b,glyph:Se[b]||null})})},(y,b)=>{if(y)c(y);else if(b){const P={};for(const{stack:L,id:D,glyph:q}of b)(P[L]||(P[L]={}))[D]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};c(null,P)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](i)||l.unicodeBlockLookup["Hangul Syllables"](i)||l.unicodeBlockLookup.Hiragana(i)||l.unicodeBlockLookup.Katakana(i))}_tinySDF(i,c,d){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(d))return;let b=i.tinySDF;if(!b){let L="400";/bold/i.test(c)?L="900":/medium/i.test(c)?L="500":/light/i.test(c)&&(L="200"),b=i.tinySDF=new K.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:y,fontWeight:L})}const P=b.draw(String.fromCharCode(d));return{id:d,bitmap:new l.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop||-8,advance:P.glyphAdvance||24}}}}K.loadGlyphRange=function(m,i,c,d,y){const b=256*i,P=b+255,L=d.transformRequest(c.replace("{fontstack}",m).replace("{range}",`${b}-${P}`),l.ResourceType.Glyphs);l.getArrayBuffer(L,(D,q)=>{if(D)y(D);else if(q){const oe={};for(const ce of l.parseGlyphPBF(q))oe[ce.id]=ce;y(null,oe)}})},K.TinySDF=class{constructor({fontSize:m=24,buffer:i=3,radius:c=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:P="normal"}){this.buffer=i,this.cutoff=d,this.radius=c;const L=this.size=m+4*i,D=this._createCanvas(L),q=this.ctx=D.getContext("2d",{willReadFrequently:!0});q.font=`${P} ${b} ${m}px ${y}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(m){const i=document.createElement("canvas");return i.width=i.height=m,i}draw(m){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(m),P=Math.floor(c),L=Math.min(this.size-this.buffer,Math.ceil(b-y)),D=Math.min(this.size-this.buffer,Math.ceil(c)+Math.ceil(d)),q=L+2*this.buffer,oe=D+2*this.buffer,ce=q*oe,Se=new Uint8ClampedArray(ce),Me={data:Se,width:q,height:oe,glyphWidth:L,glyphHeight:D,glyphTop:P,glyphLeft:0,glyphAdvance:i};if(L===0||D===0)return Me;const{ctx:Ce,buffer:Re,gridInner:Ve,gridOuter:We}=this;Ce.clearRect(Re,Re,L,D),Ce.fillText(m,Re,Re+P+1);const Je=Ce.getImageData(Re,Re,L,D);We.fill(w,0,ce),Ve.fill(0,0,ce);for(let Ke=0;Ke<D;Ke++)for(let ct=0;ct<L;ct++){const rt=Je.data[4*(Ke*L+ct)+3]/255;if(rt===0)continue;const ut=(Ke+Re)*q+ct+Re;if(rt===1)We[ut]=0,Ve[ut]=w;else{const xt=.5-rt;We[ut]=xt>0?xt*xt:0,Ve[ut]=xt<0?xt*xt:0}}k(We,0,0,q,oe,q,this.f,this.v,this.z),k(Ve,Re,Re,L,D,q,this.f,this.v,this.z);for(let Ke=0;Ke<ce;Ke++){const ct=Math.sqrt(We[Ke])-Math.sqrt(Ve[Ke]);Se[Ke]=Math.round(255-255*(ct/this.radius+this.cutoff))}return Me}};const Y=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(m,i){return l.sphericalToCartesian(m.expression.evaluate(i))}interpolate(m,i,c){return{x:l.number(m.x,i.x,c),y:l.number(m.y,i.y,c),z:l.number(m.z,i.z,c)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),de="-transition";class ve extends l.Evented{constructor(i){super(),this._transitionable=new l.Transitionable(Y),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(l.validateLight,i,c))for(const d in i){const y=i[d];d.endsWith(de)?this._transitionable.setTransition(d.slice(0,-de.length),y):this._transitionable.setValue(d,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,d){return(!d||d.validate!==!1)&&l.emitValidationErrors(this,i.call(l.validateStyle,l.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class be{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const d=i.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(i,c)),this.dashEntry[d]}getDashRanges(i,c,d){const y=[];let b=i.length%2==1?-i[i.length-1]*d:0,P=i[0]*d,L=!0;y.push({left:b,right:P,isDash:L,zeroLength:i[0]===0});let D=i[0];for(let q=1;q<i.length;q++){L=!L;const oe=i[q];b=D*d,D+=oe,P=D*d,y.push({left:b,right:P,isDash:L,zeroLength:oe===0})}return y}addRoundDash(i,c,d){const y=c/2;for(let b=-d;b<=d;b++){const P=this.width*(this.nextRow+d+b);let L=0,D=i[L];for(let q=0;q<this.width;q++){q/D.right>1&&(D=i[++L]);const oe=Math.abs(q-D.left),ce=Math.abs(q-D.right),Se=Math.min(oe,ce);let Me;const Ce=b/d*(y+1);if(D.isDash){const Re=y-Math.abs(Ce);Me=Math.sqrt(Se*Se+Re*Re)}else Me=y-Math.sqrt(Se*Se+Ce*Ce);this.data[P+q]=Math.max(0,Math.min(255,Me+128))}}}addRegularDash(i){for(let L=i.length-1;L>=0;--L){const D=i[L],q=i[L+1];D.zeroLength?i.splice(L,1):q&&q.isDash===D.isDash&&(q.left=D.left,i.splice(L,1))}const c=i[0],d=i[i.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const y=this.width*this.nextRow;let b=0,P=i[b];for(let L=0;L<this.width;L++){L/P.right>1&&(P=i[++b]);const D=Math.abs(L-P.left),q=Math.abs(L-P.right),oe=Math.min(D,q);this.data[y+L]=Math.max(0,Math.min(255,(P.isDash?oe:-oe)+128))}}addDash(i,c){const d=c?7:0,y=2*d+1;if(this.nextRow+y>this.height)return l.warnOnce("LineAtlas out of space"),null;let b=0;for(let L=0;L<i.length;L++)b+=i[L];if(b!==0){const L=this.width/b,D=this.getDashRanges(i,this.width,L);c?this.addRoundDash(D,L,d):this.addRegularDash(D)}const P={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:b};return this.nextRow+=y,this.dirty=!0,P}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class ee{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const d=this.workerPool.acquire(this.id);for(let y=0;y<d.length;y++){const b=new ee.Actor(d[y],c,this.id);b.name=`Worker ${y}`,this.actors.push(b)}}broadcast(i,c,d){l.asyncAll(this.actors,(y,b)=>{y.send(i,c,b)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ie(m,i,c){const d=function(y,b){if(y)return c(y);if(b){const P=l.pick(l.extend(b,m),["tiles","minzoom","maxzoom","attribution","maplibreLogo","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(P.vectorLayers=b.vector_layers,P.vectorLayerIds=P.vectorLayers.map(L=>L.id)),c(null,P)}};return m.url?l.getJSON(i.transformRequest(m.url,l.ResourceType.Source),d):l.exported.frame(()=>d(null,m))}ee.Actor=l.Actor;class ne{constructor(i,c,d){this.bounds=l.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),d=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*c),y=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*c),b=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*c),P=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=d&&i.x<b&&i.y>=y&&i.y<P}}class te extends l.Evented{constructor(i,c,d,y){if(super(),this.id=i,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(c,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ie(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new l.ErrorEvent(i)):c&&(l.extend(this,c),c.bounds&&(this.tileBounds=new ne(c.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(d,l.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(P,L){return delete i.request,i.aborted?c(null):P&&P.status!==404?c(P):(L&&L.resourceTiming&&(i.resourceTiming=L.resourceTiming),this.map._refreshExpiredTiles&&L&&i.setExpiryData(L),i.loadVectorData(L,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",y,b.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",y,b.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class he extends l.Evented{constructor(i,c,d,y){super(),this.id=i,this.dispatcher=d,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},c),l.extend(this,l.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ie(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.ErrorEvent(i)):c&&(l.extend(this,c),c.bounds&&(this.tileBounds=new ne(c.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),(y,b)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(y)i.state="errored",c(y);else if(b){this.map._refreshExpiredTiles&&i.setExpiryData(b),delete b.cacheControl,delete b.expires;const P=this.map.painter.context,L=P.gl;i.texture=this.map.painter.getTileTexture(b.width),i.texture?i.texture.update(b,{useMipmap:!0}):(i.texture=new ae(P,b,L.RGBA,{useMipmap:!0}),i.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),i.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),c(null)}})}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}let xe;class _e extends he{constructor(i,c,d,y){super(i,c,d,y),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function y(b,P){b&&(i.state="errored",c(b)),P&&(i.dem=P,i.needsHillshadePrepare=!0,i.state="loaded",c(null))}i.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),function(b,P){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(b)i.state="errored",c(b);else if(P){this.map._refreshExpiredTiles&&i.setExpiryData(P),delete P.cacheControl,delete P.expires;const L=l.isImageBitmap(P)&&(xe==null&&(xe=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),xe)?P:l.exported.getImageData(P,1),D={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:L,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",D,y.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const c=i.canonical,d=Math.pow(2,c.z),y=(c.x-1+d)%d,b=c.x===0?i.wrap-1:i.wrap,P=(c.x+1+d)%d,L=c.x+1===d?i.wrap+1:i.wrap,D={};return D[new l.OverscaledTileID(i.overscaledZ,b,c.z,y,c.y).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,L,c.z,P,c.y).key]={backfilled:!1},c.y>0&&(D[new l.OverscaledTileID(i.overscaledZ,b,c.z,y,c.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,L,c.z,P,c.y-1).key]={backfilled:!1}),c.y+1<d&&(D[new l.OverscaledTileID(i.overscaledZ,b,c.z,y,c.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,L,c.z,P,c.y+1).key]={backfilled:!1}),D}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Be extends l.Evented{constructor(i,c,d,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(y),this._data=c.data,this._options=l.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const b=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:l.EXTENT,radius:(c.clusterRadius||50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,d,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:d},y),this}_updateWorkerData(i){const c=l.extend({},this.workerOptions),d=this._data;typeof d=="string"?(c.request=this.map._requestManager.transformRequest(l.exported.resolveURL(d),l.ResourceType.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(d),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(y,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return;let P=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(P=b.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:c.source},null),y)return void this.fire(new l.ErrorEvent(y));const L={dataType:"source",sourceDataType:i};this._collectResourceTiming&&P&&P.length>0&&l.extend(L,{resourceTiming:P}),this.fire(new l.Event("data",L))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const d=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const y={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(d,y,(b,P)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):b?c(b):(i.loadVectorData(P,this.map.painter,d==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ie=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pe extends l.Evented{constructor(i,c,d,y){super(),this.id=i,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(i,c){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(d,y)=>{this._loaded=!0,d?this.fire(new l.ErrorEvent(d)):y&&(this.image=y,i&&(this.coordinates=i),c&&c(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const c=i.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(y){let b=1/0,P=1/0,L=-1/0,D=-1/0;for(const Se of y)b=Math.min(b,Se.x),P=Math.min(P,Se.y),L=Math.max(L,Se.x),D=Math.max(D,Se.y);const q=Math.max(L-b,D-P),oe=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),ce=Math.pow(2,oe);return new l.CanonicalTileID(oe,Math.floor((b+L)/2*ce),Math.floor((P+D)/2*ce))}(c),this.minzoom=this.maxzoom=this.tileID.z;const d=c.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(d[2].x,d[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ae(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class $e extends Pe{constructor(i,c,d,y){super(i,c,d,y),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,l.ResourceType.Source).url);l.getVideo(this.urls,(c,d)=>{this._loaded=!0,c?this.fire(new l.ErrorEvent(c)):d&&(this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new ae(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ne extends Pe{constructor(i,c,d,y){super(i,c,d,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(P=>typeof P!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,d=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ae(c,this.canvas,d.RGBA,{premultiply:!0});for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const qe={vector:te,raster:he,"raster-dem":_e,geojson:Be,video:$e,image:Pe,canvas:Ne};function st(m,i){const c=l.create();return l.translate(c,c,[1,1,0]),l.scale(c,c,[.5*m.width,.5*m.height,1]),l.multiply(c,c,m.calculatePosMatrix(i.toUnwrapped()))}function yt(m,i,c,d,y,b){const P=function(ce,Se,Me){if(ce)for(const Ce of ce){const Re=Se[Ce];if(Re&&Re.source===Me&&Re.type==="fill-extrusion")return!0}else for(const Ce in Se){const Re=Se[Ce];if(Re.source===Me&&Re.type==="fill-extrusion")return!0}return!1}(y&&y.layers,i,m.id),L=b.maxPitchScaleFactor(),D=m.tilesIn(d,L,P);D.sort(Pt);const q=[];for(const ce of D)q.push({wrappedTileID:ce.tileID.wrapped().key,queryResults:ce.tile.queryRenderedFeatures(i,c,m._state,ce.queryGeometry,ce.cameraQueryGeometry,ce.scale,y,b,L,st(m.transform,ce.tileID))});const oe=function(ce){const Se={},Me={};for(const Ce of ce){const Re=Ce.queryResults,Ve=Ce.wrappedTileID,We=Me[Ve]=Me[Ve]||{};for(const Je in Re){const Ke=Re[Je],ct=We[Je]=We[Je]||{},rt=Se[Je]=Se[Je]||[];for(const ut of Ke)ct[ut.featureIndex]||(ct[ut.featureIndex]=!0,rt.push(ut))}}return Se}(q);for(const ce in oe)oe[ce].forEach(Se=>{const Me=Se.feature,Ce=m.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=Ce});return oe}function Pt(m,i){const c=m.tileID,d=i.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}class ht{constructor(i,c){this.tileID=i,this.uid=l.uniqueId(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<l.exported.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(i,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(y,b){const P={};if(!b)return P;for(const L of y){const D=L.layerIds.map(q=>b.getLayer(q)).filter(Boolean);if(D.length!==0){L.layers=D,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(q=>D.filter(oe=>oe.id===q)[0]));for(const q of D)P[q.id]=L}}return P}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!d)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof l.SymbolBucket&&b.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const y=this.buckets[d];y.uploadPending()&&y.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ae(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ae(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,d,y,b,P,L,D,q,oe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:P,tileSize:this.tileSize,pixelPosMatrix:oe,transform:D,params:L,queryPadding:this.queryPadding*q},i,c,d):{}}querySourceFeatures(i,c){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const y=d.loadVTLayers(),b=c?c.sourceLayer:"",P=y._geojsonTileLayer||y[b];if(!P)return;const L=l.createFilter(c&&c.filter),{z:D,x:q,y:oe}=this.tileID.canonical,ce={z:D,x:q,y:oe};for(let Se=0;Se<P.length;Se++){const Me=P.feature(Se);if(L.needGeometry){const Ve=l.toEvaluationFeature(Me,!0);if(!L.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Ve,this.tileID.canonical))continue}else if(!L.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Me))continue;const Ce=d.getId(Me,b),Re=new l.GeoJSONFeature(Me,D,q,oe,Ce);Re.tile=ce,i.push(Re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const d=l.parseCacheControl(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let y=!1;if(this.expirationTime>d)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const b=this.expirationTime-c;b?this.expirationTime=d+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const b=this.buckets[y],P=b.layers[0].sourceLayer||"_geojsonTileLayer",L=d[P],D=i[P];if(!L||!D||Object.keys(D).length===0)continue;b.update(D,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});const q=c&&c.style&&c.style.getLayer(y);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.exported.now()+i}setDependencies(i,c){const d={};for(const y of c)d[y]=!0;this.dependencies[i]=d}hasDependency(i,c){for(const d of i){const y=this.dependencies[d];if(y){for(const b of c)if(y[b])return!0}}return!1}}class Et{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,d){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const b={value:c,timeout:void 0};if(d!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},d)),this.data[y].push(b),this.order.push(y),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const d=i.wrapped().key,y=c===void 0?0:this.data[d].indexOf(c),b=this.data[d][y];return this.data[d].splice(y,1),b.timeout&&clearTimeout(b.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(b.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const d in this.data)for(const y of this.data[d])i(y.value)||c.push(y);for(const d of c)this.remove(d.value.tileID,d)}}class Nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,d){const y=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},l.extend(this.stateChanges[i][y],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==y&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const b in this.state[i][y])d[b]||(this.deletedStates[i][y][b]=null)}else for(const b in d)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][b]===null&&delete this.deletedStates[i][y][b]}removeFeatureState(i,c,d){if(this.deletedStates[i]===null)return;const y=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&c!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][d]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(d in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][d]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,c){const d=String(c),y=l.extend({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][c];if(b===null)return{};for(const P in b)delete y[P]}return y}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const d={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const P in this.stateChanges[y])this.state[y][P]||(this.state[y][P]={}),l.extend(this.state[y][P],this.stateChanges[y][P]),b[P]=this.state[y][P];d[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const P in this.state[y])b[P]={},this.state[y][P]={};else for(const P in this.deletedStates[y]){if(this.deletedStates[y][P]===null)this.state[y][P]={};else for(const L of Object.keys(this.deletedStates[y][P]))delete this.state[y][P][L];b[P]=this.state[y][P]}d[y]=d[y]||{},l.extend(d[y],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const y in i)i[y].setFeatureState(d,c)}}class Bt extends l.Evented{constructor(i,c,d){super(),this.id=i,this.dispatcher=d,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("error",()=>{this._sourceErrored=!0}),this._source=function(y,b,P,L){const D=new qe[b.type](y,b,P,L);if(D.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${D.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],D),D}(i,c,d,this),this._tiles={},this._cache=new Et(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nt}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const d=this._tiles[c];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(cn).map(i=>i.key)}getRenderableIds(i){const c=[];for(const d in this._tiles)this._isIdRenderable(d,i)&&c.push(this._tiles[d]);return i?c.sort((d,y)=>{const b=d.tileID,P=y.tileID,L=new l.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),D=new l.pointGeometry(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-P.overscaledZ||D.y-L.y||D.x-L.x}).map(d=>d.tileID.key):c.map(d=>d.tileID).sort(cn).map(d=>d.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,i,c)))}_tileLoaded(i,c,d,y){if(y)return i.state="errored",void(y.status!==404?this._source.fire(new l.ErrorEvent(y,{tile:i})):this.update(this.transform));i.timeAdded=l.exported.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let y=0;y<c.length;y++){const b=c[y];if(i.neighboringTiles&&i.neighboringTiles[b]){const P=this.getTileByID(b);d(i,P),d(P,i)}}function d(y,b){y.needsHillshadePrepare=!0;let P=b.tileID.canonical.x-y.tileID.canonical.x;const L=b.tileID.canonical.y-y.tileID.canonical.y,D=Math.pow(2,y.tileID.canonical.z),q=b.tileID.key;P===0&&L===0||Math.abs(L)>1||(Math.abs(P)>1&&(Math.abs(P+D)===1?P+=D:Math.abs(P-D)===1&&(P-=D)),b.dem&&y.dem&&(y.dem.backfillBorder(b.dem,P,L),y.neighboringTiles&&y.neighboringTiles[q]&&(y.neighboringTiles[q].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,d,y){for(const b in this._tiles){let P=this._tiles[b];if(y[b]||!P.hasData()||P.tileID.overscaledZ<=c||P.tileID.overscaledZ>d)continue;let L=P.tileID;for(;P&&P.tileID.overscaledZ>c+1;){const q=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[q.key],P&&P.hasData()&&(L=q)}let D=L;for(;D.overscaledZ>c;)if(D=D.scaledTo(D.overscaledZ-1),i[D.key]){y[L.key]=L;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=c?d:null}for(let d=i.overscaledZ-1;d>=c;d--){const y=i.scaledTo(d),b=this._getLoadedTile(y);if(b)return b}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,d=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(c*d*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const d={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),d[b.tileID.key]=b}this._tiles=d;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(i){if(this.transform=i,!this._sourceLoaded||this._paused)return;let c;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?c=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new l.OverscaledTileID(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(c=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(c=c.filter(D=>this._source.hasTile(D)))):c=[];const d=i.coveringZoomLevel(this._source),y=Math.max(d-Bt.maxOverzooming,this._source.minzoom),b=Math.max(d+Bt.maxUnderzooming,this._source.minzoom),P=this._updateRetainedTiles(c,d);if(Tn(this._source.type)){const D={},q={},oe=Object.keys(P);for(const ce of oe){const Se=P[ce],Me=this._tiles[ce];if(!Me||Me.fadeEndTime&&Me.fadeEndTime<=l.exported.now())continue;const Ce=this.findLoadedParent(Se,y);Ce&&(this._addTile(Ce.tileID),D[Ce.tileID.key]=Ce.tileID),q[ce]=Se}this._retainLoadedChildren(q,d,b,P);for(const ce in D)P[ce]||(this._coveredTiles[ce]=!0,P[ce]=D[ce])}for(const D in P)this._tiles[D].clearFadeHold();const L=l.keysDifference(this._tiles,P);for(const D of L){const q=this._tiles[D];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(D)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const d={},y={},b=Math.max(c-Bt.maxOverzooming,this._source.minzoom),P=Math.max(c+Bt.maxUnderzooming,this._source.minzoom),L={};for(const D of i){const q=this._addTile(D);d[D.key]=D,q.hasData()||c<this._source.maxzoom&&(L[D.key]=D)}this._retainLoadedChildren(L,c,P,d);for(const D of i){let q=this._tiles[D.key];if(q.hasData())continue;if(c+1>this._source.maxzoom){const ce=D.children(this._source.maxzoom)[0],Se=this.getTile(ce);if(Se&&Se.hasData()){d[ce.key]=ce;continue}}else{const ce=D.children(this._source.maxzoom);if(d[ce[0].key]&&d[ce[1].key]&&d[ce[2].key]&&d[ce[3].key])continue}let oe=q.wasRequested();for(let ce=D.overscaledZ-1;ce>=b;--ce){const Se=D.scaledTo(ce);if(y[Se.key]||(y[Se.key]=!0,q=this.getTile(Se),!q&&oe&&(q=this._addTile(Se)),q&&(d[Se.key]=Se,oe=q.wasRequested(),q.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let d,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){d=this._loadedParentTiles[y.key];break}c.push(y.key);const b=y.scaledTo(y.overscaledZ-1);if(d=this._getLoadedTile(b),d)break;y=b}for(const b of c)this._loadedParentTiles[b]=d}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const d=c;return c||(c=new ht(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,d||this._source.fire(new l.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=c.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,d){const y=[],b=this.transform;if(!b)return y;const P=d?b.getCameraQueryGeometry(i):i,L=i.map(Ce=>b.pointCoordinate(Ce)),D=P.map(Ce=>b.pointCoordinate(Ce)),q=this.getIds();let oe=1/0,ce=1/0,Se=-1/0,Me=-1/0;for(const Ce of D)oe=Math.min(oe,Ce.x),ce=Math.min(ce,Ce.y),Se=Math.max(Se,Ce.x),Me=Math.max(Me,Ce.y);for(let Ce=0;Ce<q.length;Ce++){const Re=this._tiles[q[Ce]];if(Re.holdingForFade())continue;const Ve=Re.tileID,We=Math.pow(2,b.zoom-Re.tileID.overscaledZ),Je=c*Re.queryPadding*l.EXTENT/Re.tileSize/We,Ke=[Ve.getTilePoint(new l.MercatorCoordinate(oe,ce)),Ve.getTilePoint(new l.MercatorCoordinate(Se,Me))];if(Ke[0].x-Je<l.EXTENT&&Ke[0].y-Je<l.EXTENT&&Ke[1].x+Je>=0&&Ke[1].y+Je>=0){const ct=L.map(ut=>Ve.getTilePoint(ut)),rt=D.map(ut=>Ve.getTilePoint(ut));y.push({tile:Re,tileID:Ve,queryGeometry:ct,cameraQueryGeometry:rt,scale:We})}}return y}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);for(const d of c)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Tn(this._source.type))for(const i in this._tiles){const c=this._tiles[i];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(i,c,d){this._state.updateState(i=i||"_geojsonTileLayer",c,d)}removeFeatureState(i,c,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,d)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,d){const y=this._tiles[i];y&&y.setDependencies(c,d)}reloadTilesForDependencies(i,c){for(const d in this._tiles)this._tiles[d].hasDependency(i,c)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(i,c))}}function cn(m,i){const c=Math.abs(2*m.wrap)-+(m.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return m.overscaledZ-i.overscaledZ||d-c||i.canonical.y-m.canonical.y||i.canonical.x-m.canonical.x}function Tn(m){return m==="raster"||m==="image"||m==="video"}Bt.maxOverzooming=10,Bt.maxUnderzooming=3;const wn="mapboxgl_preloaded_worker_pool";class on{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<on.workerCount;)this.workers.push(new Worker(fu.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[wn]}numActive(){return Object.keys(this.active).length}}const En=Math.floor(l.exported.hardwareConcurrency/2);let Ee;function R(){return Ee||(Ee=new on),Ee}function O(m,i){const c={};for(const d in m)d!=="ref"&&(c[d]=m[d]);return l.refProperties.forEach(d=>{d in i&&(c[d]=i[d])}),c}function pe(m){m=m.slice();const i=Object.create(null);for(let c=0;c<m.length;c++)i[m[c].id]=m[c];for(let c=0;c<m.length;c++)"ref"in m[c]&&(m[c]=O(m[c],i[m[c].ref]));return m}on.workerCount=Math.max(Math.min(En,6),1);const ze={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ye(m,i,c){c.push({command:ze.addSource,args:[m,i[m]]})}function ot(m,i,c){i.push({command:ze.removeSource,args:[m]}),c[m]=!0}function se(m,i,c,d){ot(m,c,d),Ye(m,i,c)}function A(m,i,c){let d;for(d in m[c])if(Object.prototype.hasOwnProperty.call(m[c],d)&&d!=="data"&&!E(m[c][d],i[c][d]))return!1;for(d in i[c])if(Object.prototype.hasOwnProperty.call(i[c],d)&&d!=="data"&&!E(m[c][d],i[c][d]))return!1;return!0}function z(m,i,c,d,y,b){let P;for(P in i=i||{},m=m||{})Object.prototype.hasOwnProperty.call(m,P)&&(E(m[P],i[P])||c.push({command:b,args:[d,P,i[P],y]}));for(P in i)Object.prototype.hasOwnProperty.call(i,P)&&!Object.prototype.hasOwnProperty.call(m,P)&&(E(m[P],i[P])||c.push({command:b,args:[d,P,i[P],y]}))}function we(m){return m.id}function je(m,i){return m[i.id]=i,m}class Xe{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.clamp(i,0,1);let c=1,d=this._distances[c];const y=i*this.paddedLength+this.padding;for(;d<y&&c<this._distances.length;)d=this._distances[++c];const b=c-1,P=this._distances[b],L=d-P,D=L>0?(y-P)/L:0;return this.points[b].mult(1-D).add(this.points[c].mult(D))}}function Qe(m,i){let c=!0;return m==="always"||m!=="never"&&i!=="never"||(c=!1),c}class Ht{constructor(i,c,d){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/d),this.yCellCount=Math.ceil(c/d);for(let P=0;P<this.xCellCount*this.yCellCount;P++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,d,y,b){this._forEachCell(c,d,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(i,c,d,y){this._forEachCell(c-y,d-y,c+y,d+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(d),this.circles.push(y)}_insertBoxCell(i,c,d,y,b,P){this.boxCells[b].push(P)}_insertCircleCell(i,c,d,y,b,P){this.circleCells[b].push(P)}_query(i,c,d,y,b,P,L){if(d<0||i>this.width||y<0||c>this.height)return[];const D=[];if(i<=0&&c<=0&&this.width<=d&&this.height<=y){if(b)return[{key:null,x1:i,y1:c,x2:d,y2:y}];for(let q=0;q<this.boxKeys.length;q++)D.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const oe=this.circles[3*q],ce=this.circles[3*q+1],Se=this.circles[3*q+2];D.push({key:this.circleKeys[q],x1:oe-Se,y1:ce-Se,x2:oe+Se,y2:ce+Se})}}else this._forEachCell(i,c,d,y,this._queryCell,D,{hitTest:b,overlapMode:P,seenUids:{box:{},circle:{}}},L);return D}query(i,c,d,y){return this._query(i,c,d,y,!1,null)}hitTest(i,c,d,y,b,P){return this._query(i,c,d,y,!0,b,P).length>0}hitTestCircle(i,c,d,y,b){const P=i-d,L=i+d,D=c-d,q=c+d;if(L<0||P>this.width||q<0||D>this.height)return!1;const oe=[];return this._forEachCell(P,D,L,q,this._queryCellCircle,oe,{hitTest:!0,overlapMode:y,circle:{x:i,y:c,radius:d},seenUids:{box:{},circle:{}}},b),oe.length>0}_queryCell(i,c,d,y,b,P,L,D){const{seenUids:q,hitTest:oe,overlapMode:ce}=L,Se=this.boxCells[b];if(Se!==null){const Ce=this.bboxes;for(const Re of Se)if(!q.box[Re]){q.box[Re]=!0;const Ve=4*Re,We=this.boxKeys[Re];if(i<=Ce[Ve+2]&&c<=Ce[Ve+3]&&d>=Ce[Ve+0]&&y>=Ce[Ve+1]&&(!D||D(We))&&(!oe||!Qe(ce,We.overlapMode))&&(P.push({key:We,x1:Ce[Ve],y1:Ce[Ve+1],x2:Ce[Ve+2],y2:Ce[Ve+3]}),oe))return!0}}const Me=this.circleCells[b];if(Me!==null){const Ce=this.circles;for(const Re of Me)if(!q.circle[Re]){q.circle[Re]=!0;const Ve=3*Re,We=this.circleKeys[Re];if(this._circleAndRectCollide(Ce[Ve],Ce[Ve+1],Ce[Ve+2],i,c,d,y)&&(!D||D(We))&&(!oe||!Qe(ce,We.overlapMode))){const Je=Ce[Ve],Ke=Ce[Ve+1],ct=Ce[Ve+2];if(P.push({key:We,x1:Je-ct,y1:Ke-ct,x2:Je+ct,y2:Ke+ct}),oe)return!0}}}return!1}_queryCellCircle(i,c,d,y,b,P,L,D){const{circle:q,seenUids:oe,overlapMode:ce}=L,Se=this.boxCells[b];if(Se!==null){const Ce=this.bboxes;for(const Re of Se)if(!oe.box[Re]){oe.box[Re]=!0;const Ve=4*Re,We=this.boxKeys[Re];if(this._circleAndRectCollide(q.x,q.y,q.radius,Ce[Ve+0],Ce[Ve+1],Ce[Ve+2],Ce[Ve+3])&&(!D||D(We))&&!Qe(ce,We.overlapMode))return P.push(!0),!0}}const Me=this.circleCells[b];if(Me!==null){const Ce=this.circles;for(const Re of Me)if(!oe.circle[Re]){oe.circle[Re]=!0;const Ve=3*Re,We=this.circleKeys[Re];if(this._circlesCollide(Ce[Ve],Ce[Ve+1],Ce[Ve+2],q.x,q.y,q.radius)&&(!D||D(We))&&!Qe(ce,We.overlapMode))return P.push(!0),!0}}}_forEachCell(i,c,d,y,b,P,L,D){const q=this._convertToXCellCoord(i),oe=this._convertToYCellCoord(c),ce=this._convertToXCellCoord(d),Se=this._convertToYCellCoord(y);for(let Me=q;Me<=ce;Me++)for(let Ce=oe;Ce<=Se;Ce++)if(b.call(this,i,c,d,y,this.xCellCount*Ce+Me,P,L,D))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,d,y,b,P){const L=y-i,D=b-c,q=d+P;return q*q>L*L+D*D}_circleAndRectCollide(i,c,d,y,b,P,L){const D=(P-y)/2,q=Math.abs(i-(y+D));if(q>D+d)return!1;const oe=(L-b)/2,ce=Math.abs(c-(b+oe));if(ce>oe+d)return!1;if(q<=D||ce<=oe)return!0;const Se=q-D,Me=ce-oe;return Se*Se+Me*Me<=d*d}}function Sn(m,i,c,d,y){const b=l.create();return i?(l.scale(b,b,[1/y,1/y,1]),c||l.rotateZ(b,b,d.angle)):l.multiply(b,d.labelPlaneMatrix,m),b}function fn(m,i,c,d,y){if(i){const b=l.clone(m);return l.scale(b,b,[y,y,1]),c||l.rotateZ(b,b,-d.angle),b}return d.glCoordMatrix}function ft(m,i){const c=l.fromValues(m.x,m.y,0,1);Gt(c,c,i);const d=c[3];return{point:new l.pointGeometry(c[0]/d,c[1]/d),signedDistanceFromCamera:d}}function Mt(m,i){return .5+m/i*.5}function un(m,i){const c=m[0]/m[3],d=m[1]/m[3];return c>=-i[0]&&c<=i[0]&&d>=-i[1]&&d<=i[1]}function Ir(m,i,c,d,y,b,P,L){const D=d?m.textSizeData:m.iconSizeData,q=l.evaluateSizeForZoom(D,c.transform.zoom),oe=[256/c.width*2+1,256/c.height*2+1],ce=d?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;ce.clear();const Se=m.lineVertexArray,Me=d?m.text.placedSymbolArray:m.icon.placedSymbolArray,Ce=c.transform.width/c.transform.height;let Re=!1;for(let Ve=0;Ve<Me.length;Ve++){const We=Me.get(Ve);if(We.hidden||We.writingMode===l.WritingMode.vertical&&!Re){Wt(We.numGlyphs,ce);continue}Re=!1;const Je=l.fromValues(We.anchorX,We.anchorY,0,1);if(l.transformMat4(Je,Je,i),!un(Je,oe)){Wt(We.numGlyphs,ce);continue}const Ke=Mt(c.transform.cameraToCenterDistance,Je[3]),ct=l.evaluateSizeForFeature(D,q,We),rt=P?ct/Ke:ct*Ke,ut=new l.pointGeometry(We.anchorX,We.anchorY),xt=ft(ut,y).point,St={},mt=rr(We,rt,!1,L,i,y,b,m.glyphOffsetArray,Se,ce,xt,ut,St,Ce);Re=mt.useVertical,(mt.notEnoughRoom||Re||mt.needsFlipping&&rr(We,rt,!0,L,i,y,b,m.glyphOffsetArray,Se,ce,xt,ut,St,Ce).notEnoughRoom)&&Wt(We.numGlyphs,ce)}d?m.text.dynamicLayoutVertexBuffer.updateData(ce):m.icon.dynamicLayoutVertexBuffer.updateData(ce)}function Qr(m,i,c,d,y,b,P,L,D,q,oe){const ce=L.glyphStartIndex+L.numGlyphs,Se=L.lineStartIndex,Me=L.lineStartIndex+L.lineLength,Ce=i.getoffsetX(L.glyphStartIndex),Re=i.getoffsetX(ce-1),Ve=xr(m*Ce,c,d,y,b,P,L.segment,Se,Me,D,q,oe);if(!Ve)return null;const We=xr(m*Re,c,d,y,b,P,L.segment,Se,Me,D,q,oe);return We?{first:Ve,last:We}:null}function hn(m,i,c,d){return m===l.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*d?{useVertical:!0}:(m===l.WritingMode.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function rr(m,i,c,d,y,b,P,L,D,q,oe,ce,Se,Me){const Ce=i/24,Re=m.lineOffsetX*Ce,Ve=m.lineOffsetY*Ce;let We;if(m.numGlyphs>1){const Je=m.glyphStartIndex+m.numGlyphs,Ke=m.lineStartIndex,ct=m.lineStartIndex+m.lineLength,rt=Qr(Ce,L,Re,Ve,c,oe,ce,m,D,b,Se);if(!rt)return{notEnoughRoom:!0};const ut=ft(rt.first.point,P).point,xt=ft(rt.last.point,P).point;if(d&&!c){const St=hn(m.writingMode,ut,xt,Me);if(St)return St}We=[rt.first];for(let St=m.glyphStartIndex+1;St<Je-1;St++)We.push(xr(Ce*L.getoffsetX(St),Re,Ve,c,oe,ce,m.segment,Ke,ct,D,b,Se));We.push(rt.last)}else{if(d&&!c){const Ke=ft(ce,y).point,ct=m.lineStartIndex+m.segment+1,rt=new l.pointGeometry(D.getx(ct),D.gety(ct)),ut=ft(rt,y),xt=ut.signedDistanceFromCamera>0?ut.point:bi(ce,rt,Ke,1,y),St=hn(m.writingMode,Ke,xt,Me);if(St)return St}const Je=xr(Ce*L.getoffsetX(m.glyphStartIndex),Re,Ve,c,oe,ce,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,D,b,Se);if(!Je)return{notEnoughRoom:!0};We=[Je]}for(const Je of We)l.addDynamicAttributes(q,Je.point,Je.angle);return{}}function bi(m,i,c,d,y){const b=ft(m.add(m.sub(i)._unit()),y).point,P=c.sub(b);return c.add(P._mult(d/P.mag()))}function xr(m,i,c,d,y,b,P,L,D,q,oe,ce){const Se=d?m-i:m+i;let Me=Se>0?1:-1,Ce=0;d&&(Me*=-1,Ce=Math.PI),Me<0&&(Ce+=Math.PI);let Re=Me>0?L+P:L+P+1,Ve=y,We=y,Je=0,Ke=0;const ct=Math.abs(Se),rt=[];for(;Je+Ke<=ct;){if(Re+=Me,Re<L||Re>=D)return null;if(We=Ve,rt.push(Ve),Ve=ce[Re],Ve===void 0){const Yt=new l.pointGeometry(q.getx(Re),q.gety(Re)),Ft=ft(Yt,oe);if(Ft.signedDistanceFromCamera>0)Ve=ce[Re]=Ft.point;else{const pn=Re-Me;Ve=bi(Je===0?b:new l.pointGeometry(q.getx(pn),q.gety(pn)),Yt,We,ct-Je+1,oe)}}Je+=Ke,Ke=We.dist(Ve)}const ut=(ct-Je)/Ke,xt=Ve.sub(We),St=xt.mult(ut)._add(We);St._add(xt._unit()._perp()._mult(c*Me));const mt=Ce+Math.atan2(Ve.y-We.y,Ve.x-We.x);return rt.push(St),{point:St,angle:mt,path:rt}}const Vr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wt(m,i){for(let c=0;c<m;c++){const d=i.length;i.resize(d+4),i.float32.set(Vr,3*d)}}function Gt(m,i,c){const d=i[0],y=i[1];return m[0]=c[0]*d+c[4]*y+c[12],m[1]=c[1]*d+c[5]*y+c[13],m[3]=c[3]*d+c[7]*y+c[15],m}const Zt=100;class An{constructor(i,c=new Ht(i.width+200,i.height+200,25),d=new Ht(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=d,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Zt,this.screenBottomBoundary=i.height+Zt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200}placeCollisionBox(i,c,d,y,b){const P=this.projectAndGetPerspectiveRatio(y,i.anchorPointX,i.anchorPointY),L=d*P.perspectiveRatio,D=i.x1*L+P.point.x,q=i.y1*L+P.point.y,oe=i.x2*L+P.point.x,ce=i.y2*L+P.point.y;return!this.isInsideGrid(D,q,oe,ce)||c!=="always"&&this.grid.hitTest(D,q,oe,ce,c,b)?{box:[],offscreen:!1}:{box:[D,q,oe,ce],offscreen:this.isOffscreen(D,q,oe,ce)}}placeCollisionCircles(i,c,d,y,b,P,L,D,q,oe,ce,Se,Me){const Ce=[],Re=new l.pointGeometry(c.anchorX,c.anchorY),Ve=ft(Re,P),We=Mt(this.transform.cameraToCenterDistance,Ve.signedDistanceFromCamera),Je=(oe?b/We:b*We)/l.ONE_EM,Ke=ft(Re,L).point,ct=Qr(Je,y,c.lineOffsetX*Je,c.lineOffsetY*Je,!1,Ke,Re,c,d,L,{});let rt=!1,ut=!1,xt=!0;if(ct){const St=.5*Se*We+Me,mt=new l.pointGeometry(-100,-100),Yt=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ft=new Xe,pn=ct.first,$n=ct.last;let In=[];for(let vn=pn.path.length-1;vn>=1;vn--)In.push(pn.path[vn]);for(let vn=1;vn<$n.path.length;vn++)In.push($n.path[vn]);const Pn=2.5*St;if(D){const vn=In.map(Ln=>ft(Ln,D));In=vn.some(Ln=>Ln.signedDistanceFromCamera<=0)?[]:vn.map(Ln=>Ln.point)}let wr=[];if(In.length>0){const vn=In[0].clone(),Ln=In[0].clone();for(let gr=1;gr<In.length;gr++)vn.x=Math.min(vn.x,In[gr].x),vn.y=Math.min(vn.y,In[gr].y),Ln.x=Math.max(Ln.x,In[gr].x),Ln.y=Math.max(Ln.y,In[gr].y);wr=vn.x>=mt.x&&Ln.x<=Yt.x&&vn.y>=mt.y&&Ln.y<=Yt.y?[In]:Ln.x<mt.x||vn.x>Yt.x||Ln.y<mt.y||vn.y>Yt.y?[]:l.clipLine([In],mt.x,mt.y,Yt.x,Yt.y)}for(const vn of wr){Ft.reset(vn,.25*St);let Ln=0;Ln=Ft.length<=.5*St?1:Math.ceil(Ft.paddedLength/Pn)+1;for(let gr=0;gr<Ln;gr++){const ei=gr/Math.max(Ln-1,1),ji=Ft.lerp(ei),Di=ji.x+Zt,yo=ji.y+Zt;Ce.push(Di,yo,St,0);const Ni=Di-St,vo=yo-St,Na=Di+St,ps=yo+St;if(xt=xt&&this.isOffscreen(Ni,vo,Na,ps),ut=ut||this.isInsideGrid(Ni,vo,Na,ps),i!=="always"&&this.grid.hitTestCircle(Di,yo,St,i,ce)&&(rt=!0,!q))return{circles:[],offscreen:!1,collisionDetected:rt}}}}return{circles:!q&&rt||!ut?[]:Ce,offscreen:xt,collisionDetected:rt}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let d=1/0,y=1/0,b=-1/0,P=-1/0;for(const oe of i){const ce=new l.pointGeometry(oe.x+Zt,oe.y+Zt);d=Math.min(d,ce.x),y=Math.min(y,ce.y),b=Math.max(b,ce.x),P=Math.max(P,ce.y),c.push(ce)}const L=this.grid.query(d,y,b,P).concat(this.ignoredGrid.query(d,y,b,P)),D={},q={};for(const oe of L){const ce=oe.key;if(D[ce.bucketInstanceId]===void 0&&(D[ce.bucketInstanceId]={}),D[ce.bucketInstanceId][ce.featureIndex])continue;const Se=[new l.pointGeometry(oe.x1,oe.y1),new l.pointGeometry(oe.x2,oe.y1),new l.pointGeometry(oe.x2,oe.y2),new l.pointGeometry(oe.x1,oe.y2)];l.polygonIntersectsPolygon(c,Se)&&(D[ce.bucketInstanceId][ce.featureIndex]=!0,q[ce.bucketInstanceId]===void 0&&(q[ce.bucketInstanceId]=[]),q[ce.bucketInstanceId].push(ce.featureIndex))}return q}insertCollisionBox(i,c,d,y,b,P){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:P,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,d,y,b,P){const L=d?this.ignoredGrid:this.grid,D={bucketInstanceId:y,featureIndex:b,collisionGroupID:P,overlapMode:c};for(let q=0;q<i.length;q+=4)L.insertCircle(D,i[q],i[q+1],i[q+2])}projectAndGetPerspectiveRatio(i,c,d){const y=l.fromValues(c,d,0,1);return Gt(y,y,i),{point:new l.pointGeometry((y[0]/y[3]+1)/2*this.transform.width+Zt,(-y[1]/y[3]+1)/2*this.transform.height+Zt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/y[3]*.5}}isOffscreen(i,c,d,y){return d<Zt||i>=this.screenRightBoundary||y<Zt||c>this.screenBottomBoundary}isInsideGrid(i,c,d,y){return d>=0&&i<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=l.identity([]);return l.translate(i,i,[-100,-100,0]),i}}function zn(m,i,c){return i*(l.EXTENT/(m.tileSize*Math.pow(2,c-m.tileID.overscaledZ)))}class ir{constructor(i,c,d,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):y&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Gr{constructor(i,c,d,y,b){this.text=new ir(i?i.text:null,c,d,b),this.icon=new ir(i?i.icon:null,c,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hi{constructor(i,c,d){this.text=i,this.icon=c,this.skipFade=d}}class Pa{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class Te{constructor(i,c,d,y,b){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=y,this.tileID=b}}class W{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[i]}}function J(m,i,c,d,y){const{horizontalAlign:b,verticalAlign:P}=l.getAnchorAlignment(m),L=-(b-.5)*i,D=-(P-.5)*c,q=l.evaluateVariableOffset(m,d);return new l.pointGeometry(L+q[0]*y,D+q[1]*y)}function ge(m,i,c,d,y,b){const{x1:P,x2:L,y1:D,y2:q,anchorPointX:oe,anchorPointY:ce}=m,Se=new l.pointGeometry(i,c);return d&&Se._rotate(y?b:-b),{x1:P+Se.x,y1:D+Se.y,x2:L+Se.x,y2:q+Se.y,anchorPointX:oe,anchorPointY:ce}}class Ae{constructor(i,c,d,y){this.transform=i.clone(),this.collisionIndex=new An(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new W(d),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,d,y){const b=d.getBucket(c),P=d.latestFeatureIndex;if(!b||!P||c.id!==b.layerIds[0])return;const L=d.collisionBoxArray,D=b.layers[0].layout,q=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),oe=d.tileSize/l.EXTENT,ce=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),Se=D.get("text-pitch-alignment")==="map",Me=D.get("text-rotation-alignment")==="map",Ce=zn(d,1,this.transform.zoom),Re=Sn(ce,Se,Me,this.transform,Ce);let Ve=null;if(Se){const Je=fn(ce,Se,Me,this.transform,Ce);Ve=l.multiply([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[b.bucketInstanceId]=new Te(b.bucketInstanceId,P,b.sourceLayerIndex,b.index,d.tileID);const We={bucket:b,layout:D,posMatrix:ce,textLabelPlaneMatrix:Re,labelToScreenMatrix:Ve,scale:q,textPixelRatio:oe,holdingForFade:d.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const Je of b.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:ct,symbolInstanceEnd:rt}=Je;i.push({sortKey:Ke,symbolInstanceStart:ct,symbolInstanceEnd:rt,parameters:We})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:We})}attemptAnchorPlacement(i,c,d,y,b,P,L,D,q,oe,ce,Se,Me,Ce,Re){const Ve=[Se.textOffset0,Se.textOffset1],We=J(i,d,y,Ve,b),Je=this.collisionIndex.placeCollisionBox(ge(c,We.x,We.y,P,L,this.transform.angle),ce,D,q,oe.predicate);if((!Re||this.collisionIndex.placeCollisionBox(ge(Re,We.x,We.y,P,L,this.transform.angle),ce,D,q,oe.predicate).box.length!==0)&&Je.box.length>0){let Ke;return this.prevPlacement&&this.prevPlacement.variableOffsets[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID].text&&(Ke=this.prevPlacement.variableOffsets[Se.crossTileID].anchor),this.variableOffsets[Se.crossTileID]={textOffset:Ve,width:d,height:y,anchor:i,textBoxScale:b,prevAnchor:Ke},this.markUsedJustification(Me,i,Se,Ce),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,Ce,Se),this.placedOrientations[Se.crossTileID]=Ce),{shift:We,placedGlyphBoxes:Je}}}placeLayerBucketPart(i,c,d){const{bucket:y,layout:b,posMatrix:P,textLabelPlaneMatrix:L,labelToScreenMatrix:D,textPixelRatio:q,holdingForFade:oe,collisionBoxArray:ce,partiallyEvaluatedTextSize:Se,collisionGroup:Me}=i.parameters,Ce=b.get("text-optional"),Re=b.get("icon-optional"),Ve=l.getOverlapMode(b,"text-overlap","text-allow-overlap"),We=Ve==="always",Je=l.getOverlapMode(b,"icon-overlap","icon-allow-overlap"),Ke=Je==="always",ct=b.get("text-rotation-alignment")==="map",rt=b.get("text-pitch-alignment")==="map",ut=b.get("icon-text-fit")!=="none",xt=b.get("symbol-z-order")==="viewport-y",St=We&&(Ke||!y.hasIconData()||Re),mt=Ke&&(We||!y.hasTextData()||Ce);!y.collisionArrays&&ce&&y.deserializeCollisionBoxes(ce);const Yt=(Ft,pn)=>{if(c[Ft.crossTileID])return;if(oe)return void(this.placements[Ft.crossTileID]=new hi(!1,!1,!1));let $n=!1,In=!1,Pn=!0,wr=null,vn={box:null,offscreen:null},Ln={box:null,offscreen:null},gr=null,ei=null,ji=null,Di=0,yo=0,Ni=0;pn.textFeatureIndex?Di=pn.textFeatureIndex:Ft.useRuntimeCollisionCircles&&(Di=Ft.featureIndex),pn.verticalTextFeatureIndex&&(yo=pn.verticalTextFeatureIndex);const vo=pn.textBox;if(vo){const Kn=Nn=>{let Fr=l.WritingMode.horizontal;if(y.allowVerticalPlacement&&!Nn&&this.prevPlacement){const Ui=this.prevPlacement.placedOrientations[Ft.crossTileID];Ui&&(this.placedOrientations[Ft.crossTileID]=Ui,Fr=Ui,this.markUsedOrientation(y,Fr,Ft))}return Fr},Zr=(Nn,Fr)=>{if(y.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&pn.verticalTextBox){for(const Ui of y.writingModes)if(Ui===l.WritingMode.vertical?(vn=Fr(),Ln=vn):vn=Nn(),vn&&vn.box&&vn.box.length)break}else vn=Nn()};if(b.get("text-variable-anchor")){let Nn=b.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ft.crossTileID]){const ur=this.prevPlacement.variableOffsets[Ft.crossTileID];Nn.indexOf(ur.anchor)>0&&(Nn=Nn.filter(ms=>ms!==ur.anchor),Nn.unshift(ur.anchor))}const Fr=(ur,ms,gs)=>{const nl=ur.x2-ur.x1,cc=ur.y2-ur.y1,xd=Ft.textBoxScale,zh=ut&&Je==="never"?ms:null;let Ua={box:[],offscreen:!1};const ys=Ve!=="never"?2*Nn.length:Nn.length;for(let vs=0;vs<ys;++vs){const hc=this.attemptAnchorPlacement(Nn[vs%Nn.length],ur,nl,cc,xd,ct,rt,q,P,Me,vs>=Nn.length?Ve:"never",Ft,y,gs,zh);if(hc&&(Ua=hc.placedGlyphBoxes,Ua&&Ua.box&&Ua.box.length)){$n=!0,wr=hc.shift;break}}return Ua};Zr(()=>Fr(vo,pn.iconBox,l.WritingMode.horizontal),()=>{const ur=pn.verticalTextBox;return y.allowVerticalPlacement&&!(vn&&vn.box&&vn.box.length)&&Ft.numVerticalGlyphVertices>0&&ur?Fr(ur,pn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),vn&&($n=vn.box,Pn=vn.offscreen);const Ui=Kn(vn&&vn.box);if(!$n&&this.prevPlacement){const ur=this.prevPlacement.variableOffsets[Ft.crossTileID];ur&&(this.variableOffsets[Ft.crossTileID]=ur,this.markUsedJustification(y,ur.anchor,Ft,Ui))}}else{const Nn=(Fr,Ui)=>{const ur=this.collisionIndex.placeCollisionBox(Fr,Ve,q,P,Me.predicate);return ur&&ur.box&&ur.box.length&&(this.markUsedOrientation(y,Ui,Ft),this.placedOrientations[Ft.crossTileID]=Ui),ur};Zr(()=>Nn(vo,l.WritingMode.horizontal),()=>{const Fr=pn.verticalTextBox;return y.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&Fr?Nn(Fr,l.WritingMode.vertical):{box:null,offscreen:null}}),Kn(vn&&vn.box&&vn.box.length)}}if(gr=vn,$n=gr&&gr.box&&gr.box.length>0,Pn=gr&&gr.offscreen,Ft.useRuntimeCollisionCircles){const Kn=y.text.placedSymbolArray.get(Ft.centerJustifiedTextSymbolIndex),Zr=l.evaluateSizeForFeature(y.textSizeData,Se,Kn),Nn=b.get("text-padding");ei=this.collisionIndex.placeCollisionCircles(Ve,Kn,y.lineVertexArray,y.glyphOffsetArray,Zr,P,L,D,d,rt,Me.predicate,Ft.collisionCircleDiameter,Nn),$n=We||ei.circles.length>0&&!ei.collisionDetected,Pn=Pn&&ei.offscreen}if(pn.iconFeatureIndex&&(Ni=pn.iconFeatureIndex),pn.iconBox){const Kn=Zr=>{const Nn=ut&&wr?ge(Zr,wr.x,wr.y,ct,rt,this.transform.angle):Zr;return this.collisionIndex.placeCollisionBox(Nn,Je,q,P,Me.predicate)};Ln&&Ln.box&&Ln.box.length&&pn.verticalIconBox?(ji=Kn(pn.verticalIconBox),In=ji.box.length>0):(ji=Kn(pn.iconBox),In=ji.box.length>0),Pn=Pn&&ji.offscreen}const Na=Ce||Ft.numHorizontalGlyphVertices===0&&Ft.numVerticalGlyphVertices===0,ps=Re||Ft.numIconVertices===0;if(Na||ps?ps?Na||(In=In&&$n):$n=In&&$n:In=$n=In&&$n,$n&&gr&&gr.box&&this.collisionIndex.insertCollisionBox(gr.box,Ve,b.get("text-ignore-placement"),y.bucketInstanceId,Ln&&Ln.box&&yo?yo:Di,Me.ID),In&&ji&&this.collisionIndex.insertCollisionBox(ji.box,Je,b.get("icon-ignore-placement"),y.bucketInstanceId,Ni,Me.ID),ei&&($n&&this.collisionIndex.insertCollisionCircles(ei.circles,Ve,b.get("text-ignore-placement"),y.bucketInstanceId,Di,Me.ID),d)){const Kn=y.bucketInstanceId;let Zr=this.collisionCircleArrays[Kn];Zr===void 0&&(Zr=this.collisionCircleArrays[Kn]=new Pa);for(let Nn=0;Nn<ei.circles.length;Nn+=4)Zr.circles.push(ei.circles[Nn+0]),Zr.circles.push(ei.circles[Nn+1]),Zr.circles.push(ei.circles[Nn+2]),Zr.circles.push(ei.collisionDetected?1:0)}this.placements[Ft.crossTileID]=new hi($n||St,In||mt,Pn||y.justReloaded),c[Ft.crossTileID]=!0};if(xt){const Ft=y.getSortedSymbolIndexes(this.transform.angle);for(let pn=Ft.length-1;pn>=0;--pn){const $n=Ft[pn];Yt(y.symbolInstances.get($n),y.collisionArrays[$n])}}else for(let Ft=i.symbolInstanceStart;Ft<i.symbolInstanceEnd;Ft++)Yt(y.symbolInstances.get(Ft),y.collisionArrays[Ft]);if(d&&y.bucketInstanceId in this.collisionCircleArrays){const Ft=this.collisionCircleArrays[y.bucketInstanceId];l.invert(Ft.invProjMatrix,P),Ft.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(i,c,d,y){let b;b=y===l.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(c)];const P=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const L of P)L>=0&&(i.text.placedSymbolArray.get(L).crossTileID=b>=0&&L!==b?0:d.crossTileID)}markUsedOrientation(i,c,d){const y=c===l.WritingMode.horizontal||c===l.WritingMode.horizontalOnly?c:0,b=c===l.WritingMode.vertical?c:0,P=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const L of P)i.text.placedSymbolArray.get(L).placedOrientation=y;d.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(i):1,b=c?c.opacities:{},P=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const D in this.placements){const q=this.placements[D],oe=b[D];oe?(this.opacities[D]=new Gr(oe,y,q.text,q.icon),d=d||q.text!==oe.text.placed||q.icon!==oe.icon.placed):(this.opacities[D]=new Gr(null,y,q.text,q.icon,q.skipFade),d=d||q.text||q.icon)}for(const D in b){const q=b[D];if(!this.opacities[D]){const oe=new Gr(q,y,!1,!1);oe.isHidden()||(this.opacities[D]=oe,d=d||q.text.placed||q.icon.placed)}}for(const D in P)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=P[D]);for(const D in L)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=L[D]);d?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const d={};for(const y of c){const b=y.getBucket(i);b&&y.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,d,y.collisionBoxArray)}}updateBucketOpacities(i,c,d){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,b=new Gr(null,0,!1,!1,!0),P=y.get("text-allow-overlap"),L=y.get("icon-allow-overlap"),D=y.get("text-variable-anchor"),q=y.get("text-rotation-alignment")==="map",oe=y.get("text-pitch-alignment")==="map",ce=y.get("icon-text-fit")!=="none",Se=new Gr(null,0,P&&(L||!i.hasIconData()||y.get("icon-optional")),L&&(P||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&d&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(d);const Me=(Ce,Re,Ve)=>{for(let We=0;We<Re/4;We++)Ce.opacityVertexArray.emplaceBack(Ve)};for(let Ce=0;Ce<i.symbolInstances.length;Ce++){const Re=i.symbolInstances.get(Ce),{numHorizontalGlyphVertices:Ve,numVerticalGlyphVertices:We,crossTileID:Je}=Re;let Ke=this.opacities[Je];c[Je]?Ke=b:Ke||(Ke=Se,this.opacities[Je]=Ke),c[Je]=!0;const ct=Re.numIconVertices>0,rt=this.placedOrientations[Re.crossTileID],ut=rt===l.WritingMode.vertical,xt=rt===l.WritingMode.horizontal||rt===l.WritingMode.horizontalOnly;if(Ve>0||We>0){const St=Vt(Ke.text);Me(i.text,Ve,ut?It:St),Me(i.text,We,xt?It:St);const mt=Ke.text.isHidden();[Re.rightJustifiedTextSymbolIndex,Re.centerJustifiedTextSymbolIndex,Re.leftJustifiedTextSymbolIndex].forEach(pn=>{pn>=0&&(i.text.placedSymbolArray.get(pn).hidden=mt||ut?1:0)}),Re.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Re.verticalPlacedTextSymbolIndex).hidden=mt||xt?1:0);const Yt=this.variableOffsets[Re.crossTileID];Yt&&this.markUsedJustification(i,Yt.anchor,Re,rt);const Ft=this.placedOrientations[Re.crossTileID];Ft&&(this.markUsedJustification(i,"left",Re,Ft),this.markUsedOrientation(i,Ft,Re))}if(ct){const St=Vt(Ke.icon),mt=!(ce&&Re.verticalPlacedIconSymbolIndex&&ut);Re.placedIconSymbolIndex>=0&&(Me(i.icon,Re.numIconVertices,mt?St:It),i.icon.placedSymbolArray.get(Re.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Re.verticalPlacedIconSymbolIndex>=0&&(Me(i.icon,Re.numVerticalIconVertices,mt?It:St),i.icon.placedSymbolArray.get(Re.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const St=i.collisionArrays[Ce];if(St){let mt=new l.pointGeometry(0,0);if(St.textBox||St.verticalTextBox){let Ft=!0;if(D){const pn=this.variableOffsets[Je];pn?(mt=J(pn.anchor,pn.width,pn.height,pn.textOffset,pn.textBoxScale),q&&mt._rotate(oe?this.transform.angle:-this.transform.angle)):Ft=!1}St.textBox&&ke(i.textCollisionBox.collisionVertexArray,Ke.text.placed,!Ft||ut,mt.x,mt.y),St.verticalTextBox&&ke(i.textCollisionBox.collisionVertexArray,Ke.text.placed,!Ft||xt,mt.x,mt.y)}const Yt=Boolean(!xt&&St.verticalIconBox);St.iconBox&&ke(i.iconCollisionBox.collisionVertexArray,Ke.icon.placed,Yt,ce?mt.x:0,ce?mt.y:0),St.verticalIconBox&&ke(i.iconCollisionBox.collisionVertexArray,Ke.icon.placed,!Yt,ce?mt.x:0,ce?mt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Ce=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Ce.invProjMatrix,i.placementViewportMatrix=Ce.viewportMatrix,i.collisionCircleArray=Ce.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>i}setStale(){this.stale=!0}}function ke(m,i,c,d,y){m.emplaceBack(i?1:0,c?1:0,d||0,y||0),m.emplaceBack(i?1:0,c?1:0,d||0,y||0),m.emplaceBack(i?1:0,c?1:0,d||0,y||0),m.emplaceBack(i?1:0,c?1:0,d||0,y||0)}const Ge=Math.pow(2,25),De=Math.pow(2,24),Ue=Math.pow(2,17),He=Math.pow(2,16),at=Math.pow(2,9),pt=Math.pow(2,8),it=Math.pow(2,1);function Vt(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const i=m.placed?1:0,c=Math.floor(127*m.opacity);return c*Ge+i*De+c*Ue+i*He+c*at+i*pt+c*it+i}const It=0;class Ut{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,d,y,b){const P=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(P,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((L,D)=>L.sortKey-D.sortKey));this._currentPartIndex<P.length;)if(c.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,b())return!0;return!1}}class rn{constructor(i,c,d,y,b,P,L){this.placement=new Ae(i,b,P,L),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,c,d){const y=l.exported.now(),b=()=>{const P=l.exported.now()-y;return!this._forceFullPlacement&&P>2};for(;this._currentPlacementIndex>=0;){const P=c[i[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=L)&&(!P.maxzoom||P.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(P)),this._inProgressLayer.continuePlacement(d[P.source],this.placement,this._showCollisionBoxes,P,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const $t=512/l.EXTENT/2;class xn{constructor(i,c,d){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(let y=0;y<c.length;y++){const b=c.get(y),P=b.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,i)})}}getScaledCoordinates(i,c){const d=$t/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*l.EXTENT+i.anchorX)*d),y:Math.floor((c.canonical.y*l.EXTENT+i.anchorY)*d)}}findMatches(i,c,d){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<i.length;b++){const P=i.get(b);if(P.crossTileID)continue;const L=this.indexedSymbolInstances[P.key];if(!L)continue;const D=this.getScaledCoordinates(P,c);for(const q of L)if(Math.abs(q.coord.x-D.x)<=y&&Math.abs(q.coord.y-D.y)<=y&&!d[q.crossTileID]){d[q.crossTileID]=!0,P.crossTileID=q.crossTileID;break}}}}class Cn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _n{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const d in this.indexes){const y=this.indexes[d],b={};for(const P in y){const L=y[P];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),b[L.tileID.key]=L}this.indexes[d]=b}this.lng=i}addBucket(i,c,d){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const P=this.indexes[b];if(Number(b)>i.overscaledZ)for(const L in P){const D=P[L];D.tileID.isChildOf(i)&&D.findMatches(c.symbolInstances,i,y)}else{const L=P[i.scaledTo(Number(b)).key];L&&L.findMatches(c.symbolInstances,i,y)}}for(let b=0;b<c.symbolInstances.length;b++){const P=c.symbolInstances.get(b);P.crossTileID||(P.crossTileID=d.generate(),y[P.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new xn(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const d in c.indexedSymbolInstances)for(const y of c.indexedSymbolInstances[d])delete this.usedCrossTileIDs[i][y.crossTileID]}removeStaleBuckets(i){let c=!1;for(const d in this.indexes){const y=this.indexes[d];for(const b in y)i[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,y[b]),delete y[b],c=!0)}return c}}class bn{constructor(){this.layerIndexes={},this.crossTileIDs=new Cn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,d){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new _n);let b=!1;const P={};y.handleWrapJump(d);for(const L of c){const D=L.getBucket(i);D&&i.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(L.tileID,D,this.crossTileIDs)&&(b=!0),P[D.bucketInstanceId]=!0)}return y.removeStaleBuckets(P)&&(b=!0),b}pruneUnusedLayers(i){const c={};i.forEach(d=>{c[d]=!0});for(const d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}const nr=(m,i)=>l.emitValidationErrors(m,i&&i.filter(c=>c.identifier!=="source.canvas")),dr=l.pick(ze,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Jn=l.pick(ze,["setCenter","setZoom","setBearing","setPitch"]),Mo=function(){const m={},i=l.spec.$version;for(const c in l.spec.$root){const d=l.spec.$root[c];if(d.required){let y=null;y=c==="version"?i:d.type==="array"?[]:{},y!=null&&(m[c]=y)}}return m}();class ro extends l.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new ee(R(),this),this.imageManager=new j,this.imageManager.setEventedParent(this),this.glyphManager=new K(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new be(256,512),this.crossTileSymbolIndex=new bn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const d=this;this._rtlTextPluginCallback=ro.registerForPluginStateChange(y=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(b,P)=>{if(l.triggerPluginCompletionEvent(b),P&&P.every(L=>L))for(const L in d.sourceCaches)d.sourceCaches[L].reload()})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const b=this.sourceCaches[y.sourceId];if(!b)return;const P=b.getSource();if(P&&P.vectorLayerIds)for(const L in this._layers){const D=this._layers[L];D.source===P.id&&this._validateLayer(D)}})}loadURL(i,c={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const d=typeof c.validate!="boolean"||c.validate,y=this.map._requestManager.transformRequest(i,l.ResourceType.Style);this._request=l.getJSON(y,(b,P)=>{this._request=null,b?this.fire(new l.ErrorEvent(b)):P&&this._load(P,d)})}loadJSON(i,c={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(i,c.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Mo,!1)}_load(i,c){if(c&&nr(this,l.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const y in i.sources)this.addSource(y,i.sources[y],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const d=pe(this.stylesheet.layers);this._order=d.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of d)y=l.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ve(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(c,d,y,b){let P,L,D;const q=y>1?"@2x":"";let oe=l.getJSON(d.transformRequest(d.normalizeSpriteURL(c,q,".json"),l.ResourceType.SpriteJSON),(Me,Ce)=>{oe=null,D||(D=Me,P=Ce,Se())}),ce=l.getImage(d.transformRequest(d.normalizeSpriteURL(c,q,".png"),l.ResourceType.SpriteImage),(Me,Ce)=>{ce=null,D||(D=Me,L=Ce,Se())});function Se(){if(D)b(D);else if(P&&L){const Me=l.exported.getImageData(L),Ce={};for(const Re in P){const{width:Ve,height:We,x:Je,y:Ke,sdf:ct,pixelRatio:rt,stretchX:ut,stretchY:xt,content:St}=P[Re],mt=new l.RGBAImage({width:Ve,height:We});l.RGBAImage.copy(Me,mt,{x:Je,y:Ke},{x:0,y:0},{width:Ve,height:We}),Ce[Re]={data:mt,pixelRatio:rt,sdf:ct,stretchX:ut,stretchY:xt,content:St}}b(null,Ce)}}return{cancel(){oe&&(oe.cancel(),oe=null),ce&&(ce.cancel(),ce=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(c,d)=>{if(this._spriteRequest=null,c)this.fire(new l.ErrorEvent(c));else if(d)for(const y in d)this.imageManager.addImage(y,d[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const d=i.sourceLayer;if(!d)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(d)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${d}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const c=[];for(const d of i){const y=this._layers[d];y.type!=="custom"&&c.push(y.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const P in this._updatedSources){const L=this._updatedSources[P];L==="reload"?this._reloadSource(P):L==="clear"&&this._clearSource(P)}this._updateTilesForChangedImages();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const d={};for(const y in this.sourceCaches){const b=this.sourceCaches[y];d[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const y in d){const b=this.sourceCaches[y];d[y]!==b.used&&b.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),nr(this,l.validateStyle(i)))return!1;(i=l.clone$1(i)).layers=pe(i.layers);const c=function(y,b){if(!y)return[{command:ze.setStyle,args:[b]}];let P=[];try{if(!E(y.version,b.version))return[{command:ze.setStyle,args:[b]}];E(y.center,b.center)||P.push({command:ze.setCenter,args:[b.center]}),E(y.zoom,b.zoom)||P.push({command:ze.setZoom,args:[b.zoom]}),E(y.bearing,b.bearing)||P.push({command:ze.setBearing,args:[b.bearing]}),E(y.pitch,b.pitch)||P.push({command:ze.setPitch,args:[b.pitch]}),E(y.sprite,b.sprite)||P.push({command:ze.setSprite,args:[b.sprite]}),E(y.glyphs,b.glyphs)||P.push({command:ze.setGlyphs,args:[b.glyphs]}),E(y.transition,b.transition)||P.push({command:ze.setTransition,args:[b.transition]}),E(y.light,b.light)||P.push({command:ze.setLight,args:[b.light]});const L={},D=[];(function(oe,ce,Se,Me){let Ce;for(Ce in ce=ce||{},oe=oe||{})Object.prototype.hasOwnProperty.call(oe,Ce)&&(Object.prototype.hasOwnProperty.call(ce,Ce)||ot(Ce,Se,Me));for(Ce in ce)Object.prototype.hasOwnProperty.call(ce,Ce)&&(Object.prototype.hasOwnProperty.call(oe,Ce)?E(oe[Ce],ce[Ce])||(oe[Ce].type==="geojson"&&ce[Ce].type==="geojson"&&A(oe,ce,Ce)?Se.push({command:ze.setGeoJSONSourceData,args:[Ce,ce[Ce].data]}):se(Ce,ce,Se,Me)):Ye(Ce,ce,Se))})(y.sources,b.sources,D,L);const q=[];y.layers&&y.layers.forEach(oe=>{L[oe.source]?P.push({command:ze.removeLayer,args:[oe.id]}):q.push(oe)}),P=P.concat(D),function(oe,ce,Se){ce=ce||[];const Me=(oe=oe||[]).map(we),Ce=ce.map(we),Re=oe.reduce(je,{}),Ve=ce.reduce(je,{}),We=Me.slice(),Je=Object.create(null);let Ke,ct,rt,ut,xt,St,mt;for(Ke=0,ct=0;Ke<Me.length;Ke++)rt=Me[Ke],Object.prototype.hasOwnProperty.call(Ve,rt)?ct++:(Se.push({command:ze.removeLayer,args:[rt]}),We.splice(We.indexOf(rt,ct),1));for(Ke=0,ct=0;Ke<Ce.length;Ke++)rt=Ce[Ce.length-1-Ke],We[We.length-1-Ke]!==rt&&(Object.prototype.hasOwnProperty.call(Re,rt)?(Se.push({command:ze.removeLayer,args:[rt]}),We.splice(We.lastIndexOf(rt,We.length-ct),1)):ct++,St=We[We.length-Ke],Se.push({command:ze.addLayer,args:[Ve[rt],St]}),We.splice(We.length-Ke,0,rt),Je[rt]=!0);for(Ke=0;Ke<Ce.length;Ke++)if(rt=Ce[Ke],ut=Re[rt],xt=Ve[rt],!Je[rt]&&!E(ut,xt))if(E(ut.source,xt.source)&&E(ut["source-layer"],xt["source-layer"])&&E(ut.type,xt.type)){for(mt in z(ut.layout,xt.layout,Se,rt,null,ze.setLayoutProperty),z(ut.paint,xt.paint,Se,rt,null,ze.setPaintProperty),E(ut.filter,xt.filter)||Se.push({command:ze.setFilter,args:[rt,xt.filter]}),E(ut.minzoom,xt.minzoom)&&E(ut.maxzoom,xt.maxzoom)||Se.push({command:ze.setLayerZoomRange,args:[rt,xt.minzoom,xt.maxzoom]}),ut)Object.prototype.hasOwnProperty.call(ut,mt)&&mt!=="layout"&&mt!=="paint"&&mt!=="filter"&&mt!=="metadata"&&mt!=="minzoom"&&mt!=="maxzoom"&&(mt.indexOf("paint.")===0?z(ut[mt],xt[mt],Se,rt,mt.slice(6),ze.setPaintProperty):E(ut[mt],xt[mt])||Se.push({command:ze.setLayerProperty,args:[rt,mt,xt[mt]]}));for(mt in xt)Object.prototype.hasOwnProperty.call(xt,mt)&&!Object.prototype.hasOwnProperty.call(ut,mt)&&mt!=="layout"&&mt!=="paint"&&mt!=="filter"&&mt!=="metadata"&&mt!=="minzoom"&&mt!=="maxzoom"&&(mt.indexOf("paint.")===0?z(ut[mt],xt[mt],Se,rt,mt.slice(6),ze.setPaintProperty):E(ut[mt],xt[mt])||Se.push({command:ze.setLayerProperty,args:[rt,mt,xt[mt]]}))}else Se.push({command:ze.removeLayer,args:[rt]}),St=We[We.lastIndexOf(rt)+1],Se.push({command:ze.addLayer,args:[xt,St]})}(q,b.layers,P)}catch(L){console.warn("Unable to compute style diff:",L),P=[{command:ze.setStyle,args:[b]}]}return P}(this.serialize(),i).filter(y=>!(y.command in Jn));if(c.length===0)return!1;const d=c.filter(y=>!(y.command in dr));if(d.length>0)throw new Error(`Unimplemented: ${d.map(y=>y.command).join(", ")}.`);return c.forEach(y=>{y.command!=="setTransition"&&this[y.command].apply(this,y.args)}),this.stylesheet=i,!0}addImage(i,c){if(this.getImage(i))return this.fire(new l.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,d={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(l.validateStyle.source,`sources.${i}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.sourceCaches[i]=new Bt(i,c,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:y.serialize(),sourceId:i})),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===i)return this.fire(new l.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${d}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.clearTiles(),c.onRemove&&c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){this._checkLoaded(),this.sourceCaches[i].getSource().setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,d={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new l.ErrorEvent(new Error(`Layer "${y}" already exists on this map.`)));let b;if(i.type==="custom"){if(nr(this,l.validateCustomStyleLayer(i)))return;b=l.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(y,i.source),i=l.clone$1(i),i=l.extend(i,{source:y})),this._validate(l.validateStyle.layer,`layers.${y}`,i,{arrayIndex:-1},d))return;b=l.createStyleLayer(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[b.id]=b.serialize()}const P=c?this._order.indexOf(c):this._order.length;if(c&&P===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(P,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const L=this._removedLayers[y];delete this._removedLayers[y],L.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const d=this._order.indexOf(i);this._order.splice(d,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const d=this._order.indexOf(i);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,d){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===c&&y.maxzoom===d||(c!=null&&(y.minzoom=c),d!=null&&(y.maxzoom=d),this._updateLayer(y)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,d={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!E(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(l.validateStyle.filter,`layers.${y.id}.filter`,c,null,d)||(y.filter=l.clone$1(c),this._updateLayer(y)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,c,d,y={}){this._checkLoaded();const b=this.getLayer(i);b?E(b.getLayoutProperty(c),d)||(b.setLayoutProperty(c,d,y),this._updateLayer(b)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const d=this.getLayer(i);if(d)return d.getLayoutProperty(c);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,d,y={}){this._checkLoaded();const b=this.getLayer(i);b?E(b.getPaintProperty(c),d)||(b.setPaintProperty(c,d,y)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const d=i.source,y=i.sourceLayer,b=this.sourceCaches[d];if(b===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const P=b.getSource().type;P==="geojson"&&y?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||y?(i.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,i.id,c)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const d=i.source,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const b=y.getSource().type,P=b==="vector"?i.sourceLayer:void 0;b!=="vector"||P?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(P,i.id,c):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,d=i.sourceLayer,y=this.sourceCaches[c];if(y!==void 0)return y.getSource().type!=="vector"||d?(i.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),y.getFeatureState(d,i.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=P=>this._layers[P].type==="fill-extrusion",d={},y=[];for(let P=this._order.length-1;P>=0;P--){const L=this._order[P];if(c(L)){d[L]=P;for(const D of i){const q=D[L];if(q)for(const oe of q)y.push(oe)}}}y.sort((P,L)=>L.intersectionZ-P.intersectionZ);const b=[];for(let P=this._order.length-1;P>=0;P--){const L=this._order[P];if(c(L))for(let D=y.length-1;D>=0;D--){const q=y[D].feature;if(d[q.layer.id]<P)break;b.push(q),y.pop()}else for(const D of i){const q=D[L];if(q)for(const oe of q)b.push(oe.feature)}}return b}queryRenderedFeatures(i,c,d){c&&c.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of c.layers){const L=this._layers[P];if(!L)return this.fire(new l.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];y[L.source]=!0}}const b=[];c.availableImages=this._availableImages;for(const P in this.sourceCaches)c.layers&&!y[P]||b.push(yt(this.sourceCaches[P],this._layers,this._serializedLayers,i,c,d));return this.placement&&b.push(function(P,L,D,q,oe,ce,Se){const Me={},Ce=ce.queryRenderedSymbols(q),Re=[];for(const Ve of Object.keys(Ce).map(Number))Re.push(Se[Ve]);Re.sort(Pt);for(const Ve of Re){const We=Ve.featureIndex.lookupSymbolFeatures(Ce[Ve.bucketInstanceId],L,Ve.bucketIndex,Ve.sourceLayerIndex,oe.filter,oe.layers,oe.availableImages,P);for(const Je in We){const Ke=Me[Je]=Me[Je]||[],ct=We[Je];ct.sort((rt,ut)=>{const xt=Ve.featureSortOrder;if(xt){const St=xt.indexOf(rt.featureIndex);return xt.indexOf(ut.featureIndex)-St}return ut.featureIndex-rt.featureIndex});for(const rt of ct)Ke.push(rt)}}for(const Ve in Me)Me[Ve].forEach(We=>{const Je=We.feature,Ke=D[P[Ve].source].getFeatureState(Je.layer["source-layer"],Je.id);Je.source=Je.layer.source,Je.layer["source-layer"]&&(Je.sourceLayer=Je.layer["source-layer"]),Je.state=Ke});return Me}(this._layers,this._serializedLayers,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,c){c&&c.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const d=this.sourceCaches[i];return d?function(y,b){const P=y.getRenderableIds().map(q=>y.getTileByID(q)),L=[],D={};for(let q=0;q<P.length;q++){const oe=P[q],ce=oe.tileID.canonical.key;D[ce]||(D[ce]=!0,oe.querySourceFeatures(L,b))}return L}(d,c):[]}addSourceType(i,c,d){return ro.getSourceType(i)?d(new Error(`A source type called "${i}" already exists.`)):(ro.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const d=this.light.getLight();let y=!1;for(const P in i)if(!E(i[P],d[P])){y=!0;break}if(!y)return;const b={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(b)}_validate(i,c,d,y,b={}){return(!b||b.validate!==!1)&&nr(this,i.call(l.validateStyle,l.extend({key:c,style:this.serialize(),value:d,styleSpec:l.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,d,y,b=!1){let P=!1,L=!1;const D={};for(const q of this._order){const oe=this._layers[q];if(oe.type!=="symbol")continue;if(!D[oe.source]){const Se=this.sourceCaches[oe.source];D[oe.source]=Se.getRenderableIds(!0).map(Me=>Se.getTileByID(Me)).sort((Me,Ce)=>Ce.tileID.overscaledZ-Me.tileID.overscaledZ||(Me.tileID.isLessThan(Ce.tileID)?-1:1))}const ce=this.crossTileSymbolIndex.addLayer(oe,D[oe.source],i.center.lng);P=P||ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),i.zoom))&&(this.pauseablePlacement=new rn(i,this._order,b,c,d,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),L=!0),P&&this.pauseablePlacement.placement.setStale()),L||P)for(const q of this._order){const oe=this._layers[q];oe.type==="symbol"&&this.placement.updateLayerOpacities(oe,D[oe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,d){this.imageManager.getImages(c.icons,d),this._updateTilesForChangedImages();const y=this.sourceCaches[c.source];y&&y.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,d){this.glyphManager.getGlyphs(c.stacks,d)}getResource(i,c,d){return l.makeRequest(c,d)}}ro.getSourceType=function(m){return qe[m]},ro.setSourceType=function(m,i){qe[m]=i},ro.registerForPluginStateChange=l.registerForPluginStateChange;var Bl=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ns={prelude:Qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:Qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Qn(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:Qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:Qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:Qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function Qn(m,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=i.match(/attribute ([\w]+) ([\w]+)/g),y=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=b?b.concat(y):y,L={};return{fragmentSource:m=m.replace(c,(D,q,oe,ce,Se)=>(L[Se]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
varying ${oe} ${ce} ${Se};
#else
uniform ${oe} ${ce} u_${Se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Se}
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`)),vertexSource:i=i.replace(c,(D,q,oe,ce,Se)=>{const Me=ce==="float"?"vec2":"vec4",Ce=Se.match(/color/)?"color":Me;return L[Se]?q==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
attribute ${oe} ${Me} a_${Se};
varying ${oe} ${ce} ${Se};
#else
uniform ${oe} ${ce} u_${Se};
#endif
`:Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = a_${Se};
#else
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = unpack_mix_${Ce}(a_${Se}, u_${Se}_t);
#else
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`:q==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
attribute ${oe} ${Me} a_${Se};
#else
uniform ${oe} ${ce} u_${Se};
#endif
`:Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${oe} ${ce} ${Se} = a_${Se};
#else
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${oe} ${ce} ${Se} = unpack_mix_${Ce}(a_${Se}, u_${Se}_t);
#else
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`}),staticAttributes:d,staticUniforms:P}}class io{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,d,y,b,P,L,D){this.context=i;let q=this.boundPaintVertexBuffers.length!==y.length;for(let oe=0;!q&&oe<y.length;oe++)this.boundPaintVertexBuffers[oe]!==y[oe]&&(q=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===c&&this.boundLayoutVertexBuffer===d&&!q&&this.boundIndexBuffer===b&&this.boundVertexOffset===P&&this.boundDynamicVertexBuffer===L&&this.boundDynamicVertexBuffer2===D?(i.bindVertexArrayOES.set(this.vao),L&&L.bind(),b&&b.dynamicDraw&&b.bind(),D&&D.bind()):this.freshBind(c,d,y,b,P,L,D)}freshBind(i,c,d,y,b,P,L){let D;const q=i.numAttributes,oe=this.context,ce=oe.gl;if(oe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=oe.extVertexArrayObject.createVertexArrayOES(),oe.bindVertexArrayOES.set(this.vao),D=0,this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=L;else{D=oe.currentNumAttributes||0;for(let Se=q;Se<D;Se++)ce.disableVertexAttribArray(Se)}c.enableAttributes(ce,i);for(const Se of d)Se.enableAttributes(ce,i);P&&P.enableAttributes(ce,i),L&&L.enableAttributes(ce,i),c.bind(),c.setVertexAttribPointers(ce,i,b);for(const Se of d)Se.bind(),Se.setVertexAttribPointers(ce,i,b);P&&(P.bind(),P.setVertexAttribPointers(ce,i,b)),y&&y.bind(),L&&(L.bind(),L.setVertexAttribPointers(ce,i,b)),oe.currentNumAttributes=q}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function $u(m){const i=[];for(let c=0;c<m.length;c++){if(m[c]===null)continue;const d=m[c].split(" ");i.push(d.pop())}return i}class Vu{constructor(i,c,d,y,b,P){const L=i.gl;this.program=L.createProgram();const D=$u(d.staticAttributes),q=y?y.getBinderAttributes():[],oe=D.concat(q),ce=d.staticUniforms?$u(d.staticUniforms):[],Se=y?y.getBinderUniforms():[],Me=ce.concat(Se),Ce=[];for(const rt of Me)Ce.indexOf(rt)<0&&Ce.push(rt);const Re=y?y.defines():[];P&&Re.push("#define OVERDRAW_INSPECTOR;");const Ve=Re.concat(ns.prelude.fragmentSource,d.fragmentSource).join(`
`),We=Re.concat(ns.prelude.vertexSource,d.vertexSource).join(`
`),Je=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Je,Ve),L.compileShader(Je),L.attachShader(this.program,Je);const Ke=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Ke,We),L.compileShader(Ke),L.attachShader(this.program,Ke),this.attributes={};const ct={};this.numAttributes=oe.length;for(let rt=0;rt<this.numAttributes;rt++)oe[rt]&&(L.bindAttribLocation(this.program,rt,oe[rt]),this.attributes[oe[rt]]=rt);L.linkProgram(this.program),L.deleteShader(Ke),L.deleteShader(Je);for(let rt=0;rt<Ce.length;rt++){const ut=Ce[rt];if(ut&&!ct[ut]){const xt=L.getUniformLocation(this.program,ut);xt&&(ct[ut]=xt)}}this.fixedUniforms=b(i,ct),this.binderUniforms=y?y.getUniforms(i,ct):[]}draw(i,c,d,y,b,P,L,D,q,oe,ce,Se,Me,Ce,Re,Ve){const We=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(d),i.setStencilMode(y),i.setColorMode(b),i.setCullFace(P);for(const Ke in this.fixedUniforms)this.fixedUniforms[Ke].set(L[Ke]);Ce&&Ce.setUniforms(i,this.binderUniforms,Se,{zoom:Me});const Je={[We.LINES]:2,[We.TRIANGLES]:3,[We.LINE_STRIP]:1}[c];for(const Ke of ce.get()){const ct=Ke.vaos||(Ke.vaos={});(ct[D]||(ct[D]=new io)).bind(i,this,q,Ce?Ce.getPaintVertexBuffers():[],oe,Ke.vertexOffset,Re,Ve),We.drawElements(c,Ke.primitiveLength*Je,We.UNSIGNED_SHORT,Ke.primitiveOffset*Je*2)}}}function Gu(m,i,c){const d=1/zn(c,1,i.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,i.transform.tileZoom)/y,P=b*(c.tileID.canonical.x+c.tileID.wrap*y),L=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[P>>16,L>>16],u_pixel_coord_lower:[65535&P,65535&L]}}const Us=(m,i,c,d)=>{const y=i.style.light,b=y.properties.get("position"),P=ue(b.x,b.y,b.z),L=function(){var q=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(q[1]=0,q[2]=0,q[3]=0,q[5]=0,q[6]=0,q[7]=0),q[0]=1,q[4]=1,q[8]=1,q}();y.properties.get("anchor")==="viewport"&&function(q,oe){var ce=Math.sin(oe),Se=Math.cos(oe);q[0]=Se,q[1]=ce,q[2]=0,q[3]=-ce,q[4]=Se,q[5]=0,q[6]=0,q[7]=0,q[8]=1}(L,-i.transform.angle),function(q,oe,ce){var Se=oe[0],Me=oe[1],Ce=oe[2];q[0]=Se*ce[0]+Me*ce[3]+Ce*ce[6],q[1]=Se*ce[1]+Me*ce[4]+Ce*ce[7],q[2]=Se*ce[2]+Me*ce[5]+Ce*ce[8]}(P,P,L);const D=y.properties.get("color");return{u_matrix:m,u_lightpos:P,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[D.r,D.g,D.b],u_vertical_gradient:+c,u_opacity:d}},Hu=(m,i,c,d,y,b,P)=>l.extend(Us(m,i,c,d),Gu(b,i,P),{u_height_factor:-Math.pow(2,y.overscaledZ)/P.tileSize/8}),ka=m=>({u_matrix:m}),jl=(m,i,c,d)=>l.extend(ka(m),Gu(c,i,d)),Wu=(m,i)=>({u_matrix:m,u_world:i}),Hr=(m,i,c,d,y)=>l.extend(jl(m,i,c,d),{u_world:y}),$s=(m,i,c,d)=>{const y=m.transform;let b,P;if(d.paint.get("circle-pitch-alignment")==="map"){const L=zn(c,1,y.zoom);b=!0,P=[L,L]}else b=!1,P=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(i.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:P}},rs=(m,i,c)=>{const d=zn(c,1,i.zoom),y=Math.pow(2,i.zoom-c.tileID.overscaledZ),b=c.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[i.pixelsToGLUnits[0]/(d*y),i.pixelsToGLUnits[1]/(d*y)],u_overscale_factor:b}},is=(m,i,c=1)=>({u_matrix:m,u_color:i,u_overlay:0,u_overlay_scale:c}),os=m=>({u_matrix:m}),Vs=(m,i,c,d)=>({u_matrix:m,u_extrude_scale:zn(i,1,c),u_intensity:d});function Gs(m,i){const c=Math.pow(2,i.canonical.z),d=i.canonical.y;return[new l.MercatorCoordinate(0,d/c).toLngLat().lat,new l.MercatorCoordinate(0,(d+1)/c).toLngLat().lat]}const zo=(m,i,c)=>{const d=m.transform;return{u_matrix:Dl(m,i,c),u_ratio:1/zn(i,1,d.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Ma=(m,i,c,d)=>l.extend(zo(m,i,c),{u_image:0,u_image_height:d}),or=(m,i,c,d)=>{const y=m.transform,b=Lo(i,y);return{u_matrix:Dl(m,i,c),u_texsize:i.imageAtlasTexture.size,u_ratio:1/zn(i,1,y.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[b,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Hs=(m,i,c,d,y)=>{const b=m.lineAtlas,P=Lo(i,m.transform),L=c.layout.get("line-cap")==="round",D=b.getDash(d.from,L),q=b.getDash(d.to,L),oe=D.width*y.fromScale,ce=q.width*y.toScale;return l.extend(zo(m,i,c),{u_patternscale_a:[P/oe,-D.height/2],u_patternscale_b:[P/ce,-q.height/2],u_sdfgamma:b.width/(256*Math.min(oe,ce)*m.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:q.y,u_mix:y.t})};function Lo(m,i){return 1/zn(m,1,i.tileZoom)}function Dl(m,i,c){return m.translatePosMatrix(i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Zu=(m,i,c,d,y)=>{return{u_matrix:m,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(P=y.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(b=y.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Nl(y.paint.get("raster-hue-rotate"))};var b,P};function Nl(m){m*=Math.PI/180;const i=Math.sin(m),c=Math.cos(m);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Ul=(m,i,c,d,y,b,P,L,D,q)=>{const oe=y.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:oe.cameraToCenterDistance,u_pitch:oe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:oe.width/oe.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:P,u_coord_matrix:L,u_is_text:+D,u_pitch_with_map:+d,u_texsize:q,u_texture:0}},$l=(m,i,c,d,y,b,P,L,D,q,oe)=>{const ce=y.transform;return l.extend(Ul(m,i,c,d,y,b,P,L,D,q),{u_gamma_scale:d?Math.cos(ce._pitch)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+oe})},xh=(m,i,c,d,y,b,P,L,D,q)=>l.extend($l(m,i,c,d,y,b,P,L,!0,D,!0),{u_texsize_icon:q,u_texture_icon:1}),Vl=(m,i,c)=>({u_matrix:m,u_opacity:i,u_color:c}),Gl=(m,i,c,d,y,b)=>l.extend(function(P,L,D,q){const oe=D.imageManager.getPattern(P.from.toString()),ce=D.imageManager.getPattern(P.to.toString()),{width:Se,height:Me}=D.imageManager.getPixelSize(),Ce=Math.pow(2,q.tileID.overscaledZ),Re=q.tileSize*Math.pow(2,D.transform.tileZoom)/Ce,Ve=Re*(q.tileID.canonical.x+q.tileID.wrap*Ce),We=Re*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:oe.tl,u_pattern_br_a:oe.br,u_pattern_tl_b:ce.tl,u_pattern_br_b:ce.br,u_texsize:[Se,Me],u_mix:L.t,u_pattern_size_a:oe.displaySize,u_pattern_size_b:ce.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/zn(q,1,D.transform.tileZoom),u_pixel_coord_upper:[Ve>>16,We>>16],u_pixel_coord_lower:[65535&Ve,65535&We]}}(d,b,c,y),{u_matrix:m,u_opacity:i}),as={fillExtrusion:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_lightpos:new l.Uniform3f(m,i.u_lightpos),u_lightintensity:new l.Uniform1f(m,i.u_lightintensity),u_lightcolor:new l.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new l.Uniform1f(m,i.u_vertical_gradient),u_opacity:new l.Uniform1f(m,i.u_opacity)}),fillExtrusionPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_lightpos:new l.Uniform3f(m,i.u_lightpos),u_lightintensity:new l.Uniform1f(m,i.u_lightintensity),u_lightcolor:new l.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new l.Uniform1f(m,i.u_vertical_gradient),u_height_factor:new l.Uniform1f(m,i.u_height_factor),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade),u_opacity:new l.Uniform1f(m,i.u_opacity)}),fill:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),fillPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),fillOutline:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world)}),fillOutlinePattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),circle:(m,i)=>({u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(m,i.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(m,i.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),collisionBox:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(m,i.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(m,i.u_extrude_scale),u_overscale_factor:new l.Uniform1f(m,i.u_overscale_factor)}),collisionCircle:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_inv_matrix:new l.UniformMatrix4f(m,i.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(m,i.u_viewport_size)}),debug:(m,i)=>({u_color:new l.UniformColor(m,i.u_color),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_overlay:new l.Uniform1i(m,i.u_overlay),u_overlay_scale:new l.Uniform1f(m,i.u_overlay_scale)}),clippingMask:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),heatmap:(m,i)=>({u_extrude_scale:new l.Uniform1f(m,i.u_extrude_scale),u_intensity:new l.Uniform1f(m,i.u_intensity),u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),heatmapTexture:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world),u_image:new l.Uniform1i(m,i.u_image),u_color_ramp:new l.Uniform1i(m,i.u_color_ramp),u_opacity:new l.Uniform1f(m,i.u_opacity)}),hillshade:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_latrange:new l.Uniform2f(m,i.u_latrange),u_light:new l.Uniform2f(m,i.u_light),u_shadow:new l.UniformColor(m,i.u_shadow),u_highlight:new l.UniformColor(m,i.u_highlight),u_accent:new l.UniformColor(m,i.u_accent)}),hillshadePrepare:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_dimension:new l.Uniform2f(m,i.u_dimension),u_zoom:new l.Uniform1f(m,i.u_zoom),u_unpack:new l.Uniform4f(m,i.u_unpack)}),line:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels)}),lineGradient:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_image:new l.Uniform1i(m,i.u_image),u_image_height:new l.Uniform1f(m,i.u_image_height)}),linePattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_texsize:new l.Uniform2f(m,i.u_texsize),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_image:new l.Uniform1i(m,i.u_image),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),lineSDF:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(m,i.u_patternscale_a),u_patternscale_b:new l.Uniform2f(m,i.u_patternscale_b),u_sdfgamma:new l.Uniform1f(m,i.u_sdfgamma),u_image:new l.Uniform1i(m,i.u_image),u_tex_y_a:new l.Uniform1f(m,i.u_tex_y_a),u_tex_y_b:new l.Uniform1f(m,i.u_tex_y_b),u_mix:new l.Uniform1f(m,i.u_mix)}),raster:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_tl_parent:new l.Uniform2f(m,i.u_tl_parent),u_scale_parent:new l.Uniform1f(m,i.u_scale_parent),u_buffer_scale:new l.Uniform1f(m,i.u_buffer_scale),u_fade_t:new l.Uniform1f(m,i.u_fade_t),u_opacity:new l.Uniform1f(m,i.u_opacity),u_image0:new l.Uniform1i(m,i.u_image0),u_image1:new l.Uniform1i(m,i.u_image1),u_brightness_low:new l.Uniform1f(m,i.u_brightness_low),u_brightness_high:new l.Uniform1f(m,i.u_brightness_high),u_saturation_factor:new l.Uniform1f(m,i.u_saturation_factor),u_contrast_factor:new l.Uniform1f(m,i.u_contrast_factor),u_spin_weights:new l.Uniform3f(m,i.u_spin_weights)}),symbolIcon:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texture:new l.Uniform1i(m,i.u_texture)}),symbolSDF:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texture:new l.Uniform1i(m,i.u_texture),u_gamma_scale:new l.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(m,i.u_is_halo)}),symbolTextAndIcon:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texsize_icon:new l.Uniform2f(m,i.u_texsize_icon),u_texture:new l.Uniform1i(m,i.u_texture),u_texture_icon:new l.Uniform1i(m,i.u_texture_icon),u_gamma_scale:new l.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(m,i.u_is_halo)}),background:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_opacity:new l.Uniform1f(m,i.u_opacity),u_color:new l.UniformColor(m,i.u_color)}),backgroundPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_opacity:new l.Uniform1f(m,i.u_opacity),u_image:new l.Uniform1i(m,i.u_image),u_pattern_tl_a:new l.Uniform2f(m,i.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(m,i.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(m,i.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(m,i.u_pattern_br_b),u_texsize:new l.Uniform2f(m,i.u_texsize),u_mix:new l.Uniform1f(m,i.u_mix),u_pattern_size_a:new l.Uniform2f(m,i.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(m,i.u_pattern_size_b),u_scale_a:new l.Uniform1f(m,i.u_scale_a),u_scale_b:new l.Uniform1f(m,i.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(m,i.u_tile_units_to_pixels)})};class Hl{constructor(i,c,d){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=Boolean(d),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ku{constructor(i,c,d,y){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let d=0;d<this.attributes.length;d++){const y=c.attributes[this.attributes[d].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,c,d){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],P=c.attributes[b.name];P!==void 0&&i.vertexAttribPointer(P,b.components,i[Xu[b.type]],!1,this.itemSize,b.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class za extends Bn{getDefault(){return l.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ss extends Bn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Wl extends Bn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class fi extends Bn{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Zl extends Bn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ls extends Bn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Ws extends Bn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Xl extends Bn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Kl extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class Zs extends Bn{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Xs extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Yl extends Bn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class La extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Yu extends Bn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class qu extends Bn{getDefault(){return l.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Oa extends Bn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class _h extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class bh extends Bn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class wh extends Bn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ju extends Bn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class ql extends Bn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Eh extends Bn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Jl extends Bn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Ql extends Bn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ra extends Bn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class eu extends Bn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Qu extends Bn{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class tu extends Bn{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class Qo extends Bn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ec extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class fo extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ea extends Bn{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class ta extends ea{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ks extends ea{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class kn{constructor(i,c,d,y){this.context=i,this.width=c,this.height=d;const b=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new ta(i,b),y&&(this.depthAttachment=new Ks(i,b))}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const d=this.depthAttachment.get();d&&i.deleteRenderbuffer(d)}i.deleteFramebuffer(this.framebuffer)}}class pr{constructor(i,c,d){this.blendFunction=i,this.blendColor=c,this.mask=d}}pr.Replace=[1,0],pr.disabled=new pr(pr.Replace,l.Color.transparent,[!1,!1,!1,!1]),pr.unblended=new pr(pr.Replace,l.Color.transparent,[!0,!0,!0,!0]),pr.alphaBlended=new pr([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Sh{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new za(this),this.clearDepth=new ss(this),this.clearStencil=new Wl(this),this.colorMask=new fi(this),this.depthMask=new Zl(this),this.stencilMask=new ls(this),this.stencilFunc=new Ws(this),this.stencilOp=new Xl(this),this.stencilTest=new Kl(this),this.depthRange=new Zs(this),this.depthTest=new Xs(this),this.depthFunc=new Yl(this),this.blend=new La(this),this.blendFunc=new Yu(this),this.blendColor=new qu(this),this.blendEquation=new Oa(this),this.cullFace=new _h(this),this.cullFaceSide=new bh(this),this.frontFace=new wh(this),this.program=new Ju(this),this.activeTexture=new ql(this),this.viewport=new Eh(this),this.bindFramebuffer=new Jl(this),this.bindRenderbuffer=new Ql(this),this.bindTexture=new Ra(this),this.bindVertexBuffer=new eu(this),this.bindElementBuffer=new Qu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tu(this),this.pixelStoreUnpack=new Qo(this),this.pixelStoreUnpackPremultiplyAlpha=new ec(this),this.pixelStoreUnpackFlipY=new fo(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new Hl(this,i,c)}createVertexBuffer(i,c,d){return new Ku(this,i,c,d)}createRenderbuffer(i,c,d){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,i,c,d),this.bindRenderbuffer.set(null),b}createFramebuffer(i,c,d){return new kn(this,i,c,d)}clear({color:i,depth:c}){const d=this.gl;let y=0;i&&(y|=d.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(y|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){E(i.blendFunction,pr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class jn{constructor(i,c,d){this.func=i,this.mask=c,this.range=d}}jn.ReadOnly=!1,jn.ReadWrite=!0,jn.disabled=new jn(519,jn.ReadOnly,[0,1]);const na=7680;class ar{constructor(i,c,d,y,b,P){this.test=i,this.ref=c,this.mask=d,this.fail=y,this.depthFail=b,this.pass=P}}ar.disabled=new ar({func:519,mask:0},0,0,na,na,na);class mr{constructor(i,c,d){this.enable=i,this.mode=c,this.frontFace=d}}let Oo;function tc(m,i,c,d,y,b,P){const L=m.context,D=L.gl,q=m.useProgram("collisionBox"),oe=[];let ce=0,Se=0;for(let Ke=0;Ke<d.length;Ke++){const ct=d[Ke],rt=i.getTile(ct),ut=rt.getBucket(c);if(!ut)continue;let xt=ct.posMatrix;y[0]===0&&y[1]===0||(xt=m.translatePosMatrix(ct.posMatrix,rt,y,b));const St=P?ut.textCollisionBox:ut.iconCollisionBox,mt=ut.collisionCircleArray;if(mt.length>0){const Yt=l.create(),Ft=xt;l.mul(Yt,ut.placementInvProjMatrix,m.transform.glCoordMatrix),l.mul(Yt,Yt,ut.placementViewportMatrix),oe.push({circleArray:mt,circleOffset:Se,transform:Ft,invTransform:Yt}),ce+=mt.length/4,Se=ce}St&&q.draw(L,D.LINES,jn.disabled,ar.disabled,m.colorModeForRenderPass(),mr.disabled,rs(xt,m.transform,rt),c.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,null,m.transform.zoom,null,null,St.collisionVertexBuffer)}if(!P||!oe.length)return;const Me=m.useProgram("collisionCircle"),Ce=new l.CollisionCircleLayoutArray;Ce.resize(4*ce),Ce._trim();let Re=0;for(const Ke of oe)for(let ct=0;ct<Ke.circleArray.length/4;ct++){const rt=4*ct,ut=Ke.circleArray[rt+0],xt=Ke.circleArray[rt+1],St=Ke.circleArray[rt+2],mt=Ke.circleArray[rt+3];Ce.emplace(Re++,ut,xt,St,mt,0),Ce.emplace(Re++,ut,xt,St,mt,1),Ce.emplace(Re++,ut,xt,St,mt,2),Ce.emplace(Re++,ut,xt,St,mt,3)}(!Oo||Oo.length<2*ce)&&(Oo=function(Ke){const ct=2*Ke,rt=new l.QuadTriangleArray;rt.resize(ct),rt._trim();for(let ut=0;ut<ct;ut++){const xt=6*ut;rt.uint16[xt+0]=4*ut+0,rt.uint16[xt+1]=4*ut+1,rt.uint16[xt+2]=4*ut+2,rt.uint16[xt+3]=4*ut+2,rt.uint16[xt+4]=4*ut+3,rt.uint16[xt+5]=4*ut+0}return rt}(ce));const Ve=L.createIndexBuffer(Oo,!0),We=L.createVertexBuffer(Ce,l.collisionCircleLayout.members,!0);for(const Ke of oe){const ct={u_matrix:Ke.transform,u_inv_matrix:Ke.invTransform,u_camera_to_center_distance:(Je=m.transform).cameraToCenterDistance,u_viewport_size:[Je.width,Je.height]};Me.draw(L,D.TRIANGLES,jn.disabled,ar.disabled,m.colorModeForRenderPass(),mr.disabled,ct,c.id,We,Ve,l.SegmentVector.simpleSegment(0,2*Ke.circleOffset,Ke.circleArray.length,Ke.circleArray.length/2),null,m.transform.zoom,null,null,null)}var Je;We.destroy(),Ve.destroy()}mr.disabled=new mr(!1,1029,2305),mr.backCCW=new mr(!0,1029,2305);const nu=l.identity(new Float32Array(16));function ra(m,i,c,d,y,b){const{horizontalAlign:P,verticalAlign:L}=l.getAnchorAlignment(m),D=-(P-.5)*i,q=-(L-.5)*c,oe=l.evaluateVariableOffset(m,d);return new l.pointGeometry((D/y+oe[0])*b,(q/y+oe[1])*b)}function us(m,i,c,d,y,b,P,L,D,q,oe){const ce=m.text.placedSymbolArray,Se=m.text.dynamicLayoutVertexArray,Me=m.icon.dynamicLayoutVertexArray,Ce={};Se.clear();for(let Re=0;Re<ce.length;Re++){const Ve=ce.get(Re),We=m.allowVerticalPlacement&&!Ve.placedOrientation,Je=Ve.hidden||!Ve.crossTileID||We?null:d[Ve.crossTileID];if(Je){const Ke=new l.pointGeometry(Ve.anchorX,Ve.anchorY),ct=ft(Ke,c?L:P),rt=Mt(b.cameraToCenterDistance,ct.signedDistanceFromCamera);let ut=y.evaluateSizeForFeature(m.textSizeData,q,Ve)*rt/l.ONE_EM;c&&(ut*=m.tilePixelRatio/D);const{width:xt,height:St,anchor:mt,textOffset:Yt,textBoxScale:Ft}=Je,pn=ra(mt,xt,St,Yt,Ft,ut),$n=c?ft(Ke.add(pn),P).point:ct.point.add(i?pn.rotate(-b.angle):pn),In=m.allowVerticalPlacement&&Ve.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Pn=0;Pn<Ve.numGlyphs;Pn++)l.addDynamicAttributes(Se,$n,In);oe&&Ve.associatedIconIndex>=0&&(Ce[Ve.associatedIconIndex]={shiftedAnchor:$n,angle:In})}else Wt(Ve.numGlyphs,Se)}if(oe){Me.clear();const Re=m.icon.placedSymbolArray;for(let Ve=0;Ve<Re.length;Ve++){const We=Re.get(Ve);if(We.hidden)Wt(We.numGlyphs,Me);else{const Je=Ce[Ve];if(Je)for(let Ke=0;Ke<We.numGlyphs;Ke++)l.addDynamicAttributes(Me,Je.shiftedAnchor,Je.angle);else Wt(We.numGlyphs,Me)}}m.icon.dynamicLayoutVertexBuffer.updateData(Me)}m.text.dynamicLayoutVertexBuffer.updateData(Se)}function Ys(m,i,c){return c.iconsInText&&i?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function qs(m,i,c,d,y,b,P,L,D,q,oe,ce){const Se=m.context,Me=Se.gl,Ce=m.transform,Re=L==="map",Ve=D==="map",We=Re&&c.layout.get("symbol-placement")!=="point",Je=Re&&!Ve&&!We,Ke=!c.layout.get("symbol-sort-key").isConstant();let ct=!1;const rt=m.depthModeForSublayer(0,jn.ReadOnly),ut=c.layout.get("text-variable-anchor"),xt=[];for(const St of d){const mt=i.getTile(St),Yt=mt.getBucket(c);if(!Yt)continue;const Ft=y?Yt.text:Yt.icon;if(!Ft||!Ft.segments.get().length)continue;const pn=Ft.programConfigurations.get(c.id),$n=y||Yt.sdfIcons,In=y?Yt.textSizeData:Yt.iconSizeData,Pn=Ve||Ce.pitch!==0,wr=m.useProgram(Ys($n,y,Yt),pn),vn=l.evaluateSizeForZoom(In,Ce.zoom);let Ln,gr,ei,ji,Di=[0,0],yo=null;if(y){if(gr=mt.glyphAtlasTexture,ei=Me.LINEAR,Ln=mt.glyphAtlasTexture.size,Yt.iconsInText){Di=mt.imageAtlasTexture.size,yo=mt.imageAtlasTexture;const gs=In.kind==="composite"||In.kind==="camera";ji=Pn||m.options.rotating||m.options.zooming||gs?Me.LINEAR:Me.NEAREST}}else{const gs=c.layout.get("icon-size").constantOr(0)!==1||Yt.iconsNeedLinear;gr=mt.imageAtlasTexture,ei=$n||m.options.rotating||m.options.zooming||gs||Pn?Me.LINEAR:Me.NEAREST,Ln=mt.imageAtlasTexture.size}const Ni=zn(mt,1,m.transform.zoom),vo=Sn(St.posMatrix,Ve,Re,m.transform,Ni),Na=fn(St.posMatrix,Ve,Re,m.transform,Ni),ps=ut&&Yt.hasTextData(),Kn=c.layout.get("icon-text-fit")!=="none"&&ps&&Yt.hasIconData();We&&Ir(Yt,St.posMatrix,m,y,vo,Na,Ve,q);const Zr=m.translatePosMatrix(St.posMatrix,mt,b,P),Nn=We||y&&ut||Kn?nu:vo,Fr=m.translatePosMatrix(Na,mt,b,P,!0),Ui=$n&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ur;ur=$n?Yt.iconsInText?xh(In.kind,vn,Je,Ve,m,Zr,Nn,Fr,Ln,Di):$l(In.kind,vn,Je,Ve,m,Zr,Nn,Fr,y,Ln,!0):Ul(In.kind,vn,Je,Ve,m,Zr,Nn,Fr,y,Ln);const ms={program:wr,buffers:Ft,uniformValues:ur,atlasTexture:gr,atlasTextureIcon:yo,atlasInterpolation:ei,atlasInterpolationIcon:ji,isSDF:$n,hasHalo:Ui};if(Ke&&Yt.canOverlap){ct=!0;const gs=Ft.segments.get();for(const nl of gs)xt.push({segments:new l.SegmentVector([nl]),sortKey:nl.sortKey,state:ms})}else xt.push({segments:Ft.segments,sortKey:0,state:ms})}ct&&xt.sort((St,mt)=>St.sortKey-mt.sortKey);for(const St of xt){const mt=St.state;if(Se.activeTexture.set(Me.TEXTURE0),mt.atlasTexture.bind(mt.atlasInterpolation,Me.CLAMP_TO_EDGE),mt.atlasTextureIcon&&(Se.activeTexture.set(Me.TEXTURE1),mt.atlasTextureIcon&&mt.atlasTextureIcon.bind(mt.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),mt.isSDF){const Yt=mt.uniformValues;mt.hasHalo&&(Yt.u_is_halo=1,ru(mt.buffers,St.segments,c,m,mt.program,rt,oe,ce,Yt)),Yt.u_is_halo=0}ru(mt.buffers,St.segments,c,m,mt.program,rt,oe,ce,mt.uniformValues)}}function ru(m,i,c,d,y,b,P,L,D){const q=d.context;y.draw(q,q.gl.TRIANGLES,b,P,L,mr.disabled,D,c.id,m.layoutVertexBuffer,m.indexBuffer,i,c.paint,d.transform.zoom,m.programConfigurations.get(c.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function Ro(m,i,c,d,y,b,P){const L=m.context.gl,D=c.paint.get("fill-pattern"),q=D&&D.constantOr(1),oe=c.getCrossfadeParameters();let ce,Se,Me,Ce,Re;P?(Se=q&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ce=L.LINES):(Se=q?"fillPattern":"fill",ce=L.TRIANGLES);for(const Ve of d){const We=i.getTile(Ve);if(q&&!We.patternsLoaded())continue;const Je=We.getBucket(c);if(!Je)continue;const Ke=Je.programConfigurations.get(c.id),ct=m.useProgram(Se,Ke);q&&(m.context.activeTexture.set(L.TEXTURE0),We.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ke.updatePaintBuffers(oe));const rt=D.constantOr(null);if(rt&&We.imageAtlas){const xt=We.imageAtlas,St=xt.patternPositions[rt.to.toString()],mt=xt.patternPositions[rt.from.toString()];St&&mt&&Ke.setConstantPatternPositions(St,mt)}const ut=m.translatePosMatrix(Ve.posMatrix,We,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(P){Ce=Je.indexBuffer2,Re=Je.segments2;const xt=[L.drawingBufferWidth,L.drawingBufferHeight];Me=Se==="fillOutlinePattern"&&q?Hr(ut,m,oe,We,xt):Wu(ut,xt)}else Ce=Je.indexBuffer,Re=Je.segments,Me=q?jl(ut,m,oe,We):ka(ut);ct.draw(m.context,ce,y,m.stencilModeForClipping(Ve),b,mr.disabled,Me,c.id,Je.layoutVertexBuffer,Ce,Re,c.paint,m.transform.zoom,Ke)}}function wi(m,i,c,d,y,b,P){const L=m.context,D=L.gl,q=c.paint.get("fill-extrusion-pattern"),oe=q.constantOr(1),ce=c.getCrossfadeParameters(),Se=c.paint.get("fill-extrusion-opacity");for(const Me of d){const Ce=i.getTile(Me),Re=Ce.getBucket(c);if(!Re)continue;const Ve=Re.programConfigurations.get(c.id),We=m.useProgram(oe?"fillExtrusionPattern":"fillExtrusion",Ve);oe&&(m.context.activeTexture.set(D.TEXTURE0),Ce.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),Ve.updatePaintBuffers(ce));const Je=q.constantOr(null);if(Je&&Ce.imageAtlas){const ut=Ce.imageAtlas,xt=ut.patternPositions[Je.to.toString()],St=ut.patternPositions[Je.from.toString()];xt&&St&&Ve.setConstantPatternPositions(xt,St)}const Ke=m.translatePosMatrix(Me.posMatrix,Ce,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ct=c.paint.get("fill-extrusion-vertical-gradient"),rt=oe?Hu(Ke,m,ct,Se,Me,ce,Ce):Us(Ke,m,ct,Se);We.draw(L,L.gl.TRIANGLES,y,b,P,mr.backCCW,rt,c.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,c.paint,m.transform.zoom,Ve)}}function Oi(m,i,c,d,y,b){const P=m.context,L=P.gl,D=i.fbo;if(!D)return;const q=m.useProgram("hillshade");P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,D.colorAttachment.get());const oe=((ce,Se,Me)=>{const Ce=Me.paint.get("hillshade-shadow-color"),Re=Me.paint.get("hillshade-highlight-color"),Ve=Me.paint.get("hillshade-accent-color");let We=Me.paint.get("hillshade-illumination-direction")*(Math.PI/180);Me.paint.get("hillshade-illumination-anchor")==="viewport"&&(We-=ce.transform.angle);const Je=!ce.options.moving;return{u_matrix:ce.transform.calculatePosMatrix(Se.tileID.toUnwrapped(),Je),u_image:0,u_latrange:Gs(0,Se.tileID),u_light:[Me.paint.get("hillshade-exaggeration"),We],u_shadow:Ce,u_highlight:Re,u_accent:Ve}})(m,i,c);q.draw(P,L.TRIANGLES,d,y,b,mr.disabled,oe,c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function iu(m,i,c,d,y,b){const P=m.context,L=P.gl,D=i.dem;if(D&&D.data){const q=D.dim,oe=D.stride,ce=D.getPixels();if(P.activeTexture.set(L.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||m.getTileTexture(oe),i.demTexture){const Me=i.demTexture;Me.update(ce,{premultiply:!1}),Me.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else i.demTexture=new ae(P,ce,L.RGBA,{premultiply:!1}),i.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);P.activeTexture.set(L.TEXTURE0);let Se=i.fbo;if(!Se){const Me=new ae(P,{width:q,height:q,data:null},L.RGBA);Me.bind(L.LINEAR,L.CLAMP_TO_EDGE),Se=i.fbo=P.createFramebuffer(q,q,!0),Se.colorAttachment.set(Me.texture)}P.bindFramebuffer.set(Se.framebuffer),P.viewport.set([0,0,q,q]),m.useProgram("hillshadePrepare").draw(P,L.TRIANGLES,d,y,b,mr.disabled,((Me,Ce)=>{const Re=Ce.stride,Ve=l.create();return l.ortho(Ve,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Ve,Ve,[0,-l.EXTENT,0]),{u_matrix:Ve,u_image:1,u_dimension:[Re,Re],u_zoom:Me.overscaledZ,u_unpack:Ce.getUnpackVector()}})(i.tileID,D),c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function cs(m,i,c,d,y){const b=d.paint.get("raster-fade-duration");if(b>0){const P=l.exported.now(),L=(P-m.timeAdded)/b,D=i?(P-i.timeAdded)/b:-1,q=c.getSource(),oe=y.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),ce=!i||Math.abs(i.tileID.overscaledZ-oe)>Math.abs(m.tileID.overscaledZ-oe),Se=ce&&m.refreshedUponExpiration?1:l.clamp(ce?L:1-D,0,1);return m.refreshedUponExpiration&&L>=1&&(m.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Se}:{opacity:Se,mix:0}}return{opacity:1,mix:0}}const nc=new l.Color(1,0,0,1),Ri=new l.Color(0,1,0,1),po=new l.Color(0,0,1,1),Wr=new l.Color(1,0,1,1),ia=new l.Color(0,1,1,1);function Fa(m,i,c,d){hs(m,0,i+c/2,m.transform.width,c,d)}function Js(m,i,c,d){hs(m,i-c/2,0,c,m.transform.height,d)}function hs(m,i,c,d,y,b){const P=m.context,L=P.gl;L.enable(L.SCISSOR_TEST),L.scissor(i*m.pixelRatio,c*m.pixelRatio,d*m.pixelRatio,y*m.pixelRatio),P.clear({color:b}),L.disable(L.SCISSOR_TEST)}function oa(m,i,c){const d=m.context,y=d.gl,b=c.posMatrix,P=m.useProgram("debug"),L=jn.disabled,D=ar.disabled,q=m.colorModeForRenderPass(),oe="$debug";d.activeTexture.set(y.TEXTURE0),m.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),P.draw(d,y.LINE_STRIP,L,D,q,mr.disabled,is(b,l.Color.red),oe,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments);const ce=i.getTileByID(c.key).latestRawTileData,Se=Math.floor((ce&&ce.byteLength||0)/1024),Me=i.getTile(c).tileSize,Ce=512/Math.min(Me,512)*(c.overscaledZ/m.transform.zoom)*.5;let Re=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Re+=` => ${c.overscaledZ}`),function(Ve,We){Ve.initDebugOverlayCanvas();const Je=Ve.debugOverlayCanvas,Ke=Ve.context.gl,ct=Ve.debugOverlayCanvas.getContext("2d");ct.clearRect(0,0,Je.width,Je.height),ct.shadowColor="white",ct.shadowBlur=2,ct.lineWidth=1.5,ct.strokeStyle="white",ct.textBaseline="top",ct.font="bold 36px Open Sans, sans-serif",ct.fillText(We,5,5),ct.strokeText(We,5,5),Ve.debugOverlayTexture.update(Je),Ve.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)}(m,`${Re} ${Se}kb`),P.draw(d,y.TRIANGLES,L,D,pr.alphaBlended,mr.disabled,is(b,l.Color.transparent,Ce),oe,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments)}const aa={symbol:function(m,i,c,d,y){if(m.renderPass!=="translucent")return;const b=ar.disabled,P=m.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(L,D,q,oe,ce,Se,Me){const Ce=D.transform,Re=ce==="map",Ve=Se==="map";for(const We of L){const Je=oe.getTile(We),Ke=Je.getBucket(q);if(!Ke||!Ke.text||!Ke.text.segments.get().length)continue;const ct=l.evaluateSizeForZoom(Ke.textSizeData,Ce.zoom),rt=zn(Je,1,D.transform.zoom),ut=Sn(We.posMatrix,Ve,Re,D.transform,rt),xt=q.layout.get("icon-text-fit")!=="none"&&Ke.hasIconData();if(ct){const St=Math.pow(2,Ce.zoom-Je.tileID.overscaledZ);us(Ke,Re,Ve,Me,l.symbolSize,Ce,ut,We.posMatrix,St,ct,xt)}}}(d,m,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),y),c.paint.get("icon-opacity").constantOr(1)!==0&&qs(m,i,c,d,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),b,P),c.paint.get("text-opacity").constantOr(1)!==0&&qs(m,i,c,d,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),b,P),i.map.showCollisionBoxes&&(tc(m,i,c,d,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),tc(m,i,c,d,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(m,i,c,d){if(m.renderPass!=="translucent")return;const y=c.paint.get("circle-opacity"),b=c.paint.get("circle-stroke-width"),P=c.paint.get("circle-stroke-opacity"),L=!c.layout.get("circle-sort-key").isConstant();if(y.constantOr(1)===0&&(b.constantOr(1)===0||P.constantOr(1)===0))return;const D=m.context,q=D.gl,oe=m.depthModeForSublayer(0,jn.ReadOnly),ce=ar.disabled,Se=m.colorModeForRenderPass(),Me=[];for(let Ce=0;Ce<d.length;Ce++){const Re=d[Ce],Ve=i.getTile(Re),We=Ve.getBucket(c);if(!We)continue;const Je=We.programConfigurations.get(c.id),Ke={programConfiguration:Je,program:m.useProgram("circle",Je),layoutVertexBuffer:We.layoutVertexBuffer,indexBuffer:We.indexBuffer,uniformValues:$s(m,Re,Ve,c)};if(L){const ct=We.segments.get();for(const rt of ct)Me.push({segments:new l.SegmentVector([rt]),sortKey:rt.sortKey,state:Ke})}else Me.push({segments:We.segments,sortKey:0,state:Ke})}L&&Me.sort((Ce,Re)=>Ce.sortKey-Re.sortKey);for(const Ce of Me){const{programConfiguration:Re,program:Ve,layoutVertexBuffer:We,indexBuffer:Je,uniformValues:Ke}=Ce.state;Ve.draw(D,q.TRIANGLES,oe,ce,Se,mr.disabled,Ke,c.id,We,Je,Ce.segments,c.paint,m.transform.zoom,Re)}},heatmap:function(m,i,c,d){if(c.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const y=m.context,b=y.gl,P=ar.disabled,L=new pr([b.ONE,b.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(D,q,oe){const ce=D.gl;D.activeTexture.set(ce.TEXTURE1),D.viewport.set([0,0,q.width/4,q.height/4]);let Se=oe.heatmapFbo;if(Se)ce.bindTexture(ce.TEXTURE_2D,Se.colorAttachment.get()),D.bindFramebuffer.set(Se.framebuffer);else{const Me=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Me),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),Se=oe.heatmapFbo=D.createFramebuffer(q.width/4,q.height/4,!1),function(Ce,Re,Ve,We){const Je=Ce.gl;Je.texImage2D(Je.TEXTURE_2D,0,Je.RGBA,Re.width/4,Re.height/4,0,Je.RGBA,Ce.extRenderToTextureHalfFloat?Ce.extTextureHalfFloat.HALF_FLOAT_OES:Je.UNSIGNED_BYTE,null),We.colorAttachment.set(Ve)}(D,q,Me,Se)}})(y,m,c),y.clear({color:l.Color.transparent});for(let D=0;D<d.length;D++){const q=d[D];if(i.hasRenderableParent(q))continue;const oe=i.getTile(q),ce=oe.getBucket(c);if(!ce)continue;const Se=ce.programConfigurations.get(c.id),Me=m.useProgram("heatmap",Se),{zoom:Ce}=m.transform;Me.draw(y,b.TRIANGLES,jn.disabled,P,L,mr.disabled,Vs(q.posMatrix,oe,Ce,c.paint.get("heatmap-intensity")),c.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,c.paint,m.transform.zoom,Se)}y.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(y,b){const P=y.context,L=P.gl,D=b.heatmapFbo;if(!D)return;P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,D.colorAttachment.get()),P.activeTexture.set(L.TEXTURE1);let q=b.colorRampTexture;q||(q=b.colorRampTexture=new ae(P,b.colorRamp,L.RGBA)),q.bind(L.LINEAR,L.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(P,L.TRIANGLES,jn.disabled,ar.disabled,y.colorModeForRenderPass(),mr.disabled,((oe,ce,Se,Me)=>{const Ce=l.create();l.ortho(Ce,0,oe.width,oe.height,0,0,1);const Re=oe.context.gl;return{u_matrix:Ce,u_world:[Re.drawingBufferWidth,Re.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ce.paint.get("heatmap-opacity")}})(y,b),b.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,b.paint,y.transform.zoom)}(m,c))},line:function(m,i,c,d){if(m.renderPass!=="translucent")return;const y=c.paint.get("line-opacity"),b=c.paint.get("line-width");if(y.constantOr(1)===0||b.constantOr(1)===0)return;const P=m.depthModeForSublayer(0,jn.ReadOnly),L=m.colorModeForRenderPass(),D=c.paint.get("line-dasharray"),q=c.paint.get("line-pattern"),oe=q.constantOr(1),ce=c.paint.get("line-gradient"),Se=c.getCrossfadeParameters(),Me=oe?"linePattern":D?"lineSDF":ce?"lineGradient":"line",Ce=m.context,Re=Ce.gl;let Ve=!0;for(const We of d){const Je=i.getTile(We);if(oe&&!Je.patternsLoaded())continue;const Ke=Je.getBucket(c);if(!Ke)continue;const ct=Ke.programConfigurations.get(c.id),rt=m.context.program.get(),ut=m.useProgram(Me,ct),xt=Ve||ut.program!==rt,St=q.constantOr(null);if(St&&Je.imageAtlas){const Yt=Je.imageAtlas,Ft=Yt.patternPositions[St.to.toString()],pn=Yt.patternPositions[St.from.toString()];Ft&&pn&&ct.setConstantPatternPositions(Ft,pn)}const mt=oe?or(m,Je,c,Se):D?Hs(m,Je,c,D,Se):ce?Ma(m,Je,c,Ke.lineClipsArray.length):zo(m,Je,c);if(oe)Ce.activeTexture.set(Re.TEXTURE0),Je.imageAtlasTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),ct.updatePaintBuffers(Se);else if(D&&(xt||m.lineAtlas.dirty))Ce.activeTexture.set(Re.TEXTURE0),m.lineAtlas.bind(Ce);else if(ce){const Yt=Ke.gradients[c.id];let Ft=Yt.texture;if(c.gradientVersion!==Yt.version){let pn=256;if(c.stepInterpolant){const $n=i.getSource().maxzoom,In=We.canonical.z===$n?Math.ceil(1<<m.transform.maxZoom-We.canonical.z):1;pn=l.clamp(l.nextPowerOfTwo(Ke.maxLineLength/l.EXTENT*1024*In),256,Ce.maxTextureSize)}Yt.gradient=l.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:pn,image:Yt.gradient||void 0,clips:Ke.lineClipsArray}),Yt.texture?Yt.texture.update(Yt.gradient):Yt.texture=new ae(Ce,Yt.gradient,Re.RGBA),Yt.version=c.gradientVersion,Ft=Yt.texture}Ce.activeTexture.set(Re.TEXTURE0),Ft.bind(c.stepInterpolant?Re.NEAREST:Re.LINEAR,Re.CLAMP_TO_EDGE)}ut.draw(Ce,Re.TRIANGLES,P,m.stencilModeForClipping(We),L,mr.disabled,mt,c.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,c.paint,m.transform.zoom,ct,Ke.layoutVertexBuffer2),Ve=!1}},fill:function(m,i,c,d){const y=c.paint.get("fill-color"),b=c.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const P=m.colorModeForRenderPass(),L=c.paint.get("fill-pattern"),D=m.opaquePassEnabledForLayer()&&!L.constantOr(1)&&y.constantOr(l.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===D){const q=m.depthModeForSublayer(1,m.renderPass==="opaque"?jn.ReadWrite:jn.ReadOnly);Ro(m,i,c,d,q,P,!1)}if(m.renderPass==="translucent"&&c.paint.get("fill-antialias")){const q=m.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,jn.ReadOnly);Ro(m,i,c,d,q,P,!0)}},"fill-extrusion":function(m,i,c,d){const y=c.paint.get("fill-extrusion-opacity");if(y!==0&&m.renderPass==="translucent"){const b=new jn(m.context.gl.LEQUAL,jn.ReadWrite,m.depthRangeFor3D);if(y!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))wi(m,i,c,d,b,ar.disabled,pr.disabled),wi(m,i,c,d,b,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const P=m.colorModeForRenderPass();wi(m,i,c,d,b,ar.disabled,P)}}},hillshade:function(m,i,c,d){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const y=m.context,b=m.depthModeForSublayer(0,jn.ReadOnly),P=m.colorModeForRenderPass(),[L,D]=m.renderPass==="translucent"?m.stencilConfigForOverlap(d):[{},d];for(const q of D){const oe=i.getTile(q);oe.needsHillshadePrepare&&m.renderPass==="offscreen"?iu(m,oe,c,b,ar.disabled,P):m.renderPass==="translucent"&&Oi(m,oe,c,b,L[q.overscaledZ],P)}y.viewport.set([0,0,m.width,m.height])},raster:function(m,i,c,d){if(m.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!d.length)return;const y=m.context,b=y.gl,P=i.getSource(),L=m.useProgram("raster"),D=m.colorModeForRenderPass(),[q,oe]=P instanceof Pe?[{},d]:m.stencilConfigForOverlap(d),ce=oe[oe.length-1].overscaledZ,Se=!m.options.moving;for(const Me of oe){const Ce=m.depthModeForSublayer(Me.overscaledZ-ce,c.paint.get("raster-opacity")===1?jn.ReadWrite:jn.ReadOnly,b.LESS),Re=i.getTile(Me),Ve=m.transform.calculatePosMatrix(Me.toUnwrapped(),Se);Re.registerFadeDuration(c.paint.get("raster-fade-duration"));const We=i.findLoadedParent(Me,0),Je=cs(Re,We,i,c,m.transform);let Ke,ct;const rt=c.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;y.activeTexture.set(b.TEXTURE0),Re.texture.bind(rt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(b.TEXTURE1),We?(We.texture.bind(rt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),Ke=Math.pow(2,We.tileID.overscaledZ-Re.tileID.overscaledZ),ct=[Re.tileID.canonical.x*Ke%1,Re.tileID.canonical.y*Ke%1]):Re.texture.bind(rt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);const ut=Zu(Ve,ct||[0,0],Ke||1,Je,c);P instanceof Pe?L.draw(y,b.TRIANGLES,Ce,ar.disabled,D,mr.disabled,ut,c.id,P.boundsBuffer,m.quadTriangleIndexBuffer,P.boundsSegments):L.draw(y,b.TRIANGLES,Ce,q[Me.overscaledZ],D,mr.disabled,ut,c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,i,c){const d=c.paint.get("background-color"),y=c.paint.get("background-opacity");if(y===0)return;const b=m.context,P=b.gl,L=m.transform,D=L.tileSize,q=c.paint.get("background-pattern");if(m.isPatternMissing(q))return;const oe=!q&&d.a===1&&y===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==oe)return;const ce=ar.disabled,Se=m.depthModeForSublayer(0,oe==="opaque"?jn.ReadWrite:jn.ReadOnly),Me=m.colorModeForRenderPass(),Ce=m.useProgram(q?"backgroundPattern":"background"),Re=L.coveringTiles({tileSize:D});q&&(b.activeTexture.set(P.TEXTURE0),m.imageManager.bind(m.context));const Ve=c.getCrossfadeParameters();for(const We of Re){const Je=m.transform.calculatePosMatrix(We.toUnwrapped()),Ke=q?Gl(Je,y,m,q,{tileID:We,tileSize:D},Ve):Vl(Je,y,d);Ce.draw(b,P.TRIANGLES,Se,ce,Me,mr.disabled,Ke,c.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}},debug:function(m,i,c){for(let d=0;d<c.length;d++)oa(m,i,c[d])},custom:function(m,i,c){const d=m.context,y=c.implementation;if(m.renderPass==="offscreen"){const b=y.prerender;b&&(m.setCustomLayerDefaults(),d.setColorMode(m.colorModeForRenderPass()),b.call(y,d.gl,m.transform.customLayerMatrix()),d.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),d.setColorMode(m.colorModeForRenderPass()),d.setStencilMode(ar.disabled);const b=y.renderingMode==="3d"?new jn(m.context.gl.LEQUAL,jn.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,jn.ReadOnly);d.setDepthMode(b),y.render(d.gl,m.transform.customLayerMatrix()),d.setDirty(),m.setBaseState(),d.bindFramebuffer.set(null)}}};class Ei{constructor(i,c){this.context=new Sh(i),this.transform=c,this._tileTextures={},this.setup(),this.numSublayers=Bt.maxUnderzooming+Bt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new bn,this.gpuTimers={}}resize(i,c,d){if(this.width=i*d,this.height=c*d,this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,c=new l.PosArray;c.emplaceBack(0,0),c.emplaceBack(l.EXTENT,0),c.emplaceBack(0,l.EXTENT),c.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,Bl.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const d=new l.PosArray;d.emplaceBack(0,0),d.emplaceBack(l.EXTENT,0),d.emplaceBack(0,l.EXTENT),d.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=i.createVertexBuffer(d,Bl.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const y=new l.RasterBoundsArray;y.emplaceBack(0,0,0,0),y.emplaceBack(l.EXTENT,0,l.EXTENT,0),y.emplaceBack(0,l.EXTENT,0,l.EXTENT),y.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(y,Ie.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const b=new l.PosArray;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(b,Bl.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const P=new l.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(P);const L=new l.TriangleIndexArray;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(L),this.emptyTexture=new ae(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const D=this.context.gl;this.stencilClearMode=new ar({func:D.ALWAYS,mask:0},0,255,D.ZERO,D.ZERO,D.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=l.create();l.ortho(d,0,this.width,this.height,0,0,1),l.scale(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,jn.disabled,this.stencilClearMode,pr.disabled,mr.disabled,os(d),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const d=this.context,y=d.gl;this.nextStencilID+c.length>256&&this.clearStencil(),d.setColorMode(pr.disabled),d.setDepthMode(jn.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of c){const L=this._tileClippingMaskIDs[P.key]=this.nextStencilID++;b.draw(d,y.TRIANGLES,jn.disabled,new ar({func:y.ALWAYS,mask:0},L,255,y.KEEP,y.KEEP,y.REPLACE),pr.disabled,mr.disabled,os(P.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new ar({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new ar({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,d=i.sort((P,L)=>L.overscaledZ-P.overscaledZ),y=d[d.length-1].overscaledZ,b=d[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const P={};for(let L=0;L<b;L++)P[L+y]=new ar({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[P,d]}return[{[y]:ar.disabled},d]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new pr([i.CONSTANT_COLOR,i.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pr.unblended:pr.alphaBlended}depthModeForSublayer(i,c,d){if(!this.opaquePassEnabledForLayer())return jn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new jn(d||this.context.gl.LEQUAL,c,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const d=this.style._order,y=this.style.sourceCaches;for(const D in y){const q=y[D];q.used&&q.prepare(this.context)}const b={},P={},L={};for(const D in y){const q=y[D];b[D]=q.getVisibleCoordinates(),P[D]=b[D].slice().reverse(),L[D]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let D=0;D<d.length;D++)if(this.style._layers[d[D]].is3D()){this.opaquePassCutoff=D;break}this.renderPass="offscreen";for(const D of d){const q=this.style._layers[D];if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const oe=P[q.source];(q.type==="custom"||oe.length)&&this.renderLayer(this,y[q.source],q,oe)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const D=this.style._layers[d[this.currentLayer]],q=y[D.source],oe=b[D.source];this._renderTileClippingMasks(D,oe),this.renderLayer(this,q,D,oe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const D=this.style._layers[d[this.currentLayer]],q=y[D.source],oe=(D.type==="symbol"?L:P)[D.source];this._renderTileClippingMasks(D,b[D.source]),this.renderLayer(this,q,D,oe)}if(this.options.showTileBoundaries){let D,q;Object.values(this.style._layers).forEach(oe=>{oe.source&&!oe.isHidden(this.transform.zoom)&&(oe.source!==(q&&q.id)&&(q=this.style.sourceCaches[oe.source]),(!D||D.getSource().maxzoom<q.getSource().maxzoom)&&(D=q))}),D&&aa.debug(this,D,D.getVisibleCoordinates())}this.options.showPadding&&function(D){const q=D.transform.padding;Fa(D,D.transform.height-(q.top||0),3,nc),Fa(D,q.bottom||0,3,Ri),Js(D,q.left||0,3,po),Js(D,D.transform.width-(q.right||0),3,Wr);const oe=D.transform.centerPoint;(function(ce,Se,Me,Ce){hs(ce,Se-1,Me-10,2,20,Ce),hs(ce,Se-10,Me-1,20,2,Ce)})(D,oe.x,D.transform.height-oe.y,ia)}(this),this.context.setDefault()}renderLayer(i,c,d,y){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||y.length)&&(this.id=d.id,this.gpuTimingStart(d),aa[d.type](i,c,d,y,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let d=this.gpuTimers[i.id];d||(d=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),d.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,d.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const c={};for(const d in i){const y=i[d],b=this.context.extTimerQuery,P=b.getQueryObjectEXT(y.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(y.query),c[d]=P}return c}translatePosMatrix(i,c,d,y,b){if(!d[0]&&!d[1])return i;const P=b?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(P){const q=Math.sin(P),oe=Math.cos(P);d=[d[0]*oe-d[1]*q,d[0]*q+d[1]*oe]}const L=ue(b?d[0]:zn(c,d[0],this.transform.zoom),b?d[1]:zn(c,d[1],this.transform.zoom),0),D=new Float32Array(16);return l.translate(D,i,L),D}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),d=this.imageManager.getPattern(i.to.toString());return!c||!d}useProgram(i,c){this.cache=this.cache||{};const d=`${i}${c?c.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[d]||(this.cache[d]=new Vu(this.context,i,ns[i],c,as[i],this._showOverdrawInspector)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ae(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class mo{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,d){const y=Math.pow(2,d),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>l.transformMat4([],L,i)).map(L=>l.scale$1([],L,1/L[3]/c*y)),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const D=function(Se,Me){var Ce=Me[0],Re=Me[1],Ve=Me[2],We=Ce*Ce+Re*Re+Ve*Ve;return We>0&&(We=1/Math.sqrt(We)),Se[0]=Me[0]*We,Se[1]=Me[1]*We,Se[2]=Me[2]*We,Se}([],function(Se,Me,Ce){var Re=Me[0],Ve=Me[1],We=Me[2],Je=Ce[0],Ke=Ce[1],ct=Ce[2];return Se[0]=Ve*ct-We*Ke,Se[1]=We*Je-Re*ct,Se[2]=Re*Ke-Ve*Je,Se}([],V([],b[L[0]],b[L[1]]),V([],b[L[2]],b[L[1]]))),q=-((oe=D)[0]*(ce=b[L[1]])[0]+oe[1]*ce[1]+oe[2]*ce[2]);var oe,ce;return D.concat(q)});return new mo(b,P)}}class sa{constructor(i,c){this.min=i,this.max=c,this.center=function(d,y,b){return d[0]=.5*y[0],d[1]=.5*y[1],d[2]=.5*y[2],d}([],function(d,y,b){return d[0]=y[0]+b[0],d[1]=y[1]+b[1],d[2]=y[2]+b[2],d}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],d=Z(this.min),y=Z(this.max);for(let b=0;b<c.length;b++)d[b]=c[b]?this.min[b]:this.center[b],y[b]=c[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new sa(d,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let d=!0;for(let y=0;y<i.planes.length;y++){const b=i.planes[y];let P=0;for(let L=0;L<c.length;L++)l.dot(b,c[L])>=0&&P++;if(P===0)return 0;P!==c.length&&(d=!1)}if(d)return 2;for(let y=0;y<3;y++){let b=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let L=0;L<i.points.length;L++){const D=i.points[L][y]-this.min[y];b=Math.min(b,D),P=Math.max(P,D)}if(P<0||b>this.max[y]-this.min[y])return 0}return 1}}class Fo{constructor(i=0,c=0,d=0,y=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=d,this.right=y}interpolate(i,c,d){return c.top!=null&&i.top!=null&&(this.top=l.number(i.top,c.top,d)),c.bottom!=null&&i.bottom!=null&&(this.bottom=l.number(i.bottom,c.bottom,d)),c.left!=null&&i.left!=null&&(this.left=l.number(i.left,c.left,d)),c.right!=null&&i.right!=null&&(this.right=l.number(i.right,c.right,d)),this}getCenter(i,c){const d=l.clamp((this.left+i-this.right)/2,0,i),y=l.clamp((this.top+c-this.bottom)/2,0,c);return new l.pointGeometry(d,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Fo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class la{constructor(i,c,d,y,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=d==null?0:d,this._maxPitch=y==null?60:y,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Fo,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new la(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-l.wrap(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var d=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,y,b){var P=y[0],L=y[1],D=y[2],q=y[3],oe=Math.sin(b),ce=Math.cos(b);d[0]=P*ce+D*oe,d[1]=L*ce+q*oe,d[2]=P*-oe+D*ce,d[3]=L*-oe+q*ce}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=l.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,d){this._unmodified=!1,this._edgeInsets.interpolate(i,c,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new l.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const d=this.pointCoordinate(new l.pointGeometry(0,0)),y=this.pointCoordinate(new l.pointGeometry(this.width,0)),b=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),P=this.pointCoordinate(new l.pointGeometry(0,this.height)),L=Math.floor(Math.min(d.x,y.x,b.x,P.x)),D=Math.floor(Math.max(d.x,y.x,b.x,P.x)),q=1;for(let oe=L-q;oe<=D+q;oe++)oe!==0&&c.push(new l.UnwrappedTileID(oe,i))}return c}coveringTiles(i){let c=this.coveringZoomLevel(i);const d=c;if(i.minzoom!==void 0&&c<i.minzoom)return[];i.maxzoom!==void 0&&c>i.maxzoom&&(c=i.maxzoom);const y=l.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,c),P=[b*y.x,b*y.y,0],L=mo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c);let D=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(D=c);const q=Ce=>({aabb:new sa([Ce*b,0,0],[(Ce+1)*b,b,0]),zoom:0,x:0,y:0,wrap:Ce,fullyVisible:!1}),oe=[],ce=[],Se=c,Me=i.reparseOverscaled?d:c;if(this._renderWorldCopies)for(let Ce=1;Ce<=3;Ce++)oe.push(q(-Ce)),oe.push(q(Ce));for(oe.push(q(0));oe.length>0;){const Ce=oe.pop(),Re=Ce.x,Ve=Ce.y;let We=Ce.fullyVisible;if(!We){const ut=Ce.aabb.intersects(L);if(ut===0)continue;We=ut===2}const Je=Ce.aabb.distanceX(P),Ke=Ce.aabb.distanceY(P),ct=Math.max(Math.abs(Je),Math.abs(Ke)),rt=3+(1<<Se-Ce.zoom)-2;if(Ce.zoom===Se||ct>rt&&Ce.zoom>=D)ce.push({tileID:new l.OverscaledTileID(Ce.zoom===Se?Me:Ce.zoom,Ce.wrap,Ce.zoom,Re,Ve),distanceSq:B([P[0]-.5-Re,P[1]-.5-Ve])});else for(let ut=0;ut<4;ut++){const xt=(Re<<1)+ut%2,St=(Ve<<1)+(ut>>1);oe.push({aabb:Ce.aabb.quadrant(ut),zoom:Ce.zoom+1,x:xt,y:St,wrap:Ce.wrap,fullyVisible:We})}}return ce.sort((Ce,Re)=>Ce.distanceSq-Re.distanceSq).map(Ce=>Ce.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=l.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(i.lng)*this.worldSize,l.mercatorYfromLat(c)*this.worldSize)}unproject(i){return new l.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,c){const d=this.pointCoordinate(c),y=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(i),P=new l.MercatorCoordinate(b.x-(d.x-y.x),b.y-(d.y-y.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}locationCoordinate(i){return l.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointCoordinate(i){const c=[i.x,i.y,0,1],d=[i.x,i.y,1,1];l.transformMat4(c,c,this.pixelMatrixInverse),l.transformMat4(d,d,this.pixelMatrixInverse);const y=c[3],b=d[3],P=c[1]/y,L=d[1]/b,D=c[2]/y,q=d[2]/b,oe=D===q?0:(0-D)/(q-D);return new l.MercatorCoordinate(l.number(c[0]/y,d[0]/b,oe)/this.worldSize,l.number(P,L,oe)/this.worldSize)}coordinatePoint(i){const c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.transformMat4(c,c,this.pixelMatrix),new l.pointGeometry(c[0]/c[3],c[1]/c[3])}getBounds(){return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,0))).extend(this.pointLocation(new l.pointGeometry(this.width,0))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const d=i.key,y=c?this._alignedPosMatrixCache:this._posMatrixCache;if(y[d])return y[d];const b=i.canonical,P=this.worldSize/this.zoomScale(b.z),L=b.x+Math.pow(2,b.z)*i.wrap,D=l.identity(new Float64Array(16));return l.translate(D,D,[L*P,b.y*P,0]),l.scale(D,D,[P/l.EXTENT,P/l.EXTENT,1]),l.multiply(D,c?this.alignedProjMatrix:this.projMatrix,D),y[d]=new Float32Array(D),y[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,d,y,b=-90,P=90,L=-180,D=180;const q=this.size,oe=this._unmodified;if(this.latRange){const Me=this.latRange;b=l.mercatorYfromLat(Me[1])*this.worldSize,P=l.mercatorYfromLat(Me[0])*this.worldSize,i=P-b<q.y?q.y/(P-b):0}if(this.lngRange){const Me=this.lngRange;L=l.mercatorXfromLng(Me[0])*this.worldSize,D=l.mercatorXfromLng(Me[1])*this.worldSize,c=D-L<q.x?q.x/(D-L):0}const ce=this.point,Se=Math.max(c||0,i||0);if(Se)return this.center=this.unproject(new l.pointGeometry(c?(D+L)/2:ce.x,i?(P+b)/2:ce.y)),this.zoom+=this.scaleZoom(Se),this._unmodified=oe,void(this._constraining=!1);if(this.latRange){const Me=ce.y,Ce=q.y/2;Me-Ce<b&&(y=b+Ce),Me+Ce>P&&(y=P-Ce)}if(this.lngRange){const Me=ce.x,Ce=q.x/2;Me-Ce<L&&(d=L+Ce),Me+Ce>D&&(d=D-Ce)}d===void 0&&y===void 0||(this.center=this.unproject(new l.pointGeometry(d!==void 0?d:ce.x,y!==void 0?y:ce.y))),this._unmodified=oe,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const c=Math.PI/2+this._pitch,d=this._fov*(.5+i.y/this.height),y=Math.sin(d)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-c-d,.01,Math.PI-.01)),b=this.point,P=b.x,L=b.y,D=1.01*(Math.cos(Math.PI/2-this._pitch)*y+this.cameraToCenterDistance),q=this.height/50;let oe=new Float64Array(16);l.perspective(oe,this._fov,this.width/this.height,q,D),oe[8]=2*-i.x/this.width,oe[9]=2*i.y/this.height,l.scale(oe,oe,[1,-1,1]),l.translate(oe,oe,[0,0,-this.cameraToCenterDistance]),l.rotateX(oe,oe,this._pitch),l.rotateZ(oe,oe,this.angle),l.translate(oe,oe,[-P,-L,0]),this.mercatorMatrix=l.scale([],oe,ue(this.worldSize,this.worldSize,this.worldSize)),l.scale(oe,oe,ue(1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize)),this.projMatrix=oe,this.invProjMatrix=l.invert([],this.projMatrix);const ce=this.width%2/2,Se=this.height%2/2,Me=Math.cos(this.angle),Ce=Math.sin(this.angle),Re=P-Math.round(P)+Me*ce+Ce*Se,Ve=L-Math.round(L)+Me*Se+Ce*ce,We=new Float64Array(oe);if(l.translate(We,We,[Re>.5?Re-1:Re,Ve>.5?Ve-1:Ve,0]),this.alignedProjMatrix=We,oe=l.create(),l.scale(oe,oe,[this.width/2,-this.height/2,1]),l.translate(oe,oe,[1,-1,0]),this.labelPlaneMatrix=oe,oe=l.create(),l.scale(oe,oe,[1,-1,1]),l.translate(oe,oe,[-1,-1,0]),l.scale(oe,oe,[2/this.width,2/this.height,1]),this.glCoordMatrix=oe,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),oe=l.invert(new Float64Array(16),this.pixelMatrix),!oe)throw new Error("failed to invert matrix");this.pixelMatrixInverse=oe,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.pointGeometry(0,0)),c=l.fromValues(i.x*this.worldSize,i.y*this.worldSize,0,1);return l.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let d=c.x,y=c.y,b=c.x,P=c.y;for(const L of i)d=Math.min(d,L.x),y=Math.min(y,L.y),b=Math.max(b,L.x),P=Math.max(P,L.y);return[new l.pointGeometry(d,y),new l.pointGeometry(b,y),new l.pointGeometry(b,P),new l.pointGeometry(d,P),new l.pointGeometry(d,y)]}}}class ou{constructor(i){this._hashName=i&&encodeURIComponent(i),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(c,d){let y=!1,b=null;const P=()=>{b=null,y&&(c(),b=setTimeout(P,300),y=!1)};return()=>(y=!0,b||P(),b)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,y=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),P=Math.round(c.lng*b)/b,L=Math.round(c.lat*b)/b,D=this._map.getBearing(),q=this._map.getPitch();let oe="";if(oe+=i?`/${P}/${L}/${d}`:`${d}/${L}/${P}`,(D||q)&&(oe+="/"+Math.round(10*D)/10),q&&(oe+=`/${Math.round(q)}`),this._hashName){const ce=this._hashName;let Se=!1;const Me=window.location.hash.slice(1).split("&").map(Ce=>{const Re=Ce.split("=")[0];return Re===ce?(Se=!0,`${Re}=${oe}`):Ce}).filter(Ce=>Ce);return Se||Me.push(`${ce}=${oe}`),`#${Me.join("&")}`}return`#${oe}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(c=d)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:c,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const Ba={linearity:.3,easing:l.bezier(0,0,.3,1)},au=l.extend({deceleration:2500,maxSpeed:1400},Ba),su=l.extend({deceleration:20,maxSpeed:1400},Ba),di=l.extend({deceleration:1e3,maxSpeed:360},Ba),lu=l.extend({deceleration:1e3,maxSpeed:90},Ba);class rc{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=l.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const b=ua(c.pan.mag(),d,l.extend({},au,i||{}));y.offset=c.pan.mult(b.amount/c.pan.mag()),y.center=this._map.transform.center,ja(y,b)}if(c.zoom){const b=ua(c.zoom,d,su);y.zoom=this._map.transform.zoom+b.amount,ja(y,b)}if(c.bearing){const b=ua(c.bearing,d,di);y.bearing=this._map.transform.bearing+l.clamp(b.amount,-179,179),ja(y,b)}if(c.pitch){const b=ua(c.pitch,d,lu);y.pitch=this._map.transform.pitch+b.amount,ja(y,b)}if(y.zoom||y.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),l.extend(y,{noMoveStart:!0})}}function ja(m,i){(!m.duration||m.duration<i.duration)&&(m.duration=i.duration,m.easing=i.easing)}function ua(m,i,c){const{maxSpeed:d,linearity:y,deceleration:b}=c,P=l.clamp(m*y/(i/1e3),-d,d),L=Math.abs(P)/(b*y);return{easing:c.easing,duration:1e3*L,amount:P*(L/2)}}class sr extends l.Event{constructor(i,c,d,y={}){const b=T.mousePos(c.getCanvasContainer(),d),P=c.unproject(b);super(i,l.extend({point:b,lngLat:P,originalEvent:d},y)),this._defaultPrevented=!1,this.target=c}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fs extends l.Event{constructor(i,c,d){const y=i==="touchend"?d.changedTouches:d.touches,b=T.touchPos(c.getCanvasContainer(),y),P=b.map(D=>c.unproject(D)),L=b.reduce((D,q,oe,ce)=>D.add(q.div(ce.length)),new l.pointGeometry(0,0));super(i,{points:b,point:L,lngLats:P,lngLat:c.unproject(L),originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Bo extends l.Event{constructor(i,c,d){super(i,{originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class N{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Bo(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new sr(i.type,this._map,i))}mouseup(i){this._map.fire(new sr(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new sr(i.type,this._map,i))}dblclick(i){return this._firePreventable(new sr(i.type,this._map,i))}mouseover(i){this._map.fire(new sr(i.type,this._map,i))}mouseout(i){this._map.fire(new sr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new fs(i.type,this._map,i))}touchmove(i){this._map.fire(new fs(i.type,this._map,i))}touchend(i){this._map.fire(new fs(i.type,this._map,i))}touchcancel(i){this._map.fire(new fs(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fe{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new sr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new sr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new sr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Le{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(T.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=d,this._box||(this._box=T.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(y.x,d.x),P=Math.max(y.x,d.x),L=Math.min(y.y,d.y),D=Math.max(y.y,d.y);T.setTransform(this._box,`translate(${b}px,${L}px)`),this._box.style.width=P-b+"px",this._box.style.height=D-L+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const d=this._startPos,y=c;if(this.reset(),T.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(d,y,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new l.Event(i,{originalEvent:c}))}}function tt(m,i){const c={};for(let d=0;d<m.length;d++)c[m[d].identifier]=i[d];return c}class kt{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),d.length===this.numTouches&&(this.centroid=function(y){const b=new l.pointGeometry(0,0);for(const P of y)b._add(P);return b.div(y.length)}(c),this.touches=tt(d,c)))}touchmove(i,c,d){if(this.aborted||!this.centroid)return;const y=tt(d,c);for(const b in this.touches){const P=this.touches[b],L=y[b];(!L||L.dist(P)>30)&&(this.aborted=!0)}}touchend(i,c,d){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Ct{constructor(i){this.singleTap=new kt(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,d){this.singleTap.touchstart(i,c,d)}touchmove(i,c,d){this.singleTap.touchmove(i,c,d)}touchend(i,c,d){const y=this.singleTap.touchend(i,c,d);if(y){const b=i.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(y)<30;if(b&&P||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Xt{constructor(){this._zoomIn=new Ct({numTouches:1,numTaps:2}),this._zoomOut=new Ct({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,d){this._zoomIn.touchstart(i,c,d),this._zoomOut.touchstart(i,c,d)}touchmove(i,c,d){this._zoomIn.touchmove(i,c,d),this._zoomOut.touchmove(i,c,d)}touchend(i,c,d){const y=this._zoomIn.touchend(i,c,d),b=this._zoomOut.touchend(i,c,d);return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(y)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Kt={0:1,2:2};class dn{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const d=T.mouseButton(i);this._correctButton(i,d)&&(this._lastPoint=c,this._eventButton=d)}mousemoveWindow(i,c){const d=this._lastPoint;if(d){if(i.preventDefault(),function(y,b){const P=Kt[b];return y.buttons===void 0||(y.buttons&P)!==P}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(d,c)}}mouseupWindow(i){this._lastPoint&&T.mouseButton(i)===this._eventButton&&(this._moved&&T.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _t extends dn{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return c===0&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class Dn extends dn{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const d=.8*(c.x-i.x);if(d)return this._active=!0,{bearingDelta:d}}contextmenu(i){i.preventDefault()}}class Zn extends dn{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const d=-.5*(c.y-i.y);if(d)return this._active=!0,{pitchDelta:d}}contextmenu(i){i.preventDefault()}}class er{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0)}touchstart(i,c,d){return this._calculateTransform(i,c,d)}touchmove(i,c,d){if(this._active&&!(d.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,d)}touchend(i,c,d){this._calculateTransform(i,c,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,d){d.length>0&&(this._active=!0);const y=tt(d,c),b=new l.pointGeometry(0,0),P=new l.pointGeometry(0,0);let L=0;for(const q in y){const oe=y[q],ce=this._touches[q];ce&&(b._add(oe),P._add(oe.sub(ce)),L++,y[q]=oe)}if(this._touches=y,L<this._minTouches||!P.mag())return;const D=P.div(L);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(L),panDelta:D}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,c,d){return{}}touchstart(i,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,d){if(!this._firstTwoTouches)return;i.preventDefault();const[y,b]=this._firstTwoTouches,P=bt(d,c,y),L=bt(d,c,b);if(!P||!L)return;const D=this._aroundCenter?null:P.add(L).div(2);return this._move([P,L],D,i)}touchend(i,c,d){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,P=bt(d,c,y),L=bt(d,c,b);P&&L||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function bt(m,i,c){for(let d=0;d<m.length;d++)if(m[d].identifier===c)return i[d]}function Fi(m,i){return Math.log(m/i)/Math.LN2}class go extends Pr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const d=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Fi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fi(this._distance,d),pinchAround:c}}}function jo(m,i){return 180*m.angleWith(i)/Math.PI}class Qs extends Pr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const d=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:jo(this._vector,d),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,d=jo(i,this._startVector);return Math.abs(d)<c}}function ca(m){return Math.abs(m.y)>Math.abs(m.x)}class ds extends Pr{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,ca(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,d){const y=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(y,b,d.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}}gestureBeginsVertically(i,c,d){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,b=c.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const P=i.y>0==c.y>0;return ca(i)&&ca(c)&&P}}const w0={panStep:100,bearingStep:15,pitchStep:10};class E0{constructor(){const i=w0;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,d=0,y=0,b=0,P=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?d=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?d=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),P=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:L=>{const D=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:Ch,zoom:c?Math.round(D)+c*(i.shiftKey?2:1):D,bearing:L.getBearing()+d*this._bearingStep,pitch:L.getPitch()+y*this._pitchStep,offset:[-b*this._panStep,-P*this._panStep],center:L.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ch(m){return m*(2-m)}const ic=4.000244140625;class Th{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const d=l.exported.now(),y=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%ic==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=T.mousePos(this._el,i);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(c)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>ic?this._wheelZoomRate:this._defaultZoomRate;let D=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&D!==0&&(D=1/D);const q=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(q*D))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,d=this._startZoom,y=this._easing;let b,P=!1;if(this._type==="wheel"&&d&&y){const L=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),D=y(L);b=l.number(d,c,D),L<1?this._frameId||(this._frameId=!0):P=!0}else b=c,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=l.ease;if(this._prevEase){const d=this._prevEase,y=(l.exported.now()-d.start)/d.duration,b=d.easing(y+.01)-d.easing(y),P=.27/Math.sqrt(b*b+1e-4)*.01,L=Math.sqrt(.0729-P*P);c=l.bezier(P,L,.25,1)}return this._prevEase={start:l.exported.now(),duration:i,easing:c},c}reset(){this._active=!1}}class Ah{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Si{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:d.getZoom()+(i.shiftKey?-1:1),around:d.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Da{constructor(){this._tap=new Ct({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,c,d){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=c[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(i,c,d))}touchmove(i,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const y=c[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,c,d)}touchend(i,c,d){this._tapTime?this._swipePoint&&d.length===0&&this.reset():this._tap.touchend(i,c,d)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pd{constructor(i,c,d){this._el=i,this._mousePan=c,this._touchPan=d}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ih{constructor(i,c,d){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ph{constructor(i,c,d,y){this._el=i,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const el=m=>m.zoom||m.drag||m.pitch||m.rotate;class md extends l.Event{}function Ci(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class lr{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rc(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c),l.bindAll(["handleEvent","handleWindowEvent"],this);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,P]of this._listeners)T.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[i,c,d]of this._listeners)T.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(i){const c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new N(c,i));const y=c.boxZoom=new Le(c,i);this._add("boxZoom",y);const b=new Xt,P=new Si;c.doubleClickZoom=new Ah(P,b),this._add("tapZoom",b),this._add("clickZoom",P);const L=new Da;this._add("tapDragZoom",L);const D=c.touchPitch=new ds;this._add("touchPitch",D);const q=new Dn(i),oe=new Zn(i);c.dragRotate=new Ih(i,q,oe),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",oe,["mouseRotate"]);const ce=new _t(i),Se=new er(i);c.dragPan=new pd(d,ce,Se),this._add("mousePan",ce),this._add("touchPan",Se,["touchZoom","touchRotate"]);const Me=new Qs,Ce=new go;c.touchZoomRotate=new Ph(d,Ce,Me,L),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",Ce,["touchPan","touchRotate"]);const Re=c.scrollZoom=new Th(c,this);this._add("scrollZoom",Re,["mousePan"]);const Ve=c.keyboard=new E0;this._add("keyboard",Ve),this._add("blockableMapEvent",new fe(c));for(const We of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[We]&&c[We].enable(i[We])}_add(i,c,d){this._handlers.push({handlerName:i,handler:c,allowed:d}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(el(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,c,d){for(const y in i)if(y!==d&&(!c||c.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const d of i)this._el.contains(d.target)&&c.push(d);return c}handleEvent(i,c){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const d=i.type==="renderFrame"?void 0:i,y={needsRenderFrame:!1},b={},P={},L=i.touches,D=L?this._getMapTouches(L):void 0,q=D?T.touchPos(this._el,D):T.mousePos(this._el,i);for(const{handlerName:Se,handler:Me,allowed:Ce}of this._handlers){if(!Me.isEnabled())continue;let Re;this._blockedByActive(P,Ce,Se)?Me.reset():Me[c||i.type]&&(Re=Me[c||i.type](i,q,D),this.mergeHandlerResult(y,b,Re,Se,d),Re&&Re.needsRenderFrame&&this._triggerRenderFrame()),(Re||Me.isActive())&&(P[Se]=Me)}const oe={};for(const Se in this._previousActiveHandlers)P[Se]||(oe[Se]=d);this._previousActiveHandlers=P,(Object.keys(oe).length||Ci(y))&&(this._changes.push([y,b,oe]),this._triggerRenderFrame()),(Object.keys(P).length||Ci(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=y;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))}mergeHandlerResult(i,c,d,y,b){if(!d)return;l.extend(i,d);const P={handlerName:y,originalEvent:d.originalEvent||b};d.zoomDelta!==void 0&&(c.zoom=P),d.panDelta!==void 0&&(c.drag=P),d.pitchDelta!==void 0&&(c.pitch=P),d.bearingDelta!==void 0&&(c.rotate=P)}_applyChanges(){const i={},c={},d={};for(const[y,b,P]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new l.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),l.extend(c,b),l.extend(d,P);this._updateMapTransform(i,c,d),this._changes=[]}_updateMapTransform(i,c,d){const y=this._map,b=y.transform;if(!Ci(i))return this._fireEvents(c,d,!0);let{panDelta:P,zoomDelta:L,bearingDelta:D,pitchDelta:q,around:oe,pinchAround:ce}=i;ce!==void 0&&(oe=ce),y._stop(!0),oe=oe||y.transform.centerPoint;const Se=b.pointLocation(P?oe.sub(P):oe);D&&(b.bearing+=D),q&&(b.pitch+=q),L&&(b.zoom+=L),b.setLocationAtPoint(Se,oe),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,d,!0)}_fireEvents(i,c,d){const y=el(this._eventsInProgress),b=el(i),P={};for(const oe in i){const{originalEvent:ce}=i[oe];this._eventsInProgress[oe]||(P[`${oe}start`]=ce),this._eventsInProgress[oe]=i[oe]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const oe in P)this._fireEvent(oe,P[oe]);b&&this._fireEvent("move",b.originalEvent);for(const oe in i){const{originalEvent:ce}=i[oe];this._fireEvent(oe,ce)}const L={};let D;for(const oe in this._eventsInProgress){const{handlerName:ce,originalEvent:Se}=this._eventsInProgress[oe];this._handlersById[ce].isActive()||(delete this._eventsInProgress[oe],D=c[ce]||Se,L[`${oe}end`]=D)}for(const oe in L)this._fireEvent(oe,L[oe]);const q=el(this._eventsInProgress);if(d&&(y||b)&&!q){this._updatingCamera=!0;const oe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ce=Se=>Se!==0&&-this._bearingSnap<Se&&Se<this._bearingSnap;oe?(ce(oe.bearing||this._map.getBearing())&&(oe.bearing=0),this._map.easeTo(oe,{originalEvent:D})):(this._map.fire(new l.Event("moveend",{originalEvent:D})),ce(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new l.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new md("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const oc={extend:(m,...i)=>l.extend(m,...i),run(m){m()},logToElement(m,i=!1,c="log"){const d=window.document.getElementById(c);d&&(i&&(d.innerHTML=""),d.innerHTML+=`<br>${m}`)}};class kh extends l.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,d){return i=l.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,l.extend({offset:i},c),d)}panTo(i,c,d){return this.easeTo(l.extend({center:i},c),d)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,d){return this.easeTo(l.extend({zoom:i},c),d)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,d){return this.easeTo(l.extend({bearing:i},c),d)}resetNorth(i,c){return this.rotateTo(0,l.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=l.LngLatBounds.convert(i);const d=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),d,c)}_cameraForBoxAndBearing(i,c,d,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=l.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const rt=y.padding;y.padding={top:rt,bottom:rt,right:rt,left:rt}}y.padding=l.extend(b,y.padding);const P=this.transform,L=P.padding,D=P.project(l.LngLat.convert(i)),q=P.project(l.LngLat.convert(c)),oe=D.rotate(-d*Math.PI/180),ce=q.rotate(-d*Math.PI/180),Se=new l.pointGeometry(Math.max(oe.x,ce.x),Math.max(oe.y,ce.y)),Me=new l.pointGeometry(Math.min(oe.x,ce.x),Math.min(oe.y,ce.y)),Ce=Se.sub(Me),Re=(P.width-(L.left+L.right+y.padding.left+y.padding.right))/Ce.x,Ve=(P.height-(L.top+L.bottom+y.padding.top+y.padding.bottom))/Ce.y;if(Ve<0||Re<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const We=Math.min(P.scaleZoom(P.scale*Math.min(Re,Ve)),y.maxZoom),Je=l.pointGeometry.convert(y.offset),Ke=new l.pointGeometry((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(d*Math.PI/180),ct=Je.add(Ke).mult(P.scale/P.zoomScale(We));return{center:P.unproject(D.add(q).div(2).sub(ct)),zoom:We,bearing:d}}fitBounds(i,c,d){return this._fitInternal(this.cameraForBounds(i,c),c,d)}fitScreenCoordinates(i,c,d,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(i)),this.transform.pointLocation(l.pointGeometry.convert(c)),d,y),y,b)}_fitInternal(i,c,d){return i?(delete(c=l.extend(i,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(i,c){this.stop();const d=this.transform;let y=!1,b=!1,P=!1;return"zoom"in i&&d.zoom!==+i.zoom&&(y=!0,d.zoom=+i.zoom),i.center!==void 0&&(d.center=l.LngLat.convert(i.center)),"bearing"in i&&d.bearing!==+i.bearing&&(b=!0,d.bearing=+i.bearing),"pitch"in i&&d.pitch!==+i.pitch&&(P=!0,d.pitch=+i.pitch),i.padding==null||d.isPaddingEqual(i.padding)||(d.padding=i.padding),this.fire(new l.Event("movestart",c)).fire(new l.Event("move",c)),y&&this.fire(new l.Event("zoomstart",c)).fire(new l.Event("zoom",c)).fire(new l.Event("zoomend",c)),b&&this.fire(new l.Event("rotatestart",c)).fire(new l.Event("rotate",c)).fire(new l.Event("rotateend",c)),P&&this.fire(new l.Event("pitchstart",c)).fire(new l.Event("pitch",c)).fire(new l.Event("pitchend",c)),this.fire(new l.Event("moveend",c))}easeTo(i,c){this._stop(!1,i.easeId),((i=l.extend({offset:[0,0],duration:500,easing:l.ease},i)).animate===!1||!i.essential&&l.exported.prefersReducedMotion)&&(i.duration=0);const d=this.transform,y=this.getZoom(),b=this.getBearing(),P=this.getPitch(),L=this.getPadding(),D="zoom"in i?+i.zoom:y,q="bearing"in i?this._normalizeBearing(i.bearing,b):b,oe="pitch"in i?+i.pitch:P,ce="padding"in i?i.padding:d.padding,Se=l.pointGeometry.convert(i.offset);let Me=d.centerPoint.add(Se);const Ce=d.pointLocation(Me),Re=l.LngLat.convert(i.center||Ce);this._normalizeCenter(Re);const Ve=d.project(Ce),We=d.project(Re).sub(Ve),Je=d.zoomScale(D-y);let Ke,ct;i.around&&(Ke=l.LngLat.convert(i.around),ct=d.locationPoint(Ke));const rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||D!==y,this._rotating=this._rotating||b!==q,this._pitching=this._pitching||oe!==P,this._padding=!d.isPaddingEqual(ce),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,rt),this._ease(ut=>{if(this._zooming&&(d.zoom=l.number(y,D,ut)),this._rotating&&(d.bearing=l.number(b,q,ut)),this._pitching&&(d.pitch=l.number(P,oe,ut)),this._padding&&(d.interpolatePadding(L,ce,ut),Me=d.centerPoint.add(Se)),Ke)d.setLocationAtPoint(Ke,ct);else{const xt=d.zoomScale(d.zoom-y),St=D>y?Math.min(2,Je):Math.max(.5,Je),mt=Math.pow(St,1-ut),Yt=d.unproject(Ve.add(We.mult(ut*mt)).mult(xt));d.setLocationAtPoint(d.renderWorldCopies?Yt.wrap():Yt,Me)}this._fireMoveEvents(c)},ut=>{this._afterEase(c,ut)},i),this}_prepareEase(i,c,d={}){this._moving=!0,c||d.moving||this.fire(new l.Event("movestart",i)),this._zooming&&!d.zooming&&this.fire(new l.Event("zoomstart",i)),this._rotating&&!d.rotating&&this.fire(new l.Event("rotatestart",i)),this._pitching&&!d.pitching&&this.fire(new l.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new l.Event("move",i)),this._zooming&&this.fire(new l.Event("zoom",i)),this._rotating&&this.fire(new l.Event("rotate",i)),this._pitching&&this.fire(new l.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const d=this._zooming,y=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new l.Event("zoomend",i)),y&&this.fire(new l.Event("rotateend",i)),b&&this.fire(new l.Event("pitchend",i)),this.fire(new l.Event("moveend",i))}flyTo(i,c){if(!i.essential&&l.exported.prefersReducedMotion){const Pn=l.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pn,c)}this.stop(),i=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},i);const d=this.transform,y=this.getZoom(),b=this.getBearing(),P=this.getPitch(),L=this.getPadding(),D="zoom"in i?l.clamp(+i.zoom,d.minZoom,d.maxZoom):y,q="bearing"in i?this._normalizeBearing(i.bearing,b):b,oe="pitch"in i?+i.pitch:P,ce="padding"in i?i.padding:d.padding,Se=d.zoomScale(D-y),Me=l.pointGeometry.convert(i.offset);let Ce=d.centerPoint.add(Me);const Re=d.pointLocation(Ce),Ve=l.LngLat.convert(i.center||Re);this._normalizeCenter(Ve);const We=d.project(Re),Je=d.project(Ve).sub(We);let Ke=i.curve;const ct=Math.max(d.width,d.height),rt=ct/Se,ut=Je.mag();if("minZoom"in i){const Pn=l.clamp(Math.min(i.minZoom,y,D),d.minZoom,d.maxZoom),wr=ct/d.zoomScale(Pn-y);Ke=Math.sqrt(wr/ut*2)}const xt=Ke*Ke;function St(Pn){const wr=(rt*rt-ct*ct+(Pn?-1:1)*xt*xt*ut*ut)/(2*(Pn?rt:ct)*xt*ut);return Math.log(Math.sqrt(wr*wr+1)-wr)}function mt(Pn){return(Math.exp(Pn)-Math.exp(-Pn))/2}function Yt(Pn){return(Math.exp(Pn)+Math.exp(-Pn))/2}const Ft=St(0);let pn=function(Pn){return Yt(Ft)/Yt(Ft+Ke*Pn)},$n=function(Pn){return ct*((Yt(Ft)*(mt(wr=Ft+Ke*Pn)/Yt(wr))-mt(Ft))/xt)/ut;var wr},In=(St(1)-Ft)/Ke;if(Math.abs(ut)<1e-6||!isFinite(In)){if(Math.abs(ct-rt)<1e-6)return this.easeTo(i,c);const Pn=rt<ct?-1:1;In=Math.abs(Math.log(rt/ct))/Ke,$n=function(){return 0},pn=function(wr){return Math.exp(Pn*Ke*wr)}}return i.duration="duration"in i?+i.duration:1e3*In/("screenSpeed"in i?+i.screenSpeed/Ke:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=b!==q,this._pitching=oe!==P,this._padding=!d.isPaddingEqual(ce),this._prepareEase(c,!1),this._ease(Pn=>{const wr=Pn*In,vn=1/pn(wr);d.zoom=Pn===1?D:y+d.scaleZoom(vn),this._rotating&&(d.bearing=l.number(b,q,Pn)),this._pitching&&(d.pitch=l.number(P,oe,Pn)),this._padding&&(d.interpolatePadding(L,ce,Pn),Ce=d.centerPoint.add(Me));const Ln=Pn===1?Ve:d.unproject(We.add(Je.mult($n(wr))).mult(vn));d.setLocationAtPoint(d.renderWorldCopies?Ln.wrap():Ln,Ce),this._fireMoveEvents(c)},()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}if(!i){const d=this.handlers;d&&d.stop(!1)}return this}_ease(i,c,d){d.animate===!1||d.duration===0?(i(1),c()):(this._easeStart=l.exported.now(),this._easeOptions=d,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=l.wrap(i,-180,180);const d=Math.abs(i-c);return Math.abs(i-360-c)<d&&(i-=360),Math.abs(i+360-c)<d&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const d=i.lng-c.center.lng;i.lng+=d>180?-360:d<-180?360:0}}class Mh{constructor(i={}){this.options=i,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const d=this._map._getUIString(`AttributionControl.${c}`);i.title=d,i.setAttribute("aria-label",d)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.sourceCaches;for(const y in c){const b=c[y];if(b.used){const P=b.getSource();P.attribution&&i.indexOf(P.attribution)<0&&i.push(P.attribution)}}i=i.filter(y=>String(y).trim()),i.sort((y,b)=>y.length-b.length),i=i.filter((y,b)=>{for(let P=b+1;P<i.length;P++)if(i[P].indexOf(y)>=0)return!1;return!0});const d=i.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,i.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class gd{constructor(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)}onAdd(i){this._map=i,this._container=T.create("div","maplibregl-ctrl mapboxgl-ctrl");const c=T.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(void 0),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const i=this._map.style.sourceCaches;for(const c in i)if(i[c].getSource().maplibreLogo)return!0;return!1}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("maplibregl-compact","mapboxgl-compact"):c.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class yd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(const y of d)if(y.id===i)return void(y.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const d of c)if(!d.cancelled&&(d.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const S0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Do={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},ac={showCompass:!0,showZoom:!0,visualizePitch:!1};class qt{constructor(i,c,d=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Dn({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,d&&(this.mousePitch=new Zn({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),T.addEventListener(c,"mousedown",this.mousedown),T.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(c,"touchmove",this.touchmove),T.addEventListener(c,"touchend",this.touchend),T.addEventListener(c,"touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),T.disableDrag()}move(i,c){const d=this.map,y=this.mouseRotate.mousemoveWindow(i,c);if(y&&y.bearingDelta&&d.setBearing(d.getBearing()+y.bearingDelta),this.mousePitch){const b=this.mousePitch.mousemoveWindow(i,c);b&&b.pitchDelta&&d.setPitch(d.getPitch()+b.pitchDelta)}}off(){const i=this.element;T.removeEventListener(i,"mousedown",this.mousedown),T.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(i,"touchmove",this.touchmove),T.removeEventListener(i,"touchend",this.touchend),T.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(l.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),T.mousePos(this.element,i)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,T.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ln(m,i,c){if(m=new l.LngLat(m.lng,m.lat),i){const d=new l.LngLat(m.lng-360,m.lat),y=new l.LngLat(m.lng+360,m.lat),b=c.locationPoint(m).distSqr(i);c.locationPoint(d).distSqr(i)<b?m=d:c.locationPoint(y).distSqr(i)<b&&(m=y)}for(;Math.abs(m.lng-c.center.lng)>180;){const d=c.locationPoint(m);if(d.x>=0&&d.y>=0&&d.x<=c.width&&d.y<=c.height)break;m.lng>c.center.lng?m.lng-=360:m.lng+=360}return m}const tl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function sc(m,i,c){const d=m.classList;for(const y in tl)d.remove(`maplibregl-${c}-anchor-${y}`,`mapboxgl-${c}-anchor-${y}`);d.add(`maplibregl-${c}-anchor-${i}`,`mapboxgl-${c}-anchor-${i}`)}class uu extends l.Evented{constructor(i,c){if(super(),(i instanceof HTMLElement||c)&&(i=l.extend({element:i},c)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const d=T.createNS("http://www.w3.org/2000/svg","svg"),y=41,b=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${y}px`),d.setAttributeNS(null,"width",`${b}px`),d.setAttributeNS(null,"viewBox",`0 0 ${b} ${y}`);const P=T.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const L=T.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill-rule","nonzero");const D=T.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Je of q){const Ke=T.createNS("http://www.w3.org/2000/svg","ellipse");Ke.setAttributeNS(null,"opacity","0.04"),Ke.setAttributeNS(null,"cx","10.5"),Ke.setAttributeNS(null,"cy","5.80029008"),Ke.setAttributeNS(null,"rx",Je.rx),Ke.setAttributeNS(null,"ry",Je.ry),D.appendChild(Ke)}const oe=T.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill",this._color);const ce=T.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),oe.appendChild(ce);const Se=T.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"fill","#000000");const Me=T.createNS("http://www.w3.org/2000/svg","path");Me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Se.appendChild(Me);const Ce=T.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ce.setAttributeNS(null,"fill","#FFFFFF");const Re=T.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ve=T.createNS("http://www.w3.org/2000/svg","circle");Ve.setAttributeNS(null,"fill","#000000"),Ve.setAttributeNS(null,"opacity","0.25"),Ve.setAttributeNS(null,"cx","5.5"),Ve.setAttributeNS(null,"cy","5.5"),Ve.setAttributeNS(null,"r","5.4999962");const We=T.createNS("http://www.w3.org/2000/svg","circle");We.setAttributeNS(null,"fill","#FFFFFF"),We.setAttributeNS(null,"cx","5.5"),We.setAttributeNS(null,"cy","5.5"),We.setAttributeNS(null,"r","5.4999962"),Re.appendChild(Ve),Re.appendChild(We),L.appendChild(D),L.appendChild(oe),L.appendChild(Se),L.appendChild(Ce),L.appendChild(Re),d.appendChild(L),d.setAttributeNS(null,"height",y*this._scale+"px"),d.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(d),this._offset=l.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),sc(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const c=i.code,d=i.charCode||i.keyCode;c!=="Space"&&c!=="Enter"&&d!==32&&d!==13||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,d=this._element;this._popup&&(c===d||d.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ln(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(c=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${tl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${d} ${c}`)}getOffset(){return this._offset}setOffset(i){return this._offset=l.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ti={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ha,Bi=0,cu=!1;const lc={maxWidth:100,unit:"metric"};function _r(m,i,c){const d=c&&c.maxWidth||100,y=m._container.clientHeight/2,b=m.unproject([0,y]),P=m.unproject([d,y]),L=b.distanceTo(P);if(c&&c.unit==="imperial"){const D=3.2808*L;D>5280?br(i,d,D/5280,m._getUIString("ScaleControl.Miles")):br(i,d,D,m._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?br(i,d,L/1852,m._getUIString("ScaleControl.NauticalMiles")):L>=1e3?br(i,d,L/1e3,m._getUIString("ScaleControl.Kilometers")):br(i,d,L,m._getUIString("ScaleControl.Meters"))}function br(m,i,c,d){const y=function(b){const P=Math.pow(10,`${Math.floor(b)}`.length-1);let L=b/P;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(D){const q=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*q)/q}(L),P*L}(c);m.style.width=i*(y/c)+"px",m.innerHTML=`${y}&nbsp;${d}`}const vd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function uc(m){if(m){if(typeof m=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(m,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,m),"top-left":new l.pointGeometry(i,i),"top-right":new l.pointGeometry(-i,i),bottom:new l.pointGeometry(0,-m),"bottom-left":new l.pointGeometry(i,-i),"bottom-right":new l.pointGeometry(-i,-i),left:new l.pointGeometry(m,0),right:new l.pointGeometry(-m,0)}}if(m instanceof l.pointGeometry||Array.isArray(m)){const i=l.pointGeometry.convert(m);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.pointGeometry.convert(m.center||[0,0]),top:l.pointGeometry.convert(m.top||[0,0]),"top-left":l.pointGeometry.convert(m["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(m["top-right"]||[0,0]),bottom:l.pointGeometry.convert(m.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(m["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(m["bottom-right"]||[0,0]),left:l.pointGeometry.convert(m.left||[0,0]),right:l.pointGeometry.convert(m.right||[0,0])}}return uc(new l.pointGeometry(0,0))}const fu={supported:_,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends kh{constructor(m){var i;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(m=l.extend({},Do,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new la(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),{bearingSnap:m.bearingSnap}),this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new yd,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},S0,m.locale),this._clickTolerance=m.clickTolerance,this._pixelRatio=(i=m.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new F(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new lr(this,m),this._hash=m.hash&&new ou(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,l.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Mh({customAttribution:m.customAttribution})),this.addControl(new gd,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new l.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new l.Event(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new l.Event("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(m,i){if(i===void 0&&(i=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=m.onAdd(this);this._controls.push(m);const d=this._controlPositions[i];return i.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(m);return i>-1&&this._controls.splice(i,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}resize(m){const i=this._containerDimensions(),c=i[0],d=i[1];this._resizeCanvas(c,d,this.getPixelRatio()),this.transform.resize(c,d),this.painter.resize(c,d,this.getPixelRatio());const y=!this._moving;return y&&(this.stop(),this.fire(new l.Event("movestart",m)).fire(new l.Event("move",m))),this.fire(new l.Event("resize",m)),y&&this.fire(new l.Event("moveend",m)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(m){const[i,c]=this._containerDimensions();this._pixelRatio=m,this._resizeCanvas(i,c,m),this.painter.resize(i,c,m)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(l.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m==null?-2:m)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m==null?22:m)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m==null?0:m)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m==null?60:m)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(l.LngLat.convert(m))}unproject(m){return this.transform.pointLocation(l.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(m,i,c){if(m==="mouseenter"||m==="mouseover"){let d=!1;return{layer:i,listener:c,delegates:{mousemove:b=>{const P=this.getLayer(i)?this.queryRenderedFeatures(b.point,{layers:[i]}):[];P.length?d||(d=!0,c.call(this,new sr(m,this,b.originalEvent,{features:P}))):d=!1},mouseout:()=>{d=!1}}}}if(m==="mouseleave"||m==="mouseout"){let d=!1;return{layer:i,listener:c,delegates:{mousemove:P=>{(this.getLayer(i)?this.queryRenderedFeatures(P.point,{layers:[i]}):[]).length?d=!0:d&&(d=!1,c.call(this,new sr(m,this,P.originalEvent)))},mouseout:P=>{d&&(d=!1,c.call(this,new sr(m,this,P.originalEvent)))}}}}{const d=y=>{const b=this.getLayer(i)?this.queryRenderedFeatures(y.point,{layers:[i]}):[];b.length&&(y.features=b,c.call(this,y),delete y.features)};return{layer:i,listener:c,delegates:{[m]:d}}}}on(m,i,c){if(c===void 0)return super.on(m,i);const d=this._createDelegatedListener(m,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(d);for(const y in d.delegates)this.on(y,d.delegates[y]);return this}once(m,i,c){if(c===void 0)return super.once(m,i);const d=this._createDelegatedListener(m,i,c);for(const y in d.delegates)this.once(y,d.delegates[y]);return this}off(m,i,c){return c===void 0?super.off(m,i):(this._delegatedListeners&&this._delegatedListeners[m]&&(d=>{const y=this._delegatedListeners[m];for(let b=0;b<y.length;b++){const P=y[b];if(P.layer===i&&P.listener===c){for(const L in P.delegates)this.off(L,P.delegates[L]);return y.splice(b,1),this}}})(),this)}queryRenderedFeatures(m,i){if(!this.style)return[];let c;if(i!==void 0||m===void 0||m instanceof l.pointGeometry||Array.isArray(m)||(i=m,m=void 0),i=i||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof m[0]=="number")c=[l.pointGeometry.convert(m)];else{const d=l.pointGeometry.convert(m[0]),y=l.pointGeometry.convert(m[1]);c=[d,new l.pointGeometry(y.x,d.y),y,new l.pointGeometry(d.x,y.y),d]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(m,i){return this.style.querySourceFeatures(m,i)}setStyle(m,i){return(i=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(m,i))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const i=this._locale[m];if(i==null)throw new Error(`Missing UI string '${m}'`);return i}_updateStyle(m,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new ro(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ro(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,i){if(typeof m=="string"){const c=this._requestManager.transformRequest(m,l.ResourceType.Style);l.getJSON(c,(d,y)=>{d?this.fire(new l.ErrorEvent(d)):y&&this._updateDiff(y,i)})}else typeof m=="object"&&this._updateDiff(m,i)}_updateDiff(m,i){try{this.style.setState(m)&&this._update(!0)}catch(c){l.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(m,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(m,i){return this._lazyInitEmptyStyle(),this.style.addSource(m,i),this._update(!0)}isSourceLoaded(m){const i=this.style&&this.style.sourceCaches[m];if(i!==void 0)return i.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${m}'`)))}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const i in m){const c=m[i]._tiles;for(const d in c){const y=c[d];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(m,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,i,c)}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,i,{pixelRatio:c=1,sdf:d=!1,stretchX:y,stretchY:b,content:P}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||l.isImageBitmap(i)){const{width:L,height:D,data:q}=l.exported.getImageData(i);this.style.addImage(m,{data:new l.RGBAImage({width:L,height:D},q),pixelRatio:c,stretchX:y,stretchY:b,content:P,sdf:d,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:L,height:D,data:q}=i,oe=i;this.style.addImage(m,{data:new l.RGBAImage({width:L,height:D},new Uint8Array(q)),pixelRatio:c,stretchX:y,stretchY:b,content:P,sdf:d,version:0,userImage:oe}),oe.onAdd&&oe.onAdd(this,m)}}}updateImage(m,i){const c=this.style.getImage(m);if(!c)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=i instanceof HTMLImageElement||l.isImageBitmap(i)?l.exported.getImageData(i):i,{width:y,height:b,data:P}=d;if(y===void 0||b===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||b!==c.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(i instanceof HTMLImageElement||l.isImageBitmap(i));c.data.replace(P,L),this.style.updateImage(m,c)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,i){l.getImage(this._requestManager.transformRequest(m,l.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(m,i){return this._lazyInitEmptyStyle(),this.style.addLayer(m,i),this._update(!0)}moveLayer(m,i){return this.style.moveLayer(m,i),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,i,c){return this.style.setLayerZoomRange(m,i,c),this._update(!0)}setFilter(m,i,c={}){return this.style.setFilter(m,i,c),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,i,c,d={}){return this.style.setPaintProperty(m,i,c,d),this._update(!0)}getPaintProperty(m,i){return this.style.getPaintProperty(m,i)}setLayoutProperty(m,i,c,d={}){return this.style.setLayoutProperty(m,i,c,d),this._update(!0)}getLayoutProperty(m,i){return this.style.getLayoutProperty(m,i)}setLight(m,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(m,i){return this.style.setFeatureState(m,i),this._update()}removeFeatureState(m,i){return this.style.removeFeatureState(m,i),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,i=0;return this._container&&(m=this._container.clientWidth||400,i=this._container.clientHeight||300),[m,i]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=T.create("div","maplibregl-canvas-container mapboxgl-canvas-container",m);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions();this._resizeCanvas(c[0],c[1],this.getPixelRatio());const d=this._controlContainer=T.create("div","maplibregl-control-container mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{y[b]=T.create("div",`maplibregl-ctrl-${b} mapboxgl-ctrl-${b}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,i,c){this._canvas.width=c*m,this._canvas.height=c*i,this._canvas.style.width=`${m}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const m=l.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);i?(this.painter=new Ei(i,this.transform),l.exported$1.testSupport(i)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){let i,c=0;const d=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,i),c=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,L=l.exported.now();this.style.zoomHistory.update(P,L);const D=new l.EvaluationParameters(P,{now:L,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=D.crossFadingFactor();q===1&&q===this._crossFadingFactor||(y=!0,this._crossFadingFactor=q),this.style.update(D)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const P=l.exported.now()-c;d.endQueryEXT(d.TIME_ELAPSED_EXT,i),setTimeout(()=>{const L=d.getQueryObjectEXT(i,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(i),this.fire(new l.Event("gpu-timing-frame",{cpuTime:P,gpuTime:L}))},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(P);this.fire(new l.Event("gpu-timing-layer",{layerTimes:L}))},50)}const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(m=>{l.PerformanceUtils.frame(m),this._frame=null,this._render(m)}))}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}_setCacheLimits(m,i){l.setCacheLimits(m,i)}},NavigationControl:class{constructor(m){this.options=l.extend({},ac,m),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map.getZoom(),i=m===this._map.getMaxZoom(),c=m===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())}_rotateCompassArrow(){const m=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=m}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qt(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,i){const c=T.create("button",m,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(m,i){const c=this._map._getUIString(`NavigationControl.${i}`);m.title=c,m.setAttribute("aria-label",c)}},GeolocateControl:class extends l.Evented{constructor(m){super(),this.options=l.extend({},Ti,m),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(m){var i;return this._map=m,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,ha!==void 0?i(ha):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(c=>{ha=c.state!=="denied",i(ha)}):(ha=!!window.navigator.geolocation,i(ha)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Bi=0,cu=!1}_isOutOfMapMaxBounds(m){const i=this._map.getMaxBounds(),c=m.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",m)),this._finish()}}_updateCamera(m){const i=new l.LngLat(m.coords.longitude,m.coords.latitude),c=m.coords.accuracy,d=this._map.getBearing(),y=l.extend({bearing:d},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),y,{geolocateSource:!0})}_updateMarker(m){if(m){const i=new l.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map._container.clientHeight/2,i=this._map.unproject([0,m]),c=this._map.unproject([1,m]),d=i.distanceTo(c),y=Math.ceil(2*this._accuracy/d);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&cu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new uu(this._dotElement),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new uu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bi--,cu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Bi++,Bi>1?(m={maximumAge:6e5,timeout:0},cu=!0):(m=this.options.positionOptions,cu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Mh,ScaleControl:class{constructor(m){this.options=l.extend({},lc,m),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){_r(this._map,this._container,this.options)}onAdd(m){return this._map=m,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(m){this.options.unit=m,_r(this._map,this._container,this.options)}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(m){super(),this.options=l.extend(Object.create(vd),m),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=l.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const i=document.createDocumentFragment(),c=document.createElement("body");let d;for(c.innerHTML=m;d=c.firstChild,d;)i.appendChild(d);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){this._container&&this._container.classList.add(m)}removeClassName(m){this._container&&this._container.classList.remove(m)}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(m){this._update(m.point)}_onMouseMove(m){this._update(m.point)}_onDrag(m){this._update(m.point)}_update(m){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=T.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(b=>this._container.classList.add(b)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ln(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!m))return;const i=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat);let c=this.options.anchor;const d=uc(this.options.offset);if(!c){const b=this._container.offsetWidth,P=this._container.offsetHeight;let L;L=i.y+d.bottom.y<P?["top"]:i.y>this._map.transform.height-P?["bottom"]:[],i.x<b/2?L.push("left"):i.x>this._map.transform.width-b/2&&L.push("right"),c=L.length===0?"bottom":L.join("-")}const y=i.add(d[c]).round();T.setTransform(this._container,`${tl[c]} translate(${y.x}px,${y.y}px)`),sc(this._container,c,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(hu);m&&m.focus()}_onClose(){this.remove()}},Marker:uu,Style:ro,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:Ne,GeoJSONSource:Be,ImageSource:Pe,RasterDEMTileSource:_e,RasterTileSource:he,VectorTileSource:te,VideoSource:$e,prewarm:function(){R().acquire(wn)},clearPrewarmedResources:function(){const m=Ee;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(wn),Ee=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return on.workerCount},set workerCount(m){on.workerCount=m},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){l.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){l.clearTileCache(m)},workerUrl:"",addProtocol(m,i){l.config.REGISTERED_PROTOCOLS[m]=i},removeProtocol(m){delete l.config.REGISTERED_PROTOCOLS[m]}};return oc.extend(fu,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),fu});var g=u;return g})})(jv);var H3=jv.exports,sC=Object.freeze(US({__proto__:null,[Symbol.toStringTag]:"Module",default:H3},[jv.exports]));const lC="modulepreload",ib={},uC="/osm-address-editor-vite/",cC=function(t,r){return!r||r.length===0?t():Promise.all(r.map(s=>{if(s=`${uC}${s}`,s in ib)return;ib[s]=!0;const u=s.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${f}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":lC,u||(g.as="script",g.crossOrigin=""),g.href=s,document.head.appendChild(g),u)return new Promise((l,_)=>{g.addEventListener("load",l),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},hC=gt.exports.createContext(null);function ob(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function ab(e,t){const r=t.viewState||t;let s=!1;if("longitude"in r&&"latitude"in r){const u=e.center;e.center=new u.constructor(r.longitude,r.latitude),s=s||u!==e.center}if("zoom"in r){const u=e.zoom;e.zoom=r.zoom,s=s||u!==e.zoom}if("bearing"in r){const u=e.bearing;e.bearing=r.bearing,s=s||u!==e.bearing}if("pitch"in r){const u=e.pitch;e.pitch=r.pitch,s=s||u!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(s=!0,e.padding=r.padding),s}const fC=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function sb(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const s of e.layers)t[s.id]=s;const r=e.layers.map(s=>{const u=t[s.ref];let f=null;if("interactive"in s&&(f={...s},delete f.interactive),u){f=f||{...s},delete f.ref;for(const g of fC)g in u&&(f[g]=u[g])}return f||s});return{...e,layers:r}}function dC(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0,u=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return r===u&&s===f}function Wo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Wo(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const u of r)if(!t.hasOwnProperty(u)||!Wo(e[u],t[u]))return!1;return!0}return!1}const lb={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},jg={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},ub={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},pC=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],mC=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class lh{constructor(t,r,s){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=u=>{const f=this.props[ub[u.type]];f&&f(u)},this._onPointerEvent=u=>{(u.type==="mousemove"||u.type==="mouseout")&&this._updateHover(u);const f=this.props[lb[u.type]];if(f){if(this.props.interactiveLayerIds&&u.type!=="mouseover"&&u.type!=="mouseout"){const g=this._hoveredFeatures||this._map.queryRenderedFeatures(u.point,{layers:this.props.interactiveLayerIds});if(!g.length)return;u.features=g}f(u),delete u.features}},this._onCameraEvent=u=>{if(!this._internalUpdate){const f=this.props[jg[u.type]];f&&f(u)}u.type in this._deferredEvents&&(this._deferredEvents[u.type]=!1)},this._MapClass=t,this.props=r,this._initialize(s)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const s=this._updateSettings(t,r);s&&(this._renderTransform=this._map.transform.clone());const u=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(s||u||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const s=lh.savedMaps.pop();if(!s)return null;const u=s.map,f=u.getContainer();for(r.className=f.className;f.childNodes.length>0;)r.appendChild(f.childNodes[0]);return u._container=r,t.initialViewState&&s._updateViewState(t.initialViewState,!1),u.resize(),s.setProps({...t,styleDiffing:!1}),u.isStyleLoaded()?u.fire("load"):u.once("styledata",()=>u.fire("load")),s}_initialize(t){const{props:r}=this,s={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||gC()||null,container:t,style:sb(r.mapStyle)},u=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[u.longitude||0,u.latitude||0],zoom:u.zoom||0,pitch:u.pitch||0,bearing:u.bearing||0}),r.gl){const C=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=C,r.gl)}const f=new this._MapClass(s);u.padding&&f.setPadding(u.padding),r.cursor&&(f.getCanvas().style.cursor=r.cursor),this._renderTransform=f.transform.clone();const g=f._render;f._render=C=>{this._inRender=!0,g.call(f,C),this._inRender=!1};const l=f._renderTaskQueue.run;f._renderTaskQueue.run=C=>{l.call(f._renderTaskQueue,C),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const _=f.fire;f.fire=this._fireEvent.bind(this,_),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>this._updateStyleComponents(this.props,{})),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const C in lb)f.on(C,this._onPointerEvent);for(const C in jg)f.on(C,this._onCameraEvent);for(const C in ub)f.on(C,this._onEvent);this._map=f}recycle(){lh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:r}=t;if(r){const s=this._map;if(r.width!==s.transform.width||r.height!==s.transform.height)return s.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const s=this._map,u=this._renderTransform,{zoom:f,pitch:g,bearing:l}=u,_=ab(u,{...ob(s.transform),...t});if(_&&r){const C=this._deferredEvents;C.move=!0,C.zoom||(C.zoom=f!==u.zoom),C.rotate||(C.rotate=l!==u.bearing),C.pitch||(C.pitch=g!==u.pitch)}return s.isMoving()||ab(s.transform,t),_}_updateSettings(t,r){const s=this._map;let u=!1;for(const f of pC)f in t&&!Wo(t[f],r[f])&&(u=!0,s[`set${f[0].toUpperCase()}${f.slice(1)}`](t[f]));return u}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==r.mapStyle){const s={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(s.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(sb(t.mapStyle),s),!0}return!1}_updateStyleComponents(t,r){const s=this._map;let u=!1;return s.style.loaded()&&("light"in t&&!Wo(t.light,r.light)&&(u=!0,s.setLight(t.light)),"fog"in t&&!Wo(t.fog,r.fog)&&(u=!0,s.setFog(t.fog)),"terrain"in t&&!Wo(t.terrain,r.terrain)&&(!t.terrain||s.getSource(t.terrain.source))&&(u=!0,s.setTerrain(t.terrain))),u}_updateHandlers(t,r){const s=this._map;let u=!1;for(const f of mC){const g=t[f];Wo(g,r[f])||(u=!0,g?s[f].enable(g):s[f].disable())}return u}_updateHover(t){var u;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const f=t.type,g=((u=this._hoveredFeatures)==null?void 0:u.length)>0;let l;if(f==="mousemove")try{l=this._map.queryRenderedFeatures(t.point,{layers:r.interactiveLayerIds})}catch{l=[]}else l=[];const _=l.length>0;!_&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,_&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,r,s){const u=this._map,f=u.transform,g=typeof r=="string"?r:r.type;return g==="move"&&this._updateViewState(this.props,!1),g in jg&&(typeof r=="object"&&(r.viewState=ob(f)),this._map.isMoving())?(u.transform=this._renderTransform,t.call(u,r,s),u.transform=f,u):(t.call(u,r,s),u)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const s in this._deferredEvents)this._deferredEvents[s]&&t.fire(s);this._internalUpdate=!1;const r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=r}}}lh.savedMaps=[];function gC(){let e=null;if(typeof location!="undefined"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const yC=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function cb(e,t){if(!e)return null;const r=e.map,s={getMap:()=>r,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:u=>e.transform.locationPoint(t.LngLat.convert(u)),unproject:u=>e.transform.pointLocation(t.Point.convert(u))};for(const u of vC(r))!(u in s)&&!yC.includes(u)&&(s[u]=r[u].bind(r));return s}function vC(e){const t=new Set;let r=e;for(;r;){for(const s of Object.getOwnPropertyNames(r))s[0]!=="_"&&typeof e[s]=="function"&&s!=="fire"&&s!=="setEventedParent"&&t.add(s);r=Object.getPrototypeOf(r)}return Array.from(t)}const xC=typeof document!="undefined"?gt.exports.useLayoutEffect:gt.exports.useEffect,_C=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function bC(e,t){for(const r of _C)r in t&&(e[r]=t[r]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,r=>{r&&console.error(r)},!1)}const gh=gt.exports.createContext(null),wC={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},Dv=gt.exports.forwardRef((e,t)=>{const r=gt.exports.useContext(hC),[s,u]=gt.exports.useState(null),f=gt.exports.useRef(),{current:g}=gt.exports.useRef({mapLib:null,map:null});gt.exports.useEffect(()=>{const _=e.mapLib;let C=!0,S;return Promise.resolve(_||cC(()=>Promise.resolve().then(function(){return sC}),void 0)).then(E=>{if(!!C){if(E.Map||(E=E.default),!E||!E.Map)throw new Error("Invalid mapLib");if(E.supported(e))bC(E,e),e.reuseMaps&&(S=lh.reuse(e,f.current)),S||(S=new lh(E.Map,e,f.current)),g.map=S.map,g.mapLib=E,u(S),r==null||r.onMapMount(cb(S,E),e.id);else throw new Error("Map is not supported by this browser")}}).catch(E=>{e.onError({type:"error",target:null,originalEvent:null,error:E})}),()=>{C=!1,S&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?S.recycle():S.destroy())}},[]),xC(()=>{s&&s.setProps(e)}),gt.exports.useImperativeHandle(t,()=>cb(s,g.mapLib),[s]);const l=gt.exports.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]);return gt.exports.createElement("div",{id:e.id,ref:f,style:l},s&&gt.exports.createElement(gh.Provider,{value:g},e.children))});Dv.displayName="Map";Dv.defaultProps=wC;const EC=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Du(e,t){if(!e||!t)return;const r=e.style;for(const s in t){const u=t[s];Number.isFinite(u)&&!EC.test(s)?r[s]=`${u}px`:r[s]=u}}const SC={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function W3(e){const{map:t,mapLib:r}=gt.exports.useContext(gh),s=gt.exports.useRef({props:e});s.current.props=e;const u=gt.exports.useMemo(()=>{let f=!1;gt.exports.Children.forEach(e.children,_=>{_&&(f=!0)});const g={...e,element:f?document.createElement("div"):null},l=new r.Marker(g).setLngLat([e.longitude,e.latitude]);return l.getElement().addEventListener("click",_=>{var C,S;(S=(C=s.current.props).onClick)==null||S.call(C,{type:"click",target:l,originalEvent:_})}),l.on("dragstart",_=>{var S,E;const C=_;C.lngLat=u.getLngLat(),(E=(S=s.current.props).onDragStart)==null||E.call(S,C)}),l.on("drag",_=>{var S,E;const C=_;C.lngLat=u.getLngLat(),(E=(S=s.current.props).onDrag)==null||E.call(S,C)}),l.on("dragend",_=>{var S,E;const C=_;C.lngLat=u.getLngLat(),(E=(S=s.current.props).onDragEnd)==null||E.call(S,C)}),l},[]);return gt.exports.useEffect(()=>(u.addTo(t),()=>{u.remove()}),[]),gt.exports.useEffect(()=>{Du(u.getElement(),e.style)},[e.style]),(u.getLngLat().lng!==e.longitude||u.getLngLat().lat!==e.latitude)&&u.setLngLat([e.longitude,e.latitude]),e.offset&&!dC(u.getOffset(),e.offset)&&u.setOffset(e.offset),u.isDraggable()!==e.draggable&&u.setDraggable(e.draggable),u.getRotation()!==e.rotation&&u.setRotation(e.rotation),u.getRotationAlignment()!==e.rotationAlignment&&u.setRotationAlignment(e.rotationAlignment),u.getPitchAlignment()!==e.pitchAlignment&&u.setPitchAlignment(e.pitchAlignment),u.getPopup()!==e.popup&&u.setPopup(e.popup),Gm.exports.createPortal(e.children,u.getElement())}W3.defaultProps=SC;var CC=gt.exports.memo(W3);function hb(e){return new Set(e?e.trim().split(/\s+/):[])}function TC(e){const{map:t,mapLib:r}=gt.exports.useContext(gh),s=gt.exports.useMemo(()=>document.createElement("div"),[]),u=gt.exports.useRef({props:e});u.current.props=e;const f=gt.exports.useMemo(()=>{const g={...e},l=new r.Popup(g).setLngLat([e.longitude,e.latitude]);return l.on("open",_=>{var C,S;(S=(C=u.current.props).onOpen)==null||S.call(C,_)}),l.on("close",_=>{var C,S;(S=(C=u.current.props).onClose)==null||S.call(C,_)}),l},[]);if(gt.exports.useEffect(()=>(f.setDOMContent(s).addTo(t),()=>{f.isOpen()&&f.remove()}),[]),gt.exports.useEffect(()=>{Du(f.getElement(),e.style)},[e.style]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Wo(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const g=hb(f.options.className),l=hb(e.className);for(const _ of g)l.has(_)||f.removeClassName(_);for(const _ of l)g.has(_)||f.addClassName(_);f.options.className=e.className}return Gm.exports.createPortal(e.children,s)}gt.exports.memo(TC);function ad(e,t,r){const s=gt.exports.useContext(gh),u=gt.exports.useMemo(()=>e(s),[]);return gt.exports.useEffect(()=>{var g;const{map:f}=s;return f.hasControl(u)||f.addControl(u,(g=r||t)==null?void 0:g.position),()=>{typeof t=="function"&&t(s),f.hasControl(u)&&f.removeControl(u)}},[]),u}function AC(e){const t=ad(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return gt.exports.useEffect(()=>{Du(t._container,e.style)},[e.style]),null}gt.exports.memo(AC);function IC(e){const t=ad(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return gt.exports.useEffect(()=>{Du(t._controlContainer,e.style)},[e.style]),null}gt.exports.memo(IC);const Z3=gt.exports.forwardRef((e,t)=>{const r=gt.exports.useRef({props:e}),s=ad(({mapLib:u})=>{const f=new u.GeolocateControl(e);return f.on("geolocate",g=>{var l,_;(_=(l=r.current.props).onGeolocate)==null||_.call(l,g)}),f.on("error",g=>{var l,_;(_=(l=r.current.props).onError)==null||_.call(l,g)}),f.on("outofmaxbounds",g=>{var l,_;(_=(l=r.current.props).onOutOfMaxBounds)==null||_.call(l,g)}),f.on("trackuserlocationstart",g=>{var l,_;(_=(l=r.current.props).onTrackUserLocationStart)==null||_.call(l,g)}),f.on("trackuserlocationend",g=>{var l,_;(_=(l=r.current.props).onTrackUserLocationEnd)==null||_.call(l,g)}),f},{position:e.position});return r.current.props=e,gt.exports.useImperativeHandle(t,()=>({trigger:()=>s.trigger()}),[]),gt.exports.useEffect(()=>{Du(s._container,e.style)},[e.style]),null});Z3.displayName="GeolocateControl";var PC=gt.exports.memo(Z3);function kC(e){const t=ad(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return gt.exports.useEffect(()=>{Du(t._container,e.style)},[e.style]),null}var MC=gt.exports.memo(kC);const zC={unit:"metric",maxWidth:100};function X3(e){const t=ad(({mapLib:r})=>new r.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),gt.exports.useEffect(()=>{Du(t._container,e.style)},[e.style]),null}X3.defaultProps=zC;gt.exports.memo(X3);function hm(e,t){if(!e)throw new Error(t)}let LC=0;function OC(e,t,r){if(e.style&&e.style._loaded){const s={...r};return delete s.id,delete s.children,e.addSource(t,s),e.getSource(t)}return null}function RC(e,t,r){hm(t.id===r.id,"source id changed"),hm(t.type===r.type,"source type changed");let s="",u=0;for(const g in t)g!=="children"&&g!=="id"&&!Wo(r[g],t[g])&&(s=g,u++);if(!u)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((f==="canvas"||f==="video")&&u===1&&s==="coordinates")e.setCoordinates(t.coordinates);else if(f==="vector"&&"setUrl"in e)switch(s){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${s}`)}function FC(e){const{map:t}=gt.exports.useContext(gh),r=gt.exports.useRef(e),[,s]=gt.exports.useState(0),u=gt.exports.useMemo(()=>e.id||`jsx-source-${LC++}`,[]);gt.exports.useEffect(()=>{if(t){const g=()=>s(l=>l+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),setTimeout(()=>{t.style&&t.style._loaded&&t.getSource(u)&&t.removeSource(u)},0)}}},[t]);let f=t&&t.style&&t.getSource(u);return f?RC(f,e,r.current):f=OC(t,u,e),r.current=e,f&&gt.exports.Children.map(e.children,g=>g&&gt.exports.cloneElement(g,{source:u}))||null}function BC(e,t,r,s){if(hm(r.id===s.id,"layer id changed"),hm(r.type===s.type,"layer type changed"),r.type==="custom"||s.type==="custom")return;const{layout:u={},paint:f={},filter:g,minzoom:l,maxzoom:_,beforeId:C}=r;if(C!==s.beforeId&&e.moveLayer(t,C),u!==s.layout){const S=s.layout||{};for(const E in u)Wo(u[E],S[E])||e.setLayoutProperty(t,E,u[E]);for(const E in S)u.hasOwnProperty(E)||e.setLayoutProperty(t,E,void 0)}if(f!==s.paint){const S=s.paint||{};for(const E in f)Wo(f[E],S[E])||e.setPaintProperty(t,E,f[E]);for(const E in S)f.hasOwnProperty(E)||e.setPaintProperty(t,E,void 0)}Wo(g,s.filter)||e.setFilter(t,g),(l!==s.minzoom||_!==s.maxzoom)&&e.setLayerZoomRange(t,l,_)}function jC(e,t,r){if(e.style&&e.style._loaded&&e.getSource(r.source)){const s={...r,id:t};delete s.beforeId,e.addLayer(s,r.beforeId)}}let DC=0;function NC(e){const{map:t}=gt.exports.useContext(gh),r=gt.exports.useRef(e),[,s]=gt.exports.useState(0),u=gt.exports.useMemo(()=>e.id||`jsx-layer-${DC++}`,[]);if(gt.exports.useEffect(()=>{if(t){const g=()=>s(l=>l+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),t.style&&t.style._loaded&&t.removeLayer(u)}}},[t]),t&&t.style&&t.getLayer(u))try{BC(t,u,e,r.current)}catch(g){console.warn(g)}else jC(t,u,e);return r.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function fb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,s)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fb(Object(r),!0).forEach(function(s){VC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fb(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function fm(e){return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function UC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function db(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function $C(e,t,r){return t&&db(e.prototype,t),r&&db(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nv(e,t){return HC(e)||ZC(e,t)||K3(e,t)||KC()}function a0(e){return GC(e)||WC(e)||K3(e)||XC()}function GC(e){if(Array.isArray(e))return q1(e)}function HC(e){if(Array.isArray(e))return e}function WC(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZC(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s=[],u=!0,f=!1,g,l;try{for(r=r.call(e);!(u=(g=r.next()).done)&&(s.push(g.value),!(t&&s.length===t));u=!0);}catch(_){f=!0,l=_}finally{try{!u&&r.return!=null&&r.return()}finally{if(f)throw l}}return s}}function K3(e,t){if(!!e){if(typeof e=="string")return q1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q1(e,t)}}function q1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function XC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pb=function(){},Uv={},Y3={},q3=null,J3={mark:pb,measure:pb};try{typeof window!="undefined"&&(Uv=window),typeof document!="undefined"&&(Y3=document),typeof MutationObserver!="undefined"&&(q3=MutationObserver),typeof performance!="undefined"&&(J3=performance)}catch{}var YC=Uv.navigator||{},mb=YC.userAgent,gb=mb===void 0?"":mb,Ml=Uv,Cr=Y3,yb=q3,ap=J3;Ml.document;var Ns=!!Cr.documentElement&&!!Cr.head&&typeof Cr.addEventListener=="function"&&typeof Cr.createElement=="function",Q3=~gb.indexOf("MSIE")||~gb.indexOf("Trident/"),Rs="___FONT_AWESOME___",J1=16,e4="fa",t4="svg-inline--fa",Lu="data-fa-i2svg",Q1="data-fa-pseudo-element",qC="data-fa-pseudo-element-pending",$v="data-prefix",Vv="data-icon",vb="fontawesome-i2svg",JC="async",QC=["HTML","HEAD","STYLE","SCRIPT"],n4=function(){try{return!0}catch{return!1}}(),Gv={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},dm={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},r4={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},eT={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},tT=/fa[srltdbk\-\ ]/,i4="fa-layers-text",nT=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,rT={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},o4=[1,2,3,4,5,6,7,8,9,10],iT=o4.concat([11,12,13,14,15,16,17,18,19,20]),oT=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Cu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},aT=[].concat(a0(Object.keys(dm)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Cu.GROUP,Cu.SWAP_OPACITY,Cu.PRIMARY,Cu.SECONDARY]).concat(o4.map(function(e){return"".concat(e,"x")})).concat(iT.map(function(e){return"w-".concat(e)})),a4=Ml.FontAwesomeConfig||{};function sT(e){var t=Cr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function lT(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Cr&&typeof Cr.querySelector=="function"){var uT=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];uT.forEach(function(e){var t=Nv(e,2),r=t[0],s=t[1],u=lT(sT(r));u!=null&&(a4[s]=u)})}var cT={familyPrefix:e4,styleDefault:"solid",replacementClass:t4,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Tf=Jt(Jt({},cT),a4);Tf.autoReplaceSvg||(Tf.observeMutations=!1);var yn={};Object.keys(Tf).forEach(function(e){Object.defineProperty(yn,e,{enumerable:!0,set:function(r){Tf[e]=r,Mp.forEach(function(s){return s(yn)})},get:function(){return Tf[e]}})});Ml.FontAwesomeConfig=yn;var Mp=[];function hT(e){return Mp.push(e),function(){Mp.splice(Mp.indexOf(e),1)}}var cl=J1,Ya={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function fT(e){if(!(!e||!Ns)){var t=Cr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var r=Cr.head.childNodes,s=null,u=r.length-1;u>-1;u--){var f=r[u],g=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(g)>-1&&(s=f)}return Cr.head.insertBefore(t,s),e}}var dT="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Yf(){for(var e=12,t="";e-- >0;)t+=dT[Math.random()*62|0];return t}function yh(e){for(var t=[],r=(e||[]).length>>>0;r--;)t[r]=e[r];return t}function Hv(e){return e.classList?yh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function s4(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function pT(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,'="').concat(s4(e[r]),'" ')},"").trim()}function s0(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,": ").concat(e[r].trim(),";")},"")}function Wv(e){return e.size!==Ya.size||e.x!==Ya.x||e.y!==Ya.y||e.rotate!==Ya.rotate||e.flipX||e.flipY}function mT(e){var t=e.transform,r=e.containerWidth,s=e.iconWidth,u={transform:"translate(".concat(r/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),g="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),_={transform:"".concat(f," ").concat(g," ").concat(l)},C={transform:"translate(".concat(s/2*-1," -256)")};return{outer:u,inner:_,path:C}}function gT(e){var t=e.transform,r=e.width,s=r===void 0?J1:r,u=e.height,f=u===void 0?J1:u,g=e.startCentered,l=g===void 0?!1:g,_="";return l&&Q3?_+="translate(".concat(t.x/cl-s/2,"em, ").concat(t.y/cl-f/2,"em) "):l?_+="translate(calc(-50% + ".concat(t.x/cl,"em), calc(-50% + ").concat(t.y/cl,"em)) "):_+="translate(".concat(t.x/cl,"em, ").concat(t.y/cl,"em) "),_+="scale(".concat(t.size/cl*(t.flipX?-1:1),", ").concat(t.size/cl*(t.flipY?-1:1),") "),_+="rotate(".concat(t.rotate,"deg) "),_}var yT=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function l4(){var e=e4,t=t4,r=yn.familyPrefix,s=yn.replacementClass,u=yT;if(r!==e||s!==t){var f=new RegExp("\\.".concat(e,"\\-"),"g"),g=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");u=u.replace(f,".".concat(r,"-")).replace(g,"--".concat(r,"-")).replace(l,".".concat(s))}return u}var xb=!1;function Dg(){yn.autoAddCss&&!xb&&(fT(l4()),xb=!0)}var vT={mixout:function(){return{dom:{css:l4,insertCss:Dg}}},hooks:function(){return{beforeDOMElementCreation:function(){Dg()},beforeI2svg:function(){Dg()}}}},Fs=Ml||{};Fs[Rs]||(Fs[Rs]={});Fs[Rs].styles||(Fs[Rs].styles={});Fs[Rs].hooks||(Fs[Rs].hooks={});Fs[Rs].shims||(Fs[Rs].shims=[]);var wa=Fs[Rs],u4=[],xT=function e(){Cr.removeEventListener("DOMContentLoaded",e),pm=1,u4.map(function(t){return t()})},pm=!1;Ns&&(pm=(Cr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Cr.readyState),pm||Cr.addEventListener("DOMContentLoaded",xT));function _T(e){!Ns||(pm?setTimeout(e,0):u4.push(e))}function sd(e){var t=e.tag,r=e.attributes,s=r===void 0?{}:r,u=e.children,f=u===void 0?[]:u;return typeof e=="string"?s4(e):"<".concat(t," ").concat(pT(s),">").concat(f.map(sd).join(""),"</").concat(t,">")}function _b(e,t,r){if(e&&e[t]&&e[t][r])return{prefix:t,iconName:r,icon:e[t][r]}}var bT=function(t,r){return function(s,u,f,g){return t.call(r,s,u,f,g)}},Ng=function(t,r,s,u){var f=Object.keys(t),g=f.length,l=u!==void 0?bT(r,u):r,_,C,S;for(s===void 0?(_=1,S=t[f[0]]):(_=0,S=s);_<g;_++)C=f[_],S=l(S,t[C],C,t);return S};function wT(e){for(var t=[],r=0,s=e.length;r<s;){var u=e.charCodeAt(r++);if(u>=55296&&u<=56319&&r<s){var f=e.charCodeAt(r++);(f&64512)==56320?t.push(((u&1023)<<10)+(f&1023)+65536):(t.push(u),r--)}else t.push(u)}return t}function ey(e){var t=wT(e);return t.length===1?t[0].toString(16):null}function ET(e,t){var r=e.length,s=e.charCodeAt(t),u;return s>=55296&&s<=56319&&r>t+1&&(u=e.charCodeAt(t+1),u>=56320&&u<=57343)?(s-55296)*1024+u-56320+65536:s}function bb(e){return Object.keys(e).reduce(function(t,r){var s=e[r],u=!!s.icon;return u?t[s.iconName]=s.icon:t[r]=s,t},{})}function ty(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.skipHooks,u=s===void 0?!1:s,f=bb(t);typeof wa.hooks.addPack=="function"&&!u?wa.hooks.addPack(e,bb(t)):wa.styles[e]=Jt(Jt({},wa.styles[e]||{}),f),e==="fas"&&ty("fa",t)}var Af=wa.styles,ST=wa.shims,CT=Object.values(r4),Zv=null,c4={},h4={},f4={},d4={},p4={},TT=Object.keys(Gv);function AT(e){return~aT.indexOf(e)}function IT(e,t){var r=t.split("-"),s=r[0],u=r.slice(1).join("-");return s===e&&u!==""&&!AT(u)?u:null}var m4=function(){var t=function(f){return Ng(Af,function(g,l,_){return g[_]=Ng(l,f,{}),g},{})};c4=t(function(u,f,g){if(f[3]&&(u[f[3]]=g),f[2]){var l=f[2].filter(function(_){return typeof _=="number"});l.forEach(function(_){u[_.toString(16)]=g})}return u}),h4=t(function(u,f,g){if(u[g]=g,f[2]){var l=f[2].filter(function(_){return typeof _=="string"});l.forEach(function(_){u[_]=g})}return u}),p4=t(function(u,f,g){var l=f[2];return u[g]=g,l.forEach(function(_){u[_]=g}),u});var r="far"in Af||yn.autoFetchSvg,s=Ng(ST,function(u,f){var g=f[0],l=f[1],_=f[2];return l==="far"&&!r&&(l="fas"),typeof g=="string"&&(u.names[g]={prefix:l,iconName:_}),typeof g=="number"&&(u.unicodes[g.toString(16)]={prefix:l,iconName:_}),u},{names:{},unicodes:{}});f4=s.names,d4=s.unicodes,Zv=l0(yn.styleDefault)};hT(function(e){Zv=l0(e.styleDefault)});m4();function Xv(e,t){return(c4[e]||{})[t]}function PT(e,t){return(h4[e]||{})[t]}function Uc(e,t){return(p4[e]||{})[t]}function g4(e){return f4[e]||{prefix:null,iconName:null}}function kT(e){var t=d4[e],r=Xv("fas",e);return t||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function zl(){return Zv}var Kv=function(){return{prefix:null,iconName:null,rest:[]}};function l0(e){var t=Gv[e],r=dm[e]||dm[t],s=e in wa.styles?e:null;return r||s||null}function u0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.skipLookups,s=r===void 0?!1:r,u=null,f=e.reduce(function(g,l){var _=IT(yn.familyPrefix,l);if(Af[l]?(l=CT.includes(l)?eT[l]:l,u=l,g.prefix=l):TT.indexOf(l)>-1?(u=l,g.prefix=l0(l)):_?g.iconName=_:l!==yn.replacementClass&&g.rest.push(l),!s&&g.prefix&&g.iconName){var C=u==="fa"?g4(g.iconName):{},S=Uc(g.prefix,g.iconName);C.prefix&&(u=null),g.iconName=C.iconName||S||g.iconName,g.prefix=C.prefix||g.prefix,g.prefix==="far"&&!Af.far&&Af.fas&&!yn.autoFetchSvg&&(g.prefix="fas")}return g},Kv());return(f.prefix==="fa"||u==="fa")&&(f.prefix=zl()||"fas"),f}var MT=function(){function e(){UC(this,e),this.definitions={}}return $C(e,[{key:"add",value:function(){for(var r=this,s=arguments.length,u=new Array(s),f=0;f<s;f++)u[f]=arguments[f];var g=u.reduce(this._pullDefinitions,{});Object.keys(g).forEach(function(l){r.definitions[l]=Jt(Jt({},r.definitions[l]||{}),g[l]),ty(l,g[l]);var _=r4[l];_&&ty(_,g[l]),m4()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,s){var u=s.prefix&&s.iconName&&s.icon?{0:s}:s;return Object.keys(u).map(function(f){var g=u[f],l=g.prefix,_=g.iconName,C=g.icon,S=C[2];r[l]||(r[l]={}),S.length>0&&S.forEach(function(E){typeof E=="string"&&(r[l][E]=C)}),r[l][_]=C}),r}}]),e}(),wb=[],$c={},Jc={},zT=Object.keys(Jc);function LT(e,t){var r=t.mixoutsTo;return wb=e,$c={},Object.keys(Jc).forEach(function(s){zT.indexOf(s)===-1&&delete Jc[s]}),wb.forEach(function(s){var u=s.mixout?s.mixout():{};if(Object.keys(u).forEach(function(g){typeof u[g]=="function"&&(r[g]=u[g]),fm(u[g])==="object"&&Object.keys(u[g]).forEach(function(l){r[g]||(r[g]={}),r[g][l]=u[g][l]})}),s.hooks){var f=s.hooks();Object.keys(f).forEach(function(g){$c[g]||($c[g]=[]),$c[g].push(f[g])})}s.provides&&s.provides(Jc)}),r}function ny(e,t){for(var r=arguments.length,s=new Array(r>2?r-2:0),u=2;u<r;u++)s[u-2]=arguments[u];var f=$c[e]||[];return f.forEach(function(g){t=g.apply(null,[t].concat(s))}),t}function Ou(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var u=$c[e]||[];u.forEach(function(f){f.apply(null,r)})}function Bs(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Jc[e]?Jc[e].apply(null,t):void 0}function ry(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,r=e.prefix||zl();if(!!t)return t=Uc(r,t)||t,_b(y4.definitions,r,t)||_b(wa.styles,r,t)}var y4=new MT,OT=function(){yn.autoReplaceSvg=!1,yn.observeMutations=!1,Ou("noAuto")},RT={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ns?(Ou("beforeI2svg",t),Bs("pseudoElements2svg",t),Bs("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot;yn.autoReplaceSvg===!1&&(yn.autoReplaceSvg=!0),yn.observeMutations=!0,_T(function(){BT({autoReplaceSvgRoot:r}),Ou("watch",t)})}},FT={icon:function(t){if(t===null)return null;if(fm(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Uc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var r=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],s=l0(t[0]);return{prefix:s,iconName:Uc(s,r)||r}}if(typeof t=="string"&&(t.indexOf("".concat(yn.familyPrefix,"-"))>-1||t.match(tT))){var u=u0(t.split(" "),{skipLookups:!0});return{prefix:u.prefix||zl(),iconName:Uc(u.prefix,u.iconName)||u.iconName}}if(typeof t=="string"){var f=zl();return{prefix:f,iconName:Uc(f,t)||t}}}},Po={noAuto:OT,config:yn,dom:RT,parse:FT,library:y4,findIconDefinition:ry,toHtml:sd},BT=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot,s=r===void 0?Cr:r;(Object.keys(wa.styles).length>0||yn.autoFetchSvg)&&Ns&&yn.autoReplaceSvg&&Po.dom.i2svg({node:s})};function c0(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(s){return sd(s)})}}),Object.defineProperty(e,"node",{get:function(){if(!!Ns){var s=Cr.createElement("div");return s.innerHTML=e.html,s.children}}}),e}function jT(e){var t=e.children,r=e.main,s=e.mask,u=e.attributes,f=e.styles,g=e.transform;if(Wv(g)&&r.found&&!s.found){var l=r.width,_=r.height,C={x:l/_/2,y:.5};u.style=s0(Jt(Jt({},f),{},{"transform-origin":"".concat(C.x+g.x/16,"em ").concat(C.y+g.y/16,"em")}))}return[{tag:"svg",attributes:u,children:t}]}function DT(e){var t=e.prefix,r=e.iconName,s=e.children,u=e.attributes,f=e.symbol,g=f===!0?"".concat(t,"-").concat(yn.familyPrefix,"-").concat(r):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Jt(Jt({},u),{},{id:g}),children:s}]}]}function Yv(e){var t=e.icons,r=t.main,s=t.mask,u=e.prefix,f=e.iconName,g=e.transform,l=e.symbol,_=e.title,C=e.maskId,S=e.titleId,E=e.extra,T=e.watchable,F=T===void 0?!1:T,X=s.found?s:r,Z=X.width,ue=X.height,H=u==="fak",V=[yn.replacementClass,f?"".concat(yn.familyPrefix,"-").concat(f):""].filter(function(U){return E.classes.indexOf(U)===-1}).filter(function(U){return U!==""||!!U}).concat(E.classes).join(" "),B={children:[],attributes:Jt(Jt({},E.attributes),{},{"data-prefix":u,"data-icon":f,class:V,role:E.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Z," ").concat(ue)})},ae=H&&!~E.classes.indexOf("fa-fw")?{width:"".concat(Z/ue*16*.0625,"em")}:{};F&&(B.attributes[Lu]=""),_&&(B.children.push({tag:"title",attributes:{id:B.attributes["aria-labelledby"]||"title-".concat(S||Yf())},children:[_]}),delete B.attributes.title);var G=Jt(Jt({},B),{},{prefix:u,iconName:f,main:r,mask:s,maskId:C,transform:g,symbol:l,styles:Jt(Jt({},ae),E.styles)}),j=s.found&&r.found?Bs("generateAbstractMask",G)||{children:[],attributes:{}}:Bs("generateAbstractIcon",G)||{children:[],attributes:{}},w=j.children,k=j.attributes;return G.children=w,G.attributes=k,l?DT(G):jT(G)}function Eb(e){var t=e.content,r=e.width,s=e.height,u=e.transform,f=e.title,g=e.extra,l=e.watchable,_=l===void 0?!1:l,C=Jt(Jt(Jt({},g.attributes),f?{title:f}:{}),{},{class:g.classes.join(" ")});_&&(C[Lu]="");var S=Jt({},g.styles);Wv(u)&&(S.transform=gT({transform:u,startCentered:!0,width:r,height:s}),S["-webkit-transform"]=S.transform);var E=s0(S);E.length>0&&(C.style=E);var T=[];return T.push({tag:"span",attributes:C,children:[t]}),f&&T.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),T}function NT(e){var t=e.content,r=e.title,s=e.extra,u=Jt(Jt(Jt({},s.attributes),r?{title:r}:{}),{},{class:s.classes.join(" ")}),f=s0(s.styles);f.length>0&&(u.style=f);var g=[];return g.push({tag:"span",attributes:u,children:[t]}),r&&g.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),g}var Ug=wa.styles;function iy(e){var t=e[0],r=e[1],s=e.slice(4),u=Nv(s,1),f=u[0],g=null;return Array.isArray(f)?g={tag:"g",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Cu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Cu.SECONDARY),fill:"currentColor",d:f[0]}},{tag:"path",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Cu.PRIMARY),fill:"currentColor",d:f[1]}}]}:g={tag:"path",attributes:{fill:"currentColor",d:f}},{found:!0,width:t,height:r,icon:g}}var UT={found:!1,width:512,height:512};function $T(e,t){!n4&&!yn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function oy(e,t){var r=t;return t==="fa"&&yn.styleDefault!==null&&(t=zl()),new Promise(function(s,u){if(Bs("missingIconAbstract"),r==="fa"){var f=g4(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&Ug[t]&&Ug[t][e]){var g=Ug[t][e];return s(iy(g))}$T(e,t),s(Jt(Jt({},UT),{},{icon:yn.showMissingIcons&&e?Bs("missingIconAbstract")||{}:{}}))})}var Sb=function(){},ay=yn.measurePerformance&&ap&&ap.mark&&ap.measure?ap:{mark:Sb,measure:Sb},uf='FA "6.0.0"',VT=function(t){return ay.mark("".concat(uf," ").concat(t," begins")),function(){return v4(t)}},v4=function(t){ay.mark("".concat(uf," ").concat(t," ends")),ay.measure("".concat(uf," ").concat(t),"".concat(uf," ").concat(t," begins"),"".concat(uf," ").concat(t," ends"))},qv={begin:VT,end:v4},zp=function(){};function Cb(e){var t=e.getAttribute?e.getAttribute(Lu):null;return typeof t=="string"}function GT(e){var t=e.getAttribute?e.getAttribute($v):null,r=e.getAttribute?e.getAttribute(Vv):null;return t&&r}function HT(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(yn.replacementClass)}function WT(){if(yn.autoReplaceSvg===!0)return Lp.replace;var e=Lp[yn.autoReplaceSvg];return e||Lp.replace}function ZT(e){return Cr.createElementNS("http://www.w3.org/2000/svg",e)}function XT(e){return Cr.createElement(e)}function x4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.ceFn,s=r===void 0?e.tag==="svg"?ZT:XT:r;if(typeof e=="string")return Cr.createTextNode(e);var u=s(e.tag);Object.keys(e.attributes||[]).forEach(function(g){u.setAttribute(g,e.attributes[g])});var f=e.children||[];return f.forEach(function(g){u.appendChild(x4(g,{ceFn:s}))}),u}function KT(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Lp={replace:function(t){var r=t[0];if(r.parentNode)if(t[1].forEach(function(u){r.parentNode.insertBefore(x4(u),r)}),r.getAttribute(Lu)===null&&yn.keepOriginalSource){var s=Cr.createComment(KT(r));r.parentNode.replaceChild(s,r)}else r.remove()},nest:function(t){var r=t[0],s=t[1];if(~Hv(r).indexOf(yn.replacementClass))return Lp.replace(t);var u=new RegExp("".concat(yn.familyPrefix,"-.*"));if(delete s[0].attributes.id,s[0].attributes.class){var f=s[0].attributes.class.split(" ").reduce(function(l,_){return _===yn.replacementClass||_.match(u)?l.toSvg.push(_):l.toNode.push(_),l},{toNode:[],toSvg:[]});s[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",f.toNode.join(" "))}var g=s.map(function(l){return sd(l)}).join(`
`);r.setAttribute(Lu,""),r.innerHTML=g}};function Tb(e){e()}function _4(e,t){var r=typeof t=="function"?t:zp;if(e.length===0)r();else{var s=Tb;yn.mutateApproach===JC&&(s=Ml.requestAnimationFrame||Tb),s(function(){var u=WT(),f=qv.begin("mutate");e.map(u),f(),r()})}}var Jv=!1;function b4(){Jv=!0}function sy(){Jv=!1}var mm=null;function Ab(e){if(!!yb&&!!yn.observeMutations){var t=e.treeCallback,r=t===void 0?zp:t,s=e.nodeCallback,u=s===void 0?zp:s,f=e.pseudoElementsCallback,g=f===void 0?zp:f,l=e.observeMutationsRoot,_=l===void 0?Cr:l;mm=new yb(function(C){if(!Jv){var S=zl();yh(C).forEach(function(E){if(E.type==="childList"&&E.addedNodes.length>0&&!Cb(E.addedNodes[0])&&(yn.searchPseudoElements&&g(E.target),r(E.target)),E.type==="attributes"&&E.target.parentNode&&yn.searchPseudoElements&&g(E.target.parentNode),E.type==="attributes"&&Cb(E.target)&&~oT.indexOf(E.attributeName))if(E.attributeName==="class"&&GT(E.target)){var T=u0(Hv(E.target)),F=T.prefix,X=T.iconName;E.target.setAttribute($v,F||S),X&&E.target.setAttribute(Vv,X)}else HT(E.target)&&u(E.target)})}}),Ns&&mm.observe(_,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function YT(){!mm||mm.disconnect()}function qT(e){var t=e.getAttribute("style"),r=[];return t&&(r=t.split(";").reduce(function(s,u){var f=u.split(":"),g=f[0],l=f.slice(1);return g&&l.length>0&&(s[g]=l.join(":").trim()),s},{})),r}function JT(e){var t=e.getAttribute("data-prefix"),r=e.getAttribute("data-icon"),s=e.innerText!==void 0?e.innerText.trim():"",u=u0(Hv(e));return u.prefix||(u.prefix=zl()),t&&r&&(u.prefix=t,u.iconName=r),u.iconName&&u.prefix||u.prefix&&s.length>0&&(u.iconName=PT(u.prefix,e.innerText)||Xv(u.prefix,ey(e.innerText))),u}function QT(e){var t=yh(e.attributes).reduce(function(u,f){return u.name!=="class"&&u.name!=="style"&&(u[f.name]=f.value),u},{}),r=e.getAttribute("title"),s=e.getAttribute("data-fa-title-id");return yn.autoA11y&&(r?t["aria-labelledby"]="".concat(yn.replacementClass,"-title-").concat(s||Yf()):(t["aria-hidden"]="true",t.focusable="false")),t}function eA(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ya,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Ib(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=JT(e),s=r.iconName,u=r.prefix,f=r.rest,g=QT(e),l=ny("parseNodeAttributes",{},e),_=t.styleParser?qT(e):[];return Jt({iconName:s,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:u,transform:Ya,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:f,styles:_,attributes:g}},l)}var tA=wa.styles;function w4(e){var t=yn.autoReplaceSvg==="nest"?Ib(e,{styleParser:!1}):Ib(e);return~t.extra.classes.indexOf(i4)?Bs("generateLayersText",e,t):Bs("generateSvgReplacementMutation",e,t)}function Pb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ns)return Promise.resolve();var r=Cr.documentElement.classList,s=function(E){return r.add("".concat(vb,"-").concat(E))},u=function(E){return r.remove("".concat(vb,"-").concat(E))},f=yn.autoFetchSvg?Object.keys(Gv):Object.keys(tA),g=[".".concat(i4,":not([").concat(Lu,"])")].concat(f.map(function(S){return".".concat(S,":not([").concat(Lu,"])")})).join(", ");if(g.length===0)return Promise.resolve();var l=[];try{l=yh(e.querySelectorAll(g))}catch{}if(l.length>0)s("pending"),u("complete");else return Promise.resolve();var _=qv.begin("onTree"),C=l.reduce(function(S,E){try{var T=w4(E);T&&S.push(T)}catch(F){n4||F.name==="MissingIcon"&&console.error(F)}return S},[]);return new Promise(function(S,E){Promise.all(C).then(function(T){_4(T,function(){s("active"),s("complete"),u("pending"),typeof t=="function"&&t(),_(),S()})}).catch(function(T){_(),E(T)})})}function nA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;w4(e).then(function(r){r&&_4([r],t)})}function rA(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(t||{}).icon?t:ry(t||{}),u=r.mask;return u&&(u=(u||{}).icon?u:ry(u||{})),e(s,Jt(Jt({},r),{},{mask:u}))}}var iA=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.transform,u=s===void 0?Ya:s,f=r.symbol,g=f===void 0?!1:f,l=r.mask,_=l===void 0?null:l,C=r.maskId,S=C===void 0?null:C,E=r.title,T=E===void 0?null:E,F=r.titleId,X=F===void 0?null:F,Z=r.classes,ue=Z===void 0?[]:Z,H=r.attributes,V=H===void 0?{}:H,B=r.styles,ae=B===void 0?{}:B;if(!!t){var G=t.prefix,j=t.iconName,w=t.icon;return c0(Jt({type:"icon"},t),function(){return Ou("beforeDOMElementCreation",{iconDefinition:t,params:r}),yn.autoA11y&&(T?V["aria-labelledby"]="".concat(yn.replacementClass,"-title-").concat(X||Yf()):(V["aria-hidden"]="true",V.focusable="false")),Yv({icons:{main:iy(w),mask:_?iy(_.icon):{found:!1,width:null,height:null,icon:{}}},prefix:G,iconName:j,transform:Jt(Jt({},Ya),u),symbol:g,title:T,maskId:S,titleId:X,extra:{attributes:V,styles:ae,classes:ue}})})}},oA={mixout:function(){return{icon:rA(iA)}},hooks:function(){return{mutationObserverCallbacks:function(r){return r.treeCallback=Pb,r.nodeCallback=nA,r}}},provides:function(t){t.i2svg=function(r){var s=r.node,u=s===void 0?Cr:s,f=r.callback,g=f===void 0?function(){}:f;return Pb(u,g)},t.generateSvgReplacementMutation=function(r,s){var u=s.iconName,f=s.title,g=s.titleId,l=s.prefix,_=s.transform,C=s.symbol,S=s.mask,E=s.maskId,T=s.extra;return new Promise(function(F,X){Promise.all([oy(u,l),S.iconName?oy(S.iconName,S.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Z){var ue=Nv(Z,2),H=ue[0],V=ue[1];F([r,Yv({icons:{main:H,mask:V},prefix:l,iconName:u,transform:_,symbol:C,maskId:E,title:f,titleId:g,extra:T,watchable:!0})])}).catch(X)})},t.generateAbstractIcon=function(r){var s=r.children,u=r.attributes,f=r.main,g=r.transform,l=r.styles,_=s0(l);_.length>0&&(u.style=_);var C;return Wv(g)&&(C=Bs("generateAbstractTransformGrouping",{main:f,transform:g,containerWidth:f.width,iconWidth:f.width})),s.push(C||f.icon),{children:s,attributes:u}}}},aA={mixout:function(){return{layer:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.classes,f=u===void 0?[]:u;return c0({type:"layer"},function(){Ou("beforeDOMElementCreation",{assembler:r,params:s});var g=[];return r(function(l){Array.isArray(l)?l.map(function(_){g=g.concat(_.abstract)}):g=g.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(yn.familyPrefix,"-layers")].concat(a0(f)).join(" ")},children:g}]})}}}},sA={mixout:function(){return{counter:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.title,f=u===void 0?null:u,g=s.classes,l=g===void 0?[]:g,_=s.attributes,C=_===void 0?{}:_,S=s.styles,E=S===void 0?{}:S;return c0({type:"counter",content:r},function(){return Ou("beforeDOMElementCreation",{content:r,params:s}),NT({content:r.toString(),title:f,extra:{attributes:C,styles:E,classes:["".concat(yn.familyPrefix,"-layers-counter")].concat(a0(l))}})})}}}},lA={mixout:function(){return{text:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.transform,f=u===void 0?Ya:u,g=s.title,l=g===void 0?null:g,_=s.classes,C=_===void 0?[]:_,S=s.attributes,E=S===void 0?{}:S,T=s.styles,F=T===void 0?{}:T;return c0({type:"text",content:r},function(){return Ou("beforeDOMElementCreation",{content:r,params:s}),Eb({content:r,transform:Jt(Jt({},Ya),f),title:l,extra:{attributes:E,styles:F,classes:["".concat(yn.familyPrefix,"-layers-text")].concat(a0(C))}})})}}},provides:function(t){t.generateLayersText=function(r,s){var u=s.title,f=s.transform,g=s.extra,l=null,_=null;if(Q3){var C=parseInt(getComputedStyle(r).fontSize,10),S=r.getBoundingClientRect();l=S.width/C,_=S.height/C}return yn.autoA11y&&!u&&(g.attributes["aria-hidden"]="true"),Promise.resolve([r,Eb({content:r.innerHTML,width:l,height:_,transform:f,title:u,extra:g,watchable:!0})])}}},uA=new RegExp('"',"ug"),kb=[1105920,1112319];function cA(e){var t=e.replace(uA,""),r=ET(t,0),s=r>=kb[0]&&r<=kb[1],u=t.length===2?t[0]===t[1]:!1;return{value:ey(u?t[0]:t),isSecondary:s||u}}function Mb(e,t){var r="".concat(qC).concat(t.replace(":","-"));return new Promise(function(s,u){if(e.getAttribute(r)!==null)return s();var f=yh(e.children),g=f.filter(function(j){return j.getAttribute(Q1)===t})[0],l=Ml.getComputedStyle(e,t),_=l.getPropertyValue("font-family").match(nT),C=l.getPropertyValue("font-weight"),S=l.getPropertyValue("content");if(g&&!_)return e.removeChild(g),s();if(_&&S!=="none"&&S!==""){var E=l.getPropertyValue("content"),T=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(_[2])?dm[_[2].toLowerCase()]:rT[C],F=cA(E),X=F.value,Z=F.isSecondary,ue=_[0].startsWith("FontAwesome"),H=Xv(T,X),V=H;if(ue){var B=kT(X);B.iconName&&B.prefix&&(H=B.iconName,T=B.prefix)}if(H&&!Z&&(!g||g.getAttribute($v)!==T||g.getAttribute(Vv)!==V)){e.setAttribute(r,V),g&&e.removeChild(g);var ae=eA(),G=ae.extra;G.attributes[Q1]=t,oy(H,T).then(function(j){var w=Yv(Jt(Jt({},ae),{},{icons:{main:j,mask:Kv()},prefix:T,iconName:V,extra:G,watchable:!0})),k=Cr.createElement("svg");t==="::before"?e.insertBefore(k,e.firstChild):e.appendChild(k),k.outerHTML=w.map(function(U){return sd(U)}).join(`
`),e.removeAttribute(r),s()}).catch(u)}else s()}else s()})}function hA(e){return Promise.all([Mb(e,"::before"),Mb(e,"::after")])}function fA(e){return e.parentNode!==document.head&&!~QC.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Q1)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function zb(e){if(!!Ns)return new Promise(function(t,r){var s=yh(e.querySelectorAll("*")).filter(fA).map(hA),u=qv.begin("searchPseudoElements");b4(),Promise.all(s).then(function(){u(),sy(),t()}).catch(function(){u(),sy(),r()})})}var dA={hooks:function(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=zb,r}}},provides:function(t){t.pseudoElements2svg=function(r){var s=r.node,u=s===void 0?Cr:s;yn.searchPseudoElements&&zb(u)}}},Lb=!1,pA={mixout:function(){return{dom:{unwatch:function(){b4(),Lb=!0}}}},hooks:function(){return{bootstrap:function(){Ab(ny("mutationObserverCallbacks",{}))},noAuto:function(){YT()},watch:function(r){var s=r.observeMutationsRoot;Lb?sy():Ab(ny("mutationObserverCallbacks",{observeMutationsRoot:s}))}}}},Ob=function(t){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(s,u){var f=u.toLowerCase().split("-"),g=f[0],l=f.slice(1).join("-");if(g&&l==="h")return s.flipX=!0,s;if(g&&l==="v")return s.flipY=!0,s;if(l=parseFloat(l),isNaN(l))return s;switch(g){case"grow":s.size=s.size+l;break;case"shrink":s.size=s.size-l;break;case"left":s.x=s.x-l;break;case"right":s.x=s.x+l;break;case"up":s.y=s.y-l;break;case"down":s.y=s.y+l;break;case"rotate":s.rotate=s.rotate+l;break}return s},r)},mA={mixout:function(){return{parse:{transform:function(r){return Ob(r)}}}},hooks:function(){return{parseNodeAttributes:function(r,s){var u=s.getAttribute("data-fa-transform");return u&&(r.transform=Ob(u)),r}}},provides:function(t){t.generateAbstractTransformGrouping=function(r){var s=r.main,u=r.transform,f=r.containerWidth,g=r.iconWidth,l={transform:"translate(".concat(f/2," 256)")},_="translate(".concat(u.x*32,", ").concat(u.y*32,") "),C="scale(".concat(u.size/16*(u.flipX?-1:1),", ").concat(u.size/16*(u.flipY?-1:1),") "),S="rotate(".concat(u.rotate," 0 0)"),E={transform:"".concat(_," ").concat(C," ").concat(S)},T={transform:"translate(".concat(g/2*-1," -256)")},F={outer:l,inner:E,path:T};return{tag:"g",attributes:Jt({},F.outer),children:[{tag:"g",attributes:Jt({},F.inner),children:[{tag:s.icon.tag,children:s.icon.children,attributes:Jt(Jt({},s.icon.attributes),F.path)}]}]}}}},$g={x:0,y:0,width:"100%",height:"100%"};function Rb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function gA(e){return e.tag==="g"?e.children:[e]}var yA={hooks:function(){return{parseNodeAttributes:function(r,s){var u=s.getAttribute("data-fa-mask"),f=u?u0(u.split(" ").map(function(g){return g.trim()})):Kv();return f.prefix||(f.prefix=zl()),r.mask=f,r.maskId=s.getAttribute("data-fa-mask-id"),r}}},provides:function(t){t.generateAbstractMask=function(r){var s=r.children,u=r.attributes,f=r.main,g=r.mask,l=r.maskId,_=r.transform,C=f.width,S=f.icon,E=g.width,T=g.icon,F=mT({transform:_,containerWidth:E,iconWidth:C}),X={tag:"rect",attributes:Jt(Jt({},$g),{},{fill:"white"})},Z=S.children?{children:S.children.map(Rb)}:{},ue={tag:"g",attributes:Jt({},F.inner),children:[Rb(Jt({tag:S.tag,attributes:Jt(Jt({},S.attributes),F.path)},Z))]},H={tag:"g",attributes:Jt({},F.outer),children:[ue]},V="mask-".concat(l||Yf()),B="clip-".concat(l||Yf()),ae={tag:"mask",attributes:Jt(Jt({},$g),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[X,H]},G={tag:"defs",children:[{tag:"clipPath",attributes:{id:B},children:gA(T)},ae]};return s.push(G,{tag:"rect",attributes:Jt({fill:"currentColor","clip-path":"url(#".concat(B,")"),mask:"url(#".concat(V,")")},$g)}),{children:s,attributes:u}}}},vA={provides:function(t){var r=!1;Ml.matchMedia&&(r=Ml.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var s=[],u={fill:"currentColor"},f={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};s.push({tag:"path",attributes:Jt(Jt({},u),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var g=Jt(Jt({},f),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Jt(Jt({},u),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||l.children.push({tag:"animate",attributes:Jt(Jt({},f),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Jt(Jt({},g),{},{values:"1;0;1;1;0;1;"})}),s.push(l),s.push({tag:"path",attributes:Jt(Jt({},u),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:Jt(Jt({},g),{},{values:"1;0;0;0;0;1;"})}]}),r||s.push({tag:"path",attributes:Jt(Jt({},u),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Jt(Jt({},g),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:s}}}},xA={hooks:function(){return{parseNodeAttributes:function(r,s){var u=s.getAttribute("data-fa-symbol"),f=u===null?!1:u===""?!0:u;return r.symbol=f,r}}}},_A=[vT,oA,aA,sA,lA,dA,pA,mA,yA,vA,xA];LT(_A,{mixoutsTo:Po});Po.noAuto;Po.config;Po.library;Po.dom;var ly=Po.parse;Po.findIconDefinition;Po.toHtml;var bA=Po.icon;Po.layer;Po.text;Po.counter;var E4={exports:{}},wA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",EA=wA,SA=EA;function S4(){}function C4(){}C4.resetWarningCache=S4;var CA=function(){function e(s,u,f,g,l,_){if(_!==SA){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:C4,resetWarningCache:S4};return r.PropTypes=r,r};E4.exports=CA();var Xn=E4.exports;function Fb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,s)}return r}function _l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fb(Object(r),!0).forEach(function(s){Vc(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fb(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function gm(e){return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}function Vc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TA(e,t){if(e==null)return{};var r={},s=Object.keys(e),u,f;for(f=0;f<s.length;f++)u=s[f],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function T4(e,t){if(e==null)return{};var r=TA(e,t),s,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)s=f[u],!(t.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,s)||(r[s]=e[s]))}return r}function uy(e){return AA(e)||IA(e)||PA(e)||kA()}function AA(e){if(Array.isArray(e))return cy(e)}function IA(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PA(e,t){if(!!e){if(typeof e=="string")return cy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cy(e,t)}}function cy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function kA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MA(e){var t,r=e.beat,s=e.fade,u=e.flash,f=e.spin,g=e.spinPulse,l=e.spinReverse,_=e.pulse,C=e.fixedWidth,S=e.inverse,E=e.border,T=e.listItem,F=e.flip,X=e.size,Z=e.rotation,ue=e.pull,H=(t={"fa-beat":r,"fa-fade":s,"fa-flash":u,"fa-spin":f,"fa-spin-reverse":l,"fa-spin-pulse":g,"fa-pulse":_,"fa-fw":C,"fa-inverse":S,"fa-border":E,"fa-li":T,"fa-flip-horizontal":F==="horizontal"||F==="both","fa-flip-vertical":F==="vertical"||F==="both"},Vc(t,"fa-".concat(X),typeof X!="undefined"&&X!==null),Vc(t,"fa-rotate-".concat(Z),typeof Z!="undefined"&&Z!==null&&Z!==0),Vc(t,"fa-pull-".concat(ue),typeof ue!="undefined"&&ue!==null),Vc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(H).map(function(V){return H[V]?V:null}).filter(function(V){return V})}function zA(e){return e=e-0,e===e}function A4(e){return zA(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,r){return r?r.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var LA=["style"];function OA(e){return e.charAt(0).toUpperCase()+e.slice(1)}function RA(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,r){var s=r.indexOf(":"),u=A4(r.slice(0,s)),f=r.slice(s+1).trim();return u.startsWith("webkit")?t[OA(u)]=f:t[u]=f,t},{})}function I4(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var s=(t.children||[]).map(function(_){return I4(e,_)}),u=Object.keys(t.attributes||{}).reduce(function(_,C){var S=t.attributes[C];switch(C){case"class":_.attrs.className=S,delete t.attributes.class;break;case"style":_.attrs.style=RA(S);break;default:C.indexOf("aria-")===0||C.indexOf("data-")===0?_.attrs[C.toLowerCase()]=S:_.attrs[A4(C)]=S}return _},{attrs:{}}),f=r.style,g=f===void 0?{}:f,l=T4(r,LA);return u.attrs.style=_l(_l({},u.attrs.style),g),e.apply(void 0,[t.tag,_l(_l({},u.attrs),l)].concat(uy(s)))}var P4=!1;try{P4=!0}catch{}function FA(){if(!P4&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function Bb(e){if(e&&gm(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(ly.icon)return ly.icon(e);if(e===null)return null;if(e&&gm(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function Vg(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Vc({},e,t):{}}var BA=["forwardedRef"];function Qa(e){var t=e.forwardedRef,r=T4(e,BA),s=r.icon,u=r.mask,f=r.symbol,g=r.className,l=r.title,_=r.titleId,C=Bb(s),S=Vg("classes",[].concat(uy(MA(r)),uy(g.split(" ")))),E=Vg("transform",typeof r.transform=="string"?ly.transform(r.transform):r.transform),T=Vg("mask",Bb(u)),F=bA(C,_l(_l(_l(_l({},S),E),T),{},{symbol:f,title:l,titleId:_}));if(!F)return FA("Could not find icon",C),null;var X=F.abstract,Z={ref:t};return Object.keys(r).forEach(function(ue){Qa.defaultProps.hasOwnProperty(ue)||(Z[ue]=r[ue])}),jA(X[0],Z)}Qa.displayName="FontAwesomeIcon";Qa.propTypes={beat:Xn.bool,border:Xn.bool,className:Xn.string,fade:Xn.bool,flash:Xn.bool,mask:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),fixedWidth:Xn.bool,inverse:Xn.bool,flip:Xn.oneOf(["horizontal","vertical","both"]),icon:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),listItem:Xn.bool,pull:Xn.oneOf(["right","left"]),pulse:Xn.bool,rotation:Xn.oneOf([0,90,180,270]),size:Xn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Xn.bool,spinPulse:Xn.bool,spinReverse:Xn.bool,symbol:Xn.oneOfType([Xn.bool,Xn.string]),title:Xn.string,transform:Xn.oneOfType([Xn.string,Xn.object]),swapOpacity:Xn.bool};Qa.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var jA=I4.bind(null,Uw.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var DA={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},NA=DA,hy={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},UA={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]},Xo={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(){function r(s,u,f){function g(C,S){if(!u[C]){if(!s[C]){var E=typeof $d=="function"&&$d;if(!S&&E)return E(C,!0);if(l)return l(C,!0);var T=new Error("Cannot find module '"+C+"'");throw T.code="MODULE_NOT_FOUND",T}var F=u[C]={exports:{}};s[C][0].call(F.exports,function(X){var Z=s[C][1][X];return g(Z||X)},F,F.exports,r,s,u,f)}return u[C].exports}for(var l=typeof $d=="function"&&$d,_=0;_<f.length;_++)g(f[_]);return g}return r}()({1:[function(r,s,u){u.byteLength=T,u.toByteArray=X,u.fromByteArray=H;for(var f=[],g=[],l=typeof Uint8Array!="undefined"?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,S=_.length;C<S;++C)f[C]=_[C],g[_.charCodeAt(C)]=C;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63;function E(V){var B=V.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=V.indexOf("=");ae===-1&&(ae=B);var G=ae===B?0:4-ae%4;return[ae,G]}function T(V){var B=E(V),ae=B[0],G=B[1];return(ae+G)*3/4-G}function F(V,B,ae){return(B+ae)*3/4-ae}function X(V){var B,ae=E(V),G=ae[0],j=ae[1],w=new l(F(V,G,j)),k=0,U=j>0?G-4:G,K;for(K=0;K<U;K+=4)B=g[V.charCodeAt(K)]<<18|g[V.charCodeAt(K+1)]<<12|g[V.charCodeAt(K+2)]<<6|g[V.charCodeAt(K+3)],w[k++]=B>>16&255,w[k++]=B>>8&255,w[k++]=B&255;return j===2&&(B=g[V.charCodeAt(K)]<<2|g[V.charCodeAt(K+1)]>>4,w[k++]=B&255),j===1&&(B=g[V.charCodeAt(K)]<<10|g[V.charCodeAt(K+1)]<<4|g[V.charCodeAt(K+2)]>>2,w[k++]=B>>8&255,w[k++]=B&255),w}function Z(V){return f[V>>18&63]+f[V>>12&63]+f[V>>6&63]+f[V&63]}function ue(V,B,ae){for(var G,j=[],w=B;w<ae;w+=3)G=(V[w]<<16&16711680)+(V[w+1]<<8&65280)+(V[w+2]&255),j.push(Z(G));return j.join("")}function H(V){for(var B,ae=V.length,G=ae%3,j=[],w=16383,k=0,U=ae-G;k<U;k+=w)j.push(ue(V,k,k+w>U?U:k+w));return G===1?(B=V[ae-1],j.push(f[B>>2]+f[B<<4&63]+"==")):G===2&&(B=(V[ae-2]<<8)+V[ae-1],j.push(f[B>>10]+f[B>>4&63]+f[B<<2&63]+"=")),j.join("")}},{}],2:[function(r,s,u){(function(f){(function(){var g=r("base64-js"),l=r("ieee754");u.Buffer=E,u.SlowBuffer=G,u.INSPECT_MAX_BYTES=50;var _=2147483647;u.kMaxLength=_,E.TYPED_ARRAY_SUPPORT=C(),!E.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{var Ee=new Uint8Array(1);return Ee.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Ee.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(!!E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(!!E.isBuffer(this))return this.byteOffset}});function S(Ee){if(Ee>_)throw new RangeError('The value "'+Ee+'" is invalid for option "size"');var R=new Uint8Array(Ee);return R.__proto__=E.prototype,R}function E(Ee,R,O){if(typeof Ee=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Z(Ee)}return T(Ee,R,O)}typeof Symbol!="undefined"&&Symbol.species!=null&&E[Symbol.species]===E&&Object.defineProperty(E,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),E.poolSize=8192;function T(Ee,R,O){if(typeof Ee=="string")return ue(Ee,R);if(ArrayBuffer.isView(Ee))return H(Ee);if(Ee==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ee);if(on(Ee,ArrayBuffer)||Ee&&on(Ee.buffer,ArrayBuffer))return V(Ee,R,O);if(typeof Ee=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=Ee.valueOf&&Ee.valueOf();if(pe!=null&&pe!==Ee)return E.from(pe,R,O);var ze=B(Ee);if(ze)return ze;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof Ee[Symbol.toPrimitive]=="function")return E.from(Ee[Symbol.toPrimitive]("string"),R,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ee)}E.from=function(Ee,R,O){return T(Ee,R,O)},E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array;function F(Ee){if(typeof Ee!="number")throw new TypeError('"size" argument must be of type number');if(Ee<0)throw new RangeError('The value "'+Ee+'" is invalid for option "size"')}function X(Ee,R,O){return F(Ee),Ee<=0?S(Ee):R!==void 0?typeof O=="string"?S(Ee).fill(R,O):S(Ee).fill(R):S(Ee)}E.alloc=function(Ee,R,O){return X(Ee,R,O)};function Z(Ee){return F(Ee),S(Ee<0?0:ae(Ee)|0)}E.allocUnsafe=function(Ee){return Z(Ee)},E.allocUnsafeSlow=function(Ee){return Z(Ee)};function ue(Ee,R){if((typeof R!="string"||R==="")&&(R="utf8"),!E.isEncoding(R))throw new TypeError("Unknown encoding: "+R);var O=j(Ee,R)|0,pe=S(O),ze=pe.write(Ee,R);return ze!==O&&(pe=pe.slice(0,ze)),pe}function H(Ee){for(var R=Ee.length<0?0:ae(Ee.length)|0,O=S(R),pe=0;pe<R;pe+=1)O[pe]=Ee[pe]&255;return O}function V(Ee,R,O){if(R<0||Ee.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(Ee.byteLength<R+(O||0))throw new RangeError('"length" is outside of buffer bounds');var pe;return R===void 0&&O===void 0?pe=new Uint8Array(Ee):O===void 0?pe=new Uint8Array(Ee,R):pe=new Uint8Array(Ee,R,O),pe.__proto__=E.prototype,pe}function B(Ee){if(E.isBuffer(Ee)){var R=ae(Ee.length)|0,O=S(R);return O.length===0||Ee.copy(O,0,0,R),O}if(Ee.length!==void 0)return typeof Ee.length!="number"||En(Ee.length)?S(0):H(Ee);if(Ee.type==="Buffer"&&Array.isArray(Ee.data))return H(Ee.data)}function ae(Ee){if(Ee>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return Ee|0}function G(Ee){return+Ee!=Ee&&(Ee=0),E.alloc(+Ee)}E.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==E.prototype},E.compare=function(R,O){if(on(R,Uint8Array)&&(R=E.from(R,R.offset,R.byteLength)),on(O,Uint8Array)&&(O=E.from(O,O.offset,O.byteLength)),!E.isBuffer(R)||!E.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===O)return 0;for(var pe=R.length,ze=O.length,Ye=0,ot=Math.min(pe,ze);Ye<ot;++Ye)if(R[Ye]!==O[Ye]){pe=R[Ye],ze=O[Ye];break}return pe<ze?-1:ze<pe?1:0},E.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(R,O){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return E.alloc(0);var pe;if(O===void 0)for(O=0,pe=0;pe<R.length;++pe)O+=R[pe].length;var ze=E.allocUnsafe(O),Ye=0;for(pe=0;pe<R.length;++pe){var ot=R[pe];if(on(ot,Uint8Array)&&(ot=E.from(ot)),!E.isBuffer(ot))throw new TypeError('"list" argument must be an Array of Buffers');ot.copy(ze,Ye),Ye+=ot.length}return ze};function j(Ee,R){if(E.isBuffer(Ee))return Ee.length;if(ArrayBuffer.isView(Ee)||on(Ee,ArrayBuffer))return Ee.byteLength;if(typeof Ee!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ee);var O=Ee.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&O===0)return 0;for(var ze=!1;;)switch(R){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Nt(Ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return Tn(Ee).length;default:if(ze)return pe?-1:Nt(Ee).length;R=(""+R).toLowerCase(),ze=!0}}E.byteLength=j;function w(Ee,R,O){var pe=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,R>>>=0,O<=R))return"";for(Ee||(Ee="utf8");;)switch(Ee){case"hex":return Ie(this,R,O);case"utf8":case"utf-8":return te(this,R,O);case"ascii":return _e(this,R,O);case"latin1":case"binary":return Be(this,R,O);case"base64":return ne(this,R,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,R,O);default:if(pe)throw new TypeError("Unknown encoding: "+Ee);Ee=(Ee+"").toLowerCase(),pe=!0}}E.prototype._isBuffer=!0;function k(Ee,R,O){var pe=Ee[R];Ee[R]=Ee[O],Ee[O]=pe}E.prototype.swap16=function(){var R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<R;O+=2)k(this,O,O+1);return this},E.prototype.swap32=function(){var R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<R;O+=4)k(this,O,O+3),k(this,O+1,O+2);return this},E.prototype.swap64=function(){var R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<R;O+=8)k(this,O,O+7),k(this,O+1,O+6),k(this,O+2,O+5),k(this,O+3,O+4);return this},E.prototype.toString=function(){var R=this.length;return R===0?"":arguments.length===0?te(this,0,R):w.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(R){if(!E.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:E.compare(this,R)===0},E.prototype.inspect=function(){var R="",O=u.INSPECT_MAX_BYTES;return R=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(R+=" ... "),"<Buffer "+R+">"},E.prototype.compare=function(R,O,pe,ze,Ye){if(on(R,Uint8Array)&&(R=E.from(R,R.offset,R.byteLength)),!E.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(O===void 0&&(O=0),pe===void 0&&(pe=R?R.length:0),ze===void 0&&(ze=0),Ye===void 0&&(Ye=this.length),O<0||pe>R.length||ze<0||Ye>this.length)throw new RangeError("out of range index");if(ze>=Ye&&O>=pe)return 0;if(ze>=Ye)return-1;if(O>=pe)return 1;if(O>>>=0,pe>>>=0,ze>>>=0,Ye>>>=0,this===R)return 0;for(var ot=Ye-ze,se=pe-O,A=Math.min(ot,se),z=this.slice(ze,Ye),we=R.slice(O,pe),je=0;je<A;++je)if(z[je]!==we[je]){ot=z[je],se=we[je];break}return ot<se?-1:se<ot?1:0};function U(Ee,R,O,pe,ze){if(Ee.length===0)return-1;if(typeof O=="string"?(pe=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,En(O)&&(O=ze?0:Ee.length-1),O<0&&(O=Ee.length+O),O>=Ee.length){if(ze)return-1;O=Ee.length-1}else if(O<0)if(ze)O=0;else return-1;if(typeof R=="string"&&(R=E.from(R,pe)),E.isBuffer(R))return R.length===0?-1:K(Ee,R,O,pe,ze);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?ze?Uint8Array.prototype.indexOf.call(Ee,R,O):Uint8Array.prototype.lastIndexOf.call(Ee,R,O):K(Ee,[R],O,pe,ze);throw new TypeError("val must be string, number or Buffer")}function K(Ee,R,O,pe,ze){var Ye=1,ot=Ee.length,se=R.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(Ee.length<2||R.length<2)return-1;Ye=2,ot/=2,se/=2,O/=2}function A(Qe,Ht){return Ye===1?Qe[Ht]:Qe.readUInt16BE(Ht*Ye)}var z;if(ze){var we=-1;for(z=O;z<ot;z++)if(A(Ee,z)===A(R,we===-1?0:z-we)){if(we===-1&&(we=z),z-we+1===se)return we*Ye}else we!==-1&&(z-=z-we),we=-1}else for(O+se>ot&&(O=ot-se),z=O;z>=0;z--){for(var je=!0,Xe=0;Xe<se;Xe++)if(A(Ee,z+Xe)!==A(R,Xe)){je=!1;break}if(je)return z}return-1}E.prototype.includes=function(R,O,pe){return this.indexOf(R,O,pe)!==-1},E.prototype.indexOf=function(R,O,pe){return U(this,R,O,pe,!0)},E.prototype.lastIndexOf=function(R,O,pe){return U(this,R,O,pe,!1)};function Y(Ee,R,O,pe){O=Number(O)||0;var ze=Ee.length-O;pe?(pe=Number(pe),pe>ze&&(pe=ze)):pe=ze;var Ye=R.length;pe>Ye/2&&(pe=Ye/2);for(var ot=0;ot<pe;++ot){var se=parseInt(R.substr(ot*2,2),16);if(En(se))return ot;Ee[O+ot]=se}return ot}function de(Ee,R,O,pe){return wn(Nt(R,Ee.length-O),Ee,O,pe)}function ve(Ee,R,O,pe){return wn(Bt(R),Ee,O,pe)}function be(Ee,R,O,pe){return ve(Ee,R,O,pe)}function ee(Ee,R,O,pe){return wn(Tn(R),Ee,O,pe)}function ie(Ee,R,O,pe){return wn(cn(R,Ee.length-O),Ee,O,pe)}E.prototype.write=function(R,O,pe,ze){if(O===void 0)ze="utf8",pe=this.length,O=0;else if(pe===void 0&&typeof O=="string")ze=O,pe=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(pe)?(pe=pe>>>0,ze===void 0&&(ze="utf8")):(ze=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ye=this.length-O;if((pe===void 0||pe>Ye)&&(pe=Ye),R.length>0&&(pe<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");for(var ot=!1;;)switch(ze){case"hex":return Y(this,R,O,pe);case"utf8":case"utf-8":return de(this,R,O,pe);case"ascii":return ve(this,R,O,pe);case"latin1":case"binary":return be(this,R,O,pe);case"base64":return ee(this,R,O,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,R,O,pe);default:if(ot)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),ot=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(Ee,R,O){return R===0&&O===Ee.length?g.fromByteArray(Ee):g.fromByteArray(Ee.slice(R,O))}function te(Ee,R,O){O=Math.min(Ee.length,O);for(var pe=[],ze=R;ze<O;){var Ye=Ee[ze],ot=null,se=Ye>239?4:Ye>223?3:Ye>191?2:1;if(ze+se<=O){var A,z,we,je;switch(se){case 1:Ye<128&&(ot=Ye);break;case 2:A=Ee[ze+1],(A&192)===128&&(je=(Ye&31)<<6|A&63,je>127&&(ot=je));break;case 3:A=Ee[ze+1],z=Ee[ze+2],(A&192)===128&&(z&192)===128&&(je=(Ye&15)<<12|(A&63)<<6|z&63,je>2047&&(je<55296||je>57343)&&(ot=je));break;case 4:A=Ee[ze+1],z=Ee[ze+2],we=Ee[ze+3],(A&192)===128&&(z&192)===128&&(we&192)===128&&(je=(Ye&15)<<18|(A&63)<<12|(z&63)<<6|we&63,je>65535&&je<1114112&&(ot=je))}}ot===null?(ot=65533,se=1):ot>65535&&(ot-=65536,pe.push(ot>>>10&1023|55296),ot=56320|ot&1023),pe.push(ot),ze+=se}return xe(pe)}var he=4096;function xe(Ee){var R=Ee.length;if(R<=he)return String.fromCharCode.apply(String,Ee);for(var O="",pe=0;pe<R;)O+=String.fromCharCode.apply(String,Ee.slice(pe,pe+=he));return O}function _e(Ee,R,O){var pe="";O=Math.min(Ee.length,O);for(var ze=R;ze<O;++ze)pe+=String.fromCharCode(Ee[ze]&127);return pe}function Be(Ee,R,O){var pe="";O=Math.min(Ee.length,O);for(var ze=R;ze<O;++ze)pe+=String.fromCharCode(Ee[ze]);return pe}function Ie(Ee,R,O){var pe=Ee.length;(!R||R<0)&&(R=0),(!O||O<0||O>pe)&&(O=pe);for(var ze="",Ye=R;Ye<O;++Ye)ze+=Et(Ee[Ye]);return ze}function Pe(Ee,R,O){for(var pe=Ee.slice(R,O),ze="",Ye=0;Ye<pe.length;Ye+=2)ze+=String.fromCharCode(pe[Ye]+pe[Ye+1]*256);return ze}E.prototype.slice=function(R,O){var pe=this.length;R=~~R,O=O===void 0?pe:~~O,R<0?(R+=pe,R<0&&(R=0)):R>pe&&(R=pe),O<0?(O+=pe,O<0&&(O=0)):O>pe&&(O=pe),O<R&&(O=R);var ze=this.subarray(R,O);return ze.__proto__=E.prototype,ze};function $e(Ee,R,O){if(Ee%1!==0||Ee<0)throw new RangeError("offset is not uint");if(Ee+R>O)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUIntLE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||$e(R,O,this.length);for(var ze=this[R],Ye=1,ot=0;++ot<O&&(Ye*=256);)ze+=this[R+ot]*Ye;return ze},E.prototype.readUIntBE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||$e(R,O,this.length);for(var ze=this[R+--O],Ye=1;O>0&&(Ye*=256);)ze+=this[R+--O]*Ye;return ze},E.prototype.readUInt8=function(R,O){return R=R>>>0,O||$e(R,1,this.length),this[R]},E.prototype.readUInt16LE=function(R,O){return R=R>>>0,O||$e(R,2,this.length),this[R]|this[R+1]<<8},E.prototype.readUInt16BE=function(R,O){return R=R>>>0,O||$e(R,2,this.length),this[R]<<8|this[R+1]},E.prototype.readUInt32LE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},E.prototype.readUInt32BE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},E.prototype.readIntLE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||$e(R,O,this.length);for(var ze=this[R],Ye=1,ot=0;++ot<O&&(Ye*=256);)ze+=this[R+ot]*Ye;return Ye*=128,ze>=Ye&&(ze-=Math.pow(2,8*O)),ze},E.prototype.readIntBE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||$e(R,O,this.length);for(var ze=O,Ye=1,ot=this[R+--ze];ze>0&&(Ye*=256);)ot+=this[R+--ze]*Ye;return Ye*=128,ot>=Ye&&(ot-=Math.pow(2,8*O)),ot},E.prototype.readInt8=function(R,O){return R=R>>>0,O||$e(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},E.prototype.readInt16LE=function(R,O){R=R>>>0,O||$e(R,2,this.length);var pe=this[R]|this[R+1]<<8;return pe&32768?pe|4294901760:pe},E.prototype.readInt16BE=function(R,O){R=R>>>0,O||$e(R,2,this.length);var pe=this[R+1]|this[R]<<8;return pe&32768?pe|4294901760:pe},E.prototype.readInt32LE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},E.prototype.readInt32BE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},E.prototype.readFloatLE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),l.read(this,R,!0,23,4)},E.prototype.readFloatBE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),l.read(this,R,!1,23,4)},E.prototype.readDoubleLE=function(R,O){return R=R>>>0,O||$e(R,8,this.length),l.read(this,R,!0,52,8)},E.prototype.readDoubleBE=function(R,O){return R=R>>>0,O||$e(R,8,this.length),l.read(this,R,!1,52,8)};function Ne(Ee,R,O,pe,ze,Ye){if(!E.isBuffer(Ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>ze||R<Ye)throw new RangeError('"value" argument is out of bounds');if(O+pe>Ee.length)throw new RangeError("Index out of range")}E.prototype.writeUIntLE=function(R,O,pe,ze){if(R=+R,O=O>>>0,pe=pe>>>0,!ze){var Ye=Math.pow(2,8*pe)-1;Ne(this,R,O,pe,Ye,0)}var ot=1,se=0;for(this[O]=R&255;++se<pe&&(ot*=256);)this[O+se]=R/ot&255;return O+pe},E.prototype.writeUIntBE=function(R,O,pe,ze){if(R=+R,O=O>>>0,pe=pe>>>0,!ze){var Ye=Math.pow(2,8*pe)-1;Ne(this,R,O,pe,Ye,0)}var ot=pe-1,se=1;for(this[O+ot]=R&255;--ot>=0&&(se*=256);)this[O+ot]=R/se&255;return O+pe},E.prototype.writeUInt8=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,1,255,0),this[O]=R&255,O+1},E.prototype.writeUInt16LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,2,65535,0),this[O]=R&255,this[O+1]=R>>>8,O+2},E.prototype.writeUInt16BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,2,65535,0),this[O]=R>>>8,this[O+1]=R&255,O+2},E.prototype.writeUInt32LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,4,4294967295,0),this[O+3]=R>>>24,this[O+2]=R>>>16,this[O+1]=R>>>8,this[O]=R&255,O+4},E.prototype.writeUInt32BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,4,4294967295,0),this[O]=R>>>24,this[O+1]=R>>>16,this[O+2]=R>>>8,this[O+3]=R&255,O+4},E.prototype.writeIntLE=function(R,O,pe,ze){if(R=+R,O=O>>>0,!ze){var Ye=Math.pow(2,8*pe-1);Ne(this,R,O,pe,Ye-1,-Ye)}var ot=0,se=1,A=0;for(this[O]=R&255;++ot<pe&&(se*=256);)R<0&&A===0&&this[O+ot-1]!==0&&(A=1),this[O+ot]=(R/se>>0)-A&255;return O+pe},E.prototype.writeIntBE=function(R,O,pe,ze){if(R=+R,O=O>>>0,!ze){var Ye=Math.pow(2,8*pe-1);Ne(this,R,O,pe,Ye-1,-Ye)}var ot=pe-1,se=1,A=0;for(this[O+ot]=R&255;--ot>=0&&(se*=256);)R<0&&A===0&&this[O+ot+1]!==0&&(A=1),this[O+ot]=(R/se>>0)-A&255;return O+pe},E.prototype.writeInt8=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,1,127,-128),R<0&&(R=255+R+1),this[O]=R&255,O+1},E.prototype.writeInt16LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,2,32767,-32768),this[O]=R&255,this[O+1]=R>>>8,O+2},E.prototype.writeInt16BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,2,32767,-32768),this[O]=R>>>8,this[O+1]=R&255,O+2},E.prototype.writeInt32LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,4,2147483647,-2147483648),this[O]=R&255,this[O+1]=R>>>8,this[O+2]=R>>>16,this[O+3]=R>>>24,O+4},E.prototype.writeInt32BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[O]=R>>>24,this[O+1]=R>>>16,this[O+2]=R>>>8,this[O+3]=R&255,O+4};function qe(Ee,R,O,pe,ze,Ye){if(O+pe>Ee.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function st(Ee,R,O,pe,ze){return R=+R,O=O>>>0,ze||qe(Ee,R,O,4),l.write(Ee,R,O,pe,23,4),O+4}E.prototype.writeFloatLE=function(R,O,pe){return st(this,R,O,!0,pe)},E.prototype.writeFloatBE=function(R,O,pe){return st(this,R,O,!1,pe)};function yt(Ee,R,O,pe,ze){return R=+R,O=O>>>0,ze||qe(Ee,R,O,8),l.write(Ee,R,O,pe,52,8),O+8}E.prototype.writeDoubleLE=function(R,O,pe){return yt(this,R,O,!0,pe)},E.prototype.writeDoubleBE=function(R,O,pe){return yt(this,R,O,!1,pe)},E.prototype.copy=function(R,O,pe,ze){if(!E.isBuffer(R))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!ze&&ze!==0&&(ze=this.length),O>=R.length&&(O=R.length),O||(O=0),ze>0&&ze<pe&&(ze=pe),ze===pe||R.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),R.length-O<ze-pe&&(ze=R.length-O+pe);var Ye=ze-pe;if(this===R&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,pe,ze);else if(this===R&&pe<O&&O<ze)for(var ot=Ye-1;ot>=0;--ot)R[ot+O]=this[ot+pe];else Uint8Array.prototype.set.call(R,this.subarray(pe,ze),O);return Ye},E.prototype.fill=function(R,O,pe,ze){if(typeof R=="string"){if(typeof O=="string"?(ze=O,O=0,pe=this.length):typeof pe=="string"&&(ze=pe,pe=this.length),ze!==void 0&&typeof ze!="string")throw new TypeError("encoding must be a string");if(typeof ze=="string"&&!E.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze);if(R.length===1){var Ye=R.charCodeAt(0);(ze==="utf8"&&Ye<128||ze==="latin1")&&(R=Ye)}}else typeof R=="number"&&(R=R&255);if(O<0||this.length<O||this.length<pe)throw new RangeError("Out of range index");if(pe<=O)return this;O=O>>>0,pe=pe===void 0?this.length:pe>>>0,R||(R=0);var ot;if(typeof R=="number")for(ot=O;ot<pe;++ot)this[ot]=R;else{var se=E.isBuffer(R)?R:E.from(R,ze),A=se.length;if(A===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(ot=0;ot<pe-O;++ot)this[ot+O]=se[ot%A]}return this};var Pt=/[^+/0-9A-Za-z-_]/g;function ht(Ee){if(Ee=Ee.split("=")[0],Ee=Ee.trim().replace(Pt,""),Ee.length<2)return"";for(;Ee.length%4!==0;)Ee=Ee+"=";return Ee}function Et(Ee){return Ee<16?"0"+Ee.toString(16):Ee.toString(16)}function Nt(Ee,R){R=R||1/0;for(var O,pe=Ee.length,ze=null,Ye=[],ot=0;ot<pe;++ot){if(O=Ee.charCodeAt(ot),O>55295&&O<57344){if(!ze){if(O>56319){(R-=3)>-1&&Ye.push(239,191,189);continue}else if(ot+1===pe){(R-=3)>-1&&Ye.push(239,191,189);continue}ze=O;continue}if(O<56320){(R-=3)>-1&&Ye.push(239,191,189),ze=O;continue}O=(ze-55296<<10|O-56320)+65536}else ze&&(R-=3)>-1&&Ye.push(239,191,189);if(ze=null,O<128){if((R-=1)<0)break;Ye.push(O)}else if(O<2048){if((R-=2)<0)break;Ye.push(O>>6|192,O&63|128)}else if(O<65536){if((R-=3)<0)break;Ye.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((R-=4)<0)break;Ye.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return Ye}function Bt(Ee){for(var R=[],O=0;O<Ee.length;++O)R.push(Ee.charCodeAt(O)&255);return R}function cn(Ee,R){for(var O,pe,ze,Ye=[],ot=0;ot<Ee.length&&!((R-=2)<0);++ot)O=Ee.charCodeAt(ot),pe=O>>8,ze=O%256,Ye.push(ze),Ye.push(pe);return Ye}function Tn(Ee){return g.toByteArray(ht(Ee))}function wn(Ee,R,O,pe){for(var ze=0;ze<pe&&!(ze+O>=R.length||ze>=Ee.length);++ze)R[ze+O]=Ee[ze];return ze}function on(Ee,R){return Ee instanceof R||Ee!=null&&Ee.constructor!=null&&Ee.constructor.name!=null&&Ee.constructor.name===R.name}function En(Ee){return Ee!==Ee}}).call(this)}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(r,s,u){const f=r("./validator"),g=r("./xmlparser/XMLParser"),l=r("./xmlbuilder/json2xml");s.exports={XMLParser:g,XMLValidator:f,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(r,s,u){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",g=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+f+"]["+g+"]*",_=new RegExp("^"+l+"$"),C=function(E,T){const F=[];let X=T.exec(E);for(;X;){const Z=[];Z.startIndex=T.lastIndex-X[0].length;const ue=X.length;for(let H=0;H<ue;H++)Z.push(X[H]);F.push(Z),X=T.exec(E)}return F},S=function(E){const T=_.exec(E);return!(T===null||typeof T=="undefined")};u.isExist=function(E){return typeof E!="undefined"},u.isEmptyObject=function(E){return Object.keys(E).length===0},u.merge=function(E,T,F){if(T){const X=Object.keys(T),Z=X.length;for(let ue=0;ue<Z;ue++)F==="strict"?E[X[ue]]=[T[X[ue]]]:E[X[ue]]=T[X[ue]]}},u.getValue=function(E){return u.isExist(E)?E:""},u.isName=S,u.getAllMatches=C,u.nameRegexp=l},{}],5:[function(r,s,u){const f=r("./util"),g={allowBooleanAttributes:!1,unpairedTags:[]};u.validate=function(j,w){w=Object.assign({},g,w);const k=[];let U=!1,K=!1;j[0]==="\uFEFF"&&(j=j.substr(1));for(let Y=0;Y<j.length;Y++)if(j[Y]==="<"&&j[Y+1]==="?"){if(Y+=2,Y=_(j,Y),Y.err)return Y}else if(j[Y]==="<"){let de=Y;if(Y++,j[Y]==="!"){Y=C(j,Y);continue}else{let ve=!1;j[Y]==="/"&&(ve=!0,Y++);let be="";for(;Y<j.length&&j[Y]!==">"&&j[Y]!==" "&&j[Y]!=="	"&&j[Y]!==`
`&&j[Y]!=="\r";Y++)be+=j[Y];if(be=be.trim(),be[be.length-1]==="/"&&(be=be.substring(0,be.length-1),Y--),!B(be)){let ne;return be.trim().length===0?ne="Invalid space after '<'.":ne="Tag '"+be+"' is an invalid name.",H("InvalidTag",ne,ae(j,Y))}const ee=T(j,Y);if(ee===!1)return H("InvalidAttr","Attributes for '"+be+"' have open quote.",ae(j,Y));let ie=ee.value;if(Y=ee.index,ie[ie.length-1]==="/"){const ne=Y-ie.length;ie=ie.substring(0,ie.length-1);const te=X(ie,w);if(te===!0)U=!0;else return H(te.err.code,te.err.msg,ae(j,ne+te.err.line))}else if(ve)if(ee.tagClosed){if(ie.trim().length>0)return H("InvalidTag","Closing tag '"+be+"' can't have attributes or invalid starting.",ae(j,de));{const ne=k.pop();if(be!==ne.tagName){let te=ae(j,ne.tagStartPos);return H("InvalidTag","Expected closing tag '"+ne.tagName+"' (opened in line "+te.line+", col "+te.col+") instead of closing tag '"+be+"'.",ae(j,de))}k.length==0&&(K=!0)}}else return H("InvalidTag","Closing tag '"+be+"' doesn't have proper closing.",ae(j,Y));else{const ne=X(ie,w);if(ne!==!0)return H(ne.err.code,ne.err.msg,ae(j,Y-ie.length+ne.err.line));if(K===!0)return H("InvalidXml","Multiple possible root nodes found.",ae(j,Y));w.unpairedTags.indexOf(be)!==-1||k.push({tagName:be,tagStartPos:de}),U=!0}for(Y++;Y<j.length;Y++)if(j[Y]==="<")if(j[Y+1]==="!"){Y++,Y=C(j,Y);continue}else if(j[Y+1]==="?"){if(Y=_(j,++Y),Y.err)return Y}else break;else if(j[Y]==="&"){const ne=ue(j,Y);if(ne==-1)return H("InvalidChar","char '&' is not expected.",ae(j,Y));Y=ne}else if(K===!0&&!l(j[Y]))return H("InvalidXml","Extra text at the end",ae(j,Y));j[Y]==="<"&&Y--}}else{if(l(j[Y]))continue;return H("InvalidChar","char '"+j[Y]+"' is not expected.",ae(j,Y))}if(U){if(k.length==1)return H("InvalidTag","Unclosed tag '"+k[0].tagName+"'.",ae(j,k[0].tagStartPos));if(k.length>0)return H("InvalidXml","Invalid '"+JSON.stringify(k.map(Y=>Y.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return H("InvalidXml","Start tag expected.",1);return!0};function l(j){return j===" "||j==="	"||j===`
`||j==="\r"}function _(j,w){const k=w;for(;w<j.length;w++)if(j[w]=="?"||j[w]==" "){const U=j.substr(k,w-k);if(w>5&&U==="xml")return H("InvalidXml","XML declaration allowed only at the start of the document.",ae(j,w));if(j[w]=="?"&&j[w+1]==">"){w++;break}else continue}return w}function C(j,w){if(j.length>w+5&&j[w+1]==="-"&&j[w+2]==="-"){for(w+=3;w<j.length;w++)if(j[w]==="-"&&j[w+1]==="-"&&j[w+2]===">"){w+=2;break}}else if(j.length>w+8&&j[w+1]==="D"&&j[w+2]==="O"&&j[w+3]==="C"&&j[w+4]==="T"&&j[w+5]==="Y"&&j[w+6]==="P"&&j[w+7]==="E"){let k=1;for(w+=8;w<j.length;w++)if(j[w]==="<")k++;else if(j[w]===">"&&(k--,k===0))break}else if(j.length>w+9&&j[w+1]==="["&&j[w+2]==="C"&&j[w+3]==="D"&&j[w+4]==="A"&&j[w+5]==="T"&&j[w+6]==="A"&&j[w+7]==="["){for(w+=8;w<j.length;w++)if(j[w]==="]"&&j[w+1]==="]"&&j[w+2]===">"){w+=2;break}}return w}const S='"',E="'";function T(j,w){let k="",U="",K=!1;for(;w<j.length;w++){if(j[w]===S||j[w]===E)U===""?U=j[w]:U!==j[w]||(U="");else if(j[w]===">"&&U===""){K=!0;break}k+=j[w]}return U!==""?!1:{value:k,index:w,tagClosed:K}}const F=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function X(j,w){const k=f.getAllMatches(j,F),U={};for(let K=0;K<k.length;K++){if(k[K][1].length===0)return H("InvalidAttr","Attribute '"+k[K][2]+"' has no space in starting.",G(k[K]));if(k[K][3]!==void 0&&k[K][4]===void 0)return H("InvalidAttr","Attribute '"+k[K][2]+"' is without value.",G(k[K]));if(k[K][3]===void 0&&!w.allowBooleanAttributes)return H("InvalidAttr","boolean attribute '"+k[K][2]+"' is not allowed.",G(k[K]));const Y=k[K][2];if(!V(Y))return H("InvalidAttr","Attribute '"+Y+"' is an invalid name.",G(k[K]));if(!U.hasOwnProperty(Y))U[Y]=1;else return H("InvalidAttr","Attribute '"+Y+"' is repeated.",G(k[K]))}return!0}function Z(j,w){let k=/\d/;for(j[w]==="x"&&(w++,k=/[\da-fA-F]/);w<j.length;w++){if(j[w]===";")return w;if(!j[w].match(k))break}return-1}function ue(j,w){if(w++,j[w]===";")return-1;if(j[w]==="#")return w++,Z(j,w);let k=0;for(;w<j.length;w++,k++)if(!(j[w].match(/\w/)&&k<20)){if(j[w]===";")break;return-1}return w}function H(j,w,k){return{err:{code:j,msg:w,line:k.line||k,col:k.col}}}function V(j){return f.isName(j)}function B(j){return f.isName(j)}function ae(j,w){const k=j.substring(0,w).split(/\r?\n/);return{line:k.length,col:k[k.length-1].length+1}}function G(j){return j.startIndex+j[1].length}},{"./util":4}],6:[function(r,s,u){const f=r("./orderedJs2Xml"),g={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressBooleanAttributes:!0,tagValueProcessor:function(ue,H){return H},attributeValueProcessor:function(ue,H){return H},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:{">":{regex:new RegExp(">","g"),val:"&gt;"},"<":{regex:new RegExp("<","g"),val:"&lt;"},sQuot:{regex:new RegExp("'","g"),val:"&apos;"},dQuot:{regex:new RegExp('"',"g"),val:"&quot;"}},processEntities:!0,stopNodes:[]};function l(ue){this.options=Object.assign({},g,ue),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Z),this.processTextOrObjNode=_,this.options.format?(this.indentate=X,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=F,this.buildObjNode=S):(this.buildTextNode=E,this.buildObjNode=C),this.buildTextValNode=E,this.buildObjectNode=C,this.replaceEntitiesValue=T}l.prototype.build=function(ue){return this.options.preserveOrder?f(ue,this.options):(Array.isArray(ue)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(ue={[this.options.arrayNodeName]:ue}),this.j2x(ue,0).val)},l.prototype.j2x=function(ue,H){let V="",B="";for(let ae in ue)if(typeof ue[ae]!="undefined")if(ue[ae]===null)B+=this.indentate(H)+"<"+ae+"/"+this.tagEndChar;else if(ue[ae]instanceof Date)B+=this.buildTextNode(ue[ae],ae,"",H);else if(typeof ue[ae]!="object"){const G=this.isAttribute(ae);if(G){let j=this.options.attributeValueProcessor(G,""+ue[ae]);j=this.replaceEntitiesValue(j),V+=" "+G+'="'+j+'"'}else if(ae===this.options.textNodeName){let j=this.options.tagValueProcessor(ae,""+ue[ae]);B+=this.replaceEntitiesValue(j)}else B+=this.buildTextNode(ue[ae],ae,"",H)}else if(Array.isArray(ue[ae])){const G=ue[ae].length;for(let j=0;j<G;j++){const w=ue[ae][j];typeof w=="undefined"||(w===null?B+=this.indentate(H)+"<"+ae+"/"+this.tagEndChar:typeof w=="object"?B+=this.processTextOrObjNode(w,ae,H):B+=this.buildTextNode(w,ae,"",H))}}else if(this.options.attributesGroupName&&ae===this.options.attributesGroupName){const G=Object.keys(ue[ae]),j=G.length;for(let w=0;w<j;w++){let k=this.options.attributeValueProcessor(G[w],""+ue[ae][G[w]]);k=this.replaceEntitiesValue(k),V+=" "+G[w]+'="'+k+'"'}}else B+=this.processTextOrObjNode(ue[ae],ae,H);return{attrStr:V,val:B}};function _(ue,H,V){const B=this.j2x(ue,V+1);return ue[this.options.textNodeName]!==void 0&&Object.keys(ue).length===1?this.buildTextNode(B.val,H,B.attrStr,V):this.buildObjNode(B.val,H,B.attrStr,V)}function C(ue,H,V,B){return V&&ue.indexOf("<")===-1?this.indentate(B)+"<"+H+V+">"+ue+"</"+H+this.tagEndChar:this.indentate(B)+"<"+H+V+this.tagEndChar+ue+this.indentate(B)+"</"+H+this.tagEndChar}function S(ue,H,V,B){return ue!==""?this.buildObjectNode(ue,H,V,B):this.indentate(B)+"<"+H+V+"/"+this.tagEndChar}function E(ue,H,V,B){let ae=this.options.tagValueProcessor(H,ue);return ae=this.replaceEntitiesValue(ae),this.indentate(B)+"<"+H+V+">"+ae+"</"+H+this.tagEndChar}function T(ue){if(ue&&ue.length>0&&this.options.processEntities)for(const H in this.options.entities){const V=this.options.entities[H];ue=ue.replace(V.regex,V.val)}return ue}function F(ue,H,V,B){return ue===""&&this.options.unpairedTags.indexOf(H)!==-1?this.indentate(B)+"<"+H+V+this.tagEndChar:ue!==""?this.buildTextValNode(ue,H,V,B):this.indentate(B)+"<"+H+V+"/"+this.tagEndChar}function X(ue){return this.options.indentBy.repeat(ue)}function Z(ue){return ue.startsWith(this.options.attributeNamePrefix)?ue.substr(this.attrPrefixLen):!1}s.exports=l},{"./orderedJs2Xml":7}],7:[function(r,s,u){const{EOL:f}=r("os");function g(T,F){return l(T,F,"",0)}function l(T,F,X,Z){let ue="",H="";F.format&&F.indentBy.length>0&&(H=f+""+F.indentBy.repeat(Z));for(let V=0;V<T.length;V++){const B=T[V],ae=_(B);let G="";if(X.length===0?G=ae:G=`${X}.${ae}`,ae===F.textNodeName){let U=B[ae];S(G,F)||(U=F.tagValueProcessor(ae,U),U=E(U,F)),ue+=H+U;continue}else if(ae===F.cdataPropName){ue+=H+`<![CDATA[${B[ae][0][F.textNodeName]}]]>`;continue}else if(ae===F.commentPropName){ue+=H+`<!--${B[ae][0][F.textNodeName]}-->`;continue}else if(ae[0]==="?"){const U=C(B[":@"],F);ue+=H+`<${ae} ${B[ae][0][F.textNodeName]} ${U}?>`;continue}const j=C(B[":@"],F);let w=H+`<${ae}${j}`,k=l(B[ae],F,G,Z+1);F.unpairedTags.indexOf(ae)!==-1?ue+=w+">":(!k||k.length===0)&&F.suppressEmptyNode?ue+=w+"/>":ue+=w+`>${k}${H}</${ae}>`}return ue}function _(T){const F=Object.keys(T);for(let X=0;X<F.length;X++){const Z=F[X];if(Z!==":@")return Z}}function C(T,F){let X="";if(T&&!F.ignoreAttributes)for(attr in T){let Z=F.attributeValueProcessor(attr,T[attr]);Z=E(Z,F),Z===!0&&F.suppressBooleanAttributes?X+=` ${attr.substr(F.attributeNamePrefix.length)}`:X+=` ${attr.substr(F.attributeNamePrefix.length)}="${Z}"`}return X}function S(T,F){T=T.substr(0,T.length-F.textNodeName.length-1);let X=T.substr(T.lastIndexOf(".")+1);for(let Z in F.stopNodes)if(F.stopNodes[Z]===T||F.stopNodes[Z]==="*."+X)return!0;return!1}function E(T,F){if(T&&T.length>0&&F.processEntities)for(const X in F.entities){const Z=F.entities[X];T=T.replace(Z.regex,Z.val)}return T}s.exports=g},{os:15}],8:[function(r,s,u){function f(_,C){const S={};if(_[C+3]==="O"&&_[C+4]==="C"&&_[C+5]==="T"&&_[C+6]==="Y"&&_[C+7]==="P"&&_[C+8]==="E"){C=C+9;let E=1,T=!1,F=!1,X=!1,Z="";for(;C<_.length;C++)if(_[C]==="<"){if(T&&_[C+1]==="!"&&_[C+2]==="E"&&_[C+3]==="N"&&_[C+4]==="T"&&_[C+5]==="I"&&_[C+6]==="T"&&_[C+7]==="Y")C+=7,F=!0;else if(T&&_[C+1]==="!"&&_[C+2]==="E"&&_[C+3]==="L"&&_[C+4]==="E"&&_[C+5]==="M"&&_[C+6]==="E"&&_[C+7]==="N"&&_[C+8]==="T")C+=8;else if(_[C+1]==="!"&&_[C+2]==="-"&&_[C+3]==="-")X=!0;else throw new Error("Invalid DOCTYPE");E++,Z=""}else if(_[C]===">"){if(X)if(_[C-1]==="-"&&_[C-2]==="-")X=!1;else throw new Error("Invalid XML comment in DOCTYPE");else F&&(l(Z,S),F=!1);if(E--,E===0)break}else _[C]==="["?T=!0:Z+=_[C];if(E!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:S,i:C}}const g=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(_,C){const S=g.exec(_);S&&(C[S[1]]={regx:RegExp(`&${S[1]};`,"g"),val:S[3]})}s.exports=f},{}],9:[function(r,s,u){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,_){return _},attributeValueProcessor:function(l,_){return _},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1},g=function(l){return Object.assign({},f,l)};u.buildOptions=g,u.defaultOptions=f},{}],10:[function(r,s,u){const f=r("../util"),g=r("./xmlNode"),l=r("./DocTypeReader"),_=r("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,f.nameRegexp);class C{constructor(U){this.options=U,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=S,this.parseXml=Z,this.parseTextData=E,this.resolveNameSpace=T,this.buildAttributesMap=X,this.isItStopNode=V,this.replaceEntitiesValue=ue,this.readStopNodeData=j,this.saveTextToParentTag=H}}function S(k){const U=Object.keys(k);for(let K=0;K<U.length;K++){const Y=U[K];this.lastEntities[Y]={regex:new RegExp("&"+Y+";","g"),val:k[Y]}}}function E(k,U,K,Y,de,ve,be){if(k!==void 0&&(this.options.trimValues&&!Y&&(k=k.trim()),k.length>0)){be||(k=this.replaceEntitiesValue(k));const ee=this.options.tagValueProcessor(U,k,K,de,ve);return ee==null?k:typeof ee!=typeof k||ee!==k?ee:this.options.trimValues?w(k,this.options.parseTagValue,this.options.numberParseOptions):k.trim()===k?w(k,this.options.parseTagValue,this.options.numberParseOptions):k}}function T(k){if(this.options.removeNSPrefix){const U=k.split(":"),K=k.charAt(0)==="/"?"/":"";if(U[0]==="xmlns")return"";U.length===2&&(k=K+U[1])}return k}const F=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function X(k,U){if(!this.options.ignoreAttributes&&typeof k=="string"){const K=f.getAllMatches(k,F),Y=K.length,de={};for(let ve=0;ve<Y;ve++){const be=this.resolveNameSpace(K[ve][1]);let ee=K[ve][4];const ie=this.options.attributeNamePrefix+be;if(be.length)if(ee!==void 0){this.options.trimValues&&(ee=ee.trim()),ee=this.replaceEntitiesValue(ee);const ne=this.options.attributeValueProcessor(be,ee,U);ne==null?de[ie]=ee:typeof ne!=typeof ee||ne!==ee?de[ie]=ne:de[ie]=w(ee,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(de[ie]=!0)}if(!Object.keys(de).length)return;if(this.options.attributesGroupName){const ve={};return ve[this.options.attributesGroupName]=de,ve}return de}}const Z=function(k){k=k.replace(/\r\n?/g,`
`);const U=new g("!xml");let K=U,Y="",de="";for(let ve=0;ve<k.length;ve++)if(k[ve]==="<")if(k[ve+1]==="/"){const ee=ae(k,">",ve,"Closing Tag is not closed.");let ie=k.substring(ve+2,ee).trim();if(this.options.removeNSPrefix){const ne=ie.indexOf(":");ne!==-1&&(ie=ie.substr(ne+1))}K&&(Y=this.saveTextToParentTag(Y,K,de)),de=de.substr(0,de.lastIndexOf(".")),K=this.tagsNodeStack.pop(),Y="",ve=ee}else if(k[ve+1]==="?"){let ee=G(k,ve,!1,"?>");if(!ee)throw new Error("Pi Tag is not closed.");Y=this.saveTextToParentTag(Y,K,de);const ie=new g(ee.tagName);ie.add(this.options.textNodeName,""),ee.tagName!==ee.tagExp&&ee.attrExpPresent&&(ie[":@"]=this.buildAttributesMap(ee.tagExp,de)),K.addChild(ie),ve=ee.closeIndex+1}else if(k.substr(ve+1,3)==="!--"){const ee=ae(k,"-->",ve,"Comment is not closed.");if(this.options.commentPropName){const ie=k.substring(ve+4,ee-2);Y=this.saveTextToParentTag(Y,K,de),K.add(this.options.commentPropName,[{[this.options.textNodeName]:ie}])}ve=ee}else if(k.substr(ve+1,2)==="!D"){const ee=l(k,ve);this.docTypeEntities=ee.entities,ve=ee.i}else if(k.substr(ve+1,2)==="!["){const ee=ae(k,"]]>",ve,"CDATA is not closed.")-2,ie=k.substring(ve+9,ee);if(Y=this.saveTextToParentTag(Y,K,de),this.options.cdataPropName)K.add(this.options.cdataPropName,[{[this.options.textNodeName]:ie}]);else{let ne=this.parseTextData(ie,K.tagname,de,!0,!1,!0);ne||(ne=""),K.add(this.options.textNodeName,ne)}ve=ee+2}else{let ee=G(k,ve,this.options.removeNSPrefix),ie=ee.tagName,ne=ee.tagExp,te=ee.attrExpPresent,he=ee.closeIndex;K&&Y&&K.tagname!=="!xml"&&(Y=this.saveTextToParentTag(Y,K,de,!1)),ie!==U.tagname&&(de+=de?"."+ie:ie);const xe=K;if(xe&&this.options.unpairedTags.indexOf(xe.tagname)!==-1&&(K=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,de,ie)){let _e="";if(!(ne.length>0&&ne.lastIndexOf("/")===ne.length-1)){if(this.options.unpairedTags.indexOf(ie)===-1){const Ie=this.readStopNodeData(k,ie,he+1);if(!Ie)throw new Error(`Unexpected end of ${ie}`);ve=Ie.i,_e=Ie.tagContent}}const Be=new g(ie);ie!==ne&&te&&(Be[":@"]=this.buildAttributesMap(ne,de)),_e&&(_e=this.parseTextData(_e,ie,de,!0,te,!0,!0)),de=de.substr(0,de.lastIndexOf(".")),Be.add(this.options.textNodeName,_e),K.addChild(Be)}else{if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1){ie[ie.length-1]==="/"?(ie=ie.substr(0,ie.length-1),ne=ie):ne=ne.substr(0,ne.length-1);const _e=new g(ie);ie!==ne&&te&&(_e[":@"]=this.buildAttributesMap(ne,de)),de=de.substr(0,de.lastIndexOf(".")),K.addChild(_e)}else{const _e=new g(ie);this.tagsNodeStack.push(K),ie!==ne&&te&&(_e[":@"]=this.buildAttributesMap(ne,de)),K.addChild(_e),K=_e}Y="",ve=he}}else Y+=k[ve];return U.child},ue=function(k){if(this.options.processEntities){for(let U in this.docTypeEntities){const K=this.docTypeEntities[U];k=k.replace(K.regx,K.val)}for(let U in this.lastEntities){const K=this.lastEntities[U];k=k.replace(K.regex,K.val)}if(this.options.htmlEntities)for(let U in this.htmlEntities){const K=this.htmlEntities[U];k=k.replace(K.regex,K.val)}}return k};function H(k,U,K,Y){return k&&(Y===void 0&&(Y=Object.keys(U.child).length===0),k=this.parseTextData(k,U.tagname,K,!1,U[":@"]?Object.keys(U[":@"]).length!==0:!1,Y),k!==void 0&&k!==""&&U.add(this.options.textNodeName,k),k=""),k}function V(k,U,K){const Y="*."+K;for(const de in k){const ve=k[de];if(Y===ve||U===ve)return!0}return!1}function B(k,U,K=">"){let Y,de="";for(let ve=U;ve<k.length;ve++){let be=k[ve];if(Y)be===Y&&(Y="");else if(be==='"'||be==="'")Y=be;else if(be===K[0])if(K[1]){if(k[ve+1]===K[1])return{data:de,index:ve}}else return{data:de,index:ve};else be==="	"&&(be=" ");de+=be}}function ae(k,U,K,Y){const de=k.indexOf(U,K);if(de===-1)throw new Error(Y);return de+U.length-1}function G(k,U,K,Y=">"){const de=B(k,U+1,Y);if(!de)return;let ve=de.data;const be=de.index,ee=ve.search(/\s/);let ie=ve,ne=!0;if(ee!==-1&&(ie=ve.substr(0,ee).replace(/\s\s*$/,""),ve=ve.substr(ee+1)),K){const te=ie.indexOf(":");te!==-1&&(ie=ie.substr(te+1),ne=ie!==de.data.substr(te+1))}return{tagName:ie,tagExp:ve,closeIndex:be,attrExpPresent:ne}}function j(k,U,K){const Y=K;for(;K<k.length;K++)if(k[K]==="<"&&k[K+1]==="/"){const de=ae(k,">",K,`${U} is not closed`);if(k.substring(K+2,de).trim()===U)return{tagContent:k.substring(Y,K),i:de};K=de}}function w(k,U,K){if(U&&typeof k=="string"){const Y=k.trim();return Y==="true"?!0:Y==="false"?!1:_(k,K)}else return f.isExist(k)?k:""}s.exports=C},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:16}],11:[function(r,s,u){const{buildOptions:f}=r("./OptionsBuilder"),g=r("./OrderedObjParser"),{prettify:l}=r("./node2json"),_=r("../validator");class C{constructor(E){this.externalEntities={},this.options=f(E)}parse(E,T){if(typeof E!="string")if(E.toString)E=E.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const Z=_.validate(E,T);if(Z!==!0)throw Error(`${Z.err.msg}:${Z.err.line}:${Z.err.col}`)}const F=new g(this.options);F.addExternalEntities(this.externalEntities);const X=F.parseXml(E);return this.options.preserveOrder||X===void 0?X:l(X,this.options)}addEntity(E,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(E.indexOf("&")!==-1||E.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[E]=T}}s.exports=C},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(r,s,u){function f(S,E){return g(S,E)}function g(S,E,T){let F;const X={};for(let Z=0;Z<S.length;Z++){const ue=S[Z],H=l(ue);let V="";if(T===void 0?V=H:V=T+"."+H,H===E.textNodeName)F===void 0?F=ue[H]:F+=""+ue[H];else{if(H===void 0)continue;if(ue[H]){let B=g(ue[H],E,V);const ae=C(B,E);ue[":@"]?_(B,ue[":@"],V,E):Object.keys(B).length===1&&B[E.textNodeName]!==void 0&&!E.alwaysCreateTextNode?B=B[E.textNodeName]:Object.keys(B).length===0&&(E.alwaysCreateTextNode?B[E.textNodeName]="":B=""),X[H]!==void 0?(Array.isArray(X[H])||(X[H]=[X[H]]),X[H].push(B)):E.isArray(H,V,ae)?X[H]=[B]:X[H]=B}}}return typeof F=="string"?F.length>0&&(X[E.textNodeName]=F):F!==void 0&&(X[E.textNodeName]=F),X}function l(S){const E=Object.keys(S);for(let T=0;T<E.length;T++){const F=E[T];if(F!==":@")return F}}function _(S,E,T,F){if(E){const X=Object.keys(E),Z=X.length;for(let ue=0;ue<Z;ue++){const H=X[ue];F.isArray(H,T+"."+H,!0,!0)?S[H]=[E[H]]:S[H]=E[H]}}}function C(S,E){const T=Object.keys(S).length;return!!(T===0||T===1&&S[E.textNodeName])}u.prettify=f},{}],13:[function(r,s,u){class f{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,_){this.child.push({[l]:_})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,[":@"]:l[":@"]}):this.child.push({[l.tagname]:l.child})}}s.exports=f},{}],14:[function(r,s,u){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */u.read=function(f,g,l,_,C){var S,E,T=C*8-_-1,F=(1<<T)-1,X=F>>1,Z=-7,ue=l?C-1:0,H=l?-1:1,V=f[g+ue];for(ue+=H,S=V&(1<<-Z)-1,V>>=-Z,Z+=T;Z>0;S=S*256+f[g+ue],ue+=H,Z-=8);for(E=S&(1<<-Z)-1,S>>=-Z,Z+=_;Z>0;E=E*256+f[g+ue],ue+=H,Z-=8);if(S===0)S=1-X;else{if(S===F)return E?NaN:(V?-1:1)*(1/0);E=E+Math.pow(2,_),S=S-X}return(V?-1:1)*E*Math.pow(2,S-_)},u.write=function(f,g,l,_,C,S){var E,T,F,X=S*8-C-1,Z=(1<<X)-1,ue=Z>>1,H=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=_?0:S-1,B=_?1:-1,ae=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(T=isNaN(g)?1:0,E=Z):(E=Math.floor(Math.log(g)/Math.LN2),g*(F=Math.pow(2,-E))<1&&(E--,F*=2),E+ue>=1?g+=H/F:g+=H*Math.pow(2,1-ue),g*F>=2&&(E++,F/=2),E+ue>=Z?(T=0,E=Z):E+ue>=1?(T=(g*F-1)*Math.pow(2,C),E=E+ue):(T=g*Math.pow(2,ue-1)*Math.pow(2,C),E=0));C>=8;f[l+V]=T&255,V+=B,T/=256,C-=8);for(E=E<<C|T,X+=C;X>0;f[l+V]=E&255,V+=B,E/=256,X-=8);f[l+V-B]|=ae*128}},{}],15:[function(r,s,u){u.endianness=function(){return"LE"},u.hostname=function(){return typeof location!="undefined"?location.hostname:""},u.loadavg=function(){return[]},u.uptime=function(){return 0},u.freemem=function(){return Number.MAX_VALUE},u.totalmem=function(){return Number.MAX_VALUE},u.cpus=function(){return[]},u.type=function(){return"Browser"},u.release=function(){return typeof navigator!="undefined"?navigator.appVersion:""},u.networkInterfaces=u.getNetworkInterfaces=function(){return{}},u.arch=function(){return"javascript"},u.platform=function(){return"browser"},u.tmpdir=u.tmpDir=function(){return"/tmp"},u.EOL=`
`,u.homedir=function(){return"/"}},{}],16:[function(r,s,u){const f=/^[-+]?0x[a-fA-F0-9]+$/,g=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function _(S,E={}){if(E=Object.assign({},l,E),!S||typeof S!="string")return S;let T=S.trim();if(E.skipLike!==void 0&&E.skipLike.test(T))return S;if(E.hex&&f.test(T))return Number.parseInt(T,16);{const F=g.exec(T);if(F){const X=F[1],Z=F[2];let ue=C(F[3]);const H=F[4]||F[6];if(!E.leadingZeros&&Z.length>0&&X&&T[2]!==".")return S;if(!E.leadingZeros&&Z.length>0&&!X&&T[1]!==".")return S;{const V=Number(T),B=""+V;return B.search(/[eE]/)!==-1||H?E.eNotation?V:S:T.indexOf(".")!==-1?B==="0"&&ue===""||B===ue||X&&B==="-"+ue?V:S:Z?ue===B||X+ue===B?V:S:T===B||T===X+B?V:S}}else return S}}function C(S){return S&&S.indexOf(".")!==-1&&(S=S.replace(/0+$/,""),S==="."?S="0":S[0]==="."?S="0"+S:S[S.length-1]==="."&&(S=S.substr(0,S.length-1))),S}s.exports=_},{}],17:[function(r,s,u){(function(f){(function(){var g=this&&this.__awaiter||function(T,F,X,Z){function ue(H){return H instanceof X?H:new X(function(V){V(H)})}return new(X||(X=Promise))(function(H,V){function B(j){try{G(Z.next(j))}catch(w){V(w)}}function ae(j){try{G(Z.throw(j))}catch(w){V(w)}}function G(j){j.done?H(j.value):ue(j.value).then(B,ae)}G((Z=Z.apply(T,F||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.osmFetch=void 0;const l=r("../auth"),_=r("../config"),C=r("./_xml"),S=T=>typeof btoa=="undefined"?f.from(T,"binary").toString("base64"):btoa(T);function E(T,F,X){return g(this,void 0,void 0,function*(){const{apiUrl:Z,authHeader:ue,basicAuth:H,userAgent:V}=(0,_.getConfig)(),B=H&&`Basic ${S(`${H.username}:${H.password}`)}`,ae=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let G=new URLSearchParams(F).toString();G&&(G=`?${G}`);const j=yield fetch(`${Z}/api${T}${G}`,Object.assign(Object.assign({},X),{headers:Object.assign({Authorization:ue||B||ae||"","User-Agent":V},X==null?void 0:X.headers)})),w=j.headers.get("Content-Type");if(w!=null&&w.startsWith("application/xml")){const k=yield j.text();return yield C.xmlParser.parse(k)}if(w!=null&&w.startsWith("application/json"))return j.json();if(j.ok)return yield j.text();throw new Error(`OSM API: ${yield j.text()}`)})}u.osmFetch=E}).call(this)}).call(this,r("buffer").Buffer)},{"../auth":38,"../config":40,"./_xml":18,buffer:2}],18:[function(r,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.xmlParser=void 0;const f=r("fast-xml-parser");u.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:g=>g!=="$"})},{"fast-xml-parser":3}],19:[function(r,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.createOsmChangeXml=u.createChangesetMetaXml=void 0;const f=r("fast-xml-parser"),g=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,attributeValueProcessor:(S,E)=>E.replace(/&/g,"&amp;")});function l(S){return g.build({osm:{changeset:{tag:Object.entries(S).map(([E,T])=>({$k:E,$v:T}))}}})}u.createChangesetMetaXml=l;const _=(S,E,T)=>E.reduce((F,X)=>{const Z={$id:X.id,$version:T?0:X.version,$changeset:S,tag:Object.entries(X.tags||{}).map(([ue,H])=>({$k:ue,$v:H}))};switch(X.type){case"node":{const ue=Object.assign(Object.assign({},Z),{$lat:X.lat,$lon:X.lon});return Object.assign(Object.assign({},F),{node:[...F.node,ue]})}case"way":{if(!X.nodes)throw new Error("Way has no nodes");const ue=Object.assign(Object.assign({},Z),{nd:X.nodes.map(H=>({$ref:H}))});return Object.assign(Object.assign({},F),{way:[...F.way,ue]})}case"relation":{if(!X.members)throw new Error("Relation has no members");const ue=Object.assign(Object.assign({},Z),{member:X.members.map(H=>({$type:H.type,$ref:H.ref,$role:H.role}))});return Object.assign(Object.assign({},F),{relation:[...F.relation,ue]})}default:return F}},{node:[],way:[],relation:[]});function C(S,E,T){return g.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[_(S,E.create,!0)],modify:[_(S,E.modify)],delete:[Object.assign({"$if-unused":!0},_(S,E.delete))]})})}u.createOsmChangeXml=C},{"fast-xml-parser":3}],20:[function(r,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.parseOsmChangeXml=u.parseOsmChangeJson=void 0;const f=r("../_xml");function g(S){return{changeset:+S.$.changeset,id:+S.$.id,timestamp:S.$.timestamp,uid:+S.$.uid,user:S.$.user,version:+S.$.version,tags:S.tag?Object.fromEntries(S.tag.map(E=>[E.$.k,E.$.v])):void 0}}const l=S=>{const E=[];if(S.node){const T=S.node.map(F=>Object.assign(Object.assign({type:"node"},g(F)),{lat:+F.$.lat,lon:+F.$.lon}));E.push(...T)}if(S.way){const T=S.way.map(F=>{var X;return Object.assign(Object.assign({type:"way"},g(F)),{nodes:((X=F.nd)===null||X===void 0?void 0:X.map(Z=>+Z.$.ref))||[]})});E.push(...T)}if(S.relation){const T=S.relation.map(F=>{var X;return Object.assign(Object.assign({type:"relation"},g(F)),{members:((X=F.member)===null||X===void 0?void 0:X.map(Z=>({ref:+Z.$.ref,role:Z.$.role,type:Z.$.type})))||[]})});E.push(...T)}return E};function _(S){var E,T,F;return{create:((E=S.osmChange[0].create)===null||E===void 0?void 0:E.flatMap(l))||[],modify:((T=S.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(l))||[],delete:((F=S.osmChange[0].delete)===null||F===void 0?void 0:F.flatMap(l))||[]}}u.parseOsmChangeJson=_;function C(S){const E=f.xmlParser.parse(S);return console.log(E),_(E)}u.parseOsmChangeXml=C},{"../_xml":18}],21:[function(r,s,u){var f=this&&this.__awaiter||function(_,C,S,E){function T(F){return F instanceof S?F:new S(function(X){X(F)})}return new(S||(S=Promise))(function(F,X){function Z(V){try{H(E.next(V))}catch(B){X(B)}}function ue(V){try{H(E.throw(V))}catch(B){X(B)}}function H(V){V.done?F(V.value):T(V.value).then(Z,ue)}H((E=E.apply(_,C||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.createChangesetComment=void 0;const g=r("../_osmFetch");function l(_,C){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/changeset/${_}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(C)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}u.createChangesetComment=l},{"../_osmFetch":17}],22:[function(r,s,u){var f=this&&this.__awaiter||function(C,S,E,T){function F(X){return X instanceof E?X:new E(function(Z){Z(X)})}return new(E||(E=Promise))(function(X,Z){function ue(B){try{V(T.next(B))}catch(ae){Z(ae)}}function H(B){try{V(T.throw(B))}catch(ae){Z(ae)}}function V(B){B.done?X(B.value):F(B.value).then(ue,H)}V((T=T.apply(C,S||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getChangesetDiff=void 0;const g=r("../_osmFetch"),l=r("./_parseOsmChangeXml");function _(C){return f(this,void 0,void 0,function*(){const S=yield(0,g.osmFetch)(`/0.6/changeset/${C}/download`);return(0,l.parseOsmChangeJson)(S)})}u.getChangesetDiff=_},{"../_osmFetch":17,"./_parseOsmChangeXml":20}],23:[function(r,s,u){var f=this&&this.__awaiter||function(E,T,F,X){function Z(ue){return ue instanceof F?ue:new F(function(H){H(ue)})}return new(F||(F=Promise))(function(ue,H){function V(G){try{ae(X.next(G))}catch(j){H(j)}}function B(G){try{ae(X.throw(G))}catch(j){H(j)}}function ae(G){G.done?ue(G.value):Z(G.value).then(V,B)}ae((X=X.apply(E,T||[])).next())})},g=this&&this.__rest||function(E,T){var F={};for(var X in E)Object.prototype.hasOwnProperty.call(E,X)&&T.indexOf(X)<0&&(F[X]=E[X]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Z=0,X=Object.getOwnPropertySymbols(E);Z<X.length;Z++)T.indexOf(X[Z])<0&&Object.prototype.propertyIsEnumerable.call(E,X[Z])&&(F[X[Z]]=E[X[Z]]);return F};Object.defineProperty(u,"__esModule",{value:!0}),u.getChangeset=u.listChangesets=void 0;const l=r("../_osmFetch"),_=E=>{var T;return{id:+E.$.id,created_at:new Date(E.$.created_at),closed_at:new Date(E.$.closed_at),open:E.$.open==="true",comments_count:+E.$.comments_count,changes_count:+E.$.changes_count,min_lat:+E.$.min_lat,min_lon:+E.$.min_lon,max_lat:+E.$.max_lat,max_lon:+E.$.max_lon,uid:+E.$.uid,user:E.$.user,tags:Object.fromEntries(E.tag.map(F=>[F.$.k,F.$.v])),discussion:(T=E.discussion)===null||T===void 0?void 0:T[0].comment.map(F=>({date:new Date(F.$.date),user:F.$.user,uid:F.$.uid,text:F.text[0]}))}};function C(E){var T;return f(this,void 0,void 0,function*(){const{only:F}=E,X=g(E,["only"]);return((T=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},F&&{[F]:!0}),X))).osm[0].changeset)===null||T===void 0?void 0:T.map(_))||[]})}u.listChangesets=C;function S(E,T=!0){return f(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${E}`,{include_discussion:T})).osm[0].changeset.map(_)[0]})}u.getChangeset=S},{"../_osmFetch":17}],24:[function(r,s,u){var f=this&&this.__createBinding||(Object.create?function(C,S,E,T){T===void 0&&(T=E),Object.defineProperty(C,T,{enumerable:!0,get:function(){return S[E]}})}:function(C,S,E,T){T===void 0&&(T=E),C[T]=S[E]}),g=this&&this.__exportStar||function(C,S){for(var E in C)E!=="default"&&!Object.prototype.hasOwnProperty.call(S,E)&&f(S,C,E)};Object.defineProperty(u,"__esModule",{value:!0}),u.createOsmChangeXml=u.parseOsmChangeXml=void 0,g(r("./createChangesetComment"),u),g(r("./getChangesetDiff"),u),g(r("./getChangesets"),u),g(r("./uploadChangeset"),u);var l=r("./_parseOsmChangeXml");Object.defineProperty(u,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var _=r("./_createOsmChangeXml");Object.defineProperty(u,"createOsmChangeXml",{enumerable:!0,get:function(){return _.createOsmChangeXml}})},{"./_createOsmChangeXml":19,"./_parseOsmChangeXml":20,"./createChangesetComment":21,"./getChangesetDiff":22,"./getChangesets":23,"./uploadChangeset":25}],25:[function(r,s,u){var f=this&&this.__awaiter||function(C,S,E,T){function F(X){return X instanceof E?X:new E(function(Z){Z(X)})}return new(E||(E=Promise))(function(X,Z){function ue(B){try{V(T.next(B))}catch(ae){Z(ae)}}function H(B){try{V(T.throw(B))}catch(ae){Z(ae)}}function V(B){B.done?X(B.value):F(B.value).then(ue,H)}V((T=T.apply(C,S||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.uploadChangeset=void 0;const g=r("../_osmFetch"),l=r("./_createOsmChangeXml");function _(C,S){return f(this,void 0,void 0,function*(){const E=(0,l.createChangesetMetaXml)(C),T=+(yield(0,g.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:E,headers:{"content-type":"application/xml; charset=utf-8"}})),F=(0,l.createOsmChangeXml)(T,S);return yield(0,g.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:F,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,g.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}u.uploadChangeset=_},{"../_osmFetch":17,"./_createOsmChangeXml":19}],26:[function(r,s,u){var f=this&&this.__awaiter||function(_,C,S,E){function T(F){return F instanceof S?F:new S(function(X){X(F)})}return new(S||(S=Promise))(function(F,X){function Z(V){try{H(E.next(V))}catch(B){X(B)}}function ue(V){try{H(E.throw(V))}catch(B){X(B)}}function H(V){V.done?F(V.value):T(V.value).then(Z,ue)}H((E=E.apply(_,C||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getCapabilities=void 0;const g=r("./_osmFetch");function l(){return f(this,void 0,void 0,function*(){const _=yield(0,g.osmFetch)("/capabilities");return{limits:{maxArea:+_.osm[0].api[0].area[0].$.maximum,maxNoteArea:+_.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+_.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+_.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+_.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+_.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:_.osm[0].policy[0].imagery[0].blacklist.map(S=>S.$.regex)}}})}u.getCapabilities=l},{"./_osmFetch":17}],27:[function(r,s,u){var f=this&&this.__awaiter||function(F,X,Z,ue){function H(V){return V instanceof Z?V:new Z(function(B){B(V)})}return new(Z||(Z=Promise))(function(V,B){function ae(w){try{j(ue.next(w))}catch(k){B(k)}}function G(w){try{j(ue.throw(w))}catch(k){B(k)}}function j(w){w.done?V(w.value):H(w.value).then(ae,G)}j((ue=ue.apply(F,X||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getRelationsForElement=u.getWaysForNode=u.getFeatureHistory=u.getFeatureAtVersion=u.getFeatures=u.getFeature=void 0;const g=r("./_osmFetch");function l(F,X,Z){return f(this,void 0,void 0,function*(){const ue=Z&&F!=="node"?"/full":"";return(yield(0,g.osmFetch)(`/0.6/${F}/${X}${ue}.json`)).elements})}u.getFeature=l;function _(F,X){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${F}s.json?${F}s=${X.join(",")}`)).elements})}u.getFeatures=_;function C(F,X,Z){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${F}/${X}/${Z}.json`)).elements[0]})}u.getFeatureAtVersion=C;function S(F,X){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${F}/${X}/history.json`)).elements})}u.getFeatureHistory=S;function E(F){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/node/${F}/ways.json`)).elements})}u.getWaysForNode=E;function T(F,X){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${F}/${X}/relation.json`)).elements})}u.getRelationsForElement=T},{"./_osmFetch":17}],28:[function(r,s,u){var f=this&&this.__awaiter||function(_,C,S,E){function T(F){return F instanceof S?F:new S(function(X){X(F)})}return new(S||(S=Promise))(function(F,X){function Z(V){try{H(E.next(V))}catch(B){X(B)}}function ue(V){try{H(E.throw(V))}catch(B){X(B)}}function H(V){V.done?F(V.value):T(V.value).then(Z,ue)}H((E=E.apply(_,C||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getMapData=void 0;const g=r("./_osmFetch");function l(_){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/map.json",{bbox:_})).elements})}u.getMapData=l},{"./_osmFetch":17}],29:[function(r,s,u){var f=this&&this.__awaiter||function(_,C,S,E){function T(F){return F instanceof S?F:new S(function(X){X(F)})}return new(S||(S=Promise))(function(F,X){function Z(V){try{H(E.next(V))}catch(B){X(B)}}function ue(V){try{H(E.throw(V))}catch(B){X(B)}}function H(V){V.done?F(V.value):T(V.value).then(Z,ue)}H((E=E.apply(_,C||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getUIdFromDisplayName=void 0;const g=r("./changesets");function l(_){return f(this,void 0,void 0,function*(){const C=yield(0,g.listChangesets)({display_name:_});if(!C.length)throw new Error("Could not get uid because the user has never edited the map");return C[0].uid})}u.getUIdFromDisplayName=l},{"./changesets":24}],30:[function(r,s,u){var f=this&&this.__awaiter||function(C,S,E,T){function F(X){return X instanceof E?X:new E(function(Z){Z(X)})}return new(E||(E=Promise))(function(X,Z){function ue(B){try{V(T.next(B))}catch(ae){Z(ae)}}function H(B){try{V(T.throw(B))}catch(ae){Z(ae)}}function V(B){B.done?X(B.value):F(B.value).then(ue,H)}V((T=T.apply(C,S||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getUsers=u.getUser=void 0;const g=r("./_osmFetch");function l(C){return f(this,void 0,void 0,function*(){const S=yield(0,g.osmFetch)(`/0.6/user/${C==="me"?"details":C}.json`);return Object.assign(Object.assign({},S.user),{account_created:new Date(S.user.account_created)})})}u.getUser=l;function _(C){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/users",{users:C})).users.map(E=>Object.assign(Object.assign({},E),{account_created:new Date(E.account_created)}))})}u.getUsers=_},{"./_osmFetch":17}],31:[function(r,s,u){var f=this&&this.__createBinding||(Object.create?function(l,_,C,S){S===void 0&&(S=C),Object.defineProperty(l,S,{enumerable:!0,get:function(){return _[C]}})}:function(l,_,C,S){S===void 0&&(S=C),l[S]=_[C]}),g=this&&this.__exportStar||function(l,_){for(var C in l)C!=="default"&&!Object.prototype.hasOwnProperty.call(_,C)&&f(_,l,C)};Object.defineProperty(u,"__esModule",{value:!0}),g(r("./changesets"),u),g(r("./notes"),u),g(r("./getCapabilities"),u),g(r("./getFeature"),u),g(r("./getMapData"),u),g(r("./getUIdFromDisplayName"),u),g(r("./getUser"),u)},{"./changesets":24,"./getCapabilities":26,"./getFeature":27,"./getMapData":28,"./getUIdFromDisplayName":29,"./getUser":30,"./notes":33}],32:[function(r,s,u){var f=this&&this.__awaiter||function(T,F,X,Z){function ue(H){return H instanceof X?H:new X(function(V){V(H)})}return new(X||(X=Promise))(function(H,V){function B(j){try{G(Z.next(j))}catch(w){V(w)}}function ae(j){try{G(Z.throw(j))}catch(w){V(w)}}function G(j){j.done?H(j.value):ue(j.value).then(B,ae)}G((Z=Z.apply(T,F||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getNote=u.getNotesForArea=u.getNotesForQuery=void 0;const g=r("../_osmFetch"),l=T=>{const[F,X]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:X,lng:F}})};function _(T,F){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/notes${F?"/search":""}.json`,T)).features.map(l)})}function C(T){return _(T,!0)}u.getNotesForQuery=C;function S(T){return _({bbox:T},!1)}u.getNotesForArea=S;function E(T){return f(this,void 0,void 0,function*(){const F=yield(0,g.osmFetch)(`/0.6/notes/${T}.json`);return l(F)})}u.getNote=E},{"../_osmFetch":17}],33:[function(r,s,u){var f=this&&this.__createBinding||(Object.create?function(l,_,C,S){S===void 0&&(S=C),Object.defineProperty(l,S,{enumerable:!0,get:function(){return _[C]}})}:function(l,_,C,S){S===void 0&&(S=C),l[S]=_[C]}),g=this&&this.__exportStar||function(l,_){for(var C in l)C!=="default"&&!Object.prototype.hasOwnProperty.call(_,C)&&f(_,l,C)};Object.defineProperty(u,"__esModule",{value:!0}),g(r("./getNotes"),u),g(r("./noteActions"),u)},{"./getNotes":32,"./noteActions":34}],34:[function(r,s,u){var f=this&&this.__awaiter||function(S,E,T,F){function X(Z){return Z instanceof T?Z:new T(function(ue){ue(Z)})}return new(T||(T=Promise))(function(Z,ue){function H(ae){try{B(F.next(ae))}catch(G){ue(G)}}function V(ae){try{B(F.throw(ae))}catch(G){ue(G)}}function B(ae){ae.done?Z(ae.value):X(ae.value).then(H,V)}B((F=F.apply(S,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.reopenNote=u.commentOnNote=u.createNote=void 0;const g=r("../_osmFetch");function l(S,E,T){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)("/0.6/notes",{lat:S,lon:E,text:T})})}u.createNote=l;function _(S,E){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${S}/comment`,{text:E})})}u.commentOnNote=_;function C(S,E){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${S}/reopen`,{text:E})})}u.reopenNote=C},{"../_osmFetch":17}],35:[function(r,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.createPopup=void 0;function f(g){let l=!1;return new Promise((_,C)=>{const[S,E]=[600,550],T=Object.entries({width:S,height:E,left:window.screen.width/2-S/2,top:window.screen.height/2-E/2}).map(([Z,ue])=>`${Z}=${ue}`).join(","),F=window.open("about:blank","oauth_window",T);if(!F)throw new Error("Popup was blocked");F.location=g,window.authComplete=Z=>{_(Z),l=!0};const X=setInterval(()=>{F.closed&&(l||C(new Error("Cancelled")),clearInterval(X))},500)})}u.createPopup=f},{}],36:[function(r,s,u){var f=this&&this.__awaiter||function(_,C,S,E){function T(F){return F instanceof S?F:new S(function(X){X(F)})}return new(S||(S=Promise))(function(F,X){function Z(V){try{H(E.next(V))}catch(B){X(B)}}function ue(V){try{H(E.throw(V))}catch(B){X(B)}}function H(V){V.done?F(V.value):T(V.value).then(Z,ue)}H((E=E.apply(_,C||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.exchangeCode=void 0;const g=r("./helpers");function l(_,{options:C,pkceVerifier:S,state:E}){return f(this,void 0,void 0,function*(){const T=new URL(_).searchParams,F=T.get("error_description"),X=T.get("code"),Z=T.get("state");if(F)throw new Error(F);if(!X)throw new Error("No code in OAuth response");if(!S||!E)throw new Error("No login in progress");if(E!==Z)throw new Error("State Mismatch");const ue={grant_type:"authorization_code",code:X,redirect_uri:C.redirectUrl,client_id:C.clientId,code_verifier:S},H=`${(0,g.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(ue).toString()}`,B=yield(yield fetch(H,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in B)throw new Error(B.error_description);const ae={issuedAt:new Date(B.created_at*1e3).toISOString(),accessToken:B.access_token,scopes:B.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ae)),delete window.authComplete,ae})}u.exchangeCode=l},{"./helpers":37}],37:[function(r,s,u){var f=this&&this.__awaiter||function(S,E,T,F){function X(Z){return Z instanceof T?Z:new T(function(ue){ue(Z)})}return new(T||(T=Promise))(function(Z,ue){function H(ae){try{B(F.next(ae))}catch(G){ue(G)}}function V(ae){try{B(F.throw(ae))}catch(G){ue(G)}}function B(ae){ae.done?Z(ae.value):X(ae.value).then(H,V)}B((F=F.apply(S,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getOAuthBaseUrl=u.getRandomString=u.sha256=void 0;const g=r("../config");function l(S){return f(this,void 0,void 0,function*(){const E=new TextEncoder().encode(S),T=yield window.crypto.subtle.digest("SHA-256",E);return btoa(String.fromCharCode(...new Uint8Array(T))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}u.sha256=l;function _(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(S=>`0${S.toString(16)}`.slice(-2)).join("")}u.getRandomString=_;function C(){let S=(0,g.getConfig)().apiUrl;return S==="https://api.openstreetmap.org"&&(S="https://www.openstreetmap.org"),S}u.getOAuthBaseUrl=C},{"../config":40}],38:[function(r,s,u){var f=this&&this.__createBinding||(Object.create?function(l,_,C,S){S===void 0&&(S=C),Object.defineProperty(l,S,{enumerable:!0,get:function(){return _[C]}})}:function(l,_,C,S){S===void 0&&(S=C),l[S]=_[C]}),g=this&&this.__exportStar||function(l,_){for(var C in l)C!=="default"&&!Object.prototype.hasOwnProperty.call(_,C)&&f(_,l,C)};Object.defineProperty(u,"__esModule",{value:!0}),g(r("./oauth2"),u)},{"./oauth2":39}],39:[function(r,s,u){var f=this&&this.__awaiter||function(F,X,Z,ue){function H(V){return V instanceof Z?V:new Z(function(B){B(V)})}return new(Z||(Z=Promise))(function(V,B){function ae(w){try{j(ue.next(w))}catch(k){B(k)}}function G(w){try{j(ue.throw(w))}catch(k){B(k)}}function j(w){w.done?V(w.value):H(w.value).then(ae,G)}j((ue=ue.apply(F,X||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.logout=u.isLoggedIn=u.getAuthToken=u.authReady=u.login=void 0;const g=r("./createPopup"),l=r("./exchangeCode"),_=r("./helpers");function C(F){return f(this,void 0,void 0,function*(){if(!F.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!F.clientId)throw new Error("You must include the 'clientId' option");if(!F.scopes)throw new Error("You must include the 'scopes' option");const X=(0,_.getRandomString)(),Z=(0,_.getRandomString)(),ue=yield(0,_.sha256)(Z),H={scope:F.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:X,redirect_uri:F.redirectUrl,client_id:F.clientId,code_challenge_method:"S256",code_challenge:ue},V=`${(0,_.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(H).toString()}`,B={state:X,pkceVerifier:Z,options:F};if(F.mode==="popup"){const ae=yield(0,g.createPopup)(V);return(0,l.exchangeCode)(ae,B)}if(F.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(B)),window.location.replace(V);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}u.login=C,u.authReady=(()=>f(void 0,void 0,void 0,function*(){var F;if(typeof window=="undefined")return;const X=window.location.href,Z=localStorage.getItem("__osmAuthTemp");if(new URL(X).searchParams.get("code")){if(!((F=window.opener)===null||F===void 0)&&F.authComplete)window.opener.authComplete(X),window.close();else if(Z)try{const ue=JSON.parse(Z);yield(0,l.exchangeCode)(X,ue),localStorage.removeItem("__osmAuthTemp")}catch(ue){console.error("OSM Auth Error",ue)}}}))();const S=()=>{try{const F=localStorage.getItem("__osmAuth");return F?JSON.parse(F).accessToken:void 0}catch{return}};u.getAuthToken=S;const E=()=>!!(0,u.getAuthToken)();u.isLoggedIn=E;function T(){localStorage.removeItem("__osmAuth")}u.logout=T},{"./createPopup":35,"./exchangeCode":36,"./helpers":37}],40:[function(r,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.configure=u.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},g=()=>f;u.getConfig=g;function l(_){Object.assign(f,_)}u.configure=l},{}],41:[function(r,s,u){var f=this&&this.__createBinding||(Object.create?function(l,_,C,S){S===void 0&&(S=C),Object.defineProperty(l,S,{enumerable:!0,get:function(){return _[C]}})}:function(l,_,C,S){S===void 0&&(S=C),l[S]=_[C]}),g=this&&this.__exportStar||function(l,_){for(var C in l)C!=="default"&&!Object.prototype.hasOwnProperty.call(_,C)&&f(_,l,C)};Object.defineProperty(u,"__esModule",{value:!0}),r("./polyfill"),g(r("./api"),u),g(r("./auth"),u),g(r("./config"),u),g(r("./types"),u)},{"./api":31,"./auth":38,"./config":40,"./polyfill":42,"./types":46}],42:[function(r,s,u){if(typeof fetch=="undefined")try{r("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],43:[function(r,s,u){Object.defineProperty(u,"__esModule",{value:!0})},{}],44:[function(r,s,u){arguments[4][43][0].apply(u,arguments)},{dup:43}],45:[function(r,s,u){arguments[4][43][0].apply(u,arguments)},{dup:43}],46:[function(r,s,u){var f=this&&this.__createBinding||(Object.create?function(l,_,C,S){S===void 0&&(S=C),Object.defineProperty(l,S,{enumerable:!0,get:function(){return _[C]}})}:function(l,_,C,S){S===void 0&&(S=C),l[S]=_[C]}),g=this&&this.__exportStar||function(l,_){for(var C in l)C!=="default"&&!Object.prototype.hasOwnProperty.call(_,C)&&f(_,l,C)};Object.defineProperty(u,"__esModule",{value:!0}),g(r("./changesets"),u),g(r("./features"),u),g(r("./general"),u),g(r("./notes"),u),g(r("./user"),u)},{"./changesets":43,"./features":44,"./general":45,"./notes":47,"./user":48}],47:[function(r,s,u){arguments[4][43][0].apply(u,arguments)},{dup:43}],48:[function(r,s,u){arguments[4][43][0].apply(u,arguments)},{dup:43}]},{},[41])(41)})})(Xo);var h0={exports:{}},f0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $A=gt.exports,VA=Symbol.for("react.element"),GA=Symbol.for("react.fragment"),HA=Object.prototype.hasOwnProperty,WA=$A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZA={key:!0,ref:!0,__self:!0,__source:!0};function k4(e,t,r){var s,u={},f=null,g=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(g=t.ref);for(s in t)HA.call(t,s)&&!ZA.hasOwnProperty(s)&&(u[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)u[s]===void 0&&(u[s]=t[s]);return{$$typeof:VA,type:e,key:f,ref:g,props:u,_owner:WA.current}}f0.Fragment=GA;f0.jsx=k4;f0.jsxs=k4;h0.exports=f0;const Rt=h0.exports.jsx,Hn=h0.exports.jsxs,Ta=h0.exports.Fragment,M4=()=>{const[e,t]=gt.exports.useState(!1);gt.exports.useEffect(()=>{t(Xo.exports.isLoggedIn())},[]);const r=gt.exports.useCallback(()=>{(async()=>(await Xo.exports.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Xo.exports.isLoggedIn()),window.location.reload()))()},[]),s=gt.exports.useCallback(()=>{(async()=>(Xo.exports.logout(),t(!1)))()},[]);return Rt(Ta,{children:e?Rt("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:s,children:"logout"}):Rt("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:r,children:"login"})})},XA=()=>{const[e,t]=gt.exports.useState(!1),[r,s]=gt.exports.useState(void 0);return gt.exports.useEffect(()=>{t(Xo.exports.isLoggedIn())},[]),gt.exports.useEffect(()=>{!e||(async()=>{const u=await Xo.exports.getUser("me");s(u)})()},[e]),Rt(Ta,{children:r?Rt("img",{style:{width:"44px",height:"44px"},src:r.img.href,alt:r.display_name,title:r.display_name}):Rt("img",{})})},KA=()=>{const[e,t]=gt.exports.useState(!1),[r,s]=gt.exports.useState(void 0);return gt.exports.useEffect(()=>{t(Xo.exports.isLoggedIn())},[]),gt.exports.useEffect(()=>{!e||(async()=>{const u=await Xo.exports.getUser("me");s(u)})()},[e]),Hn("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[Hn("div",{children:[Rt("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),r?Hn("span",{style:{marginLeft:"10px"},children:["Hi ",r==null?void 0:r.display_name,", You have"," ",r==null?void 0:r.changesets.count," changesets."]}):Rt("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),Hn("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[Rt("div",{children:Rt(XA,{})}),Rt("div",{children:Rt(M4,{})})]})]})},z4=({feature:e})=>{var r;const t=JSON.parse((r=e.properties)==null?void 0:r.center);return Hn(Ta,{children:[Hn("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",Hn("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},YA=({feature:e})=>Rt(Ta,{children:e.properties&&Object.keys(e.properties).map(t=>{var r;if(t.startsWith("addr"))return Hn("div",{className:t,children:[Rt("span",{className:"underline",children:t})," = ",Rt("span",{children:(r=e.properties)==null?void 0:r[t]})]})})});function cf(e,t,r){return parseInt(e.substr(t,r),16)}function L4(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function Gg(e,t,r){return r=r<0?r+6:r>6?r-6:r,L4(255*(r<1?e+(t-e)*r:r<3?t:r<4?e+(t-e)*(4-r):e))}function qA(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const r=e.length;if(r<6){const s=e[1],u=e[2],f=e[3],g=e[4]||"";t="#"+s+s+u+u+f+f+g+g}return(r==7||r>8)&&(t=e),t}}function JA(e,t,r){let s;if(t==0){const u=L4(r*255);s=u+u+u}else{const u=r<=.5?r*(t+1):r+t-r*t,f=r*2-u;s=Gg(f,u,e*6+2)+Gg(f,u,e*6)+Gg(f,u,e*6-2)}return"#"+s}function rf(e,t,r){const s=[.55,.5,.5,.46,.6,.55,.55],u=s[e*6+.5|0];return r=r<.5?r*u*2:u+(r-.5)*(1-u)*2,JA(e,t,r)}const QA=typeof window!="undefined"?window:typeof self!="undefined"?self:typeof global!="undefined"?global:{},jb={V:"jdenticon_config",n:"config"};var eI={};function tI(e,t){const r=typeof e=="object"&&e||eI[jb.n]||QA[jb.V]||{},s=r.lightness||{},u=r.saturation||{},f="color"in u?u.color:u,g=u.grayscale,l=r.backColor,_=r.padding;function C(E,T){let F=s[E];return F&&F.length>1||(F=T),function(X){return X=F[0]+X*(F[1]-F[0]),X<0?0:X>1?1:X}}function S(E){const T=r.hues;let F;return T&&T.length>0&&(F=T[0|.999*E*T.length]),typeof F=="number"?(F/360%1+1)%1:E}return{W:S,o:typeof f=="number"?f:.5,D:typeof g=="number"?g:0,p:C("color",[.4,.8]),F:C("grayscale",[.3,.9]),G:qA(l),X:typeof e=="number"?e:typeof _=="number"?_:t}}class sp{constructor(t,r){this.x=t,this.y=r}}class O4{constructor(t,r,s,u){this.q=t,this.t=r,this.H=s,this.Y=u}I(t,r,s,u){const f=this.q+this.H,g=this.t+this.H,l=this.Y;return l===1?new sp(f-r-(u||0),this.t+t):l===2?new sp(f-t-(s||0),g-r-(u||0)):l===3?new sp(this.q+r,g-t-(s||0)):new sp(this.q+t,this.t+r)}}const nI=new O4(0,0,0,0);class rI{constructor(t){this.J=t,this.u=nI}g(t,r){const s=r?-2:2,u=[];for(let f=r?t.length-2:0;f<t.length&&f>=0;f+=s)u.push(this.u.I(t[f],t[f+1]));this.J.g(u)}h(t,r,s,u){const f=this.u.I(t,r,s,s);this.J.h(f,s,u)}i(t,r,s,u,f){this.g([t,r,t+s,r,t+s,r+u,t,r+u],f)}j(t,r,s,u,f,g){const l=[t+s,r,t+s,r+u,t,r+u,t,r];l.splice((f||0)%4*2,2),this.g(l,g)}K(t,r,s,u,f){this.g([t+s/2,r,t+s,r+u/2,t+s/2,r+u,t,r+u/2],f)}}function iI(e,t,r,s){e=e%14;let u,f,g,l,_,C;e?e==1?(g=0|r*.5,l=0|r*.8,t.j(r-g,0,g,l,2)):e==2?(g=0|r/3,t.i(g,g,r-g,r-g)):e==3?(_=r*.1,C=r<6?1:r<8?2:0|r*.25,_=_>1?0|_:_>.5?1:_,t.i(C,C,r-_-C,r-_-C)):e==4?(f=0|r*.15,g=0|r*.5,t.h(r-g-f,r-g-f,g)):e==5?(_=r*.1,C=_*4,C>3&&(C=0|C),t.i(0,0,r,r),t.g([C,C,r-_,C,C+(r-C-_)/2,r-_],!0)):e==6?t.g([0,0,r,0,r,r*.7,r*.4,r*.4,r*.7,r,0,r]):e==7?t.j(r/2,r/2,r/2,r/2,3):e==8?(t.i(0,0,r,r/2),t.i(0,r/2,r/2,r/2),t.j(r/2,r/2,r/2,r/2,1)):e==9?(_=r*.14,C=r<4?1:r<6?2:0|r*.35,_=r<8?_:0|_,t.i(0,0,r,r),t.i(C,C,r-C-_,r-C-_,!0)):e==10?(_=r*.12,C=_*3,t.i(0,0,r,r),t.h(C,C,r-_-C,!0)):e==11?t.j(r/2,r/2,r/2,r/2,3):e==12?(f=r*.25,t.i(0,0,r,r),t.K(f,f,r-f,r-f,!0)):!s&&(f=r*.4,g=r*1.2,t.h(f,f,g)):(u=r*.42,t.g([0,0,r,0,r,r-u*2,r-u,r,0,r]))}function Db(e,t,r){e=e%4;let s;e?e==1?t.j(0,r/2,r,r/2,0):e==2?t.K(0,0,r,r):(s=r/6,t.h(s,s,r-2*s)):t.j(0,0,r,r,0)}function oI(e,t){return e=t.W(e),[rf(e,t.D,t.F(0)),rf(e,t.o,t.p(.5)),rf(e,t.D,t.F(1)),rf(e,t.o,t.p(1)),rf(e,t.o,t.p(0))]}function aI(e,t,r){const s=tI(r,.08);s.G&&e.m(s.G);let u=e.k;const f=.5+u*s.X|0;u-=f*2;const g=new rI(e),l=0|u/4,_=0|f+u/2-l*2,C=0|f+u/2-l*2;function S(ue,H,V,B,ae){const G=cf(t,V,1);let j=B?cf(t,B,1):0;e.L(T[F[ue]]);for(let w=0;w<ae.length;w++)g.u=new O4(_+ae[w][0]*l,C+ae[w][1]*l,l,j++%4),H(G,g,l,w);e.M()}const E=cf(t,-7)/268435455,T=oI(E,s),F=[];let X;function Z(ue){if(ue.indexOf(X)>=0){for(let H=0;H<ue.length;H++)if(F.indexOf(ue[H])>=0)return!0}}for(let ue=0;ue<3;ue++)X=cf(t,8+ue,1)%T.length,(Z([0,4])||Z([2,3]))&&(X=1),F.push(X);S(0,Db,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),S(1,Db,4,5,[[0,0],[3,0],[3,3],[0,3]]),S(2,iI,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function sI(e){var s=0,u=0,f=encodeURI(e)+"%80",g=[],l,_=[],C=1732584193,S=4023233417,E=~C,T=~S,F=3285377520,X=[C,S,E,T,F],Z=0,ue="";function H(V,B){return V<<B|V>>>32-B}for(;s<f.length;u++)g[u>>2]=g[u>>2]|(f[s]=="%"?parseInt(f.substring(s+1,s+=3),16):f.charCodeAt(s++))<<(3-(u&3))*8;for(l=((u+7>>6)+1)*16,g[l-1]=u*8-8;Z<l;Z+=16){for(s=0;s<80;s++)u=H(C,5)+F+(s<20?(S&E^~S&T)+1518500249:s<40?(S^E^T)+1859775393:s<60?(S&E^S&T^E&T)+2400959708:(S^E^T)+3395469782)+(_[s]=s<16?g[Z+s]|0:H(_[s-3]^_[s-8]^_[s-14]^_[s-16],1)),F=T,T=E,E=H(S,30),S=C,C=u;X[0]=C=X[0]+C|0,X[1]=S=X[1]+S|0,X[2]=E=X[2]+E|0,X[3]=T=X[3]+T|0,X[4]=F=X[4]+F|0}for(s=0;s<40;s++)ue+=(X[s>>3]>>>(7-(s&7))*4&15).toString(16);return ue}function lI(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function uI(e){return sI(e==null?"":""+e)}function wc(e){return(e*10+.5|0)/10}class cI{constructor(){this.v=""}g(t){let r="";for(let s=0;s<t.length;s++)r+=(s?"L":"M")+wc(t[s].x)+" "+wc(t[s].y);this.v+=r+"Z"}h(t,r,s){const u=s?0:1,f=wc(r/2),g=wc(r),l="a"+f+","+f+" 0 1,"+u+" ";this.v+="M"+wc(t.x)+" "+wc(t.y+r/2)+l+g+",0"+l+-g+",0"}}class hI{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const r=/^(#......)(..)?/.exec(t),s=r[2]?cf(r[2],0)/255:1;this.N.m(r[1],s)}L(t){this.A=this.B[t]||(this.B[t]=new cI)}M(){}g(t){this.A.g(t)}h(t,r,s){this.A.h(t,r,s)}finish(){const t=this.B;for(let r in t)t.hasOwnProperty(r)&&this.N.O(r,t[r].v)}}const fI={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class dI{constructor(t){this.k=t,this.C='<svg xmlns="'+fI.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,r){r&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+r.toFixed(2)+'"/>')}O(t,r){this.C+='<path fill="'+t+'" d="'+r+'"/>'}toString(){return this.C+"</svg>"}}function pI(e,t,r){const s=new dI(t);return aI(new hI(s),lI(e)||uI(e),r),s.toString()}typeof document!="undefined"&&document.querySelectorAll.bind(document);const mI=({feature:e,size:t})=>e.properties===null?null:Rt(Ta,{children:e.properties.userIconHref.length>0?Rt("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):Rt("span",{dangerouslySetInnerHTML:{__html:pI(e.properties.user||"noname",t)}})}),gI=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?Hn("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var yI={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const vI=({viewState:e})=>{const[t,r]=gt.exports.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return gt.exports.useEffect(()=>{r(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),Rt(Ta,{children:e&&t&&Hn("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[Rt(Qa,{icon:yI,style:{padding:"0px 3px"}}),Rt("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var R4={};class zi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let s=0;for(let u=0;u<this._n&&u<32;u++){const f=r[u],g=t+f,l=Math.abs(t)<Math.abs(f)?t-(g-f):f-(g-t);l&&(r[s++]=l),t=g}return r[s]=t,this._n=s+1,this}valueOf(){const t=this._partials;let r=this._n,s,u,f,g=0;if(r>0){for(g=t[--r];r>0&&(s=g,u=t[--r],g=s+u,f=u-(g-s),!f););r>0&&(f<0&&t[r-1]<0||f>0&&t[r-1]>0)&&(u=f*2,s=g+u,u==s-g&&(g=s))}return g}}function*xI(e){for(const t of e)yield*t}function F4(e){return Array.from(xI(e))}function Gc(e,t,r){e=+e,t=+t,r=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+r;for(var s=-1,u=Math.max(0,Math.ceil((t-e)/r))|0,f=new Array(u);++s<u;)f[s]=e+s*r;return f}var mn=1e-6,qf=1e-12,Fn=Math.PI,$r=Fn/2,ym=Fn/4,Ji=Fn*2,fr=180/Fn,gn=Fn/180,Vn=Math.abs,vh=Math.atan,Qi=Math.atan2,an=Math.cos,lp=Math.ceil,B4=Math.exp,fy=Math.hypot,vm=Math.log,Hg=Math.pow,Qt=Math.sin,Ko=Math.sign||function(e){return e>0?1:e<0?-1:0},ci=Math.sqrt,Qv=Math.tan;function j4(e){return e>1?0:e<-1?Fn:Math.acos(e)}function eo(e){return e>1?$r:e<-1?-$r:Math.asin(e)}function Nb(e){return(e=Qt(e/2))*e}function Lr(){}function xm(e,t){e&&$b.hasOwnProperty(e.type)&&$b[e.type](e,t)}var Ub={Feature:function(e,t){xm(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,s=-1,u=r.length;++s<u;)xm(r[s].geometry,t)}},$b={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,s=-1,u=r.length;++s<u;)e=r[s],t.point(e[0],e[1],e[2])},LineString:function(e,t){dy(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,s=-1,u=r.length;++s<u;)dy(r[s],t,0)},Polygon:function(e,t){Vb(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,s=-1,u=r.length;++s<u;)Vb(r[s],t)},GeometryCollection:function(e,t){for(var r=e.geometries,s=-1,u=r.length;++s<u;)xm(r[s],t)}};function dy(e,t,r){var s=-1,u=e.length-r,f;for(t.lineStart();++s<u;)f=e[s],t.point(f[0],f[1],f[2]);t.lineEnd()}function Vb(e,t){var r=-1,s=e.length;for(t.polygonStart();++r<s;)dy(e[r],t,1);t.polygonEnd()}function _a(e,t){e&&Ub.hasOwnProperty(e.type)?Ub[e.type](e,t):xm(e,t)}var _m=new zi,bm=new zi,D4,N4,py,my,gy,es={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){_m=new zi,es.lineStart=_I,es.lineEnd=bI},polygonEnd:function(){var e=+_m;bm.add(e<0?Ji+e:e),this.lineStart=this.lineEnd=this.point=Lr},sphere:function(){bm.add(Ji)}};function _I(){es.point=wI}function bI(){U4(D4,N4)}function wI(e,t){es.point=U4,D4=e,N4=t,e*=gn,t*=gn,py=e,my=an(t=t/2+ym),gy=Qt(t)}function U4(e,t){e*=gn,t*=gn,t=t/2+ym;var r=e-py,s=r>=0?1:-1,u=s*r,f=an(t),g=Qt(t),l=gy*g,_=my*f+l*an(u),C=l*s*Qt(u);_m.add(Qi(C,_)),py=e,my=f,gy=g}function EI(e){return bm=new zi,_a(e,es),bm*2}function wm(e){return[Qi(e[1],e[0]),eo(e[2])]}function Ru(e){var t=e[0],r=e[1],s=an(r);return[s*an(t),s*Qt(t),Qt(r)]}function up(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function uh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Wg(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Em(e){var t=ci(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Mr,so,Nr,Eo,bu,$4,V4,Qc,If,dl,js,As={point:yy,lineStart:Gb,lineEnd:Hb,polygonStart:function(){As.point=H4,As.lineStart=SI,As.lineEnd=CI,If=new zi,es.polygonStart()},polygonEnd:function(){es.polygonEnd(),As.point=yy,As.lineStart=Gb,As.lineEnd=Hb,_m<0?(Mr=-(Nr=180),so=-(Eo=90)):If>mn?Eo=90:If<-mn&&(so=-90),js[0]=Mr,js[1]=Nr},sphere:function(){Mr=-(Nr=180),so=-(Eo=90)}};function yy(e,t){dl.push(js=[Mr=e,Nr=e]),t<so&&(so=t),t>Eo&&(Eo=t)}function G4(e,t){var r=Ru([e*gn,t*gn]);if(Qc){var s=uh(Qc,r),u=[s[1],-s[0],0],f=uh(u,s);Em(f),f=wm(f);var g=e-bu,l=g>0?1:-1,_=f[0]*fr*l,C,S=Vn(g)>180;S^(l*bu<_&&_<l*e)?(C=f[1]*fr,C>Eo&&(Eo=C)):(_=(_+360)%360-180,S^(l*bu<_&&_<l*e)?(C=-f[1]*fr,C<so&&(so=C)):(t<so&&(so=t),t>Eo&&(Eo=t))),S?e<bu?wo(Mr,e)>wo(Mr,Nr)&&(Nr=e):wo(e,Nr)>wo(Mr,Nr)&&(Mr=e):Nr>=Mr?(e<Mr&&(Mr=e),e>Nr&&(Nr=e)):e>bu?wo(Mr,e)>wo(Mr,Nr)&&(Nr=e):wo(e,Nr)>wo(Mr,Nr)&&(Mr=e)}else dl.push(js=[Mr=e,Nr=e]);t<so&&(so=t),t>Eo&&(Eo=t),Qc=r,bu=e}function Gb(){As.point=G4}function Hb(){js[0]=Mr,js[1]=Nr,As.point=yy,Qc=null}function H4(e,t){if(Qc){var r=e-bu;If.add(Vn(r)>180?r+(r>0?360:-360):r)}else $4=e,V4=t;es.point(e,t),G4(e,t)}function SI(){es.lineStart()}function CI(){H4($4,V4),es.lineEnd(),Vn(If)>mn&&(Mr=-(Nr=180)),js[0]=Mr,js[1]=Nr,Qc=null}function wo(e,t){return(t-=e)<0?t+360:t}function TI(e,t){return e[0]-t[0]}function Wb(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function AI(e){var t,r,s,u,f,g,l;if(Eo=Nr=-(Mr=so=1/0),dl=[],_a(e,As),r=dl.length){for(dl.sort(TI),t=1,s=dl[0],f=[s];t<r;++t)u=dl[t],Wb(s,u[0])||Wb(s,u[1])?(wo(s[0],u[1])>wo(s[0],s[1])&&(s[1]=u[1]),wo(u[0],s[1])>wo(s[0],s[1])&&(s[0]=u[0])):f.push(s=u);for(g=-1/0,r=f.length-1,t=0,s=f[r];t<=r;s=u,++t)u=f[t],(l=wo(s[1],u[0]))>g&&(g=l,Mr=u[0],Nr=s[1])}return dl=js=null,Mr===1/0||so===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mr,so],[Nr,Eo]]}var hf,Sm,Cm,Tm,Am,Im,Pm,km,vy,xy,_y,W4,Z4,Xi,Ki,Yi,Ea={sphere:Lr,point:ex,lineStart:Zb,lineEnd:Xb,polygonStart:function(){Ea.lineStart=kI,Ea.lineEnd=MI},polygonEnd:function(){Ea.lineStart=Zb,Ea.lineEnd=Xb}};function ex(e,t){e*=gn,t*=gn;var r=an(t);ld(r*an(e),r*Qt(e),Qt(t))}function ld(e,t,r){++hf,Cm+=(e-Cm)/hf,Tm+=(t-Tm)/hf,Am+=(r-Am)/hf}function Zb(){Ea.point=II}function II(e,t){e*=gn,t*=gn;var r=an(t);Xi=r*an(e),Ki=r*Qt(e),Yi=Qt(t),Ea.point=PI,ld(Xi,Ki,Yi)}function PI(e,t){e*=gn,t*=gn;var r=an(t),s=r*an(e),u=r*Qt(e),f=Qt(t),g=Qi(ci((g=Ki*f-Yi*u)*g+(g=Yi*s-Xi*f)*g+(g=Xi*u-Ki*s)*g),Xi*s+Ki*u+Yi*f);Sm+=g,Im+=g*(Xi+(Xi=s)),Pm+=g*(Ki+(Ki=u)),km+=g*(Yi+(Yi=f)),ld(Xi,Ki,Yi)}function Xb(){Ea.point=ex}function kI(){Ea.point=zI}function MI(){X4(W4,Z4),Ea.point=ex}function zI(e,t){W4=e,Z4=t,e*=gn,t*=gn,Ea.point=X4;var r=an(t);Xi=r*an(e),Ki=r*Qt(e),Yi=Qt(t),ld(Xi,Ki,Yi)}function X4(e,t){e*=gn,t*=gn;var r=an(t),s=r*an(e),u=r*Qt(e),f=Qt(t),g=Ki*f-Yi*u,l=Yi*s-Xi*f,_=Xi*u-Ki*s,C=fy(g,l,_),S=eo(C),E=C&&-S/C;vy.add(E*g),xy.add(E*l),_y.add(E*_),Sm+=S,Im+=S*(Xi+(Xi=s)),Pm+=S*(Ki+(Ki=u)),km+=S*(Yi+(Yi=f)),ld(Xi,Ki,Yi)}function LI(e){hf=Sm=Cm=Tm=Am=Im=Pm=km=0,vy=new zi,xy=new zi,_y=new zi,_a(e,Ea);var t=+vy,r=+xy,s=+_y,u=fy(t,r,s);return u<qf&&(t=Im,r=Pm,s=km,Sm<mn&&(t=Cm,r=Tm,s=Am),u=fy(t,r,s),u<qf)?[NaN,NaN]:[Qi(r,t)*fr,eo(s/u)*fr]}function Ec(e){return function(){return e}}function by(e,t){function r(s,u){return s=e(s,u),t(s[0],s[1])}return e.invert&&t.invert&&(r.invert=function(s,u){return s=t.invert(s,u),s&&e.invert(s[0],s[1])}),r}function wy(e,t){return[Vn(e)>Fn?e+Math.round(-e/Ji)*Ji:e,t]}wy.invert=wy;function tx(e,t,r){return(e%=Ji)?t||r?by(Yb(e),qb(t,r)):Yb(e):t||r?qb(t,r):wy}function Kb(e){return function(t,r){return t+=e,[t>Fn?t-Ji:t<-Fn?t+Ji:t,r]}}function Yb(e){var t=Kb(e);return t.invert=Kb(-e),t}function qb(e,t){var r=an(e),s=Qt(e),u=an(t),f=Qt(t);function g(l,_){var C=an(_),S=an(l)*C,E=Qt(l)*C,T=Qt(_),F=T*r+S*s;return[Qi(E*u-F*f,S*r-T*s),eo(F*u+E*f)]}return g.invert=function(l,_){var C=an(_),S=an(l)*C,E=Qt(l)*C,T=Qt(_),F=T*u-E*f;return[Qi(E*u+T*f,S*r+F*s),eo(F*r-S*s)]},g}function K4(e){e=tx(e[0]*gn,e[1]*gn,e.length>2?e[2]*gn:0);function t(r){return r=e(r[0]*gn,r[1]*gn),r[0]*=fr,r[1]*=fr,r}return t.invert=function(r){return r=e.invert(r[0]*gn,r[1]*gn),r[0]*=fr,r[1]*=fr,r},t}function Y4(e,t,r,s,u,f){if(!!r){var g=an(t),l=Qt(t),_=s*r;u==null?(u=t+s*Ji,f=t-_/2):(u=Jb(g,u),f=Jb(g,f),(s>0?u<f:u>f)&&(u+=s*Ji));for(var C,S=u;s>0?S>f:S<f;S-=_)C=wm([g,-l*an(S),-l*Qt(S)]),e.point(C[0],C[1])}}function Jb(e,t){t=Ru(t),t[0]-=e,Em(t);var r=j4(-t[1]);return((-t[2]<0?-r:r)+Ji-mn)%Ji}function OI(){var e=Ec([0,0]),t=Ec(90),r=Ec(6),s,u,f={point:g};function g(_,C){s.push(_=u(_,C)),_[0]*=fr,_[1]*=fr}function l(){var _=e.apply(this,arguments),C=t.apply(this,arguments)*gn,S=r.apply(this,arguments)*gn;return s=[],u=tx(-_[0]*gn,-_[1]*gn,0).invert,Y4(f,C,S,1),_={type:"Polygon",coordinates:[s]},s=u=null,_}return l.center=function(_){return arguments.length?(e=typeof _=="function"?_:Ec([+_[0],+_[1]]),l):e},l.radius=function(_){return arguments.length?(t=typeof _=="function"?_:Ec(+_),l):t},l.precision=function(_){return arguments.length?(r=typeof _=="function"?_:Ec(+_),l):r},l}function q4(){var e=[],t;return{point:function(r,s,u){t.push([r,s,u])},lineStart:function(){e.push(t=[])},lineEnd:Lr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Op(e,t){return Vn(e[0]-t[0])<mn&&Vn(e[1]-t[1])<mn}function hp(e,t,r,s){this.x=e,this.z=t,this.o=r,this.e=s,this.v=!1,this.n=this.p=null}function J4(e,t,r,s,u){var f=[],g=[],l,_;if(e.forEach(function(X){if(!((Z=X.length-1)<=0)){var Z,ue=X[0],H=X[Z],V;if(Op(ue,H)){if(!ue[2]&&!H[2]){for(u.lineStart(),l=0;l<Z;++l)u.point((ue=X[l])[0],ue[1]);u.lineEnd();return}H[0]+=2*mn}f.push(V=new hp(ue,X,null,!0)),g.push(V.o=new hp(ue,null,V,!1)),f.push(V=new hp(H,X,null,!1)),g.push(V.o=new hp(H,null,V,!0))}}),!!f.length){for(g.sort(t),Qb(f),Qb(g),l=0,_=g.length;l<_;++l)g[l].e=r=!r;for(var C=f[0],S,E;;){for(var T=C,F=!0;T.v;)if((T=T.n)===C)return;S=T.z,u.lineStart();do{if(T.v=T.o.v=!0,T.e){if(F)for(l=0,_=S.length;l<_;++l)u.point((E=S[l])[0],E[1]);else s(T.x,T.n.x,1,u);T=T.n}else{if(F)for(S=T.p.z,l=S.length-1;l>=0;--l)u.point((E=S[l])[0],E[1]);else s(T.x,T.p.x,-1,u);T=T.p}T=T.o,S=T.z,F=!F}while(!T.v);u.lineEnd()}}}function Qb(e){if(!!(t=e.length)){for(var t,r=0,s=e[0],u;++r<t;)s.n=u=e[r],u.p=s,s=u;s.n=u=e[0],u.p=s}}function Zg(e){return Vn(e[0])<=Fn?e[0]:Ko(e[0])*((Vn(e[0])+Fn)%Ji-Fn)}function Q4(e,t){var r=Zg(t),s=t[1],u=Qt(s),f=[Qt(r),-an(r),0],g=0,l=0,_=new zi;u===1?s=$r+mn:u===-1&&(s=-$r-mn);for(var C=0,S=e.length;C<S;++C)if(!!(T=(E=e[C]).length))for(var E,T,F=E[T-1],X=Zg(F),Z=F[1]/2+ym,ue=Qt(Z),H=an(Z),V=0;V<T;++V,X=ae,ue=j,H=w,F=B){var B=E[V],ae=Zg(B),G=B[1]/2+ym,j=Qt(G),w=an(G),k=ae-X,U=k>=0?1:-1,K=U*k,Y=K>Fn,de=ue*j;if(_.add(Qi(de*U*Qt(K),H*w+de*an(K))),g+=Y?k+U*Ji:k,Y^X>=r^ae>=r){var ve=uh(Ru(F),Ru(B));Em(ve);var be=uh(f,ve);Em(be);var ee=(Y^k>=0?-1:1)*eo(be[2]);(s>ee||s===ee&&(ve[0]||ve[1]))&&(l+=Y^k>=0?1:-1)}}return(g<-mn||g<mn&&_<-qf)^l&1}function e6(e,t,r,s){return function(u){var f=t(u),g=q4(),l=t(g),_=!1,C,S,E,T={point:F,lineStart:Z,lineEnd:ue,polygonStart:function(){T.point=H,T.lineStart=V,T.lineEnd=B,S=[],C=[]},polygonEnd:function(){T.point=F,T.lineStart=Z,T.lineEnd=ue,S=F4(S);var ae=Q4(C,s);S.length?(_||(u.polygonStart(),_=!0),J4(S,FI,ae,r,u)):ae&&(_||(u.polygonStart(),_=!0),u.lineStart(),r(null,null,1,u),u.lineEnd()),_&&(u.polygonEnd(),_=!1),S=C=null},sphere:function(){u.polygonStart(),u.lineStart(),r(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function F(ae,G){e(ae,G)&&u.point(ae,G)}function X(ae,G){f.point(ae,G)}function Z(){T.point=X,f.lineStart()}function ue(){T.point=F,f.lineEnd()}function H(ae,G){E.push([ae,G]),l.point(ae,G)}function V(){l.lineStart(),E=[]}function B(){H(E[0][0],E[0][1]),l.lineEnd();var ae=l.clean(),G=g.result(),j,w=G.length,k,U,K;if(E.pop(),C.push(E),E=null,!!w){if(ae&1){if(U=G[0],(k=U.length-1)>0){for(_||(u.polygonStart(),_=!0),u.lineStart(),j=0;j<k;++j)u.point((K=U[j])[0],K[1]);u.lineEnd()}return}w>1&&ae&2&&G.push(G.pop().concat(G.shift())),S.push(G.filter(RI))}}return T}}function RI(e){return e.length>1}function FI(e,t){return((e=e.x)[0]<0?e[1]-$r-mn:$r-e[1])-((t=t.x)[0]<0?t[1]-$r-mn:$r-t[1])}var Ey=e6(function(){return!0},BI,DI,[-Fn,-$r]);function BI(e){var t=NaN,r=NaN,s=NaN,u;return{lineStart:function(){e.lineStart(),u=1},point:function(f,g){var l=f>0?Fn:-Fn,_=Vn(f-t);Vn(_-Fn)<mn?(e.point(t,r=(r+g)/2>0?$r:-$r),e.point(s,r),e.lineEnd(),e.lineStart(),e.point(l,r),e.point(f,r),u=0):s!==l&&_>=Fn&&(Vn(t-s)<mn&&(t-=s*mn),Vn(f-l)<mn&&(f-=l*mn),r=jI(t,r,f,g),e.point(s,r),e.lineEnd(),e.lineStart(),e.point(l,r),u=0),e.point(t=f,r=g),s=l},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-u}}}function jI(e,t,r,s){var u,f,g=Qt(e-r);return Vn(g)>mn?vh((Qt(t)*(f=an(s))*Qt(r)-Qt(s)*(u=an(t))*Qt(e))/(u*f*g)):(t+s)/2}function DI(e,t,r,s){var u;if(e==null)u=r*$r,s.point(-Fn,u),s.point(0,u),s.point(Fn,u),s.point(Fn,0),s.point(Fn,-u),s.point(0,-u),s.point(-Fn,-u),s.point(-Fn,0),s.point(-Fn,u);else if(Vn(e[0]-t[0])>mn){var f=e[0]<t[0]?Fn:-Fn;u=r*f/2,s.point(-f,u),s.point(0,u),s.point(f,u)}else s.point(t[0],t[1])}function t6(e){var t=an(e),r=6*gn,s=t>0,u=Vn(t)>mn;function f(S,E,T,F){Y4(F,e,r,T,S,E)}function g(S,E){return an(S)*an(E)>t}function l(S){var E,T,F,X,Z;return{lineStart:function(){X=F=!1,Z=1},point:function(ue,H){var V=[ue,H],B,ae=g(ue,H),G=s?ae?0:C(ue,H):ae?C(ue+(ue<0?Fn:-Fn),H):0;if(!E&&(X=F=ae)&&S.lineStart(),ae!==F&&(B=_(E,V),(!B||Op(E,B)||Op(V,B))&&(V[2]=1)),ae!==F)Z=0,ae?(S.lineStart(),B=_(V,E),S.point(B[0],B[1])):(B=_(E,V),S.point(B[0],B[1],2),S.lineEnd()),E=B;else if(u&&E&&s^ae){var j;!(G&T)&&(j=_(V,E,!0))&&(Z=0,s?(S.lineStart(),S.point(j[0][0],j[0][1]),S.point(j[1][0],j[1][1]),S.lineEnd()):(S.point(j[1][0],j[1][1]),S.lineEnd(),S.lineStart(),S.point(j[0][0],j[0][1],3)))}ae&&(!E||!Op(E,V))&&S.point(V[0],V[1]),E=V,F=ae,T=G},lineEnd:function(){F&&S.lineEnd(),E=null},clean:function(){return Z|(X&&F)<<1}}}function _(S,E,T){var F=Ru(S),X=Ru(E),Z=[1,0,0],ue=uh(F,X),H=up(ue,ue),V=ue[0],B=H-V*V;if(!B)return!T&&S;var ae=t*H/B,G=-t*V/B,j=uh(Z,ue),w=cp(Z,ae),k=cp(ue,G);Wg(w,k);var U=j,K=up(w,U),Y=up(U,U),de=K*K-Y*(up(w,w)-1);if(!(de<0)){var ve=ci(de),be=cp(U,(-K-ve)/Y);if(Wg(be,w),be=wm(be),!T)return be;var ee=S[0],ie=E[0],ne=S[1],te=E[1],he;ie<ee&&(he=ee,ee=ie,ie=he);var xe=ie-ee,_e=Vn(xe-Fn)<mn,Be=_e||xe<mn;if(!_e&&te<ne&&(he=ne,ne=te,te=he),Be?_e?ne+te>0^be[1]<(Vn(be[0]-ee)<mn?ne:te):ne<=be[1]&&be[1]<=te:xe>Fn^(ee<=be[0]&&be[0]<=ie)){var Ie=cp(U,(-K+ve)/Y);return Wg(Ie,w),[be,wm(Ie)]}}}function C(S,E){var T=s?e:Fn-e,F=0;return S<-T?F|=1:S>T&&(F|=2),E<-T?F|=4:E>T&&(F|=8),F}return e6(g,l,f,s?[0,-e]:[-Fn,e-Fn])}function NI(e,t,r,s,u,f){var g=e[0],l=e[1],_=t[0],C=t[1],S=0,E=1,T=_-g,F=C-l,X;if(X=r-g,!(!T&&X>0)){if(X/=T,T<0){if(X<S)return;X<E&&(E=X)}else if(T>0){if(X>E)return;X>S&&(S=X)}if(X=u-g,!(!T&&X<0)){if(X/=T,T<0){if(X>E)return;X>S&&(S=X)}else if(T>0){if(X<S)return;X<E&&(E=X)}if(X=s-l,!(!F&&X>0)){if(X/=F,F<0){if(X<S)return;X<E&&(E=X)}else if(F>0){if(X>E)return;X>S&&(S=X)}if(X=f-l,!(!F&&X<0)){if(X/=F,F<0){if(X>E)return;X>S&&(S=X)}else if(F>0){if(X<S)return;X<E&&(E=X)}return S>0&&(e[0]=g+S*T,e[1]=l+S*F),E<1&&(t[0]=g+E*T,t[1]=l+E*F),!0}}}}}var ff=1e9,fp=-ff;function d0(e,t,r,s){function u(C,S){return e<=C&&C<=r&&t<=S&&S<=s}function f(C,S,E,T){var F=0,X=0;if(C==null||(F=g(C,E))!==(X=g(S,E))||_(C,S)<0^E>0)do T.point(F===0||F===3?e:r,F>1?s:t);while((F=(F+E+4)%4)!==X);else T.point(S[0],S[1])}function g(C,S){return Vn(C[0]-e)<mn?S>0?0:3:Vn(C[0]-r)<mn?S>0?2:1:Vn(C[1]-t)<mn?S>0?1:0:S>0?3:2}function l(C,S){return _(C.x,S.x)}function _(C,S){var E=g(C,1),T=g(S,1);return E!==T?E-T:E===0?S[1]-C[1]:E===1?C[0]-S[0]:E===2?C[1]-S[1]:S[0]-C[0]}return function(C){var S=C,E=q4(),T,F,X,Z,ue,H,V,B,ae,G,j,w={point:k,lineStart:de,lineEnd:ve,polygonStart:K,polygonEnd:Y};function k(ee,ie){u(ee,ie)&&S.point(ee,ie)}function U(){for(var ee=0,ie=0,ne=F.length;ie<ne;++ie)for(var te=F[ie],he=1,xe=te.length,_e=te[0],Be,Ie,Pe=_e[0],$e=_e[1];he<xe;++he)Be=Pe,Ie=$e,_e=te[he],Pe=_e[0],$e=_e[1],Ie<=s?$e>s&&(Pe-Be)*(s-Ie)>($e-Ie)*(e-Be)&&++ee:$e<=s&&(Pe-Be)*(s-Ie)<($e-Ie)*(e-Be)&&--ee;return ee}function K(){S=E,T=[],F=[],j=!0}function Y(){var ee=U(),ie=j&&ee,ne=(T=F4(T)).length;(ie||ne)&&(C.polygonStart(),ie&&(C.lineStart(),f(null,null,1,C),C.lineEnd()),ne&&J4(T,l,ee,f,C),C.polygonEnd()),S=C,T=F=X=null}function de(){w.point=be,F&&F.push(X=[]),G=!0,ae=!1,V=B=NaN}function ve(){T&&(be(Z,ue),H&&ae&&E.rejoin(),T.push(E.result())),w.point=k,ae&&S.lineEnd()}function be(ee,ie){var ne=u(ee,ie);if(F&&X.push([ee,ie]),G)Z=ee,ue=ie,H=ne,G=!1,ne&&(S.lineStart(),S.point(ee,ie));else if(ne&&ae)S.point(ee,ie);else{var te=[V=Math.max(fp,Math.min(ff,V)),B=Math.max(fp,Math.min(ff,B))],he=[ee=Math.max(fp,Math.min(ff,ee)),ie=Math.max(fp,Math.min(ff,ie))];NI(te,he,e,t,r,s)?(ae||(S.lineStart(),S.point(te[0],te[1])),S.point(he[0],he[1]),ne||S.lineEnd(),j=!1):ne&&(S.lineStart(),S.point(ee,ie),j=!1)}V=ee,B=ie,ae=ne}return w}}function UI(){var e=0,t=0,r=960,s=500,u,f,g;return g={stream:function(l){return u&&f===l?u:u=d0(e,t,r,s)(f=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],r=+l[1][0],s=+l[1][1],u=f=null,g):[[e,t],[r,s]]}}}var Sy,Cy,Rp,Fp,ch={sphere:Lr,point:Lr,lineStart:$I,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr};function $I(){ch.point=GI,ch.lineEnd=VI}function VI(){ch.point=ch.lineEnd=Lr}function GI(e,t){e*=gn,t*=gn,Cy=e,Rp=Qt(t),Fp=an(t),ch.point=HI}function HI(e,t){e*=gn,t*=gn;var r=Qt(t),s=an(t),u=Vn(e-Cy),f=an(u),g=Qt(u),l=s*g,_=Fp*r-Rp*s*f,C=Rp*r+Fp*s*f;Sy.add(Qi(ci(l*l+_*_),C)),Cy=e,Rp=r,Fp=s}function n6(e){return Sy=new zi,_a(e,ch),+Sy}var Ty=[null,null],WI={type:"LineString",coordinates:Ty};function Mm(e,t){return Ty[0]=e,Ty[1]=t,n6(WI)}var ew={Feature:function(e,t){return zm(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,s=-1,u=r.length;++s<u;)if(zm(r[s].geometry,t))return!0;return!1}},tw={Sphere:function(){return!0},Point:function(e,t){return nw(e.coordinates,t)},MultiPoint:function(e,t){for(var r=e.coordinates,s=-1,u=r.length;++s<u;)if(nw(r[s],t))return!0;return!1},LineString:function(e,t){return rw(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,s=-1,u=r.length;++s<u;)if(rw(r[s],t))return!0;return!1},Polygon:function(e,t){return iw(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,s=-1,u=r.length;++s<u;)if(iw(r[s],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,s=-1,u=r.length;++s<u;)if(zm(r[s],t))return!0;return!1}};function zm(e,t){return e&&tw.hasOwnProperty(e.type)?tw[e.type](e,t):!1}function nw(e,t){return Mm(e,t)===0}function rw(e,t){for(var r,s,u,f=0,g=e.length;f<g;f++){if(s=Mm(e[f],t),s===0||f>0&&(u=Mm(e[f],e[f-1]),u>0&&r<=u&&s<=u&&(r+s-u)*(1-Math.pow((r-s)/u,2))<qf*u))return!0;r=s}return!1}function iw(e,t){return!!Q4(e.map(ZI),r6(t))}function ZI(e){return e=e.map(r6),e.pop(),e}function r6(e){return[e[0]*gn,e[1]*gn]}function XI(e,t){return(e&&ew.hasOwnProperty(e.type)?ew[e.type]:zm)(e,t)}function ow(e,t,r){var s=Gc(e,t-mn,r).concat(t);return function(u){return s.map(function(f){return[u,f]})}}function aw(e,t,r){var s=Gc(e,t-mn,r).concat(t);return function(u){return s.map(function(f){return[f,u]})}}function i6(){var e,t,r,s,u,f,g,l,_=10,C=_,S=90,E=360,T,F,X,Z,ue=2.5;function H(){return{type:"MultiLineString",coordinates:V()}}function V(){return Gc(lp(s/S)*S,r,S).map(X).concat(Gc(lp(l/E)*E,g,E).map(Z)).concat(Gc(lp(t/_)*_,e,_).filter(function(B){return Vn(B%S)>mn}).map(T)).concat(Gc(lp(f/C)*C,u,C).filter(function(B){return Vn(B%E)>mn}).map(F))}return H.lines=function(){return V().map(function(B){return{type:"LineString",coordinates:B}})},H.outline=function(){return{type:"Polygon",coordinates:[X(s).concat(Z(g).slice(1),X(r).reverse().slice(1),Z(l).reverse().slice(1))]}},H.extent=function(B){return arguments.length?H.extentMajor(B).extentMinor(B):H.extentMinor()},H.extentMajor=function(B){return arguments.length?(s=+B[0][0],r=+B[1][0],l=+B[0][1],g=+B[1][1],s>r&&(B=s,s=r,r=B),l>g&&(B=l,l=g,g=B),H.precision(ue)):[[s,l],[r,g]]},H.extentMinor=function(B){return arguments.length?(t=+B[0][0],e=+B[1][0],f=+B[0][1],u=+B[1][1],t>e&&(B=t,t=e,e=B),f>u&&(B=f,f=u,u=B),H.precision(ue)):[[t,f],[e,u]]},H.step=function(B){return arguments.length?H.stepMajor(B).stepMinor(B):H.stepMinor()},H.stepMajor=function(B){return arguments.length?(S=+B[0],E=+B[1],H):[S,E]},H.stepMinor=function(B){return arguments.length?(_=+B[0],C=+B[1],H):[_,C]},H.precision=function(B){return arguments.length?(ue=+B,T=ow(f,u,90),F=aw(t,e,ue),X=ow(l,g,90),Z=aw(s,r,ue),H):ue},H.extentMajor([[-180,-90+mn],[180,90-mn]]).extentMinor([[-180,-80-mn],[180,80+mn]])}function KI(){return i6()()}function YI(e,t){var r=e[0]*gn,s=e[1]*gn,u=t[0]*gn,f=t[1]*gn,g=an(s),l=Qt(s),_=an(f),C=Qt(f),S=g*an(r),E=g*Qt(r),T=_*an(u),F=_*Qt(u),X=2*eo(ci(Nb(f-s)+g*_*Nb(u-r))),Z=Qt(X),ue=X?function(H){var V=Qt(H*=X)/Z,B=Qt(X-H)/Z,ae=B*S+V*T,G=B*E+V*F,j=B*l+V*C;return[Qi(G,ae)*fr,Qi(j,ci(ae*ae+G*G))*fr]}:function(){return[r*fr,s*fr]};return ue.distance=X,ue}var Jf=e=>e,Xg=new zi,Ay=new zi,o6,a6,Iy,Py,yl={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){yl.lineStart=qI,yl.lineEnd=QI},polygonEnd:function(){yl.lineStart=yl.lineEnd=yl.point=Lr,Xg.add(Vn(Ay)),Ay=new zi},result:function(){var e=Xg/2;return Xg=new zi,e}};function qI(){yl.point=JI}function JI(e,t){yl.point=s6,o6=Iy=e,a6=Py=t}function s6(e,t){Ay.add(Py*e-Iy*t),Iy=e,Py=t}function QI(){s6(o6,a6)}var sw=yl,hh=1/0,Lm=hh,Qf=-hh,Om=Qf,e9={point:t9,lineStart:Lr,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr,result:function(){var e=[[hh,Lm],[Qf,Om]];return Qf=Om=-(Lm=hh=1/0),e}};function t9(e,t){e<hh&&(hh=e),e>Qf&&(Qf=e),t<Lm&&(Lm=t),t>Om&&(Om=t)}var Rm=e9,ky=0,My=0,df=0,Fm=0,Bm=0,Hc=0,zy=0,Ly=0,pf=0,l6,u6,Za,Xa,ba={point:Fu,lineStart:lw,lineEnd:uw,polygonStart:function(){ba.lineStart=i9,ba.lineEnd=o9},polygonEnd:function(){ba.point=Fu,ba.lineStart=lw,ba.lineEnd=uw},result:function(){var e=pf?[zy/pf,Ly/pf]:Hc?[Fm/Hc,Bm/Hc]:df?[ky/df,My/df]:[NaN,NaN];return ky=My=df=Fm=Bm=Hc=zy=Ly=pf=0,e}};function Fu(e,t){ky+=e,My+=t,++df}function lw(){ba.point=n9}function n9(e,t){ba.point=r9,Fu(Za=e,Xa=t)}function r9(e,t){var r=e-Za,s=t-Xa,u=ci(r*r+s*s);Fm+=u*(Za+e)/2,Bm+=u*(Xa+t)/2,Hc+=u,Fu(Za=e,Xa=t)}function uw(){ba.point=Fu}function i9(){ba.point=a9}function o9(){c6(l6,u6)}function a9(e,t){ba.point=c6,Fu(l6=Za=e,u6=Xa=t)}function c6(e,t){var r=e-Za,s=t-Xa,u=ci(r*r+s*s);Fm+=u*(Za+e)/2,Bm+=u*(Xa+t)/2,Hc+=u,u=Xa*e-Za*t,zy+=u*(Za+e),Ly+=u*(Xa+t),pf+=u*3,Fu(Za=e,Xa=t)}var cw=ba;function h6(e){this._context=e}h6.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ji);break}}},result:Lr};var Oy=new zi,Kg,f6,d6,mf,gf,jm={point:Lr,lineStart:function(){jm.point=s9},lineEnd:function(){Kg&&p6(f6,d6),jm.point=Lr},polygonStart:function(){Kg=!0},polygonEnd:function(){Kg=null},result:function(){var e=+Oy;return Oy=new zi,e}};function s9(e,t){jm.point=p6,f6=mf=e,d6=gf=t}function p6(e,t){mf-=e,gf-=t,Oy.add(ci(mf*mf+gf*gf)),mf=e,gf=t}var hw=jm;function m6(){this._string=[]}m6.prototype={_radius:4.5,_circle:fw(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=fw(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function fw(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function l9(e,t){var r=4.5,s,u;function f(g){return g&&(typeof r=="function"&&u.pointRadius(+r.apply(this,arguments)),_a(g,s(u))),u.result()}return f.area=function(g){return _a(g,s(sw)),sw.result()},f.measure=function(g){return _a(g,s(hw)),hw.result()},f.bounds=function(g){return _a(g,s(Rm)),Rm.result()},f.centroid=function(g){return _a(g,s(cw)),cw.result()},f.projection=function(g){return arguments.length?(s=g==null?(e=null,Jf):(e=g).stream,f):e},f.context=function(g){return arguments.length?(u=g==null?(t=null,new m6):new h6(t=g),typeof r!="function"&&u.pointRadius(r),f):t},f.pointRadius=function(g){return arguments.length?(r=typeof g=="function"?g:(u.pointRadius(+g),+g),f):r},f.projection(e).context(t)}function u9(e){return{stream:ud(e)}}function ud(e){return function(t){var r=new Ry;for(var s in e)r[s]=e[s];return r.stream=t,r}}function Ry(){}Ry.prototype={constructor:Ry,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function nx(e,t,r){var s=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),s!=null&&e.clipExtent(null),_a(r,e.stream(Rm)),t(Rm.result()),s!=null&&e.clipExtent(s),e}function p0(e,t,r){return nx(e,function(s){var u=t[1][0]-t[0][0],f=t[1][1]-t[0][1],g=Math.min(u/(s[1][0]-s[0][0]),f/(s[1][1]-s[0][1])),l=+t[0][0]+(u-g*(s[1][0]+s[0][0]))/2,_=+t[0][1]+(f-g*(s[1][1]+s[0][1]))/2;e.scale(150*g).translate([l,_])},r)}function rx(e,t,r){return p0(e,[[0,0],t],r)}function ix(e,t,r){return nx(e,function(s){var u=+t,f=u/(s[1][0]-s[0][0]),g=(u-f*(s[1][0]+s[0][0]))/2,l=-f*s[0][1];e.scale(150*f).translate([g,l])},r)}function ox(e,t,r){return nx(e,function(s){var u=+t,f=u/(s[1][1]-s[0][1]),g=-f*s[0][0],l=(u-f*(s[1][1]+s[0][1]))/2;e.scale(150*f).translate([g,l])},r)}var dw=16,c9=an(30*gn);function pw(e,t){return+t?f9(e,t):h9(e)}function h9(e){return ud({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function f9(e,t){function r(s,u,f,g,l,_,C,S,E,T,F,X,Z,ue){var H=C-s,V=S-u,B=H*H+V*V;if(B>4*t&&Z--){var ae=g+T,G=l+F,j=_+X,w=ci(ae*ae+G*G+j*j),k=eo(j/=w),U=Vn(Vn(j)-1)<mn||Vn(f-E)<mn?(f+E)/2:Qi(G,ae),K=e(U,k),Y=K[0],de=K[1],ve=Y-s,be=de-u,ee=V*ve-H*be;(ee*ee/B>t||Vn((H*ve+V*be)/B-.5)>.3||g*T+l*F+_*X<c9)&&(r(s,u,f,g,l,_,Y,de,U,ae/=w,G/=w,j,Z,ue),ue.point(Y,de),r(Y,de,U,ae,G,j,C,S,E,T,F,X,Z,ue))}}return function(s){var u,f,g,l,_,C,S,E,T,F,X,Z,ue={point:H,lineStart:V,lineEnd:ae,polygonStart:function(){s.polygonStart(),ue.lineStart=G},polygonEnd:function(){s.polygonEnd(),ue.lineStart=V}};function H(k,U){k=e(k,U),s.point(k[0],k[1])}function V(){E=NaN,ue.point=B,s.lineStart()}function B(k,U){var K=Ru([k,U]),Y=e(k,U);r(E,T,S,F,X,Z,E=Y[0],T=Y[1],S=k,F=K[0],X=K[1],Z=K[2],dw,s),s.point(E,T)}function ae(){ue.point=H,s.lineEnd()}function G(){V(),ue.point=j,ue.lineEnd=w}function j(k,U){B(u=k,U),f=E,g=T,l=F,_=X,C=Z,ue.point=B}function w(){r(E,T,S,F,X,Z,f,g,u,l,_,C,dw,s),ue.lineEnd=ae,ae()}return ue}}var d9=ud({point:function(e,t){this.stream.point(e*gn,t*gn)}});function p9(e){return ud({point:function(t,r){var s=e(t,r);return this.stream.point(s[0],s[1])}})}function m9(e,t,r,s,u){function f(g,l){return g*=s,l*=u,[t+e*g,r-e*l]}return f.invert=function(g,l){return[(g-t)/e*s,(r-l)/e*u]},f}function mw(e,t,r,s,u,f){if(!f)return m9(e,t,r,s,u);var g=an(f),l=Qt(f),_=g*e,C=l*e,S=g/e,E=l/e,T=(l*r-g*t)/e,F=(l*t+g*r)/e;function X(Z,ue){return Z*=s,ue*=u,[_*Z-C*ue+t,r-C*Z-_*ue]}return X.invert=function(Z,ue){return[s*(S*Z-E*ue+T),u*(F-E*Z-S*ue)]},X}function ts(e){return ax(function(){return e})()}function ax(e){var t,r=150,s=480,u=250,f=0,g=0,l=0,_=0,C=0,S,E=0,T=1,F=1,X=null,Z=Ey,ue=null,H,V,B,ae=Jf,G=.5,j,w,k,U,K;function Y(ee){return k(ee[0]*gn,ee[1]*gn)}function de(ee){return ee=k.invert(ee[0],ee[1]),ee&&[ee[0]*fr,ee[1]*fr]}Y.stream=function(ee){return U&&K===ee?U:U=d9(p9(S)(Z(j(ae(K=ee)))))},Y.preclip=function(ee){return arguments.length?(Z=ee,X=void 0,be()):Z},Y.postclip=function(ee){return arguments.length?(ae=ee,ue=H=V=B=null,be()):ae},Y.clipAngle=function(ee){return arguments.length?(Z=+ee?t6(X=ee*gn):(X=null,Ey),be()):X*fr},Y.clipExtent=function(ee){return arguments.length?(ae=ee==null?(ue=H=V=B=null,Jf):d0(ue=+ee[0][0],H=+ee[0][1],V=+ee[1][0],B=+ee[1][1]),be()):ue==null?null:[[ue,H],[V,B]]},Y.scale=function(ee){return arguments.length?(r=+ee,ve()):r},Y.translate=function(ee){return arguments.length?(s=+ee[0],u=+ee[1],ve()):[s,u]},Y.center=function(ee){return arguments.length?(f=ee[0]%360*gn,g=ee[1]%360*gn,ve()):[f*fr,g*fr]},Y.rotate=function(ee){return arguments.length?(l=ee[0]%360*gn,_=ee[1]%360*gn,C=ee.length>2?ee[2]%360*gn:0,ve()):[l*fr,_*fr,C*fr]},Y.angle=function(ee){return arguments.length?(E=ee%360*gn,ve()):E*fr},Y.reflectX=function(ee){return arguments.length?(T=ee?-1:1,ve()):T<0},Y.reflectY=function(ee){return arguments.length?(F=ee?-1:1,ve()):F<0},Y.precision=function(ee){return arguments.length?(j=pw(w,G=ee*ee),be()):ci(G)},Y.fitExtent=function(ee,ie){return p0(Y,ee,ie)},Y.fitSize=function(ee,ie){return rx(Y,ee,ie)},Y.fitWidth=function(ee,ie){return ix(Y,ee,ie)},Y.fitHeight=function(ee,ie){return ox(Y,ee,ie)};function ve(){var ee=mw(r,0,0,T,F,E).apply(null,t(f,g)),ie=mw(r,s-ee[0],u-ee[1],T,F,E);return S=tx(l,_,C),w=by(t,ie),k=by(S,w),j=pw(w,G),be()}function be(){return U=K=null,Y}return function(){return t=e.apply(this,arguments),Y.invert=t.invert&&de,ve()}}function sx(e){var t=0,r=Fn/3,s=ax(e),u=s(t,r);return u.parallels=function(f){return arguments.length?s(t=f[0]*gn,r=f[1]*gn):[t*fr,r*fr]},u}function g9(e){var t=an(e);function r(s,u){return[s*t,Qt(u)/t]}return r.invert=function(s,u){return[s/t,eo(u*t)]},r}function g6(e,t){var r=Qt(e),s=(r+Qt(t))/2;if(Vn(s)<mn)return g9(e);var u=1+r*(2*s-r),f=ci(u)/s;function g(l,_){var C=ci(u-2*s*Qt(_))/s;return[C*Qt(l*=s),f-C*an(l)]}return g.invert=function(l,_){var C=f-_,S=Qi(l,Vn(C))*Ko(C);return C*s<0&&(S-=Fn*Ko(l)*Ko(C)),[S/s,eo((u-(l*l+C*C)*s*s)/(2*s))]},g}function Dm(){return sx(g6).scale(155.424).center([0,33.6442])}function y6(){return Dm().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function y9(e){var t=e.length;return{point:function(r,s){for(var u=-1;++u<t;)e[u].point(r,s)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function v9(){var e,t,r=y6(),s,u=Dm().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,g=Dm().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,_,C={point:function(T,F){_=[T,F]}};function S(T){var F=T[0],X=T[1];return _=null,s.point(F,X),_||(f.point(F,X),_)||(l.point(F,X),_)}S.invert=function(T){var F=r.scale(),X=r.translate(),Z=(T[0]-X[0])/F,ue=(T[1]-X[1])/F;return(ue>=.12&&ue<.234&&Z>=-.425&&Z<-.214?u:ue>=.166&&ue<.234&&Z>=-.214&&Z<-.115?g:r).invert(T)},S.stream=function(T){return e&&t===T?e:e=y9([r.stream(t=T),u.stream(T),g.stream(T)])},S.precision=function(T){return arguments.length?(r.precision(T),u.precision(T),g.precision(T),E()):r.precision()},S.scale=function(T){return arguments.length?(r.scale(T),u.scale(T*.35),g.scale(T),S.translate(r.translate())):r.scale()},S.translate=function(T){if(!arguments.length)return r.translate();var F=r.scale(),X=+T[0],Z=+T[1];return s=r.translate(T).clipExtent([[X-.455*F,Z-.238*F],[X+.455*F,Z+.238*F]]).stream(C),f=u.translate([X-.307*F,Z+.201*F]).clipExtent([[X-.425*F+mn,Z+.12*F+mn],[X-.214*F-mn,Z+.234*F-mn]]).stream(C),l=g.translate([X-.205*F,Z+.212*F]).clipExtent([[X-.214*F+mn,Z+.166*F+mn],[X-.115*F-mn,Z+.234*F-mn]]).stream(C),E()},S.fitExtent=function(T,F){return p0(S,T,F)},S.fitSize=function(T,F){return rx(S,T,F)},S.fitWidth=function(T,F){return ix(S,T,F)},S.fitHeight=function(T,F){return ox(S,T,F)};function E(){return e=t=null,S}return S.scale(1070)}function v6(e){return function(t,r){var s=an(t),u=an(r),f=e(s*u);return f===1/0?[2,0]:[f*u*Qt(t),f*Qt(r)]}}function cd(e){return function(t,r){var s=ci(t*t+r*r),u=e(s),f=Qt(u),g=an(u);return[Qi(t*f,s*g),eo(s&&r*f/s)]}}var lx=v6(function(e){return ci(2/(1+e))});lx.invert=cd(function(e){return 2*eo(e/2)});function x9(){return ts(lx).scale(124.75).clipAngle(180-.001)}var ux=v6(function(e){return(e=j4(e))&&e/Qt(e)});ux.invert=cd(function(e){return e});function _9(){return ts(ux).scale(79.4188).clipAngle(180-.001)}function hd(e,t){return[e,vm(Qv(($r+t)/2))]}hd.invert=function(e,t){return[e,2*vh(B4(t))-$r]};function b9(){return x6(hd).scale(961/Ji)}function x6(e){var t=ts(e),r=t.center,s=t.scale,u=t.translate,f=t.clipExtent,g=null,l,_,C;t.scale=function(E){return arguments.length?(s(E),S()):s()},t.translate=function(E){return arguments.length?(u(E),S()):u()},t.center=function(E){return arguments.length?(r(E),S()):r()},t.clipExtent=function(E){return arguments.length?(E==null?g=l=_=C=null:(g=+E[0][0],l=+E[0][1],_=+E[1][0],C=+E[1][1]),S()):g==null?null:[[g,l],[_,C]]};function S(){var E=Fn*s(),T=t(K4(t.rotate()).invert([0,0]));return f(g==null?[[T[0]-E,T[1]-E],[T[0]+E,T[1]+E]]:e===hd?[[Math.max(T[0]-E,g),l],[Math.min(T[0]+E,_),C]]:[[g,Math.max(T[1]-E,l)],[_,Math.min(T[1]+E,C)]])}return S()}function dp(e){return Qv(($r+e)/2)}function _6(e,t){var r=an(e),s=e===t?Qt(e):vm(r/an(t))/vm(dp(t)/dp(e)),u=r*Hg(dp(e),s)/s;if(!s)return hd;function f(g,l){u>0?l<-$r+mn&&(l=-$r+mn):l>$r-mn&&(l=$r-mn);var _=u/Hg(dp(l),s);return[_*Qt(s*g),u-_*an(s*g)]}return f.invert=function(g,l){var _=u-l,C=Ko(s)*ci(g*g+_*_),S=Qi(g,Vn(_))*Ko(_);return _*s<0&&(S-=Fn*Ko(g)*Ko(_)),[S/s,2*vh(Hg(u/C,1/s))-$r]},f}function w9(){return sx(_6).scale(109.5).parallels([30,30])}function ed(e,t){return[e,t]}ed.invert=ed;function E9(){return ts(ed).scale(152.63)}function b6(e,t){var r=an(e),s=e===t?Qt(e):(r-an(t))/(t-e),u=r/s+e;if(Vn(s)<mn)return ed;function f(g,l){var _=u-l,C=s*g;return[_*Qt(C),u-_*an(C)]}return f.invert=function(g,l){var _=u-l,C=Qi(g,Vn(_))*Ko(_);return _*s<0&&(C-=Fn*Ko(g)*Ko(_)),[C/s,u-Ko(s)*ci(g*g+_*_)]},f}function S9(){return sx(b6).scale(131.154).center([0,13.9389])}var Pf=1.340264,kf=-.081106,Mf=893e-6,zf=.003796,Nm=ci(3)/2,C9=12;function cx(e,t){var r=eo(Nm*Qt(t)),s=r*r,u=s*s*s;return[e*an(r)/(Nm*(Pf+3*kf*s+u*(7*Mf+9*zf*s))),r*(Pf+kf*s+u*(Mf+zf*s))]}cx.invert=function(e,t){for(var r=t,s=r*r,u=s*s*s,f=0,g,l,_;f<C9&&(l=r*(Pf+kf*s+u*(Mf+zf*s))-t,_=Pf+3*kf*s+u*(7*Mf+9*zf*s),r-=g=l/_,s=r*r,u=s*s*s,!(Vn(g)<qf));++f);return[Nm*e*(Pf+3*kf*s+u*(7*Mf+9*zf*s))/an(r),eo(Qt(r)/Nm)]};function T9(){return ts(cx).scale(177.158)}function hx(e,t){var r=an(t),s=an(e)*r;return[r*Qt(e)/s,Qt(t)/s]}hx.invert=cd(vh);function A9(){return ts(hx).scale(144.049).clipAngle(60)}function I9(){var e=1,t=0,r=0,s=1,u=1,f=0,g,l,_=null,C,S,E,T=1,F=1,X=ud({point:function(ae,G){var j=B([ae,G]);this.stream.point(j[0],j[1])}}),Z=Jf,ue,H;function V(){return T=e*s,F=e*u,ue=H=null,B}function B(ae){var G=ae[0]*T,j=ae[1]*F;if(f){var w=j*g-G*l;G=G*g+j*l,j=w}return[G+t,j+r]}return B.invert=function(ae){var G=ae[0]-t,j=ae[1]-r;if(f){var w=j*g+G*l;G=G*g-j*l,j=w}return[G/T,j/F]},B.stream=function(ae){return ue&&H===ae?ue:ue=X(Z(H=ae))},B.postclip=function(ae){return arguments.length?(Z=ae,_=C=S=E=null,V()):Z},B.clipExtent=function(ae){return arguments.length?(Z=ae==null?(_=C=S=E=null,Jf):d0(_=+ae[0][0],C=+ae[0][1],S=+ae[1][0],E=+ae[1][1]),V()):_==null?null:[[_,C],[S,E]]},B.scale=function(ae){return arguments.length?(e=+ae,V()):e},B.translate=function(ae){return arguments.length?(t=+ae[0],r=+ae[1],V()):[t,r]},B.angle=function(ae){return arguments.length?(f=ae%360*gn,l=Qt(f),g=an(f),V()):f*fr},B.reflectX=function(ae){return arguments.length?(s=ae?-1:1,V()):s<0},B.reflectY=function(ae){return arguments.length?(u=ae?-1:1,V()):u<0},B.fitExtent=function(ae,G){return p0(B,ae,G)},B.fitSize=function(ae,G){return rx(B,ae,G)},B.fitWidth=function(ae,G){return ix(B,ae,G)},B.fitHeight=function(ae,G){return ox(B,ae,G)},B}function fx(e,t){var r=t*t,s=r*r;return[e*(.8707-.131979*r+s*(-.013791+s*(.003971*r-.001529*s))),t*(1.007226+r*(.015085+s*(-.044475+.028874*r-.005916*s)))]}fx.invert=function(e,t){var r=t,s=25,u;do{var f=r*r,g=f*f;r-=u=(r*(1.007226+f*(.015085+g*(-.044475+.028874*f-.005916*g)))-t)/(1.007226+f*(.015085*3+g*(-.044475*7+.028874*9*f-.005916*11*g)))}while(Vn(u)>mn&&--s>0);return[e/(.8707+(f=r*r)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),r]};function P9(){return ts(fx).scale(175.295)}function dx(e,t){return[an(t)*Qt(e),Qt(t)]}dx.invert=cd(eo);function k9(){return ts(dx).scale(249.5).clipAngle(90+mn)}function px(e,t){var r=an(t),s=1+an(e)*r;return[r*Qt(e)/s,Qt(t)/s]}px.invert=cd(function(e){return 2*vh(e)});function M9(){return ts(px).scale(250).clipAngle(142)}function mx(e,t){return[vm(Qv(($r+t)/2)),-e]}mx.invert=function(e,t){return[-t,2*vh(B4(e))-$r]};function z9(){var e=x6(mx),t=e.center,r=e.rotate;return e.center=function(s){return arguments.length?t([-s[1],s[0]]):(s=t(),[s[1],-s[0]])},e.rotate=function(s){return arguments.length?r([s[0],s[1],s.length>2?s[2]+90:90]):(s=r(),[s[0],s[1],s[2]-90])},r([0,0,90]).scale(159.155)}var L9=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",geoArea:EI,geoBounds:AI,geoCentroid:LI,geoCircle:OI,geoClipAntimeridian:Ey,geoClipCircle:t6,geoClipExtent:UI,geoClipRectangle:d0,geoContains:XI,geoDistance:Mm,geoGraticule:i6,geoGraticule10:KI,geoInterpolate:YI,geoLength:n6,geoPath:l9,geoAlbers:y6,geoAlbersUsa:v9,geoAzimuthalEqualArea:x9,geoAzimuthalEqualAreaRaw:lx,geoAzimuthalEquidistant:_9,geoAzimuthalEquidistantRaw:ux,geoConicConformal:w9,geoConicConformalRaw:_6,geoConicEqualArea:Dm,geoConicEqualAreaRaw:g6,geoConicEquidistant:S9,geoConicEquidistantRaw:b6,geoEqualEarth:T9,geoEqualEarthRaw:cx,geoEquirectangular:E9,geoEquirectangularRaw:ed,geoGnomonic:A9,geoGnomonicRaw:hx,geoIdentity:I9,geoProjection:ts,geoProjectionMutator:ax,geoMercator:b9,geoMercatorRaw:hd,geoNaturalEarth1:P9,geoNaturalEarth1Raw:fx,geoOrthographic:k9,geoOrthographicRaw:dx,geoStereographic:M9,geoStereographicRaw:px,geoTransverseMercator:z9,geoTransverseMercatorRaw:mx,geoRotation:K4,geoStream:_a,geoTransform:u9}),O9=Vy(L9),Ll=2*Math.PI*6378137/2,R9=Math.PI/180;function w6(e){return e=e||256,2*Math.PI*6378137/e}function F9(e){var t=e[0],r=e[1],s=e[2];return(1<<s)*((1<<s)+t)+r}function Fy(e,t,r){var s=E6(e,t,r);return s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s}function E6(e,t,r){var s=t,u=Ex(e[0]),f=wx(e[1]),g=Math.sin(f*R9),l=Math.pow(2,s),_=l*(u/360+.5),C=l*(.5-.25*Math.log((1+g)/(1-g))/Math.PI);return Nu([_,C,s],r)}function B9(e,t=6){var r=e[0],s=e[1],u=e[2],f=e[3],g=(r-u)/2+u,l=(s-f)/2+f;return t!=null&&(g=Number(g.toFixed(t)),l=Number(l.toFixed(t))),[g,l]}function Um(e,t,r={enable:!0,decimal:1}){e=m0(e,t);var s=e[0],u=e[1],f=s*Ll/180,g=Math.log(Math.tan((90+u)*Math.PI/360))/(Math.PI/180);return g=g*Ll/180,r.enable&&(f=Number(f.toFixed(r.decimal)),g=Number(g.toFixed(r.decimal))),[f,g]}function By(e,t=6){var r=e[0],s=e[1],u=r/Ll*180,f=s/Ll*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(u=Number(u.toFixed(t)),f=Number(f.toFixed(t))),[u,f]}function gx(e,t,r){var s=e[0],u=e[1],f=_x(t,r),g=(s+Ll)/f,l=(u+Ll)/f;return[g,l,t]}function S6(e,t,r){e=m0(e,r);var s=Um(e),u=gx(s,t);return yx(u)}function j9(e,t,r){if(e=m0(e,r),t===0)return[0,0,0];var s=S6(e,t);return T6(s)}function D9(e,t){if(t===0)return[0,0,0];var r=gx(e,t);return yx(r)}function jy(e,t,r=1){var s=e[0],u=e[1],f=e[2],g=_x(f,t),l=s*g-Ll,_=u*g-Ll;return r!=null&&(l=Number(l.toFixed(r)),_=Number(_.toFixed(r))),[l,_]}function yx(e,t,r){t=t||256;var s=e[0],u=e[1],f=e[2];if(f===0)return[0,0,0];xx(f);var g=Math.ceil(s/t)-1,l=Math.ceil(u/t)-1;return g<0&&(g=0),l<0&&(l=0),[g,l,f]}function vx(e,t,r){Nu(e,r),t=t||256;var s=e[0],u=e[1],f=e[2],g=jy([s*t,u*t,f]),l=jy([(s+1)*t,(u+1)*t,f]);return[g[0],g[1],l[0],l[1]]}function C6(e,t){Nu(e,t);var r=e[0],s=e[1],u=e[2];if(u===0)return[-180,-85.051129,180,85.051129];var f=vx([r,s,u]),g=f[0],l=f[1],_=f[2],C=f[3],S=By([g,l,u]),E=By([_,C,u]);return[S[0],S[1],E[0],E[1]]}function N9(e){var t=fd(e);return vx(t)}function U9(e){var t=fd(e);return C6(t)}function T6(e,t){Nu(e,t);var r=e[0],s=e[1],u=e[2];if(u===0)return[0,0,0];var f=r,g=Math.pow(2,u)-1-s;return[f,g,u]}function fd(e){var t=e[0],r=e[1],s=e[2],u=t,f=Math.pow(2,s)-r-1;return[u,f,s]}function $9(e){var t=fd(e);return A6(t)}function A6(e,t){Nu(e,t);var r=e[0],s=e[1],u=e[2];if(u===0)return"";var f="";return s=Math.pow(2,u)-1-s,bx(u,0,-1).map(function(g){var l=0,_=1<<g-1;(r&_)!==0&&(l+=1),(s&_)!==0&&(l+=2),f=f.concat(l)}),f}function V9(e){var t=I6(e);return fd(t)}function I6(e){var t=0,r=0,s=e.length;return bx(s,0,-1).map(function(u){var f=1<<u-1;switch(parseInt(e[s-u],0)){case 0:break;case 1:t+=f;break;case 2:r+=f;break;case 3:t+=f,r+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,r,s]}function G9(e){var t=Um([e[0],e[1]]),r=Um([e[2],e[3]]);return[t[0],t[1],r[0],r[1]]}function Nu(e,t){var r=e[0],s=e[1],u=e[2];if(t===!1)return e;if(u==null)throw new Error("<zoom> is required");if(r==null)throw new Error("<x> is required");if(s==null)throw new Error("<y> is required");return u=xx(u),e=P6(e),e}function P6(e){var t=e[0],r=e[1],s=e[2],u=Math.pow(2,s);return t=t%u,t<0&&(t=t+u),[t,r,s]}function xx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function m0(e,t){if(t===!1)return e;var r=Ex(e[0]),s=wx(e[1]);return s>85&&(s=85),s<-85&&(s=-85),[r,s]}function _x(e,t){return w6(t)/Math.pow(2,e)}function bx(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var s=Math.max(Math.ceil((t-e)/r),0),u=Array(s),f=0;f<s;f++,e+=r)u[f]=e;return u}function H9(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],r=e[0][1],s=e[0][2],u=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<r&&(r=f[1]),f[2]>s&&(s=f[2]),f[3]>u&&(u=f[3])}),[t,r,s,u]}}function W9(e){try{return Nu(e),!0}catch{return!1}}function wx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Ex(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function Z9(e){var t=Fy([e[0],e[1]],32),r=Fy([e[2],e[3]],32),s=[t[0],t[1],r[0],r[1]],u=X9(s);if(u===0)return[0,0,0];var f=s[0]>>>32-u,g=s[1]>>>32-u;return[f,g,u]}function X9(e){for(var t=28,r=0;r<t;r++){var s=1<<32-(r+1);if((e[0]&s)!==(e[2]&s)||(e[1]&s)!==(e[3]&s))return r}return t}var K9=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",initialResolution:w6,hash:F9,pointToTile:Fy,pointToTileFraction:E6,bboxToCenter:B9,lngLatToMeters:Um,metersToLngLat:By,metersToPixels:gx,lngLatToTile:S6,lngLatToGoogle:j9,metersToTile:D9,pixelsToMeters:jy,pixelsToTile:yx,tileToBBoxMeters:vx,tileToBBox:C6,googleToBBoxMeters:N9,googleToBBox:U9,tileToGoogle:T6,googleToTile:fd,googleToQuadkey:$9,tileToQuadkey:A6,quadkeyToTile:V9,quadkeyToGoogle:I6,bboxToMeters:G9,validateTile:Nu,wrapTile:P6,validateZoom:xx,validateLngLat:m0,resolution:_x,range:bx,maxBBox:H9,validTile:W9,latitude:wx,longitude:Ex,bboxToTile:Z9}),Y9=Vy(K9),g0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g0.read=function(e,t,r,s,u){var f,g,l=u*8-s-1,_=(1<<l)-1,C=_>>1,S=-7,E=r?u-1:0,T=r?-1:1,F=e[t+E];for(E+=T,f=F&(1<<-S)-1,F>>=-S,S+=l;S>0;f=f*256+e[t+E],E+=T,S-=8);for(g=f&(1<<-S)-1,f>>=-S,S+=s;S>0;g=g*256+e[t+E],E+=T,S-=8);if(f===0)f=1-C;else{if(f===_)return g?NaN:(F?-1:1)*(1/0);g=g+Math.pow(2,s),f=f-C}return(F?-1:1)*g*Math.pow(2,f-s)};g0.write=function(e,t,r,s,u,f){var g,l,_,C=f*8-u-1,S=(1<<C)-1,E=S>>1,T=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=s?0:f-1,X=s?1:-1,Z=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,g=S):(g=Math.floor(Math.log(t)/Math.LN2),t*(_=Math.pow(2,-g))<1&&(g--,_*=2),g+E>=1?t+=T/_:t+=T*Math.pow(2,1-E),t*_>=2&&(g++,_/=2),g+E>=S?(l=0,g=S):g+E>=1?(l=(t*_-1)*Math.pow(2,u),g=g+E):(l=t*Math.pow(2,E-1)*Math.pow(2,u),g=0));u>=8;e[r+F]=l&255,F+=X,l/=256,u-=8);for(g=g<<u|l,C+=u;C>0;e[r+F]=g&255,F+=X,g/=256,C-=8);e[r+F-X]|=Z*128};var q9=qn,pp=g0;function qn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0;qn.Fixed64=1;qn.Bytes=2;qn.Fixed32=5;var Dy=(1<<16)*(1<<16),gw=1/Dy,J9=12,k6=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");qn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var s=this.readVarint(),u=s>>3,f=this.pos;this.type=s&7,e(u,t,this),this.pos===f&&this.skip(s)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=mp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=vw(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=mp(this.buf,this.pos)+mp(this.buf,this.pos+4)*Dy;return this.pos+=8,e},readSFixed64:function(){var e=mp(this.buf,this.pos)+vw(this.buf,this.pos+4)*Dy;return this.pos+=8,e},readFloat:function(){var e=pp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=pp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,r,s;return s=t[this.pos++],r=s&127,s<128||(s=t[this.pos++],r|=(s&127)<<7,s<128)||(s=t[this.pos++],r|=(s&127)<<14,s<128)||(s=t[this.pos++],r|=(s&127)<<21,s<128)?r:(s=t[this.pos],r|=(s&15)<<28,Q9(r,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=J9&&k6?dP(this.buf,t,e):fP(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qn.Bytes)return e.push(this.readVarint(t));var r=Ss(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qn.Bytes)return e.push(this.readSVarint());var t=Ss(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qn.Bytes)return e.push(this.readBoolean());var t=Ss(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qn.Bytes)return e.push(this.readFloat());var t=Ss(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qn.Bytes)return e.push(this.readDouble());var t=Ss(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed32());var t=Ss(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed32());var t=Ss(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed64());var t=Ss(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed64());var t=Ss(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===qn.Varint)for(;this.buf[this.pos++]>127;);else if(t===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qn.Fixed32)this.pos+=4;else if(t===qn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Cc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Cc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Cc(this.buf,e&-1,this.pos),Cc(this.buf,Math.floor(e*gw),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Cc(this.buf,e&-1,this.pos),Cc(this.buf,Math.floor(e*gw),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){eP(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=pP(this.buf,e,this.pos);var r=this.pos-t;r>=128&&yw(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),pp.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),pp.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var s=this.pos-r;s>=128&&yw(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeMessage:function(e,t,r){this.writeTag(e,qn.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,rP,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,iP,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,sP,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,oP,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,aP,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,lP,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,uP,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,cP,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,hP,t)},writeBytesField:function(e,t){this.writeTag(e,qn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function Q9(e,t,r){var s=r.buf,u,f;if(f=s[r.pos++],u=(f&112)>>4,f<128||(f=s[r.pos++],u|=(f&127)<<3,f<128)||(f=s[r.pos++],u|=(f&127)<<10,f<128)||(f=s[r.pos++],u|=(f&127)<<17,f<128)||(f=s[r.pos++],u|=(f&127)<<24,f<128)||(f=s[r.pos++],u|=(f&1)<<31,f<128))return Sc(e,u,t);throw new Error("Expected varint not more than 10 bytes")}function Ss(e){return e.type===qn.Bytes?e.readVarint()+e.pos:e.pos+1}function Sc(e,t,r){return r?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function eP(e,t){var r,s;if(e>=0?(r=e%4294967296|0,s=e/4294967296|0):(r=~(-e%4294967296),s=~(-e/4294967296),r^4294967295?r=r+1|0:(r=0,s=s+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),tP(r,s,t),nP(s,t)}function tP(e,t,r){r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos]=e&127}function nP(e,t){var r=(e&7)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function yw(e,t,r){var s=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));r.realloc(s);for(var u=r.pos-1;u>=e;u--)r.buf[u+s]=r.buf[u]}function rP(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function iP(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function oP(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function aP(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function sP(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function lP(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function uP(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function cP(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function hP(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function mp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Cc(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function vw(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function fP(e,t,r){for(var s="",u=t;u<r;){var f=e[u],g=null,l=f>239?4:f>223?3:f>191?2:1;if(u+l>r)break;var _,C,S;l===1?f<128&&(g=f):l===2?(_=e[u+1],(_&192)===128&&(g=(f&31)<<6|_&63,g<=127&&(g=null))):l===3?(_=e[u+1],C=e[u+2],(_&192)===128&&(C&192)===128&&(g=(f&15)<<12|(_&63)<<6|C&63,(g<=2047||g>=55296&&g<=57343)&&(g=null))):l===4&&(_=e[u+1],C=e[u+2],S=e[u+3],(_&192)===128&&(C&192)===128&&(S&192)===128&&(g=(f&15)<<18|(_&63)<<12|(C&63)<<6|S&63,(g<=65535||g>=1114112)&&(g=null))),g===null?(g=65533,l=1):g>65535&&(g-=65536,s+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023),s+=String.fromCharCode(g),u+=l}return s}function dP(e,t,r){return k6.decode(e.subarray(t,r))}function pP(e,t,r){for(var s=0,u,f;s<t.length;s++){if(u=t.charCodeAt(s),u>55295&&u<57344)if(f)if(u<56320){e[r++]=239,e[r++]=191,e[r++]=189,f=u;continue}else u=f-55296<<10|u-56320|65536,f=null;else{u>56319||s+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):f=u;continue}else f&&(e[r++]=239,e[r++]=191,e[r++]=189,f=null);u<128?e[r++]=u:(u<2048?e[r++]=u>>6|192:(u<65536?e[r++]=u>>12|224:(e[r++]=u>>18|240,e[r++]=u>>12&63|128),e[r++]=u>>6&63|128),e[r++]=u&63|128)}return r}var Sx={exports:{}},M6=function(t,r){return function(){for(var u=new Array(arguments.length),f=0;f<u.length;f++)u[f]=arguments[f];return t.apply(r,u)}},mP=M6,Uu=Object.prototype.toString;function Cx(e){return Uu.call(e)==="[object Array]"}function Ny(e){return typeof e=="undefined"}function gP(e){return e!==null&&!Ny(e)&&e.constructor!==null&&!Ny(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function yP(e){return Uu.call(e)==="[object ArrayBuffer]"}function vP(e){return typeof FormData!="undefined"&&e instanceof FormData}function xP(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function _P(e){return typeof e=="string"}function bP(e){return typeof e=="number"}function z6(e){return e!==null&&typeof e=="object"}function Bp(e){if(Uu.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function wP(e){return Uu.call(e)==="[object Date]"}function EP(e){return Uu.call(e)==="[object File]"}function SP(e){return Uu.call(e)==="[object Blob]"}function L6(e){return Uu.call(e)==="[object Function]"}function CP(e){return z6(e)&&L6(e.pipe)}function TP(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function AP(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function IP(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Tx(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),Cx(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function Uy(){var e={};function t(u,f){Bp(e[f])&&Bp(u)?e[f]=Uy(e[f],u):Bp(u)?e[f]=Uy({},u):Cx(u)?e[f]=u.slice():e[f]=u}for(var r=0,s=arguments.length;r<s;r++)Tx(arguments[r],t);return e}function PP(e,t,r){return Tx(t,function(u,f){r&&typeof u=="function"?e[f]=mP(u,r):e[f]=u}),e}function kP(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var ko={isArray:Cx,isArrayBuffer:yP,isBuffer:gP,isFormData:vP,isArrayBufferView:xP,isString:_P,isNumber:bP,isObject:z6,isPlainObject:Bp,isUndefined:Ny,isDate:wP,isFile:EP,isBlob:SP,isFunction:L6,isStream:CP,isURLSearchParams:TP,isStandardBrowserEnv:IP,forEach:Tx,merge:Uy,extend:PP,trim:AP,stripBOM:kP},Tc=ko;function xw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var O6=function(t,r,s){if(!r)return t;var u;if(s)u=s(r);else if(Tc.isURLSearchParams(r))u=r.toString();else{var f=[];Tc.forEach(r,function(_,C){_===null||typeof _=="undefined"||(Tc.isArray(_)?C=C+"[]":_=[_],Tc.forEach(_,function(E){Tc.isDate(E)?E=E.toISOString():Tc.isObject(E)&&(E=JSON.stringify(E)),f.push(xw(C)+"="+xw(E))}))}),u=f.join("&")}if(u){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t},MP=ko;function y0(){this.handlers=[]}y0.prototype.use=function(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};y0.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};y0.prototype.forEach=function(t){MP.forEach(this.handlers,function(s){s!==null&&t(s)})};var zP=y0,LP=ko,OP=function(t,r){LP.forEach(t,function(u,f){f!==r&&f.toUpperCase()===r.toUpperCase()&&(t[r]=u,delete t[f])})},R6=function(t,r,s,u,f){return t.config=r,s&&(t.code=s),t.request=u,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},RP=R6,F6=function(t,r,s,u,f){var g=new Error(t);return RP(g,r,s,u,f)},FP=F6,BP=function(t,r,s){var u=s.config.validateStatus;!s.status||!u||u(s.status)?t(s):r(FP("Request failed with status code "+s.status,s.config,null,s.request,s))},gp=ko,jP=gp.isStandardBrowserEnv()?function(){return{write:function(r,s,u,f,g,l){var _=[];_.push(r+"="+encodeURIComponent(s)),gp.isNumber(u)&&_.push("expires="+new Date(u).toGMTString()),gp.isString(f)&&_.push("path="+f),gp.isString(g)&&_.push("domain="+g),l===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),DP=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},NP=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},UP=DP,$P=NP,VP=function(t,r){return t&&!UP(r)?$P(t,r):r},Yg=ko,GP=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],HP=function(t){var r={},s,u,f;return t&&Yg.forEach(t.split(`
`),function(l){if(f=l.indexOf(":"),s=Yg.trim(l.substr(0,f)).toLowerCase(),u=Yg.trim(l.substr(f+1)),s){if(r[s]&&GP.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([u]):r[s]=r[s]?r[s]+", "+u:u}}),r},_w=ko,WP=_w.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function u(f){var g=f;return t&&(r.setAttribute("href",g),g=r.href),r.setAttribute("href",g),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=u(window.location.href),function(g){var l=_w.isString(g)?u(g):g;return l.protocol===s.protocol&&l.host===s.host}}():function(){return function(){return!0}}(),yp=ko,ZP=BP,XP=jP,KP=O6,YP=VP,qP=HP,JP=WP,qg=F6,bw=function(t){return new Promise(function(s,u){var f=t.data,g=t.headers,l=t.responseType;yp.isFormData(f)&&delete g["Content-Type"];var _=new XMLHttpRequest;if(t.auth){var C=t.auth.username||"",S=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";g.Authorization="Basic "+btoa(C+":"+S)}var E=YP(t.baseURL,t.url);_.open(t.method.toUpperCase(),KP(E,t.params,t.paramsSerializer),!0),_.timeout=t.timeout;function T(){if(!!_){var X="getAllResponseHeaders"in _?qP(_.getAllResponseHeaders()):null,Z=!l||l==="text"||l==="json"?_.responseText:_.response,ue={data:Z,status:_.status,statusText:_.statusText,headers:X,config:t,request:_};ZP(s,u,ue),_=null}}if("onloadend"in _?_.onloadend=T:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(T)},_.onabort=function(){!_||(u(qg("Request aborted",t,"ECONNABORTED",_)),_=null)},_.onerror=function(){u(qg("Network Error",t,null,_)),_=null},_.ontimeout=function(){var Z="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(Z=t.timeoutErrorMessage),u(qg(Z,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},yp.isStandardBrowserEnv()){var F=(t.withCredentials||JP(E))&&t.xsrfCookieName?XP.read(t.xsrfCookieName):void 0;F&&(g[t.xsrfHeaderName]=F)}"setRequestHeader"in _&&yp.forEach(g,function(Z,ue){typeof f=="undefined"&&ue.toLowerCase()==="content-type"?delete g[ue]:_.setRequestHeader(ue,Z)}),yp.isUndefined(t.withCredentials)||(_.withCredentials=!!t.withCredentials),l&&l!=="json"&&(_.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&_.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(Z){!_||(_.abort(),u(Z),_=null)}),f||(f=null),_.send(f)})},vi=ko,ww=OP,QP=R6,ek={"Content-Type":"application/x-www-form-urlencoded"};function Ew(e,t){!vi.isUndefined(e)&&vi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function tk(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=bw),e}function nk(e,t,r){if(vi.isString(e))try{return(t||JSON.parse)(e),vi.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}var v0={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:tk(),transformRequest:[function(t,r){return ww(r,"Accept"),ww(r,"Content-Type"),vi.isFormData(t)||vi.isArrayBuffer(t)||vi.isBuffer(t)||vi.isStream(t)||vi.isFile(t)||vi.isBlob(t)?t:vi.isArrayBufferView(t)?t.buffer:vi.isURLSearchParams(t)?(Ew(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):vi.isObject(t)||r&&r["Content-Type"]==="application/json"?(Ew(r,"application/json"),nk(t)):t}],transformResponse:[function(t){var r=this.transitional,s=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,f=!s&&this.responseType==="json";if(f||u&&vi.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(f)throw g.name==="SyntaxError"?QP(g,this,"E_JSON_PARSE"):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};v0.headers={common:{Accept:"application/json, text/plain, */*"}};vi.forEach(["delete","get","head"],function(t){v0.headers[t]={}});vi.forEach(["post","put","patch"],function(t){v0.headers[t]=vi.merge(ek)});var Ax=v0,rk=ko,ik=Ax,ok=function(t,r,s){var u=this||ik;return rk.forEach(s,function(g){t=g.call(u,t,r)}),t},B6=function(t){return!!(t&&t.__CANCEL__)},Sw=ko,Jg=ok,ak=B6,sk=Ax;function Qg(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var lk=function(t){Qg(t),t.headers=t.headers||{},t.data=Jg.call(t,t.data,t.headers,t.transformRequest),t.headers=Sw.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Sw.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var r=t.adapter||sk.adapter;return r(t).then(function(u){return Qg(t),u.data=Jg.call(t,u.data,u.headers,t.transformResponse),u},function(u){return ak(u)||(Qg(t),u&&u.response&&(u.response.data=Jg.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})},ki=ko,j6=function(t,r){r=r||{};var s={},u=["url","method","data"],f=["headers","auth","proxy","params"],g=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function _(T,F){return ki.isPlainObject(T)&&ki.isPlainObject(F)?ki.merge(T,F):ki.isPlainObject(F)?ki.merge({},F):ki.isArray(F)?F.slice():F}function C(T){ki.isUndefined(r[T])?ki.isUndefined(t[T])||(s[T]=_(void 0,t[T])):s[T]=_(t[T],r[T])}ki.forEach(u,function(F){ki.isUndefined(r[F])||(s[F]=_(void 0,r[F]))}),ki.forEach(f,C),ki.forEach(g,function(F){ki.isUndefined(r[F])?ki.isUndefined(t[F])||(s[F]=_(void 0,t[F])):s[F]=_(void 0,r[F])}),ki.forEach(l,function(F){F in r?s[F]=_(t[F],r[F]):F in t&&(s[F]=_(void 0,t[F]))});var S=u.concat(f).concat(g).concat(l),E=Object.keys(t).concat(Object.keys(r)).filter(function(F){return S.indexOf(F)===-1});return ki.forEach(E,C),s};const uk="axios",ck="0.21.4",hk="Promise based HTTP client for the browser and node.js",fk="index.js",dk={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},pk={type:"git",url:"https://github.com/axios/axios.git"},mk=["xhr","http","ajax","promise","node"],gk="Matt Zabriskie",yk="MIT",vk={url:"https://github.com/axios/axios/issues"},xk="https://axios-http.com",_k={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},bk={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},wk="dist/axios.min.js",Ek="dist/axios.min.js",Sk="./index.d.ts",Ck={"follow-redirects":"^1.14.0"},Tk=[{path:"./dist/axios.min.js",threshold:"5kB"}];var Ak={name:uk,version:ck,description:hk,main:fk,scripts:dk,repository:pk,keywords:mk,author:gk,license:yk,bugs:vk,homepage:xk,devDependencies:_k,browser:bk,jsdelivr:wk,unpkg:Ek,typings:Sk,dependencies:Ck,bundlesize:Tk},D6=Ak,Ix={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Ix[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});var Cw={},Ik=D6.version.split(".");function N6(e,t){for(var r=t?t.split("."):Ik,s=e.split("."),u=0;u<3;u++){if(r[u]>s[u])return!0;if(r[u]<s[u])return!1}return!1}Ix.transitional=function(t,r,s){var u=r&&N6(r);function f(g,l){return"[Axios v"+D6.version+"] Transitional option '"+g+"'"+l+(s?". "+s:"")}return function(g,l,_){if(t===!1)throw new Error(f(l," has been removed in "+r));return u&&!Cw[l]&&(Cw[l]=!0,console.warn(f(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(g,l,_):!0}};function Pk(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var s=Object.keys(e),u=s.length;u-- >0;){var f=s[u],g=t[f];if(g){var l=e[f],_=l===void 0||g(l,f,e);if(_!==!0)throw new TypeError("option "+f+" must be "+_);continue}if(r!==!0)throw Error("Unknown option "+f)}}var kk={isOlderVersion:N6,assertOptions:Pk,validators:Ix},U6=ko,Mk=O6,Tw=zP,Aw=lk,x0=j6,$6=kk,Ac=$6.validators;function dd(e){this.defaults=e,this.interceptors={request:new Tw,response:new Tw}}dd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=x0(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&$6.assertOptions(r,{silentJSONParsing:Ac.transitional(Ac.boolean,"1.0.0"),forcedJSONParsing:Ac.transitional(Ac.boolean,"1.0.0"),clarifyTimeoutError:Ac.transitional(Ac.boolean,"1.0.0")},!1);var s=[],u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(u=u&&T.synchronous,s.unshift(T.fulfilled,T.rejected))});var f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});var g;if(!u){var l=[Aw,void 0];for(Array.prototype.unshift.apply(l,s),l=l.concat(f),g=Promise.resolve(t);l.length;)g=g.then(l.shift(),l.shift());return g}for(var _=t;s.length;){var C=s.shift(),S=s.shift();try{_=C(_)}catch(E){S(E);break}}try{g=Aw(_)}catch(E){return Promise.reject(E)}for(;f.length;)g=g.then(f.shift(),f.shift());return g};dd.prototype.getUri=function(t){return t=x0(this.defaults,t),Mk(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};U6.forEach(["delete","get","head","options"],function(t){dd.prototype[t]=function(r,s){return this.request(x0(s||{},{method:t,url:r,data:(s||{}).data}))}});U6.forEach(["post","put","patch"],function(t){dd.prototype[t]=function(r,s,u){return this.request(x0(u||{},{method:t,url:r,data:s}))}});var zk=dd;function Px(e){this.message=e}Px.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Px.prototype.__CANCEL__=!0;var V6=Px,Lk=V6;function $m(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(u){t=u});var r=this;e(function(u){r.reason||(r.reason=new Lk(u),t(r.reason))})}$m.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};$m.source=function(){var t,r=new $m(function(u){t=u});return{token:r,cancel:t}};var Ok=$m,Rk=function(t){return function(s){return t.apply(null,s)}},Fk=function(t){return typeof t=="object"&&t.isAxiosError===!0},Iw=ko,Bk=M6,jp=zk,jk=j6,Dk=Ax;function G6(e){var t=new jp(e),r=Bk(jp.prototype.request,t);return Iw.extend(r,jp.prototype,t),Iw.extend(r,t),r}var Ia=G6(Dk);Ia.Axios=jp;Ia.create=function(t){return G6(jk(Ia.defaults,t))};Ia.Cancel=V6;Ia.CancelToken=Ok;Ia.isCancel=B6;Ia.all=function(t){return Promise.all(t)};Ia.spread=Rk;Ia.isAxiosError=Fk;Sx.exports=Ia;Sx.exports.default=Ia;var Nk=Sx.exports,Uk={},$k=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Uk}),Vk=Vy($k),_0={},Gk=eh;function eh(e,t){this.x=e,this.y=t}eh.prototype={clone:function(){return new eh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),s=t*this.x-r*this.y,u=r*this.x+t*this.y;return this.x=s,this.y=u,this},_rotateAround:function(e,t){var r=Math.cos(e),s=Math.sin(e),u=t.x+r*(this.x-t.x)-s*(this.y-t.y),f=t.y+s*(this.x-t.x)+r*(this.y-t.y);return this.x=u,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};eh.convert=function(e){return e instanceof eh?e:Array.isArray(e)?new eh(e[0],e[1]):e};var Hk=Gk,H6=fh;function fh(e,t,r,s,u){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=s,this._values=u,e.readFields(Wk,this,t)}function Wk(e,t,r){e==1?t.id=r.readVarint():e==2?Zk(r,t):e==3?t.type=r.readVarint():e==4&&(t._geometry=r.pos)}function Zk(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var s=t._keys[e.readVarint()],u=t._values[e.readVarint()];t.properties[s]=u}}fh.types=["Unknown","Point","LineString","Polygon"];fh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,s=0,u=0,f=0,g=[],l;e.pos<t;){if(s<=0){var _=e.readVarint();r=_&7,s=_>>3}if(s--,r===1||r===2)u+=e.readSVarint(),f+=e.readSVarint(),r===1&&(l&&g.push(l),l=[]),l.push(new Hk(u,f));else if(r===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+r)}return l&&g.push(l),g};fh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,s=0,u=0,f=0,g=1/0,l=-1/0,_=1/0,C=-1/0;e.pos<t;){if(s<=0){var S=e.readVarint();r=S&7,s=S>>3}if(s--,r===1||r===2)u+=e.readSVarint(),f+=e.readSVarint(),u<g&&(g=u),u>l&&(l=u),f<_&&(_=f),f>C&&(C=f);else if(r!==7)throw new Error("unknown command "+r)}return[g,_,l,C]};fh.prototype.toGeoJSON=function(e,t,r){var s=this.extent*Math.pow(2,r),u=this.extent*e,f=this.extent*t,g=this.loadGeometry(),l=fh.types[this.type],_,C;function S(F){for(var X=0;X<F.length;X++){var Z=F[X],ue=180-(Z.y+f)*360/s;F[X]=[(Z.x+u)*360/s-180,360/Math.PI*Math.atan(Math.exp(ue*Math.PI/180))-90]}}switch(this.type){case 1:var E=[];for(_=0;_<g.length;_++)E[_]=g[_][0];g=E,S(g);break;case 2:for(_=0;_<g.length;_++)S(g[_]);break;case 3:for(g=Xk(g),_=0;_<g.length;_++)for(C=0;C<g[_].length;C++)S(g[_][C]);break}g.length===1?g=g[0]:l="Multi"+l;var T={type:"Feature",geometry:{type:l,coordinates:g},properties:this.properties};return"id"in this&&(T.id=this.id),T};function Xk(e){var t=e.length;if(t<=1)return[e];for(var r=[],s,u,f=0;f<t;f++){var g=Kk(e[f]);g!==0&&(u===void 0&&(u=g<0),u===g<0?(s&&r.push(s),s=[e[f]]):s.push(e[f]))}return s&&r.push(s),r}function Kk(e){for(var t=0,r=0,s=e.length,u=s-1,f,g;r<s;u=r++)f=e[r],g=e[u],t+=(g.x-f.x)*(f.y+g.y);return t}var Yk=H6,W6=Z6;function Z6(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(qk,this,t),this.length=this._features.length}function qk(e,t,r){e===15?t.version=r.readVarint():e===1?t.name=r.readString():e===5?t.extent=r.readVarint():e===2?t._features.push(r.pos):e===3?t._keys.push(r.readString()):e===4&&t._values.push(Jk(r))}function Jk(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var s=e.readVarint()>>3;t=s===1?e.readString():s===2?e.readFloat():s===3?e.readDouble():s===4?e.readVarint64():s===5?e.readVarint():s===6?e.readSVarint():s===7?e.readBoolean():null}return t}Z6.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Yk(this._pbf,t,this.extent,this._keys,this._values)};var Qk=W6,eM=tM;function tM(e,t){this.layers=e.readFields(nM,{},t)}function nM(e,t,r){if(e===3){var s=new Qk(r,r.readVarint()+r.pos);s.length&&(t[s.name]=s)}}_0.VectorTile=eM;_0.VectorTileFeature=H6;_0.VectorTileLayer=W6;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=O9,r=Y9,s=q9,u=Nk,f=Vk,g=_0;function l(V){return V&&typeof V=="object"&&"default"in V?V:{default:V}}var _=l(s),C=l(u),S=l(f),E=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof pl!="undefined"?pl:typeof self!="undefined"?self:{};function T(V){var B={exports:{}};return V(B,B.exports),B.exports}var F=T(function(V,B){(function(G,j){V.exports=j(C.default)})(E,function(ae){return function(G){var j={};function w(k){if(j[k])return j[k].exports;var U=j[k]={i:k,l:!1,exports:{}};return G[k].call(U.exports,U,U.exports,w),U.l=!0,U.exports}return w.m=G,w.c=j,w.d=function(k,U,K){w.o(k,U)||Object.defineProperty(k,U,{enumerable:!0,get:K})},w.r=function(k){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},w.t=function(k,U){if(U&1&&(k=w(k)),U&8||U&4&&typeof k=="object"&&k&&k.__esModule)return k;var K=Object.create(null);if(w.r(K),Object.defineProperty(K,"default",{enumerable:!0,value:k}),U&2&&typeof k!="string")for(var Y in k)w.d(K,Y,function(de){return k[de]}.bind(null,Y));return K},w.n=function(k){var U=k&&k.__esModule?function(){return k.default}:function(){return k};return w.d(U,"a",U),U},w.o=function(k,U){return Object.prototype.hasOwnProperty.call(k,U)},w.p="",w(w.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(G,j,w){w.r(j),w.d(j,"CacheControl",function(){return _e}),w.d(j,"parse",function(){return Be}),w.d(j,"format",function(){return Ie}),w("./node_modules/core-js/modules/es6.array.from.js"),w("./node_modules/core-js/modules/es6.function.name.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/core-js/modules/web.dom.iterable.js"),w("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.regexp.split.js"),w("./node_modules/core-js/modules/es6.number.is-finite.js");function k(Pe,$e){return ve(Pe)||de(Pe,$e)||K(Pe,$e)||U()}function U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(Pe,$e){if(!!Pe){if(typeof Pe=="string")return Y(Pe,$e);var Ne=Object.prototype.toString.call(Pe).slice(8,-1);if(Ne==="Object"&&Pe.constructor&&(Ne=Pe.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Pe);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return Y(Pe,$e)}}function Y(Pe,$e){($e==null||$e>Pe.length)&&($e=Pe.length);for(var Ne=0,qe=new Array($e);Ne<$e;Ne++)qe[Ne]=Pe[Ne];return qe}function de(Pe,$e){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(Pe)))){var Ne=[],qe=!0,st=!1,yt=void 0;try{for(var Pt=Pe[Symbol.iterator](),ht;!(qe=(ht=Pt.next()).done)&&(Ne.push(ht.value),!($e&&Ne.length===$e));qe=!0);}catch(Et){st=!0,yt=Et}finally{try{!qe&&Pt.return!=null&&Pt.return()}finally{if(st)throw yt}}return Ne}}function ve(Pe){if(Array.isArray(Pe))return Pe}function be(Pe,$e){if(!(Pe instanceof $e))throw new TypeError("Cannot call a class as a function")}function ee(Pe,$e){for(var Ne=0;Ne<$e.length;Ne++){var qe=$e[Ne];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(Pe,qe.key,qe)}}function ie(Pe,$e,Ne){return $e&&ee(Pe.prototype,$e),Ne&&ee(Pe,Ne),Pe}var ne=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,te={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function he(Pe){return Pe===null}function xe(Pe){if(!Pe)return null;var $e=parseInt(Pe,10);return!Number.isFinite($e)||$e<0?null:$e}var _e=function(){function Pe(){be(this,Pe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ie(Pe,[{key:"parse",value:function(Ne){if(!Ne||Ne.length===0)return this;var qe={},st=Ne.match(ne)||[];return Array.prototype.forEach.call(st,function(yt){var Pt=yt.split("=",2),ht=k(Pt,1),Et=ht[0],Nt=null;Pt.length>1&&(Nt=Pt[1].trim()),qe[Et.toLowerCase()]=Nt}),this.maxAge=xe(qe[te.maxAge]),this.sharedMaxAge=xe(qe[te.sharedMaxAge]),this.maxStale=he(qe[te.maxStale]),this.maxStaleDuration=xe(qe[te.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=xe(qe[te.minFresh]),this.immutable=he(qe[te.immutable]),this.mustRevalidate=he(qe[te.mustRevalidate]),this.noCache=he(qe[te.noCache]),this.noStore=he(qe[te.noStore]),this.noTransform=he(qe[te.noTransform]),this.onlyIfCached=he(qe[te.onlyIfCached]),this.private=he(qe[te.private]),this.proxyRevalidate=he(qe[te.proxyRevalidate]),this.public=he(qe[te.public]),this}},{key:"format",value:function(){var Ne=[];return this.maxAge&&Ne.push("".concat(te.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ne.push("".concat(te.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ne.push("".concat(te.maxStale,"=").concat(this.maxStaleDuration)):Ne.push(te.maxStale)),this.minFresh&&Ne.push("".concat(te.minFresh,"=").concat(this.minFresh)),this.immutable&&Ne.push(te.immutable),this.mustRevalidate&&Ne.push(te.mustRevalidate),this.noCache&&Ne.push(te.noCache),this.noStore&&Ne.push(te.noStore),this.noTransform&&Ne.push(te.noTransform),this.onlyIfCached&&Ne.push(te.onlyIfCached),this.private&&Ne.push(te.private),this.proxyRevalidate&&Ne.push(te.proxyRevalidate),this.public&&Ne.push(te.public),Ne.join(", ")}}]),Pe}();function Be(Pe){var $e=new _e;return $e.parse(Pe)}function Ie(Pe){return Pe instanceof _e?Pe.format():_e.prototype.format.call(Pe)}j.default={CacheControl:_e,parse:Be,format:Ie}},"./node_modules/charenc/charenc.js":function(G,j){var w={utf8:{stringToBytes:function(k){return w.bin.stringToBytes(unescape(encodeURIComponent(k)))},bytesToString:function(k){return decodeURIComponent(escape(w.bin.bytesToString(k)))}},bin:{stringToBytes:function(k){for(var U=[],K=0;K<k.length;K++)U.push(k.charCodeAt(K)&255);return U},bytesToString:function(k){for(var U=[],K=0;K<k.length;K++)U.push(String.fromCharCode(k[K]));return U.join("")}}};G.exports=w},"./node_modules/core-js/modules/_a-function.js":function(G,j){G.exports=function(w){if(typeof w!="function")throw TypeError(w+" is not a function!");return w}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_wks.js")("unscopables"),U=Array.prototype;U[k]==null&&w("./node_modules/core-js/modules/_hide.js")(U,k,{}),G.exports=function(K){U[k][K]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_string-at.js")(!0);G.exports=function(U,K,Y){return K+(Y?k(U,K).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_is-object.js");G.exports=function(U){if(!k(U))throw TypeError(U+" is not an object!");return U}},"./node_modules/core-js/modules/_array-includes.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_to-iobject.js"),U=w("./node_modules/core-js/modules/_to-length.js"),K=w("./node_modules/core-js/modules/_to-absolute-index.js");G.exports=function(Y){return function(de,ve,be){var ee=k(de),ie=U(ee.length),ne=K(be,ie),te;if(Y&&ve!=ve){for(;ie>ne;)if(te=ee[ne++],te!=te)return!0}else for(;ie>ne;ne++)if((Y||ne in ee)&&ee[ne]===ve)return Y||ne||0;return!Y&&-1}}},"./node_modules/core-js/modules/_bind.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_a-function.js"),U=w("./node_modules/core-js/modules/_is-object.js"),K=w("./node_modules/core-js/modules/_invoke.js"),Y=[].slice,de={},ve=function(be,ee,ie){if(!(ee in de)){for(var ne=[],te=0;te<ee;te++)ne[te]="a["+te+"]";de[ee]=Function("F,a","return new F("+ne.join(",")+")")}return de[ee](be,ie)};G.exports=Function.bind||function(ee){var ie=k(this),ne=Y.call(arguments,1),te=function(){var he=ne.concat(Y.call(arguments));return this instanceof te?ve(ie,he.length,he):K(ie,he,ee)};return U(ie.prototype)&&(te.prototype=ie.prototype),te}},"./node_modules/core-js/modules/_classof.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_cof.js"),U=w("./node_modules/core-js/modules/_wks.js")("toStringTag"),K=k(function(){return arguments}())=="Arguments",Y=function(de,ve){try{return de[ve]}catch{}};G.exports=function(de){var ve,be,ee;return de===void 0?"Undefined":de===null?"Null":typeof(be=Y(ve=Object(de),U))=="string"?be:K?k(ve):(ee=k(ve))=="Object"&&typeof ve.callee=="function"?"Arguments":ee}},"./node_modules/core-js/modules/_cof.js":function(G,j){var w={}.toString;G.exports=function(k){return w.call(k).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(G,j){var w=G.exports={version:"2.6.12"};typeof __e=="number"&&(__e=w)},"./node_modules/core-js/modules/_create-property.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-dp.js"),U=w("./node_modules/core-js/modules/_property-desc.js");G.exports=function(K,Y,de){Y in K?k.f(K,Y,U(0,de)):K[Y]=de}},"./node_modules/core-js/modules/_ctx.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_a-function.js");G.exports=function(U,K,Y){if(k(U),K===void 0)return U;switch(Y){case 1:return function(de){return U.call(K,de)};case 2:return function(de,ve){return U.call(K,de,ve)};case 3:return function(de,ve,be){return U.call(K,de,ve,be)}}return function(){return U.apply(K,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(G,j){G.exports=function(w){if(w==null)throw TypeError("Can't call method on  "+w);return w}},"./node_modules/core-js/modules/_descriptors.js":function(G,j,w){G.exports=!w("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_is-object.js"),U=w("./node_modules/core-js/modules/_global.js").document,K=k(U)&&k(U.createElement);G.exports=function(Y){return K?U.createElement(Y):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(G,j){G.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-keys.js"),U=w("./node_modules/core-js/modules/_object-gops.js"),K=w("./node_modules/core-js/modules/_object-pie.js");G.exports=function(Y){var de=k(Y),ve=U.f;if(ve)for(var be=ve(Y),ee=K.f,ie=0,ne;be.length>ie;)ee.call(Y,ne=be[ie++])&&de.push(ne);return de}},"./node_modules/core-js/modules/_export.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_global.js"),U=w("./node_modules/core-js/modules/_core.js"),K=w("./node_modules/core-js/modules/_hide.js"),Y=w("./node_modules/core-js/modules/_redefine.js"),de=w("./node_modules/core-js/modules/_ctx.js"),ve="prototype",be=function(ee,ie,ne){var te=ee&be.F,he=ee&be.G,xe=ee&be.S,_e=ee&be.P,Be=ee&be.B,Ie=he?k:xe?k[ie]||(k[ie]={}):(k[ie]||{})[ve],Pe=he?U:U[ie]||(U[ie]={}),$e=Pe[ve]||(Pe[ve]={}),Ne,qe,st,yt;he&&(ne=ie);for(Ne in ne)qe=!te&&Ie&&Ie[Ne]!==void 0,st=(qe?Ie:ne)[Ne],yt=Be&&qe?de(st,k):_e&&typeof st=="function"?de(Function.call,st):st,Ie&&Y(Ie,Ne,st,ee&be.U),Pe[Ne]!=st&&K(Pe,Ne,yt),_e&&$e[Ne]!=st&&($e[Ne]=st)};k.core=U,be.F=1,be.G=2,be.S=4,be.P=8,be.B=16,be.W=32,be.U=64,be.R=128,G.exports=be},"./node_modules/core-js/modules/_fails-is-regexp.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_wks.js")("match");G.exports=function(U){var K=/./;try{"/./"[U](K)}catch{try{return K[k]=!1,!"/./"[U](K)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(G,j){G.exports=function(w){try{return!!w()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(G,j,w){w("./node_modules/core-js/modules/es6.regexp.exec.js");var k=w("./node_modules/core-js/modules/_redefine.js"),U=w("./node_modules/core-js/modules/_hide.js"),K=w("./node_modules/core-js/modules/_fails.js"),Y=w("./node_modules/core-js/modules/_defined.js"),de=w("./node_modules/core-js/modules/_wks.js"),ve=w("./node_modules/core-js/modules/_regexp-exec.js"),be=de("species"),ee=!K(function(){var ne=/./;return ne.exec=function(){var te=[];return te.groups={a:"7"},te},"".replace(ne,"$<a>")!=="7"}),ie=function(){var ne=/(?:)/,te=ne.exec;ne.exec=function(){return te.apply(this,arguments)};var he="ab".split(ne);return he.length===2&&he[0]==="a"&&he[1]==="b"}();G.exports=function(ne,te,he){var xe=de(ne),_e=!K(function(){var qe={};return qe[xe]=function(){return 7},""[ne](qe)!=7}),Be=_e?!K(function(){var qe=!1,st=/a/;return st.exec=function(){return qe=!0,null},ne==="split"&&(st.constructor={},st.constructor[be]=function(){return st}),st[xe](""),!qe}):void 0;if(!_e||!Be||ne==="replace"&&!ee||ne==="split"&&!ie){var Ie=/./[xe],Pe=he(Y,xe,""[ne],function(st,yt,Pt,ht,Et){return yt.exec===ve?_e&&!Et?{done:!0,value:Ie.call(yt,Pt,ht)}:{done:!0,value:st.call(Pt,yt,ht)}:{done:!1}}),$e=Pe[0],Ne=Pe[1];k(String.prototype,ne,$e),U(RegExp.prototype,xe,te==2?function(qe,st){return Ne.call(qe,this,st)}:function(qe){return Ne.call(qe,this)})}}},"./node_modules/core-js/modules/_flags.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_an-object.js");G.exports=function(){var U=k(this),K="";return U.global&&(K+="g"),U.ignoreCase&&(K+="i"),U.multiline&&(K+="m"),U.unicode&&(K+="u"),U.sticky&&(K+="y"),K}},"./node_modules/core-js/modules/_function-to-string.js":function(G,j,w){G.exports=w("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(G,j){var w=G.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=w)},"./node_modules/core-js/modules/_has.js":function(G,j){var w={}.hasOwnProperty;G.exports=function(k,U){return w.call(k,U)}},"./node_modules/core-js/modules/_hide.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-dp.js"),U=w("./node_modules/core-js/modules/_property-desc.js");G.exports=w("./node_modules/core-js/modules/_descriptors.js")?function(K,Y,de){return k.f(K,Y,U(1,de))}:function(K,Y,de){return K[Y]=de,K}},"./node_modules/core-js/modules/_html.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_global.js").document;G.exports=k&&k.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(G,j,w){G.exports=!w("./node_modules/core-js/modules/_descriptors.js")&&!w("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(w("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(G,j){G.exports=function(w,k,U){var K=U===void 0;switch(k.length){case 0:return K?w():w.call(U);case 1:return K?w(k[0]):w.call(U,k[0]);case 2:return K?w(k[0],k[1]):w.call(U,k[0],k[1]);case 3:return K?w(k[0],k[1],k[2]):w.call(U,k[0],k[1],k[2]);case 4:return K?w(k[0],k[1],k[2],k[3]):w.call(U,k[0],k[1],k[2],k[3])}return w.apply(U,k)}},"./node_modules/core-js/modules/_iobject.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_cof.js");G.exports=Object("z").propertyIsEnumerable(0)?Object:function(U){return k(U)=="String"?U.split(""):Object(U)}},"./node_modules/core-js/modules/_is-array-iter.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_iterators.js"),U=w("./node_modules/core-js/modules/_wks.js")("iterator"),K=Array.prototype;G.exports=function(Y){return Y!==void 0&&(k.Array===Y||K[U]===Y)}},"./node_modules/core-js/modules/_is-array.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_cof.js");G.exports=Array.isArray||function(K){return k(K)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(G,j){G.exports=function(w){return typeof w=="object"?w!==null:typeof w=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_is-object.js"),U=w("./node_modules/core-js/modules/_cof.js"),K=w("./node_modules/core-js/modules/_wks.js")("match");G.exports=function(Y){var de;return k(Y)&&((de=Y[K])!==void 0?!!de:U(Y)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_an-object.js");G.exports=function(U,K,Y,de){try{return de?K(k(Y)[0],Y[1]):K(Y)}catch(be){var ve=U.return;throw ve!==void 0&&k(ve.call(U)),be}}},"./node_modules/core-js/modules/_iter-create.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-create.js"),U=w("./node_modules/core-js/modules/_property-desc.js"),K=w("./node_modules/core-js/modules/_set-to-string-tag.js"),Y={};w("./node_modules/core-js/modules/_hide.js")(Y,w("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),G.exports=function(de,ve,be){de.prototype=k(Y,{next:U(1,be)}),K(de,ve+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_library.js"),U=w("./node_modules/core-js/modules/_export.js"),K=w("./node_modules/core-js/modules/_redefine.js"),Y=w("./node_modules/core-js/modules/_hide.js"),de=w("./node_modules/core-js/modules/_iterators.js"),ve=w("./node_modules/core-js/modules/_iter-create.js"),be=w("./node_modules/core-js/modules/_set-to-string-tag.js"),ee=w("./node_modules/core-js/modules/_object-gpo.js"),ie=w("./node_modules/core-js/modules/_wks.js")("iterator"),ne=!([].keys&&"next"in[].keys()),te="@@iterator",he="keys",xe="values",_e=function(){return this};G.exports=function(Be,Ie,Pe,$e,Ne,qe,st){ve(Pe,Ie,$e);var yt=function(R){if(!ne&&R in Nt)return Nt[R];switch(R){case he:return function(){return new Pe(this,R)};case xe:return function(){return new Pe(this,R)}}return function(){return new Pe(this,R)}},Pt=Ie+" Iterator",ht=Ne==xe,Et=!1,Nt=Be.prototype,Bt=Nt[ie]||Nt[te]||Ne&&Nt[Ne],cn=Bt||yt(Ne),Tn=Ne?ht?yt("entries"):cn:void 0,wn=Ie=="Array"&&Nt.entries||Bt,on,En,Ee;if(wn&&(Ee=ee(wn.call(new Be)),Ee!==Object.prototype&&Ee.next&&(be(Ee,Pt,!0),!k&&typeof Ee[ie]!="function"&&Y(Ee,ie,_e))),ht&&Bt&&Bt.name!==xe&&(Et=!0,cn=function(){return Bt.call(this)}),(!k||st)&&(ne||Et||!Nt[ie])&&Y(Nt,ie,cn),de[Ie]=cn,de[Pt]=_e,Ne)if(on={values:ht?cn:yt(xe),keys:qe?cn:yt(he),entries:Tn},st)for(En in on)En in Nt||K(Nt,En,on[En]);else U(U.P+U.F*(ne||Et),Ie,on);return on}},"./node_modules/core-js/modules/_iter-detect.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_wks.js")("iterator"),U=!1;try{var K=[7][k]();K.return=function(){U=!0},Array.from(K,function(){throw 2})}catch{}G.exports=function(Y,de){if(!de&&!U)return!1;var ve=!1;try{var be=[7],ee=be[k]();ee.next=function(){return{done:ve=!0}},be[k]=function(){return ee},Y(be)}catch{}return ve}},"./node_modules/core-js/modules/_iter-step.js":function(G,j){G.exports=function(w,k){return{value:k,done:!!w}}},"./node_modules/core-js/modules/_iterators.js":function(G,j){G.exports={}},"./node_modules/core-js/modules/_library.js":function(G,j){G.exports=!1},"./node_modules/core-js/modules/_meta.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_uid.js")("meta"),U=w("./node_modules/core-js/modules/_is-object.js"),K=w("./node_modules/core-js/modules/_has.js"),Y=w("./node_modules/core-js/modules/_object-dp.js").f,de=0,ve=Object.isExtensible||function(){return!0},be=!w("./node_modules/core-js/modules/_fails.js")(function(){return ve(Object.preventExtensions({}))}),ee=function(xe){Y(xe,k,{value:{i:"O"+ ++de,w:{}}})},ie=function(xe,_e){if(!U(xe))return typeof xe=="symbol"?xe:(typeof xe=="string"?"S":"P")+xe;if(!K(xe,k)){if(!ve(xe))return"F";if(!_e)return"E";ee(xe)}return xe[k].i},ne=function(xe,_e){if(!K(xe,k)){if(!ve(xe))return!0;if(!_e)return!1;ee(xe)}return xe[k].w},te=function(xe){return be&&he.NEED&&ve(xe)&&!K(xe,k)&&ee(xe),xe},he=G.exports={KEY:k,NEED:!1,fastKey:ie,getWeak:ne,onFreeze:te}},"./node_modules/core-js/modules/_object-create.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_an-object.js"),U=w("./node_modules/core-js/modules/_object-dps.js"),K=w("./node_modules/core-js/modules/_enum-bug-keys.js"),Y=w("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),de=function(){},ve="prototype",be=function(){var ee=w("./node_modules/core-js/modules/_dom-create.js")("iframe"),ie=K.length,ne="<",te=">",he;for(ee.style.display="none",w("./node_modules/core-js/modules/_html.js").appendChild(ee),ee.src="javascript:",he=ee.contentWindow.document,he.open(),he.write(ne+"script"+te+"document.F=Object"+ne+"/script"+te),he.close(),be=he.F;ie--;)delete be[ve][K[ie]];return be()};G.exports=Object.create||function(ie,ne){var te;return ie!==null?(de[ve]=k(ie),te=new de,de[ve]=null,te[Y]=ie):te=be(),ne===void 0?te:U(te,ne)}},"./node_modules/core-js/modules/_object-dp.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_an-object.js"),U=w("./node_modules/core-js/modules/_ie8-dom-define.js"),K=w("./node_modules/core-js/modules/_to-primitive.js"),Y=Object.defineProperty;j.f=w("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ve,be,ee){if(k(ve),be=K(be,!0),k(ee),U)try{return Y(ve,be,ee)}catch{}if("get"in ee||"set"in ee)throw TypeError("Accessors not supported!");return"value"in ee&&(ve[be]=ee.value),ve}},"./node_modules/core-js/modules/_object-dps.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-dp.js"),U=w("./node_modules/core-js/modules/_an-object.js"),K=w("./node_modules/core-js/modules/_object-keys.js");G.exports=w("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(de,ve){U(de);for(var be=K(ve),ee=be.length,ie=0,ne;ee>ie;)k.f(de,ne=be[ie++],ve[ne]);return de}},"./node_modules/core-js/modules/_object-gopd.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-pie.js"),U=w("./node_modules/core-js/modules/_property-desc.js"),K=w("./node_modules/core-js/modules/_to-iobject.js"),Y=w("./node_modules/core-js/modules/_to-primitive.js"),de=w("./node_modules/core-js/modules/_has.js"),ve=w("./node_modules/core-js/modules/_ie8-dom-define.js"),be=Object.getOwnPropertyDescriptor;j.f=w("./node_modules/core-js/modules/_descriptors.js")?be:function(ie,ne){if(ie=K(ie),ne=Y(ne,!0),ve)try{return be(ie,ne)}catch{}if(de(ie,ne))return U(!k.f.call(ie,ne),ie[ne])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_to-iobject.js"),U=w("./node_modules/core-js/modules/_object-gopn.js").f,K={}.toString,Y=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],de=function(ve){try{return U(ve)}catch{return Y.slice()}};G.exports.f=function(be){return Y&&K.call(be)=="[object Window]"?de(be):U(k(be))}},"./node_modules/core-js/modules/_object-gopn.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-keys-internal.js"),U=w("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");j.f=Object.getOwnPropertyNames||function(Y){return k(Y,U)}},"./node_modules/core-js/modules/_object-gops.js":function(G,j){j.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_has.js"),U=w("./node_modules/core-js/modules/_to-object.js"),K=w("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),Y=Object.prototype;G.exports=Object.getPrototypeOf||function(de){return de=U(de),k(de,K)?de[K]:typeof de.constructor=="function"&&de instanceof de.constructor?de.constructor.prototype:de instanceof Object?Y:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_has.js"),U=w("./node_modules/core-js/modules/_to-iobject.js"),K=w("./node_modules/core-js/modules/_array-includes.js")(!1),Y=w("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");G.exports=function(de,ve){var be=U(de),ee=0,ie=[],ne;for(ne in be)ne!=Y&&k(be,ne)&&ie.push(ne);for(;ve.length>ee;)k(be,ne=ve[ee++])&&(~K(ie,ne)||ie.push(ne));return ie}},"./node_modules/core-js/modules/_object-keys.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-keys-internal.js"),U=w("./node_modules/core-js/modules/_enum-bug-keys.js");G.exports=Object.keys||function(Y){return k(Y,U)}},"./node_modules/core-js/modules/_object-pie.js":function(G,j){j.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-gopn.js"),U=w("./node_modules/core-js/modules/_object-gops.js"),K=w("./node_modules/core-js/modules/_an-object.js"),Y=w("./node_modules/core-js/modules/_global.js").Reflect;G.exports=Y&&Y.ownKeys||function(ve){var be=k.f(K(ve)),ee=U.f;return ee?be.concat(ee(ve)):be}},"./node_modules/core-js/modules/_property-desc.js":function(G,j){G.exports=function(w,k){return{enumerable:!(w&1),configurable:!(w&2),writable:!(w&4),value:k}}},"./node_modules/core-js/modules/_redefine.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_global.js"),U=w("./node_modules/core-js/modules/_hide.js"),K=w("./node_modules/core-js/modules/_has.js"),Y=w("./node_modules/core-js/modules/_uid.js")("src"),de=w("./node_modules/core-js/modules/_function-to-string.js"),ve="toString",be=(""+de).split(ve);w("./node_modules/core-js/modules/_core.js").inspectSource=function(ee){return de.call(ee)},(G.exports=function(ee,ie,ne,te){var he=typeof ne=="function";he&&(K(ne,"name")||U(ne,"name",ie)),ee[ie]!==ne&&(he&&(K(ne,Y)||U(ne,Y,ee[ie]?""+ee[ie]:be.join(String(ie)))),ee===k?ee[ie]=ne:te?ee[ie]?ee[ie]=ne:U(ee,ie,ne):(delete ee[ie],U(ee,ie,ne)))})(Function.prototype,ve,function(){return typeof this=="function"&&this[Y]||de.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_classof.js"),U=RegExp.prototype.exec;G.exports=function(K,Y){var de=K.exec;if(typeof de=="function"){var ve=de.call(K,Y);if(typeof ve!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ve}if(k(K)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return U.call(K,Y)}},"./node_modules/core-js/modules/_regexp-exec.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_flags.js"),U=RegExp.prototype.exec,K=String.prototype.replace,Y=U,de="lastIndex",ve=function(){var ie=/a/,ne=/b*/g;return U.call(ie,"a"),U.call(ne,"a"),ie[de]!==0||ne[de]!==0}(),be=/()??/.exec("")[1]!==void 0,ee=ve||be;ee&&(Y=function(ne){var te=this,he,xe,_e,Be;return be&&(xe=new RegExp("^"+te.source+"$(?!\\s)",k.call(te))),ve&&(he=te[de]),_e=U.call(te,ne),ve&&_e&&(te[de]=te.global?_e.index+_e[0].length:he),be&&_e&&_e.length>1&&K.call(_e[0],xe,function(){for(Be=1;Be<arguments.length-2;Be++)arguments[Be]===void 0&&(_e[Be]=void 0)}),_e}),G.exports=Y},"./node_modules/core-js/modules/_set-to-string-tag.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-dp.js").f,U=w("./node_modules/core-js/modules/_has.js"),K=w("./node_modules/core-js/modules/_wks.js")("toStringTag");G.exports=function(Y,de,ve){Y&&!U(Y=ve?Y:Y.prototype,K)&&k(Y,K,{configurable:!0,value:de})}},"./node_modules/core-js/modules/_shared-key.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_shared.js")("keys"),U=w("./node_modules/core-js/modules/_uid.js");G.exports=function(K){return k[K]||(k[K]=U(K))}},"./node_modules/core-js/modules/_shared.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_core.js"),U=w("./node_modules/core-js/modules/_global.js"),K="__core-js_shared__",Y=U[K]||(U[K]={});(G.exports=function(de,ve){return Y[de]||(Y[de]=ve!==void 0?ve:{})})("versions",[]).push({version:k.version,mode:w("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_an-object.js"),U=w("./node_modules/core-js/modules/_a-function.js"),K=w("./node_modules/core-js/modules/_wks.js")("species");G.exports=function(Y,de){var ve=k(Y).constructor,be;return ve===void 0||(be=k(ve)[K])==null?de:U(be)}},"./node_modules/core-js/modules/_string-at.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_to-integer.js"),U=w("./node_modules/core-js/modules/_defined.js");G.exports=function(K){return function(Y,de){var ve=String(U(Y)),be=k(de),ee=ve.length,ie,ne;return be<0||be>=ee?K?"":void 0:(ie=ve.charCodeAt(be),ie<55296||ie>56319||be+1===ee||(ne=ve.charCodeAt(be+1))<56320||ne>57343?K?ve.charAt(be):ie:K?ve.slice(be,be+2):(ie-55296<<10)+(ne-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_is-regexp.js"),U=w("./node_modules/core-js/modules/_defined.js");G.exports=function(K,Y,de){if(k(Y))throw TypeError("String#"+de+" doesn't accept regex!");return String(U(K))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_to-integer.js"),U=Math.max,K=Math.min;G.exports=function(Y,de){return Y=k(Y),Y<0?U(Y+de,0):K(Y,de)}},"./node_modules/core-js/modules/_to-integer.js":function(G,j){var w=Math.ceil,k=Math.floor;G.exports=function(U){return isNaN(U=+U)?0:(U>0?k:w)(U)}},"./node_modules/core-js/modules/_to-iobject.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_iobject.js"),U=w("./node_modules/core-js/modules/_defined.js");G.exports=function(K){return k(U(K))}},"./node_modules/core-js/modules/_to-length.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_to-integer.js"),U=Math.min;G.exports=function(K){return K>0?U(k(K),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_defined.js");G.exports=function(U){return Object(k(U))}},"./node_modules/core-js/modules/_to-primitive.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_is-object.js");G.exports=function(U,K){if(!k(U))return U;var Y,de;if(K&&typeof(Y=U.toString)=="function"&&!k(de=Y.call(U))||typeof(Y=U.valueOf)=="function"&&!k(de=Y.call(U))||!K&&typeof(Y=U.toString)=="function"&&!k(de=Y.call(U)))return de;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(G,j){var w=0,k=Math.random();G.exports=function(U){return"Symbol(".concat(U===void 0?"":U,")_",(++w+k).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_global.js"),U=w("./node_modules/core-js/modules/_core.js"),K=w("./node_modules/core-js/modules/_library.js"),Y=w("./node_modules/core-js/modules/_wks-ext.js"),de=w("./node_modules/core-js/modules/_object-dp.js").f;G.exports=function(ve){var be=U.Symbol||(U.Symbol=K?{}:k.Symbol||{});ve.charAt(0)!="_"&&!(ve in be)&&de(be,ve,{value:Y.f(ve)})}},"./node_modules/core-js/modules/_wks-ext.js":function(G,j,w){j.f=w("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_shared.js")("wks"),U=w("./node_modules/core-js/modules/_uid.js"),K=w("./node_modules/core-js/modules/_global.js").Symbol,Y=typeof K=="function",de=G.exports=function(ve){return k[ve]||(k[ve]=Y&&K[ve]||(Y?K:U)("Symbol."+ve))};de.store=k},"./node_modules/core-js/modules/core.get-iterator-method.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_classof.js"),U=w("./node_modules/core-js/modules/_wks.js")("iterator"),K=w("./node_modules/core-js/modules/_iterators.js");G.exports=w("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(Y){if(Y!=null)return Y[U]||Y["@@iterator"]||K[k(Y)]}},"./node_modules/core-js/modules/es6.array.from.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_ctx.js"),U=w("./node_modules/core-js/modules/_export.js"),K=w("./node_modules/core-js/modules/_to-object.js"),Y=w("./node_modules/core-js/modules/_iter-call.js"),de=w("./node_modules/core-js/modules/_is-array-iter.js"),ve=w("./node_modules/core-js/modules/_to-length.js"),be=w("./node_modules/core-js/modules/_create-property.js"),ee=w("./node_modules/core-js/modules/core.get-iterator-method.js");U(U.S+U.F*!w("./node_modules/core-js/modules/_iter-detect.js")(function(ie){Array.from(ie)}),"Array",{from:function(ne){var te=K(ne),he=typeof this=="function"?this:Array,xe=arguments.length,_e=xe>1?arguments[1]:void 0,Be=_e!==void 0,Ie=0,Pe=ee(te),$e,Ne,qe,st;if(Be&&(_e=k(_e,xe>2?arguments[2]:void 0,2)),Pe!=null&&!(he==Array&&de(Pe)))for(st=Pe.call(te),Ne=new he;!(qe=st.next()).done;Ie++)be(Ne,Ie,Be?Y(st,_e,[qe.value,Ie],!0):qe.value);else for($e=ve(te.length),Ne=new he($e);$e>Ie;Ie++)be(Ne,Ie,Be?_e(te[Ie],Ie):te[Ie]);return Ne.length=Ie,Ne}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_add-to-unscopables.js"),U=w("./node_modules/core-js/modules/_iter-step.js"),K=w("./node_modules/core-js/modules/_iterators.js"),Y=w("./node_modules/core-js/modules/_to-iobject.js");G.exports=w("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(de,ve){this._t=Y(de),this._i=0,this._k=ve},function(){var de=this._t,ve=this._k,be=this._i++;return!de||be>=de.length?(this._t=void 0,U(1)):ve=="keys"?U(0,be):ve=="values"?U(0,de[be]):U(0,[be,de[be]])},"values"),K.Arguments=K.Array,k("keys"),k("values"),k("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_export.js");k(k.P,"Function",{bind:w("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_object-dp.js").f,U=Function.prototype,K=/^\s*function ([^ (]*)/,Y="name";Y in U||w("./node_modules/core-js/modules/_descriptors.js")&&k(U,Y,{configurable:!0,get:function(){try{return(""+this).match(K)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_export.js"),U=w("./node_modules/core-js/modules/_global.js").isFinite;k(k.S,"Number",{isFinite:function(Y){return typeof Y=="number"&&U(Y)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_classof.js"),U={};U[w("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",U+""!="[object z]"&&w("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+k(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_regexp-exec.js");w("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:k!==/./.exec},{exec:k})},"./node_modules/core-js/modules/es6.regexp.split.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_is-regexp.js"),U=w("./node_modules/core-js/modules/_an-object.js"),K=w("./node_modules/core-js/modules/_species-constructor.js"),Y=w("./node_modules/core-js/modules/_advance-string-index.js"),de=w("./node_modules/core-js/modules/_to-length.js"),ve=w("./node_modules/core-js/modules/_regexp-exec-abstract.js"),be=w("./node_modules/core-js/modules/_regexp-exec.js"),ee=w("./node_modules/core-js/modules/_fails.js"),ie=Math.min,ne=[].push,te="split",he="length",xe="lastIndex",_e=4294967295,Be=!ee(function(){});w("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ie,Pe,$e,Ne){var qe;return"abbc"[te](/(b)*/)[1]=="c"||"test"[te](/(?:)/,-1)[he]!=4||"ab"[te](/(?:ab)*/)[he]!=2||"."[te](/(.?)(.?)/)[he]!=4||"."[te](/()()/)[he]>1||""[te](/.?/)[he]?qe=function(st,yt){var Pt=String(this);if(st===void 0&&yt===0)return[];if(!k(st))return $e.call(Pt,st,yt);for(var ht=[],Et=(st.ignoreCase?"i":"")+(st.multiline?"m":"")+(st.unicode?"u":"")+(st.sticky?"y":""),Nt=0,Bt=yt===void 0?_e:yt>>>0,cn=new RegExp(st.source,Et+"g"),Tn,wn,on;(Tn=be.call(cn,Pt))&&(wn=cn[xe],!(wn>Nt&&(ht.push(Pt.slice(Nt,Tn.index)),Tn[he]>1&&Tn.index<Pt[he]&&ne.apply(ht,Tn.slice(1)),on=Tn[0][he],Nt=wn,ht[he]>=Bt)));)cn[xe]===Tn.index&&cn[xe]++;return Nt===Pt[he]?(on||!cn.test(""))&&ht.push(""):ht.push(Pt.slice(Nt)),ht[he]>Bt?ht.slice(0,Bt):ht}:"0"[te](void 0,0)[he]?qe=function(st,yt){return st===void 0&&yt===0?[]:$e.call(this,st,yt)}:qe=$e,[function(yt,Pt){var ht=Ie(this),Et=yt==null?void 0:yt[Pe];return Et!==void 0?Et.call(yt,ht,Pt):qe.call(String(ht),yt,Pt)},function(st,yt){var Pt=Ne(qe,st,this,yt,qe!==$e);if(Pt.done)return Pt.value;var ht=U(st),Et=String(this),Nt=K(ht,RegExp),Bt=ht.unicode,cn=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(Be?"y":"g"),Tn=new Nt(Be?ht:"^(?:"+ht.source+")",cn),wn=yt===void 0?_e:yt>>>0;if(wn===0)return[];if(Et.length===0)return ve(Tn,Et)===null?[Et]:[];for(var on=0,En=0,Ee=[];En<Et.length;){Tn.lastIndex=Be?En:0;var R=ve(Tn,Be?Et:Et.slice(En)),O;if(R===null||(O=ie(de(Tn.lastIndex+(Be?0:En)),Et.length))===on)En=Y(Et,En,Bt);else{if(Ee.push(Et.slice(on,En)),Ee.length===wn)return Ee;for(var pe=1;pe<=R.length-1;pe++)if(Ee.push(R[pe]),Ee.length===wn)return Ee;En=on=O}}return Ee.push(Et.slice(on)),Ee}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_export.js"),U=w("./node_modules/core-js/modules/_string-context.js"),K="includes";k(k.P+k.F*w("./node_modules/core-js/modules/_fails-is-regexp.js")(K),"String",{includes:function(de){return!!~U(this,de,K).indexOf(de,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_global.js"),U=w("./node_modules/core-js/modules/_has.js"),K=w("./node_modules/core-js/modules/_descriptors.js"),Y=w("./node_modules/core-js/modules/_export.js"),de=w("./node_modules/core-js/modules/_redefine.js"),ve=w("./node_modules/core-js/modules/_meta.js").KEY,be=w("./node_modules/core-js/modules/_fails.js"),ee=w("./node_modules/core-js/modules/_shared.js"),ie=w("./node_modules/core-js/modules/_set-to-string-tag.js"),ne=w("./node_modules/core-js/modules/_uid.js"),te=w("./node_modules/core-js/modules/_wks.js"),he=w("./node_modules/core-js/modules/_wks-ext.js"),xe=w("./node_modules/core-js/modules/_wks-define.js"),_e=w("./node_modules/core-js/modules/_enum-keys.js"),Be=w("./node_modules/core-js/modules/_is-array.js"),Ie=w("./node_modules/core-js/modules/_an-object.js"),Pe=w("./node_modules/core-js/modules/_is-object.js"),$e=w("./node_modules/core-js/modules/_to-object.js"),Ne=w("./node_modules/core-js/modules/_to-iobject.js"),qe=w("./node_modules/core-js/modules/_to-primitive.js"),st=w("./node_modules/core-js/modules/_property-desc.js"),yt=w("./node_modules/core-js/modules/_object-create.js"),Pt=w("./node_modules/core-js/modules/_object-gopn-ext.js"),ht=w("./node_modules/core-js/modules/_object-gopd.js"),Et=w("./node_modules/core-js/modules/_object-gops.js"),Nt=w("./node_modules/core-js/modules/_object-dp.js"),Bt=w("./node_modules/core-js/modules/_object-keys.js"),cn=ht.f,Tn=Nt.f,wn=Pt.f,on=k.Symbol,En=k.JSON,Ee=En&&En.stringify,R="prototype",O=te("_hidden"),pe=te("toPrimitive"),ze={}.propertyIsEnumerable,Ye=ee("symbol-registry"),ot=ee("symbols"),se=ee("op-symbols"),A=Object[R],z=typeof on=="function"&&!!Et.f,we=k.QObject,je=!we||!we[R]||!we[R].findChild,Xe=K&&be(function(){return yt(Tn({},"a",{get:function(){return Tn(this,"a",{value:7}).a}})).a!=7})?function(Wt,Gt,Zt){var An=cn(A,Gt);An&&delete A[Gt],Tn(Wt,Gt,Zt),An&&Wt!==A&&Tn(A,Gt,An)}:Tn,Qe=function(Wt){var Gt=ot[Wt]=yt(on[R]);return Gt._k=Wt,Gt},Ht=z&&typeof on.iterator=="symbol"?function(Wt){return typeof Wt=="symbol"}:function(Wt){return Wt instanceof on},Sn=function(Gt,Zt,An){return Gt===A&&Sn(se,Zt,An),Ie(Gt),Zt=qe(Zt,!0),Ie(An),U(ot,Zt)?(An.enumerable?(U(Gt,O)&&Gt[O][Zt]&&(Gt[O][Zt]=!1),An=yt(An,{enumerable:st(0,!1)})):(U(Gt,O)||Tn(Gt,O,st(1,{})),Gt[O][Zt]=!0),Xe(Gt,Zt,An)):Tn(Gt,Zt,An)},fn=function(Gt,Zt){Ie(Gt);for(var An=_e(Zt=Ne(Zt)),zn=0,ir=An.length,Gr;ir>zn;)Sn(Gt,Gr=An[zn++],Zt[Gr]);return Gt},ft=function(Gt,Zt){return Zt===void 0?yt(Gt):fn(yt(Gt),Zt)},Mt=function(Gt){var Zt=ze.call(this,Gt=qe(Gt,!0));return this===A&&U(ot,Gt)&&!U(se,Gt)?!1:Zt||!U(this,Gt)||!U(ot,Gt)||U(this,O)&&this[O][Gt]?Zt:!0},un=function(Gt,Zt){if(Gt=Ne(Gt),Zt=qe(Zt,!0),!(Gt===A&&U(ot,Zt)&&!U(se,Zt))){var An=cn(Gt,Zt);return An&&U(ot,Zt)&&!(U(Gt,O)&&Gt[O][Zt])&&(An.enumerable=!0),An}},Ir=function(Gt){for(var Zt=wn(Ne(Gt)),An=[],zn=0,ir;Zt.length>zn;)!U(ot,ir=Zt[zn++])&&ir!=O&&ir!=ve&&An.push(ir);return An},Qr=function(Gt){for(var Zt=Gt===A,An=wn(Zt?se:Ne(Gt)),zn=[],ir=0,Gr;An.length>ir;)U(ot,Gr=An[ir++])&&(Zt?U(A,Gr):!0)&&zn.push(ot[Gr]);return zn};z||(on=function(){if(this instanceof on)throw TypeError("Symbol is not a constructor!");var Gt=ne(arguments.length>0?arguments[0]:void 0),Zt=function(An){this===A&&Zt.call(se,An),U(this,O)&&U(this[O],Gt)&&(this[O][Gt]=!1),Xe(this,Gt,st(1,An))};return K&&je&&Xe(A,Gt,{configurable:!0,set:Zt}),Qe(Gt)},de(on[R],"toString",function(){return this._k}),ht.f=un,Nt.f=Sn,w("./node_modules/core-js/modules/_object-gopn.js").f=Pt.f=Ir,w("./node_modules/core-js/modules/_object-pie.js").f=Mt,Et.f=Qr,K&&!w("./node_modules/core-js/modules/_library.js")&&de(A,"propertyIsEnumerable",Mt,!0),he.f=function(Wt){return Qe(te(Wt))}),Y(Y.G+Y.W+Y.F*!z,{Symbol:on});for(var hn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rr=0;hn.length>rr;)te(hn[rr++]);for(var bi=Bt(te.store),xr=0;bi.length>xr;)xe(bi[xr++]);Y(Y.S+Y.F*!z,"Symbol",{for:function(Wt){return U(Ye,Wt+="")?Ye[Wt]:Ye[Wt]=on(Wt)},keyFor:function(Gt){if(!Ht(Gt))throw TypeError(Gt+" is not a symbol!");for(var Zt in Ye)if(Ye[Zt]===Gt)return Zt},useSetter:function(){je=!0},useSimple:function(){je=!1}}),Y(Y.S+Y.F*!z,"Object",{create:ft,defineProperty:Sn,defineProperties:fn,getOwnPropertyDescriptor:un,getOwnPropertyNames:Ir,getOwnPropertySymbols:Qr});var Vr=be(function(){Et.f(1)});Y(Y.S+Y.F*Vr,"Object",{getOwnPropertySymbols:function(Gt){return Et.f($e(Gt))}}),En&&Y(Y.S+Y.F*(!z||be(function(){var Wt=on();return Ee([Wt])!="[null]"||Ee({a:Wt})!="{}"||Ee(Object(Wt))!="{}"})),"JSON",{stringify:function(Gt){for(var Zt=[Gt],An=1,zn,ir;arguments.length>An;)Zt.push(arguments[An++]);if(ir=zn=Zt[1],!(!Pe(zn)&&Gt===void 0||Ht(Gt)))return Be(zn)||(zn=function(Gr,hi){if(typeof ir=="function"&&(hi=ir.call(this,Gr,hi)),!Ht(hi))return hi}),Zt[1]=zn,Ee.apply(En,Zt)}}),on[R][pe]||w("./node_modules/core-js/modules/_hide.js")(on[R],pe,on[R].valueOf),ie(on,"Symbol"),ie(Math,"Math",!0),ie(k.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_export.js"),U=w("./node_modules/core-js/modules/_array-includes.js")(!0);k(k.P,"Array",{includes:function(Y){return U(this,Y,arguments.length>1?arguments[1]:void 0)}}),w("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(G,j,w){var k=w("./node_modules/core-js/modules/_export.js"),U=w("./node_modules/core-js/modules/_own-keys.js"),K=w("./node_modules/core-js/modules/_to-iobject.js"),Y=w("./node_modules/core-js/modules/_object-gopd.js"),de=w("./node_modules/core-js/modules/_create-property.js");k(k.S,"Object",{getOwnPropertyDescriptors:function(be){for(var ee=K(be),ie=Y.f,ne=U(ee),te={},he=0,xe,_e;ne.length>he;)_e=ie(ee,xe=ne[he++]),_e!==void 0&&de(te,xe,_e);return te}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(G,j,w){w("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(G,j,w){for(var k=w("./node_modules/core-js/modules/es6.array.iterator.js"),U=w("./node_modules/core-js/modules/_object-keys.js"),K=w("./node_modules/core-js/modules/_redefine.js"),Y=w("./node_modules/core-js/modules/_global.js"),de=w("./node_modules/core-js/modules/_hide.js"),ve=w("./node_modules/core-js/modules/_iterators.js"),be=w("./node_modules/core-js/modules/_wks.js"),ee=be("iterator"),ie=be("toStringTag"),ne=ve.Array,te={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},he=U(te),xe=0;xe<he.length;xe++){var _e=he[xe],Be=te[_e],Ie=Y[_e],Pe=Ie&&Ie.prototype,$e;if(Pe&&(Pe[ee]||de(Pe,ee,ne),Pe[ie]||de(Pe,ie,_e),ve[_e]=ne,Be))for($e in k)Pe[$e]||K(Pe,$e,k[$e],!0)}},"./node_modules/crypt/crypt.js":function(G,j){(function(){var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k={rotl:function(U,K){return U<<K|U>>>32-K},rotr:function(U,K){return U<<32-K|U>>>K},endian:function(U){if(U.constructor==Number)return k.rotl(U,8)&16711935|k.rotl(U,24)&4278255360;for(var K=0;K<U.length;K++)U[K]=k.endian(U[K]);return U},randomBytes:function(U){for(var K=[];U>0;U--)K.push(Math.floor(Math.random()*256));return K},bytesToWords:function(U){for(var K=[],Y=0,de=0;Y<U.length;Y++,de+=8)K[de>>>5]|=U[Y]<<24-de%32;return K},wordsToBytes:function(U){for(var K=[],Y=0;Y<U.length*32;Y+=8)K.push(U[Y>>>5]>>>24-Y%32&255);return K},bytesToHex:function(U){for(var K=[],Y=0;Y<U.length;Y++)K.push((U[Y]>>>4).toString(16)),K.push((U[Y]&15).toString(16));return K.join("")},hexToBytes:function(U){for(var K=[],Y=0;Y<U.length;Y+=2)K.push(parseInt(U.substr(Y,2),16));return K},bytesToBase64:function(U){for(var K=[],Y=0;Y<U.length;Y+=3)for(var de=U[Y]<<16|U[Y+1]<<8|U[Y+2],ve=0;ve<4;ve++)Y*8+ve*6<=U.length*8?K.push(w.charAt(de>>>6*(3-ve)&63)):K.push("=");return K.join("")},base64ToBytes:function(U){U=U.replace(/[^A-Z0-9+\/]/ig,"");for(var K=[],Y=0,de=0;Y<U.length;de=++Y%4)de!=0&&K.push((w.indexOf(U.charAt(Y-1))&Math.pow(2,-2*de+8)-1)<<de*2|w.indexOf(U.charAt(Y))>>>6-de*2);return K}};G.exports=k})()},"./node_modules/is-buffer/index.js":function(G,j){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */G.exports=function(U){return U!=null&&(w(U)||k(U)||!!U._isBuffer)};function w(U){return!!U.constructor&&typeof U.constructor.isBuffer=="function"&&U.constructor.isBuffer(U)}function k(U){return typeof U.readFloatLE=="function"&&typeof U.slice=="function"&&w(U.slice(0,0))}},"./node_modules/md5/md5.js":function(G,j,w){(function(){var k=w("./node_modules/crypt/crypt.js"),U=w("./node_modules/charenc/charenc.js").utf8,K=w("./node_modules/is-buffer/index.js"),Y=w("./node_modules/charenc/charenc.js").bin,de=function(ve,be){ve.constructor==String?be&&be.encoding==="binary"?ve=Y.stringToBytes(ve):ve=U.stringToBytes(ve):K(ve)?ve=Array.prototype.slice.call(ve,0):!Array.isArray(ve)&&ve.constructor!==Uint8Array&&(ve=ve.toString());for(var ee=k.bytesToWords(ve),ie=ve.length*8,ne=1732584193,te=-271733879,he=-1732584194,xe=271733878,_e=0;_e<ee.length;_e++)ee[_e]=(ee[_e]<<8|ee[_e]>>>24)&16711935|(ee[_e]<<24|ee[_e]>>>8)&4278255360;ee[ie>>>5]|=128<<ie%32,ee[(ie+64>>>9<<4)+14]=ie;for(var Be=de._ff,Ie=de._gg,Pe=de._hh,$e=de._ii,_e=0;_e<ee.length;_e+=16){var Ne=ne,qe=te,st=he,yt=xe;ne=Be(ne,te,he,xe,ee[_e+0],7,-680876936),xe=Be(xe,ne,te,he,ee[_e+1],12,-389564586),he=Be(he,xe,ne,te,ee[_e+2],17,606105819),te=Be(te,he,xe,ne,ee[_e+3],22,-1044525330),ne=Be(ne,te,he,xe,ee[_e+4],7,-176418897),xe=Be(xe,ne,te,he,ee[_e+5],12,1200080426),he=Be(he,xe,ne,te,ee[_e+6],17,-1473231341),te=Be(te,he,xe,ne,ee[_e+7],22,-45705983),ne=Be(ne,te,he,xe,ee[_e+8],7,1770035416),xe=Be(xe,ne,te,he,ee[_e+9],12,-1958414417),he=Be(he,xe,ne,te,ee[_e+10],17,-42063),te=Be(te,he,xe,ne,ee[_e+11],22,-1990404162),ne=Be(ne,te,he,xe,ee[_e+12],7,1804603682),xe=Be(xe,ne,te,he,ee[_e+13],12,-40341101),he=Be(he,xe,ne,te,ee[_e+14],17,-1502002290),te=Be(te,he,xe,ne,ee[_e+15],22,1236535329),ne=Ie(ne,te,he,xe,ee[_e+1],5,-165796510),xe=Ie(xe,ne,te,he,ee[_e+6],9,-1069501632),he=Ie(he,xe,ne,te,ee[_e+11],14,643717713),te=Ie(te,he,xe,ne,ee[_e+0],20,-373897302),ne=Ie(ne,te,he,xe,ee[_e+5],5,-701558691),xe=Ie(xe,ne,te,he,ee[_e+10],9,38016083),he=Ie(he,xe,ne,te,ee[_e+15],14,-660478335),te=Ie(te,he,xe,ne,ee[_e+4],20,-405537848),ne=Ie(ne,te,he,xe,ee[_e+9],5,568446438),xe=Ie(xe,ne,te,he,ee[_e+14],9,-1019803690),he=Ie(he,xe,ne,te,ee[_e+3],14,-187363961),te=Ie(te,he,xe,ne,ee[_e+8],20,1163531501),ne=Ie(ne,te,he,xe,ee[_e+13],5,-1444681467),xe=Ie(xe,ne,te,he,ee[_e+2],9,-51403784),he=Ie(he,xe,ne,te,ee[_e+7],14,1735328473),te=Ie(te,he,xe,ne,ee[_e+12],20,-1926607734),ne=Pe(ne,te,he,xe,ee[_e+5],4,-378558),xe=Pe(xe,ne,te,he,ee[_e+8],11,-2022574463),he=Pe(he,xe,ne,te,ee[_e+11],16,1839030562),te=Pe(te,he,xe,ne,ee[_e+14],23,-35309556),ne=Pe(ne,te,he,xe,ee[_e+1],4,-1530992060),xe=Pe(xe,ne,te,he,ee[_e+4],11,1272893353),he=Pe(he,xe,ne,te,ee[_e+7],16,-155497632),te=Pe(te,he,xe,ne,ee[_e+10],23,-1094730640),ne=Pe(ne,te,he,xe,ee[_e+13],4,681279174),xe=Pe(xe,ne,te,he,ee[_e+0],11,-358537222),he=Pe(he,xe,ne,te,ee[_e+3],16,-722521979),te=Pe(te,he,xe,ne,ee[_e+6],23,76029189),ne=Pe(ne,te,he,xe,ee[_e+9],4,-640364487),xe=Pe(xe,ne,te,he,ee[_e+12],11,-421815835),he=Pe(he,xe,ne,te,ee[_e+15],16,530742520),te=Pe(te,he,xe,ne,ee[_e+2],23,-995338651),ne=$e(ne,te,he,xe,ee[_e+0],6,-198630844),xe=$e(xe,ne,te,he,ee[_e+7],10,1126891415),he=$e(he,xe,ne,te,ee[_e+14],15,-1416354905),te=$e(te,he,xe,ne,ee[_e+5],21,-57434055),ne=$e(ne,te,he,xe,ee[_e+12],6,1700485571),xe=$e(xe,ne,te,he,ee[_e+3],10,-1894986606),he=$e(he,xe,ne,te,ee[_e+10],15,-1051523),te=$e(te,he,xe,ne,ee[_e+1],21,-2054922799),ne=$e(ne,te,he,xe,ee[_e+8],6,1873313359),xe=$e(xe,ne,te,he,ee[_e+15],10,-30611744),he=$e(he,xe,ne,te,ee[_e+6],15,-1560198380),te=$e(te,he,xe,ne,ee[_e+13],21,1309151649),ne=$e(ne,te,he,xe,ee[_e+4],6,-145523070),xe=$e(xe,ne,te,he,ee[_e+11],10,-1120210379),he=$e(he,xe,ne,te,ee[_e+2],15,718787259),te=$e(te,he,xe,ne,ee[_e+9],21,-343485551),ne=ne+Ne>>>0,te=te+qe>>>0,he=he+st>>>0,xe=xe+yt>>>0}return k.endian([ne,te,he,xe])};de._ff=function(ve,be,ee,ie,ne,te,he){var xe=ve+(be&ee|~be&ie)+(ne>>>0)+he;return(xe<<te|xe>>>32-te)+be},de._gg=function(ve,be,ee,ie,ne,te,he){var xe=ve+(be&ie|ee&~ie)+(ne>>>0)+he;return(xe<<te|xe>>>32-te)+be},de._hh=function(ve,be,ee,ie,ne,te,he){var xe=ve+(be^ee^ie)+(ne>>>0)+he;return(xe<<te|xe>>>32-te)+be},de._ii=function(ve,be,ee,ie,ne,te,he){var xe=ve+(ee^(be|~ie))+(ne>>>0)+he;return(xe<<te|xe>>>32-te)+be},de._blocksize=16,de._digestsize=16,G.exports=function(ve,be){if(ve==null)throw new Error("Illegal argument "+ve);var ee=k.wordsToBytes(de(ve,be));return be&&be.asBytes?ee:be&&be.asString?Y.bytesToString(ee):k.bytesToHex(ee)}})()},"./node_modules/regenerator-runtime/runtime.js":function(G,j,w){var k=function(U){var K=Object.prototype,Y=K.hasOwnProperty,de,ve=typeof Symbol=="function"?Symbol:{},be=ve.iterator||"@@iterator",ee=ve.asyncIterator||"@@asyncIterator",ie=ve.toStringTag||"@@toStringTag";function ne(R,O,pe){return Object.defineProperty(R,O,{value:pe,enumerable:!0,configurable:!0,writable:!0}),R[O]}try{ne({},"")}catch{ne=function(O,pe,ze){return O[pe]=ze}}function te(R,O,pe,ze){var Ye=O&&O.prototype instanceof $e?O:$e,ot=Object.create(Ye.prototype),se=new on(ze||[]);return ot._invoke=Bt(R,pe,se),ot}U.wrap=te;function he(R,O,pe){try{return{type:"normal",arg:R.call(O,pe)}}catch(ze){return{type:"throw",arg:ze}}}var xe="suspendedStart",_e="suspendedYield",Be="executing",Ie="completed",Pe={};function $e(){}function Ne(){}function qe(){}var st={};st[be]=function(){return this};var yt=Object.getPrototypeOf,Pt=yt&&yt(yt(En([])));Pt&&Pt!==K&&Y.call(Pt,be)&&(st=Pt);var ht=qe.prototype=$e.prototype=Object.create(st);Ne.prototype=ht.constructor=qe,qe.constructor=Ne,Ne.displayName=ne(qe,ie,"GeneratorFunction");function Et(R){["next","throw","return"].forEach(function(O){ne(R,O,function(pe){return this._invoke(O,pe)})})}U.isGeneratorFunction=function(R){var O=typeof R=="function"&&R.constructor;return O?O===Ne||(O.displayName||O.name)==="GeneratorFunction":!1},U.mark=function(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,qe):(R.__proto__=qe,ne(R,ie,"GeneratorFunction")),R.prototype=Object.create(ht),R},U.awrap=function(R){return{__await:R}};function Nt(R,O){function pe(ot,se,A,z){var we=he(R[ot],R,se);if(we.type==="throw")z(we.arg);else{var je=we.arg,Xe=je.value;return Xe&&typeof Xe=="object"&&Y.call(Xe,"__await")?O.resolve(Xe.__await).then(function(Qe){pe("next",Qe,A,z)},function(Qe){pe("throw",Qe,A,z)}):O.resolve(Xe).then(function(Qe){je.value=Qe,A(je)},function(Qe){return pe("throw",Qe,A,z)})}}var ze;function Ye(ot,se){function A(){return new O(function(z,we){pe(ot,se,z,we)})}return ze=ze?ze.then(A,A):A()}this._invoke=Ye}Et(Nt.prototype),Nt.prototype[ee]=function(){return this},U.AsyncIterator=Nt,U.async=function(R,O,pe,ze,Ye){Ye===void 0&&(Ye=Promise);var ot=new Nt(te(R,O,pe,ze),Ye);return U.isGeneratorFunction(O)?ot:ot.next().then(function(se){return se.done?se.value:ot.next()})};function Bt(R,O,pe){var ze=xe;return function(ot,se){if(ze===Be)throw new Error("Generator is already running");if(ze===Ie){if(ot==="throw")throw se;return Ee()}for(pe.method=ot,pe.arg=se;;){var A=pe.delegate;if(A){var z=cn(A,pe);if(z){if(z===Pe)continue;return z}}if(pe.method==="next")pe.sent=pe._sent=pe.arg;else if(pe.method==="throw"){if(ze===xe)throw ze=Ie,pe.arg;pe.dispatchException(pe.arg)}else pe.method==="return"&&pe.abrupt("return",pe.arg);ze=Be;var we=he(R,O,pe);if(we.type==="normal"){if(ze=pe.done?Ie:_e,we.arg===Pe)continue;return{value:we.arg,done:pe.done}}else we.type==="throw"&&(ze=Ie,pe.method="throw",pe.arg=we.arg)}}}function cn(R,O){var pe=R.iterator[O.method];if(pe===de){if(O.delegate=null,O.method==="throw"){if(R.iterator.return&&(O.method="return",O.arg=de,cn(R,O),O.method==="throw"))return Pe;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return Pe}var ze=he(pe,R.iterator,O.arg);if(ze.type==="throw")return O.method="throw",O.arg=ze.arg,O.delegate=null,Pe;var Ye=ze.arg;if(!Ye)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,Pe;if(Ye.done)O[R.resultName]=Ye.value,O.next=R.nextLoc,O.method!=="return"&&(O.method="next",O.arg=de);else return Ye;return O.delegate=null,Pe}Et(ht),ne(ht,ie,"Generator"),ht[be]=function(){return this},ht.toString=function(){return"[object Generator]"};function Tn(R){var O={tryLoc:R[0]};1 in R&&(O.catchLoc=R[1]),2 in R&&(O.finallyLoc=R[2],O.afterLoc=R[3]),this.tryEntries.push(O)}function wn(R){var O=R.completion||{};O.type="normal",delete O.arg,R.completion=O}function on(R){this.tryEntries=[{tryLoc:"root"}],R.forEach(Tn,this),this.reset(!0)}U.keys=function(R){var O=[];for(var pe in R)O.push(pe);return O.reverse(),function ze(){for(;O.length;){var Ye=O.pop();if(Ye in R)return ze.value=Ye,ze.done=!1,ze}return ze.done=!0,ze}};function En(R){if(R){var O=R[be];if(O)return O.call(R);if(typeof R.next=="function")return R;if(!isNaN(R.length)){var pe=-1,ze=function Ye(){for(;++pe<R.length;)if(Y.call(R,pe))return Ye.value=R[pe],Ye.done=!1,Ye;return Ye.value=de,Ye.done=!0,Ye};return ze.next=ze}}return{next:Ee}}U.values=En;function Ee(){return{value:de,done:!0}}return on.prototype={constructor:on,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=de,this.done=!1,this.delegate=null,this.method="next",this.arg=de,this.tryEntries.forEach(wn),!R)for(var O in this)O.charAt(0)==="t"&&Y.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=de)},stop:function(){this.done=!0;var R=this.tryEntries[0],O=R.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var O=this;function pe(z,we){return ot.type="throw",ot.arg=R,O.next=z,we&&(O.method="next",O.arg=de),!!we}for(var ze=this.tryEntries.length-1;ze>=0;--ze){var Ye=this.tryEntries[ze],ot=Ye.completion;if(Ye.tryLoc==="root")return pe("end");if(Ye.tryLoc<=this.prev){var se=Y.call(Ye,"catchLoc"),A=Y.call(Ye,"finallyLoc");if(se&&A){if(this.prev<Ye.catchLoc)return pe(Ye.catchLoc,!0);if(this.prev<Ye.finallyLoc)return pe(Ye.finallyLoc)}else if(se){if(this.prev<Ye.catchLoc)return pe(Ye.catchLoc,!0)}else if(A){if(this.prev<Ye.finallyLoc)return pe(Ye.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(R,O){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ze=this.tryEntries[pe];if(ze.tryLoc<=this.prev&&Y.call(ze,"finallyLoc")&&this.prev<ze.finallyLoc){var Ye=ze;break}}Ye&&(R==="break"||R==="continue")&&Ye.tryLoc<=O&&O<=Ye.finallyLoc&&(Ye=null);var ot=Ye?Ye.completion:{};return ot.type=R,ot.arg=O,Ye?(this.method="next",this.next=Ye.finallyLoc,Pe):this.complete(ot)},complete:function(R,O){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&O&&(this.next=O),Pe},finish:function(R){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.finallyLoc===R)return this.complete(pe.completion,pe.afterLoc),wn(pe),Pe}},catch:function(R){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.tryLoc===R){var ze=pe.completion;if(ze.type==="throw"){var Ye=ze.arg;wn(pe)}return Ye}}throw new Error("illegal catch attempt")},delegateYield:function(R,O,pe){return this.delegate={iterator:En(R),resultName:O,nextLoc:pe},this.method==="next"&&(this.arg=de),Pe}},U}(G.exports);try{regeneratorRuntime=k}catch{Function("r","regeneratorRuntime = r")(k)}},"./src/api.js":function(G,j,w){w.r(j),w.d(j,"setup",function(){return Be}),w.d(j,"setupCache",function(){return _e}),w("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/regenerator-runtime/runtime.js");var k=w("axios"),U=w.n(k),K=w("./src/request.js"),Y=w("./src/cache.js");w.d(j,"serializeQuery",function(){return Y.serializeQuery});var de=w("./src/config.js"),ve=w("./src/utilities.js");function be(Ie,Pe){if(Ie==null)return{};var $e=ee(Ie,Pe),Ne,qe;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(Ie);for(qe=0;qe<st.length;qe++)Ne=st[qe],!(Pe.indexOf(Ne)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Ie,Ne)||($e[Ne]=Ie[Ne]))}return $e}function ee(Ie,Pe){if(Ie==null)return{};var $e={},Ne=Object.keys(Ie),qe,st;for(st=0;st<Ne.length;st++)qe=Ne[st],!(Pe.indexOf(qe)>=0)&&($e[qe]=Ie[qe]);return $e}function ie(Ie,Pe){var $e=Object.keys(Ie);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(Ie);Pe&&(Ne=Ne.filter(function(qe){return Object.getOwnPropertyDescriptor(Ie,qe).enumerable})),$e.push.apply($e,Ne)}return $e}function ne(Ie){for(var Pe=1;Pe<arguments.length;Pe++){var $e=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?ie(Object($e),!0).forEach(function(Ne){te(Ie,Ne,$e[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors($e)):ie(Object($e)).forEach(function(Ne){Object.defineProperty(Ie,Ne,Object.getOwnPropertyDescriptor($e,Ne))})}return Ie}function te(Ie,Pe,$e){return Pe in Ie?Object.defineProperty(Ie,Pe,{value:$e,enumerable:!0,configurable:!0,writable:!0}):Ie[Pe]=$e,Ie}function he(Ie,Pe,$e,Ne,qe,st,yt){try{var Pt=Ie[st](yt),ht=Pt.value}catch(Et){$e(Et);return}Pt.done?Pe(ht):Promise.resolve(ht).then(Ne,qe)}function xe(Ie){return function(){var Pe=this,$e=arguments;return new Promise(function(Ne,qe){var st=Ie.apply(Pe,$e);function yt(ht){he(st,Ne,qe,yt,Pt,"next",ht)}function Pt(ht){he(st,Ne,qe,yt,Pt,"throw",ht)}yt(void 0)})}}function _e(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie=Object(de.makeConfig)(Ie);function Pe(Ne){return $e.apply(this,arguments)}function $e(){return $e=xe(regeneratorRuntime.mark(function Ne(qe){var st,yt,Pt,ht,Et;return regeneratorRuntime.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return st=Object(de.mergeRequestConfig)(Ie,qe),Bt.next=3,Object(K.default)(st,qe);case 3:if(yt=Bt.sent,Pt=yt.next,Object(ve.isFunction)(Pt)){Bt.next=7;break}return Bt.abrupt("return",Pt);case 7:return Bt.prev=7,Bt.next=10,st.adapter(qe);case 10:yt=Bt.sent,Bt.next=16;break;case 13:Bt.prev=13,Bt.t0=Bt.catch(7),ht=Bt.t0;case 16:if(!ht){Bt.next=31;break}if(Et=Object(ve.isFunction)(st.readOnError)?st.readOnError(ht,qe):st.readOnError,!Et){Bt.next=30;break}return Bt.prev=19,st.acceptStale=!0,Bt.next=23,Object(K.default)(st,qe);case 23:return yt=Bt.sent,yt.next.request.stale=!0,Bt.abrupt("return",yt.next);case 28:Bt.prev=28,Bt.t1=Bt.catch(19);case 30:throw ht;case 31:return Bt.abrupt("return",Pt(yt));case 32:case"end":return Bt.stop()}},Ne,null,[[7,13],[19,28]])})),$e.apply(this,arguments)}return{adapter:Pe,config:Ie,store:Ie.store}}function Be(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=ne(ne(ne({},de.defaults.axios),Ie),{},{cache:ne(ne({},de.defaults.axios.cache),Ie.cache)}),$e=_e(Pe.cache);Pe.cache;var Ne=be(Pe,["cache"]),qe=U.a.create(ne(ne({},Ne),{},{adapter:$e.adapter}));return qe.cache=$e.store,qe}j.default={setup:Be,setupCache:_e,serializeQuery:Y.serializeQuery}},"./src/cache.js":function(G,j,w){w.r(j),w.d(j,"read",function(){return ie}),w.d(j,"write",function(){return be}),w.d(j,"key",function(){return te}),w.d(j,"invalidate",function(){return _e}),w.d(j,"serializeQuery",function(){return Be}),w("./node_modules/core-js/modules/es7.array.includes.js"),w("./node_modules/core-js/modules/es6.string.includes.js"),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");var k=w("./src/utilities.js"),U=w("./node_modules/md5/md5.js"),K=w.n(U),Y=w("./src/serialize.js");function de(Ie,Pe,$e,Ne,qe,st,yt){try{var Pt=Ie[st](yt),ht=Pt.value}catch(Et){$e(Et);return}Pt.done?Pe(ht):Promise.resolve(ht).then(Ne,qe)}function ve(Ie){return function(){var Pe=this,$e=arguments;return new Promise(function(Ne,qe){var st=Ie.apply(Pe,$e);function yt(ht){de(st,Ne,qe,yt,Pt,"next",ht)}function Pt(ht){de(st,Ne,qe,yt,Pt,"throw",ht)}yt(void 0)})}}function be(Ie,Pe,$e){return ee.apply(this,arguments)}function ee(){return ee=ve(regeneratorRuntime.mark(function Ie(Pe,$e,Ne){var qe;return regeneratorRuntime.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.prev=0,qe={expires:Pe.expires,data:Object(Y.default)(Pe,$e,Ne)},yt.next=4,Pe.store.setItem(Pe.uuid,qe);case 4:yt.next=19;break;case 6:if(yt.prev=6,yt.t0=yt.catch(0),Pe.debug("Could not store response",yt.t0),!Pe.clearOnError){yt.next=18;break}return yt.prev=10,yt.next=13,Pe.store.clear();case 13:yt.next=18;break;case 15:yt.prev=15,yt.t1=yt.catch(10),Pe.debug("Could not clear store",yt.t1);case 18:return yt.abrupt("return",!1);case 19:return yt.abrupt("return",!0);case 20:case"end":return yt.stop()}},Ie,null,[[0,6],[10,15]])})),ee.apply(this,arguments)}function ie(Ie,Pe){return ne.apply(this,arguments)}function ne(){return ne=ve(regeneratorRuntime.mark(function Ie(Pe,$e){var Ne,qe,st,yt,Pt,ht,Et,Nt;return regeneratorRuntime.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return Ne=Pe.uuid,qe=Pe.ignoreCache,cn.next=3,Pe.store.getItem(Ne);case 3:if(st=cn.sent,!(qe||!st||!st.data)){cn.next=10;break}throw Pe.debug("cache-miss",$e.url),yt=new Error,yt.reason="cache-miss",yt.message="Entry not found from cache",yt;case 10:if(Pt=st.expires,ht=st.data,Et=typeof navigator!="undefined"&&"onLine"in navigator&&!navigator.onLine,!(!Et&&!Pe.acceptStale&&Pt!==0&&Pt<Date.now())){cn.next=18;break}throw Pe.debug("cache-stale",$e.url),Nt=new Error,Nt.reason="cache-stale",Nt.message="Entry is stale",Nt;case 18:return Pe.debug(Pe.acceptStale?"cache-hit-stale":"cache-hit",$e.url),cn.abrupt("return",ht);case 20:case"end":return cn.stop()}},Ie)})),ne.apply(this,arguments)}function te(Ie){if(Object(k.isFunction)(Ie.key))return Ie.key;var Pe;return Object(k.isString)(Ie.key)?Pe=function(Ne){var qe="".concat(Ne.baseURL?Ne.baseURL:"").concat(Ne.url),st="".concat(Ie.key,"/").concat(qe).concat(Be(Ne));return Ne.data?st+K()(Ne.data):st}:Pe=function(Ne){var qe="".concat(Ne.baseURL?Ne.baseURL:"").concat(Ne.url),st=qe+Be(Ne);return Ne.data?st+K()(Ne.data):st},Pe}function he(Ie,Pe){return xe.apply(this,arguments)}function xe(){return xe=ve(regeneratorRuntime.mark(function Ie(Pe,$e){var Ne;return regeneratorRuntime.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(Ne=$e.method.toLowerCase(),!Pe.exclude.methods.includes(Ne)){st.next=4;break}return st.next=4,Pe.store.removeItem(Pe.uuid);case 4:case"end":return st.stop()}},Ie)})),xe.apply(this,arguments)}function _e(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(k.isFunction)(Ie.invalidate)?Ie.invalidate:he}function Be(Ie){if(!Ie.params)return"";if(typeof URLSearchParams=="undefined")return JSON.stringify(Ie.params);var Pe=Ie.params,$e=Ie.params instanceof URLSearchParams;return $e||(Pe=new URLSearchParams,Object.keys(Ie.params).forEach(function(Ne){return Pe.append(Ne,Ie.params[Ne])})),"?".concat(Pe.toString())}j.default={read:ie,write:be,key:te,invalidate:_e,serializeQuery:Be}},"./src/config.js":function(G,j,w){w.r(j),w.d(j,"defaults",function(){return ne}),w.d(j,"makeConfig",function(){return he}),w.d(j,"mergeRequestConfig",function(){return xe}),w("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");var k=w("axios"),U=w.n(k),K=w("./src/memory.js"),Y=w("./src/cache.js");function de(_e,Be){var Ie=Object.keys(_e);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(_e);Be&&(Pe=Pe.filter(function($e){return Object.getOwnPropertyDescriptor(_e,$e).enumerable})),Ie.push.apply(Ie,Pe)}return Ie}function ve(_e){for(var Be=1;Be<arguments.length;Be++){var Ie=arguments[Be]!=null?arguments[Be]:{};Be%2?de(Object(Ie),!0).forEach(function(Pe){be(_e,Pe,Ie[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(Ie)):de(Object(Ie)).forEach(function(Pe){Object.defineProperty(_e,Pe,Object.getOwnPropertyDescriptor(Ie,Pe))})}return _e}function be(_e,Be,Ie){return Be in _e?Object.defineProperty(_e,Be,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):_e[Be]=Ie,_e}var ee=function(){},ie=function(){for(var Be,Ie=arguments.length,Pe=new Array(Ie),$e=0;$e<Ie;$e++)Pe[$e]=arguments[$e];return(Be=console).log.apply(Be,["[axios-cache-adapter]"].concat(Pe))},ne={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:U.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},te=["limit","store","adapter","uuid","acceptStale"],he=function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=ve(ve(ve({},ne.cache),Be),{},{exclude:ve(ve({},ne.cache.exclude),Be.exclude)});return Ie.key=Object(Y.key)(Ie),Ie.invalidate=Object(Y.invalidate)(Ie),Ie.debug!==!1?Ie.debug=typeof Ie.debug=="function"?Ie.debug:ie:Ie.debug=ee,Ie.store||(Ie.store=new K.default),Ie.debug("Global cache config",Ie),Ie},xe=function(Be,Ie){var Pe=Ie.cache||{};Pe&&te.forEach(function(Ne){return Pe[Ne]?delete Pe[Ne]:void 0});var $e=ve(ve(ve({},Be),Pe),{},{exclude:ve(ve({},Be.exclude),Pe.exclude)});return $e.debug===!0&&($e.debug=ie),Pe.key&&($e.key=Object(Y.key)(Pe)),$e.uuid=$e.key(Ie),Be.debug("Request config for ".concat(Ie.url),$e),$e};j.default={defaults:ne,makeConfig:he,mergeRequestConfig:xe}},"./src/exclude.js":function(G,j,w){w.r(j),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/core-js/modules/es7.array.includes.js"),w("./node_modules/core-js/modules/es6.string.includes.js");var k=w("./src/utilities.js");function U(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=arguments.length>1?arguments[1]:void 0,de=K.exclude,ve=de===void 0?{}:de,be=K.debug,ee=Y.method.toLowerCase();if(ee==="head"||ve.methods.includes(ee))return be("Excluding request by HTTP method ".concat(Y.url)),!0;if(typeof ve.filter=="function"&&ve.filter(Y))return be("Excluding request by filter ".concat(Y.url)),!0;var ie=/\?.*$/.test(Y.url)||Object(k.isObject)(Y.params)&&Object.keys(Y.params).length!==0||typeof URLSearchParams!="undefined"&&Y.params instanceof URLSearchParams;if(ve.query&&ie)return be("Excluding request by query ".concat(Y.url)),!0;var ne=ve.paths||[],te=ne.some(function(he){return Y.url.match(he)});return te?(be("Excluding request by url match ".concat(Y.url)),!0):!1}j.default=U},"./src/index.node.js":function(G,j,w){w.r(j);var k=w("./src/api.js");w.d(j,"setup",function(){return k.setup}),w.d(j,"setupCache",function(){return k.setupCache}),w.d(j,"serializeQuery",function(){return k.serializeQuery});var U=w("./src/redis.js");w.d(j,"RedisStore",function(){return U.default});var K=w("./src/redis-default.js");w.d(j,"RedisDefaultStore",function(){return K.default}),j.default={setup:k.setup,setupCache:k.setupCache,serializeQuery:k.serializeQuery,RedisStore:U.default,RedisDefaultStore:K.default}},"./src/limit.js":function(G,j,w){w.r(j),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");function k(de,ve,be,ee,ie,ne,te){try{var he=de[ne](te),xe=he.value}catch(_e){be(_e);return}he.done?ve(xe):Promise.resolve(xe).then(ee,ie)}function U(de){return function(){var ve=this,be=arguments;return new Promise(function(ee,ie){var ne=de.apply(ve,be);function te(xe){k(ne,ee,ie,te,he,"next",xe)}function he(xe){k(ne,ee,ie,te,he,"throw",xe)}te(void 0)})}}function K(de){return Y.apply(this,arguments)}function Y(){return Y=U(regeneratorRuntime.mark(function de(ve){var be,ee;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,ve.store.length();case 2:if(be=ne.sent,!(be<ve.limit)){ne.next=5;break}return ne.abrupt("return");case 5:return ve.debug("Current store size: ".concat(be)),ne.next=8,ve.store.iterate(function(te,he){ee||(ee={value:te,key:he}),te.expires<ee.value.expires&&(ee={value:te,key:he})});case 8:if(!ee){ne.next=12;break}return ve.debug("Removing item: ".concat(ee.key)),ne.next=12,ve.store.removeItem(ee.key);case 12:case"end":return ne.stop()}},de)})),Y.apply(this,arguments)}j.default=K},"./src/memory.js":function(G,j,w){w.r(j),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/regenerator-runtime/runtime.js");var k=w("./src/utilities.js");function U(ee,ie,ne,te,he,xe,_e){try{var Be=ee[xe](_e),Ie=Be.value}catch(Pe){ne(Pe);return}Be.done?ie(Ie):Promise.resolve(Ie).then(te,he)}function K(ee){return function(){var ie=this,ne=arguments;return new Promise(function(te,he){var xe=ee.apply(ie,ne);function _e(Ie){U(xe,te,he,_e,Be,"next",Ie)}function Be(Ie){U(xe,te,he,_e,Be,"throw",Ie)}_e(void 0)})}}function Y(ee,ie){if(!(ee instanceof ie))throw new TypeError("Cannot call a class as a function")}function de(ee,ie){for(var ne=0;ne<ie.length;ne++){var te=ie[ne];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ee,te.key,te)}}function ve(ee,ie,ne){return ie&&de(ee.prototype,ie),ne&&de(ee,ne),ee}var be=function(){function ee(){Y(this,ee),this.store={}}return ve(ee,[{key:"getItem",value:function(){var ie=K(regeneratorRuntime.mark(function te(he){var xe;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return xe=this.store[he]||null,Be.abrupt("return",JSON.parse(xe));case 2:case"end":return Be.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ie=K(regeneratorRuntime.mark(function te(he,xe){return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return this.store[he]=JSON.stringify(xe),Be.abrupt("return",xe);case 2:case"end":return Be.stop()}},te,this)}));function ne(te,he){return ie.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ie=K(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:delete this.store[he];case 1:case"end":return _e.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ie=K(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:this.store={};case 1:case"end":return xe.stop()}},te,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ie=K(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.abrupt("return",Object.keys(this.store).length);case 1:case"end":return xe.stop()}},te,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"iterate",value:function(ne){return Promise.all(Object(k.mapObject)(this.store,ne))}}]),ee}();j.default=be},"./src/redis-default.js":function(G,j,w){w.r(j),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.function.bind.js"),w("./node_modules/core-js/modules/es6.function.name.js");var k=w("util");function U(ee,ie,ne,te,he,xe,_e){try{var Be=ee[xe](_e),Ie=Be.value}catch(Pe){ne(Pe);return}Be.done?ie(Ie):Promise.resolve(Ie).then(te,he)}function K(ee){return function(){var ie=this,ne=arguments;return new Promise(function(te,he){var xe=ee.apply(ie,ne);function _e(Ie){U(xe,te,he,_e,Be,"next",Ie)}function Be(Ie){U(xe,te,he,_e,Be,"throw",Ie)}_e(void 0)})}}function Y(ee,ie){if(!(ee instanceof ie))throw new TypeError("Cannot call a class as a function")}function de(ee,ie){for(var ne=0;ne<ie.length;ne++){var te=ie[ne];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ee,te.key,te)}}function ve(ee,ie,ne){return ie&&de(ee.prototype,ie),ne&&de(ee,ne),ee}var be=function(){function ee(ie){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y(this,ee);var te=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ie.constructor.name!=="RedisClient")throw te}catch{throw te}this.client=ie,this.prefix=ne.prefix||"axios-cache",this.maxScanCount=ne.maxScanCount||1e3,this.getAsync=Object(k.promisify)(ie.get).bind(ie),this.psetexAsync=Object(k.promisify)(ie.psetex).bind(ie),this.delAsync=Object(k.promisify)(ie.del).bind(ie),this.scanAsync=Object(k.promisify)(ie.scan).bind(ie)}return ve(ee,[{key:"calculateTTL",value:function(ne){var te=Date.now();return ne.expires&&ne.expires>te?ne.expires-te:-1}},{key:"transformKey",value:function(ne){return this.prefix+"_"+ne}},{key:"getItem",value:function(){var ie=K(regeneratorRuntime.mark(function te(he){var xe;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,this.getAsync(this.transformKey(he));case 2:if(Be.t0=Be.sent,Be.t0){Be.next=5;break}Be.t0=null;case 5:return xe=Be.t0,Be.abrupt("return",JSON.parse(xe));case 7:case"end":return Be.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ie=K(regeneratorRuntime.mark(function te(he,xe){var _e,Be;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(_e=this.transformKey(he),Be=this.calculateTTL(xe),!(Be>0)){Pe.next=5;break}return Pe.next=5,this.psetexAsync(_e,Be,JSON.stringify(xe));case 5:return Pe.abrupt("return",xe);case 6:case"end":return Pe.stop()}},te,this)}));function ne(te,he){return ie.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ie=K(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,this.delAsync(this.transformKey(he));case 2:case"end":return _e.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"scan",value:function(){var ie=K(regeneratorRuntime.mark(function te(he){var xe,_e;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:xe="0";case 1:return Ie.next=3,this.scanAsync(xe,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return _e=Ie.sent,xe=_e[0],Ie.next=7,he(_e[1]);case 7:if(xe!=="0"){Ie.next=1;break}case 8:case"end":return Ie.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ie=K(regeneratorRuntime.mark(function te(){var he=this;return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,this.scan(function(Be){return he.delAsync(Be)});case 2:case"end":return _e.stop()}},te,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ie=K(regeneratorRuntime.mark(function te(){var he;return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return he=0,_e.next=3,this.scan(function(Be){he+=Be.length});case 3:return _e.abrupt("return",he);case 4:case"end":return _e.stop()}},te,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var ie=K(regeneratorRuntime.mark(function te(he){var xe=this,_e,Be;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Be=function(){return Be=K(regeneratorRuntime.mark(function Ne(qe){var st,yt;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.getAsync(qe);case 2:if(ht.t0=ht.sent,ht.t0){ht.next=5;break}ht.t0=null;case 5:return st=ht.t0,yt=JSON.parse(st),ht.next=9,he(yt,qe);case 9:return ht.abrupt("return",ht.sent);case 10:case"end":return ht.stop()}},Ne,this)})),Be.apply(this,arguments)},_e=function(Ne){return Be.apply(this,arguments)},Pe.next=4,this.scan(function($e){return Promise.all($e.map(_e.bind(xe)))});case 4:return Pe.abrupt("return",Promise.resolve([]));case 5:case"end":return Pe.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()}]),ee}();j.default=be},"./src/redis.js":function(G,j,w){w.r(j),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.function.bind.js"),w("./node_modules/core-js/modules/es6.function.name.js");var k=w("util"),U=w("./src/utilities.js");function K(ie,ne,te,he,xe,_e,Be){try{var Ie=ie[_e](Be),Pe=Ie.value}catch($e){te($e);return}Ie.done?ne(Pe):Promise.resolve(Pe).then(he,xe)}function Y(ie){return function(){var ne=this,te=arguments;return new Promise(function(he,xe){var _e=ie.apply(ne,te);function Be(Pe){K(_e,he,xe,Be,Ie,"next",Pe)}function Ie(Pe){K(_e,he,xe,Be,Ie,"throw",Pe)}Be(void 0)})}}function de(ie,ne){if(!(ie instanceof ne))throw new TypeError("Cannot call a class as a function")}function ve(ie,ne){for(var te=0;te<ne.length;te++){var he=ne[te];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ie,he.key,he)}}function be(ie,ne,te){return ne&&ve(ie.prototype,ne),te&&ve(ie,te),ie}var ee=function(){function ie(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";de(this,ie);var he=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ne.constructor.name!=="RedisClient")throw he}catch{throw he}this.client=ne,this.HASH_KEY=te,this.hgetAsync=Object(k.promisify)(ne.hget).bind(ne),this.hsetAsync=Object(k.promisify)(ne.hset).bind(ne),this.hdelAsync=Object(k.promisify)(ne.hdel).bind(ne),this.delAsync=Object(k.promisify)(ne.del).bind(ne),this.hlenAsync=Object(k.promisify)(ne.hlen).bind(ne),this.hgetallAsync=Object(k.promisify)(ne.hgetall).bind(ne)}return be(ie,[{key:"getItem",value:function(){var ne=Y(regeneratorRuntime.mark(function he(xe){var _e;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetAsync(this.HASH_KEY,xe);case 2:if(Ie.t0=Ie.sent,Ie.t0){Ie.next=5;break}Ie.t0=null;case 5:return _e=Ie.t0,Ie.abrupt("return",JSON.parse(_e));case 7:case"end":return Ie.stop()}},he,this)}));function te(he){return ne.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var ne=Y(regeneratorRuntime.mark(function he(xe,_e){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hsetAsync(this.HASH_KEY,xe,JSON.stringify(_e));case 2:return Ie.abrupt("return",_e);case 3:case"end":return Ie.stop()}},he,this)}));function te(he,xe){return ne.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var ne=Y(regeneratorRuntime.mark(function he(xe){return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,this.hdelAsync(this.HASH_KEY,xe);case 2:case"end":return Be.stop()}},he,this)}));function te(he){return ne.apply(this,arguments)}return te}()},{key:"clear",value:function(){var ne=Y(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return _e.stop()}},he,this)}));function te(){return ne.apply(this,arguments)}return te}()},{key:"length",value:function(){var ne=Y(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return _e.stop()}},he,this)}));function te(){return ne.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var ne=Y(regeneratorRuntime.mark(function he(xe){var _e;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return _e=Ie.sent,Ie.abrupt("return",Promise.all(Object(U.mapObject)(_e,xe)));case 4:case"end":return Ie.stop()}},he,this)}));function te(he){return ne.apply(this,arguments)}return te}()}]),ie}();j.default=ee},"./src/request.js":function(G,j,w){w.r(j),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");var k=w("./src/response.js"),U=w("./src/exclude.js"),K=w("./src/cache.js");function Y(ee,ie,ne,te,he,xe,_e){try{var Be=ee[xe](_e),Ie=Be.value}catch(Pe){ne(Pe);return}Be.done?ie(Ie):Promise.resolve(Ie).then(te,he)}function de(ee){return function(){var ie=this,ne=arguments;return new Promise(function(te,he){var xe=ee.apply(ie,ne);function _e(Ie){Y(xe,te,he,_e,Be,"next",Ie)}function Be(Ie){Y(xe,te,he,_e,Be,"throw",Ie)}_e(void 0)})}}function ve(ee,ie){return be.apply(this,arguments)}function be(){return be=de(regeneratorRuntime.mark(function ee(ie,ne){var te,he,xe;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return xe=function(){return ie.excludeFromCache=!0,{config:ie,next:te}},ie.debug("uuid",ie.uuid),te=function(){for(var Pe=arguments.length,$e=new Array(Pe),Ne=0;Ne<Pe;Ne++)$e[Ne]=arguments[Ne];return k.default.apply(void 0,[ie,ne].concat($e))},Be.next=5,ie.invalidate(ie,ne);case 5:if(!Object(U.default)(ie,ne)){Be.next=7;break}return Be.abrupt("return",xe());case 7:return Be.prev=7,Be.next=10,Object(K.read)(ie,ne);case 10:return he=Be.sent,he.config=ne,he.request={fromCache:!0},Be.abrupt("return",{config:ie,next:he});case 16:if(Be.prev=16,Be.t0=Be.catch(7),!(ie.clearOnStale&&Be.t0.reason==="cache-stale")){Be.next=21;break}return Be.next=21,ie.store.removeItem(ie.uuid);case 21:return Be.abrupt("return",{config:ie,next:te});case 22:case"end":return Be.stop()}},ee,null,[[7,16]])})),be.apply(this,arguments)}j.default=ve},"./src/response.js":function(G,j,w){w.r(j),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");var k=w("./src/limit.js"),U=w("./src/cache.js"),K=w("./node_modules/cache-control-esm/index.js");function Y(ee,ie,ne,te,he,xe,_e){try{var Be=ee[xe](_e),Ie=Be.value}catch(Pe){ne(Pe);return}Be.done?ie(Ie):Promise.resolve(Ie).then(te,he)}function de(ee){return function(){var ie=this,ne=arguments;return new Promise(function(te,he){var xe=ee.apply(ie,ne);function _e(Ie){Y(xe,te,he,_e,Be,"next",Ie)}function Be(Ie){Y(xe,te,he,_e,Be,"throw",Ie)}_e(void 0)})}}function ve(ee,ie,ne){return be.apply(this,arguments)}function be(){return be=de(regeneratorRuntime.mark(function ee(ie,ne,te){var he,xe,_e,Be,Ie;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(he=te.request,xe=he===void 0?{}:he,_e=te.headers,Be=_e===void 0?{}:_e,!(["arraybuffer","blob"].indexOf(xe.responseType)>-1)){$e.next=3;break}return $e.abrupt("return",te);case 3:if(Ie={},ie.readHeaders&&(Be["cache-control"]?(Ie=Object(K.parse)(Be["cache-control"]),(Ie.noCache||Ie.noStore)&&(ie.excludeFromCache=!0)):Be.expires?ie.expires=new Date(Be.expires).getTime():ie.expires=new Date().getTime()),ie.excludeFromCache){$e.next=15;break}if(Ie.maxAge||Ie.maxAge===0?ie.expires=Date.now()+Ie.maxAge*1e3:ie.readHeaders||(ie.expires=ie.maxAge===0?Date.now():Date.now()+ie.maxAge),!ie.limit){$e.next=11;break}return ie.debug("Detected limit: ".concat(ie.limit)),$e.next=11,Object(k.default)(ie);case 11:return $e.next=13,Object(U.write)(ie,ne,te);case 13:$e.next=16;break;case 15:te.request.excludedFromCache=!0;case 16:return $e.abrupt("return",te);case 17:case"end":return $e.stop()}},ee)})),be.apply(this,arguments)}j.default=ve},"./src/serialize.js":function(G,j,w){w.r(j),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");function k(Y,de){if(Y==null)return{};var ve=U(Y,de),be,ee;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(Y);for(ee=0;ee<ie.length;ee++)be=ie[ee],!(de.indexOf(be)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Y,be)||(ve[be]=Y[be]))}return ve}function U(Y,de){if(Y==null)return{};var ve={},be=Object.keys(Y),ee,ie;for(ie=0;ie<be.length;ie++)ee=be[ie],!(de.indexOf(ee)>=0)&&(ve[ee]=Y[ee]);return ve}function K(Y,de,ve){if(ve.data)try{ve.data=JSON.parse(ve.data)}catch(ee){Y.debug("Could not parse data as JSON",ee)}ve.request,ve.config;var be=k(ve,["request","config"]);return be}j.default=K},"./src/utilities.js":function(G,j,w){w.r(j),w.d(j,"isObject",function(){return U}),w.d(j,"getTag",function(){return K}),w.d(j,"isFunction",function(){return Y}),w.d(j,"isString",function(){return de}),w.d(j,"mapObject",function(){return ve}),w("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");function k(be){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(ie){return typeof ie}:k=function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},k(be)}function U(be){var ee=k(be);return be!=null&&(ee==="object"||ee==="function")}function K(be){return be===null?be===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(be)}function Y(be){if(!U(be))return!1;var ee=K(be);return ee==="[object Function]"||ee==="[object AsyncFunction]"||ee==="[object GeneratorFunction]"||ee==="[object Proxy]"}function de(be){var ee=k(be);return ee==="string"||ee==="object"&&be!=null&&!Array.isArray(be)&&K(be)==="[object String]"}function ve(be,ee){return U(be)?Object.keys(be).map(function(ie){return ee(be[ie],ie)}):[]}},axios:function(G,j){G.exports=ae},util:function(G,j){G.exports=S.default}})})});const X={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},Z=F.setupCache({maxAge:60*60*24*1e3}),ue=C.default.create({adapter:Z.adapter}),H=async(V,B={})=>{const ae={...X,...B},[G,j]=r.lngLatToGoogle(V,ae.zoomBase),w=ae.tileUrl.replace("{z}",String(ae.zoomBase)).replace("{x}",String(G)).replace("{y}",String(j)),k={code:"",prefecture:"",city:""};let U;try{const de=await ue.get(w,{responseType:"arraybuffer"});U=Buffer.from(de.data,"binary")}catch(de){throw new Error(de)}const K=new g.VectorTile(new _.default(U));let Y=Object.keys(K.layers);return Array.isArray(Y)||(Y=[Y]),Y.forEach(de=>{const ve=K.layers[de];if(ve&&ae.layer===ve.name)for(let be=0;be<ve.length;be++){const ee=ve.feature(be).toGeoJSON(G,j,ae.zoomBase);Y.length>1&&(ee.properties.vt_layer=de);const ie={type:"FeatureCollection",features:[ee]};t.geoContains(ie,V)&&(k.code=String(ee.id).length===5?String(ee.id):`0${String(ee.id)}`,k.prefecture=ee.properties.prefecture,k.city=ee.properties.city)}}),k};e.openReverseGeocoder=H})(R4);const rM={defaultComment:"\u66F4\u65B0\u5730\u5740",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},iM={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},oM={defaultComment:"\u4F4F\u6240\u3092\u66F4\u65B0",postcodeField:{key:"addr:postcode",displayName:"\u90F5\u4FBF\u756A\u53F7",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"\u90FD\u9053\u5E9C\u770C",placeholder:"\u6771\u4EAC\u90FD",adminLevel:4},{key:"addr:city",displayName:"\u5E02\u753A\u6751\u3068\u6771\u4EAC23\u533A",placeholder:"\u5343\u4EE3\u7530\u533A",adminLevel:7},{key:"addr:suburb",displayName:"\u653F\u4EE4\u6307\u5B9A\u90FD\u5E02\u306E\u533A",placeholder:""},{key:"addr:quarter",displayName:"\u5730\u540D",placeholder:"\u5916\u795E\u7530",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"\u4E01\u76EE",placeholder:"1\u4E01\u76EE"},{key:"addr:block_number",displayName:"\u756A\u5730",placeholder:"17"},{key:"addr:housenumber",displayName:"\u53F7",placeholder:"6",prefix:"-"}]},aM={defaultComment:"\uC8FC\uC18C \uC5C5\uB370\uC774\uD2B8",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},Pw={JPN:oM,CHN:rM,DEU:iM,KOR:aM};function X6(e,t,r){r===void 0&&(r={});var s={type:"Feature"};return(r.id===0||r.id)&&(s.id=r.id),r.bbox&&(s.bbox=r.bbox),s.properties=t||{},s.geometry=e,s}function sM(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kw(e[0])||!kw(e[1]))throw new Error("coordinates must contain numbers");var s={type:"Point",coordinates:e};return X6(s,t,r)}function lM(e,t,r){r===void 0&&(r={});for(var s=0,u=e;s<u.length;s++){var f=u[s];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<f[f.length-1].length;g++)if(f[f.length-1][g]!==f[0][g])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return X6(l,t,r)}function kw(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function K6(e,t,r){if(e!==null)for(var s,u,f,g,l,_,C,S=0,E=0,T,F=e.type,X=F==="FeatureCollection",Z=F==="Feature",ue=X?e.features.length:1,H=0;H<ue;H++){C=X?e.features[H].geometry:Z?e.geometry:e,T=C?C.type==="GeometryCollection":!1,l=T?C.geometries.length:1;for(var V=0;V<l;V++){var B=0,ae=0;if(g=T?C.geometries[V]:C,g!==null){_=g.coordinates;var G=g.type;switch(S=r&&(G==="Polygon"||G==="MultiPolygon")?1:0,G){case null:break;case"Point":if(t(_,E,H,B,ae)===!1)return!1;E++,B++;break;case"LineString":case"MultiPoint":for(s=0;s<_.length;s++){if(t(_[s],E,H,B,ae)===!1)return!1;E++,G==="MultiPoint"&&B++}G==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(s=0;s<_.length;s++){for(u=0;u<_[s].length-S;u++){if(t(_[s][u],E,H,B,ae)===!1)return!1;E++}G==="MultiLineString"&&B++,G==="Polygon"&&ae++}G==="Polygon"&&B++;break;case"MultiPolygon":for(s=0;s<_.length;s++){for(ae=0,u=0;u<_[s].length;u++){for(f=0;f<_[s][u].length-S;f++){if(t(_[s][u][f],E,H,B,ae)===!1)return!1;E++}ae++}B++}break;case"GeometryCollection":for(s=0;s<g.geometries.length;s++)if(K6(g.geometries[s],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function uM(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function cM(e){return e.type==="Feature"?e.geometry:e}function hM(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var s=uM(e),u=cM(t),f=u.type,g=t.bbox,l=u.coordinates;if(g&&fM(s,g)===!1)return!1;f==="Polygon"&&(l=[l]);for(var _=!1,C=0;C<l.length&&!_;C++)if(Mw(s,l[C][0],r.ignoreBoundary)){for(var S=!1,E=1;E<l[C].length&&!S;)Mw(s,l[C][E],!r.ignoreBoundary)&&(S=!0),E++;S||(_=!0)}return _}function Mw(e,t,r){var s=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var u=0,f=t.length-1;u<t.length;f=u++){var g=t[u][0],l=t[u][1],_=t[f][0],C=t[f][1],S=e[1]*(g-_)+l*(_-e[0])+C*(e[0]-g)===0&&(g-e[0])*(_-e[0])<=0&&(l-e[1])*(C-e[1])<=0;if(S)return!r;var E=l>e[1]!=C>e[1]&&e[0]<(_-g)*(e[1]-l)/(C-l)+g;E&&(s=!s)}return s}function fM(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function dM(e,t){t===void 0&&(t={});var r=0,s=0,u=0;return K6(e,function(f){r+=f[0],s+=f[1],u++},!0),sM([r/u,s/u],t.properties)}const pM=()=>{const[e,t]=gt.exports.useState(!1);return{detectCountry:gt.exports.useCallback(async(s,u)=>{t(!0);const g=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of g.features)if(hM([s,u],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},e1=({feature:e,fieldOption:t,suggestList:r,onChange:s})=>{var l;const[u,f]=gt.exports.useState((l=e.properties)==null?void 0:l[t.key]);gt.exports.useEffect(()=>{var _;f((_=e.properties)==null?void 0:_[t.key])},[e]);const g=gt.exports.useCallback(_=>{f(_.currentTarget.value),s&&s(_)},[]);return Hn("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Hn("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:u,onChange:g}),Rt("datalist",{id:t.key+"-list",children:r&&r.map(_=>{if(parseInt(_.tags.admin_level)===t.adminLevel)return Rt("option",{value:_.tags.name},_.id);if(_.type==="node"&&t.adminLevel===9)return Rt("option",{value:_.tags.name},_.id)})})]})},mM=({feature:e,fields:t})=>e.properties?Hn(Ta,{children:[t.postcodeField&&Rt("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(r=>{var s;return Hn(Ta,{children:[Rt("span",{children:(s=e.properties)==null?void 0:s[r.key]})," "]})}),t.detailFields&&t.detailFields.map(r=>{var s;return Hn(Ta,{children:[Rt("span",{children:(s=e.properties)==null?void 0:s[r.key]})," "]})})]}):null,gM=({placeholder:e,defaultValue:t})=>{const[r,s]=gt.exports.useState(t);gt.exports.useEffect(()=>{s(t)},[t]);const u=gt.exports.useCallback(f=>{s(f.currentTarget.value)},[]);return Hn("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[Rt("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:r,required:!0,onChange:u})]})};var $y={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,s="4.15.0",u=200,f="Expected a function",g="__lodash_hash_undefined__",l=1,_=2,C=1/0,S=9007199254740991,E="[object Arguments]",T="[object Array]",F="[object Boolean]",X="[object Date]",Z="[object Error]",ue="[object Function]",H="[object GeneratorFunction]",V="[object Map]",B="[object Number]",ae="[object Object]",G="[object Promise]",j="[object RegExp]",w="[object Set]",k="[object String]",U="[object Symbol]",K="[object WeakMap]",Y="[object ArrayBuffer]",de="[object DataView]",ve="[object Float32Array]",be="[object Float64Array]",ee="[object Int8Array]",ie="[object Int16Array]",ne="[object Int32Array]",te="[object Uint8Array]",he="[object Uint8ClampedArray]",xe="[object Uint16Array]",_e="[object Uint32Array]",Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Pe=/^\./,$e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,qe=/\\(\\)?/g,st=/\w*$/,yt=/^\[object .+?Constructor\]$/,Pt=/^(?:0|[1-9]\d*)$/,ht={};ht[ve]=ht[be]=ht[ee]=ht[ie]=ht[ne]=ht[te]=ht[he]=ht[xe]=ht[_e]=!0,ht[E]=ht[T]=ht[Y]=ht[F]=ht[de]=ht[X]=ht[Z]=ht[ue]=ht[V]=ht[B]=ht[ae]=ht[j]=ht[w]=ht[k]=ht[K]=!1;var Et={};Et[E]=Et[T]=Et[Y]=Et[de]=Et[F]=Et[X]=Et[ve]=Et[be]=Et[ee]=Et[ie]=Et[ne]=Et[V]=Et[B]=Et[ae]=Et[j]=Et[w]=Et[k]=Et[U]=Et[te]=Et[he]=Et[xe]=Et[_e]=!0,Et[Z]=Et[ue]=Et[K]=!1;var Nt=typeof pl=="object"&&pl&&pl.Object===Object&&pl,Bt=typeof self=="object"&&self&&self.Object===Object&&self,cn=Nt||Bt||Function("return this")(),Tn=t&&!t.nodeType&&t,wn=Tn&&!0&&e&&!e.nodeType&&e,on=wn&&wn.exports===Tn,En=on&&Nt.process,Ee=function(){try{return En&&En.binding("util")}catch{}}(),R=Ee&&Ee.isTypedArray;function O(N,fe){return N.set(fe[0],fe[1]),N}function pe(N,fe){return N.add(fe),N}function ze(N,fe,Le){switch(Le.length){case 0:return N.call(fe);case 1:return N.call(fe,Le[0]);case 2:return N.call(fe,Le[0],Le[1]);case 3:return N.call(fe,Le[0],Le[1],Le[2])}return N.apply(fe,Le)}function Ye(N,fe){for(var Le=-1,tt=N?N.length:0;++Le<tt&&fe(N[Le],Le,N)!==!1;);return N}function ot(N,fe){for(var Le=-1,tt=fe.length,kt=N.length;++Le<tt;)N[kt+Le]=fe[Le];return N}function se(N,fe,Le,tt){var kt=-1,Ct=N?N.length:0;for(tt&&Ct&&(Le=N[++kt]);++kt<Ct;)Le=fe(Le,N[kt],kt,N);return Le}function A(N,fe){for(var Le=-1,tt=N?N.length:0;++Le<tt;)if(fe(N[Le],Le,N))return!0;return!1}function z(N){return function(fe){return fe==null?r:fe[N]}}function we(N,fe){for(var Le=-1,tt=Array(N);++Le<N;)tt[Le]=fe(Le);return tt}function je(N){return function(fe){return N(fe)}}function Xe(N,fe){return N==null?r:N[fe]}function Qe(N){var fe=!1;if(N!=null&&typeof N.toString!="function")try{fe=!!(N+"")}catch{}return fe}function Ht(N){var fe=-1,Le=Array(N.size);return N.forEach(function(tt,kt){Le[++fe]=[kt,tt]}),Le}function Sn(N,fe){return function(Le){return N(fe(Le))}}function fn(N){var fe=-1,Le=Array(N.size);return N.forEach(function(tt){Le[++fe]=tt}),Le}var ft=Array.prototype,Mt=Function.prototype,un=Object.prototype,Ir=cn["__core-js_shared__"],Qr=function(){var N=/[^.]+$/.exec(Ir&&Ir.keys&&Ir.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),hn=Mt.toString,rr=un.hasOwnProperty,bi=hn.call(Object),xr=un.toString,Vr=RegExp("^"+hn.call(rr).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=on?cn.Buffer:r,Gt=cn.Symbol,Zt=cn.Uint8Array,An=Sn(Object.getPrototypeOf,Object),zn=Object.create,ir=un.propertyIsEnumerable,Gr=ft.splice,hi=Object.getOwnPropertySymbols,Pa=Wt?Wt.isBuffer:r,Te=Sn(Object.keys,Object),W=Math.max,J=ta(cn,"DataView"),ge=ta(cn,"Map"),Ae=ta(cn,"Promise"),ke=ta(cn,"Set"),Ge=ta(cn,"WeakMap"),De=ta(Object,"create"),Ue=!ir.call({valueOf:1},"valueOf"),He=wi(J),at=wi(ge),pt=wi(Ae),it=wi(ke),Vt=wi(Ge),It=Gt?Gt.prototype:r,Ut=It?It.valueOf:r,rn=It?It.toString:r;function $t(){}function xn(N){var fe=-1,Le=N?N.length:0;for(this.clear();++fe<Le;){var tt=N[fe];this.set(tt[0],tt[1])}}function Cn(){this.__data__=De?De(null):{}}function _n(N){return this.has(N)&&delete this.__data__[N]}function bn(N){var fe=this.__data__;if(De){var Le=fe[N];return Le===g?r:Le}return rr.call(fe,N)?fe[N]:r}function nr(N){var fe=this.__data__;return De?fe[N]!==r:rr.call(fe,N)}function dr(N,fe){var Le=this.__data__;return Le[N]=De&&fe===r?g:fe,this}xn.prototype.clear=Cn,xn.prototype.delete=_n,xn.prototype.get=bn,xn.prototype.has=nr,xn.prototype.set=dr;function Jn(N){var fe=-1,Le=N?N.length:0;for(this.clear();++fe<Le;){var tt=N[fe];this.set(tt[0],tt[1])}}function Mo(){this.__data__=[]}function ro(N){var fe=this.__data__,Le=or(fe,N);if(Le<0)return!1;var tt=fe.length-1;return Le==tt?fe.pop():Gr.call(fe,Le,1),!0}function Bl(N){var fe=this.__data__,Le=or(fe,N);return Le<0?r:fe[Le][1]}function ns(N){return or(this.__data__,N)>-1}function Qn(N,fe){var Le=this.__data__,tt=or(Le,N);return tt<0?Le.push([N,fe]):Le[tt][1]=fe,this}Jn.prototype.clear=Mo,Jn.prototype.delete=ro,Jn.prototype.get=Bl,Jn.prototype.has=ns,Jn.prototype.set=Qn;function io(N){var fe=-1,Le=N?N.length:0;for(this.clear();++fe<Le;){var tt=N[fe];this.set(tt[0],tt[1])}}function $u(){this.__data__={hash:new xn,map:new(ge||Jn),string:new xn}}function Vu(N){return fo(this,N).delete(N)}function Gu(N){return fo(this,N).get(N)}function Us(N){return fo(this,N).has(N)}function Hu(N,fe){return fo(this,N).set(N,fe),this}io.prototype.clear=$u,io.prototype.delete=Vu,io.prototype.get=Gu,io.prototype.has=Us,io.prototype.set=Hu;function ka(N){var fe=-1,Le=N?N.length:0;for(this.__data__=new io;++fe<Le;)this.add(N[fe])}function jl(N){return this.__data__.set(N,g),this}function Wu(N){return this.__data__.has(N)}ka.prototype.add=ka.prototype.push=jl,ka.prototype.has=Wu;function Hr(N){this.__data__=new Jn(N)}function $s(){this.__data__=new Jn}function rs(N){return this.__data__.delete(N)}function is(N){return this.__data__.get(N)}function os(N){return this.__data__.has(N)}function Vs(N,fe){var Le=this.__data__;if(Le instanceof Jn){var tt=Le.__data__;if(!ge||tt.length<u-1)return tt.push([N,fe]),this;Le=this.__data__=new io(tt)}return Le.set(N,fe),this}Hr.prototype.clear=$s,Hr.prototype.delete=rs,Hr.prototype.get=is,Hr.prototype.has=os,Hr.prototype.set=Vs;function Gs(N,fe){var Le=Wr(N)||po(N)?we(N.length,String):[],tt=Le.length,kt=!!tt;for(var Ct in N)(fe||rr.call(N,Ct))&&!(kt&&(Ct=="length"||ar(Ct,tt)))&&Le.push(Ct);return Le}function zo(N,fe,Le){(Le!==r&&!Ri(N[fe],Le)||typeof fe=="number"&&Le===r&&!(fe in N))&&(N[fe]=Le)}function Ma(N,fe,Le){var tt=N[fe];(!(rr.call(N,fe)&&Ri(tt,Le))||Le===r&&!(fe in N))&&(N[fe]=Le)}function or(N,fe){for(var Le=N.length;Le--;)if(Ri(N[Le][0],fe))return Le;return-1}function Hs(N,fe){return N&&ql(fe,di(fe),N)}function Lo(N,fe,Le,tt,kt,Ct,Xt){var Kt;if(tt&&(Kt=Ct?tt(N,kt,Ct,Xt):tt(N)),Kt!==r)return Kt;if(!Ei(N))return N;var dn=Wr(N);if(dn){if(Kt=Sh(N),!fe)return Ju(N,Kt)}else{var _t=kn(N),Dn=_t==ue||_t==H;if(Js(N))return Yl(N,fe);if(_t==ae||_t==E||Dn&&!Ct){if(Qe(N))return Ct?N:{};if(Kt=jn(Dn?{}:N),!fe)return Eh(N,Hs(Kt,N))}else{if(!Et[_t])return Ct?N:{};Kt=na(N,_t,Lo,fe)}}Xt||(Xt=new Hr);var Zn=Xt.get(N);if(Zn)return Zn;if(Xt.set(N,Kt),!dn)var er=Le?Qo(N):di(N);return Ye(er||N,function(Pr,bt){er&&(bt=Pr,Pr=N[bt]),Ma(Kt,bt,Lo(Pr,fe,Le,tt,bt,N,Xt))}),Kt}function Dl(N){return Ei(N)?zn(N):{}}var Zu=Ql(Ul),Nl=Ra();function Ul(N,fe){return N&&Nl(N,fe,di)}function $l(N,fe){fe=Oo(fe,N)?[fe]:Xs(fe);for(var Le=0,tt=fe.length;N!=null&&Le<tt;)N=N[Ro(fe[Le++])];return Le&&Le==tt?N:r}function xh(N,fe,Le){var tt=fe(N);return Wr(N)?tt:ot(tt,Le(N))}function Vl(N){return xr.call(N)}function Gl(N,fe){return N!=null&&fe in Object(N)}function as(N,fe,Le,tt,kt){return N===fe?!0:N==null||fe==null||!Ei(N)&&!mo(fe)?N!==N&&fe!==fe:Hl(N,fe,as,Le,tt,kt)}function Hl(N,fe,Le,tt,kt,Ct){var Xt=Wr(N),Kt=Wr(fe),dn=T,_t=T;Xt||(dn=kn(N),dn=dn==E?ae:dn),Kt||(_t=kn(fe),_t=_t==E?ae:_t);var Dn=dn==ae&&!Qe(N),Zn=_t==ae&&!Qe(fe),er=dn==_t;if(er&&!Dn)return Ct||(Ct=new Hr),Xt||la(N)?eu(N,fe,Le,tt,kt,Ct):Qu(N,fe,dn,Le,tt,kt,Ct);if(!(kt&_)){var Pr=Dn&&rr.call(N,"__wrapped__"),bt=Zn&&rr.call(fe,"__wrapped__");if(Pr||bt){var Fi=Pr?N.value():N,go=bt?fe.value():fe;return Ct||(Ct=new Hr),Le(Fi,go,tt,kt,Ct)}}return er?(Ct||(Ct=new Hr),tu(N,fe,Le,tt,kt,Ct)):!1}function Xu(N,fe,Le,tt){var kt=Le.length,Ct=kt,Xt=!tt;if(N==null)return!Ct;for(N=Object(N);kt--;){var Kt=Le[kt];if(Xt&&Kt[2]?Kt[1]!==N[Kt[0]]:!(Kt[0]in N))return!1}for(;++kt<Ct;){Kt=Le[kt];var dn=Kt[0],_t=N[dn],Dn=Kt[1];if(Xt&&Kt[2]){if(_t===r&&!(dn in N))return!1}else{var Zn=new Hr;if(tt)var er=tt(_t,Dn,dn,N,fe,Zn);if(!(er===r?as(Dn,_t,tt,l|_,Zn):er))return!1}}return!0}function Ku(N){if(!Ei(N)||nu(N))return!1;var fe=oa(N)||Qe(N)?Vr:yt;return fe.test(wi(N))}function Bn(N){return mo(N)&&aa(N.length)&&!!ht[xr.call(N)]}function za(N){return typeof N=="function"?N:N==null?ja:typeof N=="object"?Wr(N)?Zl(N[0],N[1]):fi(N):sr(N)}function ss(N){if(!ra(N))return Te(N);var fe=[];for(var Le in Object(N))rr.call(N,Le)&&Le!="constructor"&&fe.push(Le);return fe}function Wl(N){if(!Ei(N))return qs(N);var fe=ra(N),Le=[];for(var tt in N)tt=="constructor"&&(fe||!rr.call(N,tt))||Le.push(tt);return Le}function fi(N){var fe=ea(N);return fe.length==1&&fe[0][2]?Ys(fe[0][0],fe[0][1]):function(Le){return Le===N||Xu(Le,N,fe)}}function Zl(N,fe){return Oo(N)&&us(fe)?Ys(Ro(N),fe):function(Le){var tt=au(Le,N);return tt===r&&tt===fe?su(Le,N):as(fe,tt,r,l|_)}}function ls(N,fe,Le,tt,kt){if(N!==fe){if(!(Wr(fe)||la(fe)))var Ct=Wl(fe);Ye(Ct||fe,function(Xt,Kt){if(Ct&&(Kt=Xt,Xt=fe[Kt]),Ei(Xt))kt||(kt=new Hr),Ws(N,fe,Kt,Le,ls,tt,kt);else{var dn=tt?tt(N[Kt],Xt,Kt+"",N,fe,kt):r;dn===r&&(dn=Xt),zo(N,Kt,dn)}})}}function Ws(N,fe,Le,tt,kt,Ct,Xt){var Kt=N[Le],dn=fe[Le],_t=Xt.get(dn);if(_t){zo(N,Le,_t);return}var Dn=Ct?Ct(Kt,dn,Le+"",N,fe,Xt):r,Zn=Dn===r;Zn&&(Dn=dn,Wr(dn)||la(dn)?Wr(Kt)?Dn=Kt:Fa(Kt)?Dn=Ju(Kt):(Zn=!1,Dn=Lo(dn,!0)):sa(dn)||po(dn)?po(Kt)?Dn=ou(Kt):!Ei(Kt)||tt&&oa(Kt)?(Zn=!1,Dn=Lo(dn,!0)):Dn=Kt:Zn=!1),Zn&&(Xt.set(dn,Dn),kt(Dn,dn,tt,Ct,Xt),Xt.delete(dn)),zo(N,Le,Dn)}function Xl(N){return function(fe){return $l(fe,N)}}function Kl(N,fe){return fe=W(fe===r?N.length-1:fe,0),function(){for(var Le=arguments,tt=-1,kt=W(Le.length-fe,0),Ct=Array(kt);++tt<kt;)Ct[tt]=Le[fe+tt];tt=-1;for(var Xt=Array(fe+1);++tt<fe;)Xt[tt]=Le[tt];return Xt[fe]=Ct,ze(N,this,Xt)}}function Zs(N){if(typeof N=="string")return N;if(Fo(N))return rn?rn.call(N):"";var fe=N+"";return fe=="0"&&1/N==-C?"-0":fe}function Xs(N){return Wr(N)?N:ru(N)}function Yl(N,fe){if(fe)return N.slice();var Le=new N.constructor(N.length);return N.copy(Le),Le}function La(N){var fe=new N.constructor(N.byteLength);return new Zt(fe).set(new Zt(N)),fe}function Yu(N,fe){var Le=fe?La(N.buffer):N.buffer;return new N.constructor(Le,N.byteOffset,N.byteLength)}function qu(N,fe,Le){var tt=fe?Le(Ht(N),!0):Ht(N);return se(tt,O,new N.constructor)}function Oa(N){var fe=new N.constructor(N.source,st.exec(N));return fe.lastIndex=N.lastIndex,fe}function _h(N,fe,Le){var tt=fe?Le(fn(N),!0):fn(N);return se(tt,pe,new N.constructor)}function bh(N){return Ut?Object(Ut.call(N)):{}}function wh(N,fe){var Le=fe?La(N.buffer):N.buffer;return new N.constructor(Le,N.byteOffset,N.length)}function Ju(N,fe){var Le=-1,tt=N.length;for(fe||(fe=Array(tt));++Le<tt;)fe[Le]=N[Le];return fe}function ql(N,fe,Le,tt){Le||(Le={});for(var kt=-1,Ct=fe.length;++kt<Ct;){var Xt=fe[kt],Kt=tt?tt(Le[Xt],N[Xt],Xt,Le,N):r;Ma(Le,Xt,Kt===r?N[Xt]:Kt)}return Le}function Eh(N,fe){return ql(N,Ks(N),fe)}function Jl(N){return Kl(function(fe,Le){var tt=-1,kt=Le.length,Ct=kt>1?Le[kt-1]:r,Xt=kt>2?Le[2]:r;for(Ct=N.length>3&&typeof Ct=="function"?(kt--,Ct):r,Xt&&mr(Le[0],Le[1],Xt)&&(Ct=kt<3?r:Ct,kt=1),fe=Object(fe);++tt<kt;){var Kt=Le[tt];Kt&&N(fe,Kt,tt,Ct)}return fe})}function Ql(N,fe){return function(Le,tt){if(Le==null)return Le;if(!ia(Le))return N(Le,tt);for(var kt=Le.length,Ct=fe?kt:-1,Xt=Object(Le);(fe?Ct--:++Ct<kt)&&tt(Xt[Ct],Ct,Xt)!==!1;);return Le}}function Ra(N){return function(fe,Le,tt){for(var kt=-1,Ct=Object(fe),Xt=tt(fe),Kt=Xt.length;Kt--;){var dn=Xt[N?Kt:++kt];if(Le(Ct[dn],dn,Ct)===!1)break}return fe}}function eu(N,fe,Le,tt,kt,Ct){var Xt=kt&_,Kt=N.length,dn=fe.length;if(Kt!=dn&&!(Xt&&dn>Kt))return!1;var _t=Ct.get(N);if(_t&&Ct.get(fe))return _t==fe;var Dn=-1,Zn=!0,er=kt&l?new ka:r;for(Ct.set(N,fe),Ct.set(fe,N);++Dn<Kt;){var Pr=N[Dn],bt=fe[Dn];if(tt)var Fi=Xt?tt(bt,Pr,Dn,fe,N,Ct):tt(Pr,bt,Dn,N,fe,Ct);if(Fi!==r){if(Fi)continue;Zn=!1;break}if(er){if(!A(fe,function(go,jo){if(!er.has(jo)&&(Pr===go||Le(Pr,go,tt,kt,Ct)))return er.add(jo)})){Zn=!1;break}}else if(!(Pr===bt||Le(Pr,bt,tt,kt,Ct))){Zn=!1;break}}return Ct.delete(N),Ct.delete(fe),Zn}function Qu(N,fe,Le,tt,kt,Ct,Xt){switch(Le){case de:if(N.byteLength!=fe.byteLength||N.byteOffset!=fe.byteOffset)return!1;N=N.buffer,fe=fe.buffer;case Y:return!(N.byteLength!=fe.byteLength||!tt(new Zt(N),new Zt(fe)));case F:case X:case B:return Ri(+N,+fe);case Z:return N.name==fe.name&&N.message==fe.message;case j:case k:return N==fe+"";case V:var Kt=Ht;case w:var dn=Ct&_;if(Kt||(Kt=fn),N.size!=fe.size&&!dn)return!1;var _t=Xt.get(N);if(_t)return _t==fe;Ct|=l,Xt.set(N,fe);var Dn=eu(Kt(N),Kt(fe),tt,kt,Ct,Xt);return Xt.delete(N),Dn;case U:if(Ut)return Ut.call(N)==Ut.call(fe)}return!1}function tu(N,fe,Le,tt,kt,Ct){var Xt=kt&_,Kt=di(N),dn=Kt.length,_t=di(fe),Dn=_t.length;if(dn!=Dn&&!Xt)return!1;for(var Zn=dn;Zn--;){var er=Kt[Zn];if(!(Xt?er in fe:rr.call(fe,er)))return!1}var Pr=Ct.get(N);if(Pr&&Ct.get(fe))return Pr==fe;var bt=!0;Ct.set(N,fe),Ct.set(fe,N);for(var Fi=Xt;++Zn<dn;){er=Kt[Zn];var go=N[er],jo=fe[er];if(tt)var Qs=Xt?tt(jo,go,er,fe,N,Ct):tt(go,jo,er,N,fe,Ct);if(!(Qs===r?go===jo||Le(go,jo,tt,kt,Ct):Qs)){bt=!1;break}Fi||(Fi=er=="constructor")}if(bt&&!Fi){var ca=N.constructor,ds=fe.constructor;ca!=ds&&"constructor"in N&&"constructor"in fe&&!(typeof ca=="function"&&ca instanceof ca&&typeof ds=="function"&&ds instanceof ds)&&(bt=!1)}return Ct.delete(N),Ct.delete(fe),bt}function Qo(N){return xh(N,di,Ks)}function ec(){var N=$t.iteratee||ua;return N=N===ua?za:N,arguments.length?N(arguments[0],arguments[1]):N}function fo(N,fe){var Le=N.__data__;return tc(fe)?Le[typeof fe=="string"?"string":"hash"]:Le.map}function ea(N){for(var fe=di(N),Le=fe.length;Le--;){var tt=fe[Le],kt=N[tt];fe[Le]=[tt,kt,us(kt)]}return fe}function ta(N,fe){var Le=Xe(N,fe);return Ku(Le)?Le:r}var Ks=hi?Sn(hi,Object):fs,kn=Vl;(J&&kn(new J(new ArrayBuffer(1)))!=de||ge&&kn(new ge)!=V||Ae&&kn(Ae.resolve())!=G||ke&&kn(new ke)!=w||Ge&&kn(new Ge)!=K)&&(kn=function(N){var fe=xr.call(N),Le=fe==ae?N.constructor:r,tt=Le?wi(Le):r;if(tt)switch(tt){case He:return de;case at:return V;case pt:return G;case it:return w;case Vt:return K}return fe});function pr(N,fe,Le){fe=Oo(fe,N)?[fe]:Xs(fe);for(var tt,kt=-1,Xt=fe.length;++kt<Xt;){var Ct=Ro(fe[kt]);if(!(tt=N!=null&&Le(N,Ct)))break;N=N[Ct]}if(tt)return tt;var Xt=N?N.length:0;return!!Xt&&aa(Xt)&&ar(Ct,Xt)&&(Wr(N)||po(N))}function Sh(N){var fe=N.length,Le=N.constructor(fe);return fe&&typeof N[0]=="string"&&rr.call(N,"index")&&(Le.index=N.index,Le.input=N.input),Le}function jn(N){return typeof N.constructor=="function"&&!ra(N)?Dl(An(N)):{}}function na(N,fe,Le,tt){var kt=N.constructor;switch(fe){case Y:return La(N);case F:case X:return new kt(+N);case de:return Yu(N,tt);case ve:case be:case ee:case ie:case ne:case te:case he:case xe:case _e:return wh(N,tt);case V:return qu(N,tt,Le);case B:case k:return new kt(N);case j:return Oa(N);case w:return _h(N,tt,Le);case U:return bh(N)}}function ar(N,fe){return fe=fe==null?S:fe,!!fe&&(typeof N=="number"||Pt.test(N))&&N>-1&&N%1==0&&N<fe}function mr(N,fe,Le){if(!Ei(Le))return!1;var tt=typeof fe;return(tt=="number"?ia(Le)&&ar(fe,Le.length):tt=="string"&&fe in Le)?Ri(Le[fe],N):!1}function Oo(N,fe){if(Wr(N))return!1;var Le=typeof N;return Le=="number"||Le=="symbol"||Le=="boolean"||N==null||Fo(N)?!0:Ie.test(N)||!Be.test(N)||fe!=null&&N in Object(fe)}function tc(N){var fe=typeof N;return fe=="string"||fe=="number"||fe=="symbol"||fe=="boolean"?N!=="__proto__":N===null}function nu(N){return!!Qr&&Qr in N}function ra(N){var fe=N&&N.constructor,Le=typeof fe=="function"&&fe.prototype||un;return N===Le}function us(N){return N===N&&!Ei(N)}function Ys(N,fe){return function(Le){return Le==null?!1:Le[N]===fe&&(fe!==r||N in Object(Le))}}function qs(N){var fe=[];if(N!=null)for(var Le in Object(N))fe.push(Le);return fe}var ru=cs(function(N){N=Ba(N);var fe=[];return Pe.test(N)&&fe.push(""),N.replace($e,function(Le,tt,kt,Ct){fe.push(kt?Ct.replace(qe,"$1"):tt||Le)}),fe});function Ro(N){if(typeof N=="string"||Fo(N))return N;var fe=N+"";return fe=="0"&&1/N==-C?"-0":fe}function wi(N){if(N!=null){try{return hn.call(N)}catch{}try{return N+""}catch{}}return""}function Oi(N){for(var fe=-1,Le=N?N.length:0,tt=0,kt=[];++fe<Le;){var Ct=N[fe];Ct&&(kt[tt++]=Ct)}return kt}function iu(N,fe){var Le=Wr(N)?Ye:Zu;return Le(N,ec(fe,3))}function cs(N,fe){if(typeof N!="function"||fe&&typeof fe!="function")throw new TypeError(f);var Le=function(){var tt=arguments,kt=fe?fe.apply(this,tt):tt[0],Ct=Le.cache;if(Ct.has(kt))return Ct.get(kt);var Xt=N.apply(this,tt);return Le.cache=Ct.set(kt,Xt),Xt};return Le.cache=new(cs.Cache||io),Le}cs.Cache=io;function nc(N){return Lo(N,!1,!0)}function Ri(N,fe){return N===fe||N!==N&&fe!==fe}function po(N){return Fa(N)&&rr.call(N,"callee")&&(!ir.call(N,"callee")||xr.call(N)==E)}var Wr=Array.isArray;function ia(N){return N!=null&&aa(N.length)&&!oa(N)}function Fa(N){return mo(N)&&ia(N)}var Js=Pa||Bo;function hs(N){if(ia(N)&&(Wr(N)||typeof N=="string"||typeof N.splice=="function"||Js(N)||po(N)))return!N.length;var fe=kn(N);if(fe==V||fe==w)return!N.size;if(Ue||ra(N))return!Te(N).length;for(var Le in N)if(rr.call(N,Le))return!1;return!0}function oa(N){var fe=Ei(N)?xr.call(N):"";return fe==ue||fe==H}function aa(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=S}function Ei(N){var fe=typeof N;return!!N&&(fe=="object"||fe=="function")}function mo(N){return!!N&&typeof N=="object"}function sa(N){if(!mo(N)||xr.call(N)!=ae||Qe(N))return!1;var fe=An(N);if(fe===null)return!0;var Le=rr.call(fe,"constructor")&&fe.constructor;return typeof Le=="function"&&Le instanceof Le&&hn.call(Le)==bi}function Fo(N){return typeof N=="symbol"||mo(N)&&xr.call(N)==U}var la=R?je(R):Bn;function ou(N){return ql(N,lu(N))}function Ba(N){return N==null?"":Zs(N)}function au(N,fe,Le){var tt=N==null?r:$l(N,fe);return tt===r?Le:tt}function su(N,fe){return N!=null&&pr(N,fe,Gl)}function di(N){return ia(N)?Gs(N):ss(N)}function lu(N){return ia(N)?Gs(N,!0):Wl(N)}var rc=Jl(function(N,fe,Le){ls(N,fe,Le)});function ja(N){return N}function ua(N){return za(typeof N=="function"?N:Lo(N,!0))}function sr(N){return Oo(N)?z(Ro(N)):Xl(N)}function fs(){return[]}function Bo(){return!1}$t.compact=Oi,$t.iteratee=ua,$t.keys=di,$t.keysIn=lu,$t.memoize=cs,$t.merge=rc,$t.property=sr,$t.toPlainObject=ou,$t.clone=nc,$t.eq=Ri,$t.forEach=iu,$t.get=au,$t.hasIn=su,$t.identity=ja,$t.isArguments=po,$t.isArray=Wr,$t.isArrayLike=ia,$t.isArrayLikeObject=Fa,$t.isBuffer=Js,$t.isEmpty=hs,$t.isFunction=oa,$t.isLength=aa,$t.isObject=Ei,$t.isObjectLike=mo,$t.isPlainObject=sa,$t.isSymbol=Fo,$t.isTypedArray=la,$t.stubArray=fs,$t.stubFalse=Bo,$t.toString=Ba,$t.each=iu,$t.VERSION=s,wn&&((wn.exports=$t)._=$t,Tn._=$t)}).call(pl)})($y,$y.exports);var yM=Dp;function Dp(e,t){var r=e&&e.type,s;if(r==="FeatureCollection")for(s=0;s<e.features.length;s++)Dp(e.features[s],t);else if(r==="GeometryCollection")for(s=0;s<e.geometries.length;s++)Dp(e.geometries[s],t);else if(r==="Feature")Dp(e.geometry,t);else if(r==="Polygon")zw(e.coordinates,t);else if(r==="MultiPolygon")for(s=0;s<e.coordinates.length;s++)zw(e.coordinates[s],t);return e}function zw(e,t){if(e.length!==0){Lw(e[0],t);for(var r=1;r<e.length;r++)Lw(e[r],!t)}}function Lw(e,t){for(var r=0,s=0,u=0,f=e.length,g=f-1;u<f;g=u++){var l=(e[u][0]-e[g][0])*(e[g][1]+e[u][1]),_=r+l;s+=Math.abs(r)>=Math.abs(l)?r-_+l:l-_+r,r=_}r+s>=0!=!!t&&e.reverse()}var vM=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}],xM=vM,On=$y.exports,vp=yM,Np={};xM.forEach(function(e){if(e.polygon==="all")Np[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",r={};e.values.forEach(function(s){r[s]=!0}),Np[e.key]={},Np[e.key][t]=r}});function _M(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:On.merge(e,t)}var Vm={};Vm=function(e,t,r){t=On.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Np,deduplicator:_M},t);var s;return typeof XMLDocument!="undefined"&&e instanceof XMLDocument||typeof XMLDocument=="undefined"&&e.childNodes?s=f(e):s=u(e),s;function u(_){var C=new Array,S=new Array,E=new Array;function T(G){var j=On.clone(G);j.lat=G.center.lat,j.lon=G.center.lon,j.__is_center_placeholder=!0,C.push(j)}function F(G){var j=On.clone(G);j.nodes=[];function w(k,U,K){var Y={type:"node",id:"_"+j.type+"/"+j.id+"bounds"+K,lat:k,lon:U};j.nodes.push(Y.id),C.push(Y)}w(j.bounds.minlat,j.bounds.minlon,1),w(j.bounds.maxlat,j.bounds.minlon,2),w(j.bounds.maxlat,j.bounds.maxlon,3),w(j.bounds.minlat,j.bounds.maxlon,4),j.nodes.push(j.nodes[0]),j.__is_bounds_placeholder=!0,S.push(j)}function X(G){function j(w,k,U){var K={type:"node",id:U,lat:w,lon:k};C.push(K)}On.isArray(G.nodes)||(G.nodes=G.geometry.map(function(w){return w!==null?"_anonymous@"+w.lat+"/"+w.lon:"_anonymous@unknown_location"})),G.geometry.forEach(function(w,k){w&&j(w.lat,w.lon,G.nodes[k])})}function Z(G){function j(k,U,K){var Y={type:"node",id:K,lat:k,lon:U};C.push(Y)}function w(k,U){if(S.some(function(de){return de.type=="way"&&de.id==U}))return;var K={type:"way",id:U,nodes:[]};function Y(de,ve){var be={type:"node",id:"_anonymous@"+de+"/"+ve,lat:de,lon:ve};K.nodes.push(be.id),C.push(be)}k.forEach(function(de){de?Y(de.lat,de.lon):K.nodes.push(void 0)}),S.push(K)}G.members.forEach(function(k,U){k.type=="node"?k.lat&&j(k.lat,k.lon,k.ref):k.type=="way"&&k.geometry&&(k.ref="_fullGeom"+k.ref,w(k.geometry,k.ref))})}for(var ue=0;ue<_.elements.length;ue++)switch(_.elements[ue].type){case"node":var H=_.elements[ue];C.push(H);break;case"way":var V=On.clone(_.elements[ue]);V.nodes=On.clone(V.nodes),S.push(V),V.center&&T(V),V.geometry?X(V):V.bounds&&F(V);break;case"relation":var B=On.clone(_.elements[ue]);B.members=On.clone(B.members),E.push(B);var ae=B.members&&B.members.some(function(G){return G.type=="node"&&G.lat||G.type=="way"&&G.geometry&&G.geometry.length>0});B.center&&T(B),ae?Z(B):B.bounds&&F(B);break}return g(C,S,E)}function f(_){var C=new Array,S=new Array,E=new Array;function T(B,ae,G){B.hasAttribute(G)&&(ae[G]=B.getAttribute(G))}function F(B,ae){var G=On.clone(B);T(ae,G,"lat"),T(ae,G,"lon"),G.__is_center_placeholder=!0,C.push(G)}function X(B,ae){var G=On.clone(B);G.nodes=[];function j(w,k,U){var K={type:"node",id:"_"+G.type+"/"+G.id+"bounds"+U,lat:w,lon:k};G.nodes.push(K.id),C.push(K)}j(ae.getAttribute("minlat"),ae.getAttribute("minlon"),1),j(ae.getAttribute("maxlat"),ae.getAttribute("minlon"),2),j(ae.getAttribute("maxlat"),ae.getAttribute("maxlon"),3),j(ae.getAttribute("minlat"),ae.getAttribute("maxlon"),4),G.nodes.push(G.nodes[0]),G.__is_bounds_placeholder=!0,S.push(G)}function Z(B,ae){function G(j,w,k){var U={type:"node",id:k,lat:j,lon:w};return C.push(U),U.id}On.isArray(B.nodes)||(B.nodes=[],On.each(ae,function(j,w){B.nodes.push("_anonymous@"+j.getAttribute("lat")+"/"+j.getAttribute("lon"))})),On.each(ae,function(j,w){j.getAttribute("lat")&&G(j.getAttribute("lat"),j.getAttribute("lon"),B.nodes[w])})}function ue(B,ae){function G(w,k,U){var K={type:"node",id:U,lat:w,lon:k};C.push(K)}function j(w,k){if(S.some(function(Y){return Y.type=="way"&&Y.id==k}))return;var U={type:"way",id:k,nodes:[]};function K(Y,de){var ve={type:"node",id:"_anonymous@"+Y+"/"+de,lat:Y,lon:de};U.nodes.push(ve.id),C.push(ve)}On.each(w,function(Y){Y.getAttribute("lat")?K(Y.getAttribute("lat"),Y.getAttribute("lon")):U.nodes.push(void 0)}),S.push(U)}On.each(ae,function(w,k){B.members[k].type=="node"?w.getAttribute("lat")&&G(w.getAttribute("lat"),w.getAttribute("lon"),B.members[k].ref):B.members[k].type=="way"&&w.getElementsByTagName("nd").length>0&&(B.members[k].ref="_fullGeom"+B.members[k].ref,j(w.getElementsByTagName("nd"),B.members[k].ref))})}On.each(_.getElementsByTagName("node"),function(B,ae){var G={};On.each(B.getElementsByTagName("tag"),function(w){G[w.getAttribute("k")]=w.getAttribute("v")});var j={type:"node"};T(B,j,"id"),T(B,j,"lat"),T(B,j,"lon"),T(B,j,"version"),T(B,j,"timestamp"),T(B,j,"changeset"),T(B,j,"uid"),T(B,j,"user"),On.isEmpty(G)||(j.tags=G),C.push(j)});var H,V;return On.each(_.getElementsByTagName("way"),function(B,ae){var G={},j=[];On.each(B.getElementsByTagName("tag"),function(U){G[U.getAttribute("k")]=U.getAttribute("v")});var w=!1;On.each(B.getElementsByTagName("nd"),function(U,K){var Y;(Y=U.getAttribute("ref"))&&(j[K]=Y),!w&&U.getAttribute("lat")&&(w=!0)});var k={type:"way"};T(B,k,"id"),T(B,k,"version"),T(B,k,"timestamp"),T(B,k,"changeset"),T(B,k,"uid"),T(B,k,"user"),j.length>0&&(k.nodes=j),On.isEmpty(G)||(k.tags=G),(H=B.getElementsByTagName("center")[0])&&F(k,H),w?Z(k,B.getElementsByTagName("nd")):(V=B.getElementsByTagName("bounds")[0])&&X(k,V),S.push(k)}),On.each(_.getElementsByTagName("relation"),function(B,ae){var G={},j=[];On.each(B.getElementsByTagName("tag"),function(U){G[U.getAttribute("k")]=U.getAttribute("v")});var w=!1;On.each(B.getElementsByTagName("member"),function(U,K){j[K]={},T(U,j[K],"ref"),T(U,j[K],"role"),T(U,j[K],"type"),(!w&&j[K].type=="node"&&U.getAttribute("lat")||j[K].type=="way"&&U.getElementsByTagName("nd").length>0)&&(w=!0)});var k={type:"relation"};T(B,k,"id"),T(B,k,"version"),T(B,k,"timestamp"),T(B,k,"changeset"),T(B,k,"uid"),T(B,k,"user"),j.length>0&&(k.members=j),On.isEmpty(G)||(k.tags=G),(H=B.getElementsByTagName("center")[0])&&F(k,H),w?ue(k,B.getElementsByTagName("member")):(V=B.getElementsByTagName("bounds")[0])&&X(k,V),E.push(k)}),g(C,S,E)}function g(_,C,S){function E(Pe,$e){if(typeof $e!="object"&&($e={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Pe,$e);for(var Ne in Pe)if(t.uninterestingTags[Ne]!==!0&&!($e[Ne]===!0||$e[Ne]===Pe[Ne]))return!0;return!1}function T(Pe){var $e={timestamp:Pe.timestamp,version:Pe.version,changeset:Pe.changeset,user:Pe.user,uid:Pe.uid};for(var Ne in $e)$e[Ne]===void 0&&delete $e[Ne];return $e}for(var F=new Object,X=new Object,Z=0;Z<_.length;Z++){var ue=_[Z];F[ue.id]!==void 0&&(ue=t.deduplicator(ue,F[ue.id])),F[ue.id]=ue,typeof ue.tags!="undefined"&&E(ue.tags)&&(X[ue.id]=!0)}for(var Z=0;Z<S.length;Z++)if(On.isArray(S[Z].members))for(var H=0;H<S[Z].members.length;H++)S[Z].members[H].type=="node"&&(X[S[Z].members[H].ref]=!0);for(var V=new Object,B=new Object,Z=0;Z<C.length;Z++){var ae=C[Z];if(V[ae.id]&&(ae=t.deduplicator(ae,V[ae.id])),V[ae.id]=ae,On.isArray(ae.nodes))for(var H=0;H<ae.nodes.length;H++)typeof ae.nodes[H]!="object"&&(B[ae.nodes[H]]=!0,ae.nodes[H]=F[ae.nodes[H]])}var G=new Array;for(var j in F){var ue=F[j];(!B[j]||X[j])&&G.push(ue)}for(var w=new Array,Z=0;Z<S.length;Z++){var k=S[Z];w[k.id]&&(k=t.deduplicator(k,w[k.id])),w[k.id]=k}var U={node:{},way:{},relation:{}};for(var j in w){var k=w[j];if(!On.isArray(k.members)){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"ignored because it has no members");continue}for(var H=0;H<k.members.length;H++){var K=k.members[H].type,Y=k.members[H].ref;if(typeof Y!="number"&&(Y=Y.replace("_fullGeom","")),!U[K]){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"member",K+"/"+Y,"ignored because it has an invalid type");continue}typeof U[K][Y]=="undefined"&&(U[K][Y]=[]),U[K][Y].push({role:k.members[H].role,rel:k.id,reltags:k.tags})}}var de,ve=[];for(Z=0;Z<G.length;Z++){if(typeof G[Z].lon=="undefined"||typeof G[Z].lat=="undefined"){t.verbose&&console.warn("POI",G[Z].type+"/"+G[Z].id,"ignored because it lacks coordinates");continue}var be={type:"Feature",id:G[Z].type+"/"+G[Z].id,properties:{type:G[Z].type,id:G[Z].id,tags:G[Z].tags||{},relations:U.node[G[Z].id]||[],meta:T(G[Z])},geometry:{type:"Point",coordinates:[+G[Z].lon,+G[Z].lat]}};G[Z].__is_center_placeholder&&(be.properties.geometry="center"),r?r(be):ve.push(be)}for(var ee=[],ie=[],Z=0;Z<S.length;Z++)if(w[S[Z].id]===S[Z]){if(typeof S[Z].tags!="undefined"&&(S[Z].tags.type=="route"||S[Z].tags.type=="waterway")){let $e=function(Ne){var qe=!1,st;st=Ne.members.filter(function(Et){return Et.type==="way"}),st=st.map(function(Et){var Nt=V[Et.ref];if(Nt===void 0||Nt.nodes===void 0){t.verbose&&console.warn("Route "+Ne.type+"/"+Ne.id,"tainted by a missing or incomplete  way",Et.type+"/"+Et.ref),qe=!0;return}return{id:Et.ref,role:Et.role,way:Nt,nodes:Nt.nodes.filter(function(Bt){return Bt!==void 0?!0:(qe=!0,t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"tainted by a way",Et.type+"/"+Et.ref,"with a missing node"),!1)})}}),st=On.compact(st);var yt;yt=t1(st);var Pt=[];if(Pt=On.compact(yt.map(function(Et){return On.compact(Et.map(function(Nt){return[+Nt.lon,+Nt.lat]}))})),Pt.length==0)return t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"contains no coordinates"),!1;var ht={type:"Feature",id:Ne.type+"/"+Ne.id,properties:{type:Ne.type,id:Ne.id,tags:Ne.tags||{},relations:U[Ne.type][Ne.id]||[],meta:T(Ne)},geometry:{type:Pt.length===1?"LineString":"MultiLineString",coordinates:Pt.length===1?Pt[0]:Pt}};return qe&&(t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"is tainted"),ht.properties.tainted=!0),ht};var Be=$e;if(!On.isArray(S[Z].members)){t.verbose&&console.warn("Route",S[Z].type+"/"+S[Z].id,"ignored because it has no members");continue}if(S[Z].members.forEach(function(Ne){V[Ne.ref]&&!E(V[Ne.ref].tags)&&(V[Ne.ref].is_skippablerelationmember=!0)}),be=$e(S[Z]),be===!1){t.verbose&&console.warn("Route relation",S[Z].type+"/"+S[Z].id,"ignored because it has invalid geometry");continue}r?r(vp(be)):ie.push(be)}if(typeof S[Z].tags!="undefined"&&(S[Z].tags.type=="multipolygon"||S[Z].tags.type=="boundary")){let Ne=function(qe,st){var yt=!1,Pt=te?"way":"relation",ht=typeof qe.id=="number"?qe.id:+qe.id.replace("_fullGeom",""),Et;Et=st.members.filter(function(O){return O.type==="way"}),Et=Et.map(function(O){var pe=V[O.ref];if(pe===void 0||pe.nodes===void 0){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"tainted by a missing or incomplete way",O.type+"/"+O.ref),yt=!0;return}return{id:O.ref,role:O.role||"outer",way:pe,nodes:pe.nodes.filter(function(ze){return ze!==void 0?!0:(yt=!0,t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"tainted by a way",O.type+"/"+O.ref,"with a missing node"),!1)})}}),Et=On.compact(Et);var Nt,Bt;Nt=t1(Et.filter(function(O){return O.role==="outer"})),Bt=t1(Et.filter(function(O){return O.role==="inner"}));var cn;function Tn(O){var pe=function(A,z){for(var we=0;we<z.length;we++)if(Ye(z[we],A))return!0;return!1},ze=function(A){return A.map(function(z){return[+z.lat,+z.lon]})},Ye=function(A,z){for(var we=A[0],je=A[1],Xe=!1,Qe=0,Ht=z.length-1;Qe<z.length;Ht=Qe++){var Sn=z[Qe][0],fn=z[Qe][1],ft=z[Ht][0],Mt=z[Ht][1],un=fn>je!=Mt>je&&we<(ft-Sn)*(je-fn)/(Mt-fn)+Sn;un&&(Xe=!Xe)}return Xe},ot,se;for(O=ze(O),ot=0;ot<Nt.length;ot++)if(se=ze(Nt[ot]),pe(se,O))return ot}cn=Nt.map(function(O){return[O]});for(var wn=0;wn<Bt.length;wn++){var on=Tn(Bt[wn]);on!==void 0?cn[on].push(Bt[wn]):t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains an inner ring with no containing outer")}var En=[];if(En=On.compact(cn.map(function(O){var pe=On.compact(O.map(function(ze){if(ze.length<4){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains a ring with less than four nodes");return}return On.compact(ze.map(function(Ye){return[+Ye.lon,+Ye.lat]}))}));if(pe.length==0){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains an empty ring cluster");return}return pe})),En.length==0)return t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains no coordinates"),!1;var Ee="MultiPolygon";En.length===1&&(Ee="Polygon",En=En[0]);var R={type:"Feature",id:qe.type+"/"+ht,properties:{type:qe.type,id:ht,tags:qe.tags||{},relations:U[qe.type][qe.id]||[],meta:T(qe)},geometry:{type:Ee,coordinates:En}};return yt&&(t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"is tainted"),R.properties.tainted=!0),R};var Ie=Ne;if(!On.isArray(S[Z].members)){t.verbose&&console.warn("Multipolygon",S[Z].type+"/"+S[Z].id,"ignored because it has no members");continue}for(var ne=0,H=0;H<S[Z].members.length;H++)S[Z].members[H].role=="outer"?ne++:t.verbose&&S[Z].members[H].role!="inner"&&console.warn("Multipolygon",S[Z].type+"/"+S[Z].id,"member",S[Z].members[H].type+"/"+S[Z].members[H].ref,'ignored because it has an invalid role: "'+S[Z].members[H].role+'"');if(S[Z].members.forEach(function(qe){V[qe.ref]&&(qe.role==="outer"&&!E(V[qe.ref].tags,S[Z].tags)&&(V[qe.ref].is_skippablerelationmember=!0),qe.role==="inner"&&!E(V[qe.ref].tags)&&(V[qe.ref].is_skippablerelationmember=!0))}),ne==0){t.verbose&&console.warn("Multipolygon relation",S[Z].type+"/"+S[Z].id,"ignored because it has no outer ways");continue}var te=!1;ne==1&&!E(S[Z].tags,{type:!0})&&(te=!0);var be=null;if(!te)be=Ne(S[Z],S[Z]);else{var he=S[Z].members.filter(function(qe){return qe.role==="outer"})[0];if(he=V[he.ref],he===void 0){t.verbose&&console.warn("Multipolygon relation",S[Z].type+"/"+S[Z].id,"ignored because outer way",he.type+"/"+he.ref,"is missing");continue}he.is_skippablerelationmember=!0,be=Ne(he,S[Z])}if(be===!1){t.verbose&&console.warn("Multipolygon relation",S[Z].type+"/"+S[Z].id,"ignored because it has invalid geometry");continue}r?r(vp(be)):ie.push(be)}}for(var Z=0;Z<C.length;Z++)if(V[C[Z].id]===C[Z]){if(!On.isArray(C[Z].nodes)){t.verbose&&console.warn("Way",C[Z].type+"/"+C[Z].id,"ignored because it has no nodes");continue}if(!C[Z].is_skippablerelationmember){typeof C[Z].id!="number"&&(C[Z].id=+C[Z].id.replace("_fullGeom","")),C[Z].tainted=!1,C[Z].hidden=!1;var xe=new Array;for(H=0;H<C[Z].nodes.length;H++)typeof C[Z].nodes[H]=="object"?xe.push([+C[Z].nodes[H].lon,+C[Z].nodes[H].lat]):(t.verbose&&console.warn("Way",C[Z].type+"/"+C[Z].id,"is tainted by an invalid node"),C[Z].tainted=!0);if(xe.length<=1){t.verbose&&console.warn("Way",C[Z].type+"/"+C[Z].id,"ignored because it contains too few nodes");continue}var _e="LineString";typeof C[Z].nodes[0]!="undefined"&&typeof C[Z].nodes[C[Z].nodes.length-1]!="undefined"&&C[Z].nodes[0].id===C[Z].nodes[C[Z].nodes.length-1].id&&(typeof C[Z].tags!="undefined"&&l(C[Z].tags)||C[Z].__is_bounds_placeholder)&&(_e="Polygon",xe=[xe]);var be={type:"Feature",id:C[Z].type+"/"+C[Z].id,properties:{type:C[Z].type,id:C[Z].id,tags:C[Z].tags||{},relations:U.way[C[Z].id]||[],meta:T(C[Z])},geometry:{type:_e,coordinates:xe}};C[Z].tainted&&(t.verbose&&console.warn("Way",C[Z].type+"/"+C[Z].id,"is tainted"),be.properties.tainted=!0),C[Z].__is_bounds_placeholder&&(be.properties.geometry="bounds"),r?r(vp(be)):_e=="LineString"?ee.push(be):ie.push(be)}}return r?!0:(de={type:"FeatureCollection",features:[]},de.features=de.features.concat(ie),de.features=de.features.concat(ee),de.features=de.features.concat(ve),t.flatProperties&&de.features.forEach(function(Pe){Pe.properties=On.merge(Pe.properties.meta,Pe.properties.tags,{id:Pe.properties.type+"/"+Pe.properties.id})}),de=vp(de),de)}function l(_){var C=t.polygonFeatures;if(typeof C=="function")return C(_);if(_.area==="no")return!1;for(var S in _){var E=_[S],T=C[S];if(typeof T!="undefined"&&E!=="no"&&(T===!0||T.included_values&&T.included_values[E]===!0||T.excluded_values&&T.excluded_values[E]!==!0))return!0}return!1}};function t1(e){for(var t=function(E){return E[0]},r=function(E){return E[E.length-1]},s=function(E,T){return E!==void 0&&T!==void 0&&E.id===T.id},u=[],f,g,l,_,C,S;e.length;)for(f=e.pop().nodes.slice(),u.push(f);e.length&&!s(t(f),r(f));){for(g=t(f),l=r(f),_=0;_<e.length;_++)if(S=e[_].nodes,s(l,t(S))){C=f.push,S=S.slice(1);break}else if(s(l,r(S))){C=f.push,S=S.slice(0,-1).reverse();break}else if(s(g,r(S))){C=f.unshift,S=S.slice(0,-1);break}else if(s(g,t(S))){C=f.unshift,S=S.slice(1).reverse();break}else S=C=null;if(!S)break;e.splice(_,1),C.apply(f,S)}return u}Vm.toGeojson=Vm;var bM=Vm;const n1={type:"FeatureCollection",features:[]},Y6=()=>{const[e,t]=gt.exports.useState(!1),r=gt.exports.useCallback(async(g,l,_)=>{var Z,ue;if(e||(console.log(_),_<16))return n1;t(!0);let C=300;_>17&&(C=200),_>18&&(C=100),_>19&&(C=50),console.log("overpass: loading...");let S="[out:json]";S+=`[timeout:25];
`,S+='nwr["building"]',S+=`(around:${C},${g},${l});
`,S+="out meta geom;",console.log(S);const E=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(S)}`,{});if(E.status!==200)return t(!1),n1;const T=await E.json();console.log("overpass json elements: ",T.elements);const F=bM(T);console.log("overpass osmtogeojson raw: ",F);for await(const H of F.features){if(!H.properties)continue;H.id=H.properties.id.split("/")[1];const V=(Z=T.elements.filter(ae=>H.id?typeof H.id=="number"?ae.id===H.id:ae.id===parseInt(H.id):!1))==null?void 0:Z[0];if(V&&(H.properties.tags=V.tags,H.properties.nodes=V.nodes),H.geometry.type==="Polygon"){const ae=lM(H.geometry.coordinates);var X=dM(ae);H.properties.center=X.geometry.coordinates}H.geometry.type==="Point"&&(H.properties.center=H.geometry.coordinates);const B=H.properties.uid;if(B){let ae=localStorage.getItem(B+"-icon");if(ae===null){const G=await Xo.exports.getUser(B);(ue=G.img)!=null&&ue.href?(ae=G.img.href,localStorage.setItem(B+"-icon",G.img.href)):localStorage.setItem(B+"-icon","")}H.properties.userIconHref=ae||""}}return console.log("overpass osmtogeojson converted: ",F),console.log("overpass: loaded."),t(!1),F},[]),[s,u]=gt.exports.useState(!1),f=gt.exports.useCallback(async g=>{console.log("overpass: loading...",g),u(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const _=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(_.status!==200){u(!1);return}const C=await _.json();console.log("overpass json parent elements: ",C.elements);const S=250,E=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${S});
      out;
      `;console.log(E);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(E)}`,{});if(T.status!==200){u(!1);return}const F=await T.json();console.log("overpass json child elements: ",F.elements);const X=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${S});
      out;
      `;console.log(X);const Z=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(X)}`,{});if(Z.status!==200){u(!1);return}const ue=await Z.json();return console.log("overpass json neighbour elements: ",ue.elements),u(!1),[...C.elements,...F.elements,...ue.elements]},[]);return{fetchOverpassBuildings:r,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:s}},wM=()=>Hn("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Rt("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),Hn("datalist",{id:"source-list",children:[Rt("option",{value:"survey"}),Rt("option",{value:"local knowledge"}),Rt("option",{value:"extrapolation"}),Rt("option",{value:"estimation from existing data"})]})]}),r1={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},EM=({feature:e,onCancel:t,onSubmit:r})=>{var de,ve,be,ee;const{detectCountry:s,loadingCountry:u}=pM(),{fetchOverpassAdmin:f,loadingOverpassAdmin:g}=Y6(),l=JSON.parse((de=e.properties)==null?void 0:de.center),[_,C]=gt.exports.useState(void 0),[S,E]=gt.exports.useState(),[T,F]=gt.exports.useState(e),[X,Z]=gt.exports.useState(!1),[ue,H]=gt.exports.useState(!1),[V,B]=gt.exports.useState(!1),[ae,G]=gt.exports.useState(),[j,w]=gt.exports.useState();gt.exports.useEffect(()=>{Z(Xo.exports.isLoggedIn())},[]),gt.exports.useEffect(()=>{(async()=>{var ne,te;const ie=await s(l[0],l[1]);if(C(ie),((ne=ie==null?void 0:ie.properties)==null?void 0:ne.ISO_A3)&&Pw[ie.properties.ISO_A3]){const he=Pw[ie.properties.ISO_A3];E(he);const xe=he.defaultComment+" "+((te=e.properties)==null?void 0:te.id);w(xe)}})()},[e]),gt.exports.useEffect(()=>{console.log(T.properties)},[T]);const k=gt.exports.useCallback(async()=>{const ie=await R4.openReverseGeocoder([l[0],l[1]]);F(ne=>{const te={properties:{"addr:province":ie.prefecture,"addr:city":ie.city,...ne.properties}};return{...ne,...te}})},[]),U=gt.exports.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const ie=await f(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",ie),G(ie)},[T]),K=gt.exports.useCallback(async ie=>{var Ie,Pe,$e;B(!0),ie.preventDefault();const ne=new FormData(ie.currentTarget),te=JSON.parse((Ie=e.properties)==null?void 0:Ie.tags);ne.forEach((Ne,qe)=>{typeof Ne=="string"&&Ne.length>0&&qe!=="comment"&&qe!=="source"&&(te[qe]=Ne)});const he={type:"way",id:e.id,version:(Pe=e.properties)==null?void 0:Pe.version,tags:te,nodes:JSON.parse(($e=e.properties)==null?void 0:$e.nodes)};console.info(JSON.stringify(he,null,2));const xe={create:[],modify:[he],delete:[]},_e=ne.get("comment");_e&&(r1.comment=_e.toString());const Be=ne.get("source");Be&&(r1.source=Be.toString()),await Xo.exports.uploadChangeset(r1,xe),B(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),r()},[e]),Y=gt.exports.useCallback(()=>{H(!0)},[]);return T.properties?Hn("div",{children:[Hn("div",{children:["OSM:"," ",Rt("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",Rt(z4,{feature:T}),S&&Hn("span",{children:[" | ","Address:"," ",Rt(mM,{feature:T,fields:S})]})]}),u?Rt(Qa,{icon:hy,spin:!0}):Rt(Ta,{children:S?Hn("form",{onSubmit:K,children:[Rt("div",{className:"flex flex-wrap",children:Rt(e1,{feature:T,fieldOption:S.postcodeField,onChange:Y})}),Rt("div",{className:"flex flex-wrap",children:S.mainFields.map(ie=>Rt(e1,{feature:T,fieldOption:ie,onChange:Y,suggestList:ae},ie.key))}),Rt("div",{className:"flex flex-wrap",children:S.detailFields.map(ie=>Rt(e1,{feature:T,fieldOption:ie,onChange:Y},ie.key))}),Hn("div",{className:"flex flex-wrap",children:[Rt(wM,{}),Rt(gM,{defaultValue:j})]}),Rt("div",{className:"flex flex-wrap",children:Hn("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[Rt("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((ve=_==null?void 0:_.properties)==null?void 0:ve.ISO_A3)==="JPN"&&Rt("button",{type:"button",onClick:k,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),Hn("button",{type:"button",disabled:g,onClick:U,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",g&&Rt(Qa,{icon:hy,spin:!0})]}),Rt("button",{disabled:!X||V||!ue,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!X&&Hn(Ta,{children:[Rt("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),Rt(M4,{})]})]})})]}):Rt("div",{className:"flex flex-wrap",children:Hn("div",{className:"w-full mb-6 md:mb-0",children:[Hn("div",{className:"py-2",children:[Hn("p",{children:["Sorry, Address editor in this country"," ",(be=_==null?void 0:_.properties)==null?void 0:be.NAME," (ISO code:",(ee=_==null?void 0:_.properties)==null?void 0:ee.ISO_A3,") does not support yet."]}),Rt("p",{children:Rt("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),Rt("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function SM(e,t){const[r,s]=gt.exports.useState(e);return gt.exports.useEffect(()=>{const u=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(u)}},[e,t]),r}const CM={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"\xA9 OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},TM={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function AM(){const e=gt.exports.useRef(null),[t,r]=gt.exports.useState(),s=SM(t,2500),u=gt.exports.useRef(null),[f,g]=gt.exports.useState({type:"FeatureCollection",features:[]}),[l,_]=gt.exports.useState("auto"),[C,S]=gt.exports.useState(),[E,T]=gt.exports.useState([]),{fetchOverpassBuildings:F,loadingOverpass:X}=Y6();gt.exports.useEffect(()=>{setTimeout(()=>{var w;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(w=u.current)==null||w.trigger())},500)},[]);const Z=gt.exports.useCallback(w=>{const k=w.target.getCenter(),U=w.target.getZoom();r({zoom:U,latitude:k.lat,longitude:k.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),ue=gt.exports.useCallback(w=>{r(w.viewState)},[]),H=gt.exports.useCallback(w=>{r(w.viewState)},[]);gt.exports.useEffect(()=>{(async()=>{if(!s)return;const w=s,k=await F(w.latitude,w.longitude,w.zoom);g(k)})()},[s]);const V=gt.exports.useCallback(w=>{var de;_("pointer");const{features:k,point:{x:U,y:K}}=w,Y=k&&k[0];Y?((de=e.current)==null||de.setFeatureState({source:"buildings-source",id:Y.id},{hover:!0}),S({feature:Y,x:U,y:K})):S(void 0)},[]),B=gt.exports.useCallback(w=>{var k;_("auto"),(k=e.current)==null||k.querySourceFeatures("buildings-source").map(U=>{var K;(K=e.current)==null||K.setFeatureState({source:"buildings-source",id:U.id},{hover:!1})}),S(void 0)},[]),ae=gt.exports.useCallback(w=>{var U;G();const k=w.features&&w.features[0];!k||((U=e.current)==null||U.setFeatureState({source:"buildings-source",id:k.id},{select:!0}),T([k]))},[]),G=gt.exports.useCallback(()=>{var w;(w=e.current)==null||w.querySourceFeatures("buildings-source").map(k=>{var U;(U=e.current)==null||U.setFeatureState({source:"buildings-source",id:k.id},{select:!1})}),T([])},[]),j=gt.exports.useMemo(()=>{let w=25;return t&&(w=t.zoom<18?20:t.zoom<19?25:35),f.features.map((k,U)=>!k.properties||!k.properties.center?null:Rt(CC,{style:{cursor:"pointer"},longitude:k.properties.center[0],latitude:k.properties.center[1],anchor:"center",children:Rt(mI,{feature:k,size:w})},`marker-${U}`))},[f,t]);return Hn("div",{children:[Rt(KA,{}),Rt("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:Rt(vI,{viewState:t})}),Hn("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[E.length>0&&Rt("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:Rt("div",{style:{padding:"10px"},children:E.map(w=>Rt(EM,{feature:w,onCancel:G,onSubmit:G},w.id))})}),Hn(Dv,{ref:e,...t,onMove:ue,onMoveEnd:H,onLoad:Z,interactiveLayerIds:["buildings-layer-fill"],onClick:ae,onMouseEnter:V,onMouseLeave:B,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:H3,style:{width:"100%",height:"100%"},mapStyle:CM,children:[Rt(FC,{id:"buildings-source",type:"geojson",data:f,children:Rt(NC,{...TM})}),Rt(MC,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),Rt(PC,{ref:u,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),Rt("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||(t==null?void 0:t.zoom)&&t.zoom<16?Rt(Qa,{size:"2x",icon:NA}):X?Rt(Qa,{size:"2x",icon:hy,spin:!0}):Rt(Qa,{size:"2x",icon:UA})}),j,C&&Hn("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:C.x+5,top:C.y+5},children:[Rt(z4,{feature:C.feature}),Rt("br",{}),Rt(gI,{feature:C.feature}),Rt(YA,{feature:C.feature})]})]})]})]})}var q6={},b0={};b0.byteLength=kM;b0.toByteArray=zM;b0.fromByteArray=RM;var Ka=[],Vo=[],IM=typeof Uint8Array!="undefined"?Uint8Array:Array,i1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ic=0,PM=i1.length;Ic<PM;++Ic)Ka[Ic]=i1[Ic],Vo[i1.charCodeAt(Ic)]=Ic;Vo["-".charCodeAt(0)]=62;Vo["_".charCodeAt(0)]=63;function J6(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var s=r===t?0:4-r%4;return[r,s]}function kM(e){var t=J6(e),r=t[0],s=t[1];return(r+s)*3/4-s}function MM(e,t,r){return(t+r)*3/4-r}function zM(e){var t,r=J6(e),s=r[0],u=r[1],f=new IM(MM(e,s,u)),g=0,l=u>0?s-4:s,_;for(_=0;_<l;_+=4)t=Vo[e.charCodeAt(_)]<<18|Vo[e.charCodeAt(_+1)]<<12|Vo[e.charCodeAt(_+2)]<<6|Vo[e.charCodeAt(_+3)],f[g++]=t>>16&255,f[g++]=t>>8&255,f[g++]=t&255;return u===2&&(t=Vo[e.charCodeAt(_)]<<2|Vo[e.charCodeAt(_+1)]>>4,f[g++]=t&255),u===1&&(t=Vo[e.charCodeAt(_)]<<10|Vo[e.charCodeAt(_+1)]<<4|Vo[e.charCodeAt(_+2)]>>2,f[g++]=t>>8&255,f[g++]=t&255),f}function LM(e){return Ka[e>>18&63]+Ka[e>>12&63]+Ka[e>>6&63]+Ka[e&63]}function OM(e,t,r){for(var s,u=[],f=t;f<r;f+=3)s=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),u.push(LM(s));return u.join("")}function RM(e){for(var t,r=e.length,s=r%3,u=[],f=16383,g=0,l=r-s;g<l;g+=f)u.push(OM(e,g,g+f>l?l:g+f));return s===1?(t=e[r-1],u.push(Ka[t>>2]+Ka[t<<4&63]+"==")):s===2&&(t=(e[r-2]<<8)+e[r-1],u.push(Ka[t>>10]+Ka[t>>4&63]+Ka[t<<2&63]+"=")),u.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=b0,r=g0,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=V,e.INSPECT_MAX_BYTES=50;const u=2147483647;e.kMaxLength=u,l.TYPED_ARRAY_SUPPORT=f(),!l.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const se=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(se,A),se.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.byteOffset}});function g(se){if(se>u)throw new RangeError('The value "'+se+'" is invalid for option "size"');const A=new Uint8Array(se);return Object.setPrototypeOf(A,l.prototype),A}function l(se,A,z){if(typeof se=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(se)}return _(se,A,z)}l.poolSize=8192;function _(se,A,z){if(typeof se=="string")return T(se,A);if(ArrayBuffer.isView(se))return X(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(O(se,ArrayBuffer)||se&&O(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(O(se,SharedArrayBuffer)||se&&O(se.buffer,SharedArrayBuffer)))return Z(se,A,z);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const we=se.valueOf&&se.valueOf();if(we!=null&&we!==se)return l.from(we,A,z);const je=ue(se);if(je)return je;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return l.from(se[Symbol.toPrimitive]("string"),A,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}l.from=function(se,A,z){return _(se,A,z)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function C(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function S(se,A,z){return C(se),se<=0?g(se):A!==void 0?typeof z=="string"?g(se).fill(A,z):g(se).fill(A):g(se)}l.alloc=function(se,A,z){return S(se,A,z)};function E(se){return C(se),g(se<0?0:H(se)|0)}l.allocUnsafe=function(se){return E(se)},l.allocUnsafeSlow=function(se){return E(se)};function T(se,A){if((typeof A!="string"||A==="")&&(A="utf8"),!l.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const z=B(se,A)|0;let we=g(z);const je=we.write(se,A);return je!==z&&(we=we.slice(0,je)),we}function F(se){const A=se.length<0?0:H(se.length)|0,z=g(A);for(let we=0;we<A;we+=1)z[we]=se[we]&255;return z}function X(se){if(O(se,Uint8Array)){const A=new Uint8Array(se);return Z(A.buffer,A.byteOffset,A.byteLength)}return F(se)}function Z(se,A,z){if(A<0||se.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<A+(z||0))throw new RangeError('"length" is outside of buffer bounds');let we;return A===void 0&&z===void 0?we=new Uint8Array(se):z===void 0?we=new Uint8Array(se,A):we=new Uint8Array(se,A,z),Object.setPrototypeOf(we,l.prototype),we}function ue(se){if(l.isBuffer(se)){const A=H(se.length)|0,z=g(A);return z.length===0||se.copy(z,0,0,A),z}if(se.length!==void 0)return typeof se.length!="number"||pe(se.length)?g(0):F(se);if(se.type==="Buffer"&&Array.isArray(se.data))return F(se.data)}function H(se){if(se>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return se|0}function V(se){return+se!=se&&(se=0),l.alloc(+se)}l.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==l.prototype},l.compare=function(A,z){if(O(A,Uint8Array)&&(A=l.from(A,A.offset,A.byteLength)),O(z,Uint8Array)&&(z=l.from(z,z.offset,z.byteLength)),!l.isBuffer(A)||!l.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===z)return 0;let we=A.length,je=z.length;for(let Xe=0,Qe=Math.min(we,je);Xe<Qe;++Xe)if(A[Xe]!==z[Xe]){we=A[Xe],je=z[Xe];break}return we<je?-1:je<we?1:0},l.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(A,z){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return l.alloc(0);let we;if(z===void 0)for(z=0,we=0;we<A.length;++we)z+=A[we].length;const je=l.allocUnsafe(z);let Xe=0;for(we=0;we<A.length;++we){let Qe=A[we];if(O(Qe,Uint8Array))Xe+Qe.length>je.length?(l.isBuffer(Qe)||(Qe=l.from(Qe)),Qe.copy(je,Xe)):Uint8Array.prototype.set.call(je,Qe,Xe);else if(l.isBuffer(Qe))Qe.copy(je,Xe);else throw new TypeError('"list" argument must be an Array of Buffers');Xe+=Qe.length}return je};function B(se,A){if(l.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||O(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const z=se.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&z===0)return 0;let je=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return wn(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return Ee(se).length;default:if(je)return we?-1:wn(se).length;A=(""+A).toLowerCase(),je=!0}}l.byteLength=B;function ae(se,A,z){let we=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,A>>>=0,z<=A))return"";for(se||(se="utf8");;)switch(se){case"hex":return he(this,A,z);case"utf8":case"utf-8":return be(this,A,z);case"ascii":return ne(this,A,z);case"latin1":case"binary":return te(this,A,z);case"base64":return ve(this,A,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,A,z);default:if(we)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),we=!0}}l.prototype._isBuffer=!0;function G(se,A,z){const we=se[A];se[A]=se[z],se[z]=we}l.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<A;z+=2)G(this,z,z+1);return this},l.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<A;z+=4)G(this,z,z+3),G(this,z+1,z+2);return this},l.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<A;z+=8)G(this,z,z+7),G(this,z+1,z+6),G(this,z+2,z+5),G(this,z+3,z+4);return this},l.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?be(this,0,A):ae.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(A){if(!l.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:l.compare(this,A)===0},l.prototype.inspect=function(){let A="";const z=e.INSPECT_MAX_BYTES;return A=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(A+=" ... "),"<Buffer "+A+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(A,z,we,je,Xe){if(O(A,Uint8Array)&&(A=l.from(A,A.offset,A.byteLength)),!l.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(z===void 0&&(z=0),we===void 0&&(we=A?A.length:0),je===void 0&&(je=0),Xe===void 0&&(Xe=this.length),z<0||we>A.length||je<0||Xe>this.length)throw new RangeError("out of range index");if(je>=Xe&&z>=we)return 0;if(je>=Xe)return-1;if(z>=we)return 1;if(z>>>=0,we>>>=0,je>>>=0,Xe>>>=0,this===A)return 0;let Qe=Xe-je,Ht=we-z;const Sn=Math.min(Qe,Ht),fn=this.slice(je,Xe),ft=A.slice(z,we);for(let Mt=0;Mt<Sn;++Mt)if(fn[Mt]!==ft[Mt]){Qe=fn[Mt],Ht=ft[Mt];break}return Qe<Ht?-1:Ht<Qe?1:0};function j(se,A,z,we,je){if(se.length===0)return-1;if(typeof z=="string"?(we=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,pe(z)&&(z=je?0:se.length-1),z<0&&(z=se.length+z),z>=se.length){if(je)return-1;z=se.length-1}else if(z<0)if(je)z=0;else return-1;if(typeof A=="string"&&(A=l.from(A,we)),l.isBuffer(A))return A.length===0?-1:w(se,A,z,we,je);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?je?Uint8Array.prototype.indexOf.call(se,A,z):Uint8Array.prototype.lastIndexOf.call(se,A,z):w(se,[A],z,we,je);throw new TypeError("val must be string, number or Buffer")}function w(se,A,z,we,je){let Xe=1,Qe=se.length,Ht=A.length;if(we!==void 0&&(we=String(we).toLowerCase(),we==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(se.length<2||A.length<2)return-1;Xe=2,Qe/=2,Ht/=2,z/=2}function Sn(ft,Mt){return Xe===1?ft[Mt]:ft.readUInt16BE(Mt*Xe)}let fn;if(je){let ft=-1;for(fn=z;fn<Qe;fn++)if(Sn(se,fn)===Sn(A,ft===-1?0:fn-ft)){if(ft===-1&&(ft=fn),fn-ft+1===Ht)return ft*Xe}else ft!==-1&&(fn-=fn-ft),ft=-1}else for(z+Ht>Qe&&(z=Qe-Ht),fn=z;fn>=0;fn--){let ft=!0;for(let Mt=0;Mt<Ht;Mt++)if(Sn(se,fn+Mt)!==Sn(A,Mt)){ft=!1;break}if(ft)return fn}return-1}l.prototype.includes=function(A,z,we){return this.indexOf(A,z,we)!==-1},l.prototype.indexOf=function(A,z,we){return j(this,A,z,we,!0)},l.prototype.lastIndexOf=function(A,z,we){return j(this,A,z,we,!1)};function k(se,A,z,we){z=Number(z)||0;const je=se.length-z;we?(we=Number(we),we>je&&(we=je)):we=je;const Xe=A.length;we>Xe/2&&(we=Xe/2);let Qe;for(Qe=0;Qe<we;++Qe){const Ht=parseInt(A.substr(Qe*2,2),16);if(pe(Ht))return Qe;se[z+Qe]=Ht}return Qe}function U(se,A,z,we){return R(wn(A,se.length-z),se,z,we)}function K(se,A,z,we){return R(on(A),se,z,we)}function Y(se,A,z,we){return R(Ee(A),se,z,we)}function de(se,A,z,we){return R(En(A,se.length-z),se,z,we)}l.prototype.write=function(A,z,we,je){if(z===void 0)je="utf8",we=this.length,z=0;else if(we===void 0&&typeof z=="string")je=z,we=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(we)?(we=we>>>0,je===void 0&&(je="utf8")):(je=we,we=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Xe=this.length-z;if((we===void 0||we>Xe)&&(we=Xe),A.length>0&&(we<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");je||(je="utf8");let Qe=!1;for(;;)switch(je){case"hex":return k(this,A,z,we);case"utf8":case"utf-8":return U(this,A,z,we);case"ascii":case"latin1":case"binary":return K(this,A,z,we);case"base64":return Y(this,A,z,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,A,z,we);default:if(Qe)throw new TypeError("Unknown encoding: "+je);je=(""+je).toLowerCase(),Qe=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ve(se,A,z){return A===0&&z===se.length?t.fromByteArray(se):t.fromByteArray(se.slice(A,z))}function be(se,A,z){z=Math.min(se.length,z);const we=[];let je=A;for(;je<z;){const Xe=se[je];let Qe=null,Ht=Xe>239?4:Xe>223?3:Xe>191?2:1;if(je+Ht<=z){let Sn,fn,ft,Mt;switch(Ht){case 1:Xe<128&&(Qe=Xe);break;case 2:Sn=se[je+1],(Sn&192)===128&&(Mt=(Xe&31)<<6|Sn&63,Mt>127&&(Qe=Mt));break;case 3:Sn=se[je+1],fn=se[je+2],(Sn&192)===128&&(fn&192)===128&&(Mt=(Xe&15)<<12|(Sn&63)<<6|fn&63,Mt>2047&&(Mt<55296||Mt>57343)&&(Qe=Mt));break;case 4:Sn=se[je+1],fn=se[je+2],ft=se[je+3],(Sn&192)===128&&(fn&192)===128&&(ft&192)===128&&(Mt=(Xe&15)<<18|(Sn&63)<<12|(fn&63)<<6|ft&63,Mt>65535&&Mt<1114112&&(Qe=Mt))}}Qe===null?(Qe=65533,Ht=1):Qe>65535&&(Qe-=65536,we.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),we.push(Qe),je+=Ht}return ie(we)}const ee=4096;function ie(se){const A=se.length;if(A<=ee)return String.fromCharCode.apply(String,se);let z="",we=0;for(;we<A;)z+=String.fromCharCode.apply(String,se.slice(we,we+=ee));return z}function ne(se,A,z){let we="";z=Math.min(se.length,z);for(let je=A;je<z;++je)we+=String.fromCharCode(se[je]&127);return we}function te(se,A,z){let we="";z=Math.min(se.length,z);for(let je=A;je<z;++je)we+=String.fromCharCode(se[je]);return we}function he(se,A,z){const we=se.length;(!A||A<0)&&(A=0),(!z||z<0||z>we)&&(z=we);let je="";for(let Xe=A;Xe<z;++Xe)je+=ze[se[Xe]];return je}function xe(se,A,z){const we=se.slice(A,z);let je="";for(let Xe=0;Xe<we.length-1;Xe+=2)je+=String.fromCharCode(we[Xe]+we[Xe+1]*256);return je}l.prototype.slice=function(A,z){const we=this.length;A=~~A,z=z===void 0?we:~~z,A<0?(A+=we,A<0&&(A=0)):A>we&&(A=we),z<0?(z+=we,z<0&&(z=0)):z>we&&(z=we),z<A&&(z=A);const je=this.subarray(A,z);return Object.setPrototypeOf(je,l.prototype),je};function _e(se,A,z){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+A>z)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(A,z,we){A=A>>>0,z=z>>>0,we||_e(A,z,this.length);let je=this[A],Xe=1,Qe=0;for(;++Qe<z&&(Xe*=256);)je+=this[A+Qe]*Xe;return je},l.prototype.readUintBE=l.prototype.readUIntBE=function(A,z,we){A=A>>>0,z=z>>>0,we||_e(A,z,this.length);let je=this[A+--z],Xe=1;for(;z>0&&(Xe*=256);)je+=this[A+--z]*Xe;return je},l.prototype.readUint8=l.prototype.readUInt8=function(A,z){return A=A>>>0,z||_e(A,1,this.length),this[A]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(A,z){return A=A>>>0,z||_e(A,2,this.length),this[A]|this[A+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(A,z){return A=A>>>0,z||_e(A,2,this.length),this[A]<<8|this[A+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(A,z){return A=A>>>0,z||_e(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(A,z){return A=A>>>0,z||_e(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},l.prototype.readBigUInt64LE=Ye(function(A){A=A>>>0,Nt(A,"offset");const z=this[A],we=this[A+7];(z===void 0||we===void 0)&&Bt(A,this.length-8);const je=z+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,Xe=this[++A]+this[++A]*2**8+this[++A]*2**16+we*2**24;return BigInt(je)+(BigInt(Xe)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ye(function(A){A=A>>>0,Nt(A,"offset");const z=this[A],we=this[A+7];(z===void 0||we===void 0)&&Bt(A,this.length-8);const je=z*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],Xe=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+we;return(BigInt(je)<<BigInt(32))+BigInt(Xe)}),l.prototype.readIntLE=function(A,z,we){A=A>>>0,z=z>>>0,we||_e(A,z,this.length);let je=this[A],Xe=1,Qe=0;for(;++Qe<z&&(Xe*=256);)je+=this[A+Qe]*Xe;return Xe*=128,je>=Xe&&(je-=Math.pow(2,8*z)),je},l.prototype.readIntBE=function(A,z,we){A=A>>>0,z=z>>>0,we||_e(A,z,this.length);let je=z,Xe=1,Qe=this[A+--je];for(;je>0&&(Xe*=256);)Qe+=this[A+--je]*Xe;return Xe*=128,Qe>=Xe&&(Qe-=Math.pow(2,8*z)),Qe},l.prototype.readInt8=function(A,z){return A=A>>>0,z||_e(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},l.prototype.readInt16LE=function(A,z){A=A>>>0,z||_e(A,2,this.length);const we=this[A]|this[A+1]<<8;return we&32768?we|4294901760:we},l.prototype.readInt16BE=function(A,z){A=A>>>0,z||_e(A,2,this.length);const we=this[A+1]|this[A]<<8;return we&32768?we|4294901760:we},l.prototype.readInt32LE=function(A,z){return A=A>>>0,z||_e(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},l.prototype.readInt32BE=function(A,z){return A=A>>>0,z||_e(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},l.prototype.readBigInt64LE=Ye(function(A){A=A>>>0,Nt(A,"offset");const z=this[A],we=this[A+7];(z===void 0||we===void 0)&&Bt(A,this.length-8);const je=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(we<<24);return(BigInt(je)<<BigInt(32))+BigInt(z+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),l.prototype.readBigInt64BE=Ye(function(A){A=A>>>0,Nt(A,"offset");const z=this[A],we=this[A+7];(z===void 0||we===void 0)&&Bt(A,this.length-8);const je=(z<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(je)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+we)}),l.prototype.readFloatLE=function(A,z){return A=A>>>0,z||_e(A,4,this.length),r.read(this,A,!0,23,4)},l.prototype.readFloatBE=function(A,z){return A=A>>>0,z||_e(A,4,this.length),r.read(this,A,!1,23,4)},l.prototype.readDoubleLE=function(A,z){return A=A>>>0,z||_e(A,8,this.length),r.read(this,A,!0,52,8)},l.prototype.readDoubleBE=function(A,z){return A=A>>>0,z||_e(A,8,this.length),r.read(this,A,!1,52,8)};function Be(se,A,z,we,je,Xe){if(!l.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>je||A<Xe)throw new RangeError('"value" argument is out of bounds');if(z+we>se.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(A,z,we,je){if(A=+A,z=z>>>0,we=we>>>0,!je){const Ht=Math.pow(2,8*we)-1;Be(this,A,z,we,Ht,0)}let Xe=1,Qe=0;for(this[z]=A&255;++Qe<we&&(Xe*=256);)this[z+Qe]=A/Xe&255;return z+we},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(A,z,we,je){if(A=+A,z=z>>>0,we=we>>>0,!je){const Ht=Math.pow(2,8*we)-1;Be(this,A,z,we,Ht,0)}let Xe=we-1,Qe=1;for(this[z+Xe]=A&255;--Xe>=0&&(Qe*=256);)this[z+Xe]=A/Qe&255;return z+we},l.prototype.writeUint8=l.prototype.writeUInt8=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,1,255,0),this[z]=A&255,z+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,2,65535,0),this[z]=A&255,this[z+1]=A>>>8,z+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,2,65535,0),this[z]=A>>>8,this[z+1]=A&255,z+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,4,4294967295,0),this[z+3]=A>>>24,this[z+2]=A>>>16,this[z+1]=A>>>8,this[z]=A&255,z+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,4,4294967295,0),this[z]=A>>>24,this[z+1]=A>>>16,this[z+2]=A>>>8,this[z+3]=A&255,z+4};function Ie(se,A,z,we,je){Et(A,we,je,se,z,7);let Xe=Number(A&BigInt(4294967295));se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe;let Qe=Number(A>>BigInt(32)&BigInt(4294967295));return se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,z}function Pe(se,A,z,we,je){Et(A,we,je,se,z,7);let Xe=Number(A&BigInt(4294967295));se[z+7]=Xe,Xe=Xe>>8,se[z+6]=Xe,Xe=Xe>>8,se[z+5]=Xe,Xe=Xe>>8,se[z+4]=Xe;let Qe=Number(A>>BigInt(32)&BigInt(4294967295));return se[z+3]=Qe,Qe=Qe>>8,se[z+2]=Qe,Qe=Qe>>8,se[z+1]=Qe,Qe=Qe>>8,se[z]=Qe,z+8}l.prototype.writeBigUInt64LE=Ye(function(A,z=0){return Ie(this,A,z,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ye(function(A,z=0){return Pe(this,A,z,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(A,z,we,je){if(A=+A,z=z>>>0,!je){const Sn=Math.pow(2,8*we-1);Be(this,A,z,we,Sn-1,-Sn)}let Xe=0,Qe=1,Ht=0;for(this[z]=A&255;++Xe<we&&(Qe*=256);)A<0&&Ht===0&&this[z+Xe-1]!==0&&(Ht=1),this[z+Xe]=(A/Qe>>0)-Ht&255;return z+we},l.prototype.writeIntBE=function(A,z,we,je){if(A=+A,z=z>>>0,!je){const Sn=Math.pow(2,8*we-1);Be(this,A,z,we,Sn-1,-Sn)}let Xe=we-1,Qe=1,Ht=0;for(this[z+Xe]=A&255;--Xe>=0&&(Qe*=256);)A<0&&Ht===0&&this[z+Xe+1]!==0&&(Ht=1),this[z+Xe]=(A/Qe>>0)-Ht&255;return z+we},l.prototype.writeInt8=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,1,127,-128),A<0&&(A=255+A+1),this[z]=A&255,z+1},l.prototype.writeInt16LE=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,2,32767,-32768),this[z]=A&255,this[z+1]=A>>>8,z+2},l.prototype.writeInt16BE=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,2,32767,-32768),this[z]=A>>>8,this[z+1]=A&255,z+2},l.prototype.writeInt32LE=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,4,2147483647,-2147483648),this[z]=A&255,this[z+1]=A>>>8,this[z+2]=A>>>16,this[z+3]=A>>>24,z+4},l.prototype.writeInt32BE=function(A,z,we){return A=+A,z=z>>>0,we||Be(this,A,z,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[z]=A>>>24,this[z+1]=A>>>16,this[z+2]=A>>>8,this[z+3]=A&255,z+4},l.prototype.writeBigInt64LE=Ye(function(A,z=0){return Ie(this,A,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ye(function(A,z=0){return Pe(this,A,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $e(se,A,z,we,je,Xe){if(z+we>se.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function Ne(se,A,z,we,je){return A=+A,z=z>>>0,je||$e(se,A,z,4),r.write(se,A,z,we,23,4),z+4}l.prototype.writeFloatLE=function(A,z,we){return Ne(this,A,z,!0,we)},l.prototype.writeFloatBE=function(A,z,we){return Ne(this,A,z,!1,we)};function qe(se,A,z,we,je){return A=+A,z=z>>>0,je||$e(se,A,z,8),r.write(se,A,z,we,52,8),z+8}l.prototype.writeDoubleLE=function(A,z,we){return qe(this,A,z,!0,we)},l.prototype.writeDoubleBE=function(A,z,we){return qe(this,A,z,!1,we)},l.prototype.copy=function(A,z,we,je){if(!l.isBuffer(A))throw new TypeError("argument should be a Buffer");if(we||(we=0),!je&&je!==0&&(je=this.length),z>=A.length&&(z=A.length),z||(z=0),je>0&&je<we&&(je=we),je===we||A.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("Index out of range");if(je<0)throw new RangeError("sourceEnd out of bounds");je>this.length&&(je=this.length),A.length-z<je-we&&(je=A.length-z+we);const Xe=je-we;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,we,je):Uint8Array.prototype.set.call(A,this.subarray(we,je),z),Xe},l.prototype.fill=function(A,z,we,je){if(typeof A=="string"){if(typeof z=="string"?(je=z,z=0,we=this.length):typeof we=="string"&&(je=we,we=this.length),je!==void 0&&typeof je!="string")throw new TypeError("encoding must be a string");if(typeof je=="string"&&!l.isEncoding(je))throw new TypeError("Unknown encoding: "+je);if(A.length===1){const Qe=A.charCodeAt(0);(je==="utf8"&&Qe<128||je==="latin1")&&(A=Qe)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(z<0||this.length<z||this.length<we)throw new RangeError("Out of range index");if(we<=z)return this;z=z>>>0,we=we===void 0?this.length:we>>>0,A||(A=0);let Xe;if(typeof A=="number")for(Xe=z;Xe<we;++Xe)this[Xe]=A;else{const Qe=l.isBuffer(A)?A:l.from(A,je),Ht=Qe.length;if(Ht===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Xe=0;Xe<we-z;++Xe)this[Xe+z]=Qe[Xe%Ht]}return this};const st={};function yt(se,A,z){st[se]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:je,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}yt("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),yt("ERR_INVALID_ARG_TYPE",function(se,A){return`The "${se}" argument must be of type number. Received type ${typeof A}`},TypeError),yt("ERR_OUT_OF_RANGE",function(se,A,z){let we=`The value of "${se}" is out of range.`,je=z;return Number.isInteger(z)&&Math.abs(z)>2**32?je=Pt(String(z)):typeof z=="bigint"&&(je=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(je=Pt(je)),je+="n"),we+=` It must be ${A}. Received ${je}`,we},RangeError);function Pt(se){let A="",z=se.length;const we=se[0]==="-"?1:0;for(;z>=we+4;z-=3)A=`_${se.slice(z-3,z)}${A}`;return`${se.slice(0,z)}${A}`}function ht(se,A,z){Nt(A,"offset"),(se[A]===void 0||se[A+z]===void 0)&&Bt(A,se.length-(z+1))}function Et(se,A,z,we,je,Xe){if(se>z||se<A){const Qe=typeof A=="bigint"?"n":"";let Ht;throw Xe>3?A===0||A===BigInt(0)?Ht=`>= 0${Qe} and < 2${Qe} ** ${(Xe+1)*8}${Qe}`:Ht=`>= -(2${Qe} ** ${(Xe+1)*8-1}${Qe}) and < 2 ** ${(Xe+1)*8-1}${Qe}`:Ht=`>= ${A}${Qe} and <= ${z}${Qe}`,new st.ERR_OUT_OF_RANGE("value",Ht,se)}ht(we,je,Xe)}function Nt(se,A){if(typeof se!="number")throw new st.ERR_INVALID_ARG_TYPE(A,"number",se)}function Bt(se,A,z){throw Math.floor(se)!==se?(Nt(se,z),new st.ERR_OUT_OF_RANGE(z||"offset","an integer",se)):A<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${A}`,se)}const cn=/[^+/0-9A-Za-z-_]/g;function Tn(se){if(se=se.split("=")[0],se=se.trim().replace(cn,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function wn(se,A){A=A||1/0;let z;const we=se.length;let je=null;const Xe=[];for(let Qe=0;Qe<we;++Qe){if(z=se.charCodeAt(Qe),z>55295&&z<57344){if(!je){if(z>56319){(A-=3)>-1&&Xe.push(239,191,189);continue}else if(Qe+1===we){(A-=3)>-1&&Xe.push(239,191,189);continue}je=z;continue}if(z<56320){(A-=3)>-1&&Xe.push(239,191,189),je=z;continue}z=(je-55296<<10|z-56320)+65536}else je&&(A-=3)>-1&&Xe.push(239,191,189);if(je=null,z<128){if((A-=1)<0)break;Xe.push(z)}else if(z<2048){if((A-=2)<0)break;Xe.push(z>>6|192,z&63|128)}else if(z<65536){if((A-=3)<0)break;Xe.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((A-=4)<0)break;Xe.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return Xe}function on(se){const A=[];for(let z=0;z<se.length;++z)A.push(se.charCodeAt(z)&255);return A}function En(se,A){let z,we,je;const Xe=[];for(let Qe=0;Qe<se.length&&!((A-=2)<0);++Qe)z=se.charCodeAt(Qe),we=z>>8,je=z%256,Xe.push(je),Xe.push(we);return Xe}function Ee(se){return t.toByteArray(Tn(se))}function R(se,A,z,we){let je;for(je=0;je<we&&!(je+z>=A.length||je>=se.length);++je)A[je+z]=se[je];return je}function O(se,A){return se instanceof A||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===A.name}function pe(se){return se!==se}const ze=function(){const se="0123456789abcdef",A=new Array(256);for(let z=0;z<16;++z){const we=z*16;for(let je=0;je<16;++je)A[we+je]=se[z]+se[je]}return A}();function Ye(se){return typeof BigInt=="undefined"?ot:se}function ot(){throw new Error("BigInt not supported")}})(q6);window.Buffer=q6.Buffer;aC.render(Rt(Uw.StrictMode,{children:Rt(AM,{})}),document.getElementById("root"));

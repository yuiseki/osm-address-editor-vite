function jP(e,t){for(var i=0;i<t.length;i++){const l=t[i];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(l,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&l(y)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function g_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function l(){if(this instanceof l){var c=[null];c.push.apply(c,arguments);var d=Function.bind.apply(t,c);return new d}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var c=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:function(){return e[l]}})}),i}var PE={exports:{}},sg={},ME={exports:{}},Bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=Symbol.for("react.element"),DP=Symbol.for("react.portal"),BP=Symbol.for("react.fragment"),NP=Symbol.for("react.strict_mode"),UP=Symbol.for("react.profiler"),$P=Symbol.for("react.provider"),VP=Symbol.for("react.context"),GP=Symbol.for("react.forward_ref"),ZP=Symbol.for("react.suspense"),WP=Symbol.for("react.memo"),HP=Symbol.for("react.lazy"),Lw=Symbol.iterator;function XP(e){return e===null||typeof e!="object"?null:(e=Lw&&e[Lw]||e["@@iterator"],typeof e=="function"?e:null)}var kE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zE=Object.assign,LE={};function vh(e,t,i){this.props=e,this.context=t,this.refs=LE,this.updater=i||kE}vh.prototype.isReactComponent={};vh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function OE(){}OE.prototype=vh.prototype;function y_(e,t,i){this.props=e,this.context=t,this.refs=LE,this.updater=i||kE}var v_=y_.prototype=new OE;v_.constructor=y_;zE(v_,vh.prototype);v_.isPureReactComponent=!0;var Ow=Array.isArray,RE=Object.prototype.hasOwnProperty,__={current:null},FE={key:!0,ref:!0,__self:!0,__source:!0};function jE(e,t,i){var l,c={},d=null,y=null;if(t!=null)for(l in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(d=""+t.key),t)RE.call(t,l)&&!FE.hasOwnProperty(l)&&(c[l]=t[l]);var a=arguments.length-2;if(a===1)c.children=i;else if(1<a){for(var b=Array(a),w=0;w<a;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(l in a=e.defaultProps,a)c[l]===void 0&&(c[l]=a[l]);return{$$typeof:yd,type:e,key:d,ref:y,props:c,_owner:__.current}}function qP(e,t){return{$$typeof:yd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function x_(e){return typeof e=="object"&&e!==null&&e.$$typeof===yd}function KP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Rw=/\/+/g;function Iy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?KP(""+e.key):t.toString(36)}function Rp(e,t,i,l,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(d){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case yd:case DP:y=!0}}if(y)return y=e,c=c(y),e=l===""?"."+Iy(y,0):l,Ow(c)?(i="",e!=null&&(i=e.replace(Rw,"$&/")+"/"),Rp(c,t,i,"",function(w){return w})):c!=null&&(x_(c)&&(c=qP(c,i+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(Rw,"$&/")+"/")+e)),t.push(c)),1;if(y=0,l=l===""?".":l+":",Ow(e))for(var a=0;a<e.length;a++){d=e[a];var b=l+Iy(d,a);y+=Rp(d,t,i,b,c)}else if(b=XP(e),typeof b=="function")for(e=b.call(e),a=0;!(d=e.next()).done;)d=d.value,b=l+Iy(d,a++),y+=Rp(d,t,i,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function sp(e,t,i){if(e==null)return e;var l=[],c=0;return Rp(e,l,"","",function(d){return t.call(i,d,c++)}),l}function YP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var oo={current:null},Fp={transition:null},JP={ReactCurrentDispatcher:oo,ReactCurrentBatchConfig:Fp,ReactCurrentOwner:__};Bn.Children={map:sp,forEach:function(e,t,i){sp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return sp(e,function(){t++}),t},toArray:function(e){return sp(e,function(t){return t})||[]},only:function(e){if(!x_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Bn.Component=vh;Bn.Fragment=BP;Bn.Profiler=UP;Bn.PureComponent=y_;Bn.StrictMode=NP;Bn.Suspense=ZP;Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JP;Bn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=zE({},e.props),c=e.key,d=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,y=__.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(b in t)RE.call(t,b)&&!FE.hasOwnProperty(b)&&(l[b]=t[b]===void 0&&a!==void 0?a[b]:t[b])}var b=arguments.length-2;if(b===1)l.children=i;else if(1<b){a=Array(b);for(var w=0;w<b;w++)a[w]=arguments[w+2];l.children=a}return{$$typeof:yd,type:e.type,key:c,ref:d,props:l,_owner:y}};Bn.createContext=function(e){return e={$$typeof:VP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$P,_context:e},e.Consumer=e};Bn.createElement=jE;Bn.createFactory=function(e){var t=jE.bind(null,e);return t.type=e,t};Bn.createRef=function(){return{current:null}};Bn.forwardRef=function(e){return{$$typeof:GP,render:e}};Bn.isValidElement=x_;Bn.lazy=function(e){return{$$typeof:HP,_payload:{_status:-1,_result:e},_init:YP}};Bn.memo=function(e,t){return{$$typeof:WP,type:e,compare:t===void 0?null:t}};Bn.startTransition=function(e){var t=Fp.transition;Fp.transition={};try{e()}finally{Fp.transition=t}};Bn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bn.useCallback=function(e,t){return oo.current.useCallback(e,t)};Bn.useContext=function(e){return oo.current.useContext(e)};Bn.useDebugValue=function(){};Bn.useDeferredValue=function(e){return oo.current.useDeferredValue(e)};Bn.useEffect=function(e,t){return oo.current.useEffect(e,t)};Bn.useId=function(){return oo.current.useId()};Bn.useImperativeHandle=function(e,t,i){return oo.current.useImperativeHandle(e,t,i)};Bn.useInsertionEffect=function(e,t){return oo.current.useInsertionEffect(e,t)};Bn.useLayoutEffect=function(e,t){return oo.current.useLayoutEffect(e,t)};Bn.useMemo=function(e,t){return oo.current.useMemo(e,t)};Bn.useReducer=function(e,t,i){return oo.current.useReducer(e,t,i)};Bn.useRef=function(e){return oo.current.useRef(e)};Bn.useState=function(e){return oo.current.useState(e)};Bn.useSyncExternalStore=function(e,t,i){return oo.current.useSyncExternalStore(e,t,i)};Bn.useTransition=function(){return oo.current.useTransition()};Bn.version="18.2.0";ME.exports=Bn;var yt=ME.exports;const DE=gd(yt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QP=yt,eM=Symbol.for("react.element"),tM=Symbol.for("react.fragment"),nM=Object.prototype.hasOwnProperty,rM=QP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iM={key:!0,ref:!0,__self:!0,__source:!0};function BE(e,t,i){var l,c={},d=null,y=null;i!==void 0&&(d=""+i),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(y=t.ref);for(l in t)nM.call(t,l)&&!iM.hasOwnProperty(l)&&(c[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)c[l]===void 0&&(c[l]=t[l]);return{$$typeof:eM,type:e,key:d,ref:y,props:c,_owner:rM.current}}sg.Fragment=tM;sg.jsx=BE;sg.jsxs=BE;PE.exports=sg;var ft=PE.exports,NE={exports:{}},Oo={},UE={exports:{}},$E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,me){var we=re.length;re.push(me);e:for(;0<we;){var be=we-1>>>1,Be=re[be];if(0<c(Be,me))re[be]=me,re[we]=Be,we=be;else break e}}function i(re){return re.length===0?null:re[0]}function l(re){if(re.length===0)return null;var me=re[0],we=re.pop();if(we!==me){re[0]=we;e:for(var be=0,Be=re.length,Ie=Be>>>1;be<Ie;){var Oe=2*(be+1)-1,$e=re[Oe],Ve=Oe+1,ot=re[Ve];if(0>c($e,we))Ve<Be&&0>c(ot,$e)?(re[be]=ot,re[Ve]=we,be=Ve):(re[be]=$e,re[Oe]=we,be=Oe);else if(Ve<Be&&0>c(ot,we))re[be]=ot,re[Ve]=we,be=Ve;else break e}}return me}function c(re,me){var we=re.sortIndex-me.sortIndex;return we!==0?we:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var y=Date,a=y.now();e.unstable_now=function(){return y.now()-a}}var b=[],w=[],C=1,E=null,z=3,R=!1,Q=!1,K=!1,pe=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(re){for(var me=i(w);me!==null;){if(me.callback===null)l(w);else if(me.startTime<=re)l(w),me.sortIndex=me.expirationTime,t(b,me);else break;me=i(w)}}function oe(re){if(K=!1,B(re),!Q)if(i(b)!==null)Q=!0,le(W);else{var me=i(w);me!==null&&ne(oe,me.startTime-re)}}function W(re,me){Q=!1,K&&(K=!1,G(P),P=-1),R=!0;var we=z;try{for(B(me),E=i(b);E!==null&&(!(E.expirationTime>me)||re&&!H());){var be=E.callback;if(typeof be=="function"){E.callback=null,z=E.priorityLevel;var Be=be(E.expirationTime<=me);me=e.unstable_now(),typeof Be=="function"?E.callback=Be:E===i(b)&&l(b),B(me)}else l(b);E=i(b)}if(E!==null)var Ie=!0;else{var Oe=i(w);Oe!==null&&ne(oe,Oe.startTime-me),Ie=!1}return Ie}finally{E=null,z=we,R=!1}}var D=!1,S=null,P=-1,Z=5,J=-1;function H(){return!(e.unstable_now()-J<Z)}function ve(){if(S!==null){var re=e.unstable_now();J=re;var me=!0;try{me=S(!0,re)}finally{me?_e():(D=!1,S=null)}}else D=!1}var _e;if(typeof $=="function")_e=function(){$(ve)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,te=xe.port2;xe.port1.onmessage=ve,_e=function(){te.postMessage(null)}}else _e=function(){pe(ve,0)};function le(re){S=re,D||(D=!0,_e())}function ne(re,me){P=pe(function(){re(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){Q||R||(Q=!0,le(W))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(re){switch(z){case 1:case 2:case 3:var me=3;break;default:me=z}var we=z;z=me;try{return re()}finally{z=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var we=z;z=re;try{return me()}finally{z=we}},e.unstable_scheduleCallback=function(re,me,we){var be=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?be+we:be):we=be,re){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=we+Be,re={id:C++,callback:me,priorityLevel:re,startTime:we,expirationTime:Be,sortIndex:-1},we>be?(re.sortIndex=we,t(w,re),i(b)===null&&re===i(w)&&(K?(G(P),P=-1):K=!0,ne(oe,we-be))):(re.sortIndex=Be,t(b,re),Q||R||(Q=!0,le(W))),re},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(re){var me=z;return function(){var we=z;z=me;try{return re.apply(this,arguments)}finally{z=we}}}})($E);UE.exports=$E;var oM=UE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE=yt,Lo=oM;function It(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GE=new Set,Xf={};function ju(e,t){sh(e,t),sh(e+"Capture",t)}function sh(e,t){for(Xf[e]=t,e=0;e<t.length;e++)GE.add(t[e])}var za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L0=Object.prototype.hasOwnProperty,sM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fw={},jw={};function aM(e){return L0.call(jw,e)?!0:L0.call(Fw,e)?!1:sM.test(e)?jw[e]=!0:(Fw[e]=!0,!1)}function lM(e,t,i,l){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uM(e,t,i,l){if(t===null||typeof t>"u"||lM(e,t,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function so(e,t,i,l,c,d,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=y}var Si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Si[e]=new so(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Si[t]=new so(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Si[e]=new so(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Si[e]=new so(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Si[e]=new so(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Si[e]=new so(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Si[e]=new so(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Si[e]=new so(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Si[e]=new so(e,5,!1,e.toLowerCase(),null,!1,!1)});var w_=/[\-:]([a-z])/g;function b_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(w_,b_);Si[t]=new so(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(w_,b_);Si[t]=new so(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(w_,b_);Si[t]=new so(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Si[e]=new so(e,1,!1,e.toLowerCase(),null,!1,!1)});Si.xlinkHref=new so("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Si[e]=new so(e,1,!1,e.toLowerCase(),null,!0,!0)});function E_(e,t,i,l){var c=Si.hasOwnProperty(t)?Si[t]:null;(c!==null?c.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uM(t,i,c,l)&&(i=null),l||c===null?aM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,l=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,l?e.setAttributeNS(l,t,i):e.setAttribute(t,i))))}var Na=VE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ap=Symbol.for("react.element"),Oc=Symbol.for("react.portal"),Rc=Symbol.for("react.fragment"),S_=Symbol.for("react.strict_mode"),O0=Symbol.for("react.profiler"),ZE=Symbol.for("react.provider"),WE=Symbol.for("react.context"),T_=Symbol.for("react.forward_ref"),R0=Symbol.for("react.suspense"),F0=Symbol.for("react.suspense_list"),C_=Symbol.for("react.memo"),yl=Symbol.for("react.lazy"),HE=Symbol.for("react.offscreen"),Dw=Symbol.iterator;function hf(e){return e===null||typeof e!="object"?null:(e=Dw&&e[Dw]||e["@@iterator"],typeof e=="function"?e:null)}var Mr=Object.assign,Py;function xf(e){if(Py===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Py=t&&t[1]||""}return`
`+Py+e}var My=!1;function ky(e,t){if(!e||My)return"";My=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var l=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){l=w}e.call(t.prototype)}else{try{throw Error()}catch(w){l=w}e()}}catch(w){if(w&&l&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=l.stack.split(`
`),y=c.length-1,a=d.length-1;1<=y&&0<=a&&c[y]!==d[a];)a--;for(;1<=y&&0<=a;y--,a--)if(c[y]!==d[a]){if(y!==1||a!==1)do if(y--,a--,0>a||c[y]!==d[a]){var b=`
`+c[y].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=y&&0<=a);break}}}finally{My=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?xf(e):""}function cM(e){switch(e.tag){case 5:return xf(e.type);case 16:return xf("Lazy");case 13:return xf("Suspense");case 19:return xf("SuspenseList");case 0:case 2:case 15:return e=ky(e.type,!1),e;case 11:return e=ky(e.type.render,!1),e;case 1:return e=ky(e.type,!0),e;default:return""}}function j0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rc:return"Fragment";case Oc:return"Portal";case O0:return"Profiler";case S_:return"StrictMode";case R0:return"Suspense";case F0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case WE:return(e.displayName||"Context")+".Consumer";case ZE:return(e._context.displayName||"Context")+".Provider";case T_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case C_:return t=e.displayName||null,t!==null?t:j0(e.type)||"Memo";case yl:t=e._payload,e=e._init;try{return j0(e(t))}catch{}}return null}function hM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j0(t);case 8:return t===S_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function XE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fM(e){var t=XE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){l=""+y,d.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function lp(e){e._valueTracker||(e._valueTracker=fM(e))}function qE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=XE(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function rm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function D0(e,t){var i=t.checked;return Mr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Bw(e,t){var i=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;i=Rl(t.value!=null?t.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function KE(e,t){t=t.checked,t!=null&&E_(e,"checked",t,!1)}function B0(e,t){KE(e,t);var i=Rl(t.value),l=t.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?N0(e,t.type,i):t.hasOwnProperty("defaultValue")&&N0(e,t.type,Rl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nw(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function N0(e,t,i){(t!=="number"||rm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var wf=Array.isArray;function Yc(e,t,i,l){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Rl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function U0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(It(91));return Mr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Uw(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(It(92));if(wf(i)){if(1<i.length)throw Error(It(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Rl(i)}}function YE(e,t){var i=Rl(t.value),l=Rl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function $w(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function JE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?JE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var up,QE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,l,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,l,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(up=up||document.createElement("div"),up.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=up.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var zf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dM=["Webkit","ms","Moz","O"];Object.keys(zf).forEach(function(e){dM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zf[t]=zf[e]})});function eS(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||zf.hasOwnProperty(e)&&zf[e]?(""+t).trim():t+"px"}function tS(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var l=i.indexOf("--")===0,c=eS(i,t[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,c):e[i]=c}}var pM=Mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V0(e,t){if(t){if(pM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(It(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(It(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(It(61))}if(t.style!=null&&typeof t.style!="object")throw Error(It(62))}}function G0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z0=null;function A_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var W0=null,Jc=null,Qc=null;function Vw(e){if(e=xd(e)){if(typeof W0!="function")throw Error(It(280));var t=e.stateNode;t&&(t=hg(t),W0(e.stateNode,e.type,t))}}function nS(e){Jc?Qc?Qc.push(e):Qc=[e]:Jc=e}function rS(){if(Jc){var e=Jc,t=Qc;if(Qc=Jc=null,Vw(e),t)for(e=0;e<t.length;e++)Vw(t[e])}}function iS(e,t){return e(t)}function oS(){}var zy=!1;function sS(e,t,i){if(zy)return e(t,i);zy=!0;try{return iS(e,t,i)}finally{zy=!1,(Jc!==null||Qc!==null)&&(oS(),rS())}}function Kf(e,t){var i=e.stateNode;if(i===null)return null;var l=hg(i);if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(It(231,t,typeof i));return i}var H0=!1;if(za)try{var ff={};Object.defineProperty(ff,"passive",{get:function(){H0=!0}}),window.addEventListener("test",ff,ff),window.removeEventListener("test",ff,ff)}catch{H0=!1}function mM(e,t,i,l,c,d,y,a,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(C){this.onError(C)}}var Lf=!1,im=null,om=!1,X0=null,gM={onError:function(e){Lf=!0,im=e}};function yM(e,t,i,l,c,d,y,a,b){Lf=!1,im=null,mM.apply(gM,arguments)}function vM(e,t,i,l,c,d,y,a,b){if(yM.apply(this,arguments),Lf){if(Lf){var w=im;Lf=!1,im=null}else throw Error(It(198));om||(om=!0,X0=w)}}function Du(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function aS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gw(e){if(Du(e)!==e)throw Error(It(188))}function _M(e){var t=e.alternate;if(!t){if(t=Du(e),t===null)throw Error(It(188));return t!==e?null:e}for(var i=e,l=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){i=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return Gw(c),e;if(d===l)return Gw(c),t;d=d.sibling}throw Error(It(188))}if(i.return!==l.return)i=c,l=d;else{for(var y=!1,a=c.child;a;){if(a===i){y=!0,i=c,l=d;break}if(a===l){y=!0,l=c,i=d;break}a=a.sibling}if(!y){for(a=d.child;a;){if(a===i){y=!0,i=d,l=c;break}if(a===l){y=!0,l=d,i=c;break}a=a.sibling}if(!y)throw Error(It(189))}}if(i.alternate!==l)throw Error(It(190))}if(i.tag!==3)throw Error(It(188));return i.stateNode.current===i?e:t}function lS(e){return e=_M(e),e!==null?uS(e):null}function uS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uS(e);if(t!==null)return t;e=e.sibling}return null}var cS=Lo.unstable_scheduleCallback,Zw=Lo.unstable_cancelCallback,xM=Lo.unstable_shouldYield,wM=Lo.unstable_requestPaint,Vr=Lo.unstable_now,bM=Lo.unstable_getCurrentPriorityLevel,I_=Lo.unstable_ImmediatePriority,hS=Lo.unstable_UserBlockingPriority,sm=Lo.unstable_NormalPriority,EM=Lo.unstable_LowPriority,fS=Lo.unstable_IdlePriority,ag=null,Qs=null;function SM(e){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(ag,e,void 0,(e.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:AM,TM=Math.log,CM=Math.LN2;function AM(e){return e>>>=0,e===0?32:31-(TM(e)/CM|0)|0}var cp=64,hp=4194304;function bf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function am(e,t){var i=e.pendingLanes;if(i===0)return 0;var l=0,c=e.suspendedLanes,d=e.pingedLanes,y=i&268435455;if(y!==0){var a=y&~c;a!==0?l=bf(a):(d&=y,d!==0&&(l=bf(d)))}else y=i&~c,y!==0?l=bf(y):d!==0&&(l=bf(d));if(l===0)return 0;if(t!==0&&t!==l&&!(t&c)&&(c=l&-l,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(l&4&&(l|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)i=31-Cs(t),c=1<<i,l|=e[i],t&=~c;return l}function IM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PM(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var y=31-Cs(d),a=1<<y,b=c[y];b===-1?(!(a&i)||a&l)&&(c[y]=IM(a,t)):b<=t&&(e.expiredLanes|=a),d&=~a}}function q0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dS(){var e=cp;return cp<<=1,!(cp&4194240)&&(cp=64),e}function Ly(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function vd(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cs(t),e[t]=i}function MM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Cs(i),d=1<<c;t[c]=0,l[c]=-1,e[c]=-1,i&=~d}}function P_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-Cs(i),c=1<<l;c&t|e[l]&t&&(e[l]|=t),i&=~c}}var Yn=0;function pS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var mS,M_,gS,yS,vS,K0=!1,fp=[],Al=null,Il=null,Pl=null,Yf=new Map,Jf=new Map,wl=[],kM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ww(e,t){switch(e){case"focusin":case"focusout":Al=null;break;case"dragenter":case"dragleave":Il=null;break;case"mouseover":case"mouseout":Pl=null;break;case"pointerover":case"pointerout":Yf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jf.delete(t.pointerId)}}function df(e,t,i,l,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},t!==null&&(t=xd(t),t!==null&&M_(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function zM(e,t,i,l,c){switch(t){case"focusin":return Al=df(Al,e,t,i,l,c),!0;case"dragenter":return Il=df(Il,e,t,i,l,c),!0;case"mouseover":return Pl=df(Pl,e,t,i,l,c),!0;case"pointerover":var d=c.pointerId;return Yf.set(d,df(Yf.get(d)||null,e,t,i,l,c)),!0;case"gotpointercapture":return d=c.pointerId,Jf.set(d,df(Jf.get(d)||null,e,t,i,l,c)),!0}return!1}function _S(e){var t=bu(e.target);if(t!==null){var i=Du(t);if(i!==null){if(t=i.tag,t===13){if(t=aS(i),t!==null){e.blockedOn=t,vS(e.priority,function(){gS(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Y0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Z0=l,i.target.dispatchEvent(l),Z0=null}else return t=xd(i),t!==null&&M_(t),e.blockedOn=i,!1;t.shift()}return!0}function Hw(e,t,i){jp(e)&&i.delete(t)}function LM(){K0=!1,Al!==null&&jp(Al)&&(Al=null),Il!==null&&jp(Il)&&(Il=null),Pl!==null&&jp(Pl)&&(Pl=null),Yf.forEach(Hw),Jf.forEach(Hw)}function pf(e,t){e.blockedOn===t&&(e.blockedOn=null,K0||(K0=!0,Lo.unstable_scheduleCallback(Lo.unstable_NormalPriority,LM)))}function Qf(e){function t(c){return pf(c,e)}if(0<fp.length){pf(fp[0],e);for(var i=1;i<fp.length;i++){var l=fp[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Al!==null&&pf(Al,e),Il!==null&&pf(Il,e),Pl!==null&&pf(Pl,e),Yf.forEach(t),Jf.forEach(t),i=0;i<wl.length;i++)l=wl[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<wl.length&&(i=wl[0],i.blockedOn===null);)_S(i),i.blockedOn===null&&wl.shift()}var eh=Na.ReactCurrentBatchConfig,lm=!0;function OM(e,t,i,l){var c=Yn,d=eh.transition;eh.transition=null;try{Yn=1,k_(e,t,i,l)}finally{Yn=c,eh.transition=d}}function RM(e,t,i,l){var c=Yn,d=eh.transition;eh.transition=null;try{Yn=4,k_(e,t,i,l)}finally{Yn=c,eh.transition=d}}function k_(e,t,i,l){if(lm){var c=Y0(e,t,i,l);if(c===null)Vy(e,t,l,um,i),Ww(e,l);else if(zM(c,e,t,i,l))l.stopPropagation();else if(Ww(e,l),t&4&&-1<kM.indexOf(e)){for(;c!==null;){var d=xd(c);if(d!==null&&mS(d),d=Y0(e,t,i,l),d===null&&Vy(e,t,l,um,i),d===c)break;c=d}c!==null&&l.stopPropagation()}else Vy(e,t,l,null,i)}}var um=null;function Y0(e,t,i,l){if(um=null,e=A_(l),e=bu(e),e!==null)if(t=Du(e),t===null)e=null;else if(i=t.tag,i===13){if(e=aS(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return um=e,null}function xS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bM()){case I_:return 1;case hS:return 4;case sm:case EM:return 16;case fS:return 536870912;default:return 16}default:return 16}}var Sl=null,z_=null,Dp=null;function wS(){if(Dp)return Dp;var e,t=z_,i=t.length,l,c="value"in Sl?Sl.value:Sl.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var y=i-e;for(l=1;l<=y&&t[i-l]===c[d-l];l++);return Dp=c.slice(e,1<l?1-l:void 0)}function Bp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dp(){return!0}function Xw(){return!1}function Ro(e){function t(i,l,c,d,y){this._reactName=i,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(i=e[a],this[a]=i?i(d):d[a]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?dp:Xw,this.isPropagationStopped=Xw,this}return Mr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=dp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=dp)},persist:function(){},isPersistent:dp}),t}var _h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L_=Ro(_h),_d=Mr({},_h,{view:0,detail:0}),FM=Ro(_d),Oy,Ry,mf,lg=Mr({},_d,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:O_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mf&&(mf&&e.type==="mousemove"?(Oy=e.screenX-mf.screenX,Ry=e.screenY-mf.screenY):Ry=Oy=0,mf=e),Oy)},movementY:function(e){return"movementY"in e?e.movementY:Ry}}),qw=Ro(lg),jM=Mr({},lg,{dataTransfer:0}),DM=Ro(jM),BM=Mr({},_d,{relatedTarget:0}),Fy=Ro(BM),NM=Mr({},_h,{animationName:0,elapsedTime:0,pseudoElement:0}),UM=Ro(NM),$M=Mr({},_h,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),VM=Ro($M),GM=Mr({},_h,{data:0}),Kw=Ro(GM),ZM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HM[e])?!!t[e]:!1}function O_(){return XM}var qM=Mr({},_d,{key:function(e){if(e.key){var t=ZM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?WM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:O_,charCode:function(e){return e.type==="keypress"?Bp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),KM=Ro(qM),YM=Mr({},lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yw=Ro(YM),JM=Mr({},_d,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:O_}),QM=Ro(JM),ek=Mr({},_h,{propertyName:0,elapsedTime:0,pseudoElement:0}),tk=Ro(ek),nk=Mr({},lg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rk=Ro(nk),ik=[9,13,27,32],R_=za&&"CompositionEvent"in window,Of=null;za&&"documentMode"in document&&(Of=document.documentMode);var ok=za&&"TextEvent"in window&&!Of,bS=za&&(!R_||Of&&8<Of&&11>=Of),Jw=String.fromCharCode(32),Qw=!1;function ES(e,t){switch(e){case"keyup":return ik.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fc=!1;function sk(e,t){switch(e){case"compositionend":return SS(t);case"keypress":return t.which!==32?null:(Qw=!0,Jw);case"textInput":return e=t.data,e===Jw&&Qw?null:e;default:return null}}function ak(e,t){if(Fc)return e==="compositionend"||!R_&&ES(e,t)?(e=wS(),Dp=z_=Sl=null,Fc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bS&&t.locale!=="ko"?null:t.data;default:return null}}var lk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lk[e.type]:t==="textarea"}function TS(e,t,i,l){nS(l),t=cm(t,"onChange"),0<t.length&&(i=new L_("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Rf=null,ed=null;function uk(e){FS(e,0)}function ug(e){var t=Bc(e);if(qE(t))return e}function ck(e,t){if(e==="change")return t}var CS=!1;if(za){var jy;if(za){var Dy="oninput"in document;if(!Dy){var tb=document.createElement("div");tb.setAttribute("oninput","return;"),Dy=typeof tb.oninput=="function"}jy=Dy}else jy=!1;CS=jy&&(!document.documentMode||9<document.documentMode)}function nb(){Rf&&(Rf.detachEvent("onpropertychange",AS),ed=Rf=null)}function AS(e){if(e.propertyName==="value"&&ug(ed)){var t=[];TS(t,ed,e,A_(e)),sS(uk,t)}}function hk(e,t,i){e==="focusin"?(nb(),Rf=t,ed=i,Rf.attachEvent("onpropertychange",AS)):e==="focusout"&&nb()}function fk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ug(ed)}function dk(e,t){if(e==="click")return ug(t)}function pk(e,t){if(e==="input"||e==="change")return ug(t)}function mk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Is=typeof Object.is=="function"?Object.is:mk;function td(e,t){if(Is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var c=i[l];if(!L0.call(t,c)||!Is(e[c],t[c]))return!1}return!0}function rb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ib(e,t){var i=rb(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=rb(i)}}function IS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?IS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function PS(){for(var e=window,t=rm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=rm(e.document)}return t}function F_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gk(e){var t=PS(),i=e.focusedElem,l=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&IS(i.ownerDocument.documentElement,i)){if(l!==null&&F_(i)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(l.start,c);l=l.end===void 0?d:Math.min(l.end,c),!e.extend&&d>l&&(c=l,l=d,d=c),c=ib(i,d);var y=ib(i,l);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>l?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yk=za&&"documentMode"in document&&11>=document.documentMode,jc=null,J0=null,Ff=null,Q0=!1;function ob(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Q0||jc==null||jc!==rm(l)||(l=jc,"selectionStart"in l&&F_(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ff&&td(Ff,l)||(Ff=l,l=cm(J0,"onSelect"),0<l.length&&(t=new L_("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=jc)))}function pp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Dc={animationend:pp("Animation","AnimationEnd"),animationiteration:pp("Animation","AnimationIteration"),animationstart:pp("Animation","AnimationStart"),transitionend:pp("Transition","TransitionEnd")},By={},MS={};za&&(MS=document.createElement("div").style,"AnimationEvent"in window||(delete Dc.animationend.animation,delete Dc.animationiteration.animation,delete Dc.animationstart.animation),"TransitionEvent"in window||delete Dc.transitionend.transition);function cg(e){if(By[e])return By[e];if(!Dc[e])return e;var t=Dc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in MS)return By[e]=t[i];return e}var kS=cg("animationend"),zS=cg("animationiteration"),LS=cg("animationstart"),OS=cg("transitionend"),RS=new Map,sb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(e,t){RS.set(e,t),ju(t,[e])}for(var Ny=0;Ny<sb.length;Ny++){var Uy=sb[Ny],vk=Uy.toLowerCase(),_k=Uy[0].toUpperCase()+Uy.slice(1);Nl(vk,"on"+_k)}Nl(kS,"onAnimationEnd");Nl(zS,"onAnimationIteration");Nl(LS,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(OS,"onTransitionEnd");sh("onMouseEnter",["mouseout","mouseover"]);sh("onMouseLeave",["mouseout","mouseover"]);sh("onPointerEnter",["pointerout","pointerover"]);sh("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ef="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ef));function ab(e,t,i){var l=e.type||"unknown-event";e.currentTarget=i,vM(l,t,void 0,e),e.currentTarget=null}function FS(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],c=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var y=l.length-1;0<=y;y--){var a=l[y],b=a.instance,w=a.currentTarget;if(a=a.listener,b!==d&&c.isPropagationStopped())break e;ab(c,a,w),d=b}else for(y=0;y<l.length;y++){if(a=l[y],b=a.instance,w=a.currentTarget,a=a.listener,b!==d&&c.isPropagationStopped())break e;ab(c,a,w),d=b}}}if(om)throw e=X0,om=!1,X0=null,e}function fr(e,t){var i=t[iv];i===void 0&&(i=t[iv]=new Set);var l=e+"__bubble";i.has(l)||(jS(t,e,2,!1),i.add(l))}function $y(e,t,i){var l=0;t&&(l|=4),jS(i,e,l,t)}var mp="_reactListening"+Math.random().toString(36).slice(2);function nd(e){if(!e[mp]){e[mp]=!0,GE.forEach(function(i){i!=="selectionchange"&&(xk.has(i)||$y(i,!1,e),$y(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mp]||(t[mp]=!0,$y("selectionchange",!1,t))}}function jS(e,t,i,l){switch(xS(t)){case 1:var c=OM;break;case 4:c=RM;break;default:c=k_}i=c.bind(null,t,i,e),c=void 0,!H0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Vy(e,t,i,l,c){var d=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var a=l.stateNode.containerInfo;if(a===c||a.nodeType===8&&a.parentNode===c)break;if(y===4)for(y=l.return;y!==null;){var b=y.tag;if((b===3||b===4)&&(b=y.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;y=y.return}for(;a!==null;){if(y=bu(a),y===null)return;if(b=y.tag,b===5||b===6){l=d=y;continue e}a=a.parentNode}}l=l.return}sS(function(){var w=d,C=A_(i),E=[];e:{var z=RS.get(e);if(z!==void 0){var R=L_,Q=e;switch(e){case"keypress":if(Bp(i)===0)break e;case"keydown":case"keyup":R=KM;break;case"focusin":Q="focus",R=Fy;break;case"focusout":Q="blur",R=Fy;break;case"beforeblur":case"afterblur":R=Fy;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=qw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=DM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=QM;break;case kS:case zS:case LS:R=UM;break;case OS:R=tk;break;case"scroll":R=FM;break;case"wheel":R=rk;break;case"copy":case"cut":case"paste":R=VM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Yw}var K=(t&4)!==0,pe=!K&&e==="scroll",G=K?z!==null?z+"Capture":null:z;K=[];for(var $=w,B;$!==null;){B=$;var oe=B.stateNode;if(B.tag===5&&oe!==null&&(B=oe,G!==null&&(oe=Kf($,G),oe!=null&&K.push(rd($,oe,B)))),pe)break;$=$.return}0<K.length&&(z=new R(z,Q,null,i,C),E.push({event:z,listeners:K}))}}if(!(t&7)){e:{if(z=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",z&&i!==Z0&&(Q=i.relatedTarget||i.fromElement)&&(bu(Q)||Q[La]))break e;if((R||z)&&(z=C.window===C?C:(z=C.ownerDocument)?z.defaultView||z.parentWindow:window,R?(Q=i.relatedTarget||i.toElement,R=w,Q=Q?bu(Q):null,Q!==null&&(pe=Du(Q),Q!==pe||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(R=null,Q=w),R!==Q)){if(K=qw,oe="onMouseLeave",G="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(K=Yw,oe="onPointerLeave",G="onPointerEnter",$="pointer"),pe=R==null?z:Bc(R),B=Q==null?z:Bc(Q),z=new K(oe,$+"leave",R,i,C),z.target=pe,z.relatedTarget=B,oe=null,bu(C)===w&&(K=new K(G,$+"enter",Q,i,C),K.target=B,K.relatedTarget=pe,oe=K),pe=oe,R&&Q)t:{for(K=R,G=Q,$=0,B=K;B;B=Cc(B))$++;for(B=0,oe=G;oe;oe=Cc(oe))B++;for(;0<$-B;)K=Cc(K),$--;for(;0<B-$;)G=Cc(G),B--;for(;$--;){if(K===G||G!==null&&K===G.alternate)break t;K=Cc(K),G=Cc(G)}K=null}else K=null;R!==null&&lb(E,z,R,K,!1),Q!==null&&pe!==null&&lb(E,pe,Q,K,!0)}}e:{if(z=w?Bc(w):window,R=z.nodeName&&z.nodeName.toLowerCase(),R==="select"||R==="input"&&z.type==="file")var W=ck;else if(eb(z))if(CS)W=pk;else{W=fk;var D=hk}else(R=z.nodeName)&&R.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(W=dk);if(W&&(W=W(e,w))){TS(E,W,i,C);break e}D&&D(e,z,w),e==="focusout"&&(D=z._wrapperState)&&D.controlled&&z.type==="number"&&N0(z,"number",z.value)}switch(D=w?Bc(w):window,e){case"focusin":(eb(D)||D.contentEditable==="true")&&(jc=D,J0=w,Ff=null);break;case"focusout":Ff=J0=jc=null;break;case"mousedown":Q0=!0;break;case"contextmenu":case"mouseup":case"dragend":Q0=!1,ob(E,i,C);break;case"selectionchange":if(yk)break;case"keydown":case"keyup":ob(E,i,C)}var S;if(R_)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Fc?ES(e,i)&&(P="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(P="onCompositionStart");P&&(bS&&i.locale!=="ko"&&(Fc||P!=="onCompositionStart"?P==="onCompositionEnd"&&Fc&&(S=wS()):(Sl=C,z_="value"in Sl?Sl.value:Sl.textContent,Fc=!0)),D=cm(w,P),0<D.length&&(P=new Kw(P,e,null,i,C),E.push({event:P,listeners:D}),S?P.data=S:(S=SS(i),S!==null&&(P.data=S)))),(S=ok?sk(e,i):ak(e,i))&&(w=cm(w,"onBeforeInput"),0<w.length&&(C=new Kw("onBeforeInput","beforeinput",null,i,C),E.push({event:C,listeners:w}),C.data=S))}FS(E,t)})}function rd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function cm(e,t){for(var i=t+"Capture",l=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Kf(e,i),d!=null&&l.unshift(rd(e,d,c)),d=Kf(e,t),d!=null&&l.push(rd(e,d,c))),e=e.return}return l}function Cc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lb(e,t,i,l,c){for(var d=t._reactName,y=[];i!==null&&i!==l;){var a=i,b=a.alternate,w=a.stateNode;if(b!==null&&b===l)break;a.tag===5&&w!==null&&(a=w,c?(b=Kf(i,d),b!=null&&y.unshift(rd(i,b,a))):c||(b=Kf(i,d),b!=null&&y.push(rd(i,b,a)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var wk=/\r\n?/g,bk=/\u0000|\uFFFD/g;function ub(e){return(typeof e=="string"?e:""+e).replace(wk,`
`).replace(bk,"")}function gp(e,t,i){if(t=ub(t),ub(e)!==t&&i)throw Error(It(425))}function hm(){}var ev=null,tv=null;function nv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rv=typeof setTimeout=="function"?setTimeout:void 0,Ek=typeof clearTimeout=="function"?clearTimeout:void 0,cb=typeof Promise=="function"?Promise:void 0,Sk=typeof queueMicrotask=="function"?queueMicrotask:typeof cb<"u"?function(e){return cb.resolve(null).then(e).catch(Tk)}:rv;function Tk(e){setTimeout(function(){throw e})}function Gy(e,t){var i=t,l=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(l===0){e.removeChild(c),Qf(t);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=c}while(i);Qf(t)}function Ml(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var xh=Math.random().toString(36).slice(2),Xs="__reactFiber$"+xh,id="__reactProps$"+xh,La="__reactContainer$"+xh,iv="__reactEvents$"+xh,Ck="__reactListeners$"+xh,Ak="__reactHandles$"+xh;function bu(e){var t=e[Xs];if(t)return t;for(var i=e.parentNode;i;){if(t=i[La]||i[Xs]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=hb(e);e!==null;){if(i=e[Xs])return i;e=hb(e)}return t}e=i,i=e.parentNode}return null}function xd(e){return e=e[Xs]||e[La],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(It(33))}function hg(e){return e[id]||null}var ov=[],Nc=-1;function Ul(e){return{current:e}}function dr(e){0>Nc||(e.current=ov[Nc],ov[Nc]=null,Nc--)}function sr(e,t){Nc++,ov[Nc]=e.current,e.current=t}var Fl={},Ni=Ul(Fl),yo=Ul(!1),Iu=Fl;function ah(e,t){var i=e.type.contextTypes;if(!i)return Fl;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=t[d];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function vo(e){return e=e.childContextTypes,e!=null}function fm(){dr(yo),dr(Ni)}function fb(e,t,i){if(Ni.current!==Fl)throw Error(It(168));sr(Ni,t),sr(yo,i)}function DS(e,t,i){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var c in l)if(!(c in t))throw Error(It(108,hM(e)||"Unknown",c));return Mr({},i,l)}function dm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fl,Iu=Ni.current,sr(Ni,e),sr(yo,yo.current),!0}function db(e,t,i){var l=e.stateNode;if(!l)throw Error(It(169));i?(e=DS(e,t,Iu),l.__reactInternalMemoizedMergedChildContext=e,dr(yo),dr(Ni),sr(Ni,e)):dr(yo),sr(yo,i)}var Aa=null,fg=!1,Zy=!1;function BS(e){Aa===null?Aa=[e]:Aa.push(e)}function Ik(e){fg=!0,BS(e)}function $l(){if(!Zy&&Aa!==null){Zy=!0;var e=0,t=Yn;try{var i=Aa;for(Yn=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}Aa=null,fg=!1}catch(c){throw Aa!==null&&(Aa=Aa.slice(e+1)),cS(I_,$l),c}finally{Yn=t,Zy=!1}}return null}var Uc=[],$c=0,pm=null,mm=0,Ko=[],Yo=0,Pu=null,Pa=1,Ma="";function _u(e,t){Uc[$c++]=mm,Uc[$c++]=pm,pm=e,mm=t}function NS(e,t,i){Ko[Yo++]=Pa,Ko[Yo++]=Ma,Ko[Yo++]=Pu,Pu=e;var l=Pa;e=Ma;var c=32-Cs(l)-1;l&=~(1<<c),i+=1;var d=32-Cs(t)+c;if(30<d){var y=c-c%5;d=(l&(1<<y)-1).toString(32),l>>=y,c-=y,Pa=1<<32-Cs(t)+c|i<<c|l,Ma=d+e}else Pa=1<<d|i<<c|l,Ma=e}function j_(e){e.return!==null&&(_u(e,1),NS(e,1,0))}function D_(e){for(;e===pm;)pm=Uc[--$c],Uc[$c]=null,mm=Uc[--$c],Uc[$c]=null;for(;e===Pu;)Pu=Ko[--Yo],Ko[Yo]=null,Ma=Ko[--Yo],Ko[Yo]=null,Pa=Ko[--Yo],Ko[Yo]=null}var zo=null,ko=null,xr=!1,xs=null;function US(e,t){var i=Qo(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function pb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zo=e,ko=Ml(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zo=e,ko=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Pu!==null?{id:Pa,overflow:Ma}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Qo(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,zo=e,ko=null,!0):!1;default:return!1}}function sv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function av(e){if(xr){var t=ko;if(t){var i=t;if(!pb(e,t)){if(sv(e))throw Error(It(418));t=Ml(i.nextSibling);var l=zo;t&&pb(e,t)?US(l,i):(e.flags=e.flags&-4097|2,xr=!1,zo=e)}}else{if(sv(e))throw Error(It(418));e.flags=e.flags&-4097|2,xr=!1,zo=e}}}function mb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zo=e}function yp(e){if(e!==zo)return!1;if(!xr)return mb(e),xr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nv(e.type,e.memoizedProps)),t&&(t=ko)){if(sv(e))throw $S(),Error(It(418));for(;t;)US(e,t),t=Ml(t.nextSibling)}if(mb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(It(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ko=Ml(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ko=null}}else ko=zo?Ml(e.stateNode.nextSibling):null;return!0}function $S(){for(var e=ko;e;)e=Ml(e.nextSibling)}function lh(){ko=zo=null,xr=!1}function B_(e){xs===null?xs=[e]:xs.push(e)}var Pk=Na.ReactCurrentBatchConfig;function vs(e,t){if(e&&e.defaultProps){t=Mr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var gm=Ul(null),ym=null,Vc=null,N_=null;function U_(){N_=Vc=ym=null}function $_(e){var t=gm.current;dr(gm),e._currentValue=t}function lv(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function th(e,t){ym=e,N_=Vc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(go=!0),e.firstContext=null)}function ns(e){var t=e._currentValue;if(N_!==e)if(e={context:e,memoizedValue:t,next:null},Vc===null){if(ym===null)throw Error(It(308));Vc=e,ym.dependencies={lanes:0,firstContext:e}}else Vc=Vc.next=e;return t}var Eu=null;function V_(e){Eu===null?Eu=[e]:Eu.push(e)}function VS(e,t,i,l){var c=t.interleaved;return c===null?(i.next=i,V_(t)):(i.next=c.next,c.next=i),t.interleaved=i,Oa(e,l)}function Oa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var vl=!1;function G_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ka(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kl(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,Wn&2){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,Oa(e,i)}return c=l.interleaved,c===null?(t.next=t,V_(l)):(t.next=c.next,c.next=t),l.interleaved=t,Oa(e,i)}function Np(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,P_(e,i)}}function gb(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=y:d=d.next=y,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function vm(e,t,i,l){var c=e.updateQueue;vl=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,a=c.shared.pending;if(a!==null){c.shared.pending=null;var b=a,w=b.next;b.next=null,y===null?d=w:y.next=w,y=b;var C=e.alternate;C!==null&&(C=C.updateQueue,a=C.lastBaseUpdate,a!==y&&(a===null?C.firstBaseUpdate=w:a.next=w,C.lastBaseUpdate=b))}if(d!==null){var E=c.baseState;y=0,C=w=b=null,a=d;do{var z=a.lane,R=a.eventTime;if((l&z)===z){C!==null&&(C=C.next={eventTime:R,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var Q=e,K=a;switch(z=t,R=i,K.tag){case 1:if(Q=K.payload,typeof Q=="function"){E=Q.call(R,E,z);break e}E=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=K.payload,z=typeof Q=="function"?Q.call(R,E,z):Q,z==null)break e;E=Mr({},E,z);break e;case 2:vl=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,z=c.effects,z===null?c.effects=[a]:z.push(a))}else R={eventTime:R,lane:z,tag:a.tag,payload:a.payload,callback:a.callback,next:null},C===null?(w=C=R,b=E):C=C.next=R,y|=z;if(a=a.next,a===null){if(a=c.shared.pending,a===null)break;z=a,a=z.next,z.next=null,c.lastBaseUpdate=z,c.shared.pending=null}}while(1);if(C===null&&(b=E),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=C,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);ku|=y,e.lanes=y,e.memoizedState=E}}function yb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],c=l.callback;if(c!==null){if(l.callback=null,l=i,typeof c!="function")throw Error(It(191,c));c.call(l)}}}var ZS=new VE.Component().refs;function uv(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:Mr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var dg={isMounted:function(e){return(e=e._reactInternals)?Du(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var l=to(),c=Ll(e),d=ka(l,c);d.payload=t,i!=null&&(d.callback=i),t=kl(e,d,c),t!==null&&(As(t,e,c,l),Np(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=to(),c=Ll(e),d=ka(l,c);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=kl(e,d,c),t!==null&&(As(t,e,c,l),Np(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=to(),l=Ll(e),c=ka(i,l);c.tag=2,t!=null&&(c.callback=t),t=kl(e,c,l),t!==null&&(As(t,e,l,i),Np(t,e,l))}};function vb(e,t,i,l,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):t.prototype&&t.prototype.isPureReactComponent?!td(i,l)||!td(c,d):!0}function WS(e,t,i){var l=!1,c=Fl,d=t.contextType;return typeof d=="object"&&d!==null?d=ns(d):(c=vo(t)?Iu:Ni.current,l=t.contextTypes,d=(l=l!=null)?ah(e,c):Fl),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dg,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function _b(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&dg.enqueueReplaceState(t,t.state,null)}function cv(e,t,i,l){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=ZS,G_(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=ns(d):(d=vo(t)?Iu:Ni.current,c.context=ah(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(uv(e,t,d,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&dg.enqueueReplaceState(c,c.state,null),vm(e,i,c,l),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function gf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(It(309));var l=i.stateNode}if(!l)throw Error(It(147,e));var c=l,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(y){var a=c.refs;a===ZS&&(a=c.refs={}),y===null?delete a[d]:a[d]=y},t._stringRef=d,t)}if(typeof e!="string")throw Error(It(284));if(!i._owner)throw Error(It(290,e))}return e}function vp(e,t){throw e=Object.prototype.toString.call(t),Error(It(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xb(e){var t=e._init;return t(e._payload)}function HS(e){function t(G,$){if(e){var B=G.deletions;B===null?(G.deletions=[$],G.flags|=16):B.push($)}}function i(G,$){if(!e)return null;for(;$!==null;)t(G,$),$=$.sibling;return null}function l(G,$){for(G=new Map;$!==null;)$.key!==null?G.set($.key,$):G.set($.index,$),$=$.sibling;return G}function c(G,$){return G=Ol(G,$),G.index=0,G.sibling=null,G}function d(G,$,B){return G.index=B,e?(B=G.alternate,B!==null?(B=B.index,B<$?(G.flags|=2,$):B):(G.flags|=2,$)):(G.flags|=1048576,$)}function y(G){return e&&G.alternate===null&&(G.flags|=2),G}function a(G,$,B,oe){return $===null||$.tag!==6?($=Jy(B,G.mode,oe),$.return=G,$):($=c($,B),$.return=G,$)}function b(G,$,B,oe){var W=B.type;return W===Rc?C(G,$,B.props.children,oe,B.key):$!==null&&($.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===yl&&xb(W)===$.type)?(oe=c($,B.props),oe.ref=gf(G,$,B),oe.return=G,oe):(oe=Wp(B.type,B.key,B.props,null,G.mode,oe),oe.ref=gf(G,$,B),oe.return=G,oe)}function w(G,$,B,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==B.containerInfo||$.stateNode.implementation!==B.implementation?($=Qy(B,G.mode,oe),$.return=G,$):($=c($,B.children||[]),$.return=G,$)}function C(G,$,B,oe,W){return $===null||$.tag!==7?($=Au(B,G.mode,oe,W),$.return=G,$):($=c($,B),$.return=G,$)}function E(G,$,B){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Jy(""+$,G.mode,B),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case ap:return B=Wp($.type,$.key,$.props,null,G.mode,B),B.ref=gf(G,null,$),B.return=G,B;case Oc:return $=Qy($,G.mode,B),$.return=G,$;case yl:var oe=$._init;return E(G,oe($._payload),B)}if(wf($)||hf($))return $=Au($,G.mode,B,null),$.return=G,$;vp(G,$)}return null}function z(G,$,B,oe){var W=$!==null?$.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return W!==null?null:a(G,$,""+B,oe);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ap:return B.key===W?b(G,$,B,oe):null;case Oc:return B.key===W?w(G,$,B,oe):null;case yl:return W=B._init,z(G,$,W(B._payload),oe)}if(wf(B)||hf(B))return W!==null?null:C(G,$,B,oe,null);vp(G,B)}return null}function R(G,$,B,oe,W){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return G=G.get(B)||null,a($,G,""+oe,W);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case ap:return G=G.get(oe.key===null?B:oe.key)||null,b($,G,oe,W);case Oc:return G=G.get(oe.key===null?B:oe.key)||null,w($,G,oe,W);case yl:var D=oe._init;return R(G,$,B,D(oe._payload),W)}if(wf(oe)||hf(oe))return G=G.get(B)||null,C($,G,oe,W,null);vp($,oe)}return null}function Q(G,$,B,oe){for(var W=null,D=null,S=$,P=$=0,Z=null;S!==null&&P<B.length;P++){S.index>P?(Z=S,S=null):Z=S.sibling;var J=z(G,S,B[P],oe);if(J===null){S===null&&(S=Z);break}e&&S&&J.alternate===null&&t(G,S),$=d(J,$,P),D===null?W=J:D.sibling=J,D=J,S=Z}if(P===B.length)return i(G,S),xr&&_u(G,P),W;if(S===null){for(;P<B.length;P++)S=E(G,B[P],oe),S!==null&&($=d(S,$,P),D===null?W=S:D.sibling=S,D=S);return xr&&_u(G,P),W}for(S=l(G,S);P<B.length;P++)Z=R(S,G,P,B[P],oe),Z!==null&&(e&&Z.alternate!==null&&S.delete(Z.key===null?P:Z.key),$=d(Z,$,P),D===null?W=Z:D.sibling=Z,D=Z);return e&&S.forEach(function(H){return t(G,H)}),xr&&_u(G,P),W}function K(G,$,B,oe){var W=hf(B);if(typeof W!="function")throw Error(It(150));if(B=W.call(B),B==null)throw Error(It(151));for(var D=W=null,S=$,P=$=0,Z=null,J=B.next();S!==null&&!J.done;P++,J=B.next()){S.index>P?(Z=S,S=null):Z=S.sibling;var H=z(G,S,J.value,oe);if(H===null){S===null&&(S=Z);break}e&&S&&H.alternate===null&&t(G,S),$=d(H,$,P),D===null?W=H:D.sibling=H,D=H,S=Z}if(J.done)return i(G,S),xr&&_u(G,P),W;if(S===null){for(;!J.done;P++,J=B.next())J=E(G,J.value,oe),J!==null&&($=d(J,$,P),D===null?W=J:D.sibling=J,D=J);return xr&&_u(G,P),W}for(S=l(G,S);!J.done;P++,J=B.next())J=R(S,G,P,J.value,oe),J!==null&&(e&&J.alternate!==null&&S.delete(J.key===null?P:J.key),$=d(J,$,P),D===null?W=J:D.sibling=J,D=J);return e&&S.forEach(function(ve){return t(G,ve)}),xr&&_u(G,P),W}function pe(G,$,B,oe){if(typeof B=="object"&&B!==null&&B.type===Rc&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case ap:e:{for(var W=B.key,D=$;D!==null;){if(D.key===W){if(W=B.type,W===Rc){if(D.tag===7){i(G,D.sibling),$=c(D,B.props.children),$.return=G,G=$;break e}}else if(D.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===yl&&xb(W)===D.type){i(G,D.sibling),$=c(D,B.props),$.ref=gf(G,D,B),$.return=G,G=$;break e}i(G,D);break}else t(G,D);D=D.sibling}B.type===Rc?($=Au(B.props.children,G.mode,oe,B.key),$.return=G,G=$):(oe=Wp(B.type,B.key,B.props,null,G.mode,oe),oe.ref=gf(G,$,B),oe.return=G,G=oe)}return y(G);case Oc:e:{for(D=B.key;$!==null;){if($.key===D)if($.tag===4&&$.stateNode.containerInfo===B.containerInfo&&$.stateNode.implementation===B.implementation){i(G,$.sibling),$=c($,B.children||[]),$.return=G,G=$;break e}else{i(G,$);break}else t(G,$);$=$.sibling}$=Qy(B,G.mode,oe),$.return=G,G=$}return y(G);case yl:return D=B._init,pe(G,$,D(B._payload),oe)}if(wf(B))return Q(G,$,B,oe);if(hf(B))return K(G,$,B,oe);vp(G,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,$!==null&&$.tag===6?(i(G,$.sibling),$=c($,B),$.return=G,G=$):(i(G,$),$=Jy(B,G.mode,oe),$.return=G,G=$),y(G)):i(G,$)}return pe}var uh=HS(!0),XS=HS(!1),wd={},ea=Ul(wd),od=Ul(wd),sd=Ul(wd);function Su(e){if(e===wd)throw Error(It(174));return e}function Z_(e,t){switch(sr(sd,t),sr(od,e),sr(ea,wd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$0(t,e)}dr(ea),sr(ea,t)}function ch(){dr(ea),dr(od),dr(sd)}function qS(e){Su(sd.current);var t=Su(ea.current),i=$0(t,e.type);t!==i&&(sr(od,e),sr(ea,i))}function W_(e){od.current===e&&(dr(ea),dr(od))}var Ar=Ul(0);function _m(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wy=[];function H_(){for(var e=0;e<Wy.length;e++)Wy[e]._workInProgressVersionPrimary=null;Wy.length=0}var Up=Na.ReactCurrentDispatcher,Hy=Na.ReactCurrentBatchConfig,Mu=0,Pr=null,ei=null,ci=null,xm=!1,jf=!1,ad=0,Mk=0;function Ri(){throw Error(It(321))}function X_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Is(e[i],t[i]))return!1;return!0}function q_(e,t,i,l,c,d){if(Mu=d,Pr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Up.current=e===null||e.memoizedState===null?Ok:Rk,e=i(l,c),jf){d=0;do{if(jf=!1,ad=0,25<=d)throw Error(It(301));d+=1,ci=ei=null,t.updateQueue=null,Up.current=Fk,e=i(l,c)}while(jf)}if(Up.current=wm,t=ei!==null&&ei.next!==null,Mu=0,ci=ei=Pr=null,xm=!1,t)throw Error(It(300));return e}function K_(){var e=ad!==0;return ad=0,e}function Hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Pr.memoizedState=ci=e:ci=ci.next=e,ci}function rs(){if(ei===null){var e=Pr.alternate;e=e!==null?e.memoizedState:null}else e=ei.next;var t=ci===null?Pr.memoizedState:ci.next;if(t!==null)ci=t,ei=e;else{if(e===null)throw Error(It(310));ei=e,e={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},ci===null?Pr.memoizedState=ci=e:ci=ci.next=e}return ci}function ld(e,t){return typeof t=="function"?t(e):t}function Xy(e){var t=rs(),i=t.queue;if(i===null)throw Error(It(311));i.lastRenderedReducer=e;var l=ei,c=l.baseQueue,d=i.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}l.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,l=l.baseState;var a=y=null,b=null,w=d;do{var C=w.lane;if((Mu&C)===C)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),l=w.hasEagerState?w.eagerState:e(l,w.action);else{var E={lane:C,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(a=b=E,y=l):b=b.next=E,Pr.lanes|=C,ku|=C}w=w.next}while(w!==null&&w!==d);b===null?y=l:b.next=a,Is(l,t.memoizedState)||(go=!0),t.memoizedState=l,t.baseState=y,t.baseQueue=b,i.lastRenderedState=l}if(e=i.interleaved,e!==null){c=e;do d=c.lane,Pr.lanes|=d,ku|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function qy(e){var t=rs(),i=t.queue;if(i===null)throw Error(It(311));i.lastRenderedReducer=e;var l=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);Is(d,t.memoizedState)||(go=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,l]}function KS(){}function YS(e,t){var i=Pr,l=rs(),c=t(),d=!Is(l.memoizedState,c);if(d&&(l.memoizedState=c,go=!0),l=l.queue,Y_(eT.bind(null,i,l,e),[e]),l.getSnapshot!==t||d||ci!==null&&ci.memoizedState.tag&1){if(i.flags|=2048,ud(9,QS.bind(null,i,l,c,t),void 0,null),hi===null)throw Error(It(349));Mu&30||JS(i,t,c)}return c}function JS(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Pr.updateQueue,t===null?(t={lastEffect:null,stores:null},Pr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function QS(e,t,i,l){t.value=i,t.getSnapshot=l,tT(t)&&nT(e)}function eT(e,t,i){return i(function(){tT(t)&&nT(e)})}function tT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Is(e,i)}catch{return!0}}function nT(e){var t=Oa(e,1);t!==null&&As(t,e,1,-1)}function wb(e){var t=Hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:e},t.queue=e,e=e.dispatch=Lk.bind(null,Pr,e),[t.memoizedState,e]}function ud(e,t,i,l){return e={tag:e,create:t,destroy:i,deps:l,next:null},t=Pr.updateQueue,t===null?(t={lastEffect:null,stores:null},Pr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e)),e}function rT(){return rs().memoizedState}function $p(e,t,i,l){var c=Hs();Pr.flags|=e,c.memoizedState=ud(1|t,i,void 0,l===void 0?null:l)}function pg(e,t,i,l){var c=rs();l=l===void 0?null:l;var d=void 0;if(ei!==null){var y=ei.memoizedState;if(d=y.destroy,l!==null&&X_(l,y.deps)){c.memoizedState=ud(t,i,d,l);return}}Pr.flags|=e,c.memoizedState=ud(1|t,i,d,l)}function bb(e,t){return $p(8390656,8,e,t)}function Y_(e,t){return pg(2048,8,e,t)}function iT(e,t){return pg(4,2,e,t)}function oT(e,t){return pg(4,4,e,t)}function sT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aT(e,t,i){return i=i!=null?i.concat([e]):null,pg(4,4,sT.bind(null,t,e),i)}function J_(){}function lT(e,t){var i=rs();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&X_(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function uT(e,t){var i=rs();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&X_(t,l[1])?l[0]:(e=e(),i.memoizedState=[e,t],e)}function cT(e,t,i){return Mu&21?(Is(i,t)||(i=dS(),Pr.lanes|=i,ku|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,go=!0),e.memoizedState=i)}function kk(e,t){var i=Yn;Yn=i!==0&&4>i?i:4,e(!0);var l=Hy.transition;Hy.transition={};try{e(!1),t()}finally{Yn=i,Hy.transition=l}}function hT(){return rs().memoizedState}function zk(e,t,i){var l=Ll(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},fT(e))dT(t,i);else if(i=VS(e,t,i,l),i!==null){var c=to();As(i,e,l,c),pT(i,t,l)}}function Lk(e,t,i){var l=Ll(e),c={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(fT(e))dT(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var y=t.lastRenderedState,a=d(y,i);if(c.hasEagerState=!0,c.eagerState=a,Is(a,y)){var b=t.interleaved;b===null?(c.next=c,V_(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=VS(e,t,c,l),i!==null&&(c=to(),As(i,e,l,c),pT(i,t,l))}}function fT(e){var t=e.alternate;return e===Pr||t!==null&&t===Pr}function dT(e,t){jf=xm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function pT(e,t,i){if(i&4194240){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,P_(e,i)}}var wm={readContext:ns,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},Ok={readContext:ns,useCallback:function(e,t){return Hs().memoizedState=[e,t===void 0?null:t],e},useContext:ns,useEffect:bb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,$p(4194308,4,sT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return $p(4194308,4,e,t)},useInsertionEffect:function(e,t){return $p(4,2,e,t)},useMemo:function(e,t){var i=Hs();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var l=Hs();return t=i!==void 0?i(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=zk.bind(null,Pr,e),[l.memoizedState,e]},useRef:function(e){var t=Hs();return e={current:e},t.memoizedState=e},useState:wb,useDebugValue:J_,useDeferredValue:function(e){return Hs().memoizedState=e},useTransition:function(){var e=wb(!1),t=e[0];return e=kk.bind(null,e[1]),Hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var l=Pr,c=Hs();if(xr){if(i===void 0)throw Error(It(407));i=i()}else{if(i=t(),hi===null)throw Error(It(349));Mu&30||JS(l,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,bb(eT.bind(null,l,d,e),[e]),l.flags|=2048,ud(9,QS.bind(null,l,d,i,t),void 0,null),i},useId:function(){var e=Hs(),t=hi.identifierPrefix;if(xr){var i=Ma,l=Pa;i=(l&~(1<<32-Cs(l)-1)).toString(32)+i,t=":"+t+"R"+i,i=ad++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Mk++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rk={readContext:ns,useCallback:lT,useContext:ns,useEffect:Y_,useImperativeHandle:aT,useInsertionEffect:iT,useLayoutEffect:oT,useMemo:uT,useReducer:Xy,useRef:rT,useState:function(){return Xy(ld)},useDebugValue:J_,useDeferredValue:function(e){var t=rs();return cT(t,ei.memoizedState,e)},useTransition:function(){var e=Xy(ld)[0],t=rs().memoizedState;return[e,t]},useMutableSource:KS,useSyncExternalStore:YS,useId:hT,unstable_isNewReconciler:!1},Fk={readContext:ns,useCallback:lT,useContext:ns,useEffect:Y_,useImperativeHandle:aT,useInsertionEffect:iT,useLayoutEffect:oT,useMemo:uT,useReducer:qy,useRef:rT,useState:function(){return qy(ld)},useDebugValue:J_,useDeferredValue:function(e){var t=rs();return ei===null?t.memoizedState=e:cT(t,ei.memoizedState,e)},useTransition:function(){var e=qy(ld)[0],t=rs().memoizedState;return[e,t]},useMutableSource:KS,useSyncExternalStore:YS,useId:hT,unstable_isNewReconciler:!1};function hh(e,t){try{var i="",l=t;do i+=cM(l),l=l.return;while(l);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function Ky(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function hv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var jk=typeof WeakMap=="function"?WeakMap:Map;function mT(e,t,i){i=ka(-1,i),i.tag=3,i.payload={element:null};var l=t.value;return i.callback=function(){Em||(Em=!0,wv=l),hv(e,t)},i}function gT(e,t,i){i=ka(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var c=t.value;i.payload=function(){return l(c)},i.callback=function(){hv(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){hv(e,t),typeof l!="function"&&(zl===null?zl=new Set([this]):zl.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function Eb(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new jk;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(i)||(c.add(i),e=Yk.bind(null,e,t,i),t.then(e,e))}function Sb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tb(e,t,i,l,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ka(-1,1),t.tag=2,kl(i,t,1))),i.lanes|=1),e)}var Dk=Na.ReactCurrentOwner,go=!1;function Yi(e,t,i,l){t.child=e===null?XS(t,null,i,l):uh(t,e.child,i,l)}function Cb(e,t,i,l,c){i=i.render;var d=t.ref;return th(t,c),l=q_(e,t,i,l,d,c),i=K_(),e!==null&&!go?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ra(e,t,c)):(xr&&i&&j_(t),t.flags|=1,Yi(e,t,l,c),t.child)}function Ab(e,t,i,l,c){if(e===null){var d=i.type;return typeof d=="function"&&!s1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,yT(e,t,d,l,c)):(e=Wp(i.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var y=d.memoizedProps;if(i=i.compare,i=i!==null?i:td,i(y,l)&&e.ref===t.ref)return Ra(e,t,c)}return t.flags|=1,e=Ol(d,l),e.ref=t.ref,e.return=t,t.child=e}function yT(e,t,i,l,c){if(e!==null){var d=e.memoizedProps;if(td(d,l)&&e.ref===t.ref)if(go=!1,t.pendingProps=l=d,(e.lanes&c)!==0)e.flags&131072&&(go=!0);else return t.lanes=e.lanes,Ra(e,t,c)}return fv(e,t,i,l,c)}function vT(e,t,i){var l=t.pendingProps,c=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sr(Zc,Io),Io|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sr(Zc,Io),Io|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=d!==null?d.baseLanes:i,sr(Zc,Io),Io|=l}else d!==null?(l=d.baseLanes|i,t.memoizedState=null):l=i,sr(Zc,Io),Io|=l;return Yi(e,t,c,i),t.child}function _T(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function fv(e,t,i,l,c){var d=vo(i)?Iu:Ni.current;return d=ah(t,d),th(t,c),i=q_(e,t,i,l,d,c),l=K_(),e!==null&&!go?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ra(e,t,c)):(xr&&l&&j_(t),t.flags|=1,Yi(e,t,i,c),t.child)}function Ib(e,t,i,l,c){if(vo(i)){var d=!0;dm(t)}else d=!1;if(th(t,c),t.stateNode===null)Vp(e,t),WS(t,i,l),cv(t,i,l,c),l=!0;else if(e===null){var y=t.stateNode,a=t.memoizedProps;y.props=a;var b=y.context,w=i.contextType;typeof w=="object"&&w!==null?w=ns(w):(w=vo(i)?Iu:Ni.current,w=ah(t,w));var C=i.getDerivedStateFromProps,E=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function";E||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(a!==l||b!==w)&&_b(t,y,l,w),vl=!1;var z=t.memoizedState;y.state=z,vm(t,l,y,c),b=t.memoizedState,a!==l||z!==b||yo.current||vl?(typeof C=="function"&&(uv(t,i,C,l),b=t.memoizedState),(a=vl||vb(t,i,a,l,z,b,w))?(E||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=b),y.props=l,y.state=b,y.context=w,l=a):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{y=t.stateNode,GS(e,t),a=t.memoizedProps,w=t.type===t.elementType?a:vs(t.type,a),y.props=w,E=t.pendingProps,z=y.context,b=i.contextType,typeof b=="object"&&b!==null?b=ns(b):(b=vo(i)?Iu:Ni.current,b=ah(t,b));var R=i.getDerivedStateFromProps;(C=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(a!==E||z!==b)&&_b(t,y,l,b),vl=!1,z=t.memoizedState,y.state=z,vm(t,l,y,c);var Q=t.memoizedState;a!==E||z!==Q||yo.current||vl?(typeof R=="function"&&(uv(t,i,R,l),Q=t.memoizedState),(w=vl||vb(t,i,w,l,z,Q,b)||!1)?(C||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,Q,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,Q,b)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||a===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=Q),y.props=l,y.state=Q,y.context=b,l=w):(typeof y.componentDidUpdate!="function"||a===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),l=!1)}return dv(e,t,i,l,d,c)}function dv(e,t,i,l,c,d){_T(e,t);var y=(t.flags&128)!==0;if(!l&&!y)return c&&db(t,i,!1),Ra(e,t,d);l=t.stateNode,Dk.current=t;var a=y&&typeof i.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&y?(t.child=uh(t,e.child,null,d),t.child=uh(t,null,a,d)):Yi(e,t,a,d),t.memoizedState=l.state,c&&db(t,i,!0),t.child}function xT(e){var t=e.stateNode;t.pendingContext?fb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fb(e,t.context,!1),Z_(e,t.containerInfo)}function Pb(e,t,i,l,c){return lh(),B_(c),t.flags|=256,Yi(e,t,i,l),t.child}var pv={dehydrated:null,treeContext:null,retryLane:0};function mv(e){return{baseLanes:e,cachePool:null,transitions:null}}function wT(e,t,i){var l=t.pendingProps,c=Ar.current,d=!1,y=(t.flags&128)!==0,a;if((a=y)||(a=e!==null&&e.memoizedState===null?!1:(c&2)!==0),a?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),sr(Ar,c&1),e===null)return av(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=l.children,e=l.fallback,d?(l=t.mode,d=t.child,y={mode:"hidden",children:y},!(l&1)&&d!==null?(d.childLanes=0,d.pendingProps=y):d=yg(y,l,0,null),e=Au(e,l,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=mv(i),t.memoizedState=pv,e):Q_(t,y));if(c=e.memoizedState,c!==null&&(a=c.dehydrated,a!==null))return Bk(e,t,y,l,a,c,i);if(d){d=l.fallback,y=t.mode,c=e.child,a=c.sibling;var b={mode:"hidden",children:l.children};return!(y&1)&&t.child!==c?(l=t.child,l.childLanes=0,l.pendingProps=b,t.deletions=null):(l=Ol(c,b),l.subtreeFlags=c.subtreeFlags&14680064),a!==null?d=Ol(a,d):(d=Au(d,y,i,null),d.flags|=2),d.return=t,l.return=t,l.sibling=d,t.child=l,l=d,d=t.child,y=e.child.memoizedState,y=y===null?mv(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},d.memoizedState=y,d.childLanes=e.childLanes&~i,t.memoizedState=pv,l}return d=e.child,e=d.sibling,l=Ol(d,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=i),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l}function Q_(e,t){return t=yg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _p(e,t,i,l){return l!==null&&B_(l),uh(t,e.child,null,i),e=Q_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bk(e,t,i,l,c,d,y){if(i)return t.flags&256?(t.flags&=-257,l=Ky(Error(It(422))),_p(e,t,y,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=l.fallback,c=t.mode,l=yg({mode:"visible",children:l.children},c,0,null),d=Au(d,c,y,null),d.flags|=2,l.return=t,d.return=t,l.sibling=d,t.child=l,t.mode&1&&uh(t,e.child,null,y),t.child.memoizedState=mv(y),t.memoizedState=pv,d);if(!(t.mode&1))return _p(e,t,y,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var a=l.dgst;return l=a,d=Error(It(419)),l=Ky(d,l,void 0),_p(e,t,y,l)}if(a=(y&e.childLanes)!==0,go||a){if(l=hi,l!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(l.suspendedLanes|y)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Oa(e,c),As(l,e,c,-1))}return o1(),l=Ky(Error(It(421))),_p(e,t,y,l)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Jk.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,ko=Ml(c.nextSibling),zo=t,xr=!0,xs=null,e!==null&&(Ko[Yo++]=Pa,Ko[Yo++]=Ma,Ko[Yo++]=Pu,Pa=e.id,Ma=e.overflow,Pu=t),t=Q_(t,l.children),t.flags|=4096,t)}function Mb(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),lv(e.return,t,i)}function Yy(e,t,i,l,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=i,d.tailMode=c)}function bT(e,t,i){var l=t.pendingProps,c=l.revealOrder,d=l.tail;if(Yi(e,t,l.children,i),l=Ar.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mb(e,i,t);else if(e.tag===19)Mb(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(sr(Ar,l),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&_m(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Yy(t,!1,c,i,d);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&_m(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Yy(t,!0,i,null,d);break;case"together":Yy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ra(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ku|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(It(153));if(t.child!==null){for(e=t.child,i=Ol(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ol(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Nk(e,t,i){switch(t.tag){case 3:xT(t),lh();break;case 5:qS(t);break;case 1:vo(t.type)&&dm(t);break;case 4:Z_(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,c=t.memoizedProps.value;sr(gm,l._currentValue),l._currentValue=c;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(sr(Ar,Ar.current&1),t.flags|=128,null):i&t.child.childLanes?wT(e,t,i):(sr(Ar,Ar.current&1),e=Ra(e,t,i),e!==null?e.sibling:null);sr(Ar,Ar.current&1);break;case 19:if(l=(i&t.childLanes)!==0,e.flags&128){if(l)return bT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),sr(Ar,Ar.current),l)break;return null;case 22:case 23:return t.lanes=0,vT(e,t,i)}return Ra(e,t,i)}var ET,gv,ST,TT;ET=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};gv=function(){};ST=function(e,t,i,l){var c=e.memoizedProps;if(c!==l){e=t.stateNode,Su(ea.current);var d=null;switch(i){case"input":c=D0(e,c),l=D0(e,l),d=[];break;case"select":c=Mr({},c,{value:void 0}),l=Mr({},l,{value:void 0}),d=[];break;case"textarea":c=U0(e,c),l=U0(e,l),d=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=hm)}V0(i,l);var y;i=null;for(w in c)if(!l.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var a=c[w];for(y in a)a.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Xf.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in l){var b=l[w];if(a=c!=null?c[w]:void 0,l.hasOwnProperty(w)&&b!==a&&(b!=null||a!=null))if(w==="style")if(a){for(y in a)!a.hasOwnProperty(y)||b&&b.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in b)b.hasOwnProperty(y)&&a[y]!==b[y]&&(i||(i={}),i[y]=b[y])}else i||(d||(d=[]),d.push(w,i)),i=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,a=a?a.__html:void 0,b!=null&&a!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(Xf.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&fr("scroll",e),d||a===b||(d=[])):(d=d||[]).push(w,b))}i&&(d=d||[]).push("style",i);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};TT=function(e,t,i,l){i!==l&&(t.flags|=4)};function yf(e,t){if(!xr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Fi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function Uk(e,t,i){var l=t.pendingProps;switch(D_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fi(t),null;case 1:return vo(t.type)&&fm(),Fi(t),null;case 3:return l=t.stateNode,ch(),dr(yo),dr(Ni),H_(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(yp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xs!==null&&(Sv(xs),xs=null))),gv(e,t),Fi(t),null;case 5:W_(t);var c=Su(sd.current);if(i=t.type,e!==null&&t.stateNode!=null)ST(e,t,i,l,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(It(166));return Fi(t),null}if(e=Su(ea.current),yp(t)){l=t.stateNode,i=t.type;var d=t.memoizedProps;switch(l[Xs]=t,l[id]=d,e=(t.mode&1)!==0,i){case"dialog":fr("cancel",l),fr("close",l);break;case"iframe":case"object":case"embed":fr("load",l);break;case"video":case"audio":for(c=0;c<Ef.length;c++)fr(Ef[c],l);break;case"source":fr("error",l);break;case"img":case"image":case"link":fr("error",l),fr("load",l);break;case"details":fr("toggle",l);break;case"input":Bw(l,d),fr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!d.multiple},fr("invalid",l);break;case"textarea":Uw(l,d),fr("invalid",l)}V0(i,d),c=null;for(var y in d)if(d.hasOwnProperty(y)){var a=d[y];y==="children"?typeof a=="string"?l.textContent!==a&&(d.suppressHydrationWarning!==!0&&gp(l.textContent,a,e),c=["children",a]):typeof a=="number"&&l.textContent!==""+a&&(d.suppressHydrationWarning!==!0&&gp(l.textContent,a,e),c=["children",""+a]):Xf.hasOwnProperty(y)&&a!=null&&y==="onScroll"&&fr("scroll",l)}switch(i){case"input":lp(l),Nw(l,d,!0);break;case"textarea":lp(l),$w(l);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(l.onclick=hm)}l=c,t.updateQueue=l,l!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=JE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(i,{is:l.is}):(e=y.createElement(i),i==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,i),e[Xs]=t,e[id]=l,ET(e,t,!1,!1),t.stateNode=e;e:{switch(y=G0(i,l),i){case"dialog":fr("cancel",e),fr("close",e),c=l;break;case"iframe":case"object":case"embed":fr("load",e),c=l;break;case"video":case"audio":for(c=0;c<Ef.length;c++)fr(Ef[c],e);c=l;break;case"source":fr("error",e),c=l;break;case"img":case"image":case"link":fr("error",e),fr("load",e),c=l;break;case"details":fr("toggle",e),c=l;break;case"input":Bw(e,l),c=D0(e,l),fr("invalid",e);break;case"option":c=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},c=Mr({},l,{value:void 0}),fr("invalid",e);break;case"textarea":Uw(e,l),c=U0(e,l),fr("invalid",e);break;default:c=l}V0(i,c),a=c;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];d==="style"?tS(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&QE(e,b)):d==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&qf(e,b):typeof b=="number"&&qf(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xf.hasOwnProperty(d)?b!=null&&d==="onScroll"&&fr("scroll",e):b!=null&&E_(e,d,b,y))}switch(i){case"input":lp(e),Nw(e,l,!1);break;case"textarea":lp(e),$w(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Rl(l.value));break;case"select":e.multiple=!!l.multiple,d=l.value,d!=null?Yc(e,!!l.multiple,d,!1):l.defaultValue!=null&&Yc(e,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=hm)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fi(t),null;case 6:if(e&&t.stateNode!=null)TT(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(It(166));if(i=Su(sd.current),Su(ea.current),yp(t)){if(l=t.stateNode,i=t.memoizedProps,l[Xs]=t,(d=l.nodeValue!==i)&&(e=zo,e!==null))switch(e.tag){case 3:gp(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gp(l.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[Xs]=t,t.stateNode=l}return Fi(t),null;case 13:if(dr(Ar),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xr&&ko!==null&&t.mode&1&&!(t.flags&128))$S(),lh(),t.flags|=98560,d=!1;else if(d=yp(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(It(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(It(317));d[Xs]=t}else lh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fi(t),d=!1}else xs!==null&&(Sv(xs),xs=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||Ar.current&1?ti===0&&(ti=3):o1())),t.updateQueue!==null&&(t.flags|=4),Fi(t),null);case 4:return ch(),gv(e,t),e===null&&nd(t.stateNode.containerInfo),Fi(t),null;case 10:return $_(t.type._context),Fi(t),null;case 17:return vo(t.type)&&fm(),Fi(t),null;case 19:if(dr(Ar),d=t.memoizedState,d===null)return Fi(t),null;if(l=(t.flags&128)!==0,y=d.rendering,y===null)if(l)yf(d,!1);else{if(ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=_m(e),y!==null){for(t.flags|=128,yf(d,!1),l=y.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=i,i=t.child;i!==null;)d=i,e=l,d.flags&=14680066,y=d.alternate,y===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,e=y.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return sr(Ar,Ar.current&1|2),t.child}e=e.sibling}d.tail!==null&&Vr()>fh&&(t.flags|=128,l=!0,yf(d,!1),t.lanes=4194304)}else{if(!l)if(e=_m(y),e!==null){if(t.flags|=128,l=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),yf(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!xr)return Fi(t),null}else 2*Vr()-d.renderingStartTime>fh&&i!==1073741824&&(t.flags|=128,l=!0,yf(d,!1),t.lanes=4194304);d.isBackwards?(y.sibling=t.child,t.child=y):(i=d.last,i!==null?i.sibling=y:t.child=y,d.last=y)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Vr(),t.sibling=null,i=Ar.current,sr(Ar,l?i&1|2:i&1),t):(Fi(t),null);case 22:case 23:return i1(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?Io&1073741824&&(Fi(t),t.subtreeFlags&6&&(t.flags|=8192)):Fi(t),null;case 24:return null;case 25:return null}throw Error(It(156,t.tag))}function $k(e,t){switch(D_(t),t.tag){case 1:return vo(t.type)&&fm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ch(),dr(yo),dr(Ni),H_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return W_(t),null;case 13:if(dr(Ar),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(It(340));lh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dr(Ar),null;case 4:return ch(),null;case 10:return $_(t.type._context),null;case 22:case 23:return i1(),null;case 24:return null;default:return null}}var xp=!1,Di=!1,Vk=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function Gc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){Rr(e,t,l)}else i.current=null}function yv(e,t,i){try{i()}catch(l){Rr(e,t,l)}}var kb=!1;function Gk(e,t){if(ev=lm,e=PS(),F_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var y=0,a=-1,b=-1,w=0,C=0,E=e,z=null;t:for(;;){for(var R;E!==i||c!==0&&E.nodeType!==3||(a=y+c),E!==d||l!==0&&E.nodeType!==3||(b=y+l),E.nodeType===3&&(y+=E.nodeValue.length),(R=E.firstChild)!==null;)z=E,E=R;for(;;){if(E===e)break t;if(z===i&&++w===c&&(a=y),z===d&&++C===l&&(b=y),(R=E.nextSibling)!==null)break;E=z,z=E.parentNode}E=R}i=a===-1||b===-1?null:{start:a,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(tv={focusedElem:e,selectionRange:i},lm=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){t=Qt;try{var Q=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var K=Q.memoizedProps,pe=Q.memoizedState,G=t.stateNode,$=G.getSnapshotBeforeUpdate(t.elementType===t.type?K:vs(t.type,K),pe);G.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(It(163))}}catch(oe){Rr(t,t.return,oe)}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}return Q=kb,kb=!1,Q}function Df(e,t,i){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&yv(t,i,d)}c=c.next}while(c!==l)}}function mg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==t)}}function vv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function CT(e){var t=e.alternate;t!==null&&(e.alternate=null,CT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xs],delete t[id],delete t[iv],delete t[Ck],delete t[Ak])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AT(e){return e.tag===5||e.tag===3||e.tag===4}function zb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _v(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=hm));else if(l!==4&&(e=e.child,e!==null))for(_v(e,t,i),e=e.sibling;e!==null;)_v(e,t,i),e=e.sibling}function xv(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(xv(e,t,i),e=e.sibling;e!==null;)xv(e,t,i),e=e.sibling}var wi=null,_s=!1;function ml(e,t,i){for(i=i.child;i!==null;)IT(e,t,i),i=i.sibling}function IT(e,t,i){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(ag,i)}catch{}switch(i.tag){case 5:Di||Gc(i,t);case 6:var l=wi,c=_s;wi=null,ml(e,t,i),wi=l,_s=c,wi!==null&&(_s?(e=wi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):wi.removeChild(i.stateNode));break;case 18:wi!==null&&(_s?(e=wi,i=i.stateNode,e.nodeType===8?Gy(e.parentNode,i):e.nodeType===1&&Gy(e,i),Qf(e)):Gy(wi,i.stateNode));break;case 4:l=wi,c=_s,wi=i.stateNode.containerInfo,_s=!0,ml(e,t,i),wi=l,_s=c;break;case 0:case 11:case 14:case 15:if(!Di&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var d=c,y=d.destroy;d=d.tag,y!==void 0&&(d&2||d&4)&&yv(i,t,y),c=c.next}while(c!==l)}ml(e,t,i);break;case 1:if(!Di&&(Gc(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(a){Rr(i,t,a)}ml(e,t,i);break;case 21:ml(e,t,i);break;case 22:i.mode&1?(Di=(l=Di)||i.memoizedState!==null,ml(e,t,i),Di=l):ml(e,t,i);break;default:ml(e,t,i)}}function Lb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Vk),t.forEach(function(l){var c=Qk.bind(null,e,l);i.has(l)||(i.add(l),l.then(c,c))})}}function ys(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];try{var d=e,y=t,a=y;e:for(;a!==null;){switch(a.tag){case 5:wi=a.stateNode,_s=!1;break e;case 3:wi=a.stateNode.containerInfo,_s=!0;break e;case 4:wi=a.stateNode.containerInfo,_s=!0;break e}a=a.return}if(wi===null)throw Error(It(160));IT(d,y,c),wi=null,_s=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){Rr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)PT(t,e),t=t.sibling}function PT(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),Ws(e),l&4){try{Df(3,e,e.return),mg(3,e)}catch(K){Rr(e,e.return,K)}try{Df(5,e,e.return)}catch(K){Rr(e,e.return,K)}}break;case 1:ys(t,e),Ws(e),l&512&&i!==null&&Gc(i,i.return);break;case 5:if(ys(t,e),Ws(e),l&512&&i!==null&&Gc(i,i.return),e.flags&32){var c=e.stateNode;try{qf(c,"")}catch(K){Rr(e,e.return,K)}}if(l&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,y=i!==null?i.memoizedProps:d,a=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{a==="input"&&d.type==="radio"&&d.name!=null&&KE(c,d),G0(a,y);var w=G0(a,d);for(y=0;y<b.length;y+=2){var C=b[y],E=b[y+1];C==="style"?tS(c,E):C==="dangerouslySetInnerHTML"?QE(c,E):C==="children"?qf(c,E):E_(c,C,E,w)}switch(a){case"input":B0(c,d);break;case"textarea":YE(c,d);break;case"select":var z=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var R=d.value;R!=null?Yc(c,!!d.multiple,R,!1):z!==!!d.multiple&&(d.defaultValue!=null?Yc(c,!!d.multiple,d.defaultValue,!0):Yc(c,!!d.multiple,d.multiple?[]:"",!1))}c[id]=d}catch(K){Rr(e,e.return,K)}}break;case 6:if(ys(t,e),Ws(e),l&4){if(e.stateNode===null)throw Error(It(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(K){Rr(e,e.return,K)}}break;case 3:if(ys(t,e),Ws(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Qf(t.containerInfo)}catch(K){Rr(e,e.return,K)}break;case 4:ys(t,e),Ws(e);break;case 13:ys(t,e),Ws(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(n1=Vr())),l&4&&Lb(e);break;case 22:if(C=i!==null&&i.memoizedState!==null,e.mode&1?(Di=(w=Di)||C,ys(t,e),Di=w):ys(t,e),Ws(e),l&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!C&&e.mode&1)for(Qt=e,C=e.child;C!==null;){for(E=Qt=C;Qt!==null;){switch(z=Qt,R=z.child,z.tag){case 0:case 11:case 14:case 15:Df(4,z,z.return);break;case 1:Gc(z,z.return);var Q=z.stateNode;if(typeof Q.componentWillUnmount=="function"){l=z,i=z.return;try{t=l,Q.props=t.memoizedProps,Q.state=t.memoizedState,Q.componentWillUnmount()}catch(K){Rr(l,i,K)}}break;case 5:Gc(z,z.return);break;case 22:if(z.memoizedState!==null){Rb(E);continue}}R!==null?(R.return=z,Qt=R):Rb(E)}C=C.sibling}e:for(C=null,E=e;;){if(E.tag===5){if(C===null){C=E;try{c=E.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(a=E.stateNode,b=E.memoizedProps.style,y=b!=null&&b.hasOwnProperty("display")?b.display:null,a.style.display=eS("display",y))}catch(K){Rr(e,e.return,K)}}}else if(E.tag===6){if(C===null)try{E.stateNode.nodeValue=w?"":E.memoizedProps}catch(K){Rr(e,e.return,K)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;C===E&&(C=null),E=E.return}C===E&&(C=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ys(t,e),Ws(e),l&4&&Lb(e);break;case 21:break;default:ys(t,e),Ws(e)}}function Ws(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(AT(i)){var l=i;break e}i=i.return}throw Error(It(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(qf(c,""),l.flags&=-33);var d=zb(e);xv(e,d,c);break;case 3:case 4:var y=l.stateNode.containerInfo,a=zb(e);_v(e,a,y);break;default:throw Error(It(161))}}catch(b){Rr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zk(e,t,i){Qt=e,MT(e)}function MT(e,t,i){for(var l=(e.mode&1)!==0;Qt!==null;){var c=Qt,d=c.child;if(c.tag===22&&l){var y=c.memoizedState!==null||xp;if(!y){var a=c.alternate,b=a!==null&&a.memoizedState!==null||Di;a=xp;var w=Di;if(xp=y,(Di=b)&&!w)for(Qt=c;Qt!==null;)y=Qt,b=y.child,y.tag===22&&y.memoizedState!==null?Fb(c):b!==null?(b.return=y,Qt=b):Fb(c);for(;d!==null;)Qt=d,MT(d),d=d.sibling;Qt=c,xp=a,Di=w}Ob(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,Qt=d):Ob(e)}}function Ob(e){for(;Qt!==null;){var t=Qt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Di||mg(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Di)if(i===null)l.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:vs(t.type,i.memoizedProps);l.componentDidUpdate(c,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&yb(t,d,l);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}yb(t,y,i)}break;case 5:var a=t.stateNode;if(i===null&&t.flags&4){i=a;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var C=w.memoizedState;if(C!==null){var E=C.dehydrated;E!==null&&Qf(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(It(163))}Di||t.flags&512&&vv(t)}catch(z){Rr(t,t.return,z)}}if(t===e){Qt=null;break}if(i=t.sibling,i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function Rb(e){for(;Qt!==null;){var t=Qt;if(t===e){Qt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function Fb(e){for(;Qt!==null;){var t=Qt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{mg(4,t)}catch(b){Rr(t,i,b)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var c=t.return;try{l.componentDidMount()}catch(b){Rr(t,c,b)}}var d=t.return;try{vv(t)}catch(b){Rr(t,d,b)}break;case 5:var y=t.return;try{vv(t)}catch(b){Rr(t,y,b)}}}catch(b){Rr(t,t.return,b)}if(t===e){Qt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Qt=a;break}Qt=t.return}}var Wk=Math.ceil,bm=Na.ReactCurrentDispatcher,e1=Na.ReactCurrentOwner,ts=Na.ReactCurrentBatchConfig,Wn=0,hi=null,Yr=null,Ei=0,Io=0,Zc=Ul(0),ti=0,cd=null,ku=0,gg=0,t1=0,Bf=null,po=null,n1=0,fh=1/0,Ca=null,Em=!1,wv=null,zl=null,wp=!1,Tl=null,Sm=0,Nf=0,bv=null,Gp=-1,Zp=0;function to(){return Wn&6?Vr():Gp!==-1?Gp:Gp=Vr()}function Ll(e){return e.mode&1?Wn&2&&Ei!==0?Ei&-Ei:Pk.transition!==null?(Zp===0&&(Zp=dS()),Zp):(e=Yn,e!==0||(e=window.event,e=e===void 0?16:xS(e.type)),e):1}function As(e,t,i,l){if(50<Nf)throw Nf=0,bv=null,Error(It(185));vd(e,i,l),(!(Wn&2)||e!==hi)&&(e===hi&&(!(Wn&2)&&(gg|=i),ti===4&&bl(e,Ei)),_o(e,l),i===1&&Wn===0&&!(t.mode&1)&&(fh=Vr()+500,fg&&$l()))}function _o(e,t){var i=e.callbackNode;PM(e,t);var l=am(e,e===hi?Ei:0);if(l===0)i!==null&&Zw(i),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(i!=null&&Zw(i),t===1)e.tag===0?Ik(jb.bind(null,e)):BS(jb.bind(null,e)),Sk(function(){!(Wn&6)&&$l()}),i=null;else{switch(pS(l)){case 1:i=I_;break;case 4:i=hS;break;case 16:i=sm;break;case 536870912:i=fS;break;default:i=sm}i=DT(i,kT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function kT(e,t){if(Gp=-1,Zp=0,Wn&6)throw Error(It(327));var i=e.callbackNode;if(nh()&&e.callbackNode!==i)return null;var l=am(e,e===hi?Ei:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=Tm(e,l);else{t=l;var c=Wn;Wn|=2;var d=LT();(hi!==e||Ei!==t)&&(Ca=null,fh=Vr()+500,Cu(e,t));do try{qk();break}catch(a){zT(e,a)}while(1);U_(),bm.current=d,Wn=c,Yr!==null?t=0:(hi=null,Ei=0,t=ti)}if(t!==0){if(t===2&&(c=q0(e),c!==0&&(l=c,t=Ev(e,c))),t===1)throw i=cd,Cu(e,0),bl(e,l),_o(e,Vr()),i;if(t===6)bl(e,l);else{if(c=e.current.alternate,!(l&30)&&!Hk(c)&&(t=Tm(e,l),t===2&&(d=q0(e),d!==0&&(l=d,t=Ev(e,d))),t===1))throw i=cd,Cu(e,0),bl(e,l),_o(e,Vr()),i;switch(e.finishedWork=c,e.finishedLanes=l,t){case 0:case 1:throw Error(It(345));case 2:xu(e,po,Ca);break;case 3:if(bl(e,l),(l&130023424)===l&&(t=n1+500-Vr(),10<t)){if(am(e,0)!==0)break;if(c=e.suspendedLanes,(c&l)!==l){to(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=rv(xu.bind(null,e,po,Ca),t);break}xu(e,po,Ca);break;case 4:if(bl(e,l),(l&4194240)===l)break;for(t=e.eventTimes,c=-1;0<l;){var y=31-Cs(l);d=1<<y,y=t[y],y>c&&(c=y),l&=~d}if(l=c,l=Vr()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Wk(l/1960))-l,10<l){e.timeoutHandle=rv(xu.bind(null,e,po,Ca),l);break}xu(e,po,Ca);break;case 5:xu(e,po,Ca);break;default:throw Error(It(329))}}}return _o(e,Vr()),e.callbackNode===i?kT.bind(null,e):null}function Ev(e,t){var i=Bf;return e.current.memoizedState.isDehydrated&&(Cu(e,t).flags|=256),e=Tm(e,t),e!==2&&(t=po,po=i,t!==null&&Sv(t)),e}function Sv(e){po===null?po=e:po.push.apply(po,e)}function Hk(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var c=i[l],d=c.getSnapshot;c=c.value;try{if(!Is(d(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bl(e,t){for(t&=~t1,t&=~gg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Cs(t),l=1<<i;e[i]=-1,t&=~l}}function jb(e){if(Wn&6)throw Error(It(327));nh();var t=am(e,0);if(!(t&1))return _o(e,Vr()),null;var i=Tm(e,t);if(e.tag!==0&&i===2){var l=q0(e);l!==0&&(t=l,i=Ev(e,l))}if(i===1)throw i=cd,Cu(e,0),bl(e,t),_o(e,Vr()),i;if(i===6)throw Error(It(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,po,Ca),_o(e,Vr()),null}function r1(e,t){var i=Wn;Wn|=1;try{return e(t)}finally{Wn=i,Wn===0&&(fh=Vr()+500,fg&&$l())}}function zu(e){Tl!==null&&Tl.tag===0&&!(Wn&6)&&nh();var t=Wn;Wn|=1;var i=ts.transition,l=Yn;try{if(ts.transition=null,Yn=1,e)return e()}finally{Yn=l,ts.transition=i,Wn=t,!(Wn&6)&&$l()}}function i1(){Io=Zc.current,dr(Zc)}function Cu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Ek(i)),Yr!==null)for(i=Yr.return;i!==null;){var l=i;switch(D_(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&fm();break;case 3:ch(),dr(yo),dr(Ni),H_();break;case 5:W_(l);break;case 4:ch();break;case 13:dr(Ar);break;case 19:dr(Ar);break;case 10:$_(l.type._context);break;case 22:case 23:i1()}i=i.return}if(hi=e,Yr=e=Ol(e.current,null),Ei=Io=t,ti=0,cd=null,t1=gg=ku=0,po=Bf=null,Eu!==null){for(t=0;t<Eu.length;t++)if(i=Eu[t],l=i.interleaved,l!==null){i.interleaved=null;var c=l.next,d=i.pending;if(d!==null){var y=d.next;d.next=c,l.next=y}i.pending=l}Eu=null}return e}function zT(e,t){do{var i=Yr;try{if(U_(),Up.current=wm,xm){for(var l=Pr.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}xm=!1}if(Mu=0,ci=ei=Pr=null,jf=!1,ad=0,e1.current=null,i===null||i.return===null){ti=1,cd=t,Yr=null;break}e:{var d=e,y=i.return,a=i,b=t;if(t=Ei,a.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,C=a,E=C.tag;if(!(C.mode&1)&&(E===0||E===11||E===15)){var z=C.alternate;z?(C.updateQueue=z.updateQueue,C.memoizedState=z.memoizedState,C.lanes=z.lanes):(C.updateQueue=null,C.memoizedState=null)}var R=Sb(y);if(R!==null){R.flags&=-257,Tb(R,y,a,d,t),R.mode&1&&Eb(d,w,t),t=R,b=w;var Q=t.updateQueue;if(Q===null){var K=new Set;K.add(b),t.updateQueue=K}else Q.add(b);break e}else{if(!(t&1)){Eb(d,w,t),o1();break e}b=Error(It(426))}}else if(xr&&a.mode&1){var pe=Sb(y);if(pe!==null){!(pe.flags&65536)&&(pe.flags|=256),Tb(pe,y,a,d,t),B_(hh(b,a));break e}}d=b=hh(b,a),ti!==4&&(ti=2),Bf===null?Bf=[d]:Bf.push(d),d=y;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var G=mT(d,b,t);gb(d,G);break e;case 1:a=b;var $=d.type,B=d.stateNode;if(!(d.flags&128)&&(typeof $.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(zl===null||!zl.has(B)))){d.flags|=65536,t&=-t,d.lanes|=t;var oe=gT(d,a,t);gb(d,oe);break e}}d=d.return}while(d!==null)}RT(i)}catch(W){t=W,Yr===i&&i!==null&&(Yr=i=i.return);continue}break}while(1)}function LT(){var e=bm.current;return bm.current=wm,e===null?wm:e}function o1(){(ti===0||ti===3||ti===2)&&(ti=4),hi===null||!(ku&268435455)&&!(gg&268435455)||bl(hi,Ei)}function Tm(e,t){var i=Wn;Wn|=2;var l=LT();(hi!==e||Ei!==t)&&(Ca=null,Cu(e,t));do try{Xk();break}catch(c){zT(e,c)}while(1);if(U_(),Wn=i,bm.current=l,Yr!==null)throw Error(It(261));return hi=null,Ei=0,ti}function Xk(){for(;Yr!==null;)OT(Yr)}function qk(){for(;Yr!==null&&!xM();)OT(Yr)}function OT(e){var t=jT(e.alternate,e,Io);e.memoizedProps=e.pendingProps,t===null?RT(e):Yr=t,e1.current=null}function RT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=$k(i,t),i!==null){i.flags&=32767,Yr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ti=6,Yr=null;return}}else if(i=Uk(i,t,Io),i!==null){Yr=i;return}if(t=t.sibling,t!==null){Yr=t;return}Yr=t=e}while(t!==null);ti===0&&(ti=5)}function xu(e,t,i){var l=Yn,c=ts.transition;try{ts.transition=null,Yn=1,Kk(e,t,i,l)}finally{ts.transition=c,Yn=l}return null}function Kk(e,t,i,l){do nh();while(Tl!==null);if(Wn&6)throw Error(It(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(It(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(MM(e,d),e===hi&&(Yr=hi=null,Ei=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||wp||(wp=!0,DT(sm,function(){return nh(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=ts.transition,ts.transition=null;var y=Yn;Yn=1;var a=Wn;Wn|=4,e1.current=null,Gk(e,i),PT(i,e),gk(tv),lm=!!ev,tv=ev=null,e.current=i,Zk(i),wM(),Wn=a,Yn=y,ts.transition=d}else e.current=i;if(wp&&(wp=!1,Tl=e,Sm=c),d=e.pendingLanes,d===0&&(zl=null),SM(i.stateNode),_o(e,Vr()),t!==null)for(l=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],l(c.value,{componentStack:c.stack,digest:c.digest});if(Em)throw Em=!1,e=wv,wv=null,e;return Sm&1&&e.tag!==0&&nh(),d=e.pendingLanes,d&1?e===bv?Nf++:(Nf=0,bv=e):Nf=0,$l(),null}function nh(){if(Tl!==null){var e=pS(Sm),t=ts.transition,i=Yn;try{if(ts.transition=null,Yn=16>e?16:e,Tl===null)var l=!1;else{if(e=Tl,Tl=null,Sm=0,Wn&6)throw Error(It(331));var c=Wn;for(Wn|=4,Qt=e.current;Qt!==null;){var d=Qt,y=d.child;if(Qt.flags&16){var a=d.deletions;if(a!==null){for(var b=0;b<a.length;b++){var w=a[b];for(Qt=w;Qt!==null;){var C=Qt;switch(C.tag){case 0:case 11:case 15:Df(8,C,d)}var E=C.child;if(E!==null)E.return=C,Qt=E;else for(;Qt!==null;){C=Qt;var z=C.sibling,R=C.return;if(CT(C),C===w){Qt=null;break}if(z!==null){z.return=R,Qt=z;break}Qt=R}}}var Q=d.alternate;if(Q!==null){var K=Q.child;if(K!==null){Q.child=null;do{var pe=K.sibling;K.sibling=null,K=pe}while(K!==null)}}Qt=d}}if(d.subtreeFlags&2064&&y!==null)y.return=d,Qt=y;else e:for(;Qt!==null;){if(d=Qt,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Df(9,d,d.return)}var G=d.sibling;if(G!==null){G.return=d.return,Qt=G;break e}Qt=d.return}}var $=e.current;for(Qt=$;Qt!==null;){y=Qt;var B=y.child;if(y.subtreeFlags&2064&&B!==null)B.return=y,Qt=B;else e:for(y=$;Qt!==null;){if(a=Qt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mg(9,a)}}catch(W){Rr(a,a.return,W)}if(a===y){Qt=null;break e}var oe=a.sibling;if(oe!==null){oe.return=a.return,Qt=oe;break e}Qt=a.return}}if(Wn=c,$l(),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(ag,e)}catch{}l=!0}return l}finally{Yn=i,ts.transition=t}}return!1}function Db(e,t,i){t=hh(i,t),t=mT(e,t,1),e=kl(e,t,1),t=to(),e!==null&&(vd(e,1,t),_o(e,t))}function Rr(e,t,i){if(e.tag===3)Db(e,e,i);else for(;t!==null;){if(t.tag===3){Db(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zl===null||!zl.has(l))){e=hh(i,e),e=gT(t,e,1),t=kl(t,e,1),e=to(),t!==null&&(vd(t,1,e),_o(t,e));break}}t=t.return}}function Yk(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),t=to(),e.pingedLanes|=e.suspendedLanes&i,hi===e&&(Ei&i)===i&&(ti===4||ti===3&&(Ei&130023424)===Ei&&500>Vr()-n1?Cu(e,0):t1|=i),_o(e,t)}function FT(e,t){t===0&&(e.mode&1?(t=hp,hp<<=1,!(hp&130023424)&&(hp=4194304)):t=1);var i=to();e=Oa(e,t),e!==null&&(vd(e,t,i),_o(e,i))}function Jk(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),FT(e,i)}function Qk(e,t){var i=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(It(314))}l!==null&&l.delete(t),FT(e,i)}var jT;jT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||yo.current)go=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return go=!1,Nk(e,t,i);go=!!(e.flags&131072)}else go=!1,xr&&t.flags&1048576&&NS(t,mm,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Vp(e,t),e=t.pendingProps;var c=ah(t,Ni.current);th(t,i),c=q_(null,t,l,e,c,i);var d=K_();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vo(l)?(d=!0,dm(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,G_(t),c.updater=dg,t.stateNode=c,c._reactInternals=t,cv(t,l,e,i),t=dv(null,t,l,!0,d,i)):(t.tag=0,xr&&d&&j_(t),Yi(null,t,c,i),t=t.child),t;case 16:l=t.elementType;e:{switch(Vp(e,t),e=t.pendingProps,c=l._init,l=c(l._payload),t.type=l,c=t.tag=t3(l),e=vs(l,e),c){case 0:t=fv(null,t,l,e,i);break e;case 1:t=Ib(null,t,l,e,i);break e;case 11:t=Cb(null,t,l,e,i);break e;case 14:t=Ab(null,t,l,vs(l.type,e),i);break e}throw Error(It(306,l,""))}return t;case 0:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:vs(l,c),fv(e,t,l,c,i);case 1:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:vs(l,c),Ib(e,t,l,c,i);case 3:e:{if(xT(t),e===null)throw Error(It(387));l=t.pendingProps,d=t.memoizedState,c=d.element,GS(e,t),vm(t,l,null,i);var y=t.memoizedState;if(l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=hh(Error(It(423)),t),t=Pb(e,t,l,i,c);break e}else if(l!==c){c=hh(Error(It(424)),t),t=Pb(e,t,l,i,c);break e}else for(ko=Ml(t.stateNode.containerInfo.firstChild),zo=t,xr=!0,xs=null,i=XS(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(lh(),l===c){t=Ra(e,t,i);break e}Yi(e,t,l,i)}t=t.child}return t;case 5:return qS(t),e===null&&av(t),l=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,y=c.children,nv(l,c)?y=null:d!==null&&nv(l,d)&&(t.flags|=32),_T(e,t),Yi(e,t,y,i),t.child;case 6:return e===null&&av(t),null;case 13:return wT(e,t,i);case 4:return Z_(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=uh(t,null,l,i):Yi(e,t,l,i),t.child;case 11:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:vs(l,c),Cb(e,t,l,c,i);case 7:return Yi(e,t,t.pendingProps,i),t.child;case 8:return Yi(e,t,t.pendingProps.children,i),t.child;case 12:return Yi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(l=t.type._context,c=t.pendingProps,d=t.memoizedProps,y=c.value,sr(gm,l._currentValue),l._currentValue=y,d!==null)if(Is(d.value,y)){if(d.children===c.children&&!yo.current){t=Ra(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var a=d.dependencies;if(a!==null){y=d.child;for(var b=a.firstContext;b!==null;){if(b.context===l){if(d.tag===1){b=ka(-1,i&-i),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var C=w.pending;C===null?b.next=b:(b.next=C.next,C.next=b),w.pending=b}}d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),lv(d.return,i,t),a.lanes|=i;break}b=b.next}}else if(d.tag===10)y=d.type===t.type?null:d.child;else if(d.tag===18){if(y=d.return,y===null)throw Error(It(341));y.lanes|=i,a=y.alternate,a!==null&&(a.lanes|=i),lv(y,i,t),y=d.sibling}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===t){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}Yi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,l=t.pendingProps.children,th(t,i),c=ns(c),l=l(c),t.flags|=1,Yi(e,t,l,i),t.child;case 14:return l=t.type,c=vs(l,t.pendingProps),c=vs(l.type,c),Ab(e,t,l,c,i);case 15:return yT(e,t,t.type,t.pendingProps,i);case 17:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:vs(l,c),Vp(e,t),t.tag=1,vo(l)?(e=!0,dm(t)):e=!1,th(t,i),WS(t,l,c),cv(t,l,c,i),dv(null,t,l,!0,e,i);case 19:return bT(e,t,i);case 22:return vT(e,t,i)}throw Error(It(156,t.tag))};function DT(e,t){return cS(e,t)}function e3(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qo(e,t,i,l){return new e3(e,t,i,l)}function s1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function t3(e){if(typeof e=="function")return s1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===T_)return 11;if(e===C_)return 14}return 2}function Ol(e,t){var i=e.alternate;return i===null?(i=Qo(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Wp(e,t,i,l,c,d){var y=2;if(l=e,typeof e=="function")s1(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Rc:return Au(i.children,c,d,t);case S_:y=8,c|=8;break;case O0:return e=Qo(12,i,t,c|2),e.elementType=O0,e.lanes=d,e;case R0:return e=Qo(13,i,t,c),e.elementType=R0,e.lanes=d,e;case F0:return e=Qo(19,i,t,c),e.elementType=F0,e.lanes=d,e;case HE:return yg(i,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ZE:y=10;break e;case WE:y=9;break e;case T_:y=11;break e;case C_:y=14;break e;case yl:y=16,l=null;break e}throw Error(It(130,e==null?e:typeof e,""))}return t=Qo(y,i,t,c),t.elementType=e,t.type=l,t.lanes=d,t}function Au(e,t,i,l){return e=Qo(7,e,l,t),e.lanes=i,e}function yg(e,t,i,l){return e=Qo(22,e,l,t),e.elementType=HE,e.lanes=i,e.stateNode={isHidden:!1},e}function Jy(e,t,i){return e=Qo(6,e,null,t),e.lanes=i,e}function Qy(e,t,i){return t=Qo(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function n3(e,t,i,l,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ly(0),this.expirationTimes=Ly(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ly(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function a1(e,t,i,l,c,d,y,a,b){return e=new n3(e,t,i,a,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Qo(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},G_(d),e}function r3(e,t,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oc,key:l==null?null:""+l,children:e,containerInfo:t,implementation:i}}function BT(e){if(!e)return Fl;e=e._reactInternals;e:{if(Du(e)!==e||e.tag!==1)throw Error(It(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(It(171))}if(e.tag===1){var i=e.type;if(vo(i))return DS(e,i,t)}return t}function NT(e,t,i,l,c,d,y,a,b){return e=a1(i,l,!0,e,c,d,y,a,b),e.context=BT(null),i=e.current,l=to(),c=Ll(i),d=ka(l,c),d.callback=t??null,kl(i,d,c),e.current.lanes=c,vd(e,c,l),_o(e,l),e}function vg(e,t,i,l){var c=t.current,d=to(),y=Ll(c);return i=BT(i),t.context===null?t.context=i:t.pendingContext=i,t=ka(d,y),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=kl(c,t,y),e!==null&&(As(e,c,y,d),Np(e,c,y)),y}function Cm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function l1(e,t){Bb(e,t),(e=e.alternate)&&Bb(e,t)}function i3(){return null}var UT=typeof reportError=="function"?reportError:function(e){console.error(e)};function u1(e){this._internalRoot=e}_g.prototype.render=u1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(It(409));vg(e,t,null,null)};_g.prototype.unmount=u1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zu(function(){vg(null,e,null,null)}),t[La]=null}};function _g(e){this._internalRoot=e}_g.prototype.unstable_scheduleHydration=function(e){if(e){var t=yS();e={blockedOn:null,target:e,priority:t};for(var i=0;i<wl.length&&t!==0&&t<wl[i].priority;i++);wl.splice(i,0,e),i===0&&_S(e)}};function c1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nb(){}function o3(e,t,i,l,c){if(c){if(typeof l=="function"){var d=l;l=function(){var w=Cm(y);d.call(w)}}var y=NT(t,l,e,0,null,!1,!1,"",Nb);return e._reactRootContainer=y,e[La]=y.current,nd(e.nodeType===8?e.parentNode:e),zu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof l=="function"){var a=l;l=function(){var w=Cm(b);a.call(w)}}var b=a1(e,0,!1,null,null,!1,!1,"",Nb);return e._reactRootContainer=b,e[La]=b.current,nd(e.nodeType===8?e.parentNode:e),zu(function(){vg(t,b,i,l)}),b}function wg(e,t,i,l,c){var d=i._reactRootContainer;if(d){var y=d;if(typeof c=="function"){var a=c;c=function(){var b=Cm(y);a.call(b)}}vg(t,y,e,c)}else y=o3(i,t,e,c,l);return Cm(y)}mS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=bf(t.pendingLanes);i!==0&&(P_(t,i|1),_o(t,Vr()),!(Wn&6)&&(fh=Vr()+500,$l()))}break;case 13:zu(function(){var l=Oa(e,1);if(l!==null){var c=to();As(l,e,1,c)}}),l1(e,1)}};M_=function(e){if(e.tag===13){var t=Oa(e,134217728);if(t!==null){var i=to();As(t,e,134217728,i)}l1(e,134217728)}};gS=function(e){if(e.tag===13){var t=Ll(e),i=Oa(e,t);if(i!==null){var l=to();As(i,e,t,l)}l1(e,t)}};yS=function(){return Yn};vS=function(e,t){var i=Yn;try{return Yn=e,t()}finally{Yn=i}};W0=function(e,t,i){switch(t){case"input":if(B0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var c=hg(l);if(!c)throw Error(It(90));qE(l),B0(l,c)}}}break;case"textarea":YE(e,i);break;case"select":t=i.value,t!=null&&Yc(e,!!i.multiple,t,!1)}};iS=r1;oS=zu;var s3={usingClientEntryPoint:!1,Events:[xd,Bc,hg,nS,rS,r1]},vf={findFiberByHostInstance:bu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},a3={bundleType:vf.bundleType,version:vf.version,rendererPackageName:vf.rendererPackageName,rendererConfig:vf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Na.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lS(e),e===null?null:e.stateNode},findFiberByHostInstance:vf.findFiberByHostInstance||i3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bp.isDisabled&&bp.supportsFiber)try{ag=bp.inject(a3),Qs=bp}catch{}}Oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s3;Oo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c1(t))throw Error(It(200));return r3(e,t,null,i)};Oo.createRoot=function(e,t){if(!c1(e))throw Error(It(299));var i=!1,l="",c=UT;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=a1(e,1,!1,null,null,i,!1,l,c),e[La]=t.current,nd(e.nodeType===8?e.parentNode:e),new u1(t)};Oo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(It(188)):(e=Object.keys(e).join(","),Error(It(268,e)));return e=lS(t),e=e===null?null:e.stateNode,e};Oo.flushSync=function(e){return zu(e)};Oo.hydrate=function(e,t,i){if(!xg(t))throw Error(It(200));return wg(null,e,t,!0,i)};Oo.hydrateRoot=function(e,t,i){if(!c1(e))throw Error(It(405));var l=i!=null&&i.hydratedSources||null,c=!1,d="",y=UT;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=NT(t,null,e,1,i??null,c,!1,d,y),e[La]=t.current,nd(e),l)for(e=0;e<l.length;e++)i=l[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new _g(t)};Oo.render=function(e,t,i){if(!xg(t))throw Error(It(200));return wg(null,e,t,!1,i)};Oo.unmountComponentAtNode=function(e){if(!xg(e))throw Error(It(40));return e._reactRootContainer?(zu(function(){wg(null,null,e,!1,function(){e._reactRootContainer=null,e[La]=null})}),!0):!1};Oo.unstable_batchedUpdates=r1;Oo.unstable_renderSubtreeIntoContainer=function(e,t,i,l){if(!xg(i))throw Error(It(200));if(e==null||e._reactInternals===void 0)throw Error(It(38));return wg(e,t,i,!1,l)};Oo.version="18.2.0-next-9e3b772b8-20220608";function $T(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($T)}catch(e){console.error(e)}}$T(),NE.exports=Oo;var h1=NE.exports;const l3=gd(h1);var VT={exports:{}};(function(e,t){(function(i,l){e.exports=l()})(xl,function(){var i,l,c;function d(a,b){if(!i)i=b;else if(!l)l=b;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+l+")(sharedChunk);",C={};i(C),c=b(C),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(a){function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var w=C;function C(o,n){this.x=o,this.y=n}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),m=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(o){return o instanceof C?o:Array.isArray(o)?new C(o[0],o[1]):o};var E=b(w),z=R;function R(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}R.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=m/v}var _=0,T=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<n));h++)o>m?_=s:T=s,s=.5*(T-_)+_;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Q=b(z);function K(o,n,s,h){const m=new Q(o,n,s,h);return function(v){return m.solve(v)}}const pe=K(.25,.1,.25,1);function G(o,n,s){return Math.min(s,Math.max(n,o))}function $(o,n,s){const h=s-n,m=((o-n)%h+h)%h+n;return m===n?s:m}function B(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let oe=1;function W(o,n){o.forEach(s=>{n[s]&&(n[s]=n[s].bind(n))})}function D(o,n,s){const h={};for(const m in o)h[m]=n.call(s||this,o[m],m,o);return h}function S(o,n,s){const h={};for(const m in o)n.call(s||this,o[m],m,o)&&(h[m]=o[m]);return h}function P(o){return Array.isArray(o)?o.map(P):typeof o=="object"&&o?D(o,P):o}const Z={};function J(o){Z[o]||(typeof console<"u"&&console.warn(o),Z[o]=!0)}function H(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function ve(o){let n=0;for(let s,h,m=0,v=o.length,_=v-1;m<v;_=m++)s=o[m],h=o[_],n+=(h.x-s.x)*(s.y+h.y);return n}function _e(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let xe=null;function te(o){if(xe==null){const n=o.navigator?o.navigator.userAgent:null;xe=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return xe}function le(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let re,me;const we={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){return this.getImageCanvasContext(o).getImageData(-n,-n,o.width+2*n,o.height+2*n)},getImageCanvasContext(o){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=o.width,n.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(re||(re=document.createElement("a")),re.href=o,re.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(me==null&&(me=matchMedia("(prefers-reduced-motion: reduce)")),me.matches)}},be={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Be extends Error{constructor(n,s,h,m){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=m}}const Ie=_e()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Oe=o=>be.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function $e(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:Ie(),signal:s.signal});let m=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(_=>_.ok?(T=>{(o.type==="arrayBuffer"||o.type==="image"?T.arrayBuffer():o.type==="json"?T.json():T.text()).then(I=>{v||(m=!0,n(null,I,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(I=>{v||n(new Error(I.message))})})(_):_.blob().then(T=>n(new Be(_.status,_.statusText,o.url,T)))).catch(_=>{_.code!==20&&n(new Error(_.message))}),{cancel:()=>{v=!0,m||s.abort()}}}const Ve=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(_e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!_e())return(Oe(o.url)||$e)(o,n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(Ie())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return $e(o,n);if(_e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,m){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const _ in h.headers)v.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let _=v.response;if(h.type==="json")try{_=JSON.parse(v.response)}catch(T){return m(T)}m(null,_,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const _=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new Be(v.status,v.statusText,h.url,_))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},ot=function(o,n){return Ve(B(o,{type:"arrayBuffer"}),n)};function ut(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function gt(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function Mt(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class ct{constructor(n,s={}){B(this,s),this.type=n}}class xt extends ct{constructor(n,s={}){super("error",B({error:n},s))}}class $t{on(n,s){return this._listeners=this._listeners||{},gt(n,s,this._listeners),this}off(n,s){return Mt(n,s,this._listeners),Mt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},gt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new ct(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const T of m)T.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const T of v)Mt(h,T,this._oneTimeListeners),T.call(this,n);const _=this._eventedParent;_&&(B(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof xt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Ye={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const sn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function En(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return sn.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Ht(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!Ht(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!Ht(o[s],n[s]))return!1;return!0}return o===n}const Rt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function vn(o,n,s){s.push({command:Rt.addSource,args:[o,n[o]]})}function Te(o,n,s){n.push({command:Rt.removeSource,args:[o]}),s[o]=!0}function F(o,n,s,h){Te(o,s,h),vn(o,n,s)}function O(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Ht(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Ht(o[s][h],n[s][h]))return!1;return!0}function ye(o,n,s,h,m,v){let _;for(_ in n=n||{},o=o||{})Object.prototype.hasOwnProperty.call(o,_)&&(Ht(o[_],n[_])||s.push({command:v,args:[h,_,n[_],m]}));for(_ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(o,_)&&(Ht(o[_],n[_])||s.push({command:v,args:[h,_,n[_],m]}))}function We(o){return o.id}function tt(o,n){return o[n.id]=n,o}class Ge{constructor(n,s,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function ae(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class L extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class j{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(n){return new j(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Ee={kind:"null"},Se={kind:"number"},Ke={kind:"string"},Qe={kind:"boolean"},Gt={kind:"color"},cn={kind:"object"},Lt={kind:"value"},In={kind:"collator"},_n={kind:"formatted"},wr={kind:"padding"},ni={kind:"resolvedImage"};function ar(o,n){return{kind:"array",itemType:o,N:n}}function Ln(o){if(o.kind==="array"){const n=Ln(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const lr=[Ee,Se,Ke,Qe,Gt,_n,cn,ar(Lt),wr,ni];function di(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!di(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of lr)if(!di(s,n))return null}}return`Expected ${Ln(o)} but found ${Ln(n)} instead.`}function Pe(o,n){return n.some(s=>s.kind===o.kind)}function ie(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function se(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const he=.96422,Ce=.82521,Re=4/29,He=6/29,Ue=3*He*He,Ne=He*He*He,Je=Math.PI/180,dt=180/Math.PI;function mt(o){return(o%=360)<0&&(o+=360),o}function pt([o,n,s,h]){let m,v;const _=an((.2225045*(o=en(o))+.7168786*(n=en(n))+.0606169*(s=en(s)))/1);o===n&&n===s?m=v=_:(m=an((.4360747*o+.3850649*n+.1430804*s)/he),v=an((.0139322*o+.0971045*n+.7141733*s)/Ce));const T=116*_-16;return[T<0?0:T,500*(m-_),200*(_-v),h]}function en(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function an(o){return o>Ne?Math.pow(o,1/3):o/Ue+Re}function Ut([o,n,s,h]){let m=(o+16)/116,v=isNaN(n)?m:m+n/500,_=isNaN(s)?m:m-s/200;return m=1*ln(m),v=he*ln(v),_=Ce*ln(_),[Xt(3.1338561*v-1.6168667*m-.4906146*_),Xt(-.9787684*v+1.9161415*m+.033454*_),Xt(.0719453*v-.2289914*m+1.4052427*_),h]}function Xt(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function ln(o){return o>He?o*o*o:Ue*(o-Re)}function bn(o){return parseInt(o.padEnd(2,o),16)/255}function wn(o,n){return Mn(n?o/100:o,0,1)}function Mn(o,n,s){return Math.min(Math.max(n,o),s)}function Hn(o){return!o.some(Number.isNaN)}const mr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class hn{constructor(n,s,h,m=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,s,h,m]))}static parse(n){if(n instanceof hn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase())==="transparent")return[0,0,0,0];const m=mr[h];if(m){const[_,T,I]=m;return[_/255,T/255,I/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const _=h.length<6?1:2;let T=1;return[bn(h.slice(T,T+=_)),bn(h.slice(T,T+=_)),bn(h.slice(T,T+=_)),bn(h.slice(T,T+_)||"ff")]}if(h.startsWith("rgb")){const _=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[T,I,U,X,ee,ue,ce,de,Le,ke,qe,et]=_,Ze=[X||" ",ce||" ",ke].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const rt=[U,ue,Le].join(""),st=rt==="%%%"?100:rt===""?255:0;if(st){const ht=[Mn(+I/st,0,1),Mn(+ee/st,0,1),Mn(+de/st,0,1),qe?wn(+qe,et):1];if(Hn(ht))return ht}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,T,I,U,X,ee,ue,ce,de]=v,Le=[I||" ",X||" ",ue].join("");if(Le==="  "||Le==="  /"||Le===",,"||Le===",,,"){const ke=[+T,Mn(+U,0,100),Mn(+ee,0,100),ce?wn(+ce,de):1];if(Hn(ke))return function([qe,et,Ze,rt]){function st(ht){const Nt=(ht+qe/30)%12,Vt=et*Math.min(Ze,1-Ze);return Ze-Vt*Math.max(-1,Math.min(Nt-3,9-Nt,1))}return qe=mt(qe),et/=100,Ze/=100,[st(0),st(8),st(4),rt]}(ke)}}}(n);return s?new hn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,m,v]=pt(n),_=Math.sqrt(h*h+m*m);return[Math.round(1e4*_)?mt(Math.atan2(m,h)*dt):NaN,_,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",pt(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,m]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${m})`}}hn.black=new hn(0,0,0,1),hn.white=new hn(1,1,1,1),hn.transparent=new hn(0,0,0,0),hn.red=new hn(1,0,0,1);class tr{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ui{constructor(n,s,h,m,v){this.text=n,this.image=s,this.scale=h,this.fontStack=m,this.textColor=v}}class ur{constructor(n){this.sections=n}static fromString(n){return new ur([new Ui(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ur?n:ur.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ri{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ri)return n;if(typeof n=="number")return new ri([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ri(n)}}toString(){return JSON.stringify(this.values)}}class mn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new mn({name:n,available:!1}):null}}function Ti(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $a(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof hn||o instanceof tr||o instanceof ur||o instanceof ri||o instanceof mn)return!0;if(Array.isArray(o)){for(const n of o)if(!$a(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!$a(o[n]))return!1;return!0}return!1}function gr(o){if(o===null)return Ee;if(typeof o=="string")return Ke;if(typeof o=="boolean")return Qe;if(typeof o=="number")return Se;if(o instanceof hn)return Gt;if(o instanceof tr)return In;if(o instanceof ur)return _n;if(o instanceof ri)return wr;if(o instanceof mn)return ni;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const m=gr(h);if(s){if(s===m)continue;s=Lt;break}s=m}return ar(s||Lt,n)}return cn}function ia(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof hn||o instanceof ur||o instanceof ri||o instanceof mn?o.toString():JSON.stringify(o)}class Do{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!$a(n[1]))return s.error("invalid value");const h=n[1];let m=gr(h);const v=s.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new Do(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class cr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Ci={string:Ke,number:Se,boolean:Qe,object:cn};class $i{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,m=1;const v=n[0];if(v==="array"){let T,I;if(n.length>2){const U=n[1];if(typeof U!="string"||!(U in Ci)||U==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);T=Ci[U],m++}else T=Lt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=n[2],m++}h=ar(T,I)}else{if(!Ci[v])throw new Error(`Types doesn't contain name = ${v}`);h=Ci[v]}const _=[];for(;m<n.length;m++){const T=s.parse(n[m],m,Lt);if(!T)return null;_.push(T)}return new $i(h,_)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!di(this.type,gr(h)))return h;if(s===this.args.length-1)throw new cr(`Expected value to be of type ${Ln(this.type)}, but found ${Ln(gr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const $u={"to-boolean":Qe,"to-color":Gt,"to-number":Se,"to-string":Ke};class jr{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!$u[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const m=$u[h],v=[];for(let _=1;_<n.length;_++){const T=s.parse(n[_],_,Lt);if(!T)return null;v.push(T)}return new jr(m,v)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let s,h;for(const m of this.args){if(s=m.evaluate(n),h=null,s instanceof hn)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ti(s[0],s[1],s[2],s[3]),!h))return new hn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new cr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="padding"){let s;for(const h of this.args){s=h.evaluate(n);const m=ri.parse(s);if(m)return m}throw new cr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="number"){let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new cr(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?ur.fromString(ia(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?mn.fromString(ia(this.args[0].evaluate(n))):ia(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Vl=["Unknown","Point","LineString","Polygon"];class Va{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=hn.parse(n)),s}}class Gr{constructor(n,s,h=[],m,v=new j,_=[]){this.registry=n,this.path=h,this.key=h.map(T=>`[${T}]`).join(""),this.scope=v,this.errors=_,this.expectedType=m,this._isConstant=s}parse(n,s,h,m,v={}){return s?this.concat(s,h,m)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(m,v,_){return _==="assert"?new $i(v,[m]):_==="coerce"?new jr(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let _=v.parse(n,this);if(!_)return null;if(this.expectedType){const T=this.expectedType,I=_.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||I.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(T.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array"){if(this.checkSubtype(T,I))return null}else _=h(_,T,s.typeAnnotation||"coerce");else _=h(_,T,s.typeAnnotation||"coerce");else _=h(_,T,s.typeAnnotation||"assert")}if(!(_ instanceof Do)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const T=new Va;try{_=new Do(_.type,_.evaluate(T))}catch(I){return this.error(I.message),null}}return _}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const m=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Gr(this.registry,this._isConstant,m,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new L(h,n))}checkSubtype(n,s){const h=di(n,s);return h&&this.error(h),h}}class Rn{constructor(n,s,h){this.type=In,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Qe);if(!m)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Qe);if(!v)return null;let _=null;return h.locale&&(_=s.parse(h.locale,1,Ke),!_)?null:new Rn(m,v,_)}evaluate(n){return new tr(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Bo=8192;function oa(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Ga(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Vu(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(s*m*Bo),Math.round(h*m*Bo)]}function sa(o,n,s){const h=o[0]-n[0],m=o[1]-n[1],v=o[0]-s[0],_=o[1]-s[1];return h*_-v*m==0&&h*v<=0&&m*_<=0}function Gl(o,n){let s=!1;for(let _=0,T=n.length;_<T;_++){const I=n[_];for(let U=0,X=I.length;U<X-1;U++){if(sa(o,I[U],I[U+1]))return!1;(m=I[U])[1]>(h=o)[1]!=(v=I[U+1])[1]>h[1]&&h[0]<(v[0]-m[0])*(h[1]-m[1])/(v[1]-m[1])+m[0]&&(s=!s)}}var h,m,v;return s}function Gu(o,n){for(let s=0;s<n.length;s++)if(Gl(o,n[s]))return!0;return!1}function pi(o,n,s,h){const m=h[0]-s[0],v=h[1]-s[1],_=(o[0]-s[0])*v-m*(o[1]-s[1]),T=(n[0]-s[0])*v-m*(n[1]-s[1]);return _>0&&T<0||_<0&&T>0}function Sh(o,n,s){for(const U of s)for(let X=0;X<U.length-1;++X)if((T=[(_=U[X+1])[0]-(v=U[X])[0],_[1]-v[1]])[0]*(I=[(m=n)[0]-(h=o)[0],m[1]-h[1]])[1]-T[1]*I[0]!=0&&pi(h,m,v,_)&&pi(v,_,h,m))return!0;var h,m,v,_,T,I;return!1}function Zu(o,n){for(let s=0;s<o.length;++s)if(!Gl(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(Sh(o[s],o[s+1],n))return!1;return!0}function Th(o,n){for(let s=0;s<n.length;s++)if(Zu(o,n[s]))return!0;return!1}function Zl(o,n,s){const h=[];for(let m=0;m<o.length;m++){const v=[];for(let _=0;_<o[m].length;_++){const T=Vu(o[m][_],s);oa(n,T),v.push(T)}h.push(v)}return h}function Wl(o,n,s){const h=[];for(let m=0;m<o.length;m++){const v=Zl(o[m],n,s);h.push(v)}return h}function Za(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const m=.5*h;let v=o[0]-s[0]>m?-h:s[0]-o[0]>m?h:0;v===0&&(v=o[0]-s[2]>m?-h:s[2]-o[0]>m?h:0),o[0]+=v}oa(n,o)}function Wa(o,n,s,h){const m=Math.pow(2,h.z)*Bo,v=[h.x*Bo,h.y*Bo],_=[];for(const T of o)for(const I of T){const U=[I.x+v[0],I.y+v[1]];Za(U,n,s,m),_.push(U)}return _}function Hl(o,n,s,h){const m=Math.pow(2,h.z)*Bo,v=[h.x*Bo,h.y*Bo],_=[];for(const I of o){const U=[];for(const X of I){const ee=[X.x+v[0],X.y+v[1]];oa(n,ee),U.push(ee)}_.push(U)}if(n[2]-n[0]<=m/2){(T=n)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const I of _)for(const U of I)Za(U,n,s,m)}var T;return _}class Ai{constructor(n,s){this.type=Qe,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if($a(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const v=h.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ai(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ai(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Ai(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(h.type==="Polygon"){const T=Zl(h.coordinates,v,_),I=Wa(s.geometry(),m,v,_);if(!Ga(m,v))return!1;for(const U of I)if(!Gl(U,T))return!1}if(h.type==="MultiPolygon"){const T=Wl(h.coordinates,v,_),I=Wa(s.geometry(),m,v,_);if(!Ga(m,v))return!1;for(const U of I)if(!Gu(U,T))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(h.type==="Polygon"){const T=Zl(h.coordinates,v,_),I=Hl(s.geometry(),m,v,_);if(!Ga(m,v))return!1;for(const U of I)if(!Zu(U,T))return!1}if(h.type==="MultiPolygon"){const T=Wl(h.coordinates,v,_),I=Hl(s.geometry(),m,v,_);if(!Ga(m,v))return!1;for(const U of I)if(!Th(U,T))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ha{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Ha(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Dr{constructor(n,s,h,m){this.name=n,this.type=s,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],m=Dr.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=_.filter(([U])=>!Array.isArray(U)||U.length===n.length-1);let I=null;for(const[U,X]of T){I=new Gr(s.registry,Xa,s.path,null,s.scope);const ee=[];let ue=!1;for(let ce=1;ce<n.length;ce++){const de=n[ce],Le=Array.isArray(U)?U[ce-1]:U.type,ke=I.parse(de,1+ee.length,Le);if(!ke){ue=!0;break}ee.push(ke)}if(!ue)if(Array.isArray(U)&&U.length!==ee.length)I.error(`Expected ${U.length} arguments, but found ${ee.length} instead.`);else{for(let ce=0;ce<ee.length;ce++){const de=Array.isArray(U)?U[ce]:U.type,Le=ee[ce];I.concat(ce+1).checkSubtype(de,Le.type)}if(I.errors.length===0)return new Dr(h,v,X,ee)}}if(T.length===1)s.errors.push(...I.errors);else{const U=(T.length?T:_).map(([ee])=>{return ue=ee,Array.isArray(ue)?`(${ue.map(Ln).join(", ")})`:`(${Ln(ue.type)}...)`;var ue}).join(" | "),X=[];for(let ee=1;ee<n.length;ee++){const ue=s.parse(n[ee],1+X.length);if(!ue)return null;X.push(Ln(ue.type))}s.error(`Expected arguments of type ${U}, but found (${X.join(", ")}) instead.`)}return null}static register(n,s){Dr.definitions=s;for(const h in s)n[h]=Dr}}function Xa(o){if(o instanceof Ha)return Xa(o.boundExpression);if(o instanceof Dr&&o.name==="error"||o instanceof Rn||o instanceof Ai)return!1;const n=o instanceof jr||o instanceof $i;let s=!0;return o.eachChild(h=>{s=n?s&&Xa(h):s&&h instanceof Do}),!!s&&aa(o)&&qa(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function aa(o){if(o instanceof Dr&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Ai)return!1;let n=!0;return o.eachChild(s=>{n&&!aa(s)&&(n=!1)}),n}function Ms(o){if(o instanceof Dr&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!Ms(s)&&(n=!1)}),n}function qa(o,n){if(o instanceof Dr&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!qa(h,n)&&(s=!1)}),s}function la(o,n){const s=o.length-1;let h,m,v=0,_=s,T=0;for(;v<=_;)if(T=Math.floor((v+_)/2),h=o[T],m=o[T+1],h<=n){if(T===s||n<m)return T;v=T+1}else{if(!(h>n))throw new cr("Input is not a number.");_=T-1}return 0}class ks{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[m,v]of h)this.labels.push(m),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Se);if(!h)return null;const m=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<n.length;_+=2){const T=_===1?-1/0:n[_],I=n[_+1],U=_,X=_+1;if(typeof T!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(m.length&&m[m.length-1][0]>=T)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const ee=s.parse(I,X,v);if(!ee)return null;v=v||ee.type,m.push([T,ee])}return new ks(v,h,m)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return h[0].evaluate(n);const v=s.length;return m>=s[v-1]?h[v-1].evaluate(n):h[la(s,m)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function zs(o,n,s){return o+s*(n-o)}function Ka(o,n,s){return o.map((h,m)=>zs(h,n[m],s))}const Jr={number:zs,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[m,v,_,T]=Ka(o.rgb,n.rgb,s);return new hn(m,v,_,T,!1)}case"hcl":{const[m,v,_,T]=o.hcl,[I,U,X,ee]=n.hcl;let ue,ce;if(isNaN(m)||isNaN(I))isNaN(m)?isNaN(I)?ue=NaN:(ue=I,_!==1&&_!==0||(ce=U)):(ue=m,X!==1&&X!==0||(ce=v));else{let et=I-m;I>m&&et>180?et-=360:I<m&&m-I>180&&(et+=360),ue=m+s*et}const[de,Le,ke,qe]=function([et,Ze,rt,st]){return et=isNaN(et)?0:et*Je,Ut([rt,Math.cos(et)*Ze,Math.sin(et)*Ze,st])}([ue,ce??zs(v,U,s),zs(_,X,s),zs(T,ee,s)]);return new hn(de,Le,ke,qe,!1)}case"lab":{const[m,v,_,T]=Ut(Ka(o.lab,n.lab,s));return new hn(m,v,_,T,!1)}}},array:Ka,padding:function(o,n,s){return new ri(Ka(o.values,n.values,s))}};class mi{constructor(n,s,h,m,v){this.type=n,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[_,T]of v)this.labels.push(_),this.outputs.push(T)}static interpolationFactor(n,s,h,m){let v=0;if(n.name==="exponential")v=Xl(s,n.base,h,m);else if(n.name==="linear")v=Xl(s,1,h,m);else if(n.name==="cubic-bezier"){const _=n.controlPoints;v=new Q(_[0],_[1],_[2],_[3]).solve(Xl(s,1,h,m))}return v}static parse(n,s){let[h,m,v,..._]=n;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const U=m[1];if(typeof U!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:U}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const U=m.slice(1);if(U.length!==4||U.some(X=>typeof X!="number"||X<0||X>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:U}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,Se),!v)return null;const T=[];let I=null;h==="interpolate-hcl"||h==="interpolate-lab"?I=Gt:s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType);for(let U=0;U<_.length;U+=2){const X=_[U],ee=_[U+1],ue=U+3,ce=U+4;if(typeof X!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if(T.length&&T[T.length-1][0]>=X)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ue);const de=s.parse(ee,ce,I);if(!de)return null;I=I||de.type,T.push([X,de])}return se(I,Se)||se(I,Gt)||se(I,wr)||se(I,ar(Se))?new mi(I,h,m,v,T):s.error(`Type ${Ln(I)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return h[0].evaluate(n);const v=s.length;if(m>=s[v-1])return h[v-1].evaluate(n);const _=la(s,m),T=mi.interpolationFactor(this.interpolation,m,s[_],s[_+1]),I=h[_].evaluate(n),U=h[_+1].evaluate(n);switch(this.operator){case"interpolate":return Jr[this.type.kind](I,U,T);case"interpolate-hcl":return Jr.color(I,U,T,"hcl");case"interpolate-lab":return Jr.color(I,U,T,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Xl(o,n,s,h){const m=h-s,v=o-s;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}class Ya{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const v=[];for(const T of n.slice(1)){const I=s.parse(T,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,v.push(I)}if(!h)throw new Error("No output type");const _=m&&v.some(T=>di(m,T.type));return new Ya(_?Lt:h,v)}evaluate(n){let s,h=null,m=0;for(const v of this.args)if(m++,h=v.evaluate(n),h&&h instanceof mn&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Ja{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const _=n[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const T=s.parse(n[v+1],v+1);if(!T)return null;h.push([_,T])}const m=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return m?new Ja(h,m):null}outputDefined(){return this.result.outputDefined()}}class Qa{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Se),m=s.parse(n[2],2,ar(s.expectedType||Lt));return h&&m?new Qa(m.type.itemType,h,m):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new cr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new cr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new cr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class ua{constructor(n,s){this.type=Qe,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),m=s.parse(n[2],2,Lt);return h&&m?Pe(h.type,[Qe,Ke,Se,Ee,Lt])?new ua(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ln(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!ie(s,["boolean","string","number","null"]))throw new cr(`Expected first argument to be of type boolean, string, number or null, but found ${Ln(gr(s))} instead.`);if(!ie(h,["string","array"]))throw new cr(`Expected second argument to be of type array or string, but found ${Ln(gr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class No{constructor(n,s,h){this.type=Se,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),m=s.parse(n[2],2,Lt);if(!h||!m)return null;if(!Pe(h.type,[Qe,Ke,Se,Ee,Lt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ln(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Se);return v?new No(h,m,v):null}return new No(h,m)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!ie(s,["boolean","string","number","null"]))throw new cr(`Expected first argument to be of type boolean, string, number or null, but found ${Ln(gr(s))} instead.`);if(!ie(h,["string","array"]))throw new cr(`Expected second argument to be of type array or string, but found ${Ln(gr(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(s,m)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class kn{constructor(n,s,h,m,v,_){this.inputType=n,this.type=s,this.input=h,this.cases=m,this.outputs=v,this.otherwise=_}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const v={},_=[];for(let U=2;U<n.length-1;U+=2){let X=n[U];const ee=n[U+1];Array.isArray(X)||(X=[X]);const ue=s.concat(U);if(X.length===0)return ue.error("Expected at least one branch label.");for(const de of X){if(typeof de!="number"&&typeof de!="string")return ue.error("Branch labels must be numbers or strings.");if(typeof de=="number"&&Math.abs(de)>Number.MAX_SAFE_INTEGER)return ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof de=="number"&&Math.floor(de)!==de)return ue.error("Numeric branch labels must be integer values.");if(h){if(ue.checkSubtype(h,gr(de)))return null}else h=gr(de);if(v[String(de)]!==void 0)return ue.error("Branch labels must be unique.");v[String(de)]=_.length}const ce=s.parse(ee,U,m);if(!ce)return null;m=m||ce.type,_.push(ce)}const T=s.parse(n[1],1,Lt);if(!T)return null;const I=s.parse(n[n.length-1],n.length-1,m);return I?T.type.kind!=="value"&&s.concat(1).checkSubtype(h,T.type)?null:new kn(h,m,T,v,_,I):null}evaluate(n){const s=this.input.evaluate(n);return(gr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ql{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let _=1;_<n.length-1;_+=2){const T=s.parse(n[_],_,Qe);if(!T)return null;const I=s.parse(n[_+1],_+1,h);if(!I)return null;m.push([T,I]),h=h||I.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new ql(h,m,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class ca{constructor(n,s,h,m){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),m=s.parse(n[2],2,Se);if(!h||!m)return null;if(!Pe(h.type,[ar(Lt),Ke,Lt]))return s.error(`Expected first argument to be of type array or string, but found ${Ln(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Se);return v?new ca(h.type,h,m,v):null}return new ca(h.type,h,m)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!ie(s,["string","array"]))throw new cr(`Expected first argument to be of type array or string, but found ${Ln(gr(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return s.slice(h,m)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Wu(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Hu(o,n,s,h){return h.compare(n,s)===0}function Ls(o,n,s){const h=o!=="=="&&o!=="!=";return class GT{constructor(v,_,T){this.type=Qe,this.lhs=v,this.rhs=_,this.collator=T,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const T=v[0];let I=_.parse(v[1],1,Lt);if(!I)return null;if(!Wu(T,I.type))return _.concat(1).error(`"${T}" comparisons are not supported for type '${Ln(I.type)}'.`);let U=_.parse(v[2],2,Lt);if(!U)return null;if(!Wu(T,U.type))return _.concat(2).error(`"${T}" comparisons are not supported for type '${Ln(U.type)}'.`);if(I.type.kind!==U.type.kind&&I.type.kind!=="value"&&U.type.kind!=="value")return _.error(`Cannot compare types '${Ln(I.type)}' and '${Ln(U.type)}'.`);h&&(I.type.kind==="value"&&U.type.kind!=="value"?I=new $i(U.type,[I]):I.type.kind!=="value"&&U.type.kind==="value"&&(U=new $i(I.type,[U])));let X=null;if(v.length===4){if(I.type.kind!=="string"&&U.type.kind!=="string"&&I.type.kind!=="value"&&U.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(X=_.parse(v[3],3,In),!X)return null}return new GT(I,U,X)}evaluate(v){const _=this.lhs.evaluate(v),T=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const I=gr(_),U=gr(T);if(I.kind!==U.kind||I.kind!=="string"&&I.kind!=="number")throw new cr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${I.kind}, ${U.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=gr(_),U=gr(T);if(I.kind!=="string"||U.kind!=="string")return n(v,_,T)}return this.collator?s(v,_,T,this.collator.evaluate(v)):n(v,_,T)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Ch=Ls("==",function(o,n,s){return n===s},Hu),Xu=Ls("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!Hu(0,n,s,h)}),Ah=Ls("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Kl=Ls(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Ih=Ls("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Ph=Ls(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class Yl{constructor(n,s,h,m,v){this.type=Ke,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Se);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=s.parse(m.locale,1,Ke),!v))return null;let _=null;if(m.currency&&(_=s.parse(m.currency,1,Ke),!_))return null;let T=null;if(m["min-fraction-digits"]&&(T=s.parse(m["min-fraction-digits"],1,Se),!T))return null;let I=null;return m["max-fraction-digits"]&&(I=s.parse(m["max-fraction-digits"],1,Se),!I)?null:new Yl(h,v,_,T,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class el{constructor(n){this.type=_n,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let v=!1;for(let _=1;_<=n.length-1;++_){const T=n[_];if(v&&typeof T=="object"&&!Array.isArray(T)){v=!1;let I=null;if(T["font-scale"]&&(I=s.parse(T["font-scale"],1,Se),!I))return null;let U=null;if(T["text-font"]&&(U=s.parse(T["text-font"],1,ar(Ke)),!U))return null;let X=null;if(T["text-color"]&&(X=s.parse(T["text-color"],1,Gt),!X))return null;const ee=m[m.length-1];ee.scale=I,ee.font=U,ee.textColor=X}else{const I=s.parse(n[_],1,Lt);if(!I)return null;const U=I.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:I,scale:null,font:null,textColor:null})}}return new el(m)}evaluate(n){return new ur(this.sections.map(s=>{const h=s.content.evaluate(n);return gr(h)===ni?new Ui("",h,null,null,null):new Ui(ia(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class Jl{constructor(n){this.type=ni,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Ke);return h?new Jl(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=mn.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Ql{constructor(n){this.type=Se,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ln(h.type)} instead.`):new Ql(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new cr(`Expected value to be of type string or array, but found ${Ln(gr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const is={"==":Ch,"!=":Xu,">":Kl,"<":Ah,">=":Ph,"<=":Ih,array:$i,at:Qa,boolean:$i,case:ql,coalesce:Ya,collator:Rn,format:el,image:Jl,in:ua,"index-of":No,interpolate:mi,"interpolate-hcl":mi,"interpolate-lab":mi,length:Ql,let:Ja,literal:Do,match:kn,number:$i,"number-format":Yl,object:$i,slice:ca,step:ks,string:$i,"to-boolean":jr,"to-color":jr,"to-number":jr,"to-string":jr,var:Ha,within:Ai};function tl(o,[n,s,h,m]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=m?m.evaluate(o):1,_=Ti(n,s,h,v);if(_)throw new cr(_);return new hn(n/255,s/255,h/255,v,!1)}function qu(o,n){return o in n}function eu(o,n){const s=n[o];return s===void 0?null:s}function os(o){return{type:o}}function Ku(o){return{result:"success",value:o}}function ss(o){return{result:"error",value:o}}function Os(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Yu(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function tu(o){return!!o.expression&&o.expression.interpolated}function Nn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function as(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Mh(o){return o}function ls(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),v=o.type||(tu(n)?"exponential":"interval");if(s||n.type==="padding"){const X=s?hn.parse:ri.parse;(o=ae({},o)).stops&&(o.stops=o.stops.map(ee=>[ee[0],X(ee[1])])),o.default=X(o.default?o.default:n.default)}if(o.colorSpace&&(_=o.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var _;let T,I,U;if(v==="exponential")T=Ju;else if(v==="interval")T=nu;else if(v==="categorical"){T=ao,I=Object.create(null);for(const X of o.stops)I[X[0]]=X[1];U=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);T=kh}if(h){const X={},ee=[];for(let de=0;de<o.stops.length;de++){const Le=o.stops[de],ke=Le[0].zoom;X[ke]===void 0&&(X[ke]={zoom:ke,type:o.type,property:o.property,default:o.default,stops:[]},ee.push(ke)),X[ke].stops.push([Le[0].value,Le[1]])}const ue=[];for(const de of ee)ue.push([X[de].zoom,ls(X[de],n)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:mi.interpolationFactor.bind(void 0,ce),zoomStops:ue.map(de=>de[0]),evaluate:({zoom:de},Le)=>Ju({stops:ue,base:o.base},n,de).evaluate(de,Le)}}if(m){const X=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:X,interpolationFactor:mi.interpolationFactor.bind(void 0,X),zoomStops:o.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>T(o,n,ee,I,U)}}return{kind:"source",evaluate(X,ee){const ue=ee&&ee.properties?ee.properties[o.property]:void 0;return ue===void 0?Rs(o.default,n.default):T(o,n,ue,I,U)}}}function Rs(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function ao(o,n,s,h,m){return Rs(typeof s===m?h[s]:void 0,o.default,n.default)}function nu(o,n,s){if(Nn(s)!=="number")return Rs(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const m=la(o.stops.map(v=>v[0]),s);return o.stops[m][1]}function Ju(o,n,s){const h=o.base!==void 0?o.base:1;if(Nn(s)!=="number")return Rs(o.default,n.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const v=la(o.stops.map(X=>X[0]),s),_=function(X,ee,ue,ce){const de=ce-ue,Le=X-ue;return de===0?0:ee===1?Le/de:(Math.pow(ee,Le)-1)/(Math.pow(ee,de)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),T=o.stops[v][1],I=o.stops[v+1][1],U=Jr[n.type]||Mh;return typeof T.evaluate=="function"?{evaluate(...X){const ee=T.evaluate.apply(void 0,X),ue=I.evaluate.apply(void 0,X);if(ee!==void 0&&ue!==void 0)return U(ee,ue,_,o.colorSpace)}}:U(T,I,_,o.colorSpace)}function kh(o,n,s){switch(n.type){case"color":s=hn.parse(s);break;case"formatted":s=ur.fromString(s.toString());break;case"resolvedImage":s=mn.fromString(s.toString());break;case"padding":s=ri.parse(s);break;default:Nn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Rs(s,o.default,n.default)}Dr.register(is,{error:[{kind:"error"},[Ke],(o,[n])=>{throw new cr(n.evaluate(o))}],typeof:[Ke,[Lt],(o,[n])=>Ln(gr(n.evaluate(o)))],"to-rgba":[ar(Se,4),[Gt],(o,[n])=>{const[s,h,m,v]=n.evaluate(o).rgb;return[255*s,255*h,255*m,v]}],rgb:[Gt,[Se,Se,Se],tl],rgba:[Gt,[Se,Se,Se,Se],tl],has:{type:Qe,overloads:[[[Ke],(o,[n])=>qu(n.evaluate(o),o.properties())],[[Ke,cn],(o,[n,s])=>qu(n.evaluate(o),s.evaluate(o))]]},get:{type:Lt,overloads:[[[Ke],(o,[n])=>eu(n.evaluate(o),o.properties())],[[Ke,cn],(o,[n,s])=>eu(n.evaluate(o),s.evaluate(o))]]},"feature-state":[Lt,[Ke],(o,[n])=>eu(n.evaluate(o),o.featureState||{})],properties:[cn,[],o=>o.properties()],"geometry-type":[Ke,[],o=>o.geometryType()],id:[Lt,[],o=>o.id()],zoom:[Se,[],o=>o.globals.zoom],"heatmap-density":[Se,[],o=>o.globals.heatmapDensity||0],"line-progress":[Se,[],o=>o.globals.lineProgress||0],accumulated:[Lt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Se,os(Se),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[Se,os(Se),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:Se,overloads:[[[Se,Se],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[Se],(o,[n])=>-n.evaluate(o)]]},"/":[Se,[Se,Se],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[Se,[Se,Se],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[Se,[],()=>Math.LN2],pi:[Se,[],()=>Math.PI],e:[Se,[],()=>Math.E],"^":[Se,[Se,Se],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[Se,[Se],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Se,[Se],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Se,[Se],(o,[n])=>Math.log(n.evaluate(o))],log2:[Se,[Se],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Se,[Se],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Se,[Se],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Se,[Se],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Se,[Se],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Se,[Se],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Se,[Se],(o,[n])=>Math.atan(n.evaluate(o))],min:[Se,os(Se),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[Se,os(Se),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[Se,[Se],(o,[n])=>Math.abs(n.evaluate(o))],round:[Se,[Se],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Se,[Se],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Se,[Se],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[Qe,[Ke,Lt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[Qe,[Lt],(o,[n])=>o.id()===n.value],"filter-type-==":[Qe,[Ke],(o,[n])=>o.geometryType()===n.value],"filter-<":[Qe,[Ke,Lt],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Qe,[Lt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[Qe,[Ke,Lt],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[Qe,[Lt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[Qe,[Ke,Lt],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Qe,[Lt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[Qe,[Ke,Lt],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Qe,[Lt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[Qe,[Lt],(o,[n])=>n.value in o.properties()],"filter-has-id":[Qe,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Qe,[ar(Ke)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[Qe,[ar(Lt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[Qe,[Ke,ar(Lt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[Qe,[Ke,ar(Lt)],(o,[n,s])=>function(h,m,v,_){for(;v<=_;){const T=v+_>>1;if(m[T]===h)return!0;m[T]>h?_=T-1:v=T+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Qe,overloads:[[[Qe,Qe],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[os(Qe),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Qe,overloads:[[[Qe,Qe],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[os(Qe),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[Qe,[Qe],(o,[n])=>!n.evaluate(o)],"is-supported-script":[Qe,[Ke],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Ke,[Ke],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Ke,[Ke],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Ke,os(Lt),(o,n)=>n.map(s=>ia(s.evaluate(o))).join("")],"resolved-locale":[Ke,[In],(o,[n])=>n.evaluate(o).resolvedLocale()]});class ru{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Va,this._defaultValue=s?(h=s).type==="color"&&as(h.default)?new hn(0,0,0,0):h.type==="color"?hn.parse(h.default)||null:h.type==="padding"?ri.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,m,v,_){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,m,v,_){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new cr(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Fs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in is}function Jn(o,n){const s=new Gr(is,Xa,[],n?function(m){const v={color:Gt,string:Ke,number:Se,enum:Ke,boolean:Qe,formatted:_n,padding:wr,resolvedImage:ni};return m.type==="array"?ar(v[m.value]||Lt,m.length):v[m.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Ku(new ru(h,n)):ss(s.errors)}class js{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Ms(s.expression)}evaluateWithoutErrorHandling(n,s,h,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,m,v,_)}evaluate(n,s,h,m,v,_){return this._styleExpression.evaluate(n,s,h,m,v,_)}}class Sn{constructor(n,s,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Ms(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,s,h,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,m,v,_)}evaluate(n,s,h,m,v,_){return this._styleExpression.evaluate(n,s,h,m,v,_)}interpolationFactor(n,s,h){return this.interpolationType?mi.interpolationFactor(this.interpolationType,n,s,h):0}}function nl(o,n){const s=Jn(o,n);if(s.result==="error")return s;const h=s.value.expression,m=aa(h);if(!m&&!Os(n))return ss([new L("","data expressions not supported")]);const v=qa(h,["zoom"]);if(!v&&!Yu(n))return ss([new L("","zoom expressions not supported")]);const _=Zn(h);return _||v?_ instanceof L?ss([_]):_ instanceof mi&&!tu(n)?ss([new L("",'"interpolate" expressions cannot be used with this property')]):Ku(_?new Sn(m?"camera":"composite",s.value,_.labels,_ instanceof mi?_.interpolation:void 0):new js(m?"constant":"source",s.value)):ss([new L("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Vn{constructor(n,s){this._parameters=n,this._specification=s,ae(this,ls(this._parameters,this._specification))}static deserialize(n){return new Vn(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Zn(o){let n=null;if(o instanceof Ja)n=Zn(o.result);else if(o instanceof Ya){for(const s of o.args)if(n=Zn(s),n)break}else(o instanceof ks||o instanceof mi)&&o.input instanceof Dr&&o.input.name==="zoom"&&(n=o);return n instanceof L||o.eachChild(s=>{const h=Zn(s);h instanceof L?n=h:!n&&h?n=new L("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new L("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function us(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!us(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Qu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function iu(o){if(o==null)return{filter:()=>!0,needGeometry:!1};us(o)||(o=il(o));const n=Jn(o,Qu);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>n.value.evaluate(s,h,{},m),needGeometry:Uo(o)}}function rl(o,n){return o<n?-1:o>n?1:0}function Uo(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Uo(o[n]))return!0;return!1}function il(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?ha(o[1],o[2],"=="):n==="!="?lo(ha(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?ha(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(il))):n==="all"?["all"].concat(o.slice(1).map(il)):n==="none"?["all"].concat(o.slice(1).map(il).map(lo)):n==="in"?Ds(o[1],o.slice(2)):n==="!in"?lo(Ds(o[1],o.slice(2))):n==="has"?ou(o[1]):n==="!has"?lo(ou(o[1])):n!=="within"||o;var s}function ha(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ds(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(rl)]]:["filter-in-small",o,["literal",n]]}}function ou(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function lo(o){return["!",o]}function uo(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const v of o)m+=`${uo(v)},`;return`${m}]`}const s=Object.keys(o).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${uo(o[s[m]])},`;return`${h}}`}function Qr(o){let n="";for(const s of sn)n+=`/${uo(o[s])}`;return n}function $o(o){const n=o.value;return n?[new Ge(o.key,n,"constants have been deprecated as of v8")]:[]}function nr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function xo(o){if(Array.isArray(o))return o.map(xo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=xo(o[s]);return n}return nr(o)}function Ii(o){const n=o.key,s=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},v=o.style,_=o.styleSpec,T=o.validateSpec;let I=[];const U=Nn(s);if(U!=="object")return[new Ge(n,s,`object expected, ${U} found`)];for(const X in s){const ee=X.split(".")[0],ue=h[ee]||h["*"];let ce;if(m[ee])ce=m[ee];else if(h[ee])ce=T;else if(m["*"])ce=m["*"];else{if(!h["*"]){I.push(new Ge(n,s[X],`unknown property "${X}"`));continue}ce=T}I=I.concat(ce({key:(n&&`${n}.`)+X,value:s[X],valueSpec:ue,style:v,styleSpec:_,object:s,objectKey:X,validateSpec:T},s))}for(const X in h)m[X]||h[X].required&&h[X].default===void 0&&s[X]===void 0&&I.push(new Ge(n,s,`missing required property "${X}"`));return I}function fa(o){const n=o.value,s=o.valueSpec,h=o.style,m=o.styleSpec,v=o.key,_=o.arrayElementValidator||o.validateSpec;if(Nn(n)!=="array")return[new Ge(v,n,`array expected, ${Nn(n)} found`)];if(s.length&&n.length!==s.length)return[new Ge(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Ge(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let T={type:s.value,values:s.values};m.$version<7&&(T.function=s.function),Nn(s.value)==="object"&&(T=s.value);let I=[];for(let U=0;U<n.length;U++)I=I.concat(_({array:n,arrayIndex:U,value:n[U],valueSpec:T,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${v}[${U}]`}));return I}function Bs(o){const n=o.key,s=o.value,h=o.valueSpec;let m=Nn(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new Ge(n,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new Ge(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Ge(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Pi(o){const n=o.valueSpec,s=nr(o.value.type);let h,m,v,_={};const T=s!=="categorical"&&o.value.property===void 0,I=!T,U=Nn(o.value.stops)==="array"&&Nn(o.value.stops[0])==="array"&&Nn(o.value.stops[0][0])==="object",X=Ii({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ce){if(s==="identity")return[new Ge(ce.key,ce.value,'identity function may not have a "stops" property')];let de=[];const Le=ce.value;return de=de.concat(fa({key:ce.key,value:Le,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:ee})),Nn(Le)==="array"&&Le.length===0&&de.push(new Ge(ce.key,Le,"array must have at least one stop")),de},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:n,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return s==="identity"&&T&&X.push(new Ge(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||X.push(new Ge(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!tu(o.valueSpec)&&X.push(new Ge(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(I&&!Os(o.valueSpec)?X.push(new Ge(o.key,o.value,"property functions not supported")):T&&!Yu(o.valueSpec)&&X.push(new Ge(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!U||o.value.property!==void 0||X.push(new Ge(o.key,o.value,'"property" property is required')),X;function ee(ce){let de=[];const Le=ce.value,ke=ce.key;if(Nn(Le)!=="array")return[new Ge(ke,Le,`array expected, ${Nn(Le)} found`)];if(Le.length!==2)return[new Ge(ke,Le,`array length 2 expected, length ${Le.length} found`)];if(U){if(Nn(Le[0])!=="object")return[new Ge(ke,Le,`object expected, ${Nn(Le[0])} found`)];if(Le[0].zoom===void 0)return[new Ge(ke,Le,"object stop key must have zoom")];if(Le[0].value===void 0)return[new Ge(ke,Le,"object stop key must have value")];if(v&&v>nr(Le[0].zoom))return[new Ge(ke,Le[0].zoom,"stop zoom values must appear in ascending order")];nr(Le[0].zoom)!==v&&(v=nr(Le[0].zoom),m=void 0,_={}),de=de.concat(Ii({key:`${ke}[0]`,value:Le[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Bs,value:ue}}))}else de=de.concat(ue({key:`${ke}[0]`,value:Le[0],valueSpec:{},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},Le));return Fs(xo(Le[1]))?de.concat([new Ge(`${ke}[1]`,Le[1],"expressions are not allowed in function stops.")]):de.concat(ce.validateSpec({key:`${ke}[1]`,value:Le[1],valueSpec:n,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function ue(ce,de){const Le=Nn(ce.value),ke=nr(ce.value),qe=ce.value!==null?ce.value:de;if(h){if(Le!==h)return[new Ge(ce.key,qe,`${Le} stop domain type must match previous stop domain type ${h}`)]}else h=Le;if(Le!=="number"&&Le!=="string"&&Le!=="boolean")return[new Ge(ce.key,qe,"stop domain value must be a number, string, or boolean")];if(Le!=="number"&&s!=="categorical"){let et=`number expected, ${Le} found`;return Os(n)&&s===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(ce.key,qe,et)]}return s!=="categorical"||Le!=="number"||isFinite(ke)&&Math.floor(ke)===ke?s!=="categorical"&&Le==="number"&&m!==void 0&&ke<m?[new Ge(ce.key,qe,"stop domain values must appear in ascending order")]:(m=ke,s==="categorical"&&ke in _?[new Ge(ce.key,qe,"stop domain values must be unique")]:(_[ke]=!0,[])):[new Ge(ce.key,qe,`integer expected, found ${ke}`)]}}function Mi(o){const n=(o.expressionContext==="property"?nl:Jn)(xo(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new Ge(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new Ge(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Ms(s))return[new Ge(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Ms(s))return[new Ge(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!qa(s,["zoom","feature-state"]))return[new Ge(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!aa(s))return[new Ge(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ns(o){const n=o.key,s=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(nr(s))===-1&&m.push(new Ge(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(nr(s))===-1&&m.push(new Ge(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function wo(o){return us(xo(o.value))?Mi(ae({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):da(o)}function da(o){const n=o.value,s=o.key;if(Nn(n)!=="array")return[new Ge(s,n,`array expected, ${Nn(n)} found`)];const h=o.styleSpec;let m,v=[];if(n.length<1)return[new Ge(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Ns({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),nr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&nr(n[1])==="$type"&&v.push(new Ge(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Ge(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=Nn(n[1]),m!=="string"&&v.push(new Ge(`${s}[1]`,n[1],`string expected, ${m} found`)));for(let _=2;_<n.length;_++)m=Nn(n[_]),nr(n[1])==="$type"?v=v.concat(Ns({key:`${s}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Ge(`${s}[${_}]`,n[_],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)v=v.concat(da({key:`${s}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=Nn(n[1]),n.length!==2?v.push(new Ge(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Ge(`${s}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=Nn(n[1]),n.length!==2?v.push(new Ge(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new Ge(`${s}[1]`,n[1],`object expected, ${m} found`))}return v}function ol(o,n){const s=o.key,h=o.validateSpec,m=o.style,v=o.styleSpec,_=o.value,T=o.objectKey,I=v[`${n}_${o.layerType}`];if(!I)return[];const U=T.match(/^(.*)-transition$/);if(n==="paint"&&U&&I[U[1]]&&I[U[1]].transition)return h({key:s,value:_,valueSpec:v.transition,style:m,styleSpec:v});const X=o.valueSpec||I[T];if(!X)return[new Ge(s,_,`unknown property "${T}"`)];let ee;if(Nn(_)==="string"&&Os(X)&&!X.tokens&&(ee=/^{([^}]+)}$/.exec(_)))return[new Ge(s,_,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const ue=[];return o.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&ue.push(new Ge(s,_,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&as(xo(_))&&nr(_.type)==="identity"&&ue.push(new Ge(s,_,'"text-font" does not support identity functions'))),ue.concat(h({key:o.key,value:_,valueSpec:X,style:m,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:T}))}function sl(o){return ol(o,"paint")}function su(o){return ol(o,"layout")}function pa(o){let n=[];const s=o.value,h=o.key,m=o.style,v=o.styleSpec;s.type||s.ref||n.push(new Ge(h,s,'either "type" or "ref" is required'));let _=nr(s.type);const T=nr(s.ref);if(s.id){const I=nr(s.id);for(let U=0;U<o.arrayIndex;U++){const X=m.layers[U];nr(X.id)===I&&n.push(new Ge(h,s.id,`duplicate layer id "${s.id}", previously used at line ${X.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(U=>{U in s&&n.push(new Ge(h,s[U],`"${U}" is prohibited for ref layers`))}),m.layers.forEach(U=>{nr(U.id)===T&&(I=U)}),I?I.ref?n.push(new Ge(h,s.ref,"ref cannot reference another ref layer")):_=nr(I.type):n.push(new Ge(h,s.ref,`ref layer "${T}" not found`))}else if(_!=="background")if(s.source){const I=m.sources&&m.sources[s.source],U=I&&nr(I.type);I?U==="vector"&&_==="raster"?n.push(new Ge(h,s.source,`layer "${s.id}" requires a raster source`)):U==="raster"&&_!=="raster"?n.push(new Ge(h,s.source,`layer "${s.id}" requires a vector source`)):U!=="vector"||s["source-layer"]?U==="raster-dem"&&_!=="hillshade"?n.push(new Ge(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||U==="geojson"&&I.lineMetrics||n.push(new Ge(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Ge(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Ge(h,s.source,`source "${s.source}" not found`))}else n.push(new Ge(h,s,'missing required property "source"'));return n=n.concat(Ii({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:wo,layout:I=>Ii({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":U=>su(ae({layerType:_},U))}}),paint:I=>Ii({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":U=>sl(ae({layerType:_},U))}})}})),n}function Br(o){const n=o.value,s=o.key,h=Nn(n);return h!=="string"?[new Ge(s,n,`string expected, ${h} found`)]:[]}const ma={promoteId:function({key:o,value:n}){if(Nn(n)==="string")return Br({key:o,value:n});{const s=[];for(const h in n)s.push(...Br({key:`${o}.${h}`,value:n[h]}));return s}}};function al(o){const n=o.value,s=o.key,h=o.styleSpec,m=o.style,v=o.validateSpec;if(!n.type)return[new Ge(s,n,'"type" is required')];const _=nr(n.type);let T;switch(_){case"vector":case"raster":case"raster-dem":return T=Ii({key:s,value:n,valueSpec:h[`source_${_.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:ma,validateSpec:v}),T;case"geojson":if(T=Ii({key:s,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:v,objectElementValidators:ma}),n.cluster)for(const I in n.clusterProperties){const[U,X]=n.clusterProperties[I],ee=typeof U=="string"?[U,["accumulated"],["get",I]]:U;T.push(...Mi({key:`${s}.${I}.map`,value:X,validateSpec:v,expressionContext:"cluster-map"})),T.push(...Mi({key:`${s}.${I}.reduce`,value:ee,validateSpec:v,expressionContext:"cluster-reduce"}))}return T;case"video":return Ii({key:s,value:n,valueSpec:h.source_video,style:m,validateSpec:v,styleSpec:h});case"image":return Ii({key:s,value:n,valueSpec:h.source_image,style:m,validateSpec:v,styleSpec:h});case"canvas":return[new Ge(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ns({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:h})}}function au(o){const n=o.value,s=o.styleSpec,h=s.light,m=o.style;let v=[];const _=Nn(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new Ge("light",n,`object expected, ${_} found`)]),v;for(const T in n){const I=T.match(/^(.*)-transition$/);v=v.concat(I&&h[I[1]]&&h[I[1]].transition?o.validateSpec({key:T,value:n[T],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):h[T]?o.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new Ge(T,n[T],`unknown property "${T}"`)])}return v}function cs(o){const n=o.value,s=o.styleSpec,h=s.terrain,m=o.style;let v=[];const _=Nn(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new Ge("terrain",n,`object expected, ${_} found`)]),v;for(const T in n)v=v.concat(h[T]?o.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new Ge(T,n[T],`unknown property "${T}"`)]);return v}function lu(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const m=[],v=[];for(const _ in s)s[_].id&&m.includes(s[_].id)&&n.push(new Ge(h,s,`all the sprites' ids must be unique, but ${s[_].id} is duplicated`)),m.push(s[_].id),s[_].url&&v.includes(s[_].url)&&n.push(new Ge(h,s,`all the sprites' URLs must be unique, but ${s[_].url} is duplicated`)),v.push(s[_].url),n=n.concat(Ii({key:`${h}[${_}]`,value:s[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return Br({key:h,value:s})}const uu={"*":()=>[],array:fa,boolean:function(o){const n=o.value,s=o.key,h=Nn(n);return h!=="boolean"?[new Ge(s,n,`boolean expected, ${h} found`)]:[]},number:Bs,color:function(o){const n=o.key,s=o.value,h=Nn(s);return h!=="string"?[new Ge(n,s,`color expected, ${h} found`)]:hn.parse(String(s))?[]:[new Ge(n,s,`color expected, "${s}" found`)]},constants:$o,enum:Ns,filter:wo,function:Pi,layer:pa,object:Ii,source:al,light:au,terrain:cs,string:Br,formatted:function(o){return Br(o).length===0?[]:Mi(o)},resolvedImage:function(o){return Br(o).length===0?[]:Mi(o)},padding:function(o){const n=o.key,s=o.value;if(Nn(s)==="array"){if(s.length<1||s.length>4)return[new Ge(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let v=0;v<s.length;v++)m=m.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return m}return Bs({key:n,value:s,valueSpec:{}})},sprite:lu};function Us(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Us,s.expression&&as(nr(n))?Pi(o):s.expression&&Fs(xo(n))?Mi(o):s.type&&uu[s.type]?uu[s.type](o):Ii(ae({},o,{valueSpec:s.type?h[s.type]:s}))}function V(o){const n=o.value,s=o.key,h=Br(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Ge(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Ge(s,n,'"glyphs" url must include a "{range}" token'))),h}function ge(o,n=Ye){let s=[];return s=s.concat(Us({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Us,objectElementValidators:{glyphs:V,"*":()=>[]}})),o.constants&&(s=s.concat($o({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Us}))),at(s)}function De(o){return function(n){return o({...n,validateSpec:Us})}}function at(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function Et(o){return function(...n){return at(o.apply(this,n))}}ge.source=Et(De(al)),ge.sprite=Et(De(lu)),ge.glyphs=Et(De(V)),ge.light=Et(De(au)),ge.terrain=Et(De(cs)),ge.layer=Et(De(pa)),ge.filter=Et(De(wo)),ge.paintProperty=Et(De(sl)),ge.layoutProperty=Et(De(su));const St=ge,Zt=St.light,Jt=St.paintProperty,xn=St.layoutProperty;function On(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new xt(new Error(h.message))),s=!0;return s}class zn{constructor(n,s,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(s=_[1])+2*(h=_[2]);for(let I=0;I<this.d*this.d;I++){const U=_[3+I],X=_[3+I+1];m.push(U===X?null:_.subarray(U,X))}const T=_[3+m.length+1];this.keys=_.subarray(_[3+m.length],T),this.bboxes=_.subarray(T),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let _=0;_<this.d*this.d;_++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,m,v){this._forEachCell(s,h,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,m,v,_){this.cells[v].push(_)}query(n,s,h,m,v){const _=this.min,T=this.max;if(n<=_&&s<=_&&T<=h&&T<=m&&!v)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,s,h,m,this._queryCell,I,{},v),I}}_queryCell(n,s,h,m,v,_,T,I){const U=this.cells[v];if(U!==null){const X=this.keys,ee=this.bboxes;for(let ue=0;ue<U.length;ue++){const ce=U[ue];if(T[ce]===void 0){const de=4*ce;(I?I(ee[de+0],ee[de+1],ee[de+2],ee[de+3]):n<=ee[de+2]&&s<=ee[de+3]&&h>=ee[de+0]&&m>=ee[de+1])?(T[ce]=!0,_.push(X[ce])):T[ce]=!1}}}}_forEachCell(n,s,h,m,v,_,T,I){const U=this._convertToCellCoord(n),X=this._convertToCellCoord(s),ee=this._convertToCellCoord(h),ue=this._convertToCellCoord(m);for(let ce=U;ce<=ee;ce++)for(let de=X;de<=ue;de++){const Le=this.d*de+ce;if((!I||I(this._convertFromCellCoord(ce),this._convertFromCellCoord(de),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(de+1)))&&v.call(this,n,s,h,m,Le,_,T,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=s;for(let _=0;_<n.length;_++){const T=n[_];m[3+_]=v,m.set(T,v),v+=T.length}return m[3+n.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+n.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new zn(n.buffer)}}const Fn={};function Ct(o,n,s={}){if(Fn[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Fn[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Ct("Object",Object),Ct("TransferableGridIndex",zn),Ct("Color",hn),Ct("Error",Error),Ct("AJAXError",Be),Ct("ResolvedImage",mn),Ct("StylePropertyFunction",Vn),Ct("StyleExpression",ru,{omit:["_evaluator"]}),Ct("ZoomDependentExpression",Sn),Ct("ZoomConstantExpression",js),Ct("CompoundExpression",Dr,{omit:["_evaluate"]});for(const o in is)is[o]._classRegistryKey||Ct(`Expression_${o}`,is[o]);function br(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function hr(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(br(o)||le(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(hr(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Fn[h])throw new Error(`${h} is not registered.`);const m=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Fn[h].omit.indexOf(v)>=0)continue;const _=o[v];m[v]=Fn[h].shallow.indexOf(v)>=0?_:hr(_,n)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof o)}function Zr(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||br(o)||le(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Zr);if(typeof o=="object"){const n=o.$name||"Object";if(!Fn[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Fn[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const v=o[m];h[m]=Fn[n].shallow.indexOf(m)>=0?v:Zr(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class co{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const At={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ga(o){for(const n of o)if(ec(n.charCodeAt(0)))return!0;return!1}function $s(o){for(const n of o)if(!ya(n.charCodeAt(0)))return!1;return!0}function ya(o){return!(At.Arabic(o)||At["Arabic Supplement"](o)||At["Arabic Extended-A"](o)||At["Arabic Presentation Forms-A"](o)||At["Arabic Presentation Forms-B"](o))}function ec(o){return!(o!==746&&o!==747&&(o<4352||!(At["Bopomofo Extended"](o)||At.Bopomofo(o)||At["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||At["CJK Compatibility Ideographs"](o)||At["CJK Compatibility"](o)||At["CJK Radicals Supplement"](o)||At["CJK Strokes"](o)||!(!At["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||At["CJK Unified Ideographs Extension A"](o)||At["CJK Unified Ideographs"](o)||At["Enclosed CJK Letters and Months"](o)||At["Hangul Compatibility Jamo"](o)||At["Hangul Jamo Extended-A"](o)||At["Hangul Jamo Extended-B"](o)||At["Hangul Jamo"](o)||At["Hangul Syllables"](o)||At.Hiragana(o)||At["Ideographic Description Characters"](o)||At.Kanbun(o)||At["Kangxi Radicals"](o)||At["Katakana Phonetic Extensions"](o)||At.Katakana(o)&&o!==12540||!(!At["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!At["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||At["Unified Canadian Aboriginal Syllabics"](o)||At["Unified Canadian Aboriginal Syllabics Extended"](o)||At["Vertical Forms"](o)||At["Yijing Hexagram Symbols"](o)||At["Yi Syllables"](o)||At["Yi Radicals"](o))))}function Md(o){return!(ec(o)||function(n){return!!(At["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||At["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||At["Letterlike Symbols"](n)||At["Number Forms"](n)||At["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||At["Control Pictures"](n)&&n!==9251||At["Optical Character Recognition"](n)||At["Enclosed Alphanumerics"](n)||At["Geometric Shapes"](n)||At["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||At["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||At["CJK Symbols and Punctuation"](n)||At.Katakana(n)||At["Private Use Area"](n)||At["CJK Compatibility Forms"](n)||At["Small Form Variants"](n)||At["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function tc(o){return o>=1424&&o<=2303||At["Arabic Presentation Forms-A"](o)||At["Arabic Presentation Forms-B"](o)}function nc(o,n){return!(!n&&tc(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||At.Khmer(o))}function kd(o){for(const n of o)if(tc(n.charCodeAt(0)))return!0;return!1}const zh="deferred",rc="loading",Lh="loaded";let cu=null,ki="unavailable",Vs=null;const zd=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(ki="error"),cu&&cu(o)};function Oh(){ic.fire(new ct("pluginStateChange",{pluginStatus:ki,pluginURL:Vs}))}const ic=new $t,Rh=function(){return ki},Ld=function(){if(ki!==zh||!Vs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ki=rc,Oh(),Vs&&ot({url:Vs},o=>{o?zd(o):(ki=Lh,Oh())})},ho={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ki===Lh||ho.applyArabicShaping!=null,isLoading:()=>ki===rc,setState(o){if(!_e())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ki=o.pluginStatus,Vs=o.pluginURL},isParsed(){if(!_e())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ho.applyArabicShaping!=null&&ho.processBidirectionalText!=null&&ho.processStyledBidirectionalText!=null},getPluginURL(){if(!_e())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Vs}};class rr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new co,this.transition={})}isSupportedScript(n){return function(s,h){for(const m of s)if(!nc(m.charCodeAt(0),h))return!1;return!0}(n,ho.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class oc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,m){if(as(h))return new Vn(h,m);if(Fs(h)){const v=nl(h,m);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=h;return m.type==="color"&&typeof h=="string"?v=hn.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)||(v=ri.parse(h)),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Fh{constructor(n){this.property=n,this.value=new oc(n,void 0)}transitioned(n,s){return new hu(this.property,this.value,s,B({},n.transition,this.transition),n.now)}untransitioned(){return new hu(this.property,this.value,null,{},0)}}class Od{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return P(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Fh(this._values[n].property)),this._values[n].value=new oc(this._values[n].property,s===null?void 0:P(s))}getTransition(n){return P(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Fh(this._values[n].property)),this._values[n].transition=P(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const m=this.getTransition(s);m!==void 0&&(n[`${s}-transition`]=m)}return n}transitioned(n,s){const h=new Rd(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,s._values[m]);return h}untransitioned(){const n=new Rd(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class hu{constructor(n,s,h,m,v){this.property=n,this.value=s,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const m=n.now||0,v=this.value.possiblyEvaluate(n,s,h),_=this.prior;if(_){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return _.possiblyEvaluate(n,s,h);{const T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,s,h),v,function(I){if(I<=0)return 0;if(I>=1)return 1;const U=I*I,X=U*I;return 4*(I<.5?X:3*(I-U)+X-.75)}(T))}}return v}}class Rd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const m=new sc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,s,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class jh{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return P(this._values[n].value)}setValue(n,s){this._values[n]=new oc(this._values[n].property,s===null?void 0:P(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const m=new sc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,s,h);return m}}class Vo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,m){return this.property.evaluate(this.value,this.parameters,n,s,h,m)}}class sc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const m=Jr[this.specification.type];return m?m(n,s,h):n}}class on{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,m){return new Vo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,m)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Vo(this,{kind:"constant",value:void 0},n.parameters);const m=Jr[this.specification.type];if(m){const v=m(n.value.value,s.value.value,h);return new Vo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,m,v,_){return n.kind==="constant"?n.value:n.evaluate(s,h,m,v,_)}}class fu extends on{possiblyEvaluate(n,s,h,m){if(n.value===void 0)return new Vo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,m),_=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,T=this._calculate(_,_,_,s);return new Vo(this,{kind:"constant",value:T},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Vo(this,{kind:"constant",value:v},s)}return new Vo(this,n.expression,s)}evaluate(n,s,h,m,v,_){if(n.kind==="source"){const T=n.evaluate(s,h,m,v,_);return this._calculate(T,T,T,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,m),n.evaluate({zoom:Math.floor(s.zoom)},h,m),n.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):n.value}_calculate(n,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Dh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,m);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new rr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new rr(Math.floor(s.zoom),s)),n.expression.evaluate(new rr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Bh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,m){return!!n.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class zi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new oc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Fh(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}Ct("DataDrivenProperty",on),Ct("DataConstantProperty",qt),Ct("CrossFadedDataDrivenProperty",fu),Ct("CrossFadedProperty",Dh),Ct("ColorRampProperty",Bh);const Fd="-transition";class Go extends $t{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new jh(s.layout)),s.paint)){this._transitionablePaint=new Od(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(xn,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Fd)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Jt,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Fd))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",_=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(n,T,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),S(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,m,v={}){return(!v||v.validate!==!1)&&On(this,n.call(St,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:Ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Vo&&Os(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Fg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class hs{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function kr(o,n=1){let s=0,h=0;return{members:o.map(m=>{const v=Fg[m.type].BYTES_PER_ELEMENT,_=s=jd(s,Math.max(n,v)),T=m.components||1;return h=Math.max(h,v),s+=v*T,{name:m.name,type:m.type,components:T,offset:_}}),size:jd(s,Math.max(h,n)),alignment:n}}function jd(o,n){return Math.ceil(o/n)*n}class ll extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.int16[m+0]=s,this.int16[m+1]=h,n}}ll.prototype.bytesPerElement=4,Ct("StructArrayLayout2i4",ll);class ac extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=m,n}}ac.prototype.bytesPerElement=6,Ct("StructArrayLayout3i6",ac);class Nh extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const _=4*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=m,this.int16[_+3]=v,n}}Nh.prototype.bytesPerElement=8,Ct("StructArrayLayout4i8",Nh);class Zo extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,m,v,_)}emplace(n,s,h,m,v,_,T){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=m,this.int16[I+3]=v,this.int16[I+4]=_,this.int16[I+5]=T,n}}Zo.prototype.bytesPerElement=12,Ct("StructArrayLayout2i4i12",Zo);class lc extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,m,v,_)}emplace(n,s,h,m,v,_,T){const I=4*n,U=8*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.uint8[U+4]=m,this.uint8[U+5]=v,this.uint8[U+6]=_,this.uint8[U+7]=T,n}}lc.prototype.bytesPerElement=8,Ct("StructArrayLayout2i4ub8",lc);class va extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.float32[m+0]=s,this.float32[m+1]=h,n}}va.prototype.bytesPerElement=8,Ct("StructArrayLayout2f8",va);class uc extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,I,U,X){const ee=this.length;return this.resize(ee+1),this.emplace(ee,n,s,h,m,v,_,T,I,U,X)}emplace(n,s,h,m,v,_,T,I,U,X,ee){const ue=10*n;return this.uint16[ue+0]=s,this.uint16[ue+1]=h,this.uint16[ue+2]=m,this.uint16[ue+3]=v,this.uint16[ue+4]=_,this.uint16[ue+5]=T,this.uint16[ue+6]=I,this.uint16[ue+7]=U,this.uint16[ue+8]=X,this.uint16[ue+9]=ee,n}}uc.prototype.bytesPerElement=20,Ct("StructArrayLayout10ui20",uc);class du extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,I,U,X,ee,ue){const ce=this.length;return this.resize(ce+1),this.emplace(ce,n,s,h,m,v,_,T,I,U,X,ee,ue)}emplace(n,s,h,m,v,_,T,I,U,X,ee,ue,ce){const de=12*n;return this.int16[de+0]=s,this.int16[de+1]=h,this.int16[de+2]=m,this.int16[de+3]=v,this.uint16[de+4]=_,this.uint16[de+5]=T,this.uint16[de+6]=I,this.uint16[de+7]=U,this.int16[de+8]=X,this.int16[de+9]=ee,this.int16[de+10]=ue,this.int16[de+11]=ce,n}}du.prototype.bytesPerElement=24,Ct("StructArrayLayout4i4ui4i24",du);class Uh extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=m,n}}Uh.prototype.bytesPerElement=12,Ct("StructArrayLayout3f12",Uh);class ul extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}ul.prototype.bytesPerElement=4,Ct("StructArrayLayout1ul4",ul);class _a extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,I,U){const X=this.length;return this.resize(X+1),this.emplace(X,n,s,h,m,v,_,T,I,U)}emplace(n,s,h,m,v,_,T,I,U,X){const ee=10*n,ue=5*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=m,this.int16[ee+3]=v,this.int16[ee+4]=_,this.int16[ee+5]=T,this.uint32[ue+3]=I,this.uint16[ee+8]=U,this.uint16[ee+9]=X,n}}_a.prototype.bytesPerElement=20,Ct("StructArrayLayout6i1ul2ui20",_a);class $h extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,m,v,_)}emplace(n,s,h,m,v,_,T){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=m,this.int16[I+3]=v,this.int16[I+4]=_,this.int16[I+5]=T,n}}$h.prototype.bytesPerElement=12,Ct("StructArrayLayout2i2i2i12",$h);class cc extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,m,v)}emplace(n,s,h,m,v,_){const T=4*n,I=8*n;return this.float32[T+0]=s,this.float32[T+1]=h,this.float32[T+2]=m,this.int16[I+6]=v,this.int16[I+7]=_,n}}cc.prototype.bytesPerElement=16,Ct("StructArrayLayout2f1f2i16",cc);class xa extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const _=12*n,T=3*n;return this.uint8[_+0]=s,this.uint8[_+1]=h,this.float32[T+1]=m,this.float32[T+2]=v,n}}xa.prototype.bytesPerElement=12,Ct("StructArrayLayout2ub2f12",xa);class hc extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=m,n}}hc.prototype.bytesPerElement=6,Ct("StructArrayLayout3ui6",hc);class Vh extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,I,U,X,ee,ue,ce,de,Le,ke,qe){const et=this.length;return this.resize(et+1),this.emplace(et,n,s,h,m,v,_,T,I,U,X,ee,ue,ce,de,Le,ke,qe)}emplace(n,s,h,m,v,_,T,I,U,X,ee,ue,ce,de,Le,ke,qe,et){const Ze=24*n,rt=12*n,st=48*n;return this.int16[Ze+0]=s,this.int16[Ze+1]=h,this.uint16[Ze+2]=m,this.uint16[Ze+3]=v,this.uint32[rt+2]=_,this.uint32[rt+3]=T,this.uint32[rt+4]=I,this.uint16[Ze+10]=U,this.uint16[Ze+11]=X,this.uint16[Ze+12]=ee,this.float32[rt+7]=ue,this.float32[rt+8]=ce,this.uint8[st+36]=de,this.uint8[st+37]=Le,this.uint8[st+38]=ke,this.uint32[rt+10]=qe,this.int16[Ze+22]=et,n}}Vh.prototype.bytesPerElement=48,Ct("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Vh);class fc extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,I,U,X,ee,ue,ce,de,Le,ke,qe,et,Ze,rt,st,ht,Nt,Vt,Ft,zt,Pt,jt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,n,s,h,m,v,_,T,I,U,X,ee,ue,ce,de,Le,ke,qe,et,Ze,rt,st,ht,Nt,Vt,Ft,zt,Pt,jt)}emplace(n,s,h,m,v,_,T,I,U,X,ee,ue,ce,de,Le,ke,qe,et,Ze,rt,st,ht,Nt,Vt,Ft,zt,Pt,jt,Ot){const bt=34*n,nn=17*n;return this.int16[bt+0]=s,this.int16[bt+1]=h,this.int16[bt+2]=m,this.int16[bt+3]=v,this.int16[bt+4]=_,this.int16[bt+5]=T,this.int16[bt+6]=I,this.int16[bt+7]=U,this.uint16[bt+8]=X,this.uint16[bt+9]=ee,this.uint16[bt+10]=ue,this.uint16[bt+11]=ce,this.uint16[bt+12]=de,this.uint16[bt+13]=Le,this.uint16[bt+14]=ke,this.uint16[bt+15]=qe,this.uint16[bt+16]=et,this.uint16[bt+17]=Ze,this.uint16[bt+18]=rt,this.uint16[bt+19]=st,this.uint16[bt+20]=ht,this.uint16[bt+21]=Nt,this.uint16[bt+22]=Vt,this.uint32[nn+12]=Ft,this.float32[nn+13]=zt,this.float32[nn+14]=Pt,this.float32[nn+15]=jt,this.float32[nn+16]=Ot,n}}fc.prototype.bytesPerElement=68,Ct("StructArrayLayout8i15ui1ul4f68",fc);class dc extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}dc.prototype.bytesPerElement=4,Ct("StructArrayLayout1f4",dc);class pc extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}pc.prototype.bytesPerElement=8,Ct("StructArrayLayout1ul2ui8",pc);class p extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.uint16[m+0]=s,this.uint16[m+1]=h,n}}p.prototype.bytesPerElement=4,Ct("StructArrayLayout2ui4",p);class r extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}r.prototype.bytesPerElement=2,Ct("StructArrayLayout1ui2",r);class u extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const _=4*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=m,this.float32[_+3]=v,n}}u.prototype.bytesPerElement=16,Ct("StructArrayLayout4f16",u);class f extends hs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}f.prototype.size=20;class g extends _a{get(n){return new f(this,n)}}Ct("CollisionBoxArray",g);class x extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}x.prototype.size=48;class A extends Vh{get(n){return new x(this,n)}}Ct("PlacedSymbolArray",A);class k extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}k.prototype.size=68;class M extends fc{get(n){return new k(this,n)}}Ct("SymbolInstanceArray",M);class N extends dc{getoffsetX(n){return this.float32[1*n+0]}}Ct("GlyphOffsetArray",N);class Y extends ac{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Ct("SymbolLineVertexArray",Y);class q extends hs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}q.prototype.size=8;class fe extends pc{get(n){return new q(this,n)}}Ct("FeatureIndexArray",fe);class ze extends ll{}class Ae extends ll{}class Me extends ll{}class je extends Zo{}class Xe extends lc{}class it extends va{}class Fe extends uc{}class nt extends du{}class lt extends Uh{}class vt extends ul{}class wt extends $h{}class Tt extends xa{}class _t extends hc{}class Dt extends p{}const tn=kr([{name:"a_pos",components:2,type:"Int16"}],4),{members:gn}=tn;class kt{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,m){let v=this.segments[this.segments.length-1];return n>kt.MAX_VERTEX_ARRAY_LENGTH&&J(`Max vertices per segment is ${kt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>kt.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,m){return new kt([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function un(o,n){return 256*(o=G(Math.floor(o),0,255))+G(Math.floor(n),0,255)}kt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ct("SegmentVector",kt);const Bt=kr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var jn={exports:{}},Er={exports:{}};Er.exports=function(o,n){var s,h,m,v,_,T,I,U;for(h=o.length-(s=3&o.length),m=n,_=3432918353,T=461845907,U=0;U<h;)I=255&o.charCodeAt(U)|(255&o.charCodeAt(++U))<<8|(255&o.charCodeAt(++U))<<16|(255&o.charCodeAt(++U))<<24,++U,m=27492+(65535&(v=5*(65535&(m=(m^=I=(65535&(I=(I=(65535&I)*_+(((I>>>16)*_&65535)<<16)&4294967295)<<15|I>>>17))*T+(((I>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(I=0,s){case 3:I^=(255&o.charCodeAt(U+2))<<16;case 2:I^=(255&o.charCodeAt(U+1))<<8;case 1:m^=I=(65535&(I=(I=(65535&(I^=255&o.charCodeAt(U)))*_+(((I>>>16)*_&65535)<<16)&4294967295)<<15|I>>>17))*T+(((I>>>16)*T&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Dn=Er.exports,yn={exports:{}};yn.exports=function(o,n){for(var s,h=o.length,m=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:m^=(255&o.charCodeAt(v+2))<<16;case 2:m^=(255&o.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var vr=Dn,gi=yn.exports;jn.exports=vr,jn.exports.murmur3=vr,jn.exports.murmur2=gi;var Sr=b(jn.exports);class Wr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,m){this.ids.push(Vi(n)),this.positions.push(s,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Vi(n);let h=0,m=this.ids.length-1;for(;h<m;){const _=h+m>>1;this.ids[_]>=s?m=_:h=_+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return bo(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const s=new Wr;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Vi(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Sr(String(o))}function bo(o,n,s,h){for(;s<h;){const m=o[s+h>>1];let v=s-1,_=h+1;for(;;){do v++;while(o[v]<m);do _--;while(o[_]>m);if(v>=_)break;Eo(o,v,_),Eo(n,3*v,3*_),Eo(n,3*v+1,3*_+1),Eo(n,3*v+2,3*_+2)}_-s<h-_?(bo(o,n,s,_),s=_+1):(bo(o,n,_+1,h),h=_)}}function Eo(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Ct("FeaturePositionMap",Wr);class yi{constructor(n,s){this.gl=n.gl,this.location=s}}class Wo extends yi{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class pu extends yi{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class ii extends yi{constructor(n,s){super(n,s),this.current=hn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Hr=new Float32Array(16);function Un(o){return[un(255*o.r,255*o.g),un(255*o.b,255*o.a)]}class Nr{constructor(n,s,h){this.value=n,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new ii(n,s):new Wo(n,s)}}class Xr{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new pu(n,s):new Wo(n,s)}}class Gn{constructor(n,s,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,s,h,m,v){const _=this.paintVertexArray.length,T=this.expression.evaluate(new rr(0),s,{},m,[],v);this.paintVertexArray.resize(n),this._setPaintValue(_,n,T)}updatePaintArray(n,s,h,m){const v=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const m=Un(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ur{constructor(n,s,h,m,v,_){this.expression=n,this.uniformNames=s.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,s,h,m,v){const _=this.expression.evaluate(new rr(this.zoom),s,{},m,[],v),T=this.expression.evaluate(new rr(this.zoom+1),s,{},m,[],v),I=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(I,n,_,T)}updatePaintArray(n,s,h,m){const v=this.expression.evaluate({zoom:this.zoom},h,m),_=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,s,v,_)}_setPaintValue(n,s,h,m){if(this.type==="color"){const v=Un(h),_=Un(m);for(let T=n;T<s;T++)this.paintVertexArray.emplace(T,v[0],v[1],_[0],_[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=G(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,s,h){return new Wo(n,s)}}class Gi{constructor(n,s,h,m,v,_){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,m,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,m){if(!m||!h)return;const{min:v,mid:_,max:T}=h,I=m[v],U=m[_],X=m[T];if(I&&U&&X)for(let ee=n;ee<s;ee++)this.zoomInPaintVertexArray.emplace(ee,U.tl[0],U.tl[1],U.br[0],U.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],U.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,U.tl[0],U.tl[1],U.br[0],U.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],U.pixelRatio,X.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Bt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Bt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class mc{constructor(n,s,h){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!h(v))continue;const _=n.paint.get(v);if(!(_ instanceof Vo&&Os(_.property.specification)))continue;const T=jg(v,n.type),I=_.value,U=_.property.specification.type,X=_.property.useIntegerZoom,ee=_.property.specification["property-type"],ue=ee==="cross-faded"||ee==="cross-faded-data-driven";if(I.kind==="constant")this.binders[v]=ue?new Xr(I.value,T):new Nr(I.value,T,U),m.push(`/u_${v}`);else if(I.kind==="source"||ue){const ce=Dd(v,U,"source");this.binders[v]=ue?new Gi(I,U,X,s,ce,n.id):new Gn(I,T,U,ce),m.push(`/a_${v}`)}else{const ce=Dd(v,U,"composite");this.binders[v]=new Ur(I,T,U,X,s,ce),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Gn||s instanceof Ur?s.maxValue:0}populatePaintArrays(n,s,h,m,v){for(const _ in this.binders){const T=this.binders[_];(T instanceof Gn||T instanceof Ur||T instanceof Gi)&&T.populatePaintArray(n,s,h,m,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const m=this.binders[h];m instanceof Xr&&m.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,m,v){let _=!1;for(const T in n){const I=s.getPositions(T);for(const U of I){const X=h.feature(U.index);for(const ee in this.binders){const ue=this.binders[ee];if((ue instanceof Gn||ue instanceof Ur||ue instanceof Gi)&&ue.expression.isStateDependent===!0){const ce=m.paint.get(ee);ue.expression=ce.value,ue.updatePaintArray(U.start,U.end,X,n[T],v),_=!0}}}}return _}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Nr||h instanceof Xr)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Gn||h instanceof Ur)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof Gi)for(let m=0;m<Bt.members.length;m++)n.push(Bt.members[m].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Nr||h instanceof Xr||h instanceof Ur)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof Nr||v instanceof Xr||v instanceof Ur){for(const _ of v.uniformNames)if(s[_]){const T=v.getBinding(n,s[_],_);h.push({name:_,property:m,binding:T})}}}return h}setUniforms(n,s,h,m){for(const{name:v,property:_,binding:T}of s)this.binders[_].setUniform(T,m,h.get(_),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Gi){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Gn||h instanceof Ur)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Gn||h instanceof Ur||h instanceof Gi)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Gn||s instanceof Ur||s instanceof Gi)&&s.destroy()}}}class fs{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new mc(m,s,h);this.needsUpload=!1,this._featureMap=new Wr,this._bufferOffset=0}populatePaintArrays(n,s,h,m,v,_){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(n,s,m,v,_);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,m){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function jg(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Dd(o,n,s){const h={color:{source:va,composite:u},number:{source:dc,composite:va}},m=function(v){return{"line-pattern":{source:Fe,composite:Fe},"fill-pattern":{source:Fe,composite:Fe},"fill-extrusion-pattern":{source:Fe,composite:Fe}}[v]}(o);return m&&m[s]||h[n][s]}Ct("ConstantBinder",Nr),Ct("CrossFadedConstantBinder",Xr),Ct("SourceExpressionBinder",Gn),Ct("CrossFadedCompositeBinder",Gi),Ct("CompositeExpressionBinder",Ur),Ct("ProgramConfiguration",mc,{omit:["_buffers"]}),Ct("ProgramConfigurationSet",fs);var Qn=8192;const Gh=Math.pow(2,14)-1,mu=-Gh-1;function ds(o){const n=Qn/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let v=0;v<m.length;v++){const _=m[v],T=Math.round(_.x*n),I=Math.round(_.y*n);_.x=G(T,mu,Gh),_.y=G(I,mu,Gh),(T<_.x||T>_.x+1||I<_.y||I>_.y+1)&&J("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function gu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?ds(o):[]}}function Bd(o,n,s,h,m){o.emplaceBack(2*n+(h+1)/2,2*s+(m+1)/2)}class Dg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ae,this.indexArray=new _t,this.segments=new kt,this.programConfigurations=new fs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const m=this.layers[0],v=[];let _=null,T=!1;m.type==="circle"&&(_=m.layout.get("circle-sort-key"),T=!_.isConstant());for(const{feature:I,id:U,index:X,sourceLayerIndex:ee}of n){const ue=this.layers[0]._featureFilter.needGeometry,ce=gu(I,ue);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),ce,h))continue;const de=T?_.evaluate(ce,{},h):void 0,Le={id:U,properties:I.properties,type:I.type,sourceLayerIndex:ee,index:X,geometry:ue?ce.geometry:ds(I),patterns:{},sortKey:de};v.push(Le)}T&&v.sort((I,U)=>I.sortKey-U.sortKey);for(const I of v){const{geometry:U,index:X,sourceLayerIndex:ee}=I,ue=n[X].feature;this.addFeature(I,U,X,h),s.featureIndex.insert(ue,U,X,ee,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,gn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,m){for(const v of s)for(const _ of v){const T=_.x,I=_.y;if(T<0||T>=Qn||I<0||I>=Qn)continue;const U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),X=U.vertexLength;Bd(this.layoutVertexArray,T,I,-1,-1),Bd(this.layoutVertexArray,T,I,1,-1),Bd(this.layoutVertexArray,T,I,1,1),Bd(this.layoutVertexArray,T,I,-1,1),this.indexArray.emplaceBack(X,X+1,X+2),this.indexArray.emplaceBack(X,X+3,X+2),U.vertexLength+=4,U.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function nx(o,n){for(let s=0;s<o.length;s++)if(gc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(gc(o,n[s]))return!0;return!!Bg(o,n)}function eI(o,n,s){return!!gc(o,n)||!!Ng(n,o,s)}function rx(o,n){if(o.length===1)return ox(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let m=0;m<h.length;m++)if(gc(o,h[m]))return!0}for(let s=0;s<o.length;s++)if(ox(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Bg(o,n[s]))return!0;return!1}function tI(o,n,s){if(o.length>1){if(Bg(o,n))return!0;for(let h=0;h<n.length;h++)if(Ng(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Ng(o[h],n,s))return!0;return!1}function Bg(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],m=o[s+1];for(let v=0;v<n.length-1;v++)if(nI(h,m,n[v],n[v+1]))return!0}return!1}function nI(o,n,s,h){return H(o,s,h)!==H(n,s,h)&&H(o,n,s)!==H(o,n,h)}function Ng(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(ix(o,n[m-1],n[m])<h)return!0;return!1}function ix(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const m=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(m<0?n:m>1?s:s.sub(n)._mult(m)._add(n))}function ox(o,n){let s,h,m,v=!1;for(let _=0;_<o.length;_++){s=o[_];for(let T=0,I=s.length-1;T<s.length;I=T++)h=s[T],m=s[I],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(v=!v)}return v}function gc(o,n){let s=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const v=o[h],_=o[m];v.y>n.y!=_.y>n.y&&n.x<(_.x-v.x)*(n.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function rI(o,n,s){const h=s[0],m=s[2];if(o.x<h.x&&n.x<h.x||o.x>m.x&&n.x>m.x||o.y<h.y&&n.y<h.y||o.y>m.y&&n.y>m.y)return!1;const v=H(o,n,s[0]);return v!==H(o,n,s[1])||v!==H(o,n,s[2])||v!==H(o,n,s[3])}function Zh(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Nd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ud(o,n,s,h,m){if(!n[0]&&!n[1])return o;const v=E.convert(n)._mult(m);s==="viewport"&&v._rotate(-h);const _=[];for(let T=0;T<o.length;T++)_.push(o[T].sub(v));return _}let sx,ax;Ct("CircleBucket",Dg,{omit:["layers"]});var iI={get paint(){return ax=ax||new zi({"circle-radius":new on(Ye.paint_circle["circle-radius"]),"circle-color":new on(Ye.paint_circle["circle-color"]),"circle-blur":new on(Ye.paint_circle["circle-blur"]),"circle-opacity":new on(Ye.paint_circle["circle-opacity"]),"circle-translate":new qt(Ye.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(Ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(Ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(Ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new on(Ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new on(Ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new on(Ye.paint_circle["circle-stroke-opacity"])})},get layout(){return sx=sx||new zi({"circle-sort-key":new on(Ye.layout_circle["circle-sort-key"])})}},Li=1e-6,yc=typeof Float32Array<"u"?Float32Array:Array;function Ug(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function lx(o,n,s){var h=n[0],m=n[1],v=n[2],_=n[3],T=n[4],I=n[5],U=n[6],X=n[7],ee=n[8],ue=n[9],ce=n[10],de=n[11],Le=n[12],ke=n[13],qe=n[14],et=n[15],Ze=s[0],rt=s[1],st=s[2],ht=s[3];return o[0]=Ze*h+rt*T+st*ee+ht*Le,o[1]=Ze*m+rt*I+st*ue+ht*ke,o[2]=Ze*v+rt*U+st*ce+ht*qe,o[3]=Ze*_+rt*X+st*de+ht*et,o[4]=(Ze=s[4])*h+(rt=s[5])*T+(st=s[6])*ee+(ht=s[7])*Le,o[5]=Ze*m+rt*I+st*ue+ht*ke,o[6]=Ze*v+rt*U+st*ce+ht*qe,o[7]=Ze*_+rt*X+st*de+ht*et,o[8]=(Ze=s[8])*h+(rt=s[9])*T+(st=s[10])*ee+(ht=s[11])*Le,o[9]=Ze*m+rt*I+st*ue+ht*ke,o[10]=Ze*v+rt*U+st*ce+ht*qe,o[11]=Ze*_+rt*X+st*de+ht*et,o[12]=(Ze=s[12])*h+(rt=s[13])*T+(st=s[14])*ee+(ht=s[15])*Le,o[13]=Ze*m+rt*I+st*ue+ht*ke,o[14]=Ze*v+rt*U+st*ce+ht*qe,o[15]=Ze*_+rt*X+st*de+ht*et,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var Wh,oI=lx;function $d(o,n,s){var h=n[0],m=n[1],v=n[2],_=n[3];return o[0]=s[0]*h+s[4]*m+s[8]*v+s[12]*_,o[1]=s[1]*h+s[5]*m+s[9]*v+s[13]*_,o[2]=s[2]*h+s[6]*m+s[10]*v+s[14]*_,o[3]=s[3]*h+s[7]*m+s[11]*v+s[15]*_,o}function ux(o,n){const s=$d([],[o.x,o.y,0,1],n);return new E(s[0]/s[3],s[1]/s[3])}Wh=new yc(4),yc!=Float32Array&&(Wh[0]=0,Wh[1]=0,Wh[2]=0,Wh[3]=0);class cx extends Dg{}let hx;Ct("HeatmapBucket",cx,{omit:["layers"]});var sI={get paint(){return hx=hx||new zi({"heatmap-radius":new on(Ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new on(Ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(Ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Bh(Ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(Ye.paint_heatmap["heatmap-opacity"])})}};function $g(o,{width:n,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*s*h}`)}else m=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=m,o}function fx(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const m=$g({},{width:n,height:s},h);Vg(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=m.data}function Vg(o,n,s,h,m,v){if(m.width===0||m.height===0)return n;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,T=n.data;if(_===T)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<m.height;I++){const U=((s.y+I)*o.width+s.x)*v,X=((h.y+I)*n.width+h.x)*v;for(let ee=0;ee<m.width*v;ee++)T[X+ee]=_[U+ee]}return n}class Hh{constructor(n,s){$g(this,n,1,s)}resize(n){fx(this,n,1)}clone(){return new Hh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,m,v){Vg(n,s,h,m,v,1)}}class So{constructor(n,s){$g(this,n,4,s)}resize(n){fx(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new So({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,m,v){Vg(n,s,h,m,v,4)}}function dx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new So({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(_,T,I)=>{n[o.evaluationKey]=I;const U=o.expression.evaluate(n);m.data[_+T+0]=Math.floor(255*U.r/U.a),m.data[_+T+1]=Math.floor(255*U.g/U.a),m.data[_+T+2]=Math.floor(255*U.b/U.a),m.data[_+T+3]=Math.floor(255*U.a)};if(o.clips)for(let _=0,T=0;_<h;++_,T+=4*s)for(let I=0,U=0;I<s;I++,U+=4){const X=I/(s-1),{start:ee,end:ue}=o.clips[_];v(T,U,ee*(1-X)+ue*X)}else for(let _=0,T=0;_<s;_++,T+=4)v(0,T,_/(s-1));return m}let px;Ct("AlphaImage",Hh),Ct("RGBAImage",So);var aI={get paint(){return px=px||new zi({"hillshade-illumination-direction":new qt(Ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(Ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(Ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(Ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(Ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(Ye.paint_hillshade["hillshade-accent-color"])})}};const lI=kr([{name:"a_pos",components:2,type:"Int16"}],4),{members:uI}=lI;var Gg={exports:{}};function Vd(o,n,s){s=s||2;var h,m,v,_,T,I,U,X=n&&n.length,ee=X?n[0]*s:o.length,ue=mx(o,0,ee,s,!0),ce=[];if(!ue||ue.next===ue.prev)return ce;if(X&&(ue=function(Le,ke,qe,et){var Ze,rt,st,ht=[];for(Ze=0,rt=ke.length;Ze<rt;Ze++)(st=mx(Le,ke[Ze]*et,Ze<rt-1?ke[Ze+1]*et:Le.length,et,!1))===st.next&&(st.steiner=!0),ht.push(yI(st));for(ht.sort(pI),Ze=0;Ze<ht.length;Ze++)qe=mI(ht[Ze],qe);return qe}(o,n,ue,s)),o.length>80*s){h=v=o[0],m=_=o[1];for(var de=s;de<ee;de+=s)(T=o[de])<h&&(h=T),(I=o[de+1])<m&&(m=I),T>v&&(v=T),I>_&&(_=I);U=(U=Math.max(v-h,_-m))!==0?32767/U:0}return Xh(ue,ce,s,h,m,U,0),ce}function mx(o,n,s,h,m){var v,_;if(m===Hg(o,n,s,h)>0)for(v=n;v<s;v+=h)_=vx(v,o[v],o[v+1],_);else for(v=s-h;v>=n;v-=h)_=vx(v,o[v],o[v+1],_);return _&&Gd(_,_.next)&&(Kh(_),_=_.next),_}function yu(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!Gd(h,h.next)&&Tr(h.prev,h,h.next)!==0)h=h.next;else{if(Kh(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function Xh(o,n,s,h,m,v,_){if(o){!_&&v&&function(X,ee,ue,ce){var de=X;do de.z===0&&(de.z=Zg(de.x,de.y,ee,ue,ce)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next;while(de!==X);de.prevZ.nextZ=null,de.prevZ=null,function(Le){var ke,qe,et,Ze,rt,st,ht,Nt,Vt=1;do{for(qe=Le,Le=null,rt=null,st=0;qe;){for(st++,et=qe,ht=0,ke=0;ke<Vt&&(ht++,et=et.nextZ);ke++);for(Nt=Vt;ht>0||Nt>0&&et;)ht!==0&&(Nt===0||!et||qe.z<=et.z)?(Ze=qe,qe=qe.nextZ,ht--):(Ze=et,et=et.nextZ,Nt--),rt?rt.nextZ=Ze:Le=Ze,Ze.prevZ=rt,rt=Ze;qe=et}rt.nextZ=null,Vt*=2}while(st>1)}(de)}(o,h,m,v);for(var T,I,U=o;o.prev!==o.next;)if(T=o.prev,I=o.next,v?hI(o,h,m,v):cI(o))n.push(T.i/s|0),n.push(o.i/s|0),n.push(I.i/s|0),Kh(o),o=I.next,U=I.next;else if((o=I)===U){_?_===1?Xh(o=fI(yu(o),n,s),n,s,h,m,v,2):_===2&&dI(o,n,s,h,m,v):Xh(yu(o),n,s,h,m,v,1);break}}}function cI(o){var n=o.prev,s=o,h=o.next;if(Tr(n,s,h)>=0)return!1;for(var m=n.x,v=s.x,_=h.x,T=n.y,I=s.y,U=h.y,X=m<v?m<_?m:_:v<_?v:_,ee=T<I?T<U?T:U:I<U?I:U,ue=m>v?m>_?m:_:v>_?v:_,ce=T>I?T>U?T:U:I>U?I:U,de=h.next;de!==n;){if(de.x>=X&&de.x<=ue&&de.y>=ee&&de.y<=ce&&vc(m,T,v,I,_,U,de.x,de.y)&&Tr(de.prev,de,de.next)>=0)return!1;de=de.next}return!0}function hI(o,n,s,h){var m=o.prev,v=o,_=o.next;if(Tr(m,v,_)>=0)return!1;for(var T=m.x,I=v.x,U=_.x,X=m.y,ee=v.y,ue=_.y,ce=T<I?T<U?T:U:I<U?I:U,de=X<ee?X<ue?X:ue:ee<ue?ee:ue,Le=T>I?T>U?T:U:I>U?I:U,ke=X>ee?X>ue?X:ue:ee>ue?ee:ue,qe=Zg(ce,de,n,s,h),et=Zg(Le,ke,n,s,h),Ze=o.prevZ,rt=o.nextZ;Ze&&Ze.z>=qe&&rt&&rt.z<=et;){if(Ze.x>=ce&&Ze.x<=Le&&Ze.y>=de&&Ze.y<=ke&&Ze!==m&&Ze!==_&&vc(T,X,I,ee,U,ue,Ze.x,Ze.y)&&Tr(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,rt.x>=ce&&rt.x<=Le&&rt.y>=de&&rt.y<=ke&&rt!==m&&rt!==_&&vc(T,X,I,ee,U,ue,rt.x,rt.y)&&Tr(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;Ze&&Ze.z>=qe;){if(Ze.x>=ce&&Ze.x<=Le&&Ze.y>=de&&Ze.y<=ke&&Ze!==m&&Ze!==_&&vc(T,X,I,ee,U,ue,Ze.x,Ze.y)&&Tr(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;rt&&rt.z<=et;){if(rt.x>=ce&&rt.x<=Le&&rt.y>=de&&rt.y<=ke&&rt!==m&&rt!==_&&vc(T,X,I,ee,U,ue,rt.x,rt.y)&&Tr(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function fI(o,n,s){var h=o;do{var m=h.prev,v=h.next.next;!Gd(m,v)&&gx(m,h,h.next,v)&&qh(m,v)&&qh(v,m)&&(n.push(m.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),Kh(h),Kh(h.next),h=o=v),h=h.next}while(h!==o);return yu(h)}function dI(o,n,s,h,m,v){var _=o;do{for(var T=_.next.next;T!==_.prev;){if(_.i!==T.i&&vI(_,T)){var I=yx(_,T);return _=yu(_,_.next),I=yu(I,I.next),Xh(_,n,s,h,m,v,0),void Xh(I,n,s,h,m,v,0)}T=T.next}_=_.next}while(_!==o)}function pI(o,n){return o.x-n.x}function mI(o,n){var s=function(m,v){var _,T=v,I=m.x,U=m.y,X=-1/0;do{if(U<=T.y&&U>=T.next.y&&T.next.y!==T.y){var ee=T.x+(U-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(ee<=I&&ee>X&&(X=ee,_=T.x<T.next.x?T:T.next,ee===I))return _}T=T.next}while(T!==v);if(!_)return null;var ue,ce=_,de=_.x,Le=_.y,ke=1/0;T=_;do I>=T.x&&T.x>=de&&I!==T.x&&vc(U<Le?I:X,U,de,Le,U<Le?X:I,U,T.x,T.y)&&(ue=Math.abs(U-T.y)/(I-T.x),qh(T,m)&&(ue<ke||ue===ke&&(T.x>_.x||T.x===_.x&&gI(_,T)))&&(_=T,ke=ue)),T=T.next;while(T!==ce);return _}(o,n);if(!s)return n;var h=yx(s,o);return yu(h,h.next),yu(s,s.next)}function gI(o,n){return Tr(o.prev,o,n.prev)<0&&Tr(n.next,o,o.next)<0}function Zg(o,n,s,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function yI(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function vc(o,n,s,h,m,v,_,T){return(m-_)*(n-T)>=(o-_)*(v-T)&&(o-_)*(h-T)>=(s-_)*(n-T)&&(s-_)*(v-T)>=(m-_)*(h-T)}function vI(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&gx(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(o,n)&&(qh(o,n)&&qh(n,o)&&function(s,h){var m=s,v=!1,_=(s.x+h.x)/2,T=(s.y+h.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&_<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==s);return v}(o,n)&&(Tr(o.prev,o,n.prev)||Tr(o,n.prev,n))||Gd(o,n)&&Tr(o.prev,o,o.next)>0&&Tr(n.prev,n,n.next)>0)}function Tr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Gd(o,n){return o.x===n.x&&o.y===n.y}function gx(o,n,s,h){var m=Wd(Tr(o,n,s)),v=Wd(Tr(o,n,h)),_=Wd(Tr(s,h,o)),T=Wd(Tr(s,h,n));return m!==v&&_!==T||!(m!==0||!Zd(o,s,n))||!(v!==0||!Zd(o,h,n))||!(_!==0||!Zd(s,o,h))||!(T!==0||!Zd(s,n,h))}function Zd(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Wd(o){return o>0?1:o<0?-1:0}function qh(o,n){return Tr(o.prev,o,o.next)<0?Tr(o,n,o.next)>=0&&Tr(o,o.prev,n)>=0:Tr(o,n,o.prev)<0||Tr(o,o.next,n)<0}function yx(o,n){var s=new Wg(o.i,o.x,o.y),h=new Wg(n.i,n.x,n.y),m=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=m,m.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function vx(o,n,s,h){var m=new Wg(o,n,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Kh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Wg(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hg(o,n,s,h){for(var m=0,v=n,_=s-h;v<s;v+=h)m+=(o[_]-o[v])*(o[v+1]+o[_+1]),_=v;return m}Gg.exports=Vd,Gg.exports.default=Vd,Vd.deviation=function(o,n,s,h){var m=n&&n.length,v=Math.abs(Hg(o,0,m?n[0]*s:o.length,s));if(m)for(var _=0,T=n.length;_<T;_++)v-=Math.abs(Hg(o,n[_]*s,_<T-1?n[_+1]*s:o.length,s));var I=0;for(_=0;_<h.length;_+=3){var U=h[_]*s,X=h[_+1]*s,ee=h[_+2]*s;I+=Math.abs((o[U]-o[ee])*(o[X+1]-o[U+1])-(o[U]-o[X])*(o[ee+1]-o[U+1]))}return v===0&&I===0?0:Math.abs((I-v)/v)},Vd.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,m=0;m<o.length;m++){for(var v=0;v<o[m].length;v++)for(var _=0;_<n;_++)s.vertices.push(o[m][v][_]);m>0&&s.holes.push(h+=o[m-1].length)}return s};var _x=b(Gg.exports);function _I(o,n,s,h,m){xx(o,n,s||0,h||o.length-1,m||xI)}function xx(o,n,s,h,m){for(;h>s;){if(h-s>600){var v=h-s+1,_=n-s+1,T=Math.log(v),I=.5*Math.exp(2*T/3),U=.5*Math.sqrt(T*I*(v-I)/v)*(_-v/2<0?-1:1);xx(o,n,Math.max(s,Math.floor(n-_*I/v+U)),Math.min(h,Math.floor(n+(v-_)*I/v+U)),m)}var X=o[n],ee=s,ue=h;for(Yh(o,s,n),m(o[h],X)>0&&Yh(o,s,h);ee<ue;){for(Yh(o,ee,ue),ee++,ue--;m(o[ee],X)<0;)ee++;for(;m(o[ue],X)>0;)ue--}m(o[s],X)===0?Yh(o,s,ue):Yh(o,++ue,h),ue<=n&&(s=ue+1),n<=ue&&(h=ue-1)}}function Yh(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function xI(o,n){return o<n?-1:o>n?1:0}function Xg(o,n){const s=o.length;if(s<=1)return[o];const h=[];let m,v;for(let _=0;_<s;_++){const T=ve(o[_]);T!==0&&(o[_].area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(m&&h.push(m),m=[o[_]]):m.push(o[_]))}if(m&&h.push(m),n>1)for(let _=0;_<h.length;_++)h[_].length<=n||(_I(h[_],n,1,h[_].length-1,wI),h[_]=h[_].slice(0,n));return h}function wI(o,n){return n.area-o.area}function qg(o,n,s){const h=s.patternDependencies;let m=!1;for(const v of n){const _=v.paint.get(`${o}-pattern`);_.isConstant()||(m=!0);const T=_.constantOr(null);T&&(m=!0,h[T.to]=!0,h[T.from]=!0)}return m}function Kg(o,n,s,h,m){const v=m.patternDependencies;for(const _ of n){const T=_.paint.get(`${o}-pattern`).value;if(T.kind!=="constant"){let I=T.evaluate({zoom:h-1},s,{},m.availableImages),U=T.evaluate({zoom:h},s,{},m.availableImages),X=T.evaluate({zoom:h+1},s,{},m.availableImages);I=I&&I.name?I.name:I,U=U&&U.name?U.name:U,X=X&&X.name?X.name:X,v[I]=!0,v[U]=!0,v[X]=!0,s.patterns[_.id]={min:I,mid:U,max:X}}}return s}class Yg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Me,this.indexArray=new _t,this.indexArray2=new Dt,this.programConfigurations=new fs(n.layers,n.zoom),this.segments=new kt,this.segments2=new kt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=qg("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),_=[];for(const{feature:T,id:I,index:U,sourceLayerIndex:X}of n){const ee=this.layers[0]._featureFilter.needGeometry,ue=gu(T,ee);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),ue,h))continue;const ce=v?m.evaluate(ue,{},h,s.availableImages):void 0,de={id:I,properties:T.properties,type:T.type,sourceLayerIndex:X,index:U,geometry:ee?ue.geometry:ds(T),patterns:{},sortKey:ce};_.push(de)}v&&_.sort((T,I)=>T.sortKey-I.sortKey);for(const T of _){const{geometry:I,index:U,sourceLayerIndex:X}=T;if(this.hasPattern){const ee=Kg("fill",this.layers,T,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(T,I,U,h,{});s.featureIndex.insert(n[U].feature,I,U,X,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uI),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,m,v){for(const _ of Xg(s,500)){let T=0;for(const ce of _)T+=ce.length;const I=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),U=I.vertexLength,X=[],ee=[];for(const ce of _){if(ce.length===0)continue;ce!==_[0]&&ee.push(X.length/2);const de=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),Le=de.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(Le+ce.length-1,Le),X.push(ce[0].x),X.push(ce[0].y);for(let ke=1;ke<ce.length;ke++)this.layoutVertexArray.emplaceBack(ce[ke].x,ce[ke].y),this.indexArray2.emplaceBack(Le+ke-1,Le+ke),X.push(ce[ke].x),X.push(ce[ke].y);de.vertexLength+=ce.length,de.primitiveLength+=ce.length}const ue=_x(X,ee);for(let ce=0;ce<ue.length;ce+=3)this.indexArray.emplaceBack(U+ue[ce],U+ue[ce+1],U+ue[ce+2]);I.vertexLength+=T,I.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}let wx,bx;Ct("FillBucket",Yg,{omit:["layers","patternFeatures"]});var bI={get paint(){return bx=bx||new zi({"fill-antialias":new qt(Ye.paint_fill["fill-antialias"]),"fill-opacity":new on(Ye.paint_fill["fill-opacity"]),"fill-color":new on(Ye.paint_fill["fill-color"]),"fill-outline-color":new on(Ye.paint_fill["fill-outline-color"]),"fill-translate":new qt(Ye.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(Ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new fu(Ye.paint_fill["fill-pattern"])})},get layout(){return wx=wx||new zi({"fill-sort-key":new on(Ye.layout_fill["fill-sort-key"])})}};const EI=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),SI=kr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:TI}=EI;var cl={},CI=w,Ex=_c;function _c(o,n,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(AI,this,n)}function AI(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,m){for(var v=h.readVarint()+h.pos;h.pos<v;){var _=m._keys[h.readVarint()],T=m._values[h.readVarint()];m.properties[_]=T}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function II(o){for(var n,s,h=0,m=0,v=o.length,_=v-1;m<v;_=m++)h+=((s=o[_]).x-(n=o[m]).x)*(n.y+s.y);return h}_c.types=["Unknown","Point","LineString","Polygon"],_c.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,m=0,v=0,_=0,T=[];o.pos<s;){if(m<=0){var I=o.readVarint();h=7&I,m=I>>3}if(m--,h===1||h===2)v+=o.readSVarint(),_+=o.readSVarint(),h===1&&(n&&T.push(n),n=[]),n.push(new CI(v,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&T.push(n),T},_c.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,m=0,v=0,_=1/0,T=-1/0,I=1/0,U=-1/0;o.pos<n;){if(h<=0){var X=o.readVarint();s=7&X,h=X>>3}if(h--,s===1||s===2)(m+=o.readSVarint())<_&&(_=m),m>T&&(T=m),(v+=o.readSVarint())<I&&(I=v),v>U&&(U=v);else if(s!==7)throw new Error("unknown command "+s)}return[_,I,T,U]},_c.prototype.toGeoJSON=function(o,n,s){var h,m,v=this.extent*Math.pow(2,s),_=this.extent*o,T=this.extent*n,I=this.loadGeometry(),U=_c.types[this.type];function X(ce){for(var de=0;de<ce.length;de++){var Le=ce[de];ce[de]=[360*(Le.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Le.y+T)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var ee=[];for(h=0;h<I.length;h++)ee[h]=I[h][0];X(I=ee);break;case 2:for(h=0;h<I.length;h++)X(I[h]);break;case 3:for(I=function(ce){var de=ce.length;if(de<=1)return[ce];for(var Le,ke,qe=[],et=0;et<de;et++){var Ze=II(ce[et]);Ze!==0&&(ke===void 0&&(ke=Ze<0),ke===Ze<0?(Le&&qe.push(Le),Le=[ce[et]]):Le.push(ce[et]))}return Le&&qe.push(Le),qe}(I),h=0;h<I.length;h++)for(m=0;m<I[h].length;m++)X(I[h][m])}I.length===1?I=I[0]:U="Multi"+U;var ue={type:"Feature",geometry:{type:U,coordinates:I},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var PI=Ex,Sx=Tx;function Tx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(MI,this,n),this.length=this._features.length}function MI(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var m=null,v=h.readVarint()+h.pos;h.pos<v;){var _=h.readVarint()>>3;m=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return m}(s))}Tx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new PI(this._pbf,n,this.extent,this._keys,this._values)};var kI=Sx;function zI(o,n,s){if(o===3){var h=new kI(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}cl.VectorTile=function(o,n){this.layers=o.readFields(zI,{},n)},cl.VectorTileFeature=Ex,cl.VectorTileLayer=Sx;const LI=cl.VectorTileFeature.types,Jg=Math.pow(2,13);function Jh(o,n,s,h,m,v,_,T){o.emplaceBack(n,s,2*Math.floor(h*Jg)+_,m*Jg*2,v*Jg*2,Math.round(T))}class Qg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new je,this.centroidVertexArray=new ze,this.indexArray=new _t,this.programConfigurations=new fs(n.layers,n.zoom),this.segments=new kt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=qg("fill-extrusion",this.layers,s);for(const{feature:m,id:v,index:_,sourceLayerIndex:T}of n){const I=this.layers[0]._featureFilter.needGeometry,U=gu(m,I);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),U,h))continue;const X={id:v,sourceLayerIndex:T,index:_,geometry:I?U.geometry:ds(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Kg("fill-extrusion",this.layers,X,this.zoom,s)):this.addFeature(X,X.geometry,_,h,{}),s.featureIndex.insert(m,X.geometry,_,T,this.index,!0)}}addFeatures(n,s,h){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,TI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,SI.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,m,v){const _={x:0,y:0,vertexCount:0};for(const T of Xg(s,500)){let I=0;for(const de of T)I+=de.length;let U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const de of T){if(de.length===0||RI(de))continue;let Le=0;for(let ke=0;ke<de.length;ke++){const qe=de[ke];if(ke>=1){const et=de[ke-1];if(!OI(qe,et)){U.vertexLength+4>kt.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=qe.sub(et)._perp()._unit(),rt=et.dist(qe);Le+rt>32768&&(Le=0),Jh(this.layoutVertexArray,qe.x,qe.y,Ze.x,Ze.y,0,0,Le),Jh(this.layoutVertexArray,qe.x,qe.y,Ze.x,Ze.y,0,1,Le),_.x+=2*qe.x,_.y+=2*qe.y,_.vertexCount+=2,Le+=rt,Jh(this.layoutVertexArray,et.x,et.y,Ze.x,Ze.y,0,0,Le),Jh(this.layoutVertexArray,et.x,et.y,Ze.x,Ze.y,0,1,Le),_.x+=2*et.x,_.y+=2*et.y,_.vertexCount+=2;const st=U.vertexLength;this.indexArray.emplaceBack(st,st+2,st+1),this.indexArray.emplaceBack(st+1,st+2,st+3),U.vertexLength+=4,U.primitiveLength+=2}}}}if(U.vertexLength+I>kt.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),LI[n.type]!=="Polygon")continue;const X=[],ee=[],ue=U.vertexLength;for(const de of T)if(de.length!==0){de!==T[0]&&ee.push(X.length/2);for(let Le=0;Le<de.length;Le++){const ke=de[Le];Jh(this.layoutVertexArray,ke.x,ke.y,0,0,1,1,0),_.x+=ke.x,_.y+=ke.y,_.vertexCount+=1,X.push(ke.x),X.push(ke.y)}}const ce=_x(X,ee);for(let de=0;de<ce.length;de+=3)this.indexArray.emplaceBack(ue+ce[de],ue+ce[de+2],ue+ce[de+1]);U.primitiveLength+=ce.length/3,U.vertexLength+=I}for(let T=0;T<_.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}function OI(o,n){return o.x===n.x&&(o.x<0||o.x>Qn)||o.y===n.y&&(o.y<0||o.y>Qn)}function RI(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Qn)||o.every(n=>n.y<0)||o.every(n=>n.y>Qn)}let Cx;Ct("FillExtrusionBucket",Qg,{omit:["layers","features"]});var FI={get paint(){return Cx=Cx||new zi({"fill-extrusion-opacity":new qt(Ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new on(Ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(Ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(Ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new fu(Ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new on(Ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new on(Ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(Ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function Qh(o,n){return o.x*n.x+o.y*n.y}function Ax(o,n){if(o.length===1){let s=0;const h=n[s++];let m;for(;!m||h.equals(m);)if(m=n[s++],!m)return 1/0;for(;s<n.length;s++){const v=n[s],_=o[0],T=m.sub(h),I=v.sub(h),U=_.sub(h),X=Qh(T,T),ee=Qh(T,I),ue=Qh(I,I),ce=Qh(U,T),de=Qh(U,I),Le=X*ue-ee*ee,ke=(ue*ce-ee*de)/Le,qe=(X*de-ee*ce)/Le,et=h.z*(1-ke-qe)+m.z*ke+v.z*qe;if(isFinite(et))return et}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const jI=kr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:DI}=jI,BI=kr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:NI}=BI,UI=cl.VectorTileFeature.types,$I=Math.cos(Math.PI/180*37.5),Ix=Math.pow(2,14)/.5;class ey{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Xe,this.layoutVertexArray2=new it,this.indexArray=new _t,this.programConfigurations=new fs(n.layers,n.zoom),this.segments=new kt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=qg("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),_=[];for(const{feature:T,id:I,index:U,sourceLayerIndex:X}of n){const ee=this.layers[0]._featureFilter.needGeometry,ue=gu(T,ee);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),ue,h))continue;const ce=v?m.evaluate(ue,{},h):void 0,de={id:I,properties:T.properties,type:T.type,sourceLayerIndex:X,index:U,geometry:ee?ue.geometry:ds(T),patterns:{},sortKey:ce};_.push(de)}v&&_.sort((T,I)=>T.sortKey-I.sortKey);for(const T of _){const{geometry:I,index:U,sourceLayerIndex:X}=T;if(this.hasPattern){const ee=Kg("line",this.layers,T,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(T,I,U,h,{});s.featureIndex.insert(n[U].feature,I,U,X,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,NI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,DI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,m,v){const _=this.layers[0].layout,T=_.get("line-join").evaluate(n,{}),I=_.get("line-cap"),U=_.get("line-miter-limit"),X=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ee of s)this.addLine(ee,n,T,I,U,X);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}addLine(n,s,h,m,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let qe=0;qe<n.length-1;qe++)this.totalDistance+=n[qe].dist(n[qe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=UI[s.type]==="Polygon";let I=n.length;for(;I>=2&&n[I-1].equals(n[I-2]);)I--;let U=0;for(;U<I-1&&n[U].equals(n[U+1]);)U++;if(I<(T?3:2))return;h==="bevel"&&(v=1.05);const X=this.overscaling<=16?15*Qn/(512*this.overscaling):0,ee=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let ue,ce,de,Le,ke;this.e1=this.e2=-1,T&&(ue=n[I-2],ke=n[U].sub(ue)._unit()._perp());for(let qe=U;qe<I;qe++){if(de=qe===I-1?T?n[U+1]:void 0:n[qe+1],de&&n[qe].equals(de))continue;ke&&(Le=ke),ue&&(ce=ue),ue=n[qe],ke=de?de.sub(ue)._unit()._perp():Le,Le=Le||ke;let et=Le.add(ke);et.x===0&&et.y===0||et._unit();const Ze=Le.x*ke.x+Le.y*ke.y,rt=et.x*ke.x+et.y*ke.y,st=rt!==0?1/rt:1/0,ht=2*Math.sqrt(2-2*rt),Nt=rt<$I&&ce&&de,Vt=Le.x*ke.y-Le.y*ke.x>0;if(Nt&&qe>U){const Pt=ue.dist(ce);if(Pt>2*X){const jt=ue.sub(ue.sub(ce)._mult(X/Pt)._round());this.updateDistance(ce,jt),this.addCurrentVertex(jt,Le,0,0,ee),ce=jt}}const Ft=ce&&de;let zt=Ft?h:T?"butt":m;if(Ft&&zt==="round"&&(st<_?zt="miter":st<=2&&(zt="fakeround")),zt==="miter"&&st>v&&(zt="bevel"),zt==="bevel"&&(st>2&&(zt="flipbevel"),st<v&&(zt="miter")),ce&&this.updateDistance(ce,ue),zt==="miter")et._mult(st),this.addCurrentVertex(ue,et,0,0,ee);else if(zt==="flipbevel"){if(st>100)et=ke.mult(-1);else{const Pt=st*Le.add(ke).mag()/Le.sub(ke).mag();et._perp()._mult(Pt*(Vt?-1:1))}this.addCurrentVertex(ue,et,0,0,ee),this.addCurrentVertex(ue,et.mult(-1),0,0,ee)}else if(zt==="bevel"||zt==="fakeround"){const Pt=-Math.sqrt(st*st-1),jt=Vt?Pt:0,Ot=Vt?0:Pt;if(ce&&this.addCurrentVertex(ue,Le,jt,Ot,ee),zt==="fakeround"){const bt=Math.round(180*ht/Math.PI/20);for(let nn=1;nn<bt;nn++){let Wt=nn/bt;if(Wt!==.5){const er=Wt-.5;Wt+=Wt*er*(Wt-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*er*er+(.848013+Ze*(.215638*Ze-1.06021)))}const Tn=ke.sub(Le)._mult(Wt)._add(Le)._unit()._mult(Vt?-1:1);this.addHalfVertex(ue,Tn.x,Tn.y,!1,Vt,0,ee)}}de&&this.addCurrentVertex(ue,ke,-jt,-Ot,ee)}else if(zt==="butt")this.addCurrentVertex(ue,et,0,0,ee);else if(zt==="square"){const Pt=ce?1:-1;this.addCurrentVertex(ue,et,Pt,Pt,ee)}else zt==="round"&&(ce&&(this.addCurrentVertex(ue,Le,0,0,ee),this.addCurrentVertex(ue,Le,1,1,ee,!0)),de&&(this.addCurrentVertex(ue,ke,-1,-1,ee,!0),this.addCurrentVertex(ue,ke,0,0,ee)));if(Nt&&qe<I-1){const Pt=ue.dist(de);if(Pt>2*X){const jt=ue.add(de.sub(ue)._mult(X/Pt)._round());this.updateDistance(ue,jt),this.addCurrentVertex(jt,ke,0,0,ee),ue=jt}}}}addCurrentVertex(n,s,h,m,v,_=!1){const T=s.y*m-s.x,I=-s.y-s.x*m;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,_,!1,h,v),this.addHalfVertex(n,T,I,_,!0,-m,v),this.distance>Ix/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,m,v,_))}addHalfVertex({x:n,y:s},h,m,v,_,T,I){const U=.5*(this.lineClips?this.scaledDistance*(Ix-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const X=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,X),I.primitiveLength++),_?this.e2=X:this.e1=X}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Px,Mx;Ct("LineBucket",ey,{omit:["layers","patternFeatures"]});var kx={get paint(){return Mx=Mx||new zi({"line-opacity":new on(Ye.paint_line["line-opacity"]),"line-color":new on(Ye.paint_line["line-color"]),"line-translate":new qt(Ye.paint_line["line-translate"]),"line-translate-anchor":new qt(Ye.paint_line["line-translate-anchor"]),"line-width":new on(Ye.paint_line["line-width"]),"line-gap-width":new on(Ye.paint_line["line-gap-width"]),"line-offset":new on(Ye.paint_line["line-offset"]),"line-blur":new on(Ye.paint_line["line-blur"]),"line-dasharray":new Dh(Ye.paint_line["line-dasharray"]),"line-pattern":new fu(Ye.paint_line["line-pattern"]),"line-gradient":new Bh(Ye.paint_line["line-gradient"])})},get layout(){return Px=Px||new zi({"line-cap":new qt(Ye.layout_line["line-cap"]),"line-join":new on(Ye.layout_line["line-join"]),"line-miter-limit":new qt(Ye.layout_line["line-miter-limit"]),"line-round-limit":new qt(Ye.layout_line["line-round-limit"]),"line-sort-key":new on(Ye.layout_line["line-sort-key"])})}};class VI extends on{possiblyEvaluate(n,s){return s=new rr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,m){return s=B({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,m)}}let Hd;function zx(o,n){return n>0?n+2*o:o}const GI=kr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ZI=kr([{name:"a_projected_pos",components:3,type:"Float32"}],4);kr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const WI=kr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);kr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lx=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),HI=kr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function XI(o,n,s){return o.sections.forEach(h=>{h.text=function(m,v,_){const T=v.layout.get("text-transform").evaluate(_,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),ho.applyArabicShaping&&(m=ho.applyArabicShaping(m)),m}(h.text,n,s)}),o}kr([{name:"triangle",components:3,type:"Uint16"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),kr([{type:"Float32",name:"offsetX"}]),kr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const ef={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var qr=24,Ox=qn,Rx=function(o,n,s,h,m){var v,_,T=8*m-h-1,I=(1<<T)-1,U=I>>1,X=-7,ee=s?m-1:0,ue=s?-1:1,ce=o[n+ee];for(ee+=ue,v=ce&(1<<-X)-1,ce>>=-X,X+=T;X>0;v=256*v+o[n+ee],ee+=ue,X-=8);for(_=v&(1<<-X)-1,v>>=-X,X+=h;X>0;_=256*_+o[n+ee],ee+=ue,X-=8);if(v===0)v=1-U;else{if(v===I)return _?NaN:1/0*(ce?-1:1);_+=Math.pow(2,h),v-=U}return(ce?-1:1)*_*Math.pow(2,v-h)},Fx=function(o,n,s,h,m,v){var _,T,I,U=8*v-m-1,X=(1<<U)-1,ee=X>>1,ue=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=h?0:v-1,de=h?1:-1,Le=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,_=X):(_=Math.floor(Math.log(n)/Math.LN2),n*(I=Math.pow(2,-_))<1&&(_--,I*=2),(n+=_+ee>=1?ue/I:ue*Math.pow(2,1-ee))*I>=2&&(_++,I/=2),_+ee>=X?(T=0,_=X):_+ee>=1?(T=(n*I-1)*Math.pow(2,m),_+=ee):(T=n*Math.pow(2,ee-1)*Math.pow(2,m),_=0));m>=8;o[s+ce]=255&T,ce+=de,T/=256,m-=8);for(_=_<<m|T,U+=m;U>0;o[s+ce]=255&_,ce+=de,_/=256,U-=8);o[s+ce-de]|=128*Le};function qn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0,qn.Fixed64=1,qn.Bytes=2,qn.Fixed32=5;var ty=4294967296,jx=1/ty,Dx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function wa(o){return o.type===qn.Bytes?o.readVarint()+o.pos:o.pos+1}function xc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Bx(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=o;m--)s.buf[m+h]=s.buf[m]}function qI(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function KI(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function YI(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function JI(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function QI(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function eP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function tP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function nP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function rP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function Xd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function wc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Nx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}qn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,v=this.pos;this.type=7&h,o(m,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Xd(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Nx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Xd(this.buf,this.pos)+Xd(this.buf,this.pos+4)*ty;return this.pos+=8,o},readSFixed64:function(){var o=Xd(this.buf,this.pos)+Nx(this.buf,this.pos+4)*ty;return this.pos+=8,o},readFloat:function(){var o=Rx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Rx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(m,v,_){var T,I,U=_.buf;if(T=(112&(I=U[_.pos++]))>>4,I<128||(T|=(127&(I=U[_.pos++]))<<3,I<128)||(T|=(127&(I=U[_.pos++]))<<10,I<128)||(T|=(127&(I=U[_.pos++]))<<17,I<128)||(T|=(127&(I=U[_.pos++]))<<24,I<128)||(T|=(1&(I=U[_.pos++]))<<31,I<128))return xc(m,T,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Dx?function(s,h,m){return Dx.decode(s.subarray(h,m))}(this.buf,n,o):function(s,h,m){for(var v="",_=h;_<m;){var T,I,U,X=s[_],ee=null,ue=X>239?4:X>223?3:X>191?2:1;if(_+ue>m)break;ue===1?X<128&&(ee=X):ue===2?(192&(T=s[_+1]))==128&&(ee=(31&X)<<6|63&T)<=127&&(ee=null):ue===3?(I=s[_+2],(192&(T=s[_+1]))==128&&(192&I)==128&&((ee=(15&X)<<12|(63&T)<<6|63&I)<=2047||ee>=55296&&ee<=57343)&&(ee=null)):ue===4&&(I=s[_+2],U=s[_+3],(192&(T=s[_+1]))==128&&(192&I)==128&&(192&U)==128&&((ee=(15&X)<<18|(63&T)<<12|(63&I)<<6|63&U)<=65535||ee>=1114112)&&(ee=null)),ee===null?(ee=65533,ue=1):ee>65535&&(ee-=65536,v+=String.fromCharCode(ee>>>10&1023|55296),ee=56320|1023&ee),v+=String.fromCharCode(ee),_+=ue}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==qn.Bytes)return o.push(this.readVarint(n));var s=wa(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==qn.Bytes)return o.push(this.readSVarint());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==qn.Bytes)return o.push(this.readBoolean());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==qn.Bytes)return o.push(this.readFloat());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==qn.Bytes)return o.push(this.readDouble());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==qn.Bytes)return o.push(this.readFixed32());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==qn.Bytes)return o.push(this.readSFixed32());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==qn.Bytes)return o.push(this.readFixed64());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==qn.Bytes)return o.push(this.readSFixed64());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===qn.Varint)for(;this.buf[this.pos++]>127;);else if(n===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===qn.Fixed32)this.pos+=4;else{if(n!==qn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),wc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),wc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),wc(this.buf,-1&o,this.pos),wc(this.buf,Math.floor(o*jx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),wc(this.buf,-1&o,this.pos),wc(this.buf,Math.floor(o*jx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,_,T){T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,T.buf[T.pos]=127&(v>>>=7)}(h,0,s),function(v,_){var T=(7&v)<<4;_.buf[_.pos++]|=T|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,m,v){for(var _,T,I=0;I<m.length;I++){if((_=m.charCodeAt(I))>55295&&_<57344){if(!T){_>56319||I+1===m.length?(h[v++]=239,h[v++]=191,h[v++]=189):T=_;continue}if(_<56320){h[v++]=239,h[v++]=191,h[v++]=189,T=_;continue}_=T-55296<<10|_-56320|65536,T=null}else T&&(h[v++]=239,h[v++]=191,h[v++]=189,T=null);_<128?h[v++]=_:(_<2048?h[v++]=_>>6|192:(_<65536?h[v++]=_>>12|224:(h[v++]=_>>18|240,h[v++]=_>>12&63|128),h[v++]=_>>6&63|128),h[v++]=63&_|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Bx(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Fx(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Fx(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Bx(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,qn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,qI,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,KI,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,QI,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,YI,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,JI,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,eP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,tP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,nP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,rP,n)},writeBytesField:function(o,n){this.writeTag(o,qn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,qn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,qn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,qn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,qn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,qn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,qn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,qn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,qn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,qn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var ny=b(Ox);const ry=3;function iP(o,n,s){o===1&&s.readMessage(oP,n)}function oP(o,n,s){if(o===3){const{id:h,bitmap:m,width:v,height:_,left:T,top:I,advance:U}=s.readMessage(sP,{});n.push({id:h,bitmap:new Hh({width:v+2*ry,height:_+2*ry},m),metrics:{width:v,height:_,left:T,top:I,advance:U}})}}function sP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Ux=ry;function $x(o){let n=0,s=0;for(const _ of o)n+=_.w*_.h,s=Math.max(s,_.w);o.sort((_,T)=>T.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let m=0,v=0;for(const _ of o)for(let T=h.length-1;T>=0;T--){const I=h[T];if(!(_.w>I.w||_.h>I.h)){if(_.x=I.x,_.y=I.y,v=Math.max(v,_.y+_.h),m=Math.max(m,_.x+_.w),_.w===I.w&&_.h===I.h){const U=h.pop();T<h.length&&(h[T]=U)}else _.h===I.h?(I.x+=_.w,I.w-=_.w):_.w===I.w?(I.y+=_.h,I.h-=_.h):(h.push({x:I.x+_.w,y:I.y,w:I.w-_.w,h:_.h}),I.y+=_.h,I.h-=_.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}const Zi=1;class iy{constructor(n,{pixelRatio:s,version:h,stretchX:m,stretchY:v,content:_}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=m,this.stretchY=v,this.content=_,this.version=h}get tl(){return[this.paddedRect.x+Zi,this.paddedRect.y+Zi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Zi,this.paddedRect.y+this.paddedRect.h-Zi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Zi)/this.pixelRatio,(this.paddedRect.h-2*Zi)/this.pixelRatio]}}class Vx{constructor(n,s){const h={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,m,v);const{w:_,h:T}=$x(v),I=new So({width:_||1,height:T||1});for(const U in n){const X=n[U],ee=h[U].paddedRect;So.copy(X.data,I,{x:0,y:0},{x:ee.x+Zi,y:ee.y+Zi},X.data)}for(const U in s){const X=s[U],ee=m[U].paddedRect,ue=ee.x+Zi,ce=ee.y+Zi,de=X.data.width,Le=X.data.height;So.copy(X.data,I,{x:0,y:0},{x:ue,y:ce},X.data),So.copy(X.data,I,{x:0,y:Le-1},{x:ue,y:ce-1},{width:de,height:1}),So.copy(X.data,I,{x:0,y:0},{x:ue,y:ce+Le},{width:de,height:1}),So.copy(X.data,I,{x:de-1,y:0},{x:ue-1,y:ce},{width:1,height:Le}),So.copy(X.data,I,{x:0,y:0},{x:ue+de,y:ce},{width:1,height:Le})}this.image=I,this.iconPositions=h,this.patternPositions=m}addImages(n,s,h){for(const m in n){const v=n[m],_={x:0,y:0,w:v.data.width+2*Zi,h:v.data.height+2*Zi};h.push(_),s[m]=new iy(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[m,v]=n.tl;h.update(s.data,void 0,{x:m,y:v})}}var hl;Ct("ImagePosition",iy),Ct("ImageAtlas",Vx),a.WritingMode=void 0,(hl=a.WritingMode||(a.WritingMode={}))[hl.none=0]="none",hl[hl.horizontal=1]="horizontal",hl[hl.vertical=2]="vertical",hl[hl.horizontalOnly=3]="horizontalOnly";const tf=-17;class nf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new nf;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new nf;return s.imageName=n,s}}class bc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new bc;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=m&&Md(m)&&!ef[n[h+1]]||v&&Md(v)&&!ef[n[h-1]]||!ef[n[h]]?n[h]:ef[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Kd[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Kd[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new bc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(nf.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void J("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(nf.forImage(s)),this.sectionIndex.push(this.sections.length-1)):J("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qd(o,n,s,h,m,v,_,T,I,U,X,ee,ue,ce,de,Le){const ke=bc.fromFeature(o,m);let qe;ee===a.WritingMode.vertical&&ke.verticalizePunctuation();const{processBidirectionalText:et,processStyledBidirectionalText:Ze}=ho;if(et&&ke.sections.length===1){qe=[];const ht=et(ke.toString(),oy(ke,U,v,n,h,ce,de));for(const Nt of ht){const Vt=new bc;Vt.text=Nt,Vt.sections=ke.sections;for(let Ft=0;Ft<Nt.length;Ft++)Vt.sectionIndex.push(0);qe.push(Vt)}}else if(Ze){qe=[];const ht=Ze(ke.text,ke.sectionIndex,oy(ke,U,v,n,h,ce,de));for(const Nt of ht){const Vt=new bc;Vt.text=Nt[0],Vt.sectionIndex=Nt[1],Vt.sections=ke.sections,qe.push(Vt)}}else qe=function(ht,Nt){const Vt=[],Ft=ht.text;let zt=0;for(const Pt of Nt)Vt.push(ht.substring(zt,Pt)),zt=Pt;return zt<Ft.length&&Vt.push(ht.substring(zt,Ft.length)),Vt}(ke,oy(ke,U,v,n,h,ce,de));const rt=[],st={positionedLines:rt,text:ke.toString(),top:X[1],bottom:X[1],left:X[0],right:X[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return function(ht,Nt,Vt,Ft,zt,Pt,jt,Ot,bt,nn,Wt,Tn){let er=0,ir=tf,$r=0,Co=0;const oi=Ot==="right"?1:Ot==="left"?0:.5;let zr=0;for(const Lr of zt){Lr.trim();const ai=Lr.getMaxScale(),_i=(ai-1)*qr,Oi={positionedGlyphs:[],lineOffset:0};ht.positionedLines[zr]=Oi;const Hi=Oi.positionedGlyphs;let Xi=0;if(!Lr.length()){ir+=Pt,++zr;continue}for(let li=0;li<Lr.length();li++){const Cn=Lr.getSection(li),fo=Lr.getSectionIndex(li),ui=Lr.getCharCode(li);let xi=0,Ho=null,ps=null,ms=null,ba=qr;const Xo=!(bt===a.WritingMode.horizontal||!Wt&&!ec(ui)||Wt&&(Kd[ui]||(Kr=ui,At.Arabic(Kr)||At["Arabic Supplement"](Kr)||At["Arabic Extended-A"](Kr)||At["Arabic Presentation Forms-A"](Kr)||At["Arabic Presentation Forms-B"](Kr))));if(Cn.imageName){const Ao=Ft[Cn.imageName];if(!Ao)continue;ms=Cn.imageName,ht.iconsInText=ht.iconsInText||!0,ps=Ao.paddedRect;const qi=Ao.displaySize;Cn.scale=Cn.scale*qr/Tn,Ho={width:qi[0],height:qi[1],left:Zi,top:-Ux,advance:Xo?qi[1]:qi[0]},xi=_i+(qr-qi[1]*Cn.scale),ba=Ho.advance;const Ea=Xo?qi[0]*Cn.scale-qr*ai:qi[1]*Cn.scale-qr*ai;Ea>0&&Ea>Xi&&(Xi=Ea)}else{const Ao=Vt[Cn.fontStack],qi=Ao&&Ao[ui];if(qi&&qi.rect)ps=qi.rect,Ho=qi.metrics;else{const Ea=Nt[Cn.fontStack],lf=Ea&&Ea[ui];if(!lf)continue;Ho=lf.metrics}xi=(ai-Cn.scale)*qr}Xo?(ht.verticalizable=!0,Hi.push({glyph:ui,imageName:ms,x:er,y:ir+xi,vertical:Xo,scale:Cn.scale,fontStack:Cn.fontStack,sectionIndex:fo,metrics:Ho,rect:ps}),er+=ba*Cn.scale+nn):(Hi.push({glyph:ui,imageName:ms,x:er,y:ir+xi,vertical:Xo,scale:Cn.scale,fontStack:Cn.fontStack,sectionIndex:fo,metrics:Ho,rect:ps}),er+=Ho.advance*Cn.scale+nn)}Hi.length!==0&&($r=Math.max(er-nn,$r),uP(Hi,0,Hi.length-1,oi,Xi)),er=0;const _r=Pt*ai+Xi;Oi.lineOffset=Math.max(Xi,_i),ir+=_r,Co=Math.max(_r,Co),++zr}var Kr;const si=ir-tf,{horizontalAlign:vi,verticalAlign:Wi}=sy(jt);(function(Lr,ai,_i,Oi,Hi,Xi,_r,li,Cn){const fo=(ai-_i)*Hi;let ui=0;ui=Xi!==_r?-li*Oi-tf:(-Oi*Cn+.5)*_r;for(const xi of Lr)for(const Ho of xi.positionedGlyphs)Ho.x+=fo,Ho.y+=ui})(ht.positionedLines,oi,vi,Wi,$r,Co,Pt,si,zt.length),ht.top+=-Wi*si,ht.bottom=ht.top+si,ht.left+=-vi*$r,ht.right=ht.left+$r}(st,n,s,h,qe,_,T,I,ee,U,ue,Le),!function(ht){for(const Nt of ht)if(Nt.positionedGlyphs.length!==0)return!1;return!0}(rt)&&st}const Kd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},aP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gx(o,n,s,h,m,v){if(n.imageName){const _=h[n.imageName];return _?_.displaySize[0]*n.scale*qr/v+m:0}{const _=s[n.fontStack],T=_&&_[o];return T?T.metrics.advance*n.scale+m:0}}function Zx(o,n,s,h){const m=Math.pow(o-n,2);return h?o<n?m/2:2*m:m+Math.abs(s)*s}function lP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Wx(o,n,s,h,m,v){let _=null,T=Zx(n,s,m,v);for(const I of h){const U=Zx(n-I.x,s,m,v)+I.badness;U<=T&&(_=I,T=U)}return{index:o,x:n,priorBreak:_,badness:T}}function Hx(o){return o?Hx(o.priorBreak).concat(o.index):[]}function oy(o,n,s,h,m,v,_){if(v!=="point")return[];if(!o)return[];const T=[],I=function(ue,ce,de,Le,ke,qe){let et=0;for(let Ze=0;Ze<ue.length();Ze++){const rt=ue.getSection(Ze);et+=Gx(ue.getCharCode(Ze),rt,Le,ke,ce,qe)}return et/Math.max(1,Math.ceil(et/de))}(o,n,s,h,m,_),U=o.text.indexOf("​")>=0;let X=0;for(let ue=0;ue<o.length();ue++){const ce=o.getSection(ue),de=o.getCharCode(ue);if(Kd[de]||(X+=Gx(de,ce,h,m,n,_)),ue<o.length()-1){const Le=!((ee=de)<11904||!(At["Bopomofo Extended"](ee)||At.Bopomofo(ee)||At["CJK Compatibility Forms"](ee)||At["CJK Compatibility Ideographs"](ee)||At["CJK Compatibility"](ee)||At["CJK Radicals Supplement"](ee)||At["CJK Strokes"](ee)||At["CJK Symbols and Punctuation"](ee)||At["CJK Unified Ideographs Extension A"](ee)||At["CJK Unified Ideographs"](ee)||At["Enclosed CJK Letters and Months"](ee)||At["Halfwidth and Fullwidth Forms"](ee)||At.Hiragana(ee)||At["Ideographic Description Characters"](ee)||At["Kangxi Radicals"](ee)||At["Katakana Phonetic Extensions"](ee)||At.Katakana(ee)||At["Vertical Forms"](ee)||At["Yi Radicals"](ee)||At["Yi Syllables"](ee)));(aP[de]||Le||ce.imageName)&&T.push(Wx(ue+1,X,I,T,lP(de,o.getCharCode(ue+1),Le&&U),!1))}}var ee;return Hx(Wx(o.length(),X,I,T,0,!0))}function sy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function uP(o,n,s,h,m){if(!h&&!m)return;const v=o[s],_=(o[s].x+v.metrics.advance*v.scale)*h;for(let T=n;T<=s;T++)o[T].x-=_,o[T].y+=m}function cP(o,n,s){const{horizontalAlign:h,verticalAlign:m}=sy(s),v=n[0]-o.displaySize[0]*h,_=n[1]-o.displaySize[1]*m;return{image:o,top:_,bottom:_+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Xx(o,n,s,h,m,v){const _=o.image;let T;if(_.content){const ke=_.content,qe=_.pixelRatio||1;T=[ke[0]/qe,ke[1]/qe,_.displaySize[0]-ke[2]/qe,_.displaySize[1]-ke[3]/qe]}const I=n.left*v,U=n.right*v;let X,ee,ue,ce;s==="width"||s==="both"?(ce=m[0]+I-h[3],ee=m[0]+U+h[1]):(ce=m[0]+(I+U-_.displaySize[0])/2,ee=ce+_.displaySize[0]);const de=n.top*v,Le=n.bottom*v;return s==="height"||s==="both"?(X=m[1]+de-h[0],ue=m[1]+Le+h[2]):(X=m[1]+(de+Le-_.displaySize[1])/2,ue=X+_.displaySize[1]),{image:_,top:X,right:ee,bottom:ue,left:ce,collisionPadding:T}}const rf=255,Gs=128,fl=rf*Gs;function qx(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new rr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let _=v;for(;_<h.length&&h[_]<o+1;)_++;_=Math.min(h.length-1,_);const T=h[v],I=h[_];return s.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:I,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:I,minSize:s.evaluate(new rr(T)),maxSize:s.evaluate(new rr(I)),interpolationType:m}}}function ay(o,n,s){let h="never";const m=o.get(n);return m?h=m:o.get(s)&&(h="always"),h}const hP=cl.VectorTileFeature.types,fP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yd(o,n,s,h,m,v,_,T,I,U,X,ee,ue){const ce=T?Math.min(fl,Math.round(T[0])):0,de=T?Math.min(fl,Math.round(T[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*m),v,_,(ce<<1)+(I?1:0),de,16*U,16*X,256*ee,256*ue)}function ly(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function dP(o){for(const n of o.sections)if(kd(n.text))return!0;return!1}class uy{constructor(n){this.layoutVertexArray=new nt,this.indexArray=new _t,this.programConfigurations=n,this.segments=new kt,this.dynamicLayoutVertexArray=new lt,this.opacityVertexArray=new vt,this.hasVisibleVertices=!1,this.placedSymbolArray=new A}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,GI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,ZI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,fP,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ct("SymbolBuffers",uy);class cy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new kt,this.collisionVertexArray=new Tt}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,WI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ct("CollisionBuffers",cy);class Ec{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ug([]),this.placementViewportMatrix=Ug([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=qx(this.zoom,s["text-size"]),this.iconSizeData=qx(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=ay(h,"text-overlap","text-allow-overlap")!=="never"||ay(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>a.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new uy(new fs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new uy(new fs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new N,this.lineVertexArray=new Y,this.symbolInstances=new M}calculateGlyphDependencies(n,s,h,m,v){for(let _=0;_<n.length;_++)if(s[n.charCodeAt(_)]=!0,(h||m)&&v){const T=ef[n.charAt(_)];T&&(s[T.charCodeAt(0)]=!0)}}populate(n,s,h){const m=this.layers[0],v=m.layout,_=v.get("text-font"),T=v.get("text-field"),I=v.get("icon-image"),U=(T.value.kind!=="constant"||T.value.value instanceof ur&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),X=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,ee=v.get("symbol-sort-key");if(this.features=[],!U&&!X)return;const ue=s.iconDependencies,ce=s.glyphDependencies,de=s.availableImages,Le=new rr(this.zoom);for(const{feature:ke,id:qe,index:et,sourceLayerIndex:Ze}of n){const rt=m._featureFilter.needGeometry,st=gu(ke,rt);if(!m._featureFilter.filter(Le,st,h))continue;let ht,Nt;if(rt||(st.geometry=ds(ke)),U){const Ft=m.getValueAndResolveTokens("text-field",st,h,de),zt=ur.factory(Ft);dP(zt)&&(this.hasRTLText=!0),(!this.hasRTLText||Rh()==="unavailable"||this.hasRTLText&&ho.isParsed())&&(ht=XI(zt,m,st))}if(X){const Ft=m.getValueAndResolveTokens("icon-image",st,h,de);Nt=Ft instanceof mn?Ft:mn.fromString(Ft)}if(!ht&&!Nt)continue;const Vt=this.sortFeaturesByKey?ee.evaluate(st,{},h):void 0;if(this.features.push({id:qe,text:ht,icon:Nt,index:et,sourceLayerIndex:Ze,geometry:st.geometry,properties:ke.properties,type:hP[ke.type],sortKey:Vt}),Nt&&(ue[Nt.name]=!0),ht){const Ft=_.evaluate(st,{},h).join(","),zt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const Pt of ht.sections)if(Pt.image)ue[Pt.image.name]=!0;else{const jt=ga(ht.toString()),Ot=Pt.fontStack||Ft,bt=ce[Ot]=ce[Ot]||{};this.calculateGlyphDependencies(Pt.text,bt,zt,this.allowVerticalPlacement,jt)}}}v.get("symbol-placement")==="line"&&(this.features=function(ke){const qe={},et={},Ze=[];let rt=0;function st(Ft){Ze.push(ke[Ft]),rt++}function ht(Ft,zt,Pt){const jt=et[Ft];return delete et[Ft],et[zt]=jt,Ze[jt].geometry[0].pop(),Ze[jt].geometry[0]=Ze[jt].geometry[0].concat(Pt[0]),jt}function Nt(Ft,zt,Pt){const jt=qe[zt];return delete qe[zt],qe[Ft]=jt,Ze[jt].geometry[0].shift(),Ze[jt].geometry[0]=Pt[0].concat(Ze[jt].geometry[0]),jt}function Vt(Ft,zt,Pt){const jt=Pt?zt[0][zt[0].length-1]:zt[0][0];return`${Ft}:${jt.x}:${jt.y}`}for(let Ft=0;Ft<ke.length;Ft++){const zt=ke[Ft],Pt=zt.geometry,jt=zt.text?zt.text.toString():null;if(!jt){st(Ft);continue}const Ot=Vt(jt,Pt),bt=Vt(jt,Pt,!0);if(Ot in et&&bt in qe&&et[Ot]!==qe[bt]){const nn=Nt(Ot,bt,Pt),Wt=ht(Ot,bt,Ze[nn].geometry);delete qe[Ot],delete et[bt],et[Vt(jt,Ze[Wt].geometry,!0)]=Wt,Ze[nn].geometry=null}else Ot in et?ht(Ot,bt,Pt):bt in qe?Nt(Ot,bt,Pt):(st(Ft),qe[Ot]=rt-1,et[bt]=rt-1)}return Ze.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ke,qe)=>ke.sortKey-qe.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const _={};for(let T=n.segment+1;T<s.length;T++)_[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:m},T<s.length-1&&(m+=s[T+1].dist(s[T]));for(let T=n.segment||0;T>=0;T--)_[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:v},T>0&&(v+=s[T-1].dist(s[T]));for(let T=0;T<s.length;T++){const I=_[T];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,m,v,_,T,I,U,X,ee,ue){const ce=n.indexArray,de=n.layoutVertexArray,Le=n.segments.prepareSegment(4*s.length,de,ce,this.canOverlap?_.sortKey:void 0),ke=this.glyphOffsetArray.length,qe=Le.vertexLength,et=this.allowVerticalPlacement&&T===a.WritingMode.vertical?Math.PI/2:0,Ze=_.text&&_.text.sections;for(let rt=0;rt<s.length;rt++){const{tl:st,tr:ht,bl:Nt,br:Vt,tex:Ft,pixelOffsetTL:zt,pixelOffsetBR:Pt,minFontScaleX:jt,minFontScaleY:Ot,glyphOffset:bt,isSDF:nn,sectionIndex:Wt}=s[rt],Tn=Le.vertexLength,er=bt[1];Yd(de,I.x,I.y,st.x,er+st.y,Ft.x,Ft.y,h,nn,zt.x,zt.y,jt,Ot),Yd(de,I.x,I.y,ht.x,er+ht.y,Ft.x+Ft.w,Ft.y,h,nn,Pt.x,zt.y,jt,Ot),Yd(de,I.x,I.y,Nt.x,er+Nt.y,Ft.x,Ft.y+Ft.h,h,nn,zt.x,Pt.y,jt,Ot),Yd(de,I.x,I.y,Vt.x,er+Vt.y,Ft.x+Ft.w,Ft.y+Ft.h,h,nn,Pt.x,Pt.y,jt,Ot),ly(n.dynamicLayoutVertexArray,I,et),ce.emplaceBack(Tn,Tn+1,Tn+2),ce.emplaceBack(Tn+1,Tn+2,Tn+3),Le.vertexLength+=4,Le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),rt!==s.length-1&&Wt===s[rt+1].sectionIndex||n.programConfigurations.populatePaintArrays(de.length,_,_.index,{},ue,Ze&&Ze[Wt])}n.placedSymbolArray.emplaceBack(I.x,I.y,ke,this.glyphOffsetArray.length-ke,qe,U,X,I.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],T,0,!1,0,ee)}_addCollisionDebugVertex(n,s,h,m,v,_){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,s,h,m,v,_,T){const I=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),U=I.vertexLength,X=v.layoutVertexArray,ee=v.collisionVertexArray,ue=T.anchorX,ce=T.anchorY;this._addCollisionDebugVertex(X,ee,_,ue,ce,new E(n,s)),this._addCollisionDebugVertex(X,ee,_,ue,ce,new E(h,s)),this._addCollisionDebugVertex(X,ee,_,ue,ce,new E(h,m)),this._addCollisionDebugVertex(X,ee,_,ue,ce,new E(n,m)),I.vertexLength+=4;const de=v.indexArray;de.emplaceBack(U,U+1),de.emplaceBack(U+1,U+2),de.emplaceBack(U+2,U+3),de.emplaceBack(U+3,U),I.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,m){for(let v=n;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,m?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new cy(wt,Lx.members,Dt),this.iconCollisionBox=new cy(wt,Lx.members,Dt);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,m,v,_,T,I,U){const X={};for(let ee=s;ee<h;ee++){const ue=n.get(ee);X.textBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},X.textFeatureIndex=ue.featureIndex;break}for(let ee=m;ee<v;ee++){const ue=n.get(ee);X.verticalTextBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},X.verticalTextFeatureIndex=ue.featureIndex;break}for(let ee=_;ee<T;ee++){const ue=n.get(ee);X.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},X.iconFeatureIndex=ue.featureIndex;break}for(let ee=I;ee<U;ee++){const ue=n.get(ee);X.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},X.verticalIconFeatureIndex=ue.featureIndex;break}return X}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),m=[],v=[],_=[];for(let T=0;T<this.symbolInstances.length;++T){_.push(T);const I=this.symbolInstances.get(T);m.push(0|Math.round(s*I.anchorX+h*I.anchorY)),v.push(I.featureIndex)}return _.sort((T,I)=>m[T]-m[I]||v[I]-v[T]),_}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,v,_)=>{m>=0&&_.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Kx,Yx;Ct("SymbolBucket",Ec,{omit:["layers","collisionBoxArray","features","compareText"]}),Ec.MAX_GLYPHS=65535,Ec.addDynamicAttributes=ly;var hy={get paint(){return Yx=Yx||new zi({"icon-opacity":new on(Ye.paint_symbol["icon-opacity"]),"icon-color":new on(Ye.paint_symbol["icon-color"]),"icon-halo-color":new on(Ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new on(Ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new on(Ye.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(Ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(Ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new on(Ye.paint_symbol["text-opacity"]),"text-color":new on(Ye.paint_symbol["text-color"],{runtimeType:Gt,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new on(Ye.paint_symbol["text-halo-color"]),"text-halo-width":new on(Ye.paint_symbol["text-halo-width"]),"text-halo-blur":new on(Ye.paint_symbol["text-halo-blur"]),"text-translate":new qt(Ye.paint_symbol["text-translate"]),"text-translate-anchor":new qt(Ye.paint_symbol["text-translate-anchor"])})},get layout(){return Kx=Kx||new zi({"symbol-placement":new qt(Ye.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(Ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(Ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new on(Ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(Ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(Ye.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(Ye.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(Ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(Ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(Ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new on(Ye.layout_symbol["icon-size"]),"icon-text-fit":new qt(Ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(Ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new on(Ye.layout_symbol["icon-image"]),"icon-rotate":new on(Ye.layout_symbol["icon-rotate"]),"icon-padding":new on(Ye.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(Ye.layout_symbol["icon-keep-upright"]),"icon-offset":new on(Ye.layout_symbol["icon-offset"]),"icon-anchor":new on(Ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(Ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(Ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(Ye.layout_symbol["text-rotation-alignment"]),"text-field":new on(Ye.layout_symbol["text-field"]),"text-font":new on(Ye.layout_symbol["text-font"]),"text-size":new on(Ye.layout_symbol["text-size"]),"text-max-width":new on(Ye.layout_symbol["text-max-width"]),"text-line-height":new qt(Ye.layout_symbol["text-line-height"]),"text-letter-spacing":new on(Ye.layout_symbol["text-letter-spacing"]),"text-justify":new on(Ye.layout_symbol["text-justify"]),"text-radial-offset":new on(Ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(Ye.layout_symbol["text-variable-anchor"]),"text-anchor":new on(Ye.layout_symbol["text-anchor"]),"text-max-angle":new qt(Ye.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(Ye.layout_symbol["text-writing-mode"]),"text-rotate":new on(Ye.layout_symbol["text-rotate"]),"text-padding":new qt(Ye.layout_symbol["text-padding"]),"text-keep-upright":new qt(Ye.layout_symbol["text-keep-upright"]),"text-transform":new on(Ye.layout_symbol["text-transform"]),"text-offset":new on(Ye.layout_symbol["text-offset"]),"text-allow-overlap":new qt(Ye.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(Ye.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(Ye.layout_symbol["text-ignore-placement"]),"text-optional":new qt(Ye.layout_symbol["text-optional"])})}};class Jx{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Ee,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ct("FormatSectionOverride",Jx,{omit:["defaultValue"]});class Jd extends Go{constructor(n){super(n,hy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const v of h)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,m){const v=this.layout.get(n).evaluate(s,{},h,m),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Fs(_.value)||!v?v:function(T,I){return I.replace(/{([^{}]+)}/g,(U,X)=>X in T?String(T[X]):"")}(s.properties,v)}createBucket(n){return new Ec(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of hy.paint.overridableProperties){if(!Jd.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Jx(s),m=new ru(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new js("source",m):new Sn("composite",m,s.value.zoomStops),this.paint._values[n]=new Vo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Jd.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),m=hy.paint.properties[s];let v=!1;const _=T=>{for(const I of T)if(m.overrides&&m.overrides.hasOverride(I))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ur)_(h.value.value.sections);else if(h.value.kind==="source"){const T=U=>{v||(U instanceof Do&&gr(U.value)===_n?_(U.value.sections):U instanceof el?_(U.sections):U.eachChild(T))},I=h.value;I._styleExpression&&T(I._styleExpression.expression)}return v}}let Qx;var pP={get paint(){return Qx=Qx||new zi({"background-color":new qt(Ye.paint_background["background-color"]),"background-pattern":new Dh(Ye.paint_background["background-pattern"]),"background-opacity":new qt(Ye.paint_background["background-opacity"])})}};let ew;var mP={get paint(){return ew=ew||new zi({"raster-opacity":new qt(Ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(Ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(Ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(Ye.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(Ye.paint_raster["raster-saturation"]),"raster-contrast":new qt(Ye.paint_raster["raster-contrast"]),"raster-resampling":new qt(Ye.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(Ye.paint_raster["raster-fade-duration"])})}};class gP extends Go{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const yP={circle:class extends Go{constructor(o){super(o,iI)}createBucket(o){return new Dg(o)}queryRadius(o){const n=o;return Zh("circle-radius",this,n)+Zh("circle-stroke-width",this,n)+Nd(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,s,h,m,v,_,T){const I=Ud(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,_),U=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s),X=this.paint.get("circle-pitch-alignment")==="map",ee=X?I:function(ce,de){return ce.map(Le=>ux(Le,de))}(I,T),ue=X?U*_:U;for(const ce of h)for(const de of ce){const Le=X?de:ux(de,T);let ke=ue;const qe=$d([],[de.x,de.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ke*=qe[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ke*=v.cameraToCenterDistance/qe[3]),eI(ee,Le,ke))return!0}return!1}},heatmap:class extends Go{createBucket(o){return new cx(o)}constructor(o){super(o,sI),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=dx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Go{constructor(o){super(o,aI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Go{constructor(o){super(o,bI)}recalculate(o,n){super.recalculate(o,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Yg(o)}queryRadius(){return Nd(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,s,h,m,v,_){return rx(Ud(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,_),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Go{constructor(o){super(o,FI)}createBucket(o){return new Qg(o)}queryRadius(){return Nd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,s,h,m,v,_,T){const I=Ud(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,_),U=this.paint.get("fill-extrusion-height").evaluate(n,s),X=this.paint.get("fill-extrusion-base").evaluate(n,s),ee=function(ce,de,Le,ke){const qe=[];for(const et of ce){const Ze=[et.x,et.y,0,1];$d(Ze,Ze,de),qe.push(new E(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return qe}(I,T),ue=function(ce,de,Le,ke){const qe=[],et=[],Ze=ke[8]*de,rt=ke[9]*de,st=ke[10]*de,ht=ke[11]*de,Nt=ke[8]*Le,Vt=ke[9]*Le,Ft=ke[10]*Le,zt=ke[11]*Le;for(const Pt of ce){const jt=[],Ot=[];for(const bt of Pt){const nn=bt.x,Wt=bt.y,Tn=ke[0]*nn+ke[4]*Wt+ke[12],er=ke[1]*nn+ke[5]*Wt+ke[13],ir=ke[2]*nn+ke[6]*Wt+ke[14],$r=ke[3]*nn+ke[7]*Wt+ke[15],Co=ir+st,oi=$r+ht,zr=Tn+Nt,Kr=er+Vt,si=ir+Ft,vi=$r+zt,Wi=new E((Tn+Ze)/oi,(er+rt)/oi);Wi.z=Co/oi,jt.push(Wi);const Lr=new E(zr/vi,Kr/vi);Lr.z=si/vi,Ot.push(Lr)}qe.push(jt),et.push(Ot)}return[qe,et]}(h,X,U,T);return function(ce,de,Le){let ke=1/0;rx(Le,de)&&(ke=Ax(Le,de[0]));for(let qe=0;qe<de.length;qe++){const et=de[qe],Ze=ce[qe];for(let rt=0;rt<et.length-1;rt++){const st=et[rt],ht=[st,et[rt+1],Ze[rt+1],Ze[rt],st];nx(Le,ht)&&(ke=Math.min(ke,Ax(Le,ht)))}}return ke!==1/0&&ke}(ue[0],ue[1],ee)}},line:class extends Go{constructor(o){super(o,kx),this.gradientVersion=0,Hd||(Hd=new VI(kx.paint.properties["line-width"].specification),Hd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ks,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=Hd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new ey(o)}queryRadius(o){const n=o,s=zx(Zh("line-width",this,n),Zh("line-gap-width",this,n)),h=Zh("line-offset",this,n);return s/2+Math.abs(h)+Nd(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,s,h,m,v,_){const T=Ud(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,_),I=_/2*zx(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),U=this.paint.get("line-offset").evaluate(n,s);return U&&(h=function(X,ee){const ue=[];for(let ce=0;ce<X.length;ce++){const de=X[ce],Le=[];for(let ke=0;ke<de.length;ke++){const qe=de[ke-1],et=de[ke],Ze=de[ke+1],rt=ke===0?new E(0,0):et.sub(qe)._unit()._perp(),st=ke===de.length-1?new E(0,0):Ze.sub(et)._unit()._perp(),ht=rt._add(st)._unit(),Nt=ht.x*st.x+ht.y*st.y;Nt!==0&&ht._mult(1/Nt),Le.push(ht._mult(ee)._add(et))}ue.push(Le)}return ue}(h,U*_)),function(X,ee,ue){for(let ce=0;ce<ee.length;ce++){const de=ee[ce];if(X.length>=3){for(let Le=0;Le<de.length;Le++)if(gc(X,de[Le]))return!0}if(tI(X,de,ue))return!0}return!1}(T,h,I)}isTileClipped(){return!0}},symbol:Jd,background:class extends Go{constructor(o){super(o,pP)}},raster:class extends Go{constructor(o){super(o,mP)}}};class vP{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const fy=63710088e-1;class dl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new dl($(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,m=n.lat*s,v=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*s);return fy*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof dl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new dl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new dl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const tw=2*Math.PI*fy;function nw(o){return tw*Math.cos(o*Math.PI/180)}function rw(o){return(180+o)/360}function iw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function ow(o,n){return o/nw(n)}function dy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Qd{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=dl.convert(n);return new Qd(rw(h.lng),iw(h.lat),ow(s,h.lat))}toLngLat(){return new dl(360*this.x-180,dy(this.y))}toAltitude(){return this.z*nw(dy(this.y))}meterInMercatorCoordinateUnits(){return 1/tw*(n=dy(this.y),1/Math.cos(n*Math.PI/180));var n}}function sw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class py{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=of(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const m=(_=this.y,T=this.z,I=sw(256*(v=this.x),256*(_=Math.pow(2,T)-_-1),T),U=sw(256*(v+1),256*(_+1),T),I[0]+","+I[1]+","+U[0]+","+U[1]);var v,_,T,I,U;const X=function(ee,ue,ce){let de,Le="";for(let ke=ee;ke>0;ke--)de=1<<ke-1,Le+=(ue&de?1:0)+(ce&de?2:0);return Le}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,X).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new E((n.x*s-this.x)*Qn,(n.y*s-this.y)*Qn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class aw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=of(n,s.z,s.z,s.x,s.y)}}class To{constructor(n,s,h,m,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new py(h,+m,+v),this.key=of(s,n,h,m,v)}clone(){return new To(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new To(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new To(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?of(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):of(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new To(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new To(s,this.wrap,s,h,m),new To(s,this.wrap,s,h+1,m),new To(s,this.wrap,s,h,m+1),new To(s,this.wrap,s,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new To(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new To(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new aw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Qd(n.x-this.wrap,n.y))}}function of(o,n,s,h,m){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*m+h).toString(36)+s.toString(36)+n.toString(36)}Ct("CanonicalTileID",py),Ct("OverscaledTileID",To,{omit:["posMatrix"]});class lw{constructor(n,s,h){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void J(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const m=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(let v=0;v<m;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(m,v)]=this.data[this._idx(m-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,m)]=this.data[this._idx(v,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let v=0;v<m;v++)for(let _=0;_<m;_++){const T=this.get(v,_);T>this.max&&(this.max=T),T<this.min&&(this.min=T)}}get(n,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[m],h[m+1],h[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}_unpackMapbox(n,s,h){return(256*n*256+256*s+h)/10-1e4}_unpackTerrarium(n,s,h){return 256*n+s+h/256-32768}getPixels(){return new So({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,v=s*this.dim+this.dim,_=h*this.dim,T=h*this.dim+this.dim;switch(s){case-1:m=v-1;break;case 1:v=m+1}switch(h){case-1:_=T-1;break;case 1:T=_+1}const I=-s*this.dim,U=-h*this.dim;for(let X=_;X<T;X++)for(let ee=m;ee<v;ee++)this.data[this._idx(ee,X)]=n.data[this._idx(ee+I,X+U)]}}Ct("DEMData",lw);class uw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class cw{constructor(n,s,h,m,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class hw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new zn(Qn,16,0),this.grid3D=new zn(Qn,16,0),this.featureIndexArray=new fe,this.promoteId=s}insert(n,s,h,m,v,_){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,v);const I=_?this.grid3D:this.grid;for(let U=0;U<s.length;U++){const X=s[U],ee=[1/0,1/0,-1/0,-1/0];for(let ue=0;ue<X.length;ue++){const ce=X[ue];ee[0]=Math.min(ee[0],ce.x),ee[1]=Math.min(ee[1],ce.y),ee[2]=Math.max(ee[2],ce.x),ee[3]=Math.max(ee[3],ce.y)}ee[0]<Qn&&ee[1]<Qn&&ee[2]>=0&&ee[3]>=0&&I.insert(T,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cl.VectorTile(new ny(this.rawTileData)).layers,this.sourceLayerCoder=new uw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,m){this.loadVTLayers();const v=n.params||{},_=Qn/n.tileSize/n.scale,T=iu(v.filter),I=n.queryGeometry,U=n.queryPadding*_,X=dw(I),ee=this.grid.query(X.minX-U,X.minY-U,X.maxX+U,X.maxY+U),ue=dw(n.cameraQueryGeometry),ce=this.grid3D.query(ue.minX-U,ue.minY-U,ue.maxX+U,ue.maxY+U,(ke,qe,et,Ze)=>function(rt,st,ht,Nt,Vt){for(const zt of rt)if(st<=zt.x&&ht<=zt.y&&Nt>=zt.x&&Vt>=zt.y)return!0;const Ft=[new E(st,ht),new E(st,Vt),new E(Nt,Vt),new E(Nt,ht)];if(rt.length>2){for(const zt of Ft)if(gc(rt,zt))return!0}for(let zt=0;zt<rt.length-1;zt++)if(rI(rt[zt],rt[zt+1],Ft))return!0;return!1}(n.cameraQueryGeometry,ke-U,qe-U,et+U,Ze+U));for(const ke of ce)ee.push(ke);ee.sort(_P);const de={};let Le;for(let ke=0;ke<ee.length;ke++){const qe=ee[ke];if(qe===Le)continue;Le=qe;const et=this.featureIndexArray.get(qe);let Ze=null;this.loadMatchingFeature(de,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,T,v.layers,v.availableImages,s,h,m,(rt,st,ht)=>(Ze||(Ze=ds(rt)),st.queryIntersectsFeature(I,rt,ht,Ze,this.z,n.transform,_,n.pixelPosMatrix)))}return de}loadMatchingFeature(n,s,h,m,v,_,T,I,U,X,ee){const ue=this.bucketLayerIDs[s];if(_&&!function(ke,qe){for(let et=0;et<ke.length;et++)if(qe.indexOf(ke[et])>=0)return!0;return!1}(_,ue))return;const ce=this.sourceLayerCoder.decode(h),de=this.vtLayers[ce].feature(m);if(v.needGeometry){const ke=gu(de,!0);if(!v.filter(new rr(this.tileID.overscaledZ),ke,this.tileID.canonical))return}else if(!v.filter(new rr(this.tileID.overscaledZ),de))return;const Le=this.getId(de,ce);for(let ke=0;ke<ue.length;ke++){const qe=ue[ke];if(_&&_.indexOf(qe)<0)continue;const et=I[qe];if(!et)continue;let Ze={};Le&&X&&(Ze=X.getState(et.sourceLayer||"_geojsonTileLayer",Le));const rt=B({},U[qe]);rt.paint=fw(rt.paint,et.paint,de,Ze,T),rt.layout=fw(rt.layout,et.layout,de,Ze,T);const st=!ee||ee(de,et,Ze);if(!st)continue;const ht=new cw(de,this.z,this.x,this.y,Le);ht.layer=rt;let Nt=n[qe];Nt===void 0&&(Nt=n[qe]=[]),Nt.push({featureIndex:m,feature:ht,intersectionZ:st})}}lookupSymbolFeatures(n,s,h,m,v,_,T,I){const U={};this.loadVTLayers();const X=iu(v);for(const ee of n)this.loadMatchingFeature(U,h,m,ee,X,_,T,I,s);return U}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function fw(o,n,s,h,m){return D(o,(v,_)=>{const T=n instanceof sc?n.get(_):null;return T&&T.evaluate?T.evaluate(s,h,m):T})}function dw(o){let n=1/0,s=1/0,h=-1/0,m=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),m=Math.max(m,v.y);return{minX:n,minY:s,maxX:h,maxY:m}}function _P(o,n){return n-o}function pw(o,n,s,h,m){const v=[];for(let _=0;_<o.length;_++){const T=o[_];let I;for(let U=0;U<T.length-1;U++){let X=T[U],ee=T[U+1];X.x<n&&ee.x<n||(X.x<n?X=new E(n,X.y+(n-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x<n&&(ee=new E(n,X.y+(n-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y<s&&ee.y<s||(X.y<s?X=new E(X.x+(s-X.y)/(ee.y-X.y)*(ee.x-X.x),s)._round():ee.y<s&&(ee=new E(X.x+(s-X.y)/(ee.y-X.y)*(ee.x-X.x),s)._round()),X.x>=h&&ee.x>=h||(X.x>=h?X=new E(h,X.y+(h-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x>=h&&(ee=new E(h,X.y+(h-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y>=m&&ee.y>=m||(X.y>=m?X=new E(X.x+(m-X.y)/(ee.y-X.y)*(ee.x-X.x),m)._round():ee.y>=m&&(ee=new E(X.x+(m-X.y)/(ee.y-X.y)*(ee.x-X.x),m)._round()),I&&X.equals(I[I.length-1])||(I=[X],v.push(I)),I.push(ee)))))}}return v}Ct("FeatureIndex",hw,{omit:["rawTileData","sourceLayerCoder"]});class pl extends E{constructor(n,s,h,m){super(n,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new pl(this.x,this.y,this.angle,this.segment)}}function mw(o,n,s,h,m){if(n.segment===void 0)return!0;let v=n,_=n.segment+1,T=0;for(;T>-s/2;){if(_--,_<0)return!1;T-=o[_].dist(v),v=o[_]}T+=o[_].dist(o[_+1]),_++;const I=[];let U=0;for(;T<s/2;){const X=o[_],ee=o[_+1];if(!ee)return!1;let ue=o[_-1].angleTo(X)-X.angleTo(ee);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:T,angleDelta:ue}),U+=ue;T-I[0].distance>h;)U-=I.shift().angleDelta;if(U>m)return!1;_++,T+=X.dist(ee)}return!0}function gw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function yw(o,n,s){return o?.6*n*s:0}function vw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function xP(o,n,s,h,m,v){const _=yw(s,m,v),T=vw(s,h)*v;let I=0;const U=gw(o)/2;for(let X=0;X<o.length-1;X++){const ee=o[X],ue=o[X+1],ce=ee.dist(ue);if(I+ce>U){const de=(U-I)/ce,Le=Jr.number(ee.x,ue.x,de),ke=Jr.number(ee.y,ue.y,de),qe=new pl(Le,ke,ue.angleTo(ee),X);return qe._round(),!_||mw(o,qe,T,_,n)?qe:void 0}I+=ce}}function wP(o,n,s,h,m,v,_,T,I){const U=yw(h,v,_),X=vw(h,m),ee=X*_,ue=o[0].x===0||o[0].x===I||o[0].y===0||o[0].y===I;return n-ee<n/4&&(n=ee+n/4),_w(o,ue?n/2*T%n:(X/2+2*v)*_*T%n,n,U,s,ee,ue,!1,I)}function _w(o,n,s,h,m,v,_,T,I){const U=v/2,X=gw(o);let ee=0,ue=n-s,ce=[];for(let de=0;de<o.length-1;de++){const Le=o[de],ke=o[de+1],qe=Le.dist(ke),et=ke.angleTo(Le);for(;ue+s<ee+qe;){ue+=s;const Ze=(ue-ee)/qe,rt=Jr.number(Le.x,ke.x,Ze),st=Jr.number(Le.y,ke.y,Ze);if(rt>=0&&rt<I&&st>=0&&st<I&&ue-U>=0&&ue+U<=X){const ht=new pl(rt,st,et,de);ht._round(),h&&!mw(o,ht,v,h,m)||ce.push(ht)}}ee+=qe}return T||ce.length||_||(ce=_w(o,ee/2,s,h,m,v,_,!0,I)),ce}Ct("Anchor",pl);const Sc=Zi;function xw(o,n,s,h){const m=[],v=o.image,_=v.pixelRatio,T=v.paddedRect.w-2*Sc,I=v.paddedRect.h-2*Sc,U=o.right-o.left,X=o.bottom-o.top,ee=v.stretchX||[[0,T]],ue=v.stretchY||[[0,I]],ce=(Pt,jt)=>Pt+jt[1]-jt[0],de=ee.reduce(ce,0),Le=ue.reduce(ce,0),ke=T-de,qe=I-Le;let et=0,Ze=de,rt=0,st=Le,ht=0,Nt=ke,Vt=0,Ft=qe;if(v.content&&h){const Pt=v.content;et=ep(ee,0,Pt[0]),rt=ep(ue,0,Pt[1]),Ze=ep(ee,Pt[0],Pt[2]),st=ep(ue,Pt[1],Pt[3]),ht=Pt[0]-et,Vt=Pt[1]-rt,Nt=Pt[2]-Pt[0]-Ze,Ft=Pt[3]-Pt[1]-st}const zt=(Pt,jt,Ot,bt)=>{const nn=tp(Pt.stretch-et,Ze,U,o.left),Wt=np(Pt.fixed-ht,Nt,Pt.stretch,de),Tn=tp(jt.stretch-rt,st,X,o.top),er=np(jt.fixed-Vt,Ft,jt.stretch,Le),ir=tp(Ot.stretch-et,Ze,U,o.left),$r=np(Ot.fixed-ht,Nt,Ot.stretch,de),Co=tp(bt.stretch-rt,st,X,o.top),oi=np(bt.fixed-Vt,Ft,bt.stretch,Le),zr=new E(nn,Tn),Kr=new E(ir,Tn),si=new E(ir,Co),vi=new E(nn,Co),Wi=new E(Wt/_,er/_),Lr=new E($r/_,oi/_),ai=n*Math.PI/180;if(ai){const Hi=Math.sin(ai),Xi=Math.cos(ai),_r=[Xi,-Hi,Hi,Xi];zr._matMult(_r),Kr._matMult(_r),vi._matMult(_r),si._matMult(_r)}const _i=Pt.stretch+Pt.fixed,Oi=jt.stretch+jt.fixed;return{tl:zr,tr:Kr,bl:vi,br:si,tex:{x:v.paddedRect.x+Sc+_i,y:v.paddedRect.y+Sc+Oi,w:Ot.stretch+Ot.fixed-_i,h:bt.stretch+bt.fixed-Oi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wi,pixelOffsetBR:Lr,minFontScaleX:Nt/_/U,minFontScaleY:Ft/_/X,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const Pt=ww(ee,ke,de),jt=ww(ue,qe,Le);for(let Ot=0;Ot<Pt.length-1;Ot++){const bt=Pt[Ot],nn=Pt[Ot+1];for(let Wt=0;Wt<jt.length-1;Wt++)m.push(zt(bt,jt[Wt],nn,jt[Wt+1]))}}else m.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:I+1}));return m}function ep(o,n,s){let h=0;for(const m of o)h+=Math.max(n,Math.min(s,m[1]))-Math.max(n,Math.min(s,m[0]));return h}function ww(o,n,s){const h=[{fixed:-Sc,stretch:0}];for(const[m,v]of o){const _=h[h.length-1];h.push({fixed:m-_.stretch,stretch:_.stretch}),h.push({fixed:m-_.stretch,stretch:_.stretch+(v-m)})}return h.push({fixed:n+Sc,stretch:s}),h}function tp(o,n,s,h){return o/n*s+h}function np(o,n,s,h){return o-n*s/h}class rp{constructor(n,s,h,m,v,_,T,I,U,X){if(this.boxStartIndex=n.length,U){let ee=_.top,ue=_.bottom;const ce=_.collisionPadding;ce&&(ee-=ce[1],ue+=ce[3]);let de=ue-ee;de>0&&(de=Math.max(10,de),this.circleDiameter=de)}else{let ee=_.top*T-I[0],ue=_.bottom*T+I[2],ce=_.left*T-I[3],de=_.right*T+I[1];const Le=_.collisionPadding;if(Le&&(ce-=Le[0]*T,ee-=Le[1]*T,de+=Le[2]*T,ue+=Le[3]*T),X){const ke=new E(ce,ee),qe=new E(de,ee),et=new E(ce,ue),Ze=new E(de,ue),rt=X*Math.PI/180;ke._rotate(rt),qe._rotate(rt),et._rotate(rt),Ze._rotate(rt),ce=Math.min(ke.x,qe.x,et.x,Ze.x),de=Math.max(ke.x,qe.x,et.x,Ze.x),ee=Math.min(ke.y,qe.y,et.y,Ze.y),ue=Math.max(ke.y,qe.y,et.y,Ze.y)}n.emplaceBack(s.x,s.y,ce,ee,de,ue,h,m,v)}this.boxEndIndex=n.length}}class bP{constructor(n=[],s=EP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,m=s[n];for(;n>0;){const v=n-1>>1,_=s[v];if(h(m,_)>=0)break;s[n]=_,n=v}s[n]=m}_down(n){const{data:s,compare:h}=this,m=this.length>>1,v=s[n];for(;n<m;){let _=1+(n<<1),T=s[_];const I=_+1;if(I<this.length&&h(s[I],T)<0&&(_=I,T=s[I]),h(T,v)>=0)break;s[n]=T,n=_}s[n]=v}}function EP(o,n){return o<n?-1:o>n?1:0}function SP(o,n=1,s=!1){let h=1/0,m=1/0,v=-1/0,_=-1/0;const T=o[0];for(let ce=0;ce<T.length;ce++){const de=T[ce];(!ce||de.x<h)&&(h=de.x),(!ce||de.y<m)&&(m=de.y),(!ce||de.x>v)&&(v=de.x),(!ce||de.y>_)&&(_=de.y)}const I=Math.min(v-h,_-m);let U=I/2;const X=new bP([],TP);if(I===0)return new E(h,m);for(let ce=h;ce<v;ce+=I)for(let de=m;de<_;de+=I)X.push(new Tc(ce+U,de+U,U,o));let ee=function(ce){let de=0,Le=0,ke=0;const qe=ce[0];for(let et=0,Ze=qe.length,rt=Ze-1;et<Ze;rt=et++){const st=qe[et],ht=qe[rt],Nt=st.x*ht.y-ht.x*st.y;Le+=(st.x+ht.x)*Nt,ke+=(st.y+ht.y)*Nt,de+=3*Nt}return new Tc(Le/de,ke/de,0,ce)}(o),ue=X.length;for(;X.length;){const ce=X.pop();(ce.d>ee.d||!ee.d)&&(ee=ce,s&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,ue)),ce.max-ee.d<=n||(U=ce.h/2,X.push(new Tc(ce.p.x-U,ce.p.y-U,U,o)),X.push(new Tc(ce.p.x+U,ce.p.y-U,U,o)),X.push(new Tc(ce.p.x-U,ce.p.y+U,U,o)),X.push(new Tc(ce.p.x+U,ce.p.y+U,U,o)),ue+=4)}return s&&(console.log(`num probes: ${ue}`),console.log(`best distance: ${ee.d}`)),ee.p}function TP(o,n){return n.max-o.max}function Tc(o,n,s,h){this.p=new E(o,n),this.h=s,this.d=function(m,v){let _=!1,T=1/0;for(let I=0;I<v.length;I++){const U=v[I];for(let X=0,ee=U.length,ue=ee-1;X<ee;ue=X++){const ce=U[X],de=U[ue];ce.y>m.y!=de.y>m.y&&m.x<(de.x-ce.x)*(m.y-ce.y)/(de.y-ce.y)+ce.x&&(_=!_),T=Math.min(T,ix(m,ce,de))}}return(_?1:-1)*Math.sqrt(T)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const my=Number.POSITIVE_INFINITY;function bw(o,n){return n[1]!==my?function(s,h,m){let v=0,_=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":_=m-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-m}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,_]}(o,n[0],n[1]):function(s,h){let m=0,v=0;h<0&&(h=0);const _=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":v=_-7;break;case"bottom-right":case"bottom-left":v=7-_;break;case"bottom":v=7-h;break;case"top":v=h-7}switch(s){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=h;break;case"right":m=-h}return[m,v]}(o,n[0])}function gy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function CP(o,n,s,h,m,v,_,T,I,U,X){let ee=v.textMaxSize.evaluate(n,{});ee===void 0&&(ee=_);const ue=o.layers[0].layout,ce=ue.get("icon-offset").evaluate(n,{},X),de=Sw(s.horizontal),Le=_/24,ke=o.tilePixelRatio*Le,qe=o.tilePixelRatio*ee/24,et=o.tilePixelRatio*T,Ze=o.tilePixelRatio*ue.get("symbol-spacing"),rt=ue.get("text-padding")*o.tilePixelRatio,st=function(bt,nn,Wt,Tn=1){const er=bt.get("icon-padding").evaluate(nn,{},Wt),ir=er&&er.values;return[ir[0]*Tn,ir[1]*Tn,ir[2]*Tn,ir[3]*Tn]}(ue,n,X,o.tilePixelRatio),ht=ue.get("text-max-angle")/180*Math.PI,Nt=ue.get("text-rotation-alignment")!=="viewport"&&ue.get("symbol-placement")!=="point",Vt=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",Ft=ue.get("symbol-placement"),zt=Ze/2,Pt=ue.get("icon-text-fit");let jt;h&&Pt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(jt=Xx(h,s.vertical,Pt,ue.get("icon-text-fit-padding"),ce,Le)),de&&(h=Xx(h,de,Pt,ue.get("icon-text-fit-padding"),ce,Le)));const Ot=(bt,nn)=>{nn.x<0||nn.x>=Qn||nn.y<0||nn.y>=Qn||function(Wt,Tn,er,ir,$r,Co,oi,zr,Kr,si,vi,Wi,Lr,ai,_i,Oi,Hi,Xi,_r,li,Cn,fo,ui,xi,Ho){const ps=Wt.addToLineVertexArray(Tn,er);let ms,ba,Xo,Ao,qi=0,Ea=0,lf=0,Iw=0,Sy=-1,Ty=-1;const Sa={};let Pw=Sr(""),Cy=0,Ay=0;if(zr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Cy,Ay]=zr.layout.get("text-offset").evaluate(Cn,{},xi).map(Ki=>Ki*qr):(Cy=zr.layout.get("text-radial-offset").evaluate(Cn,{},xi)*qr,Ay=my),Wt.allowVerticalPlacement&&ir.vertical){const Ki=zr.layout.get("text-rotate").evaluate(Cn,{},xi)+90;Xo=new rp(Kr,Tn,si,vi,Wi,ir.vertical,Lr,ai,_i,Ki),oi&&(Ao=new rp(Kr,Tn,si,vi,Wi,oi,Hi,Xi,_i,Ki))}if($r){const Ki=zr.layout.get("icon-rotate").evaluate(Cn,{}),Zs=zr.layout.get("icon-text-fit")!=="none",uf=xw($r,Ki,ui,Zs),cf=oi?xw(oi,Ki,ui,Zs):void 0;ba=new rp(Kr,Tn,si,vi,Wi,$r,Hi,Xi,!1,Ki),qi=4*uf.length;const zw=Wt.iconSizeData;let vu=null;zw.kind==="source"?(vu=[Gs*zr.layout.get("icon-size").evaluate(Cn,{})],vu[0]>fl&&J(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${rf}. Reduce your "icon-size".`)):zw.kind==="composite"&&(vu=[Gs*fo.compositeIconSizes[0].evaluate(Cn,{},xi),Gs*fo.compositeIconSizes[1].evaluate(Cn,{},xi)],(vu[0]>fl||vu[1]>fl)&&J(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${rf}. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,uf,vu,li,_r,Cn,a.WritingMode.none,Tn,ps.lineStartIndex,ps.lineLength,-1,xi),Sy=Wt.icon.placedSymbolArray.length-1,cf&&(Ea=4*cf.length,Wt.addSymbols(Wt.icon,cf,vu,li,_r,Cn,a.WritingMode.vertical,Tn,ps.lineStartIndex,ps.lineLength,-1,xi),Ty=Wt.icon.placedSymbolArray.length-1)}const Mw=Object.keys(ir.horizontal);for(const Ki of Mw){const Zs=ir.horizontal[Ki];if(!ms){Pw=Sr(Zs.text);const cf=zr.layout.get("text-rotate").evaluate(Cn,{},xi);ms=new rp(Kr,Tn,si,vi,Wi,Zs,Lr,ai,_i,cf)}const uf=Zs.positionedLines.length===1;if(lf+=Ew(Wt,Tn,Zs,Co,zr,_i,Cn,Oi,ps,ir.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,uf?Mw:[Ki],Sa,Sy,fo,xi),uf)break}ir.vertical&&(Iw+=Ew(Wt,Tn,ir.vertical,Co,zr,_i,Cn,Oi,ps,a.WritingMode.vertical,["vertical"],Sa,Ty,fo,xi));const PP=ms?ms.boxStartIndex:Wt.collisionBoxArray.length,MP=ms?ms.boxEndIndex:Wt.collisionBoxArray.length,kP=Xo?Xo.boxStartIndex:Wt.collisionBoxArray.length,zP=Xo?Xo.boxEndIndex:Wt.collisionBoxArray.length,LP=ba?ba.boxStartIndex:Wt.collisionBoxArray.length,OP=ba?ba.boxEndIndex:Wt.collisionBoxArray.length,RP=Ao?Ao.boxStartIndex:Wt.collisionBoxArray.length,FP=Ao?Ao.boxEndIndex:Wt.collisionBoxArray.length;let gs=-1;const op=(Ki,Zs)=>Ki&&Ki.circleDiameter?Math.max(Ki.circleDiameter,Zs):Zs;gs=op(ms,gs),gs=op(Xo,gs),gs=op(ba,gs),gs=op(Ao,gs);const kw=gs>-1?1:0;kw&&(gs*=Ho/qr),Wt.glyphOffsetArray.length>=Ec.MAX_GLYPHS&&J("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cn.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,Cn.sortKey),Wt.symbolInstances.emplaceBack(Tn.x,Tn.y,Sa.right>=0?Sa.right:-1,Sa.center>=0?Sa.center:-1,Sa.left>=0?Sa.left:-1,Sa.vertical||-1,Sy,Ty,Pw,PP,MP,kP,zP,LP,OP,RP,FP,si,lf,Iw,qi,Ea,kw,0,Lr,Cy,Ay,gs)}(o,nn,bt,s,h,m,jt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,ke,[rt,rt,rt,rt],Nt,I,et,st,Vt,ce,n,v,U,X,_)};if(Ft==="line")for(const bt of pw(n.geometry,0,0,Qn,Qn)){const nn=wP(bt,Ze,ht,s.vertical||de,h,24,qe,o.overscaling,Qn);for(const Wt of nn)de&&AP(o,de.text,zt,Wt)||Ot(bt,Wt)}else if(Ft==="line-center"){for(const bt of n.geometry)if(bt.length>1){const nn=xP(bt,ht,s.vertical||de,h,24,qe);nn&&Ot(bt,nn)}}else if(n.type==="Polygon")for(const bt of Xg(n.geometry,0)){const nn=SP(bt,16);Ot(bt[0],new pl(nn.x,nn.y,0))}else if(n.type==="LineString")for(const bt of n.geometry)Ot(bt,new pl(bt[0].x,bt[0].y,0));else if(n.type==="Point")for(const bt of n.geometry)for(const nn of bt)Ot([nn],new pl(nn.x,nn.y,0))}function Ew(o,n,s,h,m,v,_,T,I,U,X,ee,ue,ce,de){const Le=function(et,Ze,rt,st,ht,Nt,Vt,Ft){const zt=st.layout.get("text-rotate").evaluate(Nt,{})*Math.PI/180,Pt=[];for(const jt of Ze.positionedLines)for(const Ot of jt.positionedGlyphs){if(!Ot.rect)continue;const bt=Ot.rect||{};let nn=Ux+1,Wt=!0,Tn=1,er=0;const ir=(ht||Ft)&&Ot.vertical,$r=Ot.metrics.advance*Ot.scale/2;if(Ft&&Ze.verticalizable&&(er=jt.lineOffset/2-(Ot.imageName?-(qr-Ot.metrics.width*Ot.scale)/2:(Ot.scale-1)*qr)),Ot.imageName){const _r=Vt[Ot.imageName];Wt=_r.sdf,Tn=_r.pixelRatio,nn=Zi/Tn}const Co=ht?[Ot.x+$r,Ot.y]:[0,0];let oi=ht?[0,0]:[Ot.x+$r+rt[0],Ot.y+rt[1]-er],zr=[0,0];ir&&(zr=oi,oi=[0,0]);const Kr=(Ot.metrics.left-nn)*Ot.scale-$r+oi[0],si=(-Ot.metrics.top-nn)*Ot.scale+oi[1],vi=Kr+bt.w*Ot.scale/Tn,Wi=si+bt.h*Ot.scale/Tn,Lr=new E(Kr,si),ai=new E(vi,si),_i=new E(Kr,Wi),Oi=new E(vi,Wi);if(ir){const _r=new E(-$r,$r-tf),li=-Math.PI/2,Cn=qr/2-$r,fo=new E(5-tf-Cn,-(Ot.imageName?Cn:0)),ui=new E(...zr);Lr._rotateAround(li,_r)._add(fo)._add(ui),ai._rotateAround(li,_r)._add(fo)._add(ui),_i._rotateAround(li,_r)._add(fo)._add(ui),Oi._rotateAround(li,_r)._add(fo)._add(ui)}if(zt){const _r=Math.sin(zt),li=Math.cos(zt),Cn=[li,-_r,_r,li];Lr._matMult(Cn),ai._matMult(Cn),_i._matMult(Cn),Oi._matMult(Cn)}const Hi=new E(0,0),Xi=new E(0,0);Pt.push({tl:Lr,tr:ai,bl:_i,br:Oi,tex:bt,writingMode:Ze.writingMode,glyphOffset:Co,sectionIndex:Ot.sectionIndex,isSDF:Wt,pixelOffsetTL:Hi,pixelOffsetBR:Xi,minFontScaleX:0,minFontScaleY:0})}return Pt}(0,s,T,m,v,_,h,o.allowVerticalPlacement),ke=o.textSizeData;let qe=null;ke.kind==="source"?(qe=[Gs*m.layout.get("text-size").evaluate(_,{})],qe[0]>fl&&J(`${o.layerIds[0]}: Value for "text-size" is >= ${rf}. Reduce your "text-size".`)):ke.kind==="composite"&&(qe=[Gs*ce.compositeTextSizes[0].evaluate(_,{},de),Gs*ce.compositeTextSizes[1].evaluate(_,{},de)],(qe[0]>fl||qe[1]>fl)&&J(`${o.layerIds[0]}: Value for "text-size" is >= ${rf}. Reduce your "text-size".`)),o.addSymbols(o.text,Le,qe,T,v,_,U,n,I.lineStartIndex,I.lineLength,ue,de);for(const et of X)ee[et]=o.text.placedSymbolArray.length-1;return 4*Le.length}function Sw(o){for(const n in o)return o[n];return null}function AP(o,n,s,h){const m=o.compareText;if(n in m){const v=m[n];for(let _=v.length-1;_>=0;_--)if(h.dist(v[_])<s)return!0}else m[n]=[];return m[n].push(h),!1}const Tw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class yy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=Tw[15&h];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(n,2,1),[T]=new Uint32Array(n,4,1);return new yy(T,_,v,n)}constructor(n,s=64,h=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=Tw.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,T=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-T%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+T+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return vy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:T}=this,I=[0,v.length-1,0],U=[];for(;I.length;){const X=I.pop()||0,ee=I.pop()||0,ue=I.pop()||0;if(ee-ue<=T){for(let ke=ue;ke<=ee;ke++){const qe=_[2*ke],et=_[2*ke+1];qe>=n&&qe<=h&&et>=s&&et<=m&&U.push(v[ke])}continue}const ce=ue+ee>>1,de=_[2*ce],Le=_[2*ce+1];de>=n&&de<=h&&Le>=s&&Le<=m&&U.push(v[ce]),(X===0?n<=de:s<=Le)&&(I.push(ue),I.push(ce-1),I.push(1-X)),(X===0?h>=de:m>=Le)&&(I.push(ce+1),I.push(ee),I.push(1-X))}return U}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:_}=this,T=[0,m.length-1,0],I=[],U=h*h;for(;T.length;){const X=T.pop()||0,ee=T.pop()||0,ue=T.pop()||0;if(ee-ue<=_){for(let ke=ue;ke<=ee;ke++)Aw(v[2*ke],v[2*ke+1],n,s)<=U&&I.push(m[ke]);continue}const ce=ue+ee>>1,de=v[2*ce],Le=v[2*ce+1];Aw(de,Le,n,s)<=U&&I.push(m[ce]),(X===0?n-h<=de:s-h<=Le)&&(T.push(ue),T.push(ce-1),T.push(1-X)),(X===0?n+h>=de:s+h>=Le)&&(T.push(ce+1),T.push(ee),T.push(1-X))}return I}}function vy(o,n,s,h,m,v){if(m-h<=s)return;const _=h+m>>1;Cw(o,n,_,h,m,v),vy(o,n,s,h,_-1,1-v),vy(o,n,s,_+1,m,1-v)}function Cw(o,n,s,h,m,v){for(;m>h;){if(m-h>600){const U=m-h+1,X=s-h+1,ee=Math.log(U),ue=.5*Math.exp(2*ee/3),ce=.5*Math.sqrt(ee*ue*(U-ue)/U)*(X-U/2<0?-1:1);Cw(o,n,s,Math.max(h,Math.floor(s-X*ue/U+ce)),Math.min(m,Math.floor(s+(U-X)*ue/U+ce)),v)}const _=n[2*s+v];let T=h,I=m;for(sf(o,n,h,s),n[2*m+v]>_&&sf(o,n,h,m);T<I;){for(sf(o,n,T,I),T++,I--;n[2*T+v]<_;)T++;for(;n[2*I+v]>_;)I--}n[2*h+v]===_?sf(o,n,h,I):(I++,sf(o,n,I,m)),I<=s&&(h=I+1),s<=I&&(m=I-1)}}function sf(o,n,s,h){_y(o,s,h),_y(n,2*s,2*h),_y(n,2*s+1,2*h+1)}function _y(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Aw(o,n,s,h){const m=o-s,v=n-h;return m*m+v*v}var xy;a.PerformanceMarkers=void 0,(xy=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",xy.load="load",xy.fullLoad="fullLoad";let ip=null,af=[];const wy=1e3/60,by="loadTime",Ey="fullLoadTime",IP={mark(o){performance.mark(o)},frame(o){const n=o;ip!=null&&af.push(n-ip),ip=n},clearMetrics(){ip=null,af=[],performance.clearMeasures(by),performance.clearMeasures(Ey);for(const o in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(by,a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure(Ey,a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(by)[0].duration,n=performance.getEntriesByName(Ey)[0].duration,s=af.length,h=1/(af.reduce((v,_)=>v+_,0)/s/1e3),m=af.filter(v=>v>wy).reduce((v,_)=>v+(_-wy)/wy,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};a.AJAXError=Be,a.ARRAY_TYPE=yc,a.Actor=class{constructor(o,n,s){this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},W(["receive","process"],this),this.invoker=new vP(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=_e()?o:window}send(o,n,s,h,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const _=te(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!s,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:hr(n,_)},_),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(o){const n=o.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[s];const h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h()}else _e()||n.mustQueue?(this.tasks[s]=n,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(Zr(n.error)):s(null,Zr(n.data)))}else{let s=!1;const h=te(this.globalScope)?void 0:[],m=n.hasCallback?(T,I)=>{s=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:T?hr(T):null,data:hr(I,h)},h)}:T=>{s=!0};let v=null;const _=Zr(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,_,m);else if(this.parent.getWorkerSource){const T=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,T[0],_.source)[T[1]](_,m)}else m(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=Hh,a.CanonicalTileID=py,a.CollisionBoxArray=g,a.CollisionCircleLayoutArray=class extends cc{},a.Color=hn,a.DEMData=lw,a.DataConstantProperty=qt,a.DictionaryCoder=uw,a.EXTENT=Qn,a.ErrorEvent=xt,a.EvaluationParameters=rr,a.Event=ct,a.Evented=$t,a.FeatureIndex=hw,a.FillBucket=Yg,a.FillExtrusionBucket=Qg,a.GeoJSONFeature=cw,a.ImageAtlas=Vx,a.ImagePosition=iy,a.KDBush=yy,a.LineBucket=ey,a.LineStripIndexArray=class extends r{},a.LngLat=dl,a.MercatorCoordinate=Qd,a.ONE_EM=qr,a.OverscaledTileID=To,a.PerformanceUtils=IP,a.Point=E,a.Pos3dArray=class extends ac{},a.PosArray=ze,a.Properties=zi,a.Protobuf=ny,a.QuadTriangleArray=class extends hc{},a.RGBAImage=So,a.RasterBoundsArray=class extends Nh{},a.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.SegmentVector=kt,a.SymbolBucket=Ec,a.Transitionable=Od,a.TriangleIndexArray=_t,a.Uniform1f=Wo,a.Uniform1i=class extends yi{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.Uniform2f=class extends yi{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.Uniform3f=class extends yi{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.Uniform4f=pu,a.UniformColor=ii,a.UniformMatrix4f=class extends yi{constructor(o,n){super(o,n),this.current=Hr}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.UnwrappedTileID=aw,a.ValidationError=Ge,a.ZoomHistory=co,a.addDynamicAttributes=ly,a.arrayBufferToImage=function(o,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=ne})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(h):ne},a.arrayBufferToImageBitmap=function(o,n){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},a.asyncAll=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const m=new Array(o.length);let v=null;o.forEach((_,T)=>{n(_,(I,U)=>{I&&(v=I),m[T]=U,--h==0&&s(v,m)})})},a.bezier=K,a.bindAll=W,a.clamp=G,a.clipLine=pw,a.clone=function(o){var n=new yc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},a.clone$1=P,a.collisionCircleLayout=HI,a.config=be,a.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.create=function(){var o=new yc(16);return yc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.createExpression=Jn,a.createFilter=iu,a.createLayout=kr,a.createStyleLayer=function(o){return o.type==="custom"?new gP(o):new yP[o.type](o)},a.deepEqual=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},a.derefLayers=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=En(o[s],n[o[s].ref]));return o},a.diffStyles=function(o,n){if(!o)return[{command:Rt.setStyle,args:[n]}];let s=[];try{if(!Ht(o.version,n.version))return[{command:Rt.setStyle,args:[n]}];Ht(o.center,n.center)||s.push({command:Rt.setCenter,args:[n.center]}),Ht(o.zoom,n.zoom)||s.push({command:Rt.setZoom,args:[n.zoom]}),Ht(o.bearing,n.bearing)||s.push({command:Rt.setBearing,args:[n.bearing]}),Ht(o.pitch,n.pitch)||s.push({command:Rt.setPitch,args:[n.pitch]}),Ht(o.sprite,n.sprite)||s.push({command:Rt.setSprite,args:[n.sprite]}),Ht(o.glyphs,n.glyphs)||s.push({command:Rt.setGlyphs,args:[n.glyphs]}),Ht(o.transition,n.transition)||s.push({command:Rt.setTransition,args:[n.transition]}),Ht(o.light,n.light)||s.push({command:Rt.setLight,args:[n.light]});const h={},m=[];(function(_,T,I,U){let X;for(X in T=T||{},_=_||{})Object.prototype.hasOwnProperty.call(_,X)&&(Object.prototype.hasOwnProperty.call(T,X)||Te(X,I,U));for(X in T)Object.prototype.hasOwnProperty.call(T,X)&&(Object.prototype.hasOwnProperty.call(_,X)?Ht(_[X],T[X])||(_[X].type==="geojson"&&T[X].type==="geojson"&&O(_,T,X)?I.push({command:Rt.setGeoJSONSourceData,args:[X,T[X].data]}):F(X,T,I,U)):vn(X,T,I))})(o.sources,n.sources,m,h);const v=[];o.layers&&o.layers.forEach(_=>{h[_.source]?s.push({command:Rt.removeLayer,args:[_.id]}):v.push(_)}),s=s.concat(m),function(_,T,I){T=T||[];const U=(_=_||[]).map(We),X=T.map(We),ee=_.reduce(tt,{}),ue=T.reduce(tt,{}),ce=U.slice(),de=Object.create(null);let Le,ke,qe,et,Ze,rt,st;for(Le=0,ke=0;Le<U.length;Le++)qe=U[Le],Object.prototype.hasOwnProperty.call(ue,qe)?ke++:(I.push({command:Rt.removeLayer,args:[qe]}),ce.splice(ce.indexOf(qe,ke),1));for(Le=0,ke=0;Le<X.length;Le++)qe=X[X.length-1-Le],ce[ce.length-1-Le]!==qe&&(Object.prototype.hasOwnProperty.call(ee,qe)?(I.push({command:Rt.removeLayer,args:[qe]}),ce.splice(ce.lastIndexOf(qe,ce.length-ke),1)):ke++,rt=ce[ce.length-Le],I.push({command:Rt.addLayer,args:[ue[qe],rt]}),ce.splice(ce.length-Le,0,qe),de[qe]=!0);for(Le=0;Le<X.length;Le++)if(qe=X[Le],et=ee[qe],Ze=ue[qe],!de[qe]&&!Ht(et,Ze))if(Ht(et.source,Ze.source)&&Ht(et["source-layer"],Ze["source-layer"])&&Ht(et.type,Ze.type)){for(st in ye(et.layout,Ze.layout,I,qe,null,Rt.setLayoutProperty),ye(et.paint,Ze.paint,I,qe,null,Rt.setPaintProperty),Ht(et.filter,Ze.filter)||I.push({command:Rt.setFilter,args:[qe,Ze.filter]}),Ht(et.minzoom,Ze.minzoom)&&Ht(et.maxzoom,Ze.maxzoom)||I.push({command:Rt.setLayerZoomRange,args:[qe,Ze.minzoom,Ze.maxzoom]}),et)Object.prototype.hasOwnProperty.call(et,st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?ye(et[st],Ze[st],I,qe,st.slice(6),Rt.setPaintProperty):Ht(et[st],Ze[st])||I.push({command:Rt.setLayerProperty,args:[qe,st,Ze[st]]}));for(st in Ze)Object.prototype.hasOwnProperty.call(Ze,st)&&!Object.prototype.hasOwnProperty.call(et,st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?ye(et[st],Ze[st],I,qe,st.slice(6),Rt.setPaintProperty):Ht(et[st],Ze[st])||I.push({command:Rt.setLayerProperty,args:[qe,st,Ze[st]]}))}else I.push({command:Rt.removeLayer,args:[qe]}),rt=ce[ce.lastIndexOf(qe)+1],I.push({command:Rt.addLayer,args:[Ze,rt]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:Rt.setStyle,args:[n]}]}return s},a.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},a.earthRadius=fy,a.ease=pe,a.emitValidationErrors=On,a.emptyStyle=function(){const o={},n=Ye.$version;for(const s in Ye.$root){const h=Ye.$root[s];if(h.required){let m=null;m=s==="version"?n:h.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},a.equals=function(o,n){var s=o[0],h=o[1],m=o[2],v=o[3],_=o[4],T=o[5],I=o[6],U=o[7],X=o[8],ee=o[9],ue=o[10],ce=o[11],de=o[12],Le=o[13],ke=o[14],qe=o[15],et=n[0],Ze=n[1],rt=n[2],st=n[3],ht=n[4],Nt=n[5],Vt=n[6],Ft=n[7],zt=n[8],Pt=n[9],jt=n[10],Ot=n[11],bt=n[12],nn=n[13],Wt=n[14],Tn=n[15];return Math.abs(s-et)<=Li*Math.max(1,Math.abs(s),Math.abs(et))&&Math.abs(h-Ze)<=Li*Math.max(1,Math.abs(h),Math.abs(Ze))&&Math.abs(m-rt)<=Li*Math.max(1,Math.abs(m),Math.abs(rt))&&Math.abs(v-st)<=Li*Math.max(1,Math.abs(v),Math.abs(st))&&Math.abs(_-ht)<=Li*Math.max(1,Math.abs(_),Math.abs(ht))&&Math.abs(T-Nt)<=Li*Math.max(1,Math.abs(T),Math.abs(Nt))&&Math.abs(I-Vt)<=Li*Math.max(1,Math.abs(I),Math.abs(Vt))&&Math.abs(U-Ft)<=Li*Math.max(1,Math.abs(U),Math.abs(Ft))&&Math.abs(X-zt)<=Li*Math.max(1,Math.abs(X),Math.abs(zt))&&Math.abs(ee-Pt)<=Li*Math.max(1,Math.abs(ee),Math.abs(Pt))&&Math.abs(ue-jt)<=Li*Math.max(1,Math.abs(ue),Math.abs(jt))&&Math.abs(ce-Ot)<=Li*Math.max(1,Math.abs(ce),Math.abs(Ot))&&Math.abs(de-bt)<=Li*Math.max(1,Math.abs(de),Math.abs(bt))&&Math.abs(Le-nn)<=Li*Math.max(1,Math.abs(Le),Math.abs(nn))&&Math.abs(ke-Wt)<=Li*Math.max(1,Math.abs(ke),Math.abs(Wt))&&Math.abs(qe-Tn)<=Li*Math.max(1,Math.abs(qe),Math.abs(Tn))},a.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/Gs:o.kind==="composite"?Jr.number(h/Gs,m/Gs,s):n},a.evaluateSizeForZoom=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:_}=o,T=m?G(mi.interpolationFactor(m,n,v,_),0,1):0;o.kind==="camera"?h=Jr.number(o.minSize,o.maxSize,T):s=T}return{uSizeT:s,uSize:h}},a.evaluateVariableOffset=bw,a.evented=ic,a.exported=we,a.extend=B,a.filterObject=S,a.findLineIntersection=function(o,n,s,h){const m=n.y-o.y,v=n.x-o.x,_=h.y-s.y,T=h.x-s.x,I=_*v-T*m;if(I===0)return null;const U=(T*(o.y-s.y)-_*(o.x-s.x))/I;return new E(o.x+U*v,o.y+U*m)},a.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.getAnchorAlignment=sy,a.getAnchorJustification=gy,a.getArrayBuffer=ot,a.getDefaultExportFromCjs=b,a.getJSON=function(o,n){return Ve(B(o,{type:"json"}),n)},a.getOverlapMode=ay,a.getProtocolAction=Oe,a.getRTLTextPluginStatus=Rh,a.getReferrer=Ie,a.getVideo=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const m=window.document.createElement("source");ut(o[h])||(s.crossOrigin="Anonymous"),m.src=o[h],s.appendChild(m)}return{cancel:()=>{}}},a.groupByLayout=function(o,n){const s={};for(let m=0;m<o.length;m++){const v=n&&n[o[m].id]||Qr(o[m]);n&&(n[o[m].id]=v);let _=s[v];_||(_=s[v]=[]),_.push(o[m])}const h=[];for(const m in s)h.push(s[m]);return h},a.identity=Ug,a.interpolate=Jr,a.invert=function(o,n){var s=n[0],h=n[1],m=n[2],v=n[3],_=n[4],T=n[5],I=n[6],U=n[7],X=n[8],ee=n[9],ue=n[10],ce=n[11],de=n[12],Le=n[13],ke=n[14],qe=n[15],et=s*T-h*_,Ze=s*I-m*_,rt=s*U-v*_,st=h*I-m*T,ht=h*U-v*T,Nt=m*U-v*I,Vt=X*Le-ee*de,Ft=X*ke-ue*de,zt=X*qe-ce*de,Pt=ee*ke-ue*Le,jt=ee*qe-ce*Le,Ot=ue*qe-ce*ke,bt=et*Ot-Ze*jt+rt*Pt+st*zt-ht*Ft+Nt*Vt;return bt?(o[0]=(T*Ot-I*jt+U*Pt)*(bt=1/bt),o[1]=(m*jt-h*Ot-v*Pt)*bt,o[2]=(Le*Nt-ke*ht+qe*st)*bt,o[3]=(ue*ht-ee*Nt-ce*st)*bt,o[4]=(I*zt-_*Ot-U*Ft)*bt,o[5]=(s*Ot-m*zt+v*Ft)*bt,o[6]=(ke*rt-de*Nt-qe*Ze)*bt,o[7]=(X*Nt-ue*rt+ce*Ze)*bt,o[8]=(_*jt-T*zt+U*Vt)*bt,o[9]=(h*zt-s*jt-v*Vt)*bt,o[10]=(de*ht-Le*rt+qe*et)*bt,o[11]=(ee*rt-X*ht-ce*et)*bt,o[12]=(T*Ft-_*Pt-I*Vt)*bt,o[13]=(s*Pt-h*Ft+m*Vt)*bt,o[14]=(Le*Ze-de*st-ke*et)*bt,o[15]=(X*st-ee*Ze+ue*et)*bt,o):null},a.isImageBitmap=le,a.isSafari=te,a.isWorker=_e,a.keysDifference=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},a.lazyLoadRTLTextPlugin=function(){ho.isLoading()||ho.isLoaded()||Rh()!=="deferred"||Ld()},a.makeRequest=Ve,a.mapObject=D,a.mercatorXfromLng=rw,a.mercatorYfromLat=iw,a.mercatorZfromAltitude=ow,a.mul=oI,a.mul$1=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},a.multiply=lx,a.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.operations=Rt,a.ortho=function(o,n,s,h,m,v,_){var T=1/(n-s),I=1/(h-m),U=1/(v-_);return o[0]=-2*T,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*I,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*U,o[11]=0,o[12]=(n+s)*T,o[13]=(m+h)*I,o[14]=(_+v)*U,o[15]=1,o},a.parseCacheControl=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,v)=>{const _=m||v;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},a.parseGlyphPbf=function(o){return new ny(o).readFields(iP,[])},a.pbf=Ox,a.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Qn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0].layout,s=o.bucket.layers[0]._unevaluatedLayout._values,h={layoutIconSize:s["icon-size"].possiblyEvaluate(new rr(o.bucket.zoom+1),o.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new rr(o.bucket.zoom+1),o.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new rr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:U}=o.bucket.textSizeData;h.compositeTextSizes=[s["text-size"].possiblyEvaluate(new rr(I),o.canonical),s["text-size"].possiblyEvaluate(new rr(U),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:U}=o.bucket.iconSizeData;h.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new rr(I),o.canonical),s["icon-size"].possiblyEvaluate(new rr(U),o.canonical)]}const m=n.get("text-line-height")*qr,v=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",_=n.get("text-keep-upright"),T=n.get("text-size");for(const I of o.bucket.features){const U=n.get("text-font").evaluate(I,{},o.canonical).join(","),X=T.evaluate(I,{},o.canonical),ee=h.layoutTextSize.evaluate(I,{},o.canonical),ue=h.layoutIconSize.evaluate(I,{},o.canonical),ce={horizontal:{},vertical:void 0},de=I.text;let Le,ke=[0,0];if(de){const Ze=de.toString(),rt=n.get("text-letter-spacing").evaluate(I,{},o.canonical)*qr,st=$s(Ze)?rt:0,ht=n.get("text-anchor").evaluate(I,{},o.canonical),Nt=n.get("text-variable-anchor");if(!Nt){const jt=n.get("text-radial-offset").evaluate(I,{},o.canonical);ke=jt?bw(ht,[jt*qr,my]):n.get("text-offset").evaluate(I,{},o.canonical).map(Ot=>Ot*qr)}let Vt=v?"center":n.get("text-justify").evaluate(I,{},o.canonical);const Ft=n.get("symbol-placement"),zt=Ft==="point"?n.get("text-max-width").evaluate(I,{},o.canonical)*qr:0,Pt=()=>{o.bucket.allowVerticalPlacement&&ga(Ze)&&(ce.vertical=qd(de,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,ht,"left",st,ke,a.WritingMode.vertical,!0,Ft,ee,X))};if(!v&&Nt){const jt=Vt==="auto"?Nt.map(bt=>gy(bt)):[Vt];let Ot=!1;for(let bt=0;bt<jt.length;bt++){const nn=jt[bt];if(!ce.horizontal[nn])if(Ot)ce.horizontal[nn]=ce.horizontal[0];else{const Wt=qd(de,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,"center",nn,st,ke,a.WritingMode.horizontal,!1,Ft,ee,X);Wt&&(ce.horizontal[nn]=Wt,Ot=Wt.positionedLines.length===1)}}Pt()}else{Vt==="auto"&&(Vt=gy(ht));const jt=qd(de,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,ht,Vt,st,ke,a.WritingMode.horizontal,!1,Ft,ee,X);jt&&(ce.horizontal[Vt]=jt),Pt(),ga(Ze)&&v&&_&&(ce.vertical=qd(de,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,ht,Vt,st,ke,a.WritingMode.vertical,!1,Ft,ee,X))}}let qe=!1;if(I.icon&&I.icon.name){const Ze=o.imageMap[I.icon.name];Ze&&(Le=cP(o.imagePositions[I.icon.name],n.get("icon-offset").evaluate(I,{},o.canonical),n.get("icon-anchor").evaluate(I,{},o.canonical)),qe=!!Ze.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=qe:o.bucket.sdfIcons!==qe&&J("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==o.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const et=Sw(ce.horizontal)||ce.vertical;o.bucket.iconsInText=!!et&&et.iconsInText,(et||Le)&&CP(o.bucket,I,ce,Le,o.imageMap,h,ee,ue,ke,qe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.perspective=function(o,n,s,h,m){var v,_=1/Math.tan(n/2);return o[0]=_/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(v=1/(h-m)),o[14]=2*m*h*v):(o[10]=-1,o[14]=-2*h),o},a.pick=function(o,n){const s={};for(let h=0;h<n.length;h++){const m=n[h];m in o&&(s[m]=o[m])}return s},a.plugin=ho,a.pointGeometry=w,a.polygonIntersectsPolygon=nx,a.potpack=$x,a.register=Ct,a.registerForPluginStateChange=function(o){return o({pluginStatus:ki,pluginURL:Vs}),ic.on("pluginStateChange",o),o},a.renderColorRamp=dx,a.rotateX=function(o,n,s){var h=Math.sin(s),m=Math.cos(s),v=n[4],_=n[5],T=n[6],I=n[7],U=n[8],X=n[9],ee=n[10],ue=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*m+U*h,o[5]=_*m+X*h,o[6]=T*m+ee*h,o[7]=I*m+ue*h,o[8]=U*m-v*h,o[9]=X*m-_*h,o[10]=ee*m-T*h,o[11]=ue*m-I*h,o},a.rotateZ=function(o,n,s){var h=Math.sin(s),m=Math.cos(s),v=n[0],_=n[1],T=n[2],I=n[3],U=n[4],X=n[5],ee=n[6],ue=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*m+U*h,o[1]=_*m+X*h,o[2]=T*m+ee*h,o[3]=I*m+ue*h,o[4]=U*m-v*h,o[5]=X*m-_*h,o[6]=ee*m-T*h,o[7]=ue*m-I*h,o},a.sameOrigin=ut,a.scale=function(o,n,s){var h=s[0],m=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*m,o[5]=n[5]*m,o[6]=n[6]*m,o[7]=n[7]*m,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.setRTLTextPlugin=function(o,n,s=!1){if(ki===zh||ki===rc||ki===Lh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vs=we.resolveURL(o),ki=zh,cu=n,Oh(),s||Ld()},a.sphericalToCartesian=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},a.toEvaluationFeature=gu,a.transformMat4=$d,a.translate=function(o,n,s){var h,m,v,_,T,I,U,X,ee,ue,ce,de,Le=s[0],ke=s[1],qe=s[2];return n===o?(o[12]=n[0]*Le+n[4]*ke+n[8]*qe+n[12],o[13]=n[1]*Le+n[5]*ke+n[9]*qe+n[13],o[14]=n[2]*Le+n[6]*ke+n[10]*qe+n[14],o[15]=n[3]*Le+n[7]*ke+n[11]*qe+n[15]):(m=n[1],v=n[2],_=n[3],T=n[4],I=n[5],U=n[6],X=n[7],ee=n[8],ue=n[9],ce=n[10],de=n[11],o[0]=h=n[0],o[1]=m,o[2]=v,o[3]=_,o[4]=T,o[5]=I,o[6]=U,o[7]=X,o[8]=ee,o[9]=ue,o[10]=ce,o[11]=de,o[12]=h*Le+T*ke+ee*qe+n[12],o[13]=m*Le+I*ke+ue*qe+n[13],o[14]=v*Le+U*ke+ce*qe+n[14],o[15]=_*Le+X*ke+de*qe+n[15]),o},a.triggerPluginCompletionEvent=zd,a.unicodeBlockLookup=At,a.uniqueId=function(){return oe++},a.v8Spec=Ye,a.validateCustomStyleLayer=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateLight=Zt,a.validateStyle=St,a.vectorTile=cl,a.warnOnce=J,a.wrap=$}),d(["./shared"],function(a){class b{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,se){for(const Ce of ie){this._layerConfigs[Ce.id]=Ce;const Re=this._layers[Ce.id]=a.createStyleLayer(Ce);Re._featureFilter=a.createFilter(Re.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of se)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const he=a.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Ce of he){const Re=Ce.map(mt=>this._layers[mt.id]),He=Re[0];if(He.visibility==="none")continue;const Ue=He.source||"";let Ne=this.familiesBySource[Ue];Ne||(Ne=this.familiesBySource[Ue]={});const Je=He.sourceLayer||"_geojsonTileLayer";let dt=Ne[Je];dt||(dt=Ne[Je]=[]),dt.push(Re)}}}class w{constructor(ie){const se={},he=[];for(const Ue in ie){const Ne=ie[Ue],Je=se[Ue]={};for(const dt in Ne){const mt=Ne[+dt];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const pt={x:0,y:0,w:mt.bitmap.width+2,h:mt.bitmap.height+2};he.push(pt),Je[dt]={rect:pt,metrics:mt.metrics}}}const{w:Ce,h:Re}=a.potpack(he),He=new a.AlphaImage({width:Ce||1,height:Re||1});for(const Ue in ie){const Ne=ie[Ue];for(const Je in Ne){const dt=Ne[+Je];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const mt=se[Ue][Je].rect;a.AlphaImage.copy(dt.bitmap,He,{x:0,y:0},{x:mt.x+1,y:mt.y+1},dt.bitmap)}}this.image=He,this.positions=se}}a.register("GlyphAtlas",w);class C{constructor(ie){this.tileID=new a.OverscaledTileID(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId}parse(ie,se,he,Ce,Re){this.status="parsing",this.data=ie,this.collisionBoxArray=new a.CollisionBoxArray;const He=new a.DictionaryCoder(Object.keys(ie.layers).sort()),Ue=new a.FeatureIndex(this.tileID,this.promoteId);Ue.bucketLayerIDs=[];const Ne={},Je={featureIndex:Ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},dt=se.familiesBySource[this.source];for(const wn in dt){const Mn=ie.layers[wn];if(!Mn)continue;Mn.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${wn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Hn=He.encode(wn),mr=[];for(let hn=0;hn<Mn.length;hn++){const tr=Mn.feature(hn),Ui=Ue.getId(tr,wn);mr.push({feature:tr,id:Ui,index:hn,sourceLayerIndex:Hn})}for(const hn of dt[wn]){const tr=hn[0];tr.source!==this.source&&a.warnOnce(`layer.source = ${tr.source} does not equal this.source = ${this.source}`),tr.minzoom&&this.zoom<Math.floor(tr.minzoom)||tr.maxzoom&&this.zoom>=tr.maxzoom||tr.visibility!=="none"&&(E(hn,this.zoom,he),(Ne[tr.id]=tr.createBucket({index:Ue.bucketLayerIDs.length,layers:hn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Hn,sourceID:this.source})).populate(mr,Je,this.tileID.canonical),Ue.bucketLayerIDs.push(hn.map(Ui=>Ui.id)))}}let mt,pt,en,an;const Ut=a.mapObject(Je.glyphDependencies,wn=>Object.keys(wn).map(Number));Object.keys(Ut).length?Ce.send("getGlyphs",{uid:this.uid,stacks:Ut,source:this.source,tileID:this.tileID,type:"glyphs"},(wn,Mn)=>{mt||(mt=wn,pt=Mn,bn.call(this))}):pt={};const Xt=Object.keys(Je.iconDependencies);Xt.length?Ce.send("getImages",{icons:Xt,source:this.source,tileID:this.tileID,type:"icons"},(wn,Mn)=>{mt||(mt=wn,en=Mn,bn.call(this))}):en={};const ln=Object.keys(Je.patternDependencies);function bn(){if(mt)return Re(mt);if(pt&&en&&an){const wn=new w(pt),Mn=new a.ImageAtlas(en,an);for(const Hn in Ne){const mr=Ne[Hn];mr instanceof a.SymbolBucket?(E(mr.layers,this.zoom,he),a.performSymbolLayout({bucket:mr,glyphMap:pt,glyphPositions:wn.positions,imageMap:en,imagePositions:Mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):mr.hasPattern&&(mr instanceof a.LineBucket||mr instanceof a.FillBucket||mr instanceof a.FillExtrusionBucket)&&(E(mr.layers,this.zoom,he),mr.addFeatures(Je,this.tileID.canonical,Mn.patternPositions))}this.status="done",Re(null,{buckets:Object.values(Ne).filter(Hn=>!Hn.isEmpty()),featureIndex:Ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wn.image,imageAtlas:Mn,glyphMap:this.returnDependencies?pt:null,iconMap:this.returnDependencies?en:null,glyphPositions:this.returnDependencies?wn.positions:null})}}ln.length?Ce.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"patterns"},(wn,Mn)=>{mt||(mt=wn,an=Mn,bn.call(this))}):an={},bn.call(this)}}function E(Pe,ie,se){const he=new a.EvaluationParameters(ie);for(const Ce of Pe)Ce.recalculate(he,se)}function z(Pe,ie){const se=a.getArrayBuffer(Pe.request,(he,Ce,Re,He)=>{he?ie(he):Ce&&ie(null,{vectorTile:new a.vectorTile.VectorTile(new a.Protobuf(Ce)),rawData:Ce,cacheControl:Re,expires:He})});return()=>{se.cancel(),ie()}}class R{constructor(ie,se,he,Ce){this.actor=ie,this.layerIndex=se,this.availableImages=he,this.loadVectorData=Ce||z,this.loading={},this.loaded={}}loadTile(ie,se){const he=ie.uid;this.loading||(this.loading={});const Ce=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new a.RequestPerformance(ie.request),Re=this.loading[he]=new C(ie);Re.abort=this.loadVectorData(ie,(He,Ue)=>{if(delete this.loading[he],He||!Ue)return Re.status="done",this.loaded[he]=Re,se(He);const Ne=Ue.rawData,Je={};Ue.expires&&(Je.expires=Ue.expires),Ue.cacheControl&&(Je.cacheControl=Ue.cacheControl);const dt={};if(Ce){const mt=Ce.finish();mt&&(dt.resourceTiming=JSON.parse(JSON.stringify(mt)))}Re.vectorTile=Ue.vectorTile,Re.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,(mt,pt)=>{if(mt||!pt)return se(mt);se(null,a.extend({rawTileData:Ne.slice(0)},pt,Je,dt))}),this.loaded=this.loaded||{},this.loaded[he]=Re})}reloadTile(ie,se){const he=this.loaded,Ce=ie.uid,Re=this;if(he&&he[Ce]){const He=he[Ce];He.showCollisionBoxes=ie.showCollisionBoxes;const Ue=(Ne,Je)=>{const dt=He.reloadCallback;dt&&(delete He.reloadCallback,He.parse(He.vectorTile,Re.layerIndex,this.availableImages,Re.actor,dt)),se(Ne,Je)};He.status==="parsing"?He.reloadCallback=Ue:He.status==="done"&&(He.vectorTile?He.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor,Ue):Ue())}}abortTile(ie,se){const he=this.loading,Ce=ie.uid;he&&he[Ce]&&he[Ce].abort&&(he[Ce].abort(),delete he[Ce]),se()}removeTile(ie,se){const he=this.loaded,Ce=ie.uid;he&&he[Ce]&&delete he[Ce],se()}}class Q{constructor(){this.loaded={}}loadTile(ie,se){const{uid:he,encoding:Ce,rawImageData:Re}=ie,He=a.isImageBitmap(Re)?this.getImageData(Re):Re,Ue=new a.DEMData(he,He,Ce);this.loaded=this.loaded||{},this.loaded[he]=Ue,se(null,Ue)}getImageData(ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ie.width,ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ie.width,this.offscreenCanvas.height=ie.height,this.offscreenCanvasContext.drawImage(ie,0,0,ie.width,ie.height);const se=this.offscreenCanvasContext.getImageData(-1,-1,ie.width+2,ie.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:se.width,height:se.height},se.data)}removeTile(ie){const se=this.loaded,he=ie.uid;se&&se[he]&&delete se[he]}}function K(Pe,ie){if(Pe.length!==0){pe(Pe[0],ie);for(var se=1;se<Pe.length;se++)pe(Pe[se],!ie)}}function pe(Pe,ie){for(var se=0,he=0,Ce=0,Re=Pe.length,He=Re-1;Ce<Re;He=Ce++){var Ue=(Pe[Ce][0]-Pe[He][0])*(Pe[He][1]+Pe[Ce][1]),Ne=se+Ue;he+=Math.abs(se)>=Math.abs(Ue)?se-Ne+Ue:Ue-Ne+se,se=Ne}se+he>=0!=!!ie&&Pe.reverse()}var G=a.getDefaultExportFromCjs(function Pe(ie,se){var he,Ce=ie&&ie.type;if(Ce==="FeatureCollection")for(he=0;he<ie.features.length;he++)Pe(ie.features[he],se);else if(Ce==="GeometryCollection")for(he=0;he<ie.geometries.length;he++)Pe(ie.geometries[he],se);else if(Ce==="Feature")Pe(ie.geometry,se);else if(Ce==="Polygon")K(ie.coordinates,se);else if(Ce==="MultiPolygon")for(he=0;he<ie.coordinates.length;he++)K(ie.coordinates[he],se);return ie});const $=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;var B={exports:{}},oe=a.pointGeometry,W=a.vectorTile.VectorTileFeature,D=S;function S(Pe,ie){this.options=ie||{},this.features=Pe,this.length=Pe.length}function P(Pe,ie){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=ie||4096}S.prototype.feature=function(Pe){return new P(this.features[Pe],this.options.extent)},P.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var ie=0;ie<Pe.length;ie++){for(var se=Pe[ie],he=[],Ce=0;Ce<se.length;Ce++)he.push(new oe(se[Ce][0],se[Ce][1]));this.geometry.push(he)}return this.geometry},P.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,ie=1/0,se=-1/0,he=1/0,Ce=-1/0,Re=0;Re<Pe.length;Re++)for(var He=Pe[Re],Ue=0;Ue<He.length;Ue++){var Ne=He[Ue];ie=Math.min(ie,Ne.x),se=Math.max(se,Ne.x),he=Math.min(he,Ne.y),Ce=Math.max(Ce,Ne.y)}return[ie,he,se,Ce]},P.prototype.toGeoJSON=W.prototype.toGeoJSON;var Z=a.pbf,J=D;function H(Pe){var ie=new Z;return function(se,he){for(var Ce in se.layers)he.writeMessage(3,ve,se.layers[Ce])}(Pe,ie),ie.finish()}function ve(Pe,ie){var se;ie.writeVarintField(15,Pe.version||1),ie.writeStringField(1,Pe.name||""),ie.writeVarintField(5,Pe.extent||4096);var he={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<Pe.length;se++)he.feature=Pe.feature(se),ie.writeMessage(2,_e,he);var Ce=he.keys;for(se=0;se<Ce.length;se++)ie.writeStringField(3,Ce[se]);var Re=he.values;for(se=0;se<Re.length;se++)ie.writeMessage(4,re,Re[se])}function _e(Pe,ie){var se=Pe.feature;se.id!==void 0&&ie.writeVarintField(1,se.id),ie.writeMessage(2,xe,Pe),ie.writeVarintField(3,se.type),ie.writeMessage(4,ne,se)}function xe(Pe,ie){var se=Pe.feature,he=Pe.keys,Ce=Pe.values,Re=Pe.keycache,He=Pe.valuecache;for(var Ue in se.properties){var Ne=se.properties[Ue],Je=Re[Ue];if(Ne!==null){Je===void 0&&(he.push(Ue),Re[Ue]=Je=he.length-1),ie.writeVarint(Je);var dt=typeof Ne;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(Ne=JSON.stringify(Ne));var mt=dt+":"+Ne,pt=He[mt];pt===void 0&&(Ce.push(Ne),He[mt]=pt=Ce.length-1),ie.writeVarint(pt)}}}function te(Pe,ie){return(ie<<3)+(7&Pe)}function le(Pe){return Pe<<1^Pe>>31}function ne(Pe,ie){for(var se=Pe.loadGeometry(),he=Pe.type,Ce=0,Re=0,He=se.length,Ue=0;Ue<He;Ue++){var Ne=se[Ue],Je=1;he===1&&(Je=Ne.length),ie.writeVarint(te(1,Je));for(var dt=he===3?Ne.length-1:Ne.length,mt=0;mt<dt;mt++){mt===1&&he!==1&&ie.writeVarint(te(2,dt-1));var pt=Ne[mt].x-Ce,en=Ne[mt].y-Re;ie.writeVarint(le(pt)),ie.writeVarint(le(en)),Ce+=pt,Re+=en}he===3&&ie.writeVarint(te(7,1))}}function re(Pe,ie){var se=typeof Pe;se==="string"?ie.writeStringField(1,Pe):se==="boolean"?ie.writeBooleanField(7,Pe):se==="number"&&(Pe%1!=0?ie.writeDoubleField(3,Pe):Pe<0?ie.writeSVarintField(6,Pe):ie.writeVarintField(5,Pe))}B.exports=H,B.exports.fromVectorTileJs=H,B.exports.fromGeojsonVt=function(Pe,ie){ie=ie||{};var se={};for(var he in Pe)se[he]=new J(Pe[he].features,ie),se[he].name=he,se[he].version=ie.version,se[he].extent=ie.extent;return H({layers:se})},B.exports.GeoJSONWrapper=J;var me=a.getDefaultExportFromCjs(B.exports);const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},be=Math.fround||(Be=new Float32Array(1),Pe=>(Be[0]=+Pe,Be[0]));var Be;const Ie=3,Oe=5,$e=6;class Ve{constructor(ie){this.options=Object.assign(Object.create(we),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:se,minZoom:he,maxZoom:Ce}=this.options;se&&console.time("total time");const Re=`prepare ${ie.length} points`;se&&console.time(Re),this.points=ie;const He=[];for(let Ne=0;Ne<ie.length;Ne++){const Je=ie[Ne];if(!Je.geometry)continue;const[dt,mt]=Je.geometry.coordinates,pt=be(gt(dt)),en=be(Mt(mt));He.push(pt,en,1/0,Ne,-1,1),this.options.reduce&&He.push(0)}let Ue=this.trees[Ce+1]=this._createTree(He);se&&console.timeEnd(Re);for(let Ne=Ce;Ne>=he;Ne--){const Je=+Date.now();Ue=this.trees[Ne]=this._createTree(this._cluster(Ue,Ne)),se&&console.log("z%d: %d clusters in %dms",Ne,Ue.numItems,+Date.now()-Je)}return se&&console.timeEnd("total time"),this}getClusters(ie,se){let he=((ie[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,ie[1]));let Re=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)he=-180,Re=180;else if(he>Re){const mt=this.getClusters([he,Ce,180,He],se),pt=this.getClusters([-180,Ce,Re,He],se);return mt.concat(pt)}const Ue=this.trees[this._limitZoom(se)],Ne=Ue.range(gt(he),Mt(He),gt(Re),Mt(Ce)),Je=Ue.data,dt=[];for(const mt of Ne){const pt=this.stride*mt;dt.push(Je[pt+Oe]>1?ot(Je,pt,this.clusterProps):this.points[Je[pt+Ie]])}return dt}getChildren(ie){const se=this._getOriginId(ie),he=this._getOriginZoom(ie),Ce="No cluster with the specified id.",Re=this.trees[he];if(!Re)throw new Error(Ce);const He=Re.data;if(se*this.stride>=He.length)throw new Error(Ce);const Ue=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Ne=Re.within(He[se*this.stride],He[se*this.stride+1],Ue),Je=[];for(const dt of Ne){const mt=dt*this.stride;He[mt+4]===ie&&Je.push(He[mt+Oe]>1?ot(He,mt,this.clusterProps):this.points[He[mt+Ie]])}if(Je.length===0)throw new Error(Ce);return Je}getLeaves(ie,se,he){const Ce=[];return this._appendLeaves(Ce,ie,se=se||10,he=he||0,0),Ce}getTile(ie,se,he){const Ce=this.trees[this._limitZoom(ie)],Re=Math.pow(2,ie),{extent:He,radius:Ue}=this.options,Ne=Ue/He,Je=(he-Ne)/Re,dt=(he+1+Ne)/Re,mt={features:[]};return this._addTileFeatures(Ce.range((se-Ne)/Re,Je,(se+1+Ne)/Re,dt),Ce.data,se,he,Re,mt),se===0&&this._addTileFeatures(Ce.range(1-Ne/Re,Je,1,dt),Ce.data,Re,he,Re,mt),se===Re-1&&this._addTileFeatures(Ce.range(0,Je,Ne/Re,dt),Ce.data,-1,he,Re,mt),mt.features.length?mt:null}getClusterExpansionZoom(ie){let se=this._getOriginZoom(ie)-1;for(;se<=this.options.maxZoom;){const he=this.getChildren(ie);if(se++,he.length!==1)break;ie=he[0].properties.cluster_id}return se}_appendLeaves(ie,se,he,Ce,Re){const He=this.getChildren(se);for(const Ue of He){const Ne=Ue.properties;if(Ne&&Ne.cluster?Re+Ne.point_count<=Ce?Re+=Ne.point_count:Re=this._appendLeaves(ie,Ne.cluster_id,he,Ce,Re):Re<Ce?Re++:ie.push(Ue),ie.length===he)break}return Re}_createTree(ie){const se=new a.KDBush(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<ie.length;he+=this.stride)se.add(ie[he],ie[he+1]);return se.finish(),se.data=ie,se}_addTileFeatures(ie,se,he,Ce,Re,He){for(const Ue of ie){const Ne=Ue*this.stride,Je=se[Ne+Oe]>1;let dt,mt,pt;if(Je)dt=ut(se,Ne,this.clusterProps),mt=se[Ne],pt=se[Ne+1];else{const Ut=this.points[se[Ne+Ie]];dt=Ut.properties;const[Xt,ln]=Ut.geometry.coordinates;mt=gt(Xt),pt=Mt(ln)}const en={type:1,geometry:[[Math.round(this.options.extent*(mt*Re-he)),Math.round(this.options.extent*(pt*Re-Ce))]],tags:dt};let an;an=Je||this.options.generateId?se[Ne+Ie]:this.points[se[Ne+Ie]].id,an!==void 0&&(en.id=an),He.features.push(en)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,se){const{radius:he,extent:Ce,reduce:Re,minPoints:He}=this.options,Ue=he/(Ce*Math.pow(2,se)),Ne=ie.data,Je=[],dt=this.stride;for(let mt=0;mt<Ne.length;mt+=dt){if(Ne[mt+2]<=se)continue;Ne[mt+2]=se;const pt=Ne[mt],en=Ne[mt+1],an=ie.within(Ne[mt],Ne[mt+1],Ue),Ut=Ne[mt+Oe];let Xt=Ut;for(const ln of an){const bn=ln*dt;Ne[bn+2]>se&&(Xt+=Ne[bn+Oe])}if(Xt>Ut&&Xt>=He){let ln,bn=pt*Ut,wn=en*Ut,Mn=-1;const Hn=((mt/dt|0)<<5)+(se+1)+this.points.length;for(const mr of an){const hn=mr*dt;if(Ne[hn+2]<=se)continue;Ne[hn+2]=se;const tr=Ne[hn+Oe];bn+=Ne[hn]*tr,wn+=Ne[hn+1]*tr,Ne[hn+4]=Hn,Re&&(ln||(ln=this._map(Ne,mt,!0),Mn=this.clusterProps.length,this.clusterProps.push(ln)),Re(ln,this._map(Ne,hn)))}Ne[mt+4]=Hn,Je.push(bn/Xt,wn/Xt,1/0,Hn,-1,Xt),Re&&Je.push(Mn)}else{for(let ln=0;ln<dt;ln++)Je.push(Ne[mt+ln]);if(Xt>1)for(const ln of an){const bn=ln*dt;if(!(Ne[bn+2]<=se)){Ne[bn+2]=se;for(let wn=0;wn<dt;wn++)Je.push(Ne[bn+wn])}}}}return Je}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,se,he){if(ie[se+Oe]>1){const He=this.clusterProps[ie[se+$e]];return he?Object.assign({},He):He}const Ce=this.points[ie[se+Ie]].properties,Re=this.options.map(Ce);return he&&Re===Ce?Object.assign({},Re):Re}}function ot(Pe,ie,se){return{type:"Feature",id:Pe[ie+Ie],properties:ut(Pe,ie,se),geometry:{type:"Point",coordinates:[(he=Pe[ie],360*(he-.5)),ct(Pe[ie+1])]}};var he}function ut(Pe,ie,se){const he=Pe[ie+Oe],Ce=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,Re=Pe[ie+$e],He=Re===-1?{}:Object.assign({},se[Re]);return Object.assign(He,{cluster:!0,cluster_id:Pe[ie+Ie],point_count:he,point_count_abbreviated:Ce})}function gt(Pe){return Pe/360+.5}function Mt(Pe){const ie=Math.sin(Pe*Math.PI/180),se=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return se<0?0:se>1?1:se}function ct(Pe){const ie=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function xt(Pe,ie,se,he){for(var Ce,Re=he,He=se-ie>>1,Ue=se-ie,Ne=Pe[ie],Je=Pe[ie+1],dt=Pe[se],mt=Pe[se+1],pt=ie+3;pt<se;pt+=3){var en=$t(Pe[pt],Pe[pt+1],Ne,Je,dt,mt);if(en>Re)Ce=pt,Re=en;else if(en===Re){var an=Math.abs(pt-He);an<Ue&&(Ce=pt,Ue=an)}}Re>he&&(Ce-ie>3&&xt(Pe,ie,Ce,he),Pe[Ce+2]=Re,se-Ce>3&&xt(Pe,Ce,se,he))}function $t(Pe,ie,se,he,Ce,Re){var He=Ce-se,Ue=Re-he;if(He!==0||Ue!==0){var Ne=((Pe-se)*He+(ie-he)*Ue)/(He*He+Ue*Ue);Ne>1?(se=Ce,he=Re):Ne>0&&(se+=He*Ne,he+=Ue*Ne)}return(He=Pe-se)*He+(Ue=ie-he)*Ue}function Ye(Pe,ie,se,he){var Ce={id:Pe===void 0?null:Pe,type:ie,geometry:se,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var He=Re.geometry,Ue=Re.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")sn(Re,He);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var Ne=0;Ne<He.length;Ne++)sn(Re,He[Ne]);else if(Ue==="MultiPolygon")for(Ne=0;Ne<He.length;Ne++)for(var Je=0;Je<He[Ne].length;Je++)sn(Re,He[Ne][Je])}(Ce),Ce}function sn(Pe,ie){for(var se=0;se<ie.length;se+=3)Pe.minX=Math.min(Pe.minX,ie[se]),Pe.minY=Math.min(Pe.minY,ie[se+1]),Pe.maxX=Math.max(Pe.maxX,ie[se]),Pe.maxY=Math.max(Pe.maxY,ie[se+1])}function En(Pe,ie,se,he){if(ie.geometry){var Ce=ie.geometry.coordinates,Re=ie.geometry.type,He=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),Ue=[],Ne=ie.id;if(se.promoteId?Ne=ie.properties[se.promoteId]:se.generateId&&(Ne=he||0),Re==="Point")Ht(Ce,Ue);else if(Re==="MultiPoint")for(var Je=0;Je<Ce.length;Je++)Ht(Ce[Je],Ue);else if(Re==="LineString")Rt(Ce,Ue,He,!1);else if(Re==="MultiLineString"){if(se.lineMetrics){for(Je=0;Je<Ce.length;Je++)Rt(Ce[Je],Ue=[],He,!1),Pe.push(Ye(Ne,"LineString",Ue,ie.properties));return}vn(Ce,Ue,He,!1)}else if(Re==="Polygon")vn(Ce,Ue,He,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(Je=0;Je<ie.geometry.geometries.length;Je++)En(Pe,{id:Ne,geometry:ie.geometry.geometries[Je],properties:ie.properties},se,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Je=0;Je<Ce.length;Je++){var dt=[];vn(Ce[Je],dt,He,!0),Ue.push(dt)}}Pe.push(Ye(Ne,Re,Ue,ie.properties))}}function Ht(Pe,ie){ie.push(Te(Pe[0])),ie.push(F(Pe[1])),ie.push(0)}function Rt(Pe,ie,se,he){for(var Ce,Re,He=0,Ue=0;Ue<Pe.length;Ue++){var Ne=Te(Pe[Ue][0]),Je=F(Pe[Ue][1]);ie.push(Ne),ie.push(Je),ie.push(0),Ue>0&&(He+=he?(Ce*Je-Ne*Re)/2:Math.sqrt(Math.pow(Ne-Ce,2)+Math.pow(Je-Re,2))),Ce=Ne,Re=Je}var dt=ie.length-3;ie[2]=1,xt(ie,0,dt,se),ie[dt+2]=1,ie.size=Math.abs(He),ie.start=0,ie.end=ie.size}function vn(Pe,ie,se,he){for(var Ce=0;Ce<Pe.length;Ce++){var Re=[];Rt(Pe[Ce],Re,se,he),ie.push(Re)}}function Te(Pe){return Pe/360+.5}function F(Pe){var ie=Math.sin(Pe*Math.PI/180),se=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return se<0?0:se>1?1:se}function O(Pe,ie,se,he,Ce,Re,He,Ue){if(he/=ie,Re>=(se/=ie)&&He<he)return Pe;if(He<se||Re>=he)return null;for(var Ne=[],Je=0;Je<Pe.length;Je++){var dt=Pe[Je],mt=dt.geometry,pt=dt.type,en=Ce===0?dt.minX:dt.minY,an=Ce===0?dt.maxX:dt.maxY;if(en>=se&&an<he)Ne.push(dt);else if(!(an<se||en>=he)){var Ut=[];if(pt==="Point"||pt==="MultiPoint")ye(mt,Ut,se,he,Ce);else if(pt==="LineString")We(mt,Ut,se,he,Ce,!1,Ue.lineMetrics);else if(pt==="MultiLineString")Ge(mt,Ut,se,he,Ce,!1);else if(pt==="Polygon")Ge(mt,Ut,se,he,Ce,!0);else if(pt==="MultiPolygon")for(var Xt=0;Xt<mt.length;Xt++){var ln=[];Ge(mt[Xt],ln,se,he,Ce,!0),ln.length&&Ut.push(ln)}if(Ut.length){if(Ue.lineMetrics&&pt==="LineString"){for(Xt=0;Xt<Ut.length;Xt++)Ne.push(Ye(dt.id,pt,Ut[Xt],dt.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(Ut.length===1?(pt="LineString",Ut=Ut[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=Ut.length===3?"Point":"MultiPoint"),Ne.push(Ye(dt.id,pt,Ut,dt.tags))}}}return Ne.length?Ne:null}function ye(Pe,ie,se,he,Ce){for(var Re=0;Re<Pe.length;Re+=3){var He=Pe[Re+Ce];He>=se&&He<=he&&(ie.push(Pe[Re]),ie.push(Pe[Re+1]),ie.push(Pe[Re+2]))}}function We(Pe,ie,se,he,Ce,Re,He){for(var Ue,Ne,Je=tt(Pe),dt=Ce===0?L:j,mt=Pe.start,pt=0;pt<Pe.length-3;pt+=3){var en=Pe[pt],an=Pe[pt+1],Ut=Pe[pt+2],Xt=Pe[pt+3],ln=Pe[pt+4],bn=Ce===0?en:an,wn=Ce===0?Xt:ln,Mn=!1;He&&(Ue=Math.sqrt(Math.pow(en-Xt,2)+Math.pow(an-ln,2))),bn<se?wn>se&&(Ne=dt(Je,en,an,Xt,ln,se),He&&(Je.start=mt+Ue*Ne)):bn>he?wn<he&&(Ne=dt(Je,en,an,Xt,ln,he),He&&(Je.start=mt+Ue*Ne)):ae(Je,en,an,Ut),wn<se&&bn>=se&&(Ne=dt(Je,en,an,Xt,ln,se),Mn=!0),wn>he&&bn<=he&&(Ne=dt(Je,en,an,Xt,ln,he),Mn=!0),!Re&&Mn&&(He&&(Je.end=mt+Ue*Ne),ie.push(Je),Je=tt(Pe)),He&&(mt+=Ue)}var Hn=Pe.length-3;en=Pe[Hn],an=Pe[Hn+1],Ut=Pe[Hn+2],(bn=Ce===0?en:an)>=se&&bn<=he&&ae(Je,en,an,Ut),Hn=Je.length-3,Re&&Hn>=3&&(Je[Hn]!==Je[0]||Je[Hn+1]!==Je[1])&&ae(Je,Je[0],Je[1],Je[2]),Je.length&&ie.push(Je)}function tt(Pe){var ie=[];return ie.size=Pe.size,ie.start=Pe.start,ie.end=Pe.end,ie}function Ge(Pe,ie,se,he,Ce,Re){for(var He=0;He<Pe.length;He++)We(Pe[He],ie,se,he,Ce,Re,!1)}function ae(Pe,ie,se,he){Pe.push(ie),Pe.push(se),Pe.push(he)}function L(Pe,ie,se,he,Ce,Re){var He=(Re-ie)/(he-ie);return Pe.push(Re),Pe.push(se+(Ce-se)*He),Pe.push(1),He}function j(Pe,ie,se,he,Ce,Re){var He=(Re-se)/(Ce-se);return Pe.push(ie+(he-ie)*He),Pe.push(Re),Pe.push(1),He}function Ee(Pe,ie){for(var se=[],he=0;he<Pe.length;he++){var Ce,Re=Pe[he],He=Re.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")Ce=Se(Re.geometry,ie);else if(He==="MultiLineString"||He==="Polygon"){Ce=[];for(var Ue=0;Ue<Re.geometry.length;Ue++)Ce.push(Se(Re.geometry[Ue],ie))}else if(He==="MultiPolygon")for(Ce=[],Ue=0;Ue<Re.geometry.length;Ue++){for(var Ne=[],Je=0;Je<Re.geometry[Ue].length;Je++)Ne.push(Se(Re.geometry[Ue][Je],ie));Ce.push(Ne)}se.push(Ye(Re.id,He,Ce,Re.tags))}return se}function Se(Pe,ie){var se=[];se.size=Pe.size,Pe.start!==void 0&&(se.start=Pe.start,se.end=Pe.end);for(var he=0;he<Pe.length;he+=3)se.push(Pe[he]+ie,Pe[he+1],Pe[he+2]);return se}function Ke(Pe,ie){if(Pe.transformed)return Pe;var se,he,Ce,Re=1<<Pe.z,He=Pe.x,Ue=Pe.y;for(se=0;se<Pe.features.length;se++){var Ne=Pe.features[se],Je=Ne.geometry,dt=Ne.type;if(Ne.geometry=[],dt===1)for(he=0;he<Je.length;he+=2)Ne.geometry.push(Qe(Je[he],Je[he+1],ie,Re,He,Ue));else for(he=0;he<Je.length;he++){var mt=[];for(Ce=0;Ce<Je[he].length;Ce+=2)mt.push(Qe(Je[he][Ce],Je[he][Ce+1],ie,Re,He,Ue));Ne.geometry.push(mt)}}return Pe.transformed=!0,Pe}function Qe(Pe,ie,se,he,Ce,Re){return[Math.round(se*(Pe*he-Ce)),Math.round(se*(ie*he-Re))]}function Gt(Pe,ie,se,he,Ce){for(var Re=ie===Ce.maxZoom?0:Ce.tolerance/((1<<ie)*Ce.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:he,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<Pe.length;Ue++){He.numFeatures++,cn(He,Pe[Ue],Re,Ce);var Ne=Pe[Ue].minX,Je=Pe[Ue].minY,dt=Pe[Ue].maxX,mt=Pe[Ue].maxY;Ne<He.minX&&(He.minX=Ne),Je<He.minY&&(He.minY=Je),dt>He.maxX&&(He.maxX=dt),mt>He.maxY&&(He.maxY=mt)}return He}function cn(Pe,ie,se,he){var Ce=ie.geometry,Re=ie.type,He=[];if(Re==="Point"||Re==="MultiPoint")for(var Ue=0;Ue<Ce.length;Ue+=3)He.push(Ce[Ue]),He.push(Ce[Ue+1]),Pe.numPoints++,Pe.numSimplified++;else if(Re==="LineString")Lt(He,Ce,Pe,se,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(Ue=0;Ue<Ce.length;Ue++)Lt(He,Ce[Ue],Pe,se,Re==="Polygon",Ue===0);else if(Re==="MultiPolygon")for(var Ne=0;Ne<Ce.length;Ne++){var Je=Ce[Ne];for(Ue=0;Ue<Je.length;Ue++)Lt(He,Je[Ue],Pe,se,!0,Ue===0)}if(He.length){var dt=ie.tags||null;if(Re==="LineString"&&he.lineMetrics){for(var mt in dt={},ie.tags)dt[mt]=ie.tags[mt];dt.mapbox_clip_start=Ce.start/Ce.size,dt.mapbox_clip_end=Ce.end/Ce.size}var pt={geometry:He,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:dt};ie.id!==null&&(pt.id=ie.id),Pe.features.push(pt)}}function Lt(Pe,ie,se,he,Ce,Re){var He=he*he;if(he>0&&ie.size<(Ce?He:he))se.numPoints+=ie.length/3;else{for(var Ue=[],Ne=0;Ne<ie.length;Ne+=3)(he===0||ie[Ne+2]>He)&&(se.numSimplified++,Ue.push(ie[Ne]),Ue.push(ie[Ne+1])),se.numPoints++;Ce&&function(Je,dt){for(var mt=0,pt=0,en=Je.length,an=en-2;pt<en;an=pt,pt+=2)mt+=(Je[pt]-Je[an])*(Je[pt+1]+Je[an+1]);if(mt>0===dt)for(pt=0,en=Je.length;pt<en/2;pt+=2){var Ut=Je[pt],Xt=Je[pt+1];Je[pt]=Je[en-2-pt],Je[pt+1]=Je[en-1-pt],Je[en-2-pt]=Ut,Je[en-1-pt]=Xt}}(Ue,Re),Pe.push(Ue)}}function In(Pe,ie){var se=(ie=this.options=function(Ce,Re){for(var He in Re)Ce[He]=Re[He];return Ce}(Object.create(this.options),ie)).debug;if(se&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var he=function(Ce,Re){var He=[];if(Ce.type==="FeatureCollection")for(var Ue=0;Ue<Ce.features.length;Ue++)En(He,Ce.features[Ue],Re,Ue);else En(He,Ce.type==="Feature"?Ce:{geometry:Ce},Re);return He}(Pe,ie);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=function(Ce,Re){var He=Re.buffer/Re.extent,Ue=Ce,Ne=O(Ce,1,-1-He,He,0,-1,2,Re),Je=O(Ce,1,1-He,2+He,0,-1,2,Re);return(Ne||Je)&&(Ue=O(Ce,1,-He,1+He,0,-1,2,Re)||[],Ne&&(Ue=Ee(Ne,1).concat(Ue)),Je&&(Ue=Ue.concat(Ee(Je,-1)))),Ue}(he,ie),he.length&&this.splitTile(he,0,0,0),se&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _n(Pe,ie,se){return 32*((1<<Pe)*se+ie)+Pe}function wr(Pe,ie){return ie?Pe.properties[ie]:Pe.id}function ni(Pe,ie){if(Pe==null)return!0;if(Pe.type==="Feature")return wr(Pe,ie)!=null;if(Pe.type==="FeatureCollection"){const se=new Set;for(const he of Pe.features){const Ce=wr(he,ie);if(Ce==null||se.has(Ce))return!1;se.add(Ce)}return!0}return!1}function ar(Pe,ie){const se=new Map;if(Pe!=null)if(Pe.type==="Feature")se.set(wr(Pe,ie),Pe);else for(const he of Pe.features)se.set(wr(he,ie),he);return se}function Ln(Pe,ie){const se=Pe.tileID.canonical;if(!this._geoJSONIndex)return ie(null,null);const he=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!he)return ie(null,null);const Ce=new class{constructor(He){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=He.length,this._features=He}feature(He){return new class{constructor(Ue){this._feature=Ue,this.extent=a.EXTENT,this.type=Ue.type,this.properties=Ue.tags,"id"in Ue&&!isNaN(Ue.id)&&(this.id=parseInt(Ue.id,10))}loadGeometry(){if(this._feature.type===1){const Ue=[];for(const Ne of this._feature.geometry)Ue.push([new a.Point(Ne[0],Ne[1])]);return Ue}{const Ue=[];for(const Ne of this._feature.geometry){const Je=[];for(const dt of Ne)Je.push(new a.Point(dt[0],dt[1]));Ue.push(Je)}return Ue}}toGeoJSON(Ue,Ne,Je){return $.call(this,Ue,Ne,Je)}}(this._features[He])}}(he.features);let Re=me(Ce);Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),ie(null,{vectorTile:Ce,rawData:Re.buffer})}In.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},In.prototype.splitTile=function(Pe,ie,se,he,Ce,Re,He){for(var Ue=[Pe,ie,se,he],Ne=this.options,Je=Ne.debug;Ue.length;){he=Ue.pop(),se=Ue.pop(),ie=Ue.pop(),Pe=Ue.pop();var dt=1<<ie,mt=_n(ie,se,he),pt=this.tiles[mt];if(!pt&&(Je>1&&console.time("creation"),pt=this.tiles[mt]=Gt(Pe,ie,se,he,Ne),this.tileCoords.push({z:ie,x:se,y:he}),Je)){Je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,se,he,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var en="z"+ie;this.stats[en]=(this.stats[en]||0)+1,this.total++}if(pt.source=Pe,Ce){if(ie===Ne.maxZoom||ie===Ce)continue;var an=1<<Ce-ie;if(se!==Math.floor(Re/an)||he!==Math.floor(He/an))continue}else if(ie===Ne.indexMaxZoom||pt.numPoints<=Ne.indexMaxPoints)continue;if(pt.source=null,Pe.length!==0){Je>1&&console.time("clipping");var Ut,Xt,ln,bn,wn,Mn,Hn=.5*Ne.buffer/Ne.extent,mr=.5-Hn,hn=.5+Hn,tr=1+Hn;Ut=Xt=ln=bn=null,wn=O(Pe,dt,se-Hn,se+hn,0,pt.minX,pt.maxX,Ne),Mn=O(Pe,dt,se+mr,se+tr,0,pt.minX,pt.maxX,Ne),Pe=null,wn&&(Ut=O(wn,dt,he-Hn,he+hn,1,pt.minY,pt.maxY,Ne),Xt=O(wn,dt,he+mr,he+tr,1,pt.minY,pt.maxY,Ne),wn=null),Mn&&(ln=O(Mn,dt,he-Hn,he+hn,1,pt.minY,pt.maxY,Ne),bn=O(Mn,dt,he+mr,he+tr,1,pt.minY,pt.maxY,Ne),Mn=null),Je>1&&console.timeEnd("clipping"),Ue.push(Ut||[],ie+1,2*se,2*he),Ue.push(Xt||[],ie+1,2*se,2*he+1),Ue.push(ln||[],ie+1,2*se+1,2*he),Ue.push(bn||[],ie+1,2*se+1,2*he+1)}}},In.prototype.getTile=function(Pe,ie,se){var he=this.options,Ce=he.extent,Re=he.debug;if(Pe<0||Pe>24)return null;var He=1<<Pe,Ue=_n(Pe,ie=(ie%He+He)%He,se);if(this.tiles[Ue])return Ke(this.tiles[Ue],Ce);Re>1&&console.log("drilling down to z%d-%d-%d",Pe,ie,se);for(var Ne,Je=Pe,dt=ie,mt=se;!Ne&&Je>0;)Je--,dt=Math.floor(dt/2),mt=Math.floor(mt/2),Ne=this.tiles[_n(Je,dt,mt)];return Ne&&Ne.source?(Re>1&&console.log("found parent tile z%d-%d-%d",Je,dt,mt),Re>1&&console.time("drilling down"),this.splitTile(Ne.source,Je,dt,mt,Pe,ie,se),Re>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Ke(this.tiles[Ue],Ce):null):null};class lr extends R{constructor(ie,se,he,Ce){super(ie,se,he,Ln),this._dataUpdateable=new Map,this.loadGeoJSON=(Re,He)=>{const{promoteId:Ue}=Re;if(Re.request)return a.getJSON(Re.request,(Ne,Je,dt,mt)=>{this._dataUpdateable=ni(Je,Ue)?ar(Je,Ue):void 0,He(Ne,Je,dt,mt)});if(typeof Re.data=="string")try{const Ne=JSON.parse(Re.data);this._dataUpdateable=ni(Ne,Ue)?ar(Ne,Ue):void 0,He(null,Ne)}catch{He(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`))}else Re.dataDiff?this._dataUpdateable?(function(Ne,Je,dt){var mt,pt,en,an;if(Je.removeAll&&Ne.clear(),Je.remove)for(const Ut of Je.remove)Ne.delete(Ut);if(Je.add)for(const Ut of Je.add){const Xt=wr(Ut,dt);Xt!=null&&Ne.set(Xt,Ut)}if(Je.update)for(const Ut of Je.update){let Xt=Ne.get(Ut.id);if(Xt==null)continue;const ln=!Ut.removeAllProperties&&(((mt=Ut.removeProperties)===null||mt===void 0?void 0:mt.length)>0||((pt=Ut.addOrUpdateProperties)===null||pt===void 0?void 0:pt.length)>0);if((Ut.newGeometry||Ut.removeAllProperties||ln)&&(Xt={...Xt},Ne.set(Ut.id,Xt),ln&&(Xt.properties={...Xt.properties})),Ut.newGeometry&&(Xt.geometry=Ut.newGeometry),Ut.removeAllProperties)Xt.properties={};else if(((en=Ut.removeProperties)===null||en===void 0?void 0:en.length)>0)for(const bn of Ut.removeProperties)Object.prototype.hasOwnProperty.call(Xt.properties,bn)&&delete Xt.properties[bn];if(((an=Ut.addOrUpdateProperties)===null||an===void 0?void 0:an.length)>0)for(const{key:bn,value:wn}of Ut.addOrUpdateProperties)Xt.properties[bn]=wn}}(this._dataUpdateable,Re.dataDiff,Ue),He(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):He(new Error(`Cannot update existing geojson data in ${Re.source}`)):He(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Ce&&(this.loadGeoJSON=Ce)}loadData(ie,se){var he;(he=this._pendingRequest)===null||he===void 0||he.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ce=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new a.RequestPerformance(ie.request);this._pendingCallback=se,this._pendingRequest=this.loadGeoJSON(ie,(Re,He)=>{if(delete this._pendingCallback,delete this._pendingRequest,Re||!He)return se(Re);if(typeof He!="object")return se(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`));{G(He,!0);try{if(ie.filter){const Ne=a.createExpression(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(dt=>`${dt.key}: ${dt.message}`).join(", "));He={type:"FeatureCollection",features:He.features.filter(dt=>Ne.value.evaluate({zoom:0},dt))}}this._geoJSONIndex=ie.cluster?new Ve(function({superclusterOptions:Ne,clusterProperties:Je}){if(!Je||!Ne)return Ne;const dt={},mt={},pt={accumulated:null,zoom:0},en={properties:null},an=Object.keys(Je);for(const Ut of an){const[Xt,ln]=Je[Ut],bn=a.createExpression(ln),wn=a.createExpression(typeof Xt=="string"?[Xt,["accumulated"],["get",Ut]]:Xt);dt[Ut]=bn.value,mt[Ut]=wn.value}return Ne.map=Ut=>{en.properties=Ut;const Xt={};for(const ln of an)Xt[ln]=dt[ln].evaluate(pt,en);return Xt},Ne.reduce=(Ut,Xt)=>{en.properties=Xt;for(const ln of an)pt.accumulated=Ut[ln],Ut[ln]=mt[ln].evaluate(pt,en)},Ne}(ie)).load(He.features):function(Ne,Je){return new In(Ne,Je)}(He,ie.geojsonVtOptions)}catch(Ne){return se(Ne)}this.loaded={};const Ue={};if(Ce){const Ne=Ce.finish();Ne&&(Ue.resourceTiming={},Ue.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Ne)))}se(null,Ue)}})}reloadTile(ie,se){const he=this.loaded;return he&&he[ie.uid]?super.reloadTile(ie,se):this.loadTile(ie,se)}removeSource(ie,se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),se()}getClusterExpansionZoom(ie,se){try{se(null,this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId))}catch(he){se(he)}}getClusterChildren(ie,se){try{se(null,this._geoJSONIndex.getChildren(ie.clusterId))}catch(he){se(he)}}getClusterLeaves(ie,se){try{se(null,this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset))}catch(he){se(he)}}}class di{constructor(ie){this.self=ie,this.actor=new a.Actor(ie,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:R,geojson:lr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(se,he)=>{if(this.workerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.workerSourceTypes[se]=he},this.self.registerRTLTextPlugin=se=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=se.applyArabicShaping,a.plugin.processBidirectionalText=se.processBidirectionalText,a.plugin.processStyledBidirectionalText=se.processStyledBidirectionalText}}setReferrer(ie,se){this.referrer=se}setImages(ie,se,he){this.availableImages[ie]=se;for(const Ce in this.workerSources[ie]){const Re=this.workerSources[ie][Ce];for(const He in Re)Re[He].availableImages=se}he()}setLayers(ie,se,he){this.getLayerIndex(ie).replace(se),he()}updateLayers(ie,se,he){this.getLayerIndex(ie).update(se.layers,se.removedIds),he()}loadTile(ie,se,he){this.getWorkerSource(ie,se.type,se.source).loadTile(se,he)}loadDEMTile(ie,se,he){this.getDEMWorkerSource(ie,se.source).loadTile(se,he)}reloadTile(ie,se,he){this.getWorkerSource(ie,se.type,se.source).reloadTile(se,he)}abortTile(ie,se,he){this.getWorkerSource(ie,se.type,se.source).abortTile(se,he)}removeTile(ie,se,he){this.getWorkerSource(ie,se.type,se.source).removeTile(se,he)}removeDEMTile(ie,se){this.getDEMWorkerSource(ie,se.source).removeTile(se)}removeSource(ie,se,he){if(!this.workerSources[ie]||!this.workerSources[ie][se.type]||!this.workerSources[ie][se.type][se.source])return;const Ce=this.workerSources[ie][se.type][se.source];delete this.workerSources[ie][se.type][se.source],Ce.removeSource!==void 0?Ce.removeSource(se,he):he()}loadWorkerSource(ie,se,he){try{this.self.importScripts(se.url),he()}catch(Ce){he(Ce.toString())}}syncRTLPluginState(ie,se,he){try{a.plugin.setState(se);const Ce=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Ce!=null){this.self.importScripts(Ce);const Re=a.plugin.isParsed();he(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ce}`),Re)}}catch(Ce){he(Ce.toString())}}getAvailableImages(ie){let se=this.availableImages[ie];return se||(se=[]),se}getLayerIndex(ie){let se=this.layerIndexes[ie];return se||(se=this.layerIndexes[ie]=new b),se}getWorkerSource(ie,se,he){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][se]||(this.workerSources[ie][se]={}),!this.workerSources[ie][se][he]){const Ce={send:(Re,He,Ue)=>{this.actor.send(Re,He,Ue,ie)}};this.workerSources[ie][se][he]=new this.workerSourceTypes[se](Ce,this.getLayerIndex(ie),this.getAvailableImages(ie))}return this.workerSources[ie][se][he]}getDEMWorkerSource(ie,se){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][se]||(this.demWorkerSources[ie][se]=new Q),this.demWorkerSources[ie][se]}}return a.isWorker()&&(self.worker=new di(self)),di}),d(["./shared"],function(a){var b="3.1.0";class w{static testProp(r){if(!w.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in w.docStyle)return r[u];return r[0]}static create(r,u,f){const g=window.document.createElement(r);return u!==void 0&&(g.className=u),f&&f.appendChild(g),g}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,u){r.style[w.transformProp]=u}static addEventListener(r,u,f,g={}){r.addEventListener(u,f,"passive"in g?g:g.capture)}static removeEventListener(r,u,f,g={}){r.removeEventListener(u,f,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,u){const f=r.getBoundingClientRect();return new a.Point(u.clientX-f.left-r.clientLeft,u.clientY-f.top-r.clientTop)}static touchPos(r,u){const f=r.getBoundingClientRect(),g=[];for(let x=0;x<u.length;x++)g.push(new a.Point(u[x].clientX-f.left-r.clientLeft,u[x].clientY-f.top-r.clientTop));return g}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const C={supported:!1,testSupport:function(p){!R&&z&&(Q?K(p):E=p)}};let E,z,R=!1,Q=!1;function K(p){const r=p.createTexture();p.bindTexture(p.TEXTURE_2D,r);try{if(p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,z),p.isContextLost())return;C.supported=!0}catch{}p.deleteTexture(r),R=!0}var pe;typeof document<"u"&&(z=document.createElement("img"),z.onload=function(){E&&K(E),E=null,Q=!0},z.onerror=function(){R=!0,E=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(p){let r,u,f,g;p.resetRequestQueue=()=>{r=[],u=0,f=0,g={}},p.addThrottleControl=N=>{const Y=f++;return g[Y]=N,Y},p.removeThrottleControl=N=>{delete g[N],k()},p.getImage=(N,Y,q=!0)=>{C.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*");const fe={requestParameters:N,supportImageRefresh:q,callback:Y,cancelled:!1,completed:!1,cancel:()=>{fe.completed||fe.cancelled||(fe.cancelled=!0,fe.innerRequest&&(fe.innerRequest.cancel(),u--),k())}};return r.push(fe),k(),fe};const x=N=>{const{requestParameters:Y,supportImageRefresh:q,callback:fe}=N;return a.extend(Y,{type:"image"}),(q!==!1||a.isWorker()||a.getProtocolAction(Y.url)||Y.headers&&!Object.keys(Y.headers).reduce((ze,Ae)=>ze&&Ae==="accept",!0)?a.makeRequest:M)(Y,(ze,Ae,Me,je)=>{A(N,fe,ze,Ae,Me,je)})},A=(N,Y,q,fe,ze,Ae)=>{q?Y(q):fe instanceof HTMLImageElement||fe instanceof ImageBitmap?Y(null,fe):fe&&((Me,je)=>{typeof createImageBitmap=="function"?a.arrayBufferToImageBitmap(Me,je):a.arrayBufferToImage(Me,je)})(fe,(Me,je)=>{Me!=null?Y(Me):je!=null&&Y(null,je,{cacheControl:ze,expires:Ae})}),N.cancelled||(N.completed=!0,u--,k())},k=()=>{const N=(()=>{const Y=Object.keys(g);let q=!1;if(Y.length>0){for(const fe of Y)if(q=g[fe](),q)break}return q})()?a.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let Y=u;Y<N&&r.length>0;Y++){const q=r.shift();if(q.cancelled){Y--;continue}const fe=x(q);u++,q.innerRequest=fe}},M=(N,Y)=>{const q=new Image,fe=N.url;let ze=!1;const Ae=N.credentials;return Ae&&Ae==="include"?q.crossOrigin="use-credentials":(Ae&&Ae==="same-origin"||!a.sameOrigin(fe))&&(q.crossOrigin="anonymous"),q.fetchPriority="high",q.onload=()=>{Y(null,q),q.onerror=q.onload=null},q.onerror=()=>{ze||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),q.onerror=q.onload=null},q.src=fe,{cancel:()=>{ze=!0,q.src=""}}}}(pe||(pe={})),pe.resetRequestQueue();var G,$=pe;(function(p){p.Glyphs="Glyphs",p.Image="Image",p.Source="Source",p.SpriteImage="SpriteImage",p.SpriteJSON="SpriteJSON",p.Style="Style",p.Tile="Tile",p.Unknown="Unknown"})(G||(G={}));class B{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,f){const g=function(x){const A=x.match(oe);if(!A)throw new Error(`Unable to parse URL "${x}"`);return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}(r);return g.path+=`${u}${f}`,function(x){const A=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${A}`}(g)}setTransformRequest(r){this._transformRequestFn=r}}const oe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function W(p){var r=new a.ARRAY_TYPE(3);return r[0]=p[0],r[1]=p[1],r[2]=p[2],r}var D,S=function(p,r,u){return p[0]=r[0]-u[0],p[1]=r[1]-u[1],p[2]=r[2]-u[2],p};D=new a.ARRAY_TYPE(3),a.ARRAY_TYPE!=Float32Array&&(D[0]=0,D[1]=0,D[2]=0);var P=function(p){var r=p[0],u=p[1];return r*r+u*u};function Z(p){const r=[];if(typeof p=="string")r.push({id:"default",url:p});else if(p&&p.length>0){const u=[];for(const{id:f,url:g}of p){const x=`${f}${g}`;u.indexOf(x)===-1&&(u.push(x),r.push({id:f,url:g}))}}return r}function J(p,r,u,f,g){if(f)return void p(f);if(g!==Object.values(r).length||g!==Object.values(u).length)return;const x={};for(const A in r){x[A]={};const k=a.exported.getImageCanvasContext(u[A]),M=r[A];for(const N in M){const{width:Y,height:q,x:fe,y:ze,sdf:Ae,pixelRatio:Me,stretchX:je,stretchY:Xe,content:it}=M[N];x[A][N]={data:null,pixelRatio:Me,sdf:Ae,stretchX:je,stretchY:Xe,content:it,spriteData:{width:Y,height:q,x:fe,y:ze,context:k}}}}p(null,x)}(function(){var p=new a.ARRAY_TYPE(2);a.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0)})();class H{constructor(r,u,f,g){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(u,g)}update(r,u,f){const{width:g,height:x}=r,A=!(this.size&&this.size[0]===g&&this.size[1]===x||f),{context:k}=this,{gl:M}=k;if(this.useMipmap=!!(u&&u.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!u||u.premultiply!==!1)),A)this.size=[g,x],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||a.isImageBitmap(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,g,x,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:N,y:Y}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||a.isImageBitmap(r)?M.texSubImage2D(M.TEXTURE_2D,0,N,Y,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,N,Y,g,x,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,u,f){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),r!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,r),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||r),this.filter=r),u!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ve(p){const{userImage:r}=p;return!!(r&&r.render&&r.render())&&(p.data.replace(new Uint8Array(r.data.buffer)),!0)}class _e extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new a.RGBAImage({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let f=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,u){if(!r)return!0;let f=0;for(const g of r){if(g[0]<f||g[1]<g[0]||u<g[1])return!1;f=g[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const f=u.spriteData,g=f&&f.width||u.data.width,x=f&&f.height||u.data.height;return!(r[0]<0||g<r[0]||r[1]<0||x<r[1]||r[2]<0||g<r[2]||r[3]<0||x<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,f=!0){const g=this.getImage(r);if(f&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let f=!0;if(!this.isLoaded())for(const g of r)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const f={};for(const g of r){let x=this.getImage(g);x||(this.fire(new a.Event("styleimagemissing",{id:g})),x=this.getImage(g)),x?f[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:a.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],f=this.getImage(r);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new a.ImagePosition(g,f);this.patterns[r]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new H(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const x in this.patterns)r.push(this.patterns[x].bin);const{w:u,h:f}=a.potpack(r),g=this.atlasImage;g.resize({width:u||1,height:f||1});for(const x in this.patterns){const{bin:A}=this.patterns[x],k=A.x+1,M=A.y+1,N=this.getImage(x).data,Y=N.width,q=N.height;a.RGBAImage.copy(N,g,{x:0,y:0},{x:k,y:M},{width:Y,height:q}),a.RGBAImage.copy(N,g,{x:0,y:q-1},{x:k,y:M-1},{width:Y,height:1}),a.RGBAImage.copy(N,g,{x:0,y:0},{x:k,y:M+q},{width:Y,height:1}),a.RGBAImage.copy(N,g,{x:Y-1,y:0},{x:k-1,y:M},{width:1,height:q}),a.RGBAImage.copy(N,g,{x:0,y:0},{x:k+Y,y:M},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||a.warnOnce(`Image with ID: "${u}" was not found`),ve(f)&&this.updateImage(u,f)}}}const xe=1e20;function te(p,r,u,f,g,x,A,k,M){for(let N=r;N<r+f;N++)le(p,u*x+N,x,g,A,k,M);for(let N=u;N<u+g;N++)le(p,N*x+r,1,f,A,k,M)}function le(p,r,u,f,g,x,A){x[0]=0,A[0]=-xe,A[1]=xe,g[0]=p[r];for(let k=1,M=0,N=0;k<f;k++){g[k]=p[r+k*u];const Y=k*k;do{const q=x[M];N=(g[k]-g[q]+Y-q*q)/(k-q)/2}while(N<=A[M]&&--M>-1);M++,x[M]=k,A[M]=N,A[M+1]=xe}for(let k=0,M=0;k<f;k++){for(;A[M+1]<k;)M++;const N=x[M],Y=k-N;p[r+k*u]=g[N]+Y*Y}}class ne{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const f=[];for(const g in r)for(const x of r[g])f.push({stack:g,id:x});a.asyncAll(f,({stack:g,id:x},A)=>{let k=this.entries[g];k||(k=this.entries[g]={glyphs:{},requests:{},ranges:{}});let M=k.glyphs[x];if(M!==void 0)return void A(null,{stack:g,id:x,glyph:M});if(M=this._tinySDF(k,g,x),M)return k.glyphs[x]=M,void A(null,{stack:g,id:x,glyph:M});const N=Math.floor(x/256);if(256*N>65535)return void A(new Error("glyphs > 65535 not supported"));if(k.ranges[N])return void A(null,{stack:g,id:x,glyph:M});if(!this.url)return void A(new Error("glyphsUrl is not set"));let Y=k.requests[N];Y||(Y=k.requests[N]=[],ne.loadGlyphRange(g,N,this.url,this.requestManager,(q,fe)=>{if(fe){for(const ze in fe)this._doesCharSupportLocalGlyph(+ze)||(k.glyphs[+ze]=fe[+ze]);k.ranges[N]=!0}for(const ze of Y)ze(q,fe);delete k.requests[N]})),Y.push((q,fe)=>{q?A(q):fe&&A(null,{stack:g,id:x,glyph:fe[x]||null})})},(g,x)=>{if(g)u(g);else if(x){const A={};for(const{stack:k,id:M,glyph:N}of x)(A[k]||(A[k]={}))[M]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};u(null,A)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](r)||a.unicodeBlockLookup["Hangul Syllables"](r)||a.unicodeBlockLookup.Hiragana(r)||a.unicodeBlockLookup.Katakana(r))}_tinySDF(r,u,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let x=r.tinySDF;if(!x){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),x=r.tinySDF=new ne.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:g,fontWeight:k})}const A=x.draw(String.fromCharCode(f));return{id:f,bitmap:new a.AlphaImage({width:A.width||30,height:A.height||30},A.data),metrics:{width:A.glyphWidth||24,height:A.glyphHeight||24,left:A.glyphLeft||0,top:A.glyphTop-27||-8,advance:A.glyphAdvance||24}}}}ne.loadGlyphRange=function(p,r,u,f,g){const x=256*r,A=x+255,k=f.transformRequest(u.replace("{fontstack}",p).replace("{range}",`${x}-${A}`),G.Glyphs);a.getArrayBuffer(k,(M,N)=>{if(M)g(M);else if(N){const Y={};for(const q of a.parseGlyphPbf(N))Y[q.id]=q;g(null,Y)}})},ne.TinySDF=class{constructor({fontSize:p=24,buffer:r=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:A="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=u;const k=this.size=p+4*r,M=this._createCanvas(k),N=this.ctx=M.getContext("2d",{willReadFrequently:!0});N.font=`${A} ${x} ${p}px ${g}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(p){const r=document.createElement("canvas");return r.width=r.height=p,r}draw(p){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(p),A=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),M=Math.min(this.size-this.buffer,A+Math.ceil(f)),N=k+2*this.buffer,Y=M+2*this.buffer,q=Math.max(N*Y,0),fe=new Uint8ClampedArray(q),ze={data:fe,width:N,height:Y,glyphWidth:k,glyphHeight:M,glyphTop:A,glyphLeft:0,glyphAdvance:r};if(k===0||M===0)return ze;const{ctx:Ae,buffer:Me,gridInner:je,gridOuter:Xe}=this;Ae.clearRect(Me,Me,k,M),Ae.fillText(p,Me,Me+A);const it=Ae.getImageData(Me,Me,k,M);Xe.fill(xe,0,q),je.fill(0,0,q);for(let Fe=0;Fe<M;Fe++)for(let nt=0;nt<k;nt++){const lt=it.data[4*(Fe*k+nt)+3]/255;if(lt===0)continue;const vt=(Fe+Me)*N+nt+Me;if(lt===1)Xe[vt]=0,je[vt]=xe;else{const wt=.5-lt;Xe[vt]=wt>0?wt*wt:0,je[vt]=wt<0?wt*wt:0}}te(Xe,0,0,N,Y,N,this.f,this.v,this.z),te(je,Me,Me,k,M,N,this.f,this.v,this.z);for(let Fe=0;Fe<q;Fe++){const nt=Math.sqrt(Xe[Fe])-Math.sqrt(je[Fe]);fe[Fe]=Math.round(255-255*(nt/this.radius+this.cutoff))}return ze}};class re{constructor(){this.specification=a.v8Spec.light.position}possiblyEvaluate(r,u){return a.sphericalToCartesian(r.expression.evaluate(u))}interpolate(r,u,f){return{x:a.interpolate.number(r.x,u.x,f),y:a.interpolate.number(r.y,u.y,f),z:a.interpolate.number(r.z,u.z,f)}}}let me,we;class be extends a.Evented{constructor(r){super(),me=me||new a.Properties({anchor:new a.DataConstantProperty(a.v8Spec.light.anchor),position:new re,color:new a.DataConstantProperty(a.v8Spec.light.color),intensity:new a.DataConstantProperty(a.v8Spec.light.intensity)}),this._transitionable=new a.Transitionable(me),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(a.validateLight,r,u))for(const f in r){const g=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f){return(!f||f.validate!==!1)&&a.emitValidationErrors(this,r.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.v8Spec})))}}class Be{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const f=r.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,u)),this.dashEntry[f]}getDashRanges(r,u,f){const g=[];let x=r.length%2==1?-r[r.length-1]*f:0,A=r[0]*f,k=!0;g.push({left:x,right:A,isDash:k,zeroLength:r[0]===0});let M=r[0];for(let N=1;N<r.length;N++){k=!k;const Y=r[N];x=M*f,M+=Y,A=M*f,g.push({left:x,right:A,isDash:k,zeroLength:Y===0})}return g}addRoundDash(r,u,f){const g=u/2;for(let x=-f;x<=f;x++){const A=this.width*(this.nextRow+f+x);let k=0,M=r[k];for(let N=0;N<this.width;N++){N/M.right>1&&(M=r[++k]);const Y=Math.abs(N-M.left),q=Math.abs(N-M.right),fe=Math.min(Y,q);let ze;const Ae=x/f*(g+1);if(M.isDash){const Me=g-Math.abs(Ae);ze=Math.sqrt(fe*fe+Me*Me)}else ze=g-Math.sqrt(fe*fe+Ae*Ae);this.data[A+N]=Math.max(0,Math.min(255,ze+128))}}}addRegularDash(r){for(let k=r.length-1;k>=0;--k){const M=r[k],N=r[k+1];M.zeroLength?r.splice(k,1):N&&N.isDash===M.isDash&&(N.left=M.left,r.splice(k,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const g=this.width*this.nextRow;let x=0,A=r[x];for(let k=0;k<this.width;k++){k/A.right>1&&(A=r[++x]);const M=Math.abs(k-A.left),N=Math.abs(k-A.right),Y=Math.min(M,N);this.data[g+k]=Math.max(0,Math.min(255,(A.isDash?Y:-Y)+128))}}addDash(r,u){const f=u?7:0,g=2*f+1;if(this.nextRow+g>this.height)return a.warnOnce("LineAtlas out of space"),null;let x=0;for(let k=0;k<r.length;k++)x+=r[k];if(x!==0){const k=this.width/x,M=this.getDashRanges(r,this.width,k);u?this.addRoundDash(M,k,f):this.addRegularDash(M)}const A={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=g,this.dirty=!0,A}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Ie{constructor(r,u,f){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let x=0;x<g.length;x++){const A=new Ie.Actor(g[x],u,f);A.name=`Worker ${x}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,f){a.asyncAll(this.actors,(g,x)=>{g.send(r,u,x)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function Oe(p,r,u){const f=function(g,x){if(g)return u(g);if(x){const A=a.pick(a.extend(x,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(A.vectorLayers=x.vector_layers,A.vectorLayerIds=A.vectorLayers.map(k=>k.id)),u(null,A)}};return p.url?a.getJSON(r.transformRequest(p.url,G.Source),f):a.exported.frame(()=>f(null,p))}Ie.Actor=a.Actor;class $e{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.LngLat?new a.LngLat(r.lng,r.lat):a.LngLat.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.LngLat?new a.LngLat(r.lng,r.lat):a.LngLat.convert(r),this}extend(r){const u=this._sw,f=this._ne;let g,x;if(r instanceof a.LngLat)g=r,x=r;else{if(!(r instanceof $e))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend($e.convert(r)):this.extend(a.LngLat.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.LngLat.convert(r)):this;if(g=r._sw,x=r._ne,!g||!x)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new a.LngLat(g.lng,g.lat),this._ne=new a.LngLat(x.lng,x.lat)),this}getCenter(){return new a.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new a.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:f}=a.LngLat.convert(r);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(r){return r instanceof $e?r:r&&new $e(r)}static fromLngLat(r,u=0){const f=360*u/40075017,g=f/Math.cos(Math.PI/180*r.lat);return new $e(new a.LngLat(r.lng-g,r.lat-f),new a.LngLat(r.lng+g,r.lat+f))}}class Ve{constructor(r,u,f){this.bounds=$e.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),f=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*u),g=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*u),x=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*u),A=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*u);return r.x>=f&&r.x<x&&r.y>=g&&r.y<A}}class ot extends a.Evented{constructor(r,u,f,g){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Oe(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r?this.fire(new a.ErrorEvent(r)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new Ve(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,G.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(A,k){return delete r.request,r.aborted?u(null):A&&A.status!==404?u(A):(k&&k.resourceTiming&&(r.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&r.setExpiryData(k),r.loadVectorData(k,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",g,x.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",g,x.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ut extends a.Evented{constructor(r,u,f,g){super(),this.id=r,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Oe(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new a.ErrorEvent(r)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new Ve(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=$.getImage(this.map._requestManager.transformRequest(f,G.Tile),(g,x,A)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(g)r.state="errored",u(g);else if(x){this.map._refreshExpiredTiles&&A&&r.setExpiryData(A);const k=this.map.painter.context,M=k.gl;r.texture=this.map.painter.getTileTexture(x.width),r.texture?r.texture.update(x,{useMipmap:!0}):(r.texture=new H(k,x,M.RGBA,{useMipmap:!0}),r.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class gt extends ut{constructor(r,u,f,g){super(r,u,f,g),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function g(x,A){x&&(r.state="errored",u(x)),A&&(r.dem=A,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.request=$.getImage(this.map._requestManager.transformRequest(f,G.Tile),function(x,A){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(x)r.state="errored",u(x);else if(A){this.map._refreshExpiredTiles&&r.setExpiryData(A),delete A.cacheControl,delete A.expires;const k=a.isImageBitmap(A)&&(we==null&&(we=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),we)?A:a.exported.getImageData(A,1),M={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:k,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",M,g.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),r.neighboringTiles=this._getNeighboringTiles(r.tileID)}_getNeighboringTiles(r){const u=r.canonical,f=Math.pow(2,u.z),g=(u.x-1+f)%f,x=u.x===0?r.wrap-1:r.wrap,A=(u.x+1+f)%f,k=u.x+1===f?r.wrap+1:r.wrap,M={};return M[new a.OverscaledTileID(r.overscaledZ,x,u.z,g,u.y).key]={backfilled:!1},M[new a.OverscaledTileID(r.overscaledZ,k,u.z,A,u.y).key]={backfilled:!1},u.y>0&&(M[new a.OverscaledTileID(r.overscaledZ,x,u.z,g,u.y-1).key]={backfilled:!1},M[new a.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},M[new a.OverscaledTileID(r.overscaledZ,k,u.z,A,u.y-1).key]={backfilled:!1}),u.y+1<f&&(M[new a.OverscaledTileID(r.overscaledZ,x,u.z,g,u.y+1).key]={backfilled:!1},M[new a.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},M[new a.OverscaledTileID(r.overscaledZ,k,u.z,A,u.y+1).key]={backfilled:!1}),M}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class Mt extends a.Evented{constructor(r,u,f,g){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=u.data,this._options=a.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const x=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*x,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*x,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.EXTENT,radius:(u.clusterRadius||50)*x,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:f},g),this}_updateWorkerData(r){const u=a.extend({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(a.exported.resolveURL(this._data),G.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),f)return void this.fire(new a.ErrorEvent(f));const A={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&a.extend(A,{resourceTiming:x}),this.fire(new a.Event("data",{...A,sourceDataType:"metadata"})),this.fire(new a.Event("data",{...A,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const f=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const g={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(f,g,(x,A)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):x?u(x):(r.loadVectorData(A,this.map.painter,f==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ct=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class xt extends a.Evented{constructor(r,u,f,g){super(),this.id=r,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}load(r,u){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=$.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(f,g)=>{this._request=null,this._loaded=!0,f?this.fire(new a.ErrorEvent(f)):g&&(this.image=g,r&&(this.coordinates=r),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(g){let x=1/0,A=1/0,k=-1/0,M=-1/0;for(const fe of g)x=Math.min(x,fe.x),A=Math.min(A,fe.y),k=Math.max(k,fe.x),M=Math.max(M,fe.y);const N=Math.max(k-x,M-A),Y=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),q=Math.pow(2,Y);return new a.CanonicalTileID(Y,Math.floor((x+k)/2*q),Math.floor((A+M)/2*q))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,ct.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new H(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class $t extends xt{constructor(r,u,f,g){super(r,u,f,g),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const r=this.options;this.urls=[];for(const u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,G.Source).url);a.getVideo(this.urls,(u,f)=>{this._loaded=!0,u?this.fire(new a.ErrorEvent(u)):f&&(this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,ct.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new H(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ye extends xt{constructor(r,u,f,g){super(r,u,f,g),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(A=>typeof A!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,f=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,ct.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new H(u,this.canvas,f.RGBA,{premultiply:!0});let g=!1;for(const x in this.tiles){const A=this.tiles[x];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,g=!0)}g&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const sn={vector:ot,raster:ut,"raster-dem":gt,geojson:Mt,video:$t,image:xt,canvas:Ye};function En(p,r){const u=a.create();return a.translate(u,u,[1,1,0]),a.scale(u,u,[.5*p.width,.5*p.height,1]),a.multiply(u,u,p.calculatePosMatrix(r.toUnwrapped()))}function Ht(p,r,u,f,g,x){const A=function(q,fe,ze){if(q)for(const Ae of q){const Me=fe[Ae];if(Me&&Me.source===ze&&Me.type==="fill-extrusion")return!0}else for(const Ae in fe){const Me=fe[Ae];if(Me.source===ze&&Me.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,p.id),k=x.maxPitchScaleFactor(),M=p.tilesIn(f,k,A);M.sort(Rt);const N=[];for(const q of M)N.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,u,p._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,g,x,k,En(p.transform,q.tileID))});const Y=function(q){const fe={},ze={};for(const Ae of q){const Me=Ae.queryResults,je=Ae.wrappedTileID,Xe=ze[je]=ze[je]||{};for(const it in Me){const Fe=Me[it],nt=Xe[it]=Xe[it]||{},lt=fe[it]=fe[it]||[];for(const vt of Fe)nt[vt.featureIndex]||(nt[vt.featureIndex]=!0,lt.push(vt))}}return fe}(N);for(const q in Y)Y[q].forEach(fe=>{const ze=fe.feature,Ae=p.getFeatureState(ze.layer["source-layer"],ze.id);ze.source=ze.layer.source,ze.layer["source-layer"]&&(ze.sourceLayer=ze.layer["source-layer"]),ze.state=Ae});return Y}function Rt(p,r){const u=p.tileID,f=r.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class vn{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=a.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,x){const A={};if(!x)return A;for(const k of g){const M=k.layerIds.map(N=>x.getLayer(N)).filter(Boolean);if(M.length!==0){k.layers=M,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(N=>M.filter(Y=>Y.id===N)[0]));for(const N of M)A[N.id]=k}}return A}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof a.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(x))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new H(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new H(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,f,g,x,A,k,M,N,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:A,tileSize:this.tileSize,pixelPosMatrix:Y,transform:M,params:k,queryPadding:this.queryPadding*N},r,u,f):{}}querySourceFeatures(r,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),x=u&&u.sourceLayer?u.sourceLayer:"",A=g._geojsonTileLayer||g[x];if(!A)return;const k=a.createFilter(u&&u.filter),{z:M,x:N,y:Y}=this.tileID.canonical,q={z:M,x:N,y:Y};for(let fe=0;fe<A.length;fe++){const ze=A.feature(fe);if(k.needGeometry){const je=a.toEvaluationFeature(ze,!0);if(!k.filter(new a.EvaluationParameters(this.tileID.overscaledZ),je,this.tileID.canonical))continue}else if(!k.filter(new a.EvaluationParameters(this.tileID.overscaledZ),ze))continue;const Ae=f.getId(ze,x),Me=new a.GeoJSONFeature(ze,M,N,Y,Ae);Me.tile=q,r.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const f=a.parseCacheControl(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const x=this.expirationTime-u;x?this.expirationTime=f+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const x=this.buckets[g],A=x.layers[0].sourceLayer||"_geojsonTileLayer",k=f[A],M=r[A];if(!k||!M||Object.keys(M).length===0)continue;x.update(M,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=u&&u.style&&u.style.getLayer(g);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=a.exported.now()+r}setDependencies(r,u){const f={};for(const g of u)f[g]=!0;this.dependencies[r]=f}hasDependency(r,u){for(const f of r){const g=this.dependencies[f];if(g){for(const x of u)if(g[x])return!0}}return!1}}class Te{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,f){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:u,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(r,x)},f)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const f=r.wrapped().key,g=u===void 0?0:this.data[f].indexOf(u),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const f in this.data)for(const g of this.data[f])r(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class F{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,f){const g=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},a.extend(this.stateChanges[r][g],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const x in this.state[r])x!==g&&(this.deletedStates[r][x]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const x in this.state[r][g])f[x]||(this.deletedStates[r][g][x]=null)}else for(const x in f)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][x]===null&&delete this.deletedStates[r][g][x]}removeFeatureState(r,u,f){if(this.deletedStates[r]===null)return;const g=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&u!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][f]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(f in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][f]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,u){const f=String(u),g=a.extend({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const x=this.deletedStates[r][u];if(x===null)return{};for(const A in x)delete g[A]}return g}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const A in this.stateChanges[g])this.state[g][A]||(this.state[g][A]={}),a.extend(this.state[g][A],this.stateChanges[g][A]),x[A]=this.state[g][A];f[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const A in this.state[g])x[A]={},this.state[g][A]={};else for(const A in this.deletedStates[g]){if(this.deletedStates[g][A]===null)this.state[g][A]={};else for(const k of Object.keys(this.deletedStates[g][A]))delete this.state[g][A][k];x[A]=this.state[g][A]}f[g]=f[g]||{},a.extend(f[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in r)r[g].setFeatureState(f,u)}}class O extends a.Evented{constructor(r,u,f){super(),this.id=r,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(g,x,A,k){const M=new sn[x.type](g,x,A,k);if(M.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${M.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],M),M}(r,u,f,this),this._tiles={},this._cache=new Te(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new F,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new a.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(ye).map(r=>r.key)}getRenderableIds(r){const u=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&u.push(this._tiles[f]);return r?u.sort((f,g)=>{const x=f.tileID,A=g.tileID,k=new a.Point(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),M=new a.Point(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-A.overscaledZ||M.y-k.y||M.x-k.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(ye).map(f=>f.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,r,u)))}_tileLoaded(r,u,f,g){if(g)return r.state="errored",void(g.status!==404?this._source.fire(new a.ErrorEvent(g,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=a.exported.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const x=u[g];if(r.neighboringTiles&&r.neighboringTiles[x]){const A=this.getTileByID(x);f(r,A),f(A,r)}}function f(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let A=x.tileID.canonical.x-g.tileID.canonical.x;const k=x.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),N=x.tileID.key;A===0&&k===0||Math.abs(k)>1||(Math.abs(A)>1&&(Math.abs(A+M)===1?A+=M:Math.abs(A-M)===1&&(A-=M)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,A,k),g.neighboringTiles&&g.neighboringTiles[N]&&(g.neighboringTiles[N].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,f,g){for(const x in this._tiles){let A=this._tiles[x];if(g[x]||!A.hasData()||A.tileID.overscaledZ<=u||A.tileID.overscaledZ>f)continue;let k=A.tileID;for(;A&&A.tileID.overscaledZ>u+1;){const N=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[N.key],A&&A.hasData()&&(k=N)}let M=k;for(;M.overscaledZ>u;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]){g[k.key]=k;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=r.overscaledZ-1;f>=u;f--){const g=r.scaledTo(f),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?a.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const f={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),f[x.tileID.key]=x}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(Y=>new a.OverscaledTileID(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(Y=>this._source.hasTile(Y)))):f=[];const g=r.coveringZoomLevel(this._source),x=Math.max(g-O.maxOverzooming,this._source.minzoom),A=Math.max(g+O.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Y={};for(const q of f)if(q.canonical.z>this._source.minzoom){const fe=q.scaledTo(q.canonical.z-1);Y[fe.key]=fe;const ze=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));Y[ze.key]=ze}f=f.concat(Object.values(Y))}const k=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new a.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,g);if(We(this._source.type)){const Y={},q={},fe=Object.keys(M),ze=a.exported.now();for(const Ae of fe){const Me=M[Ae],je=this._tiles[Ae];if(!je||je.fadeEndTime!==0&&je.fadeEndTime<=ze)continue;const Xe=this.findLoadedParent(Me,x);Xe&&(this._addTile(Xe.tileID),Y[Xe.tileID.key]=Xe.tileID),q[Ae]=Me}this._retainLoadedChildren(q,g,A,M);for(const Ae in Y)M[Ae]||(this._coveredTiles[Ae]=!0,M[Ae]=Y[Ae]);if(u){const Ae={},Me={};for(const je of f)this._tiles[je.key].hasData()?Ae[je.key]=je:Me[je.key]=je;for(const je in Me){const Xe=Me[je].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(Ae[Xe[0].key]=M[Xe[0].key]=Xe[0],Ae[Xe[1].key]=M[Xe[1].key]=Xe[1],Ae[Xe[2].key]=M[Xe[2].key]=Xe[2],Ae[Xe[3].key]=M[Xe[3].key]=Xe[3],delete Me[je])}for(const je in Me){const Xe=this.findLoadedParent(Me[je],this._source.minzoom);if(Xe){Ae[Xe.tileID.key]=M[Xe.tileID.key]=Xe.tileID;for(const it in Ae)Ae[it].isChildOf(Xe.tileID)&&delete Ae[it]}}for(const je in this._tiles)Ae[je]||(this._coveredTiles[je]=!0)}}for(const Y in M)this._tiles[Y].clearFadeHold();const N=a.keysDifference(this._tiles,M);for(const Y of N){const q=this._tiles[Y];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(Y)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const f={},g={},x=Math.max(u-O.maxOverzooming,this._source.minzoom),A=Math.max(u+O.maxUnderzooming,this._source.minzoom),k={};for(const M of r){const N=this._addTile(M);f[M.key]=M,N.hasData()||u<this._source.maxzoom&&(k[M.key]=M)}this._retainLoadedChildren(k,u,A,f);for(const M of r){let N=this._tiles[M.key];if(N.hasData())continue;if(u+1>this._source.maxzoom){const q=M.children(this._source.maxzoom)[0],fe=this.getTile(q);if(fe&&fe.hasData()){f[q.key]=q;continue}}else{const q=M.children(this._source.maxzoom);if(f[q[0].key]&&f[q[1].key]&&f[q[2].key]&&f[q[3].key])continue}let Y=N.wasRequested();for(let q=M.overscaledZ-1;q>=x;--q){const fe=M.scaledTo(q);if(g[fe.key])break;if(g[fe.key]=!0,N=this.getTile(fe),!N&&Y&&(N=this._addTile(fe)),N){const ze=N.hasData();if((Y||ze)&&(f[fe.key]=fe),Y=N.wasRequested(),ze)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let f,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;g=x}for(const x of u)this._loadedParentTiles[x]=f}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const f=u;return u||(u=new vn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,f||this._source.fire(new a.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=u.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,f){const g=[],x=this.transform;if(!x)return g;const A=f?x.getCameraQueryGeometry(r):r,k=r.map(Ae=>x.pointCoordinate(Ae,this.terrain)),M=A.map(Ae=>x.pointCoordinate(Ae,this.terrain)),N=this.getIds();let Y=1/0,q=1/0,fe=-1/0,ze=-1/0;for(const Ae of M)Y=Math.min(Y,Ae.x),q=Math.min(q,Ae.y),fe=Math.max(fe,Ae.x),ze=Math.max(ze,Ae.y);for(let Ae=0;Ae<N.length;Ae++){const Me=this._tiles[N[Ae]];if(Me.holdingForFade())continue;const je=Me.tileID,Xe=Math.pow(2,x.zoom-Me.tileID.overscaledZ),it=u*Me.queryPadding*a.EXTENT/Me.tileSize/Xe,Fe=[je.getTilePoint(new a.MercatorCoordinate(Y,q)),je.getTilePoint(new a.MercatorCoordinate(fe,ze))];if(Fe[0].x-it<a.EXTENT&&Fe[0].y-it<a.EXTENT&&Fe[1].x+it>=0&&Fe[1].y+it>=0){const nt=k.map(vt=>je.getTilePoint(vt)),lt=M.map(vt=>je.getTilePoint(vt));g.push({tile:Me,tileID:je,queryGeometry:nt,cameraQueryGeometry:lt,scale:Xe})}}return g}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(We(this._source.type)){const r=a.exported.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,f){this._state.updateState(r=r||"_geojsonTileLayer",u,f)}removeFeatureState(r,u,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,f)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,f){const g=this._tiles[r];g&&g.setDependencies(u,f)}reloadTilesForDependencies(r,u){for(const f in this._tiles)this._tiles[f].hasDependency(r,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,u))}}function ye(p,r){const u=Math.abs(2*p.wrap)-+(p.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return p.overscaledZ-r.overscaledZ||f-u||r.canonical.y-p.canonical.y||r.canonical.x-p.canonical.x}function We(p){return p==="raster"||p==="image"||p==="video"}O.maxOverzooming=10,O.maxUnderzooming=3;const tt="mapboxgl_preloaded_worker_pool";class Ge{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ge.workerCount;)this.workers.push(new Worker(a.config.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[tt]}numActive(){return Object.keys(this.active).length}}const ae=Math.floor(a.exported.hardwareConcurrency/2);let L;function j(){return L||(L=new Ge),L}Ge.workerCount=a.isSafari(globalThis)?Math.max(Math.min(ae,3),1):1;class Ee{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.clamp(r,0,1);let u=1,f=this._distances[u];const g=r*this.paddedLength+this.padding;for(;f<g&&u<this._distances.length;)f=this._distances[++u];const x=u-1,A=this._distances[x],k=f-A,M=k>0?(g-A)/k:0;return this.points[x].mult(1-M).add(this.points[u].mult(M))}}function Se(p,r){let u=!0;return p==="always"||p!=="never"&&r!=="never"||(u=!1),u}class Ke{constructor(r,u,f){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(u/f);for(let A=0;A<this.xCellCount*this.yCellCount;A++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,f,g,x){this._forEachCell(u,f,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(r,u,f,g){this._forEachCell(u-g,f-g,u+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(f),this.circles.push(g)}_insertBoxCell(r,u,f,g,x,A){this.boxCells[x].push(A)}_insertCircleCell(r,u,f,g,x,A){this.circleCells[x].push(A)}_query(r,u,f,g,x,A,k){if(f<0||r>this.width||g<0||u>this.height)return[];const M=[];if(r<=0&&u<=0&&this.width<=f&&this.height<=g){if(x)return[{key:null,x1:r,y1:u,x2:f,y2:g}];for(let N=0;N<this.boxKeys.length;N++)M.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const Y=this.circles[3*N],q=this.circles[3*N+1],fe=this.circles[3*N+2];M.push({key:this.circleKeys[N],x1:Y-fe,y1:q-fe,x2:Y+fe,y2:q+fe})}}else this._forEachCell(r,u,f,g,this._queryCell,M,{hitTest:x,overlapMode:A,seenUids:{box:{},circle:{}}},k);return M}query(r,u,f,g){return this._query(r,u,f,g,!1,null)}hitTest(r,u,f,g,x,A){return this._query(r,u,f,g,!0,x,A).length>0}hitTestCircle(r,u,f,g,x){const A=r-f,k=r+f,M=u-f,N=u+f;if(k<0||A>this.width||N<0||M>this.height)return!1;const Y=[];return this._forEachCell(A,M,k,N,this._queryCellCircle,Y,{hitTest:!0,overlapMode:g,circle:{x:r,y:u,radius:f},seenUids:{box:{},circle:{}}},x),Y.length>0}_queryCell(r,u,f,g,x,A,k,M){const{seenUids:N,hitTest:Y,overlapMode:q}=k,fe=this.boxCells[x];if(fe!==null){const Ae=this.bboxes;for(const Me of fe)if(!N.box[Me]){N.box[Me]=!0;const je=4*Me,Xe=this.boxKeys[Me];if(r<=Ae[je+2]&&u<=Ae[je+3]&&f>=Ae[je+0]&&g>=Ae[je+1]&&(!M||M(Xe))&&(!Y||!Se(q,Xe.overlapMode))&&(A.push({key:Xe,x1:Ae[je],y1:Ae[je+1],x2:Ae[je+2],y2:Ae[je+3]}),Y))return!0}}const ze=this.circleCells[x];if(ze!==null){const Ae=this.circles;for(const Me of ze)if(!N.circle[Me]){N.circle[Me]=!0;const je=3*Me,Xe=this.circleKeys[Me];if(this._circleAndRectCollide(Ae[je],Ae[je+1],Ae[je+2],r,u,f,g)&&(!M||M(Xe))&&(!Y||!Se(q,Xe.overlapMode))){const it=Ae[je],Fe=Ae[je+1],nt=Ae[je+2];if(A.push({key:Xe,x1:it-nt,y1:Fe-nt,x2:it+nt,y2:Fe+nt}),Y)return!0}}}return!1}_queryCellCircle(r,u,f,g,x,A,k,M){const{circle:N,seenUids:Y,overlapMode:q}=k,fe=this.boxCells[x];if(fe!==null){const Ae=this.bboxes;for(const Me of fe)if(!Y.box[Me]){Y.box[Me]=!0;const je=4*Me,Xe=this.boxKeys[Me];if(this._circleAndRectCollide(N.x,N.y,N.radius,Ae[je+0],Ae[je+1],Ae[je+2],Ae[je+3])&&(!M||M(Xe))&&!Se(q,Xe.overlapMode))return A.push(!0),!0}}const ze=this.circleCells[x];if(ze!==null){const Ae=this.circles;for(const Me of ze)if(!Y.circle[Me]){Y.circle[Me]=!0;const je=3*Me,Xe=this.circleKeys[Me];if(this._circlesCollide(Ae[je],Ae[je+1],Ae[je+2],N.x,N.y,N.radius)&&(!M||M(Xe))&&!Se(q,Xe.overlapMode))return A.push(!0),!0}}}_forEachCell(r,u,f,g,x,A,k,M){const N=this._convertToXCellCoord(r),Y=this._convertToYCellCoord(u),q=this._convertToXCellCoord(f),fe=this._convertToYCellCoord(g);for(let ze=N;ze<=q;ze++)for(let Ae=Y;Ae<=fe;Ae++)if(x.call(this,r,u,f,g,this.xCellCount*Ae+ze,A,k,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,f,g,x,A){const k=g-r,M=x-u,N=f+A;return N*N>k*k+M*M}_circleAndRectCollide(r,u,f,g,x,A,k){const M=(A-g)/2,N=Math.abs(r-(g+M));if(N>M+f)return!1;const Y=(k-x)/2,q=Math.abs(u-(x+Y));if(q>Y+f)return!1;if(N<=M||q<=Y)return!0;const fe=N-M,ze=q-Y;return fe*fe+ze*ze<=f*f}}function Qe(p,r,u,f,g){const x=a.create();return r?(a.scale(x,x,[1/g,1/g,1]),u||a.rotateZ(x,x,f.angle)):a.multiply(x,f.labelPlaneMatrix,p),x}function Gt(p,r,u,f,g){if(r){const x=a.clone(p);return a.scale(x,x,[g,g,1]),u||a.rotateZ(x,x,-f.angle),x}return f.glCoordMatrix}function cn(p,r,u){let f;u?(f=[p.x,p.y,u(p.x,p.y),1],a.transformMat4(f,f,r)):(f=[p.x,p.y,0,1],Ce(f,f,r));const g=f[3];return{point:new a.Point(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function Lt(p,r){return .5+p/r*.5}function In(p,r){const u=p[0]/p[3],f=p[1]/p[3];return u>=-r[0]&&u<=r[0]&&f>=-r[1]&&f<=r[1]}function _n(p,r,u,f,g,x,A,k,M,N){const Y=f?p.textSizeData:p.iconSizeData,q=a.evaluateSizeForZoom(Y,u.transform.zoom),fe=[256/u.width*2+1,256/u.height*2+1],ze=f?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;ze.clear();const Ae=p.lineVertexArray,Me=f?p.text.placedSymbolArray:p.icon.placedSymbolArray,je=u.transform.width/u.transform.height;let Xe=!1;for(let it=0;it<Me.length;it++){const Fe=Me.get(it);if(Fe.hidden||Fe.writingMode===a.WritingMode.vertical&&!Xe){he(Fe.numGlyphs,ze);continue}let nt;if(Xe=!1,N?(nt=[Fe.anchorX,Fe.anchorY,N(Fe.anchorX,Fe.anchorY),1],a.transformMat4(nt,nt,r)):(nt=[Fe.anchorX,Fe.anchorY,0,1],Ce(nt,nt,r)),!In(nt,fe)){he(Fe.numGlyphs,ze);continue}const lt=Lt(u.transform.cameraToCenterDistance,nt[3]),vt=a.evaluateSizeForFeature(Y,q,Fe),wt=A?vt/lt:vt*lt,Tt=new a.Point(Fe.anchorX,Fe.anchorY),_t=cn(Tt,g,N).point,Dt={projections:{},offsets:{}},tn=ar(Fe,wt,!1,k,r,g,x,p.glyphOffsetArray,Ae,ze,_t,Tt,Dt,je,M,N);Xe=tn.useVertical,(tn.notEnoughRoom||Xe||tn.needsFlipping&&ar(Fe,wt,!0,k,r,g,x,p.glyphOffsetArray,Ae,ze,_t,Tt,Dt,je,M,N).notEnoughRoom)&&he(Fe.numGlyphs,ze)}f?p.text.dynamicLayoutVertexBuffer.updateData(ze):p.icon.dynamicLayoutVertexBuffer.updateData(ze)}function wr(p,r,u,f,g,x,A,k,M,N,Y,q,fe){const ze=k.glyphStartIndex+k.numGlyphs,Ae=k.lineStartIndex,Me=k.lineStartIndex+k.lineLength,je=r.getoffsetX(k.glyphStartIndex),Xe=r.getoffsetX(ze-1),it=ie(p*je,u,f,g,x,A,k.segment,Ae,Me,M,N,Y,q,fe);if(!it)return null;const Fe=ie(p*Xe,u,f,g,x,A,k.segment,Ae,Me,M,N,Y,q,fe);return Fe?{first:it,last:Fe}:null}function ni(p,r,u,f){return p===a.WritingMode.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*f?{useVertical:!0}:(p===a.WritingMode.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function ar(p,r,u,f,g,x,A,k,M,N,Y,q,fe,ze,Ae,Me){const je=r/24,Xe=p.lineOffsetX*je,it=p.lineOffsetY*je;let Fe;if(p.numGlyphs>1){const nt=p.glyphStartIndex+p.numGlyphs,lt=p.lineStartIndex,vt=p.lineStartIndex+p.lineLength,wt=wr(je,k,Xe,it,u,Y,q,p,M,x,fe,Ae,Me);if(!wt)return{notEnoughRoom:!0};const Tt=cn(wt.first.point,A,Me).point,_t=cn(wt.last.point,A,Me).point;if(f&&!u){const Dt=ni(p.writingMode,Tt,_t,ze);if(Dt)return Dt}Fe=[wt.first];for(let Dt=p.glyphStartIndex+1;Dt<nt-1;Dt++)Fe.push(ie(je*k.getoffsetX(Dt),Xe,it,u,Y,q,p.segment,lt,vt,M,x,fe,Ae,Me));Fe.push(wt.last)}else{if(f&&!u){const lt=cn(q,g,Me).point,vt=p.lineStartIndex+p.segment+1,wt=new a.Point(M.getx(vt),M.gety(vt)),Tt=cn(wt,g,Me),_t=Tt.signedDistanceFromCamera>0?Tt.point:Ln(q,wt,lt,1,g,Me),Dt=ni(p.writingMode,lt,_t,ze);if(Dt)return Dt}const nt=ie(je*k.getoffsetX(p.glyphStartIndex),Xe,it,u,Y,q,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,M,x,fe,Ae,Me);if(!nt)return{notEnoughRoom:!0};Fe=[nt]}for(const nt of Fe)a.addDynamicAttributes(N,nt.point,nt.angle);return{}}function Ln(p,r,u,f,g,x){const A=cn(p.add(p.sub(r)._unit()),g,x).point,k=u.sub(A);return u.add(k._mult(f/k.mag()))}function lr(p,r){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:A,getElevation:k,previousVertex:M,direction:N,absOffsetX:Y}=r;if(u.projections[p])return u.projections[p];const q=new a.Point(f.getx(p),f.gety(p)),fe=cn(q,g,k);if(fe.signedDistanceFromCamera>0)return u.projections[p]=fe.point,fe.point;const ze=p-N;return Ln(A===0?x:new a.Point(f.getx(ze),f.gety(ze)),q,M,Y-A+1,g,k)}function di(p,r,u){return p._unit()._perp()._mult(r*u)}function Pe(p,r,u,f,g,x,A,k){const{projectionCache:M,direction:N}=k;if(M.offsets[p])return M.offsets[p];const Y=u.add(r);if(p+N<f||p+N>=g)return M.offsets[p]=Y,Y;const q=lr(p+N,k),fe=di(q.sub(u),A,N),ze=u.add(fe),Ae=q.add(fe);return M.offsets[p]=a.findLineIntersection(x,Y,ze,Ae)||Y,M.offsets[p]}function ie(p,r,u,f,g,x,A,k,M,N,Y,q,fe,ze){const Ae=f?p-r:p+r;let Me=Ae>0?1:-1,je=0;f&&(Me*=-1,je=Math.PI),Me<0&&(je+=Math.PI);let Xe,it,Fe=Me>0?k+A:k+A+1,nt=g,lt=g,vt=0,wt=0;const Tt=Math.abs(Ae),_t=[];let Dt;for(;vt+wt<=Tt;){if(Fe+=Me,Fe<k||Fe>=M)return null;vt+=wt,lt=nt,it=Xe;const kt={projectionCache:q,lineVertexArray:N,labelPlaneMatrix:Y,tileAnchorPoint:x,distanceFromAnchor:vt,getElevation:ze,previousVertex:lt,direction:Me,absOffsetX:Tt};if(nt=lr(Fe,kt),u===0)_t.push(lt),Dt=nt.sub(lt);else{let un;const Bt=nt.sub(lt);un=Bt.mag()===0?di(lr(Fe+Me,kt).sub(nt),u,Me):di(Bt,u,Me),it||(it=lt.add(un)),Xe=Pe(Fe,un,nt,k,M,it,u,kt),_t.push(it),Dt=Xe.sub(it)}wt=Dt.mag()}const tn=Dt._mult((Tt-vt)/wt)._add(it||lt),gn=je+Math.atan2(nt.y-lt.y,nt.x-lt.x);return _t.push(tn),{point:tn,angle:fe?gn:0,path:_t}}const se=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function he(p,r){for(let u=0;u<p;u++){const f=r.length;r.resize(f+4),r.float32.set(se,3*f)}}function Ce(p,r,u){const f=r[0],g=r[1];return p[0]=u[0]*f+u[4]*g+u[12],p[1]=u[1]*f+u[5]*g+u[13],p[3]=u[3]*f+u[7]*g+u[15],p}const Re=100;class He{constructor(r,u=new Ke(r.width+200,r.height+200,25),f=new Ke(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Re,this.screenBottomBoundary=r.height+Re,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,f,g,x,A){const k=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY,A),M=f*k.perspectiveRatio,N=r.x1*M+k.point.x,Y=r.y1*M+k.point.y,q=r.x2*M+k.point.x,fe=r.y2*M+k.point.y;return!this.isInsideGrid(N,Y,q,fe)||u!=="always"&&this.grid.hitTest(N,Y,q,fe,u,x)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[N,Y,q,fe],offscreen:this.isOffscreen(N,Y,q,fe)}}placeCollisionCircles(r,u,f,g,x,A,k,M,N,Y,q,fe,ze,Ae){const Me=[],je=new a.Point(u.anchorX,u.anchorY),Xe=cn(je,A,Ae),it=Lt(this.transform.cameraToCenterDistance,Xe.signedDistanceFromCamera),Fe=(Y?x/it:x*it)/a.ONE_EM,nt=cn(je,k,Ae).point,lt=wr(Fe,g,u.lineOffsetX*Fe,u.lineOffsetY*Fe,!1,nt,je,u,f,k,{projections:{},offsets:{}},!1,Ae);let vt=!1,wt=!1,Tt=!0;if(lt){const _t=.5*fe*it+ze,Dt=new a.Point(-100,-100),tn=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),gn=new Ee,kt=lt.first,un=lt.last;let Bt=[];for(let Dn=kt.path.length-1;Dn>=1;Dn--)Bt.push(kt.path[Dn]);for(let Dn=1;Dn<un.path.length;Dn++)Bt.push(un.path[Dn]);const jn=2.5*_t;if(M){const Dn=Bt.map(yn=>cn(yn,M,Ae));Bt=Dn.some(yn=>yn.signedDistanceFromCamera<=0)?[]:Dn.map(yn=>yn.point)}let Er=[];if(Bt.length>0){const Dn=Bt[0].clone(),yn=Bt[0].clone();for(let vr=1;vr<Bt.length;vr++)Dn.x=Math.min(Dn.x,Bt[vr].x),Dn.y=Math.min(Dn.y,Bt[vr].y),yn.x=Math.max(yn.x,Bt[vr].x),yn.y=Math.max(yn.y,Bt[vr].y);Er=Dn.x>=Dt.x&&yn.x<=tn.x&&Dn.y>=Dt.y&&yn.y<=tn.y?[Bt]:yn.x<Dt.x||Dn.x>tn.x||yn.y<Dt.y||Dn.y>tn.y?[]:a.clipLine([Bt],Dt.x,Dt.y,tn.x,tn.y)}for(const Dn of Er){gn.reset(Dn,.25*_t);let yn=0;yn=gn.length<=.5*_t?1:Math.ceil(gn.paddedLength/jn)+1;for(let vr=0;vr<yn;vr++){const gi=vr/Math.max(yn-1,1),Sr=gn.lerp(gi),Wr=Sr.x+Re,Vi=Sr.y+Re;Me.push(Wr,Vi,_t,0);const bo=Wr-_t,Eo=Vi-_t,yi=Wr+_t,Wo=Vi+_t;if(Tt=Tt&&this.isOffscreen(bo,Eo,yi,Wo),wt=wt||this.isInsideGrid(bo,Eo,yi,Wo),r!=="always"&&this.grid.hitTestCircle(Wr,Vi,_t,r,q)&&(vt=!0,!N))return{circles:[],offscreen:!1,collisionDetected:vt}}}}return{circles:!N&&vt||!wt||it<this.perspectiveRatioCutoff?[]:Me,offscreen:Tt,collisionDetected:vt}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,g=1/0,x=-1/0,A=-1/0;for(const Y of r){const q=new a.Point(Y.x+Re,Y.y+Re);f=Math.min(f,q.x),g=Math.min(g,q.y),x=Math.max(x,q.x),A=Math.max(A,q.y),u.push(q)}const k=this.grid.query(f,g,x,A).concat(this.ignoredGrid.query(f,g,x,A)),M={},N={};for(const Y of k){const q=Y.key;if(M[q.bucketInstanceId]===void 0&&(M[q.bucketInstanceId]={}),M[q.bucketInstanceId][q.featureIndex])continue;const fe=[new a.Point(Y.x1,Y.y1),new a.Point(Y.x2,Y.y1),new a.Point(Y.x2,Y.y2),new a.Point(Y.x1,Y.y2)];a.polygonIntersectsPolygon(u,fe)&&(M[q.bucketInstanceId][q.featureIndex]=!0,N[q.bucketInstanceId]===void 0&&(N[q.bucketInstanceId]=[]),N[q.bucketInstanceId].push(q.featureIndex))}return N}insertCollisionBox(r,u,f,g,x,A){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:A,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,f,g,x,A){const k=f?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:x,collisionGroupID:A,overlapMode:u};for(let N=0;N<r.length;N+=4)k.insertCircle(M,r[N],r[N+1],r[N+2])}projectAndGetPerspectiveRatio(r,u,f,g){let x;return g?(x=[u,f,g(u,f),1],a.transformMat4(x,x,r)):(x=[u,f,0,1],Ce(x,x,r)),{point:new a.Point((x[0]/x[3]+1)/2*this.transform.width+Re,(-x[1]/x[3]+1)/2*this.transform.height+Re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(r,u,f,g){return f<Re||r>=this.screenRightBoundary||g<Re||u>this.screenBottomBoundary}isInsideGrid(r,u,f,g){return f>=0&&r<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=a.identity([]);return a.translate(r,r,[-100,-100,0]),r}}function Ue(p,r,u){return r*(a.EXTENT/(p.tileSize*Math.pow(2,u-p.tileID.overscaledZ)))}class Ne{constructor(r,u,f,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Je{constructor(r,u,f,g,x){this.text=new Ne(r?r.text:null,u,f,x),this.icon=new Ne(r?r.icon:null,u,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dt{constructor(r,u,f){this.text=r,this.icon=u,this.skipFade=f}}class mt{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class pt{constructor(r,u,f,g,x){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=x}}class en{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[r]}}function an(p,r,u,f,g){const{horizontalAlign:x,verticalAlign:A}=a.getAnchorAlignment(p),k=-(x-.5)*r,M=-(A-.5)*u,N=a.evaluateVariableOffset(p,f);return new a.Point(k+N[0]*g,M+N[1]*g)}function Ut(p,r,u,f,g,x){const{x1:A,x2:k,y1:M,y2:N,anchorPointX:Y,anchorPointY:q}=p,fe=new a.Point(r,u);return f&&fe._rotate(g?x:-x),{x1:A+fe.x,y1:M+fe.y,x2:k+fe.x,y2:N+fe.y,anchorPointX:Y,anchorPointY:q}}class Xt{constructor(r,u,f,g,x){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new He(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new en(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,f,g){const x=f.getBucket(u),A=f.latestFeatureIndex;if(!x||!A||u.id!==x.layerIds[0])return;const k=f.collisionBoxArray,M=x.layers[0].layout,N=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),Y=f.tileSize/a.EXTENT,q=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),fe=M.get("text-pitch-alignment")==="map",ze=M.get("text-rotation-alignment")==="map",Ae=Ue(f,1,this.transform.zoom),Me=Qe(q,fe,ze,this.transform,Ae);let je=null;if(fe){const it=Gt(q,fe,ze,this.transform,Ae);je=a.multiply([],this.transform.labelPlaneMatrix,it)}this.retainedQueryData[x.bucketInstanceId]=new pt(x.bucketInstanceId,A,x.sourceLayerIndex,x.index,f.tileID);const Xe={bucket:x,layout:M,posMatrix:q,textLabelPlaneMatrix:Me,labelToScreenMatrix:je,scale:N,textPixelRatio:Y,holdingForFade:f.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const it of x.sortKeyRanges){const{sortKey:Fe,symbolInstanceStart:nt,symbolInstanceEnd:lt}=it;r.push({sortKey:Fe,symbolInstanceStart:nt,symbolInstanceEnd:lt,parameters:Xe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:Xe})}attemptAnchorPlacement(r,u,f,g,x,A,k,M,N,Y,q,fe,ze,Ae,Me,je){const Xe=[fe.textOffset0,fe.textOffset1],it=an(r,f,g,Xe,x),Fe=this.collisionIndex.placeCollisionBox(Ut(u,it.x,it.y,A,k,this.transform.angle),q,M,N,Y.predicate,je);if((!Me||this.collisionIndex.placeCollisionBox(Ut(Me,it.x,it.y,A,k,this.transform.angle),q,M,N,Y.predicate,je).box.length!==0)&&Fe.box.length>0){let nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID].text&&(nt=this.prevPlacement.variableOffsets[fe.crossTileID].anchor),fe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[fe.crossTileID]={textOffset:Xe,width:f,height:g,anchor:r,textBoxScale:x,prevAnchor:nt},this.markUsedJustification(ze,r,fe,Ae),ze.allowVerticalPlacement&&(this.markUsedOrientation(ze,Ae,fe),this.placedOrientations[fe.crossTileID]=Ae),{shift:it,placedGlyphBoxes:Fe}}}placeLayerBucketPart(r,u,f){const{bucket:g,layout:x,posMatrix:A,textLabelPlaneMatrix:k,labelToScreenMatrix:M,textPixelRatio:N,holdingForFade:Y,collisionBoxArray:q,partiallyEvaluatedTextSize:fe,collisionGroup:ze}=r.parameters,Ae=x.get("text-optional"),Me=x.get("icon-optional"),je=a.getOverlapMode(x,"text-overlap","text-allow-overlap"),Xe=je==="always",it=a.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),Fe=it==="always",nt=x.get("text-rotation-alignment")==="map",lt=x.get("text-pitch-alignment")==="map",vt=x.get("icon-text-fit")!=="none",wt=x.get("symbol-z-order")==="viewport-y",Tt=Xe&&(Fe||!g.hasIconData()||Me),_t=Fe&&(Xe||!g.hasTextData()||Ae);!g.collisionArrays&&q&&g.deserializeCollisionBoxes(q);const Dt=this.retainedQueryData[g.bucketInstanceId].tileID,tn=this.terrain?(kt,un)=>this.terrain.getElevation(Dt,kt,un):null,gn=(kt,un)=>{if(u[kt.crossTileID])return;if(Y)return void(this.placements[kt.crossTileID]=new dt(!1,!1,!1));let Bt=!1,jn=!1,Er=!0,Dn=null,yn={box:null,offscreen:null},vr={box:null,offscreen:null},gi=null,Sr=null,Wr=null,Vi=0,bo=0,Eo=0;un.textFeatureIndex?Vi=un.textFeatureIndex:kt.useRuntimeCollisionCircles&&(Vi=kt.featureIndex),un.verticalTextFeatureIndex&&(bo=un.verticalTextFeatureIndex);const yi=un.textBox;if(yi){const ii=Un=>{let Nr=a.WritingMode.horizontal;if(g.allowVerticalPlacement&&!Un&&this.prevPlacement){const Xr=this.prevPlacement.placedOrientations[kt.crossTileID];Xr&&(this.placedOrientations[kt.crossTileID]=Xr,Nr=Xr,this.markUsedOrientation(g,Nr,kt))}return Nr},Hr=(Un,Nr)=>{if(g.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&un.verticalTextBox){for(const Xr of g.writingModes)if(Xr===a.WritingMode.vertical?(yn=Nr(),vr=yn):yn=Un(),yn&&yn.box&&yn.box.length)break}else yn=Un()};if(x.get("text-variable-anchor")){let Un=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[kt.crossTileID]){const Gn=this.prevPlacement.variableOffsets[kt.crossTileID];Un.indexOf(Gn.anchor)>0&&(Un=Un.filter(Ur=>Ur!==Gn.anchor),Un.unshift(Gn.anchor))}const Nr=(Gn,Ur,Gi)=>{const mc=Gn.x2-Gn.x1,fs=Gn.y2-Gn.y1,jg=kt.textBoxScale,Dd=vt&&it==="never"?Ur:null;let Qn={box:[],offscreen:!1};const Gh=je!=="never"?2*Un.length:Un.length;for(let mu=0;mu<Gh;++mu){const ds=this.attemptAnchorPlacement(Un[mu%Un.length],Gn,mc,fs,jg,nt,lt,N,A,ze,mu>=Un.length?je:"never",kt,g,Gi,Dd,tn);if(ds&&(Qn=ds.placedGlyphBoxes,Qn&&Qn.box&&Qn.box.length)){Bt=!0,Dn=ds.shift;break}}return Qn};Hr(()=>Nr(yi,un.iconBox,a.WritingMode.horizontal),()=>{const Gn=un.verticalTextBox;return g.allowVerticalPlacement&&!(yn&&yn.box&&yn.box.length)&&kt.numVerticalGlyphVertices>0&&Gn?Nr(Gn,un.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),yn&&(Bt=yn.box,Er=yn.offscreen);const Xr=ii(yn&&yn.box);if(!Bt&&this.prevPlacement){const Gn=this.prevPlacement.variableOffsets[kt.crossTileID];Gn&&(this.variableOffsets[kt.crossTileID]=Gn,this.markUsedJustification(g,Gn.anchor,kt,Xr))}}else{const Un=(Nr,Xr)=>{const Gn=this.collisionIndex.placeCollisionBox(Nr,je,N,A,ze.predicate,tn);return Gn&&Gn.box&&Gn.box.length&&(this.markUsedOrientation(g,Xr,kt),this.placedOrientations[kt.crossTileID]=Xr),Gn};Hr(()=>Un(yi,a.WritingMode.horizontal),()=>{const Nr=un.verticalTextBox;return g.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&Nr?Un(Nr,a.WritingMode.vertical):{box:null,offscreen:null}}),ii(yn&&yn.box&&yn.box.length)}}if(gi=yn,Bt=gi&&gi.box&&gi.box.length>0,Er=gi&&gi.offscreen,kt.useRuntimeCollisionCircles){const ii=g.text.placedSymbolArray.get(kt.centerJustifiedTextSymbolIndex),Hr=a.evaluateSizeForFeature(g.textSizeData,fe,ii),Un=x.get("text-padding");Sr=this.collisionIndex.placeCollisionCircles(je,ii,g.lineVertexArray,g.glyphOffsetArray,Hr,A,k,M,f,lt,ze.predicate,kt.collisionCircleDiameter,Un,tn),Sr.circles.length&&Sr.collisionDetected&&!f&&a.warnOnce("Collisions detected, but collision boxes are not shown"),Bt=Xe||Sr.circles.length>0&&!Sr.collisionDetected,Er=Er&&Sr.offscreen}if(un.iconFeatureIndex&&(Eo=un.iconFeatureIndex),un.iconBox){const ii=Hr=>{const Un=vt&&Dn?Ut(Hr,Dn.x,Dn.y,nt,lt,this.transform.angle):Hr;return this.collisionIndex.placeCollisionBox(Un,it,N,A,ze.predicate,tn)};vr&&vr.box&&vr.box.length&&un.verticalIconBox?(Wr=ii(un.verticalIconBox),jn=Wr.box.length>0):(Wr=ii(un.iconBox),jn=Wr.box.length>0),Er=Er&&Wr.offscreen}const Wo=Ae||kt.numHorizontalGlyphVertices===0&&kt.numVerticalGlyphVertices===0,pu=Me||kt.numIconVertices===0;if(Wo||pu?pu?Wo||(jn=jn&&Bt):Bt=jn&&Bt:jn=Bt=jn&&Bt,Bt&&gi&&gi.box&&this.collisionIndex.insertCollisionBox(gi.box,je,x.get("text-ignore-placement"),g.bucketInstanceId,vr&&vr.box&&bo?bo:Vi,ze.ID),jn&&Wr&&this.collisionIndex.insertCollisionBox(Wr.box,it,x.get("icon-ignore-placement"),g.bucketInstanceId,Eo,ze.ID),Sr&&(Bt&&this.collisionIndex.insertCollisionCircles(Sr.circles,je,x.get("text-ignore-placement"),g.bucketInstanceId,Vi,ze.ID),f)){const ii=g.bucketInstanceId;let Hr=this.collisionCircleArrays[ii];Hr===void 0&&(Hr=this.collisionCircleArrays[ii]=new mt);for(let Un=0;Un<Sr.circles.length;Un+=4)Hr.circles.push(Sr.circles[Un+0]),Hr.circles.push(Sr.circles[Un+1]),Hr.circles.push(Sr.circles[Un+2]),Hr.circles.push(Sr.collisionDetected?1:0)}if(kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kt.crossTileID]=new dt(Bt||Tt,jn||_t,Er||g.justReloaded),u[kt.crossTileID]=!0};if(wt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kt=g.getSortedSymbolIndexes(this.transform.angle);for(let un=kt.length-1;un>=0;--un){const Bt=kt[un];gn(g.symbolInstances.get(Bt),g.collisionArrays[Bt])}}else for(let kt=r.symbolInstanceStart;kt<r.symbolInstanceEnd;kt++)gn(g.symbolInstances.get(kt),g.collisionArrays[kt]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[g.bucketInstanceId];a.invert(kt.invProjMatrix,A),kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(r,u,f,g){let x;x=g===a.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(u)];const A=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const k of A)k>=0&&(r.text.placedSymbolArray.get(k).crossTileID=x>=0&&k!==x?0:f.crossTileID)}markUsedOrientation(r,u,f){const g=u===a.WritingMode.horizontal||u===a.WritingMode.horizontalOnly?u:0,x=u===a.WritingMode.vertical?u:0,A=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const k of A)r.text.placedSymbolArray.get(k).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(r):1,x=u?u.opacities:{},A=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const M in this.placements){const N=this.placements[M],Y=x[M];Y?(this.opacities[M]=new Je(Y,g,N.text,N.icon),f=f||N.text!==Y.text.placed||N.icon!==Y.icon.placed):(this.opacities[M]=new Je(null,g,N.text,N.icon,N.skipFade),f=f||N.text||N.icon)}for(const M in x){const N=x[M];if(!this.opacities[M]){const Y=new Je(N,g,!1,!1);Y.isHidden()||(this.opacities[M]=Y,f=f||N.text.placed||N.icon.placed)}}for(const M in A)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=A[M]);for(const M in k)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=k[M]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const f={};for(const g of u){const x=g.getBucket(r);x&&g.latestFeatureIndex&&r.id===x.layerIds[0]&&this.updateBucketOpacities(x,f,g.collisionBoxArray)}}updateBucketOpacities(r,u,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const g=r.layers[0].layout,x=new Je(null,0,!1,!1,!0),A=g.get("text-allow-overlap"),k=g.get("icon-allow-overlap"),M=g.get("text-variable-anchor"),N=g.get("text-rotation-alignment")==="map",Y=g.get("text-pitch-alignment")==="map",q=g.get("icon-text-fit")!=="none",fe=new Je(null,0,A&&(k||!r.hasIconData()||g.get("icon-optional")),k&&(A||!r.hasTextData()||g.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const ze=(Ae,Me,je)=>{for(let Xe=0;Xe<Me/4;Xe++)Ae.opacityVertexArray.emplaceBack(je);Ae.hasVisibleVertices=Ae.hasVisibleVertices||je!==ur};for(let Ae=0;Ae<r.symbolInstances.length;Ae++){const Me=r.symbolInstances.get(Ae),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:Xe,crossTileID:it}=Me;let Fe=this.opacities[it];u[it]?Fe=x:Fe||(Fe=fe,this.opacities[it]=Fe),u[it]=!0;const nt=Me.numIconVertices>0,lt=this.placedOrientations[Me.crossTileID],vt=lt===a.WritingMode.vertical,wt=lt===a.WritingMode.horizontal||lt===a.WritingMode.horizontalOnly;if(je>0||Xe>0){const Tt=Ui(Fe.text);ze(r.text,je,vt?ur:Tt),ze(r.text,Xe,wt?ur:Tt);const _t=Fe.text.isHidden();[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(gn=>{gn>=0&&(r.text.placedSymbolArray.get(gn).hidden=_t||vt?1:0)}),Me.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Me.verticalPlacedTextSymbolIndex).hidden=_t||wt?1:0);const Dt=this.variableOffsets[Me.crossTileID];Dt&&this.markUsedJustification(r,Dt.anchor,Me,lt);const tn=this.placedOrientations[Me.crossTileID];tn&&(this.markUsedJustification(r,"left",Me,tn),this.markUsedOrientation(r,tn,Me))}if(nt){const Tt=Ui(Fe.icon),_t=!(q&&Me.verticalPlacedIconSymbolIndex&&vt);Me.placedIconSymbolIndex>=0&&(ze(r.icon,Me.numIconVertices,_t?Tt:ur),r.icon.placedSymbolArray.get(Me.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),Me.verticalPlacedIconSymbolIndex>=0&&(ze(r.icon,Me.numVerticalIconVertices,_t?ur:Tt),r.icon.placedSymbolArray.get(Me.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Tt=r.collisionArrays[Ae];if(Tt){let _t=new a.Point(0,0);if(Tt.textBox||Tt.verticalTextBox){let tn=!0;if(M){const gn=this.variableOffsets[it];gn?(_t=an(gn.anchor,gn.width,gn.height,gn.textOffset,gn.textBoxScale),N&&_t._rotate(Y?this.transform.angle:-this.transform.angle)):tn=!1}Tt.textBox&&ln(r.textCollisionBox.collisionVertexArray,Fe.text.placed,!tn||vt,_t.x,_t.y),Tt.verticalTextBox&&ln(r.textCollisionBox.collisionVertexArray,Fe.text.placed,!tn||wt,_t.x,_t.y)}const Dt=!!(!wt&&Tt.verticalIconBox);Tt.iconBox&&ln(r.iconCollisionBox.collisionVertexArray,Fe.icon.placed,Dt,q?_t.x:0,q?_t.y:0),Tt.verticalIconBox&&ln(r.iconCollisionBox.collisionVertexArray,Fe.icon.placed,!Dt,q?_t.x:0,q?_t.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Ae.invProjMatrix,r.placementViewportMatrix=Ae.viewportMatrix,r.collisionCircleArray=Ae.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function ln(p,r,u,f,g){p.emplaceBack(r?1:0,u?1:0,f||0,g||0),p.emplaceBack(r?1:0,u?1:0,f||0,g||0),p.emplaceBack(r?1:0,u?1:0,f||0,g||0),p.emplaceBack(r?1:0,u?1:0,f||0,g||0)}const bn=Math.pow(2,25),wn=Math.pow(2,24),Mn=Math.pow(2,17),Hn=Math.pow(2,16),mr=Math.pow(2,9),hn=Math.pow(2,8),tr=Math.pow(2,1);function Ui(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const r=p.placed?1:0,u=Math.floor(127*p.opacity);return u*bn+r*wn+u*Mn+r*Hn+u*mr+r*hn+u*tr+r}const ur=0;class ri{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,f,g,x){const A=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(A,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((k,M)=>k.sortKey-M.sortKey));this._currentPartIndex<A.length;)if(u.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1}}class mn{constructor(r,u,f,g,x,A,k,M){this.placement=new Xt(r,u,A,k,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(r,u,f){const g=a.exported.now(),x=()=>!this._forceFullPlacement&&a.exported.now()-g>2;for(;this._currentPlacementIndex>=0;){const A=u[r[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=k)&&(!A.maxzoom||A.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new ri(A)),this._inProgressLayer.continuePlacement(f[A.source],this.placement,this._showCollisionBoxes,A,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Ti=512/a.EXTENT/2;class $a{constructor(r,u,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let x=0;x<u.length;x++){const A=u.get(x),k=A.key,M=g.get(k);M?M.push(A):g.set(k,[A])}for(const[x,A]of g){const k={positions:A.map(M=>({x:Math.floor(M.anchorX*Ti),y:Math.floor(M.anchorY*Ti)})),crossTileIDs:A.map(M=>M.crossTileID)};if(k.positions.length>128){const M=new a.KDBush(k.positions.length,16,Uint16Array);for(const{x:N,y:Y}of k.positions)M.add(N,Y);M.finish(),delete k.positions,k.index=M}this._symbolsByKey[x]=k}}getScaledCoordinates(r,u){const{x:f,y:g,z:x}=this.tileID.canonical,{x:A,y:k,z:M}=u.canonical,N=Ti/Math.pow(2,M-x),Y=(k*a.EXTENT+r.anchorY)*N,q=g*a.EXTENT*Ti;return{x:Math.floor((A*a.EXTENT+r.anchorX)*N-f*a.EXTENT*Ti),y:Math.floor(Y-q)}}findMatches(r,u,f){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let x=0;x<r.length;x++){const A=r.get(x);if(A.crossTileID)continue;const k=this._symbolsByKey[A.key];if(!k)continue;const M=this.getScaledCoordinates(A,u);if(k.index){const N=k.index.range(M.x-g,M.y-g,M.x+g,M.y+g).sort();for(const Y of N){const q=k.crossTileIDs[Y];if(!f[q]){f[q]=!0,A.crossTileID=q;break}}}else if(k.positions)for(let N=0;N<k.positions.length;N++){const Y=k.positions[N],q=k.crossTileIDs[N];if(Math.abs(Y.x-M.x)<=g&&Math.abs(Y.y-M.y)<=g&&!f[q]){f[q]=!0,A.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class gr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ia{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const f in this.indexes){const g=this.indexes[f],x={};for(const A in g){const k=g[A];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),x[k.tileID.key]=k}this.indexes[f]=x}this.lng=r}addBucket(r,u,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let x=0;x<u.symbolInstances.length;x++)u.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const x in this.indexes){const A=this.indexes[x];if(Number(x)>r.overscaledZ)for(const k in A){const M=A[k];M.tileID.isChildOf(r)&&M.findMatches(u.symbolInstances,r,g)}else{const k=A[r.scaledTo(Number(x)).key];k&&k.findMatches(u.symbolInstances,r,g)}}for(let x=0;x<u.symbolInstances.length;x++){const A=u.symbolInstances.get(x);A.crossTileID||(A.crossTileID=f.generate(),g[A.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new $a(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const f of u.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[r][g]}removeStaleBuckets(r){let u=!1;for(const f in this.indexes){const g=this.indexes[f];for(const x in g)r[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[x]),delete g[x],u=!0)}return u}}class Do{constructor(){this.layerIndexes={},this.crossTileIDs=new gr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,f){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new ia);let x=!1;const A={};g.handleWrapJump(f);for(const k of u){const M=k.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,M,this.crossTileIDs)&&(x=!0),A[M.bucketInstanceId]=!0)}return g.removeStaleBuckets(A)&&(x=!0),x}pruneUnusedLayers(r){const u={};r.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const cr=(p,r)=>a.emitValidationErrors(p,r&&r.filter(u=>u.identifier!=="source.canvas")),Ci=a.pick(a.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),$i=a.pick(a.operations,["setCenter","setZoom","setBearing","setPitch"]),$u=a.emptyStyle();class jr extends a.Evented{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Ie(j(),this,r._getMapId()),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new ne(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Be(256,512),this.crossTileSymbolIndex=new Do,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const f=this;this._rtlTextPluginCallback=jr.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,A)=>{if(a.triggerPluginCompletionEvent(x),A&&A.every(k=>k))for(const k in f.sourceCaches){const M=f.sourceCaches[k].getSource().type;M!=="vector"&&M!=="geojson"||f.sourceCaches[k].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const x=this.sourceCaches[g.sourceId];if(!x)return;const A=x.getSource();if(A&&A.vectorLayerIds)for(const k in this._layers){const M=this._layers[k];M.source===A.id&&this._validateLayer(M)}})}loadURL(r,u={},f){this.fire(new a.Event("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(r,G.Style);this._request=a.getJSON(g,(x,A)=>{this._request=null,x?this.fire(new a.ErrorEvent(x)):A&&this._load(A,u,f)})}loadJSON(r,u={},f){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,f)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load($u,{validate:!1})}_load(r,u,f){const g=u.transformStyle?u.transformStyle(f,r):r;if(!u.validate||!cr(this,a.validateStyle(g))){this._loaded=!0,this.stylesheet=g;for(const x in g.sources)this.addSource(x,g.sources[x],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new be(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}}_createLayers(){const r=a.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const f=a.createStyleLayer(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(r,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,A,k){const M=Z(g),N=M.length,Y=A>1?"@2x":"",q={},fe={},ze={};for(const{id:Ae,url:Me}of M){const je=x.transformRequest(x.normalizeSpriteURL(Me,Y,".json"),G.SpriteJSON),Xe=`${Ae}_${je.url}`;q[Xe]=a.getJSON(je,(nt,lt)=>{delete q[Xe],fe[Ae]=lt,J(k,fe,ze,nt,N)});const it=x.transformRequest(x.normalizeSpriteURL(Me,Y,".png"),G.SpriteImage),Fe=`${Ae}_${it.url}`;q[Fe]=$.getImage(it,(nt,lt)=>{delete q[Fe],ze[Ae]=lt,J(k,fe,ze,nt,N)})}return{cancel(){for(const Ae of Object.values(q))Ae.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new a.ErrorEvent(g));else if(x)for(const A in x){this._spritesImagesIds[A]=[];const k=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(M=>!(M in x)):[];for(const M of k)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in x[A]){const N=A==="default"?M:`${A}:${M}`;this._spritesImagesIds[A].push(N),N in this.imageManager.images?this.imageManager.updateImage(N,x[A][M],!1):this.imageManager.addImage(N,x[A][M]),u&&(this._changedImages[N]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const f=r.sourceLayer;if(!f)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const f=[];for(const g of r)u[g]&&f.push(u[g]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const g=this._layers[f];g.type!=="custom"&&(r[f]=g.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const A in this._updatedSources){const k=this._updatedSources[A];if(k==="reload")this._reloadSource(A);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];f[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(r,this._availableImages),!x.isHidden(r.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in f){const x=this.sourceCaches[g];f[g]!==x.used&&x.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const f=this.serialize();if(r=u.transformStyle?u.transformStyle(f,r):r,cr(this,a.validateStyle(r)))return!1;(r=a.clone$1(r)).layers=a.derefLayers(r.layers);const g=a.diffStyles(f,r).filter(A=>!(A.command in $i));if(g.length===0)return!1;const x=g.filter(A=>!(A.command in Ci));if(x.length>0)throw new Error(`Unimplemented: ${x.map(A=>A.command).join(", ")}.`);for(const A of g)A.command!=="setTransition"&&this[A.command].apply(this,A.args);return this.stylesheet=r,!0}addImage(r,u){if(this.getImage(r))return this.fire(new a.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateStyle.source,`sources.${r}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[r]=new O(r,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new a.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,f={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new a.ErrorEvent(new Error(`Layer "${g}" already exists on this map.`)));let x;if(r.type==="custom"){if(cr(this,a.validateCustomStyleLayer(r)))return;x=a.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(g,r.source),r=a.clone$1(r),r=a.extend(r,{source:g})),this._validate(a.validateStyle.layer,`layers.${g}`,r,{arrayIndex:-1},f))return;x=a.createStyleLayer(r),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const A=u?this._order.indexOf(u):this._order.length;if(u&&A===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(A,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const f=this._order.indexOf(r);this._order.splice(f,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,f){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===u&&g.maxzoom===f||(u!=null&&(g.minzoom=u),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,f={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!a.deepEqual(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(a.validateStyle.filter,`layers.${g.id}.filter`,u,null,f)||(g.filter=a.clone$1(u),this._updateLayer(g)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,u,f,g={}){this._checkLoaded();const x=this.getLayer(r);x?a.deepEqual(x.getLayoutProperty(u),f)||(x.setLayoutProperty(u,f,g),this._updateLayer(x)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const f=this.getLayer(r);if(f)return f.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,f,g={}){this._checkLoaded();const x=this.getLayer(r);x?a.deepEqual(x.getPaintProperty(u),f)||(x.setPaintProperty(u,f,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const f=r.source,g=r.sourceLayer,x=this.sourceCaches[f];if(x===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const A=x.getSource().type;A==="geojson"&&g?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||g?(r.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,r.id,u)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const f=r.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const x=g.getSource().type,A=x==="vector"?r.sourceLayer:void 0;x!=="vector"||A?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(A,r.id,u):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,f=r.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,r.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const r=a.mapObject(this.sourceCaches,g=>g.serialize()),u=this._serializeByIds(this._order),f=this.stylesheet;return a.filterObject({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:r,layers:u},g=>g!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=A=>this._layers[A].type==="fill-extrusion",f={},g=[];for(let A=this._order.length-1;A>=0;A--){const k=this._order[A];if(u(k)){f[k]=A;for(const M of r){const N=M[k];if(N)for(const Y of N)g.push(Y)}}}g.sort((A,k)=>k.intersectionZ-A.intersectionZ);const x=[];for(let A=this._order.length-1;A>=0;A--){const k=this._order[A];if(u(k))for(let M=g.length-1;M>=0;M--){const N=g[M].feature;if(f[N.layer.id]<A)break;x.push(N),g.pop()}else for(const M of r){const N=M[k];if(N)for(const Y of N)x.push(Y.feature)}}return x}queryRenderedFeatures(r,u,f){u&&u.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const k of u.layers){const M=this._layers[k];if(!M)return this.fire(new a.ErrorEvent(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[M.source]=!0}}const x=[];u.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const k in this.sourceCaches)u.layers&&!g[k]||x.push(Ht(this.sourceCaches[k],this._layers,A,r,u,f));return this.placement&&x.push(function(k,M,N,Y,q,fe,ze){const Ae={},Me=fe.queryRenderedSymbols(Y),je=[];for(const Xe of Object.keys(Me).map(Number))je.push(ze[Xe]);je.sort(Rt);for(const Xe of je){const it=Xe.featureIndex.lookupSymbolFeatures(Me[Xe.bucketInstanceId],M,Xe.bucketIndex,Xe.sourceLayerIndex,q.filter,q.layers,q.availableImages,k);for(const Fe in it){const nt=Ae[Fe]=Ae[Fe]||[],lt=it[Fe];lt.sort((vt,wt)=>{const Tt=Xe.featureSortOrder;if(Tt){const _t=Tt.indexOf(vt.featureIndex);return Tt.indexOf(wt.featureIndex)-_t}return wt.featureIndex-vt.featureIndex});for(const vt of lt)nt.push(vt)}}for(const Xe in Ae)Ae[Xe].forEach(it=>{const Fe=it.feature,nt=N[k[Xe].source].getFeatureState(Fe.layer["source-layer"],Fe.id);Fe.source=Fe.layer.source,Fe.layer["source-layer"]&&(Fe.sourceLayer=Fe.layer["source-layer"]),Fe.state=nt});return Ae}(this._layers,A,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(r,u){u&&u.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[r];return f?function(g,x){const A=g.getRenderableIds().map(N=>g.getTileByID(N)),k=[],M={};for(let N=0;N<A.length;N++){const Y=A[N],q=Y.tileID.canonical.key;M[q]||(M[q]=!0,Y.querySourceFeatures(k,x))}return k}(f,u):[]}addSourceType(r,u,f){return jr.getSourceType(r)?f(new Error(`A source type called "${r}" already exists.`)):(jr.setSourceType(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const A in r)if(!a.deepEqual(r[A],f[A])){g=!0;break}if(!g)return;const x={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(x)}_validate(r,u,f,g,x={}){return(!x||x.validate!==!1)&&cr(this,r.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:f,styleSpec:a.v8Spec},g)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,f,g,x=!1){let A=!1,k=!1;const M={};for(const N of this._order){const Y=this._layers[N];if(Y.type!=="symbol")continue;if(!M[Y.source]){const fe=this.sourceCaches[Y.source];M[Y.source]=fe.getRenderableIds(!0).map(ze=>fe.getTileByID(ze)).sort((ze,Ae)=>Ae.tileID.overscaledZ-ze.tileID.overscaledZ||(ze.tileID.isLessThan(Ae.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(Y,M[Y.source],r.center.lng);A=A||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),r.zoom))&&(this.pauseablePlacement=new mn(r,this.map.terrain,this._order,x,u,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),k=!0),A&&this.pauseablePlacement.placement.setStale()),k||A)for(const N of this._order){const Y=this._layers[N];Y.type==="symbol"&&this.placement.updateLayerOpacities(Y,M[Y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,f){this.glyphManager.getGlyphs(u.stacks,f);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,f){return a.makeRequest(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(a.validateStyle.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,f={},g){this._checkLoaded();const x=[{id:r,url:u}],A=[...Z(this.stylesheet.sprite),...x];this._validate(a.validateStyle.sprite,"sprite",A,null,f)||(this.stylesheet.sprite=A,this._loadSprite(x,!0,g))}removeSprite(r){this._checkLoaded();const u=Z(this.stylesheet.sprite);if(u.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}else this.fire(new a.ErrorEvent(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Z(this.stylesheet.sprite)}setSprite(r,u={},f){this._checkLoaded(),r&&this._validate(a.validateStyle.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}jr.getSourceType=function(p){return sn[p]},jr.setSourceType=function(p,r){sn[p]=r},jr.registerForPluginStateChange=a.registerForPluginStateChange;var Vl=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Va="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Gr={prelude:Rn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Rn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Rn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Rn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Rn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Rn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Rn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Rn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Rn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Rn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Rn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Rn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Rn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Rn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Rn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Rn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Rn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Rn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Rn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Rn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Rn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Rn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Rn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Rn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Rn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Rn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Rn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Va),terrainDepth:Rn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Va),terrainCoords:Rn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Va)};function Rn(p,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),g=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=x?x.concat(g):g,k={};return{fragmentSource:p=p.replace(u,(M,N,Y,q,fe)=>(k[fe]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
varying ${Y} ${q} ${fe};
#else
uniform ${Y} ${q} u_${fe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${fe}
    ${Y} ${q} ${fe} = u_${fe};
#endif
`)),vertexSource:r=r.replace(u,(M,N,Y,q,fe)=>{const ze=q==="float"?"vec2":"vec4",Ae=fe.match(/color/)?"color":ze;return k[fe]?N==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
attribute ${Y} ${ze} a_${fe};
varying ${Y} ${q} ${fe};
#else
uniform ${Y} ${q} u_${fe};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = a_${fe};
#else
    ${Y} ${q} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = unpack_mix_${Ae}(a_${fe}, u_${fe}_t);
#else
    ${Y} ${q} ${fe} = u_${fe};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
attribute ${Y} ${ze} a_${fe};
#else
uniform ${Y} ${q} u_${fe};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${Y} ${q} ${fe} = a_${fe};
#else
    ${Y} ${q} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${Y} ${q} ${fe} = unpack_mix_${Ae}(a_${fe}, u_${fe}_t);
#else
    ${Y} ${q} ${fe} = u_${fe};
#endif
`}),staticAttributes:f,staticUniforms:A}}class Bo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,f,g,x,A,k,M,N){this.context=r;let Y=this.boundPaintVertexBuffers.length!==g.length;for(let q=0;!Y&&q<g.length;q++)this.boundPaintVertexBuffers[q]!==g[q]&&(Y=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||Y||this.boundIndexBuffer!==x||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==N?this.freshBind(u,f,g,x,A,k,M,N):(r.bindVertexArray.set(this.vao),k&&k.bind(),x&&x.dynamicDraw&&x.bind(),M&&M.bind(),N&&N.bind())}freshBind(r,u,f,g,x,A,k,M){const N=r.numAttributes,Y=this.context,q=Y.gl;this.vao&&this.destroy(),this.vao=Y.createVertexArray(),Y.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=M,u.enableAttributes(q,r);for(const fe of f)fe.enableAttributes(q,r);A&&A.enableAttributes(q,r),k&&k.enableAttributes(q,r),M&&M.enableAttributes(q,r),u.bind(),u.setVertexAttribPointers(q,r,x);for(const fe of f)fe.bind(),fe.setVertexAttribPointers(q,r,x);A&&(A.bind(),A.setVertexAttribPointers(q,r,x)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(q,r,x)),M&&(M.bind(),M.setVertexAttribPointers(q,r,x)),Y.currentNumAttributes=N}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function oa(p){const r=[];for(let u=0;u<p.length;u++){if(p[u]===null)continue;const f=p[u].split(" ");r.push(f.pop())}return r}class Ga{constructor(r,u,f,g,x,A,k){const M=r.gl;this.program=M.createProgram();const N=oa(f.staticAttributes),Y=g?g.getBinderAttributes():[],q=N.concat(Y),fe=Gr.prelude.staticUniforms?oa(Gr.prelude.staticUniforms):[],ze=f.staticUniforms?oa(f.staticUniforms):[],Ae=g?g.getBinderUniforms():[],Me=fe.concat(ze).concat(Ae),je=[];for(const wt of Me)je.indexOf(wt)<0&&je.push(wt);const Xe=g?g.defines():[];A&&Xe.push("#define OVERDRAW_INSPECTOR;"),k&&Xe.push("#define TERRAIN3D;");const it=Xe.concat(Gr.prelude.fragmentSource,f.fragmentSource).join(`
`),Fe=Xe.concat(Gr.prelude.vertexSource,f.vertexSource).join(`
`),nt=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(nt,it),M.compileShader(nt),M.attachShader(this.program,nt);const lt=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(lt,Fe),M.compileShader(lt),M.attachShader(this.program,lt),this.attributes={};const vt={};this.numAttributes=q.length;for(let wt=0;wt<this.numAttributes;wt++)q[wt]&&(M.bindAttribLocation(this.program,wt,q[wt]),this.attributes[q[wt]]=wt);M.linkProgram(this.program),M.deleteShader(lt),M.deleteShader(nt);for(let wt=0;wt<je.length;wt++){const Tt=je[wt];if(Tt&&!vt[Tt]){const _t=M.getUniformLocation(this.program,Tt);_t&&(vt[Tt]=_t)}}this.fixedUniforms=x(r,vt),this.terrainUniforms=((wt,Tt)=>({u_depth:new a.Uniform1i(wt,Tt.u_depth),u_terrain:new a.Uniform1i(wt,Tt.u_terrain),u_terrain_dim:new a.Uniform1f(wt,Tt.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(wt,Tt.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(wt,Tt.u_terrain_unpack),u_terrain_exaggeration:new a.Uniform1f(wt,Tt.u_terrain_exaggeration)}))(r,vt),this.binderUniforms=g?g.getUniforms(r,vt):[]}draw(r,u,f,g,x,A,k,M,N,Y,q,fe,ze,Ae,Me,je,Xe,it){const Fe=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(g),r.setColorMode(x),r.setCullFace(A),M){r.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,M.depthTexture),r.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,M.texture);for(const lt in this.terrainUniforms)this.terrainUniforms[lt].set(M[lt])}for(const lt in this.fixedUniforms)this.fixedUniforms[lt].set(k[lt]);Me&&Me.setUniforms(r,this.binderUniforms,ze,{zoom:Ae});let nt=0;switch(u){case Fe.LINES:nt=2;break;case Fe.TRIANGLES:nt=3;break;case Fe.LINE_STRIP:nt=1}for(const lt of fe.get()){const vt=lt.vaos||(lt.vaos={});(vt[N]||(vt[N]=new Bo)).bind(r,this,Y,Me?Me.getPaintVertexBuffers():[],q,lt.vertexOffset,je,Xe,it),Fe.drawElements(u,lt.primitiveLength*nt,Fe.UNSIGNED_SHORT,lt.primitiveOffset*nt*2)}}}function Vu(p,r,u){const f=1/Ue(u,1,r.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),x=u.tileSize*Math.pow(2,r.transform.tileZoom)/g,A=x*(u.tileID.canonical.x+u.tileID.wrap*g),k=x*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[A>>16,k>>16],u_pixel_coord_lower:[65535&A,65535&k]}}const sa=(p,r,u,f)=>{const g=r.style.light,x=g.properties.get("position"),A=[x.x,x.y,x.z],k=function(){var N=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(N[1]=0,N[2]=0,N[3]=0,N[5]=0,N[6]=0,N[7]=0),N[0]=1,N[4]=1,N[8]=1,N}();g.properties.get("anchor")==="viewport"&&function(N,Y){var q=Math.sin(Y),fe=Math.cos(Y);N[0]=fe,N[1]=q,N[2]=0,N[3]=-q,N[4]=fe,N[5]=0,N[6]=0,N[7]=0,N[8]=1}(k,-r.transform.angle),function(N,Y,q){var fe=Y[0],ze=Y[1],Ae=Y[2];N[0]=fe*q[0]+ze*q[3]+Ae*q[6],N[1]=fe*q[1]+ze*q[4]+Ae*q[7],N[2]=fe*q[2]+ze*q[5]+Ae*q[8]}(A,A,k);const M=g.properties.get("color");return{u_matrix:p,u_lightpos:A,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:f}},Gl=(p,r,u,f,g,x,A)=>a.extend(sa(p,r,u,f),Vu(x,r,A),{u_height_factor:-Math.pow(2,g.overscaledZ)/A.tileSize/8}),Gu=p=>({u_matrix:p}),pi=(p,r,u,f)=>a.extend(Gu(p),Vu(u,r,f)),Sh=(p,r)=>({u_matrix:p,u_world:r}),Zu=(p,r,u,f,g)=>a.extend(pi(p,r,u,f),{u_world:g}),Th=(p,r,u,f)=>{const g=p.transform;let x,A;if(f.paint.get("circle-pitch-alignment")==="map"){const k=Ue(u,1,g.zoom);x=!0,A=[k,k]}else x=!1,A=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(r.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:A}},Zl=(p,r,u)=>{const f=Ue(u,1,r.zoom),g=Math.pow(2,r.zoom-u.tileID.overscaledZ),x=u.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*g),r.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:x}},Wl=(p,r,u=1)=>({u_matrix:p,u_color:r,u_overlay:0,u_overlay_scale:u}),Za=p=>({u_matrix:p}),Wa=(p,r,u,f)=>({u_matrix:p,u_extrude_scale:Ue(r,1,u),u_intensity:f});function Hl(p,r){const u=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new a.MercatorCoordinate(0,f/u).toLngLat().lat,new a.MercatorCoordinate(0,(f+1)/u).toLngLat().lat]}const Ai=(p,r,u,f)=>{const g=p.transform;return{u_matrix:Ms(p,r,u,f),u_ratio:1/Ue(r,1,g.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Ha=(p,r,u,f,g)=>a.extend(Ai(p,r,u,g),{u_image:0,u_image_height:f}),Dr=(p,r,u,f,g)=>{const x=p.transform,A=aa(r,x);return{u_matrix:Ms(p,r,u,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Ue(r,1,x.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[A,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Xa=(p,r,u,f,g,x)=>{const A=p.lineAtlas,k=aa(r,p.transform),M=u.layout.get("line-cap")==="round",N=A.getDash(f.from,M),Y=A.getDash(f.to,M),q=N.width*g.fromScale,fe=Y.width*g.toScale;return a.extend(Ai(p,r,u,x),{u_patternscale_a:[k/q,-N.height/2],u_patternscale_b:[k/fe,-Y.height/2],u_sdfgamma:A.width/(256*Math.min(q,fe)*p.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:Y.y,u_mix:g.t})};function aa(p,r){return 1/Ue(p,1,r.tileZoom)}function Ms(p,r,u,f){return p.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const qa=(p,r,u,f,g)=>{return{u_matrix:p,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(A=g.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:la(g.paint.get("raster-hue-rotate"))};var x,A};function la(p){p*=Math.PI/180;const r=Math.sin(p),u=Math.cos(p);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const ks=(p,r,u,f,g,x,A,k,M,N)=>{const Y=g.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:Y.width/Y.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:A,u_coord_matrix:k,u_is_text:+M,u_pitch_with_map:+f,u_texsize:N,u_texture:0}},zs=(p,r,u,f,g,x,A,k,M,N,Y)=>{const q=g.transform;return a.extend(ks(p,r,u,f,g,x,A,k,M,N),{u_gamma_scale:f?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+Y})},Ka=(p,r,u,f,g,x,A,k,M,N)=>a.extend(zs(p,r,u,f,g,x,A,k,!0,M,!0),{u_texsize_icon:N,u_texture_icon:1}),Jr=(p,r,u)=>({u_matrix:p,u_opacity:r,u_color:u}),mi=(p,r,u,f,g,x)=>a.extend(function(A,k,M,N){const Y=M.imageManager.getPattern(A.from.toString()),q=M.imageManager.getPattern(A.to.toString()),{width:fe,height:ze}=M.imageManager.getPixelSize(),Ae=Math.pow(2,N.tileID.overscaledZ),Me=N.tileSize*Math.pow(2,M.transform.tileZoom)/Ae,je=Me*(N.tileID.canonical.x+N.tileID.wrap*Ae),Xe=Me*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[fe,ze],u_mix:k.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/Ue(N,1,M.transform.tileZoom),u_pixel_coord_upper:[je>>16,Xe>>16],u_pixel_coord_lower:[65535&je,65535&Xe]}}(f,x,u,g),{u_matrix:p,u_opacity:r}),Xl={fillExtrusion:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_lightpos:new a.Uniform3f(p,r.u_lightpos),u_lightintensity:new a.Uniform1f(p,r.u_lightintensity),u_lightcolor:new a.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new a.Uniform1f(p,r.u_vertical_gradient),u_opacity:new a.Uniform1f(p,r.u_opacity)}),fillExtrusionPattern:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_lightpos:new a.Uniform3f(p,r.u_lightpos),u_lightintensity:new a.Uniform1f(p,r.u_lightintensity),u_lightcolor:new a.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new a.Uniform1f(p,r.u_vertical_gradient),u_height_factor:new a.Uniform1f(p,r.u_height_factor),u_image:new a.Uniform1i(p,r.u_image),u_texsize:new a.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new a.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new a.Uniform3f(p,r.u_scale),u_fade:new a.Uniform1f(p,r.u_fade),u_opacity:new a.Uniform1f(p,r.u_opacity)}),fill:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix)}),fillPattern:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_image:new a.Uniform1i(p,r.u_image),u_texsize:new a.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new a.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new a.Uniform3f(p,r.u_scale),u_fade:new a.Uniform1f(p,r.u_fade)}),fillOutline:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_world:new a.Uniform2f(p,r.u_world)}),fillOutlinePattern:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_world:new a.Uniform2f(p,r.u_world),u_image:new a.Uniform1i(p,r.u_image),u_texsize:new a.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new a.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new a.Uniform3f(p,r.u_scale),u_fade:new a.Uniform1f(p,r.u_fade)}),circle:(p,r)=>({u_camera_to_center_distance:new a.Uniform1f(p,r.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(p,r.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(p,r.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(p,r.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(p,r.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(p,r.u_matrix)}),collisionBox:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_camera_to_center_distance:new a.Uniform1f(p,r.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(p,r.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(p,r.u_extrude_scale),u_overscale_factor:new a.Uniform1f(p,r.u_overscale_factor)}),collisionCircle:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_inv_matrix:new a.UniformMatrix4f(p,r.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(p,r.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(p,r.u_viewport_size)}),debug:(p,r)=>({u_color:new a.UniformColor(p,r.u_color),u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_overlay:new a.Uniform1i(p,r.u_overlay),u_overlay_scale:new a.Uniform1f(p,r.u_overlay_scale)}),clippingMask:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix)}),heatmap:(p,r)=>({u_extrude_scale:new a.Uniform1f(p,r.u_extrude_scale),u_intensity:new a.Uniform1f(p,r.u_intensity),u_matrix:new a.UniformMatrix4f(p,r.u_matrix)}),heatmapTexture:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_world:new a.Uniform2f(p,r.u_world),u_image:new a.Uniform1i(p,r.u_image),u_color_ramp:new a.Uniform1i(p,r.u_color_ramp),u_opacity:new a.Uniform1f(p,r.u_opacity)}),hillshade:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_image:new a.Uniform1i(p,r.u_image),u_latrange:new a.Uniform2f(p,r.u_latrange),u_light:new a.Uniform2f(p,r.u_light),u_shadow:new a.UniformColor(p,r.u_shadow),u_highlight:new a.UniformColor(p,r.u_highlight),u_accent:new a.UniformColor(p,r.u_accent)}),hillshadePrepare:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_image:new a.Uniform1i(p,r.u_image),u_dimension:new a.Uniform2f(p,r.u_dimension),u_zoom:new a.Uniform1f(p,r.u_zoom),u_unpack:new a.Uniform4f(p,r.u_unpack)}),line:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_ratio:new a.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new a.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(p,r.u_units_to_pixels)}),lineGradient:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_ratio:new a.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new a.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(p,r.u_units_to_pixels),u_image:new a.Uniform1i(p,r.u_image),u_image_height:new a.Uniform1f(p,r.u_image_height)}),linePattern:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_texsize:new a.Uniform2f(p,r.u_texsize),u_ratio:new a.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new a.Uniform1f(p,r.u_device_pixel_ratio),u_image:new a.Uniform1i(p,r.u_image),u_units_to_pixels:new a.Uniform2f(p,r.u_units_to_pixels),u_scale:new a.Uniform3f(p,r.u_scale),u_fade:new a.Uniform1f(p,r.u_fade)}),lineSDF:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_ratio:new a.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new a.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(p,r.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(p,r.u_patternscale_a),u_patternscale_b:new a.Uniform2f(p,r.u_patternscale_b),u_sdfgamma:new a.Uniform1f(p,r.u_sdfgamma),u_image:new a.Uniform1i(p,r.u_image),u_tex_y_a:new a.Uniform1f(p,r.u_tex_y_a),u_tex_y_b:new a.Uniform1f(p,r.u_tex_y_b),u_mix:new a.Uniform1f(p,r.u_mix)}),raster:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_tl_parent:new a.Uniform2f(p,r.u_tl_parent),u_scale_parent:new a.Uniform1f(p,r.u_scale_parent),u_buffer_scale:new a.Uniform1f(p,r.u_buffer_scale),u_fade_t:new a.Uniform1f(p,r.u_fade_t),u_opacity:new a.Uniform1f(p,r.u_opacity),u_image0:new a.Uniform1i(p,r.u_image0),u_image1:new a.Uniform1i(p,r.u_image1),u_brightness_low:new a.Uniform1f(p,r.u_brightness_low),u_brightness_high:new a.Uniform1f(p,r.u_brightness_high),u_saturation_factor:new a.Uniform1f(p,r.u_saturation_factor),u_contrast_factor:new a.Uniform1f(p,r.u_contrast_factor),u_spin_weights:new a.Uniform3f(p,r.u_spin_weights)}),symbolIcon:(p,r)=>({u_is_size_zoom_constant:new a.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new a.Uniform1f(p,r.u_size_t),u_size:new a.Uniform1f(p,r.u_size),u_camera_to_center_distance:new a.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new a.Uniform1f(p,r.u_pitch),u_rotate_symbol:new a.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new a.Uniform1f(p,r.u_fade_change),u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new a.Uniform1i(p,r.u_is_text),u_pitch_with_map:new a.Uniform1i(p,r.u_pitch_with_map),u_texsize:new a.Uniform2f(p,r.u_texsize),u_texture:new a.Uniform1i(p,r.u_texture)}),symbolSDF:(p,r)=>({u_is_size_zoom_constant:new a.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new a.Uniform1f(p,r.u_size_t),u_size:new a.Uniform1f(p,r.u_size),u_camera_to_center_distance:new a.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new a.Uniform1f(p,r.u_pitch),u_rotate_symbol:new a.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new a.Uniform1f(p,r.u_fade_change),u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new a.Uniform1i(p,r.u_is_text),u_pitch_with_map:new a.Uniform1i(p,r.u_pitch_with_map),u_texsize:new a.Uniform2f(p,r.u_texsize),u_texture:new a.Uniform1i(p,r.u_texture),u_gamma_scale:new a.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(p,r.u_is_halo)}),symbolTextAndIcon:(p,r)=>({u_is_size_zoom_constant:new a.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new a.Uniform1f(p,r.u_size_t),u_size:new a.Uniform1f(p,r.u_size),u_camera_to_center_distance:new a.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new a.Uniform1f(p,r.u_pitch),u_rotate_symbol:new a.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new a.Uniform1f(p,r.u_fade_change),u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new a.Uniform1i(p,r.u_is_text),u_pitch_with_map:new a.Uniform1i(p,r.u_pitch_with_map),u_texsize:new a.Uniform2f(p,r.u_texsize),u_texsize_icon:new a.Uniform2f(p,r.u_texsize_icon),u_texture:new a.Uniform1i(p,r.u_texture),u_texture_icon:new a.Uniform1i(p,r.u_texture_icon),u_gamma_scale:new a.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(p,r.u_is_halo)}),background:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_opacity:new a.Uniform1f(p,r.u_opacity),u_color:new a.UniformColor(p,r.u_color)}),backgroundPattern:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_opacity:new a.Uniform1f(p,r.u_opacity),u_image:new a.Uniform1i(p,r.u_image),u_pattern_tl_a:new a.Uniform2f(p,r.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(p,r.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(p,r.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(p,r.u_pattern_br_b),u_texsize:new a.Uniform2f(p,r.u_texsize),u_mix:new a.Uniform1f(p,r.u_mix),u_pattern_size_a:new a.Uniform2f(p,r.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(p,r.u_pattern_size_b),u_scale_a:new a.Uniform1f(p,r.u_scale_a),u_scale_b:new a.Uniform1f(p,r.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(p,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(p,r.u_tile_units_to_pixels)}),terrain:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_texture:new a.Uniform1i(p,r.u_texture),u_ele_delta:new a.Uniform1f(p,r.u_ele_delta)}),terrainDepth:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_ele_delta:new a.Uniform1f(p,r.u_ele_delta)}),terrainCoords:(p,r)=>({u_matrix:new a.UniformMatrix4f(p,r.u_matrix),u_texture:new a.Uniform1i(p,r.u_texture),u_terrain_coords_id:new a.Uniform1f(p,r.u_terrain_coords_id),u_ele_delta:new a.Uniform1f(p,r.u_ele_delta)})};class Ya{constructor(r,u,f){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ja={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qa{constructor(r,u,f,g){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=r;const x=r.gl;this.buffer=x.createBuffer(),r.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let f=0;f<this.attributes.length;f++){const g=u.attributes[this.attributes[f].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,u,f){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],A=u.attributes[x.name];A!==void 0&&r.vertexAttribPointer(A,x.components,r[Ja[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ua=new WeakMap;function No(p){if(ua.has(p))return ua.get(p);{const r=p.getParameter(p.VERSION).startsWith("WebGL 2.0");return ua.set(p,r),r}}class kn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ql extends kn{getDefault(){return a.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ca extends kn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Wu extends kn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Hu extends kn{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ls extends kn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Ch extends kn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Xu extends kn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Ah extends kn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Kl extends kn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ih extends kn{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ph extends kn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class Yl extends kn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class el extends kn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class Jl extends kn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ql extends kn{getDefault(){return a.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class is extends kn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class tl extends kn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class qu extends kn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class eu extends kn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class os extends kn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Ku extends kn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class ss extends kn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Os extends kn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Yu extends kn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class tu extends kn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Nn extends kn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class as extends kn{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Mh extends kn{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const f=this.gl;No(f)?f.bindVertexArray(r):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class ls extends kn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Rs extends kn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class ao extends kn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class nu extends kn{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Ju extends nu{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class kh extends nu{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ru extends nu{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Fs{constructor(r,u,f,g,x){this.context=r,this.width=u,this.height=f;const A=r.gl,k=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Ju(r,k),g)this.depthAttachment=x?new ru(r,k):new kh(r,k);else if(x)throw new Error("Stencil cannot be setted without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Jn{constructor(r,u,f){this.blendFunction=r,this.blendColor=u,this.mask=f}}Jn.Replace=[1,0],Jn.disabled=new Jn(Jn.Replace,a.Color.transparent,[!1,!1,!1,!1]),Jn.unblended=new Jn(Jn.Replace,a.Color.transparent,[!0,!0,!0,!0]),Jn.alphaBlended=new Jn([1,771],a.Color.transparent,[!0,!0,!0,!0]);class js{constructor(r){var u,f;if(this.gl=r,this.clearColor=new ql(this),this.clearDepth=new ca(this),this.clearStencil=new Wu(this),this.colorMask=new Hu(this),this.depthMask=new Ls(this),this.stencilMask=new Ch(this),this.stencilFunc=new Xu(this),this.stencilOp=new Ah(this),this.stencilTest=new Kl(this),this.depthRange=new Ih(this),this.depthTest=new Ph(this),this.depthFunc=new Yl(this),this.blend=new el(this),this.blendFunc=new Jl(this),this.blendColor=new Ql(this),this.blendEquation=new is(this),this.cullFace=new tl(this),this.cullFaceSide=new qu(this),this.frontFace=new eu(this),this.program=new os(this),this.activeTexture=new Ku(this),this.viewport=new ss(this),this.bindFramebuffer=new Os(this),this.bindRenderbuffer=new Yu(this),this.bindTexture=new tu(this),this.bindVertexBuffer=new Nn(this),this.bindElementBuffer=new as(this),this.bindVertexArray=new Mh(this),this.pixelStoreUnpack=new ls(this),this.pixelStoreUnpackPremultiplyAlpha=new Rs(this),this.pixelStoreUnpackFlipY=new ao(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),No(r)){this.HALF_FLOAT=r.HALF_FLOAT;const g=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:g==null?void 0:g.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const g=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Ya(this,r,u)}createVertexBuffer(r,u,f){return new Qa(this,r,u,f)}createRenderbuffer(r,u,f){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,r,u,f),this.bindRenderbuffer.set(null),x}createFramebuffer(r,u,f,g){return new Fs(this,r,u,f,g)}clear({color:r,depth:u,stencil:f}){const g=this.gl;let x=0;r&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(x)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.deepEqual(r.blendFunction,Jn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return No(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return No(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Sn{constructor(r,u,f){this.func=r,this.mask=u,this.range=f}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const nl=7680;class Vn{constructor(r,u,f,g,x,A){this.test=r,this.ref=u,this.mask=f,this.fail=g,this.depthFail=x,this.pass=A}}Vn.disabled=new Vn({func:519,mask:0},0,0,nl,nl,nl);class Zn{constructor(r,u,f){this.enable=r,this.mode=u,this.frontFace=f}}let us;function Qu(p,r,u,f,g,x,A){const k=p.context,M=k.gl,N=p.useProgram("collisionBox"),Y=[];let q=0,fe=0;for(let Fe=0;Fe<f.length;Fe++){const nt=f[Fe],lt=r.getTile(nt),vt=lt.getBucket(u);if(!vt)continue;let wt=nt.posMatrix;g[0]===0&&g[1]===0||(wt=p.translatePosMatrix(nt.posMatrix,lt,g,x));const Tt=A?vt.textCollisionBox:vt.iconCollisionBox,_t=vt.collisionCircleArray;if(_t.length>0){const Dt=a.create(),tn=wt;a.mul(Dt,vt.placementInvProjMatrix,p.transform.glCoordMatrix),a.mul(Dt,Dt,vt.placementViewportMatrix),Y.push({circleArray:_t,circleOffset:fe,transform:tn,invTransform:Dt,coord:nt}),q+=_t.length/4,fe=q}Tt&&N.draw(k,M.LINES,Sn.disabled,Vn.disabled,p.colorModeForRenderPass(),Zn.disabled,Zl(wt,p.transform,lt),p.style.map.terrain&&p.style.map.terrain.getTerrainData(nt),u.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,p.transform.zoom,null,null,Tt.collisionVertexBuffer)}if(!A||!Y.length)return;const ze=p.useProgram("collisionCircle"),Ae=new a.CollisionCircleLayoutArray;Ae.resize(4*q),Ae._trim();let Me=0;for(const Fe of Y)for(let nt=0;nt<Fe.circleArray.length/4;nt++){const lt=4*nt,vt=Fe.circleArray[lt+0],wt=Fe.circleArray[lt+1],Tt=Fe.circleArray[lt+2],_t=Fe.circleArray[lt+3];Ae.emplace(Me++,vt,wt,Tt,_t,0),Ae.emplace(Me++,vt,wt,Tt,_t,1),Ae.emplace(Me++,vt,wt,Tt,_t,2),Ae.emplace(Me++,vt,wt,Tt,_t,3)}(!us||us.length<2*q)&&(us=function(Fe){const nt=2*Fe,lt=new a.QuadTriangleArray;lt.resize(nt),lt._trim();for(let vt=0;vt<nt;vt++){const wt=6*vt;lt.uint16[wt+0]=4*vt+0,lt.uint16[wt+1]=4*vt+1,lt.uint16[wt+2]=4*vt+2,lt.uint16[wt+3]=4*vt+2,lt.uint16[wt+4]=4*vt+3,lt.uint16[wt+5]=4*vt+0}return lt}(q));const je=k.createIndexBuffer(us,!0),Xe=k.createVertexBuffer(Ae,a.collisionCircleLayout.members,!0);for(const Fe of Y){const nt={u_matrix:Fe.transform,u_inv_matrix:Fe.invTransform,u_camera_to_center_distance:(it=p.transform).cameraToCenterDistance,u_viewport_size:[it.width,it.height]};ze.draw(k,M.TRIANGLES,Sn.disabled,Vn.disabled,p.colorModeForRenderPass(),Zn.disabled,nt,p.style.map.terrain&&p.style.map.terrain.getTerrainData(Fe.coord),u.id,Xe,je,a.SegmentVector.simpleSegment(0,2*Fe.circleOffset,Fe.circleArray.length,Fe.circleArray.length/2),null,p.transform.zoom,null,null,null)}var it;Xe.destroy(),je.destroy()}Zn.disabled=new Zn(!1,1029,2305),Zn.backCCW=new Zn(!0,1029,2305);const iu=a.identity(new Float32Array(16));function rl(p,r,u,f,g,x){const{horizontalAlign:A,verticalAlign:k}=a.getAnchorAlignment(p),M=-(A-.5)*r,N=-(k-.5)*u,Y=a.evaluateVariableOffset(p,f);return new a.Point((M/g+Y[0])*x,(N/g+Y[1])*x)}function Uo(p,r,u,f,g,x,A,k,M,N,Y){const q=p.text.placedSymbolArray,fe=p.text.dynamicLayoutVertexArray,ze=p.icon.dynamicLayoutVertexArray,Ae={};fe.clear();for(let Me=0;Me<q.length;Me++){const je=q.get(Me),Xe=je.hidden||!je.crossTileID||p.allowVerticalPlacement&&!je.placedOrientation?null:f[je.crossTileID];if(Xe){const it=new a.Point(je.anchorX,je.anchorY),Fe=cn(it,u?A:x,Y),nt=Lt(g.cameraToCenterDistance,Fe.signedDistanceFromCamera);let lt=a.evaluateSizeForFeature(p.textSizeData,M,je)*nt/a.ONE_EM;u&&(lt*=p.tilePixelRatio/k);const{width:vt,height:wt,anchor:Tt,textOffset:_t,textBoxScale:Dt}=Xe,tn=rl(Tt,vt,wt,_t,Dt,lt),gn=u?cn(it.add(tn),x,Y).point:Fe.point.add(r?tn.rotate(-g.angle):tn),kt=p.allowVerticalPlacement&&je.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let un=0;un<je.numGlyphs;un++)a.addDynamicAttributes(fe,gn,kt);N&&je.associatedIconIndex>=0&&(Ae[je.associatedIconIndex]={shiftedAnchor:gn,angle:kt})}else he(je.numGlyphs,fe)}if(N){ze.clear();const Me=p.icon.placedSymbolArray;for(let je=0;je<Me.length;je++){const Xe=Me.get(je);if(Xe.hidden)he(Xe.numGlyphs,ze);else{const it=Ae[je];if(it)for(let Fe=0;Fe<Xe.numGlyphs;Fe++)a.addDynamicAttributes(ze,it.shiftedAnchor,it.angle);else he(Xe.numGlyphs,ze)}}p.icon.dynamicLayoutVertexBuffer.updateData(ze)}p.text.dynamicLayoutVertexBuffer.updateData(fe)}function il(p,r,u){return u.iconsInText&&r?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function ha(p,r,u,f,g,x,A,k,M,N,Y,q){const fe=p.context,ze=fe.gl,Ae=p.transform,Me=k==="map",je=M==="map",Xe=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",it=Me&&!je&&!Xe,Fe=!u.layout.get("symbol-sort-key").isConstant();let nt=!1;const lt=p.depthModeForSublayer(0,Sn.ReadOnly),vt=u.layout.get("text-variable-anchor"),wt=[];for(const Tt of f){const _t=r.getTile(Tt),Dt=_t.getBucket(u);if(!Dt)continue;const tn=g?Dt.text:Dt.icon;if(!tn||!tn.segments.get().length||!tn.hasVisibleVertices)continue;const gn=tn.programConfigurations.get(u.id),kt=g||Dt.sdfIcons,un=g?Dt.textSizeData:Dt.iconSizeData,Bt=je||Ae.pitch!==0,jn=p.useProgram(il(kt,g,Dt),gn),Er=a.evaluateSizeForZoom(un,Ae.zoom),Dn=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Tt);let yn,vr,gi,Sr,Wr=[0,0],Vi=null;if(g)vr=_t.glyphAtlasTexture,gi=ze.LINEAR,yn=_t.glyphAtlasTexture.size,Dt.iconsInText&&(Wr=_t.imageAtlasTexture.size,Vi=_t.imageAtlasTexture,Sr=Bt||p.options.rotating||p.options.zooming||un.kind==="composite"||un.kind==="camera"?ze.LINEAR:ze.NEAREST);else{const Ur=u.layout.get("icon-size").constantOr(0)!==1||Dt.iconsNeedLinear;vr=_t.imageAtlasTexture,gi=kt||p.options.rotating||p.options.zooming||Ur||Bt?ze.LINEAR:ze.NEAREST,yn=_t.imageAtlasTexture.size}const bo=Ue(_t,1,p.transform.zoom),Eo=Qe(Tt.posMatrix,je,Me,p.transform,bo),yi=Gt(Tt.posMatrix,je,Me,p.transform,bo),Wo=vt&&Dt.hasTextData(),pu=u.layout.get("icon-text-fit")!=="none"&&Wo&&Dt.hasIconData();if(Xe){const Ur=p.style.map.terrain?(mc,fs)=>p.style.map.terrain.getElevation(Tt,mc,fs):null,Gi=u.layout.get("text-rotation-alignment")==="map";_n(Dt,Tt.posMatrix,p,g,Eo,yi,je,N,Gi,Ur)}const ii=p.translatePosMatrix(Tt.posMatrix,_t,x,A),Hr=Xe||g&&vt||pu?iu:Eo,Un=p.translatePosMatrix(yi,_t,x,A,!0),Nr=kt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Xr;Xr=kt?Dt.iconsInText?Ka(un.kind,Er,it,je,p,ii,Hr,Un,yn,Wr):zs(un.kind,Er,it,je,p,ii,Hr,Un,g,yn,!0):ks(un.kind,Er,it,je,p,ii,Hr,Un,g,yn);const Gn={program:jn,buffers:tn,uniformValues:Xr,atlasTexture:vr,atlasTextureIcon:Vi,atlasInterpolation:gi,atlasInterpolationIcon:Sr,isSDF:kt,hasHalo:Nr};if(Fe&&Dt.canOverlap){nt=!0;const Ur=tn.segments.get();for(const Gi of Ur)wt.push({segments:new a.SegmentVector([Gi]),sortKey:Gi.sortKey,state:Gn,terrainData:Dn})}else wt.push({segments:tn.segments,sortKey:0,state:Gn,terrainData:Dn})}nt&&wt.sort((Tt,_t)=>Tt.sortKey-_t.sortKey);for(const Tt of wt){const _t=Tt.state;if(fe.activeTexture.set(ze.TEXTURE0),_t.atlasTexture.bind(_t.atlasInterpolation,ze.CLAMP_TO_EDGE),_t.atlasTextureIcon&&(fe.activeTexture.set(ze.TEXTURE1),_t.atlasTextureIcon&&_t.atlasTextureIcon.bind(_t.atlasInterpolationIcon,ze.CLAMP_TO_EDGE)),_t.isSDF){const Dt=_t.uniformValues;_t.hasHalo&&(Dt.u_is_halo=1,Ds(_t.buffers,Tt.segments,u,p,_t.program,lt,Y,q,Dt,Tt.terrainData)),Dt.u_is_halo=0}Ds(_t.buffers,Tt.segments,u,p,_t.program,lt,Y,q,_t.uniformValues,Tt.terrainData)}}function Ds(p,r,u,f,g,x,A,k,M,N){const Y=f.context;g.draw(Y,Y.gl.TRIANGLES,x,A,k,Zn.disabled,M,N,u.id,p.layoutVertexBuffer,p.indexBuffer,r,u.paint,f.transform.zoom,p.programConfigurations.get(u.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function ou(p,r,u,f,g){if(!u||!f||!f.imageAtlas)return;const x=f.imageAtlas.patternPositions;let A=x[u.to.toString()],k=x[u.from.toString()];if(!A||!k){const M=g.getPaintProperty(r);A=x[M],k=x[M]}A&&k&&p.setConstantPatternPositions(A,k)}function lo(p,r,u,f,g,x,A){const k=p.context.gl,M="fill-pattern",N=u.paint.get(M),Y=N&&N.constantOr(1),q=u.getCrossfadeParameters();let fe,ze,Ae,Me,je;A?(ze=Y&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",fe=k.LINES):(ze=Y?"fillPattern":"fill",fe=k.TRIANGLES);const Xe=N.constantOr(null);for(const it of f){const Fe=r.getTile(it);if(Y&&!Fe.patternsLoaded())continue;const nt=Fe.getBucket(u);if(!nt)continue;const lt=nt.programConfigurations.get(u.id),vt=p.useProgram(ze,lt),wt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(it);Y&&(p.context.activeTexture.set(k.TEXTURE0),Fe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),lt.updatePaintBuffers(q)),ou(lt,M,Xe,Fe,u);const Tt=wt?it:null,_t=p.translatePosMatrix(Tt?Tt.posMatrix:it.posMatrix,Fe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(A){Me=nt.indexBuffer2,je=nt.segments2;const Dt=[k.drawingBufferWidth,k.drawingBufferHeight];Ae=ze==="fillOutlinePattern"&&Y?Zu(_t,p,q,Fe,Dt):Sh(_t,Dt)}else Me=nt.indexBuffer,je=nt.segments,Ae=Y?pi(_t,p,q,Fe):Gu(_t);vt.draw(p.context,fe,g,p.stencilModeForClipping(it),x,Zn.disabled,Ae,wt,u.id,nt.layoutVertexBuffer,Me,je,u.paint,p.transform.zoom,lt)}}function uo(p,r,u,f,g,x,A){const k=p.context,M=k.gl,N="fill-extrusion-pattern",Y=u.paint.get(N),q=Y.constantOr(1),fe=u.getCrossfadeParameters(),ze=u.paint.get("fill-extrusion-opacity"),Ae=Y.constantOr(null);for(const Me of f){const je=r.getTile(Me),Xe=je.getBucket(u);if(!Xe)continue;const it=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Me),Fe=Xe.programConfigurations.get(u.id),nt=p.useProgram(q?"fillExtrusionPattern":"fillExtrusion",Fe);q&&(p.context.activeTexture.set(M.TEXTURE0),je.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),Fe.updatePaintBuffers(fe)),ou(Fe,N,Ae,je,u);const lt=p.translatePosMatrix(Me.posMatrix,je,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),vt=u.paint.get("fill-extrusion-vertical-gradient"),wt=q?Gl(lt,p,vt,ze,Me,fe,je):sa(lt,p,vt,ze);nt.draw(k,k.gl.TRIANGLES,g,x,A,Zn.backCCW,wt,it,u.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,u.paint,p.transform.zoom,Fe,p.style.map.terrain&&Xe.centroidVertexBuffer)}}function Qr(p,r,u,f,g,x,A){const k=p.context,M=k.gl,N=u.fbo;if(!N)return;const Y=p.useProgram("hillshade"),q=p.style.map.terrain&&p.style.map.terrain.getTerrainData(r);k.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,N.colorAttachment.get()),Y.draw(k,M.TRIANGLES,g,x,A,Zn.disabled,((fe,ze,Ae,Me)=>{const je=Ae.paint.get("hillshade-shadow-color"),Xe=Ae.paint.get("hillshade-highlight-color"),it=Ae.paint.get("hillshade-accent-color");let Fe=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=fe.transform.angle);const nt=!fe.options.moving;return{u_matrix:Me?Me.posMatrix:fe.transform.calculatePosMatrix(ze.tileID.toUnwrapped(),nt),u_image:0,u_latrange:Hl(0,ze.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),Fe],u_shadow:je,u_highlight:Xe,u_accent:it}})(p,u,f,q?r:null),q,f.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function $o(p,r,u,f,g,x){const A=p.context,k=A.gl,M=r.dem;if(M&&M.data){const N=M.dim,Y=M.stride,q=M.getPixels();if(A.activeTexture.set(k.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||p.getTileTexture(Y),r.demTexture){const ze=r.demTexture;ze.update(q,{premultiply:!1}),ze.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else r.demTexture=new H(A,q,k.RGBA,{premultiply:!1}),r.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);A.activeTexture.set(k.TEXTURE0);let fe=r.fbo;if(!fe){const ze=new H(A,{width:N,height:N,data:null},k.RGBA);ze.bind(k.LINEAR,k.CLAMP_TO_EDGE),fe=r.fbo=A.createFramebuffer(N,N,!0,!1),fe.colorAttachment.set(ze.texture)}A.bindFramebuffer.set(fe.framebuffer),A.viewport.set([0,0,N,N]),p.useProgram("hillshadePrepare").draw(A,k.TRIANGLES,f,g,x,Zn.disabled,((ze,Ae)=>{const Me=Ae.stride,je=a.create();return a.ortho(je,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(je,je,[0,-a.EXTENT,0]),{u_matrix:je,u_image:1,u_dimension:[Me,Me],u_zoom:ze.overscaledZ,u_unpack:Ae.getUnpackVector()}})(r.tileID,M),null,u.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function nr(p,r,u,f,g,x){const A=f.paint.get("raster-fade-duration");if(!x&&A>0){const k=a.exported.now(),M=(k-p.timeAdded)/A,N=r?(k-r.timeAdded)/A:-1,Y=u.getSource(),q=g.coveringZoomLevel({tileSize:Y.tileSize,roundZoom:Y.roundZoom}),fe=!r||Math.abs(r.tileID.overscaledZ-q)>Math.abs(p.tileID.overscaledZ-q),ze=fe&&p.refreshedUponExpiration?1:a.clamp(fe?M:1-N,0,1);return p.refreshedUponExpiration&&M>=1&&(p.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ze}:{opacity:ze,mix:0}}return{opacity:1,mix:0}}const xo=new a.Color(1,0,0,1),Ii=new a.Color(0,1,0,1),fa=new a.Color(0,0,1,1),Bs=new a.Color(1,0,1,1),Pi=new a.Color(0,1,1,1);function Mi(p,r,u,f){wo(p,0,r+u/2,p.transform.width,u,f)}function Ns(p,r,u,f){wo(p,r-u/2,0,u,p.transform.height,f)}function wo(p,r,u,f,g,x){const A=p.context,k=A.gl;k.enable(k.SCISSOR_TEST),k.scissor(r*p.pixelRatio,u*p.pixelRatio,f*p.pixelRatio,g*p.pixelRatio),A.clear({color:x}),k.disable(k.SCISSOR_TEST)}function da(p,r,u){const f=p.context,g=f.gl,x=u.posMatrix,A=p.useProgram("debug"),k=Sn.disabled,M=Vn.disabled,N=p.colorModeForRenderPass(),Y="$debug",q=p.style.map.terrain&&p.style.map.terrain.getTerrainData(u);f.activeTexture.set(g.TEXTURE0);const fe=r.getTileByID(u.key).latestRawTileData,ze=Math.floor((fe&&fe.byteLength||0)/1024),Ae=r.getTile(u).tileSize,Me=512/Math.min(Ae,512)*(u.overscaledZ/p.transform.zoom)*.5;let je=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(je+=` => ${u.overscaledZ}`),function(Xe,it){Xe.initDebugOverlayCanvas();const Fe=Xe.debugOverlayCanvas,nt=Xe.context.gl,lt=Xe.debugOverlayCanvas.getContext("2d");lt.clearRect(0,0,Fe.width,Fe.height),lt.shadowColor="white",lt.shadowBlur=2,lt.lineWidth=1.5,lt.strokeStyle="white",lt.textBaseline="top",lt.font="bold 36px Open Sans, sans-serif",lt.fillText(it,5,5),lt.strokeText(it,5,5),Xe.debugOverlayTexture.update(Fe),Xe.debugOverlayTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}(p,`${je} ${ze}kB`),A.draw(f,g.TRIANGLES,k,M,Jn.alphaBlended,Zn.disabled,Wl(x,a.Color.transparent,Me),null,Y,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments),A.draw(f,g.LINE_STRIP,k,M,N,Zn.disabled,Wl(x,a.Color.red),q,Y,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments)}function ol(p,r,u){const f=p.context,g=f.gl,x=p.colorModeForRenderPass(),A=new Sn(g.LEQUAL,Sn.ReadWrite,p.depthRangeFor3D),k=p.useProgram("terrain"),M=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,p.width,p.height]);for(const N of u){const Y=p.renderToTexture.getTexture(N),q=r.getTerrainData(N.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,Y.texture);const fe={u_matrix:p.transform.calculatePosMatrix(N.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(p.transform.zoom)};k.draw(f,g.TRIANGLES,A,Vn.disabled,x,Zn.backCCW,fe,q,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}const sl={symbol:function(p,r,u,f,g){if(p.renderPass!=="translucent")return;const x=Vn.disabled,A=p.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(k,M,N,Y,q,fe,ze){const Ae=M.transform,Me=q==="map",je=fe==="map";for(const Xe of k){const it=Y.getTile(Xe),Fe=it.getBucket(N);if(!Fe||!Fe.text||!Fe.text.segments.get().length)continue;const nt=a.evaluateSizeForZoom(Fe.textSizeData,Ae.zoom),lt=Ue(it,1,M.transform.zoom),vt=Qe(Xe.posMatrix,je,Me,M.transform,lt),wt=N.layout.get("icon-text-fit")!=="none"&&Fe.hasIconData();if(nt){const Tt=Math.pow(2,Ae.zoom-it.tileID.overscaledZ);Uo(Fe,Me,je,ze,Ae,vt,Xe.posMatrix,Tt,nt,wt,M.style.map.terrain?(_t,Dt)=>M.style.map.terrain.getElevation(Xe,_t,Dt):null)}}}(f,p,u,r,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),g),u.paint.get("icon-opacity").constantOr(1)!==0&&ha(p,r,u,f,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),x,A),u.paint.get("text-opacity").constantOr(1)!==0&&ha(p,r,u,f,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),x,A),r.map.showCollisionBoxes&&(Qu(p,r,u,f,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Qu(p,r,u,f,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(p,r,u,f){if(p.renderPass!=="translucent")return;const g=u.paint.get("circle-opacity"),x=u.paint.get("circle-stroke-width"),A=u.paint.get("circle-stroke-opacity"),k=!u.layout.get("circle-sort-key").isConstant();if(g.constantOr(1)===0&&(x.constantOr(1)===0||A.constantOr(1)===0))return;const M=p.context,N=M.gl,Y=p.depthModeForSublayer(0,Sn.ReadOnly),q=Vn.disabled,fe=p.colorModeForRenderPass(),ze=[];for(let Ae=0;Ae<f.length;Ae++){const Me=f[Ae],je=r.getTile(Me),Xe=je.getBucket(u);if(!Xe)continue;const it=Xe.programConfigurations.get(u.id),Fe=p.useProgram("circle",it),nt=Xe.layoutVertexBuffer,lt=Xe.indexBuffer,vt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Me),wt={programConfiguration:it,program:Fe,layoutVertexBuffer:nt,indexBuffer:lt,uniformValues:Th(p,Me,je,u),terrainData:vt};if(k){const Tt=Xe.segments.get();for(const _t of Tt)ze.push({segments:new a.SegmentVector([_t]),sortKey:_t.sortKey,state:wt})}else ze.push({segments:Xe.segments,sortKey:0,state:wt})}k&&ze.sort((Ae,Me)=>Ae.sortKey-Me.sortKey);for(const Ae of ze){const{programConfiguration:Me,program:je,layoutVertexBuffer:Xe,indexBuffer:it,uniformValues:Fe,terrainData:nt}=Ae.state;je.draw(M,N.TRIANGLES,Y,q,fe,Zn.disabled,Fe,nt,u.id,Xe,it,Ae.segments,u.paint,p.transform.zoom,Me)}},heatmap:function(p,r,u,f){if(u.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const g=p.context,x=g.gl,A=Vn.disabled,k=new Jn([x.ONE,x.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(M,N,Y){const q=M.gl;M.activeTexture.set(q.TEXTURE1),M.viewport.set([0,0,N.width/4,N.height/4]);let fe=Y.heatmapFbo;if(fe)q.bindTexture(q.TEXTURE_2D,fe.colorAttachment.get()),M.bindFramebuffer.set(fe.framebuffer);else{const ze=q.createTexture();q.bindTexture(q.TEXTURE_2D,ze),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),fe=Y.heatmapFbo=M.createFramebuffer(N.width/4,N.height/4,!1,!1),function(Ae,Me,je,Xe){var it,Fe;const nt=Ae.gl,lt=(it=Ae.HALF_FLOAT)!==null&&it!==void 0?it:nt.UNSIGNED_BYTE,vt=(Fe=Ae.RGBA16F)!==null&&Fe!==void 0?Fe:nt.RGBA;nt.texImage2D(nt.TEXTURE_2D,0,vt,Me.width/4,Me.height/4,0,nt.RGBA,lt,null),Xe.colorAttachment.set(je)}(M,N,ze,fe)}})(g,p,u),g.clear({color:a.Color.transparent});for(let M=0;M<f.length;M++){const N=f[M];if(r.hasRenderableParent(N))continue;const Y=r.getTile(N),q=Y.getBucket(u);if(!q)continue;const fe=q.programConfigurations.get(u.id),ze=p.useProgram("heatmap",fe),{zoom:Ae}=p.transform;ze.draw(g,x.TRIANGLES,Sn.disabled,A,k,Zn.disabled,Wa(N.posMatrix,Y,Ae,u.paint.get("heatmap-intensity")),null,u.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,u.paint,p.transform.zoom,fe)}g.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(g,x){const A=g.context,k=A.gl,M=x.heatmapFbo;if(!M)return;A.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,M.colorAttachment.get()),A.activeTexture.set(k.TEXTURE1);let N=x.colorRampTexture;N||(N=x.colorRampTexture=new H(A,x.colorRamp,k.RGBA)),N.bind(k.LINEAR,k.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(A,k.TRIANGLES,Sn.disabled,Vn.disabled,g.colorModeForRenderPass(),Zn.disabled,((Y,q,fe,ze)=>{const Ae=a.create();a.ortho(Ae,0,Y.width,Y.height,0,0,1);const Me=Y.context.gl;return{u_matrix:Ae,u_world:[Me.drawingBufferWidth,Me.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}})(g,x),null,x.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,x.paint,g.transform.zoom)}(p,u))},line:function(p,r,u,f){if(p.renderPass!=="translucent")return;const g=u.paint.get("line-opacity"),x=u.paint.get("line-width");if(g.constantOr(1)===0||x.constantOr(1)===0)return;const A=p.depthModeForSublayer(0,Sn.ReadOnly),k=p.colorModeForRenderPass(),M=u.paint.get("line-dasharray"),N=u.paint.get("line-pattern"),Y=N.constantOr(1),q=u.paint.get("line-gradient"),fe=u.getCrossfadeParameters(),ze=Y?"linePattern":M?"lineSDF":q?"lineGradient":"line",Ae=p.context,Me=Ae.gl;let je=!0;for(const Xe of f){const it=r.getTile(Xe);if(Y&&!it.patternsLoaded())continue;const Fe=it.getBucket(u);if(!Fe)continue;const nt=Fe.programConfigurations.get(u.id),lt=p.context.program.get(),vt=p.useProgram(ze,nt),wt=je||vt.program!==lt,Tt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Xe),_t=N.constantOr(null);if(_t&&it.imageAtlas){const gn=it.imageAtlas,kt=gn.patternPositions[_t.to.toString()],un=gn.patternPositions[_t.from.toString()];kt&&un&&nt.setConstantPatternPositions(kt,un)}const Dt=Tt?Xe:null,tn=Y?Dr(p,it,u,fe,Dt):M?Xa(p,it,u,M,fe,Dt):q?Ha(p,it,u,Fe.lineClipsArray.length,Dt):Ai(p,it,u,Dt);if(Y)Ae.activeTexture.set(Me.TEXTURE0),it.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),nt.updatePaintBuffers(fe);else if(M&&(wt||p.lineAtlas.dirty))Ae.activeTexture.set(Me.TEXTURE0),p.lineAtlas.bind(Ae);else if(q){const gn=Fe.gradients[u.id];let kt=gn.texture;if(u.gradientVersion!==gn.version){let un=256;if(u.stepInterpolant){const Bt=r.getSource().maxzoom,jn=Xe.canonical.z===Bt?Math.ceil(1<<p.transform.maxZoom-Xe.canonical.z):1;un=a.clamp(a.nextPowerOfTwo(Fe.maxLineLength/a.EXTENT*1024*jn),256,Ae.maxTextureSize)}gn.gradient=a.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:un,image:gn.gradient||void 0,clips:Fe.lineClipsArray}),gn.texture?gn.texture.update(gn.gradient):gn.texture=new H(Ae,gn.gradient,Me.RGBA),gn.version=u.gradientVersion,kt=gn.texture}Ae.activeTexture.set(Me.TEXTURE0),kt.bind(u.stepInterpolant?Me.NEAREST:Me.LINEAR,Me.CLAMP_TO_EDGE)}vt.draw(Ae,Me.TRIANGLES,A,p.stencilModeForClipping(Xe),k,Zn.disabled,tn,Tt,u.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,u.paint,p.transform.zoom,nt,Fe.layoutVertexBuffer2),je=!1}},fill:function(p,r,u,f){const g=u.paint.get("fill-color"),x=u.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const A=p.colorModeForRenderPass(),k=u.paint.get("fill-pattern"),M=p.opaquePassEnabledForLayer()&&!k.constantOr(1)&&g.constantOr(a.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===M){const N=p.depthModeForSublayer(1,p.renderPass==="opaque"?Sn.ReadWrite:Sn.ReadOnly);lo(p,r,u,f,N,A,!1)}if(p.renderPass==="translucent"&&u.paint.get("fill-antialias")){const N=p.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);lo(p,r,u,f,N,A,!0)}},"fill-extrusion":function(p,r,u,f){const g=u.paint.get("fill-extrusion-opacity");if(g!==0&&p.renderPass==="translucent"){const x=new Sn(p.context.gl.LEQUAL,Sn.ReadWrite,p.depthRangeFor3D);if(g!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))uo(p,r,u,f,x,Vn.disabled,Jn.disabled),uo(p,r,u,f,x,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const A=p.colorModeForRenderPass();uo(p,r,u,f,x,Vn.disabled,A)}}},hillshade:function(p,r,u,f){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const g=p.context,x=p.depthModeForSublayer(0,Sn.ReadOnly),A=p.colorModeForRenderPass(),[k,M]=p.renderPass==="translucent"?p.stencilConfigForOverlap(f):[{},f];for(const N of M){const Y=r.getTile(N);Y.needsHillshadePrepare!==void 0&&Y.needsHillshadePrepare&&p.renderPass==="offscreen"?$o(p,Y,u,x,Vn.disabled,A):p.renderPass==="translucent"&&Qr(p,N,Y,u,x,k[N.overscaledZ],A)}g.viewport.set([0,0,p.width,p.height])},raster:function(p,r,u,f){if(p.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!f.length)return;const g=p.context,x=g.gl,A=r.getSource(),k=p.useProgram("raster"),M=p.colorModeForRenderPass(),[N,Y]=A instanceof xt?[{},f]:p.stencilConfigForOverlap(f),q=Y[Y.length-1].overscaledZ,fe=!p.options.moving;for(const ze of Y){const Ae=p.depthModeForSublayer(ze.overscaledZ-q,u.paint.get("raster-opacity")===1?Sn.ReadWrite:Sn.ReadOnly,x.LESS),Me=r.getTile(ze);Me.registerFadeDuration(u.paint.get("raster-fade-duration"));const je=r.findLoadedParent(ze,0),Xe=nr(Me,je,r,u,p.transform,p.style.map.terrain);let it,Fe;const nt=u.paint.get("raster-resampling")==="nearest"?x.NEAREST:x.LINEAR;g.activeTexture.set(x.TEXTURE0),Me.texture.bind(nt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(x.TEXTURE1),je?(je.texture.bind(nt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),it=Math.pow(2,je.tileID.overscaledZ-Me.tileID.overscaledZ),Fe=[Me.tileID.canonical.x*it%1,Me.tileID.canonical.y*it%1]):Me.texture.bind(nt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const lt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(ze),vt=lt?ze:null,wt=vt?vt.posMatrix:p.transform.calculatePosMatrix(ze.toUnwrapped(),fe),Tt=qa(wt,Fe||[0,0],it||1,Xe,u);A instanceof xt?k.draw(g,x.TRIANGLES,Ae,Vn.disabled,M,Zn.disabled,Tt,lt,u.id,A.boundsBuffer,p.quadTriangleIndexBuffer,A.boundsSegments):k.draw(g,x.TRIANGLES,Ae,N[ze.overscaledZ],M,Zn.disabled,Tt,lt,u.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,r,u,f){const g=u.paint.get("background-color"),x=u.paint.get("background-opacity");if(x===0)return;const A=p.context,k=A.gl,M=p.transform,N=M.tileSize,Y=u.paint.get("background-pattern");if(p.isPatternMissing(Y))return;const q=!Y&&g.a===1&&x===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==q)return;const fe=Vn.disabled,ze=p.depthModeForSublayer(0,q==="opaque"?Sn.ReadWrite:Sn.ReadOnly),Ae=p.colorModeForRenderPass(),Me=p.useProgram(Y?"backgroundPattern":"background"),je=f||M.coveringTiles({tileSize:N,terrain:p.style.map.terrain});Y&&(A.activeTexture.set(k.TEXTURE0),p.imageManager.bind(p.context));const Xe=u.getCrossfadeParameters();for(const it of je){const Fe=f?it.posMatrix:p.transform.calculatePosMatrix(it.toUnwrapped()),nt=Y?mi(Fe,x,p,Y,{tileID:it,tileSize:N},Xe):Jr(Fe,x,g),lt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(it);Me.draw(A,k.TRIANGLES,ze,fe,Ae,Zn.disabled,nt,lt,u.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,r,u){for(let f=0;f<u.length;f++)da(p,r,u[f])},custom:function(p,r,u){const f=p.context,g=u.implementation;if(p.renderPass==="offscreen"){const x=g.prerender;x&&(p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),x.call(g,f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),f.setStencilMode(Vn.disabled);const x=g.renderingMode==="3d"?new Sn(p.context.gl.LEQUAL,Sn.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,Sn.ReadOnly);f.setDepthMode(x),g.render(f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState(),f.bindFramebuffer.set(null)}}};class su{constructor(r,u){this.context=new js(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=O.maxUnderzooming+O.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Do}resize(r,u,f){if(this.width=r*f,this.height=u*f,this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,u=new a.PosArray;u.emplaceBack(0,0),u.emplaceBack(a.EXTENT,0),u.emplaceBack(0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(u,Vl.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const f=new a.PosArray;f.emplaceBack(0,0),f.emplaceBack(a.EXTENT,0),f.emplaceBack(0,a.EXTENT),f.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=r.createVertexBuffer(f,Vl.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const g=new a.RasterBoundsArray;g.emplaceBack(0,0,0,0),g.emplaceBack(a.EXTENT,0,a.EXTENT,0),g.emplaceBack(0,a.EXTENT,0,a.EXTENT),g.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(g,ct.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const x=new a.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,Vl.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const A=new a.LineStripIndexArray;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(A);const k=new a.TriangleIndexArray;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(k);const M=this.context.gl;this.stencilClearMode=new Vn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=a.create();a.ortho(f,0,this.width,this.height,0,0,1),a.scale(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,Sn.disabled,this.stencilClearMode,Jn.disabled,Zn.disabled,Za(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const f=this.context,g=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(Jn.disabled),f.setDepthMode(Sn.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of u){const k=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);x.draw(f,g.TRIANGLES,Sn.disabled,new Vn({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),Jn.disabled,Zn.disabled,Za(A.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new Vn({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new Vn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,f=r.sort((A,k)=>k.overscaledZ-A.overscaledZ),g=f[f.length-1].overscaledZ,x=f[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const A={};for(let k=0;k<x;k++)A[k+g]=new Vn({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=x,[A,f]}return[{[g]:Vn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Jn([r.CONSTANT_COLOR,r.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jn.unblended:Jn.alphaBlended}depthModeForSublayer(r,u,f){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Sn(f||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches,x={},A={},k={};for(const M in g){const N=g[M];N.used&&N.prepare(this.context),x[M]=N.getVisibleCoordinates(),A[M]=x[M].slice().reverse(),k[M]=N.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<f.length;M++)if(this.style._layers[f[M]].is3D()){this.opaquePassCutoff=M;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const M=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||M.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(N,Y){const q=N.context,fe=q.gl,ze=Jn.unblended,Ae=new Sn(fe.LEQUAL,Sn.ReadWrite,[0,1]),Me=Y.getTerrainMesh(),je=Y.sourceCache.getRenderableTiles(),Xe=N.useProgram("terrainDepth");q.bindFramebuffer.set(Y.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),q.clear({color:a.Color.transparent,depth:1});for(const it of je){const Fe=Y.getTerrainData(it.tileID),nt={u_matrix:N.transform.calculatePosMatrix(it.tileID.toUnwrapped()),u_ele_delta:Y.getMeshFrameDelta(N.transform.zoom)};Xe.draw(q,fe.TRIANGLES,Ae,Vn.disabled,ze,Zn.backCCW,nt,Fe,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,N.width,N.height])}(this,this.style.map.terrain),function(N,Y){const q=N.context,fe=q.gl,ze=Jn.unblended,Ae=new Sn(fe.LEQUAL,Sn.ReadWrite,[0,1]),Me=Y.getTerrainMesh(),je=Y.getCoordsTexture(),Xe=Y.sourceCache.getRenderableTiles(),it=N.useProgram("terrainCoords");q.bindFramebuffer.set(Y.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),q.clear({color:a.Color.transparent,depth:1}),Y.coordsIndex=[];for(const Fe of Xe){const nt=Y.getTerrainData(Fe.tileID);q.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,je.texture);const lt={u_matrix:N.transform.calculatePosMatrix(Fe.tileID.toUnwrapped()),u_terrain_coords_id:(255-Y.coordsIndex.length)/255,u_texture:0,u_ele_delta:Y.getMeshFrameDelta(N.transform.zoom)};it.draw(q,fe.TRIANGLES,Ae,Vn.disabled,ze,Zn.backCCW,lt,nt,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments),Y.coordsIndex.push(Fe.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,N.width,N.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const M of f){const N=this.style._layers[M];if(!N.hasOffscreenPass()||N.isHidden(this.transform.zoom))continue;const Y=A[N.source];(N.type==="custom"||Y.length)&&this.renderLayer(this,g[N.source],N,Y)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[f[this.currentLayer]],N=g[M.source],Y=x[M.source];this._renderTileClippingMasks(M,Y),this.renderLayer(this,N,M,Y)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const M=this.style._layers[f[this.currentLayer]],N=g[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const Y=(M.type==="symbol"?k:A)[M.source];this._renderTileClippingMasks(M,x[M.source]),this.renderLayer(this,N,M,Y)}if(this.options.showTileBoundaries){const M=function(N,Y){let q=null;const fe=Object.values(N._layers).flatMap(je=>je.source&&!je.isHidden(Y)?[N.sourceCaches[je.source]]:[]),ze=fe.filter(je=>je.getSource().type==="vector"),Ae=fe.filter(je=>je.getSource().type!=="vector"),Me=je=>{(!q||q.getSource().maxzoom<je.getSource().maxzoom)&&(q=je)};return ze.forEach(je=>Me(je)),q||Ae.forEach(je=>Me(je)),q}(this.style,this.transform.zoom);M&&sl.debug(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const N=M.transform.padding;Mi(M,M.transform.height-(N.top||0),3,xo),Mi(M,N.bottom||0,3,Ii),Ns(M,N.left||0,3,fa),Ns(M,M.transform.width-(N.right||0),3,Bs);const Y=M.transform.centerPoint;(function(q,fe,ze,Ae){wo(q,fe-1,ze-10,2,20,Ae),wo(q,fe-10,ze-1,20,2,Ae)})(M,Y.x,M.transform.height-Y.y,Pi)}(this),this.context.setDefault()}renderLayer(r,u,f,g){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(g||[]).length)&&(this.id=f.id,sl[f.type](r,u,f,g,this.style.placement.variableOffsets))}translatePosMatrix(r,u,f,g,x){if(!f[0]&&!f[1])return r;const A=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(A){const N=Math.sin(A),Y=Math.cos(A);f=[f[0]*Y-f[1]*N,f[0]*N+f[1]*Y]}const k=[x?f[0]:Ue(u,f[0],this.transform.zoom),x?f[1]:Ue(u,f[1],this.transform.zoom),0],M=new Float32Array(16);return a.translate(M,r,k),M}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!u||!f}useProgram(r,u){this.cache=this.cache||{};const f=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Ga(this.context,r,Gr[r],u,Xl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new H(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class pa{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,f){const g=Math.pow(2,f),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const M=1/(k=a.transformMat4([],k,r))[3]/u*g;return a.mul$1(k,k,[M,M,1/k[3],M])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const M=function(fe,ze){var Ae=ze[0],Me=ze[1],je=ze[2],Xe=Ae*Ae+Me*Me+je*je;return Xe>0&&(Xe=1/Math.sqrt(Xe)),fe[0]=ze[0]*Xe,fe[1]=ze[1]*Xe,fe[2]=ze[2]*Xe,fe}([],function(fe,ze,Ae){var Me=ze[0],je=ze[1],Xe=ze[2],it=Ae[0],Fe=Ae[1],nt=Ae[2];return fe[0]=je*nt-Xe*Fe,fe[1]=Xe*it-Me*nt,fe[2]=Me*Fe-je*it,fe}([],S([],x[k[0]],x[k[1]]),S([],x[k[2]],x[k[1]]))),N=-((Y=M)[0]*(q=x[k[1]])[0]+Y[1]*q[1]+Y[2]*q[2]);var Y,q;return M.concat(N)});return new pa(x,A)}}class Br{constructor(r,u){this.min=r,this.max=u,this.center=function(f,g,x){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,x){return f[0]=g[0]+x[0],f[1]=g[1]+x[1],f[2]=g[2]+x[2],f}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],f=W(this.min),g=W(this.max);for(let x=0;x<u.length;x++)f[x]=u[x]?this.min[x]:this.center[x],g[x]=u[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Br(f,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let g=0;g<r.planes.length;g++){const x=r.planes[g];let A=0;for(let k=0;k<u.length;k++)a.dot(x,u[k])>=0&&A++;if(A===0)return 0;A!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let k=0;k<r.points.length;k++){const M=r.points[k][g]-this.min[g];x=Math.min(x,M),A=Math.max(A,M)}if(A<0||x>this.max[g]-this.min[g])return 0}return 1}}class ma{constructor(r=0,u=0,f=0,g=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=f,this.right=g}interpolate(r,u,f){return u.top!=null&&r.top!=null&&(this.top=a.interpolate.number(r.top,u.top,f)),u.bottom!=null&&r.bottom!=null&&(this.bottom=a.interpolate.number(r.bottom,u.bottom,f)),u.left!=null&&r.left!=null&&(this.left=a.interpolate.number(r.left,u.left,f)),u.right!=null&&r.right!=null&&(this.right=a.interpolate.number(r.right,u.right,f)),this}getCenter(r,u){const f=a.clamp((this.left+r-this.right)/2,0,r),g=a.clamp((this.top+u-this.bottom)/2,0,u);return new a.Point(f,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new ma(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class al{constructor(r,u,f,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=x===void 0||!!x,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ma,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const r=new al(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-a.wrap(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,x){var A=g[0],k=g[1],M=g[2],N=g[3],Y=Math.sin(x),q=Math.cos(x);f[0]=A*q+M*Y,f[1]=k*q+N*Y,f[2]=A*-Y+M*q,f[3]=k*-Y+N*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=a.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,f){this._unmodified=!1,this._edgeInsets.interpolate(r,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new a.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new a.Point(0,0)),g=this.pointCoordinate(new a.Point(this.width,0)),x=this.pointCoordinate(new a.Point(this.width,this.height)),A=this.pointCoordinate(new a.Point(0,this.height)),k=Math.floor(Math.min(f.x,g.x,x.x,A.x)),M=Math.floor(Math.max(f.x,g.x,x.x,A.x)),N=1;for(let Y=k-N;Y<=M+N;Y++)Y!==0&&u.push(new a.UnwrappedTileID(Y,r))}return u}coveringTiles(r){var u,f;let g=this.coveringZoomLevel(r);const x=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),k=a.MercatorCoordinate.fromLngLat(this.center),M=Math.pow(2,g),N=[M*A.x,M*A.y,0],Y=[M*k.x,M*k.y,0],q=pa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let fe=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(fe=g);const ze=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Ae=Fe=>({aabb:new Br([Fe*M,0,0],[(Fe+1)*M,M,0]),zoom:0,x:0,y:0,wrap:Fe,fullyVisible:!1}),Me=[],je=[],Xe=g,it=r.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)Me.push(Ae(-Fe)),Me.push(Ae(Fe));for(Me.push(Ae(0));Me.length>0;){const Fe=Me.pop(),nt=Fe.x,lt=Fe.y;let vt=Fe.fullyVisible;if(!vt){const tn=Fe.aabb.intersects(q);if(tn===0)continue;vt=tn===2}const wt=r.terrain?N:Y,Tt=Fe.aabb.distanceX(wt),_t=Fe.aabb.distanceY(wt),Dt=Math.max(Math.abs(Tt),Math.abs(_t));if(Fe.zoom===Xe||Dt>ze+(1<<Xe-Fe.zoom)-2&&Fe.zoom>=fe){const tn=Xe-Fe.zoom,gn=N[0]-.5-(nt<<tn),kt=N[1]-.5-(lt<<tn);je.push({tileID:new a.OverscaledTileID(Fe.zoom===Xe?it:Fe.zoom,Fe.wrap,Fe.zoom,nt,lt),distanceSq:P([Y[0]-.5-nt,Y[1]-.5-lt]),tileDistanceToCamera:Math.sqrt(gn*gn+kt*kt)})}else for(let tn=0;tn<4;tn++){const gn=(nt<<1)+tn%2,kt=(lt<<1)+(tn>>1),un=Fe.zoom+1;let Bt=Fe.aabb.quadrant(tn);if(r.terrain){const jn=new a.OverscaledTileID(un,Fe.wrap,un,gn,kt),Er=r.terrain.getMinMaxElevation(jn),Dn=(u=Er.minElevation)!==null&&u!==void 0?u:this.elevation,yn=(f=Er.maxElevation)!==null&&f!==void 0?f:this.elevation;Bt=new Br([Bt.min[0],Bt.min[1],Dn],[Bt.max[0],Bt.max[1],yn])}Me.push({aabb:Bt,zoom:un,x:gn,y:kt,wrap:Fe.wrap,fullyVisible:vt})}}return je.sort((Fe,nt)=>Fe.distanceSq-nt.distanceSq).map(Fe=>Fe.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=a.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(r.lng)*this.worldSize,a.mercatorYfromLat(u)*this.worldSize)}unproject(r){return new a.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(r){this.freezeElevation||(this.elevation=r?this.getElevation(this._center,r):0)}getElevation(r,u){const f=a.MercatorCoordinate.fromLngLat(r.wrap()),g=(1<<this.tileZoom)*a.EXTENT,x=f.x*g,A=f.y*g,k=Math.floor(x/a.EXTENT),M=Math.floor(A/a.EXTENT),N=new a.OverscaledTileID(this.tileZoom,0,this.tileZoom,k,M);return u.getElevation(N,x%a.EXTENT,A%a.EXTENT,a.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),f=this.getElevation(u,r);if(!(this.elevation-f))return;const g=this.getCameraPosition(),x=a.MercatorCoordinate.fromLngLat(g.lngLat,g.altitude),A=a.MercatorCoordinate.fromLngLat(u,f),k=x.x-A.x,M=x.y-A.y,N=x.z-A.z,Y=Math.sqrt(k*k+M*M+N*N),q=this.scaleZoom(this.cameraToCenterDistance/Y/this.tileSize);this._elevation=f,this._center=u,this.zoom=q}setLocationAtPoint(r,u){const f=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(r),A=new a.MercatorCoordinate(x.x-(f.x-g.x),x.y-(f.y-g.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),this.getElevation(r,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return a.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const fe=u.pointCoordinate(r);if(fe!=null)return fe}const f=[r.x,r.y,0,1],g=[r.x,r.y,1,1];a.transformMat4(f,f,this.pixelMatrixInverse),a.transformMat4(g,g,this.pixelMatrixInverse);const x=f[3],A=g[3],k=f[1]/x,M=g[1]/A,N=f[2]/x,Y=g[2]/A,q=N===Y?0:(0-N)/(Y-N);return new a.MercatorCoordinate(a.interpolate.number(f[0]/x,g[0]/A,q)/this.worldSize,a.interpolate.number(k,M,q)/this.worldSize)}coordinatePoint(r,u=0,f=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,u,1];return a.transformMat4(g,g,f),new a.Point(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new $e().extend(this.pointLocation(new a.Point(0,r))).extend(this.pointLocation(new a.Point(this.width,r))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new $e([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const f=r.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const x=r.canonical,A=this.worldSize/this.zoomScale(x.z),k=x.x+Math.pow(2,x.z)*r.wrap,M=a.identity(new Float64Array(16));return a.translate(M,M,[k*A,x.y*A,0]),a.scale(M,M,[A/a.EXTENT,A/a.EXTENT,1]),a.multiply(M,u?this.alignedProjMatrix:this.projMatrix,M),g[f]=new Float32Array(M),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,f,g,x=-90,A=90,k=-180,M=180;const N=this.size,Y=this._unmodified;if(this.latRange){const ze=this.latRange;x=a.mercatorYfromLat(ze[1])*this.worldSize,A=a.mercatorYfromLat(ze[0])*this.worldSize,r=A-x<N.y?N.y/(A-x):0}if(this.lngRange){const ze=this.lngRange;k=a.wrap(a.mercatorXfromLng(ze[0])*this.worldSize,0,this.worldSize),M=a.wrap(a.mercatorXfromLng(ze[1])*this.worldSize,0,this.worldSize),M<k&&(M+=this.worldSize),u=M-k<N.x?N.x/(M-k):0}const q=this.point,fe=Math.max(u||0,r||0);if(fe)return this.center=this.unproject(new a.Point(u?(M+k)/2:q.x,r?(A+x)/2:q.y)),this.zoom+=this.scaleZoom(fe),this._unmodified=Y,void(this._constraining=!1);if(this.latRange){const ze=q.y,Ae=N.y/2;ze-Ae<x&&(g=x+Ae),ze+Ae>A&&(g=A-Ae)}if(this.lngRange){const ze=(k+M)/2,Ae=a.wrap(q.x,ze-this.worldSize/2,ze+this.worldSize/2),Me=N.x/2;Ae-Me<k&&(f=k+Me),Ae+Me>M&&(f=M-Me)}f===void 0&&g===void 0||(this.center=this.unproject(new a.Point(f!==void 0?f:q.x,g!==void 0?g:q.y)).wrap()),this._unmodified=Y,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let g=a.identity(new Float64Array(16));a.scale(g,g,[this.width/2,-this.height/2,1]),a.translate(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=a.identity(new Float64Array(16)),a.scale(g,g,[1,-1,1]),a.translate(g,g,[-1,-1,0]),a.scale(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const x=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,A=Math.PI/2+this._pitch,k=this._fov*(.5+r.y/this.height),M=Math.sin(k)*x/Math.sin(a.clamp(Math.PI-A-k,.01,Math.PI-.01)),N=this.getHorizon(),Y=2*Math.atan(N/this.cameraToCenterDistance)*(.5+r.y/(2*N)),q=Math.sin(Y)*x/Math.sin(a.clamp(Math.PI-A-Y,.01,Math.PI-.01)),fe=Math.min(M,q),ze=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+x),Ae=this.height/50;g=new Float64Array(16),a.perspective(g,this._fov,this.width/this.height,Ae,ze),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,a.scale(g,g,[1,-1,1]),a.translate(g,g,[0,0,-this.cameraToCenterDistance]),a.rotateX(g,g,this._pitch),a.rotateZ(g,g,this.angle),a.translate(g,g,[-u,-f,0]),this.mercatorMatrix=a.scale([],g,[this.worldSize,this.worldSize,this.worldSize]),a.scale(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,g),a.translate(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=a.invert([],g),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,g);const Me=this.width%2/2,je=this.height%2/2,Xe=Math.cos(this.angle),it=Math.sin(this.angle),Fe=u-Math.round(u)+Xe*Me+it*je,nt=f-Math.round(f)+Xe*je+it*Me,lt=new Float64Array(g);if(a.translate(lt,lt,[Fe>.5?Fe-1:Fe,nt>.5?nt-1:nt,0]),this.alignedProjMatrix=lt,g=a.invert(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new a.Point(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let f=u.x,g=u.y,x=u.x,A=u.y;for(const k of r)f=Math.min(f,k.x),g=Math.min(g,k.y),x=Math.max(x,k.x),A=Math.max(A,k.y);return[new a.Point(f,g),new a.Point(x,g),new a.Point(x,A),new a.Point(f,A),new a.Point(f,g)]}}}class au{constructor(r){this._hashName=r&&encodeURIComponent(r),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,f){let g=!1,x=null;const A=()=>{x=null,g&&(u(),x=setTimeout(A,300),g=!1)};return()=>(g=!0,x||A(),x)}(this._updateHashUnthrottled.bind(this))}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),A=Math.round(u.lng*x)/x,k=Math.round(u.lat*x)/x,M=this._map.getBearing(),N=this._map.getPitch();let Y="";if(Y+=r?`/${A}/${k}/${f}`:`${f}/${k}/${A}`,(M||N)&&(Y+="/"+Math.round(10*M)/10),N&&(Y+=`/${Math.round(N)}`),this._hashName){const q=this._hashName;let fe=!1;const ze=window.location.hash.slice(1).split("&").map(Ae=>{const Me=Ae.split("=")[0];return Me===q?(fe=!0,`${Me}=${Y}`):Ae}).filter(Ae=>Ae);return fe||ze.push(`${q}=${Y}`),`#${ze.join("&")}`}return`#${Y}`}_getCurrentHash(){const r=window.location.hash.replace("#","");if(this._hashName){let u;return r.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(u=f)}),(u&&u[1]||"").split("/")}return r.split("/")}_onHashChange(){const r=this._getCurrentHash();if(r.length>=3&&!r.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:u,pitch:+(r[4]||0)}),!0}return!1}_updateHashUnthrottled(){const r=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,r)}catch{}}}const cs={linearity:.3,easing:a.bezier(0,0,.3,1)},lu=a.extend({deceleration:2500,maxSpeed:1400},cs),uu=a.extend({deceleration:20,maxSpeed:1400},cs),Us=a.extend({deceleration:1e3,maxSpeed:360},cs),V=a.extend({deceleration:1e3,maxSpeed:90},cs);class ge{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=a.exported.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)u.zoom+=x.zoomDelta||0,u.bearing+=x.bearingDelta||0,u.pitch+=x.pitchDelta||0,x.panDelta&&u.pan._add(x.panDelta),x.around&&(u.around=x.around),x.pinchAround&&(u.pinchAround=x.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const x=at(u.pan.mag(),f,a.extend({},lu,r||{}));g.offset=u.pan.mult(x.amount/u.pan.mag()),g.center=this._map.transform.center,De(g,x)}if(u.zoom){const x=at(u.zoom,f,uu);g.zoom=this._map.transform.zoom+x.amount,De(g,x)}if(u.bearing){const x=at(u.bearing,f,Us);g.bearing=this._map.transform.bearing+a.clamp(x.amount,-179,179),De(g,x)}if(u.pitch){const x=at(u.pitch,f,V);g.pitch=this._map.transform.pitch+x.amount,De(g,x)}if(g.zoom||g.bearing){const x=u.pinchAround===void 0?u.around:u.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),a.extend(g,{noMoveStart:!0})}}function De(p,r){(!p.duration||p.duration<r.duration)&&(p.duration=r.duration,p.easing=r.easing)}function at(p,r,u){const{maxSpeed:f,linearity:g,deceleration:x}=u,A=a.clamp(p*g/(r/1e3),-f,f),k=Math.abs(A)/(x*g);return{easing:u.easing,duration:1e3*k,amount:A*(k/2)}}class Et extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f,g={}){const x=w.mousePos(u.getCanvasContainer(),f),A=u.unproject(x);super(r,a.extend({point:x,lngLat:A,originalEvent:f},g)),this._defaultPrevented=!1,this.target=u}}class St extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){const g=r==="touchend"?f.changedTouches:f.touches,x=w.touchPos(u.getCanvasContainer(),g),A=x.map(M=>u.unproject(M)),k=x.reduce((M,N,Y,q)=>M.add(N.div(q.length)),new a.Point(0,0));super(r,{points:x,point:k,lngLats:A,lngLat:u.unproject(k),originalEvent:f}),this._defaultPrevented=!1}}class Zt extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Jt{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Zt(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new Et(r.type,this._map,r))}mouseup(r){this._map.fire(new Et(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Et(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Et(r.type,this._map,r))}mouseover(r){this._map.fire(new Et(r.type,this._map,r))}mouseout(r){this._map.fire(new Et(r.type,this._map,r))}touchstart(r){return this._firePreventable(new St(r.type,this._map,r))}touchmove(r){this._map.fire(new St(r.type,this._map,r))}touchend(r){this._map.fire(new St(r.type,this._map,r))}touchcancel(r){this._map.fire(new St(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xn{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Et(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Et("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Et(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class On{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(a.Point.convert(r),this._map.terrain)}}class zn{constructor(r,u){this._map=r,this._tr=new On(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const x=Math.min(g.x,f.x),A=Math.max(g.x,f.x),k=Math.min(g.y,f.y),M=Math.max(g.y,f.y);w.setTransform(this._box,`translate(${x}px,${k}px)`),this._box.style.width=A-x+"px",this._box.style.height=M-k+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const f=this._startPos,g=u;if(this.reset(),w.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:x=>x.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new a.Event(r,{originalEvent:u}))}}function Fn(p,r){if(p.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${p.length}, points ${r.length}`);const u={};for(let f=0;f<p.length;f++)u[p[f].identifier]=r[f];return u}class Ct{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const x=new a.Point(0,0);for(const A of g)x._add(A);return x.div(g.length)}(u),this.touches=Fn(f,u)))}touchmove(r,u,f){if(this.aborted||!this.centroid)return;const g=Fn(f,u);for(const x in this.touches){const A=g[x];(!A||A.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(r,u,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class br{constructor(r){this.singleTap=new Ct(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,f){this.singleTap.touchstart(r,u,f)}touchmove(r,u,f){this.singleTap.touchmove(r,u,f)}touchend(r,u,f){const g=this.singleTap.touchend(r,u,f);if(g){const x=r.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(g)<30;if(x&&A||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class hr{constructor(r){this._tr=new On(r),this._zoomIn=new br({numTouches:1,numTaps:2}),this._zoomOut=new br({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,f){this._zoomIn.touchstart(r,u,f),this._zoomOut.touchstart(r,u,f)}touchmove(r,u,f){this._zoomIn.touchmove(r,u,f),this._zoomOut.touchmove(r,u,f)}touchend(r,u,f){const g=this._zoomIn.touchend(r,u,f),x=this._zoomOut.touchend(r,u,f),A=this._tr;return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(g)},{originalEvent:r})}):x?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(x)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zr{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const g=u.length?u[0]:u;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const co={0:1,2:2};class At{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=w.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,f){const g=co[f];return u.buttons===void 0||(u.buttons&g)!==g}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class ga{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const $s=p=>{p.mousedown=p.dragStart,p.mousemoveWindow=p.dragMove,p.mouseup=p.dragEnd,p.contextmenu=function(r){r.preventDefault()}},ya=({enable:p,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const f=new At({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new Zr({clickTolerance:r,move:(g,x)=>({bearingDelta:(x.x-g.x)*u}),moveStateManager:f,enable:p,assignEvents:$s})},ec=({enable:p,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new At({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new Zr({clickTolerance:r,move:(g,x)=>({pitchDelta:(x.y-g.y)*u}),moveStateManager:f,enable:p,assignEvents:$s})};class Md{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,f){return this._calculateTransform(r,u,f)}touchmove(r,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,f)}touchend(r,u,f){this._calculateTransform(r,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,f){f.length>0&&(this._active=!0);const g=Fn(f,u),x=new a.Point(0,0),A=new a.Point(0,0);let k=0;for(const N in g){const Y=g[N],q=this._touches[N];q&&(x._add(Y),A._add(Y.sub(q)),k++,g[N]=Y)}if(this._touches=g,k<this._minTouches||!A.mag())return;const M=A.div(k);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(k),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(r){}_move(r,u,f){return{}}touchstart(r,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,f){if(!this._firstTwoTouches)return;r.preventDefault();const[g,x]=this._firstTwoTouches,A=nc(f,u,g),k=nc(f,u,x);if(!A||!k)return;const M=this._aroundCenter?null:A.add(k).div(2);return this._move([A,k],M,r)}touchend(r,u,f){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,A=nc(f,u,g),k=nc(f,u,x);A&&k||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function nc(p,r,u){for(let f=0;f<p.length;f++)if(p[f].identifier===u)return r[f]}function kd(p,r){return Math.log(p/r)/Math.LN2}class zh extends tc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(kd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:kd(this._distance,f),pinchAround:u}}}function rc(p,r){return 180*p.angleWith(r)/Math.PI}class Lh extends tc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rc(this._vector,f),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,f=rc(r,this._startVector);return Math.abs(f)<u}}function cu(p){return Math.abs(p.y)>Math.abs(p.x)}class ki extends tc{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,f){super.touchstart(r,u,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,cu(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),x=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,f){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,x=u.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const A=r.y>0==u.y>0;return cu(r)&&cu(u)&&A}}const Vs={panStep:100,bearingStep:15,pitchStep:10};class zd{constructor(r){this._tr=new On(r);const u=Vs;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,f=0,g=0,x=0,A=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),x=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),x=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),A=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:k=>{const M=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Oh,zoom:u?Math.round(M.zoom)+u*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+g*this._pitchStep,offset:[-x*this._panStep,-A*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Oh(p){return p*(2-p)}const ic=4.000244140625;class Rh{constructor(r,u){this._map=r,this._tr=new On(r),this._el=r.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=a.exported.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%ic==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,r),f=this._tr;this._around=a.LngLat.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>ic?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&M!==0&&(M=1/M);const N=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(N*M))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,g=this._easing;let x,A=!1;if(this._type==="wheel"&&f&&g){const k=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),M=g(k);x=a.interpolate.number(f,u,M),k<1?this._frameId||(this._frameId=!0):A=!0}else x=u,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:x-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=a.ease;if(this._prevEase){const f=this._prevEase,g=(a.exported.now()-f.start)/f.duration,x=f.easing(g+.01)-f.easing(g),A=.27/Math.sqrt(x*x+1e-4)*.01,k=Math.sqrt(.0729-A*A);u=a.bezier(A,k,.25,1)}return this._prevEase={start:a.exported.now(),duration:r,easing:u},u}reset(){this._active=!1}}class Ld{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ho{constructor(r){this._tr=new On(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rr{constructor(){this._tap=new br({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(r,u,f){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=u[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(r,u,f))}touchmove(r,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=u[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(r,u,f)}touchend(r,u,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(r,u,f)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oc{constructor(r,u,f){this._el=r,this._mousePan=u,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fh{constructor(r,u,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Od{constructor(r,u,f,g){this._el=r,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const hu=p=>p.zoom||p.drag||p.pitch||p.rotate;class Rd extends a.Event{}function jh(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Vo{constructor(r,u){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ge(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),a.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,A]of this._listeners)w.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[r,u,f]of this._listeners)w.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Jt(u,r));const g=u.boxZoom=new zn(u,r);this._add("boxZoom",g);const x=new hr(u),A=new ho(u);u.doubleClickZoom=new Ld(A,x),this._add("tapZoom",x),this._add("clickZoom",A);const k=new rr;this._add("tapDragZoom",k);const M=u.touchPitch=new ki(u);this._add("touchPitch",M);const N=ya(r),Y=ec(r);u.dragRotate=new Fh(r,N,Y),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]);const q=(({enable:Xe,clickTolerance:it})=>{const Fe=new At({checkCorrectEvent:nt=>w.mouseButton(nt)===0&&!nt.ctrlKey});return new Zr({clickTolerance:it,move:(nt,lt)=>({around:lt,panDelta:lt.sub(nt)}),activateOnStart:!0,moveStateManager:Fe,enable:Xe,assignEvents:$s})})(r),fe=new Md(r,u);u.dragPan=new oc(f,q,fe),this._add("mousePan",q),this._add("touchPan",fe,["touchZoom","touchRotate"]);const ze=new Lh,Ae=new zh;u.touchZoomRotate=new Od(f,Ae,ze,k),this._add("touchRotate",ze,["touchPan","touchZoom"]),this._add("touchZoom",Ae,["touchPan","touchRotate"]);const Me=u.scrollZoom=new Rh(u,this);this._add("scrollZoom",Me,["mousePan"]);const je=u.keyboard=new zd(u);this._add("keyboard",je),this._add("blockableMapEvent",new xn(u));for(const Xe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])r.interactive&&r[Xe]&&u[Xe].enable(r[Xe])}_add(r,u,f){this._handlers.push({handlerName:r,handler:u,allowed:f}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!hu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,f){for(const g in r)if(g!==f&&(!u||u.indexOf(g)<0))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){const u=[];for(const f of r)this._el.contains(f.target)&&u.push(f);return u}handleEvent(r,u){if(r.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const f=r.type==="renderFrame"?void 0:r,g={needsRenderFrame:!1},x={},A={},k=r.touches,M=k?this._getMapTouches(k):void 0,N=M?w.touchPos(this._el,M):w.mousePos(this._el,r);for(const{handlerName:fe,handler:ze,allowed:Ae}of this._handlers){if(!ze.isEnabled())continue;let Me;this._blockedByActive(A,Ae,fe)?ze.reset():ze[u||r.type]&&(Me=ze[u||r.type](r,N,M),this.mergeHandlerResult(g,x,Me,fe,f),Me&&Me.needsRenderFrame&&this._triggerRenderFrame()),(Me||ze.isActive())&&(A[fe]=ze)}const Y={};for(const fe in this._previousActiveHandlers)A[fe]||(Y[fe]=f);this._previousActiveHandlers=A,(Object.keys(Y).length||jh(g))&&(this._changes.push([g,x,Y]),this._triggerRenderFrame()),(Object.keys(A).length||jh(g))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=g;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(r,u,f,g,x){if(!f)return;a.extend(r,f);const A={handlerName:g,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(u.zoom=A),f.panDelta!==void 0&&(u.drag=A),f.pitchDelta!==void 0&&(u.pitch=A),f.bearingDelta!==void 0&&(u.rotate=A)}_applyChanges(){const r={},u={},f={};for(const[g,x,A]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new a.Point(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),a.extend(u,x),a.extend(f,A);this._updateMapTransform(r,u,f),this._changes=[]}_updateMapTransform(r,u,f){const g=this._map,x=g._getTransformForUpdate(),A=g.terrain;if(!(jh(r)||A&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:k,zoomDelta:M,bearingDelta:N,pitchDelta:Y,around:q,pinchAround:fe}=r;fe!==void 0&&(q=fe),g._stop(!0),q=q||g.transform.centerPoint;const ze=x.pointLocation(k?q.sub(k):q);N&&(x.bearing+=N),Y&&(x.pitch+=Y),M&&(x.zoom+=M),A?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(k)):x.setLocationAtPoint(ze,q):(this._terrainMovement=!0,x.freezeElevation=!0,x.setLocationAtPoint(ze,q),this._map.once("moveend",()=>{x.freezeElevation=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(ze,q),g._applyUpdatedTransform(x),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,f,!0)}_fireEvents(r,u,f){const g=hu(this._eventsInProgress),x=hu(r),A={};for(const Y in r){const{originalEvent:q}=r[Y];this._eventsInProgress[Y]||(A[`${Y}start`]=q),this._eventsInProgress[Y]=r[Y]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const Y in A)this._fireEvent(Y,A[Y]);x&&this._fireEvent("move",x.originalEvent);for(const Y in r){const{originalEvent:q}=r[Y];this._fireEvent(Y,q)}const k={};let M;for(const Y in this._eventsInProgress){const{handlerName:q,originalEvent:fe}=this._eventsInProgress[Y];this._handlersById[q].isActive()||(delete this._eventsInProgress[Y],M=u[q]||fe,k[`${Y}end`]=M)}for(const Y in k)this._fireEvent(Y,k[Y]);const N=hu(this._eventsInProgress);if(f&&(g||x)&&!N){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=fe=>fe!==0&&-this._bearingSnap<fe&&fe<this._bearingSnap;Y?(q(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:M})):(this._map.fire(new a.Event("moveend",{originalEvent:M})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new a.Event(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Rd("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const sc={extend:(p,...r)=>a.extend(p,...r),run(p){p()},logToElement(p,r=!1,u="log"){const f=window.document.getElementById(u);f&&(r&&(f.innerHTML=""),f.innerHTML+=`<br>${p}`)}};class qt extends a.Evented{constructor(r,u){super(),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,a.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,f){return r=a.Point.convert(r).mult(-1),this.panTo(this.transform.center,a.extend({offset:r},u),f)}panTo(r,u,f){return this.easeTo(a.extend({center:r},u),f)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,f){return this.easeTo(a.extend({zoom:r},u),f)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,f){return this.easeTo(a.extend({bearing:r},u),f)}resetNorth(r,u){return this.rotateTo(0,a.extend({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=$e.convert(r);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,u)}_cameraForBoxAndBearing(r,u,f,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=a.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const lt=g.padding;g.padding={top:lt,bottom:lt,right:lt,left:lt}}g.padding=a.extend(x,g.padding);const A=this.transform,k=A.padding,M=A.project(a.LngLat.convert(r)),N=A.project(a.LngLat.convert(u)),Y=M.rotate(-f*Math.PI/180),q=N.rotate(-f*Math.PI/180),fe=new a.Point(Math.max(Y.x,q.x),Math.max(Y.y,q.y)),ze=new a.Point(Math.min(Y.x,q.x),Math.min(Y.y,q.y)),Ae=fe.sub(ze),Me=(A.width-(k.left+k.right+g.padding.left+g.padding.right))/Ae.x,je=(A.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/Ae.y;if(je<0||Me<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Xe=Math.min(A.scaleZoom(A.scale*Math.min(Me,je)),g.maxZoom),it=a.Point.convert(g.offset),Fe=new a.Point((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(f*Math.PI/180),nt=it.add(Fe).mult(A.scale/A.zoomScale(Xe));return{center:A.unproject(M.add(N).div(2).sub(nt)),zoom:Xe,bearing:f}}fitBounds(r,u,f){return this._fitInternal(this.cameraForBounds(r,u),u,f)}fitScreenCoordinates(r,u,f,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(r)),this.transform.pointLocation(a.Point.convert(u)),f,g),g,x)}_fitInternal(r,u,f){return r?(delete(u=a.extend(r,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(r,u){this.stop();const f=this._getTransformForUpdate();let g=!1,x=!1,A=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(g=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=a.LngLat.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(x=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(A=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),g&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),x&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),A&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u))}calculateCameraOptionsFromTo(r,u,f,g=0){const x=a.MercatorCoordinate.fromLngLat(r,u),A=a.MercatorCoordinate.fromLngLat(f,g),k=A.x-x.x,M=A.y-x.y,N=A.z-x.z,Y=Math.hypot(k,M,N);if(Y===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(k,M),fe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Y/this.transform.tileSize),ze=180*Math.atan2(k,-M)/Math.PI;let Ae=180*Math.acos(q/Y)/Math.PI;return Ae=N<0?90-Ae:90+Ae,{center:A.toLngLat(),zoom:fe,pitch:Ae,bearing:ze}}easeTo(r,u){this._stop(!1,r.easeId),((r=a.extend({offset:[0,0],duration:500,easing:a.ease},r)).animate===!1||!r.essential&&a.exported.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),A=this.getPitch(),k=this.getPadding(),M="zoom"in r?+r.zoom:g,N="bearing"in r?this._normalizeBearing(r.bearing,x):x,Y="pitch"in r?+r.pitch:A,q="padding"in r?r.padding:f.padding,fe=a.Point.convert(r.offset);let ze=f.centerPoint.add(fe);const Ae=f.pointLocation(ze),Me=a.LngLat.convert(r.center||Ae);this._normalizeCenter(Me);const je=f.project(Ae),Xe=f.project(Me).sub(je),it=f.zoomScale(M-g);let Fe,nt;r.around&&(Fe=a.LngLat.convert(r.around),nt=f.locationPoint(Fe));const lt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==g,this._rotating=this._rotating||x!==N,this._pitching=this._pitching||Y!==A,this._padding=!f.isPaddingEqual(q),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,lt),this.terrain&&this._prepareElevation(Me),this._ease(vt=>{if(this._zooming&&(f.zoom=a.interpolate.number(g,M,vt)),this._rotating&&(f.bearing=a.interpolate.number(x,N,vt)),this._pitching&&(f.pitch=a.interpolate.number(A,Y,vt)),this._padding&&(f.interpolatePadding(k,q,vt),ze=f.centerPoint.add(fe)),this.terrain&&!r.freezeElevation&&this._updateElevation(vt),Fe)f.setLocationAtPoint(Fe,nt);else{const wt=f.zoomScale(f.zoom-g),Tt=M>g?Math.min(2,it):Math.max(.5,it),_t=Math.pow(Tt,1-vt),Dt=f.unproject(je.add(Xe.mult(vt*_t)).mult(wt));f.setLocationAtPoint(f.renderWorldCopies?Dt.wrap():Dt,ze)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},vt=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,vt)},r),this}_prepareEase(r,u,f={}){this._moving=!0,u||f.moving||this.fire(new a.Event("movestart",r)),this._zooming&&!f.zooming&&this.fire(new a.Event("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new a.Event("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new a.Event("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(r,this.terrain),this.transform.freezeElevation=!0}_updateElevation(r){const u=this.transform.getElevation(this._elevationCenter,this.terrain);if(r<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(u-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=a.interpolate.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:f,zoom:g,pitch:x,bearing:A,elevation:k}=this.transformCameraUpdate(u);f&&(u.center=f),g!==void 0&&(u.zoom=g),x!==void 0&&(u.pitch=x),A!==void 0&&(u.bearing=A),k!==void 0&&(u.elevation=k),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new a.Event("move",r)),this._zooming&&this.fire(new a.Event("zoom",r)),this._rotating&&this.fire(new a.Event("rotate",r)),this._pitching&&this.fire(new a.Event("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new a.Event("zoomend",r)),g&&this.fire(new a.Event("rotateend",r)),x&&this.fire(new a.Event("pitchend",r)),this.fire(new a.Event("moveend",r))}flyTo(r,u){if(!r.essential&&a.exported.prefersReducedMotion){const Bt=a.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Bt,u)}this.stop(),r=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},r);const f=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),A=this.getPitch(),k=this.getPadding(),M="zoom"in r?a.clamp(+r.zoom,f.minZoom,f.maxZoom):g,N="bearing"in r?this._normalizeBearing(r.bearing,x):x,Y="pitch"in r?+r.pitch:A,q="padding"in r?r.padding:f.padding,fe=f.zoomScale(M-g),ze=a.Point.convert(r.offset);let Ae=f.centerPoint.add(ze);const Me=f.pointLocation(Ae),je=a.LngLat.convert(r.center||Me);this._normalizeCenter(je);const Xe=f.project(Me),it=f.project(je).sub(Xe);let Fe=r.curve;const nt=Math.max(f.width,f.height),lt=nt/fe,vt=it.mag();if("minZoom"in r){const Bt=a.clamp(Math.min(r.minZoom,g,M),f.minZoom,f.maxZoom),jn=nt/f.zoomScale(Bt-g);Fe=Math.sqrt(jn/vt*2)}const wt=Fe*Fe;function Tt(Bt){const jn=(lt*lt-nt*nt+(Bt?-1:1)*wt*wt*vt*vt)/(2*(Bt?lt:nt)*wt*vt);return Math.log(Math.sqrt(jn*jn+1)-jn)}function _t(Bt){return(Math.exp(Bt)-Math.exp(-Bt))/2}function Dt(Bt){return(Math.exp(Bt)+Math.exp(-Bt))/2}const tn=Tt(0);let gn=function(Bt){return Dt(tn)/Dt(tn+Fe*Bt)},kt=function(Bt){return nt*((Dt(tn)*(_t(jn=tn+Fe*Bt)/Dt(jn))-_t(tn))/wt)/vt;var jn},un=(Tt(1)-tn)/Fe;if(Math.abs(vt)<1e-6||!isFinite(un)){if(Math.abs(nt-lt)<1e-6)return this.easeTo(r,u);const Bt=lt<nt?-1:1;un=Math.abs(Math.log(lt/nt))/Fe,kt=function(){return 0},gn=function(jn){return Math.exp(Bt*Fe*jn)}}return r.duration="duration"in r?+r.duration:1e3*un/("screenSpeed"in r?+r.screenSpeed/Fe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=x!==N,this._pitching=Y!==A,this._padding=!f.isPaddingEqual(q),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(je),this._ease(Bt=>{const jn=Bt*un,Er=1/gn(jn);f.zoom=Bt===1?M:g+f.scaleZoom(Er),this._rotating&&(f.bearing=a.interpolate.number(x,N,Bt)),this._pitching&&(f.pitch=a.interpolate.number(A,Y,Bt)),this._padding&&(f.interpolatePadding(k,q,Bt),Ae=f.centerPoint.add(ze)),this.terrain&&!r.freezeElevation&&this._updateElevation(Bt);const Dn=Bt===1?je:f.unproject(Xe.add(it.mult(kt(jn))).mult(Er));f.setLocationAtPoint(f.renderWorldCopies?Dn.wrap():Dn,Ae),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,u,f){f.animate===!1||f.duration===0?(r(1),u()):(this._easeStart=a.exported.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const r=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(r,u){r=a.wrap(r,-180,180);const f=Math.abs(r-u);return Math.abs(r-360-u)<f&&(r-=360),Math.abs(r+360-u)<f&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=r.lng-u.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.transform.getElevation(a.LngLat.convert(r),this.terrain)-this.transform.elevation:null}}class on{constructor(r={}){this.options=r,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const f=this._map._getUIString(`AttributionControl.${u}`);r.title=f,r.setAttribute("aria-label",f)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(r){!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"&&r.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const x=u[g];if(x.used||x.usedForTerrain){const A=x.getSource();A.attribution&&r.indexOf(A.attribution)<0&&r.push(A.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,x)=>g.length-x.length),r=r.filter((g,x)=>{for(let A=x+1;A<r.length;A++)if(r[A].indexOf(g)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class fu{constructor(r={}){this.options=r,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const r=this._container.children;if(r.length){const u=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}}}class Dh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const g of f)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Bh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var zi=a.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Fd extends a.Evented{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const f={};for(const g of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),a.ortho(g.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[g.key]=new vn(g,this.tileSize));for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(r){for(const u in this._tiles){const f=this._tiles[u];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID;if(g.canonical.equals(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16),a.ortho(x.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),u[f]=x}else if(g.canonical.isChildOf(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const A=g.canonical.z-r.canonical.z,k=g.canonical.x-(g.canonical.x>>A<<A),M=g.canonical.y-(g.canonical.y>>A<<A),N=a.EXTENT>>A;a.ortho(x.posMatrix,0,N,0,N,0,1),a.translate(x.posMatrix,x.posMatrix,[-k*N,-M*N,0]),u[f]=x}else if(r.canonical.isChildOf(g.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const A=r.canonical.z-g.canonical.z,k=r.canonical.x-(r.canonical.x>>A<<A),M=r.canonical.y-(r.canonical.y>>A<<A),N=a.EXTENT>>A;a.ortho(x.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(x.posMatrix,x.posMatrix,[k*N,M*N,0]),a.scale(x.posMatrix,x.posMatrix,[1/2**A,1/2**A,0]),u[f]=x}}return u}getSourceTile(r,u){const f=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!x||!x.dem)&&u)for(;g>=f.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(r.scaledTo(g--).key);return x}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class Go{constructor(r,u,f){this.painter=r,this.sourceCache=new Fd(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,f,g=a.EXTENT){if(!(u>=0&&u<g&&f>=0&&f<g))return 0;let x=0;const A=this.getTerrainData(r);if(A.tile&&A.tile.dem){const k=function(Ae,Me,je){var Xe=Me[0],it=Me[1];return Ae[0]=je[0]*Xe+je[4]*it+je[12],Ae[1]=je[1]*Xe+je[5]*it+je[13],Ae}([],[u/g*a.EXTENT,f/g*a.EXTENT],A.u_terrain_matrix),M=[k[0]*A.tile.dem.dim,k[1]*A.tile.dem.dim],N=[Math.floor(M[0]),Math.floor(M[1])],Y=A.tile.dem.get(N[0],N[1]),q=A.tile.dem.get(N[0],N[1]+1),fe=A.tile.dem.get(N[0]+1,N[1]),ze=A.tile.dem.get(N[0]+1,N[1]+1);x=a.interpolate.number(a.interpolate.number(Y,q,M[0]-N[0]),a.interpolate.number(fe,ze,M[0]-N[0]),M[1]-N[1])}return x}getElevation(r,u,f,g=a.EXTENT){return this.getDEMElevation(r,u,f,g)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.painter.context,x=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new H(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new H(g,new a.RGBAImage({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new H(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?x=r.canonical.z-g:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=r.canonical.x-(r.canonical.x>>x<<x),k=r.canonical.y-(r.canonical.y>>x<<x),M=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<x),1/(a.EXTENT<<x),0]);a.translate(M,M,[A*a.EXTENT,k*a.EXTENT,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,f=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new H(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new H(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,A=0;x<this._coordsTextureSize;x++)for(let k=0;k<this._coordsTextureSize;k++,A+=4)u[A+0]=255&k,u[A+1]=255&x,u[A+2]=k>>8<<4|x>>8,u[A+3]=0;const f=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new H(r,f,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){const u=new Uint8Array(4),f=this.painter.context,g=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const x=u[0]+(u[2]>>4<<8),A=u[1]+((15&u[2])<<8),k=this.coordsIndex[255-u[3]],M=k&&this.sourceCache.getTileByID(k);if(!M)return null;const N=this._coordsTextureSize,Y=(1<<M.tileID.canonical.z)*N;return new a.MercatorCoordinate((M.tileID.canonical.x*N+x)/Y,(M.tileID.canonical.y*N+A)/Y,this.getElevation(M.tileID,x,A,N))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new a.Pos3dArray,f=new a.TriangleIndexArray,g=this.meshSize,x=a.EXTENT/g,A=g*g;for(let q=0;q<=g;q++)for(let fe=0;fe<=g;fe++)u.emplaceBack(fe*x,q*x,0);for(let q=0;q<A;q+=g+1)for(let fe=0;fe<g;fe++)f.emplaceBack(fe+q,g+fe+q+1,g+fe+q+2),f.emplaceBack(fe+q,g+fe+q+2,fe+q+1);const k=u.length,M=k+2*(g+1);for(const q of[0,1])for(let fe=0;fe<=g;fe++)for(const ze of[0,1])u.emplaceBack(fe*x,q*a.EXTENT,ze);for(let q=0;q<2*g;q+=2)f.emplaceBack(M+q,M+q+1,M+q+3),f.emplaceBack(M+q,M+q+3,M+q+2),f.emplaceBack(k+q,k+q+3,k+q+1),f.emplaceBack(k+q,k+q+2,k+q+3);const N=u.length,Y=N+2*(g+1);for(const q of[0,1])for(let fe=0;fe<=g;fe++)for(const ze of[0,1])u.emplaceBack(q*a.EXTENT,fe*x,ze);for(let q=0;q<2*g;q+=2)f.emplaceBack(N+q,N+q+1,N+q+3),f.emplaceBack(N+q,N+q+3,N+q+2),f.emplaceBack(Y+q,Y+q+3,Y+q+1),f.emplaceBack(Y+q,Y+q+2,Y+q+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(u,zi.members),segments:a.SegmentVector.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*a.earthRadius/Math.pow(2,r)/5}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}}class Fg{constructor(r,u,f){this._context=r,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new H(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:r,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const hs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class yr{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Fg(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const g=r.sourceCaches[f].getVisibleCoordinates();for(const x of g){const A=this.terrain.sourceCache.getTerrainCoords(x);for(const k in A)this._coordsDescendingInv[f][k]||(this._coordsDescendingInv[f][k]=[]),this._coordsDescendingInv[f][k].push(A[k])}}this._coordsDescendingInvStr={};for(const f of r._order){const g=r._layers[f],x=g.source;if(hs[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const A in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][A]=this._coordsDescendingInv[x][A].map(k=>k.key).sort().join()}}for(const f of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][f.tileID.key];x&&x!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(hs[u]&&(this._prevType&&hs[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!g))return!0;if(hs[this._prevType]||hs[u]&&g){this._prevType=u;const x=this._stacks.length-1,A=this._stacks[x]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(ol(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[x]){const N=this.pool.getObjectForId(k.rtt[x].id);if(N.stamp===k.rtt[x].stamp){this.pool.useObject(N);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),k.rtt[x]={id:M.id,stamp:M.stamp},f.context.bindFramebuffer.set(M.fbo.framebuffer),f.context.clear({color:a.Color.transparent,stencil:0}),f.currentStencilSource=void 0;for(let N=0;N<A.length;N++){const Y=f.style._layers[A[N]],q=Y.source?this._coordsDescendingInv[Y.source][k.tileID.key]:[k.tileID];f.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),f._renderTileClippingMasks(Y,q),f.renderLayer(f,f.style.sourceCaches[Y.source],Y,q),Y.source&&(k.rttCoords[Y.source]=this._coordsDescendingInvStr[Y.source][k.tileID.key])}}return ol(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),hs[u]}return!1}}const kr=b,jd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},ll=p=>{p.touchstart=p.dragStart,p.touchmoveWindow=p.dragMove,p.touchend=p.dragEnd},ac={showCompass:!0,showZoom:!0,visualizePitch:!1};class Nh{constructor(r,u,f=!1){this._clickTolerance=10;const g=r.dragRotate._mouseRotate.getClickTolerance(),x=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=ya({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:k,bearingDegreesPerPixelMoved:M=.8})=>{const N=new ga;return new Zr({clickTolerance:k,move:(Y,q)=>({bearingDelta:(q.x-Y.x)*M}),moveStateManager:N,enable:A,assignEvents:ll})})({clickTolerance:g,enable:!0}),this.map=r,f&&(this.mousePitch=ec({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:k,pitchDegreesPerPixelMoved:M=-.5})=>{const N=new ga;return new Zr({clickTolerance:k,move:(Y,q)=>({pitchDelta:(q.y-Y.y)*M}),moveStateManager:N,enable:A,assignEvents:ll})})({clickTolerance:x,enable:!0})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),w.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),w.disableDrag()}moveMouse(r,u){const f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(r,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(r,u)||{};x&&f.setPitch(f.getPitch()+x)}}moveTouch(r,u){const f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(r,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(r,u)||{};x&&f.setPitch(f.getPitch()+x)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}mousedown(r){this.startMouse(a.extend({},r,{ctrlKey:!0,preventDefault:()=>r.preventDefault()}),w.mousePos(this.element,r)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(r){this.moveMouse(r,w.mousePos(this.element,r))}mouseup(r){this.mouseRotate.dragEnd(r),this.mousePitch&&this.mousePitch.dragEnd(r),this.offTemp()}touchstart(r){r.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,r.targetTouches)[0],this.startTouch(r,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))}touchmove(r){r.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,r.targetTouches)[0],this.moveTouch(r,this._lastPos))}touchend(r){r.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let Zo;function lc(p,r,u){if(p=new a.LngLat(p.lng,p.lat),r){const f=new a.LngLat(p.lng-360,p.lat),g=new a.LngLat(p.lng+360,p.lat),x=u.locationPoint(p).distSqr(r);u.locationPoint(f).distSqr(r)<x?p=f:u.locationPoint(g).distSqr(r)<x&&(p=g)}for(;Math.abs(p.lng-u.center.lng)>180;){const f=u.locationPoint(p);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;p.lng>u.center.lng?p.lng-=360:p.lng+=360}return p}const va={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function uc(p,r,u){const f=p.classList;for(const g in va)f.remove(`maplibregl-${u}-anchor-${g}`);f.add(`maplibregl-${u}-anchor-${r}`)}class du extends a.Evented{constructor(r,u){if(super(),(r instanceof HTMLElement||u)&&(r=a.extend({element:r},u)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=a.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const f=w.createNS("http://www.w3.org/2000/svg","svg"),g=41,x=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${g}px`),f.setAttributeNS(null,"width",`${x}px`),f.setAttributeNS(null,"viewBox",`0 0 ${x} ${g}`);const A=w.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const k=w.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const M=w.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const it of N){const Fe=w.createNS("http://www.w3.org/2000/svg","ellipse");Fe.setAttributeNS(null,"opacity","0.04"),Fe.setAttributeNS(null,"cx","10.5"),Fe.setAttributeNS(null,"cy","5.80029008"),Fe.setAttributeNS(null,"rx",it.rx),Fe.setAttributeNS(null,"ry",it.ry),M.appendChild(Fe)}const Y=w.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);const q=w.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(q);const fe=w.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"fill","#000000");const ze=w.createNS("http://www.w3.org/2000/svg","path");ze.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),fe.appendChild(ze);const Ae=w.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");const Me=w.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(8.0, 8.0)");const je=w.createNS("http://www.w3.org/2000/svg","circle");je.setAttributeNS(null,"fill","#000000"),je.setAttributeNS(null,"opacity","0.25"),je.setAttributeNS(null,"cx","5.5"),je.setAttributeNS(null,"cy","5.5"),je.setAttributeNS(null,"r","5.4999962");const Xe=w.createNS("http://www.w3.org/2000/svg","circle");Xe.setAttributeNS(null,"fill","#FFFFFF"),Xe.setAttributeNS(null,"cx","5.5"),Xe.setAttributeNS(null,"cy","5.5"),Xe.setAttributeNS(null,"r","5.4999962"),Me.appendChild(je),Me.appendChild(Xe),k.appendChild(M),k.appendChild(Y),k.appendChild(fe),k.appendChild(Ae),k.appendChild(Me),f.appendChild(k),f.setAttributeNS(null,"height",g*this._scale+"px"),f.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(f),this._offset=a.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),uc(this._element,this._anchor,"marker"),this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(r){const u=r.code,f=r.charCode||r.keyCode;u!=="Space"&&u!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(r){const u=r.originalEvent.target,f=this._element;this._popup&&(u===f||f.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}_update(r){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=lc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f=`rotateX(${this._map.getPitch()}deg)`),r&&r.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${va[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${f} ${u}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const g=this._map.unproject(this._pos),x=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=g.distanceTo(this._lngLat)>20*x?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(r){return this._offset=a.Point.convert(r),this._update(),this}_onMove(r){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Uh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ul=0,_a=!1;const $h={maxWidth:100,unit:"metric"};function cc(p,r,u){const f=u&&u.maxWidth||100,g=p._container.clientHeight/2,x=p.unproject([0,g]),A=p.unproject([f,g]),k=x.distanceTo(A);if(u&&u.unit==="imperial"){const M=3.2808*k;M>5280?xa(r,f,M/5280,p._getUIString("ScaleControl.Miles")):xa(r,f,M,p._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?xa(r,f,k/1852,p._getUIString("ScaleControl.NauticalMiles")):k>=1e3?xa(r,f,k/1e3,p._getUIString("ScaleControl.Kilometers")):xa(r,f,k,p._getUIString("ScaleControl.Meters"))}function xa(p,r,u,f){const g=function(x){const A=Math.pow(10,`${Math.floor(x)}`.length-1);let k=x/A;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(M){const N=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*N)/N}(k),A*k}(u);p.style.width=r*(g/u)+"px",p.innerHTML=`${g}&nbsp;${f}`}const hc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Vh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fc(p){if(p){if(typeof p=="number"){const r=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new a.Point(0,0),top:new a.Point(0,p),"top-left":new a.Point(r,r),"top-right":new a.Point(-r,r),bottom:new a.Point(0,-p),"bottom-left":new a.Point(r,-r),"bottom-right":new a.Point(-r,-r),left:new a.Point(p,0),right:new a.Point(-p,0)}}if(p instanceof a.Point||Array.isArray(p)){const r=a.Point.convert(p);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.Point.convert(p.center||[0,0]),top:a.Point.convert(p.top||[0,0]),"top-left":a.Point.convert(p["top-left"]||[0,0]),"top-right":a.Point.convert(p["top-right"]||[0,0]),bottom:a.Point.convert(p.bottom||[0,0]),"bottom-left":a.Point.convert(p["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(p["bottom-right"]||[0,0]),left:a.Point.convert(p.left||[0,0]),right:a.Point.convert(p.right||[0,0])}}return fc(new a.Point(0,0))}const dc=b,pc={setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends qt{constructor(p){var r;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(p=a.extend({},jd,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new al(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._cooperativeGestures=p.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new Dh,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Bh,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(r=p.pixelRatio)!==null&&r!==void 0?r:devicePixelRatio,this.transformCameraUpdate=p.transformCameraUpdate,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new B(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),a.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;this._resizeObserver=new ResizeObserver(f=>{u?this._trackResize&&this.resize(f)._update():u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Vo(this,p),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=p.hash&&new au(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,a.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new on({customAttribution:p.customAttribution})),p.maplibreLogo&&this.addControl(new fu,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new a.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new a.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new a.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(p,r){if(r===void 0&&(r=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=p.onAdd(this);this._controls.push(p);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(p);return r>-1&&this._controls.splice(r,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}calculateCameraOptionsFromTo(p,r,u,f){return f==null&&this.terrain&&(f=this.transform.getElevation(u,this.terrain)),super.calculateCameraOptionsFromTo(p,r,u,f)}resize(p){var r;const u=this._containerDimensions(),f=u[0],g=u[1];this._resizeCanvas(f,g,this.getPixelRatio()),this.transform.resize(f,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,g),this.painter.resize(f,g,this.getPixelRatio());const x=!this._moving;return x&&(this.stop(),this.fire(new a.Event("movestart",p)).fire(new a.Event("move",p))),this.fire(new a.Event("resize",p)),x&&this.fire(new a.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[r,u]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(r,u,p),this.painter.resize(r,u,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds($e.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(p){return this._cooperativeGestures=p,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(p){return this.transform.locationPoint(a.LngLat.convert(p),this.style&&this.terrain)}unproject(p){return this.transform.pointLocation(a.Point.convert(p),this.terrain)}isMoving(){var p;return this._moving||((p=this.handlers)===null||p===void 0?void 0:p.isMoving())}isZooming(){var p;return this._zooming||((p=this.handlers)===null||p===void 0?void 0:p.isZooming())}isRotating(){var p;return this._rotating||((p=this.handlers)===null||p===void 0?void 0:p.isRotating())}_createDelegatedListener(p,r,u){if(p==="mouseenter"||p==="mouseover"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:x=>{const A=this.getLayer(r)?this.queryRenderedFeatures(x.point,{layers:[r]}):[];A.length?f||(f=!0,u.call(this,new Et(p,this,x.originalEvent,{features:A}))):f=!1},mouseout:()=>{f=!1}}}}if(p==="mouseleave"||p==="mouseout"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:A=>{(this.getLayer(r)?this.queryRenderedFeatures(A.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,u.call(this,new Et(p,this,A.originalEvent)))},mouseout:A=>{f&&(f=!1,u.call(this,new Et(p,this,A.originalEvent)))}}}}{const f=g=>{const x=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];x.length&&(g.features=x,u.call(this,g),delete g.features)};return{layer:r,listener:u,delegates:{[p]:f}}}}on(p,r,u){if(u===void 0)return super.on(p,r);const f=this._createDelegatedListener(p,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(p,r,u){if(u===void 0)return super.once(p,r);const f=this._createDelegatedListener(p,r,u);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(p,r,u){return u===void 0?super.off(p,r):(this._delegatedListeners&&this._delegatedListeners[p]&&(f=>{const g=this._delegatedListeners[p];for(let x=0;x<g.length;x++){const A=g[x];if(A.layer===r&&A.listener===u){for(const k in A.delegates)this.off(k,A.delegates[k]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(p,r){if(!this.style)return[];let u;const f=p instanceof a.Point||Array.isArray(p),g=f?p:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:p)||{},g instanceof a.Point||typeof g[0]=="number")u=[a.Point.convert(g)];else{const x=a.Point.convert(g[0]),A=a.Point.convert(g[1]);u=[x,new a.Point(A.x,x.y),A,new a.Point(x.x,A.y),x]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(p,r){return this.style.querySourceFeatures(p,r)}setStyle(p,r){return(r=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(p,r))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const r=this._locale[p];if(r==null)throw new Error(`Missing UI string '${p}'`);return r}_updateStyle(p,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(p,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!p)),p?(this.style=new jr(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p,r,u):this.style.loadJSON(p,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new jr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,r){if(typeof p=="string"){const u=this._requestManager.transformRequest(p,G.Style);a.getJSON(u,(f,g)=>{f?this.fire(new a.ErrorEvent(f)):g&&this._updateDiff(g,r)})}else typeof p=="object"&&this._updateDiff(p,r)}_updateDiff(p,r){try{this.style.setState(p,r)&&this._update(!0)}catch(u){a.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(p,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(p,r){return this._lazyInitEmptyStyle(),this.style.addSource(p,r),this._update(!0)}isSourceLoaded(p){const r=this.style&&this.style.sourceCaches[p];if(r!==void 0)return r.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}setTerrain(p){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),p){const r=this.style.sourceCaches[p.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${p.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===p.source&&a.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Go(this.painter,r,p),this.painter.renderToTexture=new yr(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId===p.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new a.Event("terrain",{terrain:p})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const r in p){const u=p[r]._tiles;for(const f in u){const g=u[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(p,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,r,u)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,r,{pixelRatio:u=1,sdf:f=!1,stretchX:g,stretchY:x,content:A}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||a.isImageBitmap(r)){const{width:k,height:M,data:N}=a.exported.getImageData(r);this.style.addImage(p,{data:new a.RGBAImage({width:k,height:M},N),pixelRatio:u,stretchX:g,stretchY:x,content:A,sdf:f,version:0})}else{if(r.width===void 0||r.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:M,data:N}=r,Y=r;this.style.addImage(p,{data:new a.RGBAImage({width:k,height:M},new Uint8Array(N)),pixelRatio:u,stretchX:g,stretchY:x,content:A,sdf:f,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,p)}}}updateImage(p,r){const u=this.style.getImage(p);if(!u)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||a.isImageBitmap(r)?a.exported.getImageData(r):r,{width:g,height:x,data:A}=f;if(g===void 0||x===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||x!==u.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(r instanceof HTMLImageElement||a.isImageBitmap(r));u.data.replace(A,k),this.style.updateImage(p,u)}getImage(p){return this.style.getImage(p)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,r){$.getImage(this._requestManager.transformRequest(p,G.Image),r)}listImages(){return this.style.listImages()}addLayer(p,r){return this._lazyInitEmptyStyle(),this.style.addLayer(p,r),this._update(!0)}moveLayer(p,r){return this.style.moveLayer(p,r),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,r,u){return this.style.setLayerZoomRange(p,r,u),this._update(!0)}setFilter(p,r,u={}){return this.style.setFilter(p,r,u),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,r,u,f={}){return this.style.setPaintProperty(p,r,u,f),this._update(!0)}getPaintProperty(p,r){return this.style.getPaintProperty(p,r)}setLayoutProperty(p,r,u,f={}){return this.style.setLayoutProperty(p,r,u,f),this._update(!0)}getLayoutProperty(p,r){return this.style.getLayoutProperty(p,r)}setGlyphs(p,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(p,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(p,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(p,r,u,f=>{f||this._update(!0)}),this}removeSprite(p){return this._lazyInitEmptyStyle(),this.style.removeSprite(p),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(p,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(p,r,u=>{u||this._update(!0)}),this}setLight(p,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,r){return this.style.setFeatureState(p,r),this._update()}removeFeatureState(p,r){return this.style.removeFeatureState(p,r),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,r=0;return this._container&&(p=this._container.clientWidth||400,r=this._container.clientHeight||300),[p,r]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",p);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const f=this._controlContainer=w.create("div","maplibregl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{g[x]=w.create("div",`maplibregl-ctrl-${x} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(p){this._onCooperativeGesture(p,p[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${p}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(p,r,u){this._canvas.width=u*p,this._canvas.height=u*r,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const p={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:p},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",p)||this._canvas.getContext("webgl",p);if(!u){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new su(u,this.transform),C.testSupport(u)}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(p,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=a.exported.now();this.style.zoomHistory.update(g,x);const A=new a.EvaluationParameters(g,{now:x,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=A.crossFadingFactor();k===1&&k===this._crossFadingFactor||(u=!0,this._crossFadingFactor=k),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var p;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(p=this._resizeObserver)===null||p===void 0||p.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(p=>{a.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get version(){return kr}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(p){this.options=a.extend({},ac,p),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),r=p===this._map.getMaxZoom(),u=p===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Nh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,r){const u=w.create("button",p,this._container);return u.type="button",u.addEventListener("click",r),u}_setButtonTitle(p,r){const u=this._map._getUIString(`NavigationControl.${r}`);p.title=u,p.setAttribute("aria-label",u)}},GeolocateControl:class extends a.Evented{constructor(p){super(),this.options=a.extend({},Uh,p),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){Zo===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Zo=f.state!=="denied",r(Zo)}).catch(()=>{Zo=!!window.navigator.geolocation,r(Zo)}):(Zo=!!window.navigator.geolocation,r(Zo)):r(Zo)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ul=0,_a=!1}_isOutOfMapMaxBounds(p){const r=this._map.getMaxBounds(),u=p.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.Event("geolocate",p)),this._finish()}}_updateCamera(p){const r=new a.LngLat(p.coords.longitude,p.coords.latitude),u=p.coords.accuracy,f=this._map.getBearing(),g=a.extend({bearing:f},this.options.fitBoundsOptions),x=$e.fromLngLat(r,u);this._map.fitBounds(x,g,{geolocateSource:!0})}_updateMarker(p){if(p){const r=new a.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.getBounds(),r=p.getSouthEast(),u=p.getNorthEast(),f=r.distanceTo(u),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&_a)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new du(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new du({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ul--,_a=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ul++,ul>1?(p={maximumAge:6e5,timeout:0},_a=!0):(p=this.options.positionOptions,_a=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:on,LogoControl:fu,ScaleControl:class{constructor(p){this.options=a.extend({},$h,p),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){cc(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,cc(this._map,this._container,this.options)}},FullscreenControl:class extends a.Evented{constructor(p={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const p=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(p){this.options=p,a.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends a.Evented{constructor(p){super(),this.options=a.extend(Object.create(hc),p),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=a.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const r=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=p;f=u.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=lc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const r=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let u=this.options.anchor;const f=fc(this.options.offset);if(!u){const x=this._container.offsetWidth,A=this._container.offsetHeight;let k;k=r.y+f.bottom.y<A?["top"]:r.y>this._map.transform.height-A?["bottom"]:[],r.x<x/2?k.push("left"):r.x>this._map.transform.width-x/2&&k.push("right"),u=k.length===0?"bottom":k.join("-")}const g=r.add(f[u]).round();w.setTransform(this._container,`${va[u]} translate(${g.x}px,${g.y}px)`),uc(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Vh);p&&p.focus()}_onClose(){this.remove()}},Marker:du,Style:jr,LngLat:a.LngLat,LngLatBounds:$e,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:Ye,GeoJSONSource:Mt,ImageSource:xt,RasterDEMTileSource:gt,RasterTileSource:ut,VectorTileSource:ot,VideoSource:$t,prewarm:function(){j().acquire(tt)},clearPrewarmedResources:function(){const p=L;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(tt),L=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return dc},get workerCount(){return Ge.workerCount},set workerCount(p){Ge.workerCount=p},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){a.config.MAX_PARALLEL_IMAGE_REQUESTS=p},get workerUrl(){return a.config.WORKER_URL},set workerUrl(p){a.config.WORKER_URL=p},addProtocol(p,r){a.config.REGISTERED_PROTOCOLS[p]=r},removeProtocol(p){delete a.config.REGISTERED_PROTOCOLS[p]}};return sc.extend(pc,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),pc});var y=c;return y})})(VT);var ZT=VT.exports;const WT=gd(ZT),u3=jP({__proto__:null,default:WT},[ZT]);const c3="modulepreload",h3=function(e){return"/osm-address-editor-vite/"+e},Ub={},f3=function(t,i,l){if(!i||i.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=h3(d),d in Ub)return;Ub[d]=!0;const y=d.endsWith(".css"),a=y?'[rel="stylesheet"]':"";if(!!l)for(let C=c.length-1;C>=0;C--){const E=c[C];if(E.href===d&&(!y||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${a}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":c3,y||(w.as="script",w.crossOrigin=""),w.href=d,document.head.appendChild(w),y)return new Promise((C,E)=>{w.addEventListener("load",C),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t())},d3=yt.createContext(null);function p3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function $b(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Vb(e,t){const i=t.viewState||t;let l=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),l=l||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,l=l||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,l=l||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,l=l||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(l=!0,e.padding=i.padding),l}const m3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Gb(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const l of e.layers)t[l.id]=l;const i=e.layers.map(l=>{const c=t[l.ref];let d=null;if("interactive"in l&&(d={...l},delete d.interactive),c){d=d||{...l},delete d.ref;for(const y of m3)y in c&&(d[y]=c[y])}return d||l});return{...e,layers:i}}function g3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,l=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&l===d}function Jo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Jo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Jo(e[c],t[c]))return!1;return!0}return!1}const Zb={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},e0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Wb={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},y3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],v3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class dh{constructor(t,i,l){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[Wb[c.type]];d&&d(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[Zb[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[e0[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(l)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const l=this._updateSettings(t,i);l&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(l||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const l=dh.savedMaps.pop();if(!l)return null;const c=l.map,d=c.getContainer();for(i.className=d.className;d.childNodes.length>0;)i.appendChild(d.childNodes[0]);c._container=i;const y=c._resizeObserver;y&&(y.disconnect(),y.observe(i)),l.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:a}=t;return a&&(a.bounds?c.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):l._updateViewState(a,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),l}_initialize(t){const{props:i}=this,l={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||_3()||null,container:t,style:Gb(i.mapStyle)},c=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),i.gl){const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=w,i.gl)}const d=new this._MapClass(l);c.padding&&d.setPadding(c.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const y=d._render;d._render=w=>{this._inRender=!0,y.call(d,w),this._inRender=!1};const a=d._renderTaskQueue.run;d._renderTaskQueue.run=w=>{a.call(d._renderTaskQueue,w),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const b=d.fire;d.fire=this._fireEvent.bind(this,b),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>this._updateStyleComponents(this.props,{})),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const w in Zb)d.on(w,this._onPointerEvent);for(const w in e0)d.on(w,this._onCameraEvent);for(const w in Wb)d.on(w,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),dh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=p3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const l=this._map;if(i.width!==l.transform.width||i.height!==l.transform.height)return l.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const l=this._map,c=this._renderTransform,{zoom:d,pitch:y,bearing:a}=c,b=l.isMoving();b&&(c.cameraElevationReference="sea");const w=Vb(c,{...$b(l.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&i){const C=this._deferredEvents;C.move=!0,C.zoom||(C.zoom=d!==c.zoom),C.rotate||(C.rotate=a!==c.bearing),C.pitch||(C.pitch=y!==c.pitch)}return b||Vb(l.transform,t),w}_updateSettings(t,i){const l=this._map;let c=!1;for(const d of y3)d in t&&!Jo(t[d],i[d])&&(c=!0,l[`set${d[0].toUpperCase()}${d.slice(1)}`](t[d]));return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==i.mapStyle){const l={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(l.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Gb(t.mapStyle),l),!0}return!1}_updateStyleComponents(t,i){const l=this._map;let c=!1;return l.style.loaded()&&("light"in t&&!Jo(t.light,i.light)&&(c=!0,l.setLight(t.light)),"fog"in t&&!Jo(t.fog,i.fog)&&(c=!0,l.setFog(t.fog)),"terrain"in t&&!Jo(t.terrain,i.terrain)&&(!t.terrain||l.getSource(t.terrain.source))&&(c=!0,l.setTerrain(t.terrain))),c}_updateHandlers(t,i){const l=this._map;let c=!1;for(const d of v3){const y=t[d];Jo(y,i[d])||(c=!0,y?l[d].enable(y):l[d].disable())}return c}_queryRenderedFeatures(t){const i=this._map,{interactiveLayerIds:l=[]}=this.props;try{return i.queryRenderedFeatures(t,{layers:l.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(t){var i;const{props:l}=this;if(l.interactiveLayerIds&&(l.onMouseMove||l.onMouseEnter||l.onMouseLeave)){const d=t.type,y=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,a=this._queryRenderedFeatures(t.point),b=a.length>0;!b&&y&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=a,b&&!y&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,i,l){const c=this._map,d=c.transform,y=typeof i=="string"?i:i.type;return y==="move"&&this._updateViewState(this.props,!1),y in e0&&(typeof i=="object"&&(i.viewState=$b(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,l),c.transform=d,c):(t.call(c,i,l),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const l in this._deferredEvents)this._deferredEvents[l]&&t.fire(l);this._internalUpdate=!1;const i=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=i}}}dh.savedMaps=[];function _3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const x3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function w3(e,t){if(!e)return null;const i=e.map,l={getMap:()=>i,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c)),queryTerrainElevation:(c,d)=>{const y=i.transform;i.transform=e.transform;const a=i.queryTerrainElevation(c,d);return i.transform=y,a}};for(const c of b3(i))!(c in l)&&!x3.includes(c)&&(l[c]=i[c].bind(i));return l}function b3(e){const t=new Set;let i=e;for(;i;){for(const l of Object.getOwnPropertyNames(i))l[0]!=="_"&&typeof e[l]=="function"&&l!=="fire"&&l!=="setEventedParent"&&t.add(l);i=Object.getPrototypeOf(i)}return Array.from(t)}const E3=typeof document<"u"?yt.useLayoutEffect:yt.useEffect,S3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function T3(e,t){for(const i of S3)i in t&&(e[i]=t[i]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,i=>{i&&console.error(i)},!1)}const wh=yt.createContext(null),C3={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},f1=yt.forwardRef((e,t)=>{const i=yt.useContext(d3),[l,c]=yt.useState(null),d=yt.useRef(),{current:y}=yt.useRef({mapLib:null,map:null});yt.useEffect(()=>{const w=e.mapLib;let C=!0,E;return Promise.resolve(w||f3(()=>Promise.resolve().then(()=>u3),void 0)).then(z=>{if(C){if(z.Map||(z=z.default),!z||!z.Map)throw new Error("Invalid mapLib");if(T3(z,e),!z.supported||z.supported(e))e.reuseMaps&&(E=dh.reuse(e,d.current)),E||(E=new dh(z.Map,e,d.current)),y.map=w3(E,z),y.mapLib=z,c(E),i==null||i.onMapMount(y.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(z=>{e.onError({type:"error",target:null,originalEvent:null,error:z})}),()=>{C=!1,E&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?E.recycle():E.destroy())}},[]),E3(()=>{l&&l.setProps(e)}),yt.useImperativeHandle(t,()=>y.map,[l]);const a=yt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return yt.createElement("div",{id:e.id,ref:d,style:a},l&&yt.createElement(wh.Provider,{value:y},yt.createElement("div",{"mapboxgl-children":"",style:b},e.children)))});f1.displayName="Map";f1.defaultProps=C3;const A3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Bu(e,t){if(!e||!t)return;const i=e.style;for(const l in t){const c=t[l];Number.isFinite(c)&&!A3.test(l)?i[l]=`${c}px`:i[l]=c}}const I3={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function HT(e){const{map:t,mapLib:i}=yt.useContext(wh),l=yt.useRef({props:e});l.current.props=e;const c=yt.useMemo(()=>{let d=!1;yt.Children.forEach(e.children,b=>{b&&(d=!0)});const y={...e,element:d?document.createElement("div"):null},a=new i.Marker(y).setLngLat([e.longitude,e.latitude]);return a.getElement().addEventListener("click",b=>{var w,C;(C=(w=l.current.props).onClick)===null||C===void 0||C.call(w,{type:"click",target:a,originalEvent:b})}),a.on("dragstart",b=>{var w,C;const E=b;E.lngLat=c.getLngLat(),(C=(w=l.current.props).onDragStart)===null||C===void 0||C.call(w,E)}),a.on("drag",b=>{var w,C;const E=b;E.lngLat=c.getLngLat(),(C=(w=l.current.props).onDrag)===null||C===void 0||C.call(w,E)}),a.on("dragend",b=>{var w,C;const E=b;E.lngLat=c.getLngLat(),(C=(w=l.current.props).onDragEnd)===null||C===void 0||C.call(w,E)}),a},[]);return yt.useEffect(()=>(c.addTo(t.getMap()),()=>{c.remove()}),[]),yt.useEffect(()=>{Bu(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!g3(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),h1.createPortal(e.children,c.getElement())}HT.defaultProps=I3;const P3=yt.memo(HT);function Hb(e){return new Set(e?e.trim().split(/\s+/):[])}function M3(e){const{map:t,mapLib:i}=yt.useContext(wh),l=yt.useMemo(()=>document.createElement("div"),[]),c=yt.useRef({props:e});c.current.props=e;const d=yt.useMemo(()=>{const y={...e},a=new i.Popup(y).setLngLat([e.longitude,e.latitude]);return a.once("open",b=>{var w,C;(C=(w=c.current.props).onOpen)===null||C===void 0||C.call(w,b)}),a},[]);if(yt.useEffect(()=>{const y=a=>{var b,w;(w=(b=c.current.props).onClose)===null||w===void 0||w.call(b,a)};return d.on("close",y),d.setDOMContent(l).addTo(t.getMap()),()=>{d.off("close",y),d.isOpen()&&d.remove()}},[]),yt.useEffect(()=>{Bu(d.getElement(),e.style)},[e.style]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!Jo(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const y=Hb(d.options.className),a=Hb(e.className);for(const b of y)a.has(b)||d.removeClassName(b);for(const b of a)y.has(b)||d.addClassName(b);d.options.className=e.className}return h1.createPortal(e.children,l)}yt.memo(M3);function bd(e,t,i,l){const c=yt.useContext(wh),d=yt.useMemo(()=>e(c),[]);return yt.useEffect(()=>{const y=l||i||t,a=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,y==null?void 0:y.position),a&&a(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function k3(e){const t=bd(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return yt.useEffect(()=>{Bu(t._container,e.style)},[e.style]),null}yt.memo(k3);function z3(e){const t=bd(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.useEffect(()=>{Bu(t._controlContainer,e.style)},[e.style]),null}yt.memo(z3);const XT=yt.forwardRef((e,t)=>{const i=yt.useRef({props:e}),l=bd(({mapLib:c})=>{const d=new c.GeolocateControl(e),y=d._setupUI;return d._setupUI=a=>{d._container.hasChildNodes()||y(a)},d.on("geolocate",a=>{var b,w;(w=(b=i.current.props).onGeolocate)===null||w===void 0||w.call(b,a)}),d.on("error",a=>{var b,w;(w=(b=i.current.props).onError)===null||w===void 0||w.call(b,a)}),d.on("outofmaxbounds",a=>{var b,w;(w=(b=i.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,a)}),d.on("trackuserlocationstart",a=>{var b,w;(w=(b=i.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,a)}),d.on("trackuserlocationend",a=>{var b,w;(w=(b=i.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,a)}),d},{position:e.position});return i.current.props=e,yt.useImperativeHandle(t,()=>({trigger:()=>l.trigger()}),[]),yt.useEffect(()=>{Bu(l._container,e.style)},[e.style]),null});XT.displayName="GeolocateControl";const L3=yt.memo(XT);function O3(e){const t=bd(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return yt.useEffect(()=>{Bu(t._container,e.style)},[e.style]),null}const R3=yt.memo(O3),F3={unit:"metric",maxWidth:100};function qT(e){const t=bd(({mapLib:i})=>new i.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),yt.useEffect(()=>{Bu(t._container,e.style)},[e.style]),null}qT.defaultProps=F3;yt.memo(qT);function Am(e,t){if(!e)throw new Error(t)}let j3=0;function D3(e,t,i){if(e.style&&e.style._loaded){const l={...i};return delete l.id,delete l.children,e.addSource(t,l),e.getSource(t)}return null}function B3(e,t,i){Am(t.id===i.id,"source id changed"),Am(t.type===i.type,"source type changed");let l="",c=0;for(const y in t)y!=="children"&&y!=="id"&&!Jo(i[y],t[y])&&(l=y,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((d==="canvas"||d==="video")&&c===1&&l==="coordinates")e.setCoordinates(t.coordinates);else if(d==="vector"&&"setUrl"in e)switch(l){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${l}`)}function N3(e){const t=yt.useContext(wh).map.getMap(),i=yt.useRef(e),[,l]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-source-${j3++}`,[]);yt.useEffect(()=>{if(t){const y=()=>setTimeout(()=>l(a=>a+1),0);return t.on("styledata",y),y(),()=>{var a;if(t.off("styledata",y),t.style&&t.style._loaded&&t.getSource(c)){const b=(a=t.getStyle())===null||a===void 0?void 0:a.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?B3(d,e,i.current):d=D3(t,c,e),i.current=e,d&&yt.Children.map(e.children,y=>y&&yt.cloneElement(y,{source:c}))||null}function U3(e,t,i,l){if(Am(i.id===l.id,"layer id changed"),Am(i.type===l.type,"layer type changed"),i.type==="custom"||l.type==="custom")return;const{layout:c={},paint:d={},filter:y,minzoom:a,maxzoom:b,beforeId:w}=i;if(w!==l.beforeId&&e.moveLayer(t,w),c!==l.layout){const C=l.layout||{};for(const E in c)Jo(c[E],C[E])||e.setLayoutProperty(t,E,c[E]);for(const E in C)c.hasOwnProperty(E)||e.setLayoutProperty(t,E,void 0)}if(d!==l.paint){const C=l.paint||{};for(const E in d)Jo(d[E],C[E])||e.setPaintProperty(t,E,d[E]);for(const E in C)d.hasOwnProperty(E)||e.setPaintProperty(t,E,void 0)}Jo(y,l.filter)||e.setFilter(t,y),(a!==l.minzoom||b!==l.maxzoom)&&e.setLayerZoomRange(t,a,b)}function $3(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const l={...i,id:t};delete l.beforeId,e.addLayer(l,i.beforeId)}}let V3=0;function G3(e){const t=yt.useContext(wh).map.getMap(),i=yt.useRef(e),[,l]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-layer-${V3++}`,[]);if(yt.useEffect(()=>{if(t){const y=()=>l(a=>a+1);return t.on("styledata",y),y(),()=>{t.off("styledata",y),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{U3(t,c,e,i.current)}catch(y){console.warn(y)}else $3(t,c,e);return i.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function Xb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,l)}return i}function Kt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Xb(Object(i),!0).forEach(function(l){H3(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Xb(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Im(e){return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function Z3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qb(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function W3(e,t,i){return t&&qb(e.prototype,t),i&&qb(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function H3(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d1(e,t){return q3(e)||Y3(e,t)||KT(e,t)||Q3()}function bg(e){return X3(e)||K3(e)||KT(e)||J3()}function X3(e){if(Array.isArray(e))return Tv(e)}function q3(e){if(Array.isArray(e))return e}function K3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Y3(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var l=[],c=!0,d=!1,y,a;try{for(i=i.call(e);!(c=(y=i.next()).done)&&(l.push(y.value),!(t&&l.length===t));c=!0);}catch(b){d=!0,a=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(d)throw a}}return l}}function KT(e,t){if(e){if(typeof e=="string")return Tv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Tv(e,t)}}function Tv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,l=new Array(t);i<t;i++)l[i]=e[i];return l}function J3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kb=function(){},p1={},YT={},JT=null,QT={mark:Kb,measure:Kb};try{typeof window<"u"&&(p1=window),typeof document<"u"&&(YT=document),typeof MutationObserver<"u"&&(JT=MutationObserver),typeof performance<"u"&&(QT=performance)}catch{}var e4=p1.navigator||{},Yb=e4.userAgent,Jb=Yb===void 0?"":Yb,jl=p1,pr=YT,Qb=JT,Ep=QT;jl.document;var Ua=!!pr.documentElement&&!!pr.head&&typeof pr.addEventListener=="function"&&typeof pr.createElement=="function",eC=~Jb.indexOf("MSIE")||~Jb.indexOf("Trident/"),Fa="___FONT_AWESOME___",Cv=16,tC="fa",nC="svg-inline--fa",Lu="data-fa-i2svg",Av="data-fa-pseudo-element",t4="data-fa-pseudo-element-pending",m1="data-prefix",g1="data-icon",e2="fontawesome-i2svg",n4="async",r4=["HTML","HEAD","STYLE","SCRIPT"],rC=function(){try{return!0}catch{return!1}}(),y1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Pm={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},iC={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},i4={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},o4=/fa[srltdbk\-\ ]/,oC="fa-layers-text",s4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,a4={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sC=[1,2,3,4,5,6,7,8,9,10],l4=sC.concat([11,12,13,14,15,16,17,18,19,20]),u4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Tu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},c4=[].concat(bg(Object.keys(Pm)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Tu.GROUP,Tu.SWAP_OPACITY,Tu.PRIMARY,Tu.SECONDARY]).concat(sC.map(function(e){return"".concat(e,"x")})).concat(l4.map(function(e){return"w-".concat(e)})),aC=jl.FontAwesomeConfig||{};function h4(e){var t=pr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function f4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(pr&&typeof pr.querySelector=="function"){var d4=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];d4.forEach(function(e){var t=d1(e,2),i=t[0],l=t[1],c=f4(h4(i));c!=null&&(aC[l]=c)})}var p4={familyPrefix:tC,styleDefault:"solid",replacementClass:nC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Uf=Kt(Kt({},p4),aC);Uf.autoReplaceSvg||(Uf.observeMutations=!1);var pn={};Object.keys(Uf).forEach(function(e){Object.defineProperty(pn,e,{enumerable:!0,set:function(i){Uf[e]=i,Hp.forEach(function(l){return l(pn)})},get:function(){return Uf[e]}})});jl.FontAwesomeConfig=pn;var Hp=[];function m4(e){return Hp.push(e),function(){Hp.splice(Hp.indexOf(e),1)}}var gl=Cv,Js={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function g4(e){if(!(!e||!Ua)){var t=pr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=pr.head.childNodes,l=null,c=i.length-1;c>-1;c--){var d=i[c],y=(d.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(y)>-1&&(l=d)}return pr.head.insertBefore(t,l),e}}var y4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function hd(){for(var e=12,t="";e-- >0;)t+=y4[Math.random()*62|0];return t}function bh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function v1(e){return e.classList?bh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function lC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function v4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(lC(e[i]),'" ')},"").trim()}function Eg(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function _1(e){return e.size!==Js.size||e.x!==Js.x||e.y!==Js.y||e.rotate!==Js.rotate||e.flipX||e.flipY}function _4(e){var t=e.transform,i=e.containerWidth,l=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(t.x*32,", ").concat(t.y*32,") "),y="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(d," ").concat(y," ").concat(a)},w={transform:"translate(".concat(l/2*-1," -256)")};return{outer:c,inner:b,path:w}}function x4(e){var t=e.transform,i=e.width,l=i===void 0?Cv:i,c=e.height,d=c===void 0?Cv:c,y=e.startCentered,a=y===void 0?!1:y,b="";return a&&eC?b+="translate(".concat(t.x/gl-l/2,"em, ").concat(t.y/gl-d/2,"em) "):a?b+="translate(calc(-50% + ".concat(t.x/gl,"em), calc(-50% + ").concat(t.y/gl,"em)) "):b+="translate(".concat(t.x/gl,"em, ").concat(t.y/gl,"em) "),b+="scale(".concat(t.size/gl*(t.flipX?-1:1),", ").concat(t.size/gl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var w4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function uC(){var e=tC,t=nC,i=pn.familyPrefix,l=pn.replacementClass,c=w4;if(i!==e||l!==t){var d=new RegExp("\\.".concat(e,"\\-"),"g"),y=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");c=c.replace(d,".".concat(i,"-")).replace(y,"--".concat(i,"-")).replace(a,".".concat(l))}return c}var t2=!1;function t0(){pn.autoAddCss&&!t2&&(g4(uC()),t2=!0)}var b4={mixout:function(){return{dom:{css:uC,insertCss:t0}}},hooks:function(){return{beforeDOMElementCreation:function(){t0()},beforeI2svg:function(){t0()}}}},ja=jl||{};ja[Fa]||(ja[Fa]={});ja[Fa].styles||(ja[Fa].styles={});ja[Fa].hooks||(ja[Fa].hooks={});ja[Fa].shims||(ja[Fa].shims=[]);var Es=ja[Fa],cC=[],E4=function e(){pr.removeEventListener("DOMContentLoaded",e),Mm=1,cC.map(function(t){return t()})},Mm=!1;Ua&&(Mm=(pr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(pr.readyState),Mm||pr.addEventListener("DOMContentLoaded",E4));function S4(e){Ua&&(Mm?setTimeout(e,0):cC.push(e))}function Ed(e){var t=e.tag,i=e.attributes,l=i===void 0?{}:i,c=e.children,d=c===void 0?[]:c;return typeof e=="string"?lC(e):"<".concat(t," ").concat(v4(l),">").concat(d.map(Ed).join(""),"</").concat(t,">")}function n2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var T4=function(t,i){return function(l,c,d,y){return t.call(i,l,c,d,y)}},n0=function(t,i,l,c){var d=Object.keys(t),y=d.length,a=c!==void 0?T4(i,c):i,b,w,C;for(l===void 0?(b=1,C=t[d[0]]):(b=0,C=l);b<y;b++)w=d[b],C=a(C,t[w],w,t);return C};function C4(e){for(var t=[],i=0,l=e.length;i<l;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<l){var d=e.charCodeAt(i++);(d&64512)==56320?t.push(((c&1023)<<10)+(d&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function Iv(e){var t=C4(e);return t.length===1?t[0].toString(16):null}function A4(e,t){var i=e.length,l=e.charCodeAt(t),c;return l>=55296&&l<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(l-55296)*1024+c-56320+65536:l}function r2(e){return Object.keys(e).reduce(function(t,i){var l=e[i],c=!!l.icon;return c?t[l.iconName]=l.icon:t[i]=l,t},{})}function Pv(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.skipHooks,c=l===void 0?!1:l,d=r2(t);typeof Es.hooks.addPack=="function"&&!c?Es.hooks.addPack(e,r2(t)):Es.styles[e]=Kt(Kt({},Es.styles[e]||{}),d),e==="fas"&&Pv("fa",t)}var $f=Es.styles,I4=Es.shims,P4=Object.values(iC),x1=null,hC={},fC={},dC={},pC={},mC={},M4=Object.keys(y1);function k4(e){return~c4.indexOf(e)}function z4(e,t){var i=t.split("-"),l=i[0],c=i.slice(1).join("-");return l===e&&c!==""&&!k4(c)?c:null}var gC=function(){var t=function(d){return n0($f,function(y,a,b){return y[b]=n0(a,d,{}),y},{})};hC=t(function(c,d,y){if(d[3]&&(c[d[3]]=y),d[2]){var a=d[2].filter(function(b){return typeof b=="number"});a.forEach(function(b){c[b.toString(16)]=y})}return c}),fC=t(function(c,d,y){if(c[y]=y,d[2]){var a=d[2].filter(function(b){return typeof b=="string"});a.forEach(function(b){c[b]=y})}return c}),mC=t(function(c,d,y){var a=d[2];return c[y]=y,a.forEach(function(b){c[b]=y}),c});var i="far"in $f||pn.autoFetchSvg,l=n0(I4,function(c,d){var y=d[0],a=d[1],b=d[2];return a==="far"&&!i&&(a="fas"),typeof y=="string"&&(c.names[y]={prefix:a,iconName:b}),typeof y=="number"&&(c.unicodes[y.toString(16)]={prefix:a,iconName:b}),c},{names:{},unicodes:{}});dC=l.names,pC=l.unicodes,x1=Sg(pn.styleDefault)};m4(function(e){x1=Sg(e.styleDefault)});gC();function w1(e,t){return(hC[e]||{})[t]}function L4(e,t){return(fC[e]||{})[t]}function Wc(e,t){return(mC[e]||{})[t]}function yC(e){return dC[e]||{prefix:null,iconName:null}}function O4(e){var t=pC[e],i=w1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function Dl(){return x1}var b1=function(){return{prefix:null,iconName:null,rest:[]}};function Sg(e){var t=y1[e],i=Pm[e]||Pm[t],l=e in Es.styles?e:null;return i||l||null}function Tg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,l=i===void 0?!1:i,c=null,d=e.reduce(function(y,a){var b=z4(pn.familyPrefix,a);if($f[a]?(a=P4.includes(a)?i4[a]:a,c=a,y.prefix=a):M4.indexOf(a)>-1?(c=a,y.prefix=Sg(a)):b?y.iconName=b:a!==pn.replacementClass&&y.rest.push(a),!l&&y.prefix&&y.iconName){var w=c==="fa"?yC(y.iconName):{},C=Wc(y.prefix,y.iconName);w.prefix&&(c=null),y.iconName=w.iconName||C||y.iconName,y.prefix=w.prefix||y.prefix,y.prefix==="far"&&!$f.far&&$f.fas&&!pn.autoFetchSvg&&(y.prefix="fas")}return y},b1());return(d.prefix==="fa"||c==="fa")&&(d.prefix=Dl()||"fas"),d}var R4=function(){function e(){Z3(this,e),this.definitions={}}return W3(e,[{key:"add",value:function(){for(var i=this,l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var y=c.reduce(this._pullDefinitions,{});Object.keys(y).forEach(function(a){i.definitions[a]=Kt(Kt({},i.definitions[a]||{}),y[a]),Pv(a,y[a]);var b=iC[a];b&&Pv(b,y[a]),gC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,l){var c=l.prefix&&l.iconName&&l.icon?{0:l}:l;return Object.keys(c).map(function(d){var y=c[d],a=y.prefix,b=y.iconName,w=y.icon,C=w[2];i[a]||(i[a]={}),C.length>0&&C.forEach(function(E){typeof E=="string"&&(i[a][E]=w)}),i[a][b]=w}),i}}]),e}(),i2=[],Hc={},rh={},F4=Object.keys(rh);function j4(e,t){var i=t.mixoutsTo;return i2=e,Hc={},Object.keys(rh).forEach(function(l){F4.indexOf(l)===-1&&delete rh[l]}),i2.forEach(function(l){var c=l.mixout?l.mixout():{};if(Object.keys(c).forEach(function(y){typeof c[y]=="function"&&(i[y]=c[y]),Im(c[y])==="object"&&Object.keys(c[y]).forEach(function(a){i[y]||(i[y]={}),i[y][a]=c[y][a]})}),l.hooks){var d=l.hooks();Object.keys(d).forEach(function(y){Hc[y]||(Hc[y]=[]),Hc[y].push(d[y])})}l.provides&&l.provides(rh)}),i}function Mv(e,t){for(var i=arguments.length,l=new Array(i>2?i-2:0),c=2;c<i;c++)l[c-2]=arguments[c];var d=Hc[e]||[];return d.forEach(function(y){t=y.apply(null,[t].concat(l))}),t}function Ou(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),l=1;l<t;l++)i[l-1]=arguments[l];var c=Hc[e]||[];c.forEach(function(d){d.apply(null,i)})}function Da(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return rh[e]?rh[e].apply(null,t):void 0}function kv(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||Dl();if(t)return t=Wc(i,t)||t,n2(vC.definitions,i,t)||n2(Es.styles,i,t)}var vC=new R4,D4=function(){pn.autoReplaceSvg=!1,pn.observeMutations=!1,Ou("noAuto")},B4={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ua?(Ou("beforeI2svg",t),Da("pseudoElements2svg",t),Da("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;pn.autoReplaceSvg===!1&&(pn.autoReplaceSvg=!0),pn.observeMutations=!0,S4(function(){U4({autoReplaceSvgRoot:i}),Ou("watch",t)})}},N4={icon:function(t){if(t===null)return null;if(Im(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Wc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],l=Sg(t[0]);return{prefix:l,iconName:Wc(l,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(pn.familyPrefix,"-"))>-1||t.match(o4))){var c=Tg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||Dl(),iconName:Wc(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var d=Dl();return{prefix:d,iconName:Wc(d,t)||t}}}},Fo={noAuto:D4,config:pn,dom:B4,parse:N4,library:vC,findIconDefinition:kv,toHtml:Ed},U4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,l=i===void 0?pr:i;(Object.keys(Es.styles).length>0||pn.autoFetchSvg)&&Ua&&pn.autoReplaceSvg&&Fo.dom.i2svg({node:l})};function Cg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(l){return Ed(l)})}}),Object.defineProperty(e,"node",{get:function(){if(Ua){var l=pr.createElement("div");return l.innerHTML=e.html,l.children}}}),e}function $4(e){var t=e.children,i=e.main,l=e.mask,c=e.attributes,d=e.styles,y=e.transform;if(_1(y)&&i.found&&!l.found){var a=i.width,b=i.height,w={x:a/b/2,y:.5};c.style=Eg(Kt(Kt({},d),{},{"transform-origin":"".concat(w.x+y.x/16,"em ").concat(w.y+y.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function V4(e){var t=e.prefix,i=e.iconName,l=e.children,c=e.attributes,d=e.symbol,y=d===!0?"".concat(t,"-").concat(pn.familyPrefix,"-").concat(i):d;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Kt(Kt({},c),{},{id:y}),children:l}]}]}function E1(e){var t=e.icons,i=t.main,l=t.mask,c=e.prefix,d=e.iconName,y=e.transform,a=e.symbol,b=e.title,w=e.maskId,C=e.titleId,E=e.extra,z=e.watchable,R=z===void 0?!1:z,Q=l.found?l:i,K=Q.width,pe=Q.height,G=c==="fak",$=[pn.replacementClass,d?"".concat(pn.familyPrefix,"-").concat(d):""].filter(function(Z){return E.classes.indexOf(Z)===-1}).filter(function(Z){return Z!==""||!!Z}).concat(E.classes).join(" "),B={children:[],attributes:Kt(Kt({},E.attributes),{},{"data-prefix":c,"data-icon":d,class:$,role:E.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(K," ").concat(pe)})},oe=G&&!~E.classes.indexOf("fa-fw")?{width:"".concat(K/pe*16*.0625,"em")}:{};R&&(B.attributes[Lu]=""),b&&(B.children.push({tag:"title",attributes:{id:B.attributes["aria-labelledby"]||"title-".concat(C||hd())},children:[b]}),delete B.attributes.title);var W=Kt(Kt({},B),{},{prefix:c,iconName:d,main:i,mask:l,maskId:w,transform:y,symbol:a,styles:Kt(Kt({},oe),E.styles)}),D=l.found&&i.found?Da("generateAbstractMask",W)||{children:[],attributes:{}}:Da("generateAbstractIcon",W)||{children:[],attributes:{}},S=D.children,P=D.attributes;return W.children=S,W.attributes=P,a?V4(W):$4(W)}function o2(e){var t=e.content,i=e.width,l=e.height,c=e.transform,d=e.title,y=e.extra,a=e.watchable,b=a===void 0?!1:a,w=Kt(Kt(Kt({},y.attributes),d?{title:d}:{}),{},{class:y.classes.join(" ")});b&&(w[Lu]="");var C=Kt({},y.styles);_1(c)&&(C.transform=x4({transform:c,startCentered:!0,width:i,height:l}),C["-webkit-transform"]=C.transform);var E=Eg(C);E.length>0&&(w.style=E);var z=[];return z.push({tag:"span",attributes:w,children:[t]}),d&&z.push({tag:"span",attributes:{class:"sr-only"},children:[d]}),z}function G4(e){var t=e.content,i=e.title,l=e.extra,c=Kt(Kt(Kt({},l.attributes),i?{title:i}:{}),{},{class:l.classes.join(" ")}),d=Eg(l.styles);d.length>0&&(c.style=d);var y=[];return y.push({tag:"span",attributes:c,children:[t]}),i&&y.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),y}var r0=Es.styles;function zv(e){var t=e[0],i=e[1],l=e.slice(4),c=d1(l,1),d=c[0],y=null;return Array.isArray(d)?y={tag:"g",attributes:{class:"".concat(pn.familyPrefix,"-").concat(Tu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(pn.familyPrefix,"-").concat(Tu.SECONDARY),fill:"currentColor",d:d[0]}},{tag:"path",attributes:{class:"".concat(pn.familyPrefix,"-").concat(Tu.PRIMARY),fill:"currentColor",d:d[1]}}]}:y={tag:"path",attributes:{fill:"currentColor",d}},{found:!0,width:t,height:i,icon:y}}var Z4={found:!1,width:512,height:512};function W4(e,t){!rC&&!pn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function Lv(e,t){var i=t;return t==="fa"&&pn.styleDefault!==null&&(t=Dl()),new Promise(function(l,c){if(Da("missingIconAbstract"),i==="fa"){var d=yC(e)||{};e=d.iconName||e,t=d.prefix||t}if(e&&t&&r0[t]&&r0[t][e]){var y=r0[t][e];return l(zv(y))}W4(e,t),l(Kt(Kt({},Z4),{},{icon:pn.showMissingIcons&&e?Da("missingIconAbstract")||{}:{}}))})}var s2=function(){},Ov=pn.measurePerformance&&Ep&&Ep.mark&&Ep.measure?Ep:{mark:s2,measure:s2},Sf='FA "6.0.0"',H4=function(t){return Ov.mark("".concat(Sf," ").concat(t," begins")),function(){return _C(t)}},_C=function(t){Ov.mark("".concat(Sf," ").concat(t," ends")),Ov.measure("".concat(Sf," ").concat(t),"".concat(Sf," ").concat(t," begins"),"".concat(Sf," ").concat(t," ends"))},S1={begin:H4,end:_C},Xp=function(){};function a2(e){var t=e.getAttribute?e.getAttribute(Lu):null;return typeof t=="string"}function X4(e){var t=e.getAttribute?e.getAttribute(m1):null,i=e.getAttribute?e.getAttribute(g1):null;return t&&i}function q4(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(pn.replacementClass)}function K4(){if(pn.autoReplaceSvg===!0)return qp.replace;var e=qp[pn.autoReplaceSvg];return e||qp.replace}function Y4(e){return pr.createElementNS("http://www.w3.org/2000/svg",e)}function J4(e){return pr.createElement(e)}function xC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,l=i===void 0?e.tag==="svg"?Y4:J4:i;if(typeof e=="string")return pr.createTextNode(e);var c=l(e.tag);Object.keys(e.attributes||[]).forEach(function(y){c.setAttribute(y,e.attributes[y])});var d=e.children||[];return d.forEach(function(y){c.appendChild(xC(y,{ceFn:l}))}),c}function Q4(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var qp={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(xC(c),i)}),i.getAttribute(Lu)===null&&pn.keepOriginalSource){var l=pr.createComment(Q4(i));i.parentNode.replaceChild(l,i)}else i.remove()},nest:function(t){var i=t[0],l=t[1];if(~v1(i).indexOf(pn.replacementClass))return qp.replace(t);var c=new RegExp("".concat(pn.familyPrefix,"-.*"));if(delete l[0].attributes.id,l[0].attributes.class){var d=l[0].attributes.class.split(" ").reduce(function(a,b){return b===pn.replacementClass||b.match(c)?a.toSvg.push(b):a.toNode.push(b),a},{toNode:[],toSvg:[]});l[0].attributes.class=d.toSvg.join(" "),d.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",d.toNode.join(" "))}var y=l.map(function(a){return Ed(a)}).join(`
`);i.setAttribute(Lu,""),i.innerHTML=y}};function l2(e){e()}function wC(e,t){var i=typeof t=="function"?t:Xp;if(e.length===0)i();else{var l=l2;pn.mutateApproach===n4&&(l=jl.requestAnimationFrame||l2),l(function(){var c=K4(),d=S1.begin("mutate");e.map(c),d(),i()})}}var T1=!1;function bC(){T1=!0}function Rv(){T1=!1}var km=null;function u2(e){if(Qb&&pn.observeMutations){var t=e.treeCallback,i=t===void 0?Xp:t,l=e.nodeCallback,c=l===void 0?Xp:l,d=e.pseudoElementsCallback,y=d===void 0?Xp:d,a=e.observeMutationsRoot,b=a===void 0?pr:a;km=new Qb(function(w){if(!T1){var C=Dl();bh(w).forEach(function(E){if(E.type==="childList"&&E.addedNodes.length>0&&!a2(E.addedNodes[0])&&(pn.searchPseudoElements&&y(E.target),i(E.target)),E.type==="attributes"&&E.target.parentNode&&pn.searchPseudoElements&&y(E.target.parentNode),E.type==="attributes"&&a2(E.target)&&~u4.indexOf(E.attributeName))if(E.attributeName==="class"&&X4(E.target)){var z=Tg(v1(E.target)),R=z.prefix,Q=z.iconName;E.target.setAttribute(m1,R||C),Q&&E.target.setAttribute(g1,Q)}else q4(E.target)&&c(E.target)})}}),Ua&&km.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function e5(){km&&km.disconnect()}function t5(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(l,c){var d=c.split(":"),y=d[0],a=d.slice(1);return y&&a.length>0&&(l[y]=a.join(":").trim()),l},{})),i}function n5(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),l=e.innerText!==void 0?e.innerText.trim():"",c=Tg(v1(e));return c.prefix||(c.prefix=Dl()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||c.prefix&&l.length>0&&(c.iconName=L4(c.prefix,e.innerText)||w1(c.prefix,Iv(e.innerText))),c}function r5(e){var t=bh(e.attributes).reduce(function(c,d){return c.name!=="class"&&c.name!=="style"&&(c[d.name]=d.value),c},{}),i=e.getAttribute("title"),l=e.getAttribute("data-fa-title-id");return pn.autoA11y&&(i?t["aria-labelledby"]="".concat(pn.replacementClass,"-title-").concat(l||hd()):(t["aria-hidden"]="true",t.focusable="false")),t}function i5(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Js,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function c2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=n5(e),l=i.iconName,c=i.prefix,d=i.rest,y=r5(e),a=Mv("parseNodeAttributes",{},e),b=t.styleParser?t5(e):[];return Kt({iconName:l,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:Js,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:d,styles:b,attributes:y}},a)}var o5=Es.styles;function EC(e){var t=pn.autoReplaceSvg==="nest"?c2(e,{styleParser:!1}):c2(e);return~t.extra.classes.indexOf(oC)?Da("generateLayersText",e,t):Da("generateSvgReplacementMutation",e,t)}function h2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ua)return Promise.resolve();var i=pr.documentElement.classList,l=function(E){return i.add("".concat(e2,"-").concat(E))},c=function(E){return i.remove("".concat(e2,"-").concat(E))},d=pn.autoFetchSvg?Object.keys(y1):Object.keys(o5),y=[".".concat(oC,":not([").concat(Lu,"])")].concat(d.map(function(C){return".".concat(C,":not([").concat(Lu,"])")})).join(", ");if(y.length===0)return Promise.resolve();var a=[];try{a=bh(e.querySelectorAll(y))}catch{}if(a.length>0)l("pending"),c("complete");else return Promise.resolve();var b=S1.begin("onTree"),w=a.reduce(function(C,E){try{var z=EC(E);z&&C.push(z)}catch(R){rC||R.name==="MissingIcon"&&console.error(R)}return C},[]);return new Promise(function(C,E){Promise.all(w).then(function(z){wC(z,function(){l("active"),l("complete"),c("pending"),typeof t=="function"&&t(),b(),C()})}).catch(function(z){b(),E(z)})})}function s5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;EC(e).then(function(i){i&&wC([i],t)})}function a5(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(t||{}).icon?t:kv(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:kv(c||{})),e(l,Kt(Kt({},i),{},{mask:c}))}}var l5=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.transform,c=l===void 0?Js:l,d=i.symbol,y=d===void 0?!1:d,a=i.mask,b=a===void 0?null:a,w=i.maskId,C=w===void 0?null:w,E=i.title,z=E===void 0?null:E,R=i.titleId,Q=R===void 0?null:R,K=i.classes,pe=K===void 0?[]:K,G=i.attributes,$=G===void 0?{}:G,B=i.styles,oe=B===void 0?{}:B;if(t){var W=t.prefix,D=t.iconName,S=t.icon;return Cg(Kt({type:"icon"},t),function(){return Ou("beforeDOMElementCreation",{iconDefinition:t,params:i}),pn.autoA11y&&(z?$["aria-labelledby"]="".concat(pn.replacementClass,"-title-").concat(Q||hd()):($["aria-hidden"]="true",$.focusable="false")),E1({icons:{main:zv(S),mask:b?zv(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:W,iconName:D,transform:Kt(Kt({},Js),c),symbol:y,title:z,maskId:C,titleId:Q,extra:{attributes:$,styles:oe,classes:pe}})})}},u5={mixout:function(){return{icon:a5(l5)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=h2,i.nodeCallback=s5,i}}},provides:function(t){t.i2svg=function(i){var l=i.node,c=l===void 0?pr:l,d=i.callback,y=d===void 0?function(){}:d;return h2(c,y)},t.generateSvgReplacementMutation=function(i,l){var c=l.iconName,d=l.title,y=l.titleId,a=l.prefix,b=l.transform,w=l.symbol,C=l.mask,E=l.maskId,z=l.extra;return new Promise(function(R,Q){Promise.all([Lv(c,a),C.iconName?Lv(C.iconName,C.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(K){var pe=d1(K,2),G=pe[0],$=pe[1];R([i,E1({icons:{main:G,mask:$},prefix:a,iconName:c,transform:b,symbol:w,maskId:E,title:d,titleId:y,extra:z,watchable:!0})])}).catch(Q)})},t.generateAbstractIcon=function(i){var l=i.children,c=i.attributes,d=i.main,y=i.transform,a=i.styles,b=Eg(a);b.length>0&&(c.style=b);var w;return _1(y)&&(w=Da("generateAbstractTransformGrouping",{main:d,transform:y,containerWidth:d.width,iconWidth:d.width})),l.push(w||d.icon),{children:l,attributes:c}}}},c5={mixout:function(){return{layer:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.classes,d=c===void 0?[]:c;return Cg({type:"layer"},function(){Ou("beforeDOMElementCreation",{assembler:i,params:l});var y=[];return i(function(a){Array.isArray(a)?a.map(function(b){y=y.concat(b.abstract)}):y=y.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(pn.familyPrefix,"-layers")].concat(bg(d)).join(" ")},children:y}]})}}}},h5={mixout:function(){return{counter:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.title,d=c===void 0?null:c,y=l.classes,a=y===void 0?[]:y,b=l.attributes,w=b===void 0?{}:b,C=l.styles,E=C===void 0?{}:C;return Cg({type:"counter",content:i},function(){return Ou("beforeDOMElementCreation",{content:i,params:l}),G4({content:i.toString(),title:d,extra:{attributes:w,styles:E,classes:["".concat(pn.familyPrefix,"-layers-counter")].concat(bg(a))}})})}}}},f5={mixout:function(){return{text:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.transform,d=c===void 0?Js:c,y=l.title,a=y===void 0?null:y,b=l.classes,w=b===void 0?[]:b,C=l.attributes,E=C===void 0?{}:C,z=l.styles,R=z===void 0?{}:z;return Cg({type:"text",content:i},function(){return Ou("beforeDOMElementCreation",{content:i,params:l}),o2({content:i,transform:Kt(Kt({},Js),d),title:a,extra:{attributes:E,styles:R,classes:["".concat(pn.familyPrefix,"-layers-text")].concat(bg(w))}})})}}},provides:function(t){t.generateLayersText=function(i,l){var c=l.title,d=l.transform,y=l.extra,a=null,b=null;if(eC){var w=parseInt(getComputedStyle(i).fontSize,10),C=i.getBoundingClientRect();a=C.width/w,b=C.height/w}return pn.autoA11y&&!c&&(y.attributes["aria-hidden"]="true"),Promise.resolve([i,o2({content:i.innerHTML,width:a,height:b,transform:d,title:c,extra:y,watchable:!0})])}}},d5=new RegExp('"',"ug"),f2=[1105920,1112319];function p5(e){var t=e.replace(d5,""),i=A4(t,0),l=i>=f2[0]&&i<=f2[1],c=t.length===2?t[0]===t[1]:!1;return{value:Iv(c?t[0]:t),isSecondary:l||c}}function d2(e,t){var i="".concat(t4).concat(t.replace(":","-"));return new Promise(function(l,c){if(e.getAttribute(i)!==null)return l();var d=bh(e.children),y=d.filter(function(D){return D.getAttribute(Av)===t})[0],a=jl.getComputedStyle(e,t),b=a.getPropertyValue("font-family").match(s4),w=a.getPropertyValue("font-weight"),C=a.getPropertyValue("content");if(y&&!b)return e.removeChild(y),l();if(b&&C!=="none"&&C!==""){var E=a.getPropertyValue("content"),z=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Pm[b[2].toLowerCase()]:a4[w],R=p5(E),Q=R.value,K=R.isSecondary,pe=b[0].startsWith("FontAwesome"),G=w1(z,Q),$=G;if(pe){var B=O4(Q);B.iconName&&B.prefix&&(G=B.iconName,z=B.prefix)}if(G&&!K&&(!y||y.getAttribute(m1)!==z||y.getAttribute(g1)!==$)){e.setAttribute(i,$),y&&e.removeChild(y);var oe=i5(),W=oe.extra;W.attributes[Av]=t,Lv(G,z).then(function(D){var S=E1(Kt(Kt({},oe),{},{icons:{main:D,mask:b1()},prefix:z,iconName:$,extra:W,watchable:!0})),P=pr.createElement("svg");t==="::before"?e.insertBefore(P,e.firstChild):e.appendChild(P),P.outerHTML=S.map(function(Z){return Ed(Z)}).join(`
`),e.removeAttribute(i),l()}).catch(c)}else l()}else l()})}function m5(e){return Promise.all([d2(e,"::before"),d2(e,"::after")])}function g5(e){return e.parentNode!==document.head&&!~r4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Av)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function p2(e){if(Ua)return new Promise(function(t,i){var l=bh(e.querySelectorAll("*")).filter(g5).map(m5),c=S1.begin("searchPseudoElements");bC(),Promise.all(l).then(function(){c(),Rv(),t()}).catch(function(){c(),Rv(),i()})})}var y5={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=p2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var l=i.node,c=l===void 0?pr:l;pn.searchPseudoElements&&p2(c)}}},m2=!1,v5={mixout:function(){return{dom:{unwatch:function(){bC(),m2=!0}}}},hooks:function(){return{bootstrap:function(){u2(Mv("mutationObserverCallbacks",{}))},noAuto:function(){e5()},watch:function(i){var l=i.observeMutationsRoot;m2?Rv():u2(Mv("mutationObserverCallbacks",{observeMutationsRoot:l}))}}}},g2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(l,c){var d=c.toLowerCase().split("-"),y=d[0],a=d.slice(1).join("-");if(y&&a==="h")return l.flipX=!0,l;if(y&&a==="v")return l.flipY=!0,l;if(a=parseFloat(a),isNaN(a))return l;switch(y){case"grow":l.size=l.size+a;break;case"shrink":l.size=l.size-a;break;case"left":l.x=l.x-a;break;case"right":l.x=l.x+a;break;case"up":l.y=l.y-a;break;case"down":l.y=l.y+a;break;case"rotate":l.rotate=l.rotate+a;break}return l},i)},_5={mixout:function(){return{parse:{transform:function(i){return g2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,l){var c=l.getAttribute("data-fa-transform");return c&&(i.transform=g2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var l=i.main,c=i.transform,d=i.containerWidth,y=i.iconWidth,a={transform:"translate(".concat(d/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),C="rotate(".concat(c.rotate," 0 0)"),E={transform:"".concat(b," ").concat(w," ").concat(C)},z={transform:"translate(".concat(y/2*-1," -256)")},R={outer:a,inner:E,path:z};return{tag:"g",attributes:Kt({},R.outer),children:[{tag:"g",attributes:Kt({},R.inner),children:[{tag:l.icon.tag,children:l.icon.children,attributes:Kt(Kt({},l.icon.attributes),R.path)}]}]}}}},i0={x:0,y:0,width:"100%",height:"100%"};function y2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function x5(e){return e.tag==="g"?e.children:[e]}var w5={hooks:function(){return{parseNodeAttributes:function(i,l){var c=l.getAttribute("data-fa-mask"),d=c?Tg(c.split(" ").map(function(y){return y.trim()})):b1();return d.prefix||(d.prefix=Dl()),i.mask=d,i.maskId=l.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var l=i.children,c=i.attributes,d=i.main,y=i.mask,a=i.maskId,b=i.transform,w=d.width,C=d.icon,E=y.width,z=y.icon,R=_4({transform:b,containerWidth:E,iconWidth:w}),Q={tag:"rect",attributes:Kt(Kt({},i0),{},{fill:"white"})},K=C.children?{children:C.children.map(y2)}:{},pe={tag:"g",attributes:Kt({},R.inner),children:[y2(Kt({tag:C.tag,attributes:Kt(Kt({},C.attributes),R.path)},K))]},G={tag:"g",attributes:Kt({},R.outer),children:[pe]},$="mask-".concat(a||hd()),B="clip-".concat(a||hd()),oe={tag:"mask",attributes:Kt(Kt({},i0),{},{id:$,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Q,G]},W={tag:"defs",children:[{tag:"clipPath",attributes:{id:B},children:x5(z)},oe]};return l.push(W,{tag:"rect",attributes:Kt({fill:"currentColor","clip-path":"url(#".concat(B,")"),mask:"url(#".concat($,")")},i0)}),{children:l,attributes:c}}}},b5={provides:function(t){var i=!1;jl.matchMedia&&(i=jl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var l=[],c={fill:"currentColor"},d={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};l.push({tag:"path",attributes:Kt(Kt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var y=Kt(Kt({},d),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Kt(Kt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||a.children.push({tag:"animate",attributes:Kt(Kt({},d),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Kt(Kt({},y),{},{values:"1;0;1;1;0;1;"})}),l.push(a),l.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Kt(Kt({},y),{},{values:"1;0;0;0;0;1;"})}]}),i||l.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Kt(Kt({},y),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:l}}}},E5={hooks:function(){return{parseNodeAttributes:function(i,l){var c=l.getAttribute("data-fa-symbol"),d=c===null?!1:c===""?!0:c;return i.symbol=d,i}}}},S5=[b4,u5,c5,h5,f5,y5,v5,_5,w5,b5,E5];j4(S5,{mixoutsTo:Fo});Fo.noAuto;Fo.config;Fo.library;Fo.dom;var Fv=Fo.parse;Fo.findIconDefinition;Fo.toHtml;var T5=Fo.icon;Fo.layer;Fo.text;Fo.counter;var SC={exports:{}},C5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",A5=C5,I5=A5;function TC(){}function CC(){}CC.resetWarningCache=TC;var P5=function(){function e(l,c,d,y,a,b){if(b!==I5){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:CC,resetWarningCache:TC};return i.PropTypes=i,i};SC.exports=P5();var M5=SC.exports;const Xn=gd(M5);function v2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,l)}return i}function Cl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?v2(Object(i),!0).forEach(function(l){Xc(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v2(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function zm(e){return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function Xc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function k5(e,t){if(e==null)return{};var i={},l=Object.keys(e),c,d;for(d=0;d<l.length;d++)c=l[d],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function AC(e,t){if(e==null)return{};var i=k5(e,t),l,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)l=d[c],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(i[l]=e[l])}return i}function jv(e){return z5(e)||L5(e)||O5(e)||R5()}function z5(e){if(Array.isArray(e))return Dv(e)}function L5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function O5(e,t){if(e){if(typeof e=="string")return Dv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Dv(e,t)}}function Dv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,l=new Array(t);i<t;i++)l[i]=e[i];return l}function R5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F5(e){var t,i=e.beat,l=e.fade,c=e.flash,d=e.spin,y=e.spinPulse,a=e.spinReverse,b=e.pulse,w=e.fixedWidth,C=e.inverse,E=e.border,z=e.listItem,R=e.flip,Q=e.size,K=e.rotation,pe=e.pull,G=(t={"fa-beat":i,"fa-fade":l,"fa-flash":c,"fa-spin":d,"fa-spin-reverse":a,"fa-spin-pulse":y,"fa-pulse":b,"fa-fw":w,"fa-inverse":C,"fa-border":E,"fa-li":z,"fa-flip-horizontal":R==="horizontal"||R==="both","fa-flip-vertical":R==="vertical"||R==="both"},Xc(t,"fa-".concat(Q),typeof Q<"u"&&Q!==null),Xc(t,"fa-rotate-".concat(K),typeof K<"u"&&K!==null&&K!==0),Xc(t,"fa-pull-".concat(pe),typeof pe<"u"&&pe!==null),Xc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(G).map(function($){return G[$]?$:null}).filter(function($){return $})}function j5(e){return e=e-0,e===e}function IC(e){return j5(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var D5=["style"];function B5(e){return e.charAt(0).toUpperCase()+e.slice(1)}function N5(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var l=i.indexOf(":"),c=IC(i.slice(0,l)),d=i.slice(l+1).trim();return c.startsWith("webkit")?t[B5(c)]=d:t[c]=d,t},{})}function PC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var l=(t.children||[]).map(function(b){return PC(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,w){var C=t.attributes[w];switch(w){case"class":b.attrs.className=C,delete t.attributes.class;break;case"style":b.attrs.style=N5(C);break;default:w.indexOf("aria-")===0||w.indexOf("data-")===0?b.attrs[w.toLowerCase()]=C:b.attrs[IC(w)]=C}return b},{attrs:{}}),d=i.style,y=d===void 0?{}:d,a=AC(i,D5);return c.attrs.style=Cl(Cl({},c.attrs.style),y),e.apply(void 0,[t.tag,Cl(Cl({},c.attrs),a)].concat(jv(l)))}var MC=!1;try{MC=!0}catch{}function U5(){if(!MC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function _2(e){if(e&&zm(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(Fv.icon)return Fv.icon(e);if(e===null)return null;if(e&&zm(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function o0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Xc({},e,t):{}}var $5=["forwardedRef"];function ta(e){var t=e.forwardedRef,i=AC(e,$5),l=i.icon,c=i.mask,d=i.symbol,y=i.className,a=i.title,b=i.titleId,w=_2(l),C=o0("classes",[].concat(jv(F5(i)),jv(y.split(" ")))),E=o0("transform",typeof i.transform=="string"?Fv.transform(i.transform):i.transform),z=o0("mask",_2(c)),R=T5(w,Cl(Cl(Cl(Cl({},C),E),z),{},{symbol:d,title:a,titleId:b}));if(!R)return U5("Could not find icon",w),null;var Q=R.abstract,K={ref:t};return Object.keys(i).forEach(function(pe){ta.defaultProps.hasOwnProperty(pe)||(K[pe]=i[pe])}),V5(Q[0],K)}ta.displayName="FontAwesomeIcon";ta.propTypes={beat:Xn.bool,border:Xn.bool,className:Xn.string,fade:Xn.bool,flash:Xn.bool,mask:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),fixedWidth:Xn.bool,inverse:Xn.bool,flip:Xn.oneOf(["horizontal","vertical","both"]),icon:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),listItem:Xn.bool,pull:Xn.oneOf(["right","left"]),pulse:Xn.bool,rotation:Xn.oneOf([0,90,180,270]),size:Xn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Xn.bool,spinPulse:Xn.bool,spinReverse:Xn.bool,symbol:Xn.oneOfType([Xn.bool,Xn.string]),title:Xn.string,transform:Xn.oneOfType([Xn.string,Xn.object]),swapOpacity:Xn.bool};ta.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var V5=PC.bind(null,DE.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var G5={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},Z5=G5,Bv={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},W5={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function Sp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(l,c,d){function y(w,C){if(!c[w]){if(!l[w]){var E=typeof Sp=="function"&&Sp;if(!C&&E)return E(w,!0);if(a)return a(w,!0);var z=new Error("Cannot find module '"+w+"'");throw z.code="MODULE_NOT_FOUND",z}var R=c[w]={exports:{}};l[w][0].call(R.exports,function(Q){var K=l[w][1][Q];return y(K||Q)},R,R.exports,i,l,c,d)}return c[w].exports}for(var a=typeof Sp=="function"&&Sp,b=0;b<d.length;b++)y(d[b]);return y}return i}()({1:[function(i,l,c){c.byteLength=z,c.toByteArray=Q,c.fromByteArray=G;for(var d=[],y=[],a=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,C=b.length;w<C;++w)d[w]=b[w],y[b.charCodeAt(w)]=w;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63;function E($){var B=$.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=$.indexOf("=");oe===-1&&(oe=B);var W=oe===B?0:4-oe%4;return[oe,W]}function z($){var B=E($),oe=B[0],W=B[1];return(oe+W)*3/4-W}function R($,B,oe){return(B+oe)*3/4-oe}function Q($){var B,oe=E($),W=oe[0],D=oe[1],S=new a(R($,W,D)),P=0,Z=D>0?W-4:W,J;for(J=0;J<Z;J+=4)B=y[$.charCodeAt(J)]<<18|y[$.charCodeAt(J+1)]<<12|y[$.charCodeAt(J+2)]<<6|y[$.charCodeAt(J+3)],S[P++]=B>>16&255,S[P++]=B>>8&255,S[P++]=B&255;return D===2&&(B=y[$.charCodeAt(J)]<<2|y[$.charCodeAt(J+1)]>>4,S[P++]=B&255),D===1&&(B=y[$.charCodeAt(J)]<<10|y[$.charCodeAt(J+1)]<<4|y[$.charCodeAt(J+2)]>>2,S[P++]=B>>8&255,S[P++]=B&255),S}function K($){return d[$>>18&63]+d[$>>12&63]+d[$>>6&63]+d[$&63]}function pe($,B,oe){for(var W,D=[],S=B;S<oe;S+=3)W=($[S]<<16&16711680)+($[S+1]<<8&65280)+($[S+2]&255),D.push(K(W));return D.join("")}function G($){for(var B,oe=$.length,W=oe%3,D=[],S=16383,P=0,Z=oe-W;P<Z;P+=S)D.push(pe($,P,P+S>Z?Z:P+S));return W===1?(B=$[oe-1],D.push(d[B>>2]+d[B<<4&63]+"==")):W===2&&(B=($[oe-2]<<8)+$[oe-1],D.push(d[B>>10]+d[B>>4&63]+d[B<<2&63]+"=")),D.join("")}},{}],2:[function(i,l,c){(function(d){(function(){var y=i("base64-js"),a=i("ieee754");c.Buffer=E,c.SlowBuffer=W,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,E.TYPED_ARRAY_SUPPORT=w(),!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var Te=new Uint8Array(1);return Te.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Te.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function C(Te){if(Te>b)throw new RangeError('The value "'+Te+'" is invalid for option "size"');var F=new Uint8Array(Te);return F.__proto__=E.prototype,F}function E(Te,F,O){if(typeof Te=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return K(Te)}return z(Te,F,O)}typeof Symbol<"u"&&Symbol.species!=null&&E[Symbol.species]===E&&Object.defineProperty(E,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),E.poolSize=8192;function z(Te,F,O){if(typeof Te=="string")return pe(Te,F);if(ArrayBuffer.isView(Te))return G(Te);if(Te==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Te);if(Rt(Te,ArrayBuffer)||Te&&Rt(Te.buffer,ArrayBuffer))return $(Te,F,O);if(typeof Te=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=Te.valueOf&&Te.valueOf();if(ye!=null&&ye!==Te)return E.from(ye,F,O);var We=B(Te);if(We)return We;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Te[Symbol.toPrimitive]=="function")return E.from(Te[Symbol.toPrimitive]("string"),F,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Te)}E.from=function(Te,F,O){return z(Te,F,O)},E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array;function R(Te){if(typeof Te!="number")throw new TypeError('"size" argument must be of type number');if(Te<0)throw new RangeError('The value "'+Te+'" is invalid for option "size"')}function Q(Te,F,O){return R(Te),Te<=0?C(Te):F!==void 0?typeof O=="string"?C(Te).fill(F,O):C(Te).fill(F):C(Te)}E.alloc=function(Te,F,O){return Q(Te,F,O)};function K(Te){return R(Te),C(Te<0?0:oe(Te)|0)}E.allocUnsafe=function(Te){return K(Te)},E.allocUnsafeSlow=function(Te){return K(Te)};function pe(Te,F){if((typeof F!="string"||F==="")&&(F="utf8"),!E.isEncoding(F))throw new TypeError("Unknown encoding: "+F);var O=D(Te,F)|0,ye=C(O),We=ye.write(Te,F);return We!==O&&(ye=ye.slice(0,We)),ye}function G(Te){for(var F=Te.length<0?0:oe(Te.length)|0,O=C(F),ye=0;ye<F;ye+=1)O[ye]=Te[ye]&255;return O}function $(Te,F,O){if(F<0||Te.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(Te.byteLength<F+(O||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return F===void 0&&O===void 0?ye=new Uint8Array(Te):O===void 0?ye=new Uint8Array(Te,F):ye=new Uint8Array(Te,F,O),ye.__proto__=E.prototype,ye}function B(Te){if(E.isBuffer(Te)){var F=oe(Te.length)|0,O=C(F);return O.length===0||Te.copy(O,0,0,F),O}if(Te.length!==void 0)return typeof Te.length!="number"||vn(Te.length)?C(0):G(Te);if(Te.type==="Buffer"&&Array.isArray(Te.data))return G(Te.data)}function oe(Te){if(Te>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return Te|0}function W(Te){return+Te!=Te&&(Te=0),E.alloc(+Te)}E.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==E.prototype},E.compare=function(F,O){if(Rt(F,Uint8Array)&&(F=E.from(F,F.offset,F.byteLength)),Rt(O,Uint8Array)&&(O=E.from(O,O.offset,O.byteLength)),!E.isBuffer(F)||!E.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===O)return 0;for(var ye=F.length,We=O.length,tt=0,Ge=Math.min(ye,We);tt<Ge;++tt)if(F[tt]!==O[tt]){ye=F[tt],We=O[tt];break}return ye<We?-1:We<ye?1:0},E.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(F,O){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return E.alloc(0);var ye;if(O===void 0)for(O=0,ye=0;ye<F.length;++ye)O+=F[ye].length;var We=E.allocUnsafe(O),tt=0;for(ye=0;ye<F.length;++ye){var Ge=F[ye];if(Rt(Ge,Uint8Array)&&(Ge=E.from(Ge)),!E.isBuffer(Ge))throw new TypeError('"list" argument must be an Array of Buffers');Ge.copy(We,tt),tt+=Ge.length}return We};function D(Te,F){if(E.isBuffer(Te))return Te.length;if(ArrayBuffer.isView(Te)||Rt(Te,ArrayBuffer))return Te.byteLength;if(typeof Te!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Te);var O=Te.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&O===0)return 0;for(var We=!1;;)switch(F){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return $t(Te).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return En(Te).length;default:if(We)return ye?-1:$t(Te).length;F=(""+F).toLowerCase(),We=!0}}E.byteLength=D;function S(Te,F,O){var ye=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,F>>>=0,O<=F))return"";for(Te||(Te="utf8");;)switch(Te){case"hex":return Ie(this,F,O);case"utf8":case"utf-8":return re(this,F,O);case"ascii":return be(this,F,O);case"latin1":case"binary":return Be(this,F,O);case"base64":return ne(this,F,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,F,O);default:if(ye)throw new TypeError("Unknown encoding: "+Te);Te=(Te+"").toLowerCase(),ye=!0}}E.prototype._isBuffer=!0;function P(Te,F,O){var ye=Te[F];Te[F]=Te[O],Te[O]=ye}E.prototype.swap16=function(){var F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<F;O+=2)P(this,O,O+1);return this},E.prototype.swap32=function(){var F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<F;O+=4)P(this,O,O+3),P(this,O+1,O+2);return this},E.prototype.swap64=function(){var F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<F;O+=8)P(this,O,O+7),P(this,O+1,O+6),P(this,O+2,O+5),P(this,O+3,O+4);return this},E.prototype.toString=function(){var F=this.length;return F===0?"":arguments.length===0?re(this,0,F):S.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(F){if(!E.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:E.compare(this,F)===0},E.prototype.inspect=function(){var F="",O=c.INSPECT_MAX_BYTES;return F=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(F+=" ... "),"<Buffer "+F+">"},E.prototype.compare=function(F,O,ye,We,tt){if(Rt(F,Uint8Array)&&(F=E.from(F,F.offset,F.byteLength)),!E.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(O===void 0&&(O=0),ye===void 0&&(ye=F?F.length:0),We===void 0&&(We=0),tt===void 0&&(tt=this.length),O<0||ye>F.length||We<0||tt>this.length)throw new RangeError("out of range index");if(We>=tt&&O>=ye)return 0;if(We>=tt)return-1;if(O>=ye)return 1;if(O>>>=0,ye>>>=0,We>>>=0,tt>>>=0,this===F)return 0;for(var Ge=tt-We,ae=ye-O,L=Math.min(Ge,ae),j=this.slice(We,tt),Ee=F.slice(O,ye),Se=0;Se<L;++Se)if(j[Se]!==Ee[Se]){Ge=j[Se],ae=Ee[Se];break}return Ge<ae?-1:ae<Ge?1:0};function Z(Te,F,O,ye,We){if(Te.length===0)return-1;if(typeof O=="string"?(ye=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,vn(O)&&(O=We?0:Te.length-1),O<0&&(O=Te.length+O),O>=Te.length){if(We)return-1;O=Te.length-1}else if(O<0)if(We)O=0;else return-1;if(typeof F=="string"&&(F=E.from(F,ye)),E.isBuffer(F))return F.length===0?-1:J(Te,F,O,ye,We);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?We?Uint8Array.prototype.indexOf.call(Te,F,O):Uint8Array.prototype.lastIndexOf.call(Te,F,O):J(Te,[F],O,ye,We);throw new TypeError("val must be string, number or Buffer")}function J(Te,F,O,ye,We){var tt=1,Ge=Te.length,ae=F.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(Te.length<2||F.length<2)return-1;tt=2,Ge/=2,ae/=2,O/=2}function L(Qe,Gt){return tt===1?Qe[Gt]:Qe.readUInt16BE(Gt*tt)}var j;if(We){var Ee=-1;for(j=O;j<Ge;j++)if(L(Te,j)===L(F,Ee===-1?0:j-Ee)){if(Ee===-1&&(Ee=j),j-Ee+1===ae)return Ee*tt}else Ee!==-1&&(j-=j-Ee),Ee=-1}else for(O+ae>Ge&&(O=Ge-ae),j=O;j>=0;j--){for(var Se=!0,Ke=0;Ke<ae;Ke++)if(L(Te,j+Ke)!==L(F,Ke)){Se=!1;break}if(Se)return j}return-1}E.prototype.includes=function(F,O,ye){return this.indexOf(F,O,ye)!==-1},E.prototype.indexOf=function(F,O,ye){return Z(this,F,O,ye,!0)},E.prototype.lastIndexOf=function(F,O,ye){return Z(this,F,O,ye,!1)};function H(Te,F,O,ye){O=Number(O)||0;var We=Te.length-O;ye?(ye=Number(ye),ye>We&&(ye=We)):ye=We;var tt=F.length;ye>tt/2&&(ye=tt/2);for(var Ge=0;Ge<ye;++Ge){var ae=parseInt(F.substr(Ge*2,2),16);if(vn(ae))return Ge;Te[O+Ge]=ae}return Ge}function ve(Te,F,O,ye){return Ht($t(F,Te.length-O),Te,O,ye)}function _e(Te,F,O,ye){return Ht(Ye(F),Te,O,ye)}function xe(Te,F,O,ye){return _e(Te,F,O,ye)}function te(Te,F,O,ye){return Ht(En(F),Te,O,ye)}function le(Te,F,O,ye){return Ht(sn(F,Te.length-O),Te,O,ye)}E.prototype.write=function(F,O,ye,We){if(O===void 0)We="utf8",ye=this.length,O=0;else if(ye===void 0&&typeof O=="string")We=O,ye=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(ye)?(ye=ye>>>0,We===void 0&&(We="utf8")):(We=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-O;if((ye===void 0||ye>tt)&&(ye=tt),F.length>0&&(ye<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");for(var Ge=!1;;)switch(We){case"hex":return H(this,F,O,ye);case"utf8":case"utf-8":return ve(this,F,O,ye);case"ascii":return _e(this,F,O,ye);case"latin1":case"binary":return xe(this,F,O,ye);case"base64":return te(this,F,O,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,F,O,ye);default:if(Ge)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Ge=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(Te,F,O){return F===0&&O===Te.length?y.fromByteArray(Te):y.fromByteArray(Te.slice(F,O))}function re(Te,F,O){O=Math.min(Te.length,O);for(var ye=[],We=F;We<O;){var tt=Te[We],Ge=null,ae=tt>239?4:tt>223?3:tt>191?2:1;if(We+ae<=O){var L,j,Ee,Se;switch(ae){case 1:tt<128&&(Ge=tt);break;case 2:L=Te[We+1],(L&192)===128&&(Se=(tt&31)<<6|L&63,Se>127&&(Ge=Se));break;case 3:L=Te[We+1],j=Te[We+2],(L&192)===128&&(j&192)===128&&(Se=(tt&15)<<12|(L&63)<<6|j&63,Se>2047&&(Se<55296||Se>57343)&&(Ge=Se));break;case 4:L=Te[We+1],j=Te[We+2],Ee=Te[We+3],(L&192)===128&&(j&192)===128&&(Ee&192)===128&&(Se=(tt&15)<<18|(L&63)<<12|(j&63)<<6|Ee&63,Se>65535&&Se<1114112&&(Ge=Se))}}Ge===null?(Ge=65533,ae=1):Ge>65535&&(Ge-=65536,ye.push(Ge>>>10&1023|55296),Ge=56320|Ge&1023),ye.push(Ge),We+=ae}return we(ye)}var me=4096;function we(Te){var F=Te.length;if(F<=me)return String.fromCharCode.apply(String,Te);for(var O="",ye=0;ye<F;)O+=String.fromCharCode.apply(String,Te.slice(ye,ye+=me));return O}function be(Te,F,O){var ye="";O=Math.min(Te.length,O);for(var We=F;We<O;++We)ye+=String.fromCharCode(Te[We]&127);return ye}function Be(Te,F,O){var ye="";O=Math.min(Te.length,O);for(var We=F;We<O;++We)ye+=String.fromCharCode(Te[We]);return ye}function Ie(Te,F,O){var ye=Te.length;(!F||F<0)&&(F=0),(!O||O<0||O>ye)&&(O=ye);for(var We="",tt=F;tt<O;++tt)We+=xt(Te[tt]);return We}function Oe(Te,F,O){for(var ye=Te.slice(F,O),We="",tt=0;tt<ye.length;tt+=2)We+=String.fromCharCode(ye[tt]+ye[tt+1]*256);return We}E.prototype.slice=function(F,O){var ye=this.length;F=~~F,O=O===void 0?ye:~~O,F<0?(F+=ye,F<0&&(F=0)):F>ye&&(F=ye),O<0?(O+=ye,O<0&&(O=0)):O>ye&&(O=ye),O<F&&(O=F);var We=this.subarray(F,O);return We.__proto__=E.prototype,We};function $e(Te,F,O){if(Te%1!==0||Te<0)throw new RangeError("offset is not uint");if(Te+F>O)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUIntLE=function(F,O,ye){F=F>>>0,O=O>>>0,ye||$e(F,O,this.length);for(var We=this[F],tt=1,Ge=0;++Ge<O&&(tt*=256);)We+=this[F+Ge]*tt;return We},E.prototype.readUIntBE=function(F,O,ye){F=F>>>0,O=O>>>0,ye||$e(F,O,this.length);for(var We=this[F+--O],tt=1;O>0&&(tt*=256);)We+=this[F+--O]*tt;return We},E.prototype.readUInt8=function(F,O){return F=F>>>0,O||$e(F,1,this.length),this[F]},E.prototype.readUInt16LE=function(F,O){return F=F>>>0,O||$e(F,2,this.length),this[F]|this[F+1]<<8},E.prototype.readUInt16BE=function(F,O){return F=F>>>0,O||$e(F,2,this.length),this[F]<<8|this[F+1]},E.prototype.readUInt32LE=function(F,O){return F=F>>>0,O||$e(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},E.prototype.readUInt32BE=function(F,O){return F=F>>>0,O||$e(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},E.prototype.readIntLE=function(F,O,ye){F=F>>>0,O=O>>>0,ye||$e(F,O,this.length);for(var We=this[F],tt=1,Ge=0;++Ge<O&&(tt*=256);)We+=this[F+Ge]*tt;return tt*=128,We>=tt&&(We-=Math.pow(2,8*O)),We},E.prototype.readIntBE=function(F,O,ye){F=F>>>0,O=O>>>0,ye||$e(F,O,this.length);for(var We=O,tt=1,Ge=this[F+--We];We>0&&(tt*=256);)Ge+=this[F+--We]*tt;return tt*=128,Ge>=tt&&(Ge-=Math.pow(2,8*O)),Ge},E.prototype.readInt8=function(F,O){return F=F>>>0,O||$e(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},E.prototype.readInt16LE=function(F,O){F=F>>>0,O||$e(F,2,this.length);var ye=this[F]|this[F+1]<<8;return ye&32768?ye|4294901760:ye},E.prototype.readInt16BE=function(F,O){F=F>>>0,O||$e(F,2,this.length);var ye=this[F+1]|this[F]<<8;return ye&32768?ye|4294901760:ye},E.prototype.readInt32LE=function(F,O){return F=F>>>0,O||$e(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},E.prototype.readInt32BE=function(F,O){return F=F>>>0,O||$e(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},E.prototype.readFloatLE=function(F,O){return F=F>>>0,O||$e(F,4,this.length),a.read(this,F,!0,23,4)},E.prototype.readFloatBE=function(F,O){return F=F>>>0,O||$e(F,4,this.length),a.read(this,F,!1,23,4)},E.prototype.readDoubleLE=function(F,O){return F=F>>>0,O||$e(F,8,this.length),a.read(this,F,!0,52,8)},E.prototype.readDoubleBE=function(F,O){return F=F>>>0,O||$e(F,8,this.length),a.read(this,F,!1,52,8)};function Ve(Te,F,O,ye,We,tt){if(!E.isBuffer(Te))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>We||F<tt)throw new RangeError('"value" argument is out of bounds');if(O+ye>Te.length)throw new RangeError("Index out of range")}E.prototype.writeUIntLE=function(F,O,ye,We){if(F=+F,O=O>>>0,ye=ye>>>0,!We){var tt=Math.pow(2,8*ye)-1;Ve(this,F,O,ye,tt,0)}var Ge=1,ae=0;for(this[O]=F&255;++ae<ye&&(Ge*=256);)this[O+ae]=F/Ge&255;return O+ye},E.prototype.writeUIntBE=function(F,O,ye,We){if(F=+F,O=O>>>0,ye=ye>>>0,!We){var tt=Math.pow(2,8*ye)-1;Ve(this,F,O,ye,tt,0)}var Ge=ye-1,ae=1;for(this[O+Ge]=F&255;--Ge>=0&&(ae*=256);)this[O+Ge]=F/ae&255;return O+ye},E.prototype.writeUInt8=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,1,255,0),this[O]=F&255,O+1},E.prototype.writeUInt16LE=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,2,65535,0),this[O]=F&255,this[O+1]=F>>>8,O+2},E.prototype.writeUInt16BE=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,2,65535,0),this[O]=F>>>8,this[O+1]=F&255,O+2},E.prototype.writeUInt32LE=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,4,4294967295,0),this[O+3]=F>>>24,this[O+2]=F>>>16,this[O+1]=F>>>8,this[O]=F&255,O+4},E.prototype.writeUInt32BE=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,4,4294967295,0),this[O]=F>>>24,this[O+1]=F>>>16,this[O+2]=F>>>8,this[O+3]=F&255,O+4},E.prototype.writeIntLE=function(F,O,ye,We){if(F=+F,O=O>>>0,!We){var tt=Math.pow(2,8*ye-1);Ve(this,F,O,ye,tt-1,-tt)}var Ge=0,ae=1,L=0;for(this[O]=F&255;++Ge<ye&&(ae*=256);)F<0&&L===0&&this[O+Ge-1]!==0&&(L=1),this[O+Ge]=(F/ae>>0)-L&255;return O+ye},E.prototype.writeIntBE=function(F,O,ye,We){if(F=+F,O=O>>>0,!We){var tt=Math.pow(2,8*ye-1);Ve(this,F,O,ye,tt-1,-tt)}var Ge=ye-1,ae=1,L=0;for(this[O+Ge]=F&255;--Ge>=0&&(ae*=256);)F<0&&L===0&&this[O+Ge+1]!==0&&(L=1),this[O+Ge]=(F/ae>>0)-L&255;return O+ye},E.prototype.writeInt8=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,1,127,-128),F<0&&(F=255+F+1),this[O]=F&255,O+1},E.prototype.writeInt16LE=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,2,32767,-32768),this[O]=F&255,this[O+1]=F>>>8,O+2},E.prototype.writeInt16BE=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,2,32767,-32768),this[O]=F>>>8,this[O+1]=F&255,O+2},E.prototype.writeInt32LE=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,4,2147483647,-2147483648),this[O]=F&255,this[O+1]=F>>>8,this[O+2]=F>>>16,this[O+3]=F>>>24,O+4},E.prototype.writeInt32BE=function(F,O,ye){return F=+F,O=O>>>0,ye||Ve(this,F,O,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[O]=F>>>24,this[O+1]=F>>>16,this[O+2]=F>>>8,this[O+3]=F&255,O+4};function ot(Te,F,O,ye,We,tt){if(O+ye>Te.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ut(Te,F,O,ye,We){return F=+F,O=O>>>0,We||ot(Te,F,O,4),a.write(Te,F,O,ye,23,4),O+4}E.prototype.writeFloatLE=function(F,O,ye){return ut(this,F,O,!0,ye)},E.prototype.writeFloatBE=function(F,O,ye){return ut(this,F,O,!1,ye)};function gt(Te,F,O,ye,We){return F=+F,O=O>>>0,We||ot(Te,F,O,8),a.write(Te,F,O,ye,52,8),O+8}E.prototype.writeDoubleLE=function(F,O,ye){return gt(this,F,O,!0,ye)},E.prototype.writeDoubleBE=function(F,O,ye){return gt(this,F,O,!1,ye)},E.prototype.copy=function(F,O,ye,We){if(!E.isBuffer(F))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!We&&We!==0&&(We=this.length),O>=F.length&&(O=F.length),O||(O=0),We>0&&We<ye&&(We=ye),We===ye||F.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),F.length-O<We-ye&&(We=F.length-O+ye);var tt=We-ye;if(this===F&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,ye,We);else if(this===F&&ye<O&&O<We)for(var Ge=tt-1;Ge>=0;--Ge)F[Ge+O]=this[Ge+ye];else Uint8Array.prototype.set.call(F,this.subarray(ye,We),O);return tt},E.prototype.fill=function(F,O,ye,We){if(typeof F=="string"){if(typeof O=="string"?(We=O,O=0,ye=this.length):typeof ye=="string"&&(We=ye,ye=this.length),We!==void 0&&typeof We!="string")throw new TypeError("encoding must be a string");if(typeof We=="string"&&!E.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(F.length===1){var tt=F.charCodeAt(0);(We==="utf8"&&tt<128||We==="latin1")&&(F=tt)}}else typeof F=="number"&&(F=F&255);if(O<0||this.length<O||this.length<ye)throw new RangeError("Out of range index");if(ye<=O)return this;O=O>>>0,ye=ye===void 0?this.length:ye>>>0,F||(F=0);var Ge;if(typeof F=="number")for(Ge=O;Ge<ye;++Ge)this[Ge]=F;else{var ae=E.isBuffer(F)?F:E.from(F,We),L=ae.length;if(L===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(Ge=0;Ge<ye-O;++Ge)this[Ge+O]=ae[Ge%L]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function ct(Te){if(Te=Te.split("=")[0],Te=Te.trim().replace(Mt,""),Te.length<2)return"";for(;Te.length%4!==0;)Te=Te+"=";return Te}function xt(Te){return Te<16?"0"+Te.toString(16):Te.toString(16)}function $t(Te,F){F=F||1/0;for(var O,ye=Te.length,We=null,tt=[],Ge=0;Ge<ye;++Ge){if(O=Te.charCodeAt(Ge),O>55295&&O<57344){if(!We){if(O>56319){(F-=3)>-1&&tt.push(239,191,189);continue}else if(Ge+1===ye){(F-=3)>-1&&tt.push(239,191,189);continue}We=O;continue}if(O<56320){(F-=3)>-1&&tt.push(239,191,189),We=O;continue}O=(We-55296<<10|O-56320)+65536}else We&&(F-=3)>-1&&tt.push(239,191,189);if(We=null,O<128){if((F-=1)<0)break;tt.push(O)}else if(O<2048){if((F-=2)<0)break;tt.push(O>>6|192,O&63|128)}else if(O<65536){if((F-=3)<0)break;tt.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((F-=4)<0)break;tt.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return tt}function Ye(Te){for(var F=[],O=0;O<Te.length;++O)F.push(Te.charCodeAt(O)&255);return F}function sn(Te,F){for(var O,ye,We,tt=[],Ge=0;Ge<Te.length&&!((F-=2)<0);++Ge)O=Te.charCodeAt(Ge),ye=O>>8,We=O%256,tt.push(We),tt.push(ye);return tt}function En(Te){return y.toByteArray(ct(Te))}function Ht(Te,F,O,ye){for(var We=0;We<ye&&!(We+O>=F.length||We>=Te.length);++We)F[We+O]=Te[We];return We}function Rt(Te,F){return Te instanceof F||Te!=null&&Te.constructor!=null&&Te.constructor.name!=null&&Te.constructor.name===F.name}function vn(Te){return Te!==Te}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,l,c){const d=i("./validator"),y=i("./xmlparser/XMLParser"),a=i("./xmlbuilder/json2xml");l.exports={XMLParser:y,XMLValidator:d,XMLBuilder:a}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,l,c){const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",y=d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",a="["+d+"]["+y+"]*",b=new RegExp("^"+a+"$"),w=function(E,z){const R=[];let Q=z.exec(E);for(;Q;){const K=[];K.startIndex=z.lastIndex-Q[0].length;const pe=Q.length;for(let G=0;G<pe;G++)K.push(Q[G]);R.push(K),Q=z.exec(E)}return R},C=function(E){const z=b.exec(E);return!(z===null||typeof z>"u")};c.isExist=function(E){return typeof E<"u"},c.isEmptyObject=function(E){return Object.keys(E).length===0},c.merge=function(E,z,R){if(z){const Q=Object.keys(z),K=Q.length;for(let pe=0;pe<K;pe++)R==="strict"?E[Q[pe]]=[z[Q[pe]]]:E[Q[pe]]=z[Q[pe]]}},c.getValue=function(E){return c.isExist(E)?E:""},c.isName=C,c.getAllMatches=w,c.nameRegexp=a},{}],5:[function(i,l,c){const d=i("./util"),y={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(D,S){S=Object.assign({},y,S);const P=[];let Z=!1,J=!1;D[0]==="\uFEFF"&&(D=D.substr(1));for(let H=0;H<D.length;H++)if(D[H]==="<"&&D[H+1]==="?"){if(H+=2,H=b(D,H),H.err)return H}else if(D[H]==="<"){let ve=H;if(H++,D[H]==="!"){H=w(D,H);continue}else{let _e=!1;D[H]==="/"&&(_e=!0,H++);let xe="";for(;H<D.length&&D[H]!==">"&&D[H]!==" "&&D[H]!=="	"&&D[H]!==`
`&&D[H]!=="\r";H++)xe+=D[H];if(xe=xe.trim(),xe[xe.length-1]==="/"&&(xe=xe.substring(0,xe.length-1),H--),!B(xe)){let ne;return xe.trim().length===0?ne="Invalid space after '<'.":ne="Tag '"+xe+"' is an invalid name.",G("InvalidTag",ne,oe(D,H))}const te=z(D,H);if(te===!1)return G("InvalidAttr","Attributes for '"+xe+"' have open quote.",oe(D,H));let le=te.value;if(H=te.index,le[le.length-1]==="/"){const ne=H-le.length;le=le.substring(0,le.length-1);const re=Q(le,S);if(re===!0)Z=!0;else return G(re.err.code,re.err.msg,oe(D,ne+re.err.line))}else if(_e)if(te.tagClosed){if(le.trim().length>0)return G("InvalidTag","Closing tag '"+xe+"' can't have attributes or invalid starting.",oe(D,ve));{const ne=P.pop();if(xe!==ne.tagName){let re=oe(D,ne.tagStartPos);return G("InvalidTag","Expected closing tag '"+ne.tagName+"' (opened in line "+re.line+", col "+re.col+") instead of closing tag '"+xe+"'.",oe(D,ve))}P.length==0&&(J=!0)}}else return G("InvalidTag","Closing tag '"+xe+"' doesn't have proper closing.",oe(D,H));else{const ne=Q(le,S);if(ne!==!0)return G(ne.err.code,ne.err.msg,oe(D,H-le.length+ne.err.line));if(J===!0)return G("InvalidXml","Multiple possible root nodes found.",oe(D,H));S.unpairedTags.indexOf(xe)!==-1||P.push({tagName:xe,tagStartPos:ve}),Z=!0}for(H++;H<D.length;H++)if(D[H]==="<")if(D[H+1]==="!"){H++,H=w(D,H);continue}else if(D[H+1]==="?"){if(H=b(D,++H),H.err)return H}else break;else if(D[H]==="&"){const ne=pe(D,H);if(ne==-1)return G("InvalidChar","char '&' is not expected.",oe(D,H));H=ne}else if(J===!0&&!a(D[H]))return G("InvalidXml","Extra text at the end",oe(D,H));D[H]==="<"&&H--}}else{if(a(D[H]))continue;return G("InvalidChar","char '"+D[H]+"' is not expected.",oe(D,H))}if(Z){if(P.length==1)return G("InvalidTag","Unclosed tag '"+P[0].tagName+"'.",oe(D,P[0].tagStartPos));if(P.length>0)return G("InvalidXml","Invalid '"+JSON.stringify(P.map(H=>H.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return G("InvalidXml","Start tag expected.",1);return!0};function a(D){return D===" "||D==="	"||D===`
`||D==="\r"}function b(D,S){const P=S;for(;S<D.length;S++)if(D[S]=="?"||D[S]==" "){const Z=D.substr(P,S-P);if(S>5&&Z==="xml")return G("InvalidXml","XML declaration allowed only at the start of the document.",oe(D,S));if(D[S]=="?"&&D[S+1]==">"){S++;break}else continue}return S}function w(D,S){if(D.length>S+5&&D[S+1]==="-"&&D[S+2]==="-"){for(S+=3;S<D.length;S++)if(D[S]==="-"&&D[S+1]==="-"&&D[S+2]===">"){S+=2;break}}else if(D.length>S+8&&D[S+1]==="D"&&D[S+2]==="O"&&D[S+3]==="C"&&D[S+4]==="T"&&D[S+5]==="Y"&&D[S+6]==="P"&&D[S+7]==="E"){let P=1;for(S+=8;S<D.length;S++)if(D[S]==="<")P++;else if(D[S]===">"&&(P--,P===0))break}else if(D.length>S+9&&D[S+1]==="["&&D[S+2]==="C"&&D[S+3]==="D"&&D[S+4]==="A"&&D[S+5]==="T"&&D[S+6]==="A"&&D[S+7]==="["){for(S+=8;S<D.length;S++)if(D[S]==="]"&&D[S+1]==="]"&&D[S+2]===">"){S+=2;break}}return S}const C='"',E="'";function z(D,S){let P="",Z="",J=!1;for(;S<D.length;S++){if(D[S]===C||D[S]===E)Z===""?Z=D[S]:Z!==D[S]||(Z="");else if(D[S]===">"&&Z===""){J=!0;break}P+=D[S]}return Z!==""?!1:{value:P,index:S,tagClosed:J}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Q(D,S){const P=d.getAllMatches(D,R),Z={};for(let J=0;J<P.length;J++){if(P[J][1].length===0)return G("InvalidAttr","Attribute '"+P[J][2]+"' has no space in starting.",W(P[J]));if(P[J][3]!==void 0&&P[J][4]===void 0)return G("InvalidAttr","Attribute '"+P[J][2]+"' is without value.",W(P[J]));if(P[J][3]===void 0&&!S.allowBooleanAttributes)return G("InvalidAttr","boolean attribute '"+P[J][2]+"' is not allowed.",W(P[J]));const H=P[J][2];if(!$(H))return G("InvalidAttr","Attribute '"+H+"' is an invalid name.",W(P[J]));if(!Z.hasOwnProperty(H))Z[H]=1;else return G("InvalidAttr","Attribute '"+H+"' is repeated.",W(P[J]))}return!0}function K(D,S){let P=/\d/;for(D[S]==="x"&&(S++,P=/[\da-fA-F]/);S<D.length;S++){if(D[S]===";")return S;if(!D[S].match(P))break}return-1}function pe(D,S){if(S++,D[S]===";")return-1;if(D[S]==="#")return S++,K(D,S);let P=0;for(;S<D.length;S++,P++)if(!(D[S].match(/\w/)&&P<20)){if(D[S]===";")break;return-1}return S}function G(D,S,P){return{err:{code:D,msg:S,line:P.line||P,col:P.col}}}function $(D){return d.isName(D)}function B(D){return d.isName(D)}function oe(D,S){const P=D.substring(0,S).split(/\r?\n/);return{line:P.length,col:P[P.length-1].length+1}}function W(D){return D.startIndex+D[1].length}},{"./util":4}],6:[function(i,l,c){const d=i("./orderedJs2Xml"),y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(G,$){return $},attributeValueProcessor:function(G,$){return $},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function a(G){this.options=Object.assign({},y,G),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=pe),this.processTextOrObjNode=w,this.options.format?(this.indentate=K,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=Q,this.buildObjNode=E):(this.buildTextNode=z,this.buildObjNode=C),this.buildTextValNode=z,this.buildObjectNode=C,this.replaceEntitiesValue=R,this.buildAttrPairStr=b}a.prototype.build=function(G){return this.options.preserveOrder?d(G,this.options):(Array.isArray(G)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(G={[this.options.arrayNodeName]:G}),this.j2x(G,0).val)},a.prototype.j2x=function(G,$){let B="",oe="";for(let W in G)if(!(typeof G[W]>"u"))if(G[W]===null)W[0]==="?"?oe+=this.indentate($)+"<"+W+"?"+this.tagEndChar:oe+=this.indentate($)+"<"+W+"/"+this.tagEndChar;else if(G[W]instanceof Date)oe+=this.buildTextNode(G[W],W,"",$);else if(typeof G[W]!="object"){const D=this.isAttribute(W);if(D)B+=this.buildAttrPairStr(D,""+G[W]);else if(W===this.options.textNodeName){let S=this.options.tagValueProcessor(W,""+G[W]);oe+=this.replaceEntitiesValue(S)}else oe+=this.buildTextNode(G[W],W,"",$)}else if(Array.isArray(G[W])){const D=G[W].length;for(let S=0;S<D;S++){const P=G[W][S];typeof P>"u"||(P===null?W[0]==="?"?oe+=this.indentate($)+"<"+W+"?"+this.tagEndChar:oe+=this.indentate($)+"<"+W+"/"+this.tagEndChar:typeof P=="object"?oe+=this.processTextOrObjNode(P,W,$):oe+=this.buildTextNode(P,W,"",$))}}else if(this.options.attributesGroupName&&W===this.options.attributesGroupName){const D=Object.keys(G[W]),S=D.length;for(let P=0;P<S;P++)B+=this.buildAttrPairStr(D[P],""+G[W][D[P]])}else oe+=this.processTextOrObjNode(G[W],W,$);return{attrStr:B,val:oe}};function b(G,$){return $=this.options.attributeValueProcessor(G,""+$),$=this.replaceEntitiesValue($),this.options.suppressBooleanAttributes&&$==="true"?" "+G:" "+G+'="'+$+'"'}function w(G,$,B){const oe=this.j2x(G,B+1);return G[this.options.textNodeName]!==void 0&&Object.keys(G).length===1?this.buildTextNode(G[this.options.textNodeName],$,oe.attrStr,B):this.buildObjNode(oe.val,$,oe.attrStr,B)}function C(G,$,B,oe){let W="</"+$+this.tagEndChar,D="";return $[0]==="?"&&(D="?",W=""),B&&G.indexOf("<")===-1?this.indentate(oe)+"<"+$+B+D+">"+G+W:this.options.commentPropName!==!1&&$===this.options.commentPropName&&D.length===0?this.indentate(oe)+`<!--${G}-->`+this.newLine:this.indentate(oe)+"<"+$+B+D+this.tagEndChar+G+this.indentate(oe)+W}function E(G,$,B,oe){return G!==""?this.buildObjectNode(G,$,B,oe):$[0]==="?"?this.indentate(oe)+"<"+$+B+"?"+this.tagEndChar:this.indentate(oe)+"<"+$+B+"/"+this.tagEndChar}function z(G,$,B,oe){if(this.options.cdataPropName!==!1&&$===this.options.cdataPropName)return this.indentate(oe)+`<![CDATA[${G}]]>`+this.newLine;if(this.options.commentPropName!==!1&&$===this.options.commentPropName)return this.indentate(oe)+`<!--${G}-->`+this.newLine;{let W=this.options.tagValueProcessor($,G);return W=this.replaceEntitiesValue(W),W===""&&this.options.unpairedTags.indexOf($)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+$+this.tagEndChar:this.indentate(oe)+"<"+$+"/"+this.tagEndChar:this.indentate(oe)+"<"+$+B+">"+W+"</"+$+this.tagEndChar}}function R(G){if(G&&G.length>0&&this.options.processEntities)for(let $=0;$<this.options.entities.length;$++){const B=this.options.entities[$];G=G.replace(B.regex,B.val)}return G}function Q(G,$,B,oe){return G===""&&this.options.unpairedTags.indexOf($)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+$+this.tagEndChar:this.indentate(oe)+"<"+$+"/"+this.tagEndChar:G!==""?this.buildTextValNode(G,$,B,oe):$[0]==="?"?this.indentate(oe)+"<"+$+B+"?"+this.tagEndChar:this.indentate(oe)+"<"+$+B+"/"+this.tagEndChar}function K(G){return this.options.indentBy.repeat(G)}function pe(G){return G.startsWith(this.options.attributeNamePrefix)?G.substr(this.attrPrefixLen):!1}l.exports=a},{"./orderedJs2Xml":7}],7:[function(i,l,c){const d=`
`;function y(z,R){return a(z,R,"",0)}function a(z,R,Q,K){let pe="",G="";R.format&&R.indentBy.length>0&&(G=d+""+R.indentBy.repeat(K));for(let $=0;$<z.length;$++){const B=z[$],oe=b(B);let W="";if(Q.length===0?W=oe:W=`${Q}.${oe}`,oe===R.textNodeName){let Z=B[oe];C(W,R)||(Z=R.tagValueProcessor(oe,Z),Z=E(Z,R)),pe+=G+Z;continue}else if(oe===R.cdataPropName){pe+=G+`<![CDATA[${B[oe][0][R.textNodeName]}]]>`;continue}else if(oe===R.commentPropName){pe+=G+`<!--${B[oe][0][R.textNodeName]}-->`;continue}else if(oe[0]==="?"){const Z=w(B[":@"],R),J=oe==="?xml"?"":G;let H=B[oe][0][R.textNodeName];H=H.length!==0?" "+H:"",pe+=J+`<${oe}${H}${Z}?>`;continue}const D=w(B[":@"],R);let S=G+`<${oe}${D}`,P=a(B[oe],R,W,K+1);R.unpairedTags.indexOf(oe)!==-1?R.suppressUnpairedNode?pe+=S+">":pe+=S+"/>":(!P||P.length===0)&&R.suppressEmptyNode?pe+=S+"/>":pe+=S+`>${P}${G}</${oe}>`}return pe}function b(z){const R=Object.keys(z);for(let Q=0;Q<R.length;Q++){const K=R[Q];if(K!==":@")return K}}function w(z,R){let Q="";if(z&&!R.ignoreAttributes)for(let K in z){let pe=R.attributeValueProcessor(K,z[K]);pe=E(pe,R),pe===!0&&R.suppressBooleanAttributes?Q+=` ${K.substr(R.attributeNamePrefix.length)}`:Q+=` ${K.substr(R.attributeNamePrefix.length)}="${pe}"`}return Q}function C(z,R){z=z.substr(0,z.length-R.textNodeName.length-1);let Q=z.substr(z.lastIndexOf(".")+1);for(let K in R.stopNodes)if(R.stopNodes[K]===z||R.stopNodes[K]==="*."+Q)return!0;return!1}function E(z,R){if(z&&z.length>0&&R.processEntities)for(let Q=0;Q<R.entities.length;Q++){const K=R.entities[Q];z=z.replace(K.regex,K.val)}return z}l.exports=y},{}],8:[function(i,l,c){function d(b,w){const C={};if(b[w+3]==="O"&&b[w+4]==="C"&&b[w+5]==="T"&&b[w+6]==="Y"&&b[w+7]==="P"&&b[w+8]==="E"){w=w+9;let E=1,z=!1,R=!1,Q=!1,K="";for(;w<b.length;w++)if(b[w]==="<"){if(z&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="N"&&b[w+4]==="T"&&b[w+5]==="I"&&b[w+6]==="T"&&b[w+7]==="Y")w+=7,R=!0;else if(z&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="L"&&b[w+4]==="E"&&b[w+5]==="M"&&b[w+6]==="E"&&b[w+7]==="N"&&b[w+8]==="T")w+=8;else if(b[w+1]==="!"&&b[w+2]==="-"&&b[w+3]==="-")Q=!0;else throw new Error("Invalid DOCTYPE");E++,K=""}else if(b[w]===">"){if(Q)if(b[w-1]==="-"&&b[w-2]==="-")Q=!1;else throw new Error("Invalid XML comment in DOCTYPE");else R&&(a(K,C),R=!1);if(E--,E===0)break}else b[w]==="["?z=!0:K+=b[w];if(E!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:C,i:w}}const y=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function a(b,w){const C=y.exec(b);C&&(w[C[1]]={regx:RegExp(`&${C[1]};`,"g"),val:C[3]})}l.exports=d},{}],9:[function(i,l,c){const d={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(a,b){return b},attributeValueProcessor:function(a,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},y=function(a){return Object.assign({},d,a)};c.buildOptions=y,c.defaultOptions=d},{}],10:[function(i,l,c){const d=i("../util"),y=i("./xmlNode"),a=i("./DocTypeReader"),b=i("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,d.nameRegexp);class w{constructor(Z){this.options=Z,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=C,this.parseXml=K,this.parseTextData=E,this.resolveNameSpace=z,this.buildAttributesMap=Q,this.isItStopNode=$,this.replaceEntitiesValue=pe,this.readStopNodeData=D,this.saveTextToParentTag=G}}function C(P){const Z=Object.keys(P);for(let J=0;J<Z.length;J++){const H=Z[J];this.lastEntities[H]={regex:new RegExp("&"+H+";","g"),val:P[H]}}}function E(P,Z,J,H,ve,_e,xe){if(P!==void 0&&(this.options.trimValues&&!H&&(P=P.trim()),P.length>0)){xe||(P=this.replaceEntitiesValue(P));const te=this.options.tagValueProcessor(Z,P,J,ve,_e);return te==null?P:typeof te!=typeof P||te!==P?te:this.options.trimValues?S(P,this.options.parseTagValue,this.options.numberParseOptions):P.trim()===P?S(P,this.options.parseTagValue,this.options.numberParseOptions):P}}function z(P){if(this.options.removeNSPrefix){const Z=P.split(":"),J=P.charAt(0)==="/"?"/":"";if(Z[0]==="xmlns")return"";Z.length===2&&(P=J+Z[1])}return P}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Q(P,Z){if(!this.options.ignoreAttributes&&typeof P=="string"){const J=d.getAllMatches(P,R),H=J.length,ve={};for(let _e=0;_e<H;_e++){const xe=this.resolveNameSpace(J[_e][1]);let te=J[_e][4];const le=this.options.attributeNamePrefix+xe;if(xe.length)if(te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const ne=this.options.attributeValueProcessor(xe,te,Z);ne==null?ve[le]=te:typeof ne!=typeof te||ne!==te?ve[le]=ne:ve[le]=S(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ve[le]=!0)}if(!Object.keys(ve).length)return;if(this.options.attributesGroupName){const _e={};return _e[this.options.attributesGroupName]=ve,_e}return ve}}const K=function(P){P=P.replace(/\r\n?/g,`
`);const Z=new y("!xml");let J=Z,H="",ve="";for(let _e=0;_e<P.length;_e++)if(P[_e]==="<")if(P[_e+1]==="/"){const te=oe(P,">",_e,"Closing Tag is not closed.");let le=P.substring(_e+2,te).trim();if(this.options.removeNSPrefix){const ne=le.indexOf(":");ne!==-1&&(le=le.substr(ne+1))}J&&(H=this.saveTextToParentTag(H,J,ve)),ve=ve.substr(0,ve.lastIndexOf(".")),J=this.tagsNodeStack.pop(),H="",_e=te}else if(P[_e+1]==="?"){let te=W(P,_e,!1,"?>");if(!te)throw new Error("Pi Tag is not closed.");if(H=this.saveTextToParentTag(H,J,ve),!(this.options.ignoreDeclaration&&te.tagName==="?xml"||this.options.ignorePiTags)){const le=new y(te.tagName);le.add(this.options.textNodeName,""),te.tagName!==te.tagExp&&te.attrExpPresent&&(le[":@"]=this.buildAttributesMap(te.tagExp,ve)),J.addChild(le)}_e=te.closeIndex+1}else if(P.substr(_e+1,3)==="!--"){const te=oe(P,"-->",_e+4,"Comment is not closed.");if(this.options.commentPropName){const le=P.substring(_e+4,te-2);H=this.saveTextToParentTag(H,J,ve),J.add(this.options.commentPropName,[{[this.options.textNodeName]:le}])}_e=te}else if(P.substr(_e+1,2)==="!D"){const te=a(P,_e);this.docTypeEntities=te.entities,_e=te.i}else if(P.substr(_e+1,2)==="!["){const te=oe(P,"]]>",_e,"CDATA is not closed.")-2,le=P.substring(_e+9,te);if(H=this.saveTextToParentTag(H,J,ve),this.options.cdataPropName)J.add(this.options.cdataPropName,[{[this.options.textNodeName]:le}]);else{let ne=this.parseTextData(le,J.tagname,ve,!0,!1,!0);ne||(ne=""),J.add(this.options.textNodeName,ne)}_e=te+2}else{let te=W(P,_e,this.options.removeNSPrefix),le=te.tagName,ne=te.tagExp,re=te.attrExpPresent,me=te.closeIndex;J&&H&&J.tagname!=="!xml"&&(H=this.saveTextToParentTag(H,J,ve,!1)),le!==Z.tagname&&(ve+=ve?"."+le:le);const we=J;if(we&&this.options.unpairedTags.indexOf(we.tagname)!==-1&&(J=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,ve,le)){let be="";if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1)_e=te.closeIndex;else if(this.options.unpairedTags.indexOf(le)!==-1)_e=te.closeIndex;else{const Ie=this.readStopNodeData(P,le,me+1);if(!Ie)throw new Error(`Unexpected end of ${le}`);_e=Ie.i,be=Ie.tagContent}const Be=new y(le);le!==ne&&re&&(Be[":@"]=this.buildAttributesMap(ne,ve)),be&&(be=this.parseTextData(be,le,ve,!0,re,!0,!0)),ve=ve.substr(0,ve.lastIndexOf(".")),Be.add(this.options.textNodeName,be),J.addChild(Be)}else{if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1){le[le.length-1]==="/"?(le=le.substr(0,le.length-1),ne=le):ne=ne.substr(0,ne.length-1);const be=new y(le);le!==ne&&re&&(be[":@"]=this.buildAttributesMap(ne,ve)),ve=ve.substr(0,ve.lastIndexOf(".")),J.addChild(be)}else{const be=new y(le);this.tagsNodeStack.push(J),le!==ne&&re&&(be[":@"]=this.buildAttributesMap(ne,ve)),J.addChild(be),J=be}H="",_e=me}}else H+=P[_e];return Z.child},pe=function(P){if(this.options.processEntities){for(let Z in this.docTypeEntities){const J=this.docTypeEntities[Z];P=P.replace(J.regx,J.val)}for(let Z in this.lastEntities){const J=this.lastEntities[Z];P=P.replace(J.regex,J.val)}if(this.options.htmlEntities)for(let Z in this.htmlEntities){const J=this.htmlEntities[Z];P=P.replace(J.regex,J.val)}}return P};function G(P,Z,J,H){return P&&(H===void 0&&(H=Object.keys(Z.child).length===0),P=this.parseTextData(P,Z.tagname,J,!1,Z[":@"]?Object.keys(Z[":@"]).length!==0:!1,H),P!==void 0&&P!==""&&Z.add(this.options.textNodeName,P),P=""),P}function $(P,Z,J){const H="*."+J;for(const ve in P){const _e=P[ve];if(H===_e||Z===_e)return!0}return!1}function B(P,Z,J=">"){let H,ve="";for(let _e=Z;_e<P.length;_e++){let xe=P[_e];if(H)xe===H&&(H="");else if(xe==='"'||xe==="'")H=xe;else if(xe===J[0])if(J[1]){if(P[_e+1]===J[1])return{data:ve,index:_e}}else return{data:ve,index:_e};else xe==="	"&&(xe=" ");ve+=xe}}function oe(P,Z,J,H){const ve=P.indexOf(Z,J);if(ve===-1)throw new Error(H);return ve+Z.length-1}function W(P,Z,J,H=">"){const ve=B(P,Z+1,H);if(!ve)return;let _e=ve.data;const xe=ve.index,te=_e.search(/\s/);let le=_e,ne=!0;if(te!==-1&&(le=_e.substr(0,te).replace(/\s\s*$/,""),_e=_e.substr(te+1)),J){const re=le.indexOf(":");re!==-1&&(le=le.substr(re+1),ne=le!==ve.data.substr(re+1))}return{tagName:le,tagExp:_e,closeIndex:xe,attrExpPresent:ne}}function D(P,Z,J){const H=J;for(;J<P.length;J++)if(P[J]==="<"&&P[J+1]==="/"){const ve=oe(P,">",J,`${Z} is not closed`);if(P.substring(J+2,ve).trim()===Z)return{tagContent:P.substring(H,J),i:ve};J=ve}}function S(P,Z,J){if(Z&&typeof P=="string"){const H=P.trim();return H==="true"?!0:H==="false"?!1:b(P,J)}else return d.isExist(P)?P:""}l.exports=w},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,l,c){const{buildOptions:d}=i("./OptionsBuilder"),y=i("./OrderedObjParser"),{prettify:a}=i("./node2json"),b=i("../validator");class w{constructor(E){this.externalEntities={},this.options=d(E)}parse(E,z){if(typeof E!="string")if(E.toString)E=E.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(z){z===!0&&(z={});const K=b.validate(E,z);if(K!==!0)throw Error(`${K.err.msg}:${K.err.line}:${K.err.col}`)}const R=new y(this.options);R.addExternalEntities(this.externalEntities);const Q=R.parseXml(E);return this.options.preserveOrder||Q===void 0?Q:a(Q,this.options)}addEntity(E,z){if(z.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(E.indexOf("&")!==-1||E.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[E]=z}}l.exports=w},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,l,c){function d(C,E){return y(C,E)}function y(C,E,z){let R;const Q={};for(let K=0;K<C.length;K++){const pe=C[K],G=a(pe);let $="";if(z===void 0?$=G:$=z+"."+G,G===E.textNodeName)R===void 0?R=pe[G]:R+=""+pe[G];else{if(G===void 0)continue;if(pe[G]){let B=y(pe[G],E,$);const oe=w(B,E);pe[":@"]?b(B,pe[":@"],$,E):Object.keys(B).length===1&&B[E.textNodeName]!==void 0&&!E.alwaysCreateTextNode?B=B[E.textNodeName]:Object.keys(B).length===0&&(E.alwaysCreateTextNode?B[E.textNodeName]="":B=""),Q[G]!==void 0?(Array.isArray(Q[G])||(Q[G]=[Q[G]]),Q[G].push(B)):E.isArray(G,$,oe)?Q[G]=[B]:Q[G]=B}}}return typeof R=="string"?R.length>0&&(Q[E.textNodeName]=R):R!==void 0&&(Q[E.textNodeName]=R),Q}function a(C){const E=Object.keys(C);for(let z=0;z<E.length;z++){const R=E[z];if(R!==":@")return R}}function b(C,E,z,R){if(E){const Q=Object.keys(E),K=Q.length;for(let pe=0;pe<K;pe++){const G=Q[pe];R.isArray(G,z+"."+G,!0,!0)?C[G]=[E[G]]:C[G]=E[G]}}}function w(C,E){const z=Object.keys(C).length;return!!(z===0||z===1&&C[E.textNodeName])}c.prettify=d},{}],13:[function(i,l,c){class d{constructor(a){this.tagname=a,this.child=[],this[":@"]={}}add(a,b){this.child.push({[a]:b})}addChild(a){a[":@"]&&Object.keys(a[":@"]).length>0?this.child.push({[a.tagname]:a.child,[":@"]:a[":@"]}):this.child.push({[a.tagname]:a.child})}}l.exports=d},{}],14:[function(i,l,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,y,a,b,w){var C,E,z=w*8-b-1,R=(1<<z)-1,Q=R>>1,K=-7,pe=a?w-1:0,G=a?-1:1,$=d[y+pe];for(pe+=G,C=$&(1<<-K)-1,$>>=-K,K+=z;K>0;C=C*256+d[y+pe],pe+=G,K-=8);for(E=C&(1<<-K)-1,C>>=-K,K+=b;K>0;E=E*256+d[y+pe],pe+=G,K-=8);if(C===0)C=1-Q;else{if(C===R)return E?NaN:($?-1:1)*(1/0);E=E+Math.pow(2,b),C=C-Q}return($?-1:1)*E*Math.pow(2,C-b)},c.write=function(d,y,a,b,w,C){var E,z,R,Q=C*8-w-1,K=(1<<Q)-1,pe=K>>1,G=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=b?0:C-1,B=b?1:-1,oe=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(z=isNaN(y)?1:0,E=K):(E=Math.floor(Math.log(y)/Math.LN2),y*(R=Math.pow(2,-E))<1&&(E--,R*=2),E+pe>=1?y+=G/R:y+=G*Math.pow(2,1-pe),y*R>=2&&(E++,R/=2),E+pe>=K?(z=0,E=K):E+pe>=1?(z=(y*R-1)*Math.pow(2,w),E=E+pe):(z=y*Math.pow(2,pe-1)*Math.pow(2,w),E=0));w>=8;d[a+$]=z&255,$+=B,z/=256,w-=8);for(E=E<<w|z,Q+=w;Q>0;d[a+$]=E&255,$+=B,E/=256,Q-=8);d[a+$-B]|=oe*128}},{}],15:[function(i,l,c){const d=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const a={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(C,E={}){if(E=Object.assign({},a,E),!C||typeof C!="string")return C;let z=C.trim();if(E.skipLike!==void 0&&E.skipLike.test(z))return C;if(E.hex&&d.test(z))return Number.parseInt(z,16);{const R=y.exec(z);if(R){const Q=R[1],K=R[2];let pe=w(R[3]);const G=R[4]||R[6];if(!E.leadingZeros&&K.length>0&&Q&&z[2]!==".")return C;if(!E.leadingZeros&&K.length>0&&!Q&&z[1]!==".")return C;{const $=Number(z),B=""+$;return B.search(/[eE]/)!==-1||G?E.eNotation?$:C:z.indexOf(".")!==-1?B==="0"&&pe===""||B===pe||Q&&B==="-"+pe?$:C:K?pe===B||Q+pe===B?$:C:z===B||z===Q+B?$:C}}else return C}}function w(C){return C&&C.indexOf(".")!==-1&&(C=C.replace(/0+$/,""),C==="."?C="0":C[0]==="."?C="0"+C:C[C.length-1]==="."&&(C=C.substr(0,C.length-1))),C}l.exports=b},{}],16:[function(i,l,c){(function(d){(function(){var y=this&&this.__awaiter||function(z,R,Q,K){function pe(G){return G instanceof Q?G:new Q(function($){$(G)})}return new(Q||(Q=Promise))(function(G,$){function B(D){try{W(K.next(D))}catch(S){$(S)}}function oe(D){try{W(K.throw(D))}catch(S){$(S)}}function W(D){D.done?G(D.value):pe(D.value).then(B,oe)}W((K=K.apply(z,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const a=i("../auth"),b=i("../config"),w=i("./_xml"),C=z=>typeof btoa>"u"?d.from(z,"binary").toString("base64"):btoa(z);function E(z,R,Q){return y(this,void 0,void 0,function*(){const{apiUrl:K,authHeader:pe,basicAuth:G,userAgent:$}=(0,b.getConfig)(),B=G&&`Basic ${C(`${G.username}:${G.password}`)}`,oe=(0,a.getAuthToken)()&&`Bearer ${(0,a.getAuthToken)()}`;let W=new URLSearchParams(R).toString();W&&(W=`?${W}`);const D=yield fetch(`${K}/api${z}${W}`,Object.assign(Object.assign({},Q),{headers:Object.assign({Authorization:pe||B||oe||"","User-Agent":$},Q==null?void 0:Q.headers)})),S=D.headers.get("Content-Type");if(S!=null&&S.startsWith("application/xml")){const P=yield D.text();return yield w.xmlParser.parse(P)}if(S!=null&&S.startsWith("application/json"))return D.json();if(D.ok)return yield D.text();throw new Error(`OSM API: ${yield D.text()}`)})}c.osmFetch=E}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const d=i("fast-xml-parser");c.xmlParser=new d.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:y=>y!=="$"})},{"fast-xml-parser":3}],18:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const d=i("fast-xml-parser"),y=new d.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function a(C){return y.build({osm:{changeset:{tag:Object.entries(C).map(([E,z])=>({$k:E,$v:z}))}}})}c.createChangesetMetaXml=a;const b=(C,E,z)=>E.reduce((R,Q)=>{const K={$id:Q.id,$version:z?0:Q.version,$changeset:C,tag:Object.entries(Q.tags||{}).map(([pe,G])=>({$k:pe,$v:G}))};switch(Q.type){case"node":{const pe=Object.assign(Object.assign({},K),{$lat:Q.lat,$lon:Q.lon});return Object.assign(Object.assign({},R),{node:[...R.node,pe]})}case"way":{if(!Q.nodes)throw new Error("Way has no nodes");const pe=Object.assign(Object.assign({},K),{nd:Q.nodes.map(G=>({$ref:G}))});return Object.assign(Object.assign({},R),{way:[...R.way,pe]})}case"relation":{if(!Q.members)throw new Error("Relation has no members");const pe=Object.assign(Object.assign({},K),{member:Q.members.map(G=>({$type:G.type,$ref:G.ref,$role:G.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,pe]})}default:return R}},{node:[],way:[],relation:[]});function w(C,E,z){return y.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},z),{create:[b(C,E.create,!0)],modify:[b(C,E.modify)],delete:[Object.assign({"$if-unused":!0},b(C,E.delete))]})})}c.createOsmChangeXml=w},{"fast-xml-parser":3}],19:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const d=i("../_xml");function y(C){return{changeset:+C.$.changeset,id:+C.$.id,timestamp:C.$.timestamp,uid:+C.$.uid,user:C.$.user,version:+C.$.version,tags:C.tag?Object.fromEntries(C.tag.map(E=>[E.$.k,E.$.v])):void 0}}const a=C=>{const E=[];if(C.node){const z=C.node.map(R=>Object.assign(Object.assign({type:"node"},y(R)),{lat:+R.$.lat,lon:+R.$.lon}));E.push(...z)}if(C.way){const z=C.way.map(R=>{var Q;return Object.assign(Object.assign({type:"way"},y(R)),{nodes:((Q=R.nd)===null||Q===void 0?void 0:Q.map(K=>+K.$.ref))||[]})});E.push(...z)}if(C.relation){const z=C.relation.map(R=>{var Q;return Object.assign(Object.assign({type:"relation"},y(R)),{members:((Q=R.member)===null||Q===void 0?void 0:Q.map(K=>({ref:+K.$.ref,role:K.$.role,type:K.$.type})))||[]})});E.push(...z)}return E};function b(C){var E,z,R;return{create:((E=C.osmChange[0].create)===null||E===void 0?void 0:E.flatMap(a))||[],modify:((z=C.osmChange[0].modify)===null||z===void 0?void 0:z.flatMap(a))||[],delete:((R=C.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(a))||[]}}c.parseOsmChangeJson=b;function w(C){const E=d.xmlParser.parse(C);return b(E)}c.parseOsmChangeXml=w},{"../_xml":17}],20:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(R){return R instanceof C?R:new C(function(Q){Q(R)})}return new(C||(C=Promise))(function(R,Q){function K($){try{G(E.next($))}catch(B){Q(B)}}function pe($){try{G(E.throw($))}catch(B){Q(B)}}function G($){$.done?R($.value):z($.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const y=i("../_osmFetch");function a(b,w){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(w)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=a},{"../_osmFetch":16}],21:[function(i,l,c){var d=this&&this.__awaiter||function(w,C,E,z){function R(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(B){try{$(z.next(B))}catch(oe){K(oe)}}function G(B){try{$(z.throw(B))}catch(oe){K(oe)}}function $(B){B.done?Q(B.value):R(B.value).then(pe,G)}$((z=z.apply(w,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const y=i("../_osmFetch"),a=i("./_parseOsmChangeXml");function b(w){return d(this,void 0,void 0,function*(){const C=yield(0,y.osmFetch)(`/0.6/changeset/${w}/download`);return(0,a.parseOsmChangeJson)(C)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,l,c){var d=this&&this.__awaiter||function(E,z,R,Q){function K(pe){return pe instanceof R?pe:new R(function(G){G(pe)})}return new(R||(R=Promise))(function(pe,G){function $(W){try{oe(Q.next(W))}catch(D){G(D)}}function B(W){try{oe(Q.throw(W))}catch(D){G(D)}}function oe(W){W.done?pe(W.value):K(W.value).then($,B)}oe((Q=Q.apply(E,z||[])).next())})},y=this&&this.__rest||function(E,z){var R={};for(var Q in E)Object.prototype.hasOwnProperty.call(E,Q)&&z.indexOf(Q)<0&&(R[Q]=E[Q]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,Q=Object.getOwnPropertySymbols(E);K<Q.length;K++)z.indexOf(Q[K])<0&&Object.prototype.propertyIsEnumerable.call(E,Q[K])&&(R[Q[K]]=E[Q[K]]);return R};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const a=i("../_osmFetch"),b=E=>{var z;return{id:+E.$.id,created_at:new Date(E.$.created_at),closed_at:new Date(E.$.closed_at),open:E.$.open==="true",comments_count:+E.$.comments_count,changes_count:+E.$.changes_count,min_lat:+E.$.min_lat,min_lon:+E.$.min_lon,max_lat:+E.$.max_lat,max_lon:+E.$.max_lon,uid:+E.$.uid,user:E.$.user,tags:Object.fromEntries(E.tag.map(R=>[R.$.k,R.$.v])),discussion:(z=E.discussion)===null||z===void 0?void 0:z[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function w(E){var z;return d(this,void 0,void 0,function*(){const{only:R}=E,Q=y(E,["only"]);return((z=(yield(0,a.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),Q))).osm[0].changeset)===null||z===void 0?void 0:z.map(b))||[]})}c.listChangesets=w;function C(E,z=!0){return d(this,void 0,void 0,function*(){return(yield(0,a.osmFetch)(`/0.6/changeset/${E}`,{include_discussion:z})).osm[0].changeset.map(b)[0]})}c.getChangeset=C},{"../_osmFetch":16}],23:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(w,C,E,z){z===void 0&&(z=E);var R=Object.getOwnPropertyDescriptor(C,E);(!R||("get"in R?!C.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return C[E]}}),Object.defineProperty(w,z,R)}:function(w,C,E,z){z===void 0&&(z=E),w[z]=C[E]}),y=this&&this.__exportStar||function(w,C){for(var E in w)E!=="default"&&!Object.prototype.hasOwnProperty.call(C,E)&&d(C,w,E)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,y(i("./createChangesetComment"),c),y(i("./getChangesetDiff"),c),y(i("./getChangesets"),c),y(i("./uploadChangeset"),c);var a=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return a.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,l,c){var d=this&&this.__awaiter||function(w,C,E,z){function R(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(B){try{$(z.next(B))}catch(oe){K(oe)}}function G(B){try{$(z.throw(B))}catch(oe){K(oe)}}function $(B){B.done?Q(B.value):R(B.value).then(pe,G)}$((z=z.apply(w,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const y=i("../_osmFetch"),a=i("./_createOsmChangeXml");function b(w,C){return d(this,void 0,void 0,function*(){const E=(0,a.createChangesetMetaXml)(w),z=+(yield(0,y.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:E,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,a.createOsmChangeXml)(z,C);return yield(0,y.osmFetch)(`/0.6/changeset/${z}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,y.osmFetch)(`/0.6/changeset/${z}/close`,void 0,{method:"PUT"}),+z})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(R){return R instanceof C?R:new C(function(Q){Q(R)})}return new(C||(C=Promise))(function(R,Q){function K($){try{G(E.next($))}catch(B){Q(B)}}function pe($){try{G(E.throw($))}catch(B){Q(B)}}function G($){$.done?R($.value):z($.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const y=i("./_osmFetch");function a(){return d(this,void 0,void 0,function*(){const b=yield(0,y.osmFetch)("/capabilities");return{limits:{maxArea:+b.osm[0].api[0].area[0].$.maximum,maxNoteArea:+b.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+b.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+b.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+b.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+b.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:b.osm[0].policy[0].imagery[0].blacklist.map(C=>C.$.regex)}}})}c.getCapabilities=a},{"./_osmFetch":16}],26:[function(i,l,c){var d=this&&this.__awaiter||function(R,Q,K,pe){function G($){return $ instanceof K?$:new K(function(B){B($)})}return new(K||(K=Promise))(function($,B){function oe(S){try{D(pe.next(S))}catch(P){B(P)}}function W(S){try{D(pe.throw(S))}catch(P){B(P)}}function D(S){S.done?$(S.value):G(S.value).then(oe,W)}D((pe=pe.apply(R,Q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const y=i("./_osmFetch");function a(R,Q,K){return d(this,void 0,void 0,function*(){const pe=K&&R!=="node"?"/full":"";return(yield(0,y.osmFetch)(`/0.6/${R}/${Q}${pe}.json`)).elements})}c.getFeature=a;function b(R,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${R}s.json?${R}s=${Q.join(",")}`)).elements})}c.getFeatures=b;function w(R,Q,K){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${R}/${Q}/${K}.json`)).elements[0]})}c.getFeatureAtVersion=w;function C(R,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${R}/${Q}/history.json`)).elements})}c.getFeatureHistory=C;function E(R){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}c.getWaysForNode=E;function z(R,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${R}/${Q}/relations.json`)).elements})}c.getRelationsForElement=z},{"./_osmFetch":16}],27:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(R){return R instanceof C?R:new C(function(Q){Q(R)})}return new(C||(C=Promise))(function(R,Q){function K($){try{G(E.next($))}catch(B){Q(B)}}function pe($){try{G(E.throw($))}catch(B){Q(B)}}function G($){$.done?R($.value):z($.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const y=i("./_osmFetch");function a(b){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=a},{"./_osmFetch":16}],28:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(R){return R instanceof C?R:new C(function(Q){Q(R)})}return new(C||(C=Promise))(function(R,Q){function K($){try{G(E.next($))}catch(B){Q(B)}}function pe($){try{G(E.throw($))}catch(B){Q(B)}}function G($){$.done?R($.value):z($.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const y=i("./changesets");function a(b){return d(this,void 0,void 0,function*(){const w=yield(0,y.listChangesets)({display_name:b});if(!w.length)throw new Error("Could not get uid because the user has never edited the map");return w[0].uid})}c.getUIdFromDisplayName=a},{"./changesets":23}],29:[function(i,l,c){var d=this&&this.__awaiter||function(w,C,E,z){function R(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(B){try{$(z.next(B))}catch(oe){K(oe)}}function G(B){try{$(z.throw(B))}catch(oe){K(oe)}}function $(B){B.done?Q(B.value):R(B.value).then(pe,G)}$((z=z.apply(w,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const y=i("./_osmFetch");function a(w){return d(this,void 0,void 0,function*(){const C=yield(0,y.osmFetch)(`/0.6/user/${w==="me"?"details":w}.json`);return Object.assign(Object.assign({},C.user),{account_created:new Date(C.user.account_created)})})}c.getUser=a;function b(w){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/users",{users:w})).users.map(E=>Object.assign(Object.assign({},E),{account_created:new Date(E.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,C,E)}:function(a,b,w,C){C===void 0&&(C=w),a[C]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./notes"),c),y(i("./getCapabilities"),c),y(i("./getFeature"),c),y(i("./getMapData"),c),y(i("./getUIdFromDisplayName"),c),y(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,l,c){var d=this&&this.__awaiter||function(z,R,Q,K){function pe(G){return G instanceof Q?G:new Q(function($){$(G)})}return new(Q||(Q=Promise))(function(G,$){function B(D){try{W(K.next(D))}catch(S){$(S)}}function oe(D){try{W(K.throw(D))}catch(S){$(S)}}function W(D){D.done?G(D.value):pe(D.value).then(B,oe)}W((K=K.apply(z,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const y=i("../_osmFetch"),a=z=>{const[R,Q]=z.geometry.coordinates;return Object.assign(Object.assign({},z.properties),{location:{lat:Q,lng:R}})};function b(z,R){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/notes${R?"/search":""}.json`,z)).features.map(a)})}function w(z){return b(z,!0)}c.getNotesForQuery=w;function C(z){return b({bbox:z},!1)}c.getNotesForArea=C;function E(z){return d(this,void 0,void 0,function*(){const R=yield(0,y.osmFetch)(`/0.6/notes/${z}.json`);return a(R)})}c.getNote=E},{"../_osmFetch":16}],32:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,C,E)}:function(a,b,w,C){C===void 0&&(C=w),a[C]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./getNotes"),c),y(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,l,c){var d=this&&this.__awaiter||function(C,E,z,R){function Q(K){return K instanceof z?K:new z(function(pe){pe(K)})}return new(z||(z=Promise))(function(K,pe){function G(oe){try{B(R.next(oe))}catch(W){pe(W)}}function $(oe){try{B(R.throw(oe))}catch(W){pe(W)}}function B(oe){oe.done?K(oe.value):Q(oe.value).then(G,$)}B((R=R.apply(C,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const y=i("../_osmFetch");function a(C,E,z){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)("/0.6/notes",{lat:C,lon:E,text:z})})}c.createNote=a;function b(C,E){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${C}/comment`,{text:E})})}c.commentOnNote=b;function w(C,E){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${C}/reopen`,{text:E})})}c.reopenNote=w},{"../_osmFetch":16}],34:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function d(y){let a=!1;return new Promise((b,w)=>{const[C,E]=[600,550],z=Object.entries({width:C,height:E,left:window.screen.width/2-C/2,top:window.screen.height/2-E/2}).map(([K,pe])=>`${K}=${pe}`).join(","),R=window.open("about:blank","oauth_window",z);if(!R)throw new Error("Popup was blocked");R.location=y,window.authComplete=K=>{b(K),a=!0};const Q=setInterval(()=>{R.closed&&(a||w(new Error("Cancelled")),clearInterval(Q))},500)})}c.createPopup=d},{}],35:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(R){return R instanceof C?R:new C(function(Q){Q(R)})}return new(C||(C=Promise))(function(R,Q){function K($){try{G(E.next($))}catch(B){Q(B)}}function pe($){try{G(E.throw($))}catch(B){Q(B)}}function G($){$.done?R($.value):z($.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const y=i("./helpers");function a(b,{options:w,pkceVerifier:C,state:E}){return d(this,void 0,void 0,function*(){const z=new URL(b).searchParams,R=z.get("error_description"),Q=z.get("code"),K=z.get("state");if(R)throw new Error(R);if(!Q)throw new Error("No code in OAuth response");if(!C||!E)throw new Error("No login in progress");if(E!==K)throw new Error("State Mismatch");const pe={grant_type:"authorization_code",code:Q,redirect_uri:w.redirectUrl,client_id:w.clientId,code_verifier:C},G=`${(0,y.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(pe).toString()}`,B=yield(yield fetch(G,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in B)throw new Error(B.error_description);const oe={issuedAt:new Date(B.created_at*1e3).toISOString(),accessToken:B.access_token,scopes:B.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(oe)),delete window.authComplete,oe})}c.exchangeCode=a},{"./helpers":36}],36:[function(i,l,c){var d=this&&this.__awaiter||function(C,E,z,R){function Q(K){return K instanceof z?K:new z(function(pe){pe(K)})}return new(z||(z=Promise))(function(K,pe){function G(oe){try{B(R.next(oe))}catch(W){pe(W)}}function $(oe){try{B(R.throw(oe))}catch(W){pe(W)}}function B(oe){oe.done?K(oe.value):Q(oe.value).then(G,$)}B((R=R.apply(C,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const y=i("../config");function a(C){return d(this,void 0,void 0,function*(){const E=new TextEncoder().encode(C),z=yield window.crypto.subtle.digest("SHA-256",E);return btoa(String.fromCharCode(...new Uint8Array(z))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=a;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(C=>`0${C.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function w(){let C=(0,y.getConfig)().apiUrl;return C==="https://api.openstreetmap.org"&&(C="https://www.openstreetmap.org"),C}c.getOAuthBaseUrl=w},{"../config":39}],37:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,C,E)}:function(a,b,w,C){C===void 0&&(C=w),a[C]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,l,c){var d=this&&this.__awaiter||function(R,Q,K,pe){function G($){return $ instanceof K?$:new K(function(B){B($)})}return new(K||(K=Promise))(function($,B){function oe(S){try{D(pe.next(S))}catch(P){B(P)}}function W(S){try{D(pe.throw(S))}catch(P){B(P)}}function D(S){S.done?$(S.value):G(S.value).then(oe,W)}D((pe=pe.apply(R,Q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const y=i("./createPopup"),a=i("./exchangeCode"),b=i("./helpers");function w(R){return d(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const Q=(0,b.getRandomString)(),K=(0,b.getRandomString)(),pe=yield(0,b.sha256)(K),G={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:Q,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:pe},$=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(G).toString()}`,B={state:Q,pkceVerifier:K,options:R};if(R.mode==="popup"){const oe=yield(0,y.createPopup)($);return(0,a.exchangeCode)(oe,B)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(B)),window.location.replace($);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=w,c.authReady=(()=>d(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const Q=window.location.href,K=localStorage.getItem("__osmAuthTemp");if(new URL(Q).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(Q),window.close();else if(K)try{const pe=JSON.parse(K);yield(0,a.exchangeCode)(Q,pe),localStorage.removeItem("__osmAuthTemp")}catch(pe){console.error("OSM Auth Error",pe)}}}))();const C=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};c.getAuthToken=C;const E=()=>!!(0,c.getAuthToken)();c.isLoggedIn=E;function z(){localStorage.removeItem("__osmAuth")}c.logout=z},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const d={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},y=()=>d;c.getConfig=y;function a(b){Object.assign(d,b)}c.configure=a},{}],40:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,C,E)}:function(a,b,w,C){C===void 0&&(C=w),a[C]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),i("./polyfill"),y(i("./api"),c),y(i("./auth"),c),y(i("./config"),c),y(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./polyfill":41,"./types":45}],41:[function(i,l,c){if(typeof fetch>"u")try{i("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],42:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],43:[function(i,l,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],44:[function(i,l,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],45:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,C,E)}:function(a,b,w,C){C===void 0&&(C=w),a[C]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./features"),c),y(i("./general"),c),y(i("./notes"),c),y(i("./user"),c)},{"./changesets":42,"./features":43,"./general":44,"./notes":46,"./user":47}],46:[function(i,l,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],47:[function(i,l,c){arguments[4][42][0].apply(c,arguments)},{dup:42}]},{},[40])(40)})})(kC);var Ss=kC.exports;const zC=()=>{const[e,t]=yt.useState(!1);yt.useEffect(()=>{t(Ss.isLoggedIn())},[]);const i=yt.useCallback(()=>{(async()=>(await Ss.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Ss.isLoggedIn()),window.location.reload()))()},[]),l=yt.useCallback(()=>{(async()=>(Ss.logout(),t(!1)))()},[]);return ft.jsx(ft.Fragment,{children:e?ft.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:l,children:"logout"}):ft.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},H5=()=>{const[e,t]=yt.useState(!1),[i,l]=yt.useState(void 0);return yt.useEffect(()=>{t(Ss.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Ss.getUser("me");l(c)})()},[e]),ft.jsx(ft.Fragment,{children:i?ft.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):ft.jsx("img",{})})},X5=()=>{const[e,t]=yt.useState(!1),[i,l]=yt.useState(void 0);return yt.useEffect(()=>{t(Ss.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Ss.getUser("me");l(c)})()},[e]),ft.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[ft.jsxs("div",{children:[ft.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?ft.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):ft.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),ft.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[ft.jsx("div",{children:ft.jsx(H5,{})}),ft.jsx("div",{children:ft.jsx(zC,{})})]})]})},LC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return ft.jsxs(ft.Fragment,{children:[ft.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",ft.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},q5=({feature:e})=>ft.jsx(ft.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return ft.jsxs("div",{className:t,children:[ft.jsx("span",{className:"underline",children:t})," = ",ft.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Tf(e,t,i){return parseInt(e.substr(t,i),16)}function OC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function s0(e,t,i){return i=i<0?i+6:i>6?i-6:i,OC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function K5(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const l=e[1],c=e[2],d=e[3],y=e[4]||"";t="#"+l+l+c+c+d+d+y+y}return(i==7||i>8)&&(t=e),t}}function Y5(e,t,i){let l;if(t==0){const c=OC(i*255);l=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,d=i*2-c;l=s0(d,c,e*6+2)+s0(d,c,e*6)+s0(d,c,e*6-2)}return"#"+l}function _f(e,t,i){const l=[.55,.5,.5,.46,.6,.55,.55],c=l[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,Y5(e,t,i)}const J5=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},x2={V:"jdenticon_config",n:"config"};var Q5={};function ez(e,t){const i=typeof e=="object"&&e||Q5[x2.n]||J5[x2.V]||{},l=i.lightness||{},c=i.saturation||{},d="color"in c?c.color:c,y=c.grayscale,a=i.backColor,b=i.padding;function w(E,z){let R=l[E];return R&&R.length>1||(R=z),function(Q){return Q=R[0]+Q*(R[1]-R[0]),Q<0?0:Q>1?1:Q}}function C(E){const z=i.hues;let R;return z&&z.length>0&&(R=z[0|.999*E*z.length]),typeof R=="number"?(R/360%1+1)%1:E}return{W:C,o:typeof d=="number"?d:.5,D:typeof y=="number"?y:0,p:w("color",[.4,.8]),F:w("grayscale",[.3,.9]),G:K5(a),X:typeof e=="number"?e:typeof b=="number"?b:t}}let Tp=class{constructor(t,i){this.x=t,this.y=i}};class RC{constructor(t,i,l,c){this.q=t,this.t=i,this.H=l,this.Y=c}I(t,i,l,c){const d=this.q+this.H,y=this.t+this.H,a=this.Y;return a===1?new Tp(d-i-(c||0),this.t+t):a===2?new Tp(d-t-(l||0),y-i-(c||0)):a===3?new Tp(this.q+i,y-t-(l||0)):new Tp(this.q+t,this.t+i)}}const tz=new RC(0,0,0,0);class nz{constructor(t){this.J=t,this.u=tz}g(t,i){const l=i?-2:2,c=[];for(let d=i?t.length-2:0;d<t.length&&d>=0;d+=l)c.push(this.u.I(t[d],t[d+1]));this.J.g(c)}h(t,i,l,c){const d=this.u.I(t,i,l,l);this.J.h(d,l,c)}i(t,i,l,c,d){this.g([t,i,t+l,i,t+l,i+c,t,i+c],d)}j(t,i,l,c,d,y){const a=[t+l,i,t+l,i+c,t,i+c,t,i];a.splice((d||0)%4*2,2),this.g(a,y)}K(t,i,l,c,d){this.g([t+l/2,i,t+l,i+c/2,t+l/2,i+c,t,i+c/2],d)}}function rz(e,t,i,l){e=e%14;let c,d,y,a,b,w;e?e==1?(y=0|i*.5,a=0|i*.8,t.j(i-y,0,y,a,2)):e==2?(y=0|i/3,t.i(y,y,i-y,i-y)):e==3?(b=i*.1,w=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(w,w,i-b-w,i-b-w)):e==4?(d=0|i*.15,y=0|i*.5,t.h(i-y-d,i-y-d,y)):e==5?(b=i*.1,w=b*4,w>3&&(w=0|w),t.i(0,0,i,i),t.g([w,w,i-b,w,w+(i-w-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,w=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(w,w,i-w-b,i-w-b,!0)):e==10?(b=i*.12,w=b*3,t.i(0,0,i,i),t.h(w,w,i-b-w,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(d=i*.25,t.i(0,0,i,i),t.K(d,d,i-d,i-d,!0)):!l&&(d=i*.4,y=i*1.2,t.h(d,d,y)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function w2(e,t,i){e=e%4;let l;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(l=i/6,t.h(l,l,i-2*l)):t.j(0,0,i,i,0)}function iz(e,t){return e=t.W(e),[_f(e,t.D,t.F(0)),_f(e,t.o,t.p(.5)),_f(e,t.D,t.F(1)),_f(e,t.o,t.p(1)),_f(e,t.o,t.p(0))]}function oz(e,t,i){const l=ez(i,.08);l.G&&e.m(l.G);let c=e.k;const d=.5+c*l.X|0;c-=d*2;const y=new nz(e),a=0|c/4,b=0|d+c/2-a*2,w=0|d+c/2-a*2;function C(pe,G,$,B,oe){const W=Tf(t,$,1);let D=B?Tf(t,B,1):0;e.L(z[R[pe]]);for(let S=0;S<oe.length;S++)y.u=new RC(b+oe[S][0]*a,w+oe[S][1]*a,a,D++%4),G(W,y,a,S);e.M()}const E=Tf(t,-7)/268435455,z=iz(E,l),R=[];let Q;function K(pe){if(pe.indexOf(Q)>=0){for(let G=0;G<pe.length;G++)if(R.indexOf(pe[G])>=0)return!0}}for(let pe=0;pe<3;pe++)Q=Tf(t,8+pe,1)%z.length,(K([0,4])||K([2,3]))&&(Q=1),R.push(Q);C(0,w2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),C(1,w2,4,5,[[0,0],[3,0],[3,3],[0,3]]),C(2,rz,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function sz(e){var l=0,c=0,d=encodeURI(e)+"%80",y=[],a,b=[],w=1732584193,C=4023233417,E=~w,z=~C,R=3285377520,Q=[w,C,E,z,R],K=0,pe="";function G($,B){return $<<B|$>>>32-B}for(;l<d.length;c++)y[c>>2]=y[c>>2]|(d[l]=="%"?parseInt(d.substring(l+1,l+=3),16):d.charCodeAt(l++))<<(3-(c&3))*8;for(a=((c+7>>6)+1)*16,y[a-1]=c*8-8;K<a;K+=16){for(l=0;l<80;l++)c=G(w,5)+R+(l<20?(C&E^~C&z)+1518500249:l<40?(C^E^z)+1859775393:l<60?(C&E^C&z^E&z)+2400959708:(C^E^z)+3395469782)+(b[l]=l<16?y[K+l]|0:G(b[l-3]^b[l-8]^b[l-14]^b[l-16],1)),R=z,z=E,E=G(C,30),C=w,w=c;Q[0]=w=Q[0]+w|0,Q[1]=C=Q[1]+C|0,Q[2]=E=Q[2]+E|0,Q[3]=z=Q[3]+z|0,Q[4]=R=Q[4]+R|0}for(l=0;l<40;l++)pe+=(Q[l>>3]>>>(7-(l&7))*4&15).toString(16);return pe}function az(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function lz(e){return sz(e==null?"":""+e)}function Ac(e){return(e*10+.5|0)/10}class uz{constructor(){this.v=""}g(t){let i="";for(let l=0;l<t.length;l++)i+=(l?"L":"M")+Ac(t[l].x)+" "+Ac(t[l].y);this.v+=i+"Z"}h(t,i,l){const c=l?0:1,d=Ac(i/2),y=Ac(i),a="a"+d+","+d+" 0 1,"+c+" ";this.v+="M"+Ac(t.x)+" "+Ac(t.y+i/2)+a+y+",0"+a+-y+",0"}}class cz{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),l=i[2]?Tf(i[2],0)/255:1;this.N.m(i[1],l)}L(t){this.A=this.B[t]||(this.B[t]=new uz)}M(){}g(t){this.A.g(t)}h(t,i,l){this.A.h(t,i,l)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const hz={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class fz{constructor(t){this.k=t,this.C='<svg xmlns="'+hz.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function dz(e,t,i){const l=new fz(t);return oz(new cz(l),az(e)||lz(e),i),l.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const pz=({feature:e,size:t})=>e.properties===null?null:ft.jsx(ft.Fragment,{children:e.properties.userIconHref.length>0?ft.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):ft.jsx("span",{dangerouslySetInnerHTML:{__html:dz(e.properties.user||"noname",t)}})}),mz=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?ft.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var gz={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const yz=({viewState:e})=>{const[t,i]=yt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),ft.jsx(ft.Fragment,{children:e&&t&&ft.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[ft.jsx(ta,{icon:gz,style:{padding:"0px 3px"}}),ft.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var FC={};class Bi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let l=0;for(let c=0;c<this._n&&c<32;c++){const d=i[c],y=t+d,a=Math.abs(t)<Math.abs(d)?t-(y-d):d-(y-t);a&&(i[l++]=a),t=y}return i[l]=t,this._n=l+1,this}valueOf(){const t=this._partials;let i=this._n,l,c,d,y=0;if(i>0){for(y=t[--i];i>0&&(l=y,c=t[--i],y=l+c,d=c-(y-l),!d););i>0&&(d<0&&t[i-1]<0||d>0&&t[i-1]>0)&&(c=d*2,l=y+c,c==l-y&&(y=l))}return y}}function*vz(e){for(const t of e)yield*t}function jC(e){return Array.from(vz(e))}function qc(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var l=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,d=new Array(c);++l<c;)d[l]=e+l*i;return d}var fn=1e-6,fd=1e-12,Pn=Math.PI,Fr=Pn/2,Lm=Pn/4,no=Pn*2,or=180/Pn,dn=Pn/180,$n=Math.abs,Eh=Math.atan,ro=Math.atan2,rn=Math.cos,Cp=Math.ceil,DC=Math.exp,Nv=Math.hypot,Om=Math.log,a0=Math.pow,Yt=Math.sin,es=Math.sign||function(e){return e>0?1:e<0?-1:0},fi=Math.sqrt,C1=Math.tan;function BC(e){return e>1?0:e<-1?Pn:Math.acos(e)}function io(e){return e>1?Fr:e<-1?-Fr:Math.asin(e)}function b2(e){return(e=Yt(e/2))*e}function Ir(){}function Rm(e,t){e&&S2.hasOwnProperty(e.type)&&S2[e.type](e,t)}var E2={Feature:function(e,t){Rm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,l=-1,c=i.length;++l<c;)Rm(i[l].geometry,t)}},S2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)e=i[l],t.point(e[0],e[1],e[2])},LineString:function(e,t){Uv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)Uv(i[l],t,0)},Polygon:function(e,t){T2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)T2(i[l],t)},GeometryCollection:function(e,t){for(var i=e.geometries,l=-1,c=i.length;++l<c;)Rm(i[l],t)}};function Uv(e,t,i){var l=-1,c=e.length-i,d;for(t.lineStart();++l<c;)d=e[l],t.point(d[0],d[1],d[2]);t.lineEnd()}function T2(e,t){var i=-1,l=e.length;for(t.polygonStart();++i<l;)Uv(e[i],t,1);t.polygonEnd()}function ws(e,t){e&&E2.hasOwnProperty(e.type)?E2[e.type](e,t):Rm(e,t)}var Fm=new Bi,jm=new Bi,NC,UC,$v,Vv,Gv,na={point:Ir,lineStart:Ir,lineEnd:Ir,polygonStart:function(){Fm=new Bi,na.lineStart=_z,na.lineEnd=xz},polygonEnd:function(){var e=+Fm;jm.add(e<0?no+e:e),this.lineStart=this.lineEnd=this.point=Ir},sphere:function(){jm.add(no)}};function _z(){na.point=wz}function xz(){$C(NC,UC)}function wz(e,t){na.point=$C,NC=e,UC=t,e*=dn,t*=dn,$v=e,Vv=rn(t=t/2+Lm),Gv=Yt(t)}function $C(e,t){e*=dn,t*=dn,t=t/2+Lm;var i=e-$v,l=i>=0?1:-1,c=l*i,d=rn(t),y=Yt(t),a=Gv*y,b=Vv*d+a*rn(c),w=a*l*Yt(c);Fm.add(ro(w,b)),$v=e,Vv=d,Gv=y}function bz(e){return jm=new Bi,ws(e,na),jm*2}function Dm(e){return[ro(e[1],e[0]),io(e[2])]}function Ru(e){var t=e[0],i=e[1],l=rn(i);return[l*rn(t),l*Yt(t),Yt(i)]}function Ap(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ph(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function l0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ip(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Bm(e){var t=fi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Cr,mo,Or,Mo,wu,VC,GC,ih,Vf,_l,Ba,Ia={point:Zv,lineStart:C2,lineEnd:A2,polygonStart:function(){Ia.point=WC,Ia.lineStart=Ez,Ia.lineEnd=Sz,Vf=new Bi,na.polygonStart()},polygonEnd:function(){na.polygonEnd(),Ia.point=Zv,Ia.lineStart=C2,Ia.lineEnd=A2,Fm<0?(Cr=-(Or=180),mo=-(Mo=90)):Vf>fn?Mo=90:Vf<-fn&&(mo=-90),Ba[0]=Cr,Ba[1]=Or},sphere:function(){Cr=-(Or=180),mo=-(Mo=90)}};function Zv(e,t){_l.push(Ba=[Cr=e,Or=e]),t<mo&&(mo=t),t>Mo&&(Mo=t)}function ZC(e,t){var i=Ru([e*dn,t*dn]);if(ih){var l=ph(ih,i),c=[l[1],-l[0],0],d=ph(c,l);Bm(d),d=Dm(d);var y=e-wu,a=y>0?1:-1,b=d[0]*or*a,w,C=$n(y)>180;C^(a*wu<b&&b<a*e)?(w=d[1]*or,w>Mo&&(Mo=w)):(b=(b+360)%360-180,C^(a*wu<b&&b<a*e)?(w=-d[1]*or,w<mo&&(mo=w)):(t<mo&&(mo=t),t>Mo&&(Mo=t))),C?e<wu?Po(Cr,e)>Po(Cr,Or)&&(Or=e):Po(e,Or)>Po(Cr,Or)&&(Cr=e):Or>=Cr?(e<Cr&&(Cr=e),e>Or&&(Or=e)):e>wu?Po(Cr,e)>Po(Cr,Or)&&(Or=e):Po(e,Or)>Po(Cr,Or)&&(Cr=e)}else _l.push(Ba=[Cr=e,Or=e]);t<mo&&(mo=t),t>Mo&&(Mo=t),ih=i,wu=e}function C2(){Ia.point=ZC}function A2(){Ba[0]=Cr,Ba[1]=Or,Ia.point=Zv,ih=null}function WC(e,t){if(ih){var i=e-wu;Vf.add($n(i)>180?i+(i>0?360:-360):i)}else VC=e,GC=t;na.point(e,t),ZC(e,t)}function Ez(){na.lineStart()}function Sz(){WC(VC,GC),na.lineEnd(),$n(Vf)>fn&&(Cr=-(Or=180)),Ba[0]=Cr,Ba[1]=Or,ih=null}function Po(e,t){return(t-=e)<0?t+360:t}function Tz(e,t){return e[0]-t[0]}function I2(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Cz(e){var t,i,l,c,d,y,a;if(Mo=Or=-(Cr=mo=1/0),_l=[],ws(e,Ia),i=_l.length){for(_l.sort(Tz),t=1,l=_l[0],d=[l];t<i;++t)c=_l[t],I2(l,c[0])||I2(l,c[1])?(Po(l[0],c[1])>Po(l[0],l[1])&&(l[1]=c[1]),Po(c[0],l[1])>Po(l[0],l[1])&&(l[0]=c[0])):d.push(l=c);for(y=-1/0,i=d.length-1,t=0,l=d[i];t<=i;l=c,++t)c=d[t],(a=Po(l[1],c[0]))>y&&(y=a,Cr=c[0],Or=l[1])}return _l=Ba=null,Cr===1/0||mo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Cr,mo],[Or,Mo]]}var Cf,Nm,Um,$m,Vm,Gm,Zm,Wm,Wv,Hv,Xv,HC,XC,Ji,Qi,eo,Ts={sphere:Ir,point:A1,lineStart:P2,lineEnd:M2,polygonStart:function(){Ts.lineStart=Pz,Ts.lineEnd=Mz},polygonEnd:function(){Ts.lineStart=P2,Ts.lineEnd=M2}};function A1(e,t){e*=dn,t*=dn;var i=rn(t);Sd(i*rn(e),i*Yt(e),Yt(t))}function Sd(e,t,i){++Cf,Um+=(e-Um)/Cf,$m+=(t-$m)/Cf,Vm+=(i-Vm)/Cf}function P2(){Ts.point=Az}function Az(e,t){e*=dn,t*=dn;var i=rn(t);Ji=i*rn(e),Qi=i*Yt(e),eo=Yt(t),Ts.point=Iz,Sd(Ji,Qi,eo)}function Iz(e,t){e*=dn,t*=dn;var i=rn(t),l=i*rn(e),c=i*Yt(e),d=Yt(t),y=ro(fi((y=Qi*d-eo*c)*y+(y=eo*l-Ji*d)*y+(y=Ji*c-Qi*l)*y),Ji*l+Qi*c+eo*d);Nm+=y,Gm+=y*(Ji+(Ji=l)),Zm+=y*(Qi+(Qi=c)),Wm+=y*(eo+(eo=d)),Sd(Ji,Qi,eo)}function M2(){Ts.point=A1}function Pz(){Ts.point=kz}function Mz(){qC(HC,XC),Ts.point=A1}function kz(e,t){HC=e,XC=t,e*=dn,t*=dn,Ts.point=qC;var i=rn(t);Ji=i*rn(e),Qi=i*Yt(e),eo=Yt(t),Sd(Ji,Qi,eo)}function qC(e,t){e*=dn,t*=dn;var i=rn(t),l=i*rn(e),c=i*Yt(e),d=Yt(t),y=Qi*d-eo*c,a=eo*l-Ji*d,b=Ji*c-Qi*l,w=Nv(y,a,b),C=io(w),E=w&&-C/w;Wv.add(E*y),Hv.add(E*a),Xv.add(E*b),Nm+=C,Gm+=C*(Ji+(Ji=l)),Zm+=C*(Qi+(Qi=c)),Wm+=C*(eo+(eo=d)),Sd(Ji,Qi,eo)}function zz(e){Cf=Nm=Um=$m=Vm=Gm=Zm=Wm=0,Wv=new Bi,Hv=new Bi,Xv=new Bi,ws(e,Ts);var t=+Wv,i=+Hv,l=+Xv,c=Nv(t,i,l);return c<fd&&(t=Gm,i=Zm,l=Wm,Nm<fn&&(t=Um,i=$m,l=Vm),c=Nv(t,i,l),c<fd)?[NaN,NaN]:[ro(i,t)*or,io(l/c)*or]}function Ic(e){return function(){return e}}function qv(e,t){function i(l,c){return l=e(l,c),t(l[0],l[1])}return e.invert&&t.invert&&(i.invert=function(l,c){return l=t.invert(l,c),l&&e.invert(l[0],l[1])}),i}function Kv(e,t){return[$n(e)>Pn?e+Math.round(-e/no)*no:e,t]}Kv.invert=Kv;function I1(e,t,i){return(e%=no)?t||i?qv(z2(e),L2(t,i)):z2(e):t||i?L2(t,i):Kv}function k2(e){return function(t,i){return t+=e,[t>Pn?t-no:t<-Pn?t+no:t,i]}}function z2(e){var t=k2(e);return t.invert=k2(-e),t}function L2(e,t){var i=rn(e),l=Yt(e),c=rn(t),d=Yt(t);function y(a,b){var w=rn(b),C=rn(a)*w,E=Yt(a)*w,z=Yt(b),R=z*i+C*l;return[ro(E*c-R*d,C*i-z*l),io(R*c+E*d)]}return y.invert=function(a,b){var w=rn(b),C=rn(a)*w,E=Yt(a)*w,z=Yt(b),R=z*c-E*d;return[ro(E*c+z*d,C*i+R*l),io(R*i-C*l)]},y}function KC(e){e=I1(e[0]*dn,e[1]*dn,e.length>2?e[2]*dn:0);function t(i){return i=e(i[0]*dn,i[1]*dn),i[0]*=or,i[1]*=or,i}return t.invert=function(i){return i=e.invert(i[0]*dn,i[1]*dn),i[0]*=or,i[1]*=or,i},t}function YC(e,t,i,l,c,d){if(i){var y=rn(t),a=Yt(t),b=l*i;c==null?(c=t+l*no,d=t-b/2):(c=O2(y,c),d=O2(y,d),(l>0?c<d:c>d)&&(c+=l*no));for(var w,C=c;l>0?C>d:C<d;C-=b)w=Dm([y,-a*rn(C),-a*Yt(C)]),e.point(w[0],w[1])}}function O2(e,t){t=Ru(t),t[0]-=e,Bm(t);var i=BC(-t[1]);return((-t[2]<0?-i:i)+no-fn)%no}function Lz(){var e=Ic([0,0]),t=Ic(90),i=Ic(6),l,c,d={point:y};function y(b,w){l.push(b=c(b,w)),b[0]*=or,b[1]*=or}function a(){var b=e.apply(this,arguments),w=t.apply(this,arguments)*dn,C=i.apply(this,arguments)*dn;return l=[],c=I1(-b[0]*dn,-b[1]*dn,0).invert,YC(d,w,C,1),b={type:"Polygon",coordinates:[l]},l=c=null,b}return a.center=function(b){return arguments.length?(e=typeof b=="function"?b:Ic([+b[0],+b[1]]),a):e},a.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Ic(+b),a):t},a.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Ic(+b),a):i},a}function JC(){var e=[],t;return{point:function(i,l,c){t.push([i,l,c])},lineStart:function(){e.push(t=[])},lineEnd:Ir,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Kp(e,t){return $n(e[0]-t[0])<fn&&$n(e[1]-t[1])<fn}function Pp(e,t,i,l){this.x=e,this.z=t,this.o=i,this.e=l,this.v=!1,this.n=this.p=null}function QC(e,t,i,l,c){var d=[],y=[],a,b;if(e.forEach(function(Q){if(!((K=Q.length-1)<=0)){var K,pe=Q[0],G=Q[K],$;if(Kp(pe,G)){if(!pe[2]&&!G[2]){for(c.lineStart(),a=0;a<K;++a)c.point((pe=Q[a])[0],pe[1]);c.lineEnd();return}G[0]+=2*fn}d.push($=new Pp(pe,Q,null,!0)),y.push($.o=new Pp(pe,null,$,!1)),d.push($=new Pp(G,Q,null,!1)),y.push($.o=new Pp(G,null,$,!0))}}),!!d.length){for(y.sort(t),R2(d),R2(y),a=0,b=y.length;a<b;++a)y[a].e=i=!i;for(var w=d[0],C,E;;){for(var z=w,R=!0;z.v;)if((z=z.n)===w)return;C=z.z,c.lineStart();do{if(z.v=z.o.v=!0,z.e){if(R)for(a=0,b=C.length;a<b;++a)c.point((E=C[a])[0],E[1]);else l(z.x,z.n.x,1,c);z=z.n}else{if(R)for(C=z.p.z,a=C.length-1;a>=0;--a)c.point((E=C[a])[0],E[1]);else l(z.x,z.p.x,-1,c);z=z.p}z=z.o,C=z.z,R=!R}while(!z.v);c.lineEnd()}}}function R2(e){if(t=e.length){for(var t,i=0,l=e[0],c;++i<t;)l.n=c=e[i],c.p=l,l=c;l.n=c=e[0],c.p=l}}function u0(e){return $n(e[0])<=Pn?e[0]:es(e[0])*(($n(e[0])+Pn)%no-Pn)}function eA(e,t){var i=u0(t),l=t[1],c=Yt(l),d=[Yt(i),-rn(i),0],y=0,a=0,b=new Bi;c===1?l=Fr+fn:c===-1&&(l=-Fr-fn);for(var w=0,C=e.length;w<C;++w)if(z=(E=e[w]).length)for(var E,z,R=E[z-1],Q=u0(R),K=R[1]/2+Lm,pe=Yt(K),G=rn(K),$=0;$<z;++$,Q=oe,pe=D,G=S,R=B){var B=E[$],oe=u0(B),W=B[1]/2+Lm,D=Yt(W),S=rn(W),P=oe-Q,Z=P>=0?1:-1,J=Z*P,H=J>Pn,ve=pe*D;if(b.add(ro(ve*Z*Yt(J),G*S+ve*rn(J))),y+=H?P+Z*no:P,H^Q>=i^oe>=i){var _e=ph(Ru(R),Ru(B));Bm(_e);var xe=ph(d,_e);Bm(xe);var te=(H^P>=0?-1:1)*io(xe[2]);(l>te||l===te&&(_e[0]||_e[1]))&&(a+=H^P>=0?1:-1)}}return(y<-fn||y<fn&&b<-fd)^a&1}function tA(e,t,i,l){return function(c){var d=t(c),y=JC(),a=t(y),b=!1,w,C,E,z={point:R,lineStart:K,lineEnd:pe,polygonStart:function(){z.point=G,z.lineStart=$,z.lineEnd=B,C=[],w=[]},polygonEnd:function(){z.point=R,z.lineStart=K,z.lineEnd=pe,C=jC(C);var oe=eA(w,l);C.length?(b||(c.polygonStart(),b=!0),QC(C,Rz,oe,i,c)):oe&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),C=w=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function R(oe,W){e(oe,W)&&c.point(oe,W)}function Q(oe,W){d.point(oe,W)}function K(){z.point=Q,d.lineStart()}function pe(){z.point=R,d.lineEnd()}function G(oe,W){E.push([oe,W]),a.point(oe,W)}function $(){a.lineStart(),E=[]}function B(){G(E[0][0],E[0][1]),a.lineEnd();var oe=a.clean(),W=y.result(),D,S=W.length,P,Z,J;if(E.pop(),w.push(E),E=null,!!S){if(oe&1){if(Z=W[0],(P=Z.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),D=0;D<P;++D)c.point((J=Z[D])[0],J[1]);c.lineEnd()}return}S>1&&oe&2&&W.push(W.pop().concat(W.shift())),C.push(W.filter(Oz))}}return z}}function Oz(e){return e.length>1}function Rz(e,t){return((e=e.x)[0]<0?e[1]-Fr-fn:Fr-e[1])-((t=t.x)[0]<0?t[1]-Fr-fn:Fr-t[1])}const Yv=tA(function(){return!0},Fz,Dz,[-Pn,-Fr]);function Fz(e){var t=NaN,i=NaN,l=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(d,y){var a=d>0?Pn:-Pn,b=$n(d-t);$n(b-Pn)<fn?(e.point(t,i=(i+y)/2>0?Fr:-Fr),e.point(l,i),e.lineEnd(),e.lineStart(),e.point(a,i),e.point(d,i),c=0):l!==a&&b>=Pn&&($n(t-l)<fn&&(t-=l*fn),$n(d-a)<fn&&(d-=a*fn),i=jz(t,i,d,y),e.point(l,i),e.lineEnd(),e.lineStart(),e.point(a,i),c=0),e.point(t=d,i=y),l=a},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function jz(e,t,i,l){var c,d,y=Yt(e-i);return $n(y)>fn?Eh((Yt(t)*(d=rn(l))*Yt(i)-Yt(l)*(c=rn(t))*Yt(e))/(c*d*y)):(t+l)/2}function Dz(e,t,i,l){var c;if(e==null)c=i*Fr,l.point(-Pn,c),l.point(0,c),l.point(Pn,c),l.point(Pn,0),l.point(Pn,-c),l.point(0,-c),l.point(-Pn,-c),l.point(-Pn,0),l.point(-Pn,c);else if($n(e[0]-t[0])>fn){var d=e[0]<t[0]?Pn:-Pn;c=i*d/2,l.point(-d,c),l.point(0,c),l.point(d,c)}else l.point(t[0],t[1])}function nA(e){var t=rn(e),i=6*dn,l=t>0,c=$n(t)>fn;function d(C,E,z,R){YC(R,e,i,z,C,E)}function y(C,E){return rn(C)*rn(E)>t}function a(C){var E,z,R,Q,K;return{lineStart:function(){Q=R=!1,K=1},point:function(pe,G){var $=[pe,G],B,oe=y(pe,G),W=l?oe?0:w(pe,G):oe?w(pe+(pe<0?Pn:-Pn),G):0;if(!E&&(Q=R=oe)&&C.lineStart(),oe!==R&&(B=b(E,$),(!B||Kp(E,B)||Kp($,B))&&($[2]=1)),oe!==R)K=0,oe?(C.lineStart(),B=b($,E),C.point(B[0],B[1])):(B=b(E,$),C.point(B[0],B[1],2),C.lineEnd()),E=B;else if(c&&E&&l^oe){var D;!(W&z)&&(D=b($,E,!0))&&(K=0,l?(C.lineStart(),C.point(D[0][0],D[0][1]),C.point(D[1][0],D[1][1]),C.lineEnd()):(C.point(D[1][0],D[1][1]),C.lineEnd(),C.lineStart(),C.point(D[0][0],D[0][1],3)))}oe&&(!E||!Kp(E,$))&&C.point($[0],$[1]),E=$,R=oe,z=W},lineEnd:function(){R&&C.lineEnd(),E=null},clean:function(){return K|(Q&&R)<<1}}}function b(C,E,z){var R=Ru(C),Q=Ru(E),K=[1,0,0],pe=ph(R,Q),G=Ap(pe,pe),$=pe[0],B=G-$*$;if(!B)return!z&&C;var oe=t*G/B,W=-t*$/B,D=ph(K,pe),S=Ip(K,oe),P=Ip(pe,W);l0(S,P);var Z=D,J=Ap(S,Z),H=Ap(Z,Z),ve=J*J-H*(Ap(S,S)-1);if(!(ve<0)){var _e=fi(ve),xe=Ip(Z,(-J-_e)/H);if(l0(xe,S),xe=Dm(xe),!z)return xe;var te=C[0],le=E[0],ne=C[1],re=E[1],me;le<te&&(me=te,te=le,le=me);var we=le-te,be=$n(we-Pn)<fn,Be=be||we<fn;if(!be&&re<ne&&(me=ne,ne=re,re=me),Be?be?ne+re>0^xe[1]<($n(xe[0]-te)<fn?ne:re):ne<=xe[1]&&xe[1]<=re:we>Pn^(te<=xe[0]&&xe[0]<=le)){var Ie=Ip(Z,(-J+_e)/H);return l0(Ie,S),[xe,Dm(Ie)]}}}function w(C,E){var z=l?e:Pn-e,R=0;return C<-z?R|=1:C>z&&(R|=2),E<-z?R|=4:E>z&&(R|=8),R}return tA(y,a,d,l?[0,-e]:[-Pn,e-Pn])}function Bz(e,t,i,l,c,d){var y=e[0],a=e[1],b=t[0],w=t[1],C=0,E=1,z=b-y,R=w-a,Q;if(Q=i-y,!(!z&&Q>0)){if(Q/=z,z<0){if(Q<C)return;Q<E&&(E=Q)}else if(z>0){if(Q>E)return;Q>C&&(C=Q)}if(Q=c-y,!(!z&&Q<0)){if(Q/=z,z<0){if(Q>E)return;Q>C&&(C=Q)}else if(z>0){if(Q<C)return;Q<E&&(E=Q)}if(Q=l-a,!(!R&&Q>0)){if(Q/=R,R<0){if(Q<C)return;Q<E&&(E=Q)}else if(R>0){if(Q>E)return;Q>C&&(C=Q)}if(Q=d-a,!(!R&&Q<0)){if(Q/=R,R<0){if(Q>E)return;Q>C&&(C=Q)}else if(R>0){if(Q<C)return;Q<E&&(E=Q)}return C>0&&(e[0]=y+C*z,e[1]=a+C*R),E<1&&(t[0]=y+E*z,t[1]=a+E*R),!0}}}}}var Af=1e9,Mp=-Af;function Ag(e,t,i,l){function c(w,C){return e<=w&&w<=i&&t<=C&&C<=l}function d(w,C,E,z){var R=0,Q=0;if(w==null||(R=y(w,E))!==(Q=y(C,E))||b(w,C)<0^E>0)do z.point(R===0||R===3?e:i,R>1?l:t);while((R=(R+E+4)%4)!==Q);else z.point(C[0],C[1])}function y(w,C){return $n(w[0]-e)<fn?C>0?0:3:$n(w[0]-i)<fn?C>0?2:1:$n(w[1]-t)<fn?C>0?1:0:C>0?3:2}function a(w,C){return b(w.x,C.x)}function b(w,C){var E=y(w,1),z=y(C,1);return E!==z?E-z:E===0?C[1]-w[1]:E===1?w[0]-C[0]:E===2?w[1]-C[1]:C[0]-w[0]}return function(w){var C=w,E=JC(),z,R,Q,K,pe,G,$,B,oe,W,D,S={point:P,lineStart:ve,lineEnd:_e,polygonStart:J,polygonEnd:H};function P(te,le){c(te,le)&&C.point(te,le)}function Z(){for(var te=0,le=0,ne=R.length;le<ne;++le)for(var re=R[le],me=1,we=re.length,be=re[0],Be,Ie,Oe=be[0],$e=be[1];me<we;++me)Be=Oe,Ie=$e,be=re[me],Oe=be[0],$e=be[1],Ie<=l?$e>l&&(Oe-Be)*(l-Ie)>($e-Ie)*(e-Be)&&++te:$e<=l&&(Oe-Be)*(l-Ie)<($e-Ie)*(e-Be)&&--te;return te}function J(){C=E,z=[],R=[],D=!0}function H(){var te=Z(),le=D&&te,ne=(z=jC(z)).length;(le||ne)&&(w.polygonStart(),le&&(w.lineStart(),d(null,null,1,w),w.lineEnd()),ne&&QC(z,a,te,d,w),w.polygonEnd()),C=w,z=R=Q=null}function ve(){S.point=xe,R&&R.push(Q=[]),W=!0,oe=!1,$=B=NaN}function _e(){z&&(xe(K,pe),G&&oe&&E.rejoin(),z.push(E.result())),S.point=P,oe&&C.lineEnd()}function xe(te,le){var ne=c(te,le);if(R&&Q.push([te,le]),W)K=te,pe=le,G=ne,W=!1,ne&&(C.lineStart(),C.point(te,le));else if(ne&&oe)C.point(te,le);else{var re=[$=Math.max(Mp,Math.min(Af,$)),B=Math.max(Mp,Math.min(Af,B))],me=[te=Math.max(Mp,Math.min(Af,te)),le=Math.max(Mp,Math.min(Af,le))];Bz(re,me,e,t,i,l)?(oe||(C.lineStart(),C.point(re[0],re[1])),C.point(me[0],me[1]),ne||C.lineEnd(),D=!1):ne&&(C.lineStart(),C.point(te,le),D=!1)}$=te,B=le,oe=ne}return S}}function Nz(){var e=0,t=0,i=960,l=500,c,d,y;return y={stream:function(a){return c&&d===a?c:c=Ag(e,t,i,l)(d=a)},extent:function(a){return arguments.length?(e=+a[0][0],t=+a[0][1],i=+a[1][0],l=+a[1][1],c=d=null,y):[[e,t],[i,l]]}}}var Jv,Qv,Yp,Jp,mh={sphere:Ir,point:Ir,lineStart:Uz,lineEnd:Ir,polygonStart:Ir,polygonEnd:Ir};function Uz(){mh.point=Vz,mh.lineEnd=$z}function $z(){mh.point=mh.lineEnd=Ir}function Vz(e,t){e*=dn,t*=dn,Qv=e,Yp=Yt(t),Jp=rn(t),mh.point=Gz}function Gz(e,t){e*=dn,t*=dn;var i=Yt(t),l=rn(t),c=$n(e-Qv),d=rn(c),y=Yt(c),a=l*y,b=Jp*i-Yp*l*d,w=Yp*i+Jp*l*d;Jv.add(ro(fi(a*a+b*b),w)),Qv=e,Yp=i,Jp=l}function rA(e){return Jv=new Bi,ws(e,mh),+Jv}var e_=[null,null],Zz={type:"LineString",coordinates:e_};function Hm(e,t){return e_[0]=e,e_[1]=t,rA(Zz)}var F2={Feature:function(e,t){return Xm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,l=-1,c=i.length;++l<c;)if(Xm(i[l].geometry,t))return!0;return!1}},j2={Sphere:function(){return!0},Point:function(e,t){return D2(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(D2(i[l],t))return!0;return!1},LineString:function(e,t){return B2(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(B2(i[l],t))return!0;return!1},Polygon:function(e,t){return N2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(N2(i[l],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,l=-1,c=i.length;++l<c;)if(Xm(i[l],t))return!0;return!1}};function Xm(e,t){return e&&j2.hasOwnProperty(e.type)?j2[e.type](e,t):!1}function D2(e,t){return Hm(e,t)===0}function B2(e,t){for(var i,l,c,d=0,y=e.length;d<y;d++){if(l=Hm(e[d],t),l===0||d>0&&(c=Hm(e[d],e[d-1]),c>0&&i<=c&&l<=c&&(i+l-c)*(1-Math.pow((i-l)/c,2))<fd*c))return!0;i=l}return!1}function N2(e,t){return!!eA(e.map(Wz),iA(t))}function Wz(e){return e=e.map(iA),e.pop(),e}function iA(e){return[e[0]*dn,e[1]*dn]}function Hz(e,t){return(e&&F2.hasOwnProperty(e.type)?F2[e.type]:Xm)(e,t)}function U2(e,t,i){var l=qc(e,t-fn,i).concat(t);return function(c){return l.map(function(d){return[c,d]})}}function $2(e,t,i){var l=qc(e,t-fn,i).concat(t);return function(c){return l.map(function(d){return[d,c]})}}function oA(){var e,t,i,l,c,d,y,a,b=10,w=b,C=90,E=360,z,R,Q,K,pe=2.5;function G(){return{type:"MultiLineString",coordinates:$()}}function $(){return qc(Cp(l/C)*C,i,C).map(Q).concat(qc(Cp(a/E)*E,y,E).map(K)).concat(qc(Cp(t/b)*b,e,b).filter(function(B){return $n(B%C)>fn}).map(z)).concat(qc(Cp(d/w)*w,c,w).filter(function(B){return $n(B%E)>fn}).map(R))}return G.lines=function(){return $().map(function(B){return{type:"LineString",coordinates:B}})},G.outline=function(){return{type:"Polygon",coordinates:[Q(l).concat(K(y).slice(1),Q(i).reverse().slice(1),K(a).reverse().slice(1))]}},G.extent=function(B){return arguments.length?G.extentMajor(B).extentMinor(B):G.extentMinor()},G.extentMajor=function(B){return arguments.length?(l=+B[0][0],i=+B[1][0],a=+B[0][1],y=+B[1][1],l>i&&(B=l,l=i,i=B),a>y&&(B=a,a=y,y=B),G.precision(pe)):[[l,a],[i,y]]},G.extentMinor=function(B){return arguments.length?(t=+B[0][0],e=+B[1][0],d=+B[0][1],c=+B[1][1],t>e&&(B=t,t=e,e=B),d>c&&(B=d,d=c,c=B),G.precision(pe)):[[t,d],[e,c]]},G.step=function(B){return arguments.length?G.stepMajor(B).stepMinor(B):G.stepMinor()},G.stepMajor=function(B){return arguments.length?(C=+B[0],E=+B[1],G):[C,E]},G.stepMinor=function(B){return arguments.length?(b=+B[0],w=+B[1],G):[b,w]},G.precision=function(B){return arguments.length?(pe=+B,z=U2(d,c,90),R=$2(t,e,pe),Q=U2(a,y,90),K=$2(l,i,pe),G):pe},G.extentMajor([[-180,-90+fn],[180,90-fn]]).extentMinor([[-180,-80-fn],[180,80+fn]])}function Xz(){return oA()()}function qz(e,t){var i=e[0]*dn,l=e[1]*dn,c=t[0]*dn,d=t[1]*dn,y=rn(l),a=Yt(l),b=rn(d),w=Yt(d),C=y*rn(i),E=y*Yt(i),z=b*rn(c),R=b*Yt(c),Q=2*io(fi(b2(d-l)+y*b*b2(c-i))),K=Yt(Q),pe=Q?function(G){var $=Yt(G*=Q)/K,B=Yt(Q-G)/K,oe=B*C+$*z,W=B*E+$*R,D=B*a+$*w;return[ro(W,oe)*or,ro(D,fi(oe*oe+W*W))*or]}:function(){return[i*or,l*or]};return pe.distance=Q,pe}const dd=e=>e;var c0=new Bi,t_=new Bi,sA,aA,n_,r_,El={point:Ir,lineStart:Ir,lineEnd:Ir,polygonStart:function(){El.lineStart=Kz,El.lineEnd=Jz},polygonEnd:function(){El.lineStart=El.lineEnd=El.point=Ir,c0.add($n(t_)),t_=new Bi},result:function(){var e=c0/2;return c0=new Bi,e}};function Kz(){El.point=Yz}function Yz(e,t){El.point=lA,sA=n_=e,aA=r_=t}function lA(e,t){t_.add(r_*e-n_*t),n_=e,r_=t}function Jz(){lA(sA,aA)}const V2=El;var gh=1/0,qm=gh,pd=-gh,Km=pd,Qz={point:eL,lineStart:Ir,lineEnd:Ir,polygonStart:Ir,polygonEnd:Ir,result:function(){var e=[[gh,qm],[pd,Km]];return pd=Km=-(qm=gh=1/0),e}};function eL(e,t){e<gh&&(gh=e),e>pd&&(pd=e),t<qm&&(qm=t),t>Km&&(Km=t)}const Ym=Qz;var i_=0,o_=0,If=0,Jm=0,Qm=0,Kc=0,s_=0,a_=0,Pf=0,uA,cA,qs,Ks,bs={point:Fu,lineStart:G2,lineEnd:Z2,polygonStart:function(){bs.lineStart=rL,bs.lineEnd=iL},polygonEnd:function(){bs.point=Fu,bs.lineStart=G2,bs.lineEnd=Z2},result:function(){var e=Pf?[s_/Pf,a_/Pf]:Kc?[Jm/Kc,Qm/Kc]:If?[i_/If,o_/If]:[NaN,NaN];return i_=o_=If=Jm=Qm=Kc=s_=a_=Pf=0,e}};function Fu(e,t){i_+=e,o_+=t,++If}function G2(){bs.point=tL}function tL(e,t){bs.point=nL,Fu(qs=e,Ks=t)}function nL(e,t){var i=e-qs,l=t-Ks,c=fi(i*i+l*l);Jm+=c*(qs+e)/2,Qm+=c*(Ks+t)/2,Kc+=c,Fu(qs=e,Ks=t)}function Z2(){bs.point=Fu}function rL(){bs.point=oL}function iL(){hA(uA,cA)}function oL(e,t){bs.point=hA,Fu(uA=qs=e,cA=Ks=t)}function hA(e,t){var i=e-qs,l=t-Ks,c=fi(i*i+l*l);Jm+=c*(qs+e)/2,Qm+=c*(Ks+t)/2,Kc+=c,c=Ks*e-qs*t,s_+=c*(qs+e),a_+=c*(Ks+t),Pf+=c*3,Fu(qs=e,Ks=t)}const W2=bs;function fA(e){this._context=e}fA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,no);break}}},result:Ir};var l_=new Bi,h0,dA,pA,Mf,kf,eg={point:Ir,lineStart:function(){eg.point=sL},lineEnd:function(){h0&&mA(dA,pA),eg.point=Ir},polygonStart:function(){h0=!0},polygonEnd:function(){h0=null},result:function(){var e=+l_;return l_=new Bi,e}};function sL(e,t){eg.point=mA,dA=Mf=e,pA=kf=t}function mA(e,t){Mf-=e,kf-=t,l_.add(fi(Mf*Mf+kf*kf)),Mf=e,kf=t}const H2=eg;function gA(){this._string=[]}gA.prototype={_radius:4.5,_circle:X2(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=X2(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function X2(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function aL(e,t){var i=4.5,l,c;function d(y){return y&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),ws(y,l(c))),c.result()}return d.area=function(y){return ws(y,l(V2)),V2.result()},d.measure=function(y){return ws(y,l(H2)),H2.result()},d.bounds=function(y){return ws(y,l(Ym)),Ym.result()},d.centroid=function(y){return ws(y,l(W2)),W2.result()},d.projection=function(y){return arguments.length?(l=y==null?(e=null,dd):(e=y).stream,d):e},d.context=function(y){return arguments.length?(c=y==null?(t=null,new gA):new fA(t=y),typeof i!="function"&&c.pointRadius(i),d):t},d.pointRadius=function(y){return arguments.length?(i=typeof y=="function"?y:(c.pointRadius(+y),+y),d):i},d.projection(e).context(t)}function lL(e){return{stream:Td(e)}}function Td(e){return function(t){var i=new u_;for(var l in e)i[l]=e[l];return i.stream=t,i}}function u_(){}u_.prototype={constructor:u_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function P1(e,t,i){var l=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),l!=null&&e.clipExtent(null),ws(i,e.stream(Ym)),t(Ym.result()),l!=null&&e.clipExtent(l),e}function Ig(e,t,i){return P1(e,function(l){var c=t[1][0]-t[0][0],d=t[1][1]-t[0][1],y=Math.min(c/(l[1][0]-l[0][0]),d/(l[1][1]-l[0][1])),a=+t[0][0]+(c-y*(l[1][0]+l[0][0]))/2,b=+t[0][1]+(d-y*(l[1][1]+l[0][1]))/2;e.scale(150*y).translate([a,b])},i)}function M1(e,t,i){return Ig(e,[[0,0],t],i)}function k1(e,t,i){return P1(e,function(l){var c=+t,d=c/(l[1][0]-l[0][0]),y=(c-d*(l[1][0]+l[0][0]))/2,a=-d*l[0][1];e.scale(150*d).translate([y,a])},i)}function z1(e,t,i){return P1(e,function(l){var c=+t,d=c/(l[1][1]-l[0][1]),y=-d*l[0][0],a=(c-d*(l[1][1]+l[0][1]))/2;e.scale(150*d).translate([y,a])},i)}var q2=16,uL=rn(30*dn);function K2(e,t){return+t?hL(e,t):cL(e)}function cL(e){return Td({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function hL(e,t){function i(l,c,d,y,a,b,w,C,E,z,R,Q,K,pe){var G=w-l,$=C-c,B=G*G+$*$;if(B>4*t&&K--){var oe=y+z,W=a+R,D=b+Q,S=fi(oe*oe+W*W+D*D),P=io(D/=S),Z=$n($n(D)-1)<fn||$n(d-E)<fn?(d+E)/2:ro(W,oe),J=e(Z,P),H=J[0],ve=J[1],_e=H-l,xe=ve-c,te=$*_e-G*xe;(te*te/B>t||$n((G*_e+$*xe)/B-.5)>.3||y*z+a*R+b*Q<uL)&&(i(l,c,d,y,a,b,H,ve,Z,oe/=S,W/=S,D,K,pe),pe.point(H,ve),i(H,ve,Z,oe,W,D,w,C,E,z,R,Q,K,pe))}}return function(l){var c,d,y,a,b,w,C,E,z,R,Q,K,pe={point:G,lineStart:$,lineEnd:oe,polygonStart:function(){l.polygonStart(),pe.lineStart=W},polygonEnd:function(){l.polygonEnd(),pe.lineStart=$}};function G(P,Z){P=e(P,Z),l.point(P[0],P[1])}function $(){E=NaN,pe.point=B,l.lineStart()}function B(P,Z){var J=Ru([P,Z]),H=e(P,Z);i(E,z,C,R,Q,K,E=H[0],z=H[1],C=P,R=J[0],Q=J[1],K=J[2],q2,l),l.point(E,z)}function oe(){pe.point=G,l.lineEnd()}function W(){$(),pe.point=D,pe.lineEnd=S}function D(P,Z){B(c=P,Z),d=E,y=z,a=R,b=Q,w=K,pe.point=B}function S(){i(E,z,C,R,Q,K,d,y,c,a,b,w,q2,l),pe.lineEnd=oe,oe()}return pe}}var fL=Td({point:function(e,t){this.stream.point(e*dn,t*dn)}});function dL(e){return Td({point:function(t,i){var l=e(t,i);return this.stream.point(l[0],l[1])}})}function pL(e,t,i,l,c){function d(y,a){return y*=l,a*=c,[t+e*y,i-e*a]}return d.invert=function(y,a){return[(y-t)/e*l,(i-a)/e*c]},d}function Y2(e,t,i,l,c,d){if(!d)return pL(e,t,i,l,c);var y=rn(d),a=Yt(d),b=y*e,w=a*e,C=y/e,E=a/e,z=(a*i-y*t)/e,R=(a*t+y*i)/e;function Q(K,pe){return K*=l,pe*=c,[b*K-w*pe+t,i-w*K-b*pe]}return Q.invert=function(K,pe){return[l*(C*K-E*pe+z),c*(R-E*K-C*pe)]},Q}function ra(e){return L1(function(){return e})()}function L1(e){var t,i=150,l=480,c=250,d=0,y=0,a=0,b=0,w=0,C,E=0,z=1,R=1,Q=null,K=Yv,pe=null,G,$,B,oe=dd,W=.5,D,S,P,Z,J;function H(te){return P(te[0]*dn,te[1]*dn)}function ve(te){return te=P.invert(te[0],te[1]),te&&[te[0]*or,te[1]*or]}H.stream=function(te){return Z&&J===te?Z:Z=fL(dL(C)(K(D(oe(J=te)))))},H.preclip=function(te){return arguments.length?(K=te,Q=void 0,xe()):K},H.postclip=function(te){return arguments.length?(oe=te,pe=G=$=B=null,xe()):oe},H.clipAngle=function(te){return arguments.length?(K=+te?nA(Q=te*dn):(Q=null,Yv),xe()):Q*or},H.clipExtent=function(te){return arguments.length?(oe=te==null?(pe=G=$=B=null,dd):Ag(pe=+te[0][0],G=+te[0][1],$=+te[1][0],B=+te[1][1]),xe()):pe==null?null:[[pe,G],[$,B]]},H.scale=function(te){return arguments.length?(i=+te,_e()):i},H.translate=function(te){return arguments.length?(l=+te[0],c=+te[1],_e()):[l,c]},H.center=function(te){return arguments.length?(d=te[0]%360*dn,y=te[1]%360*dn,_e()):[d*or,y*or]},H.rotate=function(te){return arguments.length?(a=te[0]%360*dn,b=te[1]%360*dn,w=te.length>2?te[2]%360*dn:0,_e()):[a*or,b*or,w*or]},H.angle=function(te){return arguments.length?(E=te%360*dn,_e()):E*or},H.reflectX=function(te){return arguments.length?(z=te?-1:1,_e()):z<0},H.reflectY=function(te){return arguments.length?(R=te?-1:1,_e()):R<0},H.precision=function(te){return arguments.length?(D=K2(S,W=te*te),xe()):fi(W)},H.fitExtent=function(te,le){return Ig(H,te,le)},H.fitSize=function(te,le){return M1(H,te,le)},H.fitWidth=function(te,le){return k1(H,te,le)},H.fitHeight=function(te,le){return z1(H,te,le)};function _e(){var te=Y2(i,0,0,z,R,E).apply(null,t(d,y)),le=Y2(i,l-te[0],c-te[1],z,R,E);return C=I1(a,b,w),S=qv(t,le),P=qv(C,S),D=K2(S,W),xe()}function xe(){return Z=J=null,H}return function(){return t=e.apply(this,arguments),H.invert=t.invert&&ve,_e()}}function O1(e){var t=0,i=Pn/3,l=L1(e),c=l(t,i);return c.parallels=function(d){return arguments.length?l(t=d[0]*dn,i=d[1]*dn):[t*or,i*or]},c}function mL(e){var t=rn(e);function i(l,c){return[l*t,Yt(c)/t]}return i.invert=function(l,c){return[l/t,io(c*t)]},i}function yA(e,t){var i=Yt(e),l=(i+Yt(t))/2;if($n(l)<fn)return mL(e);var c=1+i*(2*l-i),d=fi(c)/l;function y(a,b){var w=fi(c-2*l*Yt(b))/l;return[w*Yt(a*=l),d-w*rn(a)]}return y.invert=function(a,b){var w=d-b,C=ro(a,$n(w))*es(w);return w*l<0&&(C-=Pn*es(a)*es(w)),[C/l,io((c-(a*a+w*w)*l*l)/(2*l))]},y}function tg(){return O1(yA).scale(155.424).center([0,33.6442])}function vA(){return tg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function gL(e){var t=e.length;return{point:function(i,l){for(var c=-1;++c<t;)e[c].point(i,l)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function yL(){var e,t,i=vA(),l,c=tg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d,y=tg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,b,w={point:function(z,R){b=[z,R]}};function C(z){var R=z[0],Q=z[1];return b=null,l.point(R,Q),b||(d.point(R,Q),b)||(a.point(R,Q),b)}C.invert=function(z){var R=i.scale(),Q=i.translate(),K=(z[0]-Q[0])/R,pe=(z[1]-Q[1])/R;return(pe>=.12&&pe<.234&&K>=-.425&&K<-.214?c:pe>=.166&&pe<.234&&K>=-.214&&K<-.115?y:i).invert(z)},C.stream=function(z){return e&&t===z?e:e=gL([i.stream(t=z),c.stream(z),y.stream(z)])},C.precision=function(z){return arguments.length?(i.precision(z),c.precision(z),y.precision(z),E()):i.precision()},C.scale=function(z){return arguments.length?(i.scale(z),c.scale(z*.35),y.scale(z),C.translate(i.translate())):i.scale()},C.translate=function(z){if(!arguments.length)return i.translate();var R=i.scale(),Q=+z[0],K=+z[1];return l=i.translate(z).clipExtent([[Q-.455*R,K-.238*R],[Q+.455*R,K+.238*R]]).stream(w),d=c.translate([Q-.307*R,K+.201*R]).clipExtent([[Q-.425*R+fn,K+.12*R+fn],[Q-.214*R-fn,K+.234*R-fn]]).stream(w),a=y.translate([Q-.205*R,K+.212*R]).clipExtent([[Q-.214*R+fn,K+.166*R+fn],[Q-.115*R-fn,K+.234*R-fn]]).stream(w),E()},C.fitExtent=function(z,R){return Ig(C,z,R)},C.fitSize=function(z,R){return M1(C,z,R)},C.fitWidth=function(z,R){return k1(C,z,R)},C.fitHeight=function(z,R){return z1(C,z,R)};function E(){return e=t=null,C}return C.scale(1070)}function _A(e){return function(t,i){var l=rn(t),c=rn(i),d=e(l*c);return d===1/0?[2,0]:[d*c*Yt(t),d*Yt(i)]}}function Cd(e){return function(t,i){var l=fi(t*t+i*i),c=e(l),d=Yt(c),y=rn(c);return[ro(t*d,l*y),io(l&&i*d/l)]}}var R1=_A(function(e){return fi(2/(1+e))});R1.invert=Cd(function(e){return 2*io(e/2)});function vL(){return ra(R1).scale(124.75).clipAngle(180-.001)}var F1=_A(function(e){return(e=BC(e))&&e/Yt(e)});F1.invert=Cd(function(e){return e});function _L(){return ra(F1).scale(79.4188).clipAngle(180-.001)}function Ad(e,t){return[e,Om(C1((Fr+t)/2))]}Ad.invert=function(e,t){return[e,2*Eh(DC(t))-Fr]};function xL(){return xA(Ad).scale(961/no)}function xA(e){var t=ra(e),i=t.center,l=t.scale,c=t.translate,d=t.clipExtent,y=null,a,b,w;t.scale=function(E){return arguments.length?(l(E),C()):l()},t.translate=function(E){return arguments.length?(c(E),C()):c()},t.center=function(E){return arguments.length?(i(E),C()):i()},t.clipExtent=function(E){return arguments.length?(E==null?y=a=b=w=null:(y=+E[0][0],a=+E[0][1],b=+E[1][0],w=+E[1][1]),C()):y==null?null:[[y,a],[b,w]]};function C(){var E=Pn*l(),z=t(KC(t.rotate()).invert([0,0]));return d(y==null?[[z[0]-E,z[1]-E],[z[0]+E,z[1]+E]]:e===Ad?[[Math.max(z[0]-E,y),a],[Math.min(z[0]+E,b),w]]:[[y,Math.max(z[1]-E,a)],[b,Math.min(z[1]+E,w)]])}return C()}function kp(e){return C1((Fr+e)/2)}function wA(e,t){var i=rn(e),l=e===t?Yt(e):Om(i/rn(t))/Om(kp(t)/kp(e)),c=i*a0(kp(e),l)/l;if(!l)return Ad;function d(y,a){c>0?a<-Fr+fn&&(a=-Fr+fn):a>Fr-fn&&(a=Fr-fn);var b=c/a0(kp(a),l);return[b*Yt(l*y),c-b*rn(l*y)]}return d.invert=function(y,a){var b=c-a,w=es(l)*fi(y*y+b*b),C=ro(y,$n(b))*es(b);return b*l<0&&(C-=Pn*es(y)*es(b)),[C/l,2*Eh(a0(c/w,1/l))-Fr]},d}function wL(){return O1(wA).scale(109.5).parallels([30,30])}function md(e,t){return[e,t]}md.invert=md;function bL(){return ra(md).scale(152.63)}function bA(e,t){var i=rn(e),l=e===t?Yt(e):(i-rn(t))/(t-e),c=i/l+e;if($n(l)<fn)return md;function d(y,a){var b=c-a,w=l*y;return[b*Yt(w),c-b*rn(w)]}return d.invert=function(y,a){var b=c-a,w=ro(y,$n(b))*es(b);return b*l<0&&(w-=Pn*es(y)*es(b)),[w/l,c-es(l)*fi(y*y+b*b)]},d}function EL(){return O1(bA).scale(131.154).center([0,13.9389])}var Gf=1.340264,Zf=-.081106,Wf=893e-6,Hf=.003796,ng=fi(3)/2,SL=12;function j1(e,t){var i=io(ng*Yt(t)),l=i*i,c=l*l*l;return[e*rn(i)/(ng*(Gf+3*Zf*l+c*(7*Wf+9*Hf*l))),i*(Gf+Zf*l+c*(Wf+Hf*l))]}j1.invert=function(e,t){for(var i=t,l=i*i,c=l*l*l,d=0,y,a,b;d<SL&&(a=i*(Gf+Zf*l+c*(Wf+Hf*l))-t,b=Gf+3*Zf*l+c*(7*Wf+9*Hf*l),i-=y=a/b,l=i*i,c=l*l*l,!($n(y)<fd));++d);return[ng*e*(Gf+3*Zf*l+c*(7*Wf+9*Hf*l))/rn(i),io(Yt(i)/ng)]};function TL(){return ra(j1).scale(177.158)}function D1(e,t){var i=rn(t),l=rn(e)*i;return[i*Yt(e)/l,Yt(t)/l]}D1.invert=Cd(Eh);function CL(){return ra(D1).scale(144.049).clipAngle(60)}function AL(){var e=1,t=0,i=0,l=1,c=1,d=0,y,a,b=null,w,C,E,z=1,R=1,Q=Td({point:function(oe,W){var D=B([oe,W]);this.stream.point(D[0],D[1])}}),K=dd,pe,G;function $(){return z=e*l,R=e*c,pe=G=null,B}function B(oe){var W=oe[0]*z,D=oe[1]*R;if(d){var S=D*y-W*a;W=W*y+D*a,D=S}return[W+t,D+i]}return B.invert=function(oe){var W=oe[0]-t,D=oe[1]-i;if(d){var S=D*y+W*a;W=W*y-D*a,D=S}return[W/z,D/R]},B.stream=function(oe){return pe&&G===oe?pe:pe=Q(K(G=oe))},B.postclip=function(oe){return arguments.length?(K=oe,b=w=C=E=null,$()):K},B.clipExtent=function(oe){return arguments.length?(K=oe==null?(b=w=C=E=null,dd):Ag(b=+oe[0][0],w=+oe[0][1],C=+oe[1][0],E=+oe[1][1]),$()):b==null?null:[[b,w],[C,E]]},B.scale=function(oe){return arguments.length?(e=+oe,$()):e},B.translate=function(oe){return arguments.length?(t=+oe[0],i=+oe[1],$()):[t,i]},B.angle=function(oe){return arguments.length?(d=oe%360*dn,a=Yt(d),y=rn(d),$()):d*or},B.reflectX=function(oe){return arguments.length?(l=oe?-1:1,$()):l<0},B.reflectY=function(oe){return arguments.length?(c=oe?-1:1,$()):c<0},B.fitExtent=function(oe,W){return Ig(B,oe,W)},B.fitSize=function(oe,W){return M1(B,oe,W)},B.fitWidth=function(oe,W){return k1(B,oe,W)},B.fitHeight=function(oe,W){return z1(B,oe,W)},B}function B1(e,t){var i=t*t,l=i*i;return[e*(.8707-.131979*i+l*(-.013791+l*(.003971*i-.001529*l))),t*(1.007226+i*(.015085+l*(-.044475+.028874*i-.005916*l)))]}B1.invert=function(e,t){var i=t,l=25,c;do{var d=i*i,y=d*d;i-=c=(i*(1.007226+d*(.015085+y*(-.044475+.028874*d-.005916*y)))-t)/(1.007226+d*(.015085*3+y*(-.044475*7+.028874*9*d-.005916*11*y)))}while($n(c)>fn&&--l>0);return[e/(.8707+(d=i*i)*(-.131979+d*(-.013791+d*d*d*(.003971-.001529*d)))),i]};function IL(){return ra(B1).scale(175.295)}function N1(e,t){return[rn(t)*Yt(e),Yt(t)]}N1.invert=Cd(io);function PL(){return ra(N1).scale(249.5).clipAngle(90+fn)}function U1(e,t){var i=rn(t),l=1+rn(e)*i;return[i*Yt(e)/l,Yt(t)/l]}U1.invert=Cd(function(e){return 2*Eh(e)});function ML(){return ra(U1).scale(250).clipAngle(142)}function $1(e,t){return[Om(C1((Fr+t)/2)),-e]}$1.invert=function(e,t){return[-t,2*Eh(DC(e))-Fr]};function kL(){var e=xA($1),t=e.center,i=e.rotate;return e.center=function(l){return arguments.length?t([-l[1],l[0]]):(l=t(),[l[1],-l[0]])},e.rotate=function(l){return arguments.length?i([l[0],l[1],l.length>2?l[2]+90:90]):(l=i(),[l[0],l[1],l[2]-90])},i([0,0,90]).scale(159.155)}const zL=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:vA,geoAlbersUsa:yL,geoArea:bz,geoAzimuthalEqualArea:vL,geoAzimuthalEqualAreaRaw:R1,geoAzimuthalEquidistant:_L,geoAzimuthalEquidistantRaw:F1,geoBounds:Cz,geoCentroid:zz,geoCircle:Lz,geoClipAntimeridian:Yv,geoClipCircle:nA,geoClipExtent:Nz,geoClipRectangle:Ag,geoConicConformal:wL,geoConicConformalRaw:wA,geoConicEqualArea:tg,geoConicEqualAreaRaw:yA,geoConicEquidistant:EL,geoConicEquidistantRaw:bA,geoContains:Hz,geoDistance:Hm,geoEqualEarth:TL,geoEqualEarthRaw:j1,geoEquirectangular:bL,geoEquirectangularRaw:md,geoGnomonic:CL,geoGnomonicRaw:D1,geoGraticule:oA,geoGraticule10:Xz,geoIdentity:AL,geoInterpolate:qz,geoLength:rA,geoMercator:xL,geoMercatorRaw:Ad,geoNaturalEarth1:IL,geoNaturalEarth1Raw:B1,geoOrthographic:PL,geoOrthographicRaw:N1,geoPath:aL,geoProjection:ra,geoProjectionMutator:L1,geoRotation:KC,geoStereographic:ML,geoStereographicRaw:U1,geoStream:ws,geoTransform:lL,geoTransverseMercator:kL,geoTransverseMercatorRaw:$1},Symbol.toStringTag,{value:"Module"})),LL=g_(zL);var Bl=2*Math.PI*6378137/2,OL=Math.PI/180;function EA(e){return e=e||256,2*Math.PI*6378137/e}function RL(e){var t=e[0],i=e[1],l=e[2];return(1<<l)*((1<<l)+t)+i}function c_(e,t,i){var l=SA(e,t,i);return l[0]=Math.floor(l[0]),l[1]=Math.floor(l[1]),l}function SA(e,t,i){var l=t,c=K1(e[0]),d=q1(e[1]),y=Math.sin(d*OL),a=Math.pow(2,l),b=a*(c/360+.5),w=a*(.5-.25*Math.log((1+y)/(1-y))/Math.PI);return Nu([b,w,l],i)}function FL(e,t=6){var i=e[0],l=e[1],c=e[2],d=e[3],y=(i-c)/2+c,a=(l-d)/2+d;return t!=null&&(y=Number(y.toFixed(t)),a=Number(a.toFixed(t))),[y,a]}function rg(e,t,i={enable:!0,decimal:1}){e=Pg(e,t);var l=e[0],c=e[1],d=l*Bl/180,y=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return y=y*Bl/180,i.enable&&(d=Number(d.toFixed(i.decimal)),y=Number(y.toFixed(i.decimal))),[d,y]}function h_(e,t=6){var i=e[0],l=e[1],c=i/Bl*180,d=l/Bl*180;return d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),d=Number(d.toFixed(t))),[c,d]}function V1(e,t,i){var l=e[0],c=e[1],d=H1(t,i),y=(l+Bl)/d,a=(c+Bl)/d;return[y,a,t]}function TA(e,t,i){e=Pg(e,i);var l=rg(e),c=V1(l,t);return G1(c)}function jL(e,t,i){if(e=Pg(e,i),t===0)return[0,0,0];var l=TA(e,t);return AA(l)}function DL(e,t){if(t===0)return[0,0,0];var i=V1(e,t);return G1(i)}function f_(e,t,i=1){var l=e[0],c=e[1],d=e[2],y=H1(d,t),a=l*y-Bl,b=c*y-Bl;return i!=null&&(a=Number(a.toFixed(i)),b=Number(b.toFixed(i))),[a,b]}function G1(e,t,i){t=t||256;var l=e[0],c=e[1],d=e[2];if(d===0)return[0,0,0];W1(d);var y=Math.ceil(l/t)-1,a=Math.ceil(c/t)-1;return y<0&&(y=0),a<0&&(a=0),[y,a,d]}function Z1(e,t,i){Nu(e,i),t=t||256;var l=e[0],c=e[1],d=e[2],y=f_([l*t,c*t,d]),a=f_([(l+1)*t,(c+1)*t,d]);return[y[0],y[1],a[0],a[1]]}function CA(e,t){Nu(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var d=Z1([i,l,c]),y=d[0],a=d[1],b=d[2],w=d[3],C=h_([y,a,c]),E=h_([b,w,c]);return[C[0],C[1],E[0],E[1]]}function BL(e){var t=Id(e);return Z1(t)}function NL(e){var t=Id(e);return CA(t)}function AA(e,t){Nu(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return[0,0,0];var d=i,y=Math.pow(2,c)-1-l;return[d,y,c]}function Id(e){var t=e[0],i=e[1],l=e[2],c=t,d=Math.pow(2,l)-i-1;return[c,d,l]}function UL(e){var t=Id(e);return IA(t)}function IA(e,t){Nu(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return"";var d="";return l=Math.pow(2,c)-1-l,X1(c,0,-1).map(function(y){var a=0,b=1<<y-1;i&b&&(a+=1),l&b&&(a+=2),d=d.concat(a)}),d}function $L(e){var t=PA(e);return Id(t)}function PA(e){var t=0,i=0,l=e.length;return X1(l,0,-1).map(function(c){var d=1<<c-1;switch(parseInt(e[l-c],0)){case 0:break;case 1:t+=d;break;case 2:i+=d;break;case 3:t+=d,i+=d;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,l]}function VL(e){var t=rg([e[0],e[1]]),i=rg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function Nu(e,t){var i=e[0],l=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(l==null)throw new Error("<y> is required");return c=W1(c),e=MA(e),e}function MA(e){var t=e[0],i=e[1],l=e[2],c=Math.pow(2,l);return t=t%c,t<0&&(t=t+c),[t,i,l]}function W1(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Pg(e,t){if(t===!1)return e;var i=K1(e[0]),l=q1(e[1]);return l>85&&(l=85),l<-85&&(l=-85),[i,l]}function H1(e,t){return EA(t)/Math.pow(2,e)}function X1(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var l=Math.max(Math.ceil((t-e)/i),0),c=Array(l),d=0;d<l;d++,e+=i)c[d]=e;return c}function GL(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],l=e[0][2],c=e[0][3];return e.map(function(d){d[0]<t&&(t=d[0]),d[1]<i&&(i=d[1]),d[2]>l&&(l=d[2]),d[3]>c&&(c=d[3])}),[t,i,l,c]}}function ZL(e){try{return Nu(e),!0}catch{return!1}}function q1(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function K1(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function WL(e){var t=c_([e[0],e[1]],32),i=c_([e[2],e[3]],32),l=[t[0],t[1],i[0],i[1]],c=HL(l);if(c===0)return[0,0,0];var d=l[0]>>>32-c,y=l[1]>>>32-c;return[d,y,c]}function HL(e){for(var t=28,i=0;i<t;i++){var l=1<<32-(i+1);if((e[0]&l)!==(e[2]&l)||(e[1]&l)!==(e[3]&l))return i}return t}const XL=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:FL,bboxToMeters:VL,bboxToTile:WL,googleToBBox:NL,googleToBBoxMeters:BL,googleToQuadkey:UL,googleToTile:Id,hash:RL,initialResolution:EA,latitude:q1,lngLatToGoogle:jL,lngLatToMeters:rg,lngLatToTile:TA,longitude:K1,maxBBox:GL,metersToLngLat:h_,metersToPixels:V1,metersToTile:DL,pixelsToMeters:f_,pixelsToTile:G1,pointToTile:c_,pointToTileFraction:SA,quadkeyToGoogle:PA,quadkeyToTile:$L,range:X1,resolution:H1,tileToBBox:CA,tileToBBoxMeters:Z1,tileToGoogle:AA,tileToQuadkey:IA,validTile:ZL,validateLngLat:Pg,validateTile:Nu,validateZoom:W1,wrapTile:MA},Symbol.toStringTag,{value:"Module"})),qL=g_(XL);var Mg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Mg.read=function(e,t,i,l,c){var d,y,a=c*8-l-1,b=(1<<a)-1,w=b>>1,C=-7,E=i?c-1:0,z=i?-1:1,R=e[t+E];for(E+=z,d=R&(1<<-C)-1,R>>=-C,C+=a;C>0;d=d*256+e[t+E],E+=z,C-=8);for(y=d&(1<<-C)-1,d>>=-C,C+=l;C>0;y=y*256+e[t+E],E+=z,C-=8);if(d===0)d=1-w;else{if(d===b)return y?NaN:(R?-1:1)*(1/0);y=y+Math.pow(2,l),d=d-w}return(R?-1:1)*y*Math.pow(2,d-l)};Mg.write=function(e,t,i,l,c,d){var y,a,b,w=d*8-c-1,C=(1<<w)-1,E=C>>1,z=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=l?0:d-1,Q=l?1:-1,K=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,y=C):(y=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-y))<1&&(y--,b*=2),y+E>=1?t+=z/b:t+=z*Math.pow(2,1-E),t*b>=2&&(y++,b/=2),y+E>=C?(a=0,y=C):y+E>=1?(a=(t*b-1)*Math.pow(2,c),y=y+E):(a=t*Math.pow(2,E-1)*Math.pow(2,c),y=0));c>=8;e[i+R]=a&255,R+=Q,a/=256,c-=8);for(y=y<<c|a,w+=c;w>0;e[i+R]=y&255,R+=Q,y/=256,w-=8);e[i+R-Q]|=K*128};var KL=Kn,zp=Mg;function Kn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0;Kn.Fixed64=1;Kn.Bytes=2;Kn.Fixed32=5;var d_=(1<<16)*(1<<16),J2=1/d_,YL=12,kA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Kn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),c=l>>3,d=this.pos;this.type=l&7,e(c,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Lp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=eE(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Lp(this.buf,this.pos)+Lp(this.buf,this.pos+4)*d_;return this.pos+=8,e},readSFixed64:function(){var e=Lp(this.buf,this.pos)+eE(this.buf,this.pos+4)*d_;return this.pos+=8,e},readFloat:function(){var e=zp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=zp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,l;return l=t[this.pos++],i=l&127,l<128||(l=t[this.pos++],i|=(l&127)<<7,l<128)||(l=t[this.pos++],i|=(l&127)<<14,l<128)||(l=t[this.pos++],i|=(l&127)<<21,l<128)?i:(l=t[this.pos],i|=(l&15)<<28,JL(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=YL&&kA?fO(this.buf,t,e):hO(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Kn.Bytes)return e.push(this.readVarint(t));var i=Ta(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Kn.Bytes)return e.push(this.readSVarint());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Kn.Bytes)return e.push(this.readBoolean());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Kn.Bytes)return e.push(this.readFloat());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Kn.Bytes)return e.push(this.readDouble());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Kn.Bytes)return e.push(this.readFixed32());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Kn.Bytes)return e.push(this.readSFixed32());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Kn.Bytes)return e.push(this.readFixed64());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Kn.Bytes)return e.push(this.readSFixed64());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Kn.Fixed32)this.pos+=4;else if(t===Kn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Mc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Mc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Mc(this.buf,e&-1,this.pos),Mc(this.buf,Math.floor(e*J2),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Mc(this.buf,e&-1,this.pos),Mc(this.buf,Math.floor(e*J2),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){QL(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=dO(this.buf,e,this.pos);var i=this.pos-t;i>=128&&Q2(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),zp.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),zp.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&Q2(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,Kn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,nO,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,rO,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,sO,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,iO,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,oO,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,aO,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,lO,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,uO,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,cO,t)},writeBytesField:function(e,t){this.writeTag(e,Kn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Kn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Kn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Kn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Kn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Kn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Kn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Kn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Kn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Kn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function JL(e,t,i){var l=i.buf,c,d;if(d=l[i.pos++],c=(d&112)>>4,d<128||(d=l[i.pos++],c|=(d&127)<<3,d<128)||(d=l[i.pos++],c|=(d&127)<<10,d<128)||(d=l[i.pos++],c|=(d&127)<<17,d<128)||(d=l[i.pos++],c|=(d&127)<<24,d<128)||(d=l[i.pos++],c|=(d&1)<<31,d<128))return Pc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Ta(e){return e.type===Kn.Bytes?e.readVarint()+e.pos:e.pos+1}function Pc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function QL(e,t){var i,l;if(e>=0?(i=e%4294967296|0,l=e/4294967296|0):(i=~(-e%4294967296),l=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,l=l+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),eO(i,l,t),tO(l,t)}function eO(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function tO(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function Q2(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(l);for(var c=i.pos-1;c>=e;c--)i.buf[c+l]=i.buf[c]}function nO(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function rO(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function iO(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function oO(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function sO(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function aO(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function lO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function uO(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function cO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Lp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Mc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function eE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function hO(e,t,i){for(var l="",c=t;c<i;){var d=e[c],y=null,a=d>239?4:d>223?3:d>191?2:1;if(c+a>i)break;var b,w,C;a===1?d<128&&(y=d):a===2?(b=e[c+1],(b&192)===128&&(y=(d&31)<<6|b&63,y<=127&&(y=null))):a===3?(b=e[c+1],w=e[c+2],(b&192)===128&&(w&192)===128&&(y=(d&15)<<12|(b&63)<<6|w&63,(y<=2047||y>=55296&&y<=57343)&&(y=null))):a===4&&(b=e[c+1],w=e[c+2],C=e[c+3],(b&192)===128&&(w&192)===128&&(C&192)===128&&(y=(d&15)<<18|(b&63)<<12|(w&63)<<6|C&63,(y<=65535||y>=1114112)&&(y=null))),y===null?(y=65533,a=1):y>65535&&(y-=65536,l+=String.fromCharCode(y>>>10&1023|55296),y=56320|y&1023),l+=String.fromCharCode(y),c+=a}return l}function fO(e,t,i){return kA.decode(e.subarray(t,i))}function dO(e,t,i){for(var l=0,c,d;l<t.length;l++){if(c=t.charCodeAt(l),c>55295&&c<57344)if(d)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,d=c;continue}else c=d-55296<<10|c-56320|65536,d=null;else{c>56319||l+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):d=c;continue}else d&&(e[i++]=239,e[i++]=191,e[i++]=189,d=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Y1={exports:{}},zA=function(t,i){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(i,c)}},pO=zA,Uu=Object.prototype.toString;function J1(e){return Uu.call(e)==="[object Array]"}function p_(e){return typeof e>"u"}function mO(e){return e!==null&&!p_(e)&&e.constructor!==null&&!p_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function gO(e){return Uu.call(e)==="[object ArrayBuffer]"}function yO(e){return typeof FormData<"u"&&e instanceof FormData}function vO(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function _O(e){return typeof e=="string"}function xO(e){return typeof e=="number"}function LA(e){return e!==null&&typeof e=="object"}function Qp(e){if(Uu.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function wO(e){return Uu.call(e)==="[object Date]"}function bO(e){return Uu.call(e)==="[object File]"}function EO(e){return Uu.call(e)==="[object Blob]"}function OA(e){return Uu.call(e)==="[object Function]"}function SO(e){return LA(e)&&OA(e.pipe)}function TO(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function CO(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function AO(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Q1(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),J1(e))for(var i=0,l=e.length;i<l;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function m_(){var e={};function t(c,d){Qp(e[d])&&Qp(c)?e[d]=m_(e[d],c):Qp(c)?e[d]=m_({},c):J1(c)?e[d]=c.slice():e[d]=c}for(var i=0,l=arguments.length;i<l;i++)Q1(arguments[i],t);return e}function IO(e,t,i){return Q1(t,function(c,d){i&&typeof c=="function"?e[d]=pO(c,i):e[d]=c}),e}function PO(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var jo={isArray:J1,isArrayBuffer:gO,isBuffer:mO,isFormData:yO,isArrayBufferView:vO,isString:_O,isNumber:xO,isObject:LA,isPlainObject:Qp,isUndefined:p_,isDate:wO,isFile:bO,isBlob:EO,isFunction:OA,isStream:SO,isURLSearchParams:TO,isStandardBrowserEnv:AO,forEach:Q1,merge:m_,extend:IO,trim:CO,stripBOM:PO},kc=jo;function tE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var RA=function(t,i,l){if(!i)return t;var c;if(l)c=l(i);else if(kc.isURLSearchParams(i))c=i.toString();else{var d=[];kc.forEach(i,function(b,w){b===null||typeof b>"u"||(kc.isArray(b)?w=w+"[]":b=[b],kc.forEach(b,function(E){kc.isDate(E)?E=E.toISOString():kc.isObject(E)&&(E=JSON.stringify(E)),d.push(tE(w)+"="+tE(E))}))}),c=d.join("&")}if(c){var y=t.indexOf("#");y!==-1&&(t=t.slice(0,y)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},MO=jo;function kg(){this.handlers=[]}kg.prototype.use=function(t,i,l){return this.handlers.push({fulfilled:t,rejected:i,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1};kg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};kg.prototype.forEach=function(t){MO.forEach(this.handlers,function(l){l!==null&&t(l)})};var kO=kg,zO=jo,LO=function(t,i){zO.forEach(t,function(c,d){d!==i&&d.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[d])})},FA=function(t,i,l,c,d){return t.config=i,l&&(t.code=l),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},f0,nE;function jA(){if(nE)return f0;nE=1;var e=FA;return f0=function(i,l,c,d,y){var a=new Error(i);return e(a,l,c,d,y)},f0}var d0,rE;function OO(){if(rE)return d0;rE=1;var e=jA();return d0=function(i,l,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?i(c):l(e("Request failed with status code "+c.status,c.config,null,c.request,c))},d0}var p0,iE;function RO(){if(iE)return p0;iE=1;var e=jo;return p0=e.isStandardBrowserEnv()?function(){return{write:function(l,c,d,y,a,b){var w=[];w.push(l+"="+encodeURIComponent(c)),e.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),e.isString(y)&&w.push("path="+y),e.isString(a)&&w.push("domain="+a),b===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(l){var c=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),p0}var m0,oE;function FO(){return oE||(oE=1,m0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),m0}var g0,sE;function jO(){return sE||(sE=1,g0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),g0}var y0,aE;function DO(){if(aE)return y0;aE=1;var e=FO(),t=jO();return y0=function(l,c){return l&&!e(c)?t(l,c):c},y0}var v0,lE;function BO(){if(lE)return v0;lE=1;var e=jo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return v0=function(l){var c={},d,y,a;return l&&e.forEach(l.split(`
`),function(w){if(a=w.indexOf(":"),d=e.trim(w.substr(0,a)).toLowerCase(),y=e.trim(w.substr(a+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([y]):c[d]=c[d]?c[d]+", "+y:y}}),c},v0}var _0,uE;function NO(){if(uE)return _0;uE=1;var e=jo;return _0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a"),c;function d(y){var a=y;return i&&(l.setAttribute("href",a),a=l.href),l.setAttribute("href",a),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return c=d(window.location.href),function(a){var b=e.isString(a)?d(a):a;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),_0}var x0,cE;function hE(){if(cE)return x0;cE=1;var e=jo,t=OO(),i=RO(),l=RA,c=DO(),d=BO(),y=NO(),a=jA();return x0=function(w){return new Promise(function(E,z){var R=w.data,Q=w.headers,K=w.responseType;e.isFormData(R)&&delete Q["Content-Type"];var pe=new XMLHttpRequest;if(w.auth){var G=w.auth.username||"",$=w.auth.password?unescape(encodeURIComponent(w.auth.password)):"";Q.Authorization="Basic "+btoa(G+":"+$)}var B=c(w.baseURL,w.url);pe.open(w.method.toUpperCase(),l(B,w.params,w.paramsSerializer),!0),pe.timeout=w.timeout;function oe(){if(pe){var D="getAllResponseHeaders"in pe?d(pe.getAllResponseHeaders()):null,S=!K||K==="text"||K==="json"?pe.responseText:pe.response,P={data:S,status:pe.status,statusText:pe.statusText,headers:D,config:w,request:pe};t(E,z,P),pe=null}}if("onloadend"in pe?pe.onloadend=oe:pe.onreadystatechange=function(){!pe||pe.readyState!==4||pe.status===0&&!(pe.responseURL&&pe.responseURL.indexOf("file:")===0)||setTimeout(oe)},pe.onabort=function(){pe&&(z(a("Request aborted",w,"ECONNABORTED",pe)),pe=null)},pe.onerror=function(){z(a("Network Error",w,null,pe)),pe=null},pe.ontimeout=function(){var S="timeout of "+w.timeout+"ms exceeded";w.timeoutErrorMessage&&(S=w.timeoutErrorMessage),z(a(S,w,w.transitional&&w.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",pe)),pe=null},e.isStandardBrowserEnv()){var W=(w.withCredentials||y(B))&&w.xsrfCookieName?i.read(w.xsrfCookieName):void 0;W&&(Q[w.xsrfHeaderName]=W)}"setRequestHeader"in pe&&e.forEach(Q,function(S,P){typeof R>"u"&&P.toLowerCase()==="content-type"?delete Q[P]:pe.setRequestHeader(P,S)}),e.isUndefined(w.withCredentials)||(pe.withCredentials=!!w.withCredentials),K&&K!=="json"&&(pe.responseType=w.responseType),typeof w.onDownloadProgress=="function"&&pe.addEventListener("progress",w.onDownloadProgress),typeof w.onUploadProgress=="function"&&pe.upload&&pe.upload.addEventListener("progress",w.onUploadProgress),w.cancelToken&&w.cancelToken.promise.then(function(S){pe&&(pe.abort(),z(S),pe=null)}),R||(R=null),pe.send(R)})},x0}var bi=jo,fE=LO,UO=FA,$O={"Content-Type":"application/x-www-form-urlencoded"};function dE(e,t){!bi.isUndefined(e)&&bi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function VO(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=hE()),e}function GO(e,t,i){if(bi.isString(e))try{return(t||JSON.parse)(e),bi.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(i||JSON.stringify)(e)}var zg={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:VO(),transformRequest:[function(t,i){return fE(i,"Accept"),fE(i,"Content-Type"),bi.isFormData(t)||bi.isArrayBuffer(t)||bi.isBuffer(t)||bi.isStream(t)||bi.isFile(t)||bi.isBlob(t)?t:bi.isArrayBufferView(t)?t.buffer:bi.isURLSearchParams(t)?(dE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):bi.isObject(t)||i&&i["Content-Type"]==="application/json"?(dE(i,"application/json"),GO(t)):t}],transformResponse:[function(t){var i=this.transitional,l=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,d=!l&&this.responseType==="json";if(d||c&&bi.isString(t)&&t.length)try{return JSON.parse(t)}catch(y){if(d)throw y.name==="SyntaxError"?UO(y,this,"E_JSON_PARSE"):y}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};zg.headers={common:{Accept:"application/json, text/plain, */*"}};bi.forEach(["delete","get","head"],function(t){zg.headers[t]={}});bi.forEach(["post","put","patch"],function(t){zg.headers[t]=bi.merge($O)});var ex=zg,ZO=jo,WO=ex,HO=function(t,i,l){var c=this||WO;return ZO.forEach(l,function(y){t=y.call(c,t,i)}),t},w0,pE;function DA(){return pE||(pE=1,w0=function(t){return!!(t&&t.__CANCEL__)}),w0}var mE=jo,b0=HO,XO=DA(),qO=ex;function E0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var KO=function(t){E0(t),t.headers=t.headers||{},t.data=b0.call(t,t.data,t.headers,t.transformRequest),t.headers=mE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),mE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||qO.adapter;return i(t).then(function(c){return E0(t),c.data=b0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return XO(c)||(E0(t),c&&c.response&&(c.response.data=b0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},ji=jo,BA=function(t,i){i=i||{};var l={},c=["url","method","data"],d=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function b(z,R){return ji.isPlainObject(z)&&ji.isPlainObject(R)?ji.merge(z,R):ji.isPlainObject(R)?ji.merge({},R):ji.isArray(R)?R.slice():R}function w(z){ji.isUndefined(i[z])?ji.isUndefined(t[z])||(l[z]=b(void 0,t[z])):l[z]=b(t[z],i[z])}ji.forEach(c,function(R){ji.isUndefined(i[R])||(l[R]=b(void 0,i[R]))}),ji.forEach(d,w),ji.forEach(y,function(R){ji.isUndefined(i[R])?ji.isUndefined(t[R])||(l[R]=b(void 0,t[R])):l[R]=b(void 0,i[R])}),ji.forEach(a,function(R){R in i?l[R]=b(t[R],i[R]):R in t&&(l[R]=b(void 0,t[R]))});var C=c.concat(d).concat(y).concat(a),E=Object.keys(t).concat(Object.keys(i)).filter(function(R){return C.indexOf(R)===-1});return ji.forEach(E,w),l};const YO="axios",JO="0.21.4",QO="Promise based HTTP client for the browser and node.js",eR="index.js",tR={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},nR={type:"git",url:"https://github.com/axios/axios.git"},rR=["xhr","http","ajax","promise","node"],iR="Matt Zabriskie",oR="MIT",sR={url:"https://github.com/axios/axios/issues"},aR="https://axios-http.com",lR={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},uR={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},cR="dist/axios.min.js",hR="dist/axios.min.js",fR="./index.d.ts",dR={"follow-redirects":"^1.14.0"},pR=[{path:"./dist/axios.min.js",threshold:"5kB"}],mR={name:YO,version:JO,description:QO,main:eR,scripts:tR,repository:nR,keywords:rR,author:iR,license:oR,bugs:sR,homepage:aR,devDependencies:lR,browser:uR,jsdelivr:cR,unpkg:hR,typings:fR,dependencies:dR,bundlesize:pR};var NA=mR,tx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){tx[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});var gE={},gR=NA.version.split(".");function UA(e,t){for(var i=t?t.split("."):gR,l=e.split("."),c=0;c<3;c++){if(i[c]>l[c])return!0;if(i[c]<l[c])return!1}return!1}tx.transitional=function(t,i,l){var c=i&&UA(i);function d(y,a){return"[Axios v"+NA.version+"] Transitional option '"+y+"'"+a+(l?". "+l:"")}return function(y,a,b){if(t===!1)throw new Error(d(a," has been removed in "+i));return c&&!gE[a]&&(gE[a]=!0,console.warn(d(a," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(y,a,b):!0}};function yR(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var l=Object.keys(e),c=l.length;c-- >0;){var d=l[c],y=t[d];if(y){var a=e[d],b=a===void 0||y(a,d,e);if(b!==!0)throw new TypeError("option "+d+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+d)}}var vR={isOlderVersion:UA,assertOptions:yR,validators:tx},$A=jo,_R=RA,yE=kO,vE=KO,Lg=BA,VA=vR,zc=VA.validators;function Pd(e){this.defaults=e,this.interceptors={request:new yE,response:new yE}}Pd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Lg(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&VA.assertOptions(i,{silentJSONParsing:zc.transitional(zc.boolean,"1.0.0"),forcedJSONParsing:zc.transitional(zc.boolean,"1.0.0"),clarifyTimeoutError:zc.transitional(zc.boolean,"1.0.0")},!1);var l=[],c=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(t)===!1||(c=c&&z.synchronous,l.unshift(z.fulfilled,z.rejected))});var d=[];this.interceptors.response.forEach(function(z){d.push(z.fulfilled,z.rejected)});var y;if(!c){var a=[vE,void 0];for(Array.prototype.unshift.apply(a,l),a=a.concat(d),y=Promise.resolve(t);a.length;)y=y.then(a.shift(),a.shift());return y}for(var b=t;l.length;){var w=l.shift(),C=l.shift();try{b=w(b)}catch(E){C(E);break}}try{y=vE(b)}catch(E){return Promise.reject(E)}for(;d.length;)y=y.then(d.shift(),d.shift());return y};Pd.prototype.getUri=function(t){return t=Lg(this.defaults,t),_R(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};$A.forEach(["delete","get","head","options"],function(t){Pd.prototype[t]=function(i,l){return this.request(Lg(l||{},{method:t,url:i,data:(l||{}).data}))}});$A.forEach(["post","put","patch"],function(t){Pd.prototype[t]=function(i,l,c){return this.request(Lg(c||{},{method:t,url:i,data:l}))}});var xR=Pd,S0,_E;function GA(){if(_E)return S0;_E=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,S0=e,S0}var T0,xE;function wR(){if(xE)return T0;xE=1;var e=GA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var l;this.promise=new Promise(function(y){l=y});var c=this;i(function(y){c.reason||(c.reason=new e(y),l(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var l,c=new t(function(y){l=y});return{token:c,cancel:l}},T0=t,T0}var C0,wE;function bR(){return wE||(wE=1,C0=function(t){return function(l){return t.apply(null,l)}}),C0}var A0,bE;function ER(){return bE||(bE=1,A0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),A0}var EE=jo,SR=zA,em=xR,TR=BA,CR=ex;function ZA(e){var t=new em(e),i=SR(em.prototype.request,t);return EE.extend(i,em.prototype,t),EE.extend(i,t),i}var Ps=ZA(CR);Ps.Axios=em;Ps.create=function(t){return ZA(TR(Ps.defaults,t))};Ps.Cancel=GA();Ps.CancelToken=wR();Ps.isCancel=DA();Ps.all=function(t){return Promise.all(t)};Ps.spread=bR();Ps.isAxiosError=ER();Y1.exports=Ps;Y1.exports.default=Ps;var AR=Y1.exports,IR=AR;const PR={},MR=Object.freeze(Object.defineProperty({__proto__:null,default:PR},Symbol.toStringTag,{value:"Module"})),kR=g_(MR);var Og={},zR=oh;function oh(e,t){this.x=e,this.y=t}oh.prototype={clone:function(){return new oh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=l,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),c=t.x+i*(this.x-t.x)-l*(this.y-t.y),d=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};oh.convert=function(e){return e instanceof oh?e:Array.isArray(e)?new oh(e[0],e[1]):e};var LR=zR,WA=yh;function yh(e,t,i,l,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=c,e.readFields(OR,this,t)}function OR(e,t,i){e==1?t.id=i.readVarint():e==2?RR(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function RR(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var l=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[l]=c}}yh.types=["Unknown","Point","LineString","Polygon"];yh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,c=0,d=0,y=[],a;e.pos<t;){if(l<=0){var b=e.readVarint();i=b&7,l=b>>3}if(l--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),i===1&&(a&&y.push(a),a=[]),a.push(new LR(c,d));else if(i===7)a&&a.push(a[0].clone());else throw new Error("unknown command "+i)}return a&&y.push(a),y};yh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,c=0,d=0,y=1/0,a=-1/0,b=1/0,w=-1/0;e.pos<t;){if(l<=0){var C=e.readVarint();i=C&7,l=C>>3}if(l--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),c<y&&(y=c),c>a&&(a=c),d<b&&(b=d),d>w&&(w=d);else if(i!==7)throw new Error("unknown command "+i)}return[y,b,a,w]};yh.prototype.toGeoJSON=function(e,t,i){var l=this.extent*Math.pow(2,i),c=this.extent*e,d=this.extent*t,y=this.loadGeometry(),a=yh.types[this.type],b,w;function C(R){for(var Q=0;Q<R.length;Q++){var K=R[Q],pe=180-(K.y+d)*360/l;R[Q]=[(K.x+c)*360/l-180,360/Math.PI*Math.atan(Math.exp(pe*Math.PI/180))-90]}}switch(this.type){case 1:var E=[];for(b=0;b<y.length;b++)E[b]=y[b][0];y=E,C(y);break;case 2:for(b=0;b<y.length;b++)C(y[b]);break;case 3:for(y=FR(y),b=0;b<y.length;b++)for(w=0;w<y[b].length;w++)C(y[b][w]);break}y.length===1?y=y[0]:a="Multi"+a;var z={type:"Feature",geometry:{type:a,coordinates:y},properties:this.properties};return"id"in this&&(z.id=this.id),z};function FR(e){var t=e.length;if(t<=1)return[e];for(var i=[],l,c,d=0;d<t;d++){var y=jR(e[d]);y!==0&&(c===void 0&&(c=y<0),c===y<0?(l&&i.push(l),l=[e[d]]):l.push(e[d]))}return l&&i.push(l),i}function jR(e){for(var t=0,i=0,l=e.length,c=l-1,d,y;i<l;c=i++)d=e[i],y=e[c],t+=(y.x-d.x)*(d.y+y.y);return t}var DR=WA,HA=XA;function XA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(BR,this,t),this.length=this._features.length}function BR(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(NR(i))}function NR(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var l=e.readVarint()>>3;t=l===1?e.readString():l===2?e.readFloat():l===3?e.readDouble():l===4?e.readVarint64():l===5?e.readVarint():l===6?e.readSVarint():l===7?e.readBoolean():null}return t}XA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new DR(this._pbf,t,this.extent,this._keys,this._values)};var UR=HA,$R=VR;function VR(e,t){this.layers=e.readFields(GR,{},t)}function GR(e,t,i){if(e===3){var l=new UR(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}Og.VectorTile=$R;Og.VectorTileFeature=WA;Og.VectorTileLayer=HA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=LL,i=qL,l=KL,c=IR,d=kR,y=Og;function a($){return $&&typeof $=="object"&&"default"in $?$:{default:$}}var b=a(l),w=a(c),C=a(d),E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof xl<"u"?xl:typeof self<"u"?self:{};function z($){var B={exports:{}};return $(B,B.exports),B.exports}var R=z(function($,B){(function(W,D){$.exports=D(w.default)})(E,function(oe){return function(W){var D={};function S(P){if(D[P])return D[P].exports;var Z=D[P]={i:P,l:!1,exports:{}};return W[P].call(Z.exports,Z,Z.exports,S),Z.l=!0,Z.exports}return S.m=W,S.c=D,S.d=function(P,Z,J){S.o(P,Z)||Object.defineProperty(P,Z,{enumerable:!0,get:J})},S.r=function(P){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})},S.t=function(P,Z){if(Z&1&&(P=S(P)),Z&8||Z&4&&typeof P=="object"&&P&&P.__esModule)return P;var J=Object.create(null);if(S.r(J),Object.defineProperty(J,"default",{enumerable:!0,value:P}),Z&2&&typeof P!="string")for(var H in P)S.d(J,H,function(ve){return P[ve]}.bind(null,H));return J},S.n=function(P){var Z=P&&P.__esModule?function(){return P.default}:function(){return P};return S.d(Z,"a",Z),Z},S.o=function(P,Z){return Object.prototype.hasOwnProperty.call(P,Z)},S.p="",S(S.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(W,D,S){S.r(D),S.d(D,"CacheControl",function(){return be}),S.d(D,"parse",function(){return Be}),S.d(D,"format",function(){return Ie}),S("./node_modules/core-js/modules/es6.array.from.js"),S("./node_modules/core-js/modules/es6.function.name.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/web.dom.iterable.js"),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.regexp.split.js"),S("./node_modules/core-js/modules/es6.number.is-finite.js");function P(Oe,$e){return _e(Oe)||ve(Oe,$e)||J(Oe,$e)||Z()}function Z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(Oe,$e){if(Oe){if(typeof Oe=="string")return H(Oe,$e);var Ve=Object.prototype.toString.call(Oe).slice(8,-1);if(Ve==="Object"&&Oe.constructor&&(Ve=Oe.constructor.name),Ve==="Map"||Ve==="Set")return Array.from(Oe);if(Ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ve))return H(Oe,$e)}}function H(Oe,$e){($e==null||$e>Oe.length)&&($e=Oe.length);for(var Ve=0,ot=new Array($e);Ve<$e;Ve++)ot[Ve]=Oe[Ve];return ot}function ve(Oe,$e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Oe)))){var Ve=[],ot=!0,ut=!1,gt=void 0;try{for(var Mt=Oe[Symbol.iterator](),ct;!(ot=(ct=Mt.next()).done)&&(Ve.push(ct.value),!($e&&Ve.length===$e));ot=!0);}catch(xt){ut=!0,gt=xt}finally{try{!ot&&Mt.return!=null&&Mt.return()}finally{if(ut)throw gt}}return Ve}}function _e(Oe){if(Array.isArray(Oe))return Oe}function xe(Oe,$e){if(!(Oe instanceof $e))throw new TypeError("Cannot call a class as a function")}function te(Oe,$e){for(var Ve=0;Ve<$e.length;Ve++){var ot=$e[Ve];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Oe,ot.key,ot)}}function le(Oe,$e,Ve){return $e&&te(Oe.prototype,$e),Ve&&te(Oe,Ve),Oe}var ne=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,re={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function me(Oe){return Oe===null}function we(Oe){if(!Oe)return null;var $e=parseInt(Oe,10);return!Number.isFinite($e)||$e<0?null:$e}var be=function(){function Oe(){xe(this,Oe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return le(Oe,[{key:"parse",value:function(Ve){if(!Ve||Ve.length===0)return this;var ot={},ut=Ve.match(ne)||[];return Array.prototype.forEach.call(ut,function(gt){var Mt=gt.split("=",2),ct=P(Mt,1),xt=ct[0],$t=null;Mt.length>1&&($t=Mt[1].trim()),ot[xt.toLowerCase()]=$t}),this.maxAge=we(ot[re.maxAge]),this.sharedMaxAge=we(ot[re.sharedMaxAge]),this.maxStale=me(ot[re.maxStale]),this.maxStaleDuration=we(ot[re.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=we(ot[re.minFresh]),this.immutable=me(ot[re.immutable]),this.mustRevalidate=me(ot[re.mustRevalidate]),this.noCache=me(ot[re.noCache]),this.noStore=me(ot[re.noStore]),this.noTransform=me(ot[re.noTransform]),this.onlyIfCached=me(ot[re.onlyIfCached]),this.private=me(ot[re.private]),this.proxyRevalidate=me(ot[re.proxyRevalidate]),this.public=me(ot[re.public]),this}},{key:"format",value:function(){var Ve=[];return this.maxAge&&Ve.push("".concat(re.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ve.push("".concat(re.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ve.push("".concat(re.maxStale,"=").concat(this.maxStaleDuration)):Ve.push(re.maxStale)),this.minFresh&&Ve.push("".concat(re.minFresh,"=").concat(this.minFresh)),this.immutable&&Ve.push(re.immutable),this.mustRevalidate&&Ve.push(re.mustRevalidate),this.noCache&&Ve.push(re.noCache),this.noStore&&Ve.push(re.noStore),this.noTransform&&Ve.push(re.noTransform),this.onlyIfCached&&Ve.push(re.onlyIfCached),this.private&&Ve.push(re.private),this.proxyRevalidate&&Ve.push(re.proxyRevalidate),this.public&&Ve.push(re.public),Ve.join(", ")}}]),Oe}();function Be(Oe){var $e=new be;return $e.parse(Oe)}function Ie(Oe){return Oe instanceof be?Oe.format():be.prototype.format.call(Oe)}D.default={CacheControl:be,parse:Be,format:Ie}},"./node_modules/charenc/charenc.js":function(W,D){var S={utf8:{stringToBytes:function(P){return S.bin.stringToBytes(unescape(encodeURIComponent(P)))},bytesToString:function(P){return decodeURIComponent(escape(S.bin.bytesToString(P)))}},bin:{stringToBytes:function(P){for(var Z=[],J=0;J<P.length;J++)Z.push(P.charCodeAt(J)&255);return Z},bytesToString:function(P){for(var Z=[],J=0;J<P.length;J++)Z.push(String.fromCharCode(P[J]));return Z.join("")}}};W.exports=S},"./node_modules/core-js/modules/_a-function.js":function(W,D){W.exports=function(S){if(typeof S!="function")throw TypeError(S+" is not a function!");return S}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_wks.js")("unscopables"),Z=Array.prototype;Z[P]==null&&S("./node_modules/core-js/modules/_hide.js")(Z,P,{}),W.exports=function(J){Z[P][J]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_string-at.js")(!0);W.exports=function(Z,J,H){return J+(H?P(Z,J).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-object.js");W.exports=function(Z){if(!P(Z))throw TypeError(Z+" is not an object!");return Z}},"./node_modules/core-js/modules/_array-includes.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-iobject.js"),Z=S("./node_modules/core-js/modules/_to-length.js"),J=S("./node_modules/core-js/modules/_to-absolute-index.js");W.exports=function(H){return function(ve,_e,xe){var te=P(ve),le=Z(te.length),ne=J(xe,le),re;if(H&&_e!=_e){for(;le>ne;)if(re=te[ne++],re!=re)return!0}else for(;le>ne;ne++)if((H||ne in te)&&te[ne]===_e)return H||ne||0;return!H&&-1}}},"./node_modules/core-js/modules/_bind.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_a-function.js"),Z=S("./node_modules/core-js/modules/_is-object.js"),J=S("./node_modules/core-js/modules/_invoke.js"),H=[].slice,ve={},_e=function(xe,te,le){if(!(te in ve)){for(var ne=[],re=0;re<te;re++)ne[re]="a["+re+"]";ve[te]=Function("F,a","return new F("+ne.join(",")+")")}return ve[te](xe,le)};W.exports=Function.bind||function(te){var le=P(this),ne=H.call(arguments,1),re=function(){var me=ne.concat(H.call(arguments));return this instanceof re?_e(le,me.length,me):J(le,me,te)};return Z(le.prototype)&&(re.prototype=le.prototype),re}},"./node_modules/core-js/modules/_classof.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_cof.js"),Z=S("./node_modules/core-js/modules/_wks.js")("toStringTag"),J=P(function(){return arguments}())=="Arguments",H=function(ve,_e){try{return ve[_e]}catch{}};W.exports=function(ve){var _e,xe,te;return ve===void 0?"Undefined":ve===null?"Null":typeof(xe=H(_e=Object(ve),Z))=="string"?xe:J?P(_e):(te=P(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":te}},"./node_modules/core-js/modules/_cof.js":function(W,D){var S={}.toString;W.exports=function(P){return S.call(P).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(W,D){var S=W.exports={version:"2.6.12"};typeof __e=="number"&&(__e=S)},"./node_modules/core-js/modules/_create-property.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_property-desc.js");W.exports=function(J,H,ve){H in J?P.f(J,H,Z(0,ve)):J[H]=ve}},"./node_modules/core-js/modules/_ctx.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_a-function.js");W.exports=function(Z,J,H){if(P(Z),J===void 0)return Z;switch(H){case 1:return function(ve){return Z.call(J,ve)};case 2:return function(ve,_e){return Z.call(J,ve,_e)};case 3:return function(ve,_e,xe){return Z.call(J,ve,_e,xe)}}return function(){return Z.apply(J,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(W,D){W.exports=function(S){if(S==null)throw TypeError("Can't call method on  "+S);return S}},"./node_modules/core-js/modules/_descriptors.js":function(W,D,S){W.exports=!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-object.js"),Z=S("./node_modules/core-js/modules/_global.js").document,J=P(Z)&&P(Z.createElement);W.exports=function(H){return J?Z.createElement(H):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(W,D){W.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-keys.js"),Z=S("./node_modules/core-js/modules/_object-gops.js"),J=S("./node_modules/core-js/modules/_object-pie.js");W.exports=function(H){var ve=P(H),_e=Z.f;if(_e)for(var xe=_e(H),te=J.f,le=0,ne;xe.length>le;)te.call(H,ne=xe[le++])&&ve.push(ne);return ve}},"./node_modules/core-js/modules/_export.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_core.js"),J=S("./node_modules/core-js/modules/_hide.js"),H=S("./node_modules/core-js/modules/_redefine.js"),ve=S("./node_modules/core-js/modules/_ctx.js"),_e="prototype",xe=function(te,le,ne){var re=te&xe.F,me=te&xe.G,we=te&xe.S,be=te&xe.P,Be=te&xe.B,Ie=me?P:we?P[le]||(P[le]={}):(P[le]||{})[_e],Oe=me?Z:Z[le]||(Z[le]={}),$e=Oe[_e]||(Oe[_e]={}),Ve,ot,ut,gt;me&&(ne=le);for(Ve in ne)ot=!re&&Ie&&Ie[Ve]!==void 0,ut=(ot?Ie:ne)[Ve],gt=Be&&ot?ve(ut,P):be&&typeof ut=="function"?ve(Function.call,ut):ut,Ie&&H(Ie,Ve,ut,te&xe.U),Oe[Ve]!=ut&&J(Oe,Ve,gt),be&&$e[Ve]!=ut&&($e[Ve]=ut)};P.core=Z,xe.F=1,xe.G=2,xe.S=4,xe.P=8,xe.B=16,xe.W=32,xe.U=64,xe.R=128,W.exports=xe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(Z){var J=/./;try{"/./"[Z](J)}catch{try{return J[P]=!1,!"/./"[Z](J)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(W,D){W.exports=function(S){try{return!!S()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(W,D,S){S("./node_modules/core-js/modules/es6.regexp.exec.js");var P=S("./node_modules/core-js/modules/_redefine.js"),Z=S("./node_modules/core-js/modules/_hide.js"),J=S("./node_modules/core-js/modules/_fails.js"),H=S("./node_modules/core-js/modules/_defined.js"),ve=S("./node_modules/core-js/modules/_wks.js"),_e=S("./node_modules/core-js/modules/_regexp-exec.js"),xe=ve("species"),te=!J(function(){var ne=/./;return ne.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(ne,"$<a>")!=="7"}),le=function(){var ne=/(?:)/,re=ne.exec;ne.exec=function(){return re.apply(this,arguments)};var me="ab".split(ne);return me.length===2&&me[0]==="a"&&me[1]==="b"}();W.exports=function(ne,re,me){var we=ve(ne),be=!J(function(){var ot={};return ot[we]=function(){return 7},""[ne](ot)!=7}),Be=be?!J(function(){var ot=!1,ut=/a/;return ut.exec=function(){return ot=!0,null},ne==="split"&&(ut.constructor={},ut.constructor[xe]=function(){return ut}),ut[we](""),!ot}):void 0;if(!be||!Be||ne==="replace"&&!te||ne==="split"&&!le){var Ie=/./[we],Oe=me(H,we,""[ne],function(ut,gt,Mt,ct,xt){return gt.exec===_e?be&&!xt?{done:!0,value:Ie.call(gt,Mt,ct)}:{done:!0,value:ut.call(Mt,gt,ct)}:{done:!1}}),$e=Oe[0],Ve=Oe[1];P(String.prototype,ne,$e),Z(RegExp.prototype,we,re==2?function(ot,ut){return Ve.call(ot,this,ut)}:function(ot){return Ve.call(ot,this)})}}},"./node_modules/core-js/modules/_flags.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js");W.exports=function(){var Z=P(this),J="";return Z.global&&(J+="g"),Z.ignoreCase&&(J+="i"),Z.multiline&&(J+="m"),Z.unicode&&(J+="u"),Z.sticky&&(J+="y"),J}},"./node_modules/core-js/modules/_function-to-string.js":function(W,D,S){W.exports=S("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(W,D){var S=W.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=S)},"./node_modules/core-js/modules/_has.js":function(W,D){var S={}.hasOwnProperty;W.exports=function(P,Z){return S.call(P,Z)}},"./node_modules/core-js/modules/_hide.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_property-desc.js");W.exports=S("./node_modules/core-js/modules/_descriptors.js")?function(J,H,ve){return P.f(J,H,Z(1,ve))}:function(J,H,ve){return J[H]=ve,J}},"./node_modules/core-js/modules/_html.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js").document;W.exports=P&&P.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(W,D,S){W.exports=!S("./node_modules/core-js/modules/_descriptors.js")&&!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(S("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(W,D){W.exports=function(S,P,Z){var J=Z===void 0;switch(P.length){case 0:return J?S():S.call(Z);case 1:return J?S(P[0]):S.call(Z,P[0]);case 2:return J?S(P[0],P[1]):S.call(Z,P[0],P[1]);case 3:return J?S(P[0],P[1],P[2]):S.call(Z,P[0],P[1],P[2]);case 4:return J?S(P[0],P[1],P[2],P[3]):S.call(Z,P[0],P[1],P[2],P[3])}return S.apply(Z,P)}},"./node_modules/core-js/modules/_iobject.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_cof.js");W.exports=Object("z").propertyIsEnumerable(0)?Object:function(Z){return P(Z)=="String"?Z.split(""):Object(Z)}},"./node_modules/core-js/modules/_is-array-iter.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_iterators.js"),Z=S("./node_modules/core-js/modules/_wks.js")("iterator"),J=Array.prototype;W.exports=function(H){return H!==void 0&&(P.Array===H||J[Z]===H)}},"./node_modules/core-js/modules/_is-array.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_cof.js");W.exports=Array.isArray||function(J){return P(J)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(W,D){W.exports=function(S){return typeof S=="object"?S!==null:typeof S=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-object.js"),Z=S("./node_modules/core-js/modules/_cof.js"),J=S("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(H){var ve;return P(H)&&((ve=H[J])!==void 0?!!ve:Z(H)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js");W.exports=function(Z,J,H,ve){try{return ve?J(P(H)[0],H[1]):J(H)}catch(xe){var _e=Z.return;throw _e!==void 0&&P(_e.call(Z)),xe}}},"./node_modules/core-js/modules/_iter-create.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-create.js"),Z=S("./node_modules/core-js/modules/_property-desc.js"),J=S("./node_modules/core-js/modules/_set-to-string-tag.js"),H={};S("./node_modules/core-js/modules/_hide.js")(H,S("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),W.exports=function(ve,_e,xe){ve.prototype=P(H,{next:Z(1,xe)}),J(ve,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_library.js"),Z=S("./node_modules/core-js/modules/_export.js"),J=S("./node_modules/core-js/modules/_redefine.js"),H=S("./node_modules/core-js/modules/_hide.js"),ve=S("./node_modules/core-js/modules/_iterators.js"),_e=S("./node_modules/core-js/modules/_iter-create.js"),xe=S("./node_modules/core-js/modules/_set-to-string-tag.js"),te=S("./node_modules/core-js/modules/_object-gpo.js"),le=S("./node_modules/core-js/modules/_wks.js")("iterator"),ne=!([].keys&&"next"in[].keys()),re="@@iterator",me="keys",we="values",be=function(){return this};W.exports=function(Be,Ie,Oe,$e,Ve,ot,ut){_e(Oe,Ie,$e);var gt=function(F){if(!ne&&F in $t)return $t[F];switch(F){case me:return function(){return new Oe(this,F)};case we:return function(){return new Oe(this,F)}}return function(){return new Oe(this,F)}},Mt=Ie+" Iterator",ct=Ve==we,xt=!1,$t=Be.prototype,Ye=$t[le]||$t[re]||Ve&&$t[Ve],sn=Ye||gt(Ve),En=Ve?ct?gt("entries"):sn:void 0,Ht=Ie=="Array"&&$t.entries||Ye,Rt,vn,Te;if(Ht&&(Te=te(Ht.call(new Be)),Te!==Object.prototype&&Te.next&&(xe(Te,Mt,!0),!P&&typeof Te[le]!="function"&&H(Te,le,be))),ct&&Ye&&Ye.name!==we&&(xt=!0,sn=function(){return Ye.call(this)}),(!P||ut)&&(ne||xt||!$t[le])&&H($t,le,sn),ve[Ie]=sn,ve[Mt]=be,Ve)if(Rt={values:ct?sn:gt(we),keys:ot?sn:gt(me),entries:En},ut)for(vn in Rt)vn in $t||J($t,vn,Rt[vn]);else Z(Z.P+Z.F*(ne||xt),Ie,Rt);return Rt}},"./node_modules/core-js/modules/_iter-detect.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_wks.js")("iterator"),Z=!1;try{var J=[7][P]();J.return=function(){Z=!0},Array.from(J,function(){throw 2})}catch{}W.exports=function(H,ve){if(!ve&&!Z)return!1;var _e=!1;try{var xe=[7],te=xe[P]();te.next=function(){return{done:_e=!0}},xe[P]=function(){return te},H(xe)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(W,D){W.exports=function(S,P){return{value:P,done:!!S}}},"./node_modules/core-js/modules/_iterators.js":function(W,D){W.exports={}},"./node_modules/core-js/modules/_library.js":function(W,D){W.exports=!1},"./node_modules/core-js/modules/_meta.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_uid.js")("meta"),Z=S("./node_modules/core-js/modules/_is-object.js"),J=S("./node_modules/core-js/modules/_has.js"),H=S("./node_modules/core-js/modules/_object-dp.js").f,ve=0,_e=Object.isExtensible||function(){return!0},xe=!S("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),te=function(we){H(we,P,{value:{i:"O"+ ++ve,w:{}}})},le=function(we,be){if(!Z(we))return typeof we=="symbol"?we:(typeof we=="string"?"S":"P")+we;if(!J(we,P)){if(!_e(we))return"F";if(!be)return"E";te(we)}return we[P].i},ne=function(we,be){if(!J(we,P)){if(!_e(we))return!0;if(!be)return!1;te(we)}return we[P].w},re=function(we){return xe&&me.NEED&&_e(we)&&!J(we,P)&&te(we),we},me=W.exports={KEY:P,NEED:!1,fastKey:le,getWeak:ne,onFreeze:re}},"./node_modules/core-js/modules/_object-create.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_object-dps.js"),J=S("./node_modules/core-js/modules/_enum-bug-keys.js"),H=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},_e="prototype",xe=function(){var te=S("./node_modules/core-js/modules/_dom-create.js")("iframe"),le=J.length,ne="<",re=">",me;for(te.style.display="none",S("./node_modules/core-js/modules/_html.js").appendChild(te),te.src="javascript:",me=te.contentWindow.document,me.open(),me.write(ne+"script"+re+"document.F=Object"+ne+"/script"+re),me.close(),xe=me.F;le--;)delete xe[_e][J[le]];return xe()};W.exports=Object.create||function(le,ne){var re;return le!==null?(ve[_e]=P(le),re=new ve,ve[_e]=null,re[H]=le):re=xe(),ne===void 0?re:Z(re,ne)}},"./node_modules/core-js/modules/_object-dp.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_ie8-dom-define.js"),J=S("./node_modules/core-js/modules/_to-primitive.js"),H=Object.defineProperty;D.f=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,xe,te){if(P(_e),xe=J(xe,!0),P(te),Z)try{return H(_e,xe,te)}catch{}if("get"in te||"set"in te)throw TypeError("Accessors not supported!");return"value"in te&&(_e[xe]=te.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_an-object.js"),J=S("./node_modules/core-js/modules/_object-keys.js");W.exports=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,_e){Z(ve);for(var xe=J(_e),te=xe.length,le=0,ne;te>le;)P.f(ve,ne=xe[le++],_e[ne]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-pie.js"),Z=S("./node_modules/core-js/modules/_property-desc.js"),J=S("./node_modules/core-js/modules/_to-iobject.js"),H=S("./node_modules/core-js/modules/_to-primitive.js"),ve=S("./node_modules/core-js/modules/_has.js"),_e=S("./node_modules/core-js/modules/_ie8-dom-define.js"),xe=Object.getOwnPropertyDescriptor;D.f=S("./node_modules/core-js/modules/_descriptors.js")?xe:function(le,ne){if(le=J(le),ne=H(ne,!0),_e)try{return xe(le,ne)}catch{}if(ve(le,ne))return Z(!P.f.call(le,ne),le[ne])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-iobject.js"),Z=S("./node_modules/core-js/modules/_object-gopn.js").f,J={}.toString,H=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(_e){try{return Z(_e)}catch{return H.slice()}};W.exports.f=function(xe){return H&&J.call(xe)=="[object Window]"?ve(xe):Z(P(xe))}},"./node_modules/core-js/modules/_object-gopn.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-keys-internal.js"),Z=S("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");D.f=Object.getOwnPropertyNames||function(H){return P(H,Z)}},"./node_modules/core-js/modules/_object-gops.js":function(W,D){D.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_has.js"),Z=S("./node_modules/core-js/modules/_to-object.js"),J=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),H=Object.prototype;W.exports=Object.getPrototypeOf||function(ve){return ve=Z(ve),P(ve,J)?ve[J]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?H:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_has.js"),Z=S("./node_modules/core-js/modules/_to-iobject.js"),J=S("./node_modules/core-js/modules/_array-includes.js")(!1),H=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");W.exports=function(ve,_e){var xe=Z(ve),te=0,le=[],ne;for(ne in xe)ne!=H&&P(xe,ne)&&le.push(ne);for(;_e.length>te;)P(xe,ne=_e[te++])&&(~J(le,ne)||le.push(ne));return le}},"./node_modules/core-js/modules/_object-keys.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-keys-internal.js"),Z=S("./node_modules/core-js/modules/_enum-bug-keys.js");W.exports=Object.keys||function(H){return P(H,Z)}},"./node_modules/core-js/modules/_object-pie.js":function(W,D){D.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-gopn.js"),Z=S("./node_modules/core-js/modules/_object-gops.js"),J=S("./node_modules/core-js/modules/_an-object.js"),H=S("./node_modules/core-js/modules/_global.js").Reflect;W.exports=H&&H.ownKeys||function(_e){var xe=P.f(J(_e)),te=Z.f;return te?xe.concat(te(_e)):xe}},"./node_modules/core-js/modules/_property-desc.js":function(W,D){W.exports=function(S,P){return{enumerable:!(S&1),configurable:!(S&2),writable:!(S&4),value:P}}},"./node_modules/core-js/modules/_redefine.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_hide.js"),J=S("./node_modules/core-js/modules/_has.js"),H=S("./node_modules/core-js/modules/_uid.js")("src"),ve=S("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",xe=(""+ve).split(_e);S("./node_modules/core-js/modules/_core.js").inspectSource=function(te){return ve.call(te)},(W.exports=function(te,le,ne,re){var me=typeof ne=="function";me&&(J(ne,"name")||Z(ne,"name",le)),te[le]!==ne&&(me&&(J(ne,H)||Z(ne,H,te[le]?""+te[le]:xe.join(String(le)))),te===P?te[le]=ne:re?te[le]?te[le]=ne:Z(te,le,ne):(delete te[le],Z(te,le,ne)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[H]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_classof.js"),Z=RegExp.prototype.exec;W.exports=function(J,H){var ve=J.exec;if(typeof ve=="function"){var _e=ve.call(J,H);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(P(J)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return Z.call(J,H)}},"./node_modules/core-js/modules/_regexp-exec.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_flags.js"),Z=RegExp.prototype.exec,J=String.prototype.replace,H=Z,ve="lastIndex",_e=function(){var le=/a/,ne=/b*/g;return Z.call(le,"a"),Z.call(ne,"a"),le[ve]!==0||ne[ve]!==0}(),xe=/()??/.exec("")[1]!==void 0,te=_e||xe;te&&(H=function(ne){var re=this,me,we,be,Be;return xe&&(we=new RegExp("^"+re.source+"$(?!\\s)",P.call(re))),_e&&(me=re[ve]),be=Z.call(re,ne),_e&&be&&(re[ve]=re.global?be.index+be[0].length:me),xe&&be&&be.length>1&&J.call(be[0],we,function(){for(Be=1;Be<arguments.length-2;Be++)arguments[Be]===void 0&&(be[Be]=void 0)}),be}),W.exports=H},"./node_modules/core-js/modules/_set-to-string-tag.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js").f,Z=S("./node_modules/core-js/modules/_has.js"),J=S("./node_modules/core-js/modules/_wks.js")("toStringTag");W.exports=function(H,ve,_e){H&&!Z(H=_e?H:H.prototype,J)&&P(H,J,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_shared.js")("keys"),Z=S("./node_modules/core-js/modules/_uid.js");W.exports=function(J){return P[J]||(P[J]=Z(J))}},"./node_modules/core-js/modules/_shared.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_core.js"),Z=S("./node_modules/core-js/modules/_global.js"),J="__core-js_shared__",H=Z[J]||(Z[J]={});(W.exports=function(ve,_e){return H[ve]||(H[ve]=_e!==void 0?_e:{})})("versions",[]).push({version:P.version,mode:S("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_a-function.js"),J=S("./node_modules/core-js/modules/_wks.js")("species");W.exports=function(H,ve){var _e=P(H).constructor,xe;return _e===void 0||(xe=P(_e)[J])==null?ve:Z(xe)}},"./node_modules/core-js/modules/_string-at.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-integer.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(J){return function(H,ve){var _e=String(Z(H)),xe=P(ve),te=_e.length,le,ne;return xe<0||xe>=te?J?"":void 0:(le=_e.charCodeAt(xe),le<55296||le>56319||xe+1===te||(ne=_e.charCodeAt(xe+1))<56320||ne>57343?J?_e.charAt(xe):le:J?_e.slice(xe,xe+2):(le-55296<<10)+(ne-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-regexp.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(J,H,ve){if(P(H))throw TypeError("String#"+ve+" doesn't accept regex!");return String(Z(J))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-integer.js"),Z=Math.max,J=Math.min;W.exports=function(H,ve){return H=P(H),H<0?Z(H+ve,0):J(H,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(W,D){var S=Math.ceil,P=Math.floor;W.exports=function(Z){return isNaN(Z=+Z)?0:(Z>0?P:S)(Z)}},"./node_modules/core-js/modules/_to-iobject.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_iobject.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(J){return P(Z(J))}},"./node_modules/core-js/modules/_to-length.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-integer.js"),Z=Math.min;W.exports=function(J){return J>0?Z(P(J),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_defined.js");W.exports=function(Z){return Object(P(Z))}},"./node_modules/core-js/modules/_to-primitive.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-object.js");W.exports=function(Z,J){if(!P(Z))return Z;var H,ve;if(J&&typeof(H=Z.toString)=="function"&&!P(ve=H.call(Z))||typeof(H=Z.valueOf)=="function"&&!P(ve=H.call(Z))||!J&&typeof(H=Z.toString)=="function"&&!P(ve=H.call(Z)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(W,D){var S=0,P=Math.random();W.exports=function(Z){return"Symbol(".concat(Z===void 0?"":Z,")_",(++S+P).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_core.js"),J=S("./node_modules/core-js/modules/_library.js"),H=S("./node_modules/core-js/modules/_wks-ext.js"),ve=S("./node_modules/core-js/modules/_object-dp.js").f;W.exports=function(_e){var xe=Z.Symbol||(Z.Symbol=J?{}:P.Symbol||{});_e.charAt(0)!="_"&&!(_e in xe)&&ve(xe,_e,{value:H.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(W,D,S){D.f=S("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_shared.js")("wks"),Z=S("./node_modules/core-js/modules/_uid.js"),J=S("./node_modules/core-js/modules/_global.js").Symbol,H=typeof J=="function",ve=W.exports=function(_e){return P[_e]||(P[_e]=H&&J[_e]||(H?J:Z)("Symbol."+_e))};ve.store=P},"./node_modules/core-js/modules/core.get-iterator-method.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_classof.js"),Z=S("./node_modules/core-js/modules/_wks.js")("iterator"),J=S("./node_modules/core-js/modules/_iterators.js");W.exports=S("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(H){if(H!=null)return H[Z]||H["@@iterator"]||J[P(H)]}},"./node_modules/core-js/modules/es6.array.from.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_ctx.js"),Z=S("./node_modules/core-js/modules/_export.js"),J=S("./node_modules/core-js/modules/_to-object.js"),H=S("./node_modules/core-js/modules/_iter-call.js"),ve=S("./node_modules/core-js/modules/_is-array-iter.js"),_e=S("./node_modules/core-js/modules/_to-length.js"),xe=S("./node_modules/core-js/modules/_create-property.js"),te=S("./node_modules/core-js/modules/core.get-iterator-method.js");Z(Z.S+Z.F*!S("./node_modules/core-js/modules/_iter-detect.js")(function(le){Array.from(le)}),"Array",{from:function(ne){var re=J(ne),me=typeof this=="function"?this:Array,we=arguments.length,be=we>1?arguments[1]:void 0,Be=be!==void 0,Ie=0,Oe=te(re),$e,Ve,ot,ut;if(Be&&(be=P(be,we>2?arguments[2]:void 0,2)),Oe!=null&&!(me==Array&&ve(Oe)))for(ut=Oe.call(re),Ve=new me;!(ot=ut.next()).done;Ie++)xe(Ve,Ie,Be?H(ut,be,[ot.value,Ie],!0):ot.value);else for($e=_e(re.length),Ve=new me($e);$e>Ie;Ie++)xe(Ve,Ie,Be?be(re[Ie],Ie):re[Ie]);return Ve.length=Ie,Ve}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_add-to-unscopables.js"),Z=S("./node_modules/core-js/modules/_iter-step.js"),J=S("./node_modules/core-js/modules/_iterators.js"),H=S("./node_modules/core-js/modules/_to-iobject.js");W.exports=S("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,_e){this._t=H(ve),this._i=0,this._k=_e},function(){var ve=this._t,_e=this._k,xe=this._i++;return!ve||xe>=ve.length?(this._t=void 0,Z(1)):_e=="keys"?Z(0,xe):_e=="values"?Z(0,ve[xe]):Z(0,[xe,ve[xe]])},"values"),J.Arguments=J.Array,P("keys"),P("values"),P("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js");P(P.P,"Function",{bind:S("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js").f,Z=Function.prototype,J=/^\s*function ([^ (]*)/,H="name";H in Z||S("./node_modules/core-js/modules/_descriptors.js")&&P(Z,H,{configurable:!0,get:function(){try{return(""+this).match(J)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_global.js").isFinite;P(P.S,"Number",{isFinite:function(H){return typeof H=="number"&&Z(H)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_classof.js"),Z={};Z[S("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",Z+""!="[object z]"&&S("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+P(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_regexp-exec.js");S("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:P!==/./.exec},{exec:P})},"./node_modules/core-js/modules/es6.regexp.split.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-regexp.js"),Z=S("./node_modules/core-js/modules/_an-object.js"),J=S("./node_modules/core-js/modules/_species-constructor.js"),H=S("./node_modules/core-js/modules/_advance-string-index.js"),ve=S("./node_modules/core-js/modules/_to-length.js"),_e=S("./node_modules/core-js/modules/_regexp-exec-abstract.js"),xe=S("./node_modules/core-js/modules/_regexp-exec.js"),te=S("./node_modules/core-js/modules/_fails.js"),le=Math.min,ne=[].push,re="split",me="length",we="lastIndex",be=4294967295,Be=!te(function(){});S("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ie,Oe,$e,Ve){var ot;return"abbc"[re](/(b)*/)[1]=="c"||"test"[re](/(?:)/,-1)[me]!=4||"ab"[re](/(?:ab)*/)[me]!=2||"."[re](/(.?)(.?)/)[me]!=4||"."[re](/()()/)[me]>1||""[re](/.?/)[me]?ot=function(ut,gt){var Mt=String(this);if(ut===void 0&&gt===0)return[];if(!P(ut))return $e.call(Mt,ut,gt);for(var ct=[],xt=(ut.ignoreCase?"i":"")+(ut.multiline?"m":"")+(ut.unicode?"u":"")+(ut.sticky?"y":""),$t=0,Ye=gt===void 0?be:gt>>>0,sn=new RegExp(ut.source,xt+"g"),En,Ht,Rt;(En=xe.call(sn,Mt))&&(Ht=sn[we],!(Ht>$t&&(ct.push(Mt.slice($t,En.index)),En[me]>1&&En.index<Mt[me]&&ne.apply(ct,En.slice(1)),Rt=En[0][me],$t=Ht,ct[me]>=Ye)));)sn[we]===En.index&&sn[we]++;return $t===Mt[me]?(Rt||!sn.test(""))&&ct.push(""):ct.push(Mt.slice($t)),ct[me]>Ye?ct.slice(0,Ye):ct}:"0"[re](void 0,0)[me]?ot=function(ut,gt){return ut===void 0&&gt===0?[]:$e.call(this,ut,gt)}:ot=$e,[function(gt,Mt){var ct=Ie(this),xt=gt==null?void 0:gt[Oe];return xt!==void 0?xt.call(gt,ct,Mt):ot.call(String(ct),gt,Mt)},function(ut,gt){var Mt=Ve(ot,ut,this,gt,ot!==$e);if(Mt.done)return Mt.value;var ct=Z(ut),xt=String(this),$t=J(ct,RegExp),Ye=ct.unicode,sn=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(Be?"y":"g"),En=new $t(Be?ct:"^(?:"+ct.source+")",sn),Ht=gt===void 0?be:gt>>>0;if(Ht===0)return[];if(xt.length===0)return _e(En,xt)===null?[xt]:[];for(var Rt=0,vn=0,Te=[];vn<xt.length;){En.lastIndex=Be?vn:0;var F=_e(En,Be?xt:xt.slice(vn)),O;if(F===null||(O=le(ve(En.lastIndex+(Be?0:vn)),xt.length))===Rt)vn=H(xt,vn,Ye);else{if(Te.push(xt.slice(Rt,vn)),Te.length===Ht)return Te;for(var ye=1;ye<=F.length-1;ye++)if(Te.push(F[ye]),Te.length===Ht)return Te;vn=Rt=O}}return Te.push(xt.slice(Rt)),Te}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_string-context.js"),J="includes";P(P.P+P.F*S("./node_modules/core-js/modules/_fails-is-regexp.js")(J),"String",{includes:function(ve){return!!~Z(this,ve,J).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_has.js"),J=S("./node_modules/core-js/modules/_descriptors.js"),H=S("./node_modules/core-js/modules/_export.js"),ve=S("./node_modules/core-js/modules/_redefine.js"),_e=S("./node_modules/core-js/modules/_meta.js").KEY,xe=S("./node_modules/core-js/modules/_fails.js"),te=S("./node_modules/core-js/modules/_shared.js"),le=S("./node_modules/core-js/modules/_set-to-string-tag.js"),ne=S("./node_modules/core-js/modules/_uid.js"),re=S("./node_modules/core-js/modules/_wks.js"),me=S("./node_modules/core-js/modules/_wks-ext.js"),we=S("./node_modules/core-js/modules/_wks-define.js"),be=S("./node_modules/core-js/modules/_enum-keys.js"),Be=S("./node_modules/core-js/modules/_is-array.js"),Ie=S("./node_modules/core-js/modules/_an-object.js"),Oe=S("./node_modules/core-js/modules/_is-object.js"),$e=S("./node_modules/core-js/modules/_to-object.js"),Ve=S("./node_modules/core-js/modules/_to-iobject.js"),ot=S("./node_modules/core-js/modules/_to-primitive.js"),ut=S("./node_modules/core-js/modules/_property-desc.js"),gt=S("./node_modules/core-js/modules/_object-create.js"),Mt=S("./node_modules/core-js/modules/_object-gopn-ext.js"),ct=S("./node_modules/core-js/modules/_object-gopd.js"),xt=S("./node_modules/core-js/modules/_object-gops.js"),$t=S("./node_modules/core-js/modules/_object-dp.js"),Ye=S("./node_modules/core-js/modules/_object-keys.js"),sn=ct.f,En=$t.f,Ht=Mt.f,Rt=P.Symbol,vn=P.JSON,Te=vn&&vn.stringify,F="prototype",O=re("_hidden"),ye=re("toPrimitive"),We={}.propertyIsEnumerable,tt=te("symbol-registry"),Ge=te("symbols"),ae=te("op-symbols"),L=Object[F],j=typeof Rt=="function"&&!!xt.f,Ee=P.QObject,Se=!Ee||!Ee[F]||!Ee[F].findChild,Ke=J&&xe(function(){return gt(En({},"a",{get:function(){return En(this,"a",{value:7}).a}})).a!=7})?function(se,he,Ce){var Re=sn(L,he);Re&&delete L[he],En(se,he,Ce),Re&&se!==L&&En(L,he,Re)}:En,Qe=function(se){var he=Ge[se]=gt(Rt[F]);return he._k=se,he},Gt=j&&typeof Rt.iterator=="symbol"?function(se){return typeof se=="symbol"}:function(se){return se instanceof Rt},cn=function(he,Ce,Re){return he===L&&cn(ae,Ce,Re),Ie(he),Ce=ot(Ce,!0),Ie(Re),Z(Ge,Ce)?(Re.enumerable?(Z(he,O)&&he[O][Ce]&&(he[O][Ce]=!1),Re=gt(Re,{enumerable:ut(0,!1)})):(Z(he,O)||En(he,O,ut(1,{})),he[O][Ce]=!0),Ke(he,Ce,Re)):En(he,Ce,Re)},Lt=function(he,Ce){Ie(he);for(var Re=be(Ce=Ve(Ce)),He=0,Ue=Re.length,Ne;Ue>He;)cn(he,Ne=Re[He++],Ce[Ne]);return he},In=function(he,Ce){return Ce===void 0?gt(he):Lt(gt(he),Ce)},_n=function(he){var Ce=We.call(this,he=ot(he,!0));return this===L&&Z(Ge,he)&&!Z(ae,he)?!1:Ce||!Z(this,he)||!Z(Ge,he)||Z(this,O)&&this[O][he]?Ce:!0},wr=function(he,Ce){if(he=Ve(he),Ce=ot(Ce,!0),!(he===L&&Z(Ge,Ce)&&!Z(ae,Ce))){var Re=sn(he,Ce);return Re&&Z(Ge,Ce)&&!(Z(he,O)&&he[O][Ce])&&(Re.enumerable=!0),Re}},ni=function(he){for(var Ce=Ht(Ve(he)),Re=[],He=0,Ue;Ce.length>He;)!Z(Ge,Ue=Ce[He++])&&Ue!=O&&Ue!=_e&&Re.push(Ue);return Re},ar=function(he){for(var Ce=he===L,Re=Ht(Ce?ae:Ve(he)),He=[],Ue=0,Ne;Re.length>Ue;)Z(Ge,Ne=Re[Ue++])&&(!Ce||Z(L,Ne))&&He.push(Ge[Ne]);return He};j||(Rt=function(){if(this instanceof Rt)throw TypeError("Symbol is not a constructor!");var he=ne(arguments.length>0?arguments[0]:void 0),Ce=function(Re){this===L&&Ce.call(ae,Re),Z(this,O)&&Z(this[O],he)&&(this[O][he]=!1),Ke(this,he,ut(1,Re))};return J&&Se&&Ke(L,he,{configurable:!0,set:Ce}),Qe(he)},ve(Rt[F],"toString",function(){return this._k}),ct.f=wr,$t.f=cn,S("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=ni,S("./node_modules/core-js/modules/_object-pie.js").f=_n,xt.f=ar,J&&!S("./node_modules/core-js/modules/_library.js")&&ve(L,"propertyIsEnumerable",_n,!0),me.f=function(se){return Qe(re(se))}),H(H.G+H.W+H.F*!j,{Symbol:Rt});for(var Ln="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),lr=0;Ln.length>lr;)re(Ln[lr++]);for(var di=Ye(re.store),Pe=0;di.length>Pe;)we(di[Pe++]);H(H.S+H.F*!j,"Symbol",{for:function(se){return Z(tt,se+="")?tt[se]:tt[se]=Rt(se)},keyFor:function(he){if(!Gt(he))throw TypeError(he+" is not a symbol!");for(var Ce in tt)if(tt[Ce]===he)return Ce},useSetter:function(){Se=!0},useSimple:function(){Se=!1}}),H(H.S+H.F*!j,"Object",{create:In,defineProperty:cn,defineProperties:Lt,getOwnPropertyDescriptor:wr,getOwnPropertyNames:ni,getOwnPropertySymbols:ar});var ie=xe(function(){xt.f(1)});H(H.S+H.F*ie,"Object",{getOwnPropertySymbols:function(he){return xt.f($e(he))}}),vn&&H(H.S+H.F*(!j||xe(function(){var se=Rt();return Te([se])!="[null]"||Te({a:se})!="{}"||Te(Object(se))!="{}"})),"JSON",{stringify:function(he){for(var Ce=[he],Re=1,He,Ue;arguments.length>Re;)Ce.push(arguments[Re++]);if(Ue=He=Ce[1],!(!Oe(He)&&he===void 0||Gt(he)))return Be(He)||(He=function(Ne,Je){if(typeof Ue=="function"&&(Je=Ue.call(this,Ne,Je)),!Gt(Je))return Je}),Ce[1]=He,Te.apply(vn,Ce)}}),Rt[F][ye]||S("./node_modules/core-js/modules/_hide.js")(Rt[F],ye,Rt[F].valueOf),le(Rt,"Symbol"),le(Math,"Math",!0),le(P.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_array-includes.js")(!0);P(P.P,"Array",{includes:function(H){return Z(this,H,arguments.length>1?arguments[1]:void 0)}}),S("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_own-keys.js"),J=S("./node_modules/core-js/modules/_to-iobject.js"),H=S("./node_modules/core-js/modules/_object-gopd.js"),ve=S("./node_modules/core-js/modules/_create-property.js");P(P.S,"Object",{getOwnPropertyDescriptors:function(xe){for(var te=J(xe),le=H.f,ne=Z(te),re={},me=0,we,be;ne.length>me;)be=le(te,we=ne[me++]),be!==void 0&&ve(re,we,be);return re}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(W,D,S){S("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(W,D,S){for(var P=S("./node_modules/core-js/modules/es6.array.iterator.js"),Z=S("./node_modules/core-js/modules/_object-keys.js"),J=S("./node_modules/core-js/modules/_redefine.js"),H=S("./node_modules/core-js/modules/_global.js"),ve=S("./node_modules/core-js/modules/_hide.js"),_e=S("./node_modules/core-js/modules/_iterators.js"),xe=S("./node_modules/core-js/modules/_wks.js"),te=xe("iterator"),le=xe("toStringTag"),ne=_e.Array,re={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},me=Z(re),we=0;we<me.length;we++){var be=me[we],Be=re[be],Ie=H[be],Oe=Ie&&Ie.prototype,$e;if(Oe&&(Oe[te]||ve(Oe,te,ne),Oe[le]||ve(Oe,le,be),_e[be]=ne,Be))for($e in P)Oe[$e]||J(Oe,$e,P[$e],!0)}},"./node_modules/crypt/crypt.js":function(W,D){(function(){var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P={rotl:function(Z,J){return Z<<J|Z>>>32-J},rotr:function(Z,J){return Z<<32-J|Z>>>J},endian:function(Z){if(Z.constructor==Number)return P.rotl(Z,8)&16711935|P.rotl(Z,24)&4278255360;for(var J=0;J<Z.length;J++)Z[J]=P.endian(Z[J]);return Z},randomBytes:function(Z){for(var J=[];Z>0;Z--)J.push(Math.floor(Math.random()*256));return J},bytesToWords:function(Z){for(var J=[],H=0,ve=0;H<Z.length;H++,ve+=8)J[ve>>>5]|=Z[H]<<24-ve%32;return J},wordsToBytes:function(Z){for(var J=[],H=0;H<Z.length*32;H+=8)J.push(Z[H>>>5]>>>24-H%32&255);return J},bytesToHex:function(Z){for(var J=[],H=0;H<Z.length;H++)J.push((Z[H]>>>4).toString(16)),J.push((Z[H]&15).toString(16));return J.join("")},hexToBytes:function(Z){for(var J=[],H=0;H<Z.length;H+=2)J.push(parseInt(Z.substr(H,2),16));return J},bytesToBase64:function(Z){for(var J=[],H=0;H<Z.length;H+=3)for(var ve=Z[H]<<16|Z[H+1]<<8|Z[H+2],_e=0;_e<4;_e++)H*8+_e*6<=Z.length*8?J.push(S.charAt(ve>>>6*(3-_e)&63)):J.push("=");return J.join("")},base64ToBytes:function(Z){Z=Z.replace(/[^A-Z0-9+\/]/ig,"");for(var J=[],H=0,ve=0;H<Z.length;ve=++H%4)ve!=0&&J.push((S.indexOf(Z.charAt(H-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|S.indexOf(Z.charAt(H))>>>6-ve*2);return J}};W.exports=P})()},"./node_modules/is-buffer/index.js":function(W,D){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */W.exports=function(Z){return Z!=null&&(S(Z)||P(Z)||!!Z._isBuffer)};function S(Z){return!!Z.constructor&&typeof Z.constructor.isBuffer=="function"&&Z.constructor.isBuffer(Z)}function P(Z){return typeof Z.readFloatLE=="function"&&typeof Z.slice=="function"&&S(Z.slice(0,0))}},"./node_modules/md5/md5.js":function(W,D,S){(function(){var P=S("./node_modules/crypt/crypt.js"),Z=S("./node_modules/charenc/charenc.js").utf8,J=S("./node_modules/is-buffer/index.js"),H=S("./node_modules/charenc/charenc.js").bin,ve=function(_e,xe){_e.constructor==String?xe&&xe.encoding==="binary"?_e=H.stringToBytes(_e):_e=Z.stringToBytes(_e):J(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var te=P.bytesToWords(_e),le=_e.length*8,ne=1732584193,re=-271733879,me=-1732584194,we=271733878,be=0;be<te.length;be++)te[be]=(te[be]<<8|te[be]>>>24)&16711935|(te[be]<<24|te[be]>>>8)&4278255360;te[le>>>5]|=128<<le%32,te[(le+64>>>9<<4)+14]=le;for(var Be=ve._ff,Ie=ve._gg,Oe=ve._hh,$e=ve._ii,be=0;be<te.length;be+=16){var Ve=ne,ot=re,ut=me,gt=we;ne=Be(ne,re,me,we,te[be+0],7,-680876936),we=Be(we,ne,re,me,te[be+1],12,-389564586),me=Be(me,we,ne,re,te[be+2],17,606105819),re=Be(re,me,we,ne,te[be+3],22,-1044525330),ne=Be(ne,re,me,we,te[be+4],7,-176418897),we=Be(we,ne,re,me,te[be+5],12,1200080426),me=Be(me,we,ne,re,te[be+6],17,-1473231341),re=Be(re,me,we,ne,te[be+7],22,-45705983),ne=Be(ne,re,me,we,te[be+8],7,1770035416),we=Be(we,ne,re,me,te[be+9],12,-1958414417),me=Be(me,we,ne,re,te[be+10],17,-42063),re=Be(re,me,we,ne,te[be+11],22,-1990404162),ne=Be(ne,re,me,we,te[be+12],7,1804603682),we=Be(we,ne,re,me,te[be+13],12,-40341101),me=Be(me,we,ne,re,te[be+14],17,-1502002290),re=Be(re,me,we,ne,te[be+15],22,1236535329),ne=Ie(ne,re,me,we,te[be+1],5,-165796510),we=Ie(we,ne,re,me,te[be+6],9,-1069501632),me=Ie(me,we,ne,re,te[be+11],14,643717713),re=Ie(re,me,we,ne,te[be+0],20,-373897302),ne=Ie(ne,re,me,we,te[be+5],5,-701558691),we=Ie(we,ne,re,me,te[be+10],9,38016083),me=Ie(me,we,ne,re,te[be+15],14,-660478335),re=Ie(re,me,we,ne,te[be+4],20,-405537848),ne=Ie(ne,re,me,we,te[be+9],5,568446438),we=Ie(we,ne,re,me,te[be+14],9,-1019803690),me=Ie(me,we,ne,re,te[be+3],14,-187363961),re=Ie(re,me,we,ne,te[be+8],20,1163531501),ne=Ie(ne,re,me,we,te[be+13],5,-1444681467),we=Ie(we,ne,re,me,te[be+2],9,-51403784),me=Ie(me,we,ne,re,te[be+7],14,1735328473),re=Ie(re,me,we,ne,te[be+12],20,-1926607734),ne=Oe(ne,re,me,we,te[be+5],4,-378558),we=Oe(we,ne,re,me,te[be+8],11,-2022574463),me=Oe(me,we,ne,re,te[be+11],16,1839030562),re=Oe(re,me,we,ne,te[be+14],23,-35309556),ne=Oe(ne,re,me,we,te[be+1],4,-1530992060),we=Oe(we,ne,re,me,te[be+4],11,1272893353),me=Oe(me,we,ne,re,te[be+7],16,-155497632),re=Oe(re,me,we,ne,te[be+10],23,-1094730640),ne=Oe(ne,re,me,we,te[be+13],4,681279174),we=Oe(we,ne,re,me,te[be+0],11,-358537222),me=Oe(me,we,ne,re,te[be+3],16,-722521979),re=Oe(re,me,we,ne,te[be+6],23,76029189),ne=Oe(ne,re,me,we,te[be+9],4,-640364487),we=Oe(we,ne,re,me,te[be+12],11,-421815835),me=Oe(me,we,ne,re,te[be+15],16,530742520),re=Oe(re,me,we,ne,te[be+2],23,-995338651),ne=$e(ne,re,me,we,te[be+0],6,-198630844),we=$e(we,ne,re,me,te[be+7],10,1126891415),me=$e(me,we,ne,re,te[be+14],15,-1416354905),re=$e(re,me,we,ne,te[be+5],21,-57434055),ne=$e(ne,re,me,we,te[be+12],6,1700485571),we=$e(we,ne,re,me,te[be+3],10,-1894986606),me=$e(me,we,ne,re,te[be+10],15,-1051523),re=$e(re,me,we,ne,te[be+1],21,-2054922799),ne=$e(ne,re,me,we,te[be+8],6,1873313359),we=$e(we,ne,re,me,te[be+15],10,-30611744),me=$e(me,we,ne,re,te[be+6],15,-1560198380),re=$e(re,me,we,ne,te[be+13],21,1309151649),ne=$e(ne,re,me,we,te[be+4],6,-145523070),we=$e(we,ne,re,me,te[be+11],10,-1120210379),me=$e(me,we,ne,re,te[be+2],15,718787259),re=$e(re,me,we,ne,te[be+9],21,-343485551),ne=ne+Ve>>>0,re=re+ot>>>0,me=me+ut>>>0,we=we+gt>>>0}return P.endian([ne,re,me,we])};ve._ff=function(_e,xe,te,le,ne,re,me){var we=_e+(xe&te|~xe&le)+(ne>>>0)+me;return(we<<re|we>>>32-re)+xe},ve._gg=function(_e,xe,te,le,ne,re,me){var we=_e+(xe&le|te&~le)+(ne>>>0)+me;return(we<<re|we>>>32-re)+xe},ve._hh=function(_e,xe,te,le,ne,re,me){var we=_e+(xe^te^le)+(ne>>>0)+me;return(we<<re|we>>>32-re)+xe},ve._ii=function(_e,xe,te,le,ne,re,me){var we=_e+(te^(xe|~le))+(ne>>>0)+me;return(we<<re|we>>>32-re)+xe},ve._blocksize=16,ve._digestsize=16,W.exports=function(_e,xe){if(_e==null)throw new Error("Illegal argument "+_e);var te=P.wordsToBytes(ve(_e,xe));return xe&&xe.asBytes?te:xe&&xe.asString?H.bytesToString(te):P.bytesToHex(te)}})()},"./node_modules/regenerator-runtime/runtime.js":function(W,D,S){var P=function(Z){var J=Object.prototype,H=J.hasOwnProperty,ve,_e=typeof Symbol=="function"?Symbol:{},xe=_e.iterator||"@@iterator",te=_e.asyncIterator||"@@asyncIterator",le=_e.toStringTag||"@@toStringTag";function ne(F,O,ye){return Object.defineProperty(F,O,{value:ye,enumerable:!0,configurable:!0,writable:!0}),F[O]}try{ne({},"")}catch{ne=function(O,ye,We){return O[ye]=We}}function re(F,O,ye,We){var tt=O&&O.prototype instanceof $e?O:$e,Ge=Object.create(tt.prototype),ae=new Rt(We||[]);return Ge._invoke=Ye(F,ye,ae),Ge}Z.wrap=re;function me(F,O,ye){try{return{type:"normal",arg:F.call(O,ye)}}catch(We){return{type:"throw",arg:We}}}var we="suspendedStart",be="suspendedYield",Be="executing",Ie="completed",Oe={};function $e(){}function Ve(){}function ot(){}var ut={};ut[xe]=function(){return this};var gt=Object.getPrototypeOf,Mt=gt&&gt(gt(vn([])));Mt&&Mt!==J&&H.call(Mt,xe)&&(ut=Mt);var ct=ot.prototype=$e.prototype=Object.create(ut);Ve.prototype=ct.constructor=ot,ot.constructor=Ve,Ve.displayName=ne(ot,le,"GeneratorFunction");function xt(F){["next","throw","return"].forEach(function(O){ne(F,O,function(ye){return this._invoke(O,ye)})})}Z.isGeneratorFunction=function(F){var O=typeof F=="function"&&F.constructor;return O?O===Ve||(O.displayName||O.name)==="GeneratorFunction":!1},Z.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,ot):(F.__proto__=ot,ne(F,le,"GeneratorFunction")),F.prototype=Object.create(ct),F},Z.awrap=function(F){return{__await:F}};function $t(F,O){function ye(Ge,ae,L,j){var Ee=me(F[Ge],F,ae);if(Ee.type==="throw")j(Ee.arg);else{var Se=Ee.arg,Ke=Se.value;return Ke&&typeof Ke=="object"&&H.call(Ke,"__await")?O.resolve(Ke.__await).then(function(Qe){ye("next",Qe,L,j)},function(Qe){ye("throw",Qe,L,j)}):O.resolve(Ke).then(function(Qe){Se.value=Qe,L(Se)},function(Qe){return ye("throw",Qe,L,j)})}}var We;function tt(Ge,ae){function L(){return new O(function(j,Ee){ye(Ge,ae,j,Ee)})}return We=We?We.then(L,L):L()}this._invoke=tt}xt($t.prototype),$t.prototype[te]=function(){return this},Z.AsyncIterator=$t,Z.async=function(F,O,ye,We,tt){tt===void 0&&(tt=Promise);var Ge=new $t(re(F,O,ye,We),tt);return Z.isGeneratorFunction(O)?Ge:Ge.next().then(function(ae){return ae.done?ae.value:Ge.next()})};function Ye(F,O,ye){var We=we;return function(Ge,ae){if(We===Be)throw new Error("Generator is already running");if(We===Ie){if(Ge==="throw")throw ae;return Te()}for(ye.method=Ge,ye.arg=ae;;){var L=ye.delegate;if(L){var j=sn(L,ye);if(j){if(j===Oe)continue;return j}}if(ye.method==="next")ye.sent=ye._sent=ye.arg;else if(ye.method==="throw"){if(We===we)throw We=Ie,ye.arg;ye.dispatchException(ye.arg)}else ye.method==="return"&&ye.abrupt("return",ye.arg);We=Be;var Ee=me(F,O,ye);if(Ee.type==="normal"){if(We=ye.done?Ie:be,Ee.arg===Oe)continue;return{value:Ee.arg,done:ye.done}}else Ee.type==="throw"&&(We=Ie,ye.method="throw",ye.arg=Ee.arg)}}}function sn(F,O){var ye=F.iterator[O.method];if(ye===ve){if(O.delegate=null,O.method==="throw"){if(F.iterator.return&&(O.method="return",O.arg=ve,sn(F,O),O.method==="throw"))return Oe;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return Oe}var We=me(ye,F.iterator,O.arg);if(We.type==="throw")return O.method="throw",O.arg=We.arg,O.delegate=null,Oe;var tt=We.arg;if(!tt)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,Oe;if(tt.done)O[F.resultName]=tt.value,O.next=F.nextLoc,O.method!=="return"&&(O.method="next",O.arg=ve);else return tt;return O.delegate=null,Oe}xt(ct),ne(ct,le,"Generator"),ct[xe]=function(){return this},ct.toString=function(){return"[object Generator]"};function En(F){var O={tryLoc:F[0]};1 in F&&(O.catchLoc=F[1]),2 in F&&(O.finallyLoc=F[2],O.afterLoc=F[3]),this.tryEntries.push(O)}function Ht(F){var O=F.completion||{};O.type="normal",delete O.arg,F.completion=O}function Rt(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(En,this),this.reset(!0)}Z.keys=function(F){var O=[];for(var ye in F)O.push(ye);return O.reverse(),function We(){for(;O.length;){var tt=O.pop();if(tt in F)return We.value=tt,We.done=!1,We}return We.done=!0,We}};function vn(F){if(F){var O=F[xe];if(O)return O.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var ye=-1,We=function tt(){for(;++ye<F.length;)if(H.call(F,ye))return tt.value=F[ye],tt.done=!1,tt;return tt.value=ve,tt.done=!0,tt};return We.next=We}}return{next:Te}}Z.values=vn;function Te(){return{value:ve,done:!0}}return Rt.prototype={constructor:Rt,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(Ht),!F)for(var O in this)O.charAt(0)==="t"&&H.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=ve)},stop:function(){this.done=!0;var F=this.tryEntries[0],O=F.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var O=this;function ye(j,Ee){return Ge.type="throw",Ge.arg=F,O.next=j,Ee&&(O.method="next",O.arg=ve),!!Ee}for(var We=this.tryEntries.length-1;We>=0;--We){var tt=this.tryEntries[We],Ge=tt.completion;if(tt.tryLoc==="root")return ye("end");if(tt.tryLoc<=this.prev){var ae=H.call(tt,"catchLoc"),L=H.call(tt,"finallyLoc");if(ae&&L){if(this.prev<tt.catchLoc)return ye(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return ye(tt.finallyLoc)}else if(ae){if(this.prev<tt.catchLoc)return ye(tt.catchLoc,!0)}else if(L){if(this.prev<tt.finallyLoc)return ye(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(F,O){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var We=this.tryEntries[ye];if(We.tryLoc<=this.prev&&H.call(We,"finallyLoc")&&this.prev<We.finallyLoc){var tt=We;break}}tt&&(F==="break"||F==="continue")&&tt.tryLoc<=O&&O<=tt.finallyLoc&&(tt=null);var Ge=tt?tt.completion:{};return Ge.type=F,Ge.arg=O,tt?(this.method="next",this.next=tt.finallyLoc,Oe):this.complete(Ge)},complete:function(F,O){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&O&&(this.next=O),Oe},finish:function(F){for(var O=this.tryEntries.length-1;O>=0;--O){var ye=this.tryEntries[O];if(ye.finallyLoc===F)return this.complete(ye.completion,ye.afterLoc),Ht(ye),Oe}},catch:function(F){for(var O=this.tryEntries.length-1;O>=0;--O){var ye=this.tryEntries[O];if(ye.tryLoc===F){var We=ye.completion;if(We.type==="throw"){var tt=We.arg;Ht(ye)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(F,O,ye){return this.delegate={iterator:vn(F),resultName:O,nextLoc:ye},this.method==="next"&&(this.arg=ve),Oe}},Z}(W.exports);try{regeneratorRuntime=P}catch{Function("r","regeneratorRuntime = r")(P)}},"./src/api.js":function(W,D,S){S.r(D),S.d(D,"setup",function(){return Be}),S.d(D,"setupCache",function(){return be}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var P=S("axios"),Z=S.n(P),J=S("./src/request.js"),H=S("./src/cache.js");S.d(D,"serializeQuery",function(){return H.serializeQuery});var ve=S("./src/config.js"),_e=S("./src/utilities.js");function xe(Ie,Oe){if(Ie==null)return{};var $e=te(Ie,Oe),Ve,ot;if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(Ie);for(ot=0;ot<ut.length;ot++)Ve=ut[ot],!(Oe.indexOf(Ve)>=0)&&Object.prototype.propertyIsEnumerable.call(Ie,Ve)&&($e[Ve]=Ie[Ve])}return $e}function te(Ie,Oe){if(Ie==null)return{};var $e={},Ve=Object.keys(Ie),ot,ut;for(ut=0;ut<Ve.length;ut++)ot=Ve[ut],!(Oe.indexOf(ot)>=0)&&($e[ot]=Ie[ot]);return $e}function le(Ie,Oe){var $e=Object.keys(Ie);if(Object.getOwnPropertySymbols){var Ve=Object.getOwnPropertySymbols(Ie);Oe&&(Ve=Ve.filter(function(ot){return Object.getOwnPropertyDescriptor(Ie,ot).enumerable})),$e.push.apply($e,Ve)}return $e}function ne(Ie){for(var Oe=1;Oe<arguments.length;Oe++){var $e=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?le(Object($e),!0).forEach(function(Ve){re(Ie,Ve,$e[Ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors($e)):le(Object($e)).forEach(function(Ve){Object.defineProperty(Ie,Ve,Object.getOwnPropertyDescriptor($e,Ve))})}return Ie}function re(Ie,Oe,$e){return Oe in Ie?Object.defineProperty(Ie,Oe,{value:$e,enumerable:!0,configurable:!0,writable:!0}):Ie[Oe]=$e,Ie}function me(Ie,Oe,$e,Ve,ot,ut,gt){try{var Mt=Ie[ut](gt),ct=Mt.value}catch(xt){$e(xt);return}Mt.done?Oe(ct):Promise.resolve(ct).then(Ve,ot)}function we(Ie){return function(){var Oe=this,$e=arguments;return new Promise(function(Ve,ot){var ut=Ie.apply(Oe,$e);function gt(ct){me(ut,Ve,ot,gt,Mt,"next",ct)}function Mt(ct){me(ut,Ve,ot,gt,Mt,"throw",ct)}gt(void 0)})}}function be(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie=Object(ve.makeConfig)(Ie);function Oe(Ve){return $e.apply(this,arguments)}function $e(){return $e=we(regeneratorRuntime.mark(function Ve(ot){var ut,gt,Mt,ct,xt;return regeneratorRuntime.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return ut=Object(ve.mergeRequestConfig)(Ie,ot),Ye.next=3,Object(J.default)(ut,ot);case 3:if(gt=Ye.sent,Mt=gt.next,Object(_e.isFunction)(Mt)){Ye.next=7;break}return Ye.abrupt("return",Mt);case 7:return Ye.prev=7,Ye.next=10,ut.adapter(ot);case 10:gt=Ye.sent,Ye.next=16;break;case 13:Ye.prev=13,Ye.t0=Ye.catch(7),ct=Ye.t0;case 16:if(!ct){Ye.next=31;break}if(xt=Object(_e.isFunction)(ut.readOnError)?ut.readOnError(ct,ot):ut.readOnError,!xt){Ye.next=30;break}return Ye.prev=19,ut.acceptStale=!0,Ye.next=23,Object(J.default)(ut,ot);case 23:return gt=Ye.sent,gt.next.request.stale=!0,Ye.abrupt("return",gt.next);case 28:Ye.prev=28,Ye.t1=Ye.catch(19);case 30:throw ct;case 31:return Ye.abrupt("return",Mt(gt));case 32:case"end":return Ye.stop()}},Ve,null,[[7,13],[19,28]])})),$e.apply(this,arguments)}return{adapter:Oe,config:Ie,store:Ie.store}}function Be(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Oe=ne(ne(ne({},ve.defaults.axios),Ie),{},{cache:ne(ne({},ve.defaults.axios.cache),Ie.cache)}),$e=be(Oe.cache);Oe.cache;var Ve=xe(Oe,["cache"]),ot=Z.a.create(ne(ne({},Ve),{},{adapter:$e.adapter}));return ot.cache=$e.store,ot}D.default={setup:Be,setupCache:be,serializeQuery:H.serializeQuery}},"./src/cache.js":function(W,D,S){S.r(D),S.d(D,"read",function(){return le}),S.d(D,"write",function(){return xe}),S.d(D,"key",function(){return re}),S.d(D,"invalidate",function(){return be}),S.d(D,"serializeQuery",function(){return Be}),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var P=S("./src/utilities.js"),Z=S("./node_modules/md5/md5.js"),J=S.n(Z),H=S("./src/serialize.js");function ve(Ie,Oe,$e,Ve,ot,ut,gt){try{var Mt=Ie[ut](gt),ct=Mt.value}catch(xt){$e(xt);return}Mt.done?Oe(ct):Promise.resolve(ct).then(Ve,ot)}function _e(Ie){return function(){var Oe=this,$e=arguments;return new Promise(function(Ve,ot){var ut=Ie.apply(Oe,$e);function gt(ct){ve(ut,Ve,ot,gt,Mt,"next",ct)}function Mt(ct){ve(ut,Ve,ot,gt,Mt,"throw",ct)}gt(void 0)})}}function xe(Ie,Oe,$e){return te.apply(this,arguments)}function te(){return te=_e(regeneratorRuntime.mark(function Ie(Oe,$e,Ve){var ot;return regeneratorRuntime.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.prev=0,ot={expires:Oe.expires,data:Object(H.default)(Oe,$e,Ve)},gt.next=4,Oe.store.setItem(Oe.uuid,ot);case 4:gt.next=19;break;case 6:if(gt.prev=6,gt.t0=gt.catch(0),Oe.debug("Could not store response",gt.t0),!Oe.clearOnError){gt.next=18;break}return gt.prev=10,gt.next=13,Oe.store.clear();case 13:gt.next=18;break;case 15:gt.prev=15,gt.t1=gt.catch(10),Oe.debug("Could not clear store",gt.t1);case 18:return gt.abrupt("return",!1);case 19:return gt.abrupt("return",!0);case 20:case"end":return gt.stop()}},Ie,null,[[0,6],[10,15]])})),te.apply(this,arguments)}function le(Ie,Oe){return ne.apply(this,arguments)}function ne(){return ne=_e(regeneratorRuntime.mark(function Ie(Oe,$e){var Ve,ot,ut,gt,Mt,ct,xt,$t;return regeneratorRuntime.wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return Ve=Oe.uuid,ot=Oe.ignoreCache,sn.next=3,Oe.store.getItem(Ve);case 3:if(ut=sn.sent,!(ot||!ut||!ut.data)){sn.next=10;break}throw Oe.debug("cache-miss",$e.url),gt=new Error,gt.reason="cache-miss",gt.message="Entry not found from cache",gt;case 10:if(Mt=ut.expires,ct=ut.data,xt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!xt&&!Oe.acceptStale&&Mt!==0&&Mt<Date.now())){sn.next=18;break}throw Oe.debug("cache-stale",$e.url),$t=new Error,$t.reason="cache-stale",$t.message="Entry is stale",$t;case 18:return Oe.debug(Oe.acceptStale?"cache-hit-stale":"cache-hit",$e.url),sn.abrupt("return",ct);case 20:case"end":return sn.stop()}},Ie)})),ne.apply(this,arguments)}function re(Ie){if(Object(P.isFunction)(Ie.key))return Ie.key;var Oe;return Object(P.isString)(Ie.key)?Oe=function(Ve){var ot="".concat(Ve.baseURL?Ve.baseURL:"").concat(Ve.url),ut="".concat(Ie.key,"/").concat(ot).concat(Be(Ve));return Ve.data?ut+J()(Ve.data):ut}:Oe=function(Ve){var ot="".concat(Ve.baseURL?Ve.baseURL:"").concat(Ve.url),ut=ot+Be(Ve);return Ve.data?ut+J()(Ve.data):ut},Oe}function me(Ie,Oe){return we.apply(this,arguments)}function we(){return we=_e(regeneratorRuntime.mark(function Ie(Oe,$e){var Ve;return regeneratorRuntime.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(Ve=$e.method.toLowerCase(),!Oe.exclude.methods.includes(Ve)){ut.next=4;break}return ut.next=4,Oe.store.removeItem(Oe.uuid);case 4:case"end":return ut.stop()}},Ie)})),we.apply(this,arguments)}function be(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(P.isFunction)(Ie.invalidate)?Ie.invalidate:me}function Be(Ie){if(!Ie.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ie.params);var Oe=Ie.params,$e=Ie.params instanceof URLSearchParams;return $e||(Oe=new URLSearchParams,Object.keys(Ie.params).forEach(function(Ve){return Oe.append(Ve,Ie.params[Ve])})),"?".concat(Oe.toString())}D.default={read:le,write:xe,key:re,invalidate:be,serializeQuery:Be}},"./src/config.js":function(W,D,S){S.r(D),S.d(D,"defaults",function(){return ne}),S.d(D,"makeConfig",function(){return me}),S.d(D,"mergeRequestConfig",function(){return we}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var P=S("axios"),Z=S.n(P),J=S("./src/memory.js"),H=S("./src/cache.js");function ve(be,Be){var Ie=Object.keys(be);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(be);Be&&(Oe=Oe.filter(function($e){return Object.getOwnPropertyDescriptor(be,$e).enumerable})),Ie.push.apply(Ie,Oe)}return Ie}function _e(be){for(var Be=1;Be<arguments.length;Be++){var Ie=arguments[Be]!=null?arguments[Be]:{};Be%2?ve(Object(Ie),!0).forEach(function(Oe){xe(be,Oe,Ie[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(Ie)):ve(Object(Ie)).forEach(function(Oe){Object.defineProperty(be,Oe,Object.getOwnPropertyDescriptor(Ie,Oe))})}return be}function xe(be,Be,Ie){return Be in be?Object.defineProperty(be,Be,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):be[Be]=Ie,be}var te=function(){},le=function(){for(var Be,Ie=arguments.length,Oe=new Array(Ie),$e=0;$e<Ie;$e++)Oe[$e]=arguments[$e];return(Be=console).log.apply(Be,["[axios-cache-adapter]"].concat(Oe))},ne={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:Z.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},re=["limit","store","adapter","uuid","acceptStale"],me=function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=_e(_e(_e({},ne.cache),Be),{},{exclude:_e(_e({},ne.cache.exclude),Be.exclude)});return Ie.key=Object(H.key)(Ie),Ie.invalidate=Object(H.invalidate)(Ie),Ie.debug!==!1?Ie.debug=typeof Ie.debug=="function"?Ie.debug:le:Ie.debug=te,Ie.store||(Ie.store=new J.default),Ie.debug("Global cache config",Ie),Ie},we=function(Be,Ie){var Oe=Ie.cache||{};Oe&&re.forEach(function(Ve){return Oe[Ve]?delete Oe[Ve]:void 0});var $e=_e(_e(_e({},Be),Oe),{},{exclude:_e(_e({},Be.exclude),Oe.exclude)});return $e.debug===!0&&($e.debug=le),Oe.key&&($e.key=Object(H.key)(Oe)),$e.uuid=$e.key(Ie),Be.debug("Request config for ".concat(Ie.url),$e),$e};D.default={defaults:ne,makeConfig:me,mergeRequestConfig:we}},"./src/exclude.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js");var P=S("./src/utilities.js");function Z(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments.length>1?arguments[1]:void 0,ve=J.exclude,_e=ve===void 0?{}:ve,xe=J.debug,te=H.method.toLowerCase();if(te==="head"||_e.methods.includes(te))return xe("Excluding request by HTTP method ".concat(H.url)),!0;if(typeof _e.filter=="function"&&_e.filter(H))return xe("Excluding request by filter ".concat(H.url)),!0;var le=/\?.*$/.test(H.url)||Object(P.isObject)(H.params)&&Object.keys(H.params).length!==0||typeof URLSearchParams<"u"&&H.params instanceof URLSearchParams;if(_e.query&&le)return xe("Excluding request by query ".concat(H.url)),!0;var ne=_e.paths||[],re=ne.some(function(me){return H.url.match(me)});return re?(xe("Excluding request by url match ".concat(H.url)),!0):!1}D.default=Z},"./src/index.node.js":function(W,D,S){S.r(D);var P=S("./src/api.js");S.d(D,"setup",function(){return P.setup}),S.d(D,"setupCache",function(){return P.setupCache}),S.d(D,"serializeQuery",function(){return P.serializeQuery});var Z=S("./src/redis.js");S.d(D,"RedisStore",function(){return Z.default});var J=S("./src/redis-default.js");S.d(D,"RedisDefaultStore",function(){return J.default}),D.default={setup:P.setup,setupCache:P.setupCache,serializeQuery:P.serializeQuery,RedisStore:Z.default,RedisDefaultStore:J.default}},"./src/limit.js":function(W,D,S){S.r(D),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function P(ve,_e,xe,te,le,ne,re){try{var me=ve[ne](re),we=me.value}catch(be){xe(be);return}me.done?_e(we):Promise.resolve(we).then(te,le)}function Z(ve){return function(){var _e=this,xe=arguments;return new Promise(function(te,le){var ne=ve.apply(_e,xe);function re(we){P(ne,te,le,re,me,"next",we)}function me(we){P(ne,te,le,re,me,"throw",we)}re(void 0)})}}function J(ve){return H.apply(this,arguments)}function H(){return H=Z(regeneratorRuntime.mark(function ve(_e){var xe,te;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,_e.store.length();case 2:if(xe=ne.sent,!(xe<_e.limit)){ne.next=5;break}return ne.abrupt("return");case 5:return _e.debug("Current store size: ".concat(xe)),ne.next=8,_e.store.iterate(function(re,me){te||(te={value:re,key:me}),re.expires<te.value.expires&&(te={value:re,key:me})});case 8:if(!te){ne.next=12;break}return _e.debug("Removing item: ".concat(te.key)),ne.next=12,_e.store.removeItem(te.key);case 12:case"end":return ne.stop()}},ve)})),H.apply(this,arguments)}D.default=J},"./src/memory.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var P=S("./src/utilities.js");function Z(te,le,ne,re,me,we,be){try{var Be=te[we](be),Ie=Be.value}catch(Oe){ne(Oe);return}Be.done?le(Ie):Promise.resolve(Ie).then(re,me)}function J(te){return function(){var le=this,ne=arguments;return new Promise(function(re,me){var we=te.apply(le,ne);function be(Ie){Z(we,re,me,be,Be,"next",Ie)}function Be(Ie){Z(we,re,me,be,Be,"throw",Ie)}be(void 0)})}}function H(te,le){if(!(te instanceof le))throw new TypeError("Cannot call a class as a function")}function ve(te,le){for(var ne=0;ne<le.length;ne++){var re=le[ne];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(te,re.key,re)}}function _e(te,le,ne){return le&&ve(te.prototype,le),ne&&ve(te,ne),te}var xe=function(){function te(){H(this,te),this.store={}}return _e(te,[{key:"getItem",value:function(){var le=J(regeneratorRuntime.mark(function re(me){var we;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return we=this.store[me]||null,Be.abrupt("return",JSON.parse(we));case 2:case"end":return Be.stop()}},re,this)}));function ne(re){return le.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var le=J(regeneratorRuntime.mark(function re(me,we){return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return this.store[me]=JSON.stringify(we),Be.abrupt("return",we);case 2:case"end":return Be.stop()}},re,this)}));function ne(re,me){return le.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var le=J(regeneratorRuntime.mark(function re(me){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:delete this.store[me];case 1:case"end":return be.stop()}},re,this)}));function ne(re){return le.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var le=J(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:this.store={};case 1:case"end":return we.stop()}},re,this)}));function ne(){return le.apply(this,arguments)}return ne}()},{key:"length",value:function(){var le=J(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",Object.keys(this.store).length);case 1:case"end":return we.stop()}},re,this)}));function ne(){return le.apply(this,arguments)}return ne}()},{key:"iterate",value:function(ne){return Promise.all(Object(P.mapObject)(this.store,ne))}}]),te}();D.default=xe},"./src/redis-default.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var P=S("util");function Z(te,le,ne,re,me,we,be){try{var Be=te[we](be),Ie=Be.value}catch(Oe){ne(Oe);return}Be.done?le(Ie):Promise.resolve(Ie).then(re,me)}function J(te){return function(){var le=this,ne=arguments;return new Promise(function(re,me){var we=te.apply(le,ne);function be(Ie){Z(we,re,me,be,Be,"next",Ie)}function Be(Ie){Z(we,re,me,be,Be,"throw",Ie)}be(void 0)})}}function H(te,le){if(!(te instanceof le))throw new TypeError("Cannot call a class as a function")}function ve(te,le){for(var ne=0;ne<le.length;ne++){var re=le[ne];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(te,re.key,re)}}function _e(te,le,ne){return le&&ve(te.prototype,le),ne&&ve(te,ne),te}var xe=function(){function te(le){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};H(this,te);var re=new TypeError("First parameter must be a valid RedisClient instance.");try{if(le.constructor.name!=="RedisClient")throw re}catch{throw re}this.client=le,this.prefix=ne.prefix||"axios-cache",this.maxScanCount=ne.maxScanCount||1e3,this.getAsync=Object(P.promisify)(le.get).bind(le),this.psetexAsync=Object(P.promisify)(le.psetex).bind(le),this.delAsync=Object(P.promisify)(le.del).bind(le),this.scanAsync=Object(P.promisify)(le.scan).bind(le)}return _e(te,[{key:"calculateTTL",value:function(ne){var re=Date.now();return ne.expires&&ne.expires>re?ne.expires-re:-1}},{key:"transformKey",value:function(ne){return this.prefix+"_"+ne}},{key:"getItem",value:function(){var le=J(regeneratorRuntime.mark(function re(me){var we;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,this.getAsync(this.transformKey(me));case 2:if(Be.t0=Be.sent,Be.t0){Be.next=5;break}Be.t0=null;case 5:return we=Be.t0,Be.abrupt("return",JSON.parse(we));case 7:case"end":return Be.stop()}},re,this)}));function ne(re){return le.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var le=J(regeneratorRuntime.mark(function re(me,we){var be,Be;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(be=this.transformKey(me),Be=this.calculateTTL(we),!(Be>0)){Oe.next=5;break}return Oe.next=5,this.psetexAsync(be,Be,JSON.stringify(we));case 5:return Oe.abrupt("return",we);case 6:case"end":return Oe.stop()}},re,this)}));function ne(re,me){return le.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var le=J(regeneratorRuntime.mark(function re(me){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,this.delAsync(this.transformKey(me));case 2:case"end":return be.stop()}},re,this)}));function ne(re){return le.apply(this,arguments)}return ne}()},{key:"scan",value:function(){var le=J(regeneratorRuntime.mark(function re(me){var we,be;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:we="0";case 1:return Ie.next=3,this.scanAsync(we,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return be=Ie.sent,we=be[0],Ie.next=7,me(be[1]);case 7:if(we!=="0"){Ie.next=1;break}case 8:case"end":return Ie.stop()}},re,this)}));function ne(re){return le.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var le=J(regeneratorRuntime.mark(function re(){var me=this;return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,this.scan(function(Be){return me.delAsync(Be)});case 2:case"end":return be.stop()}},re,this)}));function ne(){return le.apply(this,arguments)}return ne}()},{key:"length",value:function(){var le=J(regeneratorRuntime.mark(function re(){var me;return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return me=0,be.next=3,this.scan(function(Be){me+=Be.length});case 3:return be.abrupt("return",me);case 4:case"end":return be.stop()}},re,this)}));function ne(){return le.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var le=J(regeneratorRuntime.mark(function re(me){var we=this,be,Be;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Be=function(){return Be=J(regeneratorRuntime.mark(function Ve(ot){var ut,gt;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return ct.next=2,this.getAsync(ot);case 2:if(ct.t0=ct.sent,ct.t0){ct.next=5;break}ct.t0=null;case 5:return ut=ct.t0,gt=JSON.parse(ut),ct.next=9,me(gt,ot);case 9:return ct.abrupt("return",ct.sent);case 10:case"end":return ct.stop()}},Ve,this)})),Be.apply(this,arguments)},be=function(Ve){return Be.apply(this,arguments)},Oe.next=4,this.scan(function($e){return Promise.all($e.map(be.bind(we)))});case 4:return Oe.abrupt("return",Promise.resolve([]));case 5:case"end":return Oe.stop()}},re,this)}));function ne(re){return le.apply(this,arguments)}return ne}()}]),te}();D.default=xe},"./src/redis.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var P=S("util"),Z=S("./src/utilities.js");function J(le,ne,re,me,we,be,Be){try{var Ie=le[be](Be),Oe=Ie.value}catch($e){re($e);return}Ie.done?ne(Oe):Promise.resolve(Oe).then(me,we)}function H(le){return function(){var ne=this,re=arguments;return new Promise(function(me,we){var be=le.apply(ne,re);function Be(Oe){J(be,me,we,Be,Ie,"next",Oe)}function Ie(Oe){J(be,me,we,Be,Ie,"throw",Oe)}Be(void 0)})}}function ve(le,ne){if(!(le instanceof ne))throw new TypeError("Cannot call a class as a function")}function _e(le,ne){for(var re=0;re<ne.length;re++){var me=ne[re];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(le,me.key,me)}}function xe(le,ne,re){return ne&&_e(le.prototype,ne),re&&_e(le,re),le}var te=function(){function le(ne){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,le);var me=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ne.constructor.name!=="RedisClient")throw me}catch{throw me}this.client=ne,this.HASH_KEY=re,this.hgetAsync=Object(P.promisify)(ne.hget).bind(ne),this.hsetAsync=Object(P.promisify)(ne.hset).bind(ne),this.hdelAsync=Object(P.promisify)(ne.hdel).bind(ne),this.delAsync=Object(P.promisify)(ne.del).bind(ne),this.hlenAsync=Object(P.promisify)(ne.hlen).bind(ne),this.hgetallAsync=Object(P.promisify)(ne.hgetall).bind(ne)}return xe(le,[{key:"getItem",value:function(){var ne=H(regeneratorRuntime.mark(function me(we){var be;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetAsync(this.HASH_KEY,we);case 2:if(Ie.t0=Ie.sent,Ie.t0){Ie.next=5;break}Ie.t0=null;case 5:return be=Ie.t0,Ie.abrupt("return",JSON.parse(be));case 7:case"end":return Ie.stop()}},me,this)}));function re(me){return ne.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var ne=H(regeneratorRuntime.mark(function me(we,be){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hsetAsync(this.HASH_KEY,we,JSON.stringify(be));case 2:return Ie.abrupt("return",be);case 3:case"end":return Ie.stop()}},me,this)}));function re(me,we){return ne.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var ne=H(regeneratorRuntime.mark(function me(we){return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,this.hdelAsync(this.HASH_KEY,we);case 2:case"end":return Be.stop()}},me,this)}));function re(me){return ne.apply(this,arguments)}return re}()},{key:"clear",value:function(){var ne=H(regeneratorRuntime.mark(function me(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return be.stop()}},me,this)}));function re(){return ne.apply(this,arguments)}return re}()},{key:"length",value:function(){var ne=H(regeneratorRuntime.mark(function me(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return be.stop()}},me,this)}));function re(){return ne.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var ne=H(regeneratorRuntime.mark(function me(we){var be;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return be=Ie.sent,Ie.abrupt("return",Promise.all(Object(Z.mapObject)(be,we)));case 4:case"end":return Ie.stop()}},me,this)}));function re(me){return ne.apply(this,arguments)}return re}()}]),le}();D.default=te},"./src/request.js":function(W,D,S){S.r(D),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var P=S("./src/response.js"),Z=S("./src/exclude.js"),J=S("./src/cache.js");function H(te,le,ne,re,me,we,be){try{var Be=te[we](be),Ie=Be.value}catch(Oe){ne(Oe);return}Be.done?le(Ie):Promise.resolve(Ie).then(re,me)}function ve(te){return function(){var le=this,ne=arguments;return new Promise(function(re,me){var we=te.apply(le,ne);function be(Ie){H(we,re,me,be,Be,"next",Ie)}function Be(Ie){H(we,re,me,be,Be,"throw",Ie)}be(void 0)})}}function _e(te,le){return xe.apply(this,arguments)}function xe(){return xe=ve(regeneratorRuntime.mark(function te(le,ne){var re,me,we;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return we=function(){return le.excludeFromCache=!0,{config:le,next:re}},le.debug("uuid",le.uuid),re=function(){for(var Oe=arguments.length,$e=new Array(Oe),Ve=0;Ve<Oe;Ve++)$e[Ve]=arguments[Ve];return P.default.apply(void 0,[le,ne].concat($e))},Be.next=5,le.invalidate(le,ne);case 5:if(!Object(Z.default)(le,ne)){Be.next=7;break}return Be.abrupt("return",we());case 7:return Be.prev=7,Be.next=10,Object(J.read)(le,ne);case 10:return me=Be.sent,me.config=ne,me.request={fromCache:!0},Be.abrupt("return",{config:le,next:me});case 16:if(Be.prev=16,Be.t0=Be.catch(7),!(le.clearOnStale&&Be.t0.reason==="cache-stale")){Be.next=21;break}return Be.next=21,le.store.removeItem(le.uuid);case 21:return Be.abrupt("return",{config:le,next:re});case 22:case"end":return Be.stop()}},te,null,[[7,16]])})),xe.apply(this,arguments)}D.default=_e},"./src/response.js":function(W,D,S){S.r(D),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var P=S("./src/limit.js"),Z=S("./src/cache.js"),J=S("./node_modules/cache-control-esm/index.js");function H(te,le,ne,re,me,we,be){try{var Be=te[we](be),Ie=Be.value}catch(Oe){ne(Oe);return}Be.done?le(Ie):Promise.resolve(Ie).then(re,me)}function ve(te){return function(){var le=this,ne=arguments;return new Promise(function(re,me){var we=te.apply(le,ne);function be(Ie){H(we,re,me,be,Be,"next",Ie)}function Be(Ie){H(we,re,me,be,Be,"throw",Ie)}be(void 0)})}}function _e(te,le,ne){return xe.apply(this,arguments)}function xe(){return xe=ve(regeneratorRuntime.mark(function te(le,ne,re){var me,we,be,Be,Ie;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(me=re.request,we=me===void 0?{}:me,be=re.headers,Be=be===void 0?{}:be,!(["arraybuffer","blob"].indexOf(we.responseType)>-1)){$e.next=3;break}return $e.abrupt("return",re);case 3:if(Ie={},le.readHeaders&&(Be["cache-control"]?(Ie=Object(J.parse)(Be["cache-control"]),(Ie.noCache||Ie.noStore)&&(le.excludeFromCache=!0)):Be.expires?le.expires=new Date(Be.expires).getTime():le.expires=new Date().getTime()),le.excludeFromCache){$e.next=15;break}if(Ie.maxAge||Ie.maxAge===0?le.expires=Date.now()+Ie.maxAge*1e3:le.readHeaders||(le.expires=le.maxAge===0?Date.now():Date.now()+le.maxAge),!le.limit){$e.next=11;break}return le.debug("Detected limit: ".concat(le.limit)),$e.next=11,Object(P.default)(le);case 11:return $e.next=13,Object(Z.write)(le,ne,re);case 13:$e.next=16;break;case 15:re.request.excludedFromCache=!0;case 16:return $e.abrupt("return",re);case 17:case"end":return $e.stop()}},te)})),xe.apply(this,arguments)}D.default=_e},"./src/serialize.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function P(H,ve){if(H==null)return{};var _e=Z(H,ve),xe,te;if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(H);for(te=0;te<le.length;te++)xe=le[te],!(ve.indexOf(xe)>=0)&&Object.prototype.propertyIsEnumerable.call(H,xe)&&(_e[xe]=H[xe])}return _e}function Z(H,ve){if(H==null)return{};var _e={},xe=Object.keys(H),te,le;for(le=0;le<xe.length;le++)te=xe[le],!(ve.indexOf(te)>=0)&&(_e[te]=H[te]);return _e}function J(H,ve,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(te){H.debug("Could not parse data as JSON",te)}_e.request,_e.config;var xe=P(_e,["request","config"]);return xe}D.default=J},"./src/utilities.js":function(W,D,S){S.r(D),S.d(D,"isObject",function(){return Z}),S.d(D,"getTag",function(){return J}),S.d(D,"isFunction",function(){return H}),S.d(D,"isString",function(){return ve}),S.d(D,"mapObject",function(){return _e}),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function P(xe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(le){return typeof le}:P=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},P(xe)}function Z(xe){var te=P(xe);return xe!=null&&(te==="object"||te==="function")}function J(xe){return xe===null?xe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(xe)}function H(xe){if(!Z(xe))return!1;var te=J(xe);return te==="[object Function]"||te==="[object AsyncFunction]"||te==="[object GeneratorFunction]"||te==="[object Proxy]"}function ve(xe){var te=P(xe);return te==="string"||te==="object"&&xe!=null&&!Array.isArray(xe)&&J(xe)==="[object String]"}function _e(xe,te){return Z(xe)?Object.keys(xe).map(function(le){return te(xe[le],le)}):[]}},axios:function(W,D){W.exports=oe},util:function(W,D){W.exports=C.default}})})});const Q={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},K=R.setupCache({maxAge:60*60*24*1e3}),pe=w.default.create({adapter:K.adapter}),G=async($,B={})=>{const oe={...Q,...B},[W,D]=i.lngLatToGoogle($,oe.zoomBase),S=oe.tileUrl.replace("{z}",String(oe.zoomBase)).replace("{x}",String(W)).replace("{y}",String(D)),P={code:"",prefecture:"",city:""};let Z;try{const ve=await pe.get(S,{responseType:"arraybuffer"});Z=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const J=new y.VectorTile(new b.default(Z));let H=Object.keys(J.layers);return Array.isArray(H)||(H=[H]),H.forEach(ve=>{const _e=J.layers[ve];if(_e&&oe.layer===_e.name)for(let xe=0;xe<_e.length;xe++){const te=_e.feature(xe).toGeoJSON(W,D,oe.zoomBase);H.length>1&&(te.properties.vt_layer=ve);const le={type:"FeatureCollection",features:[te]};t.geoContains(le,$)&&(P.code=String(te.id).length===5?String(te.id):`0${String(te.id)}`,P.prefecture=te.properties.prefecture,P.city=te.properties.city)}}),P};e.openReverseGeocoder=G})(FC);const ZR={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},WR={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},HR={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},XR={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},SE={JPN:HR,CHN:ZR,DEU:WR,KOR:XR};function qA(e,t,i){i===void 0&&(i={});var l={type:"Feature"};return(i.id===0||i.id)&&(l.id=i.id),i.bbox&&(l.bbox=i.bbox),l.properties=t||{},l.geometry=e,l}function qR(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!TE(e[0])||!TE(e[1]))throw new Error("coordinates must contain numbers");var l={type:"Point",coordinates:e};return qA(l,t,i)}function KR(e,t,i){i===void 0&&(i={});for(var l=0,c=e;l<c.length;l++){var d=c[l];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<d[d.length-1].length;y++)if(d[d.length-1][y]!==d[0][y])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:e};return qA(a,t,i)}function TE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function KA(e,t,i){if(e!==null)for(var l,c,d,y,a,b,w,C=0,E=0,z,R=e.type,Q=R==="FeatureCollection",K=R==="Feature",pe=Q?e.features.length:1,G=0;G<pe;G++){w=Q?e.features[G].geometry:K?e.geometry:e,z=w?w.type==="GeometryCollection":!1,a=z?w.geometries.length:1;for(var $=0;$<a;$++){var B=0,oe=0;if(y=z?w.geometries[$]:w,y!==null){b=y.coordinates;var W=y.type;switch(C=i&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(t(b,E,G,B,oe)===!1)return!1;E++,B++;break;case"LineString":case"MultiPoint":for(l=0;l<b.length;l++){if(t(b[l],E,G,B,oe)===!1)return!1;E++,W==="MultiPoint"&&B++}W==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(l=0;l<b.length;l++){for(c=0;c<b[l].length-C;c++){if(t(b[l][c],E,G,B,oe)===!1)return!1;E++}W==="MultiLineString"&&B++,W==="Polygon"&&oe++}W==="Polygon"&&B++;break;case"MultiPolygon":for(l=0;l<b.length;l++){for(oe=0,c=0;c<b[l].length;c++){for(d=0;d<b[l][c].length-C;d++){if(t(b[l][c][d],E,G,B,oe)===!1)return!1;E++}oe++}B++}break;case"GeometryCollection":for(l=0;l<y.geometries.length;l++)if(KA(y.geometries[l],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function YR(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function JR(e){return e.type==="Feature"?e.geometry:e}function QR(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var l=YR(e),c=JR(t),d=c.type,y=t.bbox,a=c.coordinates;if(y&&eF(l,y)===!1)return!1;d==="Polygon"&&(a=[a]);for(var b=!1,w=0;w<a.length&&!b;w++)if(CE(l,a[w][0],i.ignoreBoundary)){for(var C=!1,E=1;E<a[w].length&&!C;)CE(l,a[w][E],!i.ignoreBoundary)&&(C=!0),E++;C||(b=!0)}return b}function CE(e,t,i){var l=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,d=t.length-1;c<t.length;d=c++){var y=t[c][0],a=t[c][1],b=t[d][0],w=t[d][1],C=e[1]*(y-b)+a*(b-e[0])+w*(e[0]-y)===0&&(y-e[0])*(b-e[0])<=0&&(a-e[1])*(w-e[1])<=0;if(C)return!i;var E=a>e[1]!=w>e[1]&&e[0]<(b-y)*(e[1]-a)/(w-a)+y;E&&(l=!l)}return l}function eF(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function tF(e,t){t===void 0&&(t={});var i=0,l=0,c=0;return KA(e,function(d){i+=d[0],l+=d[1],c++},!0),qR([i/c,l/c],t.properties)}const nF=()=>{const[e,t]=yt.useState(!1);return{detectCountry:yt.useCallback(async(l,c)=>{t(!0);const y=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const a of y.features)if(QR([l,c],a.geometry))return console.log("country: ",a.properties),t(!1),a;t(!1)},[]),loadingCountry:e}},I0=({feature:e,fieldOption:t,suggestList:i,onChange:l})=>{var a;const[c,d]=yt.useState((a=e.properties)==null?void 0:a[t.key]);yt.useEffect(()=>{var b;d((b=e.properties)==null?void 0:b[t.key])},[e]);const y=yt.useCallback(b=>{d(b.currentTarget.value),l&&l(b)},[]);return ft.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[ft.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),ft.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:y}),ft.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return ft.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return ft.jsx("option",{value:b.tags.name},b.id)})})]})},rF=({feature:e,fields:t})=>e.properties?ft.jsxs(ft.Fragment,{children:[t.postcodeField&&ft.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var l;return ft.jsxs(ft.Fragment,{children:[ft.jsx("span",{children:(l=e.properties)==null?void 0:l[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var l;return ft.jsxs(ft.Fragment,{children:[ft.jsx("span",{children:(l=e.properties)==null?void 0:l[i.key]})," "]})})]}):null,iF=({placeholder:e,defaultValue:t})=>{const[i,l]=yt.useState(t);yt.useEffect(()=>{l(t)},[t]);const c=yt.useCallback(d=>{l(d.currentTarget.value)},[]);return ft.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[ft.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),ft.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var ig={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ig.exports;(function(e,t){(function(){var i,l="4.15.0",c=200,d="Expected a function",y="__lodash_hash_undefined__",a=1,b=2,w=1/0,C=9007199254740991,E="[object Arguments]",z="[object Array]",R="[object Boolean]",Q="[object Date]",K="[object Error]",pe="[object Function]",G="[object GeneratorFunction]",$="[object Map]",B="[object Number]",oe="[object Object]",W="[object Promise]",D="[object RegExp]",S="[object Set]",P="[object String]",Z="[object Symbol]",J="[object WeakMap]",H="[object ArrayBuffer]",ve="[object DataView]",_e="[object Float32Array]",xe="[object Float64Array]",te="[object Int8Array]",le="[object Int16Array]",ne="[object Int32Array]",re="[object Uint8Array]",me="[object Uint8ClampedArray]",we="[object Uint16Array]",be="[object Uint32Array]",Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Oe=/^\./,$e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ve=/[\\^$.*+?()[\]{}|]/g,ot=/\\(\\)?/g,ut=/\w*$/,gt=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,ct={};ct[_e]=ct[xe]=ct[te]=ct[le]=ct[ne]=ct[re]=ct[me]=ct[we]=ct[be]=!0,ct[E]=ct[z]=ct[H]=ct[R]=ct[ve]=ct[Q]=ct[K]=ct[pe]=ct[$]=ct[B]=ct[oe]=ct[D]=ct[S]=ct[P]=ct[J]=!1;var xt={};xt[E]=xt[z]=xt[H]=xt[ve]=xt[R]=xt[Q]=xt[_e]=xt[xe]=xt[te]=xt[le]=xt[ne]=xt[$]=xt[B]=xt[oe]=xt[D]=xt[S]=xt[P]=xt[Z]=xt[re]=xt[me]=xt[we]=xt[be]=!0,xt[K]=xt[pe]=xt[J]=!1;var $t=typeof xl=="object"&&xl&&xl.Object===Object&&xl,Ye=typeof self=="object"&&self&&self.Object===Object&&self,sn=$t||Ye||Function("return this")(),En=t&&!t.nodeType&&t,Ht=En&&!0&&e&&!e.nodeType&&e,Rt=Ht&&Ht.exports===En,vn=Rt&&$t.process,Te=function(){try{return vn&&vn.binding("util")}catch{}}(),F=Te&&Te.isTypedArray;function O(V,ge){return V.set(ge[0],ge[1]),V}function ye(V,ge){return V.add(ge),V}function We(V,ge,De){switch(De.length){case 0:return V.call(ge);case 1:return V.call(ge,De[0]);case 2:return V.call(ge,De[0],De[1]);case 3:return V.call(ge,De[0],De[1],De[2])}return V.apply(ge,De)}function tt(V,ge){for(var De=-1,at=V?V.length:0;++De<at&&ge(V[De],De,V)!==!1;);return V}function Ge(V,ge){for(var De=-1,at=ge.length,Et=V.length;++De<at;)V[Et+De]=ge[De];return V}function ae(V,ge,De,at){var Et=-1,St=V?V.length:0;for(at&&St&&(De=V[++Et]);++Et<St;)De=ge(De,V[Et],Et,V);return De}function L(V,ge){for(var De=-1,at=V?V.length:0;++De<at;)if(ge(V[De],De,V))return!0;return!1}function j(V){return function(ge){return ge==null?i:ge[V]}}function Ee(V,ge){for(var De=-1,at=Array(V);++De<V;)at[De]=ge(De);return at}function Se(V){return function(ge){return V(ge)}}function Ke(V,ge){return V==null?i:V[ge]}function Qe(V){var ge=!1;if(V!=null&&typeof V.toString!="function")try{ge=!!(V+"")}catch{}return ge}function Gt(V){var ge=-1,De=Array(V.size);return V.forEach(function(at,Et){De[++ge]=[Et,at]}),De}function cn(V,ge){return function(De){return V(ge(De))}}function Lt(V){var ge=-1,De=Array(V.size);return V.forEach(function(at){De[++ge]=at}),De}var In=Array.prototype,_n=Function.prototype,wr=Object.prototype,ni=sn["__core-js_shared__"],ar=function(){var V=/[^.]+$/.exec(ni&&ni.keys&&ni.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""}(),Ln=_n.toString,lr=wr.hasOwnProperty,di=Ln.call(Object),Pe=wr.toString,ie=RegExp("^"+Ln.call(lr).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=Rt?sn.Buffer:i,he=sn.Symbol,Ce=sn.Uint8Array,Re=cn(Object.getPrototypeOf,Object),He=Object.create,Ue=wr.propertyIsEnumerable,Ne=In.splice,Je=Object.getOwnPropertySymbols,dt=se?se.isBuffer:i,mt=cn(Object.keys,Object),pt=Math.max,en=ls(sn,"DataView"),an=ls(sn,"Map"),Ut=ls(sn,"Promise"),Xt=ls(sn,"Set"),ln=ls(sn,"WeakMap"),bn=ls(Object,"create"),wn=!Ue.call({valueOf:1},"valueOf"),Mn=Uo(en),Hn=Uo(an),mr=Uo(Ut),hn=Uo(Xt),tr=Uo(ln),Ui=he?he.prototype:i,ur=Ui?Ui.valueOf:i,ri=Ui?Ui.toString:i;function mn(){}function Ti(V){var ge=-1,De=V?V.length:0;for(this.clear();++ge<De;){var at=V[ge];this.set(at[0],at[1])}}function $a(){this.__data__=bn?bn(null):{}}function gr(V){return this.has(V)&&delete this.__data__[V]}function ia(V){var ge=this.__data__;if(bn){var De=ge[V];return De===y?i:De}return lr.call(ge,V)?ge[V]:i}function Do(V){var ge=this.__data__;return bn?ge[V]!==i:lr.call(ge,V)}function cr(V,ge){var De=this.__data__;return De[V]=bn&&ge===i?y:ge,this}Ti.prototype.clear=$a,Ti.prototype.delete=gr,Ti.prototype.get=ia,Ti.prototype.has=Do,Ti.prototype.set=cr;function Ci(V){var ge=-1,De=V?V.length:0;for(this.clear();++ge<De;){var at=V[ge];this.set(at[0],at[1])}}function $i(){this.__data__=[]}function $u(V){var ge=this.__data__,De=Ai(ge,V);if(De<0)return!1;var at=ge.length-1;return De==at?ge.pop():Ne.call(ge,De,1),!0}function jr(V){var ge=this.__data__,De=Ai(ge,V);return De<0?i:ge[De][1]}function Vl(V){return Ai(this.__data__,V)>-1}function Va(V,ge){var De=this.__data__,at=Ai(De,V);return at<0?De.push([V,ge]):De[at][1]=ge,this}Ci.prototype.clear=$i,Ci.prototype.delete=$u,Ci.prototype.get=jr,Ci.prototype.has=Vl,Ci.prototype.set=Va;function Gr(V){var ge=-1,De=V?V.length:0;for(this.clear();++ge<De;){var at=V[ge];this.set(at[0],at[1])}}function Rn(){this.__data__={hash:new Ti,map:new(an||Ci),string:new Ti}}function Bo(V){return as(this,V).delete(V)}function oa(V){return as(this,V).get(V)}function Ga(V){return as(this,V).has(V)}function Vu(V,ge){return as(this,V).set(V,ge),this}Gr.prototype.clear=Rn,Gr.prototype.delete=Bo,Gr.prototype.get=oa,Gr.prototype.has=Ga,Gr.prototype.set=Vu;function sa(V){var ge=-1,De=V?V.length:0;for(this.__data__=new Gr;++ge<De;)this.add(V[ge])}function Gl(V){return this.__data__.set(V,y),this}function Gu(V){return this.__data__.has(V)}sa.prototype.add=sa.prototype.push=Gl,sa.prototype.has=Gu;function pi(V){this.__data__=new Ci(V)}function Sh(){this.__data__=new Ci}function Zu(V){return this.__data__.delete(V)}function Th(V){return this.__data__.get(V)}function Zl(V){return this.__data__.has(V)}function Wl(V,ge){var De=this.__data__;if(De instanceof Ci){var at=De.__data__;if(!an||at.length<c-1)return at.push([V,ge]),this;De=this.__data__=new Gr(at)}return De.set(V,ge),this}pi.prototype.clear=Sh,pi.prototype.delete=Zu,pi.prototype.get=Th,pi.prototype.has=Zl,pi.prototype.set=Wl;function Za(V,ge){var De=Qr(V)||uo(V)?Ee(V.length,String):[],at=De.length,Et=!!at;for(var St in V)(ge||lr.call(V,St))&&!(Et&&(St=="length"||Fs(St,at)))&&De.push(St);return De}function Wa(V,ge,De){(De!==i&&!lo(V[ge],De)||typeof ge=="number"&&De===i&&!(ge in V))&&(V[ge]=De)}function Hl(V,ge,De){var at=V[ge];(!(lr.call(V,ge)&&lo(at,De))||De===i&&!(ge in V))&&(V[ge]=De)}function Ai(V,ge){for(var De=V.length;De--;)if(lo(V[De][0],ge))return De;return-1}function Ha(V,ge){return V&&tl(ge,Br(ge),V)}function Dr(V,ge,De,at,Et,St,Zt){var Jt;if(at&&(Jt=St?at(V,Et,St,Zt):at(V)),Jt!==i)return Jt;if(!Pi(V))return V;var xn=Qr(V);if(xn){if(Jt=Ju(V),!ge)return is(V,Jt)}else{var On=ao(V),zn=On==pe||On==G;if(xo(V))return Ah(V,ge);if(On==oe||On==E||zn&&!St){if(Qe(V))return St?V:{};if(Jt=kh(zn?{}:V),!ge)return qu(V,Ha(Jt,V))}else{if(!xt[On])return St?V:{};Jt=ru(V,On,Dr,ge)}}Zt||(Zt=new pi);var Fn=Zt.get(V);if(Fn)return Fn;if(Zt.set(V,Jt),!xn)var Ct=De?tu(V):Br(V);return tt(Ct||V,function(br,hr){Ct&&(hr=br,br=V[hr]),Hl(Jt,hr,Dr(br,ge,De,at,hr,V,Zt))}),Jt}function Xa(V){return Pi(V)?He(V):{}}var aa=os(qa),Ms=Ku();function qa(V,ge){return V&&Ms(V,ge,Br)}function la(V,ge){ge=js(ge,V)?[ge]:Xu(ge);for(var De=0,at=ge.length;V!=null&&De<at;)V=V[rl(ge[De++])];return De&&De==at?V:i}function ks(V,ge,De){var at=ge(V);return Qr(V)?at:Ge(at,De(V))}function zs(V){return Pe.call(V)}function Ka(V,ge){return V!=null&&ge in Object(V)}function Jr(V,ge,De,at,Et){return V===ge?!0:V==null||ge==null||!Pi(V)&&!Mi(ge)?V!==V&&ge!==ge:mi(V,ge,Jr,De,at,Et)}function mi(V,ge,De,at,Et,St){var Zt=Qr(V),Jt=Qr(ge),xn=z,On=z;Zt||(xn=ao(V),xn=xn==E?oe:xn),Jt||(On=ao(ge),On=On==E?oe:On);var zn=xn==oe&&!Qe(V),Fn=On==oe&&!Qe(ge),Ct=xn==On;if(Ct&&!zn)return St||(St=new pi),Zt||da(V)?ss(V,ge,De,at,Et,St):Os(V,ge,xn,De,at,Et,St);if(!(Et&b)){var br=zn&&lr.call(V,"__wrapped__"),hr=Fn&&lr.call(ge,"__wrapped__");if(br||hr){var Zr=br?V.value():V,co=hr?ge.value():ge;return St||(St=new pi),De(Zr,co,at,Et,St)}}return Ct?(St||(St=new pi),Yu(V,ge,De,at,Et,St)):!1}function Xl(V,ge,De,at){var Et=De.length,St=Et,Zt=!at;if(V==null)return!St;for(V=Object(V);Et--;){var Jt=De[Et];if(Zt&&Jt[2]?Jt[1]!==V[Jt[0]]:!(Jt[0]in V))return!1}for(;++Et<St;){Jt=De[Et];var xn=Jt[0],On=V[xn],zn=Jt[1];if(Zt&&Jt[2]){if(On===i&&!(xn in V))return!1}else{var Fn=new pi;if(at)var Ct=at(On,zn,xn,V,ge,Fn);if(!(Ct===i?Jr(zn,On,at,a|b,Fn):Ct))return!1}}return!0}function Ya(V){if(!Pi(V)||nl(V))return!1;var ge=fa(V)||Qe(V)?ie:gt;return ge.test(Uo(V))}function Ja(V){return Mi(V)&&Bs(V.length)&&!!ct[Pe.call(V)]}function Qa(V){return typeof V=="function"?V:V==null?au:typeof V=="object"?Qr(V)?ql(V[0],V[1]):kn(V):lu(V)}function ua(V){if(!Vn(V))return mt(V);var ge=[];for(var De in Object(V))lr.call(V,De)&&De!="constructor"&&ge.push(De);return ge}function No(V){if(!Pi(V))return Qu(V);var ge=Vn(V),De=[];for(var at in V)at=="constructor"&&(ge||!lr.call(V,at))||De.push(at);return De}function kn(V){var ge=Mh(V);return ge.length==1&&ge[0][2]?us(ge[0][0],ge[0][1]):function(De){return De===V||Xl(De,V,ge)}}function ql(V,ge){return js(V)&&Zn(ge)?us(rl(V),ge):function(De){var at=su(De,V);return at===i&&at===ge?pa(De,V):Jr(ge,at,i,a|b)}}function ca(V,ge,De,at,Et){if(V!==ge){if(!(Qr(ge)||da(ge)))var St=No(ge);tt(St||ge,function(Zt,Jt){if(St&&(Jt=Zt,Zt=ge[Jt]),Pi(Zt))Et||(Et=new pi),Wu(V,ge,Jt,De,ca,at,Et);else{var xn=at?at(V[Jt],Zt,Jt+"",V,ge,Et):i;xn===i&&(xn=Zt),Wa(V,Jt,xn)}})}}function Wu(V,ge,De,at,Et,St,Zt){var Jt=V[De],xn=ge[De],On=Zt.get(xn);if(On){Wa(V,De,On);return}var zn=St?St(Jt,xn,De+"",V,ge,Zt):i,Fn=zn===i;Fn&&(zn=xn,Qr(xn)||da(xn)?Qr(Jt)?zn=Jt:nr(Jt)?zn=is(Jt):(Fn=!1,zn=Dr(xn,!0)):Ns(xn)||uo(xn)?uo(Jt)?zn=ol(Jt):!Pi(Jt)||at&&fa(Jt)?(Fn=!1,zn=Dr(xn,!0)):zn=Jt:Fn=!1),Fn&&(Zt.set(xn,zn),Et(zn,xn,at,St,Zt),Zt.delete(xn)),Wa(V,De,zn)}function Hu(V){return function(ge){return la(ge,V)}}function Ls(V,ge){return ge=pt(ge===i?V.length-1:ge,0),function(){for(var De=arguments,at=-1,Et=pt(De.length-ge,0),St=Array(Et);++at<Et;)St[at]=De[ge+at];at=-1;for(var Zt=Array(ge+1);++at<ge;)Zt[at]=De[at];return Zt[ge]=St,We(V,this,Zt)}}function Ch(V){if(typeof V=="string")return V;if(wo(V))return ri?ri.call(V):"";var ge=V+"";return ge=="0"&&1/V==-w?"-0":ge}function Xu(V){return Qr(V)?V:iu(V)}function Ah(V,ge){if(ge)return V.slice();var De=new V.constructor(V.length);return V.copy(De),De}function Kl(V){var ge=new V.constructor(V.byteLength);return new Ce(ge).set(new Ce(V)),ge}function Ih(V,ge){var De=ge?Kl(V.buffer):V.buffer;return new V.constructor(De,V.byteOffset,V.byteLength)}function Ph(V,ge,De){var at=ge?De(Gt(V),!0):Gt(V);return ae(at,O,new V.constructor)}function Yl(V){var ge=new V.constructor(V.source,ut.exec(V));return ge.lastIndex=V.lastIndex,ge}function el(V,ge,De){var at=ge?De(Lt(V),!0):Lt(V);return ae(at,ye,new V.constructor)}function Jl(V){return ur?Object(ur.call(V)):{}}function Ql(V,ge){var De=ge?Kl(V.buffer):V.buffer;return new V.constructor(De,V.byteOffset,V.length)}function is(V,ge){var De=-1,at=V.length;for(ge||(ge=Array(at));++De<at;)ge[De]=V[De];return ge}function tl(V,ge,De,at){De||(De={});for(var Et=-1,St=ge.length;++Et<St;){var Zt=ge[Et],Jt=at?at(De[Zt],V[Zt],Zt,De,V):i;Hl(De,Zt,Jt===i?V[Zt]:Jt)}return De}function qu(V,ge){return tl(V,Rs(V),ge)}function eu(V){return Ls(function(ge,De){var at=-1,Et=De.length,St=Et>1?De[Et-1]:i,Zt=Et>2?De[2]:i;for(St=V.length>3&&typeof St=="function"?(Et--,St):i,Zt&&Jn(De[0],De[1],Zt)&&(St=Et<3?i:St,Et=1),ge=Object(ge);++at<Et;){var Jt=De[at];Jt&&V(ge,Jt,at,St)}return ge})}function os(V,ge){return function(De,at){if(De==null)return De;if(!$o(De))return V(De,at);for(var Et=De.length,St=ge?Et:-1,Zt=Object(De);(ge?St--:++St<Et)&&at(Zt[St],St,Zt)!==!1;);return De}}function Ku(V){return function(ge,De,at){for(var Et=-1,St=Object(ge),Zt=at(ge),Jt=Zt.length;Jt--;){var xn=Zt[V?Jt:++Et];if(De(St[xn],xn,St)===!1)break}return ge}}function ss(V,ge,De,at,Et,St){var Zt=Et&b,Jt=V.length,xn=ge.length;if(Jt!=xn&&!(Zt&&xn>Jt))return!1;var On=St.get(V);if(On&&St.get(ge))return On==ge;var zn=-1,Fn=!0,Ct=Et&a?new sa:i;for(St.set(V,ge),St.set(ge,V);++zn<Jt;){var br=V[zn],hr=ge[zn];if(at)var Zr=Zt?at(hr,br,zn,ge,V,St):at(br,hr,zn,V,ge,St);if(Zr!==i){if(Zr)continue;Fn=!1;break}if(Ct){if(!L(ge,function(co,At){if(!Ct.has(At)&&(br===co||De(br,co,at,Et,St)))return Ct.add(At)})){Fn=!1;break}}else if(!(br===hr||De(br,hr,at,Et,St))){Fn=!1;break}}return St.delete(V),St.delete(ge),Fn}function Os(V,ge,De,at,Et,St,Zt){switch(De){case ve:if(V.byteLength!=ge.byteLength||V.byteOffset!=ge.byteOffset)return!1;V=V.buffer,ge=ge.buffer;case H:return!(V.byteLength!=ge.byteLength||!at(new Ce(V),new Ce(ge)));case R:case Q:case B:return lo(+V,+ge);case K:return V.name==ge.name&&V.message==ge.message;case D:case P:return V==ge+"";case $:var Jt=Gt;case S:var xn=St&b;if(Jt||(Jt=Lt),V.size!=ge.size&&!xn)return!1;var On=Zt.get(V);if(On)return On==ge;St|=a,Zt.set(V,ge);var zn=ss(Jt(V),Jt(ge),at,Et,St,Zt);return Zt.delete(V),zn;case Z:if(ur)return ur.call(V)==ur.call(ge)}return!1}function Yu(V,ge,De,at,Et,St){var Zt=Et&b,Jt=Br(V),xn=Jt.length,On=Br(ge),zn=On.length;if(xn!=zn&&!Zt)return!1;for(var Fn=xn;Fn--;){var Ct=Jt[Fn];if(!(Zt?Ct in ge:lr.call(ge,Ct)))return!1}var br=St.get(V);if(br&&St.get(ge))return br==ge;var hr=!0;St.set(V,ge),St.set(ge,V);for(var Zr=Zt;++Fn<xn;){Ct=Jt[Fn];var co=V[Ct],At=ge[Ct];if(at)var ga=Zt?at(At,co,Ct,ge,V,St):at(co,At,Ct,V,ge,St);if(!(ga===i?co===At||De(co,At,at,Et,St):ga)){hr=!1;break}Zr||(Zr=Ct=="constructor")}if(hr&&!Zr){var $s=V.constructor,ya=ge.constructor;$s!=ya&&"constructor"in V&&"constructor"in ge&&!(typeof $s=="function"&&$s instanceof $s&&typeof ya=="function"&&ya instanceof ya)&&(hr=!1)}return St.delete(V),St.delete(ge),hr}function tu(V){return ks(V,Br,Rs)}function Nn(){var V=mn.iteratee||cs;return V=V===cs?Qa:V,arguments.length?V(arguments[0],arguments[1]):V}function as(V,ge){var De=V.__data__;return Sn(ge)?De[typeof ge=="string"?"string":"hash"]:De.map}function Mh(V){for(var ge=Br(V),De=ge.length;De--;){var at=ge[De],Et=V[at];ge[De]=[at,Et,Zn(Et)]}return ge}function ls(V,ge){var De=Ke(V,ge);return Ya(De)?De:i}var Rs=Je?cn(Je,Object):uu,ao=zs;(en&&ao(new en(new ArrayBuffer(1)))!=ve||an&&ao(new an)!=$||Ut&&ao(Ut.resolve())!=W||Xt&&ao(new Xt)!=S||ln&&ao(new ln)!=J)&&(ao=function(V){var ge=Pe.call(V),De=ge==oe?V.constructor:i,at=De?Uo(De):i;if(at)switch(at){case Mn:return ve;case Hn:return $;case mr:return W;case hn:return S;case tr:return J}return ge});function nu(V,ge,De){ge=js(ge,V)?[ge]:Xu(ge);for(var at,Et=-1,Zt=ge.length;++Et<Zt;){var St=rl(ge[Et]);if(!(at=V!=null&&De(V,St)))break;V=V[St]}if(at)return at;var Zt=V?V.length:0;return!!Zt&&Bs(Zt)&&Fs(St,Zt)&&(Qr(V)||uo(V))}function Ju(V){var ge=V.length,De=V.constructor(ge);return ge&&typeof V[0]=="string"&&lr.call(V,"index")&&(De.index=V.index,De.input=V.input),De}function kh(V){return typeof V.constructor=="function"&&!Vn(V)?Xa(Re(V)):{}}function ru(V,ge,De,at){var Et=V.constructor;switch(ge){case H:return Kl(V);case R:case Q:return new Et(+V);case ve:return Ih(V,at);case _e:case xe:case te:case le:case ne:case re:case me:case we:case be:return Ql(V,at);case $:return Ph(V,at,De);case B:case P:return new Et(V);case D:return Yl(V);case S:return el(V,at,De);case Z:return Jl(V)}}function Fs(V,ge){return ge=ge??C,!!ge&&(typeof V=="number"||Mt.test(V))&&V>-1&&V%1==0&&V<ge}function Jn(V,ge,De){if(!Pi(De))return!1;var at=typeof ge;return(at=="number"?$o(De)&&Fs(ge,De.length):at=="string"&&ge in De)?lo(De[ge],V):!1}function js(V,ge){if(Qr(V))return!1;var De=typeof V;return De=="number"||De=="symbol"||De=="boolean"||V==null||wo(V)?!0:Ie.test(V)||!Be.test(V)||ge!=null&&V in Object(ge)}function Sn(V){var ge=typeof V;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?V!=="__proto__":V===null}function nl(V){return!!ar&&ar in V}function Vn(V){var ge=V&&V.constructor,De=typeof ge=="function"&&ge.prototype||wr;return V===De}function Zn(V){return V===V&&!Pi(V)}function us(V,ge){return function(De){return De==null?!1:De[V]===ge&&(ge!==i||V in Object(De))}}function Qu(V){var ge=[];if(V!=null)for(var De in Object(V))ge.push(De);return ge}var iu=Ds(function(V){V=sl(V);var ge=[];return Oe.test(V)&&ge.push(""),V.replace($e,function(De,at,Et,St){ge.push(Et?St.replace(ot,"$1"):at||De)}),ge});function rl(V){if(typeof V=="string"||wo(V))return V;var ge=V+"";return ge=="0"&&1/V==-w?"-0":ge}function Uo(V){if(V!=null){try{return Ln.call(V)}catch{}try{return V+""}catch{}}return""}function il(V){for(var ge=-1,De=V?V.length:0,at=0,Et=[];++ge<De;){var St=V[ge];St&&(Et[at++]=St)}return Et}function ha(V,ge){var De=Qr(V)?tt:aa;return De(V,Nn(ge,3))}function Ds(V,ge){if(typeof V!="function"||ge&&typeof ge!="function")throw new TypeError(d);var De=function(){var at=arguments,Et=ge?ge.apply(this,at):at[0],St=De.cache;if(St.has(Et))return St.get(Et);var Zt=V.apply(this,at);return De.cache=St.set(Et,Zt),Zt};return De.cache=new(Ds.Cache||Gr),De}Ds.Cache=Gr;function ou(V){return Dr(V,!1,!0)}function lo(V,ge){return V===ge||V!==V&&ge!==ge}function uo(V){return nr(V)&&lr.call(V,"callee")&&(!Ue.call(V,"callee")||Pe.call(V)==E)}var Qr=Array.isArray;function $o(V){return V!=null&&Bs(V.length)&&!fa(V)}function nr(V){return Mi(V)&&$o(V)}var xo=dt||Us;function Ii(V){if($o(V)&&(Qr(V)||typeof V=="string"||typeof V.splice=="function"||xo(V)||uo(V)))return!V.length;var ge=ao(V);if(ge==$||ge==S)return!V.size;if(wn||Vn(V))return!mt(V).length;for(var De in V)if(lr.call(V,De))return!1;return!0}function fa(V){var ge=Pi(V)?Pe.call(V):"";return ge==pe||ge==G}function Bs(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=C}function Pi(V){var ge=typeof V;return!!V&&(ge=="object"||ge=="function")}function Mi(V){return!!V&&typeof V=="object"}function Ns(V){if(!Mi(V)||Pe.call(V)!=oe||Qe(V))return!1;var ge=Re(V);if(ge===null)return!0;var De=lr.call(ge,"constructor")&&ge.constructor;return typeof De=="function"&&De instanceof De&&Ln.call(De)==di}function wo(V){return typeof V=="symbol"||Mi(V)&&Pe.call(V)==Z}var da=F?Se(F):Ja;function ol(V){return tl(V,ma(V))}function sl(V){return V==null?"":Ch(V)}function su(V,ge,De){var at=V==null?i:la(V,ge);return at===i?De:at}function pa(V,ge){return V!=null&&nu(V,ge,Ka)}function Br(V){return $o(V)?Za(V):ua(V)}function ma(V){return $o(V)?Za(V,!0):No(V)}var al=eu(function(V,ge,De){ca(V,ge,De)});function au(V){return V}function cs(V){return Qa(typeof V=="function"?V:Dr(V,!0))}function lu(V){return js(V)?j(rl(V)):Hu(V)}function uu(){return[]}function Us(){return!1}mn.compact=il,mn.iteratee=cs,mn.keys=Br,mn.keysIn=ma,mn.memoize=Ds,mn.merge=al,mn.property=lu,mn.toPlainObject=ol,mn.clone=ou,mn.eq=lo,mn.forEach=ha,mn.get=su,mn.hasIn=pa,mn.identity=au,mn.isArguments=uo,mn.isArray=Qr,mn.isArrayLike=$o,mn.isArrayLikeObject=nr,mn.isBuffer=xo,mn.isEmpty=Ii,mn.isFunction=fa,mn.isLength=Bs,mn.isObject=Pi,mn.isObjectLike=Mi,mn.isPlainObject=Ns,mn.isSymbol=wo,mn.isTypedArray=da,mn.stubArray=uu,mn.stubFalse=Us,mn.toString=sl,mn.each=ha,mn.VERSION=l,Ht&&((Ht.exports=mn)._=mn,En._=mn)}).call(xl)})(ig,ig.exports);var oF=ig.exports,sF=tm;function tm(e,t){var i=e&&e.type,l;if(i==="FeatureCollection")for(l=0;l<e.features.length;l++)tm(e.features[l],t);else if(i==="GeometryCollection")for(l=0;l<e.geometries.length;l++)tm(e.geometries[l],t);else if(i==="Feature")tm(e.geometry,t);else if(i==="Polygon")AE(e.coordinates,t);else if(i==="MultiPolygon")for(l=0;l<e.coordinates.length;l++)AE(e.coordinates[l],t);return e}function AE(e,t){if(e.length!==0){IE(e[0],t);for(var i=1;i<e.length;i++)IE(e[i],!t)}}function IE(e,t){for(var i=0,l=0,c=0,d=e.length,y=d-1;c<d;y=c++){var a=(e[c][0]-e[y][0])*(e[y][1]+e[c][1]),b=i+a;l+=Math.abs(i)>=Math.abs(a)?i-b+a:a-b+i,i=b}i+l>=0!=!!t&&e.reverse()}const aF=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var lF=aF,An=oF,Op=sF,nm={};lF.forEach(function(e){if(e.polygon==="all")nm[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(l){i[l]=!0}),nm[e.key]={},nm[e.key][t]=i}});function uF(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:An.merge(e,t)}var og={};og=function(e,t,i){t=An.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:nm,deduplicator:uF},t);var l;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?l=d(e):l=c(e),l;function c(b){var w=new Array,C=new Array,E=new Array;function z(W){var D=An.clone(W);D.lat=W.center.lat,D.lon=W.center.lon,D.__is_center_placeholder=!0,w.push(D)}function R(W){var D=An.clone(W);D.nodes=[];function S(P,Z,J){var H={type:"node",id:"_"+D.type+"/"+D.id+"bounds"+J,lat:P,lon:Z};D.nodes.push(H.id),w.push(H)}S(D.bounds.minlat,D.bounds.minlon,1),S(D.bounds.maxlat,D.bounds.minlon,2),S(D.bounds.maxlat,D.bounds.maxlon,3),S(D.bounds.minlat,D.bounds.maxlon,4),D.nodes.push(D.nodes[0]),D.__is_bounds_placeholder=!0,C.push(D)}function Q(W){function D(S,P,Z){var J={type:"node",id:Z,lat:S,lon:P};w.push(J)}An.isArray(W.nodes)||(W.nodes=W.geometry.map(function(S){return S!==null?"_anonymous@"+S.lat+"/"+S.lon:"_anonymous@unknown_location"})),W.geometry.forEach(function(S,P){S&&D(S.lat,S.lon,W.nodes[P])})}function K(W){function D(P,Z,J){var H={type:"node",id:J,lat:P,lon:Z};w.push(H)}function S(P,Z){if(C.some(function(ve){return ve.type=="way"&&ve.id==Z}))return;var J={type:"way",id:Z,nodes:[]};function H(ve,_e){var xe={type:"node",id:"_anonymous@"+ve+"/"+_e,lat:ve,lon:_e};J.nodes.push(xe.id),w.push(xe)}P.forEach(function(ve){ve?H(ve.lat,ve.lon):J.nodes.push(void 0)}),C.push(J)}W.members.forEach(function(P,Z){P.type=="node"?P.lat&&D(P.lat,P.lon,P.ref):P.type=="way"&&P.geometry&&(P.ref="_fullGeom"+P.ref,S(P.geometry,P.ref))})}for(var pe=0;pe<b.elements.length;pe++)switch(b.elements[pe].type){case"node":var G=b.elements[pe];w.push(G);break;case"way":var $=An.clone(b.elements[pe]);$.nodes=An.clone($.nodes),C.push($),$.center&&z($),$.geometry?Q($):$.bounds&&R($);break;case"relation":var B=An.clone(b.elements[pe]);B.members=An.clone(B.members),E.push(B);var oe=B.members&&B.members.some(function(W){return W.type=="node"&&W.lat||W.type=="way"&&W.geometry&&W.geometry.length>0});B.center&&z(B),oe?K(B):B.bounds&&R(B);break}return y(w,C,E)}function d(b){var w=new Array,C=new Array,E=new Array;function z(B,oe,W){B.hasAttribute(W)&&(oe[W]=B.getAttribute(W))}function R(B,oe){var W=An.clone(B);z(oe,W,"lat"),z(oe,W,"lon"),W.__is_center_placeholder=!0,w.push(W)}function Q(B,oe){var W=An.clone(B);W.nodes=[];function D(S,P,Z){var J={type:"node",id:"_"+W.type+"/"+W.id+"bounds"+Z,lat:S,lon:P};W.nodes.push(J.id),w.push(J)}D(oe.getAttribute("minlat"),oe.getAttribute("minlon"),1),D(oe.getAttribute("maxlat"),oe.getAttribute("minlon"),2),D(oe.getAttribute("maxlat"),oe.getAttribute("maxlon"),3),D(oe.getAttribute("minlat"),oe.getAttribute("maxlon"),4),W.nodes.push(W.nodes[0]),W.__is_bounds_placeholder=!0,C.push(W)}function K(B,oe){function W(D,S,P){var Z={type:"node",id:P,lat:D,lon:S};return w.push(Z),Z.id}An.isArray(B.nodes)||(B.nodes=[],An.each(oe,function(D,S){B.nodes.push("_anonymous@"+D.getAttribute("lat")+"/"+D.getAttribute("lon"))})),An.each(oe,function(D,S){D.getAttribute("lat")&&W(D.getAttribute("lat"),D.getAttribute("lon"),B.nodes[S])})}function pe(B,oe){function W(S,P,Z){var J={type:"node",id:Z,lat:S,lon:P};w.push(J)}function D(S,P){if(C.some(function(H){return H.type=="way"&&H.id==P}))return;var Z={type:"way",id:P,nodes:[]};function J(H,ve){var _e={type:"node",id:"_anonymous@"+H+"/"+ve,lat:H,lon:ve};Z.nodes.push(_e.id),w.push(_e)}An.each(S,function(H){H.getAttribute("lat")?J(H.getAttribute("lat"),H.getAttribute("lon")):Z.nodes.push(void 0)}),C.push(Z)}An.each(oe,function(S,P){B.members[P].type=="node"?S.getAttribute("lat")&&W(S.getAttribute("lat"),S.getAttribute("lon"),B.members[P].ref):B.members[P].type=="way"&&S.getElementsByTagName("nd").length>0&&(B.members[P].ref="_fullGeom"+B.members[P].ref,D(S.getElementsByTagName("nd"),B.members[P].ref))})}An.each(b.getElementsByTagName("node"),function(B,oe){var W={};An.each(B.getElementsByTagName("tag"),function(S){W[S.getAttribute("k")]=S.getAttribute("v")});var D={type:"node"};z(B,D,"id"),z(B,D,"lat"),z(B,D,"lon"),z(B,D,"version"),z(B,D,"timestamp"),z(B,D,"changeset"),z(B,D,"uid"),z(B,D,"user"),An.isEmpty(W)||(D.tags=W),w.push(D)});var G,$;return An.each(b.getElementsByTagName("way"),function(B,oe){var W={},D=[];An.each(B.getElementsByTagName("tag"),function(Z){W[Z.getAttribute("k")]=Z.getAttribute("v")});var S=!1;An.each(B.getElementsByTagName("nd"),function(Z,J){var H;(H=Z.getAttribute("ref"))&&(D[J]=H),!S&&Z.getAttribute("lat")&&(S=!0)});var P={type:"way"};z(B,P,"id"),z(B,P,"version"),z(B,P,"timestamp"),z(B,P,"changeset"),z(B,P,"uid"),z(B,P,"user"),D.length>0&&(P.nodes=D),An.isEmpty(W)||(P.tags=W),(G=B.getElementsByTagName("center")[0])&&R(P,G),S?K(P,B.getElementsByTagName("nd")):($=B.getElementsByTagName("bounds")[0])&&Q(P,$),C.push(P)}),An.each(b.getElementsByTagName("relation"),function(B,oe){var W={},D=[];An.each(B.getElementsByTagName("tag"),function(Z){W[Z.getAttribute("k")]=Z.getAttribute("v")});var S=!1;An.each(B.getElementsByTagName("member"),function(Z,J){D[J]={},z(Z,D[J],"ref"),z(Z,D[J],"role"),z(Z,D[J],"type"),(!S&&D[J].type=="node"&&Z.getAttribute("lat")||D[J].type=="way"&&Z.getElementsByTagName("nd").length>0)&&(S=!0)});var P={type:"relation"};z(B,P,"id"),z(B,P,"version"),z(B,P,"timestamp"),z(B,P,"changeset"),z(B,P,"uid"),z(B,P,"user"),D.length>0&&(P.members=D),An.isEmpty(W)||(P.tags=W),(G=B.getElementsByTagName("center")[0])&&R(P,G),S?pe(P,B.getElementsByTagName("member")):($=B.getElementsByTagName("bounds")[0])&&Q(P,$),E.push(P)}),y(w,C,E)}function y(b,w,C){function E(Oe,$e){if(typeof $e!="object"&&($e={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Oe,$e);for(var Ve in Oe)if(t.uninterestingTags[Ve]!==!0&&!($e[Ve]===!0||$e[Ve]===Oe[Ve]))return!0;return!1}function z(Oe){var $e={timestamp:Oe.timestamp,version:Oe.version,changeset:Oe.changeset,user:Oe.user,uid:Oe.uid};for(var Ve in $e)$e[Ve]===void 0&&delete $e[Ve];return $e}for(var R=new Object,Q=new Object,K=0;K<b.length;K++){var pe=b[K];R[pe.id]!==void 0&&(pe=t.deduplicator(pe,R[pe.id])),R[pe.id]=pe,typeof pe.tags<"u"&&E(pe.tags)&&(Q[pe.id]=!0)}for(var K=0;K<C.length;K++)if(An.isArray(C[K].members))for(var G=0;G<C[K].members.length;G++)C[K].members[G].type=="node"&&(Q[C[K].members[G].ref]=!0);for(var $=new Object,B=new Object,K=0;K<w.length;K++){var oe=w[K];if($[oe.id]&&(oe=t.deduplicator(oe,$[oe.id])),$[oe.id]=oe,An.isArray(oe.nodes))for(var G=0;G<oe.nodes.length;G++)typeof oe.nodes[G]!="object"&&(B[oe.nodes[G]]=!0,oe.nodes[G]=R[oe.nodes[G]])}var W=new Array;for(var D in R){var pe=R[D];(!B[D]||Q[D])&&W.push(pe)}for(var S=new Array,K=0;K<C.length;K++){var P=C[K];S[P.id]&&(P=t.deduplicator(P,S[P.id])),S[P.id]=P}var Z={node:{},way:{},relation:{}};for(var D in S){var P=S[D];if(!An.isArray(P.members)){t.verbose&&console.warn("Relation",P.type+"/"+P.id,"ignored because it has no members");continue}for(var G=0;G<P.members.length;G++){var J=P.members[G].type,H=P.members[G].ref;if(typeof H!="number"&&(H=H.replace("_fullGeom","")),!Z[J]){t.verbose&&console.warn("Relation",P.type+"/"+P.id,"member",J+"/"+H,"ignored because it has an invalid type");continue}typeof Z[J][H]>"u"&&(Z[J][H]=[]),Z[J][H].push({role:P.members[G].role,rel:P.id,reltags:P.tags})}}var ve,_e=[];for(K=0;K<W.length;K++){if(typeof W[K].lon>"u"||typeof W[K].lat>"u"){t.verbose&&console.warn("POI",W[K].type+"/"+W[K].id,"ignored because it lacks coordinates");continue}var xe={type:"Feature",id:W[K].type+"/"+W[K].id,properties:{type:W[K].type,id:W[K].id,tags:W[K].tags||{},relations:Z.node[W[K].id]||[],meta:z(W[K])},geometry:{type:"Point",coordinates:[+W[K].lon,+W[K].lat]}};W[K].__is_center_placeholder&&(xe.properties.geometry="center"),i?i(xe):_e.push(xe)}for(var te=[],le=[],K=0;K<C.length;K++)if(S[C[K].id]===C[K]){if(typeof C[K].tags<"u"&&(C[K].tags.type=="route"||C[K].tags.type=="waterway")){let $e=function(Ve){var ot=!1,ut;ut=Ve.members.filter(function(xt){return xt.type==="way"}),ut=ut.map(function(xt){var $t=$[xt.ref];if($t===void 0||$t.nodes===void 0){t.verbose&&console.warn("Route "+Ve.type+"/"+Ve.id,"tainted by a missing or incomplete  way",xt.type+"/"+xt.ref),ot=!0;return}return{id:xt.ref,role:xt.role,way:$t,nodes:$t.nodes.filter(function(Ye){return Ye!==void 0?!0:(ot=!0,t.verbose&&console.warn("Route",Ve.type+"/"+Ve.id,"tainted by a way",xt.type+"/"+xt.ref,"with a missing node"),!1)})}}),ut=An.compact(ut);var gt;gt=P0(ut);var Mt=[];if(Mt=An.compact(gt.map(function(xt){return An.compact(xt.map(function($t){return[+$t.lon,+$t.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",Ve.type+"/"+Ve.id,"contains no coordinates"),!1;var ct={type:"Feature",id:Ve.type+"/"+Ve.id,properties:{type:Ve.type,id:Ve.id,tags:Ve.tags||{},relations:Z[Ve.type][Ve.id]||[],meta:z(Ve)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return ot&&(t.verbose&&console.warn("Route",Ve.type+"/"+Ve.id,"is tainted"),ct.properties.tainted=!0),ct};var Be=$e;if(!An.isArray(C[K].members)){t.verbose&&console.warn("Route",C[K].type+"/"+C[K].id,"ignored because it has no members");continue}if(C[K].members.forEach(function(Ve){$[Ve.ref]&&!E($[Ve.ref].tags)&&($[Ve.ref].is_skippablerelationmember=!0)}),xe=$e(C[K]),xe===!1){t.verbose&&console.warn("Route relation",C[K].type+"/"+C[K].id,"ignored because it has invalid geometry");continue}i?i(Op(xe)):le.push(xe)}if(typeof C[K].tags<"u"&&(C[K].tags.type=="multipolygon"||C[K].tags.type=="boundary")){let Ve=function(ot,ut){var gt=!1,Mt=re?"way":"relation",ct=typeof ot.id=="number"?ot.id:+ot.id.replace("_fullGeom",""),xt;xt=ut.members.filter(function(O){return O.type==="way"}),xt=xt.map(function(O){var ye=$[O.ref];if(ye===void 0||ye.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+ct,"tainted by a missing or incomplete way",O.type+"/"+O.ref),gt=!0;return}return{id:O.ref,role:O.role||"outer",way:ye,nodes:ye.nodes.filter(function(We){return We!==void 0?!0:(gt=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+ct,"tainted by a way",O.type+"/"+O.ref,"with a missing node"),!1)})}}),xt=An.compact(xt);var $t,Ye;$t=P0(xt.filter(function(O){return O.role==="outer"})),Ye=P0(xt.filter(function(O){return O.role==="inner"}));var sn;function En(O){var ye=function(L,j){for(var Ee=0;Ee<j.length;Ee++)if(tt(j[Ee],L))return!0;return!1},We=function(L){return L.map(function(j){return[+j.lat,+j.lon]})},tt=function(L,j){for(var Ee=L[0],Se=L[1],Ke=!1,Qe=0,Gt=j.length-1;Qe<j.length;Gt=Qe++){var cn=j[Qe][0],Lt=j[Qe][1],In=j[Gt][0],_n=j[Gt][1],wr=Lt>Se!=_n>Se&&Ee<(In-cn)*(Se-Lt)/(_n-Lt)+cn;wr&&(Ke=!Ke)}return Ke},Ge,ae;for(O=We(O),Ge=0;Ge<$t.length;Ge++)if(ae=We($t[Ge]),ye(ae,O))return Ge}sn=$t.map(function(O){return[O]});for(var Ht=0;Ht<Ye.length;Ht++){var Rt=En(Ye[Ht]);Rt!==void 0?sn[Rt].push(Ye[Ht]):t.verbose&&console.warn("Multipolygon",Mt+"/"+ct,"contains an inner ring with no containing outer")}var vn=[];if(vn=An.compact(sn.map(function(O){var ye=An.compact(O.map(function(We){if(We.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+ct,"contains a ring with less than four nodes");return}return An.compact(We.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(ye.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+ct,"contains an empty ring cluster");return}return ye})),vn.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+ct,"contains no coordinates"),!1;var Te="MultiPolygon";vn.length===1&&(Te="Polygon",vn=vn[0]);var F={type:"Feature",id:ot.type+"/"+ct,properties:{type:ot.type,id:ct,tags:ot.tags||{},relations:Z[ot.type][ot.id]||[],meta:z(ot)},geometry:{type:Te,coordinates:vn}};return gt&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+ct,"is tainted"),F.properties.tainted=!0),F};var Ie=Ve;if(!An.isArray(C[K].members)){t.verbose&&console.warn("Multipolygon",C[K].type+"/"+C[K].id,"ignored because it has no members");continue}for(var ne=0,G=0;G<C[K].members.length;G++)C[K].members[G].role=="outer"?ne++:t.verbose&&C[K].members[G].role!="inner"&&console.warn("Multipolygon",C[K].type+"/"+C[K].id,"member",C[K].members[G].type+"/"+C[K].members[G].ref,'ignored because it has an invalid role: "'+C[K].members[G].role+'"');if(C[K].members.forEach(function(ot){$[ot.ref]&&(ot.role==="outer"&&!E($[ot.ref].tags,C[K].tags)&&($[ot.ref].is_skippablerelationmember=!0),ot.role==="inner"&&!E($[ot.ref].tags)&&($[ot.ref].is_skippablerelationmember=!0))}),ne==0){t.verbose&&console.warn("Multipolygon relation",C[K].type+"/"+C[K].id,"ignored because it has no outer ways");continue}var re=!1;ne==1&&!E(C[K].tags,{type:!0})&&(re=!0);var xe=null;if(!re)xe=Ve(C[K],C[K]);else{var me=C[K].members.filter(function(ot){return ot.role==="outer"})[0];if(me=$[me.ref],me===void 0){t.verbose&&console.warn("Multipolygon relation",C[K].type+"/"+C[K].id,"ignored because outer way",me.type+"/"+me.ref,"is missing");continue}me.is_skippablerelationmember=!0,xe=Ve(me,C[K])}if(xe===!1){t.verbose&&console.warn("Multipolygon relation",C[K].type+"/"+C[K].id,"ignored because it has invalid geometry");continue}i?i(Op(xe)):le.push(xe)}}for(var K=0;K<w.length;K++)if($[w[K].id]===w[K]){if(!An.isArray(w[K].nodes)){t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"ignored because it has no nodes");continue}if(!w[K].is_skippablerelationmember){typeof w[K].id!="number"&&(w[K].id=+w[K].id.replace("_fullGeom","")),w[K].tainted=!1,w[K].hidden=!1;var we=new Array;for(G=0;G<w[K].nodes.length;G++)typeof w[K].nodes[G]=="object"?we.push([+w[K].nodes[G].lon,+w[K].nodes[G].lat]):(t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"is tainted by an invalid node"),w[K].tainted=!0);if(we.length<=1){t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"ignored because it contains too few nodes");continue}var be="LineString";typeof w[K].nodes[0]<"u"&&typeof w[K].nodes[w[K].nodes.length-1]<"u"&&w[K].nodes[0].id===w[K].nodes[w[K].nodes.length-1].id&&(typeof w[K].tags<"u"&&a(w[K].tags)||w[K].__is_bounds_placeholder)&&(be="Polygon",we=[we]);var xe={type:"Feature",id:w[K].type+"/"+w[K].id,properties:{type:w[K].type,id:w[K].id,tags:w[K].tags||{},relations:Z.way[w[K].id]||[],meta:z(w[K])},geometry:{type:be,coordinates:we}};w[K].tainted&&(t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"is tainted"),xe.properties.tainted=!0),w[K].__is_bounds_placeholder&&(xe.properties.geometry="bounds"),i?i(Op(xe)):be=="LineString"?te.push(xe):le.push(xe)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(le),ve.features=ve.features.concat(te),ve.features=ve.features.concat(_e),t.flatProperties&&ve.features.forEach(function(Oe){Oe.properties=An.merge(Oe.properties.meta,Oe.properties.tags,{id:Oe.properties.type+"/"+Oe.properties.id})}),ve=Op(ve),ve)}function a(b){var w=t.polygonFeatures;if(typeof w=="function")return w(b);if(b.area==="no")return!1;for(var C in b){var E=b[C],z=w[C];if(!(typeof z>"u")&&E!=="no"&&(z===!0||z.included_values&&z.included_values[E]===!0||z.excluded_values&&z.excluded_values[E]!==!0))return!0}return!1}};function P0(e){for(var t=function(E){return E[0]},i=function(E){return E[E.length-1]},l=function(E,z){return E!==void 0&&z!==void 0&&E.id===z.id},c=[],d,y,a,b,w,C;e.length;)for(d=e.pop().nodes.slice(),c.push(d);e.length&&!l(t(d),i(d));){for(y=t(d),a=i(d),b=0;b<e.length;b++)if(C=e[b].nodes,l(a,t(C))){w=d.push,C=C.slice(1);break}else if(l(a,i(C))){w=d.push,C=C.slice(0,-1).reverse();break}else if(l(y,i(C))){w=d.unshift,C=C.slice(0,-1);break}else if(l(y,t(C))){w=d.unshift,C=C.slice(1).reverse();break}else C=w=null;if(!C)break;e.splice(b,1),w.apply(d,C)}return c}og.toGeojson=og;var cF=og;const hF=gd(cF),M0={type:"FeatureCollection",features:[]},YA=()=>{const[e,t]=yt.useState(!1),i=yt.useCallback(async(y,a,b)=>{var K,pe;if(e||(console.log(b),b<16))return M0;t(!0);let w=300;b>17&&(w=200),b>18&&(w=100),b>19&&(w=50),console.log("overpass: loading...");let C="[out:json]";C+=`[timeout:25];
`,C+='nwr["building"]',C+=`(around:${w},${y},${a});
`,C+="out meta geom;",console.log(C);const E=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(E.status!==200)return t(!1),M0;const z=await E.json();console.log("overpass json elements: ",z.elements);const R=hF(z);console.log("overpass osmtogeojson raw: ",R);for await(const G of R.features){if(!G.properties)continue;G.id=G.properties.id.split("/")[1];const $=(K=z.elements.filter(oe=>G.id?typeof G.id=="number"?oe.id===G.id:oe.id===parseInt(G.id):!1))==null?void 0:K[0];if($&&(G.properties.tags=$.tags,G.properties.nodes=$.nodes),G.geometry.type==="Polygon"){const oe=KR(G.geometry.coordinates);var Q=tF(oe);G.properties.center=Q.geometry.coordinates}G.geometry.type==="Point"&&(G.properties.center=G.geometry.coordinates);const B=G.properties.uid;if(B){let oe=localStorage.getItem(B+"-icon");if(oe===null){const W=await Ss.getUser(B);(pe=W.img)!=null&&pe.href?(oe=W.img.href,localStorage.setItem(B+"-icon",W.img.href)):localStorage.setItem(B+"-icon","")}G.properties.userIconHref=oe||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[l,c]=yt.useState(!1),d=yt.useCallback(async y=>{console.log("overpass: loading...",y),c(!0);const a=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(a);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(a)}`,{});if(b.status!==200){c(!1);return}const w=await b.json();console.log("overpass json parent elements: ",w.elements);const C=250,E=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${C});
      out;
      `;console.log(E);const z=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(E)}`,{});if(z.status!==200){c(!1);return}const R=await z.json();console.log("overpass json child elements: ",R.elements);const Q=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${C});
      out;
      `;console.log(Q);const K=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(Q)}`,{});if(K.status!==200){c(!1);return}const pe=await K.json();return console.log("overpass json neighbour elements: ",pe.elements),c(!1),[...w.elements,...R.elements,...pe.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:d,loadingOverpass:e,loadingOverpassAdmin:l}},fF=()=>ft.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[ft.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),ft.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),ft.jsxs("datalist",{id:"source-list",children:[ft.jsx("option",{value:"survey"}),ft.jsx("option",{value:"local knowledge"}),ft.jsx("option",{value:"extrapolation"}),ft.jsx("option",{value:"estimation from existing data"})]})]}),k0={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},dF=({feature:e,onCancel:t,onSubmit:i})=>{var ve,_e,xe,te;const{detectCountry:l,loadingCountry:c}=nF(),{fetchOverpassAdmin:d,loadingOverpassAdmin:y}=YA(),a=JSON.parse((ve=e.properties)==null?void 0:ve.center),[b,w]=yt.useState(void 0),[C,E]=yt.useState(),[z,R]=yt.useState(e),[Q,K]=yt.useState(!1),[pe,G]=yt.useState(!1),[$,B]=yt.useState(!1),[oe,W]=yt.useState(),[D,S]=yt.useState();yt.useEffect(()=>{K(Ss.isLoggedIn())},[]),yt.useEffect(()=>{(async()=>{var ne,re;const le=await l(a[0],a[1]);if(w(le),(ne=le==null?void 0:le.properties)!=null&&ne.ISO_A3&&SE[le.properties.ISO_A3]){const me=SE[le.properties.ISO_A3];E(me);const we=me.defaultComment+" "+((re=e.properties)==null?void 0:re.id);S(we)}})()},[e]),yt.useEffect(()=>{console.log(z.properties)},[z]);const P=yt.useCallback(async()=>{const le=await FC.openReverseGeocoder([a[0],a[1]]);R(ne=>{const re={properties:{"addr:province":le.prefecture,"addr:city":le.city,...ne.properties}};return{...ne,...re}})},[]),Z=yt.useCallback(async()=>{if(!z.properties)return;z.properties.nodes;const le=await d(JSON.parse(z.properties.nodes));console.log("onOverpassReverseGeocode",le),W(le)},[z]),J=yt.useCallback(async le=>{var Ie,Oe,$e;B(!0),le.preventDefault();const ne=new FormData(le.currentTarget),re=JSON.parse((Ie=e.properties)==null?void 0:Ie.tags);ne.forEach((Ve,ot)=>{typeof Ve=="string"&&Ve.length>0&&ot!=="comment"&&ot!=="source"&&(re[ot]=Ve)});const me={type:"way",id:e.id,version:(Oe=e.properties)==null?void 0:Oe.version,tags:re,nodes:JSON.parse(($e=e.properties)==null?void 0:$e.nodes)};console.info(JSON.stringify(me,null,2));const we={create:[],modify:[me],delete:[]},be=ne.get("comment");be&&(k0.comment=be.toString());const Be=ne.get("source");Be&&(k0.source=Be.toString()),await Ss.uploadChangeset(k0,we),B(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),H=yt.useCallback(()=>{G(!0)},[]);return z.properties?ft.jsxs("div",{children:[ft.jsxs("div",{children:["OSM:"," ",ft.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+z.properties.id,target:"_blank",children:z.properties.id})," | ",ft.jsx(LC,{feature:z}),C&&ft.jsxs("span",{children:[" | ","Address:"," ",ft.jsx(rF,{feature:z,fields:C})]})]}),c?ft.jsx(ta,{icon:Bv,spin:!0}):ft.jsx(ft.Fragment,{children:C?ft.jsxs("form",{onSubmit:J,children:[ft.jsx("div",{className:"flex flex-wrap",children:ft.jsx(I0,{feature:z,fieldOption:C.postcodeField,onChange:H})}),ft.jsx("div",{className:"flex flex-wrap",children:C.mainFields.map(le=>ft.jsx(I0,{feature:z,fieldOption:le,onChange:H,suggestList:oe},le.key))}),ft.jsx("div",{className:"flex flex-wrap",children:C.detailFields.map(le=>ft.jsx(I0,{feature:z,fieldOption:le,onChange:H},le.key))}),ft.jsxs("div",{className:"flex flex-wrap",children:[ft.jsx(fF,{}),ft.jsx(iF,{defaultValue:D})]}),ft.jsx("div",{className:"flex flex-wrap",children:ft.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[ft.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=b==null?void 0:b.properties)==null?void 0:_e.ISO_A3)==="JPN"&&ft.jsx("button",{type:"button",onClick:P,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),ft.jsxs("button",{type:"button",disabled:y,onClick:Z,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",y&&ft.jsx(ta,{icon:Bv,spin:!0})]}),ft.jsx("button",{disabled:!Q||$||!pe,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!Q&&ft.jsxs(ft.Fragment,{children:[ft.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),ft.jsx(zC,{})]})]})})]}):ft.jsx("div",{className:"flex flex-wrap",children:ft.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[ft.jsxs("div",{className:"py-2",children:[ft.jsxs("p",{children:["Sorry, Address editor in this country"," ",(xe=b==null?void 0:b.properties)==null?void 0:xe.NAME," (ISO code:",(te=b==null?void 0:b.properties)==null?void 0:te.ISO_A3,") does not support yet."]}),ft.jsx("p",{children:ft.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),ft.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function pF(e,t){const[i,l]=yt.useState(e);return yt.useEffect(()=>{const c=setTimeout(()=>{l(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const mF={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},gF={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function yF(){const e=yt.useRef(null),[t,i]=yt.useState(),l=pF(t,2500),c=yt.useRef(null),[d,y]=yt.useState({type:"FeatureCollection",features:[]}),[a,b]=yt.useState("auto"),[w,C]=yt.useState(),[E,z]=yt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:Q}=YA();yt.useEffect(()=>{setTimeout(()=>{var S;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(S=c.current)==null||S.trigger())},500)},[]);const K=yt.useCallback(S=>{const P=S.target.getCenter(),Z=S.target.getZoom();i({zoom:Z,latitude:P.lat,longitude:P.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),pe=yt.useCallback(S=>{i(S.viewState)},[]),G=yt.useCallback(S=>{i(S.viewState)},[]);yt.useEffect(()=>{(async()=>{if(!l)return;const S=l,P=await R(S.latitude,S.longitude,S.zoom);y(P)})()},[l]);const $=yt.useCallback(S=>{var ve;b("pointer");const{features:P,point:{x:Z,y:J}}=S,H=P&&P[0];H?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:H.id},{hover:!0}),C({feature:H,x:Z,y:J})):C(void 0)},[]),B=yt.useCallback(S=>{var P;b("auto"),(P=e.current)==null||P.querySourceFeatures("buildings-source").map(Z=>{var J;(J=e.current)==null||J.setFeatureState({source:"buildings-source",id:Z.id},{hover:!1})}),C(void 0)},[]),oe=yt.useCallback(S=>{var Z;W();const P=S.features&&S.features[0];P&&((Z=e.current)==null||Z.setFeatureState({source:"buildings-source",id:P.id},{select:!0}),z([P]))},[]),W=yt.useCallback(()=>{var S;(S=e.current)==null||S.querySourceFeatures("buildings-source").map(P=>{var Z;(Z=e.current)==null||Z.setFeatureState({source:"buildings-source",id:P.id},{select:!1})}),z([])},[]),D=yt.useMemo(()=>{let S=25;return t&&(S=t.zoom<18?20:t.zoom<19?25:35),d.features.map((P,Z)=>!P.properties||!P.properties.center?null:ft.jsx(P3,{style:{cursor:"pointer"},longitude:P.properties.center[0],latitude:P.properties.center[1],anchor:"center",children:ft.jsx(pz,{feature:P,size:S})},`marker-${Z}`))},[d,t]);return ft.jsxs("div",{children:[ft.jsx(X5,{}),ft.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:ft.jsx(yz,{viewState:t})}),ft.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[E.length>0&&ft.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:ft.jsx("div",{style:{padding:"10px"},children:E.map(S=>ft.jsx(dF,{feature:S,onCancel:W,onSubmit:W},S.id))})}),ft.jsxs(f1,{ref:e,...t,onMove:pe,onMoveEnd:G,onLoad:K,interactiveLayerIds:["buildings-layer-fill"],onClick:oe,onMouseEnter:$,onMouseLeave:B,dragRotate:!1,boxZoom:!1,hash:!0,cursor:a,mapLib:WT,style:{width:"100%",height:"100%"},mapStyle:mF,children:[ft.jsx(N3,{id:"buildings-source",type:"geojson",data:d,children:ft.jsx(G3,{...gF})}),ft.jsx(R3,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),ft.jsx(L3,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),ft.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?ft.jsx(ta,{size:"2x",icon:Z5}):Q?ft.jsx(ta,{size:"2x",icon:Bv,spin:!0}):ft.jsx(ta,{size:"2x",icon:W5})}),D,w&&ft.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:w.x+5,top:w.y+5},children:[ft.jsx(LC,{feature:w.feature}),ft.jsx("br",{}),ft.jsx(mz,{feature:w.feature}),ft.jsx(q5,{feature:w.feature})]})]})]})]})}var JA={},Rg={};Rg.byteLength=xF;Rg.toByteArray=bF;Rg.fromByteArray=TF;var Ys=[],qo=[],vF=typeof Uint8Array<"u"?Uint8Array:Array,z0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Lc=0,_F=z0.length;Lc<_F;++Lc)Ys[Lc]=z0[Lc],qo[z0.charCodeAt(Lc)]=Lc;qo["-".charCodeAt(0)]=62;qo["_".charCodeAt(0)]=63;function QA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var l=i===t?0:4-i%4;return[i,l]}function xF(e){var t=QA(e),i=t[0],l=t[1];return(i+l)*3/4-l}function wF(e,t,i){return(t+i)*3/4-i}function bF(e){var t,i=QA(e),l=i[0],c=i[1],d=new vF(wF(e,l,c)),y=0,a=c>0?l-4:l,b;for(b=0;b<a;b+=4)t=qo[e.charCodeAt(b)]<<18|qo[e.charCodeAt(b+1)]<<12|qo[e.charCodeAt(b+2)]<<6|qo[e.charCodeAt(b+3)],d[y++]=t>>16&255,d[y++]=t>>8&255,d[y++]=t&255;return c===2&&(t=qo[e.charCodeAt(b)]<<2|qo[e.charCodeAt(b+1)]>>4,d[y++]=t&255),c===1&&(t=qo[e.charCodeAt(b)]<<10|qo[e.charCodeAt(b+1)]<<4|qo[e.charCodeAt(b+2)]>>2,d[y++]=t>>8&255,d[y++]=t&255),d}function EF(e){return Ys[e>>18&63]+Ys[e>>12&63]+Ys[e>>6&63]+Ys[e&63]}function SF(e,t,i){for(var l,c=[],d=t;d<i;d+=3)l=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(EF(l));return c.join("")}function TF(e){for(var t,i=e.length,l=i%3,c=[],d=16383,y=0,a=i-l;y<a;y+=d)c.push(SF(e,y,y+d>a?a:y+d));return l===1?(t=e[i-1],c.push(Ys[t>>2]+Ys[t<<4&63]+"==")):l===2&&(t=(e[i-2]<<8)+e[i-1],c.push(Ys[t>>10]+Ys[t>>4&63]+Ys[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Rg,i=Mg,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=$,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,a.TYPED_ARRAY_SUPPORT=d(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const ae=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(ae,L),ae.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function y(ae){if(ae>c)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const L=new Uint8Array(ae);return Object.setPrototypeOf(L,a.prototype),L}function a(ae,L,j){if(typeof ae=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(ae)}return b(ae,L,j)}a.poolSize=8192;function b(ae,L,j){if(typeof ae=="string")return z(ae,L);if(ArrayBuffer.isView(ae))return Q(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(O(ae,ArrayBuffer)||ae&&O(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(ae,SharedArrayBuffer)||ae&&O(ae.buffer,SharedArrayBuffer)))return K(ae,L,j);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=ae.valueOf&&ae.valueOf();if(Ee!=null&&Ee!==ae)return a.from(Ee,L,j);const Se=pe(ae);if(Se)return Se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return a.from(ae[Symbol.toPrimitive]("string"),L,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}a.from=function(ae,L,j){return b(ae,L,j)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function w(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function C(ae,L,j){return w(ae),ae<=0?y(ae):L!==void 0?typeof j=="string"?y(ae).fill(L,j):y(ae).fill(L):y(ae)}a.alloc=function(ae,L,j){return C(ae,L,j)};function E(ae){return w(ae),y(ae<0?0:G(ae)|0)}a.allocUnsafe=function(ae){return E(ae)},a.allocUnsafeSlow=function(ae){return E(ae)};function z(ae,L){if((typeof L!="string"||L==="")&&(L="utf8"),!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const j=B(ae,L)|0;let Ee=y(j);const Se=Ee.write(ae,L);return Se!==j&&(Ee=Ee.slice(0,Se)),Ee}function R(ae){const L=ae.length<0?0:G(ae.length)|0,j=y(L);for(let Ee=0;Ee<L;Ee+=1)j[Ee]=ae[Ee]&255;return j}function Q(ae){if(O(ae,Uint8Array)){const L=new Uint8Array(ae);return K(L.buffer,L.byteOffset,L.byteLength)}return R(ae)}function K(ae,L,j){if(L<0||ae.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<L+(j||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return L===void 0&&j===void 0?Ee=new Uint8Array(ae):j===void 0?Ee=new Uint8Array(ae,L):Ee=new Uint8Array(ae,L,j),Object.setPrototypeOf(Ee,a.prototype),Ee}function pe(ae){if(a.isBuffer(ae)){const L=G(ae.length)|0,j=y(L);return j.length===0||ae.copy(j,0,0,L),j}if(ae.length!==void 0)return typeof ae.length!="number"||ye(ae.length)?y(0):R(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return R(ae.data)}function G(ae){if(ae>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ae|0}function $(ae){return+ae!=ae&&(ae=0),a.alloc(+ae)}a.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==a.prototype},a.compare=function(L,j){if(O(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),O(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),!a.isBuffer(L)||!a.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===j)return 0;let Ee=L.length,Se=j.length;for(let Ke=0,Qe=Math.min(Ee,Se);Ke<Qe;++Ke)if(L[Ke]!==j[Ke]){Ee=L[Ke],Se=j[Ke];break}return Ee<Se?-1:Se<Ee?1:0},a.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(L,j){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return a.alloc(0);let Ee;if(j===void 0)for(j=0,Ee=0;Ee<L.length;++Ee)j+=L[Ee].length;const Se=a.allocUnsafe(j);let Ke=0;for(Ee=0;Ee<L.length;++Ee){let Qe=L[Ee];if(O(Qe,Uint8Array))Ke+Qe.length>Se.length?(a.isBuffer(Qe)||(Qe=a.from(Qe)),Qe.copy(Se,Ke)):Uint8Array.prototype.set.call(Se,Qe,Ke);else if(a.isBuffer(Qe))Qe.copy(Se,Ke);else throw new TypeError('"list" argument must be an Array of Buffers');Ke+=Qe.length}return Se};function B(ae,L){if(a.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||O(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const j=ae.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&j===0)return 0;let Se=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return Ht(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return Te(ae).length;default:if(Se)return Ee?-1:Ht(ae).length;L=(""+L).toLowerCase(),Se=!0}}a.byteLength=B;function oe(ae,L,j){let Ee=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,L>>>=0,j<=L))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return me(this,L,j);case"utf8":case"utf-8":return xe(this,L,j);case"ascii":return ne(this,L,j);case"latin1":case"binary":return re(this,L,j);case"base64":return _e(this,L,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,L,j);default:if(Ee)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Ee=!0}}a.prototype._isBuffer=!0;function W(ae,L,j){const Ee=ae[L];ae[L]=ae[j],ae[j]=Ee}a.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let j=0;j<L;j+=2)W(this,j,j+1);return this},a.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let j=0;j<L;j+=4)W(this,j,j+3),W(this,j+1,j+2);return this},a.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let j=0;j<L;j+=8)W(this,j,j+7),W(this,j+1,j+6),W(this,j+2,j+5),W(this,j+3,j+4);return this},a.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?xe(this,0,L):oe.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(L){if(!a.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:a.compare(this,L)===0},a.prototype.inspect=function(){let L="";const j=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(L+=" ... "),"<Buffer "+L+">"},l&&(a.prototype[l]=a.prototype.inspect),a.prototype.compare=function(L,j,Ee,Se,Ke){if(O(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),!a.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(j===void 0&&(j=0),Ee===void 0&&(Ee=L?L.length:0),Se===void 0&&(Se=0),Ke===void 0&&(Ke=this.length),j<0||Ee>L.length||Se<0||Ke>this.length)throw new RangeError("out of range index");if(Se>=Ke&&j>=Ee)return 0;if(Se>=Ke)return-1;if(j>=Ee)return 1;if(j>>>=0,Ee>>>=0,Se>>>=0,Ke>>>=0,this===L)return 0;let Qe=Ke-Se,Gt=Ee-j;const cn=Math.min(Qe,Gt),Lt=this.slice(Se,Ke),In=L.slice(j,Ee);for(let _n=0;_n<cn;++_n)if(Lt[_n]!==In[_n]){Qe=Lt[_n],Gt=In[_n];break}return Qe<Gt?-1:Gt<Qe?1:0};function D(ae,L,j,Ee,Se){if(ae.length===0)return-1;if(typeof j=="string"?(Ee=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,ye(j)&&(j=Se?0:ae.length-1),j<0&&(j=ae.length+j),j>=ae.length){if(Se)return-1;j=ae.length-1}else if(j<0)if(Se)j=0;else return-1;if(typeof L=="string"&&(L=a.from(L,Ee)),a.isBuffer(L))return L.length===0?-1:S(ae,L,j,Ee,Se);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?Se?Uint8Array.prototype.indexOf.call(ae,L,j):Uint8Array.prototype.lastIndexOf.call(ae,L,j):S(ae,[L],j,Ee,Se);throw new TypeError("val must be string, number or Buffer")}function S(ae,L,j,Ee,Se){let Ke=1,Qe=ae.length,Gt=L.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(ae.length<2||L.length<2)return-1;Ke=2,Qe/=2,Gt/=2,j/=2}function cn(In,_n){return Ke===1?In[_n]:In.readUInt16BE(_n*Ke)}let Lt;if(Se){let In=-1;for(Lt=j;Lt<Qe;Lt++)if(cn(ae,Lt)===cn(L,In===-1?0:Lt-In)){if(In===-1&&(In=Lt),Lt-In+1===Gt)return In*Ke}else In!==-1&&(Lt-=Lt-In),In=-1}else for(j+Gt>Qe&&(j=Qe-Gt),Lt=j;Lt>=0;Lt--){let In=!0;for(let _n=0;_n<Gt;_n++)if(cn(ae,Lt+_n)!==cn(L,_n)){In=!1;break}if(In)return Lt}return-1}a.prototype.includes=function(L,j,Ee){return this.indexOf(L,j,Ee)!==-1},a.prototype.indexOf=function(L,j,Ee){return D(this,L,j,Ee,!0)},a.prototype.lastIndexOf=function(L,j,Ee){return D(this,L,j,Ee,!1)};function P(ae,L,j,Ee){j=Number(j)||0;const Se=ae.length-j;Ee?(Ee=Number(Ee),Ee>Se&&(Ee=Se)):Ee=Se;const Ke=L.length;Ee>Ke/2&&(Ee=Ke/2);let Qe;for(Qe=0;Qe<Ee;++Qe){const Gt=parseInt(L.substr(Qe*2,2),16);if(ye(Gt))return Qe;ae[j+Qe]=Gt}return Qe}function Z(ae,L,j,Ee){return F(Ht(L,ae.length-j),ae,j,Ee)}function J(ae,L,j,Ee){return F(Rt(L),ae,j,Ee)}function H(ae,L,j,Ee){return F(Te(L),ae,j,Ee)}function ve(ae,L,j,Ee){return F(vn(L,ae.length-j),ae,j,Ee)}a.prototype.write=function(L,j,Ee,Se){if(j===void 0)Se="utf8",Ee=this.length,j=0;else if(Ee===void 0&&typeof j=="string")Se=j,Ee=this.length,j=0;else if(isFinite(j))j=j>>>0,isFinite(Ee)?(Ee=Ee>>>0,Se===void 0&&(Se="utf8")):(Se=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ke=this.length-j;if((Ee===void 0||Ee>Ke)&&(Ee=Ke),L.length>0&&(Ee<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");let Qe=!1;for(;;)switch(Se){case"hex":return P(this,L,j,Ee);case"utf8":case"utf-8":return Z(this,L,j,Ee);case"ascii":case"latin1":case"binary":return J(this,L,j,Ee);case"base64":return H(this,L,j,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,L,j,Ee);default:if(Qe)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),Qe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(ae,L,j){return L===0&&j===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(L,j))}function xe(ae,L,j){j=Math.min(ae.length,j);const Ee=[];let Se=L;for(;Se<j;){const Ke=ae[Se];let Qe=null,Gt=Ke>239?4:Ke>223?3:Ke>191?2:1;if(Se+Gt<=j){let cn,Lt,In,_n;switch(Gt){case 1:Ke<128&&(Qe=Ke);break;case 2:cn=ae[Se+1],(cn&192)===128&&(_n=(Ke&31)<<6|cn&63,_n>127&&(Qe=_n));break;case 3:cn=ae[Se+1],Lt=ae[Se+2],(cn&192)===128&&(Lt&192)===128&&(_n=(Ke&15)<<12|(cn&63)<<6|Lt&63,_n>2047&&(_n<55296||_n>57343)&&(Qe=_n));break;case 4:cn=ae[Se+1],Lt=ae[Se+2],In=ae[Se+3],(cn&192)===128&&(Lt&192)===128&&(In&192)===128&&(_n=(Ke&15)<<18|(cn&63)<<12|(Lt&63)<<6|In&63,_n>65535&&_n<1114112&&(Qe=_n))}}Qe===null?(Qe=65533,Gt=1):Qe>65535&&(Qe-=65536,Ee.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),Ee.push(Qe),Se+=Gt}return le(Ee)}const te=4096;function le(ae){const L=ae.length;if(L<=te)return String.fromCharCode.apply(String,ae);let j="",Ee=0;for(;Ee<L;)j+=String.fromCharCode.apply(String,ae.slice(Ee,Ee+=te));return j}function ne(ae,L,j){let Ee="";j=Math.min(ae.length,j);for(let Se=L;Se<j;++Se)Ee+=String.fromCharCode(ae[Se]&127);return Ee}function re(ae,L,j){let Ee="";j=Math.min(ae.length,j);for(let Se=L;Se<j;++Se)Ee+=String.fromCharCode(ae[Se]);return Ee}function me(ae,L,j){const Ee=ae.length;(!L||L<0)&&(L=0),(!j||j<0||j>Ee)&&(j=Ee);let Se="";for(let Ke=L;Ke<j;++Ke)Se+=We[ae[Ke]];return Se}function we(ae,L,j){const Ee=ae.slice(L,j);let Se="";for(let Ke=0;Ke<Ee.length-1;Ke+=2)Se+=String.fromCharCode(Ee[Ke]+Ee[Ke+1]*256);return Se}a.prototype.slice=function(L,j){const Ee=this.length;L=~~L,j=j===void 0?Ee:~~j,L<0?(L+=Ee,L<0&&(L=0)):L>Ee&&(L=Ee),j<0?(j+=Ee,j<0&&(j=0)):j>Ee&&(j=Ee),j<L&&(j=L);const Se=this.subarray(L,j);return Object.setPrototypeOf(Se,a.prototype),Se};function be(ae,L,j){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+L>j)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(L,j,Ee){L=L>>>0,j=j>>>0,Ee||be(L,j,this.length);let Se=this[L],Ke=1,Qe=0;for(;++Qe<j&&(Ke*=256);)Se+=this[L+Qe]*Ke;return Se},a.prototype.readUintBE=a.prototype.readUIntBE=function(L,j,Ee){L=L>>>0,j=j>>>0,Ee||be(L,j,this.length);let Se=this[L+--j],Ke=1;for(;j>0&&(Ke*=256);)Se+=this[L+--j]*Ke;return Se},a.prototype.readUint8=a.prototype.readUInt8=function(L,j){return L=L>>>0,j||be(L,1,this.length),this[L]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(L,j){return L=L>>>0,j||be(L,2,this.length),this[L]|this[L+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(L,j){return L=L>>>0,j||be(L,2,this.length),this[L]<<8|this[L+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(L,j){return L=L>>>0,j||be(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(L,j){return L=L>>>0,j||be(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},a.prototype.readBigUInt64LE=tt(function(L){L=L>>>0,$t(L,"offset");const j=this[L],Ee=this[L+7];(j===void 0||Ee===void 0)&&Ye(L,this.length-8);const Se=j+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,Ke=this[++L]+this[++L]*2**8+this[++L]*2**16+Ee*2**24;return BigInt(Se)+(BigInt(Ke)<<BigInt(32))}),a.prototype.readBigUInt64BE=tt(function(L){L=L>>>0,$t(L,"offset");const j=this[L],Ee=this[L+7];(j===void 0||Ee===void 0)&&Ye(L,this.length-8);const Se=j*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],Ke=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+Ee;return(BigInt(Se)<<BigInt(32))+BigInt(Ke)}),a.prototype.readIntLE=function(L,j,Ee){L=L>>>0,j=j>>>0,Ee||be(L,j,this.length);let Se=this[L],Ke=1,Qe=0;for(;++Qe<j&&(Ke*=256);)Se+=this[L+Qe]*Ke;return Ke*=128,Se>=Ke&&(Se-=Math.pow(2,8*j)),Se},a.prototype.readIntBE=function(L,j,Ee){L=L>>>0,j=j>>>0,Ee||be(L,j,this.length);let Se=j,Ke=1,Qe=this[L+--Se];for(;Se>0&&(Ke*=256);)Qe+=this[L+--Se]*Ke;return Ke*=128,Qe>=Ke&&(Qe-=Math.pow(2,8*j)),Qe},a.prototype.readInt8=function(L,j){return L=L>>>0,j||be(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},a.prototype.readInt16LE=function(L,j){L=L>>>0,j||be(L,2,this.length);const Ee=this[L]|this[L+1]<<8;return Ee&32768?Ee|4294901760:Ee},a.prototype.readInt16BE=function(L,j){L=L>>>0,j||be(L,2,this.length);const Ee=this[L+1]|this[L]<<8;return Ee&32768?Ee|4294901760:Ee},a.prototype.readInt32LE=function(L,j){return L=L>>>0,j||be(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},a.prototype.readInt32BE=function(L,j){return L=L>>>0,j||be(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},a.prototype.readBigInt64LE=tt(function(L){L=L>>>0,$t(L,"offset");const j=this[L],Ee=this[L+7];(j===void 0||Ee===void 0)&&Ye(L,this.length-8);const Se=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(Ee<<24);return(BigInt(Se)<<BigInt(32))+BigInt(j+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),a.prototype.readBigInt64BE=tt(function(L){L=L>>>0,$t(L,"offset");const j=this[L],Ee=this[L+7];(j===void 0||Ee===void 0)&&Ye(L,this.length-8);const Se=(j<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(Se)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+Ee)}),a.prototype.readFloatLE=function(L,j){return L=L>>>0,j||be(L,4,this.length),i.read(this,L,!0,23,4)},a.prototype.readFloatBE=function(L,j){return L=L>>>0,j||be(L,4,this.length),i.read(this,L,!1,23,4)},a.prototype.readDoubleLE=function(L,j){return L=L>>>0,j||be(L,8,this.length),i.read(this,L,!0,52,8)},a.prototype.readDoubleBE=function(L,j){return L=L>>>0,j||be(L,8,this.length),i.read(this,L,!1,52,8)};function Be(ae,L,j,Ee,Se,Ke){if(!a.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>Se||L<Ke)throw new RangeError('"value" argument is out of bounds');if(j+Ee>ae.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(L,j,Ee,Se){if(L=+L,j=j>>>0,Ee=Ee>>>0,!Se){const Gt=Math.pow(2,8*Ee)-1;Be(this,L,j,Ee,Gt,0)}let Ke=1,Qe=0;for(this[j]=L&255;++Qe<Ee&&(Ke*=256);)this[j+Qe]=L/Ke&255;return j+Ee},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(L,j,Ee,Se){if(L=+L,j=j>>>0,Ee=Ee>>>0,!Se){const Gt=Math.pow(2,8*Ee)-1;Be(this,L,j,Ee,Gt,0)}let Ke=Ee-1,Qe=1;for(this[j+Ke]=L&255;--Ke>=0&&(Qe*=256);)this[j+Ke]=L/Qe&255;return j+Ee},a.prototype.writeUint8=a.prototype.writeUInt8=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,1,255,0),this[j]=L&255,j+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,2,65535,0),this[j]=L&255,this[j+1]=L>>>8,j+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,2,65535,0),this[j]=L>>>8,this[j+1]=L&255,j+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,4,4294967295,0),this[j+3]=L>>>24,this[j+2]=L>>>16,this[j+1]=L>>>8,this[j]=L&255,j+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,4,4294967295,0),this[j]=L>>>24,this[j+1]=L>>>16,this[j+2]=L>>>8,this[j+3]=L&255,j+4};function Ie(ae,L,j,Ee,Se){xt(L,Ee,Se,ae,j,7);let Ke=Number(L&BigInt(4294967295));ae[j++]=Ke,Ke=Ke>>8,ae[j++]=Ke,Ke=Ke>>8,ae[j++]=Ke,Ke=Ke>>8,ae[j++]=Ke;let Qe=Number(L>>BigInt(32)&BigInt(4294967295));return ae[j++]=Qe,Qe=Qe>>8,ae[j++]=Qe,Qe=Qe>>8,ae[j++]=Qe,Qe=Qe>>8,ae[j++]=Qe,j}function Oe(ae,L,j,Ee,Se){xt(L,Ee,Se,ae,j,7);let Ke=Number(L&BigInt(4294967295));ae[j+7]=Ke,Ke=Ke>>8,ae[j+6]=Ke,Ke=Ke>>8,ae[j+5]=Ke,Ke=Ke>>8,ae[j+4]=Ke;let Qe=Number(L>>BigInt(32)&BigInt(4294967295));return ae[j+3]=Qe,Qe=Qe>>8,ae[j+2]=Qe,Qe=Qe>>8,ae[j+1]=Qe,Qe=Qe>>8,ae[j]=Qe,j+8}a.prototype.writeBigUInt64LE=tt(function(L,j=0){return Ie(this,L,j,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=tt(function(L,j=0){return Oe(this,L,j,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(L,j,Ee,Se){if(L=+L,j=j>>>0,!Se){const cn=Math.pow(2,8*Ee-1);Be(this,L,j,Ee,cn-1,-cn)}let Ke=0,Qe=1,Gt=0;for(this[j]=L&255;++Ke<Ee&&(Qe*=256);)L<0&&Gt===0&&this[j+Ke-1]!==0&&(Gt=1),this[j+Ke]=(L/Qe>>0)-Gt&255;return j+Ee},a.prototype.writeIntBE=function(L,j,Ee,Se){if(L=+L,j=j>>>0,!Se){const cn=Math.pow(2,8*Ee-1);Be(this,L,j,Ee,cn-1,-cn)}let Ke=Ee-1,Qe=1,Gt=0;for(this[j+Ke]=L&255;--Ke>=0&&(Qe*=256);)L<0&&Gt===0&&this[j+Ke+1]!==0&&(Gt=1),this[j+Ke]=(L/Qe>>0)-Gt&255;return j+Ee},a.prototype.writeInt8=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,1,127,-128),L<0&&(L=255+L+1),this[j]=L&255,j+1},a.prototype.writeInt16LE=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,2,32767,-32768),this[j]=L&255,this[j+1]=L>>>8,j+2},a.prototype.writeInt16BE=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,2,32767,-32768),this[j]=L>>>8,this[j+1]=L&255,j+2},a.prototype.writeInt32LE=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,4,2147483647,-2147483648),this[j]=L&255,this[j+1]=L>>>8,this[j+2]=L>>>16,this[j+3]=L>>>24,j+4},a.prototype.writeInt32BE=function(L,j,Ee){return L=+L,j=j>>>0,Ee||Be(this,L,j,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[j]=L>>>24,this[j+1]=L>>>16,this[j+2]=L>>>8,this[j+3]=L&255,j+4},a.prototype.writeBigInt64LE=tt(function(L,j=0){return Ie(this,L,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=tt(function(L,j=0){return Oe(this,L,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $e(ae,L,j,Ee,Se,Ke){if(j+Ee>ae.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function Ve(ae,L,j,Ee,Se){return L=+L,j=j>>>0,Se||$e(ae,L,j,4),i.write(ae,L,j,Ee,23,4),j+4}a.prototype.writeFloatLE=function(L,j,Ee){return Ve(this,L,j,!0,Ee)},a.prototype.writeFloatBE=function(L,j,Ee){return Ve(this,L,j,!1,Ee)};function ot(ae,L,j,Ee,Se){return L=+L,j=j>>>0,Se||$e(ae,L,j,8),i.write(ae,L,j,Ee,52,8),j+8}a.prototype.writeDoubleLE=function(L,j,Ee){return ot(this,L,j,!0,Ee)},a.prototype.writeDoubleBE=function(L,j,Ee){return ot(this,L,j,!1,Ee)},a.prototype.copy=function(L,j,Ee,Se){if(!a.isBuffer(L))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Se&&Se!==0&&(Se=this.length),j>=L.length&&(j=L.length),j||(j=0),Se>0&&Se<Ee&&(Se=Ee),Se===Ee||L.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),L.length-j<Se-Ee&&(Se=L.length-j+Ee);const Ke=Se-Ee;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(j,Ee,Se):Uint8Array.prototype.set.call(L,this.subarray(Ee,Se),j),Ke},a.prototype.fill=function(L,j,Ee,Se){if(typeof L=="string"){if(typeof j=="string"?(Se=j,j=0,Ee=this.length):typeof Ee=="string"&&(Se=Ee,Ee=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!a.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(L.length===1){const Qe=L.charCodeAt(0);(Se==="utf8"&&Qe<128||Se==="latin1")&&(L=Qe)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(j<0||this.length<j||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=j)return this;j=j>>>0,Ee=Ee===void 0?this.length:Ee>>>0,L||(L=0);let Ke;if(typeof L=="number")for(Ke=j;Ke<Ee;++Ke)this[Ke]=L;else{const Qe=a.isBuffer(L)?L:a.from(L,Se),Gt=Qe.length;if(Gt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(Ke=0;Ke<Ee-j;++Ke)this[Ke+j]=Qe[Ke%Gt]}return this};const ut={};function gt(ae,L,j){ut[ae]=class extends j{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Se,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}gt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),gt("ERR_INVALID_ARG_TYPE",function(ae,L){return`The "${ae}" argument must be of type number. Received type ${typeof L}`},TypeError),gt("ERR_OUT_OF_RANGE",function(ae,L,j){let Ee=`The value of "${ae}" is out of range.`,Se=j;return Number.isInteger(j)&&Math.abs(j)>2**32?Se=Mt(String(j)):typeof j=="bigint"&&(Se=String(j),(j>BigInt(2)**BigInt(32)||j<-(BigInt(2)**BigInt(32)))&&(Se=Mt(Se)),Se+="n"),Ee+=` It must be ${L}. Received ${Se}`,Ee},RangeError);function Mt(ae){let L="",j=ae.length;const Ee=ae[0]==="-"?1:0;for(;j>=Ee+4;j-=3)L=`_${ae.slice(j-3,j)}${L}`;return`${ae.slice(0,j)}${L}`}function ct(ae,L,j){$t(L,"offset"),(ae[L]===void 0||ae[L+j]===void 0)&&Ye(L,ae.length-(j+1))}function xt(ae,L,j,Ee,Se,Ke){if(ae>j||ae<L){const Qe=typeof L=="bigint"?"n":"";let Gt;throw Ke>3?L===0||L===BigInt(0)?Gt=`>= 0${Qe} and < 2${Qe} ** ${(Ke+1)*8}${Qe}`:Gt=`>= -(2${Qe} ** ${(Ke+1)*8-1}${Qe}) and < 2 ** ${(Ke+1)*8-1}${Qe}`:Gt=`>= ${L}${Qe} and <= ${j}${Qe}`,new ut.ERR_OUT_OF_RANGE("value",Gt,ae)}ct(Ee,Se,Ke)}function $t(ae,L){if(typeof ae!="number")throw new ut.ERR_INVALID_ARG_TYPE(L,"number",ae)}function Ye(ae,L,j){throw Math.floor(ae)!==ae?($t(ae,j),new ut.ERR_OUT_OF_RANGE(j||"offset","an integer",ae)):L<0?new ut.ERR_BUFFER_OUT_OF_BOUNDS:new ut.ERR_OUT_OF_RANGE(j||"offset",`>= ${j?1:0} and <= ${L}`,ae)}const sn=/[^+/0-9A-Za-z-_]/g;function En(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(sn,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function Ht(ae,L){L=L||1/0;let j;const Ee=ae.length;let Se=null;const Ke=[];for(let Qe=0;Qe<Ee;++Qe){if(j=ae.charCodeAt(Qe),j>55295&&j<57344){if(!Se){if(j>56319){(L-=3)>-1&&Ke.push(239,191,189);continue}else if(Qe+1===Ee){(L-=3)>-1&&Ke.push(239,191,189);continue}Se=j;continue}if(j<56320){(L-=3)>-1&&Ke.push(239,191,189),Se=j;continue}j=(Se-55296<<10|j-56320)+65536}else Se&&(L-=3)>-1&&Ke.push(239,191,189);if(Se=null,j<128){if((L-=1)<0)break;Ke.push(j)}else if(j<2048){if((L-=2)<0)break;Ke.push(j>>6|192,j&63|128)}else if(j<65536){if((L-=3)<0)break;Ke.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((L-=4)<0)break;Ke.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return Ke}function Rt(ae){const L=[];for(let j=0;j<ae.length;++j)L.push(ae.charCodeAt(j)&255);return L}function vn(ae,L){let j,Ee,Se;const Ke=[];for(let Qe=0;Qe<ae.length&&!((L-=2)<0);++Qe)j=ae.charCodeAt(Qe),Ee=j>>8,Se=j%256,Ke.push(Se),Ke.push(Ee);return Ke}function Te(ae){return t.toByteArray(En(ae))}function F(ae,L,j,Ee){let Se;for(Se=0;Se<Ee&&!(Se+j>=L.length||Se>=ae.length);++Se)L[Se+j]=ae[Se];return Se}function O(ae,L){return ae instanceof L||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===L.name}function ye(ae){return ae!==ae}const We=function(){const ae="0123456789abcdef",L=new Array(256);for(let j=0;j<16;++j){const Ee=j*16;for(let Se=0;Se<16;++Se)L[Ee+Se]=ae[j]+ae[Se]}return L}();function tt(ae){return typeof BigInt>"u"?Ge:ae}function Ge(){throw new Error("BigInt not supported")}})(JA);window.Buffer=JA.Buffer;l3.render(ft.jsx(DE.StrictMode,{children:ft.jsx(yF,{})}),document.getElementById("root"));
